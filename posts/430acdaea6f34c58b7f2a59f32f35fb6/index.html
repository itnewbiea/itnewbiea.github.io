<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用pyecharts渲染图片的selenium方式报错处理 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用pyecharts渲染图片的selenium方式报错处理" />
<meta property="og:description" content="使用Python3 &#43; selenium 3下环境渲染图片WebDriverException 个人环境： Anaconda 3, Python3.6, window 7, selenium 3
使用 pyecharts 渲染成图片一直是开发者比较关心的功能，pyecharts 提供了 selenium, phantomjs 和 pyppeteer 三种方式。具体可以参看官网：https://pyecharts.org/#/zh-cn/render_images
snapshot-selenium 是 pyecharts &#43; selenium 渲染图片的扩展，使用 selenium 需要配置 browser driver，这部分可以参考 selenium-python 相关介绍，推荐使用 Chrome 浏览器，可以开启 headless 模式。目前支持 Chrome, Safari。
渲染为图片的时候需要额外的第三方程序包支持，包名：selenium，可以通过执行：pip install selenium 执行安装。渲染为图片的时候，需要用的函数为：make_snapshot。
from pyecharts.charts import Bar # 导出图片，需要引入以下对象 from pyecharts.render import make_snapshot from snapshot_selenium import snapshot bar = Bar() bar.add_xaxis([&#34;衬衫&#34;, &#34;羊毛衫&#34;, &#34;雪纺衫&#34;, &#34;裤子&#34;, &#34;高跟鞋&#34;, &#34;袜子&#34;]) bar.add_yaxis(&#34;商家 A&#34;, [5, 20, 36, 10, 75, 90]) # render 会生成本地 HTML 文件，默认会在当前目录生成 render." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/430acdaea6f34c58b7f2a59f32f35fb6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-30T18:26:06+08:00" />
<meta property="article:modified_time" content="2022-03-30T18:26:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用pyecharts渲染图片的selenium方式报错处理</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Python3__selenium_3WebDriverException_0"></a>使用Python3 + selenium 3下环境渲染图片WebDriverException</h2> 
<p>个人环境： Anaconda 3, Python3.6, window 7, selenium 3</p> 
<p>使用 pyecharts 渲染成图片一直是开发者比较关心的功能，pyecharts 提供了 selenium, phantomjs 和 pyppeteer 三种方式。具体可以参看官网：<a href="https://pyecharts.org/#/zh-cn/render_images" rel="nofollow">https://pyecharts.org/#/zh-cn/render_images</a></p> 
<p>snapshot-selenium 是 pyecharts + selenium 渲染图片的扩展，使用 selenium 需要配置 browser driver，这部分可以参考 <a href="https://selenium-python.readthedocs.io/installation.html#drivers" rel="nofollow">selenium-python</a> 相关介绍，推荐使用 Chrome 浏览器，可以开启 headless 模式。目前支持 Chrome, Safari。</p> 
<p>渲染为图片的时候需要额外的第三方程序包支持，包名：selenium，可以通过执行：pip install selenium 执行安装。渲染为图片的时候，需要用的函数为：make_snapshot。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> Bar

<span class="token comment"># 导出图片，需要引入以下对象</span>
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>render <span class="token keyword">import</span> make_snapshot
<span class="token keyword">from</span> snapshot_selenium <span class="token keyword">import</span> snapshot

bar <span class="token operator">=</span> Bar<span class="token punctuation">(</span><span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"衬衫"</span><span class="token punctuation">,</span> <span class="token string">"羊毛衫"</span><span class="token punctuation">,</span> <span class="token string">"雪纺衫"</span><span class="token punctuation">,</span> <span class="token string">"裤子"</span><span class="token punctuation">,</span> <span class="token string">"高跟鞋"</span><span class="token punctuation">,</span> <span class="token string">"袜子"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">"商家 A"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># render 会生成本地 HTML 文件，默认会在当前目录生成 render.html 文件</span>
<span class="token comment"># 也可以传入路径参数，如 bar.render("mycharts.html")</span>
<span class="token comment"># 默认模式</span>
bar<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 指定路径</span>
bar<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">"mycharts.html"</span><span class="token punctuation">)</span>

<span class="token comment"># 渲染成图片 </span>
make_snapshot<span class="token punctuation">(</span>snapshot<span class="token punctuation">,</span> bar<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"bar0.png"</span><span class="token punctuation">)</span>

</code></pre> 
<p>这是第一次直接执行了，然后报错：<br> <code>WebDriverException: 'chromedriver' executable needs to be in PATH. Please see https://sites.google.com/a/chromium.org/chromedriver/home</code>即谷歌浏览器的驱动不在PATH下。</p> 
<p>详细如下图所示：<br> <img src="https://images2.imgbox.com/35/59/mn1Sxhaw_o.png" alt="bug"><br> 这一错误是因为没有配置好chromedriver，怎么配置呢？（我用的是Chrome）</p> 
<h3><a id="chromedriverexe_38"></a>方法一：下载对应版本的chromedriver.exe放到谷歌浏览器的安装文件夹下</h3> 
<p>pyecharts生成图片时，需要完成两件事：</p> 
<ol><li>安装snapshot_selenium: <code>pip install snapshot_selenium</code>(需要先安装selenium: <code>pip install selenium</code>)</li><li>设置chromedriver驱动到PATH</li></ol> 
<p>具体步骤如下：</p> 
<ol><li> <p>打开Chrome输入<code>chrome://version</code>来查看Chrome版本信息，如下图所示，我的版本是85<br> <img src="https://images2.imgbox.com/c3/9f/bXs5CM11_o.png" alt="chrome info"></p> </li><li> <p>访问网站，然后选择合适版本的driver，下载到你自定义的位置，进行配置<br> <img src="https://images2.imgbox.com/e7/28/9NcA8eCT_o.png" alt="chrome version"><img src="https://images2.imgbox.com/e6/f9/3Ut3pzhm_o.png" alt="index 85"><img src="https://images2.imgbox.com/eb/af/mNGxLtcY_o.png" alt="note">note.txt里可以查看对应的版本信息。</p> </li><li> <p>配置如下：将下载的zip包解压后，把chromedriver.exe拷贝到谷歌浏览器的安装目录，同时配置PATH 即可。<br> <img src="https://images2.imgbox.com/63/37/RIXpwWP5_o.png" alt="配置">打开开始菜单-&gt;我的电脑（或计算机）-&gt;系统属性-&gt;高级系统设置-&gt;环境变量，编辑用户变量里的PATH，在最后面添加;C:\Users\Xu\AppData\Local\Google\Chrome\Application（我的Chrome安装目录）</p> </li></ol> 
<p>这里，我分别试过在系统的环境变量的用户变量的PATH和系统变量的PATH下，添加chromedriver.exe所在的路径，运行程序都失败了。</p> 
<h3><a id="chromedriverexepython_57"></a>方法二：将chromedriver.exe添加到python的根目录下</h3> 
<p>我直接放在我的Anaconda目录下：<br> <img src="https://images2.imgbox.com/db/31/AFAWjPa6_o.png" alt="Anaconda下添加chromedriver">你也可以直接添加到你的Python安装目录下：<br> <img src="https://images2.imgbox.com/47/8c/14O3g8ic_o.png" alt="Python根目录下添加chromedriver"><br> 第二个方法，我可以成功运行程序。</p> 
<p>欢迎各位关注我的个人公众号：<strong>HsuDan</strong>，我将分享更多自己的学习心得、避坑总结、面试经验、AI最新技术资讯。</p> 
<div align="center"> 
 <img src="https://images2.imgbox.com/9a/14/mTu4ql4V_o.png" width="50%"> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5b7adfba183e739525ed7a736cf0db28/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2021「AI中国」评选</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/14d7e7e4e0c88c4db55d939e5f318f92/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">jupyter-notebook的常用设置技巧</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>