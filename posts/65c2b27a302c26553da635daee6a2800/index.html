<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>openstack基础平台部署 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="openstack基础平台部署" />
<meta property="og:description" content="openstack基础平台部署目录 OpenStack基础平台部署案例准备1.规划节点2.基础准备 案例实施1.环境配置(1)配置主机名(2)配置域名解析(3)关闭防火墙和Seinux(4)配置yum环境(5)划分分区 2.Openstack云平台部署(1)配置环境变量(2)部署OpenStack云平台基础环境(3)部署Mariadb数据库及Rabbit消息队列服务(4)部署Keystone服务(5)部署Glance服务(6)部署Nova服务(7)部署Neutron服务(8)部署Dashboard服务(9)部署Cinder服务(10)部署Swift服务 3.创建cirros云主机(1)上传镜像(2)创建网络(3)创建云主机类型(4)创建云主机(5)cirros虚拟机运行 OpenStack基础平台部署 案例准备 1.规划节点 IP主机名节点192.168.100.10Controller控制节点192.168.100.20Compute计算节点 2.基础准备 使用VMware创建两台云主机(使用Centos7.9镜像)，云主机类型为4cpu，8G内存，100G磁盘及20G临时磁盘；需要给云主机两个网络接口，网络接口1为外部网络，作为云主机通信和管理使用，网络接口2设置为内部网络，作为一个网卡设备。
案例实施 1.环境配置 (1)配置主机名 [root@localhost ~]# hostnamectl set-hostname controller [root@localhost ~]# bash bash [root@controller ~]# [root@localhost ~]# hostnamectl set-hostname compute [root@localhost ~]# bash [root@compute ~]# (2)配置域名解析 [root@controller ~]# cat /etc/hosts ... 192.168.100.10 controller 192.168.100.20 compute [root@compute ~]# cat /etc/hosts ... 192.168.100.10 controller 192.168.100.20 compute (3)关闭防火墙和Seinux controller和compute都关闭
[root@controller ~]# systemctl stop firewalld &amp;&amp; systemctl disable firewalld Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service. Removed symlink /etc/systemd/system/dbus-org." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/65c2b27a302c26553da635daee6a2800/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-13T17:11:17+08:00" />
<meta property="article:modified_time" content="2023-09-13T17:11:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">openstack基础平台部署</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>openstack基础平台部署目录</h4> 
 <ul><li><ul><li><ul><li><a href="#OpenStack_2" rel="nofollow">OpenStack基础平台部署</a></li><li><a href="#_4" rel="nofollow">案例准备</a></li><li><ul><li><a href="#1_6" rel="nofollow">1.规划节点</a></li><li><a href="#2_13" rel="nofollow">2.基础准备</a></li></ul> 
    </li><li><a href="#_17" rel="nofollow">案例实施</a></li><li><ul><li><a href="#1_19" rel="nofollow">1.环境配置</a></li><li><ul><li><a href="#1_21" rel="nofollow">(1)配置主机名</a></li><li><a href="#2_34" rel="nofollow">(2)配置域名解析</a></li><li><a href="#3Seinux_48" rel="nofollow">(3)关闭防火墙和Seinux</a></li><li><a href="#4yum_65" rel="nofollow">(4)配置yum环境</a></li><li><a href="#5_127" rel="nofollow">(5)划分分区</a></li></ul> 
     </li><li><a href="#2Openstack_238" rel="nofollow">2.Openstack云平台部署</a></li><li><ul><li><a href="#1_242" rel="nofollow">(1)配置环境变量</a></li><li><a href="#2OpenStack_323" rel="nofollow">(2)部署OpenStack云平台基础环境</a></li><li><a href="#3MariadbRabbit_334" rel="nofollow">(3)部署Mariadb数据库及Rabbit消息队列服务</a></li><li><a href="#4Keystone_342" rel="nofollow">(4)部署Keystone服务</a></li><li><a href="#5Glance_350" rel="nofollow">(5)部署Glance服务</a></li><li><a href="#6Nova_358" rel="nofollow">(6)部署Nova服务</a></li><li><a href="#7Neutron_373" rel="nofollow">(7)部署Neutron服务</a></li><li><a href="#8Dashboard_387" rel="nofollow">(8)部署Dashboard服务</a></li><li><a href="#9Cinder_407" rel="nofollow">(9)部署Cinder服务</a></li><li><a href="#10Swift_421" rel="nofollow">(10)部署Swift服务</a></li></ul> 
     </li><li><a href="#3cirros_435" rel="nofollow">3.创建cirros云主机</a></li><li><ul><li><a href="#1_437" rel="nofollow">(1)上传镜像</a></li><li><a href="#2_469" rel="nofollow">(2)创建网络</a></li><li><a href="#3_538" rel="nofollow">(3)创建云主机类型</a></li><li><a href="#4_559" rel="nofollow">(4)创建云主机</a></li><li><a href="#5cirros_610" rel="nofollow">(5)cirros虚拟机运行</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="OpenStack_2"></a>OpenStack基础平台部署</h4> 
<h4><a id="_4"></a>案例准备</h4> 
<h5><a id="1_6"></a>1.规划节点</h5> 
<table><thead><tr><th>IP</th><th>主机名</th><th>节点</th></tr></thead><tbody><tr><td>192.168.100.10</td><td>Controller</td><td>控制节点</td></tr><tr><td>192.168.100.20</td><td>Compute</td><td>计算节点</td></tr></tbody></table> 
<h5><a id="2_13"></a>2.基础准备</h5> 
<p>使用VMware创建两台云主机(使用Centos7.9镜像)，云主机类型为4cpu，8G内存，100G磁盘及20G临时磁盘；需要给云主机两个网络接口，网络接口1为外部网络，作为云主机通信和管理使用，网络接口2设置为内部网络，作为一个网卡设备。</p> 
<h4><a id="_17"></a>案例实施</h4> 
<h5><a id="1_19"></a>1.环境配置</h5> 
<h6><a id="1_21"></a>(1)配置主机名</h6> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># hostnamectl set-hostname controller</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token function">bash</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># hostnamectl set-hostname compute</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> 
<h6><a id="2_34"></a>(2)配置域名解析</h6> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/hosts</span>
<span class="token punctuation">..</span>.
<span class="token number">192.168</span>.100.10 controller
<span class="token number">192.168</span>.100.20 compute

<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/hosts</span>
<span class="token punctuation">..</span>.
<span class="token number">192.168</span>.100.10 controller
<span class="token number">192.168</span>.100.20 compute
</code></pre> 
<h6><a id="3Seinux_48"></a>(3)关闭防火墙和Seinux</h6> 
<p>controller和compute都关闭</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop firewalld &amp;&amp; systemctl disable firewalld</span>
Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.
Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/sysconfig/selinux </span>

<span class="token punctuation">..</span>.

<span class="token assign-left variable">SELINUX</span><span class="token operator">=</span>disabled

<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># setenforce 0</span>

</code></pre> 
<h6><a id="4yum_65"></a>(4)配置yum环境</h6> 
<p><strong>挂载镜像</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># mkdir /opt/{centos,iaas}</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># ls /opt/</span>
centos  iaas
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># mount -o loop chinaskills_cloud_iaas_v2.0.3.iso /mnt/</span>
c^Hmount: /dev/loop0 写保护，将以只读方式挂载
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># cp -r /mnt/* /opt/iaas/</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># umount /mnt/</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># mount -o loop CentOS-7-x86_64-DVD-2009.iso /mnt/</span>
mount: /dev/loop0 写保护，将以只读方式挂载
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># cp -r /mnt/* /opt/centos/</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># umount /mnt/</span>
</code></pre> 
<p><strong>配置Controller节点Yum安装源文件local.repo,指定本地文件目录路径</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># mv /etc/yum.repos.d/* /media/</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/yum.repos.d/local.repo</span>
<span class="token punctuation">[</span>centos<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>centos
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>file:///opt/centos
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token punctuation">[</span>iaas<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>iaas
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>file:///opt/iaas/iaas-repo
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre> 
<p><strong>在Controller节点使用Yum安装vsftpd服务，并将/opt目录下的文件分享出去</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># yum install -y vsftpd</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># echo "anon_root=/opt" &gt;&gt; /etc/vsftpd/vsftpd.conf </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart vsftpd</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable vsftpd</span>
Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to /usr/lib/systemd/system/vsftpd.service.
</code></pre> 
<p><strong>配置Compute节点Yum源文件local.repo,指向Controller节点的共享文件目录路径</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># mv /etc/yum.repos.d/* /media/</span>
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/yum.repos.d/local.repo </span>
<span class="token punctuation">[</span>centos<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>centos
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>ftp://controller/centos
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token punctuation">[</span>iaas<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>iaas
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>ftp://controller/iaas/iaas-repo
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre> 
<h6><a id="5_127"></a>(5)划分分区</h6> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># lsblk</span>
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda      <span class="token number">8</span>:0    <span class="token number">0</span>  100G  <span class="token number">0</span> disk 
├─sda1   <span class="token number">8</span>:1    <span class="token number">0</span>    1G  <span class="token number">0</span> part /boot
├─sda2   <span class="token number">8</span>:2    <span class="token number">0</span> <span class="token number">10</span>.1G  <span class="token number">0</span> part /home
├─sda3   <span class="token number">8</span>:3    <span class="token number">0</span>  <span class="token number">7</span>.9G  <span class="token number">0</span> part <span class="token punctuation">[</span>SWAP<span class="token punctuation">]</span>
├─sda4   <span class="token number">8</span>:4    <span class="token number">0</span>    1K  <span class="token number">0</span> part 
└─sda5   <span class="token number">8</span>:5    <span class="token number">0</span>   81G  <span class="token number">0</span> part /
sdb      <span class="token number">8</span>:16   <span class="token number">0</span>   20G  <span class="token number">0</span> disk 
sr0     <span class="token number">11</span>:0    <span class="token number">1</span>  <span class="token number">4</span>.4G  <span class="token number">0</span> rom  
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># fdisk /dev/sdb</span>
欢迎使用 <span class="token function">fdisk</span> <span class="token punctuation">(</span>util-linux <span class="token number">2.23</span>.2<span class="token punctuation">)</span>。

更改将停留在内存中，直到您决定将更改写入磁盘。
使用写入命令前请三思。

Device does not contain a recognized partition table
使用磁盘标识符 0x389319d7 创建新的 DOS 磁盘标签。

命令<span class="token punctuation">(</span>输入 m 获取帮助<span class="token punctuation">)</span>：N
Partition type:
   p   primary <span class="token punctuation">(</span><span class="token number">0</span> primary, <span class="token number">0</span> extended, <span class="token number">4</span> <span class="token function">free</span><span class="token punctuation">)</span>
   e   extended
Select <span class="token punctuation">(</span>default p<span class="token punctuation">)</span>: 
Using default response p
分区号 <span class="token punctuation">(</span><span class="token number">1</span>-4，默认 <span class="token number">1</span><span class="token punctuation">)</span>：
起始 扇区 <span class="token punctuation">(</span><span class="token number">2048</span>-41943039，默认为 <span class="token number">2048</span><span class="token punctuation">)</span>：
将使用默认值 <span class="token number">2048</span>
Last 扇区, +扇区 or +size<span class="token punctuation">{<!-- --></span>K,M,G<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token number">2048</span>-41943039，默认为 <span class="token number">41943039</span><span class="token punctuation">)</span>：+5G
分区 <span class="token number">1</span> 已设置为 Linux 类型，大小设为 <span class="token number">5</span> GiB

命令<span class="token punctuation">(</span>输入 m 获取帮助<span class="token punctuation">)</span>：N
Partition type:
   p   primary <span class="token punctuation">(</span><span class="token number">1</span> primary, <span class="token number">0</span> extended, <span class="token number">3</span> <span class="token function">free</span><span class="token punctuation">)</span>
   e   extended
Select <span class="token punctuation">(</span>default p<span class="token punctuation">)</span>: 
Using default response p
分区号 <span class="token punctuation">(</span><span class="token number">2</span>-4，默认 <span class="token number">2</span><span class="token punctuation">)</span>：
起始 扇区 <span class="token punctuation">(</span><span class="token number">10487808</span>-41943039，默认为 <span class="token number">10487808</span><span class="token punctuation">)</span>：
将使用默认值 <span class="token number">10487808</span>
Last 扇区, +扇区 or +size<span class="token punctuation">{<!-- --></span>K,M,G<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token number">10487808</span>-41943039，默认为 <span class="token number">41943039</span><span class="token punctuation">)</span>：+5G
分区 <span class="token number">2</span> 已设置为 Linux 类型，大小设为 <span class="token number">5</span> GiB

命令<span class="token punctuation">(</span>输入 m 获取帮助<span class="token punctuation">)</span>：N
Partition type:
   p   primary <span class="token punctuation">(</span><span class="token number">2</span> primary, <span class="token number">0</span> extended, <span class="token number">2</span> <span class="token function">free</span><span class="token punctuation">)</span>
   e   extended
Select <span class="token punctuation">(</span>default p<span class="token punctuation">)</span>: 
Using default response p
分区号 <span class="token punctuation">(</span><span class="token number">3,4</span>，默认 <span class="token number">3</span><span class="token punctuation">)</span>：
起始 扇区 <span class="token punctuation">(</span><span class="token number">20973568</span>-41943039，默认为 <span class="token number">20973568</span><span class="token punctuation">)</span>：
将使用默认值 <span class="token number">20973568</span>
Last 扇区, +扇区 or +size<span class="token punctuation">{<!-- --></span>K,M,G<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token number">20973568</span>-41943039，默认为 <span class="token number">41943039</span><span class="token punctuation">)</span>：+5G
分区 <span class="token number">3</span> 已设置为 Linux 类型，大小设为 <span class="token number">5</span> GiB

命令<span class="token punctuation">(</span>输入 m 获取帮助<span class="token punctuation">)</span>：N
Partition type:
   p   primary <span class="token punctuation">(</span><span class="token number">3</span> primary, <span class="token number">0</span> extended, <span class="token number">1</span> <span class="token function">free</span><span class="token punctuation">)</span>
   e   extended
Select <span class="token punctuation">(</span>default e<span class="token punctuation">)</span>: P
已选择分区 <span class="token number">4</span>
起始 扇区 <span class="token punctuation">(</span><span class="token number">31459328</span>-41943039，默认为 <span class="token number">31459328</span><span class="token punctuation">)</span>：
将使用默认值 <span class="token number">31459328</span>
Last 扇区, +扇区 or +size<span class="token punctuation">{<!-- --></span>K,M,G<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token number">31459328</span>-41943039，默认为 <span class="token number">41943039</span><span class="token punctuation">)</span>：+4G
分区 <span class="token number">4</span> 已设置为 Linux 类型，大小设为 <span class="token number">4</span> GiB

命令<span class="token punctuation">(</span>输入 m 获取帮助<span class="token punctuation">)</span>：W
The partition table has been altered<span class="token operator">!</span>

Calling ioctl<span class="token punctuation">(</span><span class="token punctuation">)</span> to re-read partition table.
正在同步磁盘。
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># lsblk</span>
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda      <span class="token number">8</span>:0    <span class="token number">0</span>  100G  <span class="token number">0</span> disk 
├─sda1   <span class="token number">8</span>:1    <span class="token number">0</span>    1G  <span class="token number">0</span> part /boot
├─sda2   <span class="token number">8</span>:2    <span class="token number">0</span> <span class="token number">10</span>.1G  <span class="token number">0</span> part /home
├─sda3   <span class="token number">8</span>:3    <span class="token number">0</span>  <span class="token number">7</span>.9G  <span class="token number">0</span> part <span class="token punctuation">[</span>SWAP<span class="token punctuation">]</span>
├─sda4   <span class="token number">8</span>:4    <span class="token number">0</span>    1K  <span class="token number">0</span> part 
└─sda5   <span class="token number">8</span>:5    <span class="token number">0</span>   81G  <span class="token number">0</span> part /
sdb      <span class="token number">8</span>:16   <span class="token number">0</span>   20G  <span class="token number">0</span> disk 
├─sdb1   <span class="token number">8</span>:17   <span class="token number">0</span>    5G  <span class="token number">0</span> part 
├─sdb2   <span class="token number">8</span>:18   <span class="token number">0</span>    5G  <span class="token number">0</span> part 
├─sdb3   <span class="token number">8</span>:19   <span class="token number">0</span>    5G  <span class="token number">0</span> part 
└─sdb4   <span class="token number">8</span>:20   <span class="token number">0</span>    4G  <span class="token number">0</span> part 
sr0     <span class="token number">11</span>:0    <span class="token number">1</span>  <span class="token number">4</span>.4G  <span class="token number">0</span> rom  
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> 
<p>(6)配置无密钥SSH</p> 
<p><strong>配置controller节点可以无密钥访问compute节点，配置完成后尝试 ssh连接compute</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># ssh-keygen</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id compute</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># ssh compute</span>
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
</code></pre> 
<p><strong>配置compute节点可以无密钥访问controller节点，配置完成后尝试 ssh连接controller</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># ssh-keygen</span>
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id controller</span>
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># ssh controller</span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
</code></pre> 
<h5><a id="2Openstack_238"></a>2.Openstack云平台部署</h5> 
<p><strong>完成基础环境配置部署后，就可以开始部署安装OpenStack云平台了。</strong></p> 
<h6><a id="1_242"></a>(1)配置环境变量</h6> 
<p><strong>在Controller节点和compute节点安装Openstack云平台的安装脚本软件包</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># yum install -y openstack-iaas</span>
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># yum install -y openstack-iaas</span>
</code></pre> 
<p><strong>在controller节点和compute节点配置环境变量文件/etc/openstack/openrc.sh 按“i”键进入openrc.sh编辑模式</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/openstack/openrc.sh </span>
</code></pre> 
<p><strong>先把文件预处理</strong></p> 
<pre><code class="prism language-shell">:%s/^.//g   <span class="token comment"># 删除每一行开头的#</span>
:%s/PASS<span class="token operator">=</span>/PASS<span class="token operator">=</span>Abc@1234  <span class="token comment"># 修改密码(密码可以设置成其他)</span>
:%g/^<span class="token comment">#/d    # 删除注释内容</span>
:%g/^$/d    <span class="token comment"># 删除空行</span>
</code></pre> 
<pre><code class="prism language-shell"><span class="token assign-left variable">HOST_IP</span><span class="token operator">=</span><span class="token number">192.168</span>.100.10       
<span class="token assign-left variable">HOST_PASS</span><span class="token operator">=</span>Abc@1234          <span class="token comment"># controller节点root用户密码</span>
<span class="token assign-left variable">HOST_NAME</span><span class="token operator">=</span>controller
<span class="token assign-left variable">HOST_IP_NODE</span><span class="token operator">=</span><span class="token number">192.168</span>.100.20
<span class="token assign-left variable">HOST_PASS_NODE</span><span class="token operator">=</span>Abc@1234      <span class="token comment"># compute节点root用户密码</span>
<span class="token assign-left variable">HOST_NAME_NODE</span><span class="token operator">=</span>compute
<span class="token assign-left variable">network_segment_IP</span><span class="token operator">=</span><span class="token number">192.168</span>.100.0/24
<span class="token assign-left variable">RABBIT_USER</span><span class="token operator">=</span>openstack
<span class="token assign-left variable">RABBIT_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">DB_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">DOMAIN_NAME</span><span class="token operator">=</span>demo
<span class="token assign-left variable">ADMIN_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">DEMO_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">KEYSTONE_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">GLANCE_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">GLANCE_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">PLACEMENT_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">PLACEMENT_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">NOVA_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">NOVA_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">NEUTRON_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">NEUTRON_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">METADATA_SECRET</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">INTERFACE_NAME</span><span class="token operator">=</span>ens34          <span class="token comment"># 云主机第二张网卡名称</span>
<span class="token assign-left variable">Physical_NAME</span><span class="token operator">=</span>provider
<span class="token assign-left variable">minvlan</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">maxvlan</span><span class="token operator">=</span><span class="token number">1000</span>
<span class="token assign-left variable">CINDER_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">CINDER_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">BLOCK_DISK</span><span class="token operator">=</span>sdb1               <span class="token comment"># compute 节点第一个分区名称</span>
<span class="token assign-left variable">SWIFT_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">OBJECT_DISK</span><span class="token operator">=</span>sdb2              <span class="token comment"># compute 节点第二个分区名称</span>
<span class="token assign-left variable">STORAGE_LOCAL_NET_IP</span><span class="token operator">=</span><span class="token number">192.168</span>.100.20
<span class="token assign-left variable">TROVE_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">TROVE_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">HEAT_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">HEAT_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">CEILOMETER_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">CEILOMETER_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">AODH_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">AODH_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">ZUN_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">ZUN_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">KURYR_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">OCTAVIA_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">OCTAVIA_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">MANILA_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">MANILA_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">SHARE_DISK</span><span class="token operator">=</span>sdb3               <span class="token comment"># compute 节点第三个分区名称</span>
<span class="token assign-left variable">CLOUDKITTY_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">CLOUDKITTY_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">BARBICAN_DBPASS</span><span class="token operator">=</span>Abc@1234
<span class="token assign-left variable">BARBICAN_PASS</span><span class="token operator">=</span>Abc@1234
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># scp /etc/openstack/openrc.sh compute:/etc/openstack/openrc.sh </span>
</code></pre> 
<h6><a id="2OpenStack_323"></a>(2)部署OpenStack云平台基础环境</h6> 
<p><strong>在Controller节点和Compute节点都执行脚本iaas-pre-host.sh部署Openstack云平台基础环境。</strong></p> 
<p><strong><mark>完成后使用reboot命令重启虚拟机生效配置</mark></strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-pre-host.sh</span>
<span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># iaas-pre-host.sh</span>
</code></pre> 
<h6><a id="3MariadbRabbit_334"></a>(3)部署Mariadb数据库及Rabbit消息队列服务</h6> 
<p><strong>在Controller节点执行</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-mysql.sh </span>
</code></pre> 
<h6><a id="4Keystone_342"></a>(4)部署Keystone服务</h6> 
<p><strong>在Controller节点执行</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-keystone.sh </span>
</code></pre> 
<h6><a id="5Glance_350"></a>(5)部署Glance服务</h6> 
<p>在Controller节点执行</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-glance.sh </span>
</code></pre> 
<h6><a id="6Nova_358"></a>(6)部署Nova服务</h6> 
<p><strong>在controller节点执行脚本部署Nova组件的控制服务</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-placement.sh </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-nova-controller.sh </span>
</code></pre> 
<p><strong>执行完上面的脚本后，在compute节点执行脚本部署Nova组件的计算服务，这样就将compute节点的CPU、内存及磁盘资源添加到Openstack云平台时代资源池中了</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-nova-compute.sh </span>
</code></pre> 
<h6><a id="7Neutron_373"></a>(7)部署Neutron服务</h6> 
<p><strong>在controller节点执行脚本部署Neutron组件的控制服务</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-neutron-controller.sh </span>
</code></pre> 
<p><strong>在compute节点执行脚本部署Neutron组件的控制服务</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-neutron-compute.sh </span>
</code></pre> 
<h6><a id="8Dashboard_387"></a>(8)部署Dashboard服务</h6> 
<p><strong>在Controller节点执行脚本部署Dashboard组件服务</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-dashboard.sh</span>
</code></pre> 
<p>安装完成后，使用浏览器访问Openstack云平台，访问地址为:</p> 
<p>http://192.168.100.10/dashboard</p> 
<p>用户名为:admin</p> 
<p>密码为:Abc@1234</p> 
<p><img src="https://images2.imgbox.com/3e/e7/0Y8hhGLb_o.png" alt="image-20230201195835844"></p> 
<p><img src="https://images2.imgbox.com/93/8e/ojYWt2av_o.png" alt="image-20230201195923803"></p> 
<h6><a id="9Cinder_407"></a>(9)部署Cinder服务</h6> 
<p><strong>在Controller节点执行脚本部署Cinder组件的控制服务。</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-cinder-controller.sh </span>
</code></pre> 
<p><strong>controller节点脚本执行完成后，在compute节点执行脚本部署Cinder组件的计算服务</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-cinder-compute.sh </span>
</code></pre> 
<h6><a id="10Swift_421"></a>(10)部署Swift服务</h6> 
<p><strong>在controller节点执行脚本部署Swift组件的控制服务</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-swift-controller.sh </span>
</code></pre> 
<p><strong>controller节点执行完成后，在compute节点执行脚本部署swift组件的计算服务</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@compute ~<span class="token punctuation">]</span><span class="token comment"># iaas-install-swift-compute.sh </span>
</code></pre> 
<h5><a id="3cirros_435"></a>3.创建cirros云主机</h5> 
<h6><a id="1_437"></a>(1)上传镜像</h6> 
<p><strong>在controller节点下载镜像并上传cirros镜像</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># source /etc/keystone/admin-openrc.sh </span>
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># openstack image create --disk-format qcow2 --container-format bare --file cirros-0.3.4-x86_64-disk.img  cirros</span>
+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
<span class="token operator">|</span> Field            <span class="token operator">|</span> Value                                                                                                                                                                                      <span class="token operator">|</span>
+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
<span class="token operator">|</span> checksum         <span class="token operator">|</span> ee1eca47dc88f4879d8a229cc70a07c6                                                                                                                                                           <span class="token operator">|</span>
<span class="token operator">|</span> container_format <span class="token operator">|</span> bare                                                                                                                                                                                       <span class="token operator">|</span>
<span class="token operator">|</span> created_at       <span class="token operator">|</span> <span class="token number">2023</span>-02-01T20:09:10Z                                                                                                                                                                       <span class="token operator">|</span>
<span class="token operator">|</span> disk_format      <span class="token operator">|</span> qcow2                                                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">file</span>             <span class="token operator">|</span> /v2/images/d019b7a2-0826-420b-95d1-7d548129c0cc/file                                                                                                                                       <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>               <span class="token operator">|</span> d019b7a2-0826-420b-95d1-7d548129c0cc                                                                                                                                                       <span class="token operator">|</span>
<span class="token operator">|</span> min_disk         <span class="token operator">|</span> <span class="token number">0</span>                                                                                                                                                                                          <span class="token operator">|</span>
<span class="token operator">|</span> min_ram          <span class="token operator">|</span> <span class="token number">0</span>                                                                                                                                                                                          <span class="token operator">|</span>
<span class="token operator">|</span> name             <span class="token operator">|</span> cirros                                                                                                                                                                                     <span class="token operator">|</span>
<span class="token operator">|</span> owner            <span class="token operator">|</span> 6a021198465e4fa780e35a3ff4202ddf                                                                                                                                                           <span class="token operator">|</span>
<span class="token operator">|</span> properties       <span class="token operator">|</span> <span class="token assign-left variable">os_hash_algo</span><span class="token operator">=</span><span class="token string">'sha512'</span>, <span class="token assign-left variable">os_hash_value</span><span class="token operator">=</span><span class="token string">'1b03ca1bc3fafe448b90583c12f367949f8b0e665685979d95b004e48574b953316799e23240f4f739d1b5eb4c4ca24d38fdc6f4f9d8247a2bc64db25d6bbdb2'</span>, <span class="token assign-left variable">os_hidden</span><span class="token operator">=</span><span class="token string">'False'</span> <span class="token operator">|</span>
<span class="token operator">|</span> protected        <span class="token operator">|</span> False                                                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> schema           <span class="token operator">|</span> /v2/schemas/image                                                                                                                                                                          <span class="token operator">|</span>
<span class="token operator">|</span> size             <span class="token operator">|</span> <span class="token number">13287936</span>                                                                                                                                                                                   <span class="token operator">|</span>
<span class="token operator">|</span> status           <span class="token operator">|</span> active                                                                                                                                                                                     <span class="token operator">|</span>
<span class="token operator">|</span> tags             <span class="token operator">|</span>                                                                                                                                                                                            <span class="token operator">|</span>
<span class="token operator">|</span> updated_at       <span class="token operator">|</span> <span class="token number">2023</span>-02-01T20:09:10Z                                                                                                                                                                       <span class="token operator">|</span>
<span class="token operator">|</span> virtual_size     <span class="token operator">|</span> None                                                                                                                                                                                       <span class="token operator">|</span>
<span class="token operator">|</span> visibility       <span class="token operator">|</span> shared                                                                                                                                                                                     <span class="token operator">|</span>
+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</code></pre> 
<h6><a id="2_469"></a>(2)创建网络</h6> 
<p><strong>在controller节点使用Openstack相关命令创建一个net网络</strong></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># openstack network create net --mtu 1350</span>
+---------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
<span class="token operator">|</span> Field                     <span class="token operator">|</span> Value                                                                                                                                                <span class="token operator">|</span>
+---------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
<span class="token operator">|</span> admin_state_up            <span class="token operator">|</span> UP                                                                                                                                                   <span class="token operator">|</span>
<span class="token operator">|</span> availability_zone_hints   <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> availability_zones        <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> created_at                <span class="token operator">|</span> <span class="token number">2023</span>-02-01T20:10:56Z                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> description               <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> dns_domain                <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                        <span class="token operator">|</span> bce45beb-074a-4ff1-b110-ef7316ff57f4                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> ipv4_address_scope        <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> ipv6_address_scope        <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> is_default                <span class="token operator">|</span> False                                                                                                                                                <span class="token operator">|</span>
<span class="token operator">|</span> is_vlan_transparent       <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> location                  <span class="token operator">|</span> <span class="token assign-left variable">cloud</span><span class="token operator">=</span><span class="token string">''</span>, <span class="token assign-left variable">project.domain_id</span><span class="token operator">=</span>, <span class="token assign-left variable">project.domain_name</span><span class="token operator">=</span><span class="token string">'demo'</span>, <span class="token assign-left variable">project.id</span><span class="token operator">=</span><span class="token string">'6a021198465e4fa780e35a3ff4202ddf'</span>, <span class="token assign-left variable">project.name</span><span class="token operator">=</span><span class="token string">'admin'</span>, <span class="token assign-left variable">region_name</span><span class="token operator">=</span><span class="token string">''</span>, <span class="token assign-left variable">zone</span><span class="token operator">=</span> <span class="token operator">|</span>
<span class="token operator">|</span> mtu                       <span class="token operator">|</span> <span class="token number">1350</span>                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> name                      <span class="token operator">|</span> net                                                                                                                                                  <span class="token operator">|</span>
<span class="token operator">|</span> port_security_enabled     <span class="token operator">|</span> True                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> project_id                <span class="token operator">|</span> 6a021198465e4fa780e35a3ff4202ddf                                                                                                                     <span class="token operator">|</span>
<span class="token operator">|</span> provider:network_type     <span class="token operator">|</span> vxlan                                                                                                                                                <span class="token operator">|</span>
<span class="token operator">|</span> provider:physical_network <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> provider:segmentation_id  <span class="token operator">|</span> <span class="token number">2</span>                                                                                                                                                    <span class="token operator">|</span>
<span class="token operator">|</span> qos_policy_id             <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> revision_number           <span class="token operator">|</span> <span class="token number">1</span>                                                                                                                                                    <span class="token operator">|</span>
<span class="token operator">|</span> router:external           <span class="token operator">|</span> Internal                                                                                                                                             <span class="token operator">|</span>
<span class="token operator">|</span> segments                  <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> shared                    <span class="token operator">|</span> False                                                                                                                                                <span class="token operator">|</span>
<span class="token operator">|</span> status                    <span class="token operator">|</span> ACTIVE                                                                                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> subnets                   <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> tags                      <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> updated_at                <span class="token operator">|</span> <span class="token number">2023</span>-02-01T20:10:56Z                                                                                                                                 <span class="token operator">|</span>
+---------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+

<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># openstack subnet create --network net --subnet-range 10.0.0.0/24  --gateway 10.0.0.1 subnet</span>
+-------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
<span class="token operator">|</span> Field             <span class="token operator">|</span> Value                                                                                                                                                <span class="token operator">|</span>
+-------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
<span class="token operator">|</span> allocation_pools  <span class="token operator">|</span> <span class="token number">10.0</span>.0.2-10.0.0.254                                                                                                                                  <span class="token operator">|</span>
<span class="token operator">|</span> cidr              <span class="token operator">|</span> <span class="token number">10.0</span>.0.0/24                                                                                                                                          <span class="token operator">|</span>
<span class="token operator">|</span> created_at        <span class="token operator">|</span> <span class="token number">2023</span>-02-01T20:12:23Z                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> description       <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> dns_nameservers   <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> enable_dhcp       <span class="token operator">|</span> True                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> gateway_ip        <span class="token operator">|</span> <span class="token number">10.0</span>.0.1                                                                                                                                             <span class="token operator">|</span>
<span class="token operator">|</span> host_routes       <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                <span class="token operator">|</span> 6b984b00-7184-4006-a245-dc4a55675b97                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> ip_version        <span class="token operator">|</span> <span class="token number">4</span>                                                                                                                                                    <span class="token operator">|</span>
<span class="token operator">|</span> ipv6_address_mode <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> ipv6_ra_mode      <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> location          <span class="token operator">|</span> <span class="token assign-left variable">cloud</span><span class="token operator">=</span><span class="token string">''</span>, <span class="token assign-left variable">project.domain_id</span><span class="token operator">=</span>, <span class="token assign-left variable">project.domain_name</span><span class="token operator">=</span><span class="token string">'demo'</span>, <span class="token assign-left variable">project.id</span><span class="token operator">=</span><span class="token string">'6a021198465e4fa780e35a3ff4202ddf'</span>, <span class="token assign-left variable">project.name</span><span class="token operator">=</span><span class="token string">'admin'</span>, <span class="token assign-left variable">region_name</span><span class="token operator">=</span><span class="token string">''</span>, <span class="token assign-left variable">zone</span><span class="token operator">=</span> <span class="token operator">|</span>
<span class="token operator">|</span> name              <span class="token operator">|</span> subnet                                                                                                                                               <span class="token operator">|</span>
<span class="token operator">|</span> network_id        <span class="token operator">|</span> bce45beb-074a-4ff1-b110-ef7316ff57f4                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> prefix_length     <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> project_id        <span class="token operator">|</span> 6a021198465e4fa780e35a3ff4202ddf                                                                                                                     <span class="token operator">|</span>
<span class="token operator">|</span> revision_number   <span class="token operator">|</span> <span class="token number">0</span>                                                                                                                                                    <span class="token operator">|</span>
<span class="token operator">|</span> segment_id        <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> service_types     <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> subnetpool_id     <span class="token operator">|</span> None                                                                                                                                                 <span class="token operator">|</span>
<span class="token operator">|</span> tags              <span class="token operator">|</span>                                                                                                                                                      <span class="token operator">|</span>
<span class="token operator">|</span> updated_at        <span class="token operator">|</span> <span class="token number">2023</span>-02-01T20:12:23Z                                                                                                                                 <span class="token operator">|</span>
+-------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
</code></pre> 
<h6><a id="3_538"></a>(3)创建云主机类型</h6> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># openstack  flavor  create  --ram  2048  --disk 10  --vcpus  5    flavor2</span>
+----------------------------+--------------------------------------+
<span class="token operator">|</span> Field                      <span class="token operator">|</span> Value                                <span class="token operator">|</span>
+----------------------------+--------------------------------------+
<span class="token operator">|</span> OS-FLV-DISABLED:disabled   <span class="token operator">|</span> False                                <span class="token operator">|</span>
<span class="token operator">|</span> OS-FLV-EXT-DATA:ephemeral  <span class="token operator">|</span> <span class="token number">0</span>                                    <span class="token operator">|</span>
<span class="token operator">|</span> disk                       <span class="token operator">|</span> <span class="token number">10</span>                                   <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                         <span class="token operator">|</span> dd92c3ab-f2a0-42dd-9388-c268c52723c9 <span class="token operator">|</span>
<span class="token operator">|</span> name                       <span class="token operator">|</span> flavor2                              <span class="token operator">|</span>
<span class="token operator">|</span> os-flavor-access:is_public <span class="token operator">|</span> True                                 <span class="token operator">|</span>
<span class="token operator">|</span> properties                 <span class="token operator">|</span>                                      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">ram</span>                        <span class="token operator">|</span> <span class="token number">2048</span>                                 <span class="token operator">|</span>
<span class="token operator">|</span> rxtx_factor                <span class="token operator">|</span> <span class="token number">1.0</span>                                  <span class="token operator">|</span>
<span class="token operator">|</span> swap                       <span class="token operator">|</span>                                      <span class="token operator">|</span>
<span class="token operator">|</span> vcpus                      <span class="token operator">|</span> <span class="token number">5</span>                                    <span class="token operator">|</span>
+----------------------------+--------------------------------------+
</code></pre> 
<h6><a id="4_559"></a>(4)创建云主机</h6> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># openstack server create --network net1 --flavor flavor1 --image cirros server3</span>
+-------------------------------------+------------------------------------------------+
<span class="token operator">|</span> Field                               <span class="token operator">|</span> Value                                          <span class="token operator">|</span>
+-------------------------------------+------------------------------------------------+
<span class="token operator">|</span> OS-DCF:diskConfig                   <span class="token operator">|</span> MANUAL                                         <span class="token operator">|</span>
<span class="token operator">|</span> OS-EXT-AZ:availability_zone         <span class="token operator">|</span>                                                <span class="token operator">|</span>
<span class="token operator">|</span> OS-EXT-SRV-ATTR:host                <span class="token operator">|</span> None                                           <span class="token operator">|</span>
<span class="token operator">|</span> OS-EXT-SRV-ATTR:hypervisor_hostname <span class="token operator">|</span> None                                           <span class="token operator">|</span>
<span class="token operator">|</span> OS-EXT-SRV-ATTR:instance_name       <span class="token operator">|</span>                                                <span class="token operator">|</span>
<span class="token operator">|</span> OS-EXT-STS:power_state              <span class="token operator">|</span> NOSTATE                                        <span class="token operator">|</span>
<span class="token operator">|</span> OS-EXT-STS:task_state               <span class="token operator">|</span> scheduling                                     <span class="token operator">|</span>
<span class="token operator">|</span> OS-EXT-STS:vm_state                 <span class="token operator">|</span> building                                       <span class="token operator">|</span>
<span class="token operator">|</span> OS-SRV-USG:launched_at              <span class="token operator">|</span> None                                           <span class="token operator">|</span>
<span class="token operator">|</span> OS-SRV-USG:terminated_at            <span class="token operator">|</span> None                                           <span class="token operator">|</span>
<span class="token operator">|</span> accessIPv4                          <span class="token operator">|</span>                                                <span class="token operator">|</span>
<span class="token operator">|</span> accessIPv6                          <span class="token operator">|</span>                                                <span class="token operator">|</span>
<span class="token operator">|</span> addresses                           <span class="token operator">|</span>                                                <span class="token operator">|</span>
<span class="token operator">|</span> adminPass                           <span class="token operator">|</span> 3MdHgXbP3u8P                                   <span class="token operator">|</span>
<span class="token operator">|</span> config_drive                        <span class="token operator">|</span>                                                <span class="token operator">|</span>
<span class="token operator">|</span> created                             <span class="token operator">|</span> <span class="token number">2023</span>-02-01T20:22:07Z                           <span class="token operator">|</span>
<span class="token operator">|</span> flavor                              <span class="token operator">|</span> flavor1 <span class="token punctuation">(</span>3cd78d95-977a-4d2a-9add-6f438e580462<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">|</span> hostId                              <span class="token operator">|</span>                                                <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token function">id</span>                                  <span class="token operator">|</span> 9f05531c-e610-44dd-897b-59b18d91d3f9           <span class="token operator">|</span>
<span class="token operator">|</span> image                               <span class="token operator">|</span> cirros <span class="token punctuation">(</span>d019b7a2-0826-420b-95d1-7d548129c0cc<span class="token punctuation">)</span>  <span class="token operator">|</span>
<span class="token operator">|</span> key_name                            <span class="token operator">|</span> None                                           <span class="token operator">|</span>
<span class="token operator">|</span> name                                <span class="token operator">|</span> server3                                        <span class="token operator">|</span>
<span class="token operator">|</span> progress                            <span class="token operator">|</span> <span class="token number">0</span>                                              <span class="token operator">|</span>
<span class="token operator">|</span> project_id                          <span class="token operator">|</span> 6a021198465e4fa780e35a3ff4202ddf               <span class="token operator">|</span>
<span class="token operator">|</span> properties                          <span class="token operator">|</span>                                                <span class="token operator">|</span>
<span class="token operator">|</span> security_groups                     <span class="token operator">|</span> <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">'default'</span>                                 <span class="token operator">|</span>
<span class="token operator">|</span> status                              <span class="token operator">|</span> BUILD                                          <span class="token operator">|</span>
<span class="token operator">|</span> updated                             <span class="token operator">|</span> <span class="token number">2023</span>-02-01T20:22:07Z                           <span class="token operator">|</span>
<span class="token operator">|</span> user_id                             <span class="token operator">|</span> c5a402e3169f442d989b60ada2e000b5               <span class="token operator">|</span>
<span class="token operator">|</span> volumes_attached                    <span class="token operator">|</span>                                                <span class="token operator">|</span>
+-------------------------------------+------------------------------------------------+
<span class="token punctuation">[</span>root@controller ~<span class="token punctuation">]</span><span class="token comment"># openstack server list</span>
+--------------------------------------+---------+--------+----------------------+--------+---------+
<span class="token operator">|</span> ID                                   <span class="token operator">|</span> Name    <span class="token operator">|</span> Status <span class="token operator">|</span> Networks             <span class="token operator">|</span> Image  <span class="token operator">|</span> Flavor  <span class="token operator">|</span>
+--------------------------------------+---------+--------+----------------------+--------+---------+
<span class="token operator">|</span> 9f05531c-e610-44dd-897b-59b18d91d3f9 <span class="token operator">|</span> server3 <span class="token operator">|</span> ACTIVE <span class="token operator">|</span> <span class="token assign-left variable">net1</span><span class="token operator">=</span><span class="token number">192.168</span>.100.127 <span class="token operator">|</span> cirros <span class="token operator">|</span> flavor1 <span class="token operator">|</span>
+--------------------------------------+---------+--------+----------------------+--------+---------+
</code></pre> 
<p><strong>登录Dashboard页面，在左侧菜单栏选择“项目→计算→实例”可以看到已经创建成功，仅测试云主机创建是否正常没有使用CRT连接云主机</strong></p> 
<p><img src="https://images2.imgbox.com/6a/4a/xXHf2Lg6_o.png" alt="image-20230201202556514"></p> 
<h6><a id="5cirros_610"></a>(5)cirros虚拟机运行</h6> 
<p><img src="https://images2.imgbox.com/5b/0c/wKduvSLe_o.png" alt="image-20230201202927325"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/09e64f4ef2804773254328202be3f19b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用域名的方式连接Elasticsearch</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0e8d854c03668a5af780ffdb8adb81c1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何在arcgis中制作栅格动图</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>