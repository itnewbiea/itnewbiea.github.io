<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用Docker实现容器之间的互通 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用Docker实现容器之间的互通" />
<meta property="og:description" content="目录
怎样实现容器之间的相互通信？
情况1：两个容器在同一网段上
情况2：两个容器在不同网段上
怎样实现容器之间的相互通信？ 情况1：两个容器在同一网段上 命令拓展：
删除所有容器：docker rm -f $(docker ps -aq)
查看所有的网络模式：docker network ls
清空控制台：clear
删除自定义网络：docker network rm mynetwork【公式：docker network rm 网络名称】
为了接下里的演示，我把原有的自定义网络mynetwork都删干净了。
①创建一个自定义网络
docker network create --driver bridge --subnet 192.168.0.1/16 --gateway 192.168.0.1 mynet
【
参数说明：
--driver bridge 设置网络模式
--subnet 192.168.0.1/16 设置子网
--gateway 192.168.0.1 设置网关
mynet 自定义网络的名称
】
②在刚才创建的mynet中创建两个容器
docker run -di --name c1 --net=mynet centos:7
docker run -di --name c2 --net=mynet centos:7
【-di不是守护进程方式所以不会进入容器，-it才是守护进程方式】
创建成功！
③测试 ping" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a0c658be735679c5d06cf94135f3b38f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-13T01:45:43+08:00" />
<meta property="article:modified_time" content="2022-12-13T01:45:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用Docker实现容器之间的互通</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E6%80%8E%E6%A0%B7%E5%AE%9E%E7%8E%B0%E5%AE%B9%E5%99%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E7%9B%B8%E4%BA%92%E9%80%9A%E4%BF%A1%EF%BC%9F-toc" style="margin-left:0px;"><a href="#%E6%80%8E%E6%A0%B7%E5%AE%9E%E7%8E%B0%E5%AE%B9%E5%99%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E7%9B%B8%E4%BA%92%E9%80%9A%E4%BF%A1%EF%BC%9F" rel="nofollow">怎样实现容器之间的相互通信？</a></p> 
<p id="%E6%83%85%E5%86%B51%EF%BC%9A%E4%B8%A4%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%9C%A8%E5%90%8C%E4%B8%80%E7%BD%91%E6%AE%B5%E4%B8%8A-toc" style="margin-left:40px;"><a href="#%E6%83%85%E5%86%B51%EF%BC%9A%E4%B8%A4%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%9C%A8%E5%90%8C%E4%B8%80%E7%BD%91%E6%AE%B5%E4%B8%8A" rel="nofollow">情况1：两个容器在同一网段上</a></p> 
<p id="%E6%83%85%E5%86%B52%EF%BC%9A%E4%B8%A4%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%BD%91%E6%AE%B5%E4%B8%8A-toc" style="margin-left:40px;"><a href="#%E6%83%85%E5%86%B52%EF%BC%9A%E4%B8%A4%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%BD%91%E6%AE%B5%E4%B8%8A" rel="nofollow">情况2：两个容器在不同网段上</a></p> 
<hr> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/1c/d4/QVVcEAeE_o.png"></p> 
<h2 id="%E6%80%8E%E6%A0%B7%E5%AE%9E%E7%8E%B0%E5%AE%B9%E5%99%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E7%9B%B8%E4%BA%92%E9%80%9A%E4%BF%A1%EF%BC%9F" style="text-align:center;"><span style="color:#fe2c24;">怎样实现容器之间的相互通信？</span></h2> 
<h3 id="%E6%83%85%E5%86%B51%EF%BC%9A%E4%B8%A4%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%9C%A8%E5%90%8C%E4%B8%80%E7%BD%91%E6%AE%B5%E4%B8%8A">情况1：两个容器在同一网段上</h3> 
<blockquote> 
 <p>命令拓展：</p> 
 <p>删除所有容器：<strong>docker rm -f $(docker ps -aq)</strong></p> 
 <p>查看所有的网络模式：docker network ls</p> 
 <p>清空控制台：clear</p> 
 <p>删除自定义网络：docker network rm mynetwork【公式：docker network rm 网络名称】</p> 
</blockquote> 
<p>为了接下里的演示，我把原有的自定义网络mynetwork都删干净了。</p> 
<p><img alt="" height="223" src="https://images2.imgbox.com/11/04/gJznGMlh_o.png" width="508">  </p> 
<p>①创建一个自定义网络</p> 
<blockquote> 
 <p>docker network create --driver bridge --subnet 192.168.0.1/16 --gateway 192.168.0.1 mynet<br> 【</p> 
 <p>参数说明：<br>        --driver bridge  设置网络模式<br>        --subnet 192.168.0.1/16  设置子网<br>        --gateway 192.168.0.1 设置网关<br>        mynet  自定义网络的名称</p> 
 <p>】</p> 
</blockquote> 
<p><img alt="" height="147" src="https://images2.imgbox.com/01/d4/KZSHyDwW_o.png" width="734"></p> 
<p>②在刚才创建的mynet中创建两个容器</p> 
<blockquote> 
 <p><strong>docker run -di --name c1 --net=mynet centos:7</strong></p> 
 <p><strong>docker run -di --name c2 --net=mynet centos:7</strong></p> 
 <p>【-di不是守护进程方式所以不会进入容器，-it才是守护进程方式】</p> 
</blockquote> 
<p><img alt="" height="172" src="https://images2.imgbox.com/11/02/l5lm3y3h_o.png" width="730"></p> 
<p><img alt="" height="730" src="https://images2.imgbox.com/5c/22/wOx38HQq_o.png" width="726"></p> 
<p> 创建成功！</p> 
<p>③测试 ping</p> 
<p>现在使用守护进程的方式启动容器，看看在c1中ping c2是否能够成功：</p> 
<p> <img alt="" height="547" src="https://images2.imgbox.com/8d/f3/Wu4sHLkw_o.png" width="722"></p> 
<p>成功！反之，在c2中ping c1 也是可以成功的</p> 
<p><img alt="" height="233" src="https://images2.imgbox.com/0d/ab/3myxuhs8_o.png" width="634"></p> 
<p>则代表两个容器之间互通成功！</p> 
<p>还有另外一种方法不进入容器也可以检测容器之间是否互通（前提是容器是启动）</p> 
<blockquote> 
 <p>启动容器后检查网络之间是否可以互通<br><strong>docker exec -it c1 ping c2</strong></p> 
</blockquote> 
<p><img alt="" height="148" src="https://images2.imgbox.com/c0/7e/Jlow0ykB_o.png" width="683"></p> 
<p> 成功！</p> 
<blockquote> 
 <p><strong><span style="color:#fe2c24;">结论：</span></strong></p> 
 <p><strong><span style="color:#fe2c24;">两个容器在同一网段上是可以互通的。</span></strong></p> 
</blockquote> 
<hr> 
<h3 id="%E6%83%85%E5%86%B52%EF%BC%9A%E4%B8%A4%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%BD%91%E6%AE%B5%E4%B8%8A">情况2：两个容器在不同网段上</h3> 
<p> ①创建一个自定义网络（但不指定在刚才创建的mynet网络上）</p> 
<blockquote> 
 <p><strong>docker run -di --name c3 centos:7</strong></p> 
</blockquote> 
<p><img alt="" height="149" src="https://images2.imgbox.com/64/1b/F4OtUqJz_o.png" width="717"></p> 
<p><img alt="" height="169" src="https://images2.imgbox.com/6c/f7/4WFNCHZe_o.png" width="730"></p> 
<p>此时c1 ping c2 当然是成功的，因为 这两个容器是在同一网络上</p> 
<p><img alt="" height="193" src="https://images2.imgbox.com/98/4b/LzRNTQF6_o.png" width="709"></p> 
<p>现在来测试一下c1和c3进行ping，看看是否能成功</p> 
<p><img alt="" height="68" src="https://images2.imgbox.com/3a/1a/AYTdFqbq_o.png" width="656"></p> 
<p>ping失败，互通失败，并且提示Name or servic not know，意思是找不到服务器或名字。</p> 
<p> 这时候我们就需要把c3添加到mynet网络上来就可以了。</p> 
<p>②将外界容器添加到项目容器中来</p> 
<blockquote> 
 <p><strong> docker network connect mynet c3 </strong></p> 
 <p><strong>【公式：docker network connect 自定义网络名称 要添加的容器名】</strong></p> 
</blockquote> 
<p><img alt="" height="344" src="https://images2.imgbox.com/ca/e5/zBE6V0pb_o.png" width="710"></p> 
<p>这样c3 ping c1就成功啦！</p> 
<p>比如说以后要是在公司，某位领导在不是同一网络下时需要使用他自己的电脑查看项目，那么我们就只需把他电脑服务器添加进来就好了。</p> 
<hr> 
<h2 id="%E6%9C%AC%E7%AF%87%E5%86%85%E5%AE%B9%E5%88%86%E4%BA%AB%E5%88%B0%E6%AD%A4%E7%BB%93%E6%9D%9F%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B8%8B%E6%9C%9F%E5%86%8D%E8%A7%81%EF%BC%81">本篇内容分享到此结束，我们下期再见！</h2>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/68755fa772623a44831c82f27862a100/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IDEA(下载、安装、激活详细图文)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/93df60091c06467a57e7fa134c6efb57/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一个帖子教你实现 商品下单、获取商品订单信息、商品送货时发送通知 一体化功能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>