<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>KVM_虚拟化技术安装详细教程 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="KVM_虚拟化技术安装详细教程" />
<meta property="og:description" content="KVM虚拟化 一.虚拟化技术1.概述2.kvm虚拟化类型1）全虚拟化2）半虚拟化3）直通3.kvm特性优势：劣势：4.KVM模式5.KVM虚拟化架构/三种模式 6.KVM原理6.KVM工作流程7.虚拟化前，虚拟化后对比 二.KVM虚拟化平台部署1.虚拟机资源 2.修改主机名3.将镜像光盘设为自动/永久挂载4.环境优化5.制作本地YUM仓库6.关闭防火墙、核心防护三.安装KVM1.安装KVM基本组件检测CPU是否支持虚拟化查看KVM模块是否已安装设置开启启动界面的显示模式 2.设置KVM网络创建、编辑桥接网卡 3.KVM部署与管理4.使用虚拟系统管理器管理虚拟机1） 创建存储池2） 创建存储卷3）创建镜像池4） 创建虚拟机总结： 一.虚拟化技术 1.概述 虚拟化技术将一台计算机虚拟为多台逻辑计算机 应用程序可以在相互独立的空间内运行不影响 以软件形式实现物理设备的功能 通过虚拟化技术将一台计算机虚拟为多台逻辑计算机，在一台计算机上同时运行多个逻辑计算机同时每个逻辑计算机可运行不同的操作系统，应用程序都可以在相互独立的空间内运行互相不影响对物理硬件资源进行逻辑分隔，等待被调用 2.kvm虚拟化类型 1）全虚拟化 将物理硬件资源全部通过软件的方式抽象化，最后进行调用在底层硬件和服务器之间建立一个抽象层，而基于核心的虚拟机是面向linux系统开源产品VMM可以捕捉cpu的命令 2）半虚拟化 需要修好操作系统 3）直通 直接使用物理硬件资源 3.kvm特性 优势： 1.集中化管理(原创管理、维护)2.提高硬件利用率(虚拟化解决的是&#34;空闲”容量)3.动态调整机器/资源(系统的硬件程序和服务器硬件分离，提高灵活性)4.高可靠（可提高透明负载均衡、迁移) 劣势： 1.前期高额费用(初期硬件支持)2.降低硬件利用率(极度吃资源，不一定适合虚拟化)3.更大的错误影响面(本地物理机不可用，会导致虚拟机文件全部损坏)4.实施配置复杂，管理复杂(管理人员运维、排障困难)5.一定的限制性(需要支持的虚拟化技术)6.安全性(虚拟化技术自身的安全隐患) 4.KVM模式 1.客户模式：客户机在操作系统中运行的模式2.用户模式：为用户提供虚拟机管理用户工具3.linux内核模式：模拟cpu、内存，实现客户模式切换 5.KVM虚拟化架构/三种模式 1、客户模式(guestOS):VM中的OS为GuestOS
客户机在操作系统中运行的模式，客户机分为内核模式和用户模式，作用如下:2、客户模式:
为用户提供虚拟机管理的用户空间工具以及代表用户执行I/O，Qemu_ 工作在此模式下(Qemu的主要功能)3、linux内核模式
模拟CPU、内存，实现客户模式切换，处理从客户模式的推出，KVM即运行在此模式下 6.KVM原理 1、Guest: 客户机系统，包括CPU (vCPU) 、内存驱动(Console、 网卡、I/O设备驱动等),
被KVM置于-种受限制的CPU 模式下运行。2、KVM内核模块模拟处理器和内存以支持虚拟机运行3、Qemu 主要处理I/O以及为客户提供一个用户空间/dev/kvm 工具ibvirt来进行虚拟机管理
ioctl (定义) 专用于设备输入输出操作的系统调用
libvirt: KVM管理工具
以上构成一个完整的虚拟化平台 简单理解:
KVM驱动提供处理器、内存的虚拟化，以及客户机I/O的拦截，guest的I/O被拦截后，
交由Qemu处理
Qemu利用接口libkvm调用(ioctl) 虚拟机设备接口/dev/kvm来分配资源、管理、维护虚拟机
6.KVM工作流程 KVM工作流程
用户模式的Qemu利用接口libkvm通过ioctl系统调用进入内核模式。KVM驱动为虚拟机创建 虚拟CPU和虚拟内存,
然后执行VMLAU.NCH指令进入客户模式，装载Guest OS并运行。Guest OS运行过程中如果发生异常，则暂停Guest OS
的运行并保存当前状态同时退出到内核模式来处理这些异常。
内核模式处理这些异常时如果不需要/O则处理完成后重新进入客户模式。如果需要I/O则进入到用户模式，
则由Qemu来处理I/O,处理完成后进入内核模式，再进入客户模式
思路:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/d3f192097701a260fcf71e38d63e48f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-15T17:35:00+08:00" />
<meta property="article:modified_time" content="2021-05-15T17:35:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">KVM_虚拟化技术安装详细教程</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>KVM虚拟化</h4> 
 <ul><li><a href="#_1" rel="nofollow">一.虚拟化技术</a></li><li><ul><li><ul><li><a href="#1_2" rel="nofollow">1.概述</a></li><li><a href="#2kvm_13" rel="nofollow">2.kvm虚拟化类型</a></li><li><a href="#1_14" rel="nofollow">1）全虚拟化</a></li><li><a href="#2_18" rel="nofollow">2）半虚拟化</a></li><li><a href="#3_22" rel="nofollow">3）直通</a></li><li><a href="#3kvm_27" rel="nofollow">3.kvm特性</a></li><li><a href="#_29" rel="nofollow">优势：</a></li><li><a href="#_36" rel="nofollow">劣势：</a></li><li><ul><li><a href="#4KVM_45" rel="nofollow">4.KVM模式</a></li><li><a href="#5KVM_53" rel="nofollow">5.KVM虚拟化架构/三种模式</a></li></ul> 
    </li><li><a href="#6KVM_64" rel="nofollow">6.KVM原理</a></li><li><a href="#6KVM_83" rel="nofollow">6.KVM工作流程</a></li><li><a href="#7_115" rel="nofollow">7.虚拟化前，虚拟化后对比</a></li></ul> 
   </li><li><a href="#KVM_130" rel="nofollow">二.KVM虚拟化平台部署</a></li><li><ul><li><a href="#1_131" rel="nofollow">1.虚拟机资源</a></li></ul> 
   </li><li><a href="#2_147" rel="nofollow">2.修改主机名</a></li><li><ul><li><a href="#3_157" rel="nofollow">3.将镜像光盘设为自动/永久挂载</a></li><li><a href="#4_174" rel="nofollow">4.环境优化</a></li><li><a href="#5YUM_190" rel="nofollow">5.制作本地YUM仓库</a></li><li><a href="#6_215" rel="nofollow">6.关闭防火墙、核心防护</a></li><li><a href="#KVM_244" rel="nofollow">三.安装KVM</a></li><li><a href="#1KVM_246" rel="nofollow">1.安装KVM基本组件</a></li><li><ul><li><a href="#CPU_279" rel="nofollow">检测CPU是否支持虚拟化</a></li><li><a href="#KVM_289" rel="nofollow">查看KVM模块是否已安装</a></li><li><a href="#_301" rel="nofollow">设置开启启动界面的显示模式</a></li></ul> 
    </li><li><a href="#2KVM_310" rel="nofollow">2.设置KVM网络</a></li><li><ul><li><ul><li><a href="#_335" rel="nofollow">创建、编辑桥接网卡</a></li></ul> 
    </li></ul> 
    </li><li><a href="#3KVM_369" rel="nofollow">3.KVM部署与管理</a></li><li><a href="#4_390" rel="nofollow">4.使用虚拟系统管理器管理虚拟机</a></li><li><a href="#1__403" rel="nofollow">1） 创建存储池</a></li><li><a href="#2__411" rel="nofollow">2） 创建存储卷</a></li><li><a href="#3_414" rel="nofollow">3）创建镜像池</a></li><li><a href="#4__420" rel="nofollow">4） 创建虚拟机</a></li><li><a href="#_434" rel="nofollow">总结：</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一.虚拟化技术</h2> 
<h4><a id="1_2"></a>1.概述</h4> 
<pre><code> 虚拟化技术将一台计算机虚拟为多台逻辑计算机
 应用程序可以在相互独立的空间内运行不影响
 以软件形式实现物理设备的功能
</code></pre> 
<ul><li>通过虚拟化技术将一台计算机虚拟为多台逻辑计算机，在一台计算机上同时运行多个逻辑计算机</li><li>同时每个逻辑计算机可运行不同的操作系统，应用程序都可以在相互独立的空间内运行互相不影响</li><li>对物理硬件资源进行逻辑分隔，等待被调用</li></ul> 
<h4><a id="2kvm_13"></a>2.kvm虚拟化类型</h4> 
<h4><a id="1_14"></a>1）全虚拟化</h4> 
<ul><li>将物理硬件资源全部通过软件的方式抽象化，最后进行调用</li><li>在底层硬件和服务器之间建立一个抽象层，而基于核心的虚拟机是面向linux系统开源产品VMM可以捕捉cpu的命令</li></ul> 
<h4><a id="2_18"></a>2）半虚拟化</h4> 
<ul><li>需要修好操作系统</li></ul> 
<h4><a id="3_22"></a>3）直通</h4> 
<ul><li>直接使用物理硬件资源</li></ul> 
<h4><a id="3kvm_27"></a>3.kvm特性</h4> 
<h4><a id="_29"></a>优势：</h4> 
<ul><li>1.集中化管理(原创管理、维护)</li><li>2.提高硬件利用率(虚拟化解决的是"空闲”容量)</li><li>3.动态调整机器/资源(系统的硬件程序和服务器硬件分离，提高灵活性)</li><li>4.高可靠（可提高透明负载均衡、迁移)</li></ul> 
<h4><a id="_36"></a>劣势：</h4> 
<ul><li>1.前期高额费用(初期硬件支持)</li><li>2.降低硬件利用率(极度吃资源，不一定适合虚拟化)</li><li>3.更大的错误影响面(本地物理机不可用，会导致虚拟机文件全部损坏)</li><li>4.实施配置复杂，管理复杂(管理人员运维、排障困难)</li><li>5.一定的限制性(需要支持的虚拟化技术)</li><li>6.安全性(虚拟化技术自身的安全隐患)</li></ul> 
<h5><a id="4KVM_45"></a>4.KVM模式</h5> 
<ul><li>1.客户模式：客户机在操作系统中运行的模式</li><li>2.用户模式：为用户提供虚拟机管理用户工具</li><li>3.linux内核模式：模拟cpu、内存，实现客户模式切换</li></ul> 
<h5><a id="5KVM_53"></a>5.KVM虚拟化架构/三种模式</h5> 
<ul><li>1、客户模式(guestOS):VM中的OS为GuestOS<br> 客户机在操作系统中运行的模式，客户机分为内核模式和用户模式，作用如下:</li><li>2、客户模式:<br> 为用户提供虚拟机管理的用户空间工具以及代表用户执行I/O，Qemu_ 工作在此模式下(Qemu的主要功能)</li><li>3、linux内核模式<br> 模拟CPU、内存，实现客户模式切换，处理从客户模式的推出，KVM即运行在此模式下</li></ul> 
<h4><a id="6KVM_64"></a>6.KVM原理</h4> 
<ul><li>1、Guest: 客户机系统，包括CPU (vCPU) 、内存驱动(Console、 网卡、I/O设备驱动等),<br> 被KVM置于-种受限制的CPU 模式下运行。</li><li>2、KVM内核模块模拟处理器和内存以支持虚拟机运行</li><li>3、Qemu 主要处理I/O以及为客户提供一个用户空间/dev/kvm 工具ibvirt来进行虚拟机管理<br> ioctl (定义) 专用于设备输入输出操作的系统调用<br> libvirt: KVM管理工具<br> 以上构成一个完整的虚拟化平台</li></ul> 
<p>简单理解:<br> KVM驱动提供处理器、内存的虚拟化，以及客户机I/O的拦截，guest的I/O被拦截后，<br> 交由Qemu处理<br> Qemu利用接口libkvm调用(ioctl) 虚拟机设备接口/dev/kvm来分配资源、管理、维护虚拟机</p> 
<h4><a id="6KVM_83"></a>6.KVM工作流程</h4> 
<p>KVM工作流程<br> 用户模式的Qemu利用接口libkvm通过ioctl系统调用进入内核模式。KVM驱动为虚拟机创建 虚拟CPU和虚拟内存,<br> 然后执行VMLAU.NCH指令进入客户模式，装载Guest OS并运行。Guest OS运行过程中如果发生异常，则暂停Guest OS<br> 的运行并保存当前状态同时退出到内核模式来处理这些异常。<br> 内核模式处理这些异常时如果不需要/O则处理完成后重新进入客户模式。如果需要I/O则进入到用户模式，<br> 则由Qemu来处理I/O,处理完成后进入内核模式，再进入客户模式</p> 
<p>思路:<br> 1、KVM技术介绍<br> 是什么技术:虚拟化</p> 
<p>2、KVM技术定位(实际应用)<br> workstation、 virtualbox<br> 模以硬件资源/设备/操作系统</p> 
<p>3、KVM虚拟化技术核心功能(原理方面)<br> QEMU (工作在用户层，控制ibkvm工具( I具作用，控制内核中的KVM)来调用物理虚拟化资源<br> (调用物理虚拟化资源的方式是ioctl,供给虚拟机)<br> KVM (工作在内核层，虚拟化/抽象化物理硬件资源，供给Qemu组件调用)</p> 
<p>4、KVM各核心组件功能<br> QEMU<br> 功能:控制I/O虚拟化，调用硬件资源<br> KVM<br> 功能:为虚拟机提供CPU、内存(硬件资源)的虚拟化</p> 
<h4><a id="7_115"></a>7.虚拟化前，虚拟化后对比</h4> 
<ul><li> <p>虚拟化前：一个操作系统<br> 软硬件结合<br> 运行多个程序会冲突<br> 系统资源利用率低<br> 硬件成本高昂(使用价值)</p> </li><li> <p>虚拟化后：<br> 打破系统和硬件之间的依赖<br> 通过封装到虚拟机的技术，管理操作系统和程序为单一的个体(隔离)<br> 强大的安全和故障隔离<br> 虚拟机是独立硬件的，可在任何硬件上进行</p> </li></ul> 
<h3><a id="KVM_130"></a>二.KVM虚拟化平台部署</h3> 
<h4><a id="1_131"></a>1.虚拟机资源</h4> 
<p>CPU：双核双线程-CPU虚拟化开启<br> 内存：8G <br> 硬盘：300G<br> 双网卡：单网卡<br> 操作系统：Centos 7.6（1810）</p> 
<p><img src="https://images2.imgbox.com/0d/88/P8vyQMMv_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_147"></a>2.修改主机名</h3> 
<pre><code class="prism language-powershell"><span class="token namespace">[root@kvm ~]</span><span class="token comment"># hostnamectl set-hostname kvm </span>
<span class="token namespace">[root@kvm ~]</span><span class="token comment"># su</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e7/2d/9I4mGRGJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_157"></a>3.将镜像光盘设为自动/永久挂载</h4> 
<pre><code class="prism language-powershell">vim <span class="token operator">/</span>etc<span class="token operator">/</span>fstab
<span class="token operator">/</span>dev<span class="token operator">/</span>cdrom <span class="token operator">/</span>mnt iso9660 defaults 0 0

<span class="token function">mount</span> <span class="token operator">-</span>a 
df <span class="token operator">-</span>hT
</code></pre> 
<p><img src="https://images2.imgbox.com/42/3b/mnGG7U3w_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/0a/29/IIBnNMrv_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/40/6e/LMfD4tNG_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_174"></a>4.环境优化</h4> 
<p>设置DNS反向解析<br> 是否反解DNS，设置为NO可以让客户端连接服务器更快</p> 
<pre><code class="prism language-powershell">vim <span class="token operator">/</span>etc<span class="token operator">/</span>ssh<span class="token operator">/</span>sshd_config
<span class="token comment">#115行；取消DNS注释，改为NO</span>
UseDNS no
</code></pre> 
<p><img src="https://images2.imgbox.com/63/24/BNUEtvWE_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/7b/76/XLJEVHcE_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="5YUM_190"></a>5.制作本地YUM仓库</h4> 
<pre><code class="prism language-powershell">cd <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>
mkdir repos<span class="token punctuation">.</span>bak
<span class="token function">mv</span> CentOS-<span class="token operator">*</span> repos<span class="token punctuation">.</span>bak

vim kvm<span class="token punctuation">.</span>repo
<span class="token namespace">[kvm]</span>
name=kvm
baseurl=file:<span class="token operator">/</span>/<span class="token operator">/</span>mnt
gpgcheck=0
enabled=1


yum clean all  &amp;&amp; yum repolist
</code></pre> 
<p><img src="https://images2.imgbox.com/7b/00/I7todgZo_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/8c/65/768WnqYp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1b/a7/0OfgMabh_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="6_215"></a>6.关闭防火墙、核心防护</h4> 
<pre><code class="prism language-powershell">systemctl stop firewalld
systemctl disable firewalld
setenforce 0
</code></pre> 
<p><img src="https://images2.imgbox.com/e6/bc/P9CuP1uA_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="KVM_244"></a>三.安装KVM</h4> 
<h4><a id="1KVM_246"></a>1.安装KVM基本组件</h4> 
<pre><code class="prism language-powershell">yum groupinstall <span class="token operator">-</span>y <span class="token string">"GNOME Desktop"</span>
yum <span class="token operator">-</span>y install qemu<span class="token operator">-</span>kvm
yum <span class="token operator">-</span>y install qemu<span class="token operator">-</span>kvm<span class="token operator">-</span>tools
yum <span class="token operator">-</span>y install virt<span class="token operator">-</span>install
yum <span class="token operator">-</span>y install qemu<span class="token operator">-</span>img
yum <span class="token operator">-</span>y install bridge<span class="token operator">-</span>utils
yum <span class="token operator">-</span>y install libvirt
yum <span class="token operator">-</span>y install virt<span class="token operator">-</span>manager
<span class="token comment">#----------------------命令解释---------------------</span>
<span class="token comment"># 安装 GNOME 桌面环境  如果装了图形界面可以不需要装</span>
yum groupinstall <span class="token operator">-</span>y <span class="token string">"GNOME Desktop"</span>
<span class="token comment"># KVM 模块</span>
yum <span class="token operator">-</span>y install qemu<span class="token operator">-</span>kvm
<span class="token comment"># 安装KVM 调试工具,可不安装</span>
yum <span class="token operator">-</span>y install qemu<span class="token operator">-</span>kvm<span class="token operator">-</span>tools
<span class="token comment"># 构建虚拟机的命令行工具</span>
yum <span class="token operator">-</span>y install virt<span class="token operator">-</span>install
<span class="token comment"># qemu 组件,创建磁盘、启动虚拟机等</span>
yum <span class="token operator">-</span>y install qemu<span class="token operator">-</span>img
<span class="token comment"># 网络支持工具</span>
yum <span class="token operator">-</span>y install bridge<span class="token operator">-</span>utils
<span class="token comment"># 虚拟机管理工具</span>
yum <span class="token operator">-</span>y install libvirt
<span class="token comment"># 图形界面管理虚拟机</span>
yum <span class="token operator">-</span>y install virt<span class="token operator">-</span>manager
</code></pre> 
<h5><a id="CPU_279"></a>检测CPU是否支持虚拟化</h5> 
<pre><code class="prism language-powershell"><span class="token function">cat</span> <span class="token operator">/</span>proc<span class="token operator">/</span>cpuinfo <span class="token punctuation">|</span> grep vmx
<span class="token comment"># 查看CPU是否支持虚拟化</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2d/4d/TM99nAZS_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="KVM_289"></a>查看KVM模块是否已安装</h5> 
<ul><li>Lsmod：显示已载入的系统模块</li></ul> 
<pre><code class="prism language-powershell">lsmod <span class="token punctuation">|</span> grep kvm
</code></pre> 
<p><img src="https://images2.imgbox.com/20/56/O3KJ2zG4_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_301"></a>设置开启启动界面的显示模式</h5> 
<pre><code class="prism language-powershell">ln <span class="token operator">-</span>sf <span class="token operator">/</span>lib<span class="token operator">/</span>systemd<span class="token operator">/</span>system<span class="token operator">/</span>graphical<span class="token punctuation">.</span>target <span class="token operator">/</span>etc<span class="token operator">/</span>systemd<span class="token operator">/</span>system<span class="token operator">/</span>default<span class="token punctuation">.</span>target
</code></pre> 
<p><img src="https://images2.imgbox.com/fe/02/JV2MvUPR_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2KVM_310"></a>2.设置KVM网络</h4> 
<p>KVM网络的两种模式：</p> 
<ul><li>NAT: 默认设置，数据包由 NAT 方式通过主机的接口进行传送，可以访问外网，但是无法从外部访问虚拟机网络</li><li>网桥：这种模式允许虚拟机像一台独立的主机一样拥有网络，外部的机器可以直接访问到虚拟机内部，但需要网卡支持(一般有线网卡都支持)</li></ul> 
<p>使用Bridge网桥模式进行部署</p> 
<pre><code class="prism language-powershell">vim <span class="token operator">/</span>etc<span class="token operator">/</span>sysconfig<span class="token operator">/</span>network<span class="token operator">-</span>scripts<span class="token operator">/</span>ifcfg<span class="token operator">-</span>ens33

BOOTPROTO=none
IPV6INIT=no
ONBOOT=yes
BRIDGE=br0			<span class="token comment">#删除原先地址，设置为网桥模式，关联br0网卡</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/63/bc/duHVHmk1_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/f6/92/oE29vPcW_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_335"></a>创建、编辑桥接网卡</h6> 
<pre><code class="prism language-powershell">vim <span class="token operator">/</span>etc<span class="token operator">/</span>sysconfig<span class="token operator">/</span>network<span class="token operator">-</span>scripts<span class="token operator">/</span>ifcfg<span class="token operator">-</span>br0
<span class="token function">TYPE</span>=Bridge
BOOTPROTO=static
DEFROUTE=yes
PEERDNS=yes
PEERROUTES=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_PEERDNS=yes
IPV6_PEERROUTES=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable<span class="token operator">-</span>privacy
NAME=br0
DEVICE=br0
ONBOOT=yes
IPADDR=192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>133<span class="token punctuation">.</span>60
NETMASK=255<span class="token punctuation">.</span>255<span class="token punctuation">.</span>255<span class="token punctuation">.</span>0
GATEWAY=192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>133<span class="token punctuation">.</span>2
</code></pre> 
<p><img src="https://images2.imgbox.com/20/cd/koHFHLvs_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/16/7e/RyMna8o4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/31/a1/1vxMYR7a_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3KVM_369"></a>3.KVM部署与管理</h4> 
<ul><li> <p>window共享文件给centos：具体步骤：<a href="https://blog.csdn.net/Wsxyi/article/details/113153605">window共享权限设定</a></p> </li><li> <p>创建KVM存储和镜像数据的目录、上传centos7镜像</p> </li></ul> 
<pre><code class="prism language-powershell">mkdir <span class="token operator">-</span>p <span class="token operator">/</span>data_kvm<span class="token operator">/</span>iso
mkdir <span class="token operator">-</span>p <span class="token operator">/</span>data_kvm<span class="token operator">/</span>store
<span class="token function">mount</span><span class="token punctuation">.</span>cifs <span class="token operator">/</span><span class="token operator">/</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>133<span class="token punctuation">.</span>1<span class="token operator">/</span>共享 <span class="token operator">/</span>mnt<span class="token operator">/</span>

cd <span class="token operator">/</span>mnt
<span class="token function">cp</span> <span class="token operator">-</span>p CentOS<span class="token operator">-</span>7<span class="token operator">-</span>x86_64<span class="token operator">-</span>DVD<span class="token operator">-</span>1810<span class="token operator">-</span>7<span class="token punctuation">.</span>6<span class="token punctuation">.</span>iso <span class="token operator">/</span>data_kvm<span class="token operator">/</span>iso<span class="token operator">/</span>
ll <span class="token operator">/</span>data_kvm<span class="token operator">/</span>iso<span class="token operator">/</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/29/c4/5pjMW1su_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/64/9d/K3zHtFAI_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4c/69/K0IeiMEw_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_390"></a>4.使用虚拟系统管理器管理虚拟机</h4> 
<p>创建思路：<br> ① 创建存储池（ISO、STORE)<br> ② 添加存储卷<br> ③ 创建虚拟机</p> 
<pre><code class="prism language-powershell">virt<span class="token operator">-</span>manager
</code></pre> 
<p><img src="https://images2.imgbox.com/82/80/ku9aaJfd_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1__403"></a>1） 创建存储池</h4> 
<p><img src="https://images2.imgbox.com/52/b0/2s2wtGvx_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/5b/93/6WnxwPeU_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2__411"></a>2） 创建存储卷</h4> 
<p><img src="https://images2.imgbox.com/c3/8b/zyAOyBgK_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_414"></a>3）创建镜像池</h4> 
<p><img src="https://images2.imgbox.com/54/35/EWWXAsy0_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/48/f4/izijydam_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4__420"></a>4） 创建虚拟机</h4> 
<p><img src="https://images2.imgbox.com/f9/1b/vzWE9BkG_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/01/b4/1Es03261_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/41/5f/h0txeIk0_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/95/d8/nG7Zl9dL_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8a/e5/DT7GBLay_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/22/db/enXTvWWY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e2/cb/PhWhU8oU_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_434"></a>总结：</h4> 
<p>1.什么是虚拟化：</p> 
<ul><li>是指通过虚拟化技术将一台计算机虚拟为多台逻辑计算机，实现资源的模拟，隔离和共享</li></ul> 
<p>2.使用虚拟化的好处：</p> 
<ul><li>集中化管理</li><li>提高硬件的利用率</li><li>调整机器资源</li><li>高可靠，安全性</li></ul> 
<p>3.kvm虚拟化技术核心功能（原理)</p> 
<ul><li>qemu:工作在用户层，控制libkvm工具，调用物理虚拟化资源</li><li>kvm:工作在内核层，虚拟化/抽象化物理硬件资源，供给qemu组件调用 负责拦截一些io的敏感指令，转交给QEMU进行处理</li></ul> 
<p>4.虚拟化常用技术</p> 
<ul><li> <p>1.kvm（KVM模块+QEMU）-----基于内核的虚拟</p> 
  <ul><li>qemu： 模拟处理器的自由软件，qemu能模拟接近真实电脑的速度</li><li>kvm:Linux kernel的一个模块,加载模块后，才能进一步通过其他软件创建虚拟机，因为用户无法直接控制内核模块，还要有一个运行在用户空间的工具，kvm使用qemu的一部分，稍加改造，就成为了可控制kvm用户的工具</li></ul> </li><li> <p>2 Xen:是第一类运行再裸机上的虚拟化管理程序,它支持全虚拟化和半虚拟化,属于裸金属架构,因此与VMware Workstation软件不同的是它不再依存于宿主操作系统之上</p> </li><li> <p>3 docker:Docker内部使用的是Linux容器技术（LXC）,属于操作系统轻量级的虚拟化</p> </li></ul> 
<p>Docker技术与虚拟化技术(传统)有何区别？</p> 
<ul><li>从虚拟化层面来看，传统虚拟化技术是对硬件资源的虚拟，容器技术则是对进程（操作系统内核）的虚拟，从而可提供更轻量级的虚拟化，实现进程和资源的隔离。(所有容器都必须使用同样的操作系统和内核)</li><li>从架构来看，Docker比虚拟化少了两层，取消了hypervisor层和GuestOS层，使用Docker Engine进行调度和隔离，所有应用共用主机操作系统，因此在体量上，Docker较虚拟机更轻量级，在性能上优于虚拟化，接近裸机性能。</li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/59be742f4c7c3c004cb7d7a89f52fb17/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">将xml类型的excel文件转换为标准的Excel格式文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cafaacf7ed0b75a8d64deda84b441093/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Pycharm中利用Fiddler抓包的两种配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>