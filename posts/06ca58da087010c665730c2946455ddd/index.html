<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Cortex-M0内核 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Cortex-M0内核" />
<meta property="og:description" content="文章目录 Cortex-M0处理器的优势NMI 输入。寄存器和特殊寄存器程序映像启动流程嵌入式程序设计难点：并发任务的处理 RAM 空间组织Cortex-M 处理器的差别 Cortex-M0处理器的优势 能耗效率：处理器规模大小差不多，但是代码执行效率更高。所以能降能耗。
存储器容量限制
概念：32位能访问的空间肯定比16位，8位访问的空间多。这里不讨论16位的使用分页等操作来扩展存储空间。
代码密度高：Cortex-M0具备多种寻址方式，提高了代码密度。
关键字：高性能，程序执行速度快。0.9DMIPS/MHz;
关键字：高代码密度。高代码密度意味着单位代码实现更多功能。
关键字：确定的中断响应时间。最短16个时钟周期。16*1/48MHz = 500ns 左右。
NMI 输入。 概念：不可屏蔽中断。
作用：当系统发生致命故障时，使用该中断。
关键字：请求管理调用。SVC异常和PendSV。
关键字：Cortex-M0 向上兼容Cortex-M3, Cortex-M4;
寄存器和特殊寄存器 概念：数据在存储器中和寄存器中反复加载、存储，实现数据处理，称为加载-存储架构。使用内部寄存器操作，对存储器的操作也会减少。如果数据访问涉及到FLASH那么就会减少时间。
栈指针
概念：R13，栈指针（SP）; 在不同的物理位置上存在两个栈指针。主堆栈指针（MSP）和进程堆栈指针（PSP）；使用CONTROL来切换。
应用场景：栈一般是程序进中断的时候，会使用栈。或者在线程模式时，临时变量太多，内部寄存器不够用了，那么会使用栈。
主堆栈指针和进程栈指针的切换场景：一般不用切换。操作系统会涉及到切换，这是因为系统内核的占空间和线程级的栈空间是相互独立的。
xPSR，组合程序状态寄存器
概念：提供了程序执行信息和ALU(算术逻辑单元)标志。该寄存器由三个程序状态寄存器组成。APSR、IPSR、EPSR。
作用：指示的东西比较少，一般不用去看。涉及到程序跳转控制，数学计算。
PRIMASK 中断屏蔽特殊寄存器
概念：置位后，除了NMI和Hardfault之外的中断都会被屏蔽掉。实际上，此时当前的中断优先级被置为了0，这也是可以配置的最高等级。
与此类似的还有：faultmask,连fault都关闭。basepri; 控制屏蔽的中断优先级，rtos中常用。
本质：改变当前中断优先级为最高，导致其他中断优先级不回被响应了。
程序映像 概念：程序映像就是程序的执行地址。从0x0000000开始，获取向量表。向量表关键的是前两个地址，0x0000000和0x00000004，存储MSP栈地址和复位向量地址。
启动流程 嵌入式程序设计 常见的程序结构：轮询、中断、轮询中断混合，RTOS；
难点：并发任务的处理 场景：多个任务同时需要执行，其中一个任务过长，执行时间很长，导致其他几个任务不能得到及时响应而后程序失败。
解决办法：1、大任务切片划分。2、RTOS；
1、大任务切片划分，如果应用程序非常复杂的时候，手动拆分任务就不切实际了。
2、RTOS会有时间片的概念，自动在时间片结束后执行任务切换。在Freertos中需要手动打开。
RAM 空间组织 数据区域：包含全局变量和静态变量。
栈区域 ：用于临时数据存储、局部变量的存储空间、函数调用参数传递和异常处理处理的寄存器备份。突出一个临时。
Q：函数传参是怎么实现的？A：函数参数太多了，内部寄存器不够用了，也就放到栈里了。
堆区域 ： C函数自动分配存储器区域，例如malloc。
Cortex-M 处理器的差别 M3比M0多：
支持MPU(存储器保护单元)；
指令集更丰富；如除法器；
NVIC更灵活，优先级可变换。
调试方面，断点更多，支持跟踪特性；
架构
Cortex-M0是冯诺依曼架构。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/06ca58da087010c665730c2946455ddd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-14T11:19:29+08:00" />
<meta property="article:modified_time" content="2023-07-14T11:19:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Cortex-M0内核</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#CortexM0_2" rel="nofollow">Cortex-M0处理器的优势</a></li><li><a href="#NMI__18" rel="nofollow">NMI 输入。</a></li><li><a href="#_26" rel="nofollow">寄存器和特殊寄存器</a></li><li><a href="#_44" rel="nofollow">程序映像</a></li><li><a href="#_48" rel="nofollow">启动流程</a></li><li><a href="#_51" rel="nofollow">嵌入式程序设计</a></li><li><ul><li><ul><li><a href="#_54" rel="nofollow">难点：并发任务的处理</a></li></ul> 
  </li></ul> 
  </li><li><a href="#RAM__61" rel="nofollow">RAM 空间组织</a></li><li><a href="#CortexM__68" rel="nofollow">Cortex-M 处理器的差别</a></li></ul> 
</div> 
<p></p> 
<h2><a id="CortexM0_2"></a>Cortex-M0处理器的优势</h2> 
<p><strong>能耗效率</strong>：处理器规模大小差不多，但是代码执行效率更高。所以能降能耗。<br> <img src="https://images2.imgbox.com/06/80/zmVhlsZg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b6/69/S5t8ucVY_o.png" alt="更多的时间能进入休眠"><br> <strong>存储器容量限制</strong><br> 概念：32位能访问的空间肯定比16位，8位访问的空间多。这里不讨论16位的使用分页等操作来扩展存储空间。<br> <strong>代码密度高</strong>：Cortex-M0具备多种寻址方式，提高了代码密度。</p> 
<p>关键字：高性能，程序执行速度快。0.9DMIPS/MHz;</p> 
<p>关键字：高代码密度。高代码密度意味着单位代码实现更多功能。<br> 关键字：确定的中断响应时间。最短16个时钟周期。16*1/48MHz = 500ns 左右。</p> 
<h2><a id="NMI__18"></a>NMI 输入。</h2> 
<p>概念：不可屏蔽中断。<br> 作用：当系统发生致命故障时，使用该中断。</p> 
<p>关键字：请求管理调用。SVC异常和PendSV。</p> 
<p>关键字：Cortex-M0 向上兼容Cortex-M3, Cortex-M4;</p> 
<h2><a id="_26"></a>寄存器和特殊寄存器</h2> 
<p>概念：数据在存储器中和寄存器中反复加载、存储，实现数据处理，称为加载-存储架构。使用内部寄存器操作，对存储器的操作也会减少。如果数据访问涉及到FLASH那么就会减少时间。<br> <img src="https://images2.imgbox.com/b1/9c/3mJSY6nm_o.png" alt="在这里插入图片描述"><br> <strong>栈指针</strong><br> 概念：R13，栈指针（SP）; 在不同的物理位置上存在两个栈指针。主堆栈指针（MSP）和进程堆栈指针（PSP）；使用CONTROL来切换。<br> 应用场景：栈一般是程序进中断的时候，会使用栈。或者在线程模式时，临时变量太多，内部寄存器不够用了，那么会使用栈。<br> 主堆栈指针和进程栈指针的切换场景：一般不用切换。操作系统会涉及到切换，这是因为系统内核的占空间和线程级的栈空间是相互独立的。</p> 
<p><strong>xPSR，组合程序状态寄存器</strong><br> 概念：提供了程序执行信息和ALU(算术逻辑单元)标志。该寄存器由三个程序状态寄存器组成。APSR、IPSR、EPSR。<br> 作用：指示的东西比较少，一般不用去看。涉及到程序跳转控制，数学计算。</p> 
<p><strong>PRIMASK</strong> 中断屏蔽特殊寄存器<br> 概念：置位后，除了NMI和Hardfault之外的中断都会被屏蔽掉。实际上，此时当前的中断优先级被置为了0，这也是可以配置的最高等级。<br> 与此类似的还有：faultmask,连fault都关闭。basepri; 控制屏蔽的中断优先级，rtos中常用。<br> 本质：改变当前中断优先级为最高，导致其他中断优先级不回被响应了。</p> 
<h2><a id="_44"></a>程序映像</h2> 
<p>概念：程序映像就是程序的执行地址。从0x0000000开始，获取向量表。向量表关键的是前两个地址，0x0000000和0x00000004，存储MSP栈地址和复位向量地址。<br> <img src="https://images2.imgbox.com/a1/ef/p6lRVZKA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/01/3d/ZhM1L6u2_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_48"></a>启动流程</h2> 
<p><img src="https://images2.imgbox.com/69/7d/4HAVvcj4_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_51"></a>嵌入式程序设计</h2> 
<p>常见的程序结构：轮询、中断、轮询中断混合，RTOS；</p> 
<h4><a id="_54"></a>难点：并发任务的处理</h4> 
<p><strong>场景</strong>：多个任务同时需要执行，其中一个任务过长，执行时间很长，导致其他几个任务不能得到及时响应而后程序失败。<br> <strong>解决办法</strong>：1、大任务切片划分。2、RTOS；<br> 1、大任务切片划分，如果应用程序非常复杂的时候，手动拆分任务就不切实际了。<br> 2、RTOS会有时间片的概念，自动在时间片结束后执行任务切换。在Freertos中需要手动打开。</p> 
<h2><a id="RAM__61"></a>RAM 空间组织</h2> 
<p><img src="https://images2.imgbox.com/45/0a/EkWYFb5o_o.png" alt="在这里插入图片描述"><br> <strong>数据区域</strong>：包含全局变量和静态变量。<br> <strong>栈区域</strong> ：用于临时数据存储、局部变量的存储空间、函数调用参数传递和异常处理处理的寄存器备份。突出一个<strong>临时</strong>。<br> Q：函数传参是怎么实现的？A：函数参数太多了，内部寄存器不够用了，也就放到栈里了。<br> <strong>堆区域</strong> ： C函数自动分配存储器区域，例如malloc。<br> <img src="https://images2.imgbox.com/af/e8/s5sFxcEQ_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="CortexM__68"></a>Cortex-M 处理器的差别</h2> 
<p><img src="https://images2.imgbox.com/93/8d/3vDyhe8r_o.png" alt="在这里插入图片描述"><br> <strong>M3比M0多</strong>：<br> 支持MPU(存储器保护单元)；<br> 指令集更丰富；如除法器；<br> NVIC更灵活，优先级可变换。<br> 调试方面，断点更多，支持跟踪特性；</p> 
<p><strong>架构</strong><br> Cortex-M0是冯诺依曼架构。<br> Cortex-M3是哈佛架构。<br> 冯架构和哈佛架构的区别是：指令寻址和数据寻址是否走同一条总线，走同一条总线的是冯诺依曼架构，走两条总线的是哈佛架构。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/71554f2e000a6f818b67bd8842766b5c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux 离线安装软件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f0e1c30d01c1acb6667da20f10f13839/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Ubuntu 下进行系统备份与迁移</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>