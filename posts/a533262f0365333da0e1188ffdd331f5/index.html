<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>spring mvc（六）实现REST接口GET/POST/PUT/DELETE - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="spring mvc（六）实现REST接口GET/POST/PUT/DELETE" />
<meta property="og:description" content="基于springmvc实现restful样式的api接口。 [b]1.Restful[/b] Restful样式的接口将功能抽象为资源resource路径映射，以HTTP GET /resource/{id} 的方式访问。主要分为以下几类接口： [table] |[b]地址[/b]|[b]请求方法[/b]|[b]说明[/b]| |/resources|GET|获取所有资源| |/resources|POST|创建新资源，content中包含资源内容| |/resource/{id}|GET|获取编号为id的资源| |/resource/{id}|PUT|更新编号为id的资源，content中包含资源内容| |/resource/{id}|DELETE|删除编号为id的资源| [/table] {id}称为路径变量，告诉restful你要对哪个资源进行查、改、删。 接口一般返回json/xml格式数据，方便服务端程序、浏览器脚本调用接口并处理返回数据。 按照Restful样式，teacher模块设计为两个资源地址：/restMvc/teachers和/restMvc/teachers/{id}。 基础的spring配置、springmvc配置、各层对象接口实现见前几节内容。 [b]2./teachers[/b] 新建TeachersMvcResource资源类： package com.sunbin.test.restMvc;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.view.json.MappingJackson2JsonView;
import org.springframework.stereotype.Controller;
import org.springframework.beans.factory.annotation.Autowired;
import com.sunbin.test.teacher.pojo.Teacher;
import com.sunbin.test.teacher.service.TeacherService;
@Controller
@RequestMapping(&#34;/restMvc/teachers&#34;)
public class TeachersMvcResource {
@Autowired
private TeacherService teacherService;
@RequestMapping(method = { RequestMethod.GET })
public ModelAndView get(HttpServletRequest arg0, HttpServletResponse arg1)
throws Exception {
System.out.println(&#34;RestMvc TeachersResource.get&#34;);
ModelAndView modelAndView = new ModelAndView(" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a533262f0365333da0e1188ffdd331f5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-05-23T16:31:34+08:00" />
<meta property="article:modified_time" content="2017-05-23T16:31:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">spring mvc（六）实现REST接口GET/POST/PUT/DELETE</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    基于springmvc实现restful样式的api接口。 
<br> 
<br>[b]1.Restful[/b] 
<br>Restful样式的接口将功能抽象为资源resource路径映射，以HTTP GET /resource/{id} 的方式访问。主要分为以下几类接口： 
<br>[table] 
<br>|[b]地址[/b]|[b]请求方法[/b]|[b]说明[/b]| 
<br>|/resources|GET|获取所有资源| 
<br>|/resources|POST|创建新资源，content中包含资源内容| 
<br>|/resource/{id}|GET|获取编号为id的资源| 
<br>|/resource/{id}|PUT|更新编号为id的资源，content中包含资源内容| 
<br>|/resource/{id}|DELETE|删除编号为id的资源| 
<br>[/table] 
<br>{id}称为路径变量，告诉restful你要对哪个资源进行查、改、删。 
<br>接口一般返回json/xml格式数据，方便服务端程序、浏览器脚本调用接口并处理返回数据。 
<br>按照Restful样式，teacher模块设计为两个资源地址：/restMvc/teachers和/restMvc/teachers/{id}。 
<br>基础的spring配置、springmvc配置、各层对象接口实现见前几节内容。 
<br> 
<br>[b]2./teachers[/b] 
<br>新建TeachersMvcResource资源类： 
<br> 
<pre><code class="language-java"><br>package com.sunbin.test.restMvc;<br><br>import javax.servlet.http.HttpServletRequest;<br>import javax.servlet.http.HttpServletResponse;<br><br>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RequestMethod;<br>import org.springframework.web.servlet.ModelAndView;<br>import org.springframework.web.servlet.view.json.MappingJackson2JsonView;<br>import org.springframework.stereotype.Controller;<br>import org.springframework.beans.factory.annotation.Autowired;<br><br>import com.sunbin.test.teacher.pojo.Teacher;<br>import com.sunbin.test.teacher.service.TeacherService;<br><br>@Controller<br>@RequestMapping("/restMvc/teachers")<br>public class TeachersMvcResource {<!-- --><br><br>	@Autowired<br>	private TeacherService teacherService;<br><br>	@RequestMapping(method = { RequestMethod.GET })<br>	public ModelAndView get(HttpServletRequest arg0, HttpServletResponse arg1)<br>			throws Exception {<!-- --><br>		System.out.println("RestMvc TeachersResource.get");<br>		ModelAndView modelAndView = new ModelAndView(<br>				new MappingJackson2JsonView());<br>		modelAndView.addObject("teachers", teacherService.list());<br>		return modelAndView;<br>	}<br><br>	@RequestMapping(method = { RequestMethod.POST })<br>	public ModelAndView post(Teacher teacher, HttpServletRequest arg0,<br>			HttpServletResponse arg1) throws Exception {<!-- --><br>		ModelAndView modelAndView = new ModelAndView(<br>				new MappingJackson2JsonView());<br>		System.out.println("RestMvc TeachersResource.post:" + teacher);<br>		teacherService.save(teacher);<br>		modelAndView.addObject("status", "y");<br>		return modelAndView;<br>	}<br><br>}<br></code></pre> 
<br>类中@Controller和@RequestMapping("/restMvc/teachers")注解声明了此类是Controller类并绑定到/restMvc/teachers地址，两个方法的@RequestMapping(method = { RequestMethod.GET })和@RequestMapping(method = { RequestMethod.POST })注解分别响应GET和POST请求，Contentbody里面的参数会被自动封装成Teacher teacher。 
<br> 
<br>[b]3./teacher/{id}[/b] 
<br>新增TeacherMvcResource类： 
<br> 
<pre><code class="language-java"><br>package com.sunbin.test.restMvc;<br><br>import javax.servlet.http.HttpServletRequest;<br>import javax.servlet.http.HttpServletResponse;<br><br>import org.springframework.web.bind.annotation.PathVariable;<br>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RequestMethod;<br>import org.springframework.web.servlet.ModelAndView;<br>import org.springframework.web.servlet.view.json.MappingJackson2JsonView;<br>import org.springframework.stereotype.Controller;<br>import org.springframework.beans.factory.annotation.Autowired;<br><br>import com.sunbin.test.teacher.pojo.Teacher;<br>import com.sunbin.test.teacher.service.TeacherService;<br><br>@Controller<br>@RequestMapping("/restMvc/teacher/{id}")<br>public class TeacherMvcResource {<!-- --><br><br>	@Autowired<br>	private TeacherService teacherService;<br><br>	@RequestMapping(method = { RequestMethod.GET })<br>	public ModelAndView get(@PathVariable("id") Integer id,<br>			HttpServletRequest arg0, HttpServletResponse arg1) throws Exception {<!-- --><br>		System.out.println("RestMvc TeacherResource.get:" + id);<br>		ModelAndView modelAndView = new ModelAndView(<br>				new MappingJackson2JsonView());<br>		Teacher teacher = new Teacher();<br>		teacher.setId(id);<br>		modelAndView.addObject("teacher", teacherService.get(teacher));<br>		return modelAndView;<br>	}<br><br>	@RequestMapping(method = { RequestMethod.PUT })<br>	public ModelAndView put(@PathVariable("id") Integer id, Teacher teacher,<br>			HttpServletRequest arg0, HttpServletResponse arg1) throws Exception {<!-- --><br>		ModelAndView modelAndView = new ModelAndView(<br>				new MappingJackson2JsonView());<br>		// 如果teacher中不含id属性，需要单独设置<br>		// teacher.setId(id);<br>		System.out.println("RestMvc TeacherResource.put:" + id + ":" + teacher);<br>		teacherService.update(teacher);<br>		modelAndView.addObject("status", "y");<br>		return modelAndView;<br>	}<br><br>	@RequestMapping(method = { RequestMethod.DELETE })<br>	public ModelAndView delete(@PathVariable("id") Integer id,<br>			HttpServletRequest arg0, HttpServletResponse arg1) throws Exception {<!-- --><br>		ModelAndView modelAndView = new ModelAndView(<br>				new MappingJackson2JsonView());<br>		Teacher teacher = new Teacher();<br>		teacher.setId(id);<br>		System.out.println("RestMvc TeacherResource.delete:" + id);<br>		teacherService.remove(teacher);<br>		modelAndView.addObject("status", "y");<br>		return modelAndView;<br>	}<br><br>}<br></code></pre> 
<br>类中将服务绑定到/restMvc/teacher/{id}地址，方法的@RequestMapping(method = { RequestMethod.GET })、@RequestMapping(method = { RequestMethod.PUT })和@RequestMapping(method = { RequestMethod.DELETE })注解分别响应GET、PUT和POST请求，@PathVariable("id") Integer id接收{id}路径变量。 
<br> 
<br>[b]4.测试[/b] 
<br>rest接口可以使用服务端程序（URL、HttpClient库）、js（jquery ajax）进行访问。这里简单实用浏览器插件来测试。 
<br>使用FireFox的HttpRquester插件访问接口： 
<br>[b]POST[/b] 
<br>POST http://localhost:8080/testRest/restMvc/teachers 
<br>Content-Type: application/x-www-form-urlencoded 
<br>name=a&amp;age=1 
<br> -- response -- 
<br>200 OK 
<br>Server: Apache-Coyote/1.1 
<br>Pragma: no-cache 
<br>Cache-Control: no-cache, no-store, max-age=0 
<br>Expires: Thu, 01 Jan 1970 00:00:00 GMT 
<br>Content-Type: application/json;charset=UTF-8 
<br>Content-Language: zh-CN 
<br>Transfer-Encoding: chunked 
<br>Date: Tue, 23 May 2017 02:31:56 GMT 
<br> 
<br>{"teacher":{"id":1,"age":1,"name":"a"},"status":"y"} 
<br> 
<br>[b]GET[/b] 
<br>GET http://localhost:8080/testRest/restMvc/teachers 
<br> 
<br> -- response -- 
<br>200 OK 
<br>Server: Apache-Coyote/1.1 
<br>Pragma: no-cache 
<br>Cache-Control: no-cache, no-store, max-age=0 
<br>Expires: Thu, 01 Jan 1970 00:00:00 GMT 
<br>Content-Type: application/json;charset=UTF-8 
<br>Content-Language: zh-CN 
<br>Transfer-Encoding: chunked 
<br>Date: Tue, 23 May 2017 02:36:16 GMT 
<br> 
<br>{"teachers":[{"id":1,"age":1,"name":"a"}]} 
<br> 
<br>[b]PUT[/b] 
<br>PUT http://localhost:8080/testRest/restMvc/teacher/1 
<br>Content-Type: application/x-www-form-urlencoded 
<br>name=b&amp;age=2 
<br> -- response -- 
<br>200 OK 
<br>Server: Apache-Coyote/1.1 
<br>Pragma: no-cache 
<br>Cache-Control: no-cache, no-store, max-age=0 
<br>Expires: Thu, 01 Jan 1970 00:00:00 GMT 
<br>Content-Type: application/json;charset=UTF-8 
<br>Content-Language: zh-CN 
<br>Transfer-Encoding: chunked 
<br>Date: Tue, 23 May 2017 02:37:41 GMT 
<br> 
<br>{"teacher":{"id":1,"age":2,"name":"b"},"status":"y"} 
<br> 
<br>[b]GET[/b] 
<br>GET http://localhost:8080/testRest/restMvc/teacher/1 
<br> 
<br> -- response -- 
<br>200 OK 
<br>Server: Apache-Coyote/1.1 
<br>Pragma: no-cache 
<br>Cache-Control: no-cache, no-store, max-age=0 
<br>Expires: Thu, 01 Jan 1970 00:00:00 GMT 
<br>Content-Type: application/json;charset=UTF-8 
<br>Content-Language: zh-CN 
<br>Transfer-Encoding: chunked 
<br>Date: Tue, 23 May 2017 02:38:29 GMT 
<br> 
<br>{"teacher":{"id":1,"age":2,"name":"b"}} 
<br> 
<br>[b]DELETE[/b] 
<br>DELETE http://localhost:8080/testRest/restMvc/teacher/1 
<br> 
<br> -- response -- 
<br>200 OK 
<br>Server: Apache-Coyote/1.1 
<br>Pragma: no-cache 
<br>Cache-Control: no-cache, no-store, max-age=0 
<br>Expires: Thu, 01 Jan 1970 00:00:00 GMT 
<br>Content-Type: application/json;charset=UTF-8 
<br>Content-Language: zh-CN 
<br>Transfer-Encoding: chunked 
<br>Date: Tue, 23 May 2017 02:38:46 GMT 
<br> 
<br>{"status":"y"} 
<br> 
<br>[b]5.使用服务器程序访问rest[/b] 
<br>使用HttpClient库对rest接口进行测试，测试类TestRestMvc代码如下： 
<br> 
<pre><code class="language-java"><br>package com.sunbin.test.restMvc;<br><br>import java.io.IOException;<br>import java.util.ArrayList;<br>import java.util.HashMap;<br>import java.util.Iterator;<br>import java.util.List;<br>import java.util.Map;<br>import java.util.Map.Entry;<br><br>import org.apache.http.HttpEntity;<br>import org.apache.http.NameValuePair;<br>import org.apache.http.ParseException;<br>import org.apache.http.client.ClientProtocolException;<br>import org.apache.http.client.entity.UrlEncodedFormEntity;<br>import org.apache.http.client.methods.HttpDelete;<br>import org.apache.http.client.methods.HttpGet;<br>import org.apache.http.client.methods.HttpPost;<br>import org.apache.http.client.methods.HttpPut;<br>import org.apache.http.impl.client.DefaultHttpClient;<br>import org.apache.http.message.BasicNameValuePair;<br>import org.apache.http.util.EntityUtils;<br><br>public class TestRestMvc {<!-- --><br><br>	public static final String URL_BASE = "http://localhost:8080/testRest/restMvc/";<br><br>	public static void main(String[] args) throws ParseException,<br>			ClientProtocolException, IOException {<!-- --><br>		String module = "teacher";<br>		String url = "";<br>		DefaultHttpClient client = new DefaultHttpClient();<br>		HttpEntity entity = null;<br>		String result = "";<br>		Map map = null;<br>		HttpGet httpGet = null;<br>		HttpPost httpPost = null;<br>		HttpPut httpPut = null;<br>		HttpDelete httpDelete = null;<br><br>		url = URL_BASE + module + "s";<br>		System.out.println("get\t " + url);<br>		httpGet = new HttpGet(url);<br>		result = EntityUtils.toString(client.execute(httpGet).getEntity());<br>		System.out.println(result);<br><br>		url = URL_BASE + module + "s";<br>		System.out.println("post\t " + url);<br>		httpPost = new HttpPost(url);<br>		map = new HashMap();<br>		map.put("name", "a");<br>		map.put("age", "1");<br>		entity = new UrlEncodedFormEntity(getParam(map), "UTF-8");<br>		httpPost.setEntity(entity);<br>		result = EntityUtils.toString(client.execute(httpPost).getEntity());<br>		System.out.println(result);<br><br>		url = URL_BASE + module + "s";<br>		System.out.println("get\t " + url);<br>		httpGet = new HttpGet(url);<br>		result = EntityUtils.toString(client.execute(httpGet).getEntity());<br>		System.out.println(result);<br><br>		url = URL_BASE + module + "/1";<br>		System.out.println("get\t " + url);<br>		httpGet = new HttpGet(url);<br>		result = EntityUtils.toString(client.execute(httpGet).getEntity());<br>		System.out.println(result);<br><br>		url = URL_BASE + module + "/1";<br>		System.out.println("put\t " + url);<br>		httpPut = new HttpPut(url);<br>		map = new HashMap();<br>		map.put("name", "aa");<br>		map.put("age", "11");<br>		entity = new UrlEncodedFormEntity(getParam(map), "UTF-8");<br>		httpPut.setEntity(entity);<br>		result = EntityUtils.toString(client.execute(httpPut).getEntity());<br>		System.out.println(result);<br><br>		url = URL_BASE + module + "s";<br>		System.out.println("get\t " + url);<br>		httpGet = new HttpGet(url);<br>		result = EntityUtils.toString(client.execute(httpGet).getEntity());<br>		System.out.println(result);<br><br>		url = URL_BASE + module + "/1";<br>		System.out.println("delete\t " + url);<br>		httpDelete = new HttpDelete(url);<br>		result = EntityUtils.toString(client.execute(httpDelete).getEntity());<br>		System.out.println(result);<br><br>		url = URL_BASE + module + "s";<br>		System.out.println("get\t " + url);<br>		httpGet = new HttpGet(url);<br>		result = EntityUtils.toString(client.execute(httpGet).getEntity());<br>		System.out.println(result);<br><br>	}<br><br>	public static List&lt;NameValuePair&gt; getParam(Map parameterMap) {<!-- --><br>		List&lt;NameValuePair&gt; param = new ArrayList&lt;NameValuePair&gt;();<br>		Iterator it = parameterMap.entrySet().iterator();<br>		while (it.hasNext()) {<!-- --><br>			Entry parmEntry = (Entry) it.next();<br>			param.add(new BasicNameValuePair((String) parmEntry.getKey(),<br>					(String) parmEntry.getValue()));<br>		}<br>		return param;<br>	}<br>}<br></code></pre> 
<br>输出结果如下： 
<br>get http://localhost:8080/testRest/restMvc/teachers 
<br>{"teachers":[]} 
<br>post http://localhost:8080/testRest/restMvc/teachers 
<br>{"teacher":{"id":1,"age":1,"name":"a"},"status":"y"} 
<br>get http://localhost:8080/testRest/restMvc/teachers 
<br>{"teachers":[{"id":1,"age":1,"name":"a"}]} 
<br>get http://localhost:8080/testRest/restMvc/teacher/1 
<br>{"teacher":{"id":1,"age":1,"name":"a"}} 
<br>put http://localhost:8080/testRest/restMvc/teacher/1 
<br>{"teacher":{"id":1,"age":11,"name":"aa"},"status":"y"} 
<br>get http://localhost:8080/testRest/restMvc/teachers 
<br>{"teachers":[{"id":1,"age":11,"name":"aa"}]} 
<br>delete http://localhost:8080/testRest/restMvc/teacher/1 
<br>{"status":"y"} 
<br>get http://localhost:8080/testRest/restMvc/teachers 
<br>{"teachers":[]}
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e59aeedc401b207568a38fb7391d4024/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">非Spring Boot Web项目 注册节点到Eureka Server并提供服务</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b19a3962a00a111703c03df053b6075/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">明朝首辅/太师，辅佐明朝四代国之重臣杨士奇后世传人在松滋</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>