<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android 横竖屏幕切换(layout-land和layout-port) - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android 横竖屏幕切换(layout-land和layout-port)" />
<meta property="og:description" content="1.首先通过以下语句设置Activity为无标题和全屏模式:
1 // 设置为无标题栏 2 requestWindowFeature(Window.FEATURE_NO_TITLE); 3 4 // 设置为全屏模式 5 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 6 WindowManager.LayoutParams.FLAG_FULLSCREEN); 7 setContentView(R.layout.main); 2.下面给出xml文件配置,这里我们在res目录下建立layout-land和layout-port目录,相应的layout文件不变，比如main.xml。layout-land是横屏的layout,layout-port是竖屏的layout，其他的不用管模拟器自动寻找
main.xml文件如下:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; android:background=&#34;@drawable/white&#34; android:orientation=&#34;vertical&#34; android:layout_width=&#34;fill_parent&#34; android:layout_height=&#34;fill_parent&#34; &gt; &lt;TextView android:id=&#34;@&#43;id/myTextView1&#34; android:layout_width=&#34;fill_parent&#34; android:layout_height=&#34;wrap_content&#34; android:textColor=&#34;@drawable/blue&#34; android:text=&#34;the portrait&#34; /&gt; &lt;Button android:id=&#34;@&#43;id/myButton1&#34; android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; android:text=&#34;@string/str_button1&#34; /&gt; &lt;/LinearLayout&gt; 这个xml文件需要在上述所说的2个文件夹下都需要放置.
3.获取资源id的view:
mButton01 = (Button) findViewById(R.id.myButton1); mTextView01 = (TextView) findViewById(R.id.myTextView1); 4.返回当前显示Activity的显示状态(横屏还是竖屏)
// Return the current requested orientation of the activity
if (getRequestedOrientation() == -1){ mTextView01.setText(getResources().getText(R.string.str_err_1001)); } 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2656bb26907457a476ca575545e705b6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-19T19:34:49+08:00" />
<meta property="article:modified_time" content="2020-06-19T19:34:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android 横竖屏幕切换(layout-land和layout-port)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1.首先通过以下语句设置Activity为无标题和全屏模式:</p> 
<pre><code class="prism language-bash">1 // 设置为无标题栏  
2 requestWindowFeature<span class="token punctuation">(</span>Window.FEATURE_NO_TITLE<span class="token punctuation">)</span><span class="token punctuation">;</span>  
3   
4 // 设置为全屏模式  
5 getWindow<span class="token punctuation">(</span><span class="token punctuation">)</span>.setFlags<span class="token punctuation">(</span>WindowManager.LayoutParams.FLAG_FULLSCREEN,  
6                      WindowManager.LayoutParams.FLAG_FULLSCREEN<span class="token punctuation">)</span><span class="token punctuation">;</span>  
7 setContentView<span class="token punctuation">(</span>R.layout.main<span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre> 
<p>2.下面给出xml文件配置,这里我们在res目录下建立layout-land和layout-port目录,相应的layout文件不变，比如main.xml。layout-land是横屏的layout,layout-port是竖屏的layout，其他的不用管模拟器自动寻找<br> main.xml文件如下:</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span>?<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>LinearLayout  
  xmlns:android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span>  
  android:background<span class="token operator">=</span><span class="token string">"@drawable/white"</span>  
  android:orientation<span class="token operator">=</span><span class="token string">"vertical"</span>  
  android:layout_width<span class="token operator">=</span><span class="token string">"fill_parent"</span>  
  android:layout_height<span class="token operator">=</span><span class="token string">"fill_parent"</span>  
<span class="token operator">&gt;</span>  
  <span class="token operator">&lt;</span>TextView  
    android:id<span class="token operator">=</span><span class="token string">"@+id/myTextView1"</span>  
    android:layout_width<span class="token operator">=</span><span class="token string">"fill_parent"</span>   
    android:layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>  
    android:textColor<span class="token operator">=</span><span class="token string">"@drawable/blue"</span>   
    android:text<span class="token operator">=</span><span class="token string">"the portrait"</span>  
  /<span class="token operator">&gt;</span>  
  <span class="token operator">&lt;</span>Button  
    android:id<span class="token operator">=</span><span class="token string">"@+id/myButton1"</span>  
    android:layout_width<span class="token operator">=</span><span class="token string">"wrap_content"</span>  
    android:layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>  
    android:text<span class="token operator">=</span><span class="token string">"@string/str_button1"</span> /<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>/LinearLayout<span class="token operator">&gt;</span>  
</code></pre> 
<p>这个xml文件需要在上述所说的2个文件夹下都需要放置.</p> 
<p>3.获取资源id的view:</p> 
<pre><code class="prism language-bash">mButton01 <span class="token operator">=</span> <span class="token punctuation">(</span>Button<span class="token punctuation">)</span> findViewById<span class="token punctuation">(</span>R.id.myButton1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
mTextView01 <span class="token operator">=</span> <span class="token punctuation">(</span>TextView<span class="token punctuation">)</span> findViewById<span class="token punctuation">(</span>R.id.myTextView1<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> 
<p>4.返回当前显示Activity的显示状态(横屏还是竖屏)</p> 
<p>// Return the current requested orientation of the activity</p> 
<pre><code class="prism language-bash"><span class="token keyword">if</span> <span class="token punctuation">(</span>getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> -1<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>  
   mTextView01.setText<span class="token punctuation">(</span>getResources<span class="token punctuation">(</span><span class="token punctuation">)</span>.getText<span class="token punctuation">(</span>R.string.str_err_1001<span class="token punctuation">))</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
</code></pre> 
<p>5.设置按钮点击监听器</p> 
<pre><code class="prism language-bash">/* 当点击按钮旋转屏幕画面 */  
    mButton01.setOnClickListener<span class="token punctuation">(</span>new Button.OnClickListener<span class="token punctuation">(</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
      // @Override  
      public void onClick<span class="token punctuation">(</span>View arg0<span class="token punctuation">)</span>  
      <span class="token punctuation">{<!-- --></span>  
        /* 方法一：重写getRequestedOrientation */  
  
        /* 若无法取得screenOrientation属性 */  
        <span class="token keyword">if</span> <span class="token punctuation">(</span>getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> -1<span class="token punctuation">)</span>  
        <span class="token punctuation">{<!-- --></span>  
          /* 提示无法进行画面旋转功能，因无法判别Orientation */  
          mTextView01.setText<span class="token punctuation">(</span>getResources<span class="token punctuation">(</span><span class="token punctuation">)</span>.getText<span class="token punctuation">(</span>R.string.str_err_1001<span class="token punctuation">))</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span> <span class="token keyword">else</span>  
        <span class="token punctuation">{<!-- --></span>  
          <span class="token keyword">if</span> <span class="token punctuation">(</span>getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE<span class="token punctuation">)</span>  
          <span class="token punctuation">{<!-- --></span>  
            /* 若当下为横排，则更改为竖排呈现 */  
            setRequestedOrientation<span class="token punctuation">(</span>ActivityInfo.SCREEN_ORIENTATION_PORTRAIT<span class="token punctuation">)</span><span class="token punctuation">;</span>  
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> ActivityInfo.SCREEN_ORIENTATION_PORTRAIT<span class="token punctuation">)</span>  
          <span class="token punctuation">{<!-- --></span>  
            /* 若当下为竖排，则更改为横排呈现 */  
            setRequestedOrientation<span class="token punctuation">(</span>ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE<span class="token punctuation">)</span><span class="token punctuation">;</span>  
          <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span>  
      <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
</code></pre> 
<p>6.改变屏幕显示的函数</p> 
<pre><code class="prism language-bash">@Override  
public void setRequestedOrientation<span class="token punctuation">(</span>int requestedOrientation<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
  // TODO Auto-generated method stub  
  
  /* 判断要更改的方向，以Toast提示 */  
  switch <span class="token punctuation">(</span>requestedOrientation<span class="token punctuation">)</span>  
  <span class="token punctuation">{<!-- --></span>  
    /* 更改为LANDSCAPE */  
    <span class="token keyword">case</span> <span class="token punctuation">(</span>ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE<span class="token punctuation">)</span>:  
      mMakeTextToast<span class="token punctuation">(</span>getResources<span class="token punctuation">(</span><span class="token punctuation">)</span>.getText<span class="token punctuation">(</span>R.string.str_msg1<span class="token punctuation">)</span>.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>,  
          false<span class="token punctuation">)</span><span class="token punctuation">;</span>  
      <span class="token keyword">break</span><span class="token punctuation">;</span>  
    /* 更改为PORTRAIT */  
    <span class="token keyword">case</span> <span class="token punctuation">(</span>ActivityInfo.SCREEN_ORIENTATION_PORTRAIT<span class="token punctuation">)</span>:  
      mMakeTextToast<span class="token punctuation">(</span>getResources<span class="token punctuation">(</span><span class="token punctuation">)</span>.getText<span class="token punctuation">(</span>R.string.str_msg2<span class="token punctuation">)</span>.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>,  
          false<span class="token punctuation">)</span><span class="token punctuation">;</span>  
      <span class="token keyword">break</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
  super.setRequestedOrientation<span class="token punctuation">(</span>requestedOrientation<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
</code></pre> 
<p>7.获取屏幕显示状态</p> 
<pre><code class="prism language-bash">@Override  
public int getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
  // TODO Auto-generated method stub  
  
  /* 此重写getRequestedOrientation方法，可取得当下屏幕的方向 */  
  <span class="token keyword">return</span> super.getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
</code></pre> 
<p>8.通过一个Toast来显示屏幕状态</p> 
<pre><code class="prism language-bash">public void mMakeTextToast<span class="token punctuation">(</span>String str, boolean isLong<span class="token punctuation">)</span>  
 <span class="token punctuation">{<!-- --></span>  
   <span class="token keyword">if</span> <span class="token punctuation">(</span>isLong <span class="token operator">==</span> true<span class="token punctuation">)</span>  
   <span class="token punctuation">{<!-- --></span>  
     Toast.makeText<span class="token punctuation">(</span>EX05_22.this, str, Toast.LENGTH_LONG<span class="token punctuation">)</span>.show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
   <span class="token punctuation">}</span> <span class="token keyword">else</span>  
   <span class="token punctuation">{<!-- --></span>  
     Toast.makeText<span class="token punctuation">(</span>EX05_22.this, str, Toast.LENGTH_SHORT<span class="token punctuation">)</span>.show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
   <span class="token punctuation">}</span>  
 <span class="token punctuation">}</span>  
</code></pre> 
<p>9.colors.xml文件内容:</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span>?<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>resources<span class="token operator">&gt;</span>  
  <span class="token operator">&lt;</span>drawable name<span class="token operator">=</span><span class="token string">"darkgray"</span><span class="token operator">&gt;</span><span class="token comment">#808080&lt;/drawable&gt;  </span>
  <span class="token operator">&lt;</span>drawable name<span class="token operator">=</span><span class="token string">"white"</span><span class="token operator">&gt;</span><span class="token comment">#FFFFFF&lt;/drawable&gt;  </span>
  <span class="token operator">&lt;</span>drawable name<span class="token operator">=</span><span class="token string">"blue"</span><span class="token operator">&gt;</span><span class="token comment">#0000FF&lt;/drawable&gt;  </span>
<span class="token operator">&lt;</span>/resources<span class="token operator">&gt;</span>  
</code></pre> 
<p>10.strings.xml文件内容如下:</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span>?<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>resources<span class="token operator">&gt;</span>  
    <span class="token operator">&lt;</span>string name<span class="token operator">=</span><span class="token string">"hello"</span><span class="token operator">&gt;</span>Hello World, ScreenChangeEx<span class="token operator">&lt;</span>/string<span class="token operator">&gt;</span>  
    <span class="token operator">&lt;</span>string name<span class="token operator">=</span><span class="token string">"app_name"</span><span class="token operator">&gt;</span> ScreenChangeEx <span class="token operator">&lt;</span>/string<span class="token operator">&gt;</span>  
    <span class="token operator">&lt;</span>string name<span class="token operator">=</span><span class="token string">"str_button1"</span><span class="token operator">&gt;</span>按我旋转屏幕<span class="token operator">&lt;</span>/string<span class="token operator">&gt;</span>  
    <span class="token operator">&lt;</span>string name<span class="token operator">=</span><span class="token string">"str_err_1001"</span><span class="token operator">&gt;</span>  
        请在AndroidManifest.xml\n添加android:screenOrientation属性  <span class="token operator">&lt;</span>/string<span class="token operator">&gt;</span>  
    <span class="token operator">&lt;</span>string name<span class="token operator">=</span><span class="token string">"str_msg1"</span><span class="token operator">&gt;</span>旋转为LANDSCAPE<span class="token operator">&lt;</span>/string<span class="token operator">&gt;</span>  
    <span class="token operator">&lt;</span>string name<span class="token operator">=</span><span class="token string">"str_msg2"</span><span class="token operator">&gt;</span>旋转为PORTRAIT<span class="token operator">&lt;</span>/string<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>/resources<span class="token operator">&gt;</span> 
</code></pre> 
<p>11.AndroidManifest.xml文件内容:</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span>?<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>manifest xmlns:android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span>  
    package<span class="token operator">=</span><span class="token string">"cn.com"</span> android:versionCode<span class="token operator">=</span><span class="token string">"1"</span> android:versionName<span class="token operator">=</span><span class="token string">"1.0.0"</span><span class="token operator">&gt;</span>  
    <span class="token operator">&lt;</span>application android:icon<span class="token operator">=</span><span class="token string">"@drawable/icon"</span> android:label<span class="token operator">=</span><span class="token string">"@string/app_name"</span><span class="token operator">&gt;</span>  
        <span class="token operator">&lt;</span>activity android:name<span class="token operator">=</span><span class="token string">".ActivityMain"</span> android:label<span class="token operator">=</span><span class="token string">"@string/app_name"</span>       android:configChanges<span class="token operator">=</span><span class="token string">"orientation|keyboardHidden"</span> 
            android:screenOrientation<span class="token operator">=</span><span class="token string">"landscape"</span><span class="token operator">&gt;</span>  
            <span class="token operator">&lt;</span>intent-filter<span class="token operator">&gt;</span>  
                <span class="token operator">&lt;</span>action android:name<span class="token operator">=</span><span class="token string">"android.intent.action.MAIN"</span> /<span class="token operator">&gt;</span>  
                <span class="token operator">&lt;</span>category android:name<span class="token operator">=</span><span class="token string">"android.intent.category.LAUNCHER"</span> /<span class="token operator">&gt;</span>  
            <span class="token operator">&lt;</span>/intent-filter<span class="token operator">&gt;</span>  
        <span class="token operator">&lt;</span>/activity<span class="token operator">&gt;</span>  
    <span class="token operator">&lt;</span>/application<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span>/manifest<span class="token operator">&gt;</span>  
</code></pre> 
<p>注意：</p> 
<p>1、不设置Activity的android:configChanges时，切屏会重新调用各个生命周期，切横屏时会执行一次，切竖屏时会执行两次<br> 2、设置Activity的android:configChanges="orientation"时，切屏还是会重新调用各个生命周期，切横、竖屏时只会执行一次<br> 3、设置Activity的android:configChanges="orientation|keyboardHidden"时，切屏不会重新调用各个生命周期，只会执行onConfigurationChanged方法</p> 
<p>13.程序整个ActivityMain.java文件如下:</p> 
<pre><code class="prism language-bash"><span class="token function">import</span> android.app.Activity<span class="token punctuation">;</span>  
<span class="token function">import</span> android.content.pm.ActivityInfo<span class="token punctuation">;</span>  
<span class="token function">import</span> android.os.Bundle<span class="token punctuation">;</span>  
<span class="token function">import</span> android.view.View<span class="token punctuation">;</span>  
<span class="token function">import</span> android.view.Window<span class="token punctuation">;</span>  
<span class="token function">import</span> android.view.WindowManager<span class="token punctuation">;</span>  
<span class="token function">import</span> android.widget.Button<span class="token punctuation">;</span>  
<span class="token function">import</span> android.widget.TextView<span class="token punctuation">;</span>  
<span class="token function">import</span> android.widget.Toast<span class="token punctuation">;</span>  
  
public class ActivityMain extends Activity  
<span class="token punctuation">{<!-- --></span>  
  private TextView mTextView01<span class="token punctuation">;</span>  
  private Button mButton01<span class="token punctuation">;</span>  
  
  /** Called when the activity is first created. */  
  @Override  
  public void onCreate<span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span>  
  <span class="token punctuation">{<!-- --></span>  
    super.onCreate<span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    // 设置为无标题栏  
    requestWindowFeature<span class="token punctuation">(</span>Window.FEATURE_NO_TITLE<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    // 设置为全屏模式  
    getWindow<span class="token punctuation">(</span><span class="token punctuation">)</span>.setFlags<span class="token punctuation">(</span>WindowManager.LayoutParams.FLAG_FULLSCREEN,  
        WindowManager.LayoutParams.FLAG_FULLSCREEN<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    setContentView<span class="token punctuation">(</span>R.layout.main<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    mButton01 <span class="token operator">=</span> <span class="token punctuation">(</span>Button<span class="token punctuation">)</span> findViewById<span class="token punctuation">(</span>R.id.myButton1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    mTextView01 <span class="token operator">=</span> <span class="token punctuation">(</span>TextView<span class="token punctuation">)</span> findViewById<span class="token punctuation">(</span>R.id.myTextView1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    // Return the current requested orientation of the activity  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> -1<span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
      mTextView01.setText<span class="token punctuation">(</span>getResources<span class="token punctuation">(</span><span class="token punctuation">)</span>.getText<span class="token punctuation">(</span>R.string.str_err_1001<span class="token punctuation">))</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    /* 当点击按钮旋转屏幕画面 */  
    mButton01.setOnClickListener<span class="token punctuation">(</span>new Button.OnClickListener<span class="token punctuation">(</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
      // @Override  
      public void onClick<span class="token punctuation">(</span>View arg0<span class="token punctuation">)</span>  
      <span class="token punctuation">{<!-- --></span>  
        /* 方法一：重写getRequestedOrientation */  
  
        /* 若无法取得screenOrientation属性 */  
        <span class="token keyword">if</span> <span class="token punctuation">(</span>getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> -1<span class="token punctuation">)</span>  
        <span class="token punctuation">{<!-- --></span>  
          /* 提示无法进行画面旋转功能，因无法判别Orientation */  
          mTextView01.setText<span class="token punctuation">(</span>getResources<span class="token punctuation">(</span><span class="token punctuation">)</span>.getText<span class="token punctuation">(</span>R.string.str_err_1001<span class="token punctuation">))</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span> <span class="token keyword">else</span>  
        <span class="token punctuation">{<!-- --></span>  
          <span class="token keyword">if</span> <span class="token punctuation">(</span>getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE<span class="token punctuation">)</span>  
          <span class="token punctuation">{<!-- --></span>  
            /* 若当下为横排，则更改为竖排呈现 */  
            setRequestedOrientation<span class="token punctuation">(</span>ActivityInfo.SCREEN_ORIENTATION_PORTRAIT<span class="token punctuation">)</span><span class="token punctuation">;</span>  
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> ActivityInfo.SCREEN_ORIENTATION_PORTRAIT<span class="token punctuation">)</span>  
          <span class="token punctuation">{<!-- --></span>  
            /* 若当下为竖排，则更改为横排呈现 */  
            setRequestedOrientation<span class="token punctuation">(</span>ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE<span class="token punctuation">)</span><span class="token punctuation">;</span>  
          <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span>  
      <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
  
  @Override  
  public void setRequestedOrientation<span class="token punctuation">(</span>int requestedOrientation<span class="token punctuation">)</span>  
  <span class="token punctuation">{<!-- --></span>  
    // TODO Auto-generated method stub  
  
    /* 判断要更改的方向，以Toast提示 */  
    switch <span class="token punctuation">(</span>requestedOrientation<span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
      /* 更改为LANDSCAPE */  
      <span class="token keyword">case</span> <span class="token punctuation">(</span>ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE<span class="token punctuation">)</span>:  
        mMakeTextToast<span class="token punctuation">(</span>getResources<span class="token punctuation">(</span><span class="token punctuation">)</span>.getText<span class="token punctuation">(</span>R.string.str_msg1<span class="token punctuation">)</span>.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>,  
            false<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">break</span><span class="token punctuation">;</span>  
      /* 更改为PORTRAIT */  
      <span class="token keyword">case</span> <span class="token punctuation">(</span>ActivityInfo.SCREEN_ORIENTATION_PORTRAIT<span class="token punctuation">)</span>:  
        mMakeTextToast<span class="token punctuation">(</span>getResources<span class="token punctuation">(</span><span class="token punctuation">)</span>.getText<span class="token punctuation">(</span>R.string.str_msg2<span class="token punctuation">)</span>.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>,  
            false<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">break</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
    super.setRequestedOrientation<span class="token punctuation">(</span>requestedOrientation<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
  
  @Override  
  public int getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token punctuation">{<!-- --></span>  
    // TODO Auto-generated method stub  
  
    /* 此重写getRequestedOrientation方法，可取得当下屏幕的方向 */  
    <span class="token keyword">return</span> super.getRequestedOrientation<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
  
  public void mMakeTextToast<span class="token punctuation">(</span>String str, boolean isLong<span class="token punctuation">)</span>  
  <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isLong <span class="token operator">==</span> true<span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
      Toast.makeText<span class="token punctuation">(</span>EX05_22.this, str, Toast.LENGTH_LONG<span class="token punctuation">)</span>.show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span> <span class="token keyword">else</span>  
    <span class="token punctuation">{<!-- --></span>  
      Toast.makeText<span class="token punctuation">(</span>EX05_22.this, str, Toast.LENGTH_SHORT<span class="token punctuation">)</span>.show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/78c6945188e6684816ad0680d8542e6d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">实验四  用窗函数法设计FIR数字滤波器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/69c1a89ae7f69a6de2c950bc6f579fdb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">copy与deepcopy的区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>