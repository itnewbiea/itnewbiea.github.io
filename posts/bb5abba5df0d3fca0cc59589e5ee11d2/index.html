<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[MATLAB]matlab自定义母线画旋转面 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[MATLAB]matlab自定义母线画旋转面" />
<meta property="og:description" content="一、 问题描述 绘制以z=f(y)为母线绕z或y轴的旋转曲面，要求：
用户自行决定曲面网格的疏密；
用户输入旋转轴；
用图像给生成的曲面贴上纹理,图像预载入或用户输入
二、 求解思路 利用cylinder函数，输入母线和范围，即可使用surf函数画出旋转图
绕y轴时，直接使用原函数,利用linspace函数将区间分割为等间距的点后，带入母线函数中。
绕z轴时，使用原函数的反函数，先将用户输入的字符串解读，定义符号变量，产生符号函数，再利用finverse输出反函数的内含函数，后面的操作如图。
本程序可以解决单调或者半侧单调的函数绕y轴或者绕z轴或者不单调函数绕y轴的情况，对于不单调的函数绕z轴的情况，由于无法求得正确的反函数，在画绕z轴时将失效
此外，本程序在输入时也考虑了用户输入含变量x的情况，对于可以操作的情况，本程序以允以支持，对于无法操作的情况（输入函数的自变量，变量和绕的轴都不相同），本程序将允以拒绝
三、 程序代码 clear; clc; close all qidian=pi/2; zhongdian=2*pi&#43;pi/4; jiange=10; s=input(&#34;输入函数表达式：如(&#39;z=y.^2&#39;)&#34;); [xall,p]=strsplit(s,&#39;=&#39;); x1=cell2mat(xall(1)); x2=cell2mat(xall(2)); pat=[&#39;x&#39;,&#39;y&#39;,&#39;z&#39;]; for i=1:3 k1=contains(x1,pat(i)); if k1==1 judge1=pat(i); end k2=contains(x2,pat(i)); if k2==1 judge2=pat(i); end end qidian=input(&#34;请输入(自变量）起点:&#34;); zhongdian=input(&#34;请输入（自变量）终点:&#34;); jiange=input(&#34;请输入间隔:&#34;); zhou=input(&#34;请输入中心轴（ &#39;y&#39; or &#39;z&#39;)&#34;); tupian=input(&#34;请输入要贴入的图片(&#39;图片名&#39;）&#34;); if ~isequal(judge1,judge2,zhou) f=inline(x2); if ~(judge2==zhou) lin=linspace(qidian,zhongdian,1000); zhongdian=max(f(lin)); qidian=min(f(lin)); syms x tempf(x)=f(x); f=inline(finverse(tempf)); end [X,Y,Z]=fun(f,qidian,zhongdian,jiange,zhou,tupian); else disp(&#39;无法画图&#39;) end function [X,Y,Z]=fun(f,qidian,zhongdian,jiange,zhou,tupian) lin=linspace(qidian,zhongdian,jiange); x=f(lin); if zhou==&#39;z&#39; [X,Y,Z]=cylinder(x); else [X,Z,Y]=cylinder(x); end h=surf(X,Y,Z); axis square [mx,mp]=imread(tupian); set(h,&#39;CData&#39;,flipdim(mx,1),&#39;FaceColor&#39;,&#39;texturemap&#39;,&#39;EdgeColor&#39;,&#39;none&#39;) end 四、 实验结果 五、 实验心得 Matlab本身自带许多功能强大的函数，合理运用这些函数时，将取得事半功倍的效果，然而一旦盲目使用这些函数，将会使得实验走向死胡同或者一些无法解决的结果" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/bb5abba5df0d3fca0cc59589e5ee11d2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-30T18:02:14+08:00" />
<meta property="article:modified_time" content="2022-07-30T18:02:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[MATLAB]matlab自定义母线画旋转面</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="__0"></a>一、 问题描述</h3> 
<p>绘制以z=f(y)为母线绕z或y轴的旋转曲面，要求：<br> 用户自行决定曲面网格的疏密；<br> 用户输入旋转轴；<br> 用图像给生成的曲面贴上纹理,图像预载入或用户输入</p> 
<h3><a id="__7"></a>二、 求解思路</h3> 
<p>利用cylinder函数，输入母线和范围，即可使用surf函数画出旋转图<br> 绕y轴时，直接使用原函数,利用linspace函数将区间分割为等间距的点后，带入母线函数中。<br> 绕z轴时，使用原函数的反函数，先将用户输入的字符串解读，定义符号变量，产生符号函数，再利用finverse输出反函数的内含函数，后面的操作如图。<br> 本程序可以解决单调或者半侧单调的函数绕y轴或者绕z轴或者不单调函数绕y轴的情况，对于不单调的函数绕z轴的情况，由于无法求得正确的反函数，在画绕z轴时将失效<br> 此外，本程序在输入时也考虑了用户输入含变量x的情况，对于可以操作的情况，本程序以允以支持，对于无法操作的情况（输入函数的自变量，变量和绕的轴都不相同），本程序将允以拒绝</p> 
<h3><a id="__15"></a>三、 程序代码</h3> 
<pre><code>clear;
clc;
close all
qidian=pi/2;
zhongdian=2*pi+pi/4;
jiange=10;
s=input("输入函数表达式：如('z=y.^2')");
[xall,p]=strsplit(s,'=');
x1=cell2mat(xall(1));
x2=cell2mat(xall(2));
pat=['x','y','z'];
for i=1:3
    k1=contains(x1,pat(i));
    if k1==1
        judge1=pat(i);
    end
    k2=contains(x2,pat(i));
    if k2==1
        judge2=pat(i);
    end
end    
qidian=input("请输入(自变量）起点:");
zhongdian=input("请输入（自变量）终点:");
jiange=input("请输入间隔:");
zhou=input("请输入中心轴（ 'y' or 'z')");
tupian=input("请输入要贴入的图片('图片名'）");
if ~isequal(judge1,judge2,zhou)
    f=inline(x2);
    if ~(judge2==zhou)
        lin=linspace(qidian,zhongdian,1000);
        zhongdian=max(f(lin));
        qidian=min(f(lin));
        syms x
        tempf(x)=f(x);
        f=inline(finverse(tempf));  
    end
    [X,Y,Z]=fun(f,qidian,zhongdian,jiange,zhou,tupian);
else
    disp('无法画图')
end


function [X,Y,Z]=fun(f,qidian,zhongdian,jiange,zhou,tupian)

lin=linspace(qidian,zhongdian,jiange);
x=f(lin);
if zhou=='z'
  [X,Y,Z]=cylinder(x);
else
   [X,Z,Y]=cylinder(x); 
end

h=surf(X,Y,Z);
axis square
[mx,mp]=imread(tupian);
set(h,'CData',flipdim(mx,1),'FaceColor','texturemap','EdgeColor','none')
end
</code></pre> 
<h3><a id="__77"></a>四、 实验结果</h3> 
<p><img src="https://images2.imgbox.com/41/55/f7mYGYEa_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d7/cf/BG9olVlO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="__84"></a>五、 实验心得</h3> 
<p>Matlab本身自带许多功能强大的函数，合理运用这些函数时，将取得事半功倍的效果，然而一旦盲目使用这些函数，将会使得实验走向死胡同或者一些无法解决的结果</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/60c3530e74adb90138138f8e7b62fb7d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">测试行业干了5年，从只会点点点到了现在的测试开发，总算是证明了自己</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d0ba741d3a776e94508d6d11e02280e9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">三种方法构建Java树形结构</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>