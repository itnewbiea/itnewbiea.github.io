<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>深度学习，识别红绿灯 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="深度学习，识别红绿灯" />
<meta property="og:description" content="#准备工作，导入所需要的库 import cv2 import numpy as np #读取视频 cap = cv2.VideoCapture(r&#34;红绿灯.mp4&#34;) #获取帧率 fps = cap.get(cv2.CAP_PROP_FPS) while cap.isOpened(): ret, frame = cap.read() cv2.namedWindow(&#34;frame&#34;, 0) #0可调大小 cv2.resizeWindow(&#34;frame&#34;, 960, 540) #设置长和宽 gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY) #将视频以灰度图展示 cv2.putText(gray, &#39;fps: &#39; &#43; str(fps), (0, 50), cv2.FONT_HERSHEY_SIMPLEX, 1, (255, 255, 255), 2) # 在展示窗口中显示帧率 # 划定三个感兴趣区域分别为R, Y, G # ROI划定规则:图像矩阵名称[上 : 下, 左 : 右] R = gray[452:454, 594:596] Y = gray[446:448, 630:632] G = gray[444:446, 672:674] # 为划定的感兴趣区域赋予变量 sum_R = np." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/189177ca10e74aee9978937a9cab4dea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-26T11:06:37+08:00" />
<meta property="article:modified_time" content="2022-09-26T11:06:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">深度学习，识别红绿灯</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre>#准备工作，导入所需要的库
import cv2
import numpy as np

#读取视频
cap = cv2.VideoCapture(r"红绿灯.mp4")
#获取帧率
fps = cap.get(cv2.CAP_PROP_FPS)
</pre> 
<pre>while cap.isOpened():
    ret, frame = cap.read()
    cv2.namedWindow("frame", 0)  #0可调大小
    cv2.resizeWindow("frame", 960, 540)  #设置长和宽
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)  #将视频以灰度图展示
    cv2.putText(gray, 'fps: ' + str(fps), (0, 50), cv2.FONT_HERSHEY_SIMPLEX, 1, (255, 255, 255), 2)  # 在展示窗口中显示帧率

# 划定三个感兴趣区域分别为R, Y, G
# ROI划定规则:图像矩阵名称[上 : 下, 左 : 右]
    R = gray[452:454, 594:596]
    Y = gray[446:448, 630:632]
    G = gray[444:446, 672:674]

# 为划定的感兴趣区域赋予变量
    sum_R = np.sum(R)
    sum_Y = np.sum(Y)
    sum_G = np.sum(G)

# 判断模块
    if sum_R &gt; 200:
    #如果R中那四个像素点的灰度值之和大于200，则显示红灯
        cv2.putText(frame, 'Red', (580, 400), 2, 2, (0, 0, 255), 3)
        cv2.putText(frame, 'Red', (1460, 650), 2, 2, (0, 0, 255), 3)
        cv2.putText(frame, 'Red', (1230, 670), 2, 2, (0, 0, 255), 3)
    #putText(选定的视频[或赋予其的变量], "要显示的文字", 字体[0为默认], 字体粗细程度, [颜色 BGR](  ,  ,  ,), 字体大小)
    elif sum_Y &gt; 200:
    # 如果Y中那四个像素点的灰度值之和大于200，则显示黄灯
        cv2.putText(frame, 'Yellow', (550, 410), 2, 2, (0, 255, 255), 3)
        cv2.putText(frame, 'Yellow', (1460, 650), 2, 2, (0, 255, 255), 3)
        cv2.putText(frame, 'Yellow', (1230, 670), 2, 2, (0, 255, 255), 3)
    elif sum_G &gt; 200:
    # 如果G中那四个像素点的灰度值之和大于200，则显示绿灯
        cv2.putText(frame, 'Green', (550, 410), 2, 2, (0, 255, 0), 3)
        cv2.putText(frame, 'Green', (1460, 650), 2, 2, (0, 255, 0), 3)
        cv2.putText(frame, 'Green', (1230, 670), 2, 2, (0, 255, 0), 3)
    else:
    # 如果都小于200，则显示等待
        cv2.putText(frame, '', (550, 410), 2, 2, (255, 255, 255), 3)
        cv2.putText(frame, '', (1460, 650), 2, 2, (255, 255, 255), 3)

    cv2.imshow('frame', frame)  # 显示原视频

   # 按 'm' 退出
    if cv2.waitKey(1) &amp; 0xFF == ord('m'):
        break
cap.release()  # 释放</pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c9/39/5WfOQegF_o.png"></p> 
<p> </p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/52e9190708d1027b0436a6284a683e64/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">u盘格式化后数据能恢复吗?</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/213ca665c3bffe99841b4ce71106619d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">错误解决：failed calling webhook “dec-autonomy.xxx.io“: failed to call webhook：post</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>