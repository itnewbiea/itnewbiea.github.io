<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>cesium 使用entities、primitives添加的模型并且改变模型颜色 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="cesium 使用entities、primitives添加的模型并且改变模型颜色" />
<meta property="og:description" content="entities方式绘制模型：【线条】
var gltf = viewer.entities.add({ guid: crossguid, name: &#39;gltf&#39;, polyline: { width: 1, material: Cesium.Color.WHITE, show: true, positions: Cesium.Cartesian3.fromDegreesArrayHeights(nodePositionArr), distanceDisplayCondition: new Cesium.DistanceDisplayCondition(0, 10000) }, }); primitives方式添加模型：
viewer.scene.primitives.add( Cesium.Model.fromGltf({ id: feature.towerguid, url: &#39;/model/&#39; &#43; _that.fileglb &#43; &#39;/&#39; &#43; feature.modelname &#43; &#39;.glb&#39;, // 本地文件 modelMatrix: towerMt4Tower, scale: 1, // 放大倍数 }), ) 通过鼠标右键点击模型使模型变颜色成选中状态：
// 鼠标右键获取属性 const handler = new Cesium.ScreenSpaceEventHandler(canvas); const canvas = Winviewer.scene.canvas; const ellipsoid = Winviewer.scene.globe.ellipsoid; handler.setInputAction(function (click) { // 禁止浏览器鼠标右键菜单 document." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9c88addc51ae405a4108f74d9874b27e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-24T09:00:36+08:00" />
<meta property="article:modified_time" content="2022-08-24T09:00:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">cesium 使用entities、primitives添加的模型并且改变模型颜色</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>entities方式绘制模型：【线条】</p> 
<pre><code class="language-javascript"> var gltf = viewer.entities.add({
          guid: crossguid,
          name: 'gltf',
          polyline: {
            width: 1,
            material: Cesium.Color.WHITE,
            show: true,
            positions: Cesium.Cartesian3.fromDegreesArrayHeights(nodePositionArr),
            distanceDisplayCondition: new Cesium.DistanceDisplayCondition(0, 10000)
          },
        });</code></pre> 
<p>primitives方式添加模型：</p> 
<pre><code class="language-javascript"> viewer.scene.primitives.add(
          Cesium.Model.fromGltf({
            id: feature.towerguid,
            url: '/model/' + _that.fileglb + '/' + feature.modelname + '.glb', // 本地文件
            modelMatrix: towerMt4Tower,
            scale: 1, // 放大倍数
          }),
        )</code></pre> 
<p>通过鼠标右键点击模型使模型变颜色成选中状态：</p> 
<pre><code class="language-javascript">    // 鼠标右键获取属性
    const handler = new Cesium.ScreenSpaceEventHandler(canvas);
    const canvas = Winviewer.scene.canvas;
    const ellipsoid = Winviewer.scene.globe.ellipsoid;
    handler.setInputAction(function (click) {
      // 禁止浏览器鼠标右键菜单
      document.oncontextmenu = function () {
        return false;
      };
      _that.pickModel = Winviewer.scene.pick(click.position);
      _that.position = Winviewer.scene.pickPosition(click.position);
      const pickModel = _that.pickModel;
      if (pickModel) {
        if (pickModel.id.guid) {
          //entities  添加模型变色
          pickModel.id.polyline.material.color = Cesium.Color.RED;
        } else {
          //primitive  添加模型变色
          pickModel.primitive.color = new Cesium.Color(1.0, 0, 0, 1.0);
        }
      } 
    }, Cesium.ScreenSpaceEventType.RIGHT_CLICK);</code></pre> 
<p>在关闭的事件中记得要删除鼠标点击事件，否则会叠加重复触发</p> 
<pre><code class="language-javascript"> handler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK)//移除鼠标右键事件</code></pre> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4284a76ad8bd3a8043826de2eef8bfdf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何录制微课？教师必看</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d30200be3fab84cace26e7eb5795ded8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">导入根据表头注解自动获取响应数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>