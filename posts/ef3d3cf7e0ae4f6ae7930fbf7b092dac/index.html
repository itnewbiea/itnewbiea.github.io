<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在华为云上部署WordPress I - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在华为云上部署WordPress I" />
<meta property="og:description" content="在华为云上部署WordPress I 修改时间：2021.03.17 13:28
使用环境：华为云ECS 1vCPUs|1GB|40G|1Mbps|CentOS 8.0 64bit with ARM
设置安全组规则 设置入方向，协议HTTP(80)，80端口，源地址0.0.0.0/0
部署LNMP 使用一键安装包，执行wget http://soft.vpser.net/lnmp/lnmp1.7.tar.gz -cO lnmp1.7.tar.gz &amp;&amp; tar zxf lnmp1.7.tar.gz &amp;&amp; cd lnmp1.7 &amp;&amp; ./install.sh lnmp开始自动安装，大约需要15分钟
安装过程中选择MySQL5.5，开启MySQL InnoDB，选择PHP7.3，不安装内存优化
配置MySQL 执行sudo mysql -u root -p，直接回车进入，第一次无需输入密码
执行如下命令，注意每条命令后的分号
输入CREATE DATABASE wordpress;创建名为wordpress的数据库
输入GRANT ALL ON wordpress.* TO wordpressuser@localhost IDENTIFIED BY &#39;BLOck@123&#39;;为数据库创建用户并为用户分配数据库的完全访问权限，其中wordpressuser为用户名，BLOck@123为密码
输入exit;退出MySQL
配置PHP 执行如下命令启动PHP服务并设置开机自启动
systemctl start php-fpm systemctl enable php-fpm 配置Nginx 执行vim /usr/local/nginx/conf/nginx.conf编辑Nginx配置文件，按i进入编辑模式
在server下添加下列代码
location / { root /usr/local/nginx/html; index index.php index.html index." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ef3d3cf7e0ae4f6ae7930fbf7b092dac/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-29T11:03:42+08:00" />
<meta property="article:modified_time" content="2021-06-29T11:03:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在华为云上部署WordPress I</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="WordPress_I_0"></a>在华为云上部署WordPress I</h2> 
<p>修改时间：2021.03.17 13:28</p> 
<p>使用环境：华为云ECS 1vCPUs|1GB|40G|1Mbps|CentOS 8.0 64bit with ARM</p> 
<h3><a id="_6"></a>设置安全组规则</h3> 
<p>设置入方向，协议HTTP(80)，80端口，源地址0.0.0.0/0</p> 
<h3><a id="LNMP_10"></a>部署LNMP</h3> 
<p>使用一键安装包，执行<code>wget http://soft.vpser.net/lnmp/lnmp1.7.tar.gz -cO lnmp1.7.tar.gz &amp;&amp; tar zxf lnmp1.7.tar.gz &amp;&amp; cd lnmp1.7 &amp;&amp; ./install.sh lnmp</code>开始自动安装，大约需要15分钟</p> 
<p>安装过程中选择MySQL5.5，开启MySQL InnoDB，选择PHP7.3，不安装内存优化</p> 
<h4><a id="MySQL_16"></a>配置MySQL</h4> 
<p>执行<code>sudo mysql -u root -p</code>，直接回车进入，第一次无需输入密码</p> 
<p>执行如下命令，注意每条命令后的分号</p> 
<p>输入<code>CREATE DATABASE wordpress;</code>创建名为wordpress的数据库</p> 
<p>输入<code>GRANT ALL ON wordpress.* TO wordpressuser@localhost IDENTIFIED BY 'BLOck@123';</code>为数据库创建用户并为用户分配数据库的完全访问权限，其中wordpressuser为用户名，BLOck@123为密码</p> 
<p>输入<code>exit;</code>退出MySQL</p> 
<h4><a id="PHP_28"></a>配置PHP</h4> 
<p>执行如下命令启动PHP服务并设置开机自启动</p> 
<pre><code>systemctl start php-fpm

systemctl enable php-fpm
</code></pre> 
<h4><a id="Nginx_38"></a>配置Nginx</h4> 
<p>执行<code>vim /usr/local/nginx/conf/nginx.conf</code>编辑Nginx配置文件，按i进入编辑模式</p> 
<p>在server下添加下列代码</p> 
<pre><code>location / {
        root   /usr/local/nginx/html;
        index index.php index.html index.htm;
    }
</code></pre> 
<pre><code>    location ~ \.php$ {
        root           /usr/local/nginx/html;
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME /usr/local/nginx/html$fastcgi_script_name;
        include        fastcgi_params;
    }
</code></pre> 
<p>并将server下方的root改为<code>/usr/local/nginx/html</code>，确保所有root一致</p> 
<p>执行<code>service nginx reload</code>加载配置</p> 
<h3><a id="WordPress_65"></a>安装WordPress</h3> 
<p>执行<code>wget https://cn.wordpress.org/latest-zh_CN.tar.gz</code>下载最新版WordPress</p> 
<p>执行<code>tar -zxvf latest-zh_CN.tar.gz</code>解压文件，当前目录下生成wordpress文件夹</p> 
<p>执行<code>rm -rf /usr/local/nginx/html</code>删除html文件夹</p> 
<p>执行<code>mv wordpress /usr/local/nginx/html</code>将wordpress文件夹复制为html文件夹</p> 
<p>执行<code>chmod -R 777 /usr/local/nginx/html</code>将文件夹提权</p> 
<p>浏览器输入<code>http://华为云公网IP</code>即可进入WordPress配置页面，点击现在就开始</p> 
<p>数据库名为wordpress，用户名与密码在上一步设置过，其余默认，点击提交</p> 
<p>输入站点标题，用户名与电子邮箱，记录下密码，点击安装WordPress</p> 
<p>安装完成后浏览器输入<code>http://华为云公网IP</code>即可进入博客</p> 
<h3><a id="FTP_85"></a>解决FTP问题</h3> 
<p>执行<code>nano /usr/local/nginx/html/wp-config.php</code></p> 
<p>在以下内容：</p> 
<pre><code>if ( !defined('ABSPATH') )

define('ABSPATH', dirname(__FILE__) . '/');
</code></pre> 
<p>后添加：</p> 
<pre><code>define('WP_TEMP_DIR', ABSPATH.'wp-content/tmp');

define("FS_METHOD", "direct");

define("FS_CHMOD_DIR", 0777);

define("FS_CHMOD_FILE", 0777);
</code></pre> 
<p>执行<code>mkdir /usr/local/nginx/html/wp-content/tmp</code></p> 
<p>执行<code>chmod -R 777 /usr/local/nginx/html/wp-content/tmp</code></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2f96f3feb713e8a4a7d5de0bd539554f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何启用计算机端口,Win7系统下开启计算机端口的方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/208093acbf4869e2c81ea25c093bcc9c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue 字符串换行</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>