<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>连续变量离散化类别变量 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="连续变量离散化类别变量" />
<meta property="og:description" content="R内置函数实现数组变量转为因子变量有：cut、split、quantile、bincode，本文主要介绍ggplot提供的几个分组函数。
*cut_interval()*按照相同范围分为n组；, cut_number() 按照相同数量(近似)观测值分为n组； cut_width() 按照参数 width指定的宽度进行分组。
语法如下：
# cut_interval(x, n = NULL, length = NULL, ...) # # cut_number(x, n = NULL, ...) # # cut_width( # x, # width, # center = NULL, # boundary = NULL, # closed = c(&#34;right&#34;, &#34;left&#34;), # ... # ) cut_interval举例 按照相同范围分为6组，使用table进行统计分组数据进行验证：
table(cut_interval(1:10, 6)) # [1,2.5] (2.5,4] (4,5.5] (5.5,7] (7,8.5] (8.5,10] # 2 2 1 2 1 2 table(cut_interval(1:10, 5)) # [1,2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4b84268b1595aebd9a41c8a41d9f812d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-01T11:00:57+08:00" />
<meta property="article:modified_time" content="2022-02-01T11:00:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">连续变量离散化类别变量</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>R内置函数实现数组变量转为因子变量有：cut、split、quantile、bincode，本文主要介绍ggplot提供的几个分组函数。</p> 
</blockquote> 
<p>*cut_interval()*按照相同范围分为n组；, <em>cut_number()</em> 按照相同数量(近似)观测值分为n组； <em>cut_width()</em> 按照参数 width指定的宽度进行分组。</p> 
<p>语法如下：</p> 
<pre><code class="prism language-{r}"># cut_interval(x, n = NULL, length = NULL, ...)
# 
# cut_number(x, n = NULL, ...)
# 
# cut_width(
#   x,
#   width,
#   center = NULL,
#   boundary = NULL,
#   closed = c("right", "left"),
#   ...
# )
</code></pre> 
<h3><a id="cut_interval_24"></a>cut_interval举例</h3> 
<p>按照相同范围分为6组，使用table进行统计分组数据进行验证：</p> 
<pre><code class="prism language-{r}">table(cut_interval(1:10, 6))

 # [1,2.5]  (2.5,4]  (4,5.5]  (5.5,7]  (7,8.5] (8.5,10] 
 #       2        2        1        2        1        2 

table(cut_interval(1:10, 5))
  # [1,2.8] (2.8,4.6] (4.6,6.4] (6.4,8.2]  (8.2,10] 
  #       2         2         2         2         2 
</code></pre> 
<h3><a id="cut_number_39"></a>cut_number举例</h3> 
<p>每组包括相同数量元素进行分组：</p> 
<pre><code class="prism language-{r}">table(cut_number(runif(100), 10))
# [0.00693,0.17]   (0.17,0.305]   (0.305,0.38]   (0.38,0.477]   (0.477,0.58]   (0.58,0.688]  (0.688,0.771] 
#             10             10             10             10             10             10             10 
#   (0.771,0.83]   (0.83,0.922]  (0.922,0.993] 
#             10             10             10 

</code></pre> 
<h3><a id="cut_width__51"></a>cut_width 举例</h3> 
<p>每组距离是0.1，对100个均匀分布数据分组：</p> 
<pre><code class="prism language-{r}">table(cut_width(runif(100), 0.1))

# [-0.05,0.05]  (0.05,0.15]  (0.15,0.25]  (0.25,0.35]  (0.35,0.45]  (0.45,0.55]  (0.55,0.65]  (0.65,0.75] 
#            3           14           10            6           11           11           13            8 
#  (0.75,0.85]  (0.85,0.95]  (0.95,1.05] 
#            9            7            8 
table(cut_width(runif(100), 0.1, boundary = 0))
  # [0,0.1] (0.1,0.2] (0.2,0.3] (0.3,0.4] (0.4,0.5] (0.5,0.6] (0.6,0.7] (0.7,0.8] (0.8,0.9]   (0.9,1] 
  #      10         6        13        11         8        11         9        11        11        10 

table(cut_width(runif(100), 0.1, center = 0))
# [-0.05,0.05]  (0.05,0.15]  (0.15,0.25]  (0.25,0.35]  (0.35,0.45]  (0.45,0.55]  (0.55,0.65]  (0.65,0.75] 
#            5           16           12           11            8           11            7            8 
#  (0.75,0.85]  (0.85,0.95]  (0.95,1.05] 
#           13            5            4 

table(cut_width(runif(100), 0.1, labels = FALSE))
# 1  2  3  4  5  6  7  8  9 10 11 
# 9  8 13 12  7 10  9 11  8  9  4 
</code></pre> 
<p><em>boundary</em> 设置分组初始边界，如果不指定则为width的一半。<em>center</em> 指定分组中心，<em>center=0</em>让中心为整数。</p> 
<p><em>labels</em><br> labels 指定分组结果的级别. 默认使用 “(a,b]” 作为分组标识. 如果设置 <em>labels = FALSE</em>, 简单使用整数代码代替因子变量.</p> 
<h3><a id="_82"></a>应用举例</h3> 
<p>统计diamonds数据中钻石重量的分布情况：</p> 
<pre><code class="prism language-{r}">library("dplyr")
diamonds %&gt;% count(cut_width(carat, 0.5)) 

# A tibble: 11 x 2
#    `cut_width(carat, 0.5)`     n
#    &lt;fct&gt;                   &lt;int&gt;
#  1 [-0.25,0.25]              785
#  2 (0.25,0.75]             29498
#  3 (0.75,1.25]             15977
#  4 (1.25,1.75]              5313
#  5 (1.75,2.25]              2002
#  6 (2.25,2.75]               322
#  7 (2.75,3.25]                32
#  8 (3.25,3.75]                 5
#  9 (3.75,4.25]                 4
# 10 (4.25,4.75]                 1
# 11 (4.75,5.25]                 1

ggplot(data = diamonds, mapping = aes(x = carat)) +
geom_histogram(binwidth = 0.5)
</code></pre> 
<p><img src="https://images2.imgbox.com/ea/d9/9vqDqKYf_o.png" alt="在这里插入图片描述"><br> geom_histogram也可以指定分组宽度。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e5acdede9f0b8853357b772c5d2ddf75/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Excel如何批量删除空格</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/02fc465d1a80f4854aa82b85f8beef6e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2021年终总结——工作第四年</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>