<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【超级全面】jenkins通过SSH凭证方式拉取Gitee代码（含错误解决方法） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【超级全面】jenkins通过SSH凭证方式拉取Gitee代码（含错误解决方法）" />
<meta property="og:description" content="【超级全面】jenkins通过SSH凭证方式拉取Gitee代码（含错误解决方法） jenkins通过SSH凭证方式拉取Gitee代码一、生成密钥1、生成密钥之前检查一下是否已经生成密钥，存在密钥则进行删除：2、在/root/.ssh目录下使用命令`ssh-keygen -t rsa`生成公钥和私钥，输入命令后一直按回车即可3、生成的公钥和私钥文件如下： 二、添加公钥到你的Gitee帐户1、查看生成的公钥2、登录 Gitee，通过点击头像中的设置选项，进入后台，配置刚才生成的公钥文件里面的内容。 三、添加私钥到Jenkins的SSH凭证中并创建项目使用SSH凭证1、查看生成的私钥2、在 Jenkins 中新建 SSH 凭证，我们刚才使用 root 用户来生成密钥，所以用户名填 root，ID可以不填保存后会自动生成，私钥填我们生成的私钥文件中的内容。3、这样我们就可以在 Jenkins 中的项目配置 SSH 凭证了，注意这时需要使用项目的 SSH 地址了，如下所示：①创建项目②配置git信息，然后点击下方的应用/保存③可能会报如下错误，报错了也点击下方的应用/保存 三、解决错误并在本地git仓库中创建一个与远程git仓库的关联①进入git仓库目录②使用`git remote -v` 查看你当前的remote url③使用` git remote set-url `来修改你的remote url，不用https协议，改用git 协议④再次使用`git remote -v `查看remote url⑤再运行命令`/usr/bin/git ls-remote -h git地址`⑥成功解决，在项目中点击配置查看，会发现刚才的错误解决了 四、构建项目①我们构建项目时，可以在控制台输出中看到下载的git源代码的位置和使用了刚才配置的 SSH 凭证。②最后在Linux中，进入下载的git源代码的位置，查看文件是否拉取成功！ jenkins通过SSH凭证方式拉取Gitee代码 使用 SSH 密钥方式拉取 Gitee 上的代码，我们只需要在服务器上使用 root 用户生成公钥和私钥，将公钥配置到 Gitee 中，再将私钥配置到 Jenkins 中。这样 Jenkins 就可以免密从 Gitee 上拉取代码了。
一、生成密钥 1、生成密钥之前检查一下是否已经生成密钥，存在密钥则进行删除： 删除存在的密钥是防止跟着此流程走出一些未知的错
root@bpvank-virtual-machine:~# cd /root/.ssh root@bpvank-virtual-machine:~/.ssh# ls id_rsa id_rsa.pub root@bpvank-virtual-machine:~/.ssh# rm id_rsa root@bpvank-virtual-machine:~/." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/3e921fd79763ff34bde45aa9ef2624e7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-24T15:38:14+08:00" />
<meta property="article:modified_time" content="2023-05-24T15:38:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【超级全面】jenkins通过SSH凭证方式拉取Gitee代码（含错误解决方法）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>【超级全面】jenkins通过SSH凭证方式拉取Gitee代码（含错误解决方法）</h4> 
 <ul><li><a href="#jenkinsSSHGitee_1" rel="nofollow">jenkins通过SSH凭证方式拉取Gitee代码</a></li><li><ul><li><a href="#_5" rel="nofollow">一、生成密钥</a></li><li><ul><li><a href="#1_7" rel="nofollow">1、生成密钥之前检查一下是否已经生成密钥，存在密钥则进行删除：</a></li><li><a href="#2rootsshsshkeygen_t_rsa_20" rel="nofollow">2、在/root/.ssh目录下使用命令`ssh-keygen -t rsa`生成公钥和私钥，输入命令后一直按回车即可</a></li><li><a href="#3_46" rel="nofollow">3、生成的公钥和私钥文件如下：</a></li></ul> 
   </li><li><a href="#Gitee_53" rel="nofollow">二、添加公钥到你的Gitee帐户</a></li><li><ul><li><a href="#1_55" rel="nofollow">1、查看生成的公钥</a></li><li><a href="#2_Gitee_61" rel="nofollow">2、登录 Gitee，通过点击头像中的设置选项，进入后台，配置刚才生成的公钥文件里面的内容。</a></li></ul> 
   </li><li><a href="#JenkinsSSHSSH_63" rel="nofollow">三、添加私钥到Jenkins的SSH凭证中并创建项目使用SSH凭证</a></li><li><ul><li><a href="#1_64" rel="nofollow">1、查看生成的私钥</a></li><li><a href="#2_Jenkins__SSH__root__rootID_78" rel="nofollow">2、在 Jenkins 中新建 SSH 凭证，我们刚才使用 root 用户来生成密钥，所以用户名填 root，ID可以不填保存后会自动生成，私钥填我们生成的私钥文件中的内容。</a></li><li><a href="#3_Jenkins__SSH__SSH__87" rel="nofollow">3、这样我们就可以在 Jenkins 中的项目配置 SSH 凭证了，注意这时需要使用项目的 SSH 地址了，如下所示：</a></li><li><ul><li><a href="#_88" rel="nofollow">①创建项目</a></li><li><a href="#git_91" rel="nofollow">②配置git信息，然后点击下方的应用/保存</a></li><li><a href="#_93" rel="nofollow">③可能会报如下错误，报错了也点击下方的应用/保存</a></li></ul> 
   </li></ul> 
   </li><li><a href="#gitgit_96" rel="nofollow">三、解决错误并在本地git仓库中创建一个与远程git仓库的关联</a></li><li><ul><li><a href="#git_98" rel="nofollow">①进入git仓库目录</a></li><li><a href="#git_remote_v_remote_url_112" rel="nofollow">②使用`git remote -v` 查看你当前的remote url</a></li><li><a href="#_git_remote_seturl_remote__urlhttpsgit__118" rel="nofollow">③使用` git remote set-url `来修改你的remote url，不用https协议，改用git 协议</a></li><li><a href="#git_remote_v_remote_url_123" rel="nofollow">④再次使用`git remote -v `查看remote url</a></li><li><a href="#usrbingit_lsremote_h_git_129" rel="nofollow">⑤再运行命令`/usr/bin/git ls-remote -h git地址`</a></li><li><a href="#_139" rel="nofollow">⑥成功解决，在项目中点击配置查看，会发现刚才的错误解决了</a></li></ul> 
   </li><li><a href="#_143" rel="nofollow">四、构建项目</a></li><li><ul><li><a href="#git_SSH__145" rel="nofollow">①我们构建项目时，可以在控制台输出中看到下载的git源代码的位置和使用了刚才配置的 SSH 凭证。</a></li><li><a href="#Linuxgit_147" rel="nofollow">②最后在Linux中，进入下载的git源代码的位置，查看文件是否拉取成功！</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="jenkinsSSHGitee_1"></a>jenkins通过SSH凭证方式拉取Gitee代码</h2> 
<p>使用 SSH 密钥方式拉取 Gitee 上的代码，我们只需要在服务器上使用 root 用户生成公钥和私钥，将公钥配置到 Gitee 中，再将私钥配置到 Jenkins 中。这样 Jenkins 就可以免密从 Gitee 上拉取代码了。</p> 
<h3><a id="_5"></a>一、生成密钥</h3> 
<h4><a id="1_7"></a>1、生成密钥之前检查一下是否已经生成密钥，存在密钥则进行删除：</h4> 
<blockquote> 
 <p>删除存在的密钥是防止跟着此流程走出一些未知的错</p> 
</blockquote> 
<pre><code class="prism language-bash">root@bpvank-virtual-machine:~<span class="token comment"># cd /root/.ssh  </span>
root@bpvank-virtual-machine:~/.ssh<span class="token comment"># ls  </span>
id_rsa   id_rsa.pub  
root@bpvank-virtual-machine:~/.ssh<span class="token comment"># rm id_rsa  </span>
root@bpvank-virtual-machine:~/.ssh<span class="token comment"># rm id_rsa.pub   </span>
root@bpvank-virtual-machine:~/.ssh<span class="token comment"># ls  </span>
</code></pre> 
<h4><a id="2rootsshsshkeygen_t_rsa_20"></a>2、在/root/.ssh目录下使用命令<code>ssh-keygen -t rsa</code>生成公钥和私钥，输入命令后一直按回车即可</h4> 
<pre><code class="prism language-bash">root@bpvank-virtual-machine:~/.ssh<span class="token comment"># ssh-keygen -t rsa</span>
Generating public/private rsa key pair.
Enter <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>/root/.ssh/id_rsa<span class="token punctuation">)</span>: 
Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>: 
Enter same passphrase again: 
Your identification has been saved <span class="token keyword">in</span> /root/.ssh/id_rsa.
Your public key has been saved <span class="token keyword">in</span> /root/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:DrGdLSo+dVV9Q0doMHWw6FINU9rdH3psE0iol6FqVvw root@bpvank-virtual-machine
The key's randomart image is:
+---<span class="token punctuation">[</span>RSA <span class="token number">2048</span><span class="token punctuation">]</span>----+
<span class="token operator">|</span>            **<span class="token operator">==</span>+<span class="token operator">|</span>
<span class="token operator">|</span>           <span class="token assign-left variable">ooO</span><span class="token operator">==</span>+<span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> o.*o+++<span class="token operator">|</span>
<span class="token operator">|</span>       + B.<span class="token operator">=</span>  o +<span class="token operator">|</span>
<span class="token operator">|</span>      o S.<span class="token operator">=</span> <span class="token punctuation">..</span> <span class="token operator">=</span>.<span class="token operator">|</span>
<span class="token operator">|</span>      .B<span class="token punctuation">..</span> E  o <span class="token builtin class-name">.</span><span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token punctuation">..</span>+<span class="token punctuation">..</span>        <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token punctuation">..</span>.           <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token punctuation">..</span>           <span class="token operator">|</span>
+----<span class="token punctuation">[</span>SHA256<span class="token punctuation">]</span>-----+

</code></pre> 
<h4><a id="3_46"></a>3、生成的公钥和私钥文件如下：</h4> 
<pre><code class="prism language-bash">root@bpvank-virtual-machine:~/.ssh<span class="token comment"># ls</span>
id_rsa  id_rsa.pub
</code></pre> 
<h3><a id="Gitee_53"></a>二、添加公钥到你的Gitee帐户</h3> 
<h4><a id="1_55"></a>1、查看生成的公钥</h4> 
<pre><code class="prism language-bash">root@bpvank-virtual-machine:~/.ssh<span class="token comment"># cat id_rsa.pub </span>
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDbXXDH792Z1Z382EQingiZWHjXWuds++v16HIT1uzA7dmpR41dGgmg9trGlJ/sbk8DPU83aAZZSy5kp9TaLUnFfxGOQU3NNMe78kRt2eOTaAnzoqhA8ZwyuXIgQVu7234N5HyLhmv0umzH/N+2Sdg0H9orBm+55BcrVzbsKSzPatZrGRlgNyOc2O/CLak0nn4/ivAglBgZJeODwEaTQAEOcdfdQpTvsJO+EdjOlRcfWWa4ylQl3zRBzSLklzfONo4y4AnCvDNuCTLzbSWnnG9Ti0v0b0aYwvqliFqGp67/EpQyjKfctoPgkGXMm5rfbhgo9Nmhi0++6Wi2kzLGu4Fh root@bpvank-virtual-machine
</code></pre> 
<h4><a id="2_Gitee_61"></a>2、登录 Gitee，通过点击头像中的设置选项，进入后台，配置刚才生成的公钥文件里面的内容。</h4> 
<p><img src="https://images2.imgbox.com/36/32/fDYanSwp_o.png" alt="配置公钥"></p> 
<h3><a id="JenkinsSSHSSH_63"></a>三、添加私钥到Jenkins的SSH凭证中并创建项目使用SSH凭证</h3> 
<h4><a id="1_64"></a>1、查看生成的私钥</h4> 
<pre><code class="prism language-bash">root@bpvank-virtual-machine:~/.ssh<span class="token comment"># cat id_rsa</span>
-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEA211wx+/dmdWd/NhEIp4ImVh411rnbPvr9ehyE9bswO3ZqUeN
XRoJoPbaxpSf7G5PAz1PN2gGWUsuZKfU2i1JxX8RjkFNzTTHu/JEbdnjk2gJ86Ko
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
LyKnjUsIBjC4uk98sJ29KwKBgDR8bjDXBwo3BusyZnWBGr33iZ0AC8GBMF1gV0ce
E8zAcEmOapDMQ12ap65b3lg4Rxj8gxKo8W4KBrbRwFaQ1iukNx4qg/m5MDd4IwnQ
0J2wXpZyN+at4ez5QJFn6a2JiKIVHmnNNuMFiB82jkrvi84B7HsH
-----END RSA PRIVATE KEY-----
</code></pre> 
<h4><a id="2_Jenkins__SSH__root__rootID_78"></a>2、在 Jenkins 中新建 SSH 凭证，我们刚才使用 root 用户来生成密钥，所以用户名填 root，ID可以不填保存后会自动生成，私钥填我们生成的私钥文件中的内容。</h4> 
<blockquote> 
 <p>注意：复制私钥时头尾也需要复制添加进去！！！</p> 
 <p>-----BEGIN RSA PRIVATE KEY-----</p> 
 <p>-----END RSA PRIVATE KEY-----</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/90/3b/SYdFUxcg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_Jenkins__SSH__SSH__87"></a>3、这样我们就可以在 Jenkins 中的项目配置 SSH 凭证了，注意这时需要使用项目的 SSH 地址了，如下所示：</h4> 
<h5><a id="_88"></a>①创建项目</h5> 
<p><img src="https://images2.imgbox.com/78/9b/VKOMRNdh_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="git_91"></a>②配置git信息，然后点击下方的应用/保存</h5> 
<p><img src="https://images2.imgbox.com/7f/c5/OBUDXtKX_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_93"></a>③可能会报如下错误，报错了也点击下方的应用/保存</h5> 
<p><img src="https://images2.imgbox.com/d8/90/ZecAzXyv_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="gitgit_96"></a>三、解决错误并在本地git仓库中创建一个与远程git仓库的关联</h3> 
<h4><a id="git_98"></a>①进入git仓库目录</h4> 
<pre><code class="prism language-bash"><span class="token comment"># 1、查看git仓库目录</span>
root@bpvank-virtual-machine:~/.ssh<span class="token comment"># find ~ -name ".git" -type d</span>
/root/.jenkins/workspace/java-project-01/.git
/root/.jenkins/workspace/java-project-02/.git
<span class="token comment"># 2、进入刚刚创建项目的git仓库目录</span>
root@bpvank-virtual-machine:~/.ssh<span class="token comment"># cd /root/.jenkins/workspace/java-project-02/.git</span>
<span class="token comment"># 3、ls查看</span>
root@bpvank-virtual-machine:~/.jenkins/workspace/java-project-02/.git<span class="token comment"># ls</span>
branches  config  description  FETCH_HEAD  HEAD  hooks  info  objects  refs
</code></pre> 
<h4><a id="git_remote_v_remote_url_112"></a>②使用<code>git remote -v</code> 查看你当前的remote url</h4> 
<pre><code class="prism language-bash">root@bpvank-virtual-machine:~/.jenkins/workspace/java-project-02/.git<span class="token comment"># git remote -v</span>
origin https://github.com/test1/test1.git <span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>
origin https://github.com/test1/test1.git <span class="token punctuation">(</span>push<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_git_remote_seturl_remote__urlhttpsgit__118"></a>③使用<code>git remote set-url</code>来修改你的remote url，不用https协议，改用git 协议</h4> 
<pre><code class="prism language-bash"><span class="token function">git</span> remote set-url origin git@gitee.com:bpvank/jenkins-testing.git
</code></pre> 
<h4><a id="git_remote_v_remote_url_123"></a>④再次使用<code>git remote -v </code>查看remote url</h4> 
<pre><code class="prism language-bash">root@bpvank-virtual-machine:~/.jenkins/workspace/java-project-02/.git<span class="token comment"># git remote -v</span>
origin	git@gitee.com:bpvank/jenkins-testing.git <span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>
origin	git@gitee.com:bpvank/jenkins-testing.git <span class="token punctuation">(</span>push<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="usrbingit_lsremote_h_git_129"></a>⑤再运行命令<code>/usr/bin/git ls-remote -h git地址</code></h4> 
<pre><code class="prism language-bash">root@bpvank-virtual-machine:~/.jenkins/workspace/java-project-02/.git<span class="token comment"># /usr/bin/git ls-remote -h git@gitee.com:bpvank/jenkins-testing.git</span>
The authenticity of <span class="token function">host</span> <span class="token string">'gitee.com (212.64.63.215)'</span> can<span class="token string">'t be established.
ECDSA key fingerprint is SHA256:FQGC9Kn/eye1W8icdBgrQp+KkGYoFgbVr17bmjey0Wc.
Are you sure you want to continue connecting (yes/no)?  yes
Warning: Permanently added '</span>gitee.com,212.64.63.215' <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span> to the list of known hosts.
3b671ae7df7898d9ad4315bd1354a5f00ab8c158	refs/heads/master
</code></pre> 
<blockquote> 
 <p>解释：这个命令通常用于在本地git仓库中创建一个与远程git仓库的关联，或者更新本地git仓库中远程引用的最新状态信息。</p> 
</blockquote> 
<h4><a id="_139"></a>⑥成功解决，在项目中点击配置查看，会发现刚才的错误解决了</h4> 
<p><img src="https://images2.imgbox.com/36/5c/QHwrRe1Z_o.png" alt="查看配置"><br> <img src="https://images2.imgbox.com/1f/89/dfnG1iuH_o.png" alt="错误解决"></p> 
<h3><a id="_143"></a>四、构建项目</h3> 
<h4><a id="git_SSH__145"></a>①我们构建项目时，可以在控制台输出中看到下载的git源代码的位置和使用了刚才配置的 SSH 凭证。</h4> 
<p><img src="https://images2.imgbox.com/38/a5/2ULSgC02_o.png" alt="成功"></p> 
<h4><a id="Linuxgit_147"></a>②最后在Linux中，进入下载的git源代码的位置，查看文件是否拉取成功！</h4> 
<pre><code class="prism language-bash">root@bpvank-virtual-machine:~<span class="token comment"># cd /root/.jenkins/workspace/java-project-02</span>
root@bpvank-virtual-machine:~/.jenkins/workspace/java-project-02<span class="token comment"># ls</span>
pom.xml  README.md  springmvctest.iml  src
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7dffbc87b74fa2e134f81c262f879c5d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">matlab Histogram函数显示统计数值</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f88ad5839a50c7b238fb3f940a9d3037/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">不需要策略模式也能避免满屏if/else</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>