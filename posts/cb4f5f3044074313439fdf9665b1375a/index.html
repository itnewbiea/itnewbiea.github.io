<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java对日期Date类进行加减运算一二三 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java对日期Date类进行加减运算一二三" />
<meta property="og:description" content="废话不多 ，代码说话： 一、充分利用SimpleDateFormat
import java.text.SimpleDateFormat; import java.util.Calendar; import java.util.Date; public class DateTestUtil { public static void main(String[] args) throws Exception { SimpleDateFormat sdf=new SimpleDateFormat(&#34;yyyyMMdd&#34;); String str=&#34;20110823&#34;; Date dt=sdf.parse(str); Calendar rightNow = Calendar.getInstance(); rightNow.setTime(dt); rightNow.add(Calendar.YEAR,-1);//日期减1年 rightNow.add(Calendar.MONTH,3);//日期加3个月 rightNow.add(Calendar.DAY_OF_YEAR,10);//日期加10天 Date dt1=rightNow.getTime(); String reStr = sdf.format(dt1); System.out.println(reStr); } } 注：在Calendar对象的add方法中，第二个参数为正数表示“加”，负数表示“减”。
二、java date 日期加减天数
import java.text.SimpleDateFormat; import java.util.Date; public class DateTest { public static void main(String[] arg){ Date now = new Date(); addAndSubtractDaysByGetTime(now,-5); addAndSubtractDaysByGetTime(now,5); addAndSubtractDaysByCalendar(now,-5); addAndSubtractDaysByCalendar(now,5); } public static Date addAndSubtractDaysByGetTime(Date dateTime/*待处理的日期*/,int n/*加减天数*/){ //日期格式 SimpleDateFormat df=new SimpleDateFormat(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/cb4f5f3044074313439fdf9665b1375a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-07-04T18:33:39+08:00" />
<meta property="article:modified_time" content="2017-07-04T18:33:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java对日期Date类进行加减运算一二三</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <pre><code>废话不多 ，代码说话：
</code></pre> 
<p>一、充分利用SimpleDateFormat</p> 
<pre class="prettyprint"><code class=" hljs avrasm">import java<span class="hljs-preprocessor">.text</span><span class="hljs-preprocessor">.SimpleDateFormat</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Calendar</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Date</span><span class="hljs-comment">;</span>

public class DateTestUtil {


    public static void main(String[] args) throws Exception {

        SimpleDateFormat sdf=new SimpleDateFormat(<span class="hljs-string">"yyyyMMdd"</span>)<span class="hljs-comment">;</span>
        String str=<span class="hljs-string">"20110823"</span><span class="hljs-comment">;</span>
        Date dt=sdf<span class="hljs-preprocessor">.parse</span>(str)<span class="hljs-comment">;</span>
        Calendar rightNow = Calendar<span class="hljs-preprocessor">.getInstance</span>()<span class="hljs-comment">;</span>
        rightNow<span class="hljs-preprocessor">.setTime</span>(dt)<span class="hljs-comment">;</span>
        rightNow<span class="hljs-preprocessor">.add</span>(Calendar<span class="hljs-preprocessor">.YEAR</span>,-<span class="hljs-number">1</span>)<span class="hljs-comment">;//日期减1年</span>
        rightNow<span class="hljs-preprocessor">.add</span>(Calendar<span class="hljs-preprocessor">.MONTH</span>,<span class="hljs-number">3</span>)<span class="hljs-comment">;//日期加3个月</span>
        rightNow<span class="hljs-preprocessor">.add</span>(Calendar<span class="hljs-preprocessor">.DAY</span>_OF_YEAR,<span class="hljs-number">10</span>)<span class="hljs-comment">;//日期加10天</span>
        Date dt1=rightNow<span class="hljs-preprocessor">.getTime</span>()<span class="hljs-comment">;</span>
        String reStr = sdf<span class="hljs-preprocessor">.format</span>(dt1)<span class="hljs-comment">;</span>
        System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(reStr)<span class="hljs-comment">;</span>

    }

}</code></pre> 
<p>注：在Calendar对象的add方法中，第二个参数为正数表示“加”，负数表示“减”。</p> 
<p>二、java date 日期加减天数</p> 
<pre class="prettyprint"><code class=" hljs cs">import java.text.SimpleDateFormat; 
import java.util.Date; 

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> DateTest { 

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(String[] arg){ 
    Date now = <span class="hljs-keyword">new</span> Date();    

    addAndSubtractDaysByGetTime(now,-<span class="hljs-number">5</span>); 
    addAndSubtractDaysByGetTime(now,<span class="hljs-number">5</span>); 
    addAndSubtractDaysByCalendar(now,-<span class="hljs-number">5</span>); 
    addAndSubtractDaysByCalendar(now,<span class="hljs-number">5</span>); 
  } 

   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Date <span class="hljs-title">addAndSubtractDaysByGetTime</span>(Date dateTime/*待处理的日期*/,<span class="hljs-keyword">int</span> n/*加减天数*/){ 

     <span class="hljs-comment">//日期格式 </span>
     SimpleDateFormat df=<span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd"</span>);  
     SimpleDateFormat dd=<span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>);     

     System.<span class="hljs-keyword">out</span>.println(df.format(<span class="hljs-keyword">new</span> Date(dateTime.getTime() + n * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>L))); 
     <span class="hljs-comment">//System.out.println(dd.format(new Date(dateTime.getTime() + n * 24 * 60 * 60 * 1000L))); </span>
     <span class="hljs-comment">//注意这里一定要转换成Long类型，要不n超过25时会出现范围溢出，从而得不到想要的日期值 </span>
     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Date(dateTime.getTime() + n * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>L); 
   } 

   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Date <span class="hljs-title">addAndSubtractDaysByCalendar</span>(Date dateTime/*待处理的日期*/,<span class="hljs-keyword">int</span> n/*加减天数*/){ 

     <span class="hljs-comment">//日期格式 </span>
     SimpleDateFormat df=<span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd"</span>);  
     SimpleDateFormat dd=<span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>);  

     java.util.Calendar calstart = java.util.Calendar.getInstance(); 
       calstart.setTime(dateTime); 

     calstart.add(java.util.Calendar.DAY_OF_WEEK, n);  

     System.<span class="hljs-keyword">out</span>.println(df.format(calstart.getTime())); 
     <span class="hljs-comment">//System.out.println(dd.format(calstart.getTime())); </span>
     <span class="hljs-keyword">return</span> calstart.getTime(); 
   } 

}</code></pre> 
<p>不推荐这个，代码不够简洁，看着不爽。</p> 
<p>三、网上找的别人的，太长，没看，粘过来先</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.data.utils;

<span class="hljs-keyword">import</span> java.text.SimpleDateFormat;
<span class="hljs-keyword">import</span> java.util.Calendar;
<span class="hljs-keyword">import</span> java.util.Date;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DateFormat</span> {<!-- --></span>

 <span class="hljs-javadoc">/**
  * 日期减几年
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">dateMinusYear</span>(String str) <span class="hljs-keyword">throws</span> Exception {

  SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyyMM"</span>);
  Date dt = sdf.parse(str);
  Calendar rightNow = Calendar.getInstance();
  rightNow.setTime(dt);
  rightNow.add(Calendar.YEAR, -<span class="hljs-number">1</span>);<span class="hljs-comment">// 日期减1年</span>
  Date dt1 = rightNow.getTime();
  String reStr = sdf.format(dt1);
  <span class="hljs-keyword">return</span> reStr;
 }

 <span class="hljs-javadoc">/**
  * 日期加几年
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">dateAddYear</span>(String str) <span class="hljs-keyword">throws</span> Exception {

  SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyyMM"</span>);
  Date dt = sdf.parse(str);
  Calendar rightNow = Calendar.getInstance();
  rightNow.setTime(dt);
  rightNow.add(Calendar.YEAR, <span class="hljs-number">1</span>);<span class="hljs-comment">// 日期加1年</span>
  Date dt1 = rightNow.getTime();
  String reStr = sdf.format(dt1);
  <span class="hljs-keyword">return</span> reStr;
 }

 <span class="hljs-javadoc">/**
  * 日期减几月
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">dateMinusMonth</span>(String str) <span class="hljs-keyword">throws</span> Exception {

  SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyyMM"</span>);
  Date dt = sdf.parse(str);<span class="hljs-comment">//将字符串生成Date</span>
  Calendar rightNow = Calendar.getInstance();
  rightNow.setTime(dt);<span class="hljs-comment">//使用给定的 Date 设置此 Calendar 的时间。 </span>
  rightNow.add(Calendar.MONTH, -<span class="hljs-number">1</span>);<span class="hljs-comment">// 日期减1个月</span>
  Date dt1 = rightNow.getTime();<span class="hljs-comment">//返回一个表示此 Calendar 时间值的 Date 对象。</span>
  String reStr = sdf.format(dt1);<span class="hljs-comment">//将给定的 Date 格式化为日期/时间字符串，并将结果添加到给定的 StringBuffer。</span>
  <span class="hljs-keyword">return</span> reStr;
 }

 <span class="hljs-javadoc">/**
  * 日期加几月
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">dateAddMonth</span>(String str) <span class="hljs-keyword">throws</span> Exception {

  SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyyMM"</span>);
  Date dt = sdf.parse(str);
  Calendar rightNow = Calendar.getInstance();
  rightNow.setTime(dt);
  rightNow.add(Calendar.MONTH, <span class="hljs-number">1</span>);<span class="hljs-comment">// 日期加3个月</span>
  <span class="hljs-comment">// rightNow.add(Calendar.DAY_OF_YEAR,10);//日期加10天</span>
  Date dt1 = rightNow.getTime();
  String reStr = sdf.format(dt1);
  <span class="hljs-keyword">return</span> reStr;
 }

 <span class="hljs-javadoc">/**
  * 获取当前年月的第一个月的str
  *<span class="hljs-javadoctag"> @param</span> str
  *   201505
  *<span class="hljs-javadoctag"> @return</span> 201501
  *<span class="hljs-javadoctag"> @throws</span> Exception
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">dateOneMonth</span>(String str) {

  str = str.substring(<span class="hljs-number">0</span>, str.length() - <span class="hljs-number">2</span>);
  str = str + <span class="hljs-string">"01"</span>;
  <span class="hljs-keyword">return</span> str;
 }

 <span class="hljs-javadoc">/**
  * 算出所选月份距离一月份有几个月。
  *<span class="hljs-javadoctag"> @param</span> str 201509
  *<span class="hljs-javadoctag"> @return</span> 9
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">dateDistanceMonth</span>(String str) {

  <span class="hljs-keyword">int</span> i = Integer.parseInt(str);
  <span class="hljs-keyword">int</span> j = Integer.parseInt(DateFormat.dateOneMonth(str));
  System.out.println(i - j);
  <span class="hljs-keyword">return</span> i - j + <span class="hljs-number">1</span>;
 }

 <span class="hljs-javadoc">/**
  * 获取两个时间的时间差，精确到毫秒
  *<span class="hljs-javadoctag"> @param</span> str
  *<span class="hljs-javadoctag"> @return</span>
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">TimeDifference</span>(<span class="hljs-keyword">long</span> start, <span class="hljs-keyword">long</span> end) {

  <span class="hljs-keyword">long</span> between = end - start;
  <span class="hljs-keyword">long</span> day = between / (<span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
  <span class="hljs-keyword">long</span> hour = (between / (<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) - day * <span class="hljs-number">24</span>);
  <span class="hljs-keyword">long</span> min = ((between / (<span class="hljs-number">60</span> * <span class="hljs-number">1000</span>)) - day * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> - hour * <span class="hljs-number">60</span>);
  <span class="hljs-keyword">long</span> s = (between / <span class="hljs-number">1000</span> - day * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> - hour * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> - min * <span class="hljs-number">60</span>);
  <span class="hljs-keyword">long</span> ms = (between - day * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> - hour * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>
    - min * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> - s * <span class="hljs-number">1000</span>);
  String timeDifference = day + <span class="hljs-string">"天"</span> + hour + <span class="hljs-string">"小时"</span> + min + <span class="hljs-string">"分"</span> + s + <span class="hljs-string">"秒"</span> + ms
    + <span class="hljs-string">"毫秒"</span>;
  <span class="hljs-keyword">return</span> timeDifference;
 }
}

 <span class="hljs-javadoc">/**
  * 获取24小时、一周、一个月的起始时间
  * 
  *<span class="hljs-javadoctag"> @param</span> timeInterval
  *   : DAY_TIME_INTERVAL WEEK_TIME_INTERVAL MONTH_TIME_INTERVAL
  *<span class="hljs-javadoctag"> @return</span> "yyyy-mm-dd hh:mm:ss"
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getStartTime</span>(<span class="hljs-keyword">int</span> timeInterval) {
  Calendar cal = Calendar.getInstance();
  SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>);
  <span class="hljs-keyword">if</span> (DAY_TIME_INTERVAL == timeInterval) {<!-- --><span class="hljs-comment">// 获取24小时的起始时间</span>
   cal.set(Calendar.HOUR_OF_DAY, <span class="hljs-number">0</span>);
   cal.set(Calendar.MINUTE, <span class="hljs-number">0</span>);
   cal.set(Calendar.SECOND, <span class="hljs-number">0</span>);
   String startTime = sdf.format(cal.getTime());
   <span class="hljs-keyword">return</span> startTime;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (WEEK_TIME_INTERVAL == timeInterval) {
   <span class="hljs-keyword">int</span> weekday = cal.get(Calendar.DAY_OF_WEEK) - <span class="hljs-number">1</span>;
   cal.add(Calendar.DATE, -weekday);
   cal.set(Calendar.HOUR_OF_DAY, <span class="hljs-number">0</span>);
   cal.set(Calendar.MINUTE, <span class="hljs-number">0</span>);
   cal.set(Calendar.SECOND, <span class="hljs-number">0</span>);
   String startTime = sdf.format(cal.getTime());
   <span class="hljs-keyword">return</span> startTime;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (MONTH_TIME_INTERVAL == timeInterval) {
   <span class="hljs-keyword">int</span> dayofmonthMin = cal.getActualMinimum(Calendar.DAY_OF_MONTH);
   <span class="hljs-comment">// c.add(Calendar.DATE, -dayofmonth);</span>
   cal.set(Calendar.DATE, dayofmonthMin);
   cal.set(Calendar.HOUR_OF_DAY, <span class="hljs-number">0</span>);
   cal.set(Calendar.MINUTE, <span class="hljs-number">0</span>);
   cal.set(Calendar.SECOND, <span class="hljs-number">0</span>);
   String startTime = sdf.format(cal.getTime());
   <span class="hljs-keyword">return</span> startTime;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
 }

 <span class="hljs-javadoc">/**
  * 获取24小时、一周、一个月的结束时间
  * 
  *<span class="hljs-javadoctag"> @param</span> timeInterval
  *   : DAY_TIME_INTERVAL WEEK_TIME_INTERVAL MONTH_TIME_INTERVAL
  *<span class="hljs-javadoctag"> @return</span> "yyyy-mm-dd hh:mm:ss"
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getEndTime</span>(<span class="hljs-keyword">int</span> timeInterval) {
  Calendar cal = Calendar.getInstance();
  cal.setTimeZone(TimeZone.getTimeZone(<span class="hljs-string">"GMT+8"</span>));
  SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>);
  <span class="hljs-keyword">if</span> (DAY_TIME_INTERVAL == timeInterval) {
   cal.set(Calendar.HOUR_OF_DAY, <span class="hljs-number">23</span>);
   cal.set(<span class="hljs-number">12</span>, <span class="hljs-number">59</span>);
   cal.set(<span class="hljs-number">13</span>, <span class="hljs-number">59</span>);
   <span class="hljs-keyword">long</span> date = cal.getTimeInMillis();
   String endTime = sdf.format(<span class="hljs-keyword">new</span> Date(date));
   <span class="hljs-keyword">return</span> endTime;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (WEEK_TIME_INTERVAL == timeInterval) {
   <span class="hljs-keyword">int</span> weekday = cal.get(Calendar.DAY_OF_WEEK) - <span class="hljs-number">1</span>;
   cal.add(Calendar.DATE, -weekday);
   cal.add(Calendar.DATE, <span class="hljs-number">6</span>);
   cal.set(Calendar.HOUR_OF_DAY, <span class="hljs-number">23</span>);
   cal.set(<span class="hljs-number">12</span>, <span class="hljs-number">59</span>);
   cal.set(<span class="hljs-number">13</span>, <span class="hljs-number">59</span>);
   <span class="hljs-keyword">long</span> date = cal.getTimeInMillis();
   String endTime = sdf.format(<span class="hljs-keyword">new</span> Date(date));
   <span class="hljs-keyword">return</span> endTime;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (MONTH_TIME_INTERVAL == timeInterval) {
   <span class="hljs-keyword">int</span> dayOfMonthMax = cal.getActualMaximum(Calendar.DAY_OF_MONTH);
   cal.set(Calendar.DATE, dayOfMonthMax);
   cal.set(Calendar.HOUR_OF_DAY, <span class="hljs-number">23</span>);
   cal.set(Calendar.MINUTE, <span class="hljs-number">59</span>);
   cal.set(Calendar.SECOND, <span class="hljs-number">59</span>);
   String endTime = sdf.format(cal.getTime());
   <span class="hljs-keyword">return</span> endTime;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
 }
 <span class="hljs-javadoc">/**
  * 判断dateStr是否在start和end中间，start和end都可以为null yyyyMMddHHmmss或者yyyyMMdd格式
  * 
  *<span class="hljs-javadoctag"> @author</span> you.xu
  *<span class="hljs-javadoctag"> @date</span> 2015年8月19日下午3:11:46
  *<span class="hljs-javadoctag"> @param</span> dateStr
  *<span class="hljs-javadoctag"> @param</span> start
  *<span class="hljs-javadoctag"> @param</span> end
  *<span class="hljs-javadoctag"> @return</span>
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">checkDateVal</span>(String dateStr, String start, String end) {
  <span class="hljs-keyword">boolean</span> isDateRight = <span class="hljs-keyword">false</span>;
  Date date = <span class="hljs-keyword">null</span>;
  Date startDate = <span class="hljs-keyword">null</span>;
  Date endDate = <span class="hljs-keyword">null</span>;
  SimpleDateFormat sdf = <span class="hljs-keyword">null</span>;
  <span class="hljs-comment">// 判断日期格式</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-number">14</span> == dateStr.length()) {
   sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyyMMddHHmmss"</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">8</span> == dateStr.length()) {
   sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"yyyyMMdd"</span>);
  } <span class="hljs-keyword">else</span>
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;

  <span class="hljs-keyword">try</span> {
   <span class="hljs-comment">// 更改判断日期格式</span>
   date = sdf.parse(dateStr);
  } <span class="hljs-keyword">catch</span> (ParseException e) {
   log.error(e, e);
  }

  <span class="hljs-keyword">if</span> ((start == <span class="hljs-keyword">null</span>) &amp;&amp; (end != <span class="hljs-keyword">null</span>)) {
   <span class="hljs-keyword">try</span> {
    endDate = sdf.parse(end);
   } <span class="hljs-keyword">catch</span> (ParseException ex1) {
    log.error(ex1, ex1);
   }
   <span class="hljs-keyword">if</span> ((date != <span class="hljs-keyword">null</span>) &amp;&amp; (endDate != <span class="hljs-keyword">null</span>))<span class="hljs-comment">// Check parameters for</span>
   {
    <span class="hljs-keyword">if</span> (date.compareTo(endDate) &lt;= <span class="hljs-number">0</span>)
     isDateRight = <span class="hljs-keyword">true</span>;
   }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((start != <span class="hljs-keyword">null</span>) &amp;&amp; (end == <span class="hljs-keyword">null</span>)) {
   <span class="hljs-keyword">try</span> {
    startDate = sdf.parse(start);
   } <span class="hljs-keyword">catch</span> (ParseException ex1) {
    log.error(ex1, ex1);
   }
   <span class="hljs-keyword">if</span> ((date != <span class="hljs-keyword">null</span>) &amp;&amp; (startDate != <span class="hljs-keyword">null</span>)) {
    <span class="hljs-keyword">if</span> (date.compareTo(startDate) &gt;= <span class="hljs-number">0</span>)
     isDateRight = <span class="hljs-keyword">true</span>;
   }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((start != <span class="hljs-keyword">null</span>) &amp;&amp; (end != <span class="hljs-keyword">null</span>)) {
   <span class="hljs-keyword">try</span> {
    startDate = sdf.parse(start);
    endDate = sdf.parse(end);
   } <span class="hljs-keyword">catch</span> (ParseException ex2) {
    System.out.println(ex2.toString());
   }
   <span class="hljs-keyword">if</span> ((startDate != <span class="hljs-keyword">null</span>) &amp;&amp; (date != <span class="hljs-keyword">null</span>) &amp;&amp; (endDate != <span class="hljs-keyword">null</span>)) {
    <span class="hljs-keyword">if</span> ((date.compareTo(startDate) &gt;= <span class="hljs-number">0</span>)
      &amp;&amp; (date.compareTo(endDate) &lt;= <span class="hljs-number">0</span>))
     isDateRight = <span class="hljs-keyword">true</span>;
   }
  }
  <span class="hljs-keyword">return</span> isDateRight;
 }

 <span class="hljs-javadoc">/**
  * 判断dateStr是否在start和end中间，start和end都可以为null long形格式
  * 
  *<span class="hljs-javadoctag"> @author</span> you.xu
  *<span class="hljs-javadoctag"> @date</span> 2015年8月19日下午3:12:35
  *<span class="hljs-javadoctag"> @param</span> dateStr
  *<span class="hljs-javadoctag"> @param</span> start
  *<span class="hljs-javadoctag"> @param</span> end
  *<span class="hljs-javadoctag"> @return</span>
  */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">checkDateV</span>(String dateStr, String start, String end) {
  <span class="hljs-keyword">boolean</span> isDateRight = <span class="hljs-keyword">false</span>;
  <span class="hljs-keyword">long</span> date = -<span class="hljs-number">1</span>;
  <span class="hljs-keyword">long</span> fromDate = -<span class="hljs-number">1</span>;
  <span class="hljs-keyword">long</span> toDate = -<span class="hljs-number">1</span>;

  date = java.lang.Long.parseLong(dateStr);

  <span class="hljs-keyword">if</span> ((start == <span class="hljs-keyword">null</span>) &amp;&amp; (end == <span class="hljs-keyword">null</span>)) {
   isDateRight = <span class="hljs-keyword">true</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((start == <span class="hljs-keyword">null</span>) &amp;&amp; (end != <span class="hljs-keyword">null</span>)) {
   <span class="hljs-keyword">try</span> {
    toDate = java.lang.Long.parseLong(end);
   } <span class="hljs-keyword">catch</span> (NumberFormatException nfe) {
    log.error(nfe, nfe);
   }
   <span class="hljs-keyword">if</span> (date &lt;= toDate) {
    isDateRight = <span class="hljs-keyword">true</span>;
   }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((start != <span class="hljs-keyword">null</span>) &amp;&amp; (end == <span class="hljs-keyword">null</span>)) {
   <span class="hljs-keyword">try</span> {
    fromDate = java.lang.Long.parseLong(start);
   } <span class="hljs-keyword">catch</span> (NumberFormatException nfe) {
    log.error(nfe, nfe);
   }

   <span class="hljs-keyword">if</span> (date &gt;= fromDate) {
    isDateRight = <span class="hljs-keyword">true</span>;
   }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((start != <span class="hljs-keyword">null</span>) &amp;&amp; (end != <span class="hljs-keyword">null</span>)) {
   <span class="hljs-keyword">try</span> {
    toDate = java.lang.Long.parseLong(end);
    fromDate = java.lang.Long.parseLong(start);
   } <span class="hljs-keyword">catch</span> (NumberFormatException nfe) {
    log.error(nfe, nfe);
   }

   <span class="hljs-keyword">if</span> ((date &lt;= toDate) &amp;&amp; (date &gt;= fromDate)) {
    isDateRight = <span class="hljs-keyword">true</span>;
   }
  }
  <span class="hljs-keyword">return</span> isDateRight;
 }</code></pre> 
<p>四、自己的方法的，简单说下需求，由于数据库里的存储类型是 “2017-07-04 12：00：00”，要按当前时间向前检索传进来的天数（noTradeDays），利用java.util的GregorianCalendar，结合SimpleDateFormat，完成当前时间逆推的需求</p> 
<pre class="prettyprint"><code class=" hljs avrasm">        <span class="hljs-comment">/**
         * add by lee 2017/7/4 
         * 连续n天无交易
         */</span>
        if (!StringUtils<span class="hljs-preprocessor">.isEmpty</span>(noTradeDays)) {
            **SimpleDateFormat sdf=new SimpleDateFormat(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)<span class="hljs-comment">;</span>
            GregorianCalendar gc=new GregorianCalendar()<span class="hljs-comment">; </span>
            gc<span class="hljs-preprocessor">.setTime</span>(new Date())<span class="hljs-comment">;</span>
            gc<span class="hljs-preprocessor">.add</span>(<span class="hljs-number">5</span>, -Integer<span class="hljs-preprocessor">.parseInt</span>(noTradeDays))<span class="hljs-comment">;**</span>
            String cardSql=<span class="hljs-string">"select posid from card where usetime between "</span>+<span class="hljs-string">"'"</span>+sdf<span class="hljs-preprocessor">.format</span>(gc<span class="hljs-preprocessor">.getTime</span>())+<span class="hljs-string">"'"</span>+<span class="hljs-string">" and "</span>+<span class="hljs-string">"'"</span>+sdf<span class="hljs-preprocessor">.format</span>(new Date())+<span class="hljs-string">"'"</span>+<span class="hljs-string">" group by posid"</span><span class="hljs-comment">;</span>
            List&lt;Card&gt; cards = CardService<span class="hljs-preprocessor">.cardDAO</span><span class="hljs-preprocessor">.executeQuery</span>(new Query(cardSql))<span class="hljs-comment">;</span>
            if (cards<span class="hljs-preprocessor">.size</span>()&gt;<span class="hljs-number">0</span>) {
                StringBuffer sb=new StringBuffer()<span class="hljs-comment">;</span>
                for (Card posId : cards) {
                    if (!StringUtils<span class="hljs-preprocessor">.isEmpty</span>(posId<span class="hljs-preprocessor">.getPosid</span>())) {
                        sb<span class="hljs-preprocessor">.append</span>(<span class="hljs-string">"'"</span>)<span class="hljs-preprocessor">.append</span>(posId<span class="hljs-preprocessor">.getPosid</span>())<span class="hljs-preprocessor">.append</span>(<span class="hljs-string">"'"</span>)<span class="hljs-preprocessor">.append</span>(<span class="hljs-string">","</span>)<span class="hljs-comment">;</span>
                    }
                }
                if (sb<span class="hljs-preprocessor">.length</span>()&gt;<span class="hljs-number">0</span>) {
                    sql_add +=<span class="hljs-string">" and posid not in ("</span>+sb<span class="hljs-preprocessor">.substring</span>(<span class="hljs-number">0</span>, sb<span class="hljs-preprocessor">.length</span>()-<span class="hljs-number">1</span>)<span class="hljs-preprocessor">.toString</span>()+<span class="hljs-string">")"</span><span class="hljs-comment">;</span>
                }
            }
        }</code></pre> 
<p>恩，就是这样子了，总之就是灵活运用java.util里关于日期的相关类。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e4e541286e23550c044566e5be22239f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微软分段推出电子墨水白板应用程序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8aed6778119b1391feb2d9b84a317610/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android6.0&#43;解决getColor()方法过时</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>