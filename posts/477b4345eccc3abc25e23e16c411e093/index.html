<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨56 - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨56" />
<meta property="og:description" content="ç›®å½•
6. é“¾æ¥åˆ°é¡µé¢new_topic
topics.html
19.1.2 æ·»åŠ æ–°æ¡ç›®
1. ç”¨äºæ·»åŠ æ–°æ¡ç›®çš„è¡¨å•
forms.py
2. URLæ¨¡å¼new_entry
urls.py
3. è§†å›¾å‡½æ•°new_entry()
views.py
4. æ¨¡æ¿new_entry
new_entry.html
5. é“¾æ¥åˆ°é¡µé¢new_entry
topic.html
19.1.3 ç¼–è¾‘æ¡ç›®
1. URLæ¨¡å¼edit_entry
urls.py
2. è§†å›¾å‡½æ•°edit_entry()
views.py
å¾€æœŸå¿«é€Ÿä¼ é€é—¨ğŸ‘†ï¼ˆåœ¨æ–‡ç« æœ€åï¼‰ï¼š
æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼æ¬¢è¿è®¢é˜…æ”¶è—ï¼ä¸“æ å°†æŒç»­æ›´æ–°ï¼
{% extends &#34;learning_logs/base.html&#34; %} {% block content %} &lt;p&gt;Add a new topic:&lt;/p&gt; 1 &lt;form action=&#34;{% url &#39;learning_logs:new_topic&#39; %}&#34; method=&#39;post&#39;&gt; 2 {% csrf_token %} 3 {{ form.as_p }} 4 &lt;button name=&#34;submit&#34;&gt;add topic&lt;/button&gt; &lt;/form&gt; {% endblock content %} è¿™ä¸ªæ¨¡æ¿ç»§æ‰¿äº†base.htmlï¼Œå› æ­¤å…¶åŸºæœ¬ç»“æ„ä¸é¡¹ç›®â€œå­¦ä¹ ç¬”è®°â€çš„å…¶ä»–é¡µé¢ç›¸åŒã€‚åœ¨1å¤„ï¼Œ æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªHTMLè¡¨å•ã€‚å®å‚actionå‘Šè¯‰æœåŠ¡å™¨å°†æäº¤çš„è¡¨å•æ•°æ®å‘é€åˆ°å“ªé‡Œï¼Œè¿™é‡Œæˆ‘ä»¬å°† å®ƒå‘å›ç»™è§†å›¾å‡½æ•°new_topic()ã€‚å®å‚methodè®©æµè§ˆå™¨ä»¥POSTè¯·æ±‚çš„æ–¹å¼æäº¤æ•°æ®ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/477b4345eccc3abc25e23e16c411e093/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-02T11:00:00+08:00" />
<meta property="article:modified_time" content="2024-01-02T11:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨56</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;">Â <img alt="" src="https://images2.imgbox.com/f9/28/bEAtXSPH_o.gif"></p> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="6.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E9%A1%B5%E9%9D%A2new_topic-toc" style="margin-left:40px;"><a href="#6.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E9%A1%B5%E9%9D%A2new_topic" rel="nofollow">6. é“¾æ¥åˆ°é¡µé¢new_topic</a></p> 
<p id="topics.html-toc" style="margin-left:80px;"><a href="#topics.html" rel="nofollow">topics.html</a></p> 
<p id="19.1.2%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E6%9D%A1%E7%9B%AE-toc" style="margin-left:80px;"><a href="#19.1.2%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E6%9D%A1%E7%9B%AE" rel="nofollow">19.1.2 æ·»åŠ æ–°æ¡ç›®</a></p> 
<p id="1.%20%E7%94%A8%E4%BA%8E%E6%B7%BB%E5%8A%A0%E6%96%B0%E6%9D%A1%E7%9B%AE%E7%9A%84%E8%A1%A8%E5%8D%95-toc" style="margin-left:120px;"><a href="#1.%20%E7%94%A8%E4%BA%8E%E6%B7%BB%E5%8A%A0%E6%96%B0%E6%9D%A1%E7%9B%AE%E7%9A%84%E8%A1%A8%E5%8D%95" rel="nofollow">1. ç”¨äºæ·»åŠ æ–°æ¡ç›®çš„è¡¨å•</a></p> 
<p id="forms.py-toc" style="margin-left:160px;"><a href="#forms.py" rel="nofollow">forms.py</a></p> 
<p id="2.%20URL%E6%A8%A1%E5%BC%8Fnew_entry-toc" style="margin-left:120px;"><a href="#2.%20URL%E6%A8%A1%E5%BC%8Fnew_entry" rel="nofollow">2. URLæ¨¡å¼new_entry</a></p> 
<p id="urls.py-toc" style="margin-left:160px;"><a href="#urls.py" rel="nofollow">urls.py</a></p> 
<p id="3.%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0new_entry()-toc" style="margin-left:120px;"><a href="#3.%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0new_entry%28%29" rel="nofollow">3. è§†å›¾å‡½æ•°new_entry()</a></p> 
<p id="views.py-toc" style="margin-left:160px;"><a href="#views.py" rel="nofollow">views.py</a></p> 
<p id="4.%20%E6%A8%A1%E6%9D%BFnew_entry-toc" style="margin-left:120px;"><a href="#4.%20%E6%A8%A1%E6%9D%BFnew_entry" rel="nofollow">4. æ¨¡æ¿new_entry</a></p> 
<p id="new_entry.html-toc" style="margin-left:160px;"><a href="#new_entry.html" rel="nofollow">new_entry.html</a></p> 
<p id="5.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E9%A1%B5%E9%9D%A2new_entry-toc" style="margin-left:120px;"><a href="#5.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E9%A1%B5%E9%9D%A2new_entry" rel="nofollow">5. é“¾æ¥åˆ°é¡µé¢new_entry</a></p> 
<p id="topic.html-toc" style="margin-left:160px;"><a href="#topic.html" rel="nofollow">topic.html</a></p> 
<p id="19.1.3%20%E7%BC%96%E8%BE%91%E6%9D%A1%E7%9B%AE-toc" style="margin-left:80px;"><a href="#19.1.3%20%E7%BC%96%E8%BE%91%E6%9D%A1%E7%9B%AE" rel="nofollow">19.1.3 ç¼–è¾‘æ¡ç›®</a></p> 
<p id="1.%20URL%E6%A8%A1%E5%BC%8Fedit_entry-toc" style="margin-left:120px;"><a href="#1.%20URL%E6%A8%A1%E5%BC%8Fedit_entry" rel="nofollow">1. URLæ¨¡å¼edit_entry</a></p> 
<p id="urls.py-toc" style="margin-left:160px;"><a href="#urls.py" rel="nofollow">urls.py</a></p> 
<p id="2.%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0edit_entry()-toc" style="margin-left:120px;"><a href="#2.%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0edit_entry%28%29" rel="nofollow">2. è§†å›¾å‡½æ•°edit_entry()</a></p> 
<p id="views.py-toc" style="margin-left:160px;"><a href="#views.py" rel="nofollow">views.py</a></p> 
<p id="%E5%BE%80%E6%9C%9F%E5%BF%AB%E9%80%9F%E4%BC%A0%E9%80%81%E9%97%A8%F0%9F%91%86%EF%BC%88%E5%9C%A8%E6%96%87%E7%AB%A0%E6%9C%80%E5%90%8E%EF%BC%89%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E5%BE%80%E6%9C%9F%E5%BF%AB%E9%80%9F%E4%BC%A0%E9%80%81%E9%97%A8%F0%9F%91%86%EF%BC%88%E5%9C%A8%E6%96%87%E7%AB%A0%E6%9C%80%E5%90%8E%EF%BC%89%EF%BC%9A" rel="nofollow">å¾€æœŸå¿«é€Ÿä¼ é€é—¨ğŸ‘†ï¼ˆåœ¨æ–‡ç« æœ€åï¼‰ï¼š</a></p> 
<p id="%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%E6%AC%A2%E8%BF%8E%E8%AE%A2%E9%98%85%E6%94%B6%E8%97%8F%EF%BC%81%E4%B8%93%E6%A0%8F%E5%B0%86%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%81-toc" style="margin-left:0px;"><a href="#%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%E6%AC%A2%E8%BF%8E%E8%AE%A2%E9%98%85%E6%94%B6%E8%97%8F%EF%BC%81%E4%B8%93%E6%A0%8F%E5%B0%86%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%81" rel="nofollow">æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼æ¬¢è¿è®¢é˜…æ”¶è—ï¼ä¸“æ å°†æŒç»­æ›´æ–°ï¼</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p class="img-center"><img alt="" height="234" src="https://images2.imgbox.com/6c/41/XhlDkt8O_o.png" width="364"></p> 
<pre><code class="language-python">{% extends "learning_logs/base.html" %}
{% block content %}
 &lt;p&gt;Add a new topic:&lt;/p&gt;
1 &lt;form action="{% url 'learning_logs:new_topic' %}" method='post'&gt;
2 {% csrf_token %}
3 {<!-- -->{ form.as_p }}
4 &lt;button name="submit"&gt;add topic&lt;/button&gt;
 &lt;/form&gt;
{% endblock content %}</code></pre> 
<blockquote> 
 <p style="text-align:center;">è¿™ä¸ªæ¨¡æ¿ç»§æ‰¿äº†base.htmlï¼Œå› æ­¤å…¶åŸºæœ¬ç»“æ„ä¸é¡¹ç›®â€œå­¦ä¹ ç¬”è®°â€çš„å…¶ä»–é¡µé¢ç›¸åŒã€‚åœ¨1å¤„ï¼Œ æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªHTMLè¡¨å•ã€‚å®å‚actionå‘Šè¯‰æœåŠ¡å™¨å°†æäº¤çš„è¡¨å•æ•°æ®å‘é€åˆ°å“ªé‡Œï¼Œè¿™é‡Œæˆ‘ä»¬å°† å®ƒå‘å›ç»™è§†å›¾å‡½æ•°new_topic()ã€‚å®å‚methodè®©æµè§ˆå™¨ä»¥POSTè¯·æ±‚çš„æ–¹å¼æäº¤æ•°æ®ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">Djangoä½¿ç”¨æ¨¡æ¿æ ‡ç­¾{% csrf_token %}ï¼ˆè§2ï¼‰æ¥é˜²æ­¢æ”»å‡»è€…åˆ©ç”¨è¡¨å•æ¥è·å¾—å¯¹æœåŠ¡å™¨æœªç» æˆæƒçš„è®¿é—®ï¼ˆè¿™ç§æ”»å‡»è¢«ç§°ä¸ºè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰ã€‚åœ¨3å¤„ï¼Œæˆ‘ä»¬æ˜¾ç¤ºè¡¨å•ï¼Œä»ä¸­å¯çŸ¥Djangoä½¿å¾—å®Œ æˆæ˜¾ç¤ºè¡¨å•ç­‰ä»»åŠ¡æœ‰å¤šç®€å•ï¼šæˆ‘ä»¬åªéœ€åŒ…å«æ¨¡æ¿å˜é‡{<!-- -->{ form.as_p }}ï¼Œå°±å¯è®©Djangoè‡ªåŠ¨åˆ›å»ºæ˜¾ ç¤ºè¡¨å•æ‰€éœ€çš„å…¨éƒ¨å­—æ®µã€‚ä¿®é¥°ç¬¦as_pè®©Djangoä»¥æ®µè½æ ¼å¼æ¸²æŸ“æ‰€æœ‰è¡¨å•å…ƒç´ ï¼Œè¿™æ˜¯ä¸€ç§æ•´æ´åœ°æ˜¾ ç¤ºè¡¨å•çš„ç®€å•æ–¹å¼ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">Djangoä¸ä¼šä¸ºè¡¨å•åˆ›å»ºæäº¤æŒ‰é’®ï¼Œå› æ­¤æˆ‘ä»¬åœ¨4å¤„å®šä¹‰äº†ä¸€ä¸ªè¿™æ ·çš„æŒ‰é’®ã€‚</p> 
 <p style="text-align:center;"></p> 
 <h3 id="6.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E9%A1%B5%E9%9D%A2new_topic" style="text-align:center;">6. é“¾æ¥åˆ°é¡µé¢new_topic</h3> 
 <p style="text-align:center;">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨é¡µé¢topicsä¸­æ·»åŠ ä¸€ä¸ªåˆ°é¡µé¢new_topicçš„é“¾æ¥ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h4 id="topics.html" style="text-align:center;">topics.html</h4> 
</blockquote> 
<pre><code class="language-python">{% extends "learning_logs/base.html" %}
{% block content %}
 &lt;p&gt;Topics&lt;/p&gt;
 &lt;ul&gt;
 --snip--
 &lt;/ul&gt;
 &lt;a href="{% url 'learning_logs:new_topic' %}"&gt;Add a new topic:&lt;/a&gt;
{% endblock content %} </code></pre> 
<blockquote> 
 <p style="text-align:center;">è¿™ä¸ªé“¾æ¥æ”¾åœ¨äº†æ—¢æœ‰ä¸»é¢˜åˆ—è¡¨çš„åé¢ã€‚å›¾19-1æ˜¾ç¤ºäº†ç”Ÿæˆçš„è¡¨å•ã€‚è¯·ä½¿ç”¨è¿™ä¸ªè¡¨å•æ¥æ·»åŠ å‡  ä¸ªæ–°ä¸»é¢˜ã€‚</p> 
</blockquote> 
<p style="text-align:center;"><img alt="" height="561" src="https://images2.imgbox.com/d1/eb/PTd3Qx5Y_o.png" width="841"></p> 
<h4 id="19.1.2%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E6%9D%A1%E7%9B%AE" style="text-align:center;">19.1.2 æ·»åŠ æ–°æ¡ç›®</h4> 
<blockquote> 
 <p style="text-align:center;">ç°åœ¨ç”¨æˆ·å¯ä»¥æ·»åŠ æ–°ä¸»é¢˜äº†ï¼Œä½†ä»–ä»¬è¿˜æƒ³æ·»åŠ æ–°æ¡ç›®ã€‚æˆ‘ä»¬å°†å†æ¬¡å®šä¹‰URLï¼Œç¼–å†™è§†å›¾å‡½æ•° å’Œæ¨¡æ¿ï¼Œå¹¶é“¾æ¥åˆ°æ·»åŠ æ–°æ¡ç›®çš„ç½‘é¡µã€‚ä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨forms.pyä¸­å†æ·»åŠ ä¸€ä¸ªç±»ã€‚</p> 
 <h5 id="1.%20%E7%94%A8%E4%BA%8E%E6%B7%BB%E5%8A%A0%E6%96%B0%E6%9D%A1%E7%9B%AE%E7%9A%84%E8%A1%A8%E5%8D%95" style="text-align:center;">1. ç”¨äºæ·»åŠ æ–°æ¡ç›®çš„è¡¨å•</h5> 
 <p style="text-align:center;">æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªä¸æ¨¡å‹Entryç›¸å…³è”çš„è¡¨å•ï¼Œä½†è¿™ä¸ªè¡¨å•çš„å®šåˆ¶ç¨‹åº¦æ¯”TopicFormè¦é«˜äº›ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h6 id="forms.py" style="text-align:center;">forms.py</h6> 
</blockquote> 
<pre><code class="language-python">from django import forms
from .models import Topic, Entry
class TopicForm(forms.ModelForm):
 --snip--
class EntryForm(forms.ModelForm):
 class Meta:
 model = Entry
 fields = ['text']
1 labels = {'text': ''}
2 widgets = {'text': forms.Textarea(attrs={'cols': 80})}</code></pre> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬é¦–å…ˆä¿®æ”¹äº†importè¯­å¥ï¼Œä½¿å…¶é™¤å¯¼å…¥Topicå¤–ï¼Œè¿˜å¯¼å…¥Entryã€‚æ–°ç±»EntryFormç»§æ‰¿äº†forms.ModelFormï¼Œå®ƒåŒ…å«çš„Metaç±»æŒ‡å‡ºäº†è¡¨å•åŸºäºçš„æ¨¡å‹ä»¥åŠè¦åœ¨è¡¨å•ä¸­åŒ…å«å“ªäº›å­—æ®µã€‚è¿™é‡Œä¹Ÿ ç»™å­—æ®µ'text'æŒ‡å®šäº†ä¸€ä¸ªç©ºæ ‡ç­¾ï¼ˆè§1ï¼‰ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">åœ¨2å¤„ï¼Œæˆ‘ä»¬å®šä¹‰äº†å±æ€§widgetsã€‚å°éƒ¨ä»¶ï¼ˆwidgetï¼‰æ˜¯ä¸€ä¸ªHTMLè¡¨å•å…ƒç´ ï¼Œå¦‚å•è¡Œæ–‡æœ¬æ¡†ã€ å¤šè¡Œæ–‡æœ¬åŒºåŸŸæˆ–ä¸‹æ‹‰åˆ—è¡¨ã€‚é€šè¿‡è®¾ç½®å±æ€§widgetsï¼Œå¯è¦†ç›–Djangoé€‰æ‹©çš„é»˜è®¤å°éƒ¨ä»¶ã€‚é€šè¿‡è®© Djangoä½¿ç”¨forms.Textareaï¼Œæˆ‘ä»¬å®šåˆ¶äº†å­—æ®µ'text'çš„è¾“å…¥å°éƒ¨ä»¶ï¼Œå°†æ–‡æœ¬åŒºåŸŸçš„å®½åº¦è®¾ç½®ä¸º80 åˆ—ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„40åˆ—ã€‚è¿™ç»™ç”¨æˆ·æä¾›äº†è¶³å¤Ÿçš„ç©ºé—´ï¼Œå¯ä»¥ç¼–å†™æœ‰æ„ä¹‰çš„æ¡ç›®ã€‚</p> 
 <p style="text-align:center;"></p> 
 <h5 id="2.%20URL%E6%A8%A1%E5%BC%8Fnew_entry" style="text-align:center;">2. URLæ¨¡å¼new_entry</h5> 
 <p style="text-align:center;">åœ¨ç”¨äºæ·»åŠ æ–°æ¡ç›®çš„é¡µé¢çš„URLæ¨¡å¼ä¸­ï¼Œéœ€è¦åŒ…å«å®å‚topic_idï¼Œå› ä¸ºæ¡ç›®å¿…é¡»ä¸ç‰¹å®šçš„ä¸» é¢˜ç›¸å…³è”ã€‚è¯¥URLæ¨¡å¼å¦‚ä¸‹ï¼Œæˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°äº†learning_logs/urls.pyä¸­ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h6 id="urls.py" style="text-align:center;">urls.py</h6> 
</blockquote> 
<pre><code class="language-python">--snip--
urlpatterns = [
 --snip--
 # ç”¨äºæ·»åŠ æ–°æ¡ç›®çš„é¡µé¢
 url(r'^new_entry/(?P&lt;topic_id&gt;\d+)/$', views.new_entry, name='new_entry'),
] </code></pre> 
<blockquote> 
 <p style="text-align:center;">è¿™ä¸ªURLæ¨¡å¼ä¸å½¢å¼ä¸ºhttp://localhost:8000/new_entry/id/çš„URLåŒ¹é…ï¼Œå…¶ä¸­idæ˜¯ä¸€ä¸ªä¸ ä¸»é¢˜IDåŒ¹é…çš„æ•°å­—ã€‚ä»£ç (?P\d+)æ•è·ä¸€ä¸ªæ•°å­—å€¼ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡topic_idä¸­ã€‚è¯· æ±‚çš„URLä¸è¿™ä¸ªæ¨¡å¼åŒ¹é…æ—¶ï¼ŒDjangoå°†è¯·æ±‚å’Œä¸»é¢˜IDå‘é€ç»™å‡½æ•°new_entry()ã€‚</p> 
 <p style="text-align:center;"></p> 
 <h5 id="3.%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0new_entry()" style="text-align:center;">3. è§†å›¾å‡½æ•°new_entry()</h5> 
 <p style="text-align:center;">è§†å›¾å‡½æ•°new_entry()ä¸å‡½æ•°new_topic()å¾ˆåƒï¼š</p> 
 <p style="text-align:center;"></p> 
 <h6 id="views.py" style="text-align:center;">views.py</h6> 
</blockquote> 
<pre><code class="language-python">from django.shortcuts import render
--snip--
from .models import Topic
from .forms import TopicForm, EntryForm
--snip--
def new_entry(request, topic_id):
 """åœ¨ç‰¹å®šçš„ä¸»é¢˜ä¸­æ·»åŠ æ–°æ¡ç›®"""
1 topic = Topic.objects.get(id=topic_id)
2 if request.method != 'POST':
 # æœªæäº¤æ•°æ®,åˆ›å»ºä¸€ä¸ªç©ºè¡¨å•
3 form = EntryForm()
 else:
 # POSTæäº¤çš„æ•°æ®,å¯¹æ•°æ®è¿›è¡Œå¤„ç†
4 form = EntryForm(data=request.POST)
 if form.is_valid():
5 new_entry = form.save(commit=False)
6 new_entry.topic = topic 
 new_entry.save()
7 return HttpResponseRedirect(reverse('learning_logs:topic',
 args=[topic_id]))
 context = {'topic': topic, 'form': form}
 return render(request, 'learning_logs/new_entry.html', context)</code></pre> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬ä¿®æ”¹äº†importè¯­å¥ï¼Œåœ¨å…¶ä¸­åŒ…å«äº†åˆšåˆ›å»ºçš„EntryFormã€‚new_entry()çš„å®šä¹‰åŒ…å«å½¢å‚ topic_idï¼Œç”¨äºå­˜å‚¨ä»URLä¸­è·å¾—çš„å€¼ã€‚æ¸²æŸ“é¡µé¢ä»¥åŠå¤„ç†è¡¨å•æ•°æ®æ—¶ï¼Œéƒ½éœ€è¦çŸ¥é“é’ˆå¯¹çš„æ˜¯å“ª ä¸ªä¸»é¢˜ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨topic_idæ¥è·å¾—æ­£ç¡®çš„ä¸»é¢˜ï¼ˆè§1ï¼‰ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">åœ¨2å¤„ï¼Œæˆ‘ä»¬æ£€æŸ¥è¯·æ±‚æ–¹æ³•æ˜¯POSTè¿˜æ˜¯GETã€‚å¦‚æœæ˜¯GETè¯·æ±‚ï¼Œå°†æ‰§è¡Œifä»£ç å—ï¼šåˆ›å»ºä¸€ ä¸ªç©ºçš„EntryFormå®ä¾‹ï¼ˆè§3ï¼‰ã€‚å¦‚æœè¯·æ±‚æ–¹æ³•ä¸ºPOSTï¼Œæˆ‘ä»¬å°±å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼šåˆ›å»ºä¸€ä¸ªEntryForm å®ä¾‹ï¼Œä½¿ç”¨requestå¯¹è±¡ä¸­çš„POSTæ•°æ®æ¥å¡«å……å®ƒï¼ˆè§4ï¼‰ï¼›å†æ£€æŸ¥è¡¨å•æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæœ‰æ•ˆï¼Œå°±è®¾ ç½®æ¡ç›®å¯¹è±¡çš„å±æ€§topicï¼Œå†å°†æ¡ç›®å¯¹è±¡ä¿å­˜åˆ°æ•°æ®åº“ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">è°ƒç”¨save()æ—¶ï¼Œæˆ‘ä»¬ä¼ é€’äº†å®å‚commit=Falseï¼ˆè§5ï¼‰ï¼Œè®©Djangoåˆ›å»ºä¸€ä¸ªæ–°çš„æ¡ç›®å¯¹è±¡ï¼Œå¹¶ å°†å…¶å­˜å‚¨åˆ°new_entryä¸­ï¼Œä½†ä¸å°†å®ƒä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚æˆ‘ä»¬å°†new_entryçš„å±æ€§topicè®¾ç½®ä¸ºåœ¨è¿™ä¸ª å‡½æ•°å¼€å¤´ä»æ•°æ®åº“ä¸­è·å–çš„ä¸»é¢˜ï¼ˆè§6ï¼‰ï¼Œç„¶åè°ƒç”¨save()ï¼Œä¸”ä¸æŒ‡å®šä»»ä½•å®å‚ã€‚è¿™å°†æŠŠæ¡ç›®ä¿ å­˜åˆ°æ•°æ®åº“ï¼Œå¹¶å°†å…¶ä¸æ­£ç¡®çš„ä¸»é¢˜ç›¸å…³è”ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">åœ¨7å¤„ï¼Œæˆ‘ä»¬å°†ç”¨æˆ·é‡å®šå‘åˆ°æ˜¾ç¤ºç›¸å…³ä¸»é¢˜çš„é¡µé¢ã€‚è°ƒç”¨reverse()æ—¶ï¼Œéœ€è¦æä¾›ä¸¤ä¸ªå®å‚ï¼š è¦æ ¹æ®å®ƒæ¥ç”ŸæˆURLçš„URLæ¨¡å¼çš„åç§°ï¼›åˆ—è¡¨argsï¼Œå…¶ä¸­åŒ…å«è¦åŒ…å«åœ¨URLä¸­çš„æ‰€æœ‰å®å‚ã€‚åœ¨è¿™ é‡Œï¼Œåˆ—è¡¨argsåªæœ‰ä¸€ä¸ªå…ƒç´ â€”â€”topic_idã€‚æ¥ä¸‹æ¥ï¼Œè°ƒç”¨HttpResponseRedirect()å°†ç”¨æˆ·é‡å®šå‘åˆ° æ˜¾ç¤ºæ–°å¢æ¡ç›®æ‰€å±ä¸»é¢˜çš„é¡µé¢ï¼Œç”¨æˆ·å°†åœ¨è¯¥é¡µé¢çš„æ¡ç›®åˆ—è¡¨ä¸­çœ‹åˆ°æ–°æ·»åŠ çš„æ¡ç›®ã€‚</p> 
 <p style="text-align:center;"></p> 
 <h5 id="4.%20%E6%A8%A1%E6%9D%BFnew_entry" style="text-align:center;">4. æ¨¡æ¿new_entry</h5> 
 <p style="text-align:center;">ä»ä¸‹é¢çš„ä»£ç å¯çŸ¥ï¼Œæ¨¡æ¿new_entryç±»ä¼¼äºæ¨¡æ¿new_topicï¼š</p> 
 <p style="text-align:center;"></p> 
 <h6 id="new_entry.html" style="text-align:center;">new_entry.html</h6> 
</blockquote> 
<pre><code class="language-python">{% extends "learning_logs/base.html" %}
{% block content %}
1 &lt;p&gt;&lt;a href="{% url 'learning_logs:topic' topic.id %}"&gt;{<!-- -->{ topic }}&lt;/a&gt;&lt;/p&gt;
 &lt;p&gt;Add a new entry:&lt;/p&gt;
2 &lt;form action="{% url 'learning_logs:new_entry' topic.id %}" method='post'&gt;
 {% csrf_token %}
 {<!-- -->{ form.as_p }}
 &lt;button name='submit'&gt;add entry&lt;/button&gt;
 &lt;/form&gt;
{% endblock content %} </code></pre> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬åœ¨é¡µé¢é¡¶ç«¯æ˜¾ç¤ºäº†ä¸»é¢˜ï¼ˆè§1ï¼‰ï¼Œè®©ç”¨æˆ·çŸ¥é“ä»–æ˜¯åœ¨å“ªä¸ªä¸»é¢˜ä¸­æ·»åŠ æ¡ç›®ï¼›è¯¥ä¸»é¢˜åä¹Ÿ æ˜¯ä¸€ä¸ªé“¾æ¥ï¼Œå¯ç”¨äºè¿”å›åˆ°è¯¥ä¸»é¢˜çš„ä¸»é¡µé¢ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">è¡¨å•çš„å®å‚actionåŒ…å«URLä¸­çš„topic_idå€¼ï¼Œè®©è§†å›¾å‡½æ•°èƒ½å¤Ÿå°†æ–°æ¡ç›®å…³è”åˆ°æ­£ç¡®çš„ä¸»é¢˜ï¼ˆè§ 2ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸ªæ¨¡æ¿ä¸æ¨¡æ¿new_topic.htmlå®Œå…¨ç›¸åŒã€‚</p> 
 <h5 id="5.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E9%A1%B5%E9%9D%A2new_entry" style="text-align:center;">5. é“¾æ¥åˆ°é¡µé¢new_entry</h5> 
 <p style="text-align:center;">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ˜¾ç¤ºç‰¹å®šä¸»é¢˜çš„é¡µé¢ä¸­æ·»åŠ åˆ°é¡µé¢new_entryçš„é“¾æ¥ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h6 id="topic.html" style="text-align:center;">topic.html</h6> 
</blockquote> 
<pre><code class="language-python">{% extends "learning_logs/base.html" %}
{% block content %}
 &lt;p&gt;Topic: {<!-- -->{ topic }}&lt;/p&gt;
 &lt;p&gt;Entries:&lt;/p&gt;
 &lt;p&gt;
 &lt;a href="{% url 'learning_logs:new_entry' topic.id %}"&gt;add new entry&lt;/a&gt;
 &lt;/p&gt;
 &lt;ul&gt;
 --snipâ€”
 &lt;/ul&gt;
{% endblock content %}</code></pre> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬åœ¨æ˜¾ç¤ºæ¡ç›®å‰æ·»åŠ é“¾æ¥ï¼Œå› ä¸ºåœ¨è¿™ç§é¡µé¢ä¸­ï¼Œæ‰§è¡Œçš„æœ€å¸¸è§çš„æ“ä½œæ˜¯æ·»åŠ æ–°æ¡ç›®ã€‚å›¾19-2 æ˜¾ç¤ºäº†é¡µé¢new_entryã€‚ç°åœ¨ç”¨æˆ·å¯ä»¥æ·»åŠ æ–°ä¸»é¢˜ï¼Œè¿˜å¯ä»¥åœ¨æ¯ä¸ªä¸»é¢˜ä¸­æ·»åŠ ä»»æ„æ•°é‡çš„æ¡ç›®ã€‚ è¯·åœ¨ä¸€äº›æ—¢æœ‰ä¸»é¢˜ä¸­æ·»åŠ ä¸€äº›æ–°æ¡ç›®ï¼Œå°è¯•ä½¿ç”¨ä¸€ä¸‹é¡µé¢new_entryã€‚</p> 
</blockquote> 
<p style="text-align:center;"><img alt="" height="583" src="https://images2.imgbox.com/55/fb/KBw4j0iU_o.png" width="835"></p> 
<h4 id="19.1.3%20%E7%BC%96%E8%BE%91%E6%9D%A1%E7%9B%AE" style="text-align:center;">19.1.3 ç¼–è¾‘æ¡ç›®</h4> 
<blockquote> 
 <p style="text-align:center;">ä¸‹é¢æ¥åˆ›å»ºä¸€ä¸ªé¡µé¢ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿç¼–è¾‘æ—¢æœ‰çš„æ¡ç›®ã€‚</p> 
 <h5 id="1.%20URL%E6%A8%A1%E5%BC%8Fedit_entry" style="text-align:center;">1. URLæ¨¡å¼edit_entry</h5> 
 <p style="text-align:center;">è¿™ä¸ªé¡µé¢çš„URLéœ€è¦ä¼ é€’è¦ç¼–è¾‘çš„æ¡ç›®çš„IDã€‚ä¿®æ”¹åçš„learning_logs/urls.pyå¦‚ä¸‹ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h6 style="text-align:center;">urls.py</h6> 
</blockquote> 
<pre><code class="language-python">--snip--
urlpatterns = [
 --snip--
 # ç”¨äºç¼–è¾‘æ¡ç›®çš„é¡µé¢
 url(r'^edit_entry/(?P&lt;entry_id&gt;\d+)/$', views.edit_entry,
 name='edit_entry'),
] </code></pre> 
<blockquote> 
 <p style="text-align:center;">åœ¨URLï¼ˆå¦‚http://localhost:8000/edit_entry/1/ï¼‰ä¸­ä¼ é€’çš„IDå­˜å‚¨åœ¨å½¢å‚entry_idä¸­ã€‚è¿™ä¸ªURL æ¨¡å¼å°†é¢„æœŸåŒ¹é…çš„è¯·æ±‚å‘é€ç»™è§†å›¾å‡½æ•°edit_entry()ã€‚</p> 
 <p style="text-align:center;"></p> 
 <h5 id="2.%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0edit_entry()" style="text-align:center;">2. è§†å›¾å‡½æ•°edit_entry()</h5> 
 <p style="text-align:center;">é¡µé¢edit_entryæ”¶åˆ°GETè¯·æ±‚æ—¶ï¼Œedit_entry()å°†è¿”å›ä¸€ä¸ªè¡¨å•ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿå¯¹æ¡ç›®è¿›è¡Œç¼– è¾‘ã€‚è¯¥é¡µé¢æ”¶åˆ°POSTè¯·æ±‚ï¼ˆæ¡ç›®æ–‡æœ¬ç»è¿‡ä¿®è®¢ï¼‰æ—¶ï¼Œå®ƒå°†ä¿®æ”¹åçš„æ–‡æœ¬ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h6 style="text-align:center;">views.py</h6> 
</blockquote> 
<pre><code class="language-python">from django.shortcuts import render
--snip--
from .models import Topic, Entry
from .forms import TopicForm, EntryForm
--snip--
def edit_entry(request, entry_id):
 """ç¼–è¾‘æ—¢æœ‰æ¡ç›®"""
1 entry = Entry.objects.get(id=entry_id)
topic = entry.topic
 if request.method != 'POST':
 # åˆæ¬¡è¯·æ±‚ï¼Œä½¿ç”¨å½“å‰æ¡ç›®å¡«å……è¡¨å•
2 form = EntryForm(instance=entry)
 else:
 # POSTæäº¤çš„æ•°æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç†
3 form = EntryForm(instance=entry, data=request.POST)
 if form.is_valid():
4 form.save()
5 return HttpResponseRedirect(reverse('learning_logs:topic',
 args=[topic.id]))
 context = {'entry': entry, 'topic': topic, 'form': form}
 return render(request, 'learning_logs/edit_entry.html', context)</code></pre> 
<hr> 
<p style="text-align:center;"><a href="https://blog.csdn.net/lzy302810/article/details/135153641?spm=1001.2014.3001.5502" title="å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨37-CSDNåšå®¢">å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨37-CSDNåšå®¢</a></p> 
<p style="text-align:center;"><a href="https://blog.csdn.net/lzy302810/article/details/135043856?spm=1001.2014.3001.5502" title="å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨25-CSDNåšå®¢">å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨25-CSDNåšå®¢</a></p> 
<p style="text-align:center;"><a href="https://blog.csdn.net/lzy302810/article/details/134917938?spm=1001.2014.3001.5502" title="å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨12-CSDNåšå®¢">å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨12-CSDNåšå®¢</a></p> 
<h2 id="%E5%BE%80%E6%9C%9F%E5%BF%AB%E9%80%9F%E4%BC%A0%E9%80%81%E9%97%A8%F0%9F%91%86%EF%BC%88%E5%9C%A8%E6%96%87%E7%AB%A0%E6%9C%80%E5%90%8E%EF%BC%89%EF%BC%9A" style="text-align:center;"><strong>å¾€æœŸå¿«é€Ÿä¼ é€é—¨ğŸ‘†ï¼ˆåœ¨æ–‡ç« æœ€åï¼‰ï¼š</strong></h2> 
<h2 id="%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%E6%AC%A2%E8%BF%8E%E8%AE%A2%E9%98%85%E6%94%B6%E8%97%8F%EF%BC%81%E4%B8%93%E6%A0%8F%E5%B0%86%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%81" style="text-align:center;"><a name="t7"></a><a name="t23"></a><a name="t9"></a><a name="t10"></a><a name="t16"></a><strong><a name="t8"></a><a name="t13"></a><a name="t11"></a>æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼æ¬¢è¿è®¢é˜…æ”¶è—ï¼ä¸“æ å°†æŒç»­æ›´æ–°ï¼</strong></h2>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/298ee52bd7da041929f4286367c0b180/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">å°šç¡…è°·webå‰ç«¯çŸ¥è¯†ç‚¹è¡¥å……</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/39ce0034e9f885cd4876b725bcdbb8e3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">è®¡ç®—æœºè½¯ä»¶è€ƒè¯•è¯•é¢˜â€”â€”é™„ç­”æ¡ˆ</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>