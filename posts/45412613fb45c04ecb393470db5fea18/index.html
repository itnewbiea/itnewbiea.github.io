<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python爬虫练习(一)之使用urllib获取百度贴吧中的信息 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python爬虫练习(一)之使用urllib获取百度贴吧中的信息" />
<meta property="og:description" content="学习编程没有一蹴而就的，无论什么时候都要记住一句话：基础不牢地动山摇！拥有一个扎实的基本功才能有更好的前途如果你对urllib库不太了解，可以去看一看我写的urllib基础，在来看这段代码，相信你会有更多的收获！
需要注意的点： 1. quote()转换中文
2. url拼接
3. 请求与响应的方式
4.怎么指定获取的起始页和结束页 5. 写入文件的格式
import urllib.parse from urllib import request &#39;&#39;&#39; 网址分析： 海贼王吧 https://tieba.baidu.com/f?kw=%E6%B5%B7%E8%B4%BC%E7%8E%8B&amp;ie=utf-8&amp;pn=0 https://tieba.baidu.com/f?kw=%E6%B5%B7%E8%B4%BC%E7%8E%8B&amp;ie=utf-8&amp;pn=50 https://tieba.baidu.com/f?kw=%E6%B5%B7%E8%B4%BC%E7%8E%8B&amp;ie=utf-8&amp;pn=100 lol陪玩 https://tieba.baidu.com/f? kw=lol%E9%99%AA%E7%8E%A9 &amp;ie=utf-8&amp; pn=0 https://tieba.baidu.com/f? kw=lol%E9%99%AA%E7%8E%A9 &amp;ie=utf-8&amp; pn=50 &#39;&#39;&#39; url=&#39;https://tieba.baidu.com/f?&#39; headers={ &#39;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36&#39; } name1=input(&#39;请输入你要搜索的贴吧名称：&#39;) # 处理name（贴吧名称） name=urllib.parse.quote(name1) start=int(input(&#39;请输入起始页：&#39;)) end=int(input(&#39;请输入结束页：&#39;)) for i in range(start,end&#43;1): #处理页数 pn=(start-1)*50 #链接url url=f&#39;{url}kw={name}&amp;ie=utf-8&amp;pn={pn}&#39; #urlopen请求并接受响应url html=urllib.request.urlopen(url) html_read=html.read().decode(&#39;utf-8&#39;) #将获取到的内容写入文件 with open(f&#39;{name1}的贴吧第{i}页.html&#39;, mode=&#39;w&#39;,encoding=&#39;utf-8&#39;)as f: print(f&#39;正在写入第{i}页." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/45412613fb45c04ecb393470db5fea18/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-05T17:43:06+08:00" />
<meta property="article:modified_time" content="2022-06-05T17:43:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python爬虫练习(一)之使用urllib获取百度贴吧中的信息</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>学习编程没有一蹴而就的，无论什么时候都要记住一句话：基础不牢地动山摇！拥有一个扎实的基本功才能有更好的前途如果你对urllib库不太了解，可以去看一看我写的<a class="link-info" href="https://blog.csdn.net/caribbean666/article/details/125107601" title="urllib基础">urllib基础</a>，在来看这段代码，相信你会有更多的收获！</p> 
<p>需要注意的点： </p> 
<p>        1. quote()转换中文</p> 
<p>        2. url拼接</p> 
<p>        3. 请求与响应的方式</p> 
<p>        4.怎么指定获取的起始页和结束页 </p> 
<p>        5. 写入文件的格式</p> 
<pre><code class="language-python">import urllib.parse
from urllib import request
'''
网址分析：
海贼王吧
https://tieba.baidu.com/f?kw=%E6%B5%B7%E8%B4%BC%E7%8E%8B&amp;ie=utf-8&amp;pn=0
https://tieba.baidu.com/f?kw=%E6%B5%B7%E8%B4%BC%E7%8E%8B&amp;ie=utf-8&amp;pn=50
https://tieba.baidu.com/f?kw=%E6%B5%B7%E8%B4%BC%E7%8E%8B&amp;ie=utf-8&amp;pn=100
lol陪玩
https://tieba.baidu.com/f? kw=lol%E9%99%AA%E7%8E%A9 &amp;ie=utf-8&amp; pn=0
https://tieba.baidu.com/f? kw=lol%E9%99%AA%E7%8E%A9 &amp;ie=utf-8&amp; pn=50
'''
url='https://tieba.baidu.com/f?'
headers={
    'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36'
}

name1=input('请输入你要搜索的贴吧名称：')
# 处理name（贴吧名称）
name=urllib.parse.quote(name1)
start=int(input('请输入起始页：'))
end=int(input('请输入结束页：'))
for i in range(start,end+1):
    #处理页数
    pn=(start-1)*50
    #链接url
    url=f'{url}kw={name}&amp;ie=utf-8&amp;pn={pn}'
    #urlopen请求并接受响应url
    html=urllib.request.urlopen(url)
    html_read=html.read().decode('utf-8')
    #将获取到的内容写入文件
    with open(f'{name1}的贴吧第{i}页.html', mode='w',encoding='utf-8')as f:
        print(f'正在写入第{i}页......')
        f.write(html_read)

</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/51cfe1a907f2e3254342188de46f4960/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Windows7上安装pytorch1.11后报api-ms-win-core-path-l1-1-0.dll错误的解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d74188c2df5e1c36f72b2f322a4e317e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">requests结果显示“请开启JavaScript并刷新该页”，selenium不用cookie解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>