<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>亚马逊云科技 re:Invent 2023 产品体验：亚马逊云科技产品应用实践 国赛选手带你看 Elasticache Serverless - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="亚马逊云科技 re:Invent 2023 产品体验：亚马逊云科技产品应用实践 国赛选手带你看 Elasticache Serverless" />
<meta property="og:description" content="抛砖引玉 讲一下作者背景，曾经参加过国内世界技能大赛云计算的选拔，那么在竞赛中包含两类，一类是架构类竞赛，另一类就是 TroubleShooting 竞赛，对应的分别为亚马逊云科技 GameDay 和亚马逊云科技 Jam，想必也有朋友玩过此类竞赛，那么最经典的一个 Gameday，我认为是 Gameday 2015 那个比赛，感兴趣的朋友可以在这里看看：Amazon-Gameday-2015-Runbook
亚马逊云科技开发者社区为开发者们提供全球的开发技术资源。这里有技术文档、开发案例、技术专栏、培训视频、活动与竞赛等。帮助中国开发者对接世界最前沿技术，观点，和项目，并将中国优秀开发者或技术推荐给全球云社区。如果你还没有关注/收藏，看到这里请一定不要匆匆划过，点这里让它成为你的技术宝库！
上图为一个简易架构示例图
那么在这场比赛中，是有好几个版本的，如果说延伸到后面的版本，那么 Elasticache 是一个拿分的好物(在不考虑 Cloudfront 的情况下)，因为从客户端发送来的数据，会被缓存到 Elasticache 中，在这里当然是用的 Elasticache for memcached，当客户端再次发送同样的数据请求过来的时候，首先会往 memcache 的查询数据，如果有就即刻返回。
那么在这个实践的过程中，我们抛开架构上的设计，我们使用 Elasticache for Memcached 首先是要去创建。
OK，那么问题来了
在生产实践中，我们需要考虑到成本的问题，创建多大呢？我们如何去预估这个缓存数据库的一个规模大小，这是第一个问题(虽然在竞赛中，都是扣一样的) 创建缓存数据库需要花时间，如果设置错误，删除也需要花费时间，在每个阶段会需要时间等待，大约4-5分钟
总结起来就是：弹性伸缩，成本管控
视频简介 点击下方链接，观看视频简介
亚马逊云科技re:Invent 2023产品体验：亚马逊云科技产品应用实践 国赛选手带你看Elasticache Serverless_哔哩哔哩_bilibili
亚马逊云科技 re:Invent 2023 产品体验：亚马逊云科技产品应用实践 国赛选手带你看 Elasticache Serverless
Serverless 助力数据拓展无极限 在 2023 亚马逊云科技 re:Invent 大会中，Peter 宣布推出 Amazon ElastiCache Serverless，这是一种新的无服务器选项，允许客户在一分钟内创建缓存并根据应用程序流量模式立即扩展容量。Amazon ElastiCache Serverless 与两种流行的开源缓存解决方案 Redis 和 Memcached 兼容。
Amazon ElastiCache Serverless 具有以下优势：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/6f149b2b2eb80bf46689563362e98a94/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-26T16:12:21+08:00" />
<meta property="article:modified_time" content="2023-12-26T16:12:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">亚马逊云科技 re:Invent 2023 产品体验：亚马逊云科技产品应用实践 国赛选手带你看 Elasticache Serverless</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 id="heading-0"><strong>抛砖引玉</strong></h4> 
<p>讲一下作者背景，曾经参加过国内世界技能大赛<a href="https://so.csdn.net/so/search?q=%E4%BA%91%E8%AE%A1%E7%AE%97&amp;spm=1001.2101.3001.7020?trk=cndc-detail" title="云计算">云计算</a>的选拔，那么在竞赛中包含两类，一类是架构类竞赛，另一类就是 TroubleShooting 竞赛，对应的分别为亚马逊云科技 GameDay 和亚马逊云科技 Jam，想必也有朋友玩过此类竞赛，那么最经典的一个 Gameday，我认为是 Gameday 2015 那个比赛，感兴趣的朋友可以在这里看看：<a href="https://github.com/fedorovdima/aws-gameday/blob/master/runbook.md?trk=cndc-detail" title="Amazon-Gameday-2015-Runbook">Amazon-Gameday-2015-Runbook</a></p> 
<blockquote> 
 <p><a class="link-info" href="https://dev.amazoncloud.cn/?sc_medium=regulartraffic&amp;sc_campaign=crossplatform&amp;sc_channel=CSDN" rel="nofollow" title="亚马逊云科技开发者社区">亚马逊云科技开发者社区</a>为开发者们提供全球的开发技术资源。这里有技术文档、开发案例、技术专栏、培训视频、活动与竞赛等。帮助中国开发者对接世界最前沿技术，观点，和项目，并将中国优秀开发者或技术推荐给全球云社区。如果你还没有关注/收藏，看到这里请一定不要匆匆划过，点<a class="link-info" href="https://passport.amazoncloud.cn/signin?sc_medium=regulartraffic&amp;sc_campaign=crossplatform&amp;sc_channel=CSDN" rel="nofollow" title="这里">这里</a>让它成为你的技术宝库！</p> 
</blockquote> 
<p></p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="415" src="https://images2.imgbox.com/28/22/5FkHfxSY_o.png" width="279"></p> 
<p> 上图为一个简易架构示例图</p> 
<p>那么在这场比赛中，是有好几个版本的，如果说延伸到后面的版本，那么 Elasticache 是一个拿分的好物(在不考虑 Cloudfront 的情况下)，因为从客户端发送来的数据，会被缓存到 Elasticache 中，在这里当然是用的 Elasticache for memcached，当客户端再次发送同样的数据请求过来的时候，首先会往 memcache 的查询数据，如果有就即刻返回。</p> 
<p>那么在这个实践的过程中，我们抛开架构上的设计，我们使用 Elasticache for Memcached 首先是要去创建。</p> 
<p>OK，那么问题来了</p> 
<p>在生产实践中，我们需要考虑到成本的问题，创建多大呢？我们如何去预估这个缓存数据库的一个规模大小，这是第一个问题(虽然在竞赛中，都是扣一样的) 创建缓存数据库需要花时间，如果设置错误，删除也需要花费时间，在每个阶段会需要时间等待，大约4-5分钟</p> 
<p><strong>总结起来就是：弹性伸缩，成本管控</strong></p> 
<h4 id="heading-1"><strong>视频简介</strong></h4> 
<p>点击下方链接，观看视频简介</p> 
<p><a href="https://www.bilibili.com/video/BV18i4y1v7iq?t=303.4?trk=cndc-detail" title="亚马逊云科技re:Invent 2023产品体验：亚马逊云科技产品应用实践 国赛选手带你看Elasticache Serverless_哔哩哔哩_bilibili">亚马逊云科技re:Invent 2023产品体验：亚马逊云科技产品应用实践 国赛选手带你看Elasticache Serverless_哔哩哔哩_bilibili</a></p> 
<p>亚马逊云科技 re:Invent 2023 产品体验：亚马逊云科技产品应用实践 国赛选手带你看 Elasticache Serverless</p> 
<h4 id="heading-2"><strong>Serverless 助力数据拓展无极限</strong></h4> 
<p></p> 
<p class="img-center"><img alt="image.png" height="361" src="https://images2.imgbox.com/04/9a/eSnJpQO1_o.png" width="865"></p> 
<p>在 2023 亚马逊云科技 re:Invent 大会中，Peter 宣布推出 Amazon ElastiCache Serverless，这是一种新的无服务器选项，允许客户在一分钟内创建缓存并根据应用程序流量模式立即扩展容量。Amazon ElastiCache Serverless 与两种流行的开源缓存解决方案 Redis 和 Memcached 兼容。</p> 
<p>Amazon ElastiCache Serverless 具有以下优势：</p> 
<ul><li>无需管理基础设施：ElastiCache Serverless 自动管理容量和扩展，因此您只需为您使用的内存和计算付费。</li><li>快速启动：您只需几分钟即可创建和启动 ElastiCache Serverless 缓存。</li><li>按需扩展：ElastiCache Serverless 会根据您的应用程序需求自动扩展或缩减缓存的容量。</li><li>高可用性：ElastiCache Serverless 自动将数据复制到多个 Availability Zone，以确保高可用性。</li></ul> 
<p>通过这样简单介绍，我相信大家已经明了我的意思了，Amazon Elasticache Serverless 可以满足咱们在之前所遇到的问题，一个是硬件弹性扩缩容，一个是创建/删除时间长的问题。那么我们实际来看看 Amazon Elasticache Serverless 的实际表现如何。</p> 
<h4 id="heading-3"><strong>实践环节</strong></h4> 
<p>在本次实践测试中，使用 Elasticache for Memcached 的 Serverless 版本</p> 
<h5 id="heading-4">控制台创建</h5> 
<p></p> 
<p class="img-center"><img alt="image.png" height="639" src="https://images2.imgbox.com/98/97/t4CZ5uGB_o.png" width="1200"></p> 
<h6 id="heading-5">创建时间</h6> 
<p>默认就会已经选择了 Serverless 版本,大家可以通过下面2个截图看到咱们一整个创建时间是在1分钟左右的，和官方宣称的1分钟内其实是有一点差异的。那么针对于这种现象呢，个人认为也许是底层资源的调用的影响，才导致这样一个差异化的出现，也许在后续的一个版本升级后，可以实现任何时间都可以在1分钟内创建出缓存数据库。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="782" src="https://images2.imgbox.com/1a/91/tcbUBl6j_o.png" width="1200"></p> 
<h5 id="heading-6">连接及使用</h5> 
<p>在我们测试某个服务端口是否开放的时候，我们用 telnet 来进行连接，那么在常规使用中，我们在网上看到连接 redis 和 memcached 的方法也是使用 telnet,例如</p> 
<pre><code id="copy0">telnet Cache_host:port
</code><em>复制代码</em></pre> 
<p>那么，我们可用用这个命令连接上咱们<strong>一般</strong>创建的 redis/memcache，请注意，为什么我在这里说的是“<strong>一般</strong>”在默认和自定义的情况下，亚马逊云科技的 Elasticache 的 Redis/memcached 都会有一个选项，叫做“传输中加密”，该选项是“始终启用”，且无法关闭</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="567" src="https://images2.imgbox.com/99/45/B3cqlduZ_o.png" width="1012"></p> 
<h6 id="heading-7">加密连接</h6> 
<pre><code id="copy1">openssl s_client -connect Cache_host:Port
</code><em>复制代码</em></pre> 
<p></p> 
<p class="img-center"><img alt="image.png" height="874" src="https://images2.imgbox.com/32/bc/ngWJbm8G_o.png" width="1200"></p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="874" src="https://images2.imgbox.com/5f/17/SSmCQXUS_o.png" width="1200"></p> 
<h5 id="heading-8">弹性测试</h5> 
<h6 id="heading-9">弹性拓展</h6> 
<p>当然，Elasticache Serverless，重就重在 Serverless，在创建之初，咱们就已经提到过，我们可以自行定义可用内存和每秒 ElastiCache 处理单位，当然默认情况下是不设限的。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="515" src="https://images2.imgbox.com/38/9b/85Cq3N3f_o.png" width="992"></p> 
<h6 id="heading-10">并发测试</h6> 
<p><strong>测试视频</strong></p> 
<p>点击下方链接，观看测试视频</p> 
<p><a href="https://www.bilibili.com/video/BV1wi4y1e7WQ?t=664.0?trk=cndc-detail" rel="nofollow" title="并发测试-亚马逊云科技re:Invent 2023产品体验：亚马逊云科技产品应用实践 国赛选手带你看Elasticache Serverless_哔哩哔哩_bilibili">并发测试-亚马逊云科技re:Invent 2023产品体验：亚马逊云科技产品应用实践 国赛选手带你看Elasticache Serverless_哔哩哔哩_bilibili</a></p> 
<p>并发测试-亚马逊云科技 re:Invent 2023 产品体验：亚马逊云科技产品应用实践 国赛选手带你看 Elasticache Serverless</p> 
<p><strong>测试配置</strong></p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="267" src="https://images2.imgbox.com/a0/22/mAVL1ULh_o.png" width="1200"></p> 
<p><strong>测试脚本</strong></p> 
<ol><li>首先是要安装 redis</li><li>然后在脚本中定义 redis 终端节点</li><li>脚本每秒钟会并发10000写入</li></ol> 
<pre><code id="copy2">pip3 install redis
</code><em>复制代码</em></pre> 
<pre><code id="copy3">import redis
import concurrent.futures
import random
import string
import time

# 定义你的redis终端节点
redis_host = ''
redis_port = 6379
redis_ssl = True
num_writes_per_second = 10000
key_prefix = "data"


def generate_random_string(length=10):
    """Generate a random string of the specified length."""
    letters = string.ascii_lowercase
    return ''.join(random.choice(letters) for _ in range(length))

def write_to_redis(client, key_prefix, num_writes):
    """Write data to Redis with random keys and values."""
    for _ in range(num_writes):
        key = f"{key_prefix}_{generate_random_string()}"
        value = generate_random_string()
        client.set(key, value)




# Create a Redis client
client = redis.Redis(host=redis_host, port=redis_port, ssl=redis_ssl)

# Function to write to Redis continuously
def continuous_writes():
    with concurrent.futures.ThreadPoolExecutor() as executor:
        while True:
            # Submit write tasks to the thread pool
            futures = [executor.submit(write_to_redis, client, key_prefix, num_writes_per_second) for _ in range(num_writes_per_second)]
            
            # Wait for all tasks to complete
            concurrent.futures.wait(futures)
            
            # Introduce a delay to control the rate of writes
            time.sleep(1)

# Start the continuous writes
continuous_writes()
</code><em>复制代码</em></pre> 
<p><strong>客户端情况</strong></p> 
<p>Serverless 版本写入基本保持在124%的 CPU 利用率</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="219" src="https://images2.imgbox.com/de/c4/slBKV44A_o.png" width="1046"></p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="534" src="https://images2.imgbox.com/cf/ff/ujNRztfk_o.png" width="1200"></p> 
<p>传统预配置机型 t4g.micro</p> 
<p>客户端 CPU 利用率</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="448" src="https://images2.imgbox.com/94/7d/jAuAtO8P_o.png" width="1200"></p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="472" src="https://images2.imgbox.com/08/4d/S5BqMG34_o.png" width="1200"></p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="544" src="https://images2.imgbox.com/ce/11/oLZ8A6Dx_o.png" width="1200"></p> 
<h5 id="heading-11">测试小节</h5> 
<p>从实际并发测试来看，Serverless 版本的 Elasticache 在超高并发下的写入是完全可以接住，并且内存量随着写入数据的增长是没有感知的。反观传统创建出的 T4g.micro 数据库实例，也许在一开始是能够写入数据，但是再往后写入数据，T4g.micro 机型的 redis 似乎就宕机了一样，从监控上的数据来看没有任何写入的迹象。</p> 
<h4 id="heading-12"><strong>总结</strong></h4> 
<p>Amazon ElastiCache Serverless 是一个完全托管的、无服务器的 Memcached 和 Redis 缓存服务。</p> 
<ul><li>无需管理基础设施：ElastiCache Serverless 会自动为您创建和管理 Memcached 或 Redis 缓存实例。</li><li>按需付费：您只需为使用的资源付费，无需预付费或担心容量规划。</li><li>弹性伸缩：ElastiCache Serverless 会根据您的需求自动缩放您的缓存实例，以确保满足您的性能要求。</li></ul> 
<p>通过 Amazon Elasticache Serverless，我们不再需要在缓存数据库的规划上做过多考虑，同时也不需要花费过多的时间进行等待。总的来看 ElastiCache Serverless 是 Memcached 和 Redis 缓存的一种可靠、高效、经济的解决方案</p> 
<p>文章来源：<br><a class="link-info" href="https://dev.amazoncloud.cn/column/article/658a31d979476548e3e1f935?sc_medium=regulartraffic&amp;sc_campaign=crossplatform&amp;sc_channel=CSDN" rel="nofollow" title="https://dev.amazoncloud.cn/column/article/658a31d979476548e3e1f935?sc_medium=regulartraffic&amp;sc_campaign=crossplatform&amp;sc_channel=CSDN">https://dev.amazoncloud.cn/column/article/658a31d979476548e3e1f935?sc_medium=regulartraffic&amp;sc_campaign=crossplatform&amp;sc_channel=CSDN</a></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e174bb66ab3b0a1862a4ec5f0a6ddf3a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">提升数据库性能的关键所在！Mysql执行计划解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f92bcd06b6aaee4d0ef7537ebbd694bd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">亚马逊云科技 re:Invent 2023 产品体验：亚马逊云科技产品应用实践 王炸产品 Amazon Q，你的 AI 助手</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>