<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3 setup 中国省市区三级联动options最简洁写法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue3 setup 中国省市区三级联动options最简洁写法" />
<meta property="og:description" content="点击上方 前端Q，关注公众号
回复加群，加入前端Q技术交流群
前言 本前端仔在写页面的时候，发现表单里面有一个省市区的 options 组件要写，因为表单很多地方都会用到这个地址选择，我便以为很简单嘛。
虽然很简单的一个功能，但是网络上能搜索到的教程大多都是需要配合 elementUI 等各种 UI 库的，但是我的项目并没有使用这些 UI 库，何况我只是想要拿到 一个地址字符串 而已，何必绑定 UI 库呢？
1、地址三级联动制作思路 思路其实很简单：
1、一个地图 json 数据
2、能够拿到 省份、市、区 的 options 数组来绑定就可以了
3、选择一个省份市，对应的市要变化；选择市时，对应的区要变化
这样的话，我们完全可以依赖 vue 强大的数据处理机制来解决
2、地图json 地图json数据我随便搜了一个： 中国省市区数据[1]
3、vue setup 语法糖写法 我们点击上面的链接，下载了地图json数据，这里选择一个普通的就可以了，如图：
image.png 将文件命名为 area.json ，然后在项目中引入：
// 详细地址(省市区 详细地址) import areaObj from &#39;../../public/area.json&#39;; 第一步：首先是处理省份options数组（这里json地图是键名为省份）：
// 省 const provinceArr = Object.keys(areaObj) const province = ref(provinceArr[0]) 这样就拿到了一个省份数组，这里随机默认选中第一个，北京市，这里 province 变量用来绑定输入框的值
第二步：处理市的数据，关键就是使用计算属性来监听 省份的变化，省份一改变，市的数据也会跟着改变：
// 市 const cityArr = computed(() =&gt; { return Object." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/448f9ae38193d8454f51e95c0de4157d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-08T09:15:41+08:00" />
<meta property="article:modified_time" content="2023-12-08T09:15:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3 setup 中国省市区三级联动options最简洁写法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p>点击上方 前端Q，关注公众号<br></p> 
 <p>回复加群，加入前端Q技术交流群</p> 
 <h3>前言</h3> 
 <p style="text-align:left;">本前端仔在写页面的时候，发现表单里面有一个省市区的 options 组件要写，因为表单很多地方都会用到这个地址选择，我便以为很简单嘛。</p> 
 <p style="text-align:left;">虽然很简单的一个功能，但是网络上能搜索到的教程大多都是需要配合 elementUI 等各种 UI 库的，但是我的项目并没有使用这些 UI 库，何况我只是想要拿到 一个地址字符串 而已，何必绑定 UI 库呢？</p> 
 <h5>1、地址三级联动制作思路</h5> 
 <p style="text-align:left;">思路其实很简单：</p> 
 <p style="text-align:left;">1、一个地图 json 数据</p> 
 <p style="text-align:left;">2、能够拿到 省份、市、区 的 options 数组来绑定就可以了</p> 
 <p style="text-align:left;">3、选择一个省份市，对应的市要变化；选择市时，对应的区要变化</p> 
 <p style="text-align:left;">这样的话，我们完全可以依赖 vue 强大的数据处理机制来解决</p> 
 <h5>2、地图json</h5> 
 <p style="text-align:left;">地图json数据我随便搜了一个： 中国省市区数据[1]</p> 
 <h5>3、vue setup 语法糖写法</h5> 
 <p style="text-align:left;">我们点击上面的链接，下载了地图json数据，这里选择一个普通的就可以了，如图：</p> 
 <img src="https://images2.imgbox.com/ec/49/Tb0RPiRF_o.jpg" alt="89d5c7e005ee3a6947448e05d43f8611.jpeg"> 
 <figcaption>
   image.png 
 </figcaption> 
 <p style="text-align:left;">将文件命名为 area.json ，然后在项目中引入：</p> 
 <pre class="has"><code class="language-go">// 详细地址(省市区 详细地址)
import areaObj from '../../public/area.json';</code></pre> 
 <p style="text-align:left;">第一步：首先是处理省份options数组（这里json地图是键名为省份）：</p> 
 <pre class="has"><code class="language-go">// 省
const provinceArr = Object.keys(areaObj)
const province = ref(provinceArr[0])</code></pre> 
 <p style="text-align:left;">这样就拿到了一个省份数组，这里随机默认选中第一个，北京市，这里 province 变量用来绑定输入框的值</p> 
 <p style="text-align:left;">第二步：处理市的数据，关键就是使用<code>计算属性</code>来监听 省份的变化，省份一改变，市的数据也会跟着改变：</p> 
 <pre class="has"><code class="language-go">// 市
const cityArr = computed(() =&gt; {
    return Object.keys(areaObj[province.value])
})
const city = ref(cityArr.value[0])

// 监听省份变化
watch(province, (newVal) =&gt; {
    city.value = Object.keys(areaObj[newVal])[0];
});</code></pre> 
 <p style="text-align:left;">同样，这里的市默认选中第一个，city 也是双向绑定到 输入框， 为了能够在页面随时响应式改变，添加了一个watch 监听</p> 
 <p style="text-align:left;">第三步：处理区的数据</p> 
 <pre class="has"><code class="language-go">// 区
const areaArr = computed(() =&gt; {
    return areaObj[province.value][city.value]
})
const area = ref(areaArr.value[0])
// 监听市变化
watch(city, (newVal) =&gt; {
    area.value = areaObj[province.value][newVal][0]
})</code></pre> 
 <p style="text-align:left;">这里同样默认选中第一个，当市变化时，区也会切换到对应的市区数据</p> 
 <h5>3、效果</h5> 
 <p style="text-align:left;">完美！</p> 
 <img src="https://images2.imgbox.com/15/8f/kpWrvzX2_o.jpg" alt="4d2585a8a824a13ffec838d2581d4094.jpeg"> 
 <figcaption>
   CPT2311061158-968x278.gif 
 </figcaption> 
 <p style="text-align:left;">这样，就可以不借助任何第三方UI库，直接使用 vue 的计算属性和监听简单解决地图三级联动问题，就是数据的处理而已</p> 
 <p style="text-align:left;">以下是完整的代码：</p> 
 <p style="text-align:left;">其中 provinceArr、cityArr、areaArr 绑定options选项，province、city、area 绑定input 输入框</p> 
 <pre class="has"><code class="language-go">import { ref, computed, watch } from 'vue';
// 详细地址(省市区 详细地址)
import areaObj from '../../../../public/area.json';

// 省
const provinceArr = Object.keys(areaObj)
const province = ref(provinceArr[6])
// 市
const cityArr = computed(() =&gt; {
    return Object.keys(areaObj[province.value])
})
const city = ref(cityArr.value[0])
// 监听省份变化
watch(province, (newVal) =&gt; {
    city.value = Object.keys(areaObj[newVal])[0];
});
// 区
const areaArr = computed(() =&gt; {
    return areaObj[province.value][city.value]
})
const area = ref(areaArr.value[0])
// 监听市变化
watch(city, (newVal) =&gt; {
    area.value = areaObj[province.value][newVal][0]
})

// 详细地址
const detailArea = ref('')</code></pre> 
 <blockquote> 
  <p>作者：前端炒粉仔<br>链接：https://juejin.cn/post/7297983578548355099<br>来源：稀土掘金</p> 
 </blockquote> 
 <p><img src="https://images2.imgbox.com/90/99/5lOLSJbY_o.png" alt="d11c2ee03ba38c3de7c3f440cc5860f2.png"></p> 
 <p>往期推荐</p> 
 <p><a href="" rel="nofollow">git 面试字节时，老师问：合并分支中 rebase 和 merge 的区别</a><br></p> 
 <p><img src="https://images2.imgbox.com/0e/61/IUQsJHcd_o.png" alt="71b576c0d0726994a7391ee5da30ef22.png"></p> 
 <p><a href="" rel="nofollow">Vue3 + Three.js + antvG2 实战智慧城市</a><br></p> 
 <p><img src="https://images2.imgbox.com/a6/e3/Q7FoUVQA_o.png" alt="d122e97505712d5049d86322eb9c5052.png"></p> 
 <p><a href="" rel="nofollow">如何设计一个支持并发的前端缓存接口？</a><br></p> 
 <p><img src="https://images2.imgbox.com/14/d5/FLivVx8O_o.png" alt="61488f808879a5794addd6885fd5cdae.png"></p> 
 <p style="text-align:center;"><br>最后</p> 
 <ul><li><p>欢迎加我微信，拉你进技术群，长期交流学习...<br></p></li><li><p>欢迎关注「前端Q」,认真学前端，做个专业的技术人...</p></li></ul> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/a5/fa/yVRdnexF_o.jpg" alt="8178a3c08dfc9a5b9389d1035c1aef41.jpeg"></p> 
 <p><img src="https://images2.imgbox.com/05/c3/3xokIodf_o.png" alt="bd7aef3bc4a79684b063b7b8e325979f.png"></p> 
 <p>点个<strong>在看</strong>支持我吧</p> 
 <p><img src="https://images2.imgbox.com/0c/bb/SJW6peHH_o.gif" alt="a77a4cc9adf126220f8ee7c427bc5ef4.gif"></p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/35a30e790bc26817e24b719ff4d0a75d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《二十九》自动化构建工具 Gulp</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9c4241dbaca8ea06ba513e6240f02d3c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">edge浏览器ie兼容模式怎么打开控制台？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>