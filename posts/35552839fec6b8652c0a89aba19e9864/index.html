<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>软件测试/测试开发丨Pytest 测试框架学习笔记 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="软件测试/测试开发丨Pytest 测试框架学习笔记" />
<meta property="og:description" content="前言 自动化测试前，需要提前准备好数据，测试完成后，需要自动清理脏数据，有没有更好用的框架？自动化测试中，需要使用多套测试数据实现用例的参数化，有没有更便捷的方式？自动化测试后，需要自动生成优雅、简洁的测试报告，有没有更好的生成方法 Pytest 背景与优势 Pytest 是什么？ pytest 能够支持简单的单元测试和复杂的功能测试；pytest 可以结合 Requests 实现接口测试； 结合 Selenium、Appium 实现自动化功能测试；使用 pytest 结合 Allure 集成到 Jenkins 中可以实现持续集成。pytest 支持 315 种以上的插件； 为什么要选择 Pytest 丰富的第三方插件
报告多线程顺序控制 为什么要选择 Pytest 简单灵活 # content of test_sample.py def inc(x): return x &#43; 1 def test_answer(): assert inc(3) == 5 为什么要选择 Pytest 兼容 unittest定制化插件开发 Pytest 安装与准备 Pytest 环境安装 前提：本地已配置完成 Python 环境第一种方式 pip install pytest第二种方式 PyCharm 直接安装 运行第一个脚本 # content of test_sample.py def inc(x): return x &#43; 1 def test_answer(): assert inc(3) == 5 实操 1、创建目录 Desktop(桌面)/pytestdemo12、创建文件 test_first." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/35552839fec6b8652c0a89aba19e9864/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T20:15:00+08:00" />
<meta property="article:modified_time" content="2023-12-27T20:15:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">软件测试/测试开发丨Pytest 测试框架学习笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>前言</h3> 
<ul><li>自动化测试前，需要提前准备好数据，测试完成后，需要自动清理脏数据，有没有更好用的框架？</li><li>自动化测试中，需要使用多套测试数据实现用例的参数化，有没有更便捷的方式？</li><li>自动化测试后，需要自动生成优雅、简洁的测试报告，有没有更好的生成方法</li></ul> 
<h2>Pytest 背景与优势</h2> 
<h3>Pytest 是什么？</h3> 
<ul><li>pytest 能够支持简单的单元测试和复杂的功能测试；</li><li>pytest 可以结合 Requests 实现接口测试； 结合 Selenium、Appium 实现自动化功能测试；</li><li>使用 pytest 结合 Allure 集成到 Jenkins 中可以实现持续集成。</li><li>pytest 支持 315 种以上的插件；</li></ul> 
<h3>为什么要选择 Pytest</h3> 
<ul><li> <p>丰富的第三方插件</p> 
  <ul><li>报告</li><li>多线程</li><li>顺序控制</li></ul></li></ul> 
<p></p> 
<p class="img-center"><img alt="" height="347" src="https://images2.imgbox.com/2c/ff/RVhjhsQE_o.png" width="792"></p> 
<p></p> 
<p class="img-center"><img alt="" height="283" src="https://images2.imgbox.com/c2/9c/xgWLAFDx_o.png" width="680"></p> 
<p class="img-center"><img alt="" height="154" src="https://images2.imgbox.com/72/44/JNTOjNvZ_o.png" width="393"></p> 
<h3>为什么要选择 Pytest</h3> 
<ul><li>简单灵活</li></ul> 
<pre><code class="language-python"># content of test_sample.py
def inc(x):
    return x + 1


def test_answer():
    assert inc(3) == 5
</code></pre> 
<p></p> 
<h3>为什么要选择 Pytest</h3> 
<ul><li>兼容 unittest</li><li>定制化插件开发</li></ul> 
<p></p> 
<p class="img-center"><img alt="" height="420" src="https://images2.imgbox.com/4a/03/iNm0v6Yn_o.png" width="1000"></p> 
<p></p> 
<p class="img-center"><img alt="" height="606" src="https://images2.imgbox.com/d4/c4/lZ4UzFBK_o.png" width="875"></p> 
<h2>Pytest 安装与准备</h2> 
<h3>Pytest 环境安装</h3> 
<ul><li>前提：本地已配置完成 Python 环境</li><li>第一种方式 <code>pip install pytest</code></li><li>第二种方式 PyCharm 直接安装</li></ul> 
<h3>运行第一个脚本</h3> 
<pre><code class="language-python"># content of test_sample.py
def inc(x):
    return x + 1


def test_answer():
    assert inc(3) == 5
</code></pre> 
<p></p> 
<h3>实操</h3> 
<ul><li>1、创建目录 Desktop(桌面)/pytestdemo1</li><li>2、创建文件 test_first.py</li><li>3、打开【terminal】 /【命令提示行 cmd】</li><li>4、运行 pytest 回车</li></ul> 
<h2>2、Pytest 命名规则</h2> 
<h3>Pytest 有哪些格式要求？</h3> 
<ul><li>文件名</li><li>类</li><li>方法/函数</li></ul> 
<h3>Pytest 测试用例编写规则是什么？</h3> 
<table><thead><tr><th>类型</th><th>规则</th></tr></thead><tbody><tr><td>文件</td><td>test_开头 或者 _test 结尾</td></tr><tr><td>类</td><td>Test 开头</td></tr><tr><td>方法/函数</td><td>test_开头</td></tr><tr><td>注意：测试类中不可以添加<code>__init__</code>构造函数</td><td></td></tr></tbody></table> 
<h3>练习</h3> 
<ul><li> <p>（多选）下面哪个测试方法，符合 pytest 命名规范</p> 
  <ul><li>A、测试类 TestDemo</li><li>B、测试方法 test_demo</li><li>C、测试文件 testdemo</li><li>D、测试包 test_demo<br> 答案：ABD</li></ul></li></ul> 
<h2>3、pycharm 配置与界面化运行</h2> 
<h3>Pycharm 界面化安装 Pytest</h3> 
<p></p> 
<p class="img-center"><img alt="pytest" height="720" src="https://images2.imgbox.com/f5/85/jjYTCFYt_o.png" width="987"></p> 
<h3>Pycharm 默认测试执行器为Pytest</h3> 
<ol><li>进入 Tools-&gt;Python Intergrated Tools</li><li>选择 Default test runner 为 pytest</li></ol> 
<p></p> 
<p class="img-center"><img alt="pytest" height="722" src="https://images2.imgbox.com/0c/66/4hBKHRGu_o.png" width="979"></p> 
<h2>4、pytest 用例结构</h2> 
<h4>用例结构</h4> 
<ul><li> <p>三部分构成</p> 
  <ul><li>用例名称</li><li>用例步骤</li><li>用例断言</li></ul></li></ul> 
<h4>测试用例示例</h4> 
<pre><code class="language-python">def test_XXX(self):
    # 测试步骤1
    # 测试步骤2
    # 断言  实际结果 对比 预期结果
    assert ActualResult == ExpectedResult
</code></pre> 
<p></p> 
<h4>类级别的用例示例</h4> 
<pre><code class="language-python">class TestXXX:
    def setup(self):
        # 资源准备
        pass

    def teardown(self):
        # 资源销毁
        pass

    def test_XXX(self):
        # 测试步骤1
        # 测试步骤2
        # 断言  实际结果 对比 预期结果
        assert ActualResult == ExpectedResult
</code></pre> 
<p></p> 
<h2>5、pytest 用例断言</h2> 
<h4>pytest 测试用例断言</h4> 
<ul><li>什么是断言</li><li>断言的用法</li></ul> 
<h4>什么是断言</h4> 
<p>断言(assert)，是一种在程序中的一阶逻辑(如：一个结果为真或假的逻辑判断式)，目的为了表示与验证软件开发者预期的结果。当程序执行到断言的位置时，对应的断言应该为真。若断言不为真时，程序会中止执行，并给出错误信息。</p> 
<p></p> 
<p class="img-center"><img alt="" height="748" src="https://images2.imgbox.com/98/1d/N8V1xFxe_o.png" width="1096"></p> 
<h4>断言的用法</h4> 
<ul><li> <p>断言写法</p> 
  <ul><li><code>assert &lt;表达式&gt;</code></li><li><code>assert &lt;表达式&gt;,&lt;描述&gt;</code></li></ul></li></ul> 
<pre><code class="language-python">assert &lt;bool expression&gt;;       
assert &lt;bool expression&gt; : &lt;message&gt;;    
</code></pre> 
<p></p> 
<h4>示例 1</h4> 
<ul><li>第一种：<code>assert &lt;表达式&gt;</code></li><li>第二种：<code>assert &lt;表达式&gt;,&lt;描述&gt;</code></li></ul> 
<pre><code class="language-python">def test_a():
    assert True

def test_b():
    a = 1
    b = 1
    c = 2
    assert a + b == c, f"{a}+{b}=={c}, 结果为真"
</code></pre> 
<p></p> 
<h4>示例 2</h4> 
<ul><li>assert &lt;表达式&gt;</li></ul> 
<pre><code class="language-python">def test_c():
    a = 1
    b = 1
    c = 2
    assert 'abc' in "abcd"

import sys
def test_plat():
    assert ('linux' in sys.platform), "该代码只能在 Linux 下执行"
</code></pre> 
<p><strong>最后感谢每一个认真阅读我文章的人，礼尚往来总是要有的，虽然不是什么很值钱的东西，如果你用得到的话可以直接拿走：</strong></p> 
<h4><img alt="" height="707" src="https://images2.imgbox.com/f0/03/9zMeNzsV_o.png" width="929"></h4> 
<p>这些资料，对于【软件测试】的朋友来说应该是最全面最完整的备战仓库，这个仓库也陪伴上万个测试工程师们走过最艰难的路程，希望也能帮助到你！</p> 
<p class="img-center"><img alt="" height="126" src="https://images2.imgbox.com/40/c0/NR24Ozzl_o.png" width="634"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f5dc20715438644920f1cb5364f07033/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">软件测试/测试开发丨Pytest 参数化用例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a95594e8ee0ab3f78ea6b08227af1997/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">鸿蒙（HarmonyOS）项目方舟框架（ArkUI）之线性布局容器Row组件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>