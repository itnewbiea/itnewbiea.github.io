<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot实操篇1 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot实操篇1" />
<meta property="og:description" content="一、工程打包与运行（windows版） 在浏览器中就可以访问到了，此时IDEA并没有启动。服务器就是命令行窗口。
跳过测试：可以看到多了很多数据，是因打包的时候将功能测试了一遍。在IDEA中可以关掉。
注意：必须要有打包插件（插件作用：打一个可以独立运行的jar包）
二、Boot工程快速启动（Lunix版） 前提：
mysql安装在/root下，由root用户启动
tomcat安装在/root下，由普通用户tomcat启动
将打包好的文件上传到Linux中：
输入指令启动就OK：
三、配置高级 1.设置临时属性 如果要设置临时属性：命令行设置的临时属性高于配置文件。
要设置多个临时属性，用空格分开：
2.如何在开发环境中设置临时属性 配置方式1：
是传到args中的
方式二：上面看到是传入args中，我们就可以直接在代码中设置
为了安全，也可以不要这个参数，外部人员就在命令行改不了了，之能用配置文件的。
3.配置文件4级分类 在IDEA中提供两个级别的配置文件，一个是程序员使用的，一个是做程序总控的。
这两个文件合作配置。高级别的配置文件覆盖低级别的配置文件。
在打包好的目录里还有两个配置文件。
总结：SpringBoot中4级配置文件
1级：file：config/application.yml 最高
2级：file：application.yml
3级：classpath：config/appliction.yml
4级：classpath：application.yml 最低
作用：
1级和2级留作系统打包后设置通用属性，1级常用于运维经理进行线上整体项目部署方案调控。
3级和4级用于系统开发阶段设置通用属性，3级常用于项目经理进行整体项目属性调控。
4.自定义配置文件 1.通过启动参数加载配置文件（无序书写配置文件扩展名）
2.通过启动参数加载指定文件路径下的配置文件时可以加载多个配置
后面的配置文件生效了。
重要说明：
单服务器项目：使用自定义配置文件需求较低
多服务器项目：使用自定义配置文件需求较高，将所有配置放置在一个目录中，统一管理
基于SpringCloud技术，所有的服务器将不再设置配置文件，而是通过配置中心进行设定，动态加载配置信息
四、多环境开发 1.yml版本 多环境开发需要设置若干常用环境，例如开发、生产、测试环境
yaml格式中设置多环境使用—区分环境设置边界
每种环境的区别在于加载的配置属性不同
启用某种环境时需要指定启动时使用该环境
#应用环境 #公共配置 spring: profiles: active: pro --- #设置环境 #生产环境 spring: config: activate: on-profile: pro server: port: 80 --- #开发环境 spring: config: activate: on-profile: dex server: port: 81 --- #测试环境 spring: config: activate: on-profile: test server: port: 82 会有暴露配置的问题？把配置文件分开" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f2cd2151e55b4faa792d68d8e02d9917/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-17T19:52:03+08:00" />
<meta property="article:modified_time" content="2023-05-17T19:52:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot实操篇1</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="windows_0"></a>一、工程打包与运行（windows版）</h2> 
<p><img src="https://images2.imgbox.com/49/48/jtgzwPQ9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d8/f2/8Z8hZuwq_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/07/83/SuOSaiRE_o.png" alt="在这里插入图片描述"><br> 在浏览器中就可以访问到了，此时IDEA并没有启动。服务器就是命令行窗口。<br> <img src="https://images2.imgbox.com/5a/9a/DVW5OHMR_o.png" alt="在这里插入图片描述"><br> 跳过测试：可以看到多了很多数据，是因打包的时候将功能测试了一遍。在IDEA中可以关掉。<br> <img src="https://images2.imgbox.com/77/bc/F6fWRqva_o.png" alt="在这里插入图片描述"><br> 注意：必须要有打包插件（插件作用：打一个可以独立运行的jar包）<br> <img src="https://images2.imgbox.com/20/13/zUSuNAaf_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="BootLunix_10"></a>二、Boot工程快速启动（Lunix版）</h2> 
<p><strong>前提：</strong><br> mysql安装在/root下，由root用户启动<br> tomcat安装在/root下，由普通用户tomcat启动<br> 将打包好的文件上传到Linux中：<br> <img src="https://images2.imgbox.com/2d/c2/xEZxOXIa_o.png" alt="在这里插入图片描述"><br> 输入指令启动就OK：<br> <img src="https://images2.imgbox.com/0f/9f/JRHaMjTE_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/dd/60/mNJ3sYTi_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_19"></a>三、配置高级</h2> 
<h4><a id="1_20"></a>1.设置临时属性</h4> 
<p>如果要设置临时属性：命令行设置的临时属性高于配置文件。<br> <img src="https://images2.imgbox.com/82/a4/H5LaYvie_o.png" alt="在这里插入图片描述"><br> 要设置多个临时属性，用空格分开：<br> <img src="https://images2.imgbox.com/f5/21/WPbwtDu1_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_25"></a>2.如何在开发环境中设置临时属性</h4> 
<p>配置方式1：<br> <img src="https://images2.imgbox.com/a9/f7/PsseLSXz_o.png" alt="在这里插入图片描述"><br> 是传到args中的<br> <img src="https://images2.imgbox.com/c1/84/bAUIJRwl_o.png" alt="在这里插入图片描述"><br> 方式二：上面看到是传入args中，我们就可以直接在代码中设置<br> <img src="https://images2.imgbox.com/9b/83/0Sde8ebg_o.png" alt="在这里插入图片描述"><br> 为了安全，也可以不要这个参数，外部人员就在命令行改不了了，之能用配置文件的。<br> <img src="https://images2.imgbox.com/fb/47/QsVjhSFz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="34_34"></a>3.配置文件4级分类</h4> 
<p>在IDEA中提供两个级别的配置文件，一个是程序员使用的，一个是做程序总控的。<br> 这两个文件合作配置。高级别的配置文件覆盖低级别的配置文件。<br> <img src="https://images2.imgbox.com/11/a0/KLynEO8d_o.png" alt="在这里插入图片描述"><br> 在打包好的目录里还有两个配置文件。<br> <img src="https://images2.imgbox.com/83/49/00I9UTvb_o.png" alt="在这里插入图片描述"><br> 总结：SpringBoot中4级配置文件<br> 1级：file：config/application.yml 最高<br> 2级：file：application.yml<br> 3级：classpath：config/appliction.yml<br> 4级：classpath：application.yml 最低<br> 作用：<br> 1级和2级留作系统打包后设置通用属性，1级常用于运维经理进行线上整体项目部署方案调控。<br> 3级和4级用于系统开发阶段设置通用属性，3级常用于项目经理进行整体项目属性调控。</p> 
<h4><a id="4_49"></a>4.自定义配置文件</h4> 
<p>1.通过启动参数加载配置文件（无序书写配置文件扩展名）<br> <img src="https://images2.imgbox.com/dc/30/KsHDKYhr_o.png" alt="在这里插入图片描述"><br> 2.通过启动参数加载指定文件路径下的配置文件时可以加载多个配置<br> <img src="https://images2.imgbox.com/65/24/JxkL5sYd_o.png" alt="在这里插入图片描述"><br> 后面的配置文件生效了。<br> <img src="https://images2.imgbox.com/6b/50/88Jn0J7x_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>重要说明：<br> 单服务器项目：使用自定义配置文件需求较低<br> 多服务器项目：使用自定义配置文件需求较高，将所有配置放置在一个目录中，统一管理<br> 基于SpringCloud技术，所有的服务器将不再设置配置文件，而是通过配置中心进行设定，动态加载配置信息</p> 
</blockquote> 
<h2><a id="_63"></a>四、多环境开发</h2> 
<h4><a id="1yml_64"></a>1.yml版本</h4> 
<p>多环境开发需要设置若干常用环境，例如开发、生产、测试环境<br> yaml格式中设置多环境使用—区分环境设置边界<br> 每种环境的区别在于加载的配置属性不同<br> 启用某种环境时需要指定启动时使用该环境</p> 
<pre><code class="prism language-xml">#应用环境
#公共配置
spring:
  profiles:
    active: pro

---
#设置环境
#生产环境
spring:
  config:
    activate:
      on-profile: pro
server:
  port: 80

---
#开发环境
spring:
  config:
    activate:
      on-profile: dex
server:
  port: 81

---
#测试环境
spring:
  config:
    activate:
      on-profile: test
server:
  port: 82

</code></pre> 
<p>会有暴露配置的问题？把配置文件分开<br> 主配置文件写要应用的环境，和共同配置<br> <img src="https://images2.imgbox.com/57/55/ZhJobvSO_o.png" alt="在这里插入图片描述"><br> 写各自的配置<br> <img src="https://images2.imgbox.com/34/b3/at8cAmsn_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2properties_113"></a>2.properties版本</h4> 
<p>properties版本只有多文件版本。<br> 主配置文件写要使用的环境，共同的配置<br> <img src="https://images2.imgbox.com/3b/f7/H03MZtiG_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/79/ea/oHYgjcEO_o.png" alt="在这里插入图片描述"><br> 书写技巧：<br> 根据功能对配置文件中的信息进行拆分，并制作成独立的配置文件。<br> 通过include属性在激活指定环境的情况下，同时对多个环境进行加载使其生效，多个环境间使用逗号分隔。<br> 注意：后配置的先加载。当主环境dev与其他环境有相同属性时，主环境属性生效；其他环境中有相同属性时，最后加载的环境属性生效。<br> <img src="https://images2.imgbox.com/10/9b/KSbi4oyV_o.png" alt="在这里插入图片描述"><br> group属性：<br> <img src="https://images2.imgbox.com/ac/16/Hd0rgRNA_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_125"></a>3.多环境开发配置</h4> 
<p>springboot是基于maven运行的，maven的配置高于springboot。<br> 如何用maven控制boot的环境？<br> 在pom.xml文件中设置：</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!--设置多环境--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>env_dev<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile.active</span><span class="token punctuation">&gt;</span></span>dev<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile.active</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>env_pro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile.active</span><span class="token punctuation">&gt;</span></span>pro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile.active</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>在主配置文件中引用：相当于在pom.xml中设置一个变量，在配置文件中用变量名引用一下<br> <img src="https://images2.imgbox.com/1f/ab/q8WZfnsL_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_153"></a>五、日志</h2> 
<p>日志用于记录开发调试与运维过程消息；<br> 日志的级别共6种，通常使用4种即可，分别是DEBUG，INFO，WARN，ERROR；<br> 可以通过日志组或代码包的形式进行日志显示级别的控制。</p> 
<h4><a id="1_157"></a>1.日志基础</h4> 
<p>在引导类中添加：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/books"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//1.创建记录日志的对象</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log<span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">BookController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@GetMapping</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"springboot is running..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//记录日志</span>

        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"debug..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//启动的默认级别</span>
        log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"warn..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"error..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">"springboot is running..."</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在浏览器刷新一下，看控制台：<br> <img src="https://images2.imgbox.com/ce/b6/ZOZTkRQu_o.png" alt="在这里插入图片描述"><br> 只显示了三行记录，因为默认启动的是info级别的。<br> 在配置文件中把debug模式开启：<br> <img src="https://images2.imgbox.com/e3/8f/5nz6dmEd_o.png" alt="在这里插入图片描述"><br> 或者这样设置日志级别：<br> <img src="https://images2.imgbox.com/0a/6d/c2Cr95Fi_o.png" alt="在这里插入图片描述"><br> 信息多了很多：<br> <img src="https://images2.imgbox.com/22/18/6j4hou2C_o.png" alt="在这里插入图片描述"><br> 设置某个包的日志：（代码包）</p> 
<p><img src="https://images2.imgbox.com/d0/3f/oH6Pzrek_o.png" alt="在这里插入图片描述"><br> 设置某个组的日志：（日志组）<br> <img src="https://images2.imgbox.com/d7/c9/iotpQ1Ai_o.png" alt="在这里插入图片描述"><br> 优化日志对象创建代码：使用lombok提供的注解@Slf4j简化开发，减少日志的声明操作</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/books"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//1.创建记录日志的对象</span>
<span class="token comment">//    private static final Logger log= LoggerFactory.getLogger(BookController.class);</span>
    <span class="token annotation punctuation">@GetMapping</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"springboot is running..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//记录日志</span>

        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"debug..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//启动的默认级别</span>
        log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"warn..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"error..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">"springboot is running..."</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="2_218"></a>2.日志输出格式控制</h4> 
<p><img src="https://images2.imgbox.com/ad/39/FAUHNDO4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/68/ed/A6AYwyE1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1e/ab/1yjEtVDY_o.png" alt="在这里插入图片描述"><br> 设置一个和原版差不多的日志格式：<br> <img src="https://images2.imgbox.com/9c/76/L5S45jO0_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_224"></a>3.日志文件</h4> 
<p>如何把日志记到文件里。<br> <img src="https://images2.imgbox.com/65/a2/tkNMuTNo_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2adc20133e2d40ae1e26afd668fdfe89/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java Spring boot 使用SSH连接Mysql</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8ac1d0ba9f4184232b2728b308a4b8ad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">javascript-基础知识点总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>