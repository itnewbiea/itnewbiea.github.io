<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React 实现拖放功能 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="React 实现拖放功能" />
<meta property="og:description" content="介绍 本篇文章将会使用react实现简单拖放功能。
样例 布局拖放 LayoutResize.js import React, {useState} from &#34;react&#34;; import { Button } from &#34;antd&#34;; import &#34;./LayoutResize.css&#34;; export const LayoutResize = () =&gt; { const [state,setState] = useState({ dragging: false, startPageX: 0, siderWidth: 150, }) // 鼠标点击事件 const handleMouseDown = evt =&gt; { setState({ ...state, dragging: true, startPageX: evt.pageX, }); }; // 鼠标抬起事件 const handleMouseUp = () =&gt; { setState({ ...state, dragging: false, }); }; // 鼠标移动事件 const handleMouseMove = evt =&gt; { if (!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/d40111b954a94b5b73d246a12512ebd1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-06T20:40:53+08:00" />
<meta property="article:modified_time" content="2024-01-06T20:40:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">React 实现拖放功能</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>介绍</h2> 
<p>        本篇文章将会使用react实现简单拖放功能。</p> 
<h2>样例</h2> 
<h3>布局拖放</h3> 
<h4>LayoutResize.js</h4> 
<pre><code class="language-javascript">import React, {useState} from "react";
import { Button } from "antd";
import "./LayoutResize.css";

export const LayoutResize = () =&gt; {
    const [state,setState] = useState({
        dragging: false,
        startPageX: 0,
        siderWidth: 150,
    })

    // 鼠标点击事件
    const handleMouseDown = evt =&gt; {

        setState({
            ...state,
            dragging: true,
            startPageX: evt.pageX,
        });
    };

    // 鼠标抬起事件
    const handleMouseUp = () =&gt; {

        setState({
            ...state,
            dragging: false,
        });
    };

    // 鼠标移动事件
    const handleMouseMove = evt =&gt; {

        if (!state.dragging){ // 没有拖拽直接返回
            return;
        }
        console.log('move')
        let siderWidth = state.siderWidth + evt.pageX - state.startPageX;
        if (siderWidth &lt; 20 || siderWidth &gt; 300) {
            return;
        }
        setState({
            ...state,
            siderWidth,
            startPageX: evt.pageX,
        });
    };
        const pxWidth = `${state.siderWidth}px`;
        return (
            &lt;div className="app-layout-resize" style={<!-- -->{ paddingLeft: pxWidth }}&gt;
                &lt;div className="header"&gt;Header&lt;/div&gt;
                &lt;div className="sider" style={<!-- -->{ width: pxWidth }}&gt;
                    Sider
                &lt;/div&gt;
                &lt;div className="content" style={<!-- -->{ left: pxWidth }}&gt;
                    Content
                &lt;/div&gt;
                &lt;div className="footer" style={<!-- -->{ left: pxWidth }}&gt;
                    Footer
                &lt;/div&gt;
                &lt;div
                    className="sider-resizer"
                    style={<!-- -->{ left: pxWidth }}
                    onMouseDown={handleMouseDown}
                    onMouseMove={handleMouseMove}
                    onMouseUp={handleMouseUp}
                /&gt;
            &lt;/div&gt;
        );

}
</code></pre> 
<p>        LayOutResize组件是一个实现侧边栏拖放功能得布局组件。组件由左侧的sider，右侧的header，content，header，以及透明的sider-resizer。</p> 
<p>        sider-resizer做到可以滑动，基于onMouseDown，onMouseMove，onMouseup方法实现，动态修改左侧sider的大小来实现。</p> 
<h4>LayoutResize.css</h4> 
<pre><code class="language-css">.app-layout-resize {
    width: 500px;
    height: 400px;
    position: relative;
    background-color: #eee;
    text-align: center;
    padding-left: 150px;
    line-height: 60px;
}

.app-layout-resize .header {
    border-bottom: 2px solid #fff;
}
.app-layout-resize .content {
    position: absolute;
    bottom: 60px;
    top: 60px;
    left: 0;
    right: 0;
}
.app-layout-resize .sider {
    width: 150px;
    position: absolute;
    border-right: 2px solid #fff;
    top: 0;
    left: 0;
    bottom: 0;
}
.app-layout-resize .footer {
    border-top: 2px solid #fff;
    bottom: 0;
    left: 150px;
    right: 0;
    position: absolute;
}

.app-layout-resize .sider-resizer {
    position: absolute;
    left: 148px;
    width: 6px;
    top: 0;
    bottom: 0;
    cursor: col-resize;
}


</code></pre> 
<h4>实现效果</h4> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/99/22/3aozhUZZ_o.gif"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/370372e41d3ad2eacccdc1938de6ca05/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">c语言版：数据结构（时间复杂度，空间复杂度，练习）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/62e15cbbb0f3dde9d53e9ef002854496/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">虚析构函数（C&#43;&#43;）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>