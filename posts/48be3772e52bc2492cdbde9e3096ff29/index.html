<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【树莓派】 Qt 界面 点灯 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【树莓派】 Qt 界面 点灯" />
<meta property="og:description" content="文章目录 一、安装QT5和QT Creator二、编写控制代码三、运行效果参考文档： 一、安装QT5和QT Creator 这里只安装QT基础的部分，还有其他模块。
// 安装QT的基本库 sudo apt-get install qt5-default // 安装QT的IDE sudo apt-get install qtcreator //新的树莓派如4B， 需更新wiringpi(控制IO库) cd /tmp wget https://project-downloads.drogon.net/wiringpi-latest.deb sudo dpkg -i wiringpi-latest.deb 验证wiringpi 安装是否成功
执行gpio readall
可以看到很直观的看到IO的IO模式,是输出还是输入。
另外编程时需要使用的 IO端口号也列出来的，这里使用wiringpi 控制的话 关注wpi那列的端口，和python使用RPi库控制IO编号不一样。
二、编写控制代码 1、新建工程
2、选择QWidget
3、pro工程添加LIBS &#43;= -lwiringPi 4、widget.ui添加两个按钮 改名为b1,b2
右键按钮 转到槽
这里都选clicked()
这样就可以在两个clicked 加入点亮LED和熄灭LED的代码，就可以实现按钮控制了
5、widget.cpp 写入完整的IO控制代码
这里我们使用pin12，也就是对应wpi 1的口
widget.cpp 完整代码：
#include &#34;widget.h&#34; #include &#34;ui_widget.h&#34; #include &#34;wiringPi.h&#34;//添加头文件 Widget::Widget(QWidget *parent) : QWidget(parent), ui(new Ui::Widget) { ui-&gt;setupUi(this); wiringPiSetup();//初始化 pinMode(1,OUTPUT); //PIN12 use &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/48be3772e52bc2492cdbde9e3096ff29/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-06T00:32:14+08:00" />
<meta property="article:modified_time" content="2022-05-06T00:32:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【树莓派】 Qt 界面 点灯</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#QT5QT_Creator_3" rel="nofollow">一、安装QT5和QT Creator</a></li><li><a href="#_22" rel="nofollow">二、编写控制代码</a></li><li><a href="#_112" rel="nofollow">三、运行效果</a></li><li><a href="#_125" rel="nofollow">参考文档：</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="QT5QT_Creator_3"></a>一、安装QT5和QT Creator</h3> 
<p>这里只安装QT基础的部分，还有其他模块。</p> 
<pre><code class="prism language-bash">// 安装QT的基本库
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> qt5-default        
// 安装QT的IDE
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> qtcreator
//新的树莓派如4B， 需更新wiringpi<span class="token punctuation">(</span>控制IO库<span class="token punctuation">)</span> 
<span class="token builtin class-name">cd</span> /tmp
<span class="token function">wget</span> https://project-downloads.drogon.net/wiringpi-latest.deb
<span class="token function">sudo</span> dpkg -i wiringpi-latest.deb
</code></pre> 
<p>验证wiringpi 安装是否成功<br> 执行gpio readall<br> <img src="https://images2.imgbox.com/bf/51/uESGnQ6h_o.png" alt="在这里插入图片描述"><br> 可以看到很直观的看到IO的IO模式,是输出还是输入。<br> 另外编程时需要使用的 IO端口号也列出来的，这里使用wiringpi 控制的话 关注wpi那列的端口，和python使用RPi库控制IO编号不一样。</p> 
<h3><a id="_22"></a>二、编写控制代码</h3> 
<p>1、新建工程<br> <img src="https://images2.imgbox.com/b1/eb/dTHT89f4_o.png" alt="在这里插入图片描述"><br> 2、选择QWidget<br> <img src="https://images2.imgbox.com/4a/3a/6aRztrUK_o.png" alt="在这里插入图片描述"><br> 3、pro工程添加<code>LIBS += -lwiringPi </code><img src="https://images2.imgbox.com/83/3b/aMx1nqPN_o.png" alt="在这里插入图片描述"></p> 
<p>4、widget.ui添加两个按钮 改名为b1,b2<br> <img src="https://images2.imgbox.com/e1/f0/mdfeUIp8_o.png" alt="在这里插入图片描述"><br> 右键按钮 转到槽<br> <img src="https://images2.imgbox.com/fc/73/WeuMCtlE_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/62/26/sIUaLF99_o.png" alt="在这里插入图片描述"><br> 这里都选clicked()</p> 
<p>这样就可以在两个clicked 加入点亮LED和熄灭LED的代码，就可以实现按钮控制了</p> 
<p><img src="https://images2.imgbox.com/36/93/zuz9BrGV_o.png" alt="在这里插入图片描述"></p> 
<p>5、widget.cpp 写入完整的IO控制代码</p> 
<p>这里我们使用pin12，也就是对应wpi 1的口</p> 
<p><strong>widget.cpp 完整代码：</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"widget.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_widget.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"wiringPi.h"</span><span class="token comment">//添加头文件</span></span>

Widget<span class="token operator">::</span><span class="token function">Widget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span>
    <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">ui</span><span class="token punctuation">(</span>new Ui<span class="token operator">::</span>Widget<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span><span class="token function">setupUi</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">wiringPiSetup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//初始化</span>

    <span class="token function">pinMode</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//PIN12 use "gpio readall" get status</span>

<span class="token punctuation">}</span>

Widget<span class="token operator">::</span><span class="token operator">~</span><span class="token function">Widget</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    delete ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> Widget<span class="token operator">::</span><span class="token function">on_b1_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">digitalWrite</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>HIGH<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> Widget<span class="token operator">::</span><span class="token function">on_b2_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">digitalWrite</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><strong>widget.h 完整代码</strong> （这里添加槽函数是刚才转到槽自动处理的，不需要手动修改）</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">WIDGET_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">WIDGET_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>

namespace Ui <span class="token punctuation">{<!-- --></span>
class Widget<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

class Widget <span class="token operator">:</span> public QWidget
<span class="token punctuation">{<!-- --></span>
    Q_OBJECT

public<span class="token operator">:</span>
    explicit <span class="token function">Widget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> nullptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">Widget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

private slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">on_b1_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_b2_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

private<span class="token operator">:</span>
    Ui<span class="token operator">::</span>Widget <span class="token operator">*</span>ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// WIDGET_H</span></span>

</code></pre> 
<h3><a id="_112"></a>三、运行效果</h3> 
<p>点击运行<br> <img src="https://images2.imgbox.com/a6/b6/sV7c0evL_o.png" alt="在这里插入图片描述"><br> 编译没有报错就是OK</p> 
<p>可以看到已经生成了可执行文件<br> <img src="https://images2.imgbox.com/dc/36/m3pkjJxx_o.png" alt="在这里插入图片描述"><br> 界面如图：<br> <img src="https://images2.imgbox.com/d2/c2/DrIy1JxT_o.png" alt="在这里插入图片描述"><br> 点击ON和OFF,灯实现了亮灭，实现了功能，实物这里就不展示了， 偷懒，嘻嘻。</p> 
<p><strong>总结</strong>：这里只是简单展示了一下树莓派Qt编程，可能看的云里雾里的，学习Qt还是要系统性的学，PC端也可以学，树莓派下，Ctrl +Shift +C和Ctrl +Shift +V 才能复制黏贴文本，着实不习惯。另外提一句 <em><strong>怎么这里wiringPI的代码一股Arduino的味道</strong></em> 一v一</p> 
<h3><a id="_125"></a>参考文档：</h3> 
<p><a href="https://blog.csdn.net/xiaolintyd/article/details/53086747?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_paycolumn_v3&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_paycolumn_v3&amp;utm_relevant_index=2">树莓派3QT+wiringPI控制GPIO输入和输出</a><br> <a href="https://dreamlife.blog.csdn.net/article/details/123507972?spm=1001.2014.3001.5506" rel="nofollow">树莓派系列-6-Qt控制树莓派GPIO(3B V1.2)</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/58a80bdb510533d30daf97d9c5343bfa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ASP.NET Web程序设计——数据绑定控件详细介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/502f06ab6cd0cee9d2311cec73366153/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【腾讯云代码分析】四月上新&#43;新功能前瞻</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>