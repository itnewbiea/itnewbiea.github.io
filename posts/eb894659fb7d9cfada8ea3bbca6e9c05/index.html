<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Gtk透明窗口全攻略 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Gtk透明窗口全攻略" />
<meta property="og:description" content="引用自： http://xy0811.spaces.live.com/blog/cns!F8AECD2A067A6B17!1256.entry
Gtk透明窗口全攻略 如图所示，左边是普通的 ubuntu 桌面，右边是我建立的三个 gtk 特殊窗口，其中包含了：异形窗口（上），透明窗体（中），不同区域不同透明度的窗口（下）。基本包括了各种特殊窗口的需求，而复杂程度和依赖工具又各有不同，下面是实现的代码及说明 1． 环境说明 ubuntu 8.04 系统，安装 glib-dev 和 cairo 包 2． 异形窗口 a) 原理 异形窗口利用蒙板（ mask ）实现，蒙板的数据从图片获得，每一点只有透明和不透明两种状态，不透明区域显示该窗口的背景，透明区域显示其后桌面或其它应用 b) 效果 可实现异形窗口，但不支持半透明，所以弧形边缘看起来不够平滑。 c) 依赖 gtk 的基本功能，一般 gtk 都可以支持 #include &lt;gtk/gtk.h&gt; int main(int argc, char *argv[]) { GtkWidget *window = NULL; GdkPixbuf *pixbuf = NULL; GdkBitmap *bitmap = NULL; GdkPixmap *pixmap = NULL; gtk_init(&amp;argc, &amp;argv); window = gtk_window_new(GTK_WINDOW_TOPLEVEL); gtk_window_set_decorated(GTK_WINDOW(window), FALSE); // 设置无边框 gtk_widget_set_app_paintable(window, TRUE); gtk_widget_realize(window); pixbuf = gdk_pixbuf_new_from_file(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/eb894659fb7d9cfada8ea3bbca6e9c05/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-11-18T23:10:53+08:00" />
<meta property="article:modified_time" content="2009-11-18T23:10:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Gtk透明窗口全攻略</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h5 id="subjcns!F8AECD2A067A6B17!1256" class="beTitle">引用自：</h5> 
<p>http://xy0811.spaces.live.com/blog/cns!F8AECD2A067A6B17!1256.entry</p> 
<h5 class="beTitle">Gtk透明窗口全攻略</h5> 
<div id="msgcns!F8AECD2A067A6B17!1256" class="bvMsg"> 
 <p><span style="font-size:small;"><span style="color:#000000;"><span lang="en-us"><span style="font-family:'Times New Roman';"> <a href="https://qgd1mg.blu.livefilestore.com/y1mpQauNCPCdbG2fr_I-IPWjbz--lEp56rOt6nokyZyHXXqkbZmhVgSynFgY2at_zV87rizX9MzJCtBU7dyKv2kLXDWcbHJmKmCxo6gge4WdTc46NYN3Z8bkHpBiXnEjULy6-5rCvRKIuc/result.jpg" rel="nofollow"><img src="https://images2.imgbox.com/8e/e2/zJp0RoFe_o.jpg" alt=""></a>       </span>  </span> </span> </span> </p> 
 <p><span style="font-size:small;"><span style="color:#000000;">如图所示，左边是普通的 <span lang="en-us"><span style="font-family:'Times New Roman';">ubuntu</span> </span> 桌面，右边是我建立的三个 <span lang="en-us"><span style="font-family:'Times New Roman';">gtk</span> </span> 特殊窗口，其中包含了：异形窗口（上），透明窗体（中），不同区域不同透明度的窗口（下）。基本包括了各种特殊窗口的需求，而复杂程度和依赖工具又各有不同，下面是实现的代码及说明 </span> </span> </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';color:#000000;font-size:small;"> </span> </span> </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">1．</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">  </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">环境说明</span>  <span lang="en-us"><br><span style="font-family:'Times New Roman';color:#000000;font-size:small;">ubuntu 8.04</span> </span> <span style="font-size:small;"><span style="color:#000000;">系统，安装 <span lang="en-us"><span style="font-family:'Times New Roman';">glib-dev</span> </span> 和 <span lang="en-us"><span style="font-family:'Times New Roman';">cairo</span> </span> 包 </span> </span> </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">2．</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">  </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">异形窗口</span>  </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">a)</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">         </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">原理</span>  <span lang="en-us"><br></span> <span style="font-size:small;"><span style="color:#000000;">异形窗口利用蒙板（ <span lang="en-us"><span style="font-family:'Times New Roman';">mask</span> </span> ）实现，蒙板的数据从图片获得，每一点只有透明和不透明两种状态，不透明区域显示该窗口的背景，透明区域显示其后桌面或其它应用 </span> </span> </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">b)</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">        </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">效果</span>  <span lang="en-us"><br></span> <span style="color:#000000;font-size:small;">可实现异形窗口，但不支持半透明，所以弧形边缘看起来不够平滑。</span>  </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">c)</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">        </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">依赖</span>  <span lang="en-us"><br><span style="font-family:'Times New Roman';color:#000000;font-size:small;">gtk</span> </span> <span style="font-size:small;"><span style="color:#000000;">的基本功能，一般 <span lang="en-us"><span style="font-family:'Times New Roman';">gtk</span> </span> 都可以支持 </span> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">#include &lt;gtk/gtk.h&gt;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">int main(int argc, char *argv[])</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">{<!-- --></span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    GtkWidget *window = NULL;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    GdkPixbuf *pixbuf = NULL;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    GdkBitmap *bitmap = NULL;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    GdkPixmap *pixmap = NULL;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_init(&amp;argc, &amp;argv);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_window_set_decorated(GTK_WINDOW(window), FALSE);        </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// </span> <span style="font-size:9pt;">设置无边框</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_widget_set_app_paintable(window, TRUE);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_widget_realize(window);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    pixbuf = gdk_pixbuf_new_from_file("demo1.png", NULL);        </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// gdk</span> <span style="font-size:9pt;">函数读取 </span> <span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">png</span> <span style="font-size:9pt;">文件</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gdk_pixbuf_render_pixmap_and_mask(pixbuf, &amp;pixmap, &amp;bitmap, 128);     </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// alpha</span> <span style="font-size:9pt;">小于 </span> <span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">128</span> <span style="font-size:9pt;">认为透明</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_widget_shape_combine_mask(window, bitmap, 0, 0);           </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// </span> <span style="font-size:9pt;">设置透明蒙板</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gdk_window_set_back_pixmap(window-&gt;window, pixmap, FALSE);           </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// </span> <span style="font-size:9pt;">设置窗口背景</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    g_object_unref(pixbuf);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    g_object_unref(bitmap);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    g_object_unref(pixmap);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_widget_show_all(window);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_main();</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    return TRUE;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">}</span> </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">3．</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">  </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">透明窗体</span>  </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">a)</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">         </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">原理</span>  <span lang="en-us"><br></span> <span style="font-size:small;"><span style="color:#000000;">使用函数 <span lang="en-us"><span style="font-family:'Times New Roman';">gtk_window_set_opacity</span> </span> 设置整个窗体的透明度 </span> </span> </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">b)</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">        </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">效果</span>  <span lang="en-us"><br></span> <span style="color:#000000;font-size:small;">窗体各处透明度相同</span>  </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">c)</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">        </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">依赖</span>  <span lang="en-us"><br><span style="font-family:'Times New Roman';color:#000000;font-size:small;">gtk_window_set_opacity</span> </span> <span style="font-size:small;"><span style="color:#000000;">函数只能在 <span lang="en-us"><span style="font-family:'Times New Roman';">gtk-2.12</span> </span> 以上版本中使用 </span> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">#include &lt;gtk/gtk.h&gt;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">int main(int argc, char *argv[])</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">{<!-- --></span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    GtkWidget *window = NULL;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_init(&amp;argc, &amp;argv);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_window_set_opacity(GTK_WINDOW(window), 0.7);        </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// </span> <span style="font-size:9pt;">设置透明度函数</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_widget_show_all(window);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_main();</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    return TRUE;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">}</span> </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">4．</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">  </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">不同区域不同透明度的窗口</span>  </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">a)</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">         </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">原理</span>  <span lang="en-us"><br></span> <span style="font-size:small;"><span style="color:#000000;">利用 <span lang="en-us"><span style="font-family:'Times New Roman';">cairo</span> </span> 库与 <span lang="en-us"><span style="font-family:'Times New Roman';">gtk</span> </span> 相结合，在曝光函数中用 <span lang="en-us"><span style="font-family:'Times New Roman';">cairo</span> </span> 向窗口区域绘图，每一点可以设置不同的透明度，但相对复杂，依赖更多的库 </span> </span> </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">b)</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">        </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">效果</span>  <span lang="en-us"><br></span> <span style="color:#000000;font-size:small;">可设置窗口各个点不同的透明度，过度平滑，效果最好</span>  </p> 
 <p><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="color:#000000;"><span style="font-size:small;">c)</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">        </span> </span> </span>  </span> <span style="color:#000000;font-size:small;">依赖</span>  <span lang="en-us"><br><span style="font-family:'Times New Roman';color:#000000;font-size:small;">gtk</span> </span> <span style="font-size:small;"><span style="color:#000000;">及相应版本的 <span lang="en-us"><span style="font-family:'Times New Roman';">cairo</span> </span> </span> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">#include &lt;gtk/gtk.h&gt;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">cairo_surface_t *image = NULL; </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">static gboolean on_window_expose_event(GtkWidget * widget,              </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// </span> <span style="font-size:9pt;">曝光事件</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">       GdkEventExpose * event, gpointer data)</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">{<!-- --></span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    cairo_t *cr;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    cr = gdk_cairo_create(widget-&gt;window);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    cairo_set_source_surface(cr, image, 0, 0);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    cairo_set_operator(cr, CAIRO_OPERATOR_SOURCE);           </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// </span> <span style="font-size:9pt;">重要</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    cairo_paint(cr);    </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// </span> <span style="font-size:9pt;">绘图</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    cairo_destroy(cr);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    return FALSE;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">}</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">gint main(gint argc, gchar ** argv)</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">{<!-- --></span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    GtkWidget *window;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    GdkScreen *screen;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    GdkColormap *colormap;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_init(&amp;argc, &amp;argv);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    image = cairo_image_surface_create_from_png("demo3.png");              </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// cairo</span> <span style="font-size:9pt;">函数读取 </span> <span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">png</span> <span style="font-size:9pt;">文件</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_window_set_decorated(GTK_WINDOW(window), FALSE);        </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// </span> <span style="font-size:9pt;">设置无边框</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_widget_set_app_paintable(window, TRUE);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_window_resize(GTK_WINDOW(window), 250, 250);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    g_signal_connect(G_OBJECT(window), "expose-event",</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">                G_CALLBACK(on_window_expose_event), NULL);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    screen = gtk_widget_get_screen(window);        </span> <span style="color:#000000;"><span style="font-size:9pt;font-family:'Times New Roman';" lang="en-us">// </span> <span style="font-size:9pt;">重要</span>  </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    colormap = gdk_screen_get_rgba_colormap(screen);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_widget_set_colormap(window, colormap);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us"> </span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_widget_show_all(window);</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    gtk_main();</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">    return TRUE;</span> </p> 
 <p><span style="font-size:9pt;color:#0000FF;font-family:'Times New Roman';" lang="en-us">}</span> </p> 
 <p><span style="color:#000000;"><span lang="en-us"><span style="font-family:'Times New Roman';"><span style="font-size:small;">5．</span> <span style="font-family:'Times New Roman';font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;">  </span> </span>  </span> <span style="font-size:small;">参考</span>  </span> <span lang="en-us"><br></span> <span style="font-size:9pt;" lang="en-us"><a href="http://cid-f8aecd2a067a6b17.skydrive.live.com/browse.aspx/.Public?uc=1&amp;isFromRichUpload=1" rel="nofollow"><span style="text-decoration:underline;"><span style="font-family:'Times New Roman';color:#800080;">http://cid-f8aecd2a067a6b17.skydrive.live.com/browse.aspx/.Public?uc=1&amp;isFromRichUpload=1</span> </span> </a> </span> <span lang="en-us"><br></span> <span style="font-size:small;"><span style="color:#000000;">示例代码为 <span lang="en-us"><span style="font-family:'Times New Roman';">gtk_demo.tgz</span> </span> </span> </span> </p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d65a96ce873b785a2e806cee05efa996/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ab,webbench,Siege,http_load,Web Application Stress</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2f8713a579e3ad77c0e86d0046e24d06/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">七各大搜索引擎博客网站免费收录入口地址列表</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>