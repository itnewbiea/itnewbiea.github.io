<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Html5使用history对象history.pushState()和history.replaceState()方法添加和修改浏览历史记录 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Html5使用history对象history.pushState()和history.replaceState()方法添加和修改浏览历史记录" />
<meta property="og:description" content="原文：https://www.studyscript.com/Post/index/id/3018.html?page=3
正文~
概述
浏览器窗口有一个history对象，用来保存浏览历史。
如果当前窗口先后访问了三个网址，那么history对象就包括三项，history.length属性等于3。
history.length // 3
history对象提供了一系列方法，允许在浏览历史之间移动。
back()：移动到上一个访问页面，等同于浏览器的后退键。
forward()：移动到下一个访问页面，等同于浏览器的前进键。
go()：接受一个整数作为参数，移动到该整数指定的页面，比如go(1)相当于forward()，go(-1)相当于back()。
history.back();
history.forward();
history.go(-2);
如果移动的位置超出了访问历史的边界，以上三个方法并不报错，而是默默的失败。
history.go(0)相当于刷新当前页面。
history.go(0);
常见的“返回上一页”链接，代码如下。
document.getElementById(&#39;backLink&#39;).onclick = function () {
window.history.back();
}
注意，返回上一页时，页面通常是从浏览器缓存之中加载，而不是重新要求服务器发送新的网页。
history.pushState()
HTML5为history对象添加了两个新方法，history.pushState()和history.replaceState()，用来在浏览历史中添加和修改记录。
if (!!(window.history &amp;&amp; history.pushState)){
// 支持History API
} else {
// 不支持
}
上面代码可以用来检查，当前浏览器是否支持History API。如果不支持的话，可以考虑使用Polyfill库History.js。
history.pushState方法接受三个参数，依次为：
state：一个与指定网址相关的状态对象，popstate事件触发时，该对象会传入回调函数。如果不需要这个对象，此处可以填null。
title：新页面的标题，但是所有浏览器目前都忽略这个值，因此这里可以填null。
url：新的网址，必须与当前页面处在同一个域。浏览器的地址栏将显示这个网址。
假定当前网址是example.com/1.html，我们使用pushState方法在浏览记录（history对象）中添加一个新记录。
var stateObj = { foo: &#39;bar&#39; };
history.pushState(stateObj, &#39;page 2&#39;, &#39;2.html&#39;);
添加上面这个新记录后，浏览器地址栏立刻显示example.com/2.html，但并不会跳转到2.html，甚至也不会检查2.html是否存在，它只是成为浏览历史中的最新记录。假定这时你访问了google.com，然后点击了倒退按钮，页面的url将显示2.html，但是内容还是原来的1.html。你再点击一次倒退按钮，url将显示1.html，内容不变。
总之，pushState方法不会触发页面刷新，只是导致history对象发生变化，地址栏会有反应。
如果pushState的url参数，设置了一个新的锚点值（即hash），并不会触发hashchange事件。如果设置了一个跨域网址，则会报错。
// 报错
history.pushState(null, null, &#39;https://twitter.com/hello&#39;);
上面代码中，pushState想要插入一个跨域的网址，导致报错。这样设计的目的是，防止恶意代码让用户以为他们是在另一个网站上。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/3f0193e873e53d17928f2857cc271d91/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-03-28T14:27:03+08:00" />
<meta property="article:modified_time" content="2017-03-28T14:27:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Html5使用history对象history.pushState()和history.replaceState()方法添加和修改浏览历史记录</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>原文：https://www.studyscript.com/Post/index/id/3018.html?page=3</p> 
<p>正文~</p> 
<p></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 概述</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 浏览器窗口有一个history对象，用来保存浏览历史。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 如果当前窗口先后访问了三个网址，那么history对象就包括三项，history.length属性等于3。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.length // 3</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history对象提供了一系列方法，允许在浏览历史之间移动。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> back()：移动到上一个访问页面，等同于浏览器的后退键。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> forward()：移动到下一个访问页面，等同于浏览器的前进键。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> go()：接受一个整数作为参数，移动到该整数指定的页面，比如go(1)相当于forward()，go(-1)相当于back()。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.back();</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.forward();</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.go(-2);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 如果移动的位置超出了访问历史的边界，以上三个方法并不报错，而是默默的失败。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.go(0)相当于刷新当前页面。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.go(0);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 常见的“返回上一页”链接，代码如下。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> document.getElementById('backLink').onclick = function () {<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   window.history.back();</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> }</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 注意，返回上一页时，页面通常是从浏览器缓存之中加载，而不是重新要求服务器发送新的网页。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.pushState()</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> HTML5为history对象添加了两个新方法，history.pushState()和history.replaceState()，用来在浏览历史中添加和修改记录。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> if (!!(window.history &amp;&amp; history.pushState)){<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   // 支持History API</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> } else {<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   // 不支持</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> }</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 上面代码可以用来检查，当前浏览器是否支持History API。如果不支持的话，可以考虑使用Polyfill库History.js。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.pushState方法接受三个参数，依次为：</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> state：一个与指定网址相关的状态对象，popstate事件触发时，该对象会传入回调函数。如果不需要这个对象，此处可以填null。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> title：新页面的标题，但是所有浏览器目前都忽略这个值，因此这里可以填null。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> url：新的网址，必须与当前页面处在同一个域。浏览器的地址栏将显示这个网址。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 假定当前网址是example.com/1.html，我们使用pushState方法在浏览记录（history对象）中添加一个新记录。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var stateObj = { foo: 'bar' };</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.pushState(stateObj, 'page 2', '2.html');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 添加上面这个新记录后，浏览器地址栏立刻显示example.com/2.html，但并不会跳转到2.html，甚至也不会检查2.html是否存在，它只是成为浏览历史中的最新记录。假定这时你访问了google.com，然后点击了倒退按钮，页面的url将显示2.html，但是内容还是原来的1.html。你再点击一次倒退按钮，url将显示1.html，内容不变。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 总之，pushState方法不会触发页面刷新，只是导致history对象发生变化，地址栏会有反应。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 如果pushState的url参数，设置了一个新的锚点值（即hash），并不会触发hashchange事件。如果设置了一个跨域网址，则会报错。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // 报错</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.pushState(null, null, 'https://twitter.com/hello');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 上面代码中，pushState想要插入一个跨域的网址，导致报错。这样设计的目的是，防止恶意代码让用户以为他们是在另一个网站上。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.replaceState()</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.replaceState方法的参数与pushState方法一模一样，区别是它修改浏览历史中当前纪录。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 假定当前网页是example.com/example.html。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.pushState({page: 1}, 'title 1', '?page=1');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.pushState({page: 2}, 'title 2', '?page=2');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.replaceState({page: 3}, 'title 3', '?page=3');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.back()</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // url显示为http://example.com/example.html?page=1</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.back()</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // url显示为http://example.com/example.html</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.go(2)</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // url显示为http://example.com/example.html?page=3</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.state属性</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.state属性返回当前页面的state对象。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.pushState({page: 1}, 'title 1', '?page=1');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> history.state</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // { page: 1 }</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> popstate事件</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 每当同一个文档的浏览历史（即history对象）出现变化时，就会触发popstate事件。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 需要注意的是，仅仅调用pushState方法或replaceState方法 ，并不会触发该事件，只有用户点击浏览器倒退按钮和前进按钮，或者使用JavaScript调用back、forward、go方法时才会触发。另外，该事件只针对同一个文档，如果浏览历史的切换，导致加载不同的文档，该事件也不会触发。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 使用的时候，可以为popstate事件指定回调函数。这个回调函数的参数是一个event事件对象，它的state属性指向pushState和replaceState方法为当前URL所提供的状态对象（即这两个方法的第一个参数）。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> window.onpopstate = function (event) {<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   console.log('location: ' + document.location);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   console.log('state: ' + JSON.stringify(event.state));</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> };</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // 或者</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> window.addEventListener('popstate', function(event) {<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   console.log('location: ' + document.location);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   console.log('state: ' + JSON.stringify(event.state));</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> });</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 上面代码中的event.state，就是通过pushState和replaceState方法，为当前URL绑定的state对象。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 这个state对象也可以直接通过history对象读取。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var currentState = history.state;</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 注意，页面第一次加载的时候，在load事件发生后，Chrome和Safari浏览器（Webkit核心）会触发popstate事件，而Firefox和IE浏览器不会。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> URLSearchParams API</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> URLSearchParams API用于处理URL之中的查询字符串，即问号之后的部分。没有部署这个API的浏览器，可以用url-search-params这个垫片库。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var paramsString = 'q=URLUtils.searchParams&amp;topic=api';</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var searchParams = new URLSearchParams(paramsString);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> URLSearchParams有以下方法，用来操作某个参数。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> has()：返回一个布尔值，表示是否具有某个参数</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> get（）：返回指定参数的第一个值</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> getAll()：返回一个数组，成员是指定参数的所有值</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> set()：设置指定参数</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> delete()：删除指定参数</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> append()：在查询字符串之中，追加一个键值对</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> toString()：返回整个查询字符串</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var paramsString = 'q=URLUtils.searchParams&amp;topic=api';</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var searchParams = new URLSearchParams(paramsString);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.has('topic') // true</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.get('topic') // "api"</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.getAll('topic') // ["api"]</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.get('foo') // null，注意Firefox返回空字符串</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.set('foo', 2);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.get('foo') // 2</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.append('topic', 'webdev');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.toString() // "q=URLUtils.searchParams&amp;topic=api&amp;foo=2&amp;topic=webdev"</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.append('foo', 3);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.getAll('foo') // [2, 3]</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.delete('topic');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> searchParams.toString() // "q=URLUtils.searchParams&amp;foo=2&amp;foo=3"</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> URLSearchParams还有三个方法，用来遍历所有参数。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> keys()：遍历所有参数名</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> values()：遍历所有参数值</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> entries()：遍历所有参数的键值对</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 上面三个方法返回的都是Iterator对象。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var searchParams = new URLSearchParams('key1=value1&amp;key2=value2');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> for (var key of searchParams.keys()) {<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   console.log(key);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> }</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // key1</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // key2</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> for (var value of searchParams.values()) {<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   console.log(value);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> }</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // value1</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // value2</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> for (var pair of searchParams.entries()) {<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   console.log(pair[0]+ ', '+ pair[1]);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> }</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // key1, value1</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // key2, value2</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 在Chrome浏览器之中，URLSearchParams实例本身就是Iterator对象，与entries方法返回值相同。所以，可以写成下面的样子。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> for (var p of searchParams) {<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   console.log(p);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> }</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> 下面是一个替换当前URL的例子。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // URL: https://example.com?version=1.0</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var params = new URLSearchParams(location.search.slice(1));</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> params.set('version', 2.0);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> window.history.replaceState({}, '', `${location.pathname}?${params}`);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> // URL: https://example.com?version=2.0</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> URLSearchParams实例可以当作POST数据发送，所有数据都会URL编码。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> let params = new URLSearchParams();</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> params.append('api_key', '1234567890');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> fetch('https://example.com/api', {<!-- --></p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   method: 'POST',</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'>   body: params</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> }).then(...)</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> DOM的a元素节点的searchParams属性，就是一个URLSearchParams实例。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var a = document.createElement('a');</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> a.href = 'https://example.com?filter=api';</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> a.searchParams.get('filter') // "api"</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> URLSearchParams还可以与URL接口结合使用。</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <br style=""> </p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var url = new URL(location);</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> var foo = url.searchParams.get('foo') || 'somedefault';</p> 
<p style='margin-top:1em; margin-bottom:10px; word-wrap:break-word; color:rgb(68,68,67); font-family:Arial,Helvetica,SimSun,"Hiragino Sans GB","Droid Sans Fallback","Microsoft YaHei",sans-serif'> <a target="_blank" href="http://javascript.ruanyifeng.com/bom/history.html" rel="nofollow noopener noreferrer" style="background-color:transparent; color:rgb(244,100,95); outline:0px; word-wrap:break-word">参考网址</a></p> 
<br>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/24d14ab22e62ea201d54c23b623c196b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">后缀自动机详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/71f7b091c50eb0a534b600b4bfdf26e9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【解决】CentOS7 安装 jkd1.8 报错-bash: /usr/local/jdk1.8.0_121/bin/java: /lib/ld-linux.so.2: bad ELF interpr</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>