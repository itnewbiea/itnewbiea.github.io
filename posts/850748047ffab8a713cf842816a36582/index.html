<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>maxon motor 471486电机 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="maxon motor 471486电机" />
<meta property="og:description" content="关于maxon motor 471486电机的探索记录 最近工作遇到了这款maxon motor 471486的电机，记录一下折腾他的成果
电机结构 maxon motor 471486这款电机分为三个部分，分别是齿轮箱，电机与编码器。
要写控制代码主要看种传感器【MR 编码器, M 型, 32 线, 2 通道】
驱动方式与参数 找到该编码器的文档（只有一个目录页……不知道本体在哪……）查看接线引脚
由上图所示，VCC与接地是编码器的电源，VCC范围在2.7~5.5V。电机&#43;与电机（下文称为电机-）引脚为电机的控制引脚，电压只要看电机的文档，这里我给的是5V左右。电机的方向靠电机&#43;与电机-来决定，两边相同电压时就停止，当电压差为正时则正传，负电压是为反转。
正转反转停止停止电机&#43;1011电机-0111 通道A、通道B则为反馈引脚，当电机转动的时候通道AB会产生高低电平变化
所以，使用外部中断即可判断电机转了多少度。当电机停止后，通道A和通道B会保持一种状态，这个需要自己上示波器测量看是低电平还是高电平。
以下附上以上点击的相关代码，希望能帮助到大家
sbit motor_1=P2^6;//电机控制脚1 sbit motor_2=P2^7;//电机控制脚2 sbit motor_feedback=P3^2;//电机脉冲反馈【外部中断，获取】 sbit motor_direction=P3^3;//电机前进后退反馈【1为前进，0为后退】 uint motor_pulse_count=0;//脉冲计数变量 uchar motor_direction_sign=0;//前进后退标志位 /***************************************************************** 函数名	：Motor_Action 函数输入： 返回	：无 函数作用： 电机设置函数，控制电机前进、后退与速度 *******************************************************************/ void Motor_Action(){ switch(motor_direction_sign){ case 1:{//动作-前进 P_SW2 = 0x80;//设置初值 PWM6T1= 0;//在计数值为XX地方输出高电平 PWM6CR= 0x80;//使能PWM0输出 PWM7T1= motor_speed*100&#43;700;//在计数值为XX地方输出高电平 PWM7CR= 0x80;//使能PWM0输出 P_SW2 = 0; }break; case 2:{//动作-后退 P_SW2 = 0x80;//设置初值 PWM6T1= motor_speed*100&#43;700;//在计数值为XX地方输出高电平 PWM6CR= 0x80;//使能PWM0输出 PWM7T1= 0;//在计数值为XX地方输出高电平 PWM7CR= 0x80;//使能PWM0输出 P_SW2 = 0; }break; default :{//动作停止 P_SW2 = 0x80;//设置初值 PWM6T1= 200;//在计数值为XX地方输出高电平 PWM6CR= 0x80;//使能PWM0输出 PWM7T1= 200;//在计数值为XX地方输出高电平 PWM7CR= 0x80;//使能PWM0输出 P_SW2 = 0; } } } /***************************************************************** 函数名	：Motor_One_Action 函数输入：无 返回	：无 函数作用： 电机推针一次【定时器中运行】 *******************************************************************/ void Motor_One_Action(){ unsigned int jjj;//缓存步进数 if(execute_one_motor_operation==1){ motor_direction_sign=1;//开启电机前进 if(motor_pulse_count&gt;5000){//当标志位值1后 motor_direction_sign=0;//停止电机前进 dms&#43;&#43;;if(dms&gt;2000){ttt=1;dms=0;}//计时语句 if(ttt==1){//当ttt暂停标志为置一后，结束一推流程 jjj=motor_pulse_count;//将该次的步进数存入jjj motor_pulse_count=0;//脉冲计数清零，准备下一次计数 Used_pricknum&#43;&#43;;Used_pricknum_sign=1;//更新已打次数 execute_one_motor_operation=0;//结束标志 ttt=0; } } } if(motor_direction==1){ //前进了几步 motor_scope=motor_scope&#43;jjj; }else{ //后退了几步 motor_scope=motor_scope-jjj; } } 以上即是基于STC8A4K16S2A12主控对maxon motor 471486电机的控制代码。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/850748047ffab8a713cf842816a36582/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-26T23:22:02+08:00" />
<meta property="article:modified_time" content="2021-02-26T23:22:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">maxon motor 471486电机</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>关于maxon motor 471486电机的探索记录</h2> 
<p>最近工作遇到了这款maxon motor 471486的电机，记录一下折腾他的成果</p> 
<h3>电机结构</h3> 
<p>maxon motor 471486这款电机分为三个部分，分别是齿轮箱，电机与编码器。</p> 
<p><img alt="" height="254" src="https://images2.imgbox.com/39/1c/XdZQrbwe_o.png" width="768"></p> 
<p>要写控制代码主要看种传感器【MR 编码器, M 型, 32 线, 2 通道】</p> 
<h3>驱动方式与参数</h3> 
<p>找到该编码器的文档（只有一个目录页……不知道本体在哪……）查看接线引脚</p> 
<p><img alt="" height="352" src="https://images2.imgbox.com/e0/b1/wVXG1bWY_o.png" width="592"></p> 
<p>由上图所示，VCC与接地是编码器的电源，VCC范围在2.7~5.5V。电机+与电机（下文称为电机-）引脚为电机的控制引脚，电压只要看电机的文档，这里我给的是5V左右。电机的方向靠电机+与电机-来决定，两边相同电压时就停止，当电压差为正时则正传，负电压是为反转。</p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td> </td><td>正转</td><td>反转</td><td>停止</td><td>停止</td></tr><tr><td>电机+</td><td>1</td><td>0</td><td>1</td><td>1</td></tr><tr><td>电机-</td><td>0</td><td>1</td><td>1</td><td>1</td></tr></tbody></table> 
<p>通道A、通道B则为反馈引脚，当电机转动的时候通道AB会产生高低电平变化</p> 
<p><img alt="" height="362" src="https://images2.imgbox.com/bc/23/8szAHIHJ_o.png" width="412"></p> 
<p>所以，使用外部中断即可判断电机转了多少度。当电机停止后，通道A和通道B会保持一种状态，这个需要自己上示波器测量看是低电平还是高电平。</p> 
<p>以下附上以上点击的相关代码，希望能帮助到大家</p> 
<pre><code class="language-cpp">sbit motor_1=P2^6;//电机控制脚1
sbit motor_2=P2^7;//电机控制脚2
sbit motor_feedback=P3^2;//电机脉冲反馈【外部中断，获取】
sbit motor_direction=P3^3;//电机前进后退反馈【1为前进，0为后退】
uint motor_pulse_count=0;//脉冲计数变量
uchar motor_direction_sign=0;//前进后退标志位</code></pre> 
<pre><code class="language-cpp">/*****************************************************************
函数名	：Motor_Action
函数输入：
返回		：无
函数作用：
		电机设置函数，控制电机前进、后退与速度
*******************************************************************/
void Motor_Action(){
	switch(motor_direction_sign){
		case 1:{//动作-前进
			P_SW2 = 0x80;//设置初值
			
			PWM6T1= 0;//在计数值为XX地方输出高电平
			PWM6CR= 0x80;//使能PWM0输出
			PWM7T1= motor_speed*100+700;//在计数值为XX地方输出高电平
			PWM7CR= 0x80;//使能PWM0输出
			
			P_SW2 = 0; 
		}break;
		case 2:{//动作-后退
			P_SW2 = 0x80;//设置初值
			
			PWM6T1= motor_speed*100+700;//在计数值为XX地方输出高电平
			PWM6CR= 0x80;//使能PWM0输出
			PWM7T1= 0;//在计数值为XX地方输出高电平
			PWM7CR= 0x80;//使能PWM0输出
			
			P_SW2 = 0;
		}break;
		default :{//动作停止
			P_SW2 = 0x80;//设置初值
			
			PWM6T1= 200;//在计数值为XX地方输出高电平
			PWM6CR= 0x80;//使能PWM0输出
			PWM7T1= 200;//在计数值为XX地方输出高电平
			PWM7CR= 0x80;//使能PWM0输出
			
			P_SW2 = 0; 
		}
	}
}</code></pre> 
<pre><code class="language-cpp">/*****************************************************************
函数名	：Motor_One_Action
函数输入：无
返回		：无
函数作用：
	电机推针一次【定时器中运行】
*******************************************************************/
void Motor_One_Action(){
	unsigned int jjj;//缓存步进数
	if(execute_one_motor_operation==1){
		motor_direction_sign=1;//开启电机前进
		if(motor_pulse_count&gt;5000){//当标志位值1后
			
			motor_direction_sign=0;//停止电机前进
			dms++;if(dms&gt;2000){ttt=1;dms=0;}//计时语句
			if(ttt==1){//当ttt暂停标志为置一后，结束一推流程
				jjj=motor_pulse_count;//将该次的步进数存入jjj
				motor_pulse_count=0;//脉冲计数清零，准备下一次计数
				Used_pricknum++;Used_pricknum_sign=1;//更新已打次数
				execute_one_motor_operation=0;//结束标志
				ttt=0;
			}
		}
	}
	if(motor_direction==1){
		//前进了几步
		motor_scope=motor_scope+jjj;
	}else{
		//后退了几步
		motor_scope=motor_scope-jjj;
	}

}</code></pre> 
<p>以上即是基于STC8A4K16S2A12主控对maxon motor 471486电机的控制代码。</p> 
<p>如有错误的地方，烦请纠正，谢谢！</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/72a0d20290e5d2f24dd9c82e5b05c1e6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言程序设计  设计用函数实现模块化程序设计</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b399d93b32c505904ca1e4c938f57732/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java NIO之SocketChannel和ServerSocketChannel</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>