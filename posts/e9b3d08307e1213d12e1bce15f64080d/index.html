<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VUE3 使用百度地图 【点击获取对应坐标】 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VUE3 使用百度地图 【点击获取对应坐标】" />
<meta property="og:description" content="目录
文档
编码
第一步 申请api秘钥
第二步 引入
第三步 创建组件
第四步 使用组件
效果图：
文档 百度地图官方文档
https://lbsyun.baidu.com/index.php?title=jspopularGL/guide/geoloaction
百度地图官方示例
https://lbsyun.baidu.com/jsdemo.htm#aCreateMap
编码 第一步 申请api秘钥 https://lbsyun.baidu.com/index.php?title=jspopular/guide/getkey
第二步 引入 在vue项目的index.html文件中引入
第三步 创建组件 &lt;script lang=&#34;ts&#34;&gt; export default { name: `baidu-map` }; &lt;/script&gt; &lt;script setup lang=&#34;ts&#34;&gt; import { getCurrentInstance, nextTick, onMounted } from &#34;vue&#34;; const { proxy } = getCurrentInstance(); const props = defineProps({ x: { type: Number, default: 113.31071 }, y: { type: Number, default: 23.14828 } }); onMounted(() =&gt; { nextTick(() =&gt; { init(); }); }); const init = async () =&gt; { const BMap = window." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e9b3d08307e1213d12e1bce15f64080d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-20T14:57:35+08:00" />
<meta property="article:modified_time" content="2023-05-20T14:57:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VUE3 使用百度地图 【点击获取对应坐标】</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:40px;"></p> 
<p id="%E6%96%87%E6%A1%A3-toc" style="margin-left:40px;"><a href="#%E6%96%87%E6%A1%A3" rel="nofollow">文档</a></p> 
<p id="%E7%BC%96%E7%A0%81-toc" style="margin-left:40px;"><a href="#%E7%BC%96%E7%A0%81" rel="nofollow">编码</a></p> 
<p id="%E7%AC%AC%E4%B8%80%E6%AD%A5%20%E7%94%B3%E8%AF%B7api%E7%A7%98%E9%92%A5-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%20%E7%94%B3%E8%AF%B7api%E7%A7%98%E9%92%A5" rel="nofollow">第一步 申请api秘钥</a></p> 
<p id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%20%E5%BC%95%E5%85%A5-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%20%E5%BC%95%E5%85%A5" rel="nofollow">第二步 引入</a></p> 
<p id="%C2%A0%E7%AC%AC%E4%B8%89%E6%AD%A5%20%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%C2%A0%E7%AC%AC%E4%B8%89%E6%AD%A5%20%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6" rel="nofollow"> 第三步 创建组件</a></p> 
<p id="%E7%AC%AC%E5%9B%9B%E6%AD%A5%20%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%20%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6" rel="nofollow">第四步 使用组件</a></p> 
<p id="%E6%95%88%E6%9E%9C%E5%9B%BE%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%E6%95%88%E6%9E%9C%E5%9B%BE%EF%BC%9A" rel="nofollow">效果图：</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E6%96%87%E6%A1%A3">文档</h3> 
<p>百度地图官方文档</p> 
<p><a class="link-info" href="https://lbsyun.baidu.com/index.php?title=jspopularGL/guide/geoloaction" rel="nofollow" title="https://lbsyun.baidu.com/index.php?title=jspopularGL/guide/geoloaction">https://lbsyun.baidu.com/index.php?title=jspopularGL/guide/geoloaction</a></p> 
<p>百度地图官方示例</p> 
<p><a class="link-info" href="https://lbsyun.baidu.com/jsdemo.htm#aCreateMap" rel="nofollow" title="https://lbsyun.baidu.com/jsdemo.htm#aCreateMap">https://lbsyun.baidu.com/jsdemo.htm#aCreateMap</a></p> 
<p></p> 
<h3 id="%E7%BC%96%E7%A0%81">编码</h3> 
<h4 id="%E7%AC%AC%E4%B8%80%E6%AD%A5%20%E7%94%B3%E8%AF%B7api%E7%A7%98%E9%92%A5">第一步 申请api秘钥</h4> 
<p><a class="link-info" href="https://lbsyun.baidu.com/index.php?title=jspopular/guide/getkey" rel="nofollow" title="https://lbsyun.baidu.com/index.php?title=jspopular/guide/getkey">https://lbsyun.baidu.com/index.php?title=jspopular/guide/getkey</a></p> 
<p></p> 
<h4 id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%20%E5%BC%95%E5%85%A5">第二步 引入</h4> 
<p>在vue项目的index.html文件中引入</p> 
<p><img alt="" height="472" src="https://images2.imgbox.com/94/ad/XQFg3zA8_o.png" width="990"></p> 
<h4 id="%C2%A0%E7%AC%AC%E4%B8%89%E6%AD%A5%20%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6"> 第三步 创建组件</h4> 
<pre><code class="language-html">&lt;script lang="ts"&gt;
export default {
  name: `baidu-map`
};
&lt;/script&gt;
&lt;script setup lang="ts"&gt;
import { getCurrentInstance, nextTick, onMounted } from "vue";
const { proxy } = getCurrentInstance();

const props = defineProps({
  x: {
    type: Number,
    default: 113.31071
  },
  y: {
    type: Number,
    default: 23.14828
  }
});

onMounted(() =&gt; {
  nextTick(() =&gt; {
    init();
  });
});

const init = async () =&gt; {
  const BMap = window.BMap;
  //显示级别，如省市区街，0-20
  let showLevel = 10;

  const map = new BMap.Map("baidu-map");
  //地图中心点，默认广州市
  let point = new BMap.Point(113.31071, 23.14828);
  // 初始化图标
  let Icon_0 = new BMap.Icon(
    "/src/assets/svg/punctuation.svg",
    new BMap.Size(64, 64),
    {anchor: new BMap.Size(18, 32), imageSize: new BMap.Size(36, 36)}
  );

  //已有坐标，则根据已有坐标显示定位图标
  if(props.x &amp;&amp; props.y){
    point = new BMap.Point(props.x, props.y);
    showLevel = 17;
    //设置初始坐标图标位置
    let myMarker = new BMap.Marker(
      new BMap.Point(props.x, props.y),
      {icon: Icon_0}
    );
    map.addOverlay(myMarker);
  }

  //设置中心坐标，显示级别
  map.centerAndZoom(point, showLevel);
  //获取当前定位
  map.addControl(new BMap.GeolocationControl());
  //开启鼠标滚轮缩放
  map.enableScrollWheelZoom(true);
  // 添加控件
  let opts = {type: "BMAP_NAVIGATION_CONTROL_SMALL"};
  map.addControl(new BMap.NavigationControl(opts));

  //创建点击事件
  map.addEventListener("click", function (e) {

    //向父组件传值
    proxy.$emit("childClick", e.point);
    //清除地图上所有覆盖物
    map.clearOverlays();
    //设置点击后图标显示
    let myMarker = new BMap.Marker(
      new BMap.Point(e.point.lng, e.point.lat),
      {icon: Icon_0}
    );
    map.addOverlay(myMarker);
  });
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;div id="baidu-map" /&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;style&gt;
#baidu-map {
  height: calc(70vh - 86px);
}
&lt;/style&gt;
</code></pre> 
<h4 id="%E7%AC%AC%E5%9B%9B%E6%AD%A5%20%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6">第四步 使用组件</h4> 
<p><img alt="" height="392" src="https://images2.imgbox.com/ba/16/RhvOy4ck_o.png" width="761"></p> 
<p><img alt="" height="196" src="https://images2.imgbox.com/e6/c6/PnTXo2C3_o.png" width="777"></p> 
<p></p> 
<h4 id="%E6%95%88%E6%9E%9C%E5%9B%BE%EF%BC%9A">效果图：</h4> 
<p>传递经纬度的效果：</p> 
<p><img alt="" height="769" src="https://images2.imgbox.com/db/ce/MCbfOlwH_o.png" width="989"></p> 
<p>未传递效果：</p> 
<p><img alt="" height="774" src="https://images2.imgbox.com/d6/fa/TnecImlr_o.png" width="1009"></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3301724d182d413a203e9d2fd02e139b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">将JSON写入文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d748081a8a6c057ee6633ac22d3caaab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">今日热榜前 5 的 GitHub 项目</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>