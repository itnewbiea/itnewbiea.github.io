<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>历史搜索记录SearchHistory - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="历史搜索记录SearchHistory" />
<meta property="og:description" content="该demo使用了自定义的流式布局&#43;AutoCompleteTextView&#43;SharedPreferences实现了各大APP常用到的搜索历史记录的功能，代码简单实用。 废话不多说，上效果图为证：
上代码：第一步：自定义流式布局ZFlowLayout（让标签自动换行）
package cn.cnpp.searchhistory; import android.content.Context; import android.util.AttributeSet; import android.view.View; import android.view.ViewGroup; import java.util.ArrayList; import java.util.List; /***************************** * @Copyright(c) 2014-2018 * @Author：dengyalan * @Date：2018/1/16 * @Description：自定义搜索标签布局 * @Version:v1.0.0 *****************************/ public class ZFlowLayout extends ViewGroup { /** * 存储所有子View */ private List&lt;List&lt;View&gt;&gt; mAllChildViews = new ArrayList&lt;&gt;(); /** * 每一行的高度 */ private List&lt;Integer&gt; mLineHeight = new ArrayList&lt;&gt;(); public ZFlowLayout(Context context) { this(context, null); } public ZFlowLayout(Context context, AttributeSet attrs) { this(context, attrs, 0); } public ZFlowLayout(Context context, AttributeSet attrs, int defStyle) { super(context, attrs, defStyle); } @Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { //父控件传进来的宽度和高度以及对应的测量模式 int sizeWidth = MeasureSpec." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/eef82d5a1d070345ef87267004c7ad61/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-05T10:38:47+08:00" />
<meta property="article:modified_time" content="2018-05-05T10:38:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">历史搜索记录SearchHistory</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><span style="color:rgb(102,102,102);font-family:'Microsoft YaHei', Arial;text-align:left;background-color:rgb(255,255,255);"><span style="font-size:16px;">该demo使用了自定义的流式布局+AutoCompleteTextView+SharedPreferences实现了各大APP常用到的搜索历史记录的功能，代码简单实用。</span></span></h2> 
<p>废话不多说，上效果图为证：</p> 
<p><img src="https://images2.imgbox.com/ba/4c/2QjgzeSe_o.png" alt=""><img src="https://images2.imgbox.com/f0/0e/wR12NCG3_o.png" alt=""></p> 
<p>上代码：第一步：自定义流式布局ZFlowLayout（让标签自动换行）</p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:Consolas;font-size:10.5pt;"><span style="color:#cc7832;">package </span>cn.cnpp.searchhistory<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">import </span>android.content.Context<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.util.AttributeSet<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.view.View<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.view.ViewGroup<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">import </span>java.util.ArrayList<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>java.util.List<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#629755;"><em>/*****************************
</em></span><span style="color:#629755;"><em> * </em></span><span style="color:#629755;"><strong><em>@Copyright(c) </em></strong></span><span style="color:#629755;"><em>2014-2018
</em></span><span style="color:#629755;"><em> * </em></span><span style="color:#629755;"><strong><em>@Author</em></strong></span><span style="color:#629755;font-family:'宋体';"><strong><em>：</em></strong></span><span style="color:#629755;"><strong><em>dengyalan
</em></strong></span><span style="color:#629755;"><strong><em> </em></strong></span><span style="color:#629755;"><em>* </em></span><span style="color:#629755;"><strong><em>@Date</em></strong></span><span style="color:#629755;font-family:'宋体';"><strong><em>：</em></strong></span><span style="color:#629755;"><strong><em>2018/1/16
</em></strong></span><span style="color:#629755;"><strong><em> </em></strong></span><span style="color:#629755;"><em>* </em></span><span style="color:#629755;"><strong><em>@Description</em></strong></span><span style="color:#629755;font-family:'宋体';"><strong><em>：自定义搜索标签布局
</em></strong></span><span style="color:#629755;font-family:'宋体';"><strong><em> </em></strong></span><span style="color:#629755;"><em>* </em></span><span style="color:#629755;"><strong><em>@Version:v1.0.0
</em></strong></span><span style="color:#629755;"><strong><em> </em></strong></span><span style="color:#629755;"><em>*****************************/
</em></span><span style="color:#629755;"><em>
</em></span><span style="color:#cc7832;">public class </span>ZFlowLayout <span style="color:#cc7832;">extends </span>ViewGroup {
    <span style="color:#629755;"><em>/**
</em></span><span style="color:#629755;"><em>     * </em></span><span style="color:#629755;font-family:'宋体';"><em>存储所有子</em></span><span style="color:#629755;"><em>View
</em></span><span style="color:#629755;"><em>     */
</em></span><span style="color:#629755;"><em>    </em></span><span style="color:#cc7832;">private </span>List&lt;List&lt;View&gt;&gt; <span style="color:#9876aa;">mAllChildViews </span>= <span style="color:#cc7832;">new </span>ArrayList&lt;&gt;()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#629755;"><em>/**
</em></span><span style="color:#629755;"><em>     * </em></span><span style="color:#629755;font-family:'宋体';"><em>每一行的高度
</em></span><span style="color:#629755;font-family:'宋体';"><em>     </em></span><span style="color:#629755;"><em>*/
</em></span><span style="color:#629755;"><em>    </em></span><span style="color:#cc7832;">private </span>List&lt;Integer&gt; <span style="color:#9876aa;">mLineHeight </span>= <span style="color:#cc7832;">new </span>ArrayList&lt;&gt;()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    public </span><span style="color:#ffc66d;">ZFlowLayout</span>(Context context) {
        <span style="color:#cc7832;">this</span>(context<span style="color:#cc7832;">, null</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    <span style="color:#cc7832;">public </span><span style="color:#ffc66d;">ZFlowLayout</span>(Context context<span style="color:#cc7832;">, </span>AttributeSet attrs) {
        <span style="color:#cc7832;">this</span>(context<span style="color:#cc7832;">, </span>attrs<span style="color:#cc7832;">, </span><span style="color:#6897bb;">0</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    <span style="color:#cc7832;">public </span><span style="color:#ffc66d;">ZFlowLayout</span>(Context context<span style="color:#cc7832;">, </span>AttributeSet attrs<span style="color:#cc7832;">, int </span>defStyle) {
        <span style="color:#cc7832;">super</span>(context<span style="color:#cc7832;">, </span>attrs<span style="color:#cc7832;">, </span>defStyle)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    <span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">    </span><span style="color:#cc7832;">protected void </span><span style="color:#ffc66d;">onMeasure</span>(<span style="color:#cc7832;">int </span>widthMeasureSpec<span style="color:#cc7832;">, int </span>heightMeasureSpec) {
        <span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">父控件传进来的宽度和高度以及对应的测量模式
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#cc7832;">int </span>sizeWidth = MeasureSpec.<span style="font-style:italic;">getSize</span>(widthMeasureSpec)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        int </span>modeWidth = MeasureSpec.<span style="font-style:italic;">getMode</span>(widthMeasureSpec)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        int </span>sizeHeight = MeasureSpec.<span style="font-style:italic;">getSize</span>(heightMeasureSpec)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        int </span>modeHeight = MeasureSpec.<span style="font-style:italic;">getMode</span>(heightMeasureSpec)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">如果当前</span><span style="color:#808080;">ViewGroup</span><span style="color:#808080;font-family:'宋体';">的宽高为</span><span style="color:#808080;">wrap_content</span><span style="color:#808080;font-family:'宋体';">的情况
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">自己测量的宽度
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#cc7832;">int </span>width = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">自己测量的高度
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#cc7832;">int </span>height = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">记录每一行的宽度和高度
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#cc7832;">int </span>lineWidth = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        int </span>lineHeight = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">获取子</span><span style="color:#808080;">view</span><span style="color:#808080;font-family:'宋体';">的个数
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#cc7832;">int </span>childCount = getChildCount()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        for </span>(<span style="color:#cc7832;">int </span>i = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">; </span>i &lt; childCount<span style="color:#cc7832;">; </span>i++) {
            View child = getChildAt(i)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">测量子</span><span style="color:#808080;">View</span><span style="color:#808080;font-family:'宋体';">的宽和高
</span><span style="color:#808080;font-family:'宋体';">            </span>measureChild(child<span style="color:#cc7832;">, </span>widthMeasureSpec<span style="color:#cc7832;">, </span>heightMeasureSpec)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">得到</span><span style="color:#808080;">LayoutParams
</span><span style="color:#808080;">            </span>MarginLayoutParams lp = (MarginLayoutParams) child.getLayoutParams()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">子</span><span style="color:#808080;">View</span><span style="color:#808080;font-family:'宋体';">占据的宽度
</span><span style="color:#808080;font-family:'宋体';">            </span><span style="color:#cc7832;">int </span>childWidth = child.getMeasuredWidth() + lp.<span style="color:#9876aa;">leftMargin </span>+ lp.<span style="color:#9876aa;">rightMargin</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">子</span><span style="color:#808080;">View</span><span style="color:#808080;font-family:'宋体';">占据的高度
</span><span style="color:#808080;font-family:'宋体';">            </span><span style="color:#cc7832;">int </span>childHeight = child.getMeasuredHeight() + lp.<span style="color:#9876aa;">topMargin </span>+ lp.<span style="color:#9876aa;">bottomMargin</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">换行时候
</span><span style="color:#808080;font-family:'宋体';">            </span><span style="color:#cc7832;">if </span>(lineWidth + childWidth &gt; sizeWidth) {
                <span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">对比得到最大的宽度
</span><span style="color:#808080;font-family:'宋体';">                </span>width = Math.<span style="font-style:italic;">max</span>(width<span style="color:#cc7832;">, </span>lineWidth)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">重置</span><span style="color:#808080;">lineWidth
</span><span style="color:#808080;">                </span>lineWidth = childWidth<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">记录行高
</span><span style="color:#808080;font-family:'宋体';">                </span>height += lineHeight<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>lineHeight = childHeight<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>} <span style="color:#cc7832;">else </span>{<!-- --><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">不换行情况
</span><span style="color:#808080;font-family:'宋体';">                </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">叠加行宽
</span><span style="color:#808080;font-family:'宋体';">                </span>lineWidth += childWidth<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">得到最大行高
</span><span style="color:#808080;font-family:'宋体';">                </span>lineHeight = Math.<span style="font-style:italic;">max</span>(lineHeight<span style="color:#cc7832;">, </span>childHeight)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>}
            <span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">处理最后一个子</span><span style="color:#808080;">View</span><span style="color:#808080;font-family:'宋体';">的情况
</span><span style="color:#808080;font-family:'宋体';">            </span><span style="color:#cc7832;">if </span>(i == childCount - <span style="color:#6897bb;">1</span>) {
                width = Math.<span style="font-style:italic;">max</span>(width<span style="color:#cc7832;">, </span>lineWidth)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>height += lineHeight<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>}
        }
        <span style="color:#808080;">//wrap_content
</span><span style="color:#808080;">        </span>setMeasuredDimension(modeWidth == MeasureSpec.<span style="color:#9876aa;"><em>EXACTLY </em></span>? sizeWidth : width<span style="color:#cc7832;">,
</span><span style="color:#cc7832;">                </span>modeHeight == MeasureSpec.<span style="color:#9876aa;"><em>EXACTLY </em></span>? sizeHeight : height)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    <span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">    </span><span style="color:#cc7832;">protected void </span><span style="color:#ffc66d;">onLayout</span>(<span style="color:#cc7832;">boolean </span>changed<span style="color:#cc7832;">, int </span>l<span style="color:#cc7832;">, int </span>t<span style="color:#cc7832;">, int </span>r<span style="color:#cc7832;">, int </span>b) {
        <span style="color:#9876aa;">mAllChildViews</span>.clear()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#9876aa;">mLineHeight</span>.clear()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">获取当前</span><span style="color:#808080;">ViewGroup</span><span style="color:#808080;font-family:'宋体';">的宽度
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#cc7832;">int </span>width = getWidth()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        int </span>lineWidth = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        int </span>lineHeight = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">记录当前行的</span><span style="color:#808080;">view
</span><span style="color:#808080;">        </span>List&lt;View&gt; lineViews = <span style="color:#cc7832;">new </span>ArrayList&lt;View&gt;()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        int </span>childCount = getChildCount()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        for </span>(<span style="color:#cc7832;">int </span>i = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">; </span>i &lt; childCount<span style="color:#cc7832;">; </span>i++) {
            View child = getChildAt(i)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>MarginLayoutParams lp = (MarginLayoutParams) child.getLayoutParams()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            int </span>childWidth = child.getMeasuredWidth()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            int </span>childHeight = child.getMeasuredHeight()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">            </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">如果需要换行
</span><span style="color:#808080;font-family:'宋体';">            </span><span style="color:#cc7832;">if </span>(childWidth + lineWidth + lp.<span style="color:#9876aa;">leftMargin </span>+ lp.<span style="color:#9876aa;">rightMargin </span>&gt; width) {
                <span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">记录</span><span style="color:#808080;">LineHeight
</span><span style="color:#808080;">                </span><span style="color:#9876aa;">mLineHeight</span>.add(lineHeight)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">记录当前行的</span><span style="color:#808080;">Views
</span><span style="color:#808080;">                </span><span style="color:#9876aa;">mAllChildViews</span>.add(lineViews)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">重置行的宽高
</span><span style="color:#808080;font-family:'宋体';">                </span>lineWidth = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>lineHeight = childHeight + lp.<span style="color:#9876aa;">topMargin </span>+ lp.<span style="color:#9876aa;">bottomMargin</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">重置</span><span style="color:#808080;">view</span><span style="color:#808080;font-family:'宋体';">的集合
</span><span style="color:#808080;font-family:'宋体';">                </span>lineViews = <span style="color:#cc7832;">new </span>ArrayList()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>}
            lineWidth += childWidth + lp.<span style="color:#9876aa;">leftMargin </span>+ lp.<span style="color:#9876aa;">rightMargin</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>lineHeight = Math.<span style="font-style:italic;">max</span>(lineHeight<span style="color:#cc7832;">, </span>childHeight + lp.<span style="color:#9876aa;">topMargin </span>+ lp.<span style="color:#9876aa;">bottomMargin</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>lineViews.add(child)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>}
        <span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">处理最后一行
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#9876aa;">mLineHeight</span>.add(lineHeight)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#9876aa;">mAllChildViews</span>.add(lineViews)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">设置子</span><span style="color:#808080;">View</span><span style="color:#808080;font-family:'宋体';">的位置
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#cc7832;">int </span>left = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        int </span>top = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">获取行数
</span><span style="color:#808080;font-family:'宋体';">        </span><span style="color:#cc7832;">int </span>lineCount = <span style="color:#9876aa;">mAllChildViews</span>.size()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        for </span>(<span style="color:#cc7832;">int </span>i = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">; </span>i &lt; lineCount<span style="color:#cc7832;">; </span>i++) {
            <span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">当前行的</span><span style="color:#808080;">views</span><span style="color:#808080;font-family:'宋体';">和高度
</span><span style="color:#808080;font-family:'宋体';">            </span>lineViews = <span style="color:#9876aa;">mAllChildViews</span>.get(i)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>lineHeight = <span style="color:#9876aa;">mLineHeight</span>.get(i)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            for </span>(<span style="color:#cc7832;">int </span>j = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">; </span>j &lt; lineViews.size()<span style="color:#cc7832;">; </span>j++) {
                View child = lineViews.get(j)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">判断是否显示
</span><span style="color:#808080;font-family:'宋体';">                </span><span style="color:#cc7832;">if </span>(child.getVisibility() == View.<span style="color:#9876aa;"><em>GONE</em></span>) {
                    <span style="color:#cc7832;">continue;
</span><span style="color:#cc7832;">                </span>}
                MarginLayoutParams lp = (MarginLayoutParams) child.getLayoutParams()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                int </span>cLeft = left + lp.<span style="color:#9876aa;">leftMargin</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                int </span>cTop = top + lp.<span style="color:#9876aa;">topMargin</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                int </span>cRight = cLeft + child.getMeasuredWidth()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                int </span>cBottom = cTop + child.getMeasuredHeight()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">进行子</span><span style="color:#808080;">View</span><span style="color:#808080;font-family:'宋体';">进行布局
</span><span style="color:#808080;font-family:'宋体';">                </span>child.layout(cLeft<span style="color:#cc7832;">, </span>cTop<span style="color:#cc7832;">, </span>cRight<span style="color:#cc7832;">, </span>cBottom)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>left += child.getMeasuredWidth() + lp.<span style="color:#9876aa;">leftMargin </span>+ lp.<span style="color:#9876aa;">rightMargin</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>}
            left = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>top += lineHeight<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>}
    }

    <span style="color:#629755;"><em>/**
</em></span><span style="color:#629755;"><em>     * </em></span><span style="color:#629755;font-family:'宋体';"><em>与当前</em></span><span style="color:#629755;"><em>ViewGroup</em></span><span style="color:#629755;font-family:'宋体';"><em>对应的</em></span><span style="color:#629755;"><em>LayoutParams
</em></span><span style="color:#629755;"><em>     */
</em></span><span style="color:#629755;"><em>    </em></span><span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">    </span><span style="color:#cc7832;">public </span>LayoutParams <span style="color:#ffc66d;">generateLayoutParams</span>(AttributeSet attrs) {
        <span style="color:#cc7832;">return new </span>MarginLayoutParams(getContext()<span style="color:#cc7832;">, </span>attrs)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}
}
</pre> 
<br> 
<p>第二步：新建一个SharePreference工具类，用来保存、读取、清除历史搜索记录，这里贴上这三个方法的代码</p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:Consolas;font-size:10.5pt;"><span style="color:#629755;"><em>/**
</em></span><span style="color:#629755;"><em> * </em></span><span style="color:#629755;font-family:'宋体';"><em>保存搜索记录
</em></span><span style="color:#629755;font-family:'宋体';"><em> </em></span><span style="color:#629755;"><em>*
</em></span><span style="color:#629755;"><em> * </em></span><span style="color:#629755;"><strong><em>@param </em></strong></span><span style="color:#8a653b;"><em>keyword
</em></span><span style="color:#8a653b;"><em> </em></span><span style="color:#629755;"><em>*/
</em></span><span style="color:#cc7832;">public void </span><span style="color:#ffc66d;">save</span>(String keyword) {
    <span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体';">获取搜索框信息
</span><span style="color:#808080;font-family:'宋体';">    </span>SharedPreferences mysp = <span style="color:#9876aa;"><em>mContext</em></span>.getSharedPreferences(<span style="color:#6a8759;">"search_history"</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">0</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>String <span style="background-color:#52503a;">old_text</span> = mysp.getString(<span style="color:#6a8759;">"history"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">""</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体';">利用</span><span style="color:#808080;">StringBuilder.append</span><span style="color:#808080;font-family:'宋体';">新增内容，逗号便于读取内容时用逗号拆分开
</span><span style="color:#808080;font-family:'宋体';">    </span>StringBuilder builder = <span style="color:#cc7832;">new </span>StringBuilder(old_text)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>builder.append(keyword + <span style="color:#6a8759;">","</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体';">判断搜索内容是否已经存在于历史文件，已存在则不重复添加
</span><span style="color:#808080;font-family:'宋体';">    </span><span style="color:#cc7832;">if </span>(!old_text.contains(keyword + <span style="color:#6a8759;">","</span>)) {
        SharedPreferences.Editor myeditor = mysp.edit()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>myeditor.putString(<span style="color:#6a8759;">"history"</span><span style="color:#cc7832;">, </span>builder.toString())<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>myeditor.commit()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}
}

<span style="color:#cc7832;">public </span>String[] <span style="color:#ffc66d;">getHistoryList</span>() {
    <span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体';">获取搜索记录文件内容
</span><span style="color:#808080;font-family:'宋体';">    </span>SharedPreferences sp = <span style="color:#9876aa;"><em>mContext</em></span>.getSharedPreferences(<span style="color:#6a8759;">"search_history"</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">0</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>String history = sp.getString(<span style="color:#6a8759;">"history"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">""</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体';">用逗号分割内容返回数组
</span><span style="color:#808080;font-family:'宋体';">    </span>String[] <span style="background-color:#52503a;">history_arr</span> = history.split(<span style="color:#6a8759;">","</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体';">保留前</span><span style="color:#808080;">50</span><span style="color:#808080;font-family:'宋体';">条数据
</span><span style="color:#808080;font-family:'宋体';">    </span><span style="color:#cc7832;">if </span>(history_arr.<span style="color:#9876aa;">length </span>&gt; <span style="color:#6897bb;">50</span>) {
        String[] newArrays = <span style="color:#cc7832;">new </span>String[<span style="color:#6897bb;">50</span>]<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>System.<span style="font-style:italic;">arraycopy</span>(history_arr<span style="color:#cc7832;">, </span><span style="color:#6897bb;">0</span><span style="color:#cc7832;">, </span>newArrays<span style="color:#cc7832;">, </span><span style="color:#6897bb;">0</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">50</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}
    <span style="color:#cc7832;">return </span>history_arr<span style="color:#cc7832;">;
</span>}

<span style="color:#629755;"><em>/**
</em></span><span style="color:#629755;"><em> * </em></span><span style="color:#629755;font-family:'宋体';"><em>清除搜索记录
</em></span><span style="color:#629755;font-family:'宋体';"><em> </em></span><span style="color:#629755;"><em>*/
</em></span><span style="color:#cc7832;">public void </span><span style="color:#ffc66d;">cleanHistory</span>() {
    SharedPreferences sp = <span style="color:#9876aa;"><em>mContext</em></span>.getSharedPreferences(<span style="color:#6a8759;">"search_history"</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">0</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>SharedPreferences.Editor editor = sp.edit()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>editor.clear()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>editor.commit()<span style="color:#cc7832;">;
</span>}</pre> 
<br> 
<p>最后呢，就到了关键的一步啦，在Activity里进行读写初始化操作啦。</p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:Consolas;font-size:10.5pt;"><span style="color:#cc7832;">package </span>cn.cnpp.searchhistory<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">import </span>android.content.Context<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.content.Intent<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.os.Bundle<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.support.v7.app.AppCompatActivity<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.text.Editable<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.text.TextWatcher<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.view.Gravity<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.view.View<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.view.ViewGroup<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.widget.ArrayAdapter<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.widget.AutoCompleteTextView<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.widget.TextView<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>android.widget.Toast<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">import </span>butterknife.<span style="color:#bbb529;">BindView</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>butterknife.ButterKnife<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">import </span>butterknife.<span style="color:#bbb529;">OnClick</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#629755;"><em>/**
</em></span><span style="color:#629755;"><em> * </em></span><span style="color:#629755;"><strong><em>@author </em></strong></span><span style="color:#629755;"><em>dengyalan
</em></span><span style="color:#629755;"><em> */
</em></span><span style="color:#cc7832;">public class </span>MainActivity <span style="color:#cc7832;">extends </span>AppCompatActivity {

    <span style="color:#bbb529;">@BindView</span>(R.id.<span style="color:#9876aa;"><em>auto_search</em></span>)
    AutoCompleteTextView <span style="color:#9876aa;">autoSearch</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#bbb529;">@BindView</span>(R.id.<span style="color:#9876aa;"><em>keyword_fl</em></span>)
    ZFlowLayout <span style="color:#9876aa;">keywordFl</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#bbb529;">@BindView</span>(R.id.<span style="color:#9876aa;"><em>history_fl</em></span>)
    ZFlowLayout <span style="color:#9876aa;">historyFl</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    public static </span>String[] <span style="color:#9876aa;"><em>searchWord </em></span>= {<!-- --><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">净水器</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">手机</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">电动车</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">洗衣机</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">沙发</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">冰箱</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">瓷砖</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">空调</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">床垫</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">卫浴</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">热水器</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">床</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">家具</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">手表</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">电视</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">集成灶</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">领带</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">保温杯</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">童装</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">自行车</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">空气净化器</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">地板</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">硅藻泥</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">油烟机</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">智能家居</span><span style="color:#6a8759;">"</span>}<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    </span><span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">    </span><span style="color:#cc7832;">protected void </span><span style="color:#ffc66d;">onCreate</span>(Bundle savedInstanceState) {
        <span style="color:#cc7832;">super</span>.onCreate(savedInstanceState)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>setContentView(R.layout.<span style="color:#9876aa;"><em>activity_main</em></span>)<span style="color:#cc7832;">;</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span>ButterKnife.<span style="font-style:italic;">bind</span>(<span style="color:#cc7832;">this</span>)<span style="color:#cc7832;">;</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span>initView()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    <span style="color:#cc7832;">private void </span><span style="color:#ffc66d;">initView</span>() {
        initKeyword(<span style="color:#9876aa;"><em>searchWord</em></span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>initHistory()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>String[] data = SPUtils.<span style="font-style:italic;">getInstance</span>(<span style="color:#cc7832;">this</span>).getHistoryList()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span>ArrayAdapter&lt;String&gt; autoCompleteAdapter = <span style="color:#cc7832;">new </span>ArrayAdapter&lt;String&gt;(<span style="color:#cc7832;">this,
</span><span style="color:#cc7832;">                </span>R.layout.<span style="color:#9876aa;"><em>view_mw_textview</em></span><span style="color:#cc7832;">, </span>data)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#9876aa;">autoSearch</span>.setAdapter(autoCompleteAdapter)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span><span style="color:#9876aa;">autoSearch</span>.addTextChangedListener(<span style="color:#cc7832;">new </span>TextWatcher() {
            <span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">            </span><span style="color:#cc7832;">public void </span><span style="color:#ffc66d;">beforeTextChanged</span>(CharSequence charSequence<span style="color:#cc7832;">, int </span>i<span style="color:#cc7832;">, int </span>i1<span style="color:#cc7832;">, int </span>i2) {
            }

            <span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">            </span><span style="color:#cc7832;">public void </span><span style="color:#ffc66d;">onTextChanged</span>(CharSequence charSequence<span style="color:#cc7832;">, int </span>i<span style="color:#cc7832;">, int </span>i1<span style="color:#cc7832;">, int </span>i2) {
                <span style="color:#cc7832;">if </span>(charSequence.length() &gt; <span style="color:#6897bb;">0</span>) {<!-- --><span style="color:#808080;">
</span><span style="color:#808080;">                </span>}
            }

            <span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">            </span><span style="color:#cc7832;">public void </span><span style="color:#ffc66d;">afterTextChanged</span>(Editable editable) {

            }
        })<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    <span style="color:#cc7832;">private void </span><span style="color:#ffc66d;">initHistory</span>() {
        <span style="color:#cc7832;">final </span>String[] data = SPUtils.<span style="font-style:italic;">getInstance</span>(<span style="color:#cc7832;">this</span>).getHistoryList()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>ViewGroup.MarginLayoutParams layoutParams = <span style="color:#cc7832;">new </span>ViewGroup.MarginLayoutParams(ViewGroup.LayoutParams.<span style="color:#9876aa;"><em>WRAP_CONTENT</em></span><span style="color:#cc7832;">, </span>ViewGroup.LayoutParams.<span style="color:#9876aa;"><em>WRAP_CONTENT</em></span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>layoutParams.setMargins(<span style="color:#6897bb;">10</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">10</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">10</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">10</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#9876aa;">historyFl</span>.removeAllViews()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        for </span>(<span style="color:#cc7832;">int </span>i = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">; </span>i &lt; data.<span style="color:#9876aa;">length</span><span style="color:#cc7832;">; </span>i++) {
            <span style="color:#cc7832;">if </span>(isNullorEmpty(data[i])) {
                <span style="color:#cc7832;">return;
</span><span style="color:#cc7832;">            </span>}
            <span style="color:#cc7832;">final int </span>j = i<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">添加分类块
</span><span style="color:#808080;font-family:'宋体';">            </span>View paramItemView = getLayoutInflater().inflate(R.layout.<span style="color:#9876aa;"><em>adapter_search_keyword</em></span><span style="color:#cc7832;">, null</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>TextView keyWordTv = paramItemView.findViewById(R.id.<span style="color:#9876aa;"><em>tv_content</em></span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>keyWordTv.setText(data[j])<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>keyWordTv.setBackgroundResource(R.drawable.<span style="color:#9876aa;"><em>whitebg_strokegrey_radius3</em></span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#9876aa;">historyFl</span>.addView(paramItemView<span style="color:#cc7832;">, </span>layoutParams)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">            </span>keyWordTv.setOnClickListener(<span style="color:#cc7832;">new </span>View.OnClickListener() {
                <span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">                </span><span style="color:#cc7832;">public void </span><span style="color:#ffc66d;">onClick</span>(View v) {
                    <span style="color:#9876aa;">autoSearch</span>.setText(<span style="color:#b389c5;">data</span>[<span style="color:#b389c5;">j</span>])<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>}
            })<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>}
    }

    <span style="color:#cc7832;">private void </span><span style="color:#ffc66d;">initKeyword</span>(<span style="color:#cc7832;">final </span>String[] keyword) {
        ViewGroup.MarginLayoutParams layoutParams = <span style="color:#cc7832;">new </span>ViewGroup.MarginLayoutParams(ViewGroup.LayoutParams.<span style="color:#9876aa;"><em>WRAP_CONTENT</em></span><span style="color:#cc7832;">, </span>ViewGroup.LayoutParams.<span style="color:#9876aa;"><em>WRAP_CONTENT</em></span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>layoutParams.setMargins(<span style="color:#6897bb;">10</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">10</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">10</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">10</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#9876aa;">keywordFl</span>.removeAllViews()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        for </span>(<span style="color:#cc7832;">int </span>i = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">; </span>i &lt; keyword.<span style="color:#9876aa;">length</span><span style="color:#cc7832;">; </span>i++) {
            <span style="color:#cc7832;">final int </span>j = i<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体';">添加分类块
</span><span style="color:#808080;font-family:'宋体';">            </span>View paramItemView = getLayoutInflater().inflate(R.layout.<span style="color:#9876aa;"><em>adapter_search_keyword</em></span><span style="color:#cc7832;">, null</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>TextView keyWordTv = paramItemView.findViewById(R.id.<span style="color:#9876aa;"><em>tv_content</em></span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>keyWordTv.setText(keyword[j])<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>keyWordTv.setBackgroundResource(R.drawable.<span style="color:#9876aa;"><em>whitebg_strokegrey_radius3</em></span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#9876aa;">keywordFl</span>.addView(paramItemView<span style="color:#cc7832;">, </span>layoutParams)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">            </span>keyWordTv.setOnClickListener(<span style="color:#cc7832;">new </span>View.OnClickListener() {
                <span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">                </span><span style="color:#cc7832;">public void </span><span style="color:#ffc66d;">onClick</span>(View v) {
                    <span style="color:#9876aa;">autoSearch</span>.setText(<span style="color:#b389c5;">keyword</span>[<span style="color:#b389c5;">j</span>])<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>}
            })<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>}
    }

    <span style="color:#bbb529;">@OnClick</span>({R.id.<span style="color:#9876aa;"><em>iv_back</em></span><span style="color:#cc7832;">, </span>R.id.<span style="color:#9876aa;"><em>clear_iv</em></span><span style="color:#cc7832;">, </span>R.id.<span style="color:#9876aa;"><em>tv_search</em></span>})
    <span style="color:#cc7832;">public void </span><span style="color:#ffc66d;">onClick</span>(View view) {
        <span style="color:#cc7832;">switch </span>(view.getId()) {
            <span style="color:#cc7832;">case </span>R.id.<span style="color:#9876aa;"><em>iv_back</em></span>:
                finish()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                break;
</span><span style="color:#cc7832;">            case </span>R.id.<span style="color:#9876aa;"><em>tv_search</em></span>:
                String searchKey = <span style="color:#9876aa;">autoSearch</span>.getText().toString()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                if </span>(!isNullorEmpty(searchKey)) {
                    Intent intent = <span style="color:#cc7832;">new </span>Intent(MainActivity.<span style="color:#cc7832;">this, </span>SearchResultActivity.<span style="color:#cc7832;">class</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                    </span>intent.putExtra(<span style="color:#6a8759;">"key"</span><span style="color:#cc7832;">, </span>searchKey)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                    </span>startActivityForResult(intent<span style="color:#cc7832;">, </span><span style="color:#6897bb;">0</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                    </span>String keyWord = <span style="color:#9876aa;">autoSearch</span>.getText().toString()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                    if </span>(!isNullorEmpty(keyWord)) {
                        SPUtils.<span style="font-style:italic;">getInstance</span>(MainActivity.<span style="color:#cc7832;">this</span>).save(<span style="color:#9876aa;">autoSearch</span>.getText().toString())<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                    </span>}
                } <span style="color:#cc7832;">else </span>{
                    showToastShort(<span style="color:#cc7832;">this, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">搜索内容为空！</span><span style="color:#6a8759;">"</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>}
                <span style="color:#cc7832;">break;
</span><span style="color:#cc7832;">            case </span>R.id.<span style="color:#9876aa;"><em>clear_iv</em></span>:
                SPUtils.<span style="font-style:italic;">getInstance</span>(MainActivity.<span style="color:#cc7832;">this</span>).cleanHistory()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>showToastShort(<span style="color:#cc7832;">this, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">已清除历史记录！</span><span style="color:#6a8759;">"</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>initHistory()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                break;
</span><span style="color:#cc7832;">            default</span>:
                <span style="color:#cc7832;">break;
</span><span style="color:#cc7832;">        </span>}
    }

    <span style="color:#cc7832;">private boolean </span><span style="color:#ffc66d;">isNullorEmpty</span>(String str) {
        <span style="color:#cc7832;">return </span>str == <span style="color:#cc7832;">null </span>|| <span style="color:#6a8759;">""</span>.equals(str)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    <span style="color:#cc7832;">private void </span><span style="color:#ffc66d;">showToastShort</span>(Context context<span style="color:#cc7832;">, </span>String data) {
        Toast toast = Toast.<span style="font-style:italic;">makeText</span>(context<span style="color:#cc7832;">, </span>data<span style="color:#cc7832;">, </span>Toast.<span style="color:#9876aa;"><em>LENGTH_SHORT</em></span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>toast.setGravity(Gravity.<span style="color:#9876aa;"><em>CENTER</em></span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">0</span><span style="color:#cc7832;">, </span><span style="color:#6897bb;">0</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>toast.show()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    <span style="color:#bbb529;">@Override
</span><span style="color:#bbb529;">    </span><span style="color:#cc7832;">protected void </span><span style="color:#ffc66d;">onActivityResult</span>(<span style="color:#cc7832;">int </span>requestCode<span style="color:#cc7832;">, int </span>resultCode<span style="color:#cc7832;">, </span>Intent data) {
        <span style="color:#cc7832;">super</span>.onActivityResult(requestCode<span style="color:#cc7832;">, </span>resultCode<span style="color:#cc7832;">, </span>data)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        if </span>(requestCode == <span style="color:#6897bb;">0</span>) {
            <span style="color:#cc7832;">if </span>(resultCode == <span style="color:#9876aa;"><em>RESULT_OK</em></span>) {
                initHistory()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>}
        }
    }
}</pre> 
<p>差点忘记还有布局文件：</p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:Consolas;font-size:10.5pt;"><span style="color:#e8bf6a;">&lt;?</span><span style="color:#bababa;">xml version=</span><span style="color:#6a8759;">"1.0" </span><span style="color:#bababa;">encoding=</span><span style="color:#6a8759;">"utf-8"</span><span style="color:#e8bf6a;">?&gt;
</span><span style="color:#e8bf6a;">&lt;LinearLayout </span><span style="color:#bababa;">xmlns:</span><span style="color:#9876aa;">android</span><span style="color:#bababa;">=</span><span style="color:#6a8759;">"http://schemas.android.com/apk/res/android"
</span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:background=</span><span style="color:#6a8759;">"@color/white"
</span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:orientation=</span><span style="color:#6a8759;">"vertical"</span><span style="color:#e8bf6a;">&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">    &lt;LinearLayout
</span><span style="color:#e8bf6a;">        </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">        </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"45dp"
</span><span style="color:#6a8759;">        </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:background=</span><span style="color:#6a8759;">"@color/colorPrimary"
</span><span style="color:#6a8759;">        </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:gravity=</span><span style="color:#6a8759;">"center"
</span><span style="color:#6a8759;">        </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:orientation=</span><span style="color:#6a8759;">"horizontal"</span><span style="color:#e8bf6a;">&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">        &lt;ImageView
</span><span style="color:#e8bf6a;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id=</span><span style="color:#6a8759;">"@+id/iv_back"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_gravity=</span><span style="color:#6a8759;">"center"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_marginRight=</span><span style="color:#6a8759;">"3dp"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:padding=</span><span style="color:#6a8759;">"10dp"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:src=</span><span style="color:#6a8759;">"@mipmap/back" </span><span style="color:#e8bf6a;">/&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">        &lt;AutoCompleteTextView
</span><span style="color:#e8bf6a;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id=</span><span style="color:#6a8759;">"@+id/auto_search"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"0dp"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_weight=</span><span style="color:#6a8759;">"1"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:background=</span><span style="color:#6a8759;">"@drawable/whitebg_radius3"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:completionThreshold=</span><span style="color:#6a8759;">"1"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:drawableLeft=</span><span style="color:#6a8759;">"@mipmap/search_icon"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:drawablePadding=</span><span style="color:#6a8759;">"5dp"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:hint=</span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">请输入您要搜索的内容</span><span style="color:#6a8759;">"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:padding=</span><span style="color:#6a8759;">"8dp"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:singleLine=</span><span style="color:#6a8759;">"true"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:textSize=</span><span style="color:#6a8759;">"12sp" </span><span style="color:#e8bf6a;">/&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">        &lt;TextView
</span><span style="color:#e8bf6a;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id=</span><span style="color:#6a8759;">"@+id/tv_search"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:gravity=</span><span style="color:#6a8759;">"center"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:paddingLeft=</span><span style="color:#6a8759;">"10dp"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:paddingRight=</span><span style="color:#6a8759;">"15dp"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:text=</span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">搜索</span><span style="color:#6a8759;">"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:textColor=</span><span style="color:#6a8759;">"@color/white"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:textSize=</span><span style="color:#6a8759;">"13dp" </span><span style="color:#e8bf6a;">/&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">    &lt;/LinearLayout&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">    &lt;android.support.v4.widget.NestedScrollView
</span><span style="color:#e8bf6a;">        </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">        </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"0dp"
</span><span style="color:#6a8759;">        </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_weight=</span><span style="color:#6a8759;">"1"
</span><span style="color:#6a8759;">        </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:scrollbars=</span><span style="color:#6a8759;">"none"</span><span style="color:#e8bf6a;">&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">        &lt;LinearLayout
</span><span style="color:#e8bf6a;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:orientation=</span><span style="color:#6a8759;">"vertical"
</span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:padding=</span><span style="color:#6a8759;">"10dp"</span><span style="color:#e8bf6a;">&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">            &lt;TextView
</span><span style="color:#e8bf6a;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_marginBottom=</span><span style="color:#6a8759;">"10dp"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:drawableLeft=</span><span style="color:#6a8759;">"@mipmap/fire_grey"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:drawablePadding=</span><span style="color:#6a8759;">"3dp"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:text=</span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">热门搜索</span><span style="color:#6a8759;">"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:textColor=</span><span style="color:#6a8759;">"@color/grey_4d4d4d"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:textSize=</span><span style="color:#6a8759;">"13sp" </span><span style="color:#e8bf6a;">/&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">            &lt;View </span><span style="color:#bababa;">style=</span><span style="color:#6a8759;">"@style/VerticalLineStyle" </span><span style="color:#e8bf6a;">/&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">            &lt;cn.cnpp.searchhistory.ZFlowLayout
</span><span style="color:#e8bf6a;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id=</span><span style="color:#6a8759;">"@+id/keyword_fl"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:orientation=</span><span style="color:#6a8759;">"vertical" </span><span style="color:#e8bf6a;">/&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">            &lt;RelativeLayout
</span><span style="color:#e8bf6a;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:orientation=</span><span style="color:#6a8759;">"horizontal"</span><span style="color:#e8bf6a;">&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">                &lt;TextView
</span><span style="color:#e8bf6a;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_marginBottom=</span><span style="color:#6a8759;">"10dp"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_marginTop=</span><span style="color:#6a8759;">"10dp"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:drawableLeft=</span><span style="color:#6a8759;">"@mipmap/history_grey"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:drawablePadding=</span><span style="color:#6a8759;">"3dp"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:text=</span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体';">搜索记录</span><span style="color:#6a8759;">"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:textColor=</span><span style="color:#6a8759;">"@color/grey_4d4d4d"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:textSize=</span><span style="color:#6a8759;">"13sp" </span><span style="color:#e8bf6a;">/&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">                &lt;ImageView
</span><span style="color:#e8bf6a;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id=</span><span style="color:#6a8759;">"@+id/clear_iv"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_alignParentRight=</span><span style="color:#6a8759;">"true"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_centerVertical=</span><span style="color:#6a8759;">"true"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:padding=</span><span style="color:#6a8759;">"10dp"
</span><span style="color:#6a8759;">                    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:src=</span><span style="color:#6a8759;">"@mipmap/delete_grey" </span><span style="color:#e8bf6a;">/&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">            &lt;/RelativeLayout&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">            &lt;cn.cnpp.searchhistory.ZFlowLayout
</span><span style="color:#e8bf6a;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id=</span><span style="color:#6a8759;">"@+id/history_fl"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width=</span><span style="color:#6a8759;">"match_parent"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height=</span><span style="color:#6a8759;">"wrap_content"
</span><span style="color:#6a8759;">                </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:orientation=</span><span style="color:#6a8759;">"vertical" </span><span style="color:#e8bf6a;">/&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">        &lt;/LinearLayout&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">    &lt;/android.support.v4.widget.NestedScrollView&gt;
</span><span style="color:#e8bf6a;">
</span><span style="color:#e8bf6a;">&lt;/LinearLayout&gt;</span></pre> 
<p>主要的代码就在这里了，如果想看完整的代码就点击下方的链接去下载demo吧。</p> 
<p><a href="https://download.csdn.net/download/u012360948/10393547">https://download.csdn.net/download/u012360948/10393547</a></p> 
<p><br></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ff2e01f6af1a593c852186f4ebaaade5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mybase数据文件损坏，在数据流里侦测到无效的版本号</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/71d45cb905603b6b023da9695e80f8a3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CentOS7开机进入紧急模式EmergencyMode的解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>