<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>php发送get、post请求的6种方法简明总结？ - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="php发送get、post请求的6种方法简明总结？" />
<meta property="og:description" content="这篇文章主要介绍php发送get、post请求的6种方法简明总结,分别为使用file_get_contents 、fopen、fsockopen、curl来发送GET和POST请求,需要的朋友可以参考下
方法1: 用file_get_contents 以get方式获取内容： &lt;?php
$url=&#39;http://www.51growup.com/&#39;;
$html = file_get_contents($url);
echo $html;
?&gt;
方法2: 用fopen打开url, 以get方式获取内容： &lt;?php
$fp = fopen($url, &#39;r&#39;);
stream_get_meta_data($fp);
while(!feof($fp)) {
$result .= fgets($fp, 1024);
}
echo &#34;url body: $result&#34;;
fclose($fp);
?&gt;
方法3：用file_get_contents函数,以post方式获取url &lt;?php
$data = array (&#39;foo&#39; =&gt; &#39;bar&#39;);
$data = http_build_query($data);
$opts = array (
‘http&#39; =&gt; array (
&#39;method&#39; =&gt; &#39;POST&#39;,
&#39;header&#39;=&gt; &#34;Content-type: application/x-www-form-urlencodedrn&#34;,
&#34;Content-Length: &#34; . strlen($data) . &#34;rn&#34;,
&#39;content&#39; =&gt; $data" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/7d668b0cd0bfb80dda9ba3a0a1b06484/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-10T13:58:40+08:00" />
<meta property="article:modified_time" content="2023-10-10T13:58:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">php发送get、post请求的6种方法简明总结？</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>这篇文章主要介绍php发送get、post请求的6种方法简明总结,分别为使用file_get_contents 、fopen、fsockopen、curl来发送GET和POST请求,需要的朋友可以参考下</p> 
<h4>方法1: 用file_get_contents 以get方式获取内容：</h4> 
<p><code>&lt;?php</code></p> 
<p><code>$url='http://www.51growup.com/';</code></p> 
<p><code>$html = file_get_contents($url);</code></p> 
<p><code>echo $html;</code></p> 
<p><code>?&gt;</code></p> 
<h4>方法2: 用fopen打开url, 以get方式获取内容：</h4> 
<p><code>&lt;?php</code></p> 
<p><code>$fp = fopen($url, 'r');</code></p> 
<p><code>stream_get_meta_data($fp);</code></p> 
<p><code>while(!feof($fp)) {<!-- --></code></p> 
<p><code>$result .= fgets($fp, 1024);</code></p> 
<p><code>}</code></p> 
<p><code>echo "url body: $result";</code></p> 
<p><code>fclose($fp);</code></p> 
<p><code>?&gt;</code></p> 
<h4>方法3：用file_get_contents函数,以post方式获取url</h4> 
<p><code>&lt;?php</code></p> 
<p><code>$data = array ('foo' =&gt; 'bar');</code></p> 
<p><code>$data = http_build_query($data);</code></p> 
<p><code>$opts = array (</code></p> 
<p><code>‘http' =&gt; array (</code></p> 
<p><code>'method' =&gt; 'POST',</code></p> 
<p><code>'header'=&gt; "Content-type: application/x-www-form-urlencodedrn",</code></p> 
<p><code>"Content-Length: " . strlen($data) . "rn",</code></p> 
<p><code>'content' =&gt; $data</code></p> 
<p><code>)</code></p> 
<p><code>);</code></p> 
<p><code>$context = stream_context_create($opts);</code></p> 
<p><code>$html = file_get_contents('http://www.51growup.com/e/admin/test.html', false, $context);</code></p> 
<p><code>echo $html;</code></p> 
<p><code>?&gt;</code></p> 
<h4>方法4：用fsockopen函数打开url，以get方式获取完整的数据，包括header和body,fsockopen需要 PHP.ini 中 allow_url_fopen 选项开启</h4> 
<p><code>&lt;?php</code></p> 
<p><code>function get_url ($url,$cookie=false)</code></p> 
<p><code>{<!-- --></code></p> 
<p><code>$url = parse_url($url);</code></p> 
<p><code>$query = $url[path]."?".$url[query];</code></p> 
<p><code>echo "Query:".$query;</code></p> 
<p><code>$fp = fsockopen( $url[host], $url[port]?$url[port]:80 , $errno, $errstr, 30);</code></p> 
<p><code>if (!$fp) {<!-- --></code></p> 
<p><code>return false;</code></p> 
<p><code>} else {<!-- --></code></p> 
<p><code>$request = "GET $query HTTP/1.1rn";</code></p> 
<p><code>$request .= "Host: $url[host]rn";</code></p> 
<p><code>$request .= "Connection: Closern";</code></p> 
<p><code>if($cookie) $request.="Cookie: $cookien";</code></p> 
<p><code>$request.="rn";</code></p> 
<p><code>fwrite($fp,$request);</code></p> 
<p><code>while(!@feof($fp)) {<!-- --></code></p> 
<p><code>$result .= @fgets($fp, 1024);</code></p> 
<p><code>}</code></p> 
<p><code>fclose($fp);</code></p> 
<p><code>return $result;</code></p> 
<p><code>}</code></p> 
<p><code>}</code></p> 
<p><code>//获取url的html部分，去掉header</code></p> 
<p><code>function GetUrlHTML($url,$cookie=false)</code></p> 
<p><code>{<!-- --></code></p> 
<p><code>$rowdata = get_url($url,$cookie);</code></p> 
<p><code>if($rowdata)</code></p> 
<p><code>{<!-- --></code></p> 
<p><code>$body= stristr($rowdata,"rnrn");</code></p> 
<p><code>$body=substr($body,4,strlen($body));</code></p> 
<p><code>return $body;</code></p> 
<p><code>}</code></p> 
<p><code>return false;</code></p> 
<p><code>}</code></p> 
<p><code>?&gt;</code></p> 
<h4>方法5：用fsockopen函数打开url，以POST方式获取完整的数据，包括header和body</h4> 
<p><code>&lt;?php</code></p> 
<p><code>function HTTP_Post($URL,$data,$cookie, $referrer=”")</code></p> 
<p><code>{<!-- --></code></p> 
<p><code>// parsing the given URL</code></p> 
<p><code>$URL_Info=parse_url($URL);</code></p> 
<p><code>// Building referrer</code></p> 
<p><code>if($referrer=="") // if not given use this script as referrer</code></p> 
<p><code>$referrer="111";</code></p> 
<p><code>// making string from $data</code></p> 
<p><code>foreach($data as $key=&gt;$value)</code></p> 
<p><code>$values[]="$key=".urlencode($value);</code></p> 
<p><code>$data_string=implode("&amp;",$values);</code></p> 
<p><code>// Find out which port is needed – if not given use standard (=80)</code></p> 
<p><code>if(!isset($URL_Info["port"]))</code></p> 
<p><code>$URL_Info["port"]=80;</code></p> 
<p><code>// building POST-request:</code></p> 
<p><code>$request.="POST ".$URL_Info["path"]." HTTP/1.1n";</code></p> 
<p><code>$request.="Host: ".$URL_Info["host"]."n";</code></p> 
<p><code>$request.="Referer: $referern";</code></p> 
<p><code>$request.="Content-type: application/x-www-form-urlencodedn";</code></p> 
<p><code>$request.="Content-length: ".strlen($data_string)."n";</code></p> 
<p><code>$request.="Connection: closen";</code></p> 
<p><code>$request.="Cookie: $cookien";</code></p> 
<p><code>$request.="n";</code></p> 
<p><code>$request.=$data_string."n";</code></p> 
<p><code>$fp = fsockopen($URL_Info["host"],$URL_Info["port"]);</code></p> 
<p><code>fputs($fp, $request);</code></p> 
<p><code>while(!feof($fp)) {<!-- --></code></p> 
<p><code>$result .= fgets($fp, 1024);</code></p> 
<p><code>}</code></p> 
<p><code>fclose($fp);</code></p> 
<p><code>return $result;</code></p> 
<p><code>}</code></p> 
<p><code>?&gt;</code></p> 
<p></p> 
<h4>方法6:使用curl库，使用curl库之前，可能需要查看一下php.ini是否已经打开了curl扩展</h4> 
<p><code>&lt;?php</code></p> 
<p><code>$ch = curl_init();</code></p> 
<p><code>$timeout = 5;</code></p> 
<p><code>curl_setopt ($ch, CURLOPT_URL, 'http://www.51growup.com/');</code></p> 
<p><code>curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);</code></p> 
<p><code>curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);</code></p> 
<p><code>$file_contents = curl_exec($ch);</code></p> 
<p><code>curl_close($ch);</code></p> 
<p><code>echo $file_contents;</code></p> 
<p><code>?&gt;</code></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bcf6df38cbc839c20cfbe9719ddd9357/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">有哪些值得学习的 Go 语言开源项目？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c5d467a0a646d7934173991d7949ebf2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">项目进展跟踪的5个基本原则</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>