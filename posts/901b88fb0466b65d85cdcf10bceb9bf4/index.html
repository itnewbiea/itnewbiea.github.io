<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>gulp基本操作 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="gulp基本操作" />
<meta property="og:description" content="1、安装淘宝镜像 npm install cnpm -g --registry=https://registry.npm.taobao.org
cnpm -v
2、生成项目描述文件 package.json npm init
cnpm init (可代替 npm init)
（需要项目名称、版本号、描述、入口文件、运行命令、作者、证书 ---- 一路按回车即可）
3、全局安装gulp cnpm i gulp@3 -g
全局安装gulp
@3 代表选择了 3 的版本
i 即为 install
-g 即为 --global
gulp -v
4、当前目录内部安装 gulp 模块 cnpm i gulp@3 -D
cnpm i gulp@3 -S （二者选择其一即可）
-D 缩写 --save-dev 开发依赖
-S 缩写 --save 项目依赖
开发依赖： 开发过程中需要使用到的依赖的模块，项目上线时不需要的模块 --- 代码格式校验的模块
项目依赖： 项目上线仍然需要使用的模块
----- 如果不知道怎么选择，那你就写 -S
5、创建文件 gulpfile.js ,配置gulp const gulp = require(&#39;gulp&#39;); 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/901b88fb0466b65d85cdcf10bceb9bf4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-26T17:49:00+08:00" />
<meta property="article:modified_time" content="2019-09-26T17:49:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">gulp基本操作</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown"> 
 <h2 id="安装淘宝镜像">1、安装淘宝镜像</h2> 
 <p>npm install cnpm -g --registry=https://registry.npm.taobao.org</p> 
 <p>cnpm -v</p> 
 <h2 id="生成项目描述文件-package.json">2、生成项目描述文件 package.json</h2> 
 <p>npm init<br> cnpm init (可代替 npm init)</p> 
 <p>（需要项目名称、版本号、描述、入口文件、运行命令、作者、证书 ---- 一路按回车即可）</p> 
 <h2 id="全局安装gulp">3、全局安装gulp</h2> 
 <p>cnpm i gulp@3 -g</p> 
 <p><strong>全局安装gulp</strong></p> 
 <p><strong>@3 代表选择了 3 的版本</strong></p> 
 <p><strong>i 即为 install</strong></p> 
 <p><strong>-g 即为 --global</strong></p> 
 <p>gulp -v</p> 
 <h2 id="当前目录内部安装-gulp-模块">4、当前目录内部安装 gulp 模块</h2> 
 <p>cnpm i gulp@3 -D</p> 
 <p>cnpm i gulp@3 -S （二者选择其一即可）</p> 
 <p><strong>-D 缩写 --save-dev 开发依赖</strong></p> 
 <p><strong>-S 缩写 --save 项目依赖</strong></p> 
 <p>开发依赖： 开发过程中需要使用到的依赖的模块，项目上线时不需要的模块 --- 代码格式校验的模块</p> 
 <p>项目依赖： 项目上线仍然需要使用的模块</p> 
 <p>----- 如果不知道怎么选择，那你就写 -S</p> 
 <h2 id="创建文件-gulpfile.js-配置gulp">5、创建文件 gulpfile.js ,配置gulp</h2> 
 <pre><code>const gulp = require('gulp');</code></pre> 
 <h3 id="创建-index.html使用gulp完成对于index.html的复制操作复制到当前目录的dist目录内">5.1 创建 index.html，使用gulp完成对于index.html的复制操作，复制到当前目录的dist目录内</h3> 
 <pre><code>+++
// 复制index.html 到 dist 目录
gulp.task('copy-index', function () {
    gulp.src('./index.html')
        .pipe(gulp.dest('dist'))
})</code></pre> 
 <p>命令行执行了 gulp copy-index 发现多了 dist目录</p> 
 <h3 id="gulpcssa.css-gulpcssb.css">5.2 gulp/css/a.css + gulp/css/b.css</h3> 
 <h4 id="复制-gulpcss-至-distcss">5.2.1 复制 gulp/css 至 dist/css</h4> 
 <p>gulp.src('./css/**/*')</p> 
 <p>拷贝css文件夹下的所有文件以及文件夹内的文件</p> 
 <pre><code>+++
gulp.task('copy-css', function () {
    gulp.src('./css/**/*')
        .pipe(gulp.dest('dist/css'))
})</code></pre> 
 <p>gulp copy-css</p> 
 <h4 id="合并css文件">5.2.2 合并css文件</h4> 
 <p>cnpm i gulp-concat -S</p> 
 <pre><code>//++++
const concat = require('gulp-concat');
gulp.task('copy-css', function () {
    gulp.src('./css/**/*') // 拿到所有的css
        // ++++
        .pipe(concat('main.css')) // 合并
        .pipe(gulp.dest('dist/css'))
})</code></pre> 
 <h4 id="压缩css">5.2.3 压缩css</h4> 
 <p>cnpm i gulp-minify-css -S</p> 
 <pre><code>// ++++
const minifyCss = require('gulp-minify-css');
gulp.task('copy-css', function () {
    gulp.src('./css/**/*') // 拿到所有的css
        .pipe(concat('main.css')) // 合并
        // ++++
        .pipe(minifyCss()) // 压缩
        .pipe(gulp.dest('dist/css'))
})</code></pre> 
 <h4 id="既要-未压缩的也要有压缩的">5.2.4 既要 未压缩的也要有压缩的</h4> 
 <p>cnpm i gulp-rename -S</p> 
 <p>重命名</p> 
 <p>合并代码放到dist/css</p> 
 <p>压缩css 重命名 再放到dist/css</p> 
 <pre><code>//+++
const rename = require('gulp-rename');
gulp.task('copy-css', function () {
    gulp.src('./css/**/*') // 拿到所有的css
        .pipe(concat('main.css')) // 合并
        //+++
        .pipe(gulp.dest('dist/css'))
        .pipe(minifyCss()) // 压缩
        //+++
        .pipe(rename('main.min.css'))
        .pipe(gulp.dest('dist/css'))
})</code></pre> 
 <h3 id="gulpjsa.js-gulpjsb.js">5.3 gulp/js/a.js + gulp/js/b.js</h3> 
 <h4 id="复制gulpjs-至-distjs">5.3.1 复制gulp/js 至 dist/js</h4> 
 <pre><code>gulp.task('copy-js', () =&gt; {
    gulp.src('./js/**/*')
        .pipe(gulp.dest('dist/js'))
})</code></pre> 
 <h4 id="合并js代码至-distjs">5.3.2 合并js代码至 dist/js</h4> 
 <pre><code>gulp.task('copy-js', () =&gt; {
    gulp.src('./js/**/*')
        // +++
        .pipe(concat('main.js'))
        .pipe(gulp.dest('dist/js'))
})</code></pre> 
 <h4 id="压缩js">5.3.3 压缩js</h4> 
 <p>cnpm i gulp-uglify -S</p> 
 <p>压缩js模块</p> 
 <pre><code>//+++
const uglify = require('gulp-uglify');

gulp.task('copy-js', () =&gt; {
    gulp.src('./js/**/*')
        .pipe(concat('main.js')) // 合并js
        // +++
        .pipe(uglify()) // 压缩js
        .pipe(gulp.dest('dist/js'))
})</code></pre> 
 <h4 id="合并压缩重命名">5.3.4 合并压缩重命名</h4> 
 <pre><code>gulp.task('copy-js', () =&gt; {
    gulp.src('./js/**/*')
        .pipe(concat('main.js')) // 合并js
        // +++
        .pipe(gulp.dest('dist/js'))
        .pipe(uglify()) // 压缩js
        // +++
        .pipe(rename('main.min.js'))
        .pipe(gulp.dest('dist/js'))
})</code></pre> 
 <h3 id="gulpassets-----图片">5.4 gulp/assets --- 图片</h3> 
 <h4 id="复制图片至-distassets">5.4.1 复制图片至 dist/assets</h4> 
 <pre><code>//+++
gulp.task('copy-images', () =&gt; {
    gulp.src('./assets/**/*')
        .pipe(gulp.dest('dist/assets'))
})</code></pre> 
 <h4 id="压缩图片">5.4.2 压缩图片</h4> 
 <p>cnpm i gulp-imagemin -S</p> 
 <pre><code>//+++ 
const imagemin = require('gulp-imagemin');
gulp.task('copy-images', () =&gt; {
    gulp.src('./assets/**/*')
        // +++
        .pipe(imagemin()) // 压缩图片
        .pipe(gulp.dest('dist/assets'))
})</code></pre> 
 <h3 id="处理数据-datahome.json-datakind.json">5.5 处理数据 data/home.json data/kind.json</h3> 
 <p>没有后端接口时，自己的模拟数据</p> 
 <p>复制</p> 
 <pre><code>// +++
gulp.task('copy-data', () =&gt; {
    gulp.src('./data/**/*')
        .pipe(gulp.dest('dist/data'))
})</code></pre> 
 <h2 id="一次性执行多个任务">6、一次性执行多个任务</h2> 
 <p>任务的名称不要自己随意定义，就写build<br> 命令端输入：gulp -build</p> 
 <pre><code>// +++
gulp.task('build', ['copy-index', 'copy-css', 'copy-js', 'copy-images', 'copy-data'], () =&gt; {
    console.log('success')
})</code></pre> 
 <h2 id="gulp-服务器">7、gulp 服务器</h2> 
 <p>cnpm i gulp-connect -S</p> 
 <p>server 任务名不能更改</p> 
 <pre><code>//+++
gulp.task('server', () =&gt; {
    connect.server({
        // 说明服务器的根目录
        root: 'dist',
        livereload: true // 实时更新
    })
})
</code></pre> 
 <h2 id="检测html文件css文件js文件图片数据的改变执行不同的任务">8、检测html文件、css文件、js文件、图片、数据的改变，执行不同的任务</h2> 
 <p>命令窗口输入：gulp -watch，执行完之后更改外面的文件内容，dist中的文件内容也会随之改变</p> 
 <pre><code>// +++
gulp.task('watch', () =&gt; {
    gulp.watch('index.html', ['copy-index'])
    gulp.watch('css/**/*', ['copy-css'])
    gulp.watch('js/**/*', ['copy-js'])
    gulp.watch('assets/**/*', ['copy-images'])
    gulp.watch('data/**/*', ['copy-data'])
})</code></pre> 
 <h2 id="同时默认执行-server-任务-和-watch-任务">9、同时默认执行 server 任务 和 watch 任务</h2> 
 <p>命令窗口输入：gulp</p> 
 <pre><code>gulp.task('default', ['server', 'watch'])</code></pre> 
 <p>gulp</p> 
 <h2 id="热更新-主动更新页面">10、热更新-主动更新页面</h2> 
 <p>在页面、css、js、图片、数据相关任务最后执行一句话，重新启动服务器</p> 
 <pre><code>gulp.task('copy-data', () =&gt; {
   gulp.src('./data/**/*')
       .pipe(gulp.dest('dist/data'))
       .pipe(connect.reload()) //*********************************************
})</code></pre> 
</div> 
<p>转载于:https://www.cnblogs.com/hy96/p/11593391.html</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cb76bbcc4dab85aa72bf191fe5504e0c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Redis注意事项</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fc743589fd594ee2c080fed403d50211/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MVC5使用T4模板建立Controller</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>