<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决无法使用VI的问题 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="解决无法使用VI的问题" />
<meta property="og:description" content="今天在一台sun solaris 5.10系统使用vi报错：
# vi a
Unable to setup term:&#39;unknown&#39; missing in the terminfo database: No such file or directory
从这个信息我们很难定位问题，我们用truss命令跟踪一下vi的命令需要调用那些东西：
# truss vi
execve(&#34;/usr/bin/vi&#34;, 0xFFBFFE1C, 0xFFBFFE24) argc = 1
resolvepath(&#34;/usr/lib/ld.so.1&#34;, &#34;/lib/ld.so.1&#34;, 1023) = 12
resolvepath(&#34;/usr/bin/vi&#34;, &#34;/usr/bin/vi&#34;, 1023) = 11
stat(&#34;/usr/bin/vi&#34;, 0xFFBFFBF8) = 0
open(&#34;/var/ld/ld.config&#34;, O_RDONLY) Err#2 ENOENT
stat(&#34;/lib/libmapmalloc.so.1&#34;, 0xFFBFF718) Err#2 ENOENT
......
access(&#34;/usr/share/lib/terminfo/&#34;, F_OK) = 0
Unable to setup term:&#39;unknown&#39; missing in the terminfo databasewrite(2, &#34; U n a b l e t o s e&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ed217ab25d28b0a5dbd3a3dc1bcd2a19/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-30T14:54:07+08:00" />
<meta property="article:modified_time" content="2019-03-30T14:54:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决无法使用VI的问题</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="preview-main"> 
 <p>今天在一台sun solaris 5.10系统使用vi报错：<br># vi a<br>Unable to setup term:'unknown' missing in the terminfo database: No such file or directory</p> 
 <p></p> 
 <br> 
 从这个信息我们很难定位问题，我们用truss命令跟踪一下vi的命令需要调用那些东西：<br># truss vi<br>execve("/usr/bin/vi", 0xFFBFFE1C, 0xFFBFFE24) argc = 1<br>resolvepath("/usr/lib/ld.so.1", "/lib/ld.so.1", 1023) = 12<br>resolvepath("/usr/bin/vi", "/usr/bin/vi", 1023) = 11<br>stat("/usr/bin/vi", 0xFFBFFBF8) = 0<br>open("/var/ld/ld.config", O_RDONLY) Err#2 ENOENT<br>stat("/lib/libmapmalloc.so.1", 0xFFBFF718) Err#2 ENOENT<br>......<br>access("/usr/share/lib/terminfo/", F_OK) = 0<br>Unable to setup term:'unknown' missing in the terminfo databasewrite(2, " U n a b l e t o s e".., 63) = 63<br>: write(2, " : ", 2) = 2<br>No such file or directorywrite(2, " N o s u c h f i l e".., 25) = 25<br><br>write(2, " ", 1) = 1<br>_exit(1)<br><br>从跟踪信息可以看到，vi是在查找/usr/share/lib/terminfo/的文件时报错。<br>我们看看这个命令下的文件：<br>bash-3.00# cd /usr/share/lib/terminfo<br>bash-3.00# ls<br>G t w y z<br><br>找一个可以正常使用vi的系统看看有那些文件：<br># cd /usr/share/lib/terminfo<br># ls <br>1 3 5 7 9 B H P a c e g i k m o q s u w y<br>2 4 6 8 A G M S b d f h j l n p r t v x z<br><br>可以发现，两者相差很大。把vi出错的系统缺失的文件拷贝回去，vi就可以正常运行了。<br>实际上，要使vi正常运行，只需要拷贝文件夹v下面的文件过去即可。 
 <p style="clear:both;"></p> 
 <p class="translate"> 来自 “ ITPUB博客 ” ，链接：http://blog.itpub.net/231499/viewspace-63850/，如需转载，请注明出处，否则将追究法律责任。 </p> 
</div> 
<p>转载于:http://blog.itpub.net/231499/viewspace-63850/</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5f6dbada132596e22f24d8d6aa0772c9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">StatefulWidget initState()方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8012a12ed8bd613b67c7529d841ef503/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Boot项目制作Jar包和Jar包结构的分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>