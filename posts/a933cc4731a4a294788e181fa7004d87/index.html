<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>å¦‚ä½•åº”ç”¨PythonåŠ©ä½ åœ¨è‚¡ç¥¨ä¸­è·åˆ©ï¼Ÿ - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="å¦‚ä½•åº”ç”¨PythonåŠ©ä½ åœ¨è‚¡ç¥¨ä¸­è·åˆ©ï¼Ÿ" />
<meta property="og:description" content="å­¦ä¹ å¦‚ä½•åˆ©ç”¨Pythonåˆ›å»ºæ¨¡å‹,ä»¥æ ¹æ®è´¢åŠ¡æŠ¥è¡¨è®¡ç®—è‚¡ç¥¨çš„å…¬å…ä»·å€¼ã€‚
æ‰«ç å…³æ³¨ã€ŠPythonå­¦ç ”å¤§æœ¬è¥ã€‹ï¼ŒåŠ å…¥è¯»è€…ç¾¤ï¼Œåˆ†äº«æ›´å¤šç²¾å½©
è‚¡ç¥¨å¸‚åœºä¸­éœ€è¦ä½ä¹°é«˜å–çš„æŠ•èµ„ç­–ç•¥ï¼Œå¿…é¡»ä»¥åˆç†çš„ä»·æ ¼è´­ä¹°æŠ•èµ„ï¼Œè¿™æ„å‘³ç€ä»¥å…¬å…ä»·å€¼è´­ä¹°ã€‚ä½†æ˜¯å¦‚ä½•è®¡ç®—è‚¡ç¥¨çš„å…¬å…ä»·å€¼æˆ–å†…åœ¨ä»·å€¼å‘¢ï¼Ÿ
æœ‰å‡ ç§æ–¹æ³•å¯ä»¥è€ƒè™‘ï¼Œå…·ä½“æ¥è¯´ï¼š
ä¸€ç§æ–¹æ³•æ˜¯å…¬å…ä»·å€¼æ˜¯æœªæ¥è‡ªç”±ç°é‡‘æµçš„ç°å€¼ã€‚
å¦ä¸€ç§æ–¹å¼æ˜¯ï¼Œå…¬å…ä»·å€¼æ˜¯å¯ä»¥æ”¯ä»˜å¹¶äº§ç”Ÿæ‰€éœ€å›æŠ¥ç‡çš„ä»·æ ¼ã€‚
ç¬¬ä¸‰ç§æ–¹å¼æ˜¯ï¼Œå…¬å…ä»·å€¼æ˜¯åœ¨å½“å‰å€æ•°ä¸‹åŒ…å«è´¢åŠ¡æœªæ¥å¢é•¿çš„ä»·æ ¼ã€‚
å½“ç„¶ï¼Œä»–ä»¬éƒ½å‡è®¾åˆ†æå’Œæ¨¡å‹æ˜¯æ­£ç¡®çš„ã€‚éšç€å¤®è¡Œåˆ©ç‡æ”¿ç­–æ­£å¸¸åŒ–å’ŒæŠ•èµ„å›å½’åŸºæœ¬é¢ï¼Œè¿™äº›æ–¹æ³•è¶Šæ¥è¶Šå¤šåœ°é‡æ–°æˆä¸ºä¸»æµã€‚
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ ¹æ®æ¥è‡ªå…¬å¸å­£åº¦æŸç›Šè¡¨å’Œèµ„äº§è´Ÿå€ºè¡¨çš„è´¢åŠ¡æŒ‡æ ‡æ•°æ®åˆ›å»ºä¸‰ç§ä¸åŒçš„æ¨¡å‹ã€‚ä½¿ç”¨æ”¶ç›Šã€è‡ªç”±ç°é‡‘æµã€æ”¶å…¥ã€ç›¸åº”çš„å¢é•¿å’Œå‡ºè‰²çš„è‚¡ç¥¨ä½œä¸ºæ¨¡å‹çš„è¾“å…¥ã€‚è¿™å®é™…ä¸Šè¿›å…¥äº†ç¬¬ä¸‰ä¸ªå‡è®¾ï¼Œå…¶ä¸­å…¬å…ä»·å€¼æ˜¯åœ¨ç»™å®šå½“å‰å€æ•°çš„æƒ…å†µä¸‹åŒ…å«æœªæ¥å¢é•¿çš„ä»·æ ¼ã€‚
å¯¹äºé«˜è´¨é‡çš„åŸºæœ¬é¢æ•°æ®ï¼Œä½¿ç”¨EODçš„ APIï¼Œå¯¹äºä»·æ ¼æ•°æ®ï¼Œä½¿ç”¨ yfinanceã€‚
é¡¹ç›®ç‰¹ç‚¹ ä¸‹è½½ç»™å®šå…¬å¸çš„åŸºæœ¬é¢æ•°æ®ï¼ˆèµ„äº§è´Ÿå€ºè¡¨ã€æŸç›Šè¡¨ã€ç°é‡‘æµé‡è¡¨ï¼‰ã€‚
è®¡ç®—è´¢åŠ¡æŒ‡æ ‡æ¨¡å‹çš„è¾“å…¥ã€‚
å°†è¾“å…¥æ’å…¥æ¯ä¸ªæ¨¡å‹å¹¶ä¼°è®¡å…¬å¸çš„å…¬å¹³ä»·æ ¼ã€‚
å¯è§†åŒ–è‚¡ç¥¨çš„ä»·æ ¼åºåˆ—å¹¶å°†å¸‚åœºä»·æ ¼ä¸å…¬å…ä»·æ ¼è¿›è¡Œæ¯”è¾ƒã€‚
éœ€è¦å‡†å¤‡ä»¥ä¸‹å†…å®¹ï¼š Pythonï¼šå®‰è£… 3.9.7 ç‰ˆæœ¬ã€‚
Jupyter Notebookï¼šä¸ºæ“ä½œç³»ç»Ÿå®‰è£… Anacondaçš„ä¸ªäººç‰ˆæœ¬ï¼Œç¡®ä¿å·²ç»å®‰è£…äº† Jupyterã€‚
EOD API å¯†é’¥ï¼šæŒ‰ç…§æ­¤å¤„çš„è¯´æ˜è¿›è¡Œæ“ä½œã€‚
ä¸€æ—¦è®¾ç½®å¥½äº†ï¼Œå°±å¯ä»¥ç»§ç»­æ‰§è¡Œäº†ã€‚
å¼€å§‹ è®©æˆ‘ä»¬åŠ è½½æ•´ä¸ªé¡¹ç›®æ‰€éœ€çš„åŒ…å¹¶å¯åŠ¨æˆ‘ä»¬ä»¥åéœ€è¦çš„å˜é‡ã€‚
åŒ…æ˜¯ä¸€ç»„ç»“æ„åŒ–å‡½æ•°ï¼Œå¯ä»¥å¯¼å…¥åˆ°æˆ‘ä»¬çš„ Python è§£é‡Šå™¨ä¸­ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä»ä¸­è°ƒç”¨å’Œä½¿ç”¨å®ƒä»¬ã€‚
importÂ matplotlib.pyplotÂ asÂ plt importÂ requests importÂ pandasÂ asÂ pd fromÂ datetimeÂ importÂ * importÂ numpyÂ asÂ np importÂ json importÂ urllib.request importÂ yfinanceÂ asÂ yf importÂ warnings warnings.filterwarnings(&#39;ignore&#39;) EOD_API_KEYÂ =Â &#39;your-api-key&#39; SYMBOLÂ =Â &#39;FVRR.US&#39; æˆ‘ä¸ºè¿™ä¸ªæ¼”ç¤ºé€‰æ‹©äº† Fiverr è‚¡ç¥¨ (FVRR)ï¼Œå› ä¸ºå–œæ¬¢è¿™å®¶å…¬å¸ï¼Œè€Œä¸”æˆ‘è®¤ä¸ºè¯„ä¼°å…¶å½“å‰çš„å…¬å¹³ä»·æ ¼å’Œæ½œåœ¨çš„æœªæ¥å¢é•¿æœ‰ç‚¹å›°éš¾ï¼Œæ‰€ä»¥è¿™ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰è¶£çš„ç»ƒä¹ ã€‚ä½†æ˜¯ï¼Œæœ€ç»ˆä¼šå°†æ•´ä¸ªä»£ç ç»„åˆæˆä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥å¯¹æŒ‡å®šç»™å®ƒçš„ä»»ä½•è‚¡ç¥¨è¿›è¡Œæ­¤è¯„ä¼°ï¼" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a933cc4731a4a294788e181fa7004d87/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-06T05:22:23+08:00" />
<meta property="article:modified_time" content="2022-09-06T05:22:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">å¦‚ä½•åº”ç”¨PythonåŠ©ä½ åœ¨è‚¡ç¥¨ä¸­è·åˆ©ï¼Ÿ</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>å­¦ä¹ å¦‚ä½•åˆ©ç”¨Pythonåˆ›å»ºæ¨¡å‹,ä»¥æ ¹æ®è´¢åŠ¡æŠ¥è¡¨è®¡ç®—è‚¡ç¥¨çš„å…¬å…ä»·å€¼ã€‚</p> 
</blockquote> 
<p>æ‰«ç å…³æ³¨ã€ŠPythonå­¦ç ”å¤§æœ¬è¥ã€‹ï¼ŒåŠ å…¥è¯»è€…ç¾¤ï¼Œåˆ†äº«æ›´å¤šç²¾å½©</p> 
<p>è‚¡ç¥¨å¸‚åœºä¸­éœ€è¦ä½ä¹°é«˜å–çš„æŠ•èµ„ç­–ç•¥ï¼Œå¿…é¡»ä»¥åˆç†çš„ä»·æ ¼è´­ä¹°æŠ•èµ„ï¼Œè¿™æ„å‘³ç€ä»¥å…¬å…ä»·å€¼è´­ä¹°ã€‚ä½†æ˜¯å¦‚ä½•è®¡ç®—è‚¡ç¥¨çš„å…¬å…ä»·å€¼æˆ–å†…åœ¨ä»·å€¼å‘¢ï¼Ÿ</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d0/3c/y8D6J9ba_o.png"></p> 
<p>æœ‰å‡ ç§æ–¹æ³•å¯ä»¥è€ƒè™‘ï¼Œå…·ä½“æ¥è¯´ï¼š</p> 
<ul><li> <p>ä¸€ç§æ–¹æ³•æ˜¯å…¬å…ä»·å€¼æ˜¯æœªæ¥è‡ªç”±ç°é‡‘æµçš„ç°å€¼ã€‚</p> </li><li> <p>å¦ä¸€ç§æ–¹å¼æ˜¯ï¼Œå…¬å…ä»·å€¼æ˜¯å¯ä»¥æ”¯ä»˜å¹¶äº§ç”Ÿæ‰€éœ€å›æŠ¥ç‡çš„ä»·æ ¼ã€‚</p> </li><li> <p>ç¬¬ä¸‰ç§æ–¹å¼æ˜¯ï¼Œå…¬å…ä»·å€¼æ˜¯åœ¨å½“å‰å€æ•°ä¸‹åŒ…å«è´¢åŠ¡æœªæ¥å¢é•¿çš„ä»·æ ¼ã€‚</p> </li></ul> 
<p>å½“ç„¶ï¼Œä»–ä»¬éƒ½å‡è®¾åˆ†æå’Œæ¨¡å‹æ˜¯æ­£ç¡®çš„ã€‚éšç€å¤®è¡Œåˆ©ç‡æ”¿ç­–æ­£å¸¸åŒ–å’ŒæŠ•èµ„å›å½’åŸºæœ¬é¢ï¼Œè¿™äº›æ–¹æ³•è¶Šæ¥è¶Šå¤šåœ°é‡æ–°æˆä¸ºä¸»æµã€‚</p> 
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ ¹æ®æ¥è‡ªå…¬å¸å­£åº¦æŸç›Šè¡¨å’Œèµ„äº§è´Ÿå€ºè¡¨çš„è´¢åŠ¡æŒ‡æ ‡æ•°æ®åˆ›å»ºä¸‰ç§ä¸åŒçš„æ¨¡å‹ã€‚ä½¿ç”¨æ”¶ç›Šã€è‡ªç”±ç°é‡‘æµã€æ”¶å…¥ã€ç›¸åº”çš„å¢é•¿å’Œå‡ºè‰²çš„è‚¡ç¥¨ä½œä¸ºæ¨¡å‹çš„è¾“å…¥ã€‚è¿™å®é™…ä¸Šè¿›å…¥äº†ç¬¬ä¸‰ä¸ªå‡è®¾ï¼Œå…¶ä¸­å…¬å…ä»·å€¼æ˜¯åœ¨ç»™å®šå½“å‰å€æ•°çš„æƒ…å†µä¸‹åŒ…å«æœªæ¥å¢é•¿çš„ä»·æ ¼ã€‚</p> 
<p>å¯¹äºé«˜è´¨é‡çš„åŸºæœ¬é¢æ•°æ®ï¼Œä½¿ç”¨EODçš„ APIï¼Œå¯¹äºä»·æ ¼æ•°æ®ï¼Œä½¿ç”¨ yfinanceã€‚</p> 
<h3>é¡¹ç›®ç‰¹ç‚¹</h3> 
<ul><li> <p>ä¸‹è½½ç»™å®šå…¬å¸çš„åŸºæœ¬é¢æ•°æ®ï¼ˆèµ„äº§è´Ÿå€ºè¡¨ã€æŸç›Šè¡¨ã€ç°é‡‘æµé‡è¡¨ï¼‰ã€‚</p> </li><li> <p>è®¡ç®—è´¢åŠ¡æŒ‡æ ‡æ¨¡å‹çš„è¾“å…¥ã€‚</p> </li><li> <p>å°†è¾“å…¥æ’å…¥æ¯ä¸ªæ¨¡å‹å¹¶ä¼°è®¡å…¬å¸çš„å…¬å¹³ä»·æ ¼ã€‚</p> </li><li> <p>å¯è§†åŒ–è‚¡ç¥¨çš„ä»·æ ¼åºåˆ—å¹¶å°†å¸‚åœºä»·æ ¼ä¸å…¬å…ä»·æ ¼è¿›è¡Œæ¯”è¾ƒã€‚</p> </li></ul> 
<h3>éœ€è¦å‡†å¤‡ä»¥ä¸‹å†…å®¹ï¼š</h3> 
<ul><li> <p>Pythonï¼šå®‰è£… 3.9.7 ç‰ˆæœ¬ã€‚</p> </li><li> <p>Jupyter Notebookï¼šä¸ºæ“ä½œç³»ç»Ÿå®‰è£… Anacondaçš„ä¸ªäººç‰ˆæœ¬ï¼Œç¡®ä¿å·²ç»å®‰è£…äº† Jupyterã€‚</p> </li><li> <p>EOD API å¯†é’¥ï¼šæŒ‰ç…§æ­¤å¤„çš„è¯´æ˜è¿›è¡Œæ“ä½œã€‚</p> </li></ul> 
<p>ä¸€æ—¦è®¾ç½®å¥½äº†ï¼Œå°±å¯ä»¥ç»§ç»­æ‰§è¡Œäº†ã€‚</p> 
<h3>å¼€å§‹</h3> 
<p>è®©æˆ‘ä»¬åŠ è½½æ•´ä¸ªé¡¹ç›®æ‰€éœ€çš„åŒ…å¹¶å¯åŠ¨æˆ‘ä»¬ä»¥åéœ€è¦çš„å˜é‡ã€‚</p> 
<blockquote> 
 <p>åŒ…æ˜¯ä¸€ç»„ç»“æ„åŒ–å‡½æ•°ï¼Œå¯ä»¥å¯¼å…¥åˆ°æˆ‘ä»¬çš„ Python è§£é‡Šå™¨ä¸­ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä»ä¸­è°ƒç”¨å’Œä½¿ç”¨å®ƒä»¬ã€‚</p> 
</blockquote> 
<pre><code>importÂ matplotlib.pyplotÂ asÂ plt
importÂ requests
importÂ pandasÂ asÂ pd
fromÂ datetimeÂ importÂ *
importÂ numpyÂ asÂ np
importÂ json
importÂ urllib.request
importÂ yfinanceÂ asÂ yf
importÂ warnings
warnings.filterwarnings('ignore')

EOD_API_KEYÂ =Â 'your-api-key'

SYMBOLÂ =Â 'FVRR.US'
</code></pre> 
<p>æˆ‘ä¸ºè¿™ä¸ªæ¼”ç¤ºé€‰æ‹©äº† Fiverr è‚¡ç¥¨ (FVRR)ï¼Œå› ä¸ºå–œæ¬¢è¿™å®¶å…¬å¸ï¼Œè€Œä¸”æˆ‘è®¤ä¸ºè¯„ä¼°å…¶å½“å‰çš„å…¬å¹³ä»·æ ¼å’Œæ½œåœ¨çš„æœªæ¥å¢é•¿æœ‰ç‚¹å›°éš¾ï¼Œæ‰€ä»¥è¿™ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰è¶£çš„ç»ƒä¹ ã€‚ä½†æ˜¯ï¼Œæœ€ç»ˆä¼šå°†æ•´ä¸ªä»£ç ç»„åˆæˆä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥å¯¹æŒ‡å®šç»™å®ƒçš„ä»»ä½•è‚¡ç¥¨è¿›è¡Œæ­¤è¯„ä¼°ï¼</p> 
<p>ç°åœ¨ï¼Œåœ¨å¯¼å…¥äº†æ‰€æœ‰éœ€è¦çš„åŒ…ä¹‹åï¼Œè®©æˆ‘ä»¬ä»å®šä¹‰å°†ä½¿ç”¨çš„å‡½æ•°å¼€å§‹ã€‚</p> 
<h3>1. ä¸‹è½½ç»™å®šå…¬å¸çš„åŸºæœ¬é¢æ•°æ®</h3> 
<pre><code>defÂ get_data(symbol):
Â Â Â Â urlÂ =Â f'https://eodhistoricaldata.com/api/fundamentals/{symbol}?api_token={EOD_API_KEY}'
Â Â Â Â responseÂ =Â urllib.request.urlopen(url)
Â Â Â Â dataÂ =Â json.loads(response.read())
Â Â Â Â returnÂ data
Â Â Â Â 
Â Â Â Â dataÂ =Â get_data(symbol=SYMBOL)
Â Â Â Â 
Â Â Â Â print(data.keys())
</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/39/be/TLlRdFr5_o.png"></p> 
<p>å¯¹äºç»™å®šçš„è‚¡ç¥¨ï¼Œå¯ä»¥è·å¾—ç›¸å½“å¤šçš„æ•°æ®ï¼Œä½†æ˜¯å¯¹äºå…¬å¼ï¼Œå°†ä½¿ç”¨â€œè´¢åŠ¡â€ã€â€œæ”¶ç›Šâ€å’Œâ€œæ°å‡ºè‚¡ç¥¨â€ã€‚</p> 
<h3>2. åŸºäºè‡ªç”±ç°é‡‘æµçš„ä¼°å€¼</h3> 
<p>ğ¹ğ‘‰(ğ‘“ğ‘ğ‘“)=ğ‘“ğ‘ğ‘“pğ‘ âˆ—(1+ğ‘“ğ‘ğ‘“ğ‘”ğ‘Ÿğ‘œğ‘¤ğ‘¡â„)âˆ—(ğ‘ğ‘Ÿğ‘–ğ‘ğ‘’/ğ‘“ğ‘ğ‘“pğ‘ )</p> 
<pre><code>`fcfÂ =Â pd.DataFrame(data['Financials']['Cash_Flow']['quarterly']).T.sort_index()['freeCashFlow'].astype(float)[-1]

fcf_growthÂ =Â pd.DataFrame(data['Financials']['Cash_Flow']['quarterly']).T.sort_index()\
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ['freeCashFlow'].astype(float).pct_change().rolling(20).mean()[-1]

shares_outsÂ =Â round(pd.DataFrame(data['outstandingShares']['quarterly']).T.set_index('dateFormatted')\
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .sort_index()['shares'].astype(float)[-1],0)

priceÂ =Â yf.download(SYMBOL.split('.')[0],Â date.today()-pd.DateOffset(5),Â date.today())['AdjÂ Close'][-1]

fcf_per_shareÂ =Â fcf/shares_outs

print(f'fcf_fair_value:Â {fcf_per_share*(1+fcf_growth)*(price/fcf_per_share)}')``

</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a1/b9/v11BmnWW_o.png"></p> 
<p>å¯¹äºåŸºäºè‡ªç”±ç°é‡‘æµçš„ä¼°å€¼ï¼Œä½¿ç”¨æœ€æ–°çš„å­£åº¦è‡ªç”±ç°é‡‘æµ<code>fcf</code>ï¼Œç„¶åä½¿ç”¨è¿‡å»20ä¸ªå­£åº¦çš„å¹³å‡å­£åº¦è‡ªç”±ç°é‡‘æµå˜åŒ–ä½œä¸ºé¢„æœŸæŒ‡æ ‡<code>fcf_growth</code>ï¼Œç„¶åä½¿ç”¨æµé€šè‚¡<code>shares_outs</code>å’Œæœ€æ–°ä»·æ ¼ã€‚è‡³äº<code>price</code>è®¡ç®—æ¯è‚¡è‡ªç”±ç°é‡‘æµé‡å’Œæœ€ç»ˆå…¬å¼ã€‚</p> 
<h3>3. åŸºäºæ”¶å…¥/é”€å”®çš„ä¼°å€¼</h3> 
<p><strong>ğ¹ğ‘‰(ğ‘ ğ‘ğ‘™ğ‘’ğ‘ )=ğ‘ ğ‘ğ‘ âˆ—(1+ğ‘ ğ‘ğ‘™ğ‘’ğ‘ ğ‘”ğ‘Ÿğ‘œğ‘¤ğ‘¡â„)âˆ—(ğ‘ğ‘Ÿğ‘–ğ‘ğ‘’/ğ‘ ğ‘ğ‘ )</strong></p> 
<pre><code>salesÂ =Â pd.DataFrame(data['Financials']['Income_Statement']['quarterly']).T.sort_index()\
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ['totalRevenue'].astype(float)[-1]
Â Â Â Â 
sales_growthÂ =Â pd.DataFrame(data['Financials']['Income_Statement']['quarterly']).T.sort_index()\
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ['totalRevenue'].astype(float).pct_change().rolling(20).mean()[-1]

priceÂ =Â yf.download(SYMBOL.split('.')[0],Â date.today()-pd.DateOffset(5),Â date.today())['AdjÂ Close'][-1]

shares_outsÂ =Â round(pd.DataFrame(data['outstandingShares']['quarterly']).T.set_index('dateFormatted')\
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .sort_index()['shares'].astype(float)[-1],0)

sales_per_shareÂ =Â sales/shares_outs

print(f'sps_fair_value:Â {sales_per_share*(1+sales_growth)*(price/sales_per_share)}')
</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/2d/61/04Ptli6Y_o.png"></p> 
<p>å¯¹äºåŸºäºæ”¶å…¥/é”€å”®çš„ä¼°å€¼ï¼Œä½¿ç”¨æœ€æ–°çš„å­£åº¦æ€»æ”¶å…¥ä½œä¸º<code>sales</code>ï¼Œç„¶å<code>sales_growth</code>ä½¿ç”¨è¿‡å» 20 ä¸ªå­£åº¦çš„å¹³å‡æ€»æ”¶å…¥å˜åŒ–ï¼Œç„¶åå†æ¬¡ä½¿ç”¨æµé€šè‚¡ä½œä¸º<code>shares_outs</code>å’Œæœ€æ–°ä»·æ ¼<code>price</code>æ¥è®¡ç®—æ¯åˆ†äº«å’Œæœ€ç»ˆå…¬å¼ã€‚</p> 
<h3>4. åŸºäºæ”¶ç›Šçš„ä¼°å€¼</h3> 
<p><strong>ğ¹ğ‘‰(ğ‘ğ‘’)=ğ‘’ğ‘ğ‘ âˆ—(1+ğ‘’ğ‘ğ‘ ğ‘”ğ‘Ÿğ‘œğ‘¤ğ‘¡â„)âˆ—ğ‘ğ‘’</strong></p> 
<pre><code>epsÂ =Â pd.DataFrame(data['Earnings']['Annual']).T.sort_index()['epsActual'][-1]

eps_growthÂ =Â np.mean(pd.DataFrame(data['Earnings']['Trend']).T.sort_index()\
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ['earningsEstimateGrowth'].astype(float).values)

priceÂ =Â yf.download(SYMBOL.split('.')[0],Â date.today()-pd.DateOffset(5),Â date.today())['AdjÂ Close'][-1]

peÂ =Â price/eps

print(f'pe_fair_value:Â {eps*(1+eps_growth)*pe}')
</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/af/2e/QNAYSUNT_o.png"></p> 
<p>å¯¹äºåŸºäºæ”¶ç›Šçš„ä¼°å€¼ï¼Œä½¿ç”¨å¹´æ”¶ç›Šä½œä¸º epsï¼Œæ¥ä¸‹æ¥ä½¿ç”¨å¯ç”¨çš„ EarningsEstimatedGrowth ä½œä¸º eps_growthï¼Œä½¿ç”¨æœ€æ–°çš„è‚¡ä»·æ¥è®¡ç®—æœ€æ–°çš„å¸‚ç›ˆç‡å’Œå…¬å¼ã€‚</p> 
<p><strong>åœ¨å®Œæˆæ‰€æœ‰ä¸‰ä¸ªæ–¹æ³•ä¹‹åï¼Œç°åœ¨å¯ä»¥å°†æ‰€æœ‰å†…å®¹æ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°å°†äº¤æ˜“å“ç§åç§°ä½œä¸ºå‚æ•°å¹¶è®¡ç®—æ‰€æœ‰ä¸‰ä¸ªå…¬å…ä»·å€¼å¹¶ä¸å½“å‰è‚¡ä»·è¿›è¡Œæ¯”è¾ƒï¼</strong></p> 
<h3>5. æ”¾åœ¨ä¸€èµ·</h3> 
<pre><code>importÂ matplotlib.pyplotÂ asÂ plt
importÂ requests
importÂ pandasÂ asÂ pd
fromÂ datetimeÂ importÂ *
importÂ numpyÂ asÂ np
importÂ json
importÂ urllib.request
importÂ yfinanceÂ asÂ yf
importÂ warnings
warnings.filterwarnings('ignore')

EOD_API_KEYÂ =Â 'your_api_key'

SYMBOLÂ =Â 'FVRR.US'


defÂ get_data(symbol,Â api_key):
Â Â Â Â urlÂ =Â f'https://eodhistoricaldata.com/api/fundamentals/{symbol}?api_token={EOD_API_KEY}'
Â Â Â Â 
Â Â Â Â responseÂ =Â urllib.request.urlopen(url)
Â Â Â Â 
Â Â Â Â dataÂ =Â json.loads(response.read())
Â Â Â Â 
Â Â Â Â returnÂ data


defÂ get_financial_metrics_valuation(data):
Â Â Â Â 
Â Â Â Â epsÂ =Â pd.DataFrame(data['Earnings']['Annual']).T.sort_index()['epsActual'][-1]

Â Â Â Â eps_growthÂ =Â np.mean(pd.DataFrame(data['Earnings']['Trend']).T.sort_index()['earningsEstimateGrowth'].astype(float).values)
Â Â Â Â 
Â Â Â Â fcfÂ =Â pd.DataFrame(data['Financials']['Cash_Flow']['quarterly']).T.sort_index()['freeCashFlow'].astype(float)[-1]
Â Â Â Â 
Â Â Â Â fcf_growthÂ =Â pd.DataFrame(data['Financials']['Cash_Flow']['quarterly']).T.sort_index()\
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ['freeCashFlow'].astype(float).pct_change().rolling(20).mean()[-1]
Â Â Â Â 
Â Â Â Â salesÂ =Â pd.DataFrame(data['Financials']['Income_Statement']['quarterly']).T.sort_index()['totalRevenue'].astype(float)[-1]
Â Â Â Â 
Â Â Â Â sales_growthÂ =Â pd.DataFrame(data['Financials']['Income_Statement']['quarterly']).T.sort_index()\
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ['totalRevenue'].astype(float).pct_change().rolling(20).mean()[-1]
Â Â Â Â 
Â Â Â Â shares_outsÂ =Â round(pd.DataFrame(data['outstandingShares']['quarterly']).T.set_index('dateFormatted')\
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .sort_index()['shares'].astype(float)[-1],0)
Â Â Â Â 
Â Â Â Â priceÂ =Â yf.download(SYMBOL.split('.')[0],Â date.today()-pd.DateOffset(5),Â date.today())['AdjÂ Close'][-1]

Â Â Â Â peÂ =Â price/eps
Â Â Â Â 
Â Â Â Â fcf_per_shareÂ =Â fcf/shares_outs
Â Â Â Â 
Â Â Â Â sales_per_shareÂ =Â sales/shares_outs
Â Â Â Â 
Â Â Â Â dfÂ =Â {}
Â Â Â Â 
Â Â Â Â df['pe_intrinsic_value']Â =Â eps*(1+eps_growth)*pe
Â Â Â Â 
Â Â Â Â df['fcf_intrinsic_value']Â =Â fcf_per_share*(1+fcf_growth)*(price/fcf_per_share)
Â Â Â Â 
Â Â Â Â df['sales_intrinsic_value']Â =Â sales_per_share*(1+sales_growth)*(price/sales_per_share)
Â Â Â Â 
Â Â Â Â df['current_price']Â =Â price
Â Â Â Â 
Â Â Â Â returnÂ pd.DataFrame(df,Â index=pd.Series(SYMBOL))


dataÂ =Â get_data(symbol=SYMBOL,Â api_key=EOD_API_KEY)

fair_valuesÂ =Â get_financial_metrics_valuation(data)

fair_values
</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/14/76/M7kpujAg_o.png"></p> 
<p>æœ€ç»ˆå¾—åˆ°äº†ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„å°è„šæœ¬ï¼Œå¯ä»¥ä½¿ç”¨æ¥è‡ª EOD çš„ API çš„æ•°æ®ä»æ ¹æœ¬ä¸Šè¯„ä¼°æƒ³è¦çš„ä»»ä½•è‚¡ç¥¨ã€‚ä»ç›®å‰çš„åˆ†æä¸­ï¼Œå¯ä»¥çœ‹åˆ° FVRR çš„å½“å‰ä»·æ ¼å¯èƒ½è¢«ç•¥å¾®ä½ä¼°äº†ã€‚æ­¤å¤–ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°ä¸‰ä¸ªæ¨¡å‹ä»·æ ¼å¯¹åº”çš„è‚¡ç¥¨ä»·æ ¼å’Œç»˜å›¾çº¿ï¼Œè¿™æ ·æ›´å®¹æ˜“ç›´è§‚åœ°äº†è§£è‚¡ç¥¨å½“å‰çš„ä½ç½®ã€‚</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/48/e3/AzHMykV6_o.png"></p> 
<h3>æœ€åçš„æƒ³æ³•</h3> 
<p>å°½ç®¡ä¼°å€¼æ¨¡å‹è¢«æç¤ºå‡è®¾å’Œé”™è¯¯ï¼Œä½†é€šè¿‡ä¸€äº›ç®€å•çš„æ•°å­¦å’Œè´¨é‡æ•°æ®ï¼Œèƒ½å¤Ÿä¼°è®¡ç»™å®šè‚¡ç¥¨çš„ä¸€ç³»åˆ—å…¬å…ä»·å€¼ã€‚è¿™å¯ä»¥å¾ˆå®¹æ˜“åœ°å¢å¼ºæˆ‘ä»¬çš„æŠ•èµ„åˆ†æèƒ½åŠ›ï¼Œå¹¶ä¸ºæˆ‘ä»¬æä¾›ç²¾ç¡®çš„åŸºçº¿æˆ–èµ·ç‚¹ï¼</p> 
<p>ä½†æ˜¯ï¼Œå»ºè®®æ‚¨åœ¨é‡åˆ°æŠ•èµ„åˆ†æã€äº¤æ˜“æŠ€æœ¯æˆ–ç­–ç•¥æ—¶å§‹ç»ˆéµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š</p> 
<ul><li> <p>å¯¹æ‰€åšçš„æ¯ä¸€ä¸ªåˆ†æéƒ½æœ‰æ‰¹åˆ¤çš„å¿ƒæ€ã€‚</p> </li><li> <p>ç¡®ä¿å·²ç»ä½¿ç”¨ç°å®ç”Ÿæ´»ä¸­çš„æ¨¡æ‹Ÿå’Œæ¡ä»¶å¯¹å…¶è¿›è¡Œäº†å›æµ‹ã€‚</p> </li><li> <p>å¦‚æœæœ‰å¥½çš„æ½œåŠ›ï¼Œè¯·é€šè¿‡å‰ç»æµ‹è¯•ã€‚</p> </li></ul> 
<p>åŠ æ²¹å§ï¼</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b1/4d/2u94vnEO_o.gif"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/47/f8/kROgWCIa_o.png"></p> 
<h3>æ¨èä¹¦å•</h3> 
<h4>ã€ŠPythonæ•°æ®å¯è§†åŒ–ã€‹</h4> 
<p>è´­ä¹°é“¾æ¥ï¼š https://item.jd.com/12670073.html</p> 
<p>ã€ŠPythonæ•°æ®å¯è§†åŒ–ã€‹è¯¦ç»†é˜è¿°äº†ä¸Pythonæ•°æ®å¯è§†åŒ–ç›¸å…³çš„åŸºæœ¬è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦åŒ…æ‹¬æ•°æ®å¯è§†åŒ–å’Œæ•°æ®æ¢ç´¢çš„é‡è¦æ€§ã€ç»˜å›¾çŸ¥è¯†ã€Matplotlibã€åˆ©ç”¨Seabornç®€åŒ–å¯è§†åŒ–æ“ä½œã€ç»˜åˆ¶åœ°ç†ç©ºé—´æ•°æ®ã€åŸºäºBokehçš„äº¤äº’å¼æ“ä½œç­‰å†…å®¹ã€‚æ­¤å¤–ï¼Œè¯¥ä¹¦è¿˜æä¾›äº†ç›¸åº”çš„ç¤ºä¾‹ã€ä»£ç ï¼Œä»¥å¸®åŠ©è¯»è€…è¿›ä¸€æ­¥ç†è§£ç›¸å…³æ–¹æ¡ˆçš„å®ç°è¿‡ç¨‹ã€‚</p> 
<p>ã€ŠPythonæ•°æ®å¯è§†åŒ–ã€‹é€‚åˆä½œä¸ºé«˜ç­‰é™¢æ ¡è®¡ç®—æœºåŠç›¸å…³ä¸“ä¸šçš„æ•™æå’Œæ•™å­¦å‚è€ƒä¹¦ï¼Œä¹Ÿå¯ä½œä¸ºç›¸å…³å¼€å‘äººå‘˜çš„è‡ªå­¦æ•™æå’Œå‚è€ƒæ‰‹å†Œã€‚</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/33/fc/ITIXOm7J_o.jpg"></p> 
<blockquote> 
 <blockquote> 
  <h3>ç²¾å½©å›é¡¾</h3> 
  <p><a href="https://mp.weixin.qq.com/s?__biz=Mzg4Mzc3NTM4Ng==&amp;mid=2247484818&amp;idx=1&amp;sn=7803b7b00f5986f1f05f388e66f38bd4&amp;chksm=cf430767f8348e71f3f6b47d662fc7674b9f25604065f85217a822c93eb0a7b738164db70b7c#rd" rel="nofollow" title="å¯è§†åŒ–æ¡ˆä¾‹ç ”ç©¶â€”â€”ä»¥æ™ºåˆ©æ€»ç»Ÿé€‰ä¸¾ä¸ºä¾‹">å¯è§†åŒ–æ¡ˆä¾‹ç ”ç©¶â€”â€”ä»¥æ™ºåˆ©æ€»ç»Ÿé€‰ä¸¾ä¸ºä¾‹</a></p> 
  <p><a href="https://mp.weixin.qq.com/s?__biz=Mzg4Mzc3NTM4Ng==&amp;mid=2247484878&amp;idx=1&amp;sn=ed99110ec51e4b8af85660dff0aa0114&amp;chksm=cf43073bf8348e2d8c694650e3595fb79e6d8c201aca5e474462c943dee52cc0672505895d3b#rd" rel="nofollow" title="æƒ³ç”¨Pythonèµšé’±ï¼Ÿâ€”â€”å®‰æ’ï¼">æƒ³ç”¨Pythonèµšé’±ï¼Ÿâ€”â€”å®‰æ’ï¼</a></p> 
  <p><a href="https://mp.weixin.qq.com/s?__biz=Mzg4Mzc3NTM4Ng==&amp;mid=2247485644&amp;idx=1&amp;sn=5da4baa9020c119327297a454d1ae57f&amp;chksm=cf430a39f834832f178434872a30a7619c5b831345f05a4d1445d997809fd780c428553d419f#rd" rel="nofollow" title="ã€æ¡ˆä¾‹ã€‘å¦‚ä½•ä½¿ç”¨Flaskæ„å»ºå¤©æ°”é¢„æŠ¥Â ">ã€æ¡ˆä¾‹ã€‘å¦‚ä½•ä½¿ç”¨Flaskæ„å»ºå¤©æ°”é¢„æŠ¥Â </a></p> 
 </blockquote> 
</blockquote> 
<blockquote> 
 <blockquote> 
  <p>æ‰«ç å…³æ³¨ã€ŠPythonå­¦ç ”å¤§æœ¬è¥ã€‹ï¼ŒåŠ å…¥è¯»è€…ç¾¤ï¼Œåˆ†äº«æ›´å¤šç²¾å½©</p> 
 </blockquote> 
</blockquote>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/858e64a0907400614619c8837a8acb0c/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">äººå·¥ç¥ç»ç½‘ç»œçš„ç»“æ„æ¨¡å‹,ç¥ç»ç½‘ç»œæ¨¡å‹ç»“æ„å›¾</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/824e8b74a9b38382aef92ff63930a41d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">vue3é¡¹ç›®å¯åŠ¨æŠ¥é”™ in ./src/App.vue?vue&amp;type=style&amp;index=0&amp;lang=scssè§£å†³åŠæ³•</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>