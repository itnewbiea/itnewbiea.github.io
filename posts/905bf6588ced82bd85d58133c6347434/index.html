<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CMake使用介绍2 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CMake使用介绍2" />
<meta property="og:description" content=" 正式工程构建 正式的源码工程应该有以下几个目录：
-bin 存放最终的可执行文件 -build 存放编译中间文件 -include 头文件 -src 源代码文件 --main.cpp -CMakeLists.txt 其中CMakeLists.txt文件中的内容如下：
cmake_minimum_required (VERSION 3.10.2) project (math) # 设置cmake的全局变量 set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin) #添加头文件路径，相当于makefile里面的-I include_directories(${PROJECT_SOURCE_DIR}/include) aux_source_directory (src SRC_LIST) add_executable (main main.cpp ${SRC_LIST}) 然后执行cmake..，所有的编译中间文件都会在build目录下，最终可执行文件在bin目录下。
CMake常用的预定义变量 PROJECT_NAME : 通过 project() 指定项目名称 PROJECT_SOURCE_DIR : 工程的根目录 PROJECT_BINARY_DIR : 执行 cmake 命令的目录 CMAKE_CURRENT_SOURCE_DIR : 当前 CMakeList.txt 文件所在的目录 CMAKE_CURRENT_BINARY_DIR : 编译目录，可使用 add subdirectory 来修改 EXECUTABLE_OUTPUT_PATH : 二进制可执行文件输出位置 LIBRARY_OUTPUT_PATH : 库文件输出位置 BUILD_SHARED_LIBS : 默认的库编译方式 ( shared 或 static ) ，默认为 static CMAKE_C_FLAGS : 设置 C 编译选项 CMAKE_CXX_FLAGS : 设置 C&#43;&#43; 编译选项 CMAKE_CXX_FLAGS_DEBUG : 设置编译类型 Debug 时的编译选项 CMAKE_CXX_FLAGS_RELEASE : 设置编译类型 Release 时的编译选项 CMAKE_GENERATOR : 编译器名称 CMAKE_COMMAND : CMake 可执行文件本身的全路径 CMAKE_BUILD_TYPE : 工程编译生成的版本， Debug / Release " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/905bf6588ced82bd85d58133c6347434/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-12T17:28:08+08:00" />
<meta property="article:modified_time" content="2023-06-12T17:28:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CMake使用介绍2</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>正式工程构建</h2> 
<p>正式的源码工程应该有以下几个目录：</p> 
<pre><code class="prism language-cpp"><span class="token operator">-</span>bin  存放最终的可执行文件
<span class="token operator">-</span>build 存放编译中间文件
<span class="token operator">-</span>include 头文件
<span class="token operator">-</span>src 源代码文件
	<span class="token operator">--</span>main<span class="token punctuation">.</span>cpp
<span class="token operator">-</span>CMakeLists<span class="token punctuation">.</span>txt
</code></pre> 
<p>其中CMakeLists.txt文件中的内容如下：</p> 
<pre><code class="prism language-cpp"><span class="token function">cmake_minimum_required</span> <span class="token punctuation">(</span>VERSION <span class="token number">3.10</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">project</span> <span class="token punctuation">(</span>math<span class="token punctuation">)</span>
# 设置cmake的全局变量
<span class="token function">set</span><span class="token punctuation">(</span>EXECUTABLE_OUTPUT_PATH $<span class="token punctuation">{<!-- --></span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>bin<span class="token punctuation">)</span>
#添加头文件路径，相当于makefile里面的<span class="token operator">-</span>I
<span class="token function">include_directories</span><span class="token punctuation">(</span>$<span class="token punctuation">{<!-- --></span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>include<span class="token punctuation">)</span>
<span class="token function">aux_source_directory</span> <span class="token punctuation">(</span>src SRC_LIST<span class="token punctuation">)</span>
<span class="token function">add_executable</span> <span class="token punctuation">(</span>main main<span class="token punctuation">.</span>cpp $<span class="token punctuation">{<!-- --></span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>然后执行<code>cmake..</code>，所有的编译中间文件都会在build目录下，最终可执行文件在bin目录下。</p> 
<h2><a id="CMake_26"></a>CMake常用的预定义变量</h2> 
<pre><code class="prism language-cpp">PROJECT_NAME <span class="token operator">:</span> 通过 <span class="token function">project</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 指定项目名称
PROJECT_SOURCE_DIR <span class="token operator">:</span> 工程的根目录
PROJECT_BINARY_DIR <span class="token operator">:</span> 执行 cmake 命令的目录
CMAKE_CURRENT_SOURCE_DIR <span class="token operator">:</span> 当前 CMakeList<span class="token punctuation">.</span>txt 文件所在的目录
CMAKE_CURRENT_BINARY_DIR <span class="token operator">:</span> 编译目录，可使用 add subdirectory 来修改
EXECUTABLE_OUTPUT_PATH <span class="token operator">:</span> 二进制可执行文件输出位置
LIBRARY_OUTPUT_PATH <span class="token operator">:</span> 库文件输出位置
BUILD_SHARED_LIBS <span class="token operator">:</span> 默认的库编译方式 <span class="token punctuation">(</span> shared 或 <span class="token keyword">static</span> <span class="token punctuation">)</span> ，默认为 <span class="token keyword">static</span>
CMAKE_C_FLAGS <span class="token operator">:</span> 设置 C 编译选项
CMAKE_CXX_FLAGS <span class="token operator">:</span> 设置 C<span class="token operator">++</span> 编译选项
CMAKE_CXX_FLAGS_DEBUG <span class="token operator">:</span> 设置编译类型 Debug 时的编译选项
CMAKE_CXX_FLAGS_RELEASE <span class="token operator">:</span> 设置编译类型 Release 时的编译选项
CMAKE_GENERATOR <span class="token operator">:</span> 编译器名称
CMAKE_COMMAND <span class="token operator">:</span> CMake 可执行文件本身的全路径
CMAKE_BUILD_TYPE <span class="token operator">:</span> 工程编译生成的版本， Debug <span class="token operator">/</span> Release
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b3a216ffadfa106f76a6f6d9faffe49/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">非要问Glide的源码吗？不会 会影响我开发吗？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a34abb90027f8006a63b2572564b0ace/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CSDN编写技巧</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>