<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HarmonyOS-ArkTS基本语法及声明式UI描述 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="HarmonyOS-ArkTS基本语法及声明式UI描述" />
<meta property="og:description" content="初识ArkTS语言 ArkTS是HarmonyOS优选的主力应用开发语言。ArkTS围绕应用开发在TypeScript（简称TS）生态基础上做了进一步扩展，继承了TS的所有特性，是TS的超集。因此，在学习ArkTS语言之前，建议开发者具备TS语言开发能力。
当前，ArkTS在TS的基础上主要扩展了如下能力：
基本语法：ArkTS定义了声明式UI描述、自定义组件和动态扩展UI元素的能力，再配合ArkUI开发框架中的系统组件及其相关的事件方法、属性方法等共同构成了UI开发的主体。状态管理：ArkTS提供了多维度的状态管理机制。在UI开发框架中，与UI相关联的数据可以在组件内使用，也可以在不同组件层级间传递，比如父子组件之间、爷孙组件之间，还可以在应用全局范围内传递或跨设备传递。另外，从数据的传递形式来看，可分为只读的单向传递和可变更的双向传递。开发者可以灵活的利用这些能力来实现数据和UI的联动。渲染控制：ArkTS提供了渲染控制的能力。条件渲染可根据应用的不同状态，渲染对应状态下的UI内容。循环渲染可从数据源中迭代获取数据，并在每次迭代过程中创建相应的组件。数据懒加载从数据源中按需迭代数据，并在每次迭代过程中创建相应的组件。 未来，ArkTS会结合应用开发/运行的需求持续演进，逐步提供并行和并发能力增强、系统类型增强、分布式开发范式等更多特性。
基本语法概述 在初步了解了ArkTS语言之后，我们以一个具体的示例来说明ArkTS的基本组成。如下图所示，当开发者点击按钮时，文本内容从“Hello World”变为“Hello ArkUI”。
图1 示例效果图
本示例中，ArkTS的基本组成如下所示。
图2 ArkTS的基本组成
装饰器： 用于装饰类、结构、方法以及变量，并赋予其特殊的含义。如上述示例中@Entry、@Component和@State都是装饰器，@Component表示自定义组件，@Entry表示该自定义组件为入口组件，@State表示组件中的状态变量，状态变量变化会触发UI刷新。UI描述：以声明式的方式来描述UI的结构，例如build()方法中的代码块。自定义组件：可复用的UI单元，可组合其他组件，如上述被@Component装饰的struct Hello。系统组件：ArkUI框架中默认内置的基础和容器组件，可直接被开发者调用，比如示例中的Column、Text、Divider、Button。属性方法：组件可以通过链式调用配置多项属性，如fontSize()、width()、height()、backgroundColor()等。事件方法：组件可以通过链式调用设置多个事件的响应逻辑，如跟随在Button后面的onClick()。 除此之外，ArkTS扩展了多种语法范式来使开发更加便捷：
@Builder/@BuilderParam：特殊的封装UI描述的方法，细粒度的封装和复用UI描述。@Extend/@Style：扩展内置组件和封装属性样式，更灵活地组合内置组件。stateStyles：多态样式，可以依据组件的内部状态的不同，设置不同样式。 声明式UI描述 ArkTS以声明方式组合和扩展组件来描述应用程序的UI，同时还提供了基本的属性、事件和子组件配置方法，帮助开发者实现应用交互逻辑。
创建组件 根据组件构造方法的不同，创建组件包含有参数和无参数两种方式。
说明
创建组件时不需要new运算符。
无参数 如果组件的接口定义没有包含必选构造参数，则组件后面的“()”不需要配置任何内容。例如，Divider组件不包含构造参数：
Column() { Text(&#39;item 1&#39;) Divider() Text(&#39;item 2&#39;) } 有参数 如果组件的接口定义包含构造参数，则在组件后面的“()”配置相应参数。
Image组件的必选参数src。
Image(&#39;https://xyz/test.jpg&#39;) Text组件的非必选参数content。
// string类型的参数 Text(&#39;test&#39;) // $r形式引入应用资源，可应用于多语言场景 Text($r(&#39;app.string.title_value&#39;)) // 无参数形式 Text() 变量或表达式也可以用于参数赋值，其中表达式返回的结果类型必须满足参数类型要求。
例如，设置变量或表达式来构造Image和Text组件的参数。
Image(this.imagePath) Image(&#39;https://&#39; &#43; this.imageUrl) Text(`count: ${this.count}`) 配置属性 属性方法以“.”链式调用的方式配置系统组件的样式和其他属性，建议每个属性方法单独写一行。
配置Text组件的字体大小。
Text(&#39;test&#39;) .fontSize(12) 配置组件的多个属性。
Image(&#39;test.jpg&#39;) .alt(&#39;error.jpg&#39;) .width(100) .height(100) 除了直接传递常量参数外，还可以传递变量或表达式。
Text(&#39;hello&#39;) ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4a35e7cbd6700cc0d1cd96c79bca1659/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-02T16:13:39+08:00" />
<meta property="article:modified_time" content="2024-01-02T16:13:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HarmonyOS-ArkTS基本语法及声明式UI描述</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="ArkTS_0"></a>初识ArkTS语言</h2> 
<p>ArkTS是HarmonyOS优选的主力应用开发语言。ArkTS围绕应用开发在<a href="https://www.typescriptlang.org/" rel="nofollow">TypeScript</a>（简称TS）生态基础上做了进一步扩展，继承了TS的所有特性，是TS的超集。因此，在学习ArkTS语言之前，建议开发者具备TS语言开发能力。</p> 
<p>当前，ArkTS在TS的基础上主要扩展了如下能力：</p> 
<ul><li><a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-basic-syntax-overview-0000001531611153-V2" rel="nofollow">基本语法</a>：ArkTS定义了声明式UI描述、自定义组件和动态扩展UI元素的能力，再配合ArkUI开发框架中的系统组件及其相关的事件方法、属性方法等共同构成了UI开发的主体。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-state-management-overview-0000001524537145-V2" rel="nofollow">状态管理</a>：ArkTS提供了多维度的状态管理机制。在UI开发框架中，与UI相关联的数据可以在组件内使用，也可以在不同组件层级间传递，比如父子组件之间、爷孙组件之间，还可以在应用全局范围内传递或跨设备传递。另外，从数据的传递形式来看，可分为只读的单向传递和可变更的双向传递。开发者可以灵活的利用这些能力来实现数据和UI的联动。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-rendering-control-overview-0000001543911149-V2" rel="nofollow">渲染控制</a>：ArkTS提供了渲染控制的能力。条件渲染可根据应用的不同状态，渲染对应状态下的UI内容。循环渲染可从数据源中迭代获取数据，并在每次迭代过程中创建相应的组件。数据懒加载从数据源中按需迭代数据，并在每次迭代过程中创建相应的组件。</li></ul> 
<p>未来，ArkTS会结合应用开发/运行的需求持续演进，逐步提供并行和并发能力增强、系统类型增强、分布式开发范式等更多特性。</p> 
<h2><a id="_14"></a>基本语法概述</h2> 
<p>在初步了解了ArkTS语言之后，我们以一个具体的示例来说明ArkTS的基本组成。如下图所示，当开发者点击按钮时，文本内容从“Hello World”变为“Hello ArkUI”。</p> 
<p><strong>图1</strong> 示例效果图</p> 
<p><img src="https://images2.imgbox.com/3e/31/B8iRwnpc_o.gif" alt="img"></p> 
<p>本示例中，ArkTS的基本组成如下所示。</p> 
<p><strong>图2</strong> ArkTS的基本组成</p> 
<p><img src="https://images2.imgbox.com/db/7f/6sRzq5zJ_o.png" alt="img"></p> 
<ul><li>装饰器： 用于装饰类、结构、方法以及变量，并赋予其特殊的含义。如上述示例中@Entry、@Component和@State都是装饰器，@Component表示自定义组件，@Entry表示该自定义组件为入口组件，@State表示组件中的状态变量，状态变量变化会触发UI刷新。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-declarative-ui-description-0000001524416537-V2" rel="nofollow">UI描述</a>：以声明式的方式来描述UI的结构，例如build()方法中的代码块。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-create-custom-components-0000001473537046-V2" rel="nofollow">自定义组件</a>：可复用的UI单元，可组合其他组件，如上述被@Component装饰的struct Hello。</li><li>系统组件：ArkUI框架中默认内置的基础和容器组件，可直接被开发者调用，比如示例中的Column、Text、Divider、Button。</li><li>属性方法：组件可以通过链式调用配置多项属性，如fontSize()、width()、height()、backgroundColor()等。</li><li>事件方法：组件可以通过链式调用设置多个事件的响应逻辑，如跟随在Button后面的onClick()。</li></ul> 
<p>除此之外，ArkTS扩展了多种语法范式来使开发更加便捷：</p> 
<ul><li><a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-builder-0000001524176981-V2" rel="nofollow">@Builder</a>/<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-builderparam-0000001524416541-V2" rel="nofollow">@BuilderParam</a>：特殊的封装UI描述的方法，细粒度的封装和复用UI描述。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-extend-0000001473696678-V2" rel="nofollow">@Extend</a>/<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-style-0000001473856690-V2" rel="nofollow">@Style</a>：扩展内置组件和封装属性样式，更灵活地组合内置组件。</li><li><a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-guides-V2/arkts-statestyles-0000001482592098-V2" rel="nofollow">stateStyles</a>：多态样式，可以依据组件的内部状态的不同，设置不同样式。</li></ul> 
<h2><a id="UI_43"></a>声明式UI描述</h2> 
<p>ArkTS以声明方式组合和扩展组件来描述应用程序的UI，同时还提供了基本的属性、事件和子组件配置方法，帮助开发者实现应用交互逻辑。</p> 
<h3><a id="_49"></a>创建组件</h3> 
<p>根据组件构造方法的不同，创建组件包含有参数和无参数两种方式。</p> 
<p>说明</p> 
<p>创建组件时不需要new运算符。</p> 
<h4><a id="_59"></a>无参数</h4> 
<p>如果组件的接口定义没有包含必选构造参数，则组件后面的“()”不需要配置任何内容。例如，Divider组件不包含构造参数：</p> 
<pre><code>Column() {
  Text('item 1')
  Divider()
  Text('item 2')
}
</code></pre> 
<h4><a id="_73"></a>有参数</h4> 
<p>如果组件的接口定义包含构造参数，则在组件后面的“()”配置相应参数。</p> 
<ul><li> <p>Image组件的必选参数src。</p> <pre><code>Image('https://xyz/test.jpg')
</code></pre> </li><li> <p>Text组件的非必选参数content。</p> <pre><code>// string类型的参数
Text('test')
// $r形式引入应用资源，可应用于多语言场景
Text($r('app.string.title_value'))
// 无参数形式
Text()
</code></pre> </li><li> <p>变量或表达式也可以用于参数赋值，其中表达式返回的结果类型必须满足参数类型要求。</p> <p>例如，设置变量或表达式来构造Image和Text组件的参数。</p> <pre><code>Image(this.imagePath)
Image('https://' + this.imageUrl)
Text(`count: ${this.count}`)
</code></pre> </li></ul> 
<h3><a id="_106"></a>配置属性</h3> 
<p>属性方法以“.”链式调用的方式配置系统组件的样式和其他属性，建议每个属性方法单独写一行。</p> 
<ul><li> <p>配置Text组件的字体大小。</p> <pre><code>Text('test')
  .fontSize(12)
</code></pre> </li><li> <p>配置组件的多个属性。</p> <pre><code>Image('test.jpg')
  .alt('error.jpg')    
  .width(100)    
  .height(100)
</code></pre> </li><li> <p>除了直接传递常量参数外，还可以传递变量或表达式。</p> <pre><code>Text('hello')
  .fontSize(this.size)
Image('test.jpg')
  .width(this.count % 2 === 0 ? 100 : 200)    
  .height(this.offset + 100)
</code></pre> </li><li> <p>对于系统组件，ArkUI还为其属性预定义了一些枚举类型供开发者调用，枚举类型可以作为参数传递，但必须满足参数类型要求。</p> <p>例如，可以按以下方式配置Text组件的颜色和字体样式。</p> <pre><code>Text('hello')
  .fontSize(20)
  .fontColor(Color.Red)
  .fontWeight(FontWeight.Bold)
</code></pre> </li></ul> 
<h3><a id="_149"></a>配置事件</h3> 
<p>事件方法以“.”链式调用的方式配置系统组件支持的事件，建议每个事件方法单独写一行。</p> 
<ul><li> <p>使用lambda表达式配置组件的事件方法。</p> <pre><code>Button('Click me')
  .onClick(() =&gt; {
    this.myText = 'ArkUI';
  })
</code></pre> </li><li> <p>使用匿名函数表达式配置组件的事件方法，要求使用bind，以确保函数体中的this指向当前组件。</p> <pre><code>Button('add counter')
  .onClick(function(){
    this.counter += 2;
  }.bind(this))
</code></pre> </li><li> <p>使用组件的成员函数配置组件的事件方法。</p> <pre><code>myClickHandler(): void {
  this.counter += 2;
}
...
Button('add counter')
  .onClick(this.myClickHandler.bind(this))
</code></pre> </li></ul> 
<h3><a id="_184"></a>配置子组件</h3> 
<p>如果组件支持子组件配置，则需在尾随闭包"{…}"中为组件添加子组件的UI描述。Column、Row、Stack、Grid、List等组件都是容器组件。</p> 
<ul><li> <p>以下是简单的Column组件配置子组件的示例。</p> <pre><code>Column() {
  Text('Hello')
    .fontSize(100)
  Divider()
  Text(this.myText)
    .fontSize(100)
    .fontColor(Color.Red)
}
</code></pre> </li><li> <p>容器组件均支持子组件配置，可以实现相对复杂的多级嵌套。</p> <pre><code>Column() {
  Row() {
    Image('test1.jpg')
      .width(100)
      .height(100)
    Button('click +1')
      .onClick(() =&gt; {
        console.info('+1 clicked!');
      })
  }
}

</code></pre> </li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8be266e18d59b0390fd0c8d6ed1a1aa2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">选择排序算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a2a3b635e64dd0c6fe2ebdaee462fe59/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">FastGPT的安装部署</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>