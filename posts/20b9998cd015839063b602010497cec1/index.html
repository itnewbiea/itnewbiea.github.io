<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>element中Tree 树形控件实现多选、展开折叠、全选全不选、父子联动、默认展开、默认选中、默认禁用、自定义节点内容、可拖拽节点、手风琴模式 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="element中Tree 树形控件实现多选、展开折叠、全选全不选、父子联动、默认展开、默认选中、默认禁用、自定义节点内容、可拖拽节点、手风琴模式" />
<meta property="og:description" content="目录 1.代码实现2. 效果图3. 使用到的部分属性说明4. 更多属性配置查看element官网 1.代码实现 &lt;template&gt; &lt;div class=&#34;TreePage&#34;&gt; &lt;el-checkbox v-model=&#34;menuExpand&#34; @change=&#34;handleCheckedTreeExpand($event, &#39;menu&#39;)&#34; &gt;展开/折叠&lt;/el-checkbox &gt; &lt;el-checkbox v-model=&#34;menuNodeAll&#34; @change=&#34;handleCheckedTreeNodeAll($event, &#39;menu&#39;)&#34; &gt;全选/全不选&lt;/el-checkbox &gt; &lt;el-checkbox v-model=&#34;menuCheckStrictly&#34; @change=&#34;handleCheckedTreeConnect($event, &#39;menu&#39;)&#34; &gt;父子联动&lt;/el-checkbox &gt; &lt;el-row :gutter=&#34;20&#34; style=&#34;margin-top: 20px&#34;&gt; &lt;!--村数据--&gt; &lt;el-col :span=&#34;24&#34;&gt; &lt;div class=&#34;head-container&#34;&gt; &lt;el-input v-model=&#34;deptName&#34; placeholder=&#34;请输入名称&#34; clearable size=&#34;small&#34; prefix-icon=&#34;el-icon-search&#34; style=&#34;margin-bottom: 20px&#34; /&gt; &lt;/div&gt; &lt;!-- 组织树 --&gt; &lt;div class=&#34;head-container&#34;&gt; &lt;el-tree ref=&#34;menu&#34; :props=&#34;defaultProps&#34; :default-expanded-keys=&#34;defaultExpandedKeys&#34; :default-checked-keys=&#34;defaultCheckedKeys&#34; :expand-on-click-node=&#34;false&#34; :data=&#34;menuOptions&#34; show-checkbox node-key=&#34;deptId&#34; :check-strictly=&#34;!menuCheckStrictly&#34; empty-text=&#34;加载中，请稍后&#34; :filter-node-method=&#34;filterNode&#34; @node-click=&#34;handleNodeClick&#34; draggable @node-drag-start=&#34;handleDragStart&#34; @node-drag-enter=&#34;handleDragEnter&#34; @node-drag-leave=&#34;handleDragLeave&#34; @node-drag-over=&#34;handleDragOver&#34; @node-drag-end=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/20b9998cd015839063b602010497cec1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-05T13:57:24+08:00" />
<meta property="article:modified_time" content="2024-01-05T13:57:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">element中Tree 树形控件实现多选、展开折叠、全选全不选、父子联动、默认展开、默认选中、默认禁用、自定义节点内容、可拖拽节点、手风琴模式</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#1_1" rel="nofollow">1.代码实现</a></li><li><a href="#2__312" rel="nofollow">2. 效果图</a></li><li><a href="#3__315" rel="nofollow">3. 使用到的部分属性说明</a></li><li><a href="#4_element_325" rel="nofollow">4. 更多属性配置查看element官网</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1_1"></a>1.代码实现</h2> 
<pre><code> &lt;template&gt;
  &lt;div class="TreePage"&gt;
    &lt;el-checkbox
      v-model="menuExpand"
      @change="handleCheckedTreeExpand($event, 'menu')"
      &gt;展开/折叠&lt;/el-checkbox
    &gt;
    &lt;el-checkbox
      v-model="menuNodeAll"
      @change="handleCheckedTreeNodeAll($event, 'menu')"
      &gt;全选/全不选&lt;/el-checkbox
    &gt;
    &lt;el-checkbox
      v-model="menuCheckStrictly"
      @change="handleCheckedTreeConnect($event, 'menu')"
      &gt;父子联动&lt;/el-checkbox
    &gt;

    &lt;el-row :gutter="20" style="margin-top: 20px"&gt;
      &lt;!--村数据--&gt;
      &lt;el-col :span="24"&gt;
        &lt;div class="head-container"&gt;
          &lt;el-input
            v-model="deptName"
            placeholder="请输入名称"
            clearable
            size="small"
            prefix-icon="el-icon-search"
            style="margin-bottom: 20px"
          /&gt;
        &lt;/div&gt;
        &lt;!-- 组织树 --&gt;
        &lt;div class="head-container"&gt;
          &lt;el-tree
            ref="menu"
            :props="defaultProps"
            :default-expanded-keys="defaultExpandedKeys"
            :default-checked-keys="defaultCheckedKeys"
            :expand-on-click-node="false"
            :data="menuOptions"
            show-checkbox
            node-key="deptId"
            :check-strictly="!menuCheckStrictly"
            empty-text="加载中，请稍后"
            :filter-node-method="filterNode"
            @node-click="handleNodeClick"
            draggable
            @node-drag-start="handleDragStart"
            @node-drag-enter="handleDragEnter"
            @node-drag-leave="handleDragLeave"
            @node-drag-over="handleDragOver"
            @node-drag-end="handleDragEnd"
            @node-drop="handleDrop"
            :allow-drop="allowDrop"
            :allow-drag="allowDrag"
          &gt;
            &lt;!--自定义节点内容: 使用 scoped slot 会传入两个参数node和data，分别表示当前节点的 Node 对象和当前节点的数据。 --&gt;
            &lt;span class="custom-tree-node" slot-scope="{ node, data }"&gt;
              &lt;span&gt;{<!-- -->{ node.label }}&lt;/span&gt;
              &lt;span&gt;
                &lt;el-button type="text" size="mini" @click="() =&gt; append(data)"&gt;
                  新增
                &lt;/el-button&gt;
                &lt;el-button
                  type="text"
                  size="mini"
                  @click="() =&gt; remove(node, data)"
                &gt;
                  删除
                &lt;/el-button&gt;
              &lt;/span&gt;
            &lt;/span&gt;
          &lt;/el-tree&gt;
        &lt;/div&gt;
      &lt;/el-col&gt;
    &lt;/el-row&gt;
    &lt;el-button type="primary" @click="submitForm"&gt;确 定&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;
        
&lt;script&gt;
let deptId = 10000;
export default {
  name: "TreePage2",
  props: {},
  data() {
    return {
      menuExpand: false,
      menuNodeAll: false,
      menuCheckStrictly: true,
      // 模拟数据
      menuOptions: [
        {
          deptId: 100,
          parentId: 0,
          parentName: null,
          ancestors: "0",
          deptName: "XX01街道",
          children: [
            {
              deptId: 1001,
              parentId: 100,
              parentName: null,
              ancestors: "0,100",
              deptName: "XX1-1村",
              children: [
                {
                  deptId: 10011,
                  parentId: 1001,
                  parentName: null,
                  ancestors: "0,100,1001",
                  deptName: "XX1-1-1村",
                  children: [],
                },
              ],
            },
            {
              deptId: 1002,
              parentId: 100,
              parentName: null,
              ancestors: "0,100",
              deptName: "XX1-2村",
              children: [
                {
                  deptId: 10021,
                  parentId: 1002,
                  parentName: null,
                  ancestors: "0,100,1002",
                  deptName: "XX1-2-1村",
                  children: [],
                  disabled: true, //禁用
                },
              ],
            },
            {
              deptId: 1003,
              parentId: 100,
              parentName: null,
              ancestors: "0,100",
              deptName: "XX1-3村",
              children: [],
            },
          ],
        },
        {
          deptId: 200,
          parentId: 0,
          parentName: null,
          ancestors: "0",
          deptName: "XX02街道",
          children: [
            {
              deptId: 2001,
              parentId: 200,
              parentName: null,
              ancestors: "0,200",
              deptName: "XX2-1村",
              children: [],
            },
            {
              deptId: 2002,
              parentId: 200,
              parentName: null,
              ancestors: "0,200",
              deptName: "XX2-2村",
              children: [],
            },
            {
              deptId: 2003,
              parentId: 200,
              parentName: null,
              ancestors: "0,200",
              deptName: "XX2-3村",
              children: [],
            },
          ],
        },
      ],
      // 村名称
      deptName: undefined,
      defaultProps: {
        children: "children",
        label: "deptName",
      },
      // 默认展开的节点的 key 的数组
      defaultExpandedKeys: [100, 10021],
      // 默认展开的节点的 选中 的数组
      defaultCheckedKeys: [1001],
    };
  },
  watch: {
    // 在需要对节点进行过滤时，调用 Tree 实例的filter方法，参数为关键字。
    // 需要注意的是，此时需要设置filter-node-method，值为过滤函数。
    // 根据名称筛选村社树
    deptName(val) {
      this.$refs.menu.filter(val);
    },
  },
  methods: {
    // 树权限（展开/折叠）
    handleCheckedTreeExpand(value) {
      let treeList = this.menuOptions;
      for (let i = 0; i &lt; treeList.length; i++) {
        this.$refs.menu.store.nodesMap[treeList[i].deptId].expanded = value;
      }
    },
    // 树权限（全选/全不选）
    handleCheckedTreeNodeAll(value) {
      this.$refs.menu.setCheckedNodes(value ? this.menuOptions : []);
    },
    // 树权限（父子联动）
    handleCheckedTreeConnect(value) {
      this.menuCheckStrictly = value ? true : false;
    },
    // 过滤函数
    filterNode(value, data) {
      // console.log(value, data)
      if (!value) return true;
      return data.deptName.indexOf(value) !== -1;
    },
    // 左侧网格树-节点单击事件
    handleNodeClick(data) {
      console.log(data, "左侧网格树-节点单击事件");
    },
    // 所有菜单节点数据
    getMenuAllCheckedKeys() {
      // 目前被选中的菜单节点
      let checkedKeys = this.$refs.menu.getCheckedKeys();
      // 半选中的菜单节点
      let halfCheckedKeys = this.$refs.menu.getHalfCheckedKeys();
      checkedKeys.unshift.apply(checkedKeys, halfCheckedKeys);
      return checkedKeys;
    },
    // 新增节点
    append(data) {
      const newChild = { deptId: deptId++, deptName: "test", children: [] };
      if (!data.children) {
        this.$set(data, "children", []);
      }
      data.children.push(newChild);
    },
    // 删除节点
    remove(node, data) {
      const parent = node.parent;
      const children = parent.data.children || parent.data;
      const index = children.findIndex((d) =&gt; d.deptId === data.deptId);
      children.splice(index, 1);
    },

    // 节点开始拖拽时触发的事件
    handleDragStart(node, ev) {
      console.log("drag start", node,ev);
    },
    //   拖拽进入其他节点时触发的事件
    handleDragEnter(draggingNode, dropNode, ev) {
      console.log("tree drag enter: ", dropNode.deptName,ev);
    },
    //   拖拽离开某个节点时触发的事件
    handleDragLeave(draggingNode, dropNode, ev) {
      console.log("tree drag leave: ", dropNode.deptName,ev);
    },
    //   在拖拽节点时触发的事件（类似浏览器的 mouseover 事件）
    handleDragOver(draggingNode, dropNode, ev) {
      console.log("tree drag over: ", dropNode.deptName,ev);
    },
    //   拖拽结束时（可能未成功）触发的事件
    handleDragEnd(draggingNode, dropNode, dropType, ev) {
      console.log("tree drag end: ", dropNode &amp;&amp; dropNode.deptName, dropType,ev);
    },
    //   拖拽成功完成时触发的事件
    handleDrop(draggingNode, dropNode, dropType, ev) {
      console.log("tree drop: ", dropNode.deptName, dropType,ev);
    },
    //   拖拽时判定目标节点能否被放置。type 参数有三种情况：'prev'、'inner' 和 'next'，
    // 分别表示放置在目标节点前、插入至目标节点和放置在目标节点后
    allowDrop(draggingNode, dropNode, type) {
      if (dropNode.data.deptName === "XX1-1-1村") {
        return type !== "inner";
      } else {
        return true;
      }
    },
    //   判断节点能否被拖拽
    allowDrag(draggingNode) {
      return draggingNode.data.deptName.indexOf("XX1-2-1村") === -1;
    },

    /** 提交按钮 */
    submitForm() {
      let menuIds = this.getMenuAllCheckedKeys();
      console.log(menuIds, "menuIds");
    },
  },
};
&lt;/script&gt;
        
      
&lt;style scoped&gt;
.custom-tree-node {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 14px;
  padding-right: 8px;
}
&lt;/style&gt;
             
</code></pre> 
<h2><a id="2__312"></a>2. 效果图</h2> 
<p><img src="https://images2.imgbox.com/08/e5/oykQTWgU_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3__315"></a>3. 使用到的部分属性说明</h2> 
<ol><li>default-expanded-keys： 默认展开的节点的 key 的数组；</li><li>expand-on-click-node： 是否在点击节点的时候展开或者收缩节点， 默认值为 true，如果为 false，则只有点箭头图标的时候才会展开或者收缩节点；</li><li>node-key ：每个树节点用来作为唯一标识的属性，整棵树应该是唯一的；</li><li>filter-node-method： 对树节点进行筛选时执行的方法，返回 true 表示这个节点可以显示，返回 false 则表示这个节点会被隐藏；</li><li>node-click ：节点被点击时的回调；</li><li>accordion： 是否每次只打开一个同级树节点展开；</li><li>default-expand-all： 是否默认展开所有节点 ；</li><li>通过 draggable： 属性可让节点变为可拖拽；</li></ol> 
<h2><a id="4_element_325"></a>4. 更多属性配置查看element官网</h2> 
<p><a href="https://element.eleme.cn/#/zh-CN/component/tree" rel="nofollow">https://element.eleme.cn/#/zh-CN/component/tree</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/423d3da9b5d9bd1212500865c35a083f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深度解析Webpack：现代前端工程化的利器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/64440969b417e7187dc70208c4b757a3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Intelrealsense D435i关闭结构光</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>