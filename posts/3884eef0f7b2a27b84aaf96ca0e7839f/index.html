<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>17.Flink开发笔记二 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="17.Flink开发笔记二" />
<meta property="og:description" content="Flink开发笔记二 1. WindowFunction2. Watermark2.1. 分布式的Watermark2.2. DataStream和其他流之间的转换2.3. Window的抽象概念2.4. Window Trigger2.5. Window Evictor2.6. 1.11版本Watermark写法 3. State 状态管理3.1. 算子状态（operator state）3.2. 键控状态（keyed state）3.3. 状态编程 4. ProcessFunction API（底层 API）4.1. 如果传感器 10秒内连续上升，则需要报警 5. 侧输出流6. Flink的容错机制6.1. 一致性检查点6.2. 检查点的实现算法6.3. 检查点和重启策略配置6.4. 保存点6.5. 端到端一致性 7. AsyncFunction 1. WindowFunction 2. Watermark 2.1. 分布式的Watermark 2.2. DataStream和其他流之间的转换 2.3. Window的抽象概念 2.4. Window Trigger 2.5. Window Evictor 2.6. 1.11版本Watermark写法 val dataStream: DataStream[LoginEvent] = inputStream .map { data =&gt; { val arr: Array[String] = data.split(&#34;,&#34;) LoginEvent(arr(0)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/3884eef0f7b2a27b84aaf96ca0e7839f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-20T16:23:40+08:00" />
<meta property="article:modified_time" content="2021-04-20T16:23:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">17.Flink开发笔记二</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Flink开发笔记二</h4> 
 <ul><li><a href="#1_WindowFunction_1" rel="nofollow">1. WindowFunction</a></li><li><a href="#2_Watermark_3" rel="nofollow">2. Watermark</a></li><li><ul><li><a href="#21_Watermark_6" rel="nofollow">2.1. 分布式的Watermark</a></li><li><a href="#22_DataStream_8" rel="nofollow">2.2. DataStream和其他流之间的转换</a></li><li><a href="#23_Window_10" rel="nofollow">2.3. Window的抽象概念</a></li><li><a href="#24_Window_Trigger_12" rel="nofollow">2.4. Window Trigger</a></li><li><a href="#25_Window_Evictor_14" rel="nofollow">2.5. Window Evictor</a></li><li><a href="#26_111Watermark_17" rel="nofollow">2.6. 1.11版本Watermark写法</a></li></ul> 
  </li><li><a href="#3_State__38" rel="nofollow">3. State 状态管理</a></li><li><ul><li><a href="#31_operator_state_39" rel="nofollow">3.1. 算子状态（operator state）</a></li><li><a href="#32_keyed_state_43" rel="nofollow">3.2. 键控状态（keyed state）</a></li><li><a href="#33__50" rel="nofollow">3.3. 状态编程</a></li></ul> 
  </li><li><a href="#4_ProcessFunction_API_API_120" rel="nofollow">4. ProcessFunction API（底层 API）</a></li><li><ul><li><a href="#41__10_122" rel="nofollow">4.1. 如果传感器 10秒内连续上升，则需要报警</a></li></ul> 
  </li><li><a href="#5__204" rel="nofollow">5. 侧输出流</a></li><li><a href="#6_Flink_253" rel="nofollow">6. Flink的容错机制</a></li><li><ul><li><a href="#61__256" rel="nofollow">6.1. 一致性检查点</a></li><li><a href="#62__258" rel="nofollow">6.2. 检查点的实现算法</a></li><li><a href="#63__270" rel="nofollow">6.3. 检查点和重启策略配置</a></li><li><a href="#64__286" rel="nofollow">6.4. 保存点</a></li><li><a href="#65__288" rel="nofollow">6.5. 端到端一致性</a></li></ul> 
  </li><li><a href="#7_AsyncFunction_293" rel="nofollow">7. AsyncFunction</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1_WindowFunction_1"></a>1. WindowFunction</h2> 
<p><img src="https://images2.imgbox.com/4b/b2/F02DqMYl_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2_Watermark_3"></a>2. Watermark</h2> 
<p><img src="https://images2.imgbox.com/6d/17/5q61J6RP_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fe/9c/jOP6bGpg_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="21_Watermark_6"></a>2.1. 分布式的Watermark</h3> 
<p><img src="https://images2.imgbox.com/bd/b7/SUQ5gowi_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22_DataStream_8"></a>2.2. DataStream和其他流之间的转换</h3> 
<p><img src="https://images2.imgbox.com/ce/69/W0qw1KTY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="23_Window_10"></a>2.3. Window的抽象概念</h3> 
<p><img src="https://images2.imgbox.com/5a/83/dCBmWZLP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="24_Window_Trigger_12"></a>2.4. Window Trigger</h3> 
<p><img src="https://images2.imgbox.com/bf/96/WiIb0hun_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="25_Window_Evictor_14"></a>2.5. Window Evictor</h3> 
<p><img src="https://images2.imgbox.com/84/16/UhK30dee_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/db/51/nhJwIHG7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="26_111Watermark_17"></a>2.6. 1.11版本Watermark写法</h3> 
<pre><code class="prism language-scala">    <span class="token keyword">val</span> dataStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span>LoginEvent<span class="token punctuation">]</span> <span class="token operator">=</span> inputStream
      <span class="token punctuation">.</span>map <span class="token punctuation">{<!-- --></span>
        data <span class="token keyword">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">val</span> arr<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span>
          LoginEvent<span class="token punctuation">(</span>arr<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toLong<span class="token punctuation">,</span> arr<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> arr<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> arr<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toLong<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">.</span>assignTimestampsAndWatermarks <span class="token punctuation">{<!-- --></span>
        WatermarkStrategy
          <span class="token punctuation">.</span>forBoundedOutOfOrderness<span class="token punctuation">[</span>LoginEvent<span class="token punctuation">]</span><span class="token punctuation">(</span>Duration<span class="token punctuation">.</span>ofSeconds<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>withTimestampAssigner<span class="token punctuation">(</span><span class="token keyword">new</span> SerializableTimestampAssigner<span class="token punctuation">[</span>LoginEvent<span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">override</span> <span class="token keyword">def</span> extractTimestamp<span class="token punctuation">(</span>element<span class="token operator">:</span> LoginEvent<span class="token punctuation">,</span> recordTimestamp<span class="token operator">:</span> <span class="token builtin">Long</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Long</span> <span class="token operator">=</span> element<span class="token punctuation">.</span>timestamp <span class="token operator">*</span> <span class="token number">1000L</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
</code></pre> 
<ul><li>注意： scala2.11有点问题，需要配置<br> <a href="https://mp.weixin.qq.com/s/XTxKq-rnc6RYi5ywaLDziA" rel="nofollow">参考链接</a></li></ul> 
<h2><a id="3_State__38"></a>3. State 状态管理</h2> 
<h3><a id="31_operator_state_39"></a>3.1. 算子状态（operator state）</h3> 
<p><img src="https://images2.imgbox.com/ae/9c/9ABSIOMP_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/57/b8/NXWud8Ql_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_keyed_state_43"></a>3.2. 键控状态（keyed state）</h3> 
<p><img src="https://images2.imgbox.com/1b/c1/BvtJ0ywz_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6d/b2/R0obQhyO_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/32/e0/rCkDQ9ic_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6e/25/pwSwn2I9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33__50"></a>3.3. 状态编程</h3> 
<pre><code class="prism language-scala"><span class="token keyword">val</span> inputStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> env<span class="token punctuation">.</span>socketTextStream<span class="token punctuation">(</span><span class="token string">"192.168.1.27"</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> dataStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span>SensorReading<span class="token punctuation">]</span> <span class="token operator">=</span> inputStream<span class="token punctuation">.</span>map<span class="token punctuation">(</span>
  data <span class="token keyword">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> arr<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span>
    SensorReading<span class="token punctuation">(</span>arr<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> arr<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toLong<span class="token punctuation">,</span> arr<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toDouble<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment">// 需求：对于传感器温度值跳变，超过“10”度进行报警</span>
<span class="token keyword">val</span> warningStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> dataStream
  <span class="token punctuation">.</span>keyBy<span class="token punctuation">(</span>_<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token comment">// 方式1 .flatMap(new TimeChangeAlert(10.0))</span>
  <span class="token comment">// 方式2  (R, S) 有状态的函数(只能在keyBy之后使用) fun: (T, Option[S]) =&gt; (TraversableOnce[R], Option[S])</span>
  <span class="token punctuation">.</span>flatMapWithState<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">case</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> SensorReading<span class="token punctuation">,</span> None<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>List<span class="token punctuation">.</span>empty<span class="token punctuation">,</span> Some<span class="token punctuation">(</span>data<span class="token punctuation">.</span>temperature<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">case</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> SensorReading<span class="token punctuation">,</span> lastTemp<span class="token operator">:</span> Some<span class="token punctuation">[</span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">{<!-- --></span>

      <span class="token keyword">val</span> diff <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>temperature <span class="token operator">-</span> lastTemp<span class="token punctuation">.</span>get<span class="token punctuation">)</span><span class="token punctuation">.</span>abs

      <span class="token keyword">if</span> <span class="token punctuation">(</span>diff <span class="token operator">&gt;</span> <span class="token number">10.0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">(</span>List<span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>id<span class="token punctuation">,</span> lastTemp<span class="token punctuation">.</span>get<span class="token punctuation">,</span> data<span class="token punctuation">.</span>temperature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Some<span class="token punctuation">(</span>data<span class="token punctuation">.</span>temperature<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">(</span>List<span class="token punctuation">.</span>empty<span class="token punctuation">,</span> Some<span class="token punctuation">(</span>data<span class="token punctuation">.</span>temperature<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

warningStream<span class="token punctuation">.</span>print<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-scala"><span class="token comment">/**
 * 自定义RichFlatMapFunction
 */</span>
<span class="token keyword">class</span> TimeChangeAlert<span class="token punctuation">(</span>threshold<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> RichFlatMapFunction<span class="token punctuation">[</span>SensorReading<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 定义状态，保存上一次的温度值</span>
  <span class="token keyword">lazy</span> <span class="token keyword">val</span> lastTempState<span class="token operator">:</span> ValueState<span class="token punctuation">[</span><span class="token builtin">Double</span><span class="token punctuation">]</span> <span class="token operator">=</span> getRuntimeContext<span class="token punctuation">.</span>getState<span class="token punctuation">(</span><span class="token keyword">new</span> ValueStateDescriptor<span class="token punctuation">[</span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"lastTemp"</span><span class="token punctuation">,</span> classOf<span class="token punctuation">[</span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// 定义开关</span>
  <span class="token keyword">lazy</span> <span class="token keyword">val</span> firstState<span class="token operator">:</span> ValueState<span class="token punctuation">[</span><span class="token builtin">Boolean</span><span class="token punctuation">]</span> <span class="token operator">=</span> getRuntimeContext<span class="token punctuation">.</span>getState<span class="token punctuation">(</span><span class="token keyword">new</span> ValueStateDescriptor<span class="token punctuation">[</span><span class="token builtin">Boolean</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"isFirst"</span><span class="token punctuation">,</span> classOf<span class="token punctuation">[</span><span class="token builtin">Boolean</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">override</span> <span class="token keyword">def</span> flatMap<span class="token punctuation">(</span>value<span class="token operator">:</span> SensorReading<span class="token punctuation">,</span> out<span class="token operator">:</span> Collector<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">val</span> lastTemp<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> lastTempState<span class="token punctuation">.</span>value<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">val</span> noFirst<span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> firstState<span class="token punctuation">.</span>value<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>noFirst<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 差值比较</span>
      <span class="token keyword">val</span> diff <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>temperature <span class="token operator">-</span> lastTemp<span class="token punctuation">)</span><span class="token punctuation">.</span>abs

      <span class="token keyword">if</span> <span class="token punctuation">(</span>diff <span class="token operator">&gt;</span> threshold<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        out<span class="token punctuation">.</span>collect<span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>id<span class="token punctuation">,</span> lastTemp<span class="token punctuation">,</span> value<span class="token punctuation">.</span>temperature<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      firstState<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    lastTempState<span class="token punctuation">.</span>update<span class="token punctuation">(</span>value<span class="token punctuation">.</span>temperature<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="4_ProcessFunction_API_API_120"></a>4. ProcessFunction API（底层 API）</h2> 
<p><img src="https://images2.imgbox.com/cb/0a/7TZCAsSQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="41__10_122"></a>4.1. 如果传感器 10秒内连续上升，则需要报警</h3> 
<pre><code class="prism language-scala"><span class="token keyword">package</span> com<span class="token punctuation">.</span>xiaofan<span class="token punctuation">.</span>apitest<span class="token punctuation">.</span>window

<span class="token keyword">import</span> com<span class="token punctuation">.</span>xiaofan<span class="token punctuation">.</span>apitest<span class="token punctuation">.</span>source<span class="token punctuation">.</span>SensorReading
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>common<span class="token punctuation">.</span>state<span class="token punctuation">.</span><span class="token punctuation">{<!-- --></span>ValueState<span class="token punctuation">,</span> ValueStateDescriptor<span class="token punctuation">}</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>Configuration
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>functions<span class="token punctuation">.</span>KeyedProcessFunction
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span>_
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Collector

<span class="token keyword">object</span> ProcessFunctionTest <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">val</span> env<span class="token operator">:</span> StreamExecutionEnvironment <span class="token operator">=</span> StreamExecutionEnvironment<span class="token punctuation">.</span>getExecutionEnvironment

    <span class="token keyword">val</span> inputStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> env<span class="token punctuation">.</span>socketTextStream<span class="token punctuation">(</span><span class="token string">"192.168.1.27"</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span>

    <span class="token keyword">val</span> dataStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span>SensorReading<span class="token punctuation">]</span> <span class="token operator">=</span> inputStream<span class="token punctuation">.</span>map<span class="token punctuation">(</span>
      data <span class="token keyword">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">val</span> arr<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span>
        SensorReading<span class="token punctuation">(</span>arr<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> arr<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toLong<span class="token punctuation">,</span> arr<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toDouble<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// 需求：如果传感器 10秒内连续上升，则需要报警</span>
    <span class="token keyword">val</span> warningStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> dataStream
      <span class="token punctuation">.</span>keyBy<span class="token punctuation">(</span>_<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token punctuation">.</span>process<span class="token punctuation">(</span><span class="token keyword">new</span> TempIncrementWarning<span class="token punctuation">(</span><span class="token number">10000L</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    warningStream<span class="token punctuation">.</span>print<span class="token punctuation">(</span><span class="token punctuation">)</span>

    env<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"process function test"</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 自定义的keyedProcessFunction
 */</span>
<span class="token keyword">class</span> TempIncrementWarning<span class="token punctuation">(</span>interval<span class="token operator">:</span> <span class="token builtin">Long</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> KeyedProcessFunction<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span> SensorReading<span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>

  <span class="token comment">// 定义状态，保存上一个温度值进行比较，保存注册定时器的时间戳，用于删除</span>
  <span class="token keyword">lazy</span> <span class="token keyword">val</span> lastTempState<span class="token operator">:</span> ValueState<span class="token punctuation">[</span><span class="token builtin">Double</span><span class="token punctuation">]</span> <span class="token operator">=</span> getRuntimeContext<span class="token punctuation">.</span>getState<span class="token punctuation">(</span><span class="token keyword">new</span> ValueStateDescriptor<span class="token punctuation">[</span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"last-temp"</span><span class="token punctuation">,</span> classOf<span class="token punctuation">[</span><span class="token builtin">Double</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">lazy</span> <span class="token keyword">val</span> timerTsState<span class="token operator">:</span> ValueState<span class="token punctuation">[</span><span class="token builtin">Long</span><span class="token punctuation">]</span> <span class="token operator">=</span> getRuntimeContext<span class="token punctuation">.</span>getState<span class="token punctuation">(</span><span class="token keyword">new</span> ValueStateDescriptor<span class="token punctuation">[</span><span class="token builtin">Long</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"timer-ts"</span><span class="token punctuation">,</span> classOf<span class="token punctuation">[</span><span class="token builtin">Long</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">lazy</span> <span class="token keyword">val</span> noRepeat<span class="token operator">:</span> ValueState<span class="token punctuation">[</span><span class="token builtin">Boolean</span><span class="token punctuation">]</span> <span class="token operator">=</span> getRuntimeContext<span class="token punctuation">.</span>getState<span class="token punctuation">(</span><span class="token keyword">new</span> ValueStateDescriptor<span class="token punctuation">[</span><span class="token builtin">Boolean</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"open-status"</span><span class="token punctuation">,</span> classOf<span class="token punctuation">[</span><span class="token builtin">Boolean</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


  <span class="token keyword">override</span> <span class="token keyword">def</span> processElement<span class="token punctuation">(</span>value<span class="token operator">:</span> SensorReading<span class="token punctuation">,</span> ctx<span class="token operator">:</span> KeyedProcessFunction<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span> SensorReading<span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">]</span>#Context<span class="token punctuation">,</span> out<span class="token operator">:</span> Collector<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 获取状态</span>
    <span class="token keyword">val</span> lastTemp<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> lastTempState<span class="token punctuation">.</span>value<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> timerTs<span class="token operator">:</span> <span class="token builtin">Long</span> <span class="token operator">=</span> timerTsState<span class="token punctuation">.</span>value<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// 当前温度和上次温度进行比较</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>temperature <span class="token operator">&gt;</span> lastTemp<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>noRepeat<span class="token punctuation">.</span>value<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 如果温度上升，且没有定时器，那么注册当前时间10s之后的定时器</span>
        <span class="token keyword">val</span> ts<span class="token operator">:</span> <span class="token builtin">Long</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>timerService<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>currentProcessingTime<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> interval
        ctx<span class="token punctuation">.</span>timerService<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>registerProcessingTimeTimer<span class="token punctuation">(</span>ts<span class="token punctuation">)</span>
        timerTsState<span class="token punctuation">.</span>update<span class="token punctuation">(</span>ts<span class="token punctuation">)</span>
        noRepeat<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 如果温度下降，那么删除定时器</span>
      ctx<span class="token punctuation">.</span>timerService<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>deleteProcessingTimeTimer<span class="token punctuation">(</span>timerTs<span class="token punctuation">)</span>
      timerTsState<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
      noRepeat<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 更新温度值</span>
    lastTempState<span class="token punctuation">.</span>update<span class="token punctuation">(</span>value<span class="token punctuation">.</span>temperature<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">override</span> <span class="token keyword">def</span> onTimer<span class="token punctuation">(</span>timestamp<span class="token operator">:</span> <span class="token builtin">Long</span><span class="token punctuation">,</span> ctx<span class="token operator">:</span> KeyedProcessFunction<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span> SensorReading<span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">]</span>#OnTimerContext<span class="token punctuation">,</span> out<span class="token operator">:</span> Collector<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    out<span class="token punctuation">.</span>collect<span class="token punctuation">(</span><span class="token string">"传感器 "</span> <span class="token operator">+</span> ctx<span class="token punctuation">.</span>getCurrentKey <span class="token operator">+</span> <span class="token string">"的温度连续"</span> <span class="token operator">+</span> interval <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token string">"秒连续上升"</span><span class="token punctuation">)</span>
    noRepeat<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<h2><a id="5__204"></a>5. 侧输出流</h2> 
<pre><code class="prism language-scala"><span class="token keyword">package</span> com<span class="token punctuation">.</span>xiaofan<span class="token punctuation">.</span>apitest<span class="token punctuation">.</span>window

<span class="token keyword">import</span> com<span class="token punctuation">.</span>xiaofan<span class="token punctuation">.</span>apitest<span class="token punctuation">.</span>source<span class="token punctuation">.</span>SensorReading
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>functions<span class="token punctuation">.</span>ProcessFunction
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span>_
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Collector

<span class="token keyword">object</span> SideOutputTest <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">val</span> env<span class="token operator">:</span> StreamExecutionEnvironment <span class="token operator">=</span> StreamExecutionEnvironment<span class="token punctuation">.</span>getExecutionEnvironment

    <span class="token keyword">val</span> inputStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> env<span class="token punctuation">.</span>socketTextStream<span class="token punctuation">(</span><span class="token string">"192.168.1.27"</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span>

    <span class="token keyword">val</span> dataStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span>SensorReading<span class="token punctuation">]</span> <span class="token operator">=</span> inputStream<span class="token punctuation">.</span>map<span class="token punctuation">(</span>
      data <span class="token keyword">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">val</span> arr<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span>
        SensorReading<span class="token punctuation">(</span>arr<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> arr<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toLong<span class="token punctuation">,</span> arr<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toDouble<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">val</span> highTempStream<span class="token operator">:</span> DataStream<span class="token punctuation">[</span>SensorReading<span class="token punctuation">]</span> <span class="token operator">=</span> dataStream<span class="token punctuation">.</span>process<span class="token punctuation">(</span><span class="token keyword">new</span> SplitTempProcessor<span class="token punctuation">(</span><span class="token number">30.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    highTempStream<span class="token punctuation">.</span>print<span class="token punctuation">(</span><span class="token string">"high"</span><span class="token punctuation">)</span>
    highTempStream<span class="token punctuation">.</span>getSideOutput<span class="token punctuation">(</span><span class="token keyword">new</span> OutputTag<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Long</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"low"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>print<span class="token punctuation">(</span><span class="token string">"low"</span><span class="token punctuation">)</span>

    env<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"side output test"</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> SplitTempProcessor<span class="token punctuation">(</span>threshold<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> ProcessFunction<span class="token punctuation">[</span>SensorReading<span class="token punctuation">,</span> SensorReading<span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> processElement<span class="token punctuation">(</span>value<span class="token operator">:</span> SensorReading<span class="token punctuation">,</span> ctx<span class="token operator">:</span> ProcessFunction<span class="token punctuation">[</span>SensorReading<span class="token punctuation">,</span> SensorReading<span class="token punctuation">]</span>#Context<span class="token punctuation">,</span> out<span class="token operator">:</span> Collector<span class="token punctuation">[</span>SensorReading<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>temperature <span class="token operator">&gt;</span> threshold<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 温度大于30度，输出到主流</span>
      out<span class="token punctuation">.</span>collect<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 如果不超过30度，输出到侧输出流</span>
      ctx<span class="token punctuation">.</span>output<span class="token punctuation">(</span><span class="token keyword">new</span> OutputTag<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Long</span><span class="token punctuation">,</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"low"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>id<span class="token punctuation">,</span> value<span class="token punctuation">.</span>timestamp<span class="token punctuation">,</span> value<span class="token punctuation">.</span>temperature<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="6_Flink_253"></a>6. Flink的容错机制</h2> 
<p><img src="https://images2.imgbox.com/8a/51/D3IgeSwo_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="61__256"></a>6.1. 一致性检查点</h3> 
<p><img src="https://images2.imgbox.com/0f/59/oeDLoUDS_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="62__258"></a>6.2. 检查点的实现算法</h3> 
<p><img src="https://images2.imgbox.com/3e/45/mFcMgK7a_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a8/ba/qKTtvT0N_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/14/95/z7kVlmpx_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/12/3b/PRDm7d7D_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/32/49/rEocxEjS_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/f1/3e/y4BBeZiy_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9e/ba/DR3OhRBN_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2b/e4/NkYJCTd2_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/d3/08/h3YAPKMg_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="63__270"></a>6.3. 检查点和重启策略配置</h3> 
<pre><code class="prism language-scala"><span class="token comment">// 检查点配置</span>
env<span class="token punctuation">.</span>enableCheckpointing<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
env<span class="token punctuation">.</span>getCheckpointConfig<span class="token punctuation">.</span>setCheckpointingMode<span class="token punctuation">(</span>CheckpointingMode<span class="token punctuation">.</span>EXACTLY_ONCE<span class="token punctuation">)</span>
env<span class="token punctuation">.</span>getCheckpointConfig<span class="token punctuation">.</span>setCheckpointTimeout<span class="token punctuation">(</span><span class="token number">60000L</span><span class="token punctuation">)</span>
env<span class="token punctuation">.</span>getCheckpointConfig<span class="token punctuation">.</span>setMinPauseBetweenCheckpoints<span class="token punctuation">(</span><span class="token number">500L</span><span class="token punctuation">)</span>
env<span class="token punctuation">.</span>getCheckpointConfig<span class="token punctuation">.</span>setTolerableCheckpointFailureNumber<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">// 重启策略</span>
<span class="token comment">// 1. 固定时间间隔重启，10s中内重启3次</span>
env<span class="token punctuation">.</span>setRestartStrategy<span class="token punctuation">(</span>RestartStrategies<span class="token punctuation">.</span>fixedDelayRestart<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">10000L</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 2. 固定时间间隔内重启多少次，每次间隔多长</span>
env<span class="token punctuation">.</span>setRestartStrategy<span class="token punctuation">(</span>RestartStrategies<span class="token punctuation">.</span>failureRateRestart<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> Time<span class="token punctuation">.</span>of<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span><span class="token punctuation">,</span> Time<span class="token punctuation">.</span>of<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="64__286"></a>6.4. 保存点</h3> 
<p><img src="https://images2.imgbox.com/33/d1/F6LqPAmx_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="65__288"></a>6.5. 端到端一致性</h3> 
<p><img src="https://images2.imgbox.com/54/ad/nA6tS8Nb_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0a/84/OvS5iqbd_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bc/0f/OlhqVC2C_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fd/67/24YwSL1L_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="7_AsyncFunction_293"></a>7. AsyncFunction</h2> 
<p><a href="https://www.cnblogs.com/qiu-hua/p/13778750.html" rel="nofollow">参考链接</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/66ae8fadda681df04a7f87dc2dcbad99/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">整数二分 如何确定mid及划分条件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2606df1c2fd801e5b47327ca41bf41ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">同源政策（same-origin policy）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>