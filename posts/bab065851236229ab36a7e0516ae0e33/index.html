<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使你的C/C&#43;&#43;代码支持Unicode - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使你的C/C&#43;&#43;代码支持Unicode" />
<meta property="og:description" content="目录(?)[-]
内容第一步IO 数据库流式 IOBOM 值常量和全局变量数据类型Platform SDK字符串处理APICRT字符串处理API使你的CC代码支持Unicode的第一步文件 IO 数据库 传输协议等因素流式 IO国际化Unicode高级技术平台和其它因素Unicode字节序标记BOM 值常量和全局变量数据类型Platform SDK字符串处理APICRT字符串处理API 本文摘自I18nGuy主页的一篇内容，原文地址：http://www.i18nguy.com/unicode/c-unicode.zh-CN.html 文档在线看：http://www.docin.com/p-37841375.html 这份文档简要的说明了如何修改你的C/C&#43;&#43;代码使之支持Unicode。在这里并不准备解释太多相关的技术细节并且我得假定你已经基本熟悉Microsoft支持Unicode的方式。它的主要目的是方便你查询相关的数据类型和函数，以及修正相应的拼写错误。 内容
第一步
I/O, 数据库
流式 I/O
BOM 值
常量和全局变量
数据类型
Platform SDK字符串处理API
CRT字符串处理API
使你的C/C&#43;&#43;代码支持Unicode的第一步 定义宏 _UNICODE， 如果定义了宏 _MBCS 则取消它的定义(undefine)。在字符串前添加 L 标记或者用 _T宏修饰字符串。使用 Wide 或者 TCHAR 版本的字符串处理函数。确定API中的字符串长度是按字节计数还是按字符个数计数。因为基于字符的显示和打印(与此不同的是，GUI是基于像素的)使用列数，而不是字节数或者字符个数。在字符串指针相关的计算中使用GetNext格式，因为一个字符可能包含多于一个Unicode字符单元。注意缓冲区的大小以及防止缓冲区溢出。
改变编码方式可能需要增大缓冲区或者限制字符串的最大长度。假设单个字符的大小从1个字节变为4个字节，并且字符串本来20个字符占用20字节，那么你需要将字符串缓冲区扩大为80字节或者将字符串长度限制为5个字符(字符串缓 冲区仍为20字节)。注意缓冲区的扩大可能被限制到一个最大值(比如65KB)。减少字符串长度到一个固定值可能破坏现有的程序，限制字符串长度到固定 值可能是危险的。比如，限制到20字节，将字符串转化为大写形式就可能导致字符串变长并且超过限制。 将接受或者返回单字符参数的函数替换为使用字符串的版本。 (在一些语言中) 对于单个字符的操作可能导致返回多个代码点。例如，upper(&#39;ß&#39;)将返回&#34;SS&#34;。 使用 wmain 代替 main。环境变量也由_environ变为_wenviron 。
wmain(int argc, wchar_t *argv[], wchar_t *envp[]) MFC Unicode 程序使用 wWinMain 作为程序入口点(VC&#43;&#43; 6.0)。 project-&gt;settings-&gt;Link，选择output选项卡
在Entry point symbol一行加上 wWinMainCRTStartup 。字体的因素，分清使用的字体用于渲染各种语言的字符还是用于脚本中。 文件 I/O, 数据库, 传输协议等因素 考虑是否需要读写文件、数据库中的 UTF-8 或者 UTF-16 字符，以及是否进行数据交换。考虑 UTF-16 格式文件中的字节序。 读写网络传输的数据总是使用 Big-Endian ，如果你没有产生 BOM 也使用 Big-Endian。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/bab065851236229ab36a7e0516ae0e33/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-11-22T11:11:02+08:00" />
<meta property="article:modified_time" content="2013-11-22T11:11:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使你的C/C&#43;&#43;代码支持Unicode</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="border:solid 1px #ccc; background:#eee; float:left; min-width:200px; padding:4px 10px"> 
 <p style="text-align:right; margin:0"><span style="float:left">目录<a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#" title="系统根据文章中H1到H6标签自动生成文章目录" rel="noopener noreferrer">(?)</a></span><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#" title="收起" rel="noopener noreferrer">[-]</a></p> 
 <ol style="margin-left:14px; padding-left:14px; line-height:160%"><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t0" rel="noopener noreferrer">内容第一步IO 数据库流式 IOBOM 值常量和全局变量数据类型Platform SDK字符串处理APICRT字符串处理API</a></li><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t1" rel="noopener noreferrer">使你的CC代码支持Unicode的第一步</a></li><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t2" rel="noopener noreferrer">文件 IO 数据库 传输协议等因素</a></li><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t3" rel="noopener noreferrer">流式 IO</a></li><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t4" rel="noopener noreferrer">国际化Unicode高级技术平台和其它因素</a></li><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t5" rel="noopener noreferrer">Unicode字节序标记BOM 值</a></li><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t6" rel="noopener noreferrer">常量和全局变量</a></li><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t7" rel="noopener noreferrer">数据类型</a></li><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t8" rel="noopener noreferrer">Platform SDK字符串处理API</a></li><li><a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#t9" rel="noopener noreferrer">CRT字符串处理API</a></li></ol> 
</div> 
<p>本文摘自<a target="_blank" href="http://www.i18nguy.com/index.html" rel="nofollow noopener noreferrer">I18nGuy</a>主页的一篇内容，原文地址：<a target="_blank" href="http://www.i18nguy.com/unicode/c-unicode.zh-CN.html" rel="nofollow noopener noreferrer">http://www.i18nguy.com/unicode/c-unicode.zh-CN.html</a>  </p> 
<p>文档在线看：<a target="_blank" href="http://www.docin.com/p-37841375.html" rel="nofollow noopener noreferrer">http://www.docin.com/p-37841375.html</a> </p> 
<p> </p> 
<p>这份文档简要的说明了如何修改你的C/C++代码使之支持Unicode。在这里并不准备解释太多相关的技术细节并且我得假定你已经基本熟悉Microsoft支持Unicode的方式。它的主要目的是方便你查询相关的数据类型和函数，以及修正相应的拼写错误。 </p> 
<h4><a target="_blank" name="t0"></a><span style="font-size:14px">内容</span><br> <a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#file" rel="noopener noreferrer">第一步<br> I/O, 数据库</a><br> <a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#streams" rel="noopener noreferrer">流式 I/O</a><br> <a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#global" rel="noopener noreferrer">BOM 值<br> 常量和全局变量</a><br> <a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#datatype" rel="noopener noreferrer">数据类型</a><br> <a target="_blank" href="http://blog.csdn.net/akof1314/article/details/5060971#strfn" rel="noopener noreferrer">Platform SDK字符串处理API<br> CRT字符串处理API</a><br> </h4> 
<p> </p> 
<div style="clear:both"> 
 <a target="_blank" name="first"></a> 
 <h4 id="first"><a target="_blank" name="t1"></a>使你的C/C++代码支持Unicode的第一步</h4> 
 <ul><li>定义宏 <span style="color:#ff0000">_UNICODE</span><span style="font-weight:bold">，</span> 如果定义了宏 <span style="color:#ff0000">_MBCS</span> 则取消它的定义(undefine)。</li><li>在字符串前添加 <span style="color:#ff0000">L</span> 标记或者用 <span style="color:#ff0000"> _T</span>宏修饰字符串。</li><li>使用 <span style="color:#ff0000">Wide</span> 或者 <span style="color:#ff00">TCHAR</span> 版本的字符串处理函数。</li><li>确定API中的字符串长度是按字节计数还是按字符个数计数。因为基于字符的显示和打印(与此不同的是，GUI是基于像素的)使用列数，而不是字节数或者字符个数。</li><li>在字符串指针相关的计算中使用GetNext格式，因为一个字符可能包含多于一个Unicode字符单元。</li><li>注意缓冲区的大小以及防止缓冲区溢出。<br> 改变编码方式可能需要增大缓冲区或者限制字符串的最大长度。假设单个字符的大小从1个字节变为4个字节，并且字符串本来20个字符占用20字节，那么你需要将字符串缓冲区扩大为80字节或者将字符串长度限制为5个字符(字符串缓 冲区仍为20字节)。注意缓冲区的扩大可能被限制到一个最大值(比如65KB)。减少字符串长度到一个固定值可能破坏现有的程序，限制字符串长度到固定 值可能是危险的。比如，限制到20字节，将字符串转化为大写形式就可能导致字符串变长并且超过限制。 </li><li>将接受或者返回单字符参数的函数替换为使用字符串的版本。 (在一些语言中) 对于单个字符的操作可能导致返回多个代码点。例如，<span style="color:#ff0000">upper('ß')</span>将返回<span style="color:#ff0000">"SS"</span>。 </li><li>使用 <span style="color:#ff0000">wmain</span> 代替 <span style="color:#ff0000">main</span>。环境变量也由<span style="color:#ff0000">_environ</span>变为<span style="color:#ff0000">_wenviron</span> 。<br> <span style="color:#ff0000">wmain(int argc, wchar_t *argv[], wchar_t *envp[])</span> </li><li>MFC Unicode 程序使用  <span style="color:#ff0000">wWinMain</span> 作为程序入口点(VC++ 6.0)。 <br> project-&gt;settings-&gt;Link，选择output选项卡<br> 在Entry point symbol一行加上 <span style="color:#ff0000">wWinMainCRTStartup</span> 。</li><li>字体的因素，分清使用的字体用于渲染各种语言的字符还是用于脚本中。</li></ul> 
 <a target="_blank" name="file"></a> 
 <h4 id="file"><a target="_blank" name="t2"></a>文件 I/O, 数据库, 传输协议等因素</h4> 
 <ul><li>考虑是否需要读写文件、数据库中的 UTF-8 或者 UTF-16 字符，以及是否进行数据交换。</li><li>考虑 UTF-16 格式文件中的字节序。 <br> 读写网络传输的数据总是使用 Big-Endian ，如果你没有产生 BOM 也使用 Big-Endian。<br> 文件的字节序依赖于文件格式以及/或者源/目标机器的体系结构。<br> 读取 UTF-16 或者 UTF-32编码的文件时，考虑是否需要将字符按字节逆序。 <br> 对于 streams 和传输协议也需要做上述的考虑。 </li><li>传输协议和用于数据交换的文件要使用正确的编码方式。例如 HTTP，HTML，XML 必须设置为 UTF-8 或者 UTF-16。</li><li>考虑Unicode字节序标记( <span style="color:#ff0000">BOM</span> ,Byte Order Marker) 以及是否需要将它同数据一同写入。读取数据时记得去掉BOM。</li><li>考虑遗留数据和文件的编码惯例，考虑导入和导出以及传输协议。(<a target="_blank" href="http://fw4.biz/browse.php/Oi8vbXNk/bi5taWNy/b3NvZnQu/Y29tL2xp/YnJhcnkv/ZGVmYXVs/dC5hc3A_/2FdXJsPS/9saWJyYX/J5L2VuLX/VzL2ludG/wvdW5pY2/9kZV8xN3/NpLmFzcA/_3D_3D/b1/" rel="nofollow noopener noreferrer">MultiByteToWideChar</a>, <a target="_blank" href="http://fw4.biz/browse.php/Oi8vbXNk/bi5taWNy/b3NvZnQu/Y29tL2xp/YnJhcnkv/ZGVmYXVs/dC5hc3A_/2FdXJsPS/9saWJyYX/J5L2VuLX/VzL2ludG/wvdW5pY2/9kZV8yYm/o5LmFzcA/_3D_3D/b1/" rel="nofollow noopener noreferrer"> WideCharToMultiByte</a>, <a target="_blank" href="http://fw4.biz/browse.php/Oi8vbXNk/bi5taWNy/b3NvZnQu/Y29tL2xp/YnJhcnkv/ZGVmYXVs/dC5hc3A_/2FdXJsPS/9saWJyYX/J5L2VuLX/VzL3ZjbG/liL2h0bW/wvX2NydF/9tYnRvd2/MuYXNw/b1/" rel="nofollow noopener noreferrer"> mbtowc</a>, <a target="_blank" href="http://fw4.biz/browse.php/Oi8vbXNk/bi5taWNy/b3NvZnQu/Y29tL2xp/YnJhcnkv/ZGVmYXVs/dC5hc3A_/2FdXJsPS/9saWJyYX/J5L2VuLX/VzL3ZjbG/liL2h0bW/wvX2NydF/93Y3RvbW/IuYXNw/b1/" rel="nofollow noopener noreferrer"> wctomb</a>, <a target="_blank" href="http://fw4.biz/browse.php/Oi8vbXNk/bi5taWNy/b3NvZnQu/Y29tL2xp/YnJhcnkv/ZGVmYXVs/dC5hc3A_/2FdXJsPS/9saWJyYX/J5L2VuLX/VzL3ZjbG/liL2h0bW/wvX2NydF/93Y3N0b2/1icy5hc3/A_3D/b1/" rel="nofollow noopener noreferrer"> wctombs</a>, <a target="_blank" href="http://fw4.biz/browse.php/Oi8vbXNk/bi5taWNy/b3NvZnQu/Y29tL2xp/YnJhcnkv/ZGVmYXVs/dC5hc3A_/2FdXJsPS/9saWJyYX/J5L2VuLX/VzL3ZjbG/liL2h0bW/wvX2NydF/9tYnN0b3/djcy5hc3/A_3D/b1/" rel="nofollow noopener noreferrer"> mbstowcs</a> ) </li><li>考虑复制文本到剪贴板<br> 使用 <span style="color:#ff0000">CF_TEXT</span> 格式并且写入本地编码的文本(ANSI格式)<br> 使用 <span style="color:#ff0000">CF_UNICODETEXT</span> 格式并写入Unicode文本</li><li>数据库程序需要考虑数据类型 (<span style="color:#ff0000">NCHAR</span>, <span style="color:#ff0000"> NVARCHAR</span>) 和模式(schema)的变更，触发器，存储过程和查询，数据的增长，索引以及性能等因素。<br> 注意：Unicode模式的改变对于不同厂商的数据库产生不同的影响。如果需要数据库具有较好的可移植性，就要考虑到 每种数据库的特性和行为。 <br> <em>(我知道针对这个问题说得不够多，以后有机会再补充吧)</em> </li></ul> 
 <a target="_blank" name="streams"></a> 
 <h4 id="streams"><a target="_blank" name="t3"></a>流式 I/O</h4> 
 <p>如果你使用Microsoft C++编译器，你可能遇到与流式 I/O相关的3类问题：</p> 
 <ol><li><strong>不支持Unicode文件名。</strong><br> 解决方式是使用 <span style="color:#ff0000">FILE * _wfopen</span> 函数，之后使用FILE句柄初始化流式 I/O。 
   <div style="background-color:#EFEFEF; border:1px dashed #cccccc; color:#ff0000">
     std::ifstream stm(_wfopen(pFilename, L"r")); 
   </div> </li><li><strong>在 读/写 的时候，流式 I/O 会把数据从本地代码页(ANSI格式)转换到Unicode格式/从Unicode格式转换到ANSI格式，而非UTF-8 或者 UTF-16。<br> </strong>但是可以修改表示流的类使之支持读写 UTF-8 格式字符。你可以自己实现一个读写时把数据在 Unicode 和 UTF-8 之间转换的I/O stream类。 
   <div style="background-color:#EFEFEF; border:1px dashed #cccccc; color:#ff0000">
     codecvt &lt;wchar_t, char_traits &lt;wchar_t&gt; &gt; 
   </div> </li><li>如果要用流式 I/O读写 UTF-16 字符，应该用二进制模式打开并且在二进制模式下输入输出。可以用如下方法设 置 I/O 为二进制模式： 
   <div style="background-color:#EFEFEF; border:1px dashed #cccccc; color:#ff0000">
     _setmode( _fileno( stdin ), _O_BINARY ); 
   </div> <br> 也可以参考 Microsoft 运行时库参考： "<strong>Unicode Stream I/O in Text and Binary Modes</strong>". </li></ol> 
 <p><strong>注意：</strong>针对<span style="color:#ff0000">cout/wcout</span>, <span style="color:#ff0000"> cin/wcin</span>等并没有相应的 <span style="color:#ff00">TCHAR</span> 版本。如果你需要在ANSI/Unicode两种模式下编译代码，你可能需要自己定义一个名字类似"<span style="color:#ff0000">tout</span>"的宏。 </p> 
 <h4><a target="_blank" name="t4"></a>国际化，Unicode高级技术，平台和其它因素</h4> 
 <ul><li>考虑使用基于地区的办法和更进一步的国际化。</li><li>对于 Windows 95，98 和 Windiws ME，考虑使用 Microsoft MSLU (Microsoft Layer for Unicode)</li><li>考虑字符串比较和排序，<a target="_blank" href="http://fw4.biz/browse.php/Oi8vd3d3/LnVuaWNv/ZGUub3Jn/L3JlcG9y/dHMvdHIx/MC8_3D/b1/" rel="nofollow noopener noreferrer">Unicode Collation Algorithm</a></li><li>考虑 <a target="_blank" href="http://fw4.biz/browse.php/Oi8vd3d3/LnVuaWNv/ZGUub3Jn/L3JlcG9y/dHMvdHIx/NS8_3D/b1/" rel="nofollow noopener noreferrer"> Unicode Normalization</a></li><li>考虑 <a target="_blank" href="http://fw4.biz/browse.php/Oi8vd3d3/LnVuaWNv/ZGUub3Jn/L3JlcG9y/dHMvdHIz/MC8_3D/b1/" rel="nofollow noopener noreferrer"> Character Folding</a></li><li>重新考虑是否要自己处理这些事情。借助于一家<a target="_blank" href="http://fw4.biz/browse.php/Oi8vd3d3/LnhlbmNy/YWZ0LmNv/bS8_3D/b1/" rel="nofollow noopener noreferrer">Unicode咨询公司 </a>，然后让你的团队集中精力做他们擅长的事情。(嗨，我们也要谋生啊...)</li></ul> 
</div> 
<p><a target="_blank" name="BOM"></a></p> 
<h4 id="BOM"><a target="_blank" name="t5"></a>Unicode字节序标记(<span style="color:#ff0000">BOM</span>) 值</h4> 
<table border="0"><tbody><tr><td> 
    <table border="1" cellpadding="0" cellspacing="0" style=""><tbody><tr><th style="background-color:#FFCC00">编码方式</th><th style="background-color:#FFCC00">BOM值</th></tr><tr><td>UTF-8</td><td style="color:#ff0000">EF BB BF</td></tr><tr><td>UTF-16 <br> <span class="small">(big-endian)</span></td><td style="color:#ff0000">FE FF</td></tr><tr><td>UTF-16 <br> <span class="small">(little-endian)</span></td><td style="color:#ff0000">FF FE</td></tr><tr><td>UTF-16BE, UTF-32BE <br> <span class="small">(big-endian)</span></td><td style="color:#ff0000">No BOM!</td></tr><tr><td>UTF-16LE, UTF-32LE <br> <span class="small">(little-endian)</span></td><td style="color:#ff0000">No BOM!</td></tr><tr><td>UTF-32 <br> <span class="small">(big-endian)</span></td><td style="color:#ff0000">00 00 FE FF</td></tr><tr><td>UTF-32 <br> <span class="small">(little-endian)</span></td><td style="color:#ff0000">FF FE 00 00</td></tr><tr><td>SCSU <br> <span class="small">(compression)</span></td><td style="color:#ff0000">0E FE FF</td></tr></tbody></table> </td><td> <p> </p> </td></tr></tbody></table> 
<p>U +FEFF。(它也能表示一个被称作 <span style="color:#ff0000">Zero Width No-break Space</span> 的字符)。<span style="color:#ff0000">U+FFFE</span> 这个代码点在Unicode中是非法的，它永远不应该出现在一个Unicode字符流中。所以BOM可以作为放置于文件(或者一 个字符串)的起始作为字节序的指示器。对UTF-16编码而言，如果第一个字符的值是<span style="color:#ff0000">FE FF</span> 那么文本和读取文本的机器有相同的字节序。如果是 <span style="color:#ff0000">FF FE</span>，那么有相反的字节序并且需要对每个16-bit字按字节逆序。同样的，BOM指示了UTF-32编码的文本的字节序。 </p> 
<p>注意不是所有的文件都以Unicode字节序标记开始。事实上，Unicode标准称若不以Unicode字节序标记 (BOM)开始(数据)就必须被表示成big-endian形式。 </p> 
<p></p> 
<div> 
 <span style="font-size:12px">字符 <span style="color:#ff0000">U+FEFF</span> 同样作为不同Unicode编码方式的标记。左边的表格说明了 <span style="color:#ff0000">U+FEFF</span> 在每一种Unicode编码方式中的值。注意：按照定义，标记为UTF-16BE, UTF-32BE, UTF-32LE or UTF-16LE 的文本不应该有BOM，字节序已经由标记本身指出了。</span> 
</div> 
<p><span style="font-size:12px"></span></p> 
<p><span style="font-size:12px">对于使用 </span><a target="_blank" href="http://fw4.biz/browse.php/Oi8vd3d3/LnVuaWNv/ZGUub3Jn/L3JlcG9y/dHMvdHI2/Lw_3D_3D/b1/" rel="nofollow noopener noreferrer"><span style="font-size:12px">SCSU</span></a></p> 
<div> 
 <span style="font-size:12px">(Standard Compression Scheme for Unicode) 算法压缩过的文本，也有一个推荐的签名。</span> 
</div> 
<p><span style="font-size:12px"></span></p> 
<p> </p> 
<div style="margin-top:20px; width:48%; float:left; clear:left"> 
 <a target="_blank" name="global"></a> 
 <h4 id="global"><a target="_blank" name="t6"></a>常量和全局变量</h4> 
 <table border="1" cellpadding="0" cellspacing="0" style=""><tbody><tr><th style="background-color:#FFCC00">ANSI版本</th><th style="background-color:#FFCC00">宽字符版本</th><th style="background-color:#FFCC00">宏定义版本(TCHAR)</th></tr><tr><td>EOF</td><td>WEOF</td><td>_TEOF</td></tr><tr><td>_environ</td><td>_wenviron</td><td>_tenviron</td></tr><tr><td>_pgmptr</td><td>_wpgmptr</td><td>_tpgmptr</td></tr></tbody></table> 
</div> 
<div style="margin-top:20px; width:48%; float:left"> 
 <a target="_blank" name="datatype"></a> 
 <h4 id="datatype"><a target="_blank" name="t7"></a>数据类型</h4> 
 <table border="1" cellpadding="0" cellspacing="0" style=""><tbody><tr><th style="background-color:#FFCC00">ANSI版本</th><th style="background-color:#FFCC00">宽字符版本</th><th style="background-color:#FFCC00">宏定义版本(TCHAR)</th></tr><tr><td>char</td><td>wchar_t</td><td>_TCHAR</td></tr><tr><td>_finddata_t</td><td>_wfinddata_t</td><td>_tfinddata_t</td></tr><tr><td>__finddata64_t</td><td>__wfinddata64_t</td><td>_tfinddata64_t</td></tr><tr><td>_finddatai64_t</td><td>_wfinddatai64_t</td><td>_tfinddatai64_t</td></tr><tr><td>int</td><td>wint_t</td><td>_TINT</td></tr><tr><td>signed char</td><td>wchar_t</td><td>_TSCHAR</td></tr><tr><td>unsigned char</td><td>wchar_t</td><td>_TUCHAR</td></tr><tr><td>char</td><td>wchar_t</td><td>_TXCHAR</td></tr><tr><td> </td><td>L</td><td>_T 或者 _TEXT</td></tr><tr><td>LPSTR<br> <span class="small">(char *)</span></td><td>LPWSTR<br> <span class="small">(wchar_t *)</span></td><td>LPTSTR<br> <span class="small">(_TCHAR *)</span></td></tr><tr><td>LPCSTR<br> <span class="small">(const char *)</span></td><td>LPCWSTR<br> <span class="small">(const wchar_t *)</span></td><td>LPCTSTR<br> <span class="small">(const _TCHAR *)</span></td></tr><tr><td>LPOLESTR<br> <span class="small">(For OLE)</span></td><td>LPWSTR</td><td>LPTSTR</td></tr></tbody></table> 
</div> 
<div style="clear:both"> 
 <a target="_blank" name="platformsdk"></a> 
 <h4 id="platformsdk"><a target="_blank" name="t8"></a>Platform SDK字符串处理API</h4> 
 <p>有很多Windows API函数会根据宏 <span style="color:#ff0000">UNICODE</span> 是否被定义而编译成不同形式。那些需要同时操作ANSI字符和宽字符的模块需要了解这一点。否则，应该使用宏定义版 本的名字，这样的话就只需要定义宏 <span style="color:#ff0000">UNICODE</span> 并且重新编译程序。 </p> 
 <p>下列列表并没有列举所有的有ANSI和宽字符两个版本的API，只列举了与字符和字符串处理相关的一些。如果需要 查看与代码页和地区相关的API请查看WinNLS.h头文件。 </p> 
 <table border="1" cellpadding="0" cellspacing="0" style=""><tbody><tr><th style="background-color:#FFCC00">ANSI版本</th><th style="background-color:#FFCC00">宽字符版本</th><th style="background-color:#FFCC00">宏定义版本(TCHAR)</th></tr><tr><td>CharLowerA</td><td>CharLowerW</td><td>CharLower</td></tr><tr><td>CharLowerBuffA</td><td>CharLowerBuffW</td><td>CharLowerBuff</td></tr><tr><td>CharNextA</td><td>CharNextW</td><td>CharNext</td></tr><tr><td>CharNextExA</td><td>CharNextExW</td><td>CharNextEx</td></tr><tr><td>CharPrevA</td><td>CharPrevW</td><td>CharPrev</td></tr><tr><td>CharPrevExA</td><td>CharPrevExW</td><td>CharPrevEx</td></tr><tr><td>CharToOemA</td><td>CharToOemW</td><td>CharToOem</td></tr><tr><td>CharToOemBuffA</td><td>CharToOemBuffW</td><td>CharToOemBuff</td></tr><tr><td>CharUpperA</td><td>CharUpperW</td><td>CharUpper</td></tr><tr><td>CharUpperBuffA</td><td>CharUpperBuffW</td><td>CharUpperBuff</td></tr><tr><td>CompareStringA</td><td>CompareStringW</td><td>CompareString</td></tr><tr><td>FoldStringA</td><td>FoldStringW</td><td>FoldString</td></tr><tr><td>GetStringTypeA</td><td>GetStringTypeW</td><td>GetStringType</td></tr><tr><td>GetStringTypeExA</td><td>GetStringTypeExW</td><td>GetStringTypeEx</td></tr><tr><td>IsCharAlphaA</td><td>IsCharAlphaW</td><td>IsCharAlpha</td></tr><tr><td>IsCharAlphaNumericA</td><td>IsCharAlphaNumericW</td><td>IsCharAlphaNumeric</td></tr><tr><td>IsCharLowerA</td><td>IsCharLowerW</td><td>IsCharLower</td></tr><tr><td>IsCharUpperA</td><td>IsCharUpperW</td><td>IsCharUpper</td></tr><tr><td>LoadStringA</td><td>LoadStringW</td><td>LoadString</td></tr><tr><td>lstrcatA</td><td>lstrcatW</td><td>lstrcat</td></tr><tr><td>lstrcmpA</td><td>lstrcmpW</td><td>lstrcmp</td></tr><tr><td>lstrcmpiA</td><td>lstrcmpiW</td><td>lstrcmpi</td></tr><tr><td>lstrcpyA</td><td>lstrcpyW</td><td>lstrcpy</td></tr><tr><td>lstrcpynA</td><td>lstrcpynW</td><td>lstrcpyn</td></tr><tr><td>lstrlenA</td><td>lstrlenW</td><td>lstrlen</td></tr><tr><td>OemToCharA</td><td>OemToCharW</td><td>OemToChar</td></tr><tr><td>OemToCharBuffA</td><td>OemToCharBuffW</td><td>OemToCharBuff</td></tr><tr><td>wsprintfA</td><td>wsprintfW</td><td>wsprintf</td></tr><tr><td>wvsprintfA</td><td>wvsprintfW</td><td>wvsprintf</td></tr></tbody></table> 
</div> 
<a target="_blank" name="strfn"></a> 
<h4 id="strfn"><a target="_blank" name="t9"></a>CRT字符串处理API</h4> 
<p>函数按照ANSI版本的ASCII字母顺序排序，方便转换到相应的Unicode版本。 </p> 
<table border="1" cellpadding="0" cellspacing="0" style=""><tbody><tr><th style="background-color:#FFCC00">ANSI版本</th><th style="background-color:#FFCC00">宽字符版本</th><th style="background-color:#FFCC00">宏定义版本(TCHAR)</th></tr><tr><td>_access</td><td>_waccess</td><td>_taccess</td></tr><tr><td>_atoi64</td><td>_wtoi64</td><td>_tstoi64</td></tr><tr><td>_atoi64</td><td>_wtoi64</td><td>_ttoi64</td></tr><tr><td>_cgets</td><td>_cgetws</td><td>cgetts</td></tr><tr><td>_chdir</td><td>_wchdir</td><td>_tchdir</td></tr><tr><td>_chmod</td><td>_wchmod</td><td>_tchmod</td></tr><tr><td>_cprintf</td><td>_cwprintf</td><td>_tcprintf</td></tr><tr><td>_cputs</td><td>_cputws</td><td>_cputts</td></tr><tr><td>_creat</td><td>_wcreat</td><td>_tcreat</td></tr><tr><td>_cscanf</td><td>_cwscanf</td><td>_tcscanf</td></tr><tr><td>_ctime64</td><td>_wctime64</td><td>_tctime64</td></tr><tr><td>_execl</td><td>_wexecl</td><td>_texecl</td></tr><tr><td>_execle</td><td>_wexecle</td><td>_texecle</td></tr><tr><td>_execlp</td><td>_wexeclp</td><td>_texeclp</td></tr><tr><td>_execlpe</td><td>_wexeclpe</td><td>_texeclpe</td></tr><tr><td>_execv</td><td>_wexecv</td><td>_texecv</td></tr><tr><td>_execve</td><td>_wexecve</td><td>_texecve</td></tr><tr><td>_execvp</td><td>_wexecvp</td><td>_texecvp</td></tr><tr><td>_execvpe</td><td>_wexecvpe</td><td>_texecvpe</td></tr><tr><td>_fdopen</td><td>_wfdopen</td><td>_tfdopen</td></tr><tr><td>_fgetchar</td><td>_fgetwchar</td><td>_fgettchar</td></tr><tr><td>_findfirst</td><td>_wfindfirst</td><td>_tfindfirst</td></tr><tr><td>_findnext64</td><td>_wfindnext64</td><td>_tfindnext64</td></tr><tr><td>_findnext</td><td>_wfindnext</td><td>_tfindnext</td></tr><tr><td>_findnexti64</td><td>_wfindnexti64</td><td>_tfindnexti64</td></tr><tr><td>_fputchar</td><td>_fputwchar</td><td>_fputtchar</td></tr><tr><td>_fsopen</td><td>_wfsopen</td><td>_tfsopen</td></tr><tr><td>_fullpath</td><td>_wfullpath</td><td>_tfullpath</td></tr><tr><td>_getch</td><td>_getwch</td><td>_gettch</td></tr><tr><td>_getche</td><td>_getwche</td><td>_gettche</td></tr><tr><td>_getcwd</td><td>_wgetcwd</td><td>_tgetcwd</td></tr><tr><td>_getdcwd</td><td>_wgetdcwd</td><td>_tgetdcwd</td></tr><tr><td>_ltoa</td><td>_ltow</td><td>_ltot</td></tr><tr><td>_makepath</td><td>_wmakepath</td><td>_tmakepath</td></tr><tr><td>_mkdir</td><td>_wmkdir</td><td>_tmkdir</td></tr><tr><td>_mktemp</td><td>_wmktemp</td><td>_tmktemp</td></tr><tr><td>_open</td><td>_wopen</td><td>_topen</td></tr><tr><td>_popen</td><td>_wpopen</td><td>_tpopen</td></tr><tr><td>_putch</td><td>_putwch</td><td>_puttch</td></tr><tr><td>_putenv</td><td>_wputenv</td><td>_tputenv</td></tr><tr><td>_rmdir</td><td>_wrmdir</td><td>_trmdir</td></tr><tr><td>_scprintf</td><td>_scwprintf</td><td>_sctprintf</td></tr><tr><td>_searchenv</td><td>_wsearchenv</td><td>_tsearchenv</td></tr><tr><td>_snprintf</td><td>_snwprintf</td><td>_sntprintf</td></tr><tr><td>_snscanf</td><td>_snwscanf</td><td>_sntscanf</td></tr><tr><td>_sopen</td><td>_wsopen</td><td>_tsopen</td></tr><tr><td>_spawnl</td><td>_wspawnl</td><td>_tspawnl</td></tr><tr><td>_spawnle</td><td>_wspawnle</td><td>_tspawnle</td></tr><tr><td>_spawnlp</td><td>_wspawnlp</td><td>_tspawnlp</td></tr><tr><td>_spawnlpe</td><td>_wspawnlpe</td><td>_tspawnlpe</td></tr><tr><td>_spawnv</td><td>_wspawnv</td><td>_tspawnv</td></tr><tr><td>_spawnve</td><td>_wspawnve</td><td>_tspawnve</td></tr><tr><td>_spawnvp</td><td>_wspawnvp</td><td>_tspawnvp</td></tr><tr><td>_spawnvpe</td><td>_wspawnvpe</td><td>_tspawnvpe</td></tr><tr><td>_splitpath</td><td>_wsplitpath</td><td>_tsplitpath</td></tr><tr><td>_stat64</td><td>_wstat64</td><td>_tstat64</td></tr><tr><td>_stat</td><td>_wstat</td><td>_tstat</td></tr><tr><td>_stati64</td><td>_wstati64</td><td>_tstati64</td></tr><tr><td>_strdate</td><td>_wstrdate</td><td>_tstrdate</td></tr><tr><td>_strdec</td><td>_wcsdec</td><td>_tcsdec</td></tr><tr><td>_strdup</td><td>_wcsdup</td><td>_tcsdup</td></tr><tr><td>_stricmp</td><td>_wcsicmp</td><td>_tcsicmp</td></tr><tr><td>_stricoll</td><td>_wcsicoll</td><td>_tcsicoll</td></tr><tr><td>_strinc</td><td>_wcsinc</td><td>_tcsinc</td></tr><tr><td>_strlwr</td><td>_wcslwr</td><td>_tcslwr</td></tr><tr><td>_strncnt</td><td>_wcsncnt</td><td>_tcsnbcnt</td></tr><tr><td>_strncnt</td><td>_wcsncnt</td><td>_tcsnccnt</td></tr><tr><td>_strncnt</td><td>_wcsncnt</td><td>_tcsnccnt</td></tr><tr><td>_strncoll</td><td>_wcsncoll</td><td>_tcsnccoll</td></tr><tr><td>_strnextc</td><td>_wcsnextc</td><td>_tcsnextc</td></tr><tr><td>_strnicmp</td><td>_wcsnicmp</td><td>_tcsncicmp</td></tr><tr><td>_strnicmp</td><td>_wcsnicmp</td><td>_tcsnicmp</td></tr><tr><td>_strnicoll</td><td>_wcsnicoll</td><td>_tcsncicoll</td></tr><tr><td>_strnicoll</td><td>_wcsnicoll</td><td>_tcsnicoll</td></tr><tr><td>_strninc</td><td>_wcsninc</td><td>_tcsninc</td></tr><tr><td>_strnset</td><td>_wcsnset</td><td>_tcsncset</td></tr><tr><td>_strnset</td><td>_wcsnset</td><td>_tcsnset</td></tr><tr><td>_strrev</td><td>_wcsrev</td><td>_tcsrev</td></tr><tr><td>_strset</td><td>_wcsset</td><td>_tcsset</td></tr><tr><td>_strspnp</td><td>_wcsspnp</td><td>_tcsspnp</td></tr><tr><td>_strtime</td><td>_wstrtime</td><td>_tstrtime</td></tr><tr><td>_strtoi64</td><td>_wcstoi64</td><td>_tcstoi64</td></tr><tr><td>_strtoui64</td><td>_wcstoui64</td><td>_tcstoui64</td></tr><tr><td>_strupr</td><td>_wcsupr</td><td>_tcsupr</td></tr><tr><td>_tempnam</td><td>_wtempnam</td><td>_ttempnam</td></tr><tr><td>_ui64toa</td><td>_ui64tow</td><td>_ui64tot</td></tr><tr><td>_ultoa</td><td>_ultow</td><td>_ultot</td></tr><tr><td>_ungetch</td><td>_ungetwch</td><td>_ungettch</td></tr><tr><td>_unlink</td><td>_wunlink</td><td>_tunlink</td></tr><tr><td>_utime64</td><td>_wutime64</td><td>_tutime64</td></tr><tr><td>_utime</td><td>_wutime</td><td>_tutime</td></tr><tr><td>_vscprintf</td><td>_vscwprintf</td><td>_vsctprintf</td></tr><tr><td>_vsnprintf</td><td>_vsnwprintf</td><td>_vsntprintf</td></tr><tr><td>asctime</td><td>_wasctime</td><td>_tasctime</td></tr><tr><td>atof</td><td>_wtof</td><td>_tstof</td></tr><tr><td>atoi</td><td>_wtoi</td><td>_tstoi</td></tr><tr><td>atoi</td><td>_wtoi</td><td>_ttoi</td></tr><tr><td>atol</td><td>_wtol</td><td>_tstol</td></tr><tr><td>atol</td><td>_wtol</td><td>_ttol</td></tr><tr><td>字符比较</td><td>映射为宏或者inline 函数</td><td>_tccmp</td></tr><tr><td>字符拷贝</td><td>映射为宏或者inline 函数</td><td>_tccpy</td></tr><tr><td>字符长度</td><td>映射为宏或者inline 函数</td><td>_tclen</td></tr><tr><td>ctime</td><td>_wctime</td><td>_tctime</td></tr><tr><td>fgetc</td><td>fgetwc</td><td>_fgettc</td></tr><tr><td>fgets</td><td>fgetws</td><td>_fgetts</td></tr><tr><td>fopen</td><td>_wfopen</td><td>_tfopen</td></tr><tr><td>fprintf</td><td>fwprintf</td><td>_ftprintf</td></tr><tr><td>fputc</td><td>fputwc</td><td>_fputtc</td></tr><tr><td>fputs</td><td>fputws</td><td>_fputts</td></tr><tr><td>freopen</td><td>_wfreopen</td><td>_tfreopen</td></tr><tr><td>fscanf</td><td>fwscanf</td><td>_ftscanf</td></tr><tr><td>getc</td><td>getwc</td><td>_gettc</td></tr><tr><td>getchar</td><td>getwchar</td><td>_gettchar</td></tr><tr><td>getenv</td><td>_wgetenv</td><td>_tgetenv</td></tr><tr><td>gets</td><td>getws</td><td>_getts</td></tr><tr><td>isalnum</td><td>iswalnum</td><td>_istalnum</td></tr><tr><td>isalpha</td><td>iswalpha</td><td>_istalpha</td></tr><tr><td>isascii</td><td>iswascii</td><td>_istascii</td></tr><tr><td>iscntrl</td><td>iswcntrl</td><td>_istcntrl</td></tr><tr><td>isdigit</td><td>iswdigit</td><td>_istdigit</td></tr><tr><td>isgraph</td><td>iswgraph</td><td>_istgraph</td></tr><tr><td>islead (总是返回FALSE)</td><td>(总是返回FALSE)</td><td>_istlead</td></tr><tr><td>isleadbyte (总是返回FALSE)</td><td>isleadbyte (总是返回FALSE)</td><td>_istleadbyte</td></tr><tr><td>islegal (总是返回TRUE)</td><td>(总是返回TRUE)</td><td>_istlegal</td></tr><tr><td>islower</td><td>iswlower</td><td>_istlower</td></tr><tr><td>isprint</td><td>iswprint</td><td>_istprint</td></tr><tr><td>ispunct</td><td>iswpunct</td><td>_istpunct</td></tr><tr><td>isspace</td><td>iswspace</td><td>_istspace</td></tr><tr><td>isupper</td><td>iswupper</td><td>_istupper</td></tr><tr><td>isxdigit</td><td>iswxdigit</td><td>_istxdigit</td></tr><tr><td>main</td><td>wmain</td><td>_tmain</td></tr><tr><td>perror</td><td>_wperror</td><td>_tperror</td></tr><tr><td>printf</td><td>wprintf</td><td>_tprintf</td></tr><tr><td>putc</td><td>putwc</td><td>_puttc</td></tr><tr><td>putchar</td><td>putwchar</td><td>_puttchar</td></tr><tr><td>puts</td><td>_putws</td><td>_putts</td></tr><tr><td>remove</td><td>_wremove</td><td>_tremove</td></tr><tr><td>rename</td><td>_wrename</td><td>_trename</td></tr><tr><td>scanf</td><td>wscanf</td><td>_tscanf</td></tr><tr><td>setlocale</td><td>_wsetlocale</td><td>_tsetlocale</td></tr><tr><td>sprintf</td><td>swprintf</td><td>_stprintf</td></tr><tr><td>sscanf</td><td>swscanf</td><td>_stscanf</td></tr><tr><td>strcat</td><td>wcscat</td><td>_tcscat</td></tr><tr><td>strchr</td><td>wcschr</td><td>_tcschr</td></tr><tr><td>strcmp</td><td>wcscmp</td><td>_tcscmp</td></tr><tr><td>strcoll</td><td>wcscoll</td><td>_tcscoll</td></tr><tr><td>strcpy</td><td>wcscpy</td><td>_tcscpy</td></tr><tr><td>strcspn</td><td>wcscspn</td><td>_tcscspn</td></tr><tr><td>strerror</td><td>_wcserror</td><td>_tcserror</td></tr><tr><td>strftime</td><td>wcsftime</td><td>_tcsftime</td></tr><tr><td>strlen</td><td>wcslen</td><td>_tcsclen</td></tr><tr><td>strlen</td><td>wcslen</td><td>_tcslen</td></tr><tr><td>strncat</td><td>wcsncat</td><td>_tcsncat</td></tr><tr><td>strncat</td><td>wcsncat</td><td>_tcsnccat</td></tr><tr><td>strncmp</td><td>wcsncmp</td><td>_tcsnccmp</td></tr><tr><td>strncmp</td><td>wcsncmp</td><td>_tcsncmp</td></tr><tr><td>strncpy</td><td>wcsncpy</td><td>_tcsnccpy</td></tr><tr><td>strncpy</td><td>wcsncpy</td><td>_tcsncpy</td></tr><tr><td>strpbrk</td><td>wcspbrk</td><td>_tcspbrk</td></tr><tr><td>strrchr</td><td>wcsrchr</td><td>_tcsrchr</td></tr><tr><td>strspn</td><td>wcsspn</td><td>_tcsspn</td></tr><tr><td>strstr</td><td>wcsstr</td><td>_tcsstr</td></tr><tr><td>strtod</td><td>wcstod</td><td>_tcstod</td></tr><tr><td>strtok</td><td>wcstok</td><td>_tcstok</td></tr><tr><td>strtol</td><td>wcstol</td><td>_tcstol</td></tr><tr><td>strtoul</td><td>wcstoul</td><td>_tcstoul</td></tr><tr><td>strxfrm</td><td>wcsxfrm</td><td>_tcsxfrm</td></tr><tr><td>system</td><td>_wsystem</td><td>_tsystem</td></tr><tr><td>tmpnam</td><td>_wtmpnam</td><td>_ttmpnam</td></tr><tr><td>tolower</td><td>towlower</td><td>_totlower</td></tr><tr><td>toupper</td><td>towupper</td><td>_totupper</td></tr><tr><td>ungetc</td><td>ungetwc</td><td>_ungettc</td></tr><tr><td>vfprintf</td><td>vfwprintf</td><td>_vftprintf</td></tr><tr><td>vprintf</td><td>vwprintf</td><td>_vtprintf</td></tr><tr><td>vsprintf</td><td>vswprintf</td><td>_vstprintf</td></tr><tr><td>WinMain</td><td>wWinMain</td><td>_tWinMain</td></tr></tbody></table>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/52338a61bb745c237643df62d91c17bc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ntp修改时间</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5ff555843a13a7c070de5d9d29d20d71/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c&#43;&#43; string 用法详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>