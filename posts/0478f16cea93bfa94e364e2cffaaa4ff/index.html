<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>The slave I/O thread stops because master and slave have equal MySQL server UUIDs; - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="The slave I/O thread stops because master and slave have equal MySQL server UUIDs;" />
<meta property="og:description" content="最近在部署MySQL主从复制架构的时候，碰到了&#34;Last_IO_Error: Fatal error: The slave I/O thread stops because master and slave have equal MySQL server UUIDs; these UUIDs must be different for replication to work.&#34; 这个错误提示。即主从架构中使用了相同的UUID。检查server_id系统变量，已经是不同的设置，那原因是？接下来为具体描述。
1、错误消息
mysql&gt; show slave staus;
Last_IO_Error: Fatal error: The slave I/O thread stops because master and slave have equal MySQL server UUIDs; these UUIDs must be different for replication to work.
2、查看主从的server_id变量
master_mysql&gt; show variables like &#39;server_id&#39;;
&#43;---------------&#43;-------&#43;
| Variable_name | Value |" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/0478f16cea93bfa94e364e2cffaaa4ff/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-08-20T09:51:28+08:00" />
<meta property="article:modified_time" content="2018-08-20T09:51:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">The slave I/O thread stops because master and slave have equal MySQL server UUIDs;</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近在部署MySQL主从复制架构的时候，碰到了"Last_IO_Error: Fatal error: The slave I/O thread stops because master and slave have equal MySQL server UUIDs;  these UUIDs must be different for replication to work." 这个错误提示。即主从架构中使用了相同的UUID。检查server_id系统变量，已经是不同的设置，那原因是？接下来为具体描述。</p> 
<p>1、错误消息<br> mysql&gt; show slave staus;<br>  <br> Last_IO_Error: Fatal error: The slave I/O thread stops because master and slave have equal MySQL server UUIDs; <br> these UUIDs must be different for replication to work.<br>  <br> 2、查看主从的server_id变量<br> master_mysql&gt; show variables like 'server_id';<br> +---------------+-------+<br> | Variable_name | Value |<br> +---------------+-------+<br> | server_id    | 33    |<br> +---------------+-------+</p> 
<p>slave_mysql&gt; show variables like 'server_id';<br> +---------------+-------+<br> | Variable_name | Value |<br> +---------------+-------+<br> | server_id    | 11    |<br> +---------------+-------+<br> -- 从上面的情形可知，主从mysql已经使用了不同的server_id</p> 
<p>3、解决故障<br> ###查看auto.cnf文件<br> [root@dbsrv1 ~] cat /data/mysqldata/auto.cnf  ### 主上的uuid<br> [auto]<br> server-uuid=62ee10aa-b1f7-11e4-90ae-080027615026</p> 
<p>[root@dbsrv2 ~]# more /data/mysqldata/auto.cnf ###从上的uuid，果然出现了重复，原因是克隆了虚拟机，只改server_id不行<br> [auto]<br> server-uuid=62ee10aa-b1f7-11e4-90ae-080027615026</p> 
<p>[root@dbsrv2 ~]# mv /data/mysqldata/auto.cnf  /data/mysqldata/auto.cnf.bk  ###重命名该文件<br> [root@dbsrv2 ~]# service mysql restart          ###重启mysql<br> Shutting down MySQL.[  OK  ]<br> Starting MySQL.[  OK  ]<br> [root@dbsrv2 ~]# more /data/mysqldata/auto.cnf  ###重启后自动生成新的auto.cnf文件，即新的UUID<br> [auto]<br> server-uuid=6ac0fdae-b5d7-11e4-a9f3-0800278ce5c9</p> 
<p><br> ###再次查看slave的状态已经正常<br> [root@dbsrv1 ~]# mysql -uroot -pxxx -e "show slave status\G"|grep Running<br> Warning: Using a password on the command line interface can be insecure.<br>             Slave_IO_Running: Yes<br>             Slave_SQL_Running: Yes<br>       Slave_SQL_Running_State: Slave has read all relay log; waiting for the slave I/O thread to update it</p> 
<p>###主库端查看自身的uuid<br> master_mysql&gt; show variables like 'server_uuid';<br> +---------------+--------------------------------------+<br> | Variable_name | Value                                |<br> +---------------+--------------------------------------+<br> | server_uuid  | 62ee10aa-b1f7-11e4-90ae-080027615026 |<br> +---------------+--------------------------------------+<br> 1 row in set (0.00 sec)</p> 
<p>###主库端查看从库的uuid<br> master_mysql&gt; show slave hosts;<br> +-----------+------+------+-----------+--------------------------------------+<br> | Server_id | Host | Port | Master_id | Slave_UUID                          |<br> +-----------+------+------+-----------+--------------------------------------+<br> |        33 |      | 3306 |        11 | 62ee10aa-b1f7-11e4-90ae-080027615030 |<br> |        22 |      | 3306 |        11 | 6ac0fdae-b5d7-11e4-a9f3-0800278ce5c9 |<br> +-----------+------+------+-----------+--------------------------------------+</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e48182768a136b568becb26ee9ac4234/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">element-ui 动态表头渲染表格</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/70058b0ba3e64813da6ba85f1afd50bc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用OpenCV通过摄像头捕获实时视频并探测人脸</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>