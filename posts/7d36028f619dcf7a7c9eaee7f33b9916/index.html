<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>烟花完整版 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="烟花完整版" />
<meta property="og:description" content="&lt;!DOCTYPE html&gt; &lt;html lang=&#34;en&#34;&gt; &lt;head&gt; &lt;meta charset=&#34;UTF-8&#34;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; #container{ width: 80%; height: 600px; border: 2px solid red; background: #000; margin:20px auto; cursor: pointer; position: relative; left: 0; top: 0; overflow: hidden; } .fire{ width: 10px; height:10px; position: absolute; bottom: 0; } .small-fire{ width: 10px; height:10px; position: absolute; border-radius: 50%; } &lt;/style&gt; &lt;script src=&#34;../public.js&#34;&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&#34;container&#34;&gt;&lt;/div&gt; &lt;/body&gt; &lt;script&gt; // for(){ // ali[i] = i // ali[i].onclick = function(){ // this // } // } // 范围随机数 function Fire(options) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/7d36028f619dcf7a7c9eaee7f33b9916/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-04T22:43:00+08:00" />
<meta property="article:modified_time" content="2019-09-04T22:43:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">烟花完整版</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">&lt;!</span><span style="color:#ff00ff;">DOCTYPE html</span><span style="color:#0000ff;">&gt;</span>
<span style="color:#0000ff;">&lt;</span><span style="color:#800000;">html </span><span style="color:#ff0000;">lang</span><span style="color:#0000ff;">="en"</span><span style="color:#0000ff;">&gt;</span>
<span style="color:#0000ff;">&lt;</span><span style="color:#800000;">head</span><span style="color:#0000ff;">&gt;</span>
    <span style="color:#0000ff;">&lt;</span><span style="color:#800000;">meta </span><span style="color:#ff0000;">charset</span><span style="color:#0000ff;">="UTF-8"</span><span style="color:#0000ff;">&gt;</span>
    <span style="color:#0000ff;">&lt;</span><span style="color:#800000;">title</span><span style="color:#0000ff;">&gt;</span>Document<span style="color:#0000ff;">&lt;/</span><span style="color:#800000;">title</span><span style="color:#0000ff;">&gt;</span>
    <span style="color:#0000ff;">&lt;</span><span style="color:#800000;">style</span><span style="color:#0000ff;">&gt;</span><span style="color:#800000;">
        #container</span><span style="color:#000000;">{<!-- --></span><span style="color:#ff0000;">
            width</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> 80%</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            height</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> 600px</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            border</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> 2px solid red</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            background</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> #000</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            margin</span><span style="color:#000000;">:</span><span style="color:#0000ff;">20px auto</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            cursor</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> pointer</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            position</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> relative</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            left</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> 0</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            top</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> 0</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            overflow</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> hidden</span><span style="color:#000000;">;</span>
        <span style="color:#000000;">}</span><span style="color:#800000;">
        .fire</span><span style="color:#000000;">{<!-- --></span><span style="color:#ff0000;">
            width</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> 10px</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            height</span><span style="color:#000000;">:</span><span style="color:#0000ff;">10px</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            position</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> absolute</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            bottom</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> 0</span><span style="color:#000000;">;</span>
        <span style="color:#000000;">}</span><span style="color:#800000;">
        .small-fire</span><span style="color:#000000;">{<!-- --></span><span style="color:#ff0000;">
            width</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> 10px</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            height</span><span style="color:#000000;">:</span><span style="color:#0000ff;">10px</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            position</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> absolute</span><span style="color:#000000;">;</span><span style="color:#ff0000;">
            border-radius</span><span style="color:#000000;">:</span><span style="color:#0000ff;"> 50%</span><span style="color:#000000;">;</span>
        <span style="color:#000000;">}</span>
    <span style="color:#0000ff;">&lt;/</span><span style="color:#800000;">style</span><span style="color:#0000ff;">&gt;</span>
    <span style="color:#0000ff;">&lt;</span><span style="color:#800000;">script </span><span style="color:#ff0000;">src</span><span style="color:#0000ff;">="../public.js"</span><span style="color:#0000ff;">&gt;&lt;/</span><span style="color:#800000;">script</span><span style="color:#0000ff;">&gt;</span>
<span style="color:#0000ff;">&lt;/</span><span style="color:#800000;">head</span><span style="color:#0000ff;">&gt;</span>
<span style="color:#0000ff;">&lt;</span><span style="color:#800000;">body</span><span style="color:#0000ff;">&gt;</span>
<span style="color:#0000ff;">&lt;</span><span style="color:#800000;">div </span><span style="color:#ff0000;">id</span><span style="color:#0000ff;">="container"</span><span style="color:#0000ff;">&gt;&lt;/</span><span style="color:#800000;">div</span><span style="color:#0000ff;">&gt;</span>
<span style="color:#0000ff;">&lt;/</span><span style="color:#800000;">body</span><span style="color:#0000ff;">&gt;</span>
<span style="color:#0000ff;">&lt;</span><span style="color:#800000;">script</span><span style="color:#0000ff;">&gt;</span>

    <span style="color:#008000;">//</span><span style="color:#008000;"> for(){<!-- --></span>
    <span style="color:#008000;">//</span><span style="color:#008000;">     ali[i] = i</span>
    <span style="color:#008000;">//</span><span style="color:#008000;">     ali[i].onclick = function(){<!-- --></span>
    <span style="color:#008000;">//</span><span style="color:#008000;">         this</span>
    <span style="color:#008000;">//</span><span style="color:#008000;">     }</span>
    <span style="color:#008000;">//</span><span style="color:#008000;"> }</span>
    <span style="color:#008000;">//</span><span style="color:#008000;"> 范围随机数</span>
<span style="color:#0000ff;">function</span><span style="color:#000000;"> Fire(options) {
    </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.x</span><span style="color:#000000;">=</span><span style="color:#000000;">options.x;
    </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.y</span><span style="color:#000000;">=</span><span style="color:#000000;">options.y;
    </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.cont</span><span style="color:#000000;">=</span><span style="color:#000000;">options.parent;
    </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.arr</span><span style="color:#000000;">=</span><span style="color:#000000;">[];
    </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.init();
}
    Fire.prototype.init </span><span style="color:#000000;">=</span> <span style="color:#0000ff;">function</span><span style="color:#000000;">(){
        </span><span style="color:#008000;">//</span><span style="color:#008000;"> 主体烟花，设置样式，位置</span>
        <span style="color:#0000ff;">this</span><span style="color:#000000;">.ele </span><span style="color:#000000;">=</span><span style="color:#000000;"> document.createElement(</span><span style="color:#000000;">"</span><span style="color:#000000;">div</span><span style="color:#000000;">"</span><span style="color:#000000;">);
        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.ele.className </span><span style="color:#000000;">=</span> <span style="color:#000000;">"</span><span style="color:#000000;">fire</span><span style="color:#000000;">"</span><span style="color:#000000;">;
        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.ele.style.left </span><span style="color:#000000;">=</span> <span style="color:#0000ff;">this</span><span style="color:#000000;">.x </span><span style="color:#000000;">+</span> <span style="color:#000000;">"</span><span style="color:#000000;">px</span><span style="color:#000000;">"</span><span style="color:#000000;">;
        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.ele.style.background </span><span style="color:#000000;">=</span><span style="color:#000000;"> randomColor();
        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.cont.appendChild(</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.ele)

        </span><span style="color:#008000;">//</span><span style="color:#008000;"> 2.开始运动，运动结束</span>
        <span style="color:#0000ff;">this</span><span style="color:#000000;">.animate()
    }
Fire.prototype.animate</span><span style="color:#000000;">=</span><span style="color:#0000ff;">function</span><span style="color:#000000;"> () {
   move(</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.ele,{top:</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.y},</span><span style="color:#0000ff;">function</span><span style="color:#000000;"> () {
       </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.ele.remove()
       </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.createSmall()
   }.bind(</span><span style="color:#0000ff;">this</span><span style="color:#000000;">))</span><span style="color:#008000;">//</span><span style="color:#008000;">强行把原型的this穿进去，因为这里本来的this是function前面的。</span>
<span style="color:#000000;">};
    Fire.prototype.createSmall </span><span style="color:#000000;">=</span> <span style="color:#0000ff;">function</span><span style="color:#000000;">(){
        </span><span style="color:#008000;">//</span><span style="color:#008000;"> 创建小烟花,运动，删掉</span>
        <span style="color:#0000ff;">var</span><span style="color:#000000;"> r </span><span style="color:#000000;">=</span><span style="color:#000000;"> Math.round(Math.random()</span><span style="color:#000000;">*</span><span style="color:#000000;">100</span><span style="color:#000000;">+</span><span style="color:#000000;">150</span><span style="color:#000000;">);

        </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> num </span><span style="color:#000000;">=</span><span style="color:#000000;"> random(</span><span style="color:#000000;">50</span><span style="color:#000000;">,</span><span style="color:#000000;">60</span><span style="color:#000000;">);
        console.log(num)
        </span><span style="color:#0000ff;">for</span><span style="color:#000000;">(</span><span style="color:#0000ff;">var</span><span style="color:#000000;"> i</span><span style="color:#000000;">=</span><span style="color:#000000;">0</span><span style="color:#000000;">;i</span><span style="color:#000000;">&lt;</span><span style="color:#000000;">num;i</span><span style="color:#000000;">++</span><span style="color:#000000;">){
            </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> div </span><span style="color:#000000;">=</span><span style="color:#000000;"> document.createElement(</span><span style="color:#000000;">"</span><span style="color:#000000;">div</span><span style="color:#000000;">"</span><span style="color:#000000;">);</span><span style="color:#008000;">//</span><span style="color:#008000;">用var无法消失小烟花</span>
<span style="color:#000000;">            div.className </span><span style="color:#000000;">=</span> <span style="color:#000000;">"</span><span style="color:#000000;">small-fire</span><span style="color:#000000;">"</span><span style="color:#000000;">;
            div.style.background </span><span style="color:#000000;">=</span><span style="color:#000000;"> randomColor();
            div.style.left </span><span style="color:#000000;">=</span> <span style="color:#0000ff;">this</span><span style="color:#000000;">.x </span><span style="color:#000000;">+</span> <span style="color:#000000;">"</span><span style="color:#000000;">px</span><span style="color:#000000;">"</span><span style="color:#000000;">;
            div.style.top </span><span style="color:#000000;">=</span> <span style="color:#0000ff;">this</span><span style="color:#000000;">.y </span><span style="color:#000000;">+</span> <span style="color:#000000;">"</span><span style="color:#000000;">px</span><span style="color:#000000;">"</span><span style="color:#000000;">;
            div.setAttribute(</span><span style="color:#000000;">"</span><span style="color:#000000;">i</span><span style="color:#000000;">"</span><span style="color:#000000;">,i);
            </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.cont.appendChild(div);
</span><span style="color:#008000;">//</span><span style="color:#008000;">            this.arr.push(div)</span>

            <span style="color:#008000;">//</span><span style="color:#008000;"> 产生随机坐标</span>
            <span style="color:#0000ff;">var</span><span style="color:#000000;"> l</span><span style="color:#000000;">=</span><span style="color:#000000;">Math.round(Math.sin(Math.PI</span><span style="color:#000000;">/</span><span style="color:#000000;">180*10*i)*r) + this.x;</span><span style="color:#000000;">//</span><span style="color:#000000;">必须要取整，否则来回抖动，永远无法到达目的地也就无法消失。</span>
            <span style="color:#0000ff;">var</span><span style="color:#000000;"> t</span><span style="color:#000000;">=</span><span style="color:#000000;">Math.round(Math.cos(Math.PI</span><span style="color:#000000;">/</span><span style="color:#000000;">180*10*i)*r) + this.y;</span>



            <span style="color:#008000;">//</span><span style="color:#008000;"> 在move的回调函数中，找不到每个div：</span>
            <span style="color:#008000;">//</span><span style="color:#008000;"> 原因：异步：for循环立即执行，回到函数等待执行，回调函数执行时，循环已经结束多时，div已经被重复覆盖</span>
            <span style="color:#008000;">//</span><span style="color:#008000;"> 解决方案：</span>

            <span style="color:#008000;">//</span><span style="color:#008000;"> 2.使用bind将div强行传进去</span>
            <span style="color:#008000;">//</span><span style="color:#008000;"> 3.使用匿名函数生成新的作用域，保存div：***</span>
            <span style="color:#008000;">//</span><span style="color:#008000;"> 4.利用let触发块级作用域，保存div：√，即for每次循环，那个div都是个新的div，</span><span style="color:#008000;">
//</span><span style="color:#008000;">            后面就可以直接用了</span>

<span style="color:#008000;">//</span><span style="color:#008000;">=========================================================================</span><span style="color:#008000;">
//</span><span style="color:#008000;">            ;(function (div) {<!-- --></span><span style="color:#008000;">
//</span><span style="color:#008000;">                move(div,{<!-- --></span><span style="color:#008000;">
//</span><span style="color:#008000;">                    left:l,</span><span style="color:#008000;">
//</span><span style="color:#008000;">                    top:t</span><span style="color:#008000;">
//</span><span style="color:#008000;">                },function(){<!-- --></span><span style="color:#008000;">
//</span><span style="color:#008000;">                    div.remove()</span><span style="color:#008000;">
//</span><span style="color:#008000;">                })</span><span style="color:#008000;">
//</span><span style="color:#008000;">            })(div);//匿名函数的方法，匿名函数自动执行，for没执行一次，匿名函数也执行一次，进行传参。div可以用var声明</span><span style="color:#008000;">
//</span><span style="color:#008000;"> =============================================================================</span><span style="color:#008000;">
//</span><span style="color:#008000;">            move(div,{<!-- --></span><span style="color:#008000;">
//</span><span style="color:#008000;">                left:l,</span><span style="color:#008000;">
//</span><span style="color:#008000;">                top:t</span><span style="color:#008000;">
//</span><span style="color:#008000;">            },function(){<!-- --></span><span style="color:#008000;">
//</span><span style="color:#008000;">                div.remove()</span><span style="color:#008000;">
//</span><span style="color:#008000;">            })</span>
            <span style="color:#008000;">//</span><span style="color:#008000;">let块级作用于办法，利用let触发块级作用域，保存div：√，即for每次循环，那个div都是个新的div，后面就可以直接用了,div用let声明，后面什么不用改。</span><span style="color:#008000;">
//</span><span style="color:#008000;">=============================================================================</span>

<span style="color:#008000;">//
//</span><span style="color:#008000;">            move(div,{<!-- --></span><span style="color:#008000;">
//</span><span style="color:#008000;">                left:l,</span><span style="color:#008000;">
//</span><span style="color:#008000;">                top:t</span><span style="color:#008000;">
//</span><span style="color:#008000;">            },()=&gt;{<!-- --></span><span style="color:#008000;">
//</span><span style="color:#008000;">              for(var i=0;i&lt;this.arr.length;i++){<!-- --></span><span style="color:#008000;">
//</span><span style="color:#008000;">               this.arr[i].remove()</span><span style="color:#008000;">
//</span><span style="color:#008000;">              }</span><span style="color:#008000;">
//</span><span style="color:#008000;">            });//提前定义数组保存，结束时根据数组删除,记得如果使用this，用箭头函数。否则用that传；div可以用var声明</span><span style="color:#008000;">
//</span><span style="color:#008000;">===============================================================================</span>
<span style="color:#000000;">

            move(div,{
                left:l,
                top:t
            },</span><span style="color:#0000ff;">function</span><span style="color:#000000;">(){
                </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.remove()
            }.bind(div))</span><span style="color:#008000;">//</span><span style="color:#008000;">// 2.使用bind将div强行传进去,记得里面使用this，代表的是传进来的div</span>

<span style="color:#008000;">//</span><span style="color:#008000;">======================================================================================</span>
<span style="color:#000000;">        }
    }



</span><span style="color:#008000;">//</span><span style="color:#008000;">========================================================================</span>
<span style="color:#0000ff;">var</span><span style="color:#000000;"> ocont</span><span style="color:#000000;">=</span><span style="color:#000000;">document.getElementById(</span><span style="color:#000000;">"</span><span style="color:#000000;">container</span><span style="color:#000000;">"</span><span style="color:#000000;">);
ocont.onclick</span><span style="color:#000000;">=</span><span style="color:#0000ff;">function</span><span style="color:#000000;"> (eve) {
    </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> e</span><span style="color:#000000;">=</span><span style="color:#000000;">eve</span><span style="color:#000000;">||</span><span style="color:#000000;">window.event;
    </span><span style="color:#0000ff;">new</span><span style="color:#000000;"> Fire({
        x:e.offsetX,
        y:e.offsetY,
        parent:</span><span style="color:#0000ff;">this</span><span style="color:#000000;">
    });
}
</span><span style="color:#0000ff;">&lt;/</span><span style="color:#800000;">script</span><span style="color:#0000ff;">&gt;</span>
<span style="color:#0000ff;">&lt;/</span><span style="color:#800000;">html</span><span style="color:#0000ff;">&gt;</span></pre> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/hy96/p/11462055.html</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3f916d69c2985e3ada5b11c3c81d9e6e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">qt  tableview中setModel()报错</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/53635893aedfee77ae8a083bdfe940cf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Go1.13 errors包用法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>