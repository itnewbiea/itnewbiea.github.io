<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>opencv arm交叉编译与仿真验证详细流程 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="opencv arm交叉编译与仿真验证详细流程" />
<meta property="og:description" content="【关键内容】
1.将opencv编译为能在arm上运行的库，直接获取编译后的成果物见：
armv7：https://download.csdn.net/download/u012824853/87867650
armv8：https://download.csdn.net/download/u012824853/87867658
2.在没有板子的情况下，仿真验证opencv库
1.将opencv编译为能在arm上运行的库 1.在下方链接中选择某个版本
Releases - OpenCVhttps://opencv.org/releases/点击“Sources”即可开始下载，得到opencv-3.4.1.zip：
2.解压，得到opencv-3.4.1到/home/ubuntu/opencv/opencv-3.4.1/
unzip opencv-3.4.1.zip 3.打开cmake-gui：
cd opencv-3.4.1 mkdir build cd build cmake-gui&amp; 4.
where is the source code：刚下载解压后的opencv-3.4.1的路径
where to build the binaries：刚下载解压后的opencv-3.4.1的路径中的build
然后点击Configure
5.Operation System必须为Linux，Processor必须为arm
Compilers的C为自己PC/服务器中的C交叉编译工具链所在位置
Compilers的C&#43;&#43;为自己PC/服务器中的C&#43;&#43;交叉编译工具链所在位置
Target Root为自己PC/服务器公用头文件所在位置
Include Mode为Search only in Target Root
点击Finish
6.等到Configuring done
勾选BUILD_JPEG和BUILD_PNG
另外CMAKE_INSTALL_PREFIX也重新选择一下：
7.再次点击Configure，等待Configuring done，点击Generate，等待Generating done，可以关闭cmake-gui了
8.在/home/ubuntu/opencv/opencv-3.4.1/build中运行make -j32，等待100%，然后执行sudo make install，无报错即完成opencv arm交叉编译，所有的编程成果物都在刚才设置好的CMAKE_INSTALL_PREFIX中
2.仿真验证 1.在没有arm板的情况下，在PC/服务器上做仿真验证：
sudo apt-get install qemu
编写main.cpp
#include &#34;opencv2/core.hpp&#34; #include &#34;opencv2/imgproc.hpp&#34; #include &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b5ce70442a338023633b9671f2a14821/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-06T10:47:45+08:00" />
<meta property="article:modified_time" content="2023-06-06T10:47:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">opencv arm交叉编译与仿真验证详细流程</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p>【关键内容】</p> 
<p>1.将opencv编译为能在arm上运行的库，直接获取编译后的成果物见：</p> 
<p>armv7：<a href="https://download.csdn.net/download/u012824853/87867650" title="https://download.csdn.net/download/u012824853/87867650">https://download.csdn.net/download/u012824853/87867650</a></p> 
<p>armv8：<a href="https://download.csdn.net/download/u012824853/87867658" title="https://download.csdn.net/download/u012824853/87867658">https://download.csdn.net/download/u012824853/87867658</a></p> 
<p>2.在没有板子的情况下，仿真验证opencv库</p> 
<p></p> 
<h2>1.将opencv编译为能在arm上运行的库</h2> 
<p>1.在下方链接中选择某个版本</p> 
<p><a class="has-card" href="https://opencv.org/releases/" rel="nofollow" title="Releases - OpenCV"><span class="link-card-box"><span class="link-title">Releases - OpenCV</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/c0/02/Cp0wWSlI_o.png">https://opencv.org/releases/</span></span></a>点击“Sources”即可开始下载，得到opencv-3.4.1.zip：</p> 
<p class="img-center"><img alt="" height="242" src="https://images2.imgbox.com/80/a7/nJLnk4TM_o.png" width="651"></p> 
<p></p> 
<p>2.解压，得到opencv-3.4.1到/home/ubuntu/opencv/opencv-3.4.1/</p> 
<pre><code>unzip opencv-3.4.1.zip</code></pre> 
<p></p> 
<p>3.打开cmake-gui：</p> 
<pre><code>cd opencv-3.4.1
mkdir build
cd build
cmake-gui&amp;</code></pre> 
<p>4.</p> 
<p>where is the source code：刚下载解压后的opencv-3.4.1的路径</p> 
<p>where to build the binaries：刚下载解压后的opencv-3.4.1的路径中的build</p> 
<p class="img-center"><img alt="" height="141" src="https://images2.imgbox.com/37/f7/zCHnGgNh_o.png" width="687"></p> 
<p>然后点击Configure</p> 
<p class="img-center"><img alt="" height="525" src="https://images2.imgbox.com/d8/b2/DzQUU9dr_o.png" width="694"></p> 
<p class="img-center"><img alt="" height="522" src="https://images2.imgbox.com/73/0d/sqKfh5L4_o.png" width="669"></p> 
<p></p> 
<p>5.Operation System必须为Linux，Processor必须为arm</p> 
<p>Compilers的C为自己PC/服务器中的C交叉编译工具链所在位置</p> 
<p>Compilers的C++为自己PC/服务器中的C++交叉编译工具链所在位置</p> 
<p>Target Root为自己PC/服务器公用头文件所在位置</p> 
<p>Include Mode为Search only in Target Root</p> 
<p>点击Finish</p> 
<p><img alt="" height="401" src="https://images2.imgbox.com/dd/25/YcIpcKUy_o.png" width="812"></p> 
<p></p> 
<p>6.等到Configuring done</p> 
<p class="img-center"><img alt="" height="602" src="https://images2.imgbox.com/b5/00/UDnfZv3H_o.png" width="682"></p> 
<p></p> 
<p>勾选BUILD_JPEG和BUILD_PNG</p> 
<p>另外CMAKE_INSTALL_PREFIX也重新选择一下：</p> 
<p><img alt="" height="459" src="https://images2.imgbox.com/9d/f7/7EfXl96m_o.png" width="696"></p> 
<p>7.再次点击Configure，等待Configuring done，点击Generate，等待Generating done，可以关闭cmake-gui了</p> 
<p><img alt="" height="180" src="https://images2.imgbox.com/24/21/jOwhJVwT_o.png" width="262"></p> 
<p></p> 
<p>8.在/home/ubuntu/opencv/opencv-3.4.1/build中运行make -j32，等待100%，然后执行sudo make install，无报错即完成opencv arm交叉编译，所有的编程成果物都在刚才设置好的CMAKE_INSTALL_PREFIX中</p> 
<p><img alt="" height="120" src="https://images2.imgbox.com/0c/4a/0Pr0kkk6_o.png" width="696"></p> 
<p></p> 
<h2>2.仿真验证</h2> 
<p>1.在没有arm板的情况下，在PC/服务器上做仿真验证：</p> 
<p>sudo apt-get install qemu</p> 
<p>编写main.cpp</p> 
<pre><code>#include "opencv2/core.hpp"
#include "opencv2/imgproc.hpp"
#include "opencv2/highgui.hpp"
#include "opencv2/videoio.hpp"
#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
using namespace cv;
using namespace std;


int main()
{
	Mat image;
	image = imread("test.jpg");
	return 0;
}
</code></pre> 
<p></p> 
<p>2.编写Makefile</p> 
<pre><code>SRCS += $(wildcard main.cpp)
OBJS = $(SRCS:.cpp = .o)
CXX = arm-linux-gnueabihf-g++
TARGET = exam
INCLUDES = -I/home/ubuntu/output/include/
LIBS = -L.
LIBS += -L/home/ubuntu/output/lib/
CCFLAGS = -Wall -O0

all : $(TARGET)

$(TARGET):$(OBJS)
	$(CXX) $^ -o $@ $(INCLUDES) $(LIBS) -lopencv_stitching -lopencv_videostab -lopencv_objdetect -lopencv_photo -lopencv_dnn -lopencv_calib3d -lopencv_features2d -lopencv_flann -lopencv_highgui -lopencv_ml -lopencv_superres -lopencv_videoio -lopencv_imgcodecs -lopencv_shape -lopencv_video -lopencv_imgproc -lopencv_core -ldl -lm -lpthread -lrt
%.o:%.cpp
	$(CXX) -c $&lt; $(CCFLAGS)
clean:
	rm $(TARGET)</code></pre> 
<p>3.编译</p> 
<pre><code>make</code></pre> 
<p>4.将/home/ubuntu/output/lib/所有文件复制到/usr/lib/下，然后执行</p> 
<pre><code>qemu-arm -L /usr/arm-linux-gnueabihf/ ./exam</code></pre> 
<p>执行无报错 即完成</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6fe5ae59b6f5ad9df63305825d99755f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">请问一下java在线编程的网站有哪一些?</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2ff075405f896e0dc7fb859382fbb32e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【mmrotate代码解读】以FasterRcnn中的RPN&#43;ROI部分为例</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>