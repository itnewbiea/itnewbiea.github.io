<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mysql安装与操作 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mysql安装与操作" />
<meta property="og:description" content="一、安装mysql
1、CentOS系统
1.）安装mysql
下载并安装mysql的repo源
$ wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm
$ sudo rpm -ivh mysql-community-release-el7-5.noarch.rpm
安装mysql
$ sudo yum install -y mysql-server
2.）启动/重启/关闭服务
service mysqld start | restart | stop
2、alpine系统
alpine系统中安装mysql实际是开源的MariaDB，MariaDB数据库是MySQL的一个分支/衍生版，完全兼容MySQL，并在扩展功能、存储引擎以及一些新的功能改进方面都强过MySQL，安装参考
$ apk update
安装数据库及客户端 $ apk add mysql mysql-client
初始化数据库 $ mysql_install_db --user=mysql --datadir=/var/lib/mysql
启动服务 $ rc-service mariadb start # 若没有rc，安装：apk add openrc
修改密码 $ mysqladmin -u root password “新root密码”
加入开机启动 $ rc-update add mariadb default
二、操作mysql
1、登录数据库
默认初始化直接登录
$ mysql" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/21a4544e9a5c75b51fe6a929e153826a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-02T13:34:31+08:00" />
<meta property="article:modified_time" content="2019-08-02T13:34:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mysql安装与操作</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>一、安装mysql<br> 1、CentOS系统</p> 
<p>1.）安装mysql</p> 
<p>下载并安装mysql的repo源<br> $ wget <a href="http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm" rel="nofollow">http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm</a><br> $ sudo rpm -ivh mysql-community-release-el7-5.noarch.rpm<br> 安装mysql<br> $ sudo yum install -y mysql-server<br> 2.）启动/重启/关闭服务</p> 
<p>service mysqld start | restart | stop<br> 2、alpine系统</p> 
<p>alpine系统中安装mysql实际是开源的MariaDB，MariaDB数据库是MySQL的一个分支/衍生版，完全兼容MySQL，并在扩展功能、存储引擎以及一些新的功能改进方面都强过MySQL，安装参考<br> $ apk update</p> 
<h2><a id="_18"></a>安装数据库及客户端</h2> 
<p>$ apk add mysql mysql-client</p> 
<h2><a id="_21"></a>初始化数据库</h2> 
<p>$ mysql_install_db --user=mysql --datadir=/var/lib/mysql</p> 
<h2><a id="_24"></a>启动服务</h2> 
<p>$ rc-service mariadb start # 若没有rc，安装：apk add openrc</p> 
<h2><a id="_27"></a>修改密码</h2> 
<p>$ mysqladmin -u root password “新root密码”</p> 
<h2><a id="_30"></a>加入开机启动</h2> 
<p>$ rc-update add mariadb default<br> 二、操作mysql<br> 1、登录数据库</p> 
<p>默认初始化直接登录<br> $ mysql<br> 若提示失败，说明有密码，运行：<br> $ mysql -uroot -p<br> 2、操作数据库</p> 
<p>$ mysql</p> 
<h2><a id="_43"></a>查看所有数据库</h2> 
<p>(none)&gt;show databases;</p> 
<h2><a id="_46"></a>创建数据库</h2> 
<p>(none)&gt;create database myTest charset=utf8;</p> 
<h2><a id="_49"></a>切换数据库</h2> 
<p>(none)&gt;use mysql;</p> 
<h2><a id="_52"></a>查看表</h2> 
<p>Mysql&gt;show tables;</p> 
<h2><a id="password_55"></a>修改密码，注意密码处不能直接password=“新密码”</h2> 
<p>Mysql&gt; update user set password=password(“新密码”) where user=“root”;</p> 
<h2><a id="_58"></a>更新数据</h2> 
<p>Mysql&gt; flush privileges;</p> 
<h2><a id="_61"></a>退出</h2> 
<p>Mysql&gt; quit;<br> 三、相关问题<br> 1、mysql擦除root密码</p> 
<p>$ mysql –skip-grant-table &amp;<br> Mysql&gt; use mysql;<br> Mysql&gt; update user set password=password(“新密码”) where user=“root”;<br> Mysql&gt; flush privileges;<br> Mysql&gt; quit;<br> 这里需要注意的是每句命令需要用分号“;”结尾,执行完以上得操作，root的密码就被清空。<br> ERROR 1044 (42000): Access denied for user ‘’@‘localhost’ to database 'mysql’错误：<br> 原因：mysql数据库的user表里，存在用户名为空的账户即匿名账户，导致登录的时候是虽然用的是root，但实际是匿名登录的．<br> 处理方案：</p> 
<h2><a id="1mysql_76"></a>1.关闭mysql</h2> 
<p>$ service mysqld stop</p> 
<h2><a id="2_78"></a>2.屏蔽权限</h2> 
<p>$ mysqld_safe --skip-grant-table<br> 屏幕出现： Starting demo from …</p> 
<h2><a id="3_81"></a>3.新开起一个终端输入</h2> 
<p>$ mysql -u root mysql<br> Mysql&gt; update user set password=password(“新密码”) where user=“root”;<br> Mysql&gt; flush privileges;<br> Mysql&gt; quit;<br> 2、mysql远程root账户不能登录</p> 
<p>$ mysql -u root -p<br> Mysql&gt; use mysql;</p> 
<h2><a id="hostflush_privileges_90"></a>先查看一下host有没有%这个值，如果有直接运行flush privileges;</h2> 
<p>Mysql&gt; select host from user where user=‘root’;<br> Mysql&gt; GRANT ALL PRIVILEGES ON <em>.</em> TO ‘root’@’%’ IDENTIFIED BY ‘mysql root密码’;<br> Mysql&gt; flush privileges;<br> Mysql&gt; quit;<br> 3、mysql修改默认数据存放</p> 
<p>$ mysqladmin -u root -p variables | grep datadir # 查看mysql数据库存放目录<br> $ service mysqld stop<br> $ mv /var/lib/mysql /路径 # 移动数据库文件</p> 
<p>$ vi /etc/my.cnf</p> 
<h2><a id="datadirsocket_102"></a>修改datadir和socket两个字段，并添加以下：</h2> 
<p>[mysql]<br> socket=/路径/mysql.sock</p> 
<p>$ service mysqld start<br> 4、备份/恢复mysql数据库</p> 
<p>$ mysqldump --all-databases -h127.0.0.1 -u root -p &gt; ./backup/mysql-bak.sql<br> $ mysqldump --all-databases -h127.0.0.1 -u root -p &lt; ./backup/mysql-bak.sql</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/064673c4d810e5913b9fa45f07f7b063/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据分析基础——R语言（处理缺失值）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/542a8c128e2989feb6901962d140f7a7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">nginx——实现https加密以及重定向</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>