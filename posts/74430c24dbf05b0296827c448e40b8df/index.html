<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>原生小程序自定义导航及状态栏 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="原生小程序自定义导航及状态栏" />
<meta property="og:description" content="app.json 组件 &#34;usingComponents&#34;: { &#34;page&#34;: &#34;./component/page/index&#34;, &#34;paging&#34;: &#34;./component/paging/index&#34;, &#34;t-nav-bar&#34;: &#34;./itriton/nav-bar/index&#34;, &#34;t-divider&#34;: &#34;./itriton/divider/index&#34; }, nav-bar/index.wxml &lt;view style=&#39;height:{{navHeight &#43; status}}px;&#39;&gt; &lt;cover-view class=&#39;nav-bar-wrap&#39; style=&#39;padding-top:{{ status }}px;{{containerStyle}}&#39;&gt; &lt;cover-view class=&#39;nav-bar&#39; style=&#39;height:{{navHeight}}px;{{containerStyle}};&#39;&gt; &lt;cover-view class=&#39;{{&#34;nav-bar-btn_icon_&#34;&#43;type}}&#39; style=&#39;height:32px;width:81px;background:{{btnColor}}&#39; wx:if=&#39;{{visible}}&#39;&gt; &lt;cover-view class=&#39;nav-bar-go_back&#39; catchtap=&#39;bindToBack&#39;&gt; &lt;cover-image src=&#39;{{&#34;./icons/back-&#34;&#43;type&#43;&#34;.png&#34;}}&#39; class=&#39;nav-bar-img&#39;&gt;&lt;/cover-image&gt; &lt;/cover-view&gt; &lt;cover-view class=&#39;{{&#34;nav-bar-mid_line_&#34;&#43;type}}&#39;&gt;&lt;/cover-view&gt; &lt;cover-view class=&#39;nav-bar-go_home&#39; catchtap=&#39;bindToHome&#39;&gt; &lt;cover-image src=&#39;{{&#34;./icons/home-&#34;&#43;type&#43;&#34;.png&#34;}}&#39; class=&#39;nav-bar-img&#39;&gt;&lt;/cover-image&gt; &lt;/cover-view&gt; &lt;/cover-view&gt; &lt;cover-view class=&#34;nav-bar_left&#34; style=&#34;height:32px;width:81px;&#34; wx:if=&#34;{{left}}&#34;&gt; &lt;cover-image class=&#34;nav-bar__img&#34; src=&#34;{{left}}&#34; bindtap=&#34;leftClick&#34;&gt;&lt;/cover-image&gt; &lt;/cover-view&gt; &lt;cover-view class=&#39;nav-bar-title absolute&#39; style=&#39;line-height:{{navHeight}}px;{{textStyle}}&#39;&gt;{{title}}&lt;/cover-view&gt; &lt;/cover-view&gt; &lt;/cover-view&gt; &lt;/view&gt; index.js // pages/nav-bar/nav-bar.js Component({ options: { multipleSlots: true }, properties: { background: { type: String, value: &#39;rgba(255, 255, 255, 1)&#39; }, type: { type: String, value: &#39;light&#39; }, btnColor: { type: String, value: &#39;rgba(255, 255, 255, 1)&#39; }, textColor: { type: String, value: &#39;rgba(0, 0, 0, 1)&#39; }, title: { type: String, value: &#39;&#39; }, visible: { type: Boolean, value: true }, left: { type: String, value: &#39;&#39; } }, lifetimes:{ ready() { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/74430c24dbf05b0296827c448e40b8df/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-05T10:59:40+08:00" />
<meta property="article:modified_time" content="2024-01-05T10:59:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">原生小程序自定义导航及状态栏</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="hljs">app.json
组件
 "usingComponents": {
    "page": "./component/page/index",
    "paging": "./component/paging/index",
    "t-nav-bar": "./itriton/nav-bar/index",
    "t-divider": "./itriton/divider/index"
  },

nav-bar/index.wxml

&lt;view style='height:{<!-- -->{navHeight + status}}px;'&gt;
  &lt;cover-view class='nav-bar-wrap' style='padding-top:{<!-- -->{ status }}px;{<!-- -->{containerStyle}}'&gt;
    &lt;cover-view class='nav-bar' style='height:{<!-- -->{navHeight}}px;{<!-- -->{containerStyle}};'&gt;
      &lt;cover-view class='{<!-- -->{"nav-bar-btn_icon_"+type}}' style='height:32px;width:81px;background:{<!-- -->{btnColor}}'
        wx:if='{<!-- -->{visible}}'&gt;
        &lt;cover-view class='nav-bar-go_back' catchtap='bindToBack'&gt;
          &lt;cover-image src='{<!-- -->{"./icons/back-"+type+".png"}}' class='nav-bar-img'&gt;&lt;/cover-image&gt;
        &lt;/cover-view&gt;
        &lt;cover-view class='{<!-- -->{"nav-bar-mid_line_"+type}}'&gt;&lt;/cover-view&gt;
        &lt;cover-view class='nav-bar-go_home' catchtap='bindToHome'&gt;
          &lt;cover-image src='{<!-- -->{"./icons/home-"+type+".png"}}' class='nav-bar-img'&gt;&lt;/cover-image&gt;
        &lt;/cover-view&gt;
      &lt;/cover-view&gt;
      &lt;cover-view class="nav-bar_left" style="height:32px;width:81px;" wx:if="{<!-- -->{left}}"&gt;
        &lt;cover-image class="nav-bar__img" src="{<!-- -->{left}}" bindtap="leftClick"&gt;&lt;/cover-image&gt;
      &lt;/cover-view&gt;
      &lt;cover-view class='nav-bar-title absolute' style='line-height:{<!-- -->{navHeight}}px;{<!-- -->{textStyle}}'&gt;{<!-- -->{title}}&lt;/cover-view&gt;
    &lt;/cover-view&gt;
  &lt;/cover-view&gt;
&lt;/view&gt;

index.js
// pages/nav-bar/nav-bar.js

Component({
  options: {
    multipleSlots: true
  },
  properties: {
    background: {
      type: String,
      value: 'rgba(255, 255, 255, 1)'
    },
    type: {
      type: String,
      value: 'light'
    },
    btnColor: {
      type: String,
      value: 'rgba(255, 255, 255, 1)'
    },
    textColor: {
      type: String,
      value: 'rgba(0, 0, 0, 1)'
    },
    title: {
      type: String,
      value: ''
    },
    visible: {
      type: Boolean,
      value: true
    },
    left: {
      type: String,
      value: ''
    }
  },
  lifetimes:{
    ready() {
      this.setNavSize()
      this.setStyle()
    },
  },
  data: {
    fontSize: 16
  },
  methods: {
    // 通过获取系统信息计算导航栏高度
    setNavSize() {
      let sysinfo = wx.getSystemInfoSync(),
        statusHeight = sysinfo.statusBarHeight,
        isiOS = sysinfo.system.indexOf('iOS') &gt; -1,
        navHeight;
      if (!isiOS) {
        navHeight = 48;
      } else {
        navHeight = 44;
      }
      this.setData({
        status: statusHeight,
        navHeight: navHeight
      })
    },
    setStyle() {
      let containerStyle, textStyle, iconStyle;
      containerStyle = [
        'background:' + this.data.background
      ].join(';');
      textStyle = [
        'color:' + this.data.textColor,
        'font-size:' + this.data.fontSize + 'px'
      ].join(';');
      iconStyle = [
        'width: ' + this.data.iconWidth + 'px',
        'height: ' + this.data.iconHeight + 'px'
      ].join(';');
      this.setData({
        containerStyle: containerStyle,
        textStyle: textStyle,
        iconStyle: iconStyle
      })
    },
    bindToBack() {
      const pages = getCurrentPages();
      if (pages.length &gt; 1) {
        wx.navigateBack({
          delta: 1
        })
      }
      this.triggerEvent('back', {
        back: 1
      })
    },
    bindToHome() {
      this.triggerEvent('home', {});
    },
    leftClick() {
      this.triggerEvent('left', {});
    }
  }
})

index.wxss
.nav-bar-wrap {
  width: 100%;
  position: fixed;
  top: 0;
  left: 0;
  background: #fff;
  z-index: 999;
}

.nav-bar {
  font-size: 34rpx;
  letter-spacing: 2rpx;
  position: relative;
  display: -webkit-flex;
  display: flex;
  align-items: center;
  -webkit-align-items: center;
  height: 44px;
}

.nav-bar-img {
  width: 18px;
  height: 18px;
  z-index: 999;
}

.nav-bar-back {
  margin-left: 5px;
}

.nav-bar-back .nav-bar-img {
  margin-left: 5px;
}

.nav-bar-title {
  font-weight: 600;
  text-align: center;
  vertical-align: center;
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 340rpx;
}

.nav-bar-title.absolute {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
}

.nav-bar_left{
  display: flex;
  align-items: center;
  margin-left: 10px;
}

.nav-bar__img{
  height: 25px;
  width: 25px;
  z-index: 999999;
}

.nav-bar-btn_icon_dark {
  display: -webkit-flex;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 35rpx;
  border-radius: 40rpx;
  border: 1rpx solid rgba(255, 255, 255, .3);
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  margin-left: 10px;
}

.nav-bar-btn_icon_light {
  display: -webkit-flex;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 35rpx;
  border-radius: 40rpx;
  border: 1rpx solid rgba(255, 255, 255, 0.3);
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  margin-left: 10px;
}

.nav-bar-go_back {
  flex: 1;
  -webkit-flex: 1;
  height: 100%;
  box-sizing: border-box;
  display: flex;
  display: -webkit-flex;
  justify-content: center;
  align-items: center;
}

.nav-bar-mid_line_dark {
  background-color: rgba(255, 255, 255, .3);
  width: 1rpx;
  height: 32rpx;
  z-index: 999;
}

.nav-bar-mid_line_light {
  background-color: rgba(255, 255, 255, .3);
  width: 1rpx;
  height: 32rpx;
  z-index: 999;
}

.nav-bar-go_home {
  flex: 1;
  -webkit-flex: 1;
  height: 100%;
  box-sizing: border-box;
  display: flex;
  display: -webkit-flex;
  justify-content: center;
  align-items: center;
  position: relative;
}

使用
&lt;!--pages/index/index.wxml--&gt;
&lt;page id="page"&gt;
  &lt;t-nav-bar title="首页" visible="{<!-- -->{false}}" background="#FFF" btn-color="{<!-- -->{nav_bar_btn_color}}" text-color="#333" /&gt;
  &lt;t-search-bar placeholder="搜索商城内所有商品" is-border="{<!-- -->{false}}" fixed&gt;&lt;/t-search-bar&gt;
  &lt;view class="bg-white pl-20 pr-20"&gt;
    &lt;t-swiper list="{<!-- -->{swiperList}}" bind:click="handleSwiperClick" border-radius="10rpx" shape="square" height="230rpx" active-color="{<!-- -->{sub_color}}"&gt;&lt;/t-swiper&gt;
    &lt;t-menu list="{<!-- -->{menuList}}" bind:click="handleMenuClick"&gt;&lt;/t-menu&gt;
  &lt;/view&gt;
  &lt;view class="p-20"&gt;
    &lt;view class="flex justify-between flex-wrap"&gt;
      &lt;goods url="{<!-- -->{item.url}}" name="{<!-- -->{item.name}}" price="¥{<!-- -->{item.price}}" wx:for="{<!-- -->{goodsList}}" wx:key="unique" data-url="/pagesGoods/detail/index" bindtap="routeToNext"&gt;&lt;/goods&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/page&gt;

index.wxss

/* pages/index/index.wxss */
.nav {
  display: flex;
  flex-wrap: wrap;
  padding: 40rpx 40rpx 0px;
  justify-content: space-between;
}

.nav__cell {
  padding: 20rpx;
  border-radius: 12rpx;
  width: 40%;
  margin: 0 2% 40rpx;
  background-size: cover;
  background-position: center;
  position: relative;
  z-index: 1;
}

.nav__cell::after {
  content: "";
  position: absolute;
  z-index: -1;
  background-color: inherit;
  width: 100%;
  height: 100%;
  left: 0;
  bottom: -10%;
  border-radius: 10rpx;
  opacity: 0.2;
  transform: scale(0.9, 0.9);
}

.nav-title {
  font-size: 32rpx;
  font-weight: 300;
}

.nav-title::first-letter {
  font-size: 40rpx;
  margin-right: 4rpx;
}

.nav-name {
  font-size: 28rpx;
  text-transform: Capitalize;
  margin-top: 20rpx;
  position: relative;
}

.nav-name::before {
  content: "";
  position: absolute;
  display: block;
  width: 40rpx;
  height: 6rpx;
  background: #fff;
  bottom: 0;
  right: 0;
  opacity: 0.5;
}

.nav-name::after {
  content: "";
  position: absolute;
  display: block;
  width: 100rpx;
  height: 1px;
  background: #fff;
  bottom: 0;
  right: 40rpx;
  opacity: 0.3;
}

.nav-name::first-letter {
  font-weight: bold;
  font-size: 36rpx;
  margin-right: 1px;
}</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5dddadfc80383e43c43022369eed0729/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">K8S POD</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/96cf51ea057ab05ec369a70e971aa80b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">shell脚本</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>