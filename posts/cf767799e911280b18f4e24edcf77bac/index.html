<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL---单列索引（包括普通索引、唯一索引、主键索引）、组合索引、全文索引。 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL---单列索引（包括普通索引、唯一索引、主键索引）、组合索引、全文索引。" />
<meta property="og:description" content="1. 索引 索引是通过某种算法，构建出一个数据模型，用于快速找出在某个列中有一特定值的行，不使用索
引，MySQL必须从第一条记录开始读完整个表，直到找出相关的行，表越大，查询数据所花费的
时间就越多，如果表中查询的列有一个索引，MySQL能够快速到达一个位置去搜索数据文件，而
不必查看所有数据，那么将会节省很大一部分时间。
按照实现的方式类分，主要有Hash索引和B&#43;Tree索引
Hash索引：
B&#43;Tree索引：
按照功能划分，索引分为单列索引（包括普通索引、唯一索引、主键索引）、组合索引、全文索
引、空间索引。
2.1 创建单列索引-普通索引 单列索引：一个索引只包含单个列，但一个表中可以有多个单列索引;
普通索引：MySQL中基本索引类型，没有什么限制，允许在定义索引的列中插入重复值和空值，
纯粹为了查询数据更快一点。
创建语法：
create database mydb5; use mydb5; -- 方式1-创建表的时候直接指定 create table student( sid int primary key, card_id varchar(20), name varchar(20), gender varchar(20), age int, birth date, phone_num varchar(20), score double, index index_name(name) -- 给name列创建索引 ); -- 方式2-直接创建 -- create index indexname on tablename(columnname); create index index_gender on student(gender); -- 方式3-修改表结构(添加索引) -- alter table tablename add index indexname(columnname) alter table student add index index_age(age); 查看数据库中所有的索引：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/cf767799e911280b18f4e24edcf77bac/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-20T16:12:09+08:00" />
<meta property="article:modified_time" content="2023-05-20T16:12:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL---单列索引（包括普通索引、唯一索引、主键索引）、组合索引、全文索引。</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>1. 索引</h4> 
<p><span style="color:#000000;">索引是通过某种算法，构建出一个数据模型，用于快速找出在某个列中有一特定值的行，不使用索</span></p> 
<p><span style="color:#000000;">引，MySQL</span><span style="color:#000000;">必须从第一条记录开始读完整个表，直到找出相关的行，表越大，查询数据所花费的</span></p> 
<p><span style="color:#000000;">时间就越多，如果表中查询的列有一个索引，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">能够快速到达一个位置去搜索数据文件，而</span></p> 
<p><span style="color:#000000;">不必查看所有数据，那么将会节省很大一部分时间。</span></p> 
<p style="margin-left:0in;text-align:left;"><strong>按照实现的方式类分，主要有Hash索引和B+Tree索引</strong></p> 
<p style="margin-left:0in;text-align:left;">Hash索引：</p> 
<p class="img-center"><img alt="" height="261" src="https://images2.imgbox.com/22/31/icaTruUq_o.png" width="635"></p> 
<p> B+Tree索引：</p> 
<p class="img-center"><img alt="" height="574" src="https://images2.imgbox.com/a6/6e/fcwabQ0J_o.png" width="1200"></p> 
<p><span style="color:#000000;">按照功能划分，索引分为单列索引（包括普通索引、唯一索引、主键索引）、组合索引、全文索</span></p> 
<p><span style="color:#000000;">引、空间索引。</span></p> 
<h4><span style="color:#0d0016;">2.1 <strong>创建单列索引-普通索引</strong></span></h4> 
<p><span style="color:#000000;">单列索引：一个索引只包含单个列，但一个表中可以有多个单列索引</span><span style="color:#000000;">;</span></p> 
<p><span style="color:#000000;">普通索引：</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">中基本索引类型，没有什么限制，允许在定义索引的列中插入重复值和空值，</span></p> 
<p><span style="color:#000000;">纯粹为了查询数据更快一点。</span></p> 
<p><span style="color:#000000;">创建语法：</span></p> 
<pre><code class="language-sql">create database mydb5;
use mydb5;

-- 方式1-创建表的时候直接指定
create  table student(
    sid int primary key,
    card_id varchar(20),
    name varchar(20),
    gender varchar(20),
    age int,
    birth date, 
    phone_num varchar(20),
    score double,
    index index_name(name) -- 给name列创建索引
);

-- 方式2-直接创建
-- create index indexname on tablename(columnname); 
create index index_gender on student(gender); 

-- 方式3-修改表结构(添加索引)
-- alter table tablename add index indexname(columnname)
alter table student add index index_age(age);
</code></pre> 
<p>查看数据库中所有的索引：</p> 
<pre><code class="language-sql">
-- select * from mysql.`innodb_index_stats` a where a.`database_name` = '数据库名’; 
select * from mysql.`innodb_index_stats` a where a.`database_name` = 'mydb5';
</code></pre> 
<p><img alt="" height="270" src="https://images2.imgbox.com/7f/40/Sz61tTi8_o.png" width="1200"></p> 
<p> 查看表中的所有索引：</p> 
<pre><code class="language-sql">-- 方式一：
-- select * from mysql.`innodb_index_stats` a where a.`database_name` = '数据库名' and a.table_name like '%表名%’; 
select * from mysql.`innodb_index_stats` a where a.`database_name` = 'mydb5' and a.table_name like '%student%';
</code></pre> 
<p><img alt="" height="289" src="https://images2.imgbox.com/f7/da/7PhK1vR8_o.png" width="1200"></p> 
<pre><code class="language-sql">--方式二
-- show index from table_name; 
show index from student;
</code></pre> 
<p>删除索引：</p> 
<pre><code class="language-sql">-- 语法：
-- drop index 索引名 on 表名 
-- 或 
-- alter table 表名 drop index 索引名 

drop index index_gender on student 
-- 或 
alter table student drop index index_name
</code></pre> 
<h4><span style="color:#0d0016;"> 2.2 <strong>创建单列索引-唯一索引</strong></span></h4> 
<p><span style="color:#000000;">唯一索引</span><span style="color:#000000;">与前面的普通索引类似，不同的就是：索引列的值必须唯一，但允许有空值。如果是组合</span></p> 
<p><span style="color:#000000;">索引，则列值的组合必须唯一。</span></p> 
<pre><code class="language-sql">-- 方式1-创建表的时候直接指定
create  table student2(
    sid int primary key,
    card_id varchar(20),
    name varchar(20),
    gender varchar(20),
    age int,
    birth date, 
    phone_num varchar(20),
    score double,
    unique index_card_id(card_id) -- 给card_id列创建索引
);
-- 方式2-直接创建
-- create unique index 索引名 on 表名(列名) 
create unique index index_card_id on student2(card_id);

-- 方式3-修改表结构(添加索引)
-- alter table 表名 add unique [索引名] (列名)
alter table student2 add unique index_phone_num(phone_num)
</code></pre> 
<p>删除索引：</p> 
<pre><code class="language-sql">drop index index_card_id on student2 
-- 或 
alter table student2 drop index index_phone_num
</code></pre> 
<h4><span style="color:#0d0016;">2.3 <strong>创建单列索引-主键索引</strong></span></h4> 
<p><span style="color:#000000;">每张表一般都会有自己的主键，当我们在创建表时，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">会自动</span><span style="color:#000000;">在主键列上建立一个索引。主</span></p> 
<p><span style="color:#000000;">键是具有唯一性并且不允许为</span><span style="color:#000000;">NULL</span><span style="color:#000000;">，所以他是一种特殊的唯一索引。</span></p> 
<p>这个专栏前面发过：主键约束<a class="has-card" href="https://blog.csdn.net/weixin_43961909/article/details/130543098" title="MySQL---约束（主键约束，自增长约束，非空约束，唯一约束，默认约束、零填充约束）_python（爱看动漫的程序猿）的博客-CSDN博客"><span class="link-card-box"><span class="link-title">MySQL---约束（主键约束，自增长约束，非空约束，唯一约束，默认约束、零填充约束）_python（爱看动漫的程序猿）的博客-CSDN博客</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/3b/67/2YouwD2d_o.png">https://blog.csdn.net/weixin_43961909/article/details/130543098</span></span></a></p> 
<h4>3. 组合索引</h4> 
<p><span style="color:#000000;">组合索引也叫复合索引，指的是在建立索引的时候使用多个字段，例如同时使用身份证和手机号建</span></p> 
<p><span style="color:#000000;">立索引，同样的可以建立为普通索引或者是唯一索引。</span></p> 
<p><span style="color:#000000;">复合索引的使用遵循最左原则。</span></p> 
<pre><code class="language-sql">-- 创建索引的基本语法 
create index indexname on table_name(column1(length),column2(length)); 
-- 组合索引
use mydb5;
-- 创建索引的基本语法-- 普通索引
-- create index indexname on table_name(column1(length),column2(length)); 
create index index_phone_name on student(phone_num,name);
-- 操作-删除索引
 drop index index_phone_name on student; 
-- 创建索引的基本语法-- 唯一索引
create  unique index index_phone_name on student(phone_num,name); 
select * from student where name = '张三'; 
select * from student where phone_num = '15100046637'; 
select * from student where phone_num = '15100046637' and name = '张三'; 
select * from student where name = '张三' and phone_num = '15100046637'; 
/* 
  三条sql只有 2 、 3、4能使用的到索引idx_phone_name,因为条件里面必须包含索引前面的字段  才能够进行匹配。
  而3和4相比where条件的顺序不一样，4也可以用到索引，是因为mysql本身就有一层sql优化，会根据sql来识别出来该用哪个索引，3和4在mysql眼中是等价的。 

*/
</code></pre> 
<h4>4. 全文索引</h4> 
<p><span style="color:#444444;">全文索引的关键字是fulltext。</span></p> 
<p><span style="color:#444444;">全文索引主要用来查找文本中的关键字，而不是直接与索引中的值相比较，它更像是一个搜索引</span></p> 
<p><span style="color:#444444;">擎，基于相似度的查询，而不是简单的where语句的参数匹配。</span></p> 
<p><span style="color:#444444;">用 like + % 就可以实现模糊匹配了，为什么还要全文索引？</span></p> 
<p><span style="color:#444444;">like + % </span><span style="color:#444444;">在文本比较少时是合适的，但是对于大量的文本数据检索，是不可想象的。全文索引在大</span></p> 
<p><span style="color:#444444;">量的数据面前，能比 </span><span style="color:#444444;">like + % </span><span style="color:#444444;">快 </span><span style="color:#444444;">N </span><span style="color:#444444;">倍，速度不是一个数量级，但是全文索引可能存在精度问题。</span></p> 
<p><span style="color:#444444;">MySQL 5.6 以前的版本，只有 MyISAM 存储引擎支持全文索引；</span></p> 
<p><span style="color:#444444;">MySQL 5.6 及以后的版本，MyISAM 和 InnoDB 存储引擎均支持全文索引;</span></p> 
<p><span style="color:#444444;">只有字段的数据类型为 char、varchar、text 及其系列才可以建全文索引；</span></p> 
<p><span style="color:#444444;">在数据量较大时候，现将数据放入一个没有全局索引的表中，然后再用create index创建</span><span style="color:#444444;">fulltext</span><span style="color:#444444;">索</span></p> 
<p><span style="color:#444444;">引，要比先为一张表建立</span><span style="color:#444444;">fulltext</span><span style="color:#444444;">然后再将数据写入的速度快很多；</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#4d4d4d;">MySQL 中的全文索引，有两个变量，最小搜索长度和最大搜索长度，对于长度小于最小搜索长度</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#4d4d4d;">和大于最大搜索长度的词语，</span><span style="color:#4d4d4d;">都不会被索引</span><span style="color:#4d4d4d;">。通俗点就是说，想对一个词语使用全文索引搜索，那</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#4d4d4d;">么这个词语的长度必须在以上两个变量的区间内。</span></p> 
<p style="margin-left:0in;text-align:left;">查看<span style="color:#4d4d4d;">最小搜索长度和最大搜索长度：</span></p> 
<pre><code class="language-sql">show variables like '%ft%';
</code></pre> 
<p class="img-center"><img alt="" height="317" src="https://images2.imgbox.com/33/80/eQaa3Cpe_o.png" width="292"></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c0c0c0;vertical-align:middle;width:32pt;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">#</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:180px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">参数名称</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">默认值</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:55px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">最小值</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">最大值</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:465px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">作用</span></p> </td></tr><tr><td style="border-color:#c0c0c0;vertical-align:middle;width:32pt;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">1</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:180px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">ft_min_word_len</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">4</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:55px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">1</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">3600</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:465px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">MyISAM </span><span style="color:#000000;">引擎表全文索引包含的最小词长度</span></p> </td></tr><tr><td style="border-color:#c0c0c0;vertical-align:middle;width:32pt;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">2</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:180px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">ft_query_expansion_limit</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">20</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:55px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">0</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">1000</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:465px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">MyISAM</span><span style="color:#000000;">引擎表使用 </span><span style="color:#000000;">with query expansion</span></p> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">进行全文搜索的最大匹配数</span></p> </td></tr><tr><td style="border-color:#c0c0c0;vertical-align:middle;width:32pt;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">3</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:180px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">innodb_ft_min_token_size</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">3</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:55px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">0</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">16</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:465px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">InnoDB </span><span style="color:#000000;">引擎表全文索引包含的最小词长度</span></p> </td></tr><tr><td style="border-color:#c0c0c0;vertical-align:middle;width:32pt;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">4</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:180px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">innodb_ft_max_token_size</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">84</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:55px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">10</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:53px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">84</span></p> </td><td style="border-color:#c0c0c0;vertical-align:middle;width:465px;"> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">InnoDB</span> <span style="color:#000000;">引擎表全文索引包含的最大词长度</span></p> </td></tr></tbody></table> 
<pre><code class="language-sql">-- 创建表的时候添加全文索引
create table t_article (
     id int primary key auto_increment ,
     title varchar(255) ,
     content varchar(1000) ,
     writing_date date -- , 
     -- fulltext (content) -- 创建全文检索
);
insert into t_article values(null,"Yesterday Once More","When I was young I listen to the radio",'2021-10-01');
insert into t_article values(null,"Right Here Waiting","Oceans apart, day after day,and I slowly go insane",'2021-10-02'); 
insert into t_article values(null,"My Heart Will Go On","every night in my dreams,i see you, i feel you",'2021-10-03');
insert into t_article values(null,"Everything I Do","eLook into my eyes,You will see what you mean to me",'2021-10-04');
insert into t_article values(null,"Called To Say I Love You","say love you no new year's day, to celebrate",'2021-10-05');
insert into t_article values(null,"Nothing's Gonna Change My Love For You","if i had to live my life without you near me",'2021-10-06');
insert into t_article values(null,"Everybody","We're gonna bring the flavor show U how.",'2021-10-07');
</code></pre> 
<pre><code class="language-sql">-- 修改表结构添加全文索引
alter table t_article add fulltext index_content(content)
 
-- 直接添加全文索引
create fulltext index index_content on t_article(content);
</code></pre> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">使用全文索引和常用的模糊匹配使用 like + % 不同，全文索引有自己的语法格式，使用 match 和</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">against 关键字：</span></p> 
<pre><code class="language-sql">match (col1,col2,...)  against(expr [search_modifier])
</code></pre> 
<pre><code class="language-sql">select * from t_article where match(content) against('yo’); -- 没有结果 单词数需要大于等于3 
select * from t_article where match(content) against('you'); -- 有结果
</code></pre> 
<p></p> 
<p style="text-align:center;">（日常美图时间）</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a8/66/m8IeMWYX_o.jpg"></p> 
<p> </p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/43fd601c5929d380c2209b8e05c0c5d1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第一课 C#的基元类型</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/57af4aa92891349be47e4511bdce33ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vim教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>