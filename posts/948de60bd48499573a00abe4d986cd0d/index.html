<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序开发（后端 Java） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序开发（后端 Java）" />
<meta property="og:description" content="微信使用的开发语言和文件很「特殊」。 小程序所使用的程序文件类型大致分为以下几种： ①WXML (WeiXin Mark Language，微信标记语言) ②WXSS (WeiXin Style Sheet，微信样式表) ③JS (Java，小程序的主体) 小伙伴们有兴趣想了解内容和更多相关学习资料的请点赞收藏&#43;评论转发&#43;关注我，后面会有很多干货。我有一些面试题、架构、设计类资料可以说是程序员面试必备！
所有资料都整理到网盘了，需要的话欢迎下载！私信我回复【111】即可免费获取
在语言方面，小程序看似重新定义了一套标准。但实际上，它们与「前端三件套」——HTML、CSS 和 Java—— 差不太多。
下面，我们就来对比一下小程序开发语言和「前端三件套」有什么异同点：
HTML 与 WXML：两者差异比较大，如果之前没有接触过 Android 开发，可能会觉得有些头疼。事实上，WXML 更像是 Android 开发中的界面 XML 描述文件，适合于程序界面的构建；而 HTML 则倾向于文章的展示 (这与 HTML 的历史有关)，以及互联网页面的构建。
WXSS 与 CSS：两者在语言上几乎没有差别，可以直接通用。
JS 文件：小程序的 JS 文件与前端开发使用的 JS 几乎没有区别，只是小程序的 JS 新增了微信的一些 API 接口，并去除了一些不必要的功能 (如 DOM)。
在语言上，小程序完全向学习成本最低的前端开发看齐，但这不代表所有前端开发者都能无缝迁移。
如果你是从前端开发转向小程序，就需要注意这两个点：
HTML 与 WXML 两种文件的构建思想差异较大，如果之前只接触过前端开发，需要一点时间才能适应 WXML 的编写方法。
虽然小程序使用的是前端语言，但不代表可以继续沿用前端的开发思想进行开发。小程序对前端开发的要求从「构建界面」升级成「开发完整应用」，前端开发需要在意识上进行转变。
1. 主要内容 springboot 后端架构构建
小程序项目构建
小程序 api 调用
后台 resetful 接口编写" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/948de60bd48499573a00abe4d986cd0d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-31T20:01:38+08:00" />
<meta property="article:modified_time" content="2022-05-31T20:01:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序开发（后端 Java）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>微信使用的开发语言和文件很「特殊」。</h3> 
<h3><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2F9.cn%2F" rel="nofollow" title="小程序">小程序</a>所使用的程序文件类型大致分为以下几种：</h3> 
<h3>①WXML (WeiXin Mark Language，微信标记语言)</h3> 
<h3>②WXSS (WeiXin Style Sheet，微信样式表)</h3> 
<h3>③JS (Java，小程序的主体)</h3> 
<p></p> 
<p>小伙伴们有兴趣想了解内容和更多相关学习资料的请点赞收藏+评论转发+关注我，后面会有很多干货。我有一些面试题、架构、设计类资料可以说是程序员面试必备！<br> 所有资料都整理到网盘了，需要的话欢迎下载！私信我回复【111】即可免费获取</p> 
<p></p> 
<p>在语言方面，小程序看似重新定义了一套标准。但实际上，它们与「前端三件套」——HTML、CSS 和 Java—— 差不太多。</p> 
<p>下面，我们就来对比一下小程序开发语言和「前端三件套」有什么异同点：</p> 
<p>HTML 与 WXML：两者差异比较大，如果之前没有接触过 Android 开发，可能会觉得有些头疼。事实上，WXML 更像是 Android 开发中的界面 XML 描述文件，适合于程序界面的构建；而 HTML 则倾向于文章的展示 (这与 HTML 的历史有关)，以及互联网页面的构建。</p> 
<p>WXSS 与 CSS：两者在语言上几乎没有差别，可以直接通用。</p> 
<p>JS 文件：小程序的 JS 文件与前端开发使用的 JS 几乎没有区别，只是小程序的 JS 新增了微信的一些 API 接口，并去除了一些不必要的功能 (如 DOM)。</p> 
<p>在语言上，小程序完全向学习成本最低的前端开发看齐，但这不代表所有前端开发者都能无缝迁移。</p> 
<p>如果你是从前端开发转向小程序，就需要注意这两个点：</p> 
<p>HTML 与 WXML 两种文件的构建思想差异较大，如果之前只接触过前端开发，需要一点时间才能适应 WXML 的编写方法。</p> 
<p>虽然小程序使用的是前端语言，但不代表可以继续沿用前端的开发思想进行开发。小程序对前端开发的要求从「构建界面」升级成「开发完整应用」，前端开发需要在意识上进行转变。<br>  </p> 
<h4>1. 主要内容</h4> 
<p>　　springboot 后端架构构建</p> 
<p>　　小程序项目构建</p> 
<p>　　小程序 api 调用</p> 
<p>　　后台 resetful 接口编写</p> 
<p>　　小程序调用后台接口</p> 
<p>　　免费的 https 申请</p> 
<p>　　Linux 下部署上线</p> 
<h4>2. 后端详解（Java 编写后端 api）</h4> 
<p>　　主要框架 springboot, 开发工具 myeclipse，服务器阿里云服务器。</p> 
<p>　　创建一个 maven 项目，导入相关依赖： <br> 　　pom.xml 依赖</p> 
<p>　　</p> 
<pre><code>&lt;!-- 统一版本控制 --&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;
    &lt;/parent&gt;
    &lt;dependencies&gt;
        &lt;!-- freemarker渲染页面 --&gt;
        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-freemarker --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!-- spring boot 核心 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!-- springboot整合jsp --&gt;
        &lt;!-- tomcat 的支持. --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;
            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;</code></pre> 
<p>　　在配置文件 src/main/resources/ 下创建 application.properties 文件，可以修改一些配置参数等</p> 
<pre><code>#jsp支持
spring.mvc.view.suffix=.jsp
spring.mvc.view.prefix=/WEB-INF/jsp/
#this is set port
#server.port=80
server.port=443
#添加ssl证书
#ssl证书文件名
server.ssl.key-store=classpath:xxxxxxx.pfx
server.ssl.key-store-password=xxxxxxxx
server.ssl.keyStoreType=xxxxxxxx</code></pre> 
<p>　　在实际项目中可能涉及数据库，还要整合 mybatis，在文章中，仅仅做测试就不做使用数据库的测试</p> 
<p>　　首先创建 springboot 的入库程序：app.class 下为代码：</p> 
<p>　　</p> 
<pre><code>@ComponentScan(basePackages= "com.bin")//添加扫包@ComponentScan(basePackages= "")
@EnableAutoConfiguration
public class App{

    //启动springboot
    public static void main(String[] args) {
        SpringApplication.run(App.class, args);
    }
}</code></pre> 
<p>　　启动项目时直接右击 run 即可</p> 
<p>　　在写一个测试的 controller 进行微信小程序与 java 后端实现通信，controller 代码如下：</p> 
<p>　　</p> 
<pre><code>@RestController
@SpringBootApplication
public class ControllerText {

    @RequestMapping("getUser")
    public Map&lt;String, Object&gt; getUser(){
        System.out.println("微信小程序正在调用。。。");
        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
        List&lt;String&gt; list = new ArrayList&lt;String&gt;();
        list.add("zhangsan");
        list.add("lisi");
        list.add("wanger");
        list.add("mazi");
        map.put("list",list);
        System.out.println("微信小程序调用完成。。。");
        return map;
    }

    @RequestMapping("getWord")
    public Map&lt;String, Object&gt; getText(String word){
        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
        String message = "我能力有限，不要为难我";
        if ("后来".equals(word)) {
            message="正在热映的后来的我们是刘若英的处女作。";
        }else if("微信小程序".equals(word)){
            message= "想获取更多微信小程序相关知识，请更多的阅读微信官方文档，还有其他更多微信开发相关的内容，学无止境。";
        }else if("西安工业大学".equals(word)){
            message="西安工业大学（Xi'an Technological University）简称”西安工大“，位于世界历史名城古都西安，是中国西北地区唯一一所以兵工为特色，以工为主，理、文、经、管、法协调发展的教学研究型大学。原中华人民共和国兵器工业部直属的七所本科院校之一（“兵工七子”），陕西省重点建设的高水平教学研究型大学、陕西省人民政府与中国兵器工业集团、国防科技工业局共建高校、教育部“卓越工程师教育培养计划”试点高校、陕西省大学生创新能力培养综合改革试点学校。国家二级保密资格单位，是一所以\"军民结合，寓军于民\"的国防科研高校。";
        }
        map.put("message", message);
        return map;
    }

    @RequestMapping("")
    public String getText(){
        return "hello world";
    }


}</code></pre> 
<p>　　至此简易的后端框架及测试基本完成</p> 
<p>　　说明：@RestController 与 Controller 注解的区别</p> 
<p>　　　　　　@RestController 相当于它能实现将后端得到的数据在前端页面（网页）中以 json 串的形式传递。</p> 
<p>　　　　　　微信小程序与后台数据之间的数据传递就是以 json 报文的形式传递。这也是选择 springboot 框架开发小程序后台的主要原因之一，可以方便进行小程序后套开发</p> 
<p>　　　　</p> 
<ol><li> <p>小程序发起网络请求 </p> <p>在完成了小程序的后端开发，下面进行小程序端发起网络请求。 </p> <p>下面以一个简单的按钮请求数据为例： </p> wxml 文件：　</li></ol> 
<pre><code>&lt;button bindtap='houduanButton1'&gt;点击发起请求&lt;/button&gt;
&lt;view wx:for="{<!-- -->{list}}"&gt;
    姓名：{<!-- -->{item}}
 &lt;/view&gt;</code></pre> 
<p>　　　　js 文件：</p> 
<pre><code>/**
   * 页面的初始数据
   */
  data: {
    list: '',
    word: '',
    message:''

  },
  houduanButton1: function () {
    var that = this;
    wx.request({
      url: 'http://localhost:443/getUser',
      method: 'GET',
      header: {
        'content-type': 'application/json' // 默认值
      },
      success: function (res) {
        console.log(res.data)//打印到控制台
        var list = res.data.list;
        if (list == null) {
          var toastText = '数据获取失败';
          wx.showToast({
            title: toastText,
            icon: '',
            duration: 2000
          });
        } else {
          that.setData({
            list: list
          })
        }
      }
    })
  }</code></pre> 
<p>　　主要调用的 api 就是 wx.request, 想知道将详细的介绍大家可以去《微信公众平台》。</p> 
<p>　　接下来以搜索类型的请求为例：</p> 
<p>　　wxml 文件：</p> 
<pre><code>&lt;input type="text" class="houduanTab_input" placeholder="请输入你要查询的内容" bindinput='houduanTab_input'&gt;&lt;/input&gt;
  &lt;button bindtap='houduanButton2'&gt;查询&lt;/button&gt;
  &lt;view wx:if="{<!-- -->{message!=''}}"&gt;
    {<!-- -->{message}}
  &lt;/view&gt;</code></pre> 
<p>　　js 文件：变量的定义见上一个 js 文件</p> 
<pre><code>  //获取输入框的内容
  houduanTab_input: function (e) {
    this.setData({
      word: e.detail.value
    })
  },
  // houduanButton2的网络请求
  houduanButton2: function () {
    var that = this;
    wx.request({
      url: 'http://localhost:443/getWord',
      data:{
        word: that.data.word
      },
      method: 'GET',
      header: {
        'content-type': 'application/json' // 默认值
      },
      success: function (res) {
        console.log(res.data)//打印到控制台
        var message = res.data.message;
        if (message == null) {
          var toastText = '数据获取失败';
          wx.showToast({
            title: toastText,
            icon: '',
            duration: 2000
          });
        } else {
          that.setData({
            message: message
          })
        }
      }
    })
  }</code></pre> 
<p></p> 
<p>　　至此已经完成了简易的微信小程序端与 java 后端进行通信。 <br>        现在可以在启动后端项目在微信开发工具上进行测试。 <br> 演示效果：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ac/9e/alHa5NNS_o.gif"></p> 
<p> <br><br> 所以至此已经完成了小程序的前后端通信。</p> 
<p></p> 
<p>1.https 申请<br> 　　其实也不算什么申请，在购买域名之后可以申请免费的 ssl 证书，在前面的配置文件 application.properties 中有证书的配置，将证书的 pfx 文件直接添加到后端项目下即可。<br> 2. 购买服务器部署后端 api 代码<br> 　　对于 springboot 项目，本人建议打 jar，直接在服务器上部署即可，在服务器上只需要安装对应版本的 jdk 即可。项目部署命令：<br> 我购买的是阿里云的轻量级应用服务器部署的。比较划算吧。</p> 
<p><br> 运行命令： nohup java -jar helloworld.jar &amp;<br><br> nohup 的意思不挂服务，常驻的意思，除非云服务器重启，那就没法了；最后一个 &amp; 表示执行命令后要生成日志文件 nohup.out。<br> 当然还可以使用 java -jar helloworld.jar</p> 
<p></p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7ab229fa1fc2dce42418c27e946d9c69/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">检索COM 类工厂中 CLSID 为 {000209FF-0000-0000-C000-000000000046} 的组件失败,错误: 80080005</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f21ce2971cce216e037c1a77e64d6d18/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">实例化Servlet类异常404、500错误-解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>