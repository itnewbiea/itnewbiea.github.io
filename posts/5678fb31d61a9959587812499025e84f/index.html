<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue中为什么要用深拷贝以及什么时候会用到他们？ - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue中为什么要用深拷贝以及什么时候会用到他们？" />
<meta property="og:description" content="一、为什么要用到深拷贝？ 在Vue中，深拷贝通常用于处理需要复制并独立管理的数据，以确保数据的改变不会影响到原始数据。以下是一些示例说明Vue中为什么要使用深拷贝：
1、避免引起共享问题：
在Vue中，组件之间经常会使用对象或数组作为数据的传递方式。如果将一个对象或数组直接赋值给另一个变量，那么他们之间将共享相同的引用。这就意味着，当你修改其中一个变量时，另一个变量也会相应的改变。为了避免这种引用共享的问题，我们可以使用深拷贝来复制数据的副本。
data() { return { originalData: { name: &#39;Alice&#39;, age: 25 } }; }, created() { // 使用深拷贝复制originalData this.copiedData = JSON.parse(JSON.stringify(this.originalData)); // 修改copiedData的值，不会影响originalData this.copiedData.age = 30; console.log(this.originalData.age); // 输出: 25 console.log(this.copiedData.age); // 输出: 30 } 2、防止突变问题：
当在Vue中使用响应式数据时，直接修改原始数据可能会引发一些问题。比如，在计算属性或监听器中修改原始数据时，Vue可能无法正确地跟踪数据的变化，导致视图不会及时更新。通过使用深拷贝来创建数据的副本，可以避免这种冲突变的问题。
data() { return { originalArray: [1, 2, 3] }; }, computed: { copiedArray() { // 使用深拷贝复制originalArray return JSON.parse(JSON.stringify(this.originalArray)); } }, mounted() { // 修改copiedArray的值，不会影响originalArray this.copiedArray.push(4); console.log(this.originalArray); // 输出: [1, 2, 3] console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/5678fb31d61a9959587812499025e84f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-28T15:50:11+08:00" />
<meta property="article:modified_time" content="2023-07-28T15:50:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue中为什么要用深拷贝以及什么时候会用到他们？</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>  一、为什么要用到深拷贝？      </p> 
<p>        在Vue中，深拷贝通常用于处理需要复制并独立管理的数据，以确保数据的改变不会影响到原始数据。以下是一些示例说明Vue中为什么要使用深拷贝：</p> 
<p><strong>1、避免引起共享问题：</strong></p> 
<p>        在Vue中，组件之间经常会使用对象或数组作为数据的传递方式。如果将一个对象或数组直接赋值给另一个变量，那么他们之间将共享相同的引用。这就意味着，当你修改其中一个变量时，另一个变量也会相应的改变。为了避免这种引用共享的问题，我们可以使用深拷贝来复制数据的副本。</p> 
<pre><code class="language-javascript">data() {
  return {
    originalData: {
      name: 'Alice',
      age: 25
    }
  };
},
created() {
  // 使用深拷贝复制originalData
  this.copiedData = JSON.parse(JSON.stringify(this.originalData));

  // 修改copiedData的值，不会影响originalData
  this.copiedData.age = 30;

  console.log(this.originalData.age);  // 输出: 25
  console.log(this.copiedData.age);  // 输出: 30
}</code></pre> 
<p><strong>2、防止突变问题：</strong></p> 
<p>        当在Vue中使用响应式数据时，直接修改原始数据可能会引发一些问题。比如，在计算属性或监听器中修改原始数据时，Vue可能无法正确地跟踪数据的变化，导致视图不会及时更新。通过使用深拷贝来创建数据的副本，可以避免这种冲突变的问题。</p> 
<pre><code class="language-javascript">data() {
  return {
    originalArray: [1, 2, 3]
  };
},
computed: {
  copiedArray() {
    // 使用深拷贝复制originalArray
    return JSON.parse(JSON.stringify(this.originalArray));
  }
},
mounted() {
  // 修改copiedArray的值，不会影响originalArray
  this.copiedArray.push(4);

  console.log(this.originalArray);  // 输出: [1, 2, 3]
  console.log(this.copiedArray);  // 输出: [1, 2, 3, 4]
}</code></pre> 
<p><strong>3、作为Props传递：</strong></p> 
<p>        在Vue中，通过Props将数据传递给子组件时，如果直接将原始数据传递给子组件，子组件对该数据的修改可能会影响到父组件的数据，为了确保子组件操作的是独立的副本而不是共享的原始数据，需要使用深拷贝将数据传递给子组件。</p> 
<pre><code class="language-javascript">// 父组件
&lt;template&gt;
  &lt;div&gt;
    &lt;child-component :copied-data="copiedData"&gt;&lt;/child-component&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import ChildComponent from './ChildComponent.vue';

export default {
  components: {
    ChildComponent
  },
  data() {
    return {
      originalData: {
        name: 'Alice',
        age: 25
      }
    };
  },
  computed: {
    copiedData() {
      // 使用深拷贝复制originalData
      return JSON.parse(JSON.stringify(this.originalData));
    }
  },
  mounted() {
    // 修改copiedData的值，不会影响originalData
    this.copiedData.age = 30;

    console.log(this.originalData.age);  // 输出: 25
    console.log(this.copiedData.age);  // 输出: 30
  }
};
&lt;/script&gt;

// 子组件
&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;{<!-- -->{ copiedData.name }}&lt;/p&gt;
    &lt;p&gt;{<!-- -->{ copiedData.age }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  props: ['copiedData']
};
&lt;/script&gt;</code></pre> 
<p><strong>        总而言之，在Vue中使用深拷贝可以保护原始数据，避免引用共享和冲突问题，并确保组件之间的相互独立。通过赋值数据的副本，可以更好地管理和控制数据的改变。</strong></p> 
<p>二、什么时候会用到深浅拷贝？</p> 
<p>        在Vue项目中，深浅拷贝通常用于处理数据的复制或者传递，以确保数据的独立性和避免引起不必要的副作用。以下是一些常见的情况，你可能需要使用到深浅拷贝。</p> 
<p>1、<strong>对象和数组的传递</strong>：</p> 
<p>        当将一个对象或者数据作为prop传递给子组件时，为了避免子组件对传递的数据进行修改影响到父组件的数据，你可以使用浅拷贝来复制这些数据。Vue中的Object.assign()或数组的.slice()方法可以实现浅拷贝。</p> 
<p>2、状态管理工具（如Vuex）的数据更新：</p> 
<p>        在使用状态管理工具时，当你想要更改心store中的数据时，最好使用深拷贝来创建副本，避免直接修改原始数据。这可以防止直接修改store中的数据</p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/332de8c876339220ec346a702f3dbfc3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GitHub上怎么寻找项目？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bdfd88b701f823ee491992b3cef9f1a5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java文件操作基础</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>