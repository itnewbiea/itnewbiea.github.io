<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pandas &#43;re获取pubmed中文献的标题和摘要 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pandas &#43;re获取pubmed中文献的标题和摘要" />
<meta property="og:description" content="pubmed 网站 https://pubmed.ncbi.nlm.nih.gov/
后面加上文献的pmid号就可以查询到该文献的详情页
爬虫逻辑就是，requests获取网页源代码，正则表达式进行提取，得到我们需要的内容就好了
import requests import re key=input(&#34;请输入你想查找的信息：&#34;) #即你在pubmed查找的关键词，推荐看一下pubmed能不能查询到 local_url=input(&#34;请输入你想存储的位置及名称：&#34;) #是位置加名称哈 turl=&#34;https://pubmed.ncbi.nlm.nih.gov/&#34; tdata=requests.get(turl,params={&#34;term&#34;:key}).text pat_allpage=&#39;&lt;span class=&#34;total-pages&#34;&gt;(.*?)&lt;/span&gt;&#39; allpage=re.compile(pat_allpage,re.S).findall(tdata) num=input(&#34;请输入大致想获取的文章数目（总数为&#34;&#43;str(int(allpage[0].replace(&#39;\n &#39;,&#39;&#39;).replace(&#39;,&#39;,&#39;&#39;))*10)&#43;&#34;):&#34;) for j in range(0,int(num)//10&#43;1): url=&#34;https://pubmed.ncbi.nlm.nih.gov/&#34;&#43;&#34;?term=&#34;&#43;key&#43;&#34;&amp;page=&#34;&#43;str(j&#43;1) data=requests.get(url,params={&#34;term&#34;:key}).text pat1_content_url=&#39;&lt;div class=&#34;docsum-wrap&#34;&gt;.*?&lt;.*?href=&#34;(.*?)&#34;.*?&lt;/a&gt;&#39; content_url=re.compile(pat1_content_url,re.S).findall(data) hd={&#39;User-Agent&#39;:&#39;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:76.0) Gecko/20100101 Firefox/76.0&#39;,&#39;User-Agent&#39;:&#39;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3741.400 QQBrowser/10.5.3863.400&#39;} for i in range(0,len(content_url)): curl=&#34;https://pubmed.ncbi.nlm.nih.gov/&#34;&#43;content_url[i] try: cdata=requests.get(curl,headers=hd).text pat2_title=&#34;&lt;title&gt;(.*?)&lt;/title&gt;&#34; pat3_content=&#39;&lt;div class=&#34;abstract-content selected&#34;.*?&gt;(.*?)&lt;/div&gt;&#39; pat4_date=&#39;&lt;span class=&#34;cit&#34;&gt;(.*?)&lt;/span&gt;&#39; title=re.compile(pat2_title,re.S).findall(cdata) print(&#34;正则爬取的题目是：&#34;&#43;title[0]) content=re.compile(pat3_content,re.S).findall(cdata) date=re.compile(pat4_date,re.S).findall(cdata) fh=open(local_url&#43;&#34;.html&#34;,&#34;a&#34;,encoding=&#34;utf-8&#34;) fh.write(str(title[0])&#43;&#39; ----&#39;&#43;str(date[0])&#43;&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2c848db7177a1db29ab84a85834fcb2d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-20T09:35:50+08:00" />
<meta property="article:modified_time" content="2023-11-20T09:35:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pandas &#43;re获取pubmed中文献的标题和摘要</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>pubmed 网站  <a href="https://pubmed.ncbi.nlm.nih.gov/" rel="nofollow" title="https://pubmed.ncbi.nlm.nih.gov/">https://pubmed.ncbi.nlm.nih.gov/</a></p> 
<p>后面加上文献的pmid号就可以查询到该文献的详情页</p> 
<p>爬虫逻辑就是，requests获取网页源代码，正则表达式进行提取，得到我们需要的内容就好了</p> 
<pre><code class="language-python">import requests
import re
key=input("请输入你想查找的信息：") #即你在pubmed查找的关键词，推荐看一下pubmed能不能查询到
local_url=input("请输入你想存储的位置及名称：")    #是位置加名称哈
turl="https://pubmed.ncbi.nlm.nih.gov/"
tdata=requests.get(turl,params={"term":key}).text
pat_allpage='&lt;span class="total-pages"&gt;(.*?)&lt;/span&gt;'
allpage=re.compile(pat_allpage,re.S).findall(tdata)
num=input("请输入大致想获取的文章数目（总数为"+str(int(allpage[0].replace('\n        ','').replace(',',''))*10)+"):")
for j in range(0,int(num)//10+1):
    url="https://pubmed.ncbi.nlm.nih.gov/"+"?term="+key+"&amp;page="+str(j+1)
    data=requests.get(url,params={"term":key}).text
    pat1_content_url='&lt;div class="docsum-wrap"&gt;.*?&lt;.*?href="(.*?)".*?&lt;/a&gt;'
    content_url=re.compile(pat1_content_url,re.S).findall(data)
    hd={'User-Agent':'Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:76.0) Gecko/20100101 Firefox/76.0','User-Agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3741.400 QQBrowser/10.5.3863.400'}
    for i in range(0,len(content_url)):
        curl="https://pubmed.ncbi.nlm.nih.gov/"+content_url[i]
        try:
            cdata=requests.get(curl,headers=hd).text
            pat2_title="&lt;title&gt;(.*?)&lt;/title&gt;"
            pat3_content='&lt;div class="abstract-content selected".*?&gt;(.*?)&lt;/div&gt;'
            pat4_date='&lt;span class="cit"&gt;(.*?)&lt;/span&gt;'
            title=re.compile(pat2_title,re.S).findall(cdata)
            print("正则爬取的题目是："+title[0])
            content=re.compile(pat3_content,re.S).findall(cdata)
            date=re.compile(pat4_date,re.S).findall(cdata)
            fh=open(local_url+".html","a",encoding="utf-8")
            fh.write(str(title[0])+' ----'+str(date[0])+"&lt;br /&gt;"+str(content[0])+"&lt;br /&gt;&lt;br /&gt;") 
            fh.close
        except Exception as err:
            pass
        if int(num) &lt; 10:
            if i+1 == int(num):
                break
        elif int(num) == 10:
            if i == 9:
                break
        elif (j*10)+i+1 == int(num):
            break
</code></pre> 
<p> 输入你要查找的信息，存储的位置及名称，获取的数目</p> 
<p><img alt="" height="140" src="https://images2.imgbox.com/0d/fd/9FGEPekp_o.jpg" width="648"></p> 
<p></p> 
<p> 就会得到如下的结果，edge打开后，右上角的一键翻译可以快速浏览出需要的文献</p> 
<p><img alt="" height="526" src="https://images2.imgbox.com/5f/34/T3kGeWr5_o.png" width="1200"></p> 
<p> 值得一提的是，这样子获取到的是html文件是为了我们方便删选，所以还可以同时运行一下下面的py程序，可以获取csv文件，更好的进行汇报以及整理</p> 
<p></p> 
<p>与上面的相比，就是把读取到的数据，str后转成list再写成了DataFrame格式，之后整合在一起，保存到csv文件里面</p> 
<pre><code class="language-python">import pandas as pd
import requests
import re

key=input("请输入你想查找的信息：")
# local_url=input("请输入你想存储的位置及名称：")  D:\pubmed\abst.html
turl="https://pubmed.ncbi.nlm.nih.gov/"
tdata=requests.get(turl,params={"term":key}).text
pat_allpage='&lt;span class="total-pages"&gt;(.*?)&lt;/span&gt;'
allpage=re.compile(pat_allpage,re.S).findall(tdata)
num=input("请输入大致想获取的文章数目（总数为"+str(int(allpage[0].replace('\n        ','').replace(',',''))*10)+"):")

df = pd.DataFrame()
for j in range(0,int(num)//10+1):
    url="https://pubmed.ncbi.nlm.nih.gov/"+"?term="+key+"&amp;page="+str(j+1)
    data=requests.get(url,params={"term":key}).text
    pat1_content_url='&lt;div class="docsum-wrap"&gt;.*?&lt;.*?href="(.*?)".*?&lt;/a&gt;'
    content_url=re.compile(pat1_content_url,re.S).findall(data)
    hd={'User-Agent':'Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:76.0) Gecko/20100101 Firefox/76.0','User-Agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3741.400 QQBrowser/10.5.3863.400'}
    for i in range(0,len(content_url)):
        curl="https://pubmed.ncbi.nlm.nih.gov/"+content_url[i]
        try:
            cdata=requests.get(curl,headers=hd).text
            pat2_title="&lt;title&gt;(.*?)&lt;/title&gt;"
            pat3_content='&lt;div class="abstract-content selected".*?&gt;(.*?)&lt;/div&gt;'
            pat4_date='&lt;span class="cit"&gt;(.*?)&lt;/span&gt;'
            title=re.compile(pat2_title,re.S).findall(cdata)
            print("正则爬取的题目是："+title[0])
            content=re.compile(pat3_content,re.S).findall(cdata)
            date=re.compile(pat4_date,re.S).findall(cdata)
            title1 = title[0]
            title2 = str(title1)
            title3 = list(title2.split(' ', 0))
            df1 = pd.DataFrame(title3)
            date1 = date[0]
            date2 = str(date1)
            date3 = list(date2.split(' ', 0))
            df2 = pd.DataFrame(date3)
            print(df2)
            content1 = content[0]
            content2 = str(content1)
            content3 = list(content2.split(' ', 0))
            df3 = pd.DataFrame(list(content2))
            df4 = pd.concat([df1, df2, df3])
            # df5= pd.concat([df4, df3])
            df6 = pd.concat([df, df4])
            print(df6)
            df6.to_csv(f"123.csv", index=False, mode='a', encoding='utf_8_sig') #123改成你自己的文件名就好了，这个就是保存到了当前文件夹里面
            # fh = open(local_url+".html","a",encoding="utf-8")
            # fh.write(str(title[0])+' ----'+str(date[0])+"&lt;br /&gt;"+str(content[0])+"&lt;br /&gt;&lt;br /&gt;")
            # fh.close
        except Exception as err:
            pass
        if int(num) &lt; 10:
            if i+1 == int(num):
                break
        elif int(num) == 10:
            if i == 9:
                break
        elif (j*10)+i+1 == int(num):
            break</code></pre> 
<p>初学者小白一名，学到了前辈的经验，进行了自己的一部分总结和乱改，希望对读者有所帮助</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/31abdd5baa969ccb5ded2f8174798255/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Linux】了解文件的inode元信息，以及日志分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/caa82508c4dcbc59079afe5bff5d5b3d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【项目实战】Python实现循环神经网络RNN-LSTM回归模型项目实战(股票价格预测)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>