<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android调试过程抓取带时间的logcat和kernel log打印 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android调试过程抓取带时间的logcat和kernel log打印" />
<meta property="og:description" content="可以直接在串口输入以下命令实现： logcat -v time -f /data/logcat.log | cat /proc/kmsg | tee /data/kernel_dmesg.log 说明：logcat打印输出到data目录的logcat.log文件，dmesg打印，也就是kernel内核的打印会在data目录的kernel_dmesg.log文件中。
logcat 输出日志信息到文件中 – &#34;-f&#34;选项 : 该选项后面跟着输入日志的文件, 使用adb logcat -f /sdcard/log.txt 命令, 注意这个log文件是输出到手机上，需要指定合适的路径。
gtt92e:/ # logcat -f /sdcard/log.txt 这个参数对不能一直用电脑连着手机收集日志的场景非常有用，其实android shell下也有一个相同参数的logcat命令。使用如下命令可以执行后断开PC和手机持续收集LOG。
gtt92e:/ # logcat -f /sdcard/log.txt &amp; #这里的&amp;符号表示后台执行，记住一定要添加。
注意合适的时候需要停止掉以上命令，否则再次使用相同命令的时候，就会有两个logcat写同一个文件
停止方法（串口执行）: kill -9 &lt;logcat_pid&gt; 其中logcat_pid通过如下命令获取 ps | grep logcat – &#34;&gt;&#34;输出 : “&gt;” 后面跟着要输出的日志文件, 可以将 logcat 日志输出到文件中, 使用adb logcat &gt; log 命令, 使用more log 命令查看日志信息;
举例说明：
130|gtt92e:/ # logcat -f /sdcard/log." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/6c089cd3e9eab4394c1e8f3c6b8b9461/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-16T14:46:10+08:00" />
<meta property="article:modified_time" content="2020-05-16T14:46:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android调试过程抓取带时间的logcat和kernel log打印</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="_0"></a>可以直接在串口输入以下命令实现：</h5> 
<pre><code class="prism language-c">logcat <span class="token operator">-</span>v time <span class="token operator">-</span>f <span class="token operator">/</span>data<span class="token operator">/</span>logcat<span class="token punctuation">.</span>log <span class="token operator">|</span> cat <span class="token operator">/</span>proc<span class="token operator">/</span>kmsg <span class="token operator">|</span> tee <span class="token operator">/</span>data<span class="token operator">/</span>kernel_dmesg<span class="token punctuation">.</span>log
</code></pre> 
<p>说明：logcat打印输出到data目录的logcat.log文件，dmesg打印，也就是kernel内核的打印会在data目录的kernel_dmesg.log文件中。</p> 
<h5><a id="logcat__8"></a>logcat 输出日志信息到文件中</h5> 
<p>– "-f"选项 : 该选项后面跟着输入日志的文件, 使用adb logcat -f /sdcard/log.txt 命令, 注意这个log文件是输出到手机上，需要指定合适的路径。</p> 
<pre><code class="prism language-c">gtt92e<span class="token punctuation">:</span><span class="token operator">/</span> # logcat <span class="token operator">-</span>f <span class="token operator">/</span>sdcard<span class="token operator">/</span>log<span class="token punctuation">.</span>txt 
</code></pre> 
<p>这个参数对不能一直用电脑连着手机收集日志的场景非常有用，其实android shell下也有一个相同参数的logcat命令。使用如下命令可以执行后断开PC和手机持续收集LOG。</p> 
<p>gtt92e:/ # logcat -f /sdcard/log.txt &amp; #这里的&amp;符号表示后台执行，记住一定要添加。</p> 
<p>注意合适的时候需要停止掉以上命令，否则再次使用相同命令的时候，就会有两个logcat写同一个文件</p> 
<pre><code class="prism language-c">停止方法（串口执行）<span class="token punctuation">:</span> kill <span class="token operator">-</span><span class="token number">9</span> <span class="token operator">&lt;</span>logcat_pid<span class="token operator">&gt;</span>         
其中logcat_pid通过如下命令获取
ps <span class="token operator">|</span> grep logcat
</code></pre> 
<p>– "&gt;"输出 : “&gt;” 后面跟着要输出的日志文件, 可以将 logcat 日志输出到文件中, 使用adb logcat &gt; log 命令, 使用more log 命令查看日志信息;<br> 举例说明：</p> 
<pre><code class="prism language-c"><span class="token number">130</span><span class="token operator">|</span>gtt92e<span class="token punctuation">:</span><span class="token operator">/</span> #  logcat <span class="token operator">-</span>f <span class="token operator">/</span>sdcard<span class="token operator">/</span>log<span class="token punctuation">.</span>txt  <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">7662</span>
gtt92e<span class="token punctuation">:</span><span class="token operator">/</span> # 
gtt92e<span class="token punctuation">:</span><span class="token operator">/</span> # ps <span class="token operator">|</span> grep logcat                                                    
root      <span class="token number">7662</span>  <span class="token number">6277</span>  <span class="token number">7592</span>   <span class="token number">1748</span>  __skb_recv f3348a6c S logcat
gtt92e<span class="token punctuation">:</span><span class="token operator">/</span> # 
gtt92e<span class="token punctuation">:</span><span class="token operator">/</span> # 
gtt92e<span class="token punctuation">:</span><span class="token operator">/</span> # kill <span class="token operator">-</span><span class="token number">9</span> <span class="token number">7662</span>
gtt92e<span class="token punctuation">:</span><span class="token operator">/</span> # 
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> Killed               logcat <span class="token operator">-</span>f <span class="token operator">/</span>sdcard<span class="token operator">/</span>log<span class="token punctuation">.</span>txt
</code></pre> 
<h5><a id="_46"></a>扩展知识：</h5> 
<p>cmd命令行中使用adb logcat命令查看android系统和应用的log，按键盘的ctrl+c中断输出log记录。</p> 
<p>logcat日志中的优先级/tag标记：</p> 
<p>android输出的每一条日志都有一个标记和优先级与其关联。</p> 
<p>优先级是下面的字符，顺序是从低到高：</p> 
<p>V — 明细 verbose(最低优先级)</p> 
<p>D — 调试 debug</p> 
<p>I — 信息 info</p> 
<p>W — 警告 warn</p> 
<p>E — 错误 error</p> 
<p>F — 严重错误 fatal</p> 
<p>S — 无记载 silent</p> 
<p>注：*:S用于设置所有标记的日志优先级为S，这样可以确保仅输出符合条件的日志。</p> 
<p>Logcat命令列表：</p> 
<p>-d 将日志显示在控制台后退出</p> 
<p>-c 清理已存在的日志</p> 
<p>-f 将日志输出到文件</p> 
<p>adb logcat -f /sdcard/test.txt</p> 
<p>-v 设置日志输入格式控制输出字段，默认的是brief格式</p> 
<p>-t 输出最近的几行日志, 输出完退出, 不阻塞;</p> 
<p>brief — 显示优先级/标记和原始进程的PID (默认格式)</p> 
<p>process — 仅显示进程PID</p> 
<p>tag — 仅显示优先级/标记</p> 
<p>thread — 仅显示进程：线程和优先级/标记</p> 
<p>raw — 显示原始的日志信息，没有其他的元数据字段</p> 
<p>time — 显示日期，调用时间，优先级/标记，PID</p> 
<p>long —显示所有的元数据字段并且用空行分隔消息内容</p> 
<p>adb logcat -v thread //使用 thread 输出格式</p> 
<p>注意-v 选项中只能指定一种格式。</p> 
<h5><a id="log_103"></a>下面介绍一下常用的通过加参数获取想要的log打印信息</h5> 
<p><strong>通过标签过滤,即只打印包含你关键字的log</strong></p> 
<p>adb logcat -s 标签/关键字符</p> 
<p><strong>-v time 显示时间</strong></p> 
<p>adb logcat -v time -s buz_beep</p> 
<p><strong>-v threadtime 查看日志的输出时间和线程信息</strong></p> 
<p>adb logcat -v threadtime -s buz_beep</p> 
<p><strong>-v long 输出所有信息</strong></p> 
<p>adb logcat -v long -s buz_beep</p> 
<p><strong>通过字符过滤（这个是使用比较多的一种方式）</strong></p> 
<p>adb logcat | grep Camera</p> 
<p>//只打印所有包含Camera字符的log</p> 
<p><strong>过滤字符串忽略大小写</strong></p> 
<p>adb logcat | grep -i Camera</p> 
<p><strong>logcat 清空缓冲区的打印</strong></p> 
<p>adb logcat -c</p> 
<p><strong>输出最近的10行日志, 并且不会阻塞</strong></p> 
<p>adb logcat -t 10</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/44ae752fee4eb66d5ef5a1739b85a0a8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【PyQt5】{17} —— QTextBrowser文本浏览框</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7770dfd0a64d1c64c4ca88e77d116bfc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js 集合对象应用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>