<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【antdesign】树控件 的 搜索功能 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【antdesign】树控件 的 搜索功能" />
<meta property="og:description" content="根据关键字搜索出树控件中的数据，
1.树控件的数据另存一份不带层级 ‘allData’，用于搜索，
2.搜索不带层级的那份数据 &#39;allData&#39; ，筛选出他的key或者id，赋值给树控件的展开节点
3.关键字标红则是直接在树控件中控制
创建树控件 - 关键字标红就是在template中直接进行设置；
&lt;template&gt; &lt;Tree :tree-data=&#34;treeData&#34; v-model:expandedKeys=&#34;expandedKeys&#34; // 展开的节点 :auto-expand-parent=&#34;autoExpandParent&#34; // 是否自动展开节点 block-node @expand=&#34;onExpand&#34; &gt; &lt;template #title=&#34;{ title }&#34;&gt; &lt;span v-if=&#34;title.indexOf(searchValue) &gt; -1&#34;&gt; {{ title.substr(0, title.indexOf(searchValue)) }} &lt;span style=&#34;color: #f50&#34;&gt;{{ searchValue }}&lt;/span&gt; {{ title.substr(title.indexOf(searchValue) &#43; searchValue.length) }} &lt;/span&gt; &lt;span v-else&gt;{{ title }}&lt;/span&gt; &lt;/template&gt; &lt;/Tree&gt; &lt;/template&gt; 搜索数据
// 将自动展示改为false const onExpand = (keys: string[]) =&gt; { expandedKeys.value = keys; autoExpandParent.value = false; }; // input 的事件，进行搜索 const queryTreeList = (value) =&gt; { expandedKeys." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/34837bba7a7888556656dd42afed44f2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-20T14:50:11+08:00" />
<meta property="article:modified_time" content="2023-02-20T14:50:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【antdesign】树控件 的 搜索功能</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>根据关键字搜索出树控件中的数据，</p> 
<p>1.树控件的数据另存一份不带层级 ‘allData’，用于搜索，</p> 
<p>2.搜索不带层级的那份数据 'allData' ，筛选出他的key或者id，赋值给树控件的展开节点</p> 
<p>3.关键字标红则是直接在树控件中控制</p> 
<p></p> 
<p>创建树控件 - 关键字标红就是在template中直接进行设置；</p> 
<pre><code class="language-javascript">&lt;template&gt;
&lt;Tree
    :tree-data="treeData"
    v-model:expandedKeys="expandedKeys" // 展开的节点
    :auto-expand-parent="autoExpandParent" // 是否自动展开节点 
    block-node 
    @expand="onExpand"
  &gt;
    &lt;template #title="{ title }"&gt;
        &lt;span v-if="title.indexOf(searchValue) &gt; -1"&gt;
          {<!-- -->{ title.substr(0, title.indexOf(searchValue)) }}
          &lt;span style="color: #f50"&gt;{<!-- -->{ searchValue }}&lt;/span&gt;
          {<!-- -->{ title.substr(title.indexOf(searchValue) + searchValue.length) }}
        &lt;/span&gt;
        &lt;span v-else&gt;{<!-- -->{ title }}&lt;/span&gt;
      &lt;/template&gt;
  &lt;/Tree&gt;
&lt;/template&gt;</code></pre> 
<p>搜索数据</p> 
<pre><code class="language-javascript">
// 将自动展示改为false
  const onExpand = (keys: string[]) =&gt; {
    expandedKeys.value = keys;
    autoExpandParent.value = false;
  };

// input 的事件，进行搜索
const queryTreeList = (value) =&gt; {
    expandedKeys.value = allDataList
      .map((item: any) =&gt; {
        if (item.title.indexOf(value) &gt; -1) {
          return getParentKey(item.key, treeData.value); // 进行筛选，将key返回给展开的节点
        }
        return null;
      })
      .filter((item, i, self) =&gt; item &amp;&amp; self.indexOf(item) === i);

    autoExpandParent.value = true; // 是否自动展开
  };
  const getParentKey = (key: string | number, tree: any): string | number | undefined =&gt; {
    let parentKey;
    for (let i = 0; i &lt; tree.length; i++) {
      const node = tree[i];
      if (node.children) {
        if (node.children.some((item) =&gt; item.key === key)) {
          parentKey = node.key;
        } else if (getParentKey(key, node.children)) {
          parentKey = getParentKey(key, node.children);
        }
      }
    }
    return parentKey;
  };</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7329d7aea10dfa6e62e86f00afc59ecb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【mars3d&#43;vue2】项目打包报错 error in ./node_modules/mars3d-cesium/Build/Cesium/index.js</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/30a68a4cf2680c3ffef03e628ebda886/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算数组中每个元素出现的次数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>