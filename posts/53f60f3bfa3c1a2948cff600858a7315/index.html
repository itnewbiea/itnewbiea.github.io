<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux环境下Elasticsearch相关软件安装 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux环境下Elasticsearch相关软件安装" />
<meta property="og:description" content="Linux环境下Elasticsearch相关软件安装 本文将介绍在linux(Centos7)环境下安装Elasticsearch相关的软件。
1、安装Elasticsearch 1.1 Elasticsearch下载 首先去Elasticsearch官网下载相应版本的安装包，下载之后传输到linux服务器上。
官网地址：https://www.elastic.co/cn/downloads/past-releases
我这里下载的是elasticsearch-7.12.1-linux-x86_64.tar.gz
国内加速下载地址：https://www.newbe.pro/tags/Mirrors/
将下载好的tar包传到服务器上指定位置，解压。
解压后出现elasticsearch文件夹，一般来讲直接启动就行了，但就是有时候会有问题。
启动命令，直接使用bin下的命令：
./bin/elasticsearch 或者是
./bin/elasticsearch -d
-d代表的是后台运行
原因是Elasticsearch不能使用root启动，需要新建其它用户进行启动。
# 创建一个叫zsx242030的用户 useradd zsx242030 # 给zsx242030用户设置一个密码，输入两次密码 passwd ************* # 切换zsx242030用户 su zsx242030 切换用户登录重新启动：
发现存在上面问题，是因为elasticsearch用户没有该文件夹的权限，需要对新用户赋予对目录的操作权限：
# 切换到root用户 su root # zsx243040是当前登陆用户 chown -R zsx242030:zsx242030 /home/zhangshixing/elasticsearch/elasticsearch-7.12.1 # 或者 chown -R zsx242030 /home/zhangshixing/elasticsearch/elasticsearch-7.12.1 然后再尝试启动，发现没有报错：
# 查看进程 ps -ef|grep elasticsearch 我们测试一下：
curl localhost:9200 此时我们在浏览器试一下，把 localhost: 改成服务器 ip：
访问不了，因为 elasticsearch 默认只有 localhost 能访问，怎么办呢，修改配置文件：
vim config/elasticsearch.yml
1、打开network.host的注释， 改成 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/53f60f3bfa3c1a2948cff600858a7315/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-21T21:31:28+08:00" />
<meta property="article:modified_time" content="2023-07-21T21:31:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux环境下Elasticsearch相关软件安装</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="LinuxElasticsearch_0"></a>Linux环境下Elasticsearch相关软件安装</h2> 
<p>本文将介绍在linux(Centos7)环境下安装Elasticsearch相关的软件。</p> 
<h3><a id="1Elasticsearch_4"></a>1、安装Elasticsearch</h3> 
<h4><a id="11_Elasticsearch_6"></a>1.1 Elasticsearch下载</h4> 
<p>首先去Elasticsearch官网下载相应版本的安装包，下载之后传输到linux服务器上。</p> 
<p>官网地址：<code>https://www.elastic.co/cn/downloads/past-releases</code></p> 
<p>我这里下载的是<code>elasticsearch-7.12.1-linux-x86_64.tar.gz</code></p> 
<p>国内加速下载地址：<code>https://www.newbe.pro/tags/Mirrors/</code></p> 
<p>将下载好的tar包传到服务器上指定位置，解压。</p> 
<p><img src="https://images2.imgbox.com/db/6e/cL9MKYPw_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/60/9e/NAQ8dwZh_o.png" alt="在这里插入图片描述"></p> 
<p>解压后出现elasticsearch文件夹，一般来讲直接启动就行了，但就是有时候会有问题。</p> 
<p>启动命令，直接使用bin下的命令：</p> 
<p><code>./bin/elasticsearch </code> 或者是</p> 
<p><code>./bin/elasticsearch -d</code></p> 
<p><code>-d</code>代表的是后台运行</p> 
<p><img src="https://images2.imgbox.com/c8/69/wAlu0819_o.png" alt="在这里插入图片描述"></p> 
<p>原因是Elasticsearch不能使用root启动，需要新建其它用户进行启动。</p> 
<pre><code class="prism language-shell"><span class="token comment"># 创建一个叫zsx242030的用户</span>
<span class="token function">useradd</span> zsx242030
<span class="token comment"># 给zsx242030用户设置一个密码，输入两次密码</span>
<span class="token function">passwd</span> *************
<span class="token comment"># 切换zsx242030用户</span>
<span class="token function">su</span> zsx242030
</code></pre> 
<p>切换用户登录重新启动：<br> <img src="https://images2.imgbox.com/03/06/izlWFQDq_o.png" alt="在这里插入图片描述"></p> 
<p>发现存在上面问题，是因为elasticsearch用户没有该文件夹的权限，需要对新用户赋予对目录的操作权限：</p> 
<pre><code class="prism language-shell"><span class="token comment"># 切换到root用户</span>
<span class="token function">su</span> root
<span class="token comment"># zsx243040是当前登陆用户</span>
<span class="token function">chown</span> <span class="token parameter variable">-R</span> zsx242030:zsx242030 /home/zhangshixing/elasticsearch/elasticsearch-7.12.1
<span class="token comment"># 或者</span>
<span class="token function">chown</span> <span class="token parameter variable">-R</span> zsx242030 /home/zhangshixing/elasticsearch/elasticsearch-7.12.1
</code></pre> 
<p>然后再尝试启动，发现没有报错：</p> 
<p><img src="https://images2.imgbox.com/8c/45/MVu01OM9_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token comment"># 查看进程</span>
<span class="token function">ps</span> -ef<span class="token operator">|</span><span class="token function">grep</span> elasticsearch
</code></pre> 
<p><img src="https://images2.imgbox.com/81/92/O88BbxG5_o.png" alt="在这里插入图片描述"></p> 
<p>我们测试一下：</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> localhost:9200
</code></pre> 
<p><img src="https://images2.imgbox.com/ce/c8/LHn48OHt_o.png" alt="在这里插入图片描述"></p> 
<p>此时我们在浏览器试一下，把 localhost: 改成服务器 ip：</p> 
<p><img src="https://images2.imgbox.com/12/d2/Yq7YknTv_o.png" alt="在这里插入图片描述"></p> 
<p>访问不了，因为 elasticsearch 默认只有 localhost 能访问，怎么办呢，修改配置文件：</p> 
<p><code>vim config/elasticsearch.yml</code></p> 
<blockquote> 
 <p>1、打开network.host的注释， 改成 0.0.0.0</p> 
 <p>2、打开 node.name的注释</p> 
 <p>3、打开cluster .initial_master_nodes的注释，设置为node-1</p> 
 <p>4、最下边加两行，允许跨域。</p> 
 <pre><code class="prism language-yaml"><span class="token key atrule">http.cors.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">http.cors.allow-origin</span><span class="token punctuation">:</span> <span class="token string">"*"</span>
</code></pre> 
</blockquote> 
<p>重启服务，先kill, 在重启。如果没有问题，会看到下面的界面：</p> 
<p><img src="https://images2.imgbox.com/80/fd/L8euOtHh_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/52/a9/cSOMqCWD_o.png" alt="在这里插入图片描述"></p> 
<p>如果再次重启的时候有问题，请参考下面遇到的问题，很大概率上是下面的问题。</p> 
<p>如果能够正常重启，但是还是无法通过浏览器访问，先进行下面的操作。</p> 
<p>那么是防火墙的问题，开放9200端口：</p> 
<pre><code class="prism language-shell"><span class="token comment"># 查看开放的端口号 </span>
firewall-cmd --list-all
<span class="token comment"># 设置开放的端口号</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">9200</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment"># 重启防火墙 </span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre> 
<h4><a id="12_Elasticsearch_129"></a>1.2 安装Elasticsearch遇到的问题</h4> 
<p>期间还可能遇到的问题：</p> 
<p><img src="https://images2.imgbox.com/a7/8f/uqZBHXcS_o.png" alt="在这里插入图片描述"></p> 
<p>需要修改一些系统参数， 先切换回<code>root</code>用户</p> 
<p><strong>错误1：</strong> <code>max file descriptors [4096] for elasticsearch process is too low, increase to least [65535]</code></p> 
<p><strong>解决：</strong> <code>vim /etc/security/limits.conf </code> 最下面加两行</p> 
<pre><code class="prism language-shell">* soft nofile <span class="token number">65536</span>
* hard nofile <span class="token number">65536</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cd/7e/8kJ2TLys_o.png" alt="在这里插入图片描述"></p> 
<p>nofile是单个进程允许打开的最大文件个数，soft nofile是软限制，hard nofile是硬限制。</p> 
<p>退出回话，重新连接，执行<code>ulimit -Hn</code> 验证。</p> 
<p><img src="https://images2.imgbox.com/8a/88/3mgDrgQ5_o.png" alt="在这里插入图片描述"></p> 
<p><strong>错误2：</strong><code>max number of threads [1024] for user [es] is too low, increase to at least [4096]</code></p> 
<p><strong>解决：</strong> <code>vim /etc/security/limits.d/20-nproc.conf</code></p> 
<p><img src="https://images2.imgbox.com/6f/c8/BLWm9Xuo_o.png" alt="在这里插入图片描述"></p> 
<p><strong>错误3：</strong> <code>max virtual memory areas vm.max_map_count [65530] is too low, increase to at least</code></p> 
<p><strong>解决：</strong> <code>vim /etc/sysctl.conf</code>，增加配置<code>vm.max_map_count=262144</code></p> 
<p><img src="https://images2.imgbox.com/52/dc/qxg3hnVF_o.png" alt="在这里插入图片描述"></p> 
<p>执行下面命令，修改内核参数马上生效<code>sysctl -p</code></p> 
<p>如果不生效，重新启动虚拟机<code>reboot</code></p> 
<p><img src="https://images2.imgbox.com/4c/ca/fATLR3ku_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="13_Elasticsearchhead_177"></a>1.3 安装Elasticsearch-head插件</h4> 
<p>head插件主要是一个可以用于监控和操作es的一个图形化界面，安装这个插件，需要先安装node.js 从官网下载</p> 
<p>最新的稳定版安装包，上传到服务器。</p> 
<h5><a id="131_node_183"></a>1.3.1 安装node</h5> 
<p><img src="https://images2.imgbox.com/00/74/VrE8XWA9_o.png" alt="在这里插入图片描述"></p> 
<p>解压：<code>tar -xvf node-v16.13.1-linux-x64.tar.gz</code></p> 
<p><img src="https://images2.imgbox.com/52/ef/zKzAUBi1_o.png" alt="在这里插入图片描述"></p> 
<p>然后配置两个软链，也可以配置环境变量：</p> 
<p><code>ln -s /home/zhangshixing/nodejs/node-v16.13.1-linux-x64/bin/npm /usr/local/bin/npm</code></p> 
<p><code>ln -s /home/zhangshixing/nodejs/node-v16.13.1-linux-x64/bin/node /usr/local/bin/node</code></p> 
<p>主要目的就是可是识别node，npm命令，执行完毕之后验证一下：</p> 
<p><code>node -v</code></p> 
<p><code>npm -v</code></p> 
<p>看版本信息是否出现：</p> 
<p><img src="https://images2.imgbox.com/81/4b/CwK3SS87_o.png" alt="在这里插入图片描述"></p> 
<p>如果nodejs安装过程中出现缺包，yum安装一下。</p> 
<h5><a id="132_head_212"></a>1.3.2 安装head</h5> 
<p>下载head插件： 地址 <code>https://github.com/mobz/elasticsearch-head</code></p> 
<p>可以下载zip包传到服务器上解压， 如果机器上有git , 也可以使用git clone 复制下来。<br> <img src="https://images2.imgbox.com/ae/e9/Q2peRwrb_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token comment"># 解压</span>
<span class="token function">unzip</span> elasticsearch-head-master.zip
</code></pre> 
<p>下载下来解压之后，cd 进入head 目录</p> 
<p><img src="https://images2.imgbox.com/58/f1/ixLnGgXD_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> grunt <span class="token parameter variable">--registry</span><span class="token operator">=</span>https://registry.npm.taobao.org
</code></pre> 
<p><img src="https://images2.imgbox.com/33/cc/t3G5lHum_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token comment">#检测是否安装成功，如果执行命令后出现版本号就表明成功</span>
./grunt <span class="token parameter variable">-version</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/83/83/5TtP8QmE_o.png" alt="在这里插入图片描述"></p> 
<p>然后使用<code>npm install</code> 进行编译。</p> 
<p><img src="https://images2.imgbox.com/34/cf/9FrdsR86_o.png" alt="在这里插入图片描述"></p> 
<p>然后要改一个配置，把localhost改为ip地址，否则head监控的是localhost的地址，如果head和es不在一台机器上</p> 
<p>会有问题。</p> 
<p>修改<code>Gruntfile.js</code>文件，修改为ES服务器IP：<br> <img src="https://images2.imgbox.com/58/9c/9d89pXXK_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-json"><span class="token literal-property property">connect</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">hostname</span><span class="token operator">:</span><span class="token string">'192.168.2.186'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">9100</span><span class="token punctuation">,</span>
					<span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token string">'.'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">keepalive</span><span class="token operator">:</span> <span class="token boolean">true</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2d/57/DYhWIeSP_o.png" alt="在这里插入图片描述"></p> 
<p>最后使用 <code>npm run start </code>执行，也可以使用 <code>grunt server</code>启动。</p> 
<p><img src="https://images2.imgbox.com/6c/77/2JJNlVlC_o.png" alt="在这里插入图片描述"></p> 
<p>需要关闭防火墙，开放9100端口。</p> 
<pre><code class="prism language-shell"><span class="token comment"># 查看开放的端口号 </span>
firewall-cmd --list-all
<span class="token comment"># 设置开放的端口号</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">9100</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment"># 重启防火墙 </span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/54/75/EHEQ6yMO_o.png" alt="在这里插入图片描述"></p> 
<p>连接 <code>http://192.168.2.186:9200/</code></p> 
<p><img src="https://images2.imgbox.com/bc/ca/giZcF31N_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="14_ElasticsearchElasticsearchAnalysisik_296"></a>1.4 Elasticsearch分词器Elasticsearch-Analysis-ik安装</h4> 
<p>这个比较简单，下载之后，解压到es安装目录下的plugin目录中即可，注意下载相应的版本。</p> 
<p>ik地址：<code>https://github.com/medcl/elasticsearch-analysis-ik</code></p> 
<p><img src="https://images2.imgbox.com/ad/21/my15uHU8_o.png" alt="在这里插入图片描述"></p> 
<p>新建一个ik目录，<code>mkdir ik</code></p> 
<p>解压：<code>unzip -d ik/ elasticsearch-analysis-ik-7.12.1.zip</code></p> 
<p><img src="https://images2.imgbox.com/f7/cd/vCuAZJTM_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/da/80/v8ukmhBj_o.png" alt="在这里插入图片描述"></p> 
<p>将ik拷贝到elasticsearch的plugins目录下：</p> 
<p><img src="https://images2.imgbox.com/d9/16/MLrrgX4y_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/39/4c/K3Qx9YhJ_o.png" alt="在这里插入图片描述"></p> 
<p>然后重启es，进行分词测试。</p> 
<p><img src="https://images2.imgbox.com/ef/af/7E3YaQEr_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2ElasticHD_327"></a>2、安装ElasticHD</h3> 
<p>打开Xshell，连接到Linux系统中；</p> 
<p>第一步：我们来下载程序压缩包</p> 
<pre><code class="prism language-shell"><span class="token function">wget</span> https://github.com/360EntSecGroup-Skylar/ElasticHD/releases/download/1.4/elasticHD_linux_amd64.zip
</code></pre> 
<p>也可以提前下载好上传到服务器上<code>elasticHD_linux_amd64.zip</code>。</p> 
<p><img src="https://images2.imgbox.com/67/de/32I78o34_o.png" alt="在这里插入图片描述"></p> 
<p>第二步：解压</p> 
<pre><code class="prism language-shell"><span class="token function">unzip</span> elasticHD_linux_amd64.zip
</code></pre> 
<p>提示</p> 
<pre><code class="prism language-shell">Archive: elasticHD_linux_amd64.zip
inflating: ElasticHD
</code></pre> 
<p>说明解压成功；</p> 
<p><img src="https://images2.imgbox.com/0b/11/cL953dsp_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b2/bd/tbvr3pE8_o.png" alt="在这里插入图片描述"></p> 
<p>第三步：授权</p> 
<pre><code class="prism language-shell"><span class="token function">chmod</span> 0777 ElasticHD
</code></pre> 
<p>第四步：启动</p> 
<pre><code class="prism language-shell">./ElasticHD <span class="token parameter variable">-p</span> <span class="token number">192.168</span>.2.186:9800
</code></pre> 
<p><img src="https://images2.imgbox.com/1e/a2/wWL6Pydb_o.png" alt="在这里插入图片描述"></p> 
<p>说明启动成功了，需要关闭防火墙，开放9800端口。</p> 
<pre><code class="prism language-shell"><span class="token comment"># 查看开放的端口号 </span>
firewall-cmd --list-all
<span class="token comment"># 设置开放的端口号</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">9800</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment"># 重启防火墙 </span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre> 
<p>我们用浏览器测试下：</p> 
<p><img src="https://images2.imgbox.com/70/5b/cPQY1vGw_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3Kibana_394"></a>3、安装Kibana</h3> 
<p>1、下载kibana</p> 
<pre><code class="prism language-shell"><span class="token function">wget</span> https://artifacts.elastic.co/downloads/kibana/kibana-7.12.1-linux-x86_64.tar.gz
</code></pre> 
<p>也可以提前下载好，传输到linux服务器上。</p> 
<p><img src="https://images2.imgbox.com/57/14/3cF9u6xR_o.png" alt="在这里插入图片描述"></p> 
<p>2、解压</p> 
<p><code>tar -zxvf kibana-7.12.1-linux-x86_64.tar.gz</code></p> 
<p><img src="https://images2.imgbox.com/3c/69/ZFPlg32s_o.png" alt="在这里插入图片描述"></p> 
<p>3、修改配置文件</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> config/kibana.yml

<span class="token comment"># 放开注释,将默认配置改成如下</span>
server.port: <span class="token number">5601</span>
server.host: <span class="token string">"0.0.0.0"</span>
elasticsearch.hosts: <span class="token string">"http://192.168.2.186:9200"</span>
kibana.index: <span class="token string">".kibana"</span>
</code></pre> 
<p>4、启动</p> 
<pre><code class="prism language-shell">./bin/kibana
</code></pre> 
<p><img src="https://images2.imgbox.com/ea/da/IhSOzZuc_o.png" alt="在这里插入图片描述"></p> 
<p>切换到新建的普通用户</p> 
<p><img src="https://images2.imgbox.com/6f/64/bWCUFVir_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token comment"># 使用root用户赋予权限</span>
<span class="token function">chown</span> <span class="token parameter variable">-R</span> zsx242030:zsx242030 /home/zhangshixing/elasticsearch/kibana-7.12.1-linux-x86_64
</code></pre> 
<p>然后重新启动：</p> 
<p><img src="https://images2.imgbox.com/c4/e1/5EfTfOWO_o.png" alt="在这里插入图片描述"></p> 
<p>5、访问</p> 
<p>需要关闭防火墙，开放5601端口。</p> 
<pre><code class="prism language-shell"><span class="token comment"># 查看开放的端口号 </span>
firewall-cmd --list-all
<span class="token comment"># 设置开放的端口号</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">5601</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment"># 重启防火墙 </span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre> 
<p><code>http://192.168.87.120:5601</code></p> 
<p><img src="https://images2.imgbox.com/05/33/mHyW5zGk_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/74/0e/6gQynRkh_o.png" alt="在这里插入图片描述"></p> 
<p>可以在<code>config/kibana.yml</code>配置文件中配置：</p> 
<pre><code class="prism language-properties">i18n.locale: "zh-CN"
</code></pre> 
<p>让界面中文展示：</p> 
<p><img src="https://images2.imgbox.com/1c/dd/mnhMidvr_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4Logstash_481"></a>4、安装Logstash</h3> 
<p>1、下载Logstash</p> 
<p>本人是从本地上传到服务器上的，使用的7.12.1。</p> 
<p><code>logstash-7.12.1-linux-x86_64.tar.gz</code></p> 
<p><img src="https://images2.imgbox.com/49/69/S9Gz5Byi_o.png" alt="在这里插入图片描述"></p> 
<p>2、解压Logstash</p> 
<p>进入上传目录解压Logstash</p> 
<p><code>tar -zxvf logstash-7.12.1-linux-x86_64.tar.gz</code></p> 
<p><img src="https://images2.imgbox.com/ef/51/housK2fs_o.png" alt="在这里插入图片描述"></p> 
<p>3、启动</p> 
<pre><code class="prism language-shell">./bin/logstash <span class="token parameter variable">-e</span> <span class="token string">'input { stdin { } } output { stdout {} }'</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/19/3f/3rwVhATr_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/73/8f/g5uc7TIN_o.png" alt="在这里插入图片描述"></p> 
<p>具体的使用案例请参考《Windows环境下Elasticsearch相关软件安装》。</p> 
<h3><a id="5Filebeat_515"></a>5、安装Filebeat</h3> 
<p>1、下载安装包</p> 
<p><code>https://www.elastic.co/cn/downloads/beats/filebeat</code></p> 
<p><img src="https://images2.imgbox.com/e5/31/DT1J1o6y_o.png" alt="在这里插入图片描述"></p> 
<p>根据自己的需要，点击<code>View past releases →</code>下载相应的版本，这里我下载的是这个版本<code>filebeat-7-12-1</code></p> 
<p>2、上传服务器解压</p> 
<pre><code class="prism language-shell">$ <span class="token function">tar</span> <span class="token parameter variable">-xvf</span> filebeat-7.12.1-linux-x86_64.tar.gz
</code></pre> 
<p><img src="https://images2.imgbox.com/32/58/ky26ZG0k_o.png" alt="在这里插入图片描述"></p> 
<p>3、修改配置文件</p> 
<p>编辑<code>filebeat.yml</code>配置文件：</p> 
<p>a：配置 <code>filebeat:inputs:path</code> ，这里的路径是所要收集日志的路径</p> 
<p><img src="https://images2.imgbox.com/c3/a7/47lqCv4y_o.png" alt="在这里插入图片描述"></p> 
<p>b：配置 <code>enabled: true</code> 这个配置很重要，只有配置为true之后配置才可生效，否则不起作用。</p> 
<p><img src="https://images2.imgbox.com/ed/f3/MOIh4hpz_o.png" alt="在这里插入图片描述"></p> 
<p>c：配置Outputs ，这里的Outputs有elasticsearch，logstash。按照配置文件下面的示例配置即可，只能配置一</p> 
<p>个输出，默认是ElasticSearch。</p> 
<p><img src="https://images2.imgbox.com/8b/d3/a2v3fVdF_o.png" alt="在这里插入图片描述"></p> 
<p>4、启动</p> 
<pre><code class="prism language-shell">./filebeat <span class="token parameter variable">-e</span> <span class="token parameter variable">-c</span> filebeat.yml
</code></pre> 
<p><img src="https://images2.imgbox.com/a2/1c/Qq8hoJVZ_o.png" alt="在这里插入图片描述"></p> 
<p>正常情况下，应该有个链接ES的过程，将数据输出到es。</p> 
<p><img src="https://images2.imgbox.com/7f/ea/SXiEVOaD_o.png" alt="在这里插入图片描述"></p> 
<p>5、测试</p> 
<p>用以下命令向<code>beat.log</code>文件写入内容，以下内容是全量覆盖，不是追加往里面写内容，若想改成追加内容，把下</p> 
<p>面的<code>&gt;</code>符号改成 <code>&gt;&gt;</code>即可。</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">echo</span> <span class="token string">"2020-10-31 08:55:09,578 [8] INFO  test.Logging - 2017-06-11 08:55:09--System.ArgumentOutOfRangeException"</span> <span class="token operator">&gt;</span> /home/zhangshixing/elasticsearch/filebeat-7.12.1-linux-x86_64/logs/beat.log
</code></pre> 
<p>后台打印信息：</p> 
<p><img src="https://images2.imgbox.com/8b/58/LqfQJisd_o.png" alt="在这里插入图片描述"></p> 
<p>用<code>kinaba</code>查看，多了一个索引：</p> 
<p><img src="https://images2.imgbox.com/24/fd/jczRk8P8_o.png" alt="在这里插入图片描述"></p> 
<p>默认情况下，Filebeat写事件到名为<code>filebeat-7.12.1-yyyy.MM.dd</code>的索引，其中<code>yyyy.MM.dd</code>是事件被索引的日</p> 
<p>期。为了用一个不同的名字，你可以在Elasticsearch输出中设置index选项。</p> 
<p><img src="https://images2.imgbox.com/a6/f3/IjIVpTyL_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/26/5d/gnNhXaoC_o.png" alt="在这里插入图片描述"></p> 
<p>到目前为止，和Elasticsearch相关的一些常用的软件都介绍完毕。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/51f84e43537a1818d1e38a6b204ebd95/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">服务器内存满了解决之路</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/986b3362e88b406847223f0de5014b43/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Latex科研论文之符号篇（希腊字母&amp;拉丁词）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>