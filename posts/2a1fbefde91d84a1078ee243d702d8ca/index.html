<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>node_fs模块常用API - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="node_fs模块常用API" />
<meta property="og:description" content="fs模块 说明 在Node.js中，使用fs模块来实现所有有关文件及目录的创建、写入及删除操作。在fs模块中，所有的方法都分为同步和异步两种实现。具有sync后缀的方法为同步方法，不具有sync后缀的方法为异步方法。异步方法一般最后一个参数都为callback；同步则直接返回。 Node 遵循错误优先回调 回调函数的第一个参数，必须是错误对象error 如果有错误发生，错误将通过第一个参数error返回；第二个参数作为成功响应的数据，如果没有异常，error会被设为null 常用API 创建 fs.writeFile // 异步 / 同步 // fs.writeFile // 若存在该文件，则会覆盖原有数据，若该文件不存在，则会创建该文件，但不能创建文件夹 fs.writeFile(&#39;./index.txt&#39;, &#39;只要心中花千树，&#39;, err =&gt; { if (err) console.log(err) }) fs.writeFileSync(&#39;./index2.txt&#39;, &#39;执子之手，&#39;) fs.appendFile // fs.appendFile // 若该文件不存在，则会创建该文件写入内容，若存在，则在尾部追加内容 fs.appendFile(&#39;./index.txt&#39;, &#39;人生何处不逢春&#39;, err =&gt; { if (err) console.log(err) }) fs.appendFileSync(&#39;./index2.txt&#39;, &#39;与子偕老&#39;) fs.mkdir // fs.mkdir // 创建文件夹，若文件不存在就创建该文件，若存在就报错 fs.mkdir(&#39;./dir&#39;, err =&gt; { if (err) console.log(err) }) fs.mkdirSync(&#39;./dir2&#39;) 删 fs.rm // fs.rm // 存在这样的文件，删除成功，若不存在则会报错 fs.rm(&#39;./test.txt&#39;, err =&gt; { if (err) console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2a1fbefde91d84a1078ee243d702d8ca/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-19T22:39:05+08:00" />
<meta property="article:modified_time" content="2023-09-19T22:39:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">node_fs模块常用API</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="fs__0"></a>fs模块 说明</h3> 
<ul><li>在Node.js中，使用fs模块来实现所有有关文件及目录的创建、写入及删除操作。</li><li>在fs模块中，所有的方法都分为同步和异步两种实现。</li><li>具有sync后缀的方法为同步方法，不具有sync后缀的方法为异步方法。</li><li>异步方法一般最后一个参数都为callback；同步则直接返回。</li></ul> 
<h4><a id="Node__5"></a>Node 遵循错误优先回调</h4> 
<ul><li>回调函数的第一个参数，必须是错误对象error 如果有错误发生，错误将通过第一个参数error返回；</li><li>第二个参数作为成功响应的数据，如果没有异常，error会被设为null</li></ul> 
<h3><a id="API_9"></a>常用API</h3> 
<h4><a id="_10"></a>创建</h4> 
<h5><a id="fswriteFile_11"></a>fs.writeFile</h5> 
<pre><code class="prism language-javascript"><span class="token comment">// 异步 / 同步</span>
<span class="token comment">// fs.writeFile</span>
<span class="token comment">// 若存在该文件，则会覆盖原有数据，若该文件不存在，则会创建该文件，但不能创建文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./index.txt'</span><span class="token punctuation">,</span> <span class="token string">'只要心中花千树，'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'./index2.txt'</span><span class="token punctuation">,</span> <span class="token string">'执子之手，'</span><span class="token punctuation">)</span>

</code></pre> 
<h5><a id="fsappendFile_23"></a>fs.appendFile</h5> 
<pre><code class="prism language-javascript"><span class="token comment">// fs.appendFile</span>
<span class="token comment">// 若该文件不存在，则会创建该文件写入内容，若存在，则在尾部追加内容</span>
fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./index.txt'</span><span class="token punctuation">,</span> <span class="token string">'人生何处不逢春'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">appendFileSync</span><span class="token punctuation">(</span><span class="token string">'./index2.txt'</span><span class="token punctuation">,</span> <span class="token string">'与子偕老'</span><span class="token punctuation">)</span>

</code></pre> 
<h5><a id="fsmkdir_34"></a>fs.mkdir</h5> 
<pre><code class="prism language-javascript">
<span class="token comment">// fs.mkdir</span>
<span class="token comment">// 创建文件夹，若文件不存在就创建该文件，若存在就报错</span>
fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">'./dir'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span><span class="token string">'./dir2'</span><span class="token punctuation">)</span>

</code></pre> 
<h4><a id="_47"></a>删</h4> 
<h5><a id="fsrm_48"></a>fs.rm</h5> 
<pre><code class="prism language-javascript"><span class="token comment">// fs.rm</span>
<span class="token comment">// 存在这样的文件，删除成功，若不存在则会报错</span>
fs<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">'./test.txt'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">rmSync</span><span class="token punctuation">(</span><span class="token string">'./test.txt'</span><span class="token punctuation">)</span>


</code></pre> 
<h5><a id="fsrmdir_60"></a>fs.rmdir</h5> 
<pre><code class="prism language-javascript">
<span class="token comment">// fs.rmdir</span>
<span class="token comment">// 存在这样的文件jia，删除成功，若不存在则会报错</span>
fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">'./test'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">rmdirSync</span><span class="token punctuation">(</span><span class="token string">'./dir'</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_71"></a>修改</h4> 
<h5><a id="fsrename_72"></a>fs.rename</h5> 
<pre><code class="prism language-javascript">
<span class="token comment">// fs.rename</span>
<span class="token comment">// 修改文件名，可以当做移动文件使用</span>
fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'../test.txt'</span><span class="token punctuation">,</span> <span class="token string">'./test123.txt'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">renameSync</span><span class="token punctuation">(</span><span class="token string">'./test123.txt'</span><span class="token punctuation">,</span> <span class="token string">'./test.txt'</span><span class="token punctuation">)</span>

</code></pre> 
<h4><a id="_84"></a>查找</h4> 
<h5><a id="fsexists_85"></a>fs.exists</h5> 
<pre><code class="prism language-javascript">
<span class="token comment">// fs.exists</span>
<span class="token comment">// 判断指定路径文件或目录是否存在，返回值为Boolean</span>
fs<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token string">'./index.ts'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span><span class="token string">'./index.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> 
<h5><a id="fsreaddir_97"></a>fs.readdir</h5> 
<pre><code class="prism language-javascript">
<span class="token comment">// fs.readdir</span>
<span class="token comment">// 获取指定路径下的所有文件/文件夹名</span>
<span class="token comment">// withFileTypes可判断类型 { name: '.idea', path: '../', [Symbol(type)]: 2 }</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">'../'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">withFileTypes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span><span class="token string">'../'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre> 
<h5><a id="fsreadFile_113"></a>fs.readFile</h5> 
<pre><code class="prism language-javascript">
<span class="token comment">// fs.readFile</span>
<span class="token comment">// 读取文件，第二个参数设置编码格式，默认为二进制流buffer</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./index.js'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./index.js'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<h4><a id="_127"></a>其他</h4> 
<h5><a id="fscopyFile_128"></a>fs.copyFile</h5> 
<pre><code class="prism language-javascript">
<span class="token comment">// fs.copyFile</span>
<span class="token comment">// 如果目标文件已经存在，则会覆盖目标文件</span>
<span class="token comment">// 异步</span>
fs<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token string">'../index.html'</span><span class="token punctuation">,</span> <span class="token string">'./index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 同步</span>
fs<span class="token punctuation">.</span><span class="token function">copyFileSync</span><span class="token punctuation">(</span><span class="token string">'../index.html'</span><span class="token punctuation">,</span> <span class="token string">'./index.html'</span><span class="token punctuation">)</span>


</code></pre> 
<h5><a id="fsstat_143"></a>fs.stat</h5> 
<pre><code class="prism language-javascript">
<span class="token comment">// fs.stat</span>
fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b32cd3cbd8826fcf6d64cdcd5eddda89/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Lostash同步Mysql数据到ElasticSearch（二）logstash脚本配置和常见坑点</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1185eed61a92be8e7947187d95d7e519/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">css主题切换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>