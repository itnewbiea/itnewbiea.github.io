<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux救援模式应该这样玩（包含重置CentOS 7和8的密码） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux救援模式应该这样玩（包含重置CentOS 7和8的密码）" />
<meta property="og:description" content="🎹 个人简介：大家好，我是 金鱼哥，CSDN运维领域新星创作者，华为云·云享专家，阿里云社区·专家博主
📚个人资质：CCNA、HCNP、CSNA（网络分析师），软考初级、中级网络工程师、RHCSA、RHCE、RHCA、RHCI、ITIL😜
💬格言：努力不一定成功，但要想成功就必须努力🔥
🎈支持我：可点赞👍、可收藏⭐️、可留言📝
救援模式是需要学习的一个重点地方🔑。为啥？因为如果连重置密码都不会操作，那就准备好包袱💼，寻求好下一家公司安顿自己吧🤦‍♂️😂。在7与8的系统中，重置密码的大体操作都一样。本文2种方法都会包含。
文章目录 📜21.1 重置root密码📑CentOS 7的处理方法🔖1.重启主机或者启动系统🔖2.合适位置输入`rd.break`🔖3.`ctrl&#43;x`进入紧急模式🔖4.重新挂载根🔖5.切换根🔖6.修改密码🔖7.重打标签并退出重启 📑CentOS 8的处理方法🔖1.重启主机或者启动系统🔖2.合适位置输入`rd.break`🔖3.`ctrl&#43;x`进入紧急模式🔖4.重新挂载根🔖5.切换根🔖6.修改密码🔖7.重打标签并退出重启 📜21.2 选择错误启动目标导致系统无法正常运行📑处理方法 📜21.3 文件系统问题 💡总结 首先，介绍一下如何重置密码，必须掌握的技能，这还是 RHCSA认证必考内容。
📜21.1 重置root密码 📑CentOS 7的处理方法 🔖1.重启主机或者启动系统 重启主机，进入内核选择界面的时候，按任意键停止倒数（除ENTER，我一般习惯按上下按键），之后按e
🔖2.合适位置输入rd.break 在linux16开头的行的结尾输入rd.break
🔖3.ctrl&#43;x进入紧急模式 修改完后按ctrl&#43;x进入紧急模式：
🔖4.重新挂载根 现在的根为只读状态，需要挂载为读写状态以便进行修改
mount -o remount,rw /sysroot 🔖5.切换根 使用chroot命令用来将指定的路径换为根目录进入到sh-4.2，即为你真正的系统
# chroot命令用来将指定的路径换为根目录 chroot /sysroot # 如果你装了中文系统，建议输入以下命令切换为英文语言环境 LANG=en_US.UTF-8 🔖6.修改密码 需要输入两次密码进行确认
结尾看到successfully即为修改成功
# 修改密码 passwd root # 也可以用明文的形式进行修改 echo &#34;password&#34; | passwd --stdin root 🔖7.重打标签并退出重启 如果系统的 selinux 开启着，则需要执行命令： touch /.autorelabel 以更新系统信息
否则重启之后密码修改不会生效， 先退出当前根， reboot 重启系统" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/dc1a062e50703b13d4a20ee7f645f4d6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-22T17:57:25+08:00" />
<meta property="article:modified_time" content="2022-09-22T17:57:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux救援模式应该这样玩（包含重置CentOS 7和8的密码）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>🎹 个人简介：大家好，我是 <strong>金鱼哥，CSDN运维领域新星创作者，华为云·云享专家，阿里云社区·专家博主</strong><br> 📚个人资质：<strong>CCNA、HCNP、CSNA（网络分析师），软考初级、中级网络工程师、RHCSA、RHCE、RHCA、RHCI、ITIL</strong>😜<br> 💬格言：努力不一定成功，但要想成功就必须努力🔥</p> 
 <p>🎈支持我：可点赞👍、可收藏⭐️、可留言📝</p> 
</blockquote> 
<hr> 
<p>救援模式是需要学习的一个重点地方🔑。为啥？因为如果连重置密码都不会操作，那就准备好包袱💼，寻求好下一家公司安顿自己吧🤦‍♂️😂。在7与8的系统中，重置密码的大体操作都一样。本文2种方法都会包含。</p> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#211_root_16" rel="nofollow">📜21.1 重置root密码</a></li><li><ul><li><a href="#CentOS_7_18" rel="nofollow">📑CentOS 7的处理方法</a></li><li><ul><li><a href="#1_20" rel="nofollow">🔖1.重启主机或者启动系统</a></li><li><a href="#2rdbreak_26" rel="nofollow">🔖2.合适位置输入`rd.break`</a></li><li><a href="#3ctrlx_32" rel="nofollow">🔖3.`ctrl+x`进入紧急模式</a></li><li><a href="#4_38" rel="nofollow">🔖4.重新挂载根</a></li><li><a href="#5_48" rel="nofollow">🔖5.切换根</a></li><li><a href="#6_61" rel="nofollow">🔖6.修改密码</a></li><li><a href="#7_76" rel="nofollow">🔖7.重打标签并退出重启</a></li></ul> 
     </li><li><a href="#CentOS_8_95" rel="nofollow">📑CentOS 8的处理方法</a></li><li><ul><li><a href="#1_97" rel="nofollow">🔖1.重启主机或者启动系统</a></li><li><a href="#2rdbreak_103" rel="nofollow">🔖2.合适位置输入`rd.break`</a></li><li><a href="#3ctrlx_113" rel="nofollow">🔖3.`ctrl+x`进入紧急模式</a></li><li><a href="#4_119" rel="nofollow">🔖4.重新挂载根</a></li><li><a href="#5_133" rel="nofollow">🔖5.切换根</a></li><li><a href="#6_146" rel="nofollow">🔖6.修改密码</a></li><li><a href="#7_161" rel="nofollow">🔖7.重打标签并退出重启</a></li></ul> 
    </li></ul> 
    </li><li><a href="#212__177" rel="nofollow">📜21.2 选择错误启动目标导致系统无法正常运行</a></li><li><ul><li><a href="#_184" rel="nofollow">📑处理方法</a></li></ul> 
    </li><li><a href="#213__201" rel="nofollow">📜21.3 文件系统问题</a></li></ul> 
   </li><li><a href="#_213" rel="nofollow">💡总结</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<blockquote> 
 <p>首先，介绍一下如何重置密码，必须掌握的技能，这还是 RHCSA认证必考内容。</p> 
</blockquote> 
<h4><a id="211_root_16"></a>📜21.1 重置root密码</h4> 
<h5><a id="CentOS_7_18"></a>📑CentOS 7的处理方法</h5> 
<h6><a id="1_20"></a>🔖1.重启主机或者启动系统</h6> 
<p>重启主机，进入内核选择界面的时候，按任意键停止倒数（除ENTER，我一般习惯按上下按键），之后按e<br> <img src="https://images2.imgbox.com/46/12/1ZkWWZ1W_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="2rdbreak_26"></a>🔖2.合适位置输入<code>rd.break</code></h6> 
<p>在linux16开头的行的结尾输入rd.break<br> <img src="https://images2.imgbox.com/7b/24/dQ07NETA_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="3ctrlx_32"></a>🔖3.<code>ctrl+x</code>进入紧急模式</h6> 
<p>修改完后按<code>ctrl+x</code>进入紧急模式：<br> <img src="https://images2.imgbox.com/16/5a/CubyDZLa_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="4_38"></a>🔖4.重新挂载根</h6> 
<p>现在的根为只读状态，需要挂载为读写状态以便进行修改</p> 
<pre><code class="prism language-shell"><span class="token function">mount</span> -o remount,rw /sysroot
</code></pre> 
<p><img src="https://images2.imgbox.com/a7/7e/njdav9d9_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="5_48"></a>🔖5.切换根</h6> 
<p>使用<code>chroot</code>命令用来将指定的路径换为根目录进入到<code>sh-4.2</code>，即为你真正的系统</p> 
<pre><code class="prism language-shell"><span class="token comment"># chroot命令用来将指定的路径换为根目录</span>
<span class="token function">chroot</span> /sysroot
<span class="token comment"># 如果你装了中文系统，建议输入以下命令切换为英文语言环境</span>
<span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>en_US.UTF-8
</code></pre> 
<p><img src="https://images2.imgbox.com/be/17/6KM1d2lX_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="6_61"></a>🔖6.修改密码</h6> 
<p>需要输入两次密码进行确认</p> 
<p>结尾看到successfully即为修改成功</p> 
<pre><code class="prism language-shell"><span class="token comment"># 修改密码</span>
<span class="token function">passwd</span> root
<span class="token comment"># 也可以用明文的形式进行修改</span>
<span class="token builtin class-name">echo</span> <span class="token string">"password"</span> <span class="token operator">|</span> <span class="token function">passwd</span> --stdin root
</code></pre> 
<p><img src="https://images2.imgbox.com/7d/c4/L0x9wYBO_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="7_76"></a>🔖7.重打标签并退出重启</h6> 
<p>如果系统的 selinux 开启着，则需要执行命令： <code>touch /.autorelabel</code> 以更新系统信息</p> 
<p>否则重启之后密码修改不会生效， 先退出当前根， reboot 重启系统</p> 
<pre><code class="prism language-shell"><span class="token function">touch</span> /.autorelabel
Ctrl+d/exit
Ctrl+d/exit
</code></pre> 
<p><img src="https://images2.imgbox.com/32/c6/vESRr82a_o.png" alt="在这里插入图片描述"></p> 
<p><strong>注意</strong>：开启 selinux 的情况下需要创建此文件， 因为在 rd.break 环境下 SELinux 是不生效的。在不生效的情况下我们修改了用户的密码，也就是修改了/etc/shadow 文件，所以密码文件的安全上下文的特性会被取消。如果没有让系统在启动时自动恢复 SELinux 的安全上下文，系统会报错“无法登录”，所以 SELinux 在 Enforcing 模式下的时候（如在 disabled 模式下则不用），在根目录下touch 隐藏文件 autorelabel 会让系统在重启时以 SELinux 默认类型重新写入 SELinux 安全上下文。</p> 
<p>在8的系统一样的机制，因此，在不明确的情况，都执行一下<code>touch /.autorelabel</code>最为稳妥。</p> 
<hr> 
<h5><a id="CentOS_8_95"></a>📑CentOS 8的处理方法</h5> 
<h6><a id="1_97"></a>🔖1.重启主机或者启动系统</h6> 
<p>重启主机，进入内核选择界面的时候，按任意键停止倒数（除ENTER，我一般习惯按上下按键），之后按e<br> <img src="https://images2.imgbox.com/d0/f8/FPBffJLq_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="2rdbreak_103"></a>🔖2.合适位置输入<code>rd.break</code></h6> 
<p>找到linux那行从末尾一直删除到ro (也可不删除)</p> 
<p>将 <code>ro</code> 改成 <code>rw</code> 再输入 <code>rd.break</code></p> 
<p>下图示例是在linux开头的那一行结尾加上<code>rd. break</code>，并修改读写模式引导系统（默认是ro只读）来玩。<br> <img src="https://images2.imgbox.com/eb/66/LpiB7jyR_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="3ctrlx_113"></a>🔖3.<code>ctrl+x</code>进入紧急模式</h6> 
<p>修改完后按<code>ctrl+x</code>进入紧急模式：<br> <img src="https://images2.imgbox.com/83/b8/mot7hWn3_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="4_119"></a>🔖4.重新挂载根</h6> 
<p>首先，可以mount查看系统根挂载情况：<br> <img src="https://images2.imgbox.com/d5/a0/hrvqgJQg_o.png" alt="在这里插入图片描述"></p> 
<p>如果是只读，则需要重新挂载（所以第2步修改<code>rw</code>就是为此而准备的）</p> 
<pre><code class="prism language-shell"><span class="token function">mount</span> -o remount,rw /sysroot
</code></pre> 
<p><img src="https://images2.imgbox.com/46/a7/FFaF8OtU_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="5_133"></a>🔖5.切换根</h6> 
<p>使用<code>chroot</code>命令用来将指定的路径换为根目录进入到<code>sh-4.2</code>，即为你真正的系统</p> 
<pre><code class="prism language-shell"><span class="token comment"># chroot命令用来将指定的路径换为根目录</span>
<span class="token function">chroot</span> /sysroot
<span class="token comment"># 如果你装了中文系统，建议输入以下命令切换为英文语言环境</span>
<span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>en_US.UTF-8
</code></pre> 
<p><img src="https://images2.imgbox.com/1d/48/DM8qUULJ_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="6_146"></a>🔖6.修改密码</h6> 
<p>从这里开始，操作和 7 的系统一样了。</p> 
<p>需要输入两次密码进行确认，结尾看到successfully即为修改成功</p> 
<pre><code class="prism language-shell"><span class="token comment"># 修改密码</span>
<span class="token function">passwd</span> root
<span class="token comment"># 也可以用明文的形式进行修改</span>
<span class="token builtin class-name">echo</span> <span class="token string">"password"</span> <span class="token operator">|</span> <span class="token function">passwd</span> --stdin root
</code></pre> 
<p><img src="https://images2.imgbox.com/b2/54/lOQGHBDP_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="7_161"></a>🔖7.重打标签并退出重启</h6> 
<p>如果系统的 selinux 开启着，则需要执行命令： <code>touch /.autorelabel</code> 以更新系统信息</p> 
<p>否则重启之后密码修改不会生效， 先退出当前根， reboot 重启系统</p> 
<pre><code class="prism language-shell"><span class="token function">touch</span> /.autorelabel
Ctrl+d/exit
Ctrl+d/exit
</code></pre> 
<p><img src="https://images2.imgbox.com/6b/7d/rG5sR1UI_o.png" alt="在这里插入图片描述"><br> 打标签注意说明和 7 一致。可参考 7 的说明。</p> 
<hr> 
<h4><a id="212__177"></a>📜21.2 选择错误启动目标导致系统无法正常运行</h4> 
<pre><code class="prism language-shell"><span class="token comment"># 有小伙伴手多设置了如下配置，那当你的机器一旦重启，就会发现进不到系统，一直循环重启。</span>
systemctl set-default reboot.target
</code></pre> 
<h5><a id="_184"></a>📑处理方法</h5> 
<p>重复上述操作到 <strong>chroot /sysroot</strong>的步骤：<br> <img src="https://images2.imgbox.com/e7/c4/EGbTv2fo_o.png" alt="在这里插入图片描述"></p> 
<p>将启动模式改回来，就OK了。执行如下操作：</p> 
<pre><code class="prism language-sh">systemctl set-default mulit-user.target
Ctrl+d
Ctrl+d
#恢复成默认命令行启动
</code></pre> 
<hr> 
<h4><a id="213__201"></a>📜21.3 文件系统问题</h4> 
<p><code>/etc/fstab</code> 中的错误和损坏的文件系统可能会阻止系统启动。在大多情况下，systemd会降低至需要提供root密码的紧急修复shell</p> 
<p><img src="https://images2.imgbox.com/73/d3/8J01Rlvd_o.png" alt="在这里插入图片描述"></p> 
<p>往往很多初学的同学编写了不符合规定的条目，导致不能自动挂载而不能进入系统。</p> 
<p>因此编写的时候一定十分注意，尤其在生产环境的系统下。</p> 
<hr> 
<h3><a id="_213"></a>💡总结</h3> 
<p>重置密码是学习linux系统必须掌握的技能，无论怎样，都必须好好去掌握，按着本教程，一定能学会的🤪。</p> 
<p>RHCSA认证作为基础认证，涉及的基础内容需要大家好好进行学习并巩固。有良好的基础才能更上一层楼。<br> 好好加油，可以噶🤪。<br> <img src="https://images2.imgbox.com/7d/5f/As8o9sKT_o.png" alt=""></p> 
<p>以上就是【金鱼哥】对 <strong>第二十一章 救援模式</strong> 的简述和讲解。希望能对看到此文章的小伙伴有所帮助。</p> 
<blockquote> 
 <p>💾<strong>红帽认证</strong>专栏系列：<br> RHCSA专栏：<a href="https://blog.csdn.net/qq_41765918/category_11687066.html">戏说 RHCSA 认证</a><br> RHCE专栏：<a href="https://blog.csdn.net/qq_41765918/category_11687098.html">戏说 RHCE 认证</a><br> 此文章收录在RHCA专栏：<a href="https://blog.csdn.net/qq_41765918/category_11532281.html">RHCA 回忆录</a></p> 
</blockquote> 
<p>如果这篇【文章】有帮助到你，希望可以给【金鱼哥】点个赞👍，创作不易，相比官方的陈述，我更喜欢用【通俗易懂】的文笔去讲解每一个知识点。</p> 
<p>如果有对【运维技术】感兴趣，也欢迎关注❤️❤️❤️ 【金鱼哥】❤️❤️❤️，我将会给你带来巨大的【收获与惊喜】💕💕！</p> 
<p><img src="https://images2.imgbox.com/7e/f3/LADIJ79l_o.png" alt=""></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ecfe431e20e8ae054504c95071bdd9c6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">matlab调用c&#43;&#43;程序的一种实现：使用Mex函数--编译过程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/deb941d3ffaf541385f231963e50cf2a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AJAX 识XMLHttpRequest与发送AJAX请求与ajax提交数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>