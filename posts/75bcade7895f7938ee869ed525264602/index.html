<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STC89C51学习记录-利用串口传送数据控制LED的点亮。 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STC89C51学习记录-利用串口传送数据控制LED的点亮。" />
<meta property="og:description" content="首先编写串口的初始化函数。
void UsartInit() { SM0=0; SM1=1;	//采用模式1 REN=1;	//让串口中断使能 TMOD|=0X20;	//设置计数器的工作方式 PCON|=0x80;	//最高位置1表示波特率加倍 TH1=0xf3; TL1=0xf3;	//设置波特率为4800 ES=1;	//接收串口中断 EA=1;	//开启总中断 TR1=1;	//开启计数器1的中断 } 关于LED的点亮函数，单独编写，根据发送的数值选择点亮的灯。
void LED(u8 num) { if(num == 0x01) { led1=0; } else if(num == 0x02) { led2=0; } else if(num == 0x03) { led3=0; } else if(num == 0x04) { led4=0; } else if(num == 0x05) { led5=0; } else if(num == 0x06) { led6=0; } else if(num == 0x07) { led7=0; } else if(num == 0x08) { led8=0; } else if(num == 0x00) { P2=0xff; } } 程序思路很简单，就看代码吧。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/75bcade7895f7938ee869ed525264602/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-12T00:35:36+08:00" />
<meta property="article:modified_time" content="2020-01-12T00:35:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STC89C51学习记录-利用串口传送数据控制LED的点亮。</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p style="margin-left:0px;"><span style="color:#000000;">首先编写串口的初始化函数。</span></p> 
</blockquote> 
<pre class="has"><code class="language-cpp">void UsartInit()
{
    SM0=0;
    SM1=1;						//采用模式1
    REN=1;						//让串口中断使能
    TMOD|=0X20;				//设置计数器的工作方式
    PCON|=0x80;				//最高位置1表示波特率加倍
    TH1=0xf3;
    TL1=0xf3;					//设置波特率为4800
    ES=1;							//接收串口中断
    EA=1;							//开启总中断
    TR1=1;						//开启计数器1的中断
}</code></pre> 
<blockquote> 
 <p style="margin-left:0px;"><span style="color:#000000;">关于LED的点亮函数，单独编写，根据发送的数值选择点亮的灯。</span></p> 
</blockquote> 
<pre class="has"><code class="language-cpp">void LED(u8 num)
{
    if(num == 0x01)
    {
        led1=0;
    }
    else if(num == 0x02)
    {
        led2=0;
    }
    else if(num == 0x03)
    {
        led3=0;
    }
    else if(num == 0x04)
    {
        led4=0;
    }
    else if(num == 0x05)
    {
        led5=0;
    }
    else if(num == 0x06)
    {
        led6=0;
    }
    else if(num == 0x07)
    {
        led7=0;
    }
    else if(num == 0x08)
    {
        led8=0;
    }
    else if(num == 0x00)
    {
        P2=0xff;
    }
}</code></pre> 
<blockquote> 
 <p style="margin-left:0px;"><span style="color:#000000;">程序思路很简单，就看代码吧。</span></p> 
</blockquote> 
<pre class="has"><code class="language-cpp">
#include "reg52.h"

//时间：2020-1-12
//制作者：SaBo
//适用：普中科技51单片机开发板（HC6800-ES V2.0 新版）

/*********************************************
	使用串口实现指令控制单片机的LED灯的亮起和熄灭
	（hex显示和hex发送）
	输入0x - 第x个灯亮起  （x的取值从1~8）
	输入00 - 所有灯都会熄灭
*********************************************/


sbit led1=P2^0;
sbit led2=P2^1;
sbit led3=P2^2;
sbit led4=P2^3;
sbit led5=P2^4;
sbit led6=P2^5;
sbit led7=P2^6;
sbit led8=P2^7;


typedef unsigned char u8;


void UsartInit()
{
    SM0=0;
    SM1=1;						//采用模式1
    REN=1;						//让串口中断使能
    TMOD|=0X20;				//设置计数器的工作方式
    PCON=0x80;				//最高位置1表示波特率加倍
    TH1=0xf3;
    TL1=0xf3;					//设置波特率为4800
    ES=1;							//接收串口中断
    EA=1;							//开启总中断
    TR1=1;						//开启计数器1的中断
}

//---------------------------------------
//名称：主函数
//适用：普中科技51单片机开发板（HC6800-ES V2.0 新版）
//日期：2020-1-12
//---------------------------------------

void main()
{
    UsartInit();
    while(1)
    {
			
    };

}
//---------------------------------------
//名称：LED显示函数
//适用：普中科技51单片机开发板（HC6800-ES V2.0 新版）
//功能：根据不同的值点亮不同的LED灯
//日期：2020-1-12
//---------------------------------------

void LED(u8 num)
{
    if(num == 0x01)
    {
        led1=0;
    }
    else if(num == 0x02)
    {
        led2=0;
    }
    else if(num == 0x03)
    {
        led3=0;
    }
    else if(num == 0x04)
    {
        led4=0;
    }
    else if(num == 0x05)
    {
        led5=0;
    }
    else if(num == 0x06)
    {
        led6=0;
    }
    else if(num == 0x07)
    {
        led7=0;
    }
    else if(num == 0x08)
    {
        led8=0;
    }
    else if(num == 0x00)
    {
        P2=0xff;
    }
}

//---------------------------------------
//名称：串口中断服务函数
//适用：普中科技51单片机开发板（HC6800-ES V2.0 新版）
//日期：2020-1-12
//---------------------------------------

void UsartService() interrupt 4
{
    u8 receiveData;
    receiveData=SBUF;
    RI=0;									//清除接受中断标志位
    SBUF=receiveData;
    LED(receiveData);
    while(!TI);						//等待数据发送完成（发送完成会将TI置为1）
    TI=0;									//发送完成
}
</code></pre> 
<p> </p> 
<p>2020-1-14终于传上来了~~~~</p> 
<p><img alt="" class="has" height="639" src="https://images2.imgbox.com/1d/bf/E2nn969f_o.png" width="797"></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ddd3e766739e3990d20b81970e4b8aec/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">利用BP神经网络进行函数拟合</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ecd339cfe3f64a38f5bb08a7bd778c63/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">datetime时间格式化中间为什么有个T</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>