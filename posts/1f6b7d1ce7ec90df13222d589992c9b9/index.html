<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LLDP 协议 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LLDP 协议" />
<meta property="og:description" content="1.什么是LLDP LLDP（Link Layer Discovery Protocol，链路层发现协议）.它可以将本端的设备管理的地址 设备标识 接口标识等构成不同的TLV(Type/Length/Value，类型/长度/值)将其封装在LLDPDU（Link Layer Discovery Protocol Data Unit，链路层发现协议数据单元）中发给与自己直连的邻居，邻居收到这些信息后将其以标准MIB（Management Information Base，管理信息库）的形式保存起来，以供网络管理系统查询及判断链路的通信状况。
2. switch LLDP的四种工作模式 TxRx ：既发送也接收LLDPDU
Tx ：只发送不接收LLDPDU
Rx ：只接收不发送LLDPDU
Disable：既不发送也不接收LLDPDU
3. LLDP的报文格式（两种） Destination MAC address目的 MAC 地址，为固定的组播 MAC 地址 0x0180-C200-000ESource MAC address源 MAC 地址，为端口 MAC 地址或设备桥 MAC 地址（如果有端口地址则使用端口 MAC 地址，否则使用设备桥 MAC 地址）Type0x88CC（EthernetII） or 0xAAAA-0300-0000-88CC(SNAP)LLDPDULLDP数据是一组TLV,每个TLV都代表一个信息FCS（Frame Check Sequence） 帧校验序列。
4. LLDPDU 组成LLDPDU之前，设备先将本地信息封装成TLV（Type-Length-Value）格式，再由若干个TLV组合成一个LLDPDU封装在LLDP报文的数据部分进行传送。
LLDP协议规定每个LLDPDU共可携带28种TLV，且每个LLDPDU固定以Chassis ID
TLV、Port ID TLV和Time to Live TLV开始，以End of LLDPDU TLV为结束，这四个
TLV为必选的TLV，其他则为可选TLV.
5. TLV TLV是组成LLDPDU的最小单元，表示一个对象的类型、长度和信息。每个TLV代表设" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1f6b7d1ce7ec90df13222d589992c9b9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-26T19:56:32+08:00" />
<meta property="article:modified_time" content="2023-06-26T19:56:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LLDP 协议</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1.什么是LLDP</h2> 
<p>  LLDP（Link Layer Discovery Protocol，<span style="background-color:#ffd900;">链路层发现协议</span>）.它可以将本端的设备管理的地址 设备标识 接口标识等构成不同的<span style="background-color:#ffd900;">TLV(Type/Length/Value，类型/长度/值)</span>将其封装在LLDPDU（Link Layer Discovery Protocol Data Unit，链路层发现协议数据单元）中发给与自己直连的邻居，邻居收到这些信息后将其以标准MIB（Management Information Base，管理信息库）的形式保存起来，以供网络管理系统查询及判断链路的通信状况。</p> 
<p></p> 
<h2>2. switch LLDP的四种工作模式</h2> 
<p>TxRx   ：既发送也接收LLDPDU<br> Tx       ：只发送不接收LLDPDU<br> Rx       ：只接收不发送LLDPDU<br> Disable：既不发送也不接收LLDPDU</p> 
<h2>3. LLDP的报文格式（两种）</h2> 
<p><img alt="" height="321" src="https://images2.imgbox.com/59/44/98Dxyr1m_o.png" width="673"></p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:650px;"><tbody><tr><td><strong>Destination MAC address</strong></td><td>目的 MAC 地址，为固定的组播 MAC 地址 0x0180-C200-000E</td></tr><tr><td><strong>Source MAC address</strong></td><td>源 MAC 地址，为端口 MAC 地址或设备桥 MAC 地址（如果有端口地址则使用端口 MAC 地址，否则使用设备桥 MAC 地址）</td></tr><tr><td><strong>Type</strong></td><td>0x88CC（EthernetII） or 0xAAAA-0300-0000-88CC(SNAP)</td></tr><tr><td><strong>LLDPDU</strong></td><td>LLDP数据是一组TLV,每个<span style="background-color:#ffd900;">TLV</span>都代表一个信息</td></tr><tr><td><strong>FCS（Frame Check Sequence）</strong></td><td> <p>帧校验序列。</p> </td></tr></tbody></table> 
<h2>4. LLDPDU</h2> 
<p>  组成LLDPDU之前，设备先将本地信息封装成TLV（Type-Length-Value）格式，再由若干个TLV组合成一个LLDPDU封装在LLDP报文的数据部分进行传送。</p> 
<p><img alt="" height="83" src="https://images2.imgbox.com/e6/2d/dYPSWPwn_o.png" width="506"></p> 
<p> LLDP协议规定每个LLDPDU共<span style="background-color:#ffd900;">可携带28种TLV</span>，且每个LLDPDU<span style="background-color:#ffd900;">固定以Chassis ID</span><br><span style="background-color:#ffd900;">TLV、Port ID TLV和Time to Live TLV开始</span>，以End of LLDPDU TLV为结束，这四个<br> TLV为必选的TLV，其他则为可选TLV.</p> 
<p></p> 
<h2>5. TLV</h2> 
<p>  TLV是组成LLDPDU的最小单元，表示一个对象的类型、长度和信息。每个TLV代表设<br> 备的一种信息，例如设备ID、接口ID、管理地址等都各自对应Chassis ID TLV、Port ID<br> TLV、Management Address TLV等固定的TLV。</p> 
<h2><img alt="" height="83" src="https://images2.imgbox.com/63/f3/O19tUzXX_o.png" width="506"></h2> 
<p><strong>Type：</strong>表示TLV的类型，它占7个bits。每个TLV的类型值不同，比如End of LLDPDU TLV的类型值为0，Chassis ID TLV的类型值为1等。<br><strong>information string length</strong>：表示TLV内容的长度，它占9个bit。<br> i<strong>nformation string</strong>：表示TLV的内容，最大支持511bytes长度的内容</p> 
<p>比如下面，还有其他TLV类型，有802.1  802.3等，参考：<a class="link-info" href="https://support.huawei.com/hedex/hdx.do?docid=EDOC1100282098&amp;id=ZH-CN_CONCEPT_0172351145" rel="nofollow" title="华为文档">华为文档</a></p> 
<p><img alt="" height="262" src="https://images2.imgbox.com/3d/52/EWKozS7M_o.png" width="693"></p> 
<h2> </h2> 
<h2>6. 工作原理</h2> 
<p>  LLDP和MIB（Management Information Base，管理信息数据库）是密不可分的。LLDP<br> 协议规定设备的每个接口上都有四个MIB库，其中最主要的两个为LLDP Local System<br> MIB（LLDP本地MIB库）和LLDP Remote System MIB（LLDP远端MIB库），分别存<br> 511 LLDP<br> 储着本端设备和邻居节点的状态信息，包括设备ID、接口ID、系统名称、系统描述、<br> 接口描述、设备能力、网络管理地址。</p> 
<p><strong>LLDP协议规定设备的每个接口上都有一个LLDP Agent，主要维护以下</strong></p> 
<p>  1.维护LLDP本地MIB的信息。<br>   2.向邻居节点发送LLDP报文，通告本端设备的状态信息。<br>   3.识别并解析收到的邻居节点发送的LLDP报文，维护LLDP远端MIB的信息。<br>   4.LLDP本地MIB或LLDP远端MIB的信息发生变化时，向NMS发送LLDP告警。</p> 
<h4>原理图：</h4> 
<p><img alt="" height="354" src="https://images2.imgbox.com/5c/b8/rcDKO72u_o.png" width="495"></p> 
<p>* LLDP模块通过与设备上的PTOPO MIB、Entity MIB、Interface MIB以及Other MIBs的交互，维护LLDP本地MIB库。<br> * LLDP Agent发送LLDP报文，把本端设备的相关信息发送给与其直连的邻居节点。<br> * 同时，LLDP Agent通过接收邻居节点发送的LLDP报文，更新本端设备的LLDP远<br> 端MIB库。</p> 
<p></p> 
<p>文章参考：<a href="https://support.huawei.com/hedex/hdx.do?docid=EDOC1100282098&amp;id=ZH-CN_CONCEPT_0172351145" rel="nofollow" title="https://support.huawei.com/hedex/hdx.do?docid=EDOC1100282098&amp;id=ZH-CN_CONCEPT_0172351145">https://support.huawei.com/hedex/hdx.do?docid=EDOC1100282098&amp;id=ZH-CN_CONCEPT_0172351145</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ea09b8df089edd77581d9f97d7bc0a9f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">js懒加载</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/14d9dc1914c28f573224b202f921d237/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">UI还不错的视频播放器：GOMPlayerPlus</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>