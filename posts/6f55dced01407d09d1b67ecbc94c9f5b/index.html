<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>842. 将数组拆分成斐波那契序列 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="842. 将数组拆分成斐波那契序列" />
<meta property="og:description" content="给定一个数字字符串 S，比如 S = &#34;123456579&#34;，我们可以将它分成斐波那契式的序列 [123, 456, 579]。
形式上，斐波那契式序列是一个非负整数列表 F，且满足：
0 &lt;= F[i] &lt;= 2^31 - 1，（也就是说，每个整数都符合 32 位有符号整数类型）；
F.length &gt;= 3；
对于所有的0 &lt;= i &lt; F.length - 2，都有 F[i] &#43; F[i&#43;1] = F[i&#43;2] 成立。
另外，请注意，将字符串拆分成小块时，每个块的数字一定不要以零开头，除非这个块是数字 0 本身。
返回从 S 拆分出来的所有斐波那契式的序列块，如果不能拆分则返回 []。
示例 1：
输入：&#34;123456579&#34;
输出：[123,456,579]
示例 2：
输入: &#34;11235813&#34;
输出: [1,1,2,3,5,8,13]
示例 3：
输入: &#34;112358130&#34;
输出: []
解释: 这项任务无法完成。
示例 4：
输入：&#34;0123&#34;
输出：[]
解释：每个块的数字不能以零开头，因此 &#34;01&#34;，&#34;2&#34;，&#34;3&#34; 不是有效答案。
示例 5：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/6f55dced01407d09d1b67ecbc94c9f5b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-10-03T22:06:00+08:00" />
<meta property="article:modified_time" content="2019-10-03T22:06:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">842. 将数组拆分成斐波那契序列</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>给定一个数字字符串 S，比如 S = "123456579"，我们可以将它分成斐波那契式的序列 [123, 456, 579]。</p> 
 <p>形式上，斐波那契式序列是一个非负整数列表 F，且满足：</p> 
 <p>0 &lt;= F[i] &lt;= 2^31 - 1，（也就是说，每个整数都符合 32 位有符号整数类型）；<br>F.length &gt;= 3；<br>对于所有的0 &lt;= i &lt; F.length - 2，都有 F[i] + F[i+1] = F[i+2] 成立。<br>另外，请注意，将字符串拆分成小块时，每个块的数字一定不要以零开头，除非这个块是数字 0 本身。</p> 
 <p>返回从 S 拆分出来的所有斐波那契式的序列块，如果不能拆分则返回 []。</p> 
 <p>示例 1：</p> 
 <p>输入："123456579"<br>输出：[123,456,579]<br>示例 2：</p> 
 <p>输入: "11235813"<br>输出: [1,1,2,3,5,8,13]<br>示例 3：</p> 
 <p>输入: "112358130"<br>输出: []<br>解释: 这项任务无法完成。<br>示例 4：</p> 
 <p>输入："0123"<br>输出：[]<br>解释：每个块的数字不能以零开头，因此 "01"，"2"，"3" 不是有效答案。<br>示例 5：</p> 
 <p>输入: "1101111"<br>输出: [110, 1, 111]<br>解释: 输出 [11,0,11,11] 也同样被接受。<br>提示：</p> 
 <p>1 &lt;= S.length &lt;= 200<br>字符串 S 中只含有数字。</p> 
 <p>来源：力扣（LeetCode）<br>链接：https://leetcode-cn.com/problems/split-array-into-fibonacci-sequence<br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p> 
 <p> </p> 
 <p>代码有点儿烂，做了好久，超过人数才5点几，真TM fuck。</p> 
 <p>下面代码耗时87ms</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#008080;"> 1</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span><span style="color:#000000;"> Solution {
</span><span style="color:#008080;"> 2</span>     <span style="color:#0000ff;">private</span><span style="color:#000000;"> String s;
</span><span style="color:#008080;"> 3</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">int</span> len = -1<span style="color:#000000;">;
</span><span style="color:#008080;"> 4</span>     <span style="color:#0000ff;">private</span> List&lt;Integer&gt;<span style="color:#000000;"> res;
</span><span style="color:#008080;"> 5</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> e1;
</span><span style="color:#008080;"> 6</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> e2;
</span><span style="color:#008080;"> 7</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> e3;
</span><span style="color:#008080;"> 8</span> 
<span style="color:#008080;"> 9</span>     <span style="color:#0000ff;">private</span> String isContinue(<span style="color:#0000ff;">int</span> m,<span style="color:#0000ff;">int</span> n,<span style="color:#0000ff;">int</span><span style="color:#000000;"> o){
</span><span style="color:#008080;">10</span>         String r = <span style="color:#0000ff;">null</span><span style="color:#000000;">;
</span><span style="color:#008080;">11</span>         String a =<span style="color:#000000;"> s.substring(m, n);
</span><span style="color:#008080;">12</span>         String b =<span style="color:#000000;"> s.substring(n, o);
</span><span style="color:#008080;">13</span>         <span style="color:#0000ff;">if</span> (a.length() &gt; 10 || b.length() &gt; 10<span style="color:#000000;">)
</span><span style="color:#008080;">14</span>             <span style="color:#0000ff;">return</span> ""<span style="color:#000000;">;
</span><span style="color:#008080;">15</span>         <span style="color:#0000ff;">long</span> a0 =<span style="color:#000000;"> Long.parseLong(a);
</span><span style="color:#008080;">16</span>         <span style="color:#0000ff;">long</span> b0 =<span style="color:#000000;"> Long.parseLong(b);
</span><span style="color:#008080;">17</span>         <span style="color:#0000ff;">if</span> (a0 &gt; 2147483647 || b0 &gt; 2147483647<span style="color:#000000;">)
</span><span style="color:#008080;">18</span>             <span style="color:#0000ff;">return</span> ""<span style="color:#000000;">;
</span><span style="color:#008080;">19</span>         e1 = (<span style="color:#0000ff;">int</span><span style="color:#000000;">)a0;
</span><span style="color:#008080;">20</span>         e2 = (<span style="color:#0000ff;">int</span><span style="color:#000000;">)b0;
</span><span style="color:#008080;">21</span>         <span style="color:#0000ff;">if</span> (a0+b0 &gt; 2147483647<span style="color:#000000;">)
</span><span style="color:#008080;">22</span>             <span style="color:#0000ff;">return</span> ""<span style="color:#000000;">;
</span><span style="color:#008080;">23</span>         e3 = (<span style="color:#0000ff;">int</span>)(a0+<span style="color:#000000;">b0);
</span><span style="color:#008080;">24</span>         String c = String.valueOf(a0 +<span style="color:#000000;"> b0);
</span><span style="color:#008080;">25</span>         <span style="color:#0000ff;">if</span> (a.charAt(0)=='0' &amp;&amp; a.length()!=1 || b.charAt(0)=='0' &amp;&amp; b.length() != 1<span style="color:#000000;">)
</span><span style="color:#008080;">26</span>             r = ""<span style="color:#000000;">;
</span><span style="color:#008080;">27</span>         <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (c.length() &gt; len-<span style="color:#000000;">o)
</span><span style="color:#008080;">28</span>             r = ""<span style="color:#000000;">;
</span><span style="color:#008080;">29</span>         <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (!s.substring(o,o+<span style="color:#000000;">c.length()).equals(c))
</span><span style="color:#008080;">30</span>             r = ""<span style="color:#000000;">;
</span><span style="color:#008080;">31</span>         <span style="color:#0000ff;">return</span> (r != <span style="color:#0000ff;">null</span>) ? ""<span style="color:#000000;"> : c;
</span><span style="color:#008080;">32</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">33</span> 
<span style="color:#008080;">34</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">boolean</span> helper(<span style="color:#0000ff;">int</span> m, <span style="color:#0000ff;">int</span> n, <span style="color:#0000ff;">int</span><span style="color:#000000;"> o){
</span><span style="color:#008080;">35</span>         <span style="color:#0000ff;">if</span> (isContinue(m,n,o).equals(""<span style="color:#000000;">)){
</span><span style="color:#008080;">36</span>             <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">37</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">38</span> 
<span style="color:#008080;">39</span>         <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> i = n; i &lt; len; i++<span style="color:#000000;">) {
</span><span style="color:#008080;">40</span>             <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> j = i+1; j &lt; len; j++<span style="color:#000000;">) {
</span><span style="color:#008080;">41</span>                 String c =<span style="color:#000000;"> isContinue(m, i, j);
</span><span style="color:#008080;">42</span>                 <span style="color:#0000ff;">if</span> (c.equals(""<span style="color:#000000;">))
</span><span style="color:#008080;">43</span>                     <span style="color:#0000ff;">continue</span><span style="color:#000000;">;
</span><span style="color:#008080;">44</span>                 <span style="color:#0000ff;">if</span> (s.substring(j,j+<span style="color:#000000;">c.length()).equals(c)){
</span><span style="color:#008080;">45</span>                     <span style="color:#0000ff;">if</span> (c.length() &gt; len-<span style="color:#000000;">j)
</span><span style="color:#008080;">46</span>                         <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">47</span> 
<span style="color:#008080;">48</span> <span style="color:#000000;">                    res.add(e1);
</span><span style="color:#008080;">49</span> 
<span style="color:#008080;">50</span>                     <span style="color:#0000ff;">if</span> (c.length() == len-<span style="color:#000000;">j) {
</span><span style="color:#008080;">51</span>                         <span style="color:#0000ff;">if</span> (e2 == e1 || res.get(res.size()-1) !=<span style="color:#000000;"> e2)
</span><span style="color:#008080;">52</span> <span style="color:#000000;">                            res.add(e2);
</span><span style="color:#008080;">53</span> <span style="color:#000000;">                        res.add(e3);
</span><span style="color:#008080;">54</span>                         <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;
</span><span style="color:#008080;">55</span> <span style="color:#000000;">                    }
</span><span style="color:#008080;">56</span>                     <span style="color:#0000ff;">if</span> (helper(i, j, j+<span style="color:#000000;">c.length()))
</span><span style="color:#008080;">57</span>                         <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;
</span><span style="color:#008080;">58</span> 
<span style="color:#008080;">59</span>                     res.remove(res.size()-1<span style="color:#000000;">);
</span><span style="color:#008080;">60</span> <span style="color:#000000;">                }
</span><span style="color:#008080;">61</span> <span style="color:#000000;">            }
</span><span style="color:#008080;">62</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">63</span>         <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">64</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">65</span>     <span style="color:#0000ff;">public</span> List&lt;Integer&gt;<span style="color:#000000;"> splitIntoFibonacci(String S) {
</span><span style="color:#008080;">66</span>         s =<span style="color:#000000;"> S;
</span><span style="color:#008080;">67</span>         len =<span style="color:#000000;"> s.length();
</span><span style="color:#008080;">68</span>         res = <span style="color:#0000ff;">new</span> ArrayList&lt;&gt;<span style="color:#000000;">();
</span><span style="color:#008080;">69</span> 
<span style="color:#008080;">70</span>         <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> i = 1; i &lt; len; i++<span style="color:#000000;">) {
</span><span style="color:#008080;">71</span>             <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> j = i+1; j &lt; len; j++<span style="color:#000000;">) {
</span><span style="color:#008080;">72</span>                 <span style="color:#0000ff;">if</span> (helper(0<span style="color:#000000;">,i,j))
</span><span style="color:#008080;">73</span>                     <span style="color:#0000ff;">return</span><span style="color:#000000;"> res;
</span><span style="color:#008080;">74</span> <span style="color:#000000;">            }
</span><span style="color:#008080;">75</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">76</span>         <span style="color:#0000ff;">return</span><span style="color:#000000;"> res;
</span><span style="color:#008080;">77</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">78</span> 
<span style="color:#008080;">79</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">static</span> <span style="color:#0000ff;">void</span><span style="color:#000000;"> main(String[] args) {
</span><span style="color:#008080;">80</span>         List&lt;Integer&gt; integers = <span style="color:#0000ff;">new</span> Solution().splitIntoFibonacci("3611537383985343591834441270352104793375145479938855071433500231900737525076071514982402115895535257195564161509167334647108949738176284385285234123461518508746752631120827113919550237703163294909"<span style="color:#000000;">);
</span><span style="color:#008080;">81</span>         System.out.println("integers = " +<span style="color:#000000;"> integers);
</span><span style="color:#008080;">82</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">83</span> }</pre> 
 </div> 
 <p> 下面代码耗时336ms。越改越差劲。。。至少提供了另一种解法。。。</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#008080;"> 1</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span><span style="color:#000000;"> Solution {
</span><span style="color:#008080;"> 2</span>     <span style="color:#0000ff;">private</span><span style="color:#000000;"> String s;
</span><span style="color:#008080;"> 3</span>     <span style="color:#0000ff;">private</span> List&lt;String&gt; res = <span style="color:#0000ff;">null</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 4</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">int</span> len = -1<span style="color:#000000;">;
</span><span style="color:#008080;"> 5</span>     <span style="color:#0000ff;">private</span><span style="color:#000000;"> String last1,last2,next;
</span><span style="color:#008080;"> 6</span> 
<span style="color:#008080;"> 7</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">boolean</span><span style="color:#000000;"> ok(String str){
</span><span style="color:#008080;"> 8</span>         <span style="color:#0000ff;">if</span> (str.length() &gt; 10 || Long.parseLong(str) &gt;<span style="color:#000000;"> Integer.MAX_VALUE)
</span><span style="color:#008080;"> 9</span>             <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">10</span>         <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;
</span><span style="color:#008080;">11</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">12</span> 
<span style="color:#008080;">13</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">boolean</span> helper(<span style="color:#0000ff;">int</span> begin, <span style="color:#0000ff;">int</span><span style="color:#000000;"> end){
</span><span style="color:#008080;">14</span>         <span style="color:#0000ff;">if</span> (res.size() &gt;= 2<span style="color:#000000;">){
</span><span style="color:#008080;">15</span>             last1 = res.get(res.size()-2<span style="color:#000000;">);
</span><span style="color:#008080;">16</span>             last2 = res.get(res.size()-1<span style="color:#000000;">);
</span><span style="color:#008080;">17</span>             next =<span style="color:#000000;"> s.substring(begin, end);
</span><span style="color:#008080;">18</span> 
<span style="color:#008080;">19</span>             <span style="color:#0000ff;">if</span> (!ok(last1) || !ok(last2) || !ok(next) || !ok(String.valueOf(Integer.parseInt(last1)+<span style="color:#000000;"> Integer.parseInt(last2))))
</span><span style="color:#008080;">20</span>                 <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">21</span>             <span style="color:#0000ff;">if</span> (Integer.parseInt(last1) + Integer.parseInt(last2) ==<span style="color:#000000;"> Integer.parseInt(next)) {
</span><span style="color:#008080;">22</span>                 <span style="color:#0000ff;">if</span> (next.charAt(0)=='0'&amp;&amp;next.length()&gt;1<span style="color:#000000;">)
</span><span style="color:#008080;">23</span>                     <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">24</span> <span style="color:#000000;">                res.add(next);
</span><span style="color:#008080;">25</span>             } <span style="color:#0000ff;">else</span><span style="color:#000000;"> {
</span><span style="color:#008080;">26</span>                 <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">27</span> <span style="color:#000000;">            }
</span><span style="color:#008080;">28</span>             <span style="color:#0000ff;">if</span> (end ==<span style="color:#000000;"> len)
</span><span style="color:#008080;">29</span>                 <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;
</span><span style="color:#008080;">30</span>         } <span style="color:#0000ff;">else</span><span style="color:#000000;"> {
</span><span style="color:#008080;">31</span>             String last =<span style="color:#000000;"> s.substring(begin, end);
</span><span style="color:#008080;">32</span>             <span style="color:#0000ff;">if</span> (last.charAt(0)=='0' &amp;&amp; last.length()&gt;1<span style="color:#000000;">)
</span><span style="color:#008080;">33</span>                 <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">34</span> <span style="color:#000000;">            res.add(last);
</span><span style="color:#008080;">35</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">36</span>         <span style="color:#008000;">//</span><span style="color:#008000;"> end不是合适的划分位置</span>
<span style="color:#008080;">37</span>         <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> i = 1; i &lt; len;++<span style="color:#000000;">i) {
</span><span style="color:#008080;">38</span>             <span style="color:#0000ff;">if</span> (end+i &gt;<span style="color:#000000;"> len)
</span><span style="color:#008080;">39</span>                 <span style="color:#0000ff;">break</span><span style="color:#000000;">;
</span><span style="color:#008080;">40</span>             <span style="color:#0000ff;">if</span> (helper(end, end+<span style="color:#000000;">i))
</span><span style="color:#008080;">41</span>                 <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;
</span><span style="color:#008080;">42</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">43</span>         res.remove(res.size()-1<span style="color:#000000;">);
</span><span style="color:#008080;">44</span>         <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">45</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">46</span> 
<span style="color:#008080;">47</span>     <span style="color:#0000ff;">public</span> List&lt;Integer&gt;<span style="color:#000000;"> splitIntoFibonacci(String S) {
</span><span style="color:#008080;">48</span>         s =<span style="color:#000000;"> S;
</span><span style="color:#008080;">49</span>         res = <span style="color:#0000ff;">new</span> ArrayList&lt;&gt;<span style="color:#000000;">();
</span><span style="color:#008080;">50</span>         len =<span style="color:#000000;"> s.length();
</span><span style="color:#008080;">51</span>         <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> i = 1; i &lt; len; i++<span style="color:#000000;">) {
</span><span style="color:#008080;">52</span>             <span style="color:#0000ff;">if</span> (helper(0<span style="color:#000000;">,i))
</span><span style="color:#008080;">53</span>                 <span style="color:#0000ff;">break</span><span style="color:#000000;">;
</span><span style="color:#008080;">54</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">55</span>         List&lt;Integer&gt; r = <span style="color:#0000ff;">new</span> ArrayList&lt;&gt;<span style="color:#000000;">();
</span><span style="color:#008080;">56</span>         <span style="color:#0000ff;">for</span><span style="color:#000000;"> (String s : res) {
</span><span style="color:#008080;">57</span> <span style="color:#000000;">            r.add(Integer.parseInt(s));
</span><span style="color:#008080;">58</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">59</span>         <span style="color:#0000ff;">return</span><span style="color:#000000;"> r;
</span><span style="color:#008080;">60</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">61</span> 
<span style="color:#008080;">62</span> 
<span style="color:#008080;">63</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">static</span> <span style="color:#0000ff;">void</span><span style="color:#000000;"> main(String[] args) {
</span><span style="color:#008080;">64</span>         List&lt;Integer&gt; integers = <span style="color:#0000ff;">new</span> Solution().splitIntoFibonacci("112358130"<span style="color:#000000;">);
</span><span style="color:#008080;">65</span>         System.out.println("integers = " +<span style="color:#000000;"> integers);
</span><span style="color:#008080;">66</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">67</span> }</pre> 
 </div> 
 <p> 终于找到原因了，string.substring()是一个很耗时的操作，把每一个字符串转化整数后，存储起来供后续使用，能极大提高效率。。。下面代码大约15-35ms之间。</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#008080;"> 1</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span><span style="color:#000000;"> Solution {
</span><span style="color:#008080;"> 2</span>     <span style="color:#0000ff;">private</span><span style="color:#000000;"> String s;
</span><span style="color:#008080;"> 3</span>     <span style="color:#0000ff;">private</span> List&lt;Integer&gt; res = <span style="color:#0000ff;">null</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 4</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">int</span> len = -1<span style="color:#000000;">;
</span><span style="color:#008080;"> 5</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> last1,last2;
</span><span style="color:#008080;"> 6</span>     <span style="color:#0000ff;">private</span><span style="color:#000000;"> String next;
</span><span style="color:#008080;"> 7</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">long</span>[][] memory = <span style="color:#0000ff;">null</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 8</span> 
<span style="color:#008080;"> 9</span>     <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">boolean</span> helper(<span style="color:#0000ff;">int</span> begin, <span style="color:#0000ff;">int</span><span style="color:#000000;"> end){
</span><span style="color:#008080;">10</span>         <span style="color:#0000ff;">if</span> (res.size() &gt;= 2<span style="color:#000000;">){
</span><span style="color:#008080;">11</span>             last1 = res.get(res.size()-2<span style="color:#000000;">);
</span><span style="color:#008080;">12</span>             last2 = res.get(res.size()-1<span style="color:#000000;">);
</span><span style="color:#008080;">13</span>             next =<span style="color:#000000;"> s.substring(begin, end);
</span><span style="color:#008080;">14</span>             <span style="color:#0000ff;">if</span> (next.length() &lt;= 10 &amp;&amp; memory[begin][end] == 0<span style="color:#000000;">)
</span><span style="color:#008080;">15</span>                 memory[begin][end] =<span style="color:#000000;"> Long.parseLong(next);
</span><span style="color:#008080;">16</span>             <span style="color:#0000ff;">if</span> (next.charAt(0)=='0'&amp;&amp;next.length()&gt;1 || next.length() &gt; 10 || memory[begin][end] &gt;<span style="color:#000000;"> Integer.MAX_VALUE)
</span><span style="color:#008080;">17</span>                 <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">18</span> 
<span style="color:#008080;">19</span>             <span style="color:#0000ff;">if</span> (last1 + last2 == memory[begin][end]) { <span style="color:#008000;">//</span><span style="color:#008000;"> memory[begin][end]存储的就是next</span>
<span style="color:#008080;">20</span>                 res.add((<span style="color:#0000ff;">int</span><span style="color:#000000;">)memory[begin][end]);
</span><span style="color:#008080;">21</span>             } <span style="color:#0000ff;">else</span><span style="color:#000000;"> {
</span><span style="color:#008080;">22</span>                 <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">23</span> <span style="color:#000000;">            }
</span><span style="color:#008080;">24</span>             <span style="color:#0000ff;">if</span> (end ==<span style="color:#000000;"> len)
</span><span style="color:#008080;">25</span>                 <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;
</span><span style="color:#008080;">26</span>         } <span style="color:#0000ff;">else</span><span style="color:#000000;"> {
</span><span style="color:#008080;">27</span>             <span style="color:#0000ff;">if</span> (memory[begin][end] == 0<span style="color:#000000;">) {
</span><span style="color:#008080;">28</span>                 String last =<span style="color:#000000;"> s.substring(begin, end);
</span><span style="color:#008080;">29</span>                 <span style="color:#0000ff;">if</span> (last.length() &gt; 10 || memory[begin][end] &gt;<span style="color:#000000;"> Integer.MAX_VALUE)
</span><span style="color:#008080;">30</span>                     <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">31</span>                 memory[begin][end] =<span style="color:#000000;"> Long.parseLong(last);
</span><span style="color:#008080;">32</span>                 <span style="color:#0000ff;">if</span> (last.charAt(0)=='0' &amp;&amp; last.length()&gt;1<span style="color:#000000;">)
</span><span style="color:#008080;">33</span>                     <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">34</span> <span style="color:#000000;">            }
</span><span style="color:#008080;">35</span>             res.add((<span style="color:#0000ff;">int</span><span style="color:#000000;">)memory[begin][end]);
</span><span style="color:#008080;">36</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">37</span>         <span style="color:#008000;">//</span><span style="color:#008000;"> end不是合适的划分位置</span>
<span style="color:#008080;">38</span>         <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> i = 1; i &lt; len;++<span style="color:#000000;">i) {
</span><span style="color:#008080;">39</span>             <span style="color:#0000ff;">if</span> (end+i &gt;<span style="color:#000000;"> len)
</span><span style="color:#008080;">40</span>                 <span style="color:#0000ff;">break</span><span style="color:#000000;">;
</span><span style="color:#008080;">41</span> 
<span style="color:#008080;">42</span>             <span style="color:#0000ff;">if</span> (helper(end, end+<span style="color:#000000;">i))
</span><span style="color:#008080;">43</span>                 <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;
</span><span style="color:#008080;">44</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">45</span>         res.remove(res.size()-1<span style="color:#000000;">);
</span><span style="color:#008080;">46</span>         <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">47</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">48</span> 
<span style="color:#008080;">49</span>     <span style="color:#0000ff;">public</span> List&lt;Integer&gt;<span style="color:#000000;"> splitIntoFibonacci(String S) {
</span><span style="color:#008080;">50</span>         s =<span style="color:#000000;"> S;
</span><span style="color:#008080;">51</span>         res = <span style="color:#0000ff;">new</span> ArrayList&lt;&gt;<span style="color:#000000;">();
</span><span style="color:#008080;">52</span>         len =<span style="color:#000000;"> s.length();
</span><span style="color:#008080;">53</span>         memory = <span style="color:#0000ff;">new</span> <span style="color:#0000ff;">long</span>[len+1][len+1<span style="color:#000000;">];
</span><span style="color:#008080;">54</span>         <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> i = 1; i &lt; len; i++<span style="color:#000000;">) {
</span><span style="color:#008080;">55</span>             <span style="color:#0000ff;">if</span> (helper(0<span style="color:#000000;">,i))
</span><span style="color:#008080;">56</span>                 <span style="color:#0000ff;">break</span><span style="color:#000000;">;
</span><span style="color:#008080;">57</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">58</span>         <span style="color:#0000ff;">return</span><span style="color:#000000;"> res;
</span><span style="color:#008080;">59</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">60</span> 
<span style="color:#008080;">61</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">static</span> <span style="color:#0000ff;">void</span><span style="color:#000000;"> main(String[] args) {
</span><span style="color:#008080;">62</span>         List&lt;Integer&gt; integers = <span style="color:#0000ff;">new</span> Solution().splitIntoFibonacci("214748364721474836422147483641"<span style="color:#000000;">);
</span><span style="color:#008080;">63</span>         System.out.println("integers = " +<span style="color:#000000;"> integers);
</span><span style="color:#008080;">64</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">65</span> }</pre> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/yfs123456/p/11620933.html</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b092f591d1ded576f302df67ced72586/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Java面试题】字符串排序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1f433ed0a1eb45cc3d797c58cad01870/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mysql_query(&#34;set names &#39;utf8&#39;&#34;);</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>