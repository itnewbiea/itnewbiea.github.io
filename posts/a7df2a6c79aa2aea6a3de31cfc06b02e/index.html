<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ESP32-CAM搭建Arduino及简单使用 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ESP32-CAM搭建Arduino及简单使用" />
<meta property="og:description" content="准备 需要一个ESP32-CAM模块，我买的是这种，下面带了个下载模块的，接上USB就能用了，很方便，如果没有买下面那个那就得自行用USB-TTL了
配置环境 有了硬件，下面就是软件的事情了，Arduino IDE本身没有ESP32或ESP8266的开发板，所以需要自己去安装
方法一 用Arduino IDE进行安装
打开Arduino IDE，找到文件 → 首选项，然后把下面两个链接加上去
http://wechat.doit.am/package_esp8266com_index.jsonhttps://dl.espressif.com/dl/package_esp32_index.json（这一个就行） 如图所示
然后找到：工具 → 开发板 → 开发板管理器，搜索esp32，这个时候就出现了esp32的板子了
安装速度比较慢，等待安装完毕即可
方法二 从github下载并安装
先到乐鑫的github仓库将所有文件打包下载
GitHub - espressif/arduino-esp32: Arduino core for the ESP32
到自己的Arduino安装目录下，找到hardware文件夹，建立文件夹espressif，然后在里面再建立一个esp32文件夹
然后把刚刚github下载的文件解压到Arduino安装目录/hardware/espressif/esp32/下
确保自己电脑上有python环境，运行get.exe即可
很慢，耐心等待
程序 到这里我们就有了ESP32的开发环境了，开始烧写代码
在 工具 → 开发板 可以看到有ESP32的相关板子了，用ESP32 Dev Module或者 ESP32 Wrover Module都可以
然后打开ESP32-CAM的例程
打开后，找到前面一堆#define，把默认的摄像头模块注释掉，解开#define CAMERA_MODEL_AI_THINKER的注释
//#define CAMERA_MODEL_M5STACK_WIDE // Has PSRAM//#define CAMERA_MODEL_M5STACK_ESP32CAM // No PSRAM#define CAMERA_MODEL_AI_THINKER // Has PSRAM//#define CAMERA_MODEL_TTGO_T_JOURNAL // No PSRAM 然后找到ssid和password输入自己的Wifi名称和密码，就可以尝试编译上传了
const char* ssid = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a7df2a6c79aa2aea6a3de31cfc06b02e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-11T10:14:32+08:00" />
<meta property="article:modified_time" content="2022-03-11T10:14:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ESP32-CAM搭建Arduino及简单使用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 id="准备">准备</h4> 
<p>需要一个ESP32-CAM模块，我买的是这种，下面带了个下载模块的，接上USB就能用了，很方便，如果没有买下面那个那就得自行用USB-TTL了<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/5f/5c/XgX1LqRe_o.png"></p> 
<h4 id="配置环境">配置环境</h4> 
<blockquote> 
 <p>有了硬件，下面就是软件的事情了，Arduino IDE本身没有ESP32或ESP8266的开发板，所以需要自己去安装</p> 
</blockquote> 
<p>方法一 用Arduino IDE进行安装</p> 
<p>打开Arduino IDE，找到文件 → 首选项，然后把下面两个链接加上去</p> 
<table><tbody><tr><td></td><td><code>http://wechat.doit.am/package_esp8266com_index.json</code></td></tr><tr><td></td><td><code>https://dl.espressif.com/dl/package_esp32_index.json（这一个就行）</code></td></tr></tbody></table> 
<p>如图所示<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/76/95/hbBt5Mel_o.png"><br> 然后找到：工具 → 开发板 → 开发板管理器，搜索esp32，这个时候就出现了esp32的板子了</p> 
<p><img alt="" height="452" src="https://images2.imgbox.com/0f/2b/cSOhNnsL_o.jpg" width="802"></p> 
<p></p> 
<p>安装速度比较慢，等待安装完毕即可</p> 
<p>方法二 从github下载并安装</p> 
<p>先到乐鑫的github仓库将所有文件打包下载<br><a href="https://github.com/espressif/arduino-esp32" title="GitHub - espressif/arduino-esp32: Arduino core for the ESP32">GitHub - espressif/arduino-esp32: Arduino core for the ESP32</a></p> 
<p>到自己的Arduino安装目录下，找到hardware文件夹，建立文件夹espressif，然后在里面再建立一个esp32文件夹<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/45/50/cZ9RiNad_o.png"><br> 然后把刚刚github下载的文件解压到<code>Arduino安装目录/hardware/espressif/esp32/</code>下<br> 确保自己电脑上有python环境，运行<code>get.exe</code>即可<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/1e/6c/3E4ekeoB_o.png"><br> 很慢，耐心等待</p> 
<h4 id="程序">程序</h4> 
<blockquote> 
 <p>到这里我们就有了ESP32的开发环境了，开始烧写代码</p> 
</blockquote> 
<p>在 工具 → 开发板 可以看到有ESP32的相关板子了，用ESP32 Dev Module或者 ESP32 Wrover Module都可以<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/f2/0d/WDPgyFK7_o.png"><br> 然后打开ESP32-CAM的例程<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/28/b4/cjT2VnR8_o.png"><br> 打开后，找到前面一堆<code>#define</code>，把默认的摄像头模块注释掉，解开<code>#define CAMERA_MODEL_AI_THINKER</code>的注释</p> 
<table><tbody><tr><td></td><td><code>//#define CAMERA_MODEL_M5STACK_WIDE // Has PSRAM</code></td></tr><tr><td></td><td><code>//#define CAMERA_MODEL_M5STACK_ESP32CAM // No PSRAM</code></td></tr><tr><td></td><td><code><span style="color:#fe2c24;">#define CAMERA_MODEL_AI_THINKER</span> // Has PSRAM</code></td></tr><tr><td></td><td><code>//#define CAMERA_MODEL_TTGO_T_JOURNAL // No PSRAM</code></td></tr></tbody></table> 
<p>然后找到ssid和password输入自己的Wifi名称和密码，就可以尝试编译上传了</p> 
<table><tbody><tr><td></td><td><code>const char* ssid = "xxxx";</code></td></tr><tr><td></td><td><code>const char* password = "xxxx";</code></td></tr></tbody></table> 
<p>如果上传过程中IDE出现这个报错<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/74/86/FIDsC4dl_o.png"></p> 
<p>可以在IDE中把<code>Partition Scheme</code>换成<code>Huge APP</code>，就能够成功编译上传了<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/1e/3f/2zS3E1VE_o.png"><br><span style="color:#fe2c24;">烧写成功后，如果一直是下图：</span><img alt="" src="https://images2.imgbox.com/53/82/07XFzno9_o.png"> </p> 
<p><span style="color:#fe2c24;">然后你打开串口监视器，波特率设置为115200，重启板子，可以看到板子的ip，浏览器输入ip就能够看到摄像头的图像了</span></p> 
<p></p> 
<p><img alt="" height="362" src="https://images2.imgbox.com/af/2c/pPyWRlCT_o.jpg" width="944"></p> 
<p><img alt="" height="1050" src="https://images2.imgbox.com/85/a1/QUqQI79t_o.png" width="1200"></p> 
<blockquote> 
 <p>ESP32-CAM的初步使用就完成了~</p> 
</blockquote> 
<h4 id="小改进">小改进</h4> 
<p>例程是让ESP32去连接Wifi来使用，如果希望ESP32以热点(AP)的形式来连接也是可以的<br> ESP32有三种工作模式：<br> 1.连接现有Wifi，即STA模式<br> 2.作为热点发射信号，即AP模式<br> 3.STA、AP模式共存</p> 
<blockquote> 
 <p>更多有关wifi的配置可以参考<a href="https://blog.csdn.net/qq_44629109/article/details/111989323" title="这里">这里</a>，ESP32和ESP8266的配置方式基本相同</p> 
</blockquote> 
<p>我选择的是第三种模式，在有wifi的时候连接wifi，没有wifi的时候也可以连接热点来使用<br> 首先在前面设置连接wifi账号密码下加了个AP的名称和密码</p> 
<table><tbody><tr><td></td><td><code>const char* ssid = "xxxx";</code></td></tr><tr><td></td><td><code>const char* password = "xxxx";</code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code>const char* AP_ssid = "ESP32_AP";</code></td></tr><tr><td></td><td><code>const char* AP_password = "12345678";</code></td></tr></tbody></table> 
<p>然后修改例程代码，然后注释掉原来的<br> 连接wifi尝试了六次，还是连不上就放弃了，这个时候就只能用AP进行访问</p> 
<table><tbody><tr><td></td><td><code>WiFi.mode(WIFI_AP_STA);</code></td></tr><tr><td></td><td><code>WiFi.softAP(AP_ssid, AP_password);</code></td></tr><tr><td></td><td><code>Serial.print("AP IP = " + WiFi.softAPIP()); </code></td></tr><tr><td></td><td><code>WiFi.begin(ssid, password);</code></td></tr><tr><td></td><td><code>int i = 0;</code></td></tr><tr><td></td><td><code>while (WiFi.status() != WL_CONNECTED) {<!-- --></code></td></tr><tr><td></td><td><code>delay(500);</code></td></tr><tr><td></td><td><code>Serial.print(".");</code></td></tr><tr><td></td><td><code>if(i == 6){<!-- --></code></td></tr><tr><td></td><td><code>Serial.println("\nWiFi connect failed,break...");</code></td></tr><tr><td></td><td><code>break;</code></td></tr><tr><td></td><td><code>}</code></td></tr><tr><td></td><td><code>i++;</code></td></tr><tr><td></td><td><code>}</code></td></tr><tr><td></td><td><code>// WiFi.begin(ssid, password);</code></td></tr><tr><td></td><td><code>// while (WiFi.status() != WL_CONNECTED) {<!-- --></code></td></tr><tr><td></td><td><code>// delay(500);</code></td></tr><tr><td></td><td><code>// Serial.print(".");</code></td></tr><tr><td></td><td><code>// }</code></td></tr><tr><td></td><td><code>// Serial.println("");</code></td></tr><tr><td></td><td><code>// Serial.println("WiFi connected");</code></td></tr></tbody></table> 
<p>AP模式下，客户端连上ESP32后，默认的地址是<code>192.168.4.1</code>，浏览器输入这个地址就能够访问了</p> 
<p>要注意下，ESP32芯片右上角有个天线接口，旁边有个小贴片电阻，如果要使用外接天线，要把那个贴片电阻朝着天线接口焊才能使用外接天线</p> 
<p> </p> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dfdac31ff942037d5eff82851eef8f6b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MATLAB 给函数加上随机噪声/扰动的一种方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/76161e0bb1ab6aa7bbdb46eba335487b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">keil及iar调试解释</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>