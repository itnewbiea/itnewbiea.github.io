<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>kkfileview在线预览文件实现 Windows Linux - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="kkfileview在线预览文件实现 Windows Linux" />
<meta property="og:description" content="1 kkfileview介绍 网页端不想下载文件，而是想在线打开文件预览，比如：txt、doc、docx、pdf、xml、xls、xlsx、ppt、pptx、zip、png、jpg等等。这个时候 kkFileView 的出现就解决了我们的问题。
kkFileView 为文件文档在线预览解决方案，该项目使用流行的spring boot搭建，易上手和部署，基本支持主流办公文档的在线预览，如doc,docx,xls,xlsx,ppt,pptx,pdf,txt,zip,rar,图片,视频,音频等等。
kkfileview 官网
kkfileview 码云地址
kkfileview gitHub地址
2 kkfileview安装 首先，下载代码到本地
idea开发工具打开，clean，install
2.1 Windows环境 2.1.1 启动 install执行成功后，找到target文件夹下的kkFileView-x.x.x.zip压缩包，进行解压缩。进入 bin 目录，双击 startup.bat 启动 kkFileView。
2.1.2 访问检查 进入 log 目录查看 kkFileView.log 日志，打印【kkFileView 服务启动完成，耗时:26.8350973s，演示页请访问: http://127.0.0.1:8012 】则说明启动成功。
这时可以访问http://localhost:8012/index，看到以下页面说明部署成功。
2.1.3 Windows另一种部署方式 截止2.1.2步骤Windows环境已经部署完成。如果是部署本地测试环境的话，还可以直接如下图运行服务，效果和上一种方法是相同的。
2.2 Linux环境 如果搭建测试环境，可以用VMware创建一个虚拟机
2.2.1 上传压缩包 root用户下将 kkFileView-4.2.1.tar.gz 上传到服务器 ，使用命令 tar -zxvf kkFileView-4.2.1.tar.gz 解压。
2.2.2 开放 8012 端口 1.查看防火墙状态：systemctl status firewalld 或 firewall-cmd --state
2.若防火墙未开启，则需要开启防火墙：systemctl start firewalld.service
3.查看开放端口列表firewall-cmd --list-ports" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/887851c4f7799ff0cb4c13dff8485c1d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-23T15:57:48+08:00" />
<meta property="article:modified_time" content="2023-05-23T15:57:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">kkfileview在线预览文件实现 Windows Linux</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1_kkfileview_0"></a>1 kkfileview介绍</h2> 
<p>网页端不想下载文件，而是想在线打开文件预览，比如：txt、doc、docx、pdf、xml、xls、xlsx、ppt、pptx、zip、png、jpg等等。这个时候 kkFileView 的出现就解决了我们的问题。<br> kkFileView 为文件文档在线预览解决方案，该项目使用流行的spring boot搭建，易上手和部署，基本支持主流办公文档的在线预览，如doc,docx,xls,xlsx,ppt,pptx,pdf,txt,zip,rar,图片,视频,音频等等。<br> <a href="https://kkfileview.keking.cn/zh-cn/index.html" rel="nofollow">kkfileview 官网</a><br> <a href="https://gitee.com/kekingcn/file-online-preview" rel="nofollow">kkfileview 码云地址</a><br> <a href="https://github.com/kekingcn/kkFileView">kkfileview gitHub地址</a></p> 
<h2><a id="2_kkfileview_7"></a>2 kkfileview安装</h2> 
<p>首先，下载代码到本地<br> <img src="https://images2.imgbox.com/e3/ca/teAUsJKt_o.png" alt="kkfileview 码云"><br> idea开发工具打开，clean，install<br> <img src="https://images2.imgbox.com/84/e9/8TLhXmxi_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="21_Windows_12"></a>2.1 Windows环境</h3> 
<h4><a id="211__13"></a>2.1.1 启动</h4> 
<p>install执行成功后，找到target文件夹下的kkFileView-x.x.x.zip压缩包，进行解压缩。进入 bin 目录，双击 startup.bat 启动 kkFileView。<br> <img src="https://images2.imgbox.com/e2/eb/p5aqOXbf_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="212__16"></a>2.1.2 访问检查</h4> 
<p>进入 log 目录查看 kkFileView.log 日志，打印【kkFileView 服务启动完成，耗时:26.8350973s，演示页请访问: http://127.0.0.1:8012 】则说明启动成功。<br> 这时可以访问<code>http://localhost:8012/index</code>，看到以下页面说明部署成功。<br> <img src="https://images2.imgbox.com/16/05/IIjYOWjC_o.png" alt="kkfileview 首页"></p> 
<h4><a id="213_Windows_21"></a>2.1.3 Windows另一种部署方式</h4> 
<p>截止2.1.2步骤Windows环境已经部署完成。如果是部署本地测试环境的话，还可以直接如下图运行服务，效果和上一种方法是相同的。</p> 
<p><img src="https://images2.imgbox.com/fa/96/BoZV6kSf_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22_Linux_26"></a>2.2 Linux环境</h3> 
<p><a href="https://blog.csdn.net/qq_44125965/article/details/126577760?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-126577760-blog-126296291.235%5Ev36%5Epc_relevant_default_base3&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=3">如果搭建测试环境，可以用VMware创建一个虚拟机</a></p> 
<h4><a id="221__28"></a>2.2.1 上传压缩包</h4> 
<p>root用户下将 kkFileView-4.2.1.tar.gz 上传到服务器 ，使用命令 <code>tar -zxvf kkFileView-4.2.1.tar.gz</code> 解压。<br> <img src="https://images2.imgbox.com/29/2b/9Cnrqeti_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="222__8012__31"></a>2.2.2 开放 8012 端口</h4> 
<p>1.查看防火墙状态：<code>systemctl status firewalld</code> 或 <code>firewall-cmd --state</code></p> 
<p>2.若防火墙未开启，则需要开启防火墙：<code>systemctl start firewalld.service</code></p> 
<p>3.查看开放端口列表<code>firewall-cmd --list-ports</code></p> 
<p>4.开启指定端口：<code>firewall-cmd --zone=public --add-port=8012/tcp --permanent</code>(8012为端口号)，提示success则为成功</p> 
<p>5.重新加载防火墙<code>firewall-cmd --reload</code>，提示success则为成功</p> 
<p>6.再次查看开放端口列表<code>firewall-cmd --list-ports</code>，8012端口已经成功开放<br> <img src="https://images2.imgbox.com/03/a9/8YLt3m7y_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="223__45"></a>2.2.3 安装字体</h4> 
<h5><a id="2231___46"></a>2.2.3.1 字体压缩包下载：</h5> 
<p>1 网页下载：<br> <a href="http://kkfileview.keking.cn/fonts.zip" rel="nofollow">http://kkfileview.keking.cn/fonts.zip</a><br> 2 百度网盘下载：<br> 链接：<a href="https://pan.baidu.com/s/1-Sp02zdMfZfNuNJIEmOmyA" rel="nofollow">https://pan.baidu.com/s/1-Sp02zdMfZfNuNJIEmOmyA</a><br> 提取码：asgo</p> 
<h5><a id="2232__52"></a>2.2.3.2 字体安装</h5> 
<p>1 将下载的字体fonts.zip上传到 /usr/share/fonts 目录<br> 2 执行<code>unzip fonts.zip</code>命令解压，若提示<code>unzip: command not found</code>则运行<code>yum install -y unzip zip</code>安装命令。安装成功后就可以使用unzip命令了。<br> 3 执行命令 <code>mkfontscale</code> 若 <code>mkfontscale</code> 提示没有命令则先 <code>yum install mkfontscale</code> 安装命令，再分别依次执行 mkfontscale、mkfontdir、fc-cache 命令。</p> 
<h4><a id="224__56"></a>2.2.4 启动服务</h4> 
<p>root用户下解压后进入 kkFileView-4.2.1/bin 目录，执行 <code>./startup.sh</code> 开始安装和启动，安装过程中会下载需要的组件需要输入y<br> 这里下载速度特别慢，而且到最后也大概率会下载失败<img src="https://images2.imgbox.com/36/08/kKOWlG7k_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/ec/c8/eFosnbMj_o.png" alt="在这里插入图片描述"><br> 可以直接退出下载<br> 在这个网站找到对应libreoffice版本，下载好安装包后上传到Linux服务器手动安装。<br> <a href="https://downloadarchive.documentfoundation.org/libreoffice/old/7.1.4.2/rpm/x86_64/" rel="nofollow">libreoffice 安装包下载</a></p> 
<p>我百度网盘这里有下载好的<br> 链接：https://pan.baidu.com/s/1rsPEp70_LSNapzFosTaObQ<br> 提取码：y7f2</p> 
<p>root用户下将 LibreOffice_7.3.7.2_Linux_x86-64_rpm.tar.gz 上传到服务器 ，使用命令 <code>tar -zxvf LibreOffice_7.3.7.2_Linux_x86-64_rpm.tar.gz</code> 解压。<br> 进入RPMS目录执行 <code>yum localinstall *.rpm</code> 进行安装。会有提示信息输入y<br> <img src="https://images2.imgbox.com/18/10/6oCRNEVl_o.png" alt="在这里插入图片描述"><br> 提示安装成功后，进入<code>kkFileView-4.2.1/bin</code>目录，执行<code>./startup.sh</code>命令启动kkFileView服务，提示正在运行，由于前面启动不正确，我先执行<code>./shutdown.sh</code>命令关闭进程，关闭成功后，再执行<code>./startup.sh</code>启动服务，之后执行<code>./showlog.sh</code>命令查看日志，可以看到已经启动成功。<br> <img src="https://images2.imgbox.com/d7/4c/TcAjJ2H1_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="225__74"></a>2.2.5 检查运行是否正常</h4> 
<p><code>ifconfig</code>命令查看服务器IP地址<br> <img src="https://images2.imgbox.com/6d/af/aJGjrcxF_o.png" alt="在这里插入图片描述"><br> 之后本地浏览器访问<code>http://IP:8012/index</code>，看到一下界面说明运行成功。<br> <img src="https://images2.imgbox.com/4f/d6/auY7EsrB_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3__80"></a>3 前端页面调用接口</h2> 
<p>首先安装依赖</p> 
<pre><code>npm install --save js-base64
或
yarn add js-base64
</code></pre> 
<p>引入依赖</p> 
<pre><code>import { Base64 } from "js-base64";
</code></pre> 
<p>previewFile方法传入文件地址就可以</p> 
<pre><code>&lt;el-button type="primary" size="mini" @click="previewFile(file)"&gt;预览&lt;/el-button&gt;

previewFile(file) {
	 window.open('http://127.0.0.1:8012/onlinePreview?url='+encodeURIComponent(Base64.encode(file.url)));
	 // window.open('http://IP:8012/onlinePreview?url='+encodeURIComponent(Base64.encode(file.url)));
}
</code></pre> 
<h2><a id="4__103"></a>4. 参考</h2> 
<p><a href="https://blog.csdn.net/qq_33697094/article/details/126076565">kkFileView安装及使用——文件预览解决方案</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9246f3f44809f8502859c9f4b6120d7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">docker 配置本地仓库才能拉取仓库镜像&amp;目录挂载</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/77fc3364d0b12158444c1671368ee1f8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot开发实用篇2---与数据层技术有关的替换和整合</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>