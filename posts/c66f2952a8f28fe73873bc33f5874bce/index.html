<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java项目:图书管理系统(java&#43;SpringBoot&#43;html&#43;ThymeLeaf&#43;Bootstrap&#43;maven&#43;mysql) - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java项目:图书管理系统(java&#43;SpringBoot&#43;html&#43;ThymeLeaf&#43;Bootstrap&#43;maven&#43;mysql)" />
<meta property="og:description" content="源码获取：博客首页 &#34;资源&#34; 里下载！ 项目介绍 该项目分为管理员与读者两种角色，主要功能有：
1. 登录、注销、修改密码
2. 管理员主要功能包括：图书管理、读者管理、借还管理。对图书信息的增删改查、查看读者、查看借阅记录等；
3. 读者对图书信息的查看查询、修改个人信息、查看借阅记录
共7张表；
环境需要 1.运行环境：最好是java jdk 1.8，我们在这个平台上运行的。其他版本理论上也可以。
2.IDE环境：IDEA，Eclipse,Myeclipse都可以。推荐IDEA;
3.tomcat环境：Tomcat 7.x,8.x,9.x版本均可
4.硬件环境：windows 7/8/10 1G内存以上；或者 Mac OS；
5.是否Maven项目: 是；查看源码目录中是否包含pom.xml；若包含，则为maven项目，否则为非maven项目
6.数据库：MySql 8.0版本；
技术栈 数据库：mysql5.7
后端框架: SpringBoot
HTML模板: ThymeLeaf
持久层: Mybatis
UI: Bootstrap
登录验证和用户权限: SpringSecurity
使用说明 本项目使用maven进行管理，详细安装教程自行百度
1. 需下载mysql图形化管理工具(例如Navicat)，新建数据库library，右键数据库--&gt;运行项目中的library.sql脚本
2. 打开项目(idea或eclipse皆可，但需配置好maven环境)，打开src/main/resources/application.yml，将数据库的username和password修改成你自己的mysql的用户名和密码
3. 找到BookmanagerApplication类运行main方法，打开浏览器，网址栏输入localhost:8080访问系统
4. 如果不想用IDE打开项目而是想直接运行的朋友们，在目录下打开cmd键入mvn package命令，然后在target/目录下会生成对应的jar包，在cmd用“java -jar jar包名”运行即可
注意事项 1. 高版本mysql在登录时可能会报空指针错误，出现问题的建议安装并使用mysql5.7版本
用户管理控制层: /** * @Description 用户管理 * @Author by yy */ @Api(tags = &#34;用户管理&#34;) @RestController @RequestMapping(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c66f2952a8f28fe73873bc33f5874bce/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-20T15:43:05+08:00" />
<meta property="article:modified_time" content="2022-04-20T15:43:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java项目:图书管理系统(java&#43;SpringBoot&#43;html&#43;ThymeLeaf&#43;Bootstrap&#43;maven&#43;mysql)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <h2><span style="color:#fe2c24;">源码获取：博客首页 "资源" 里下载！</span></h2> 
</blockquote> 
<h4>项目介绍</h4> 
<p>该项目分为管理员与读者两种角色，主要功能有：</p> 
<p>1.  登录、注销、修改密码<br> 2.  管理员主要功能包括：图书管理、读者管理、借还管理。对图书信息的增删改查、查看读者、查看借阅记录等；</p> 
<p>3.  读者对图书信息的查看查询、修改个人信息、查看借阅记录</p> 
<p>共7张表；</p> 
<h4>环境需要</h4> 
<p>1.运行环境：最好是java jdk 1.8，我们在这个平台上运行的。其他版本理论上也可以。<br> 2.IDE环境：IDEA，Eclipse,Myeclipse都可以。推荐IDEA;<br> 3.tomcat环境：Tomcat 7.x,8.x,9.x版本均可<br> 4.硬件环境：windows 7/8/10 1G内存以上；或者 Mac OS；<br> 5.是否Maven项目: 是；查看源码目录中是否包含pom.xml；若包含，则为maven项目，否则为非maven项目</p> 
<p>6.数据库：MySql 8.0版本；</p> 
<h4>技术栈</h4> 
<p>数据库：mysql5.7<br> 后端框架: SpringBoot<br> HTML模板: ThymeLeaf<br> 持久层: Mybatis<br> UI: Bootstrap</p> 
<p>登录验证和用户权限: SpringSecurity</p> 
<h4>使用说明</h4> 
<p>本项目使用maven进行管理，详细安装教程自行百度<br> 1.  需下载mysql图形化管理工具(例如Navicat)，新建数据库library，右键数据库--&gt;运行项目中的library.sql脚本<br> 2.  打开项目(idea或eclipse皆可，但需配置好maven环境)，打开src/main/resources/application.yml，将数据库的username和password修改成你自己的mysql的用户名和密码<br> 3.  找到BookmanagerApplication类运行main方法，打开浏览器，网址栏输入localhost:8080访问系统</p> 
<p>4.  如果不想用IDE打开项目而是想直接运行的朋友们，在目录下打开cmd键入mvn package命令，然后在target/目录下会生成对应的jar包，在cmd用“java -jar jar包名”运行即可</p> 
<h4>注意事项</h4> 
<p>1.  高版本mysql在登录时可能会报空指针错误，出现问题的建议安装并使用mysql5.7版本</p> 
<p> <img alt="" height="924" src="https://images2.imgbox.com/73/df/FXhFnV6B_o.jpg" width="1200"></p> 
<p><img alt="" height="904" src="https://images2.imgbox.com/b5/cd/UiOHLo5u_o.jpg" width="1200"></p> 
<p> <img alt="" height="1120" src="https://images2.imgbox.com/14/f3/iCEbPM8o_o.jpg" width="1200"></p> 
<p> <img alt="" height="1200" src="https://images2.imgbox.com/79/ee/AvCDPUWX_o.jpg" width="1200"></p> 
<p></p> 
<p><img alt="" height="1056" src="https://images2.imgbox.com/62/e8/PtgucT2H_o.jpg" width="1200"></p> 
<p> <img alt="" height="348" src="https://images2.imgbox.com/e4/4a/OEsBF7nE_o.jpg" width="528"></p> 
<p></p> 
<h3>用户管理控制层:</h3> 
<pre><code>/**
 * @Description 用户管理
 * @Author by yy
 */
@Api(tags = "用户管理")
@RestController
@RequestMapping("/user")
public class UsersController {

    @Autowired
    private UserService userService;

    @ApiOperation("用户列表")
    @PostMapping("/list")
    public R getUsers(@RequestBody PageIn pageIn) {
        if (pageIn == null) {
            return R.fail(CodeEnum.PARAM_ERROR);
        }
        // 封装分页出参对象
        PageInfo&lt;Users&gt; userList = userService.getUserList(pageIn);
        PageOut pageOut = new PageOut();
        pageOut.setCurrPage(userList.getPageNum());
        pageOut.setPageSize(userList.getPageSize());
        pageOut.setTotal((int) userList.getTotal());
        List&lt;UserOut&gt; outs = new ArrayList&lt;&gt;();
        for (Users users : userList.getList()) {
            UserOut out = new UserOut();
            BeanUtils.copyProperties(users,out);
            out.setIdent(ConvertUtil.identStr(users.getIdentity()));
            out.setBirth(DateUtil.format(users.getBirthday(),Constants.DATE_FORMAT));
            outs.add(out);
        }
        pageOut.setList(outs);
        return R.success(CodeEnum.SUCCESS,pageOut);
    }


    /**
     * 添加读者操作
     * @param users
     * @return
     */
    @ApiOperation("添加读者")
    @ResponseBody
    @PostMapping("/addReader")
    public R addReader(Users users) {
        if (users == null) {
            return R.fail(CodeEnum.PARAM_ERROR);
        }
        if(StringUtils.isEmpty(users.getAvatar())) {
            return R.fail(CodeEnum.USER_HEAD_PIC_ERROR);
        }
        if(StringUtils.isEmpty(users.getUsername())) {
            return R.fail(CodeEnum.USERNAME_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(users.getNickname())) {
            return R.fail(CodeEnum.NICKNAME_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(users.getTel())) {
            return R.fail(CodeEnum.USER_MOBILE_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(users.getEmail())) {
            return R.fail(CodeEnum.USER_EMAIL_NOT_EXIST_ERROR);
        }
        Users byUsername = userService.findByUsername(users.getUsername());
        if(byUsername!=null){
            return R.fail(CodeEnum.USER_NAME_IS_EXIST_ERROR);
        }
        // 读者默认是普通用户
        users.setIsAdmin(1);
        Users users1 = userService.addUser(users);
        if(users1==null){
            return R.fail(CodeEnum.USER_ADD_ERROR);
        }
        return R.success(CodeEnum.SUCCESS);
    }


    /**
     * 编辑用户操作
     * @param users
     * @return
     */
    @ApiOperation("编辑用户")
    @ResponseBody
    @PostMapping("/edit")
    public R modifyUsers(Users users) {
        if (users == null) {
            return R.fail(CodeEnum.PARAM_ERROR);
        }
        if(StringUtils.isEmpty(users.getAvatar())) {
            return R.fail(CodeEnum.USER_HEAD_PIC_ERROR);
        }
        if(StringUtils.isEmpty(users.getUsername())) {
            return R.fail(CodeEnum.USERNAME_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(users.getNickname())) {
            return R.fail(CodeEnum.NICKNAME_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(users.getTel())) {
            return R.fail(CodeEnum.USER_MOBILE_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(users.getEmail())) {
            return R.fail(CodeEnum.USER_EMAIL_NOT_EXIST_ERROR);
        }
        Users byUsername = userService.findByUsername(users.getUsername());
        if(byUsername!=null){
            if(!byUsername.getId().equals(users.getId())){
                return R.fail(CodeEnum.USER_NAME_IS_EXIST_ERROR);
            }
        }
        if(!userService.updateUser(users)){
            return R.fail(CodeEnum.USER_EDIT_ERROR);
        }
        return R.success(CodeEnum.SUCCESS);
    }


    @ApiOperation("用户详情")
    @GetMapping("/detail")
    public R userDetail(Integer id) {
        Users user = userService.findUserById(id);
        if (user!=null) {
            UserOut out = new UserOut();
            BeanUtils.copyProperties(user,out);
            out.setBirth(DateUtil.format(user.getBirthday(),Constants.DATE_FORMAT));
            out.setIdent(ConvertUtil.identStr(user.getIdentity()));
            return R.success(CodeEnum.SUCCESS,out);
        }

        return R.fail(CodeEnum.NOT_FOUND);
    }

    @ApiOperation("删除用户")
    @GetMapping("/delete")
    public R delUsers(Integer id) {
        userService.deleteUser(id);
        return R.success(CodeEnum.SUCCESS);
    }

    @ApiOperation("获取当前用户登陆信息")
    @GetMapping("/currUser")
    public R getCurrUser() {
        Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();
        if (principal!=null) {
            Map&lt;String,Object&gt; map = BeanUtil.beanToMap(principal);
            String username = (String) map.get("username");
            if (StrUtil.isNotBlank(username)) {
                Users users = userService.findByUsername(username);
                UserOut out = new UserOut();
                BeanUtils.copyProperties(users,out);
                out.setBirth(DateUtil.format(users.getBirthday(),Constants.DATE_FORMAT));
                Integer identity = users.getIdentity();
                String ident = "";
                if (identity == Constants.STUDENT) {
                    ident = Constants.STU_STR;
                }else if (identity == Constants.TEACHER) {
                    ident = Constants.TEA_STR;
                }else if (identity == Constants.OTHER) {
                    ident = Constants.OTHER_STR;
                }else if (identity == Constants.ADMIN) {
                    ident = Constants.ADMIN_STR;
                }
                out.setIdent(ident);
                return R.success(CodeEnum.SUCCESS,out);
            }
        }
        return R.fail(CodeEnum.USER_NOT_FOUND);
    }
}
</code></pre> 
<h3>借阅管理控制层：</h3> 
<pre><code>/**
 * @Description 借阅管理
 * @Author by yy
 */
@Api(tags = "借阅管理")
@RestController
@RequestMapping("/borrow")
public class BorrowController {

    @Autowired
    private BorrowService borrowService;

    @Autowired
    private BookService bookService;

    @ApiOperation("借阅列表")
    @GetMapping("/list")
    public R getBorrowList(Integer userId) {
        return R.success(CodeEnum.SUCCESS,borrowService.findAllBorrowByUserId(userId));
    }

    @ApiOperation("借阅图书")
    @PostMapping("/add")
    public R addBorrow(@RequestBody Borrow borrow) {
        Integer result = borrowService.addBorrow(borrow);
        if (result == Constants.BOOK_BORROWED) {
            return R.success(CodeEnum.BOOK_BORROWED);
        }else if (result == Constants.USER_SIZE_NOT_ENOUGH) {
            return R.success(CodeEnum.USER_NOT_ENOUGH);
        }else if (result == Constants.BOOK_SIZE_NOT_ENOUGH) {
            return R.success(CodeEnum.BOOK_NOT_ENOUGH);
        }
        return R.success(CodeEnum.SUCCESS,Constants.OK);
    }

    @ApiOperation("编辑借阅")
    @PostMapping("/update")
    public R modifyBorrow(@RequestBody Borrow borrow) {
        return R.success(CodeEnum.SUCCESS,borrowService.updateBorrow(borrow));
    }


    @ApiOperation("借阅详情")
    @GetMapping("/detail")
    public R borrowDetail(Integer id) {
        return R.success(CodeEnum.SUCCESS,borrowService.findById(id));
    }

    @ApiOperation("删除归还记录")
    @GetMapping("/delete")
    public R delBorrow(Integer id) {
        borrowService.deleteBorrow(id);
        return R.success(CodeEnum.SUCCESS);
    }


    @ApiOperation("已借阅列表")
    @GetMapping("/borrowed")
    public R borrowedList(Integer userId) {
        List&lt;BackOut&gt; outs = new ArrayList&lt;&gt;();
        if (userId!=null&amp;&amp;userId&gt;0) {
            // 获取所有 已借阅 未归还书籍
            List&lt;Borrow&gt; borrows = borrowService.findBorrowsByUserIdAndRet(userId, Constants.NO);
            for (Borrow borrow : borrows) {
                BackOut backOut = new BackOut();
                BookOut out = bookService.findBookById(borrow.getBookId());
                BeanUtils.copyProperties(out,backOut);

                backOut.setBorrowTime(DateUtil.format(borrow.getCreateTime(),Constants.DATE_FORMAT));

                String endTimeStr = DateUtil.format(borrow.getEndTime(), Constants.DATE_FORMAT);
                backOut.setEndTime(endTimeStr);
                // 判断是否逾期
                String toDay = DateUtil.format(new Date(), Constants.DATE_FORMAT);
                int i = toDay.compareTo(endTimeStr);
                if (i&gt;0) {
                    backOut.setLate(Constants.YES_STR);
                }else {
                    backOut.setLate(Constants.NO_STR);
                }

                outs.add(backOut);
            }
        }

        return R.success(CodeEnum.SUCCESS,outs);
    }

    @ApiOperation("归还书籍")
    @PostMapping("/ret")
    public R retBook(Integer userId, Integer bookId) {
        // 归还图书
        borrowService.retBook(userId,bookId);
        return R.success(CodeEnum.SUCCESS);
    }

}
</code></pre> 
<h3>图书管理控制层：</h3> 
<pre><code>/**
 * @Description 图书管理
 * @Author by yy
 */
@Api(tags = "图书管理")
@RestController
@RequestMapping("/book")
public class BookController {

    @Autowired
    private BookService bookService;

    @ApiOperation("图书搜索列表")
    @PostMapping("/list")
    public R getBookList(@RequestBody PageIn pageIn) {
        if (pageIn == null) {
            return R.fail(CodeEnum.PARAM_ERROR);
        }
        return R.success(CodeEnum.SUCCESS,bookService.getBookList(pageIn));
    }

    /**
     * 添加图片操作
     * @param book
     * @return
     */
    @ApiOperation("添加图书")
    @ResponseBody
    @PostMapping("/add")
    public R addBook(Book book) {
        if(StringUtils.isEmpty(book.getName())){
            return R.fail(CodeEnum.BOOK_NAME_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(book.getIsbn())){
            return R.fail(CodeEnum.BOOK_ISBN_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(book.getPic())){
            return R.fail(CodeEnum.BOOK_IMAGE_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(book.getAuthor())){
            return R.fail(CodeEnum.BOOK_AUTHOR_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(book.getType())){
            return R.fail(CodeEnum.BOOK_TYPE_NOT_EXIST_ERROR);
        }
        BookOut bookByIsbn = bookService.findBookByIsbn(book.getIsbn());
        if(bookByIsbn.getName()!=null){
            return R.fail(CodeEnum.BOOK_ISBN_EXIST_ERROR);
        }
        if(bookService.addBook(book)==null){
            return R.fail(CodeEnum.BOOK_ADD_ERROR);
        }
        return R.success(CodeEnum.SUCCESS);
    }

    /**
     * 编辑图书
     * @param book
     * @return
     */
    @ApiOperation("编辑图书")
    @ResponseBody
    @PostMapping("/edit")
    public R editBook(Book book) {
        if(StringUtils.isEmpty(book.getName())){
            return R.fail(CodeEnum.BOOK_NAME_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(book.getIsbn())){
            return R.fail(CodeEnum.BOOK_ISBN_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(book.getPic())){
            return R.fail(CodeEnum.BOOK_IMAGE_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(book.getAuthor())){
            return R.fail(CodeEnum.BOOK_AUTHOR_NOT_EXIST_ERROR);
        }
        if(StringUtils.isEmpty(book.getType())){
            return R.fail(CodeEnum.BOOK_TYPE_NOT_EXIST_ERROR);
        }
        BookOut bookByIsbn = bookService.findBookByIsbn(book.getIsbn());
        if(bookByIsbn.getName()!=null){
            if(!bookByIsbn.getId().equals(book.getId())){
                return R.fail(CodeEnum.BOOK_ISBN_EXIST_ERROR);
            }
        }
        if(!bookService.updateBook(book)){
            return R.fail(CodeEnum.BOOK_EDIT_ERROR);
        }
        return R.success(CodeEnum.SUCCESS);
    }


    @ApiOperation("图书详情")
    @GetMapping("/detail")
    public R bookDetail(Integer id) {
        return R.success(CodeEnum.SUCCESS,bookService.findBookById(id));
    }

    @ApiOperation("图书详情 根据ISBN获取")
    @GetMapping("/detailByIsbn")
    public R bookDetailByIsbn(String isbn) {
        BookOut bookByIsbn = bookService.findBookByIsbn(isbn);
        if(bookByIsbn.getId()==null){
            return R.fail(CodeEnum.BOOK_NOT_EXIST_ERROR);
        }
        return R.success(CodeEnum.SUCCESS,bookByIsbn);
    }

    @ApiOperation("删除图书")
    @GetMapping("/delete")
    public R delBook(Integer id) {
        bookService.deleteBook(id);
        return R.success(CodeEnum.SUCCESS);
    }

}
</code></pre> 
<blockquote> 
 <h2><span style="color:#fe2c24;">源码获取：博客首页 "资源" 里下载！ </span></h2> 
</blockquote>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/991355533859c91f85a8bc9ebe47e3cb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">海康工业相机参数设置与获取</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0eac7819e597b85bbdf09bb3560dc97e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue3.0有哪些新特性</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>