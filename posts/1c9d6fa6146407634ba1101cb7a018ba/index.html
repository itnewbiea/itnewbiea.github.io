<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>php yield 数据库接口,php 通过 yield 实现协程有什么使用场景？ - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="php yield 数据库接口,php 通过 yield 实现协程有什么使用场景？" />
<meta property="og:description" content="协程可以用在，异步网络 IO 的时候，使其成为非阻塞的。
比如你在一个 http 请求里面，你需要请求外面的接口，那么会有下面的场景。
你的前置 server 是 nginx，nginx 是非阻塞异步的，但是 php-fpm 是同步阻塞的。那么当你在请求外面接口的时候，这个任务就会被阻塞。(这里补充一下，php-fpm 的 Worker 进程是同步阻塞的)
假设你使用协程，那么当你在请求接口的时候，你的这个任务就可以暂停，保存上下文。然后呢，当你的接口返回了之后，重新调起这个任务继续执行。你的进程就不必耗在这一个任务上了，可以去处理其它的 http 请求了。这样是不是并发量就高了？
同理，当你的请求在查询数据库的时候，也是一个 IO 请求，也是同步的。协程就可以让你这些 IO 编程异步非阻塞的，从而增大你的并发量。这主要是让你的 CPU 可以在等待 IO 的时候，可以处理别的事情。所有的 IO 请求都可以通过协程做到这一点。
你的这篇文章我看过，是很好的一篇文章。这里作者用 yield 实现了一个任务调度，就是干我上面说的那些事情的。你也可以看看鸟哥翻译的 http://www.laruence.com/2015/...，可以说是对你看到的这个翻译的一个补充。他通过 yield 实现了一个异步非阻塞的服务器，当然只是一个 demo 啦。有个例子看起来应该会好一点。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1c9d6fa6146407634ba1101cb7a018ba/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-11T03:07:39+08:00" />
<meta property="article:modified_time" content="2021-03-11T03:07:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">php yield 数据库接口,php 通过 yield 实现协程有什么使用场景？</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>协程可以用在，异步网络 IO 的时候，使其成为非阻塞的。</p> 
 <p>比如你在一个 http 请求里面，你需要请求外面的接口，那么会有下面的场景。</p> 
 <p>你的前置 server 是 nginx，nginx 是非阻塞异步的，但是 php-fpm 是同步阻塞的。那么当你在请求外面接口的时候，这个任务就会被阻塞。(这里补充一下，php-fpm 的 Worker 进程是同步阻塞的)</p> 
 <p>假设你使用协程，那么当你在请求接口的时候，你的这个任务就可以暂停，保存上下文。然后呢，当你的接口返回了之后，重新调起这个任务继续执行。你的进程就不必耗在这一个任务上了，可以去处理其它的 http 请求了。这样是不是并发量就高了？</p> 
 <p>同理，当你的请求在查询数据库的时候，也是一个 IO 请求，也是同步的。协程就可以让你这些 IO 编程异步非阻塞的，从而增大你的并发量。这主要是让你的 CPU 可以在等待 IO 的时候，可以处理别的事情。所有的 IO 请求都可以通过协程做到这一点。</p> 
 <p>你的这篇文章我看过，是很好的一篇文章。这里作者用 yield 实现了一个任务调度，就是干我上面说的那些事情的。你也可以看看鸟哥翻译的 http://www.laruence.com/2015/...，可以说是对你看到的这个翻译的一个补充。他通过 yield 实现了一个异步非阻塞的服务器，当然只是一个 demo 啦。有个例子看起来应该会好一点。</p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/da9d147b1fabb51ad97525d080fa1036/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">php ajax access,转载：解决Ajax跨域 Access to XMLHttpRequest问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dadcf470e41a86aa2fb5e6e6c078005a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">php ajax传递多个参数类型,如何使用ajax传递可变参数名称</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>