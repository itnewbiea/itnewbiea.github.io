<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>信用评分卡模型 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="信用评分卡模型" />
<meta property="og:description" content="1、评分卡简介 信用评分卡模型是最常见的金融风控手段之一，它是指根据客户的各种属性和行为数据，利用一定的信用评分模型，对客户进行信用评分，据此决定是否给予授信以及授信的额度和利率，从而识别和减少在金融交易中存在的交易风险。
评分卡模型在不同的业务阶段体现的方式和功能也不一样。按照借贷用户的借贷时间，评分卡模型可以划分为以下三种：
贷前：申请评分卡（Application score card），又称为A卡
贷中：行为评分卡（Behavior score card），又称为B卡
贷后：催收评分卡（Collection score card），又称为C卡
标准评分卡模型是当前业界使用最多的风控模型，建模后得到的评分卡模型如下：
变量名称变量范围得分基准分–223年龄18≤年龄&lt;25-2年龄25≤年龄&lt;358年龄35≤年龄&lt;5510年龄55≤年龄5性别男4性别女2婚姻状况已婚8婚姻状况未婚-2学历硕士，博士10学历本科8学历大专5学历中专，技校，高中1学历初中，小学-2月收入月收入&lt;3000-8月收入3000≤月收入&lt;50000月收入5000≤月收入&lt;80005月收入8000≤月收入&lt;1200013月收入12000≤月收入20 评分卡模型如何对用户进行评分呢？一个用户的总评分等于基准分加上对客户各个属性的评分。以上面的评分卡为例：
客 户 评 分 = 基 准 分 &#43; 年 龄 评 分 &#43; 性 别 评 分 &#43; 婚 姻 状 况 评 分 &#43; 学 历 评 分 &#43; 月 收 入 评 分 客户评分=基准分&#43;年龄评分&#43;性别评分&#43;婚姻状况评分&#43;学历评分&#43;月收入评分 客户评分=基准分&#43;年龄评分&#43;性别评分&#43;婚姻状况评分&#43;学历评分&#43;月收入评分
如果某客户年龄为27岁，性别为男，婚姻状况为已婚，学历为本科，月收入为10000，那么他的评分为:
223 （ 基 准 分 ） &#43; 8 （ 年 龄 评 分 ） &#43; 4 （ 性 别 评 分 ） &#43; 8 （ 婚 姻 状 况 评 分 ） &#43; 8 （ 学 历 评 分 ） &#43; 13 （ 月 收 入 评 分 ） = 264 223（基准分）&#43;8（年龄评分）&#43;4（性别评分）&#43;8（婚姻状况评分）&#43;8（学历评分）&#43;13（月收入评分）= 264 223（基准分）&#43;8（年龄评分）&#43;4（性别评分）&#43;8（婚姻状况评分）&#43;8（学历评分）&#43;13（月收入评分）=264" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/11a626e683bbf947a586e48950d3c577/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-19T23:11:34+08:00" />
<meta property="article:modified_time" content="2021-06-19T23:11:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">信用评分卡模型</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_0"></a>1、评分卡简介</h3> 
<p>信用评分卡模型是最常见的金融风控手段之一，它是指根据客户的各种属性和行为数据，利用一定的信用评分模型，对客户进行信用评分，据此决定是否给予授信以及授信的额度和利率，从而识别和减少在金融交易中存在的交易风险。</p> 
<p>评分卡模型在不同的业务阶段体现的方式和功能也不一样。按照借贷用户的借贷时间，评分卡模型可以划分为以下三种：</p> 
<ul><li> <p>贷前：申请评分卡（Application score card），又称为<strong>A卡</strong></p> </li><li> <p>贷中：行为评分卡（Behavior score card），又称为<strong>B卡</strong></p> </li><li> <p>贷后：催收评分卡（Collection score card），又称为<strong>C卡</strong></p> </li></ul> 
<p>标准评分卡模型是当前业界使用最多的风控模型，建模后得到的评分卡模型如下：</p> 
<table><thead><tr><th><strong>变量名称</strong></th><th><strong>变量范围</strong></th><th><strong>得分</strong></th></tr></thead><tbody><tr><td>基准分</td><td>–</td><td>223</td></tr><tr><td>年龄</td><td>18≤年龄&lt;25</td><td>-2</td></tr><tr><td>年龄</td><td>25≤年龄&lt;35</td><td>8</td></tr><tr><td>年龄</td><td>35≤年龄&lt;55</td><td>10</td></tr><tr><td>年龄</td><td>55≤年龄</td><td>5</td></tr><tr><td>性别</td><td>男</td><td>4</td></tr><tr><td>性别</td><td>女</td><td>2</td></tr><tr><td>婚姻状况</td><td>已婚</td><td>8</td></tr><tr><td>婚姻状况</td><td>未婚</td><td>-2</td></tr><tr><td>学历</td><td>硕士，博士</td><td>10</td></tr><tr><td>学历</td><td>本科</td><td>8</td></tr><tr><td>学历</td><td>大专</td><td>5</td></tr><tr><td>学历</td><td>中专，技校，高中</td><td>1</td></tr><tr><td>学历</td><td>初中，小学</td><td>-2</td></tr><tr><td>月收入</td><td>月收入&lt;3000</td><td>-8</td></tr><tr><td>月收入</td><td>3000≤月收入&lt;5000</td><td>0</td></tr><tr><td>月收入</td><td>5000≤月收入&lt;8000</td><td>5</td></tr><tr><td>月收入</td><td>8000≤月收入&lt;12000</td><td>13</td></tr><tr><td>月收入</td><td>12000≤月收入</td><td>20</td></tr></tbody></table> 
<p>评分卡模型如何对用户进行评分呢？一个用户的总评分等于基准分加上对客户各个属性的评分。以上面的评分卡为例：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          客 
         
        
          户 
         
        
          评 
         
        
          分 
         
        
          = 
         
        
          基 
         
        
          准 
         
        
          分 
         
        
          + 
         
        
          年 
         
        
          龄 
         
        
          评 
         
        
          分 
         
        
          + 
         
        
          性 
         
        
          别 
         
        
          评 
         
        
          分 
         
        
          + 
         
        
          婚 
         
        
          姻 
         
        
          状 
         
        
          况 
         
        
          评 
         
        
          分 
         
        
          + 
         
        
          学 
         
        
          历 
         
        
          评 
         
        
          分 
         
        
          + 
         
        
          月 
         
        
          收 
         
        
          入 
         
        
          评 
         
        
          分 
         
        
       
         客户评分=基准分+年龄评分+性别评分+婚姻状况评分+学历评分+月收入评分 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mord cjk_fallback">客</span><span class="mord cjk_fallback">户</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord cjk_fallback">基</span><span class="mord cjk_fallback">准</span><span class="mord cjk_fallback">分</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord cjk_fallback">年</span><span class="mord cjk_fallback">龄</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord cjk_fallback">性</span><span class="mord cjk_fallback">别</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord cjk_fallback">婚</span><span class="mord cjk_fallback">姻</span><span class="mord cjk_fallback">状</span><span class="mord cjk_fallback">况</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord cjk_fallback">学</span><span class="mord cjk_fallback">历</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0em; vertical-align: 0em;"></span><span class="mord cjk_fallback">月</span><span class="mord cjk_fallback">收</span><span class="mord cjk_fallback">入</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span></span></span></span></span></span><br> 如果某客户年龄为27岁，性别为男，婚姻状况为已婚，学历为本科，月收入为10000，那么他的评分为:<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          223 
         
        
          （ 
         
        
          基 
         
        
          准 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          8 
         
        
          （ 
         
        
          年 
         
        
          龄 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          4 
         
        
          （ 
         
        
          性 
         
        
          别 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          8 
         
        
          （ 
         
        
          婚 
         
        
          姻 
         
        
          状 
         
        
          况 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          8 
         
        
          （ 
         
        
          学 
         
        
          历 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          13 
         
        
          （ 
         
        
          月 
         
        
          收 
         
        
          入 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          = 
         
        
          264 
         
        
       
         223（基准分）+8（年龄评分）+4（性别评分）+8（婚姻状况评分）+8（学历评分）+13（月收入评分）= 264 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">3</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">基</span><span class="mord cjk_fallback">准</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">8</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">年</span><span class="mord cjk_fallback">龄</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">性</span><span class="mord cjk_fallback">别</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">8</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">婚</span><span class="mord cjk_fallback">姻</span><span class="mord cjk_fallback">状</span><span class="mord cjk_fallback">况</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">8</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">学</span><span class="mord cjk_fallback">历</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">月</span><span class="mord cjk_fallback">收</span><span class="mord cjk_fallback">入</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">2</span><span class="mord">6</span><span class="mord">4</span></span></span></span></span></span></p> 
<h3><a id="2_45"></a>2、评分卡的开发流程</h3> 
<p>信用评分卡的开发有一套科学的、严密的流程，包括数据获取，EDA，数据预处理，变量筛选，LR模型的开发和评估，生成评分卡模型以及布置上线和模型监测。典型的开发流程如下图所示：</p> 
<p><img src="https://images2.imgbox.com/77/7a/lf82FMBp_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3_52"></a>3、探索性数据分析</h3> 
<p>有些时候建模人员一拿到数据就直接开始上手建模，事实并非如此。第一步应该是分析数据，并把数据转化为可用的信息。分析数据就是通常所说的EDA，转化数据包括在数据预处理部分。</p> 
<p>EDA操作主要是分析样本总体的大概情况，描述样本总体情况的指标主要有直方图、箱形图等。单变量的分布要大致呈正态分布，才能够满足后续分析的条件。多变量之间的相关性要尽可能低。检查完后切分数据集，将训练数据切分，用于检验。</p> 
<blockquote> 
 <p>探索性数据分析工具：DataPrep、Pandas Profiling、SweetViz、AutoViz。</p> 
</blockquote> 
<h3><a id="4_60"></a>4、数据预处理</h3> 
<p>该环节主要是为了将获取的原始数据转化为可用作模型开发的数据。数据处理可以概括为：缺失值处理、数据类型转换、去除逻辑错误和去除业务无关变量几部分：</p> 
<p>Ÿ <strong>缺失值处理</strong>：处理方式可以分为填补和删除。填补缺失值需根据实际字段的业务含义，通常可以用0、均值、众数和KNN算法填充。但是，在金融风控场景下，缺失值可能本身就是一种有业务含义的字段，可以考虑单独作为一个类别。当一个字段缺失值超过一半或更多的时候，一般考虑删除。</p> 
<p>Ÿ <strong>数据类型转换</strong>：一般指的是本应该是数值型的却被存成了字符型，或者日期格式不正确等，可以按照实际需求进行转换。</p> 
<p>Ÿ <strong>去除逻辑错误</strong>：一般是指去除异常值，比如一个借款客户的年龄为168岁，这显然是不合理的。对于违反常识或者严重离群的数据点，结合字段的实际含义去除异常值。</p> 
<p>Ÿ <strong>去除业务无关变量</strong>：最常见的一些会被去掉的字段，就是在一些客户资质比较差的场景下，用户手动填写的数据。如：收入、家庭人数、学历等。因为这些很可能是用户随便填写的，噪声很大。</p> 
<h3><a id="5_72"></a>5、特征分箱</h3> 
<p><strong>（1）Split分箱：决策树分箱</strong></p> 
<p>Split分箱是一种<strong>自上而下</strong>(即基于分裂)的数据分段方法。如下图所示，Split分箱和决策树比较相似，切分点的选择指标主要有 entropy，gini 指数和 IV值等。</p> 
<p><img src="https://images2.imgbox.com/35/ff/KUr5lyZO_o.png" alt="在这里插入图片描述"></p> 
<p><strong>（2）Merge分箱：卡方分箱</strong></p> 
<p>Merge分箱是一种<strong>自底向上</strong>(即基于合并)的数据离散化方法。如图4.3所示，Merge分箱常见的类型为卡方分箱。</p> 
<p><img src="https://images2.imgbox.com/1b/90/VyA1mZM9_o.png" alt="在这里插入图片描述"></p> 
<p><strong>（3）特征分箱的优势</strong></p> 
<ul><li> <p>特征分箱可以有效处理特征中的缺失值和异常值。</p> </li><li> <p>特征分箱后，数据和模型会更稳定。</p> </li><li> <p>特征分箱可以简化逻辑回归模型，降低模型过拟合的风险，提高模型的泛化能力。</p> </li><li> <p>将所有特征统一变换为类别型变量。</p> </li><li> <p>分箱后变量才可以使用标准的评分卡格式，即对不同的分段进行评分。</p> </li></ul> 
<h3><a id="6WOE_99"></a>6、WOE编码</h3> 
<p><strong>（1）WOE编码</strong></p> 
<p>分箱之后我们便得到了一系列的离散变量，下面需要对变量进行编码，将离散变量转化为连续变量。WOE编码是评分卡模型常用的编码方式。</p> 
<p>WOE 称为证据权重(weight of evidence)，是一种有监督的编码方式，将预测类别的集中度的属性作为编码的数值。对于自变量第i箱的WOE值为：</p> 
<p><img src="https://images2.imgbox.com/22/18/kwcQpbGQ_o.png" alt="在这里插入图片描述"></p> 
<p>其中， <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          p 
         
         
         
           i 
          
         
           1 
          
         
        
       
      
        p_{i1} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是第i箱中坏客户占所有坏客户的比例；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          p 
         
         
         
           i 
          
         
           0 
          
         
        
       
      
        p_{i0} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是第i箱中好客户占所有好客户的比例；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         # 
        
        
        
          B 
         
        
          i 
         
        
       
      
        \#B_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord">#</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.05017em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是第i箱中坏客户的人数；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         # 
        
        
        
          G 
         
        
          i 
         
        
       
      
        \#G_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord">#</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是第i箱中好客户的人数；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         # 
        
        
        
          B 
         
        
          T 
         
        
       
      
        \#B_T 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord">#</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.05017em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是所有坏客户的人数；</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         # 
        
        
        
          G 
         
        
          T 
         
        
       
      
        \#G_T 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord">#</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是所有好客户的人数；</p> 
<p>变换以后可以看出，WOE也可以理解为当前分箱中坏客户和好客户的比值，和所有样本中这个比值的差异 (也就是我们随机的坏客户和好客户的比例)。WOE越大，这种差异越大，当前分组里的坏客户的可能性就越大，WOE越小，差异越小，这个分组里的样本响应的可能性就越小。当分箱中坏客户和好客户的比例等于随机坏客户和好客户的比值时，说明这个分箱没有预测能力，即WOE=0。</p> 
<ul><li> <p>WOE是正值，相对于未分组，能识别更多的违约。</p> </li><li> <p>WOE是负值，相对于未分组，能识别更多的不违约。</p> </li></ul> 
<p>因此，WOE的符号代表分组在违约还是不违约情况下有相对优势，而WOE的绝对值越大优势就越明显。</p> 
<p>WOE具体计算过程如下表所示：</p> 
<p><img src="https://images2.imgbox.com/ca/8a/NLS4mxlR_o.png" alt="在这里插入图片描述"></p> 
<p><strong>（2）WOE编码的优势</strong></p> 
<ul><li> <p>可提升模型的预测效果</p> </li><li> <p>将自变量规范到同一尺度上</p> </li><li> <p>WOE能反映自变量取值的贡献情况</p> </li><li> <p>有利于对变量的每个分箱进行评分</p> </li><li> <p>转化为连续变量之后，便于分析变量与变量之间的相关性</p> </li><li> <p>与独热向量编码相比，可以保证变量的完整性，同时避免稀疏矩阵和维度灾难。</p> </li></ul> 
<h3><a id="7_147"></a>7、特征筛选</h3> 
<h4><a id="71__149"></a>7.1 预测能力</h4> 
<p>在筛选变量时，特征对目标变量的预测能力是首要考虑的内容，模型的效果主要取决于变量的预测力。这里总结几种常用的筛选变量的方法：</p> 
<h5><a id="711_IV_153"></a>7.1.1 IV值筛选</h5> 
<p>IV称为信息价值(information value)，是目前评分卡模型中筛选变量最常用的指标之一，自变量的IV值越大，表示自变量的预测能力越强。类似的指标还有信息增益、基尼(gini)系数等。常用判断标准如下表：</p> 
<table><thead><tr><th><strong>IV</strong>范围</th><th><strong>预测能力</strong></th></tr></thead><tbody><tr><td>&lt;0.02</td><td>无效</td></tr><tr><td>0.02-0.10</td><td>弱预测能力</td></tr><tr><td>0.10-0.20</td><td>中预测能力</td></tr><tr><td>&gt;0.20</td><td>强预测能力</td></tr></tbody></table> 
<p>计算变量中第i个分箱对应的 IV 值的计算公式为：</p> 
<p><img src="https://images2.imgbox.com/d2/c9/u5Nm2rzH_o.png" alt="在这里插入图片描述"></p> 
<p>变量对应的IV值为所有分箱对应的 IV 值之和：</p> 
<p><img src="https://images2.imgbox.com/ba/57/MTMe1Ics_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>从上式我们可以看出变量的 IV 值实际上是变量各个分箱的加权求和。且和交叉熵的计算过程有异曲同工之妙。以下为交叉熵公式：</p> 
 <p><img src="https://images2.imgbox.com/3e/1e/j9gezBzI_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>IV值的具体计算流程如下表：</p> 
<p><img src="https://images2.imgbox.com/72/08/BI3Yo8uD_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="712_stepwise_181"></a>7.1.2 stepwise筛选</h5> 
<p>基于stepwise的变量筛选方法也是评分卡中变量筛选最常用的方法之一。具体包括三种筛选变量的方式：</p> 
<ul><li> <p><strong>前向选择forward</strong>：逐步将变量一个一个放入模型，并计算相应的指标，如果指标值符合条件，则保留，然后再放入下一个变量，直到没有符合条件的变量纳入或者所有的变量都可纳入模型。</p> </li><li> <p><strong>后向选择backward</strong>：一开始将所有变量纳入模型，然后挨个移除不符合条件的变量，持续此过程，直到留下所有最优的变量为止。</p> </li><li> <p><strong>逐步选择stepwise</strong>：该算法是向前选择和向后选择的结合，逐步放入最优的变量、移除最差的变量。</p> </li></ul> 
<p>基于stepwise的筛选方法进行特征选择时，可以使用AIC、BIC、KS或AUC作为选择标准。其中，AIC和BIC准则可以在模型复杂度和模型对数据集描述能力之间寻求最佳平衡，通过加入模型复杂度的惩罚项来避免过拟合问题。下面介绍这两种模型选择方法。</p> 
<p><strong>（1）赤池信息准则AIC</strong></p> 
<p>AIC是衡量统计模型拟合优良性的一种准则，它是建立熵的概念上，提供了权衡估计模型复杂度和拟合数据优良性的标准。</p> 
<p>通常情况下，AIC定义为：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          A 
         
        
          I 
         
        
          C 
         
        
          = 
         
        
          2 
         
        
          k 
         
        
          − 
         
        
          2 
         
        
          l 
         
        
          n 
         
        
          L 
         
        
       
         AIC=2k-2lnL 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">n</span><span class="mord mathdefault">L</span></span></span></span></span></span><br> 其中，k是模型参数个数，L是似然函数。从一组可供选择的模型中选择最佳模型时，通常选择AIC最小的模型。</p> 
<p>当两个模型之间存在较大差异时，差异主要体现在似然函数项，当似然函数差异不显著时，式中第一项，即模型复杂度会起作用，从而表明参数个数少的模型是较好的选择。</p> 
<p>一般而言，当模型复杂度提高（k增大）时，似然函数L也会增大，从而使AIC变小，但是k过大时，似然函数增速减缓，导致AIC增大。模型过于复杂容易造成过拟合现象。</p> 
<p>所以目标就是选取AIC最小的模型，AIC不仅要提高模型拟合度（极大似然），而且要引入惩罚项，使模型参数尽可能少，从而降低过拟合的可能性。</p> 
<p><strong>（2）贝叶斯信息准则BIC</strong></p> 
<p>BIC与AIC相似，更多地用于模型选择。训练模型时，增加参数数量，也就是增加模型复杂度，会增大似然函数，但是也会导致过拟合现象，针对该问题，AIC和BIC均引入了与模型参数个数相关的惩罚项，BIC的惩罚项比AIC的大。同时要考虑样本数量，样本数量过多时，可有效防止模型精度过高造成的模型复杂度过高。<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          B 
         
        
          I 
         
        
          C 
         
        
          = 
         
        
          k 
         
        
          l 
         
        
          n 
         
        
          n 
         
        
          − 
         
        
          2 
         
        
          l 
         
        
          n 
         
        
          L 
         
        
       
         BIC=klnn-2lnL 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">n</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">n</span><span class="mord mathdefault">L</span></span></span></span></span></span><br> 其中，k为模型参数个数，n为样本数量，L为似然函数。 惩罚项在维度过大且训练样本数量相对较少的情况下，可以有效避免出现维度灾难现象。</p> 
<h5><a id="713__213"></a>7.1.3 特征重要度筛选</h5> 
<p>随机森林计算特征重要度的步骤：</p> 
<ul><li> <p>对每一颗决策树，选择相应的袋外数据（OOB）计算袋外数据误差，记为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           e 
          
         
           r 
          
          
          
            r 
           
           
           
             O 
            
           
             O 
            
           
             B 
            
           
             1 
            
           
          
         
        
          err_{OOB1} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right: 0.05017em;">B</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>；</p> </li><li> <p>随机对袋外数据OOB所有样本的特征加入噪声干扰(随机的改变样本在该特征的值)，再次计算袋外数据误差，记为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           e 
          
         
           r 
          
          
          
            r 
           
           
           
             O 
            
           
             O 
            
           
             B 
            
           
             2 
            
           
          
         
        
          err_{OOB2} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right: 0.05017em;">B</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>；</p> </li><li> <p>特征的重要度=<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            1 
           
          
            N 
           
          
         
           ∑ 
          
         
           ( 
          
         
           e 
          
         
           r 
          
          
          
            r 
           
           
           
             O 
            
           
             O 
            
           
             B 
            
           
             2 
            
           
          
         
           − 
          
         
           e 
          
         
           r 
          
          
          
            r 
           
           
           
             O 
            
           
             O 
            
           
             B 
            
           
             1 
            
           
          
         
           ) 
          
         
        
          {1\over N}\sum(err_{OOB2}-err_{OOB1}) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.10903em;">N</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right: 0.05017em;">B</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right: 0.05017em;">B</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，N 表示随机森林中决策树的个数。</p> </li></ul> 
<p>当改变样本在该特征的值，若袋外数据准确率大幅度下降，则该特征对于样本的预测结果有很大影响，说明特征的重要度比较高。</p> 
<p><strong>GBDT计算特征重要度的原理：</strong></p> 
<p>特征 j 在单颗树中的重要度的如下：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
          
          
            J 
           
          
            ^ 
           
          
         
           j 
          
         
           2 
          
         
        
          ( 
         
        
          T 
         
        
          ) 
         
        
          = 
         
         
         
           ∑ 
          
          
          
            t 
           
          
            = 
           
          
            1 
           
          
          
          
            L 
           
          
            − 
           
          
            1 
           
          
         
         
          
           
           
             i 
            
           
             ^ 
            
           
          
            t 
           
          
            2 
           
          
         
           1 
          
         
           ( 
          
          
          
            v 
           
          
            t 
           
          
         
           = 
          
         
           j 
          
         
           ) 
          
         
        
       
         \hat J^2_{j}(T)= \sum\limits_{t=1}^{L-1}{\hat i^2_{t}1(v_{t}=j)} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.32988em; vertical-align: -0.383108em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94677em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.09618em;">J</span></span><span class="" style="top: -3.25233em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.08333em;">^</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -2.453em; margin-left: -0.09618em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 3.09545em; vertical-align: -1.26711em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.82834em;"><span class="" style="top: -1.88289em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.26711em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.92296em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">i</span></span><span class="" style="top: -3.22852em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.25em;">^</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mord">1</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span></span></span></span></p> 
<p>其中，L 为树的叶子节点数量；L-1 为树的非叶子节点数量；<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          v 
         
        
          t 
         
        
       
      
        v_t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是和节点 t 相关联的特征；<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          i 
         
        
          t 
         
        
          2 
         
        
       
      
        i_t^2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.06111em; vertical-align: -0.247em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是节点 t 分裂之后平方误差的减少值。</p> 
<p>特征j的全局重要度为特征j在单颗树中的重要度的平均值：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
          
          
            J 
           
          
            ^ 
           
          
         
           j 
          
         
           2 
          
         
        
          ( 
         
        
          T 
         
        
          ) 
         
        
          = 
         
         
         
           1 
          
         
           M 
          
         
         
         
           ∑ 
          
          
          
            m 
           
          
            = 
           
          
            1 
           
          
         
           M 
          
         
         
          
           
           
             J 
            
           
             ^ 
            
           
          
            j 
           
          
            2 
           
          
         
           ( 
          
          
          
            T 
           
          
            m 
           
          
         
           ) 
          
         
        
       
         \hat J^2_{j}(T)= {1\over M}\sum\limits_{m=1}^{M}{\hat J^2_{j}(T_m)} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.32988em; vertical-align: -0.383108em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94677em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.09618em;">J</span></span><span class="" style="top: -3.25233em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.08333em;">^</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -2.453em; margin-left: -0.09618em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 3.09545em; vertical-align: -1.26711em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10903em;">M</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.82834em;"><span class="" style="top: -1.88289em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.26711em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94677em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.09618em;">J</span></span><span class="" style="top: -3.25233em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.08333em;">^</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -2.453em; margin-left: -0.09618em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></span></p> 
<p>其中，M是树的数量。</p> 
<h5><a id="714_LASSO_239"></a>7.1.4 LASSO正则化筛选</h5> 
<p>L1正则化通常称为Lasso正则化，它是在代价函数上增加了一个L1范数：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          J 
         
        
          ( 
         
        
          θ 
         
        
          ) 
         
        
          = 
         
        
          − 
         
         
         
           ∑ 
          
          
          
            i 
           
          
            = 
           
          
            1 
           
          
         
           M 
          
         
        
          ( 
         
         
         
           y 
          
          
          
            ( 
           
          
            i 
           
          
            ) 
           
          
         
        
          l 
         
        
          o 
         
        
          g 
         
        
          ( 
         
         
         
           h 
          
         
           θ 
          
         
        
          ( 
         
         
         
           x 
          
          
          
            { 
           
          
            i 
           
          
            } 
           
          
         
        
          ) 
         
        
          ) 
         
        
          + 
         
        
          ( 
         
        
          1 
         
        
          − 
         
         
         
           y 
          
          
          
            ( 
           
          
            i 
           
          
            ) 
           
          
         
        
          ) 
         
        
          l 
         
        
          o 
         
        
          g 
         
        
          ( 
         
        
          1 
         
        
          − 
         
         
         
           h 
          
         
           θ 
          
         
        
          ( 
         
         
         
           x 
          
          
          
            { 
           
          
            i 
           
          
            } 
           
          
         
        
          ) 
         
        
          ) 
         
        
          ) 
         
        
          + 
         
         
         
           λ 
          
         
           m 
          
         
         
         
           ∑ 
          
          
          
            j 
           
          
            = 
           
          
            1 
           
          
         
           n 
          
         
        
          ∣ 
         
         
         
           θ 
          
         
           j 
          
         
        
          ∣ 
         
        
       
         J(\theta)=-\sum\limits_{i=1}^{M}(y^{(i)}log(h_{\theta}(x^{\{i\}}))+(1-y^{(i)})log(1-h_{\theta}(x^{\{i\}})))+{\lambda\over{m}}\sum\limits_{j=1}^{n}|\theta_j| 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.09618em;">J</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 3.10601em; vertical-align: -1.27767em;"></span><span class="mord">−</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.82834em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.938em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.938em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">{<!-- --></span><span class="mord mathdefault mtight">i</span><span class="mclose mtight">}</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.188em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.938em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.188em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.02778em;">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.938em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">{<!-- --></span><span class="mord mathdefault mtight">i</span><span class="mclose mtight">}</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 3.06517em; vertical-align: -1.41378em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.6514em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.30001em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.41378em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord">∣</span></span></span></span></span></span></p> 
<p>L1正则化能起到使参数更加稀疏的作用，稀疏化的结果使优化后的参数一部分为0，另一部分为非零实值。非零实值的那部分参数可起到选择重要参数或特征维度的作用，同时可起到去除噪声的效果。</p> 
<h5><a id="715__247"></a>7.1.5 两两相关性分析</h5> 
<p>对于自变量<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
        
          1 
         
        
       
         , 
        
        
        
          X 
         
        
          2 
         
        
       
      
        X_1,X_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，如果存在常数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          c 
         
        
          0 
         
        
       
         , 
        
        
        
          c 
         
        
          1 
         
        
       
         , 
        
        
        
          c 
         
        
          2 
         
        
       
      
        c_0,c_1,c_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>使得以下线性等式近似成立：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           c 
          
         
           1 
          
         
         
         
           X 
          
         
           1 
          
         
        
          + 
         
         
         
           c 
          
         
           2 
          
         
         
         
           X 
          
         
           2 
          
         
        
          ≈ 
         
         
         
           c 
          
         
           0 
          
         
        
       
         c_1X_1 + c_2X_2 \approx c_0 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></p> 
<p>称自变量<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
        
          1 
         
        
       
         , 
        
        
        
          X 
         
        
          2 
         
        
       
      
        X_1,X_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>具有较强的线性相关性。</p> 
<p>两变量间的线性相关性可以利用皮尔森相关系数来衡量。系数的取值为[-1,1]，相关系数越接近0的说明两变量线性相关性越弱，越接近1或-1两变量线性相关性越强。</p> 
<p><img src="https://images2.imgbox.com/53/67/K024shBW_o.png" alt="在这里插入图片描述"></p> 
<p>当两变量间的相关系数大于阈值时（一般阈值设为 0.7），剔除IV值较低的变量，或分箱严重不均衡的变量。</p> 
<h5><a id="716__261"></a>7.1.6 多重共线性分析</h5> 
<p>对于自变量<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
        
          1 
         
        
       
         , 
        
        
        
          X 
         
        
          2 
         
        
       
         , 
        
       
         . 
        
       
         . 
        
       
         . 
        
       
         , 
        
        
        
          X 
         
        
          n 
         
        
       
      
        X_1,X_2,...,X_n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，如果存在常数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          c 
         
        
          0 
         
        
       
         , 
        
        
        
          c 
         
        
          1 
         
        
       
         , 
        
        
        
          c 
         
        
          2 
         
        
       
         , 
        
       
         . 
        
       
         . 
        
       
         . 
        
       
         , 
        
        
        
          c 
         
        
          n 
         
        
       
      
        c_0,c_1,c_2,...,c_n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>使得以下线性等式近似成立：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           c 
          
         
           1 
          
         
         
         
           X 
          
         
           1 
          
         
        
          + 
         
         
         
           c 
          
         
           2 
          
         
         
         
           X 
          
         
           2 
          
         
        
          + 
         
        
          . 
         
        
          . 
         
        
          . 
         
        
          + 
         
         
         
           c 
          
         
           n 
          
         
         
         
           X 
          
         
           n 
          
         
        
          = 
         
         
         
           c 
          
         
           0 
          
         
        
       
         c_1X_1+c_2X_2+...+c_nX_n=c_0 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></p> 
<p>称自变量<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
        
          1 
         
        
       
         , 
        
        
        
          X 
         
        
          2 
         
        
       
         , 
        
       
         . 
        
       
         . 
        
       
         . 
        
       
         , 
        
        
        
          X 
         
        
          n 
         
        
       
      
        X_1,X_2,...,X_n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>具有较强的多重共线性。</p> 
<p>通常用VIF值来衡量一个变量和其他变量的多重共线性：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          V 
         
        
          I 
         
         
         
           F 
          
         
           i 
          
         
        
          = 
         
         
         
           1 
          
          
          
            1 
           
          
            − 
           
           
           
             R 
            
           
             i 
            
           
             2 
            
           
          
         
        
       
         VIF_i={1\over{1-R^2_i}} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">V</span><span class="mord mathdefault" style="margin-right: 0.07847em;">I</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.2843em; vertical-align: -0.962864em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.795908em;"><span class="" style="top: -2.42314em; margin-left: -0.00773em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span><span class="" style="top: -3.0448em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.276864em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.962864em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></span></p> 
<p>其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
        
          i 
         
        
       
      
        R_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.00773em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
        
          i 
         
        
       
      
        X_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>与其他自变量的复相关系数。</p> 
<p><img src="https://images2.imgbox.com/a4/72/eSoG8Vk2_o.png" alt="在这里插入图片描述"></p> 
<p>其中， 为其他变量的线性表示。</p> 
<p><img src="https://images2.imgbox.com/ad/f3/BXR1867o_o.png" alt="在这里插入图片描述"></p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
         
         
           X 
          
         
           ^ 
          
         
        
          i 
         
        
       
      
        \hat X_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.09677em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.94677em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span></span><span class="" style="top: -3.25233em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.16666em;">^</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为变量<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
        
          i 
         
        
       
      
        X_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的均值。</p> 
<p>当某个变量的VIF大于阈值时（一般阈值设为10 或 7），需要逐一剔除解释变量。当剔除掉<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
        
          k 
         
        
       
      
        X_k 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>时发现VIF低于阈值，则从<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
        
          k 
         
        
       
      
        X_k 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
        
          i 
         
        
       
      
        X_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>中剔除IV值较低的一个。</p> 
<blockquote> 
 <p><strong>为什么要进行相关性分析？</strong></p> 
 <p>设想建立一个具有两变量<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
         
           1 
          
         
        
       
         X_1 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
         
           2 
          
         
        
       
         X_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的线性模型，真实模型是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          Y 
         
        
          = 
         
         
         
           X 
          
         
           1 
          
         
        
          + 
         
         
         
           X 
          
         
           2 
          
         
        
       
         Y=X_1+X_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
         
           1 
          
         
        
       
         X_1 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
         
           2 
          
         
        
       
         X_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>线性相关（比如说 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
         
           1 
          
         
        
          ≈ 
         
        
          2 
         
         
         
           X 
          
         
           2 
          
         
        
       
         X_1 \approx 2X_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>），那么拟合模型<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          Y 
         
        
          = 
         
        
          3 
         
         
         
           X 
          
         
           2 
          
         
        
       
         Y=3X_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord">3</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>, <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          Y 
         
        
          = 
         
        
          2 
         
         
         
           X 
          
         
           1 
          
         
        
          − 
         
         
         
           X 
          
         
           2 
          
         
        
       
         Y=2X_1-X_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>或<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          Y 
         
        
          = 
         
        
          51 
         
         
         
           X 
          
         
           1 
          
         
        
          − 
         
        
          99 
         
         
         
           X 
          
         
           2 
          
         
        
       
         Y=51X_1-99X_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord">9</span><span class="mord">9</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的效果都一样好，理想状态下，系数权重会有无数种取法，使系数权重变得无法解释，导致变量的每个分段的得分也有无数种取法（后面我们会发现变量中不同分段的评分会用到变量的系数）。</p> 
 <p>即使不进行线性相关性分析也不会影响模型的整体性能，进行相关性分析只是为了让我们的模型更易于解释，保证不同的分箱的得分正确。</p> 
 <p><strong>决策树、随机森林的多重共线性问题：</strong></p> 
 <p>多重共线性的特征不会对决策树、随机森林的预测能力有影响，但是数据的解释性会被多重共线性影响。随机森林可以返回特征的重要性（importantce），当有多重共线性时，importance会被影响。一些具体多重共线性的特征的重要性会被相互抵消，从而影响我们解释和理解特征。比如说，特征A和B完全一样，我们在用随机森林时，它们的重要性应该非常接近（考虑到随机性）。如果我们在训练前删除特征B，那么特征A的重要性就会翻番。这一下子就影响了我们对特征、数据的理解。。</p> 
</blockquote> 
<h4><a id="72__296"></a>7.2 稳定性</h4> 
<p>在模型中使用不稳定的变量，可能会影响样本人群的代表性和评分的稳定性。通常通过计算变量在开发样本和跨时间样本上的群体稳定性指标（PopulationStability Index，即PSI）对变量的稳定性进行评估。PSI的计算公式如下：</p> 
<p><img src="https://images2.imgbox.com/08/f5/0tbfn4nv_o.png" alt="在这里插入图片描述"></p> 
<p>其中：PSI是对两个日期的特征数据进行计算，可以任选其一作为base集，另一则是test集（也可称为expected集和actual集），用字母i表示第i个分段区间。</p> 
<p>特征的PSI计算过程如下：</p> 
<p>（1） 特征取值等频分段：对这个特征在base集的取值进行等频划分（通常等频分10份即可）。</p> 
<p>（2） 计算<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          p 
         
         
         
           b 
          
         
           a 
          
         
           s 
          
         
           e 
          
         
        
          i 
         
        
       
      
        p^i_{base} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.10777em; vertical-align: -0.283108em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.824664em;"><span class="" style="top: -2.41689em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">e</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.283108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>：统计落在每个分段区间内的目标数量，进一步得到数量占比，表示该特征在base集中第i个取值分段中的数量占比。</p> 
<p>（3） 计算<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          p 
         
         
         
           t 
          
         
           e 
          
         
           s 
          
         
           t 
          
         
        
          i 
         
        
       
      
        p^i_{test} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.07166em; vertical-align: -0.247em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.824664em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">t</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span></span></span></span></span>：按照（2）中的方式计算test集的<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          p 
         
         
         
           t 
          
         
           e 
          
         
           s 
          
         
           t 
          
         
        
          i 
         
        
       
      
        p^i_{test} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.07166em; vertical-align: -0.247em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.824664em;"><span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">t</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。需要注意的是，分段还是采用第1步得到的分段（依据base集的分段）。</p> 
<p>（4） 根据公式即可计算得到该特征基于这两个日期的PSI。</p> 
<p>通常，如果一个特征跨度6个月的PSI取值小于0.1，那么这个特征被认为是稳定的（当然，也可以根据具体情况适当放宽0.1的标准）。</p> 
<p>注意：并非所有PSI值很高的特征都不能用于建模，如果一个特征区分度很好但PSI值不满足预期（比如跨度6个月的PSI大于0.1），但同时，该特征的取值波动性从业务的角度可以解释得通，那么这样的特征用于建模也是可以的。</p> 
<h4><a id="73__318"></a>7.3 单调性</h4> 
<p>通常情况下，单个变量在模型中的作用必须具有单调性。变量好坏分布的单调性越强，定量模型的性能将越好。在现实数据中，完全单调的情况是很少出现的，更多的情况是在总体趋势保持单调的同时，存在一定波动。模型开发一般采用将坏帐率接近、业务同质性高的群体合并来对变量分箱(classing)，以帮助业务人员理解总体趋势。</p> 
<p>在特征分箱后，一般通过可视化的方式度量变量的单调性，如果分箱方式不满足单调性的要求，可调整分箱。如下图所示为某变量分箱后，训练集和测试集下每一箱对应的坏样本率，可以看到图中的第一箱和第二箱的bad_rate存在倒挂，说明bad_rate不单调，需要进行调整。可以尝试将第一箱和第二箱进行合并。</p> 
<p><img src="https://images2.imgbox.com/be/4f/oki3v89c_o.png" alt="在这里插入图片描述"></p> 
<p>调整分箱后的bad_rate如下图2所示，bad_rate单调：</p> 
<p><img src="https://images2.imgbox.com/1b/93/HZEejNON_o.png" alt="在这里插入图片描述"></p> 
<p>绘制该变量每一箱的样本比例和bad_rate，如下图所示：</p> 
<p><img src="https://images2.imgbox.com/0f/dd/OjIHnhLB_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="74__334"></a>7.4 业务合理性</h4> 
<p>定量评分模型需要注重模型变量的业务合理性和解释性，鉴于风险控制的严谨性，在风险建模中更要特别慎重。然而，出于种种已知或未知的原因，统计上显著的变量，其在定量模型中的作用不一定与常识和业务经验一致。为了避免由此可能导致的错误决策，模型开发需参考业务部门的意见和建议，确保变量在不同取值下，好坏分布的总体趋势与业务经验一致。</p> 
<h4><a id="75__338"></a>7.5 特征筛选的作用</h4> 
<p>建模之前的特征筛选通常会进行两次，第一次会在特征分箱之前进行粗筛选，排除没有预测能力的变量；第二次会在特征分箱后进行细筛选，筛选出预测能力强，具有单调性，且业务上可解释的变量。特征筛选在建模过程中非常重要，一般来说具有如下好处：</p> 
<ul><li> <p>剔除跟目标变量不太相关的特征</p> </li><li> <p>消除由于线性相关的变量，避免特征冗余</p> </li><li> <p>减轻后期验证、部署、监控的负担</p> </li><li> <p>保证变量的可解释性</p> </li></ul> 
<h3><a id="8_350"></a>8、逻辑回归模型</h3> 
<p>构建初步的逻辑回归模型，根据p-value进行变量筛选，根据各个变量的系数符号进行筛选，得到最终的逻辑回归模型。</p> 
<p>由于逻辑回归模型具有简单、稳定、可解释性强，技术成熟和易于检测和部署等优势，逻辑回归是标准评分卡所使用的算法。</p> 
<h4><a id="81__356"></a>8.1 变量系数符号筛选</h4> 
<p>检查逻辑回归模型中各个变量的系数，如果所有变量的系数均为正数，模型有效。假如有一些变量的系数出现了负数，说明有一些自变量的线性相关性较强，需要进一步进行变量筛选。通常的做法是：</p> 
<p>（1） 综合考虑变量的IV值和业务建议，按照变量的优先级进行降序排列；</p> 
<p>（2） 选择优先级最高的4-5个基本变量；</p> 
<p>（3） 按优先级从高到低逐渐添加变量，当新添加的变量之后，出现系数为负的情况，舍弃该变量；</p> 
<p>（4） 直到添加最后一个变量。</p> 
<h4><a id="82_pvalue_368"></a>8.2 变量p-value筛选</h4> 
<p>p-value是假设检验的里面的概念。模型假设某自变量与因变量线性无关，p-value可以理解为该假设成立的可能性 (便于理解，不太准确)。一般，当p-value大于阈值时，表示假设显著，即自变量与因变量线性无关；当p-value小于阈值时，表示假设不显著，即自变量与因变量线性相关。阈值又称为显著性水平，通常取0.05。</p> 
<p>因此，当某个字段的p-value大于0.05时，应该删除此变量。</p> 
<h3><a id="9__374"></a>9 生成标准评分卡</h3> 
<h4><a id="91__376"></a>9.1 评分转换</h4> 
<p>我们将客户违约的概率表示为p，则正常的概率为1-p。由逻辑回归的基本原理可得：</p> 
<p><img src="https://images2.imgbox.com/6c/c2/3qlMnIjj_o.png" alt="在这里插入图片描述"></p> 
<p>整理以上公式：</p> 
<p><img src="https://images2.imgbox.com/37/ae/fcEvC2Lk_o.png" alt="在这里插入图片描述"></p> 
<p>我们可以定义比率来表示客户违约的相对概率：<br> <img src="https://images2.imgbox.com/73/f6/1bAABgJJ_o.png" alt="在这里插入图片描述"></p> 
<p>将odds带入可得：<br> <img src="https://images2.imgbox.com/f4/e1/aqtgKjhw_o.png" alt="在这里插入图片描述"></p> 
<p>评分卡的分值可以定义为比率对数的线性表达来，即：</p> 
<p><img src="https://images2.imgbox.com/d9/6c/RBIaC0c1_o.png" alt="在这里插入图片描述"></p> 
<p>其中，A与B是常数，B前面的负号可以使得违约概率越低，得分越高。通常情况下，即高分值代表低风险，低分值代表高风险。</p> 
<p>A、B的值可以通过将两个已知或假设的分值带入计算得到。通常情况下，需要设定两个假设：</p> 
<ul><li> <p>某个特定的违约概率下的预期评分，即比率odds为 时的分数为 ；</p> </li><li> <p>该违约概率翻倍的评分（PDO）；</p> </li></ul> 
<p>根据以上的分析，则odds为 时的分数为 ，代入以上线性表达式，可得：</p> 
<p><img src="https://images2.imgbox.com/72/3e/10nh4hqn_o.png" alt="在这里插入图片描述"></p> 
<p>解该方程组，可得：</p> 
<p><img src="https://images2.imgbox.com/76/e3/vHWSfnJ2_o.png" alt="在这里插入图片描述"></p> 
<p>在实际的应用中，我们会计算出每个变量的各分箱对应的分值。新用户产生时，对应到每个分箱的值，将这些值相加，最后加上初始基础分，得到最终的结果。<br> <img src="https://images2.imgbox.com/ba/1d/no02jAPZ_o.png" alt="在这里插入图片描述"></p> 
<p>式中：变量 是出现在最终模型的入模变量。由于所有的入模变量都进行了WOE编码，可以将这些自变量中的每一个都写作 的形式：</p> 
<p><img src="https://images2.imgbox.com/08/e7/VbXR9Vau_o.png" alt="在这里插入图片描述"></p> 
<p>其中， 为基础分数； 为逻辑回归中第 个自变量的系数； 为第 个变量的第 个分箱的WOE值， 是0，1逻辑变量，当 代表自变量 取第 个分箱，当 代表自变量 不取第 个分箱。最终得到下表所示的评分卡模型的评分表：<br> <img src="https://images2.imgbox.com/19/f1/HskIcY6A_o.png" alt="在这里插入图片描述"></p> 
<p>从以上公式中，我们发现每个分箱的评分都可以表示为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         − 
        
       
         B 
        
       
         ( 
        
        
        
          θ 
         
        
          i 
         
        
        
        
          ω 
         
         
         
           i 
          
         
           j 
          
         
        
       
         ) 
        
       
      
        -B(\theta_i\omega_{ij}) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord">−</span><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，也就是说影响每个分箱的因素包括三部分，分别为参数B，变量系数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          θ 
         
        
          i 
         
        
       
      
        \theta_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，和对应分箱的WOE编码<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          ω 
         
         
         
           i 
          
         
           j 
          
         
        
       
      
        \omega_{ij} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.716668em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。</p> 
<h4><a id="92__424"></a>9.2 评分卡生成</h4> 
<p>在进行评分映射的时候，通常采用如下公式：</p> 
<p><img src="https://images2.imgbox.com/28/d5/SZ8hQ0PA_o.png" alt="在这里插入图片描述"></p> 
<p>其中，当Odds=10时，基础分score=600，PDO=20。</p> 
<p>一个用户的总评分等于基准分加上对客户各个属性的评分。以表中的评分卡为例，某客户年龄为27岁，性别为男，婚姻状况为已婚，学历为本科，月收入为10000，那么他的评分为:</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          223 
         
        
          （ 
         
        
          基 
         
        
          准 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          8 
         
        
          （ 
         
        
          年 
         
        
          龄 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          4 
         
        
          （ 
         
        
          性 
         
        
          别 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          8 
         
        
          （ 
         
        
          婚 
         
        
          姻 
         
        
          状 
         
        
          况 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          8 
         
        
          （ 
         
        
          学 
         
        
          历 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          + 
         
        
          13 
         
        
          （ 
         
        
          月 
         
        
          收 
         
        
          入 
         
        
          评 
         
        
          分 
         
        
          ） 
         
        
          = 
         
        
          264 
         
        
       
         223（基准分）+8（年龄评分）+4（性别评分）+8（婚姻状况评分）+8（学历评分）+13（月收入评分）= 264 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">3</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">基</span><span class="mord cjk_fallback">准</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">8</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">年</span><span class="mord cjk_fallback">龄</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">性</span><span class="mord cjk_fallback">别</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">8</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">婚</span><span class="mord cjk_fallback">姻</span><span class="mord cjk_fallback">状</span><span class="mord cjk_fallback">况</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">8</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">学</span><span class="mord cjk_fallback">历</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">月</span><span class="mord cjk_fallback">收</span><span class="mord cjk_fallback">入</span><span class="mord cjk_fallback">评</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">2</span><span class="mord">6</span><span class="mord">4</span></span></span></span></span></span></p> 
<p><img src="https://images2.imgbox.com/e2/6e/4DphrjOp_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="10__438"></a>10 模型评估</h3> 
<p><strong>（1）回归结果检查</strong></p> 
<p>由于WOE与违约概率之间存在着某种反向趋势，在此基础上，我们可以预料到模型拟合出来的自变量系数应该都是正数，如果结果中出现了负数，应当考虑是否是来自自变量多重共线性的影响。</p> 
<p>为了检测定量模型的预测变量间是否存在严重的多重共线性，通常运用线性回归过程计算方差膨胀系数（Variance Inflation Factor）。VIF表示的是某个自变量能被其它自变量解释的程度，VIF值越高，多重共线性越严重。一般设定VIF值不高于10。若存在严重的多重共线性，则根据P值（显著性检验p值&gt;0.05）将最不显著的变量予以删除。</p> 
<p>若各个变量的VIF值都远远小于10，则说明上述模型中的变量都未出现显著的多重共线性。</p> 
<p><strong>（2）模型评估指标及应用场景</strong></p> 
<p>一般采用准确率、召回率、KS值、AUC值、Gini系数、提升（lift）指数来评价模型的区分能力/预测能力。</p> 
<ul><li><strong>准确率</strong></li></ul> 
<p>对于二分类任务，准确率是最常用的评价指标，介绍评价指标之前需要先了解“混淆矩阵”，如下表所示：</p> 
<p><img src="https://images2.imgbox.com/d2/aa/4lScEkN0_o.png" alt="在这里插入图片描述"></p> 
<p>其中：TP (真正例)：将正类预测为正类数；TN (真负例)：将负类预测为负类数；FP (假正例)：将负类预测为正类数；FN (假负例)：将正类预测为负类数；</p> 
<p>精确率(precision)的计算公式为：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          p 
         
        
          = 
         
         
          
          
            T 
           
          
            P 
           
          
          
          
            T 
           
          
            P 
           
          
            + 
           
          
            F 
           
          
            N 
           
          
         
        
       
         p={TP\over{TP+FN}} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.12966em; vertical-align: -0.76933em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.36033em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.76933em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></span></p> 
<p>精确率是针对预测结果而言的，表示模型预测为正的样本中有多少比例是真正的正样本。</p> 
<ul><li><strong>召回率</strong></li></ul> 
<p>召回率(recall)计算公式为：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          P 
         
        
          = 
         
         
          
          
            T 
           
          
            P 
           
          
          
          
            T 
           
          
            P 
           
          
            + 
           
          
            F 
           
          
            N 
           
          
         
        
       
         P={TP\over {TP+FN}} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.12966em; vertical-align: -0.76933em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.36033em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.76933em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></span></p> 
<p>召回率是针对原来的样本而言的，表示样本中的正例有多少比例被预测正确。</p> 
<ul><li><strong>KS值</strong></li></ul> 
<p>KS是使用同一评分标尺下，累计好客户百分比与坏客户百分比的最大差距，如图5所示KS值为0.37。通常评分越低客户表现越坏，而评分越高客户的表现越好。如果评分区分好坏客户的能力越高，KS就会越高。理论上KS的取值在0-100%之间，常见的评分卡KS的取值范围多在25%-75%之间。KS值达到28%以上，认为模型有效。KS值常用于风控模型评估。</p> 
<p><img src="https://images2.imgbox.com/31/c1/Fxwftk7D_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>AUC</strong></li></ul> 
<p>ROC曲线是评价风控模型好坏的重要手段。它是通过在0到1之间改变混合矩阵的临界值，绘制分类准确的违约记录比例（TPR）与分类错误的正常记录比例（FPR）而得到的，如图5所示。</p> 
<p><img src="https://images2.imgbox.com/80/49/uEspJcdm_o.png" alt="在这里插入图片描述"></p> 
<p>鉴于ROC曲线的定义，对角线以上的图形越高，模型就越好。ROC曲线之下的面积被称为AUC统计量，AUC值越大，建立的评分卡越可靠。AUC值达到0.70，认为模型有效。</p> 
<ul><li><strong>Gini系数</strong></li></ul> 
<p>Gini系数是以累计的好客户和坏客户为坐标的曲线下面积（0和0.5之间）与0.5的比值。Gini系数越高，说明评分卡的区分能力越强。Gini系数等于0说明评分卡没有任何区分能力，Gini系数等于100%则是理论上完美的评分卡。Gini系数用作风控模型评价指标。</p> 
<ul><li><strong>提升指数</strong></li></ul> 
<p>提升指数常用作营销模型的评价指标，衡量的是，与不利用模型相比，模型的预测能力变好了多少。不利用模型时，营销成功概率可用样本的营销成功比例来做估计值。建立营销模型的目的是提高营销成功的概率，减少营销成本。因此常将模型预测概率降序排列取出top10%的样本作为营销对象，统计这些营销对象中实际营销成功的比例，若top10%的样本中有60%的营销成功样例，而建模样本中的营销成功样例仅有20%，则提升指数=3，lift越大，模型效果越好。</p> 
<p><strong>（3）模型排序能力</strong></p> 
<p>模型的排序能力是指将人群按评分从低到高分组排序后，高分段组别的坏帐率应小于底分段组别。评分与坏帐率之间应存在单调递减的关系。一个较好的评分卡很少发生低分段组别的坏帐率低于高分段组别坏帐率的现象，即排序能力的跳动。如果这种跳动在很多组别发生，说明评分卡的排序能力存在问题。</p> 
<p>如图所示，随着分数的上升，人群的坏账率呈现逐渐下降趋势，模型具有较好的排序能力。</p> 
<p><img src="https://images2.imgbox.com/13/f9/fnL0PrLF_o.png" alt="在这里插入图片描述"></p> 
<p><strong>（4）跨时间验证</strong></p> 
<p>模型建立完成后，可按期对最新时点的数据进行监控，具体包括以下内容：</p> 
<p>• 评分分布的稳定性检验</p> 
<p>• 评分变量的稳定性检验</p> 
<p>稳定性指数（PSI）用于测量评分或变量在开发时点和验证时点群体的分布是否保持基本一致。明显的分布变动可能导致建模时点的评分或变量对当前的人群已经不再适用。</p> 
<p>群体稳定性系数PSI用于显示，与开发样本比较，当前群体是否有时间上的变更。若评分分布和评分变量的稳定性发生较大变化，则需考虑调整更新模型，避免模型预测效果降低。</p> 
<p><strong>（5）BCR和解释性</strong></p> 
<p>在贷中评分卡设计之中，我们考虑到的不仅仅是贷款笔数的逾期水平，同样更重要的要考虑到最终贷款金额逾期的情况。这种观察指标主要是BCR（Balance Control Ratio），这个指标在常见的消费金融领域、信用卡领域都十分重要。特别是在贷中评分卡的运用上，一定要认识到贷中评分卡的使用会导致BCR发生如何的变动，以及分数调整对BCR的敏感程度。假设分数调整虽然能够降低今后贷款笔数的逾期率，但会导致BCR的显著提升，最终导致金额逾期率的上涨，那么这种分数的调整就需要进行重新斟酌。</p> 
<p>同样另外一个需要值得关注的是贷中评分卡的可解释性，这是因为，贷中评分卡主要涉及的是已经成熟在金融机构有过多笔还款的客户，这部分客户已经和金融机构有着一定的合作关系，如果贸然直接使用不可解释的模型进行风控，则会导致已有客户的大量投诉和反馈。如果客户将这种反馈意见反映至银监会、互联网等机构，会导致金融机构声誉的下降，同时也会对现有客户造成一定的负面影响，从而导致逾期率的提升，所以贷中评分卡的可解释性也是十分关键的。</p> 
<h3><a id="11__522"></a>11 评分应用策略</h3> 
<p>客户需求随时间改变，很可能会要求更高额度。这种现象很正常，刚开始给予客户的初始额度偏保守，维持客户关系一段时间后，账户表现会显示一个较为明确的发展方向，贷款机构也逐渐更接受客户，授予更高的额度，这时贷中评分卡就会发挥作用。</p> 
<p>有些贷款机构通过设置一些简单的规则来进行调额，但是结合客户使用率和贷中评分卡的风险评分进行决策更加科学，这种决策方式的表现如图7所示：</p> 
<p><img src="https://images2.imgbox.com/29/54/MdwgKkvv_o.png" alt="在这里插入图片描述"></p> 
<p>注：低使用率、高风险的客户不太可能出现，这里不在考虑范围内。</p> 
<p>按照风险（评分）和使用情况的不同表现，可以将客户分为三个类别：重要保持客户、重要发展客户和风险客户，针对不同的表现可以采取不同的应对策略。</p> 
<ul><li> <p><strong>重要保持客户</strong>：图中低风险、高收益的目标客户。这类客户是最为理想的客户类型，对贷款机构贡献最大，应当优先投放资源，比如提高额度，开展免息、还款容时容差等优惠政策。尽量提高这类客户的忠诚度和满意度，尽可能延长这类客户的高水平消费。</p> </li><li> <p><strong>重要发展客户</strong>：图中低风险、低收益的激励客户。这类客户的当前价值虽然不是很高，但却有很大的发展潜力。贷款机构要尽量激励这类客户的消费，通过提升客户的行内等级，加强这类客户的满意度，通过增加餐饮、旅游优惠券、积分奖励等措施，提高这类客户的消费水平。</p> </li><li> <p><strong>风险客户</strong>：图中高风险、高收益的避免客户。这类客户虽然对贷款机构的贡献较大，但风险也很高，应尽量避免这类客户的违约风险，比如采取降低额度、限制现金分期等其他产品的行为，避免贷款机构出现较大损失。</p> </li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6240a6cfdbb6ad0f44e881983266679c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">QGIS3.18.3&#43;QT 5.11.2&#43;VS2019二次开发（4）图层管理器右键和可移动部件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b4bb566ca773f4d787e732a5cace01a9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">台式计算机那里可以录音,录音机怎么录音？电脑录音介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>