<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python&#43;Selenium定位不到元素常见原因及解决办法(报：NoSuchElementException) - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python&#43;Selenium定位不到元素常见原因及解决办法(报：NoSuchElementException)" />
<meta property="og:description" content="这篇文章主要介绍了Python&#43;Selenium定位不到元素常见原因及解决办法(报：NoSuchElementException),文中通过示例代码介绍的非常详细，对大家的学习或者工作具有一定的参考学习价值，需要的朋友们下面随着小编来一起学习学习吧
在做web应用的自动化测试时，定位元素是必不可少的，这个过程经常会碰到定位不到元素的情况（报selenium.common.exceptions.NoSuchElementException），一般可以从以下几个方面着手解决：
1.Frame/Iframe原因定位不到元素： 这个是最常见的原因，首先要理解下frame的实质，frame中实际上是嵌入了另一个页面，而webdriver每次只能在一个页面识别，因此需要先定位到相应的frame，对那个页面里的元素进行定位。
解决方案：
如果iframe有name或id的话，直接使用switch_to_frame(“name值”)或switch_to_frame(“id值”)。如下：
driver=webdriver.Firefox() driver.get(r&#39;http://www.126.com/&#39;) driver.switch_to_frame(&#39;x-URS-iframe&#39;) #需先跳转到iframe框架 username=driver.find_element_by_name(&#39;email&#39;) username.clear() 如果iframe没有name或id的话，则可以通过下面的方式定位：
#先定位到iframe elementi= driver.find_element_by_class_name(&#39;APP-editor-iframe&#39;) #再将定位对象传给switch_to_frame()方法 driver.switch_to_frame(elementi) 如果完成操作后，可以通过switch_to.parent_content()方法跳出当前iframe，或者还可以通过switch_to.default_content()方法跳回最外层的页面。
2.Xpath描述错误原因： 由于Xpath层级太复杂，容易犯错。但是该定位方式能够有效定位绝大部分的元素，建议掌握。
解决方案：
2.1可以使用Firefox的firePath，复制xpath路径。该方式容易因为层级改变而需要重新编写过xpath路径，不建议使用，初学者可以先复制路径，然后尝试去修改它。
2.2提高下写xpath的水平。
可以详看笔者另外一篇博文总结：Selenuim&#43;Python之元素定位总结及实例说明
该博文详细总结了Xpath的使用，多组合定位一般都能实现定位问题。
如何检验编写的Xpath是否正确？编写好Xpath路径，可以直接复制到搜狐浏览器的firebug查看html源码，通过Xpath搜索：如下红色框，若无报错，则说明编写的Xpath路径没错。
find_element_by_xpath(&#34;//input[@id=&#39;kw&#39;]&#34;) 3.页面还没有加载出来，就对页面上的元素进行的操作： 这种情况一般说来，可以设置等待，等待页面显示之后再操作，这与人手工操作的原理一样：
3.1设置等待时间；缺点是需要设置较长的等待时间，案例多了测试就很慢；
3.2设置等待页面的某个元素出现，比如一个文本、一个输入框都可以，一旦指定的元素出现，就可以做操作。
3.3在调试的过程中可以把页面的html代码打印出来，以便分析。
解决方案：
导入时间模块。
import time time.sleep(3) 4.动态id定位不到元素： 解决方案：
如果发现是动态id，直接用xpath定位或其他方式定位。
5.二次定位，如弹出框登录 如百度登录弹出框登录百度账号，需先定位到百度弹出框，然后再定位到用户名密码登录。
# coding=utf-8 &#39;&#39;&#39; Created on 2016-7-20 @author: Jennifer Project:登录百度账号 &#39;&#39;&#39; from selenium import webdriver import time driver = webdriver.Firefox() driver.get(&#34;http://www.baidu.com/&#34;) time.sleep(3) #点击登录：有些name为tj_login的元素为不可见的，点击可见的那个登录按钮即可。 #否则会报：ElementNotVisibleException element0=driver.find_elements_by_name(&#34;tj_login&#34;) for ele0 in element0: if ele0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ec8882ed0df8870308a7843c00a77ab5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-21T20:15:00+08:00" />
<meta property="article:modified_time" content="2023-11-21T20:15:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python&#43;Selenium定位不到元素常见原因及解决办法(报：NoSuchElementException)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>这篇文章主要介绍了Python+Selenium定位不到元素常见原因及解决办法(报：NoSuchElementException),文中通过示例代码介绍的非常详细，对大家的学习或者工作具有一定的参考学习价值，需要的朋友们下面随着小编来一起学习学习吧</p> 
<p>在做web应用的自动化测试时，定位元素是必不可少的，这个过程经常会碰到定位不到元素的情况（报selenium.common.exceptions.NoSuchElementException），一般可以从以下几个方面着手解决：</p> 
<h4>1.Frame/Iframe原因定位不到元素：</h4> 
<p>这个是最常见的原因，首先要理解下frame的实质，frame中实际上是嵌入了另一个页面，而<a href="https://so.csdn.net/so/search?q=webdriver&amp;spm=1001.2101.3001.7020" title="webdriver">webdriver</a>每次只能在一个页面识别，因此需要先定位到相应的frame，对那个页面里的元素进行定位。</p> 
<p>解决方案：</p> 
<p>如果iframe有name或id的话，直接使用switch_to_frame(“name值”)或switch_to_frame(“id值”)。如下：</p> 
<pre><code class="language-python">driver=webdriver.Firefox()
driver.get(r'http://www.126.com/')
driver.switch_to_frame('x-URS-iframe') #需先跳转到iframe框架
username=driver.find_element_by_name('email')
username.clear()
</code></pre> 
<p>如果iframe没有name或id的话，则可以通过下面的方式定位：</p> 
<pre><code class="language-python">#先定位到iframe
elementi= driver.find_element_by_class_name('APP-editor-iframe')
#再将定位对象传给switch_to_frame()方法
driver.switch_to_frame(elementi)
</code></pre> 
<p>如果完成操作后，可以通过switch_to.parent_content()方法跳出当前iframe，或者还可以通过switch_to.default_content()方法跳回最外层的页面。</p> 
<h4>2.Xpath描述错误原因：</h4> 
<p>由于Xpath层级太复杂，容易犯错。但是该定位方式能够有效定位绝大部分的元素，建议掌握。</p> 
<p>解决方案：</p> 
<p>2.1可以使用Firefox的firePath，复制xpath路径。该方式容易因为层级改变而需要重新编写过xpath路径，不建议使用，初学者可以先复制路径，然后尝试去修改它。</p> 
<p>2.2提高下写xpath的水平。</p> 
<p>可以详看笔者另外一篇博文总结：Selenuim+Python之元素定位总结及实例说明<br> 该博文详细总结了Xpath的使用，多组合定位一般都能实现定位问题。</p> 
<p>如何检验编写的Xpath是否正确？编写好Xpath路径，可以直接复制到搜狐浏览器的firebug查看html源码，通过Xpath搜索：如下红色框，若无报错，则说明编写的Xpath路径没错。</p> 
<pre><code>find_element_by_xpath("//input[@id='kw']")
</code></pre> 
<h4><a name="t2"></a><a id="3_53"></a>3.页面还没有加载出来，就对页面上的元素进行的操作：</h4> 
<p>这种情况一般说来，可以设置等待，等待页面显示之后再操作，这与人手工操作的原理一样：</p> 
<p>3.1设置等待时间；缺点是需要设置较长的等待时间，案例多了测试就很慢；</p> 
<p>3.2设置等待页面的某个元素出现，比如一个文本、一个输入框都可以，一旦指定的元素出现，就可以做操作。</p> 
<p>3.3在调试的过程中可以把页面的html代码打印出来，以便分析。</p> 
<p>解决方案：</p> 
<p>导入时间模块。</p> 
<pre><code class="language-python">import time
time.sleep(3)
</code></pre> 
<h4>4.动态id定位不到元素：</h4> 
<p>解决方案：</p> 
<p>如果发现是动态id，直接用xpath定位或其他方式定位。</p> 
<h4>5.二次定位，如弹出框登录</h4> 
<p>如百度登录弹出框登录百度账号，需先定位到百度弹出框，然后再定位到用户名密码登录。</p> 
<pre><code class="language-python"># coding=utf-8
'''
Created on 2016-7-20
@author: Jennifer
Project:登录百度账号
'''
from selenium import webdriver
import time
 
driver = webdriver.Firefox()
driver.get("http://www.baidu.com/")
 
time.sleep(3)
 
#点击登录：有些name为tj_login的元素为不可见的，点击可见的那个登录按钮即可。
#否则会报：ElementNotVisibleException
element0=driver.find_elements_by_name("tj_login")
for ele0 in element0:
  if ele0.is_displayed():
    ele0.click()
 
#在登录弹出框，需先定位到登录弹出框
#否则会报：NoSuchElementException
element1=driver.find_element_by_class_name("tang-content")
element11=element1.find_element_by_id("TANGRAM__PSP_8__userName")
element11.clear()
element11.send_keys("登录名")
 
element2=element1.find_element_by_id("TANGRAM__PSP_8__password")
element2.clear()
element2.send_keys("密码")
 
element3=element1.find_element_by_id("TANGRAM__PSP_8__submit")
element3.click()
element3.submit()
 
try:
  assert "登录名" in driver.page_source
except AssertionError:
  print "登录失败"
else:
  print "登录成功"
  time.sleep(3)
finally:
  print "测试记录：已测试"
driver.close()
</code></pre> 
<p><strong>补充：报：selenium.common.exceptions.ElementNotVisibleException</strong></p> 
<p>代码:</p> 
<pre><code class="language-python">from selenium import webdriver
from PIL import Image
import time
import pandas as pd
import datetime
 
driver = webdriver.Ie(r"C:\Program Files\internet explorer\IEDriverServer2.exe")
driver.get("https://www.cib.com.cn/cn/minipage/page/login-firmalert.html")
print("请输入用户名和帐号密码，实现登录")
input("====按任意键继续====")
 
# print(driver.current_url) # https://corporatebank.cib.com.cn/firm/main/mainx.do
 
frame = driver.find_element_by_id("workframe") # 切换到 iframe 标签中查找
driver.switch_to_frame(frame) # 切入 iframe 标签
 
# driver.switch_to_default_content()  # 切出 iframe 标签 也可以 直接 默认的
 
driver.find_element_by_xpath('//div[@id="fast-way"]/ul/li[2]/a').click() # 点击 当日明细查询按钮
time.sleep(2)
try:
  driver.find_element_by_xpath('//div[@id="fast-way"]/ul/li[2]/a').click() # 点击 当日明细查询按钮
except Exception as e:
  print("=======双击这个按钮========", e)
time.sleep(3)
</code></pre> 
<p>到此这篇关于Python+Selenium定位不到元素常见原因及解决办法(报：NoSuchElementException)的文章就介绍到这了</p> 
<p><strong>最后感谢每一个认真阅读我文章的人，礼尚往来总是要有的，虽然不是什么很值钱的东西，如果你用得到的话可以直接拿走：</strong></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%E3%80%90%E4%B8%8B%E9%9D%A2%E6%98%AF%E6%88%91%E6%95%B4%E7%90%86%E7%9A%842023%E5%B9%B4%E6%9C%80%E5%85%A8%E7%9A%84%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E6%9E%B6%E6%9E%84%E4%BD%93%E7%B3%BB%E5%9B%BE%E3%80%91"><img alt="" height="707" src="https://images2.imgbox.com/81/4a/ZB6ZusGW_o.png" width="929"></h4> 
<p>这些资料，对于【软件测试】的朋友来说应该是最全面最完整的备战仓库，这个仓库也陪伴上万个测试工程师们走过最艰难的路程，希望也能帮助到你！ </p> 
<p class="img-center"><img alt="" height="126" src="https://images2.imgbox.com/cd/e8/kjO1NZF2_o.png" width="634"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/29d9d23a4e566ba3fa34e19284298d08/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于ubuntu20.04安装ros系统搭配使用工业相机</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb30109fbb43d9557ffee6607a75dad9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【2023最新超详细】全国建筑市场监管公共服务平台（四库一平台）js逆向</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>