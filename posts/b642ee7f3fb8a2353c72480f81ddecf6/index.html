<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Windows Server 2019负载均衡部署 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Windows Server 2019负载均衡部署" />
<meta property="og:description" content="Windows Server 2019负载均衡部署 ## 一、环境搭建 准备三台Windows Server 2019服务器并关闭防火墙
二、实验拓扑图 说明：
Web1-Windows Server 2019 -1
主机名为：WSS34-WEB1
外网IP（NAT）：10.0.34.111
外网DNS1：10.0.34.170
外网DNS2：114.114.114.114
管理IP（仅主机）：192.168.34.111
管理DNS：192.168.34.170
Web2-Windows Server 2019 -2
主机名为：WSS34-WEB2
外网IP（NAT）：10.0.34.112
外网DNS1：10.0.34.170
外网DNS2：114.114.114.114
管理IP（仅主机）：192.168.34.112
管理DNS：192.168.34.170
DC-Windows Server 2019 -3
主机名为：WSS34-DC
外网IP（NAT）：10.0.34.170
外网DNS1：10.0.34.170
外网DNS2：114.114.114.114
管理IP（仅主机）：192.168.34.170
三、域控制器安装 其他步骤有小报错警告什么的，忽略，直接点击下一步
⭕注意： 如果你使用的是Windows Server 2019就在以上步骤一路顺风
如果你使用的是Windows Server 2016的话，就会看到如下步骤报错无法进行安装
解决方案：（因为我没有使用Windows Server 2016来进行试验，无法提供详细操作过程，就大概描述一下）
使用cmd运行以下命令
net user administrator /passwordreq:yes 最后重新点击上一步→下一步解决
安装完成后系统将会重启，最后再关闭域防火墙，域控制器DC部署完毕
四、部署Web服务器加入域 1、重置SID（严谨一点，两台web服务器都要重置） 先在cmd中输入以下命令查看当前的SID
whoami /user Win&#43;R键中调出运行窗口，输入以下命令即可调出重置SID的应用程序
sysprep 选择sysprep.exe右击选择管理员身份运行
2、给刚重置过SID的服务器分别重新配置IP地址还有进行计算机名的修改 3、加入域 这里用户名输入：administrator ，密码是自己设置的。然后看到下图就加入成功了！重启一下就好。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b642ee7f3fb8a2353c72480f81ddecf6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-04T00:07:03+08:00" />
<meta property="article:modified_time" content="2023-04-04T00:07:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Windows Server 2019负载均衡部署</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <div align="center"> 
 <h2 align="center"> Windows Server 2019负载均衡部署 </h2> 
</div> ## 一、环境搭建 
<p>准备三台Windows Server 2019服务器并关闭防火墙</p> 
<p><img src="https://images2.imgbox.com/db/18/dCQNUCwC_o.png" alt=""></p> 
<h3><a id="_11"></a>二、实验拓扑图</h3> 
<p><img src="https://images2.imgbox.com/90/51/HN0qZktw_o.jpg" alt=""></p> 
<p>说明：</p> 
<ul><li> <p>Web1-Windows Server 2019 -1<br> 主机名为：WSS34-WEB1</p> <p>外网IP（NAT）：10.0.34.111<br> 外网DNS1：10.0.34.170</p> <p>外网DNS2：114.114.114.114</p> <p>管理IP（仅主机）：192.168.34.111</p> <p>管理DNS：192.168.34.170</p> </li></ul> 
<p><img src="https://images2.imgbox.com/ca/f9/MUwX88Xg_o.png" alt=""></p> 
<ul><li> <p>Web2-Windows Server 2019 -2<br> 主机名为：WSS34-WEB2</p> <p>外网IP（NAT）：10.0.34.112</p> <p>外网DNS1：10.0.34.170</p> <p>外网DNS2：114.114.114.114</p> <p>管理IP（仅主机）：192.168.34.112</p> <p>管理DNS：192.168.34.170</p> </li></ul> 
<p><img src="https://images2.imgbox.com/98/44/GwHClHzn_o.png" alt=""></p> 
<ul><li> <p>DC-Windows Server 2019 -3<br> 主机名为：WSS34-DC</p> <p>外网IP（NAT）：10.0.34.170</p> <p>外网DNS1：10.0.34.170</p> <p>外网DNS2：114.114.114.114</p> <p>管理IP（仅主机）：192.168.34.170</p> </li></ul> 
<p><img src="https://images2.imgbox.com/a9/7a/kM4IFKrq_o.png" alt=""></p> 
<h3><a id="_59"></a>三、域控制器安装</h3> 
<p><img src="https://images2.imgbox.com/d4/da/08eAn3Ec_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/3f/0d/mrOlFsA2_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/75/18/yvk9vMWm_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/99/ee/5wIlUqdP_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/a5/d6/KxQiuIkw_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/7b/67/11T76Ppa_o.png" alt=""></p> 
<p>其他步骤有小报错警告什么的，忽略，直接点击<strong>下一步</strong></p> 
<h4><a id="_75"></a>⭕注意：</h4> 
<p>如果你使用的是Windows Server 2019就在以上步骤一路顺风</p> 
<p>如果你使用的是Windows Server 2016的话，就会看到如下步骤报错无法进行安装</p> 
<p><img src="https://images2.imgbox.com/ef/d2/E7bXjyd8_o.png" alt=""></p> 
<p>解决方案：（因为我没有使用Windows Server 2016来进行试验，无法提供详细操作过程，就大概描述一下）</p> 
<p>使用cmd运行以下命令</p> 
<pre><code>net user administrator /passwordreq:yes
</code></pre> 
<p>最后重新点击<strong>上一步</strong>→<strong>下一步</strong>解决</p> 
<p>安装完成后系统将会重启，最后再关闭域防火墙，域控制器DC部署完毕</p> 
<p><img src="https://images2.imgbox.com/02/b0/EeGvxGkn_o.png" alt=""></p> 
<h3><a id="Web_97"></a>四、部署Web服务器加入域</h3> 
<h4><a id="1SIDweb_99"></a>1、重置SID（严谨一点，两台web服务器都要重置）</h4> 
<p>先在cmd中输入以下命令查看当前的SID</p> 
<pre><code>whoami /user
</code></pre> 
<p><strong>Win</strong>+<strong>R</strong>键中调出运行窗口，输入以下命令即可调出重置SID的应用程序</p> 
<pre><code>sysprep
</code></pre> 
<p><img src="https://images2.imgbox.com/87/92/frIU9fNk_o.png" alt=""></p> 
<p>选择<code>sysprep.exe</code>右击选择管理员身份运行</p> 
<p><img src="https://images2.imgbox.com/1b/1d/edVySgdE_o.png" alt=""></p> 
<h4><a id="2SIDIP_119"></a>2、给刚重置过SID的服务器分别重新配置IP地址还有进行计算机名的修改</h4> 
<h4><a id="3_121"></a>3、加入域</h4> 
<p><img src="https://images2.imgbox.com/02/d8/ydDqDW6V_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/6b/75/h3oSlKW9_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/1d/b9/9nvGjmQT_o.png" alt=""></p> 
<p>这里用户名输入：<code>administrator</code> ，密码是自己设置的。然后看到下图就加入成功了！重启一下就好。</p> 
<p><img src="https://images2.imgbox.com/69/76/Kc1BCG7h_o.png" alt=""></p> 
<p>两台Web服务器都是这么做的成功加入域重启后即加入域完成！</p> 
<h5><a id="WEBDC_135"></a>⭕注意：两台WEB服务器以及DC加入域以后不要忘了再次打开防火墙设置来关闭域防火墙。</h5> 
<h3><a id="_137"></a>五、网络负载平衡群集配置</h3> 
<h4><a id="Web_139"></a>⭕注意：登录到Web两台服务器使用其他用户登录</h4> 
<p><img src="https://images2.imgbox.com/23/12/p6HBZoAr_o.png" alt=""></p> 
<p>使用用户名：<code>administrator@xxxxxx</code></p> 
<p><img src="https://images2.imgbox.com/0b/ae/tC5B5N1O_o.png" alt=""></p> 
<h4><a id="1Web12_147"></a>1、Web服务器1、2安装网络负载平衡</h4> 
<p>直接去服务器管理器仪表盘里面<strong>添加角色和功能</strong>，没有看到下图那样的话默认一路<strong>下一步</strong></p> 
<p><img src="https://images2.imgbox.com/1d/b1/WWXd7JEF_o.png" alt=""></p> 
<p>选好以后直接下一步和安装。</p> 
<h4><a id="2NLB_Web__155"></a>2、创建NLB群集（ 在任一台Web服务器上操作完成即可 ）</h4> 
<p>打开网络负载平衡管理器</p> 
<p><img src="https://images2.imgbox.com/37/f4/nnKtGUo9_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/9d/8e/Tn6vlOJr_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/2e/99/MPuZHQn3_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/42/00/ncxBcqgJ_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/92/03/WqoWMHYw_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/77/a6/I8NfvVlv_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/38/37/9Wcsmy4L_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/48/d2/DI7ER6s5_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/ac/20/mTU3k67x_o.png" alt=""></p> 
<h4><a id="3_177"></a>3、添加主机到群集</h4> 
<p>第一台主机加入好了，然后点击这个集群，再添加第二台主机</p> 
<p><img src="https://images2.imgbox.com/3b/eb/sbg5u7Y7_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/4c/f5/3OZhXuAk_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/42/9f/cgNNQ1O7_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/86/05/I8BncRry_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/59/c1/0Maltrtd_o.png" alt=""></p> 
<p>上图这个显示已聚合这个上一个状态是挂起，这个等几秒就自动好了。</p> 
<p>就这样，成功地把两台服务器加入集群绑在了一起！</p> 
<h4><a id="4Web_195"></a>4、安装Web服务器</h4> 
<p>两台服务器都要做，安装IIS</p> 
<p>直接去服务器管理器仪表盘里面<strong>添加角色和功能</strong>，没有看到下图那样的话默认一路<strong>下一步</strong></p> 
<p><img src="https://images2.imgbox.com/eb/f4/Rem3OatO_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/5d/a8/AnXwCgq9_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/be/9b/NiISUctx_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/73/cb/PTWCqlNU_o.png" alt=""></p> 
<p>安装成功</p> 
<p><img src="https://images2.imgbox.com/83/97/2lIecI36_o.png" alt=""></p> 
<p>安装ASP.NET</p> 
<p><img src="https://images2.imgbox.com/ad/f6/cfTXN3EA_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/64/8f/JEW9hhNA_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/18/de/vs7vJGM3_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/6c/11/eyuY0EmY_o.png" alt=""></p> 
<p>安装完成ASP.NET再进行配置</p> 
<p><img src="https://images2.imgbox.com/d7/5b/NgokRubF_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/4e/96/8CnKMkQZ_o.png" alt=""></p> 
<p>然后再重启一下这个网页服务</p> 
<h3><a id="_231"></a>六、测试</h3> 
<h4><a id="1_233"></a>1、先更改网页</h4> 
<ul><li>Web1的网页</li></ul> 
<p>进入这个<code>C:\inetpub\wwwroot</code>目录，更改网页文件如下图</p> 
<p><img src="https://images2.imgbox.com/cd/5d/Gvoj4rNd_o.png" alt=""></p> 
<p>代码示例：</p> 
<pre><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /&gt;
&lt;title&gt;Welcome By Web1&lt;/title&gt;
&lt;style type="text/css"&gt;
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
这个是我的Web1服务器
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>⭕注意：如果中文有乱码就在文本文档设置另存为那里设置UTF8格式！不会设置就别用中文就好，直接写数字英文也很香！</p> 
<p>直接测试：这个是默认的Web1的网页，虚拟机内外的系统都能够正常访问！</p> 
<p><img src="https://images2.imgbox.com/ac/bf/pUnKBDu0_o.png" alt=""></p> 
<ul><li>Web2的网页</li></ul> 
<p><img src="https://images2.imgbox.com/8d/37/TSwBOyL9_o.png" alt=""></p> 
<h4><a id="2Web1_268"></a>2、断开Web1的两个网卡</h4> 
<p><img src="https://images2.imgbox.com/97/66/EFhOnzIJ_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/ed/d6/4K7Zu8Zx_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/24/b8/9uAuqCyE_o.png" alt=""></p> 
<h4><a id="3_276"></a>3、最后的测试！</h4> 
<p><img src="https://images2.imgbox.com/ce/4f/u1LsUhP7_o.png" alt=""></p> 
<h3><a id="_280"></a>📣特别声明</h3> 
<p><strong>原文地址：</strong>[Windows Server 2019负载均衡部署 - 开摆工作室博客 (kbai.cc)](https://blog.kbai.cc/Windows Server负载均衡部署/)</p> 
<p>此文章全部都是依靠自己的学习理解来写的原创文章，难免可能会出现有错误的地方，</p> 
<p>如果大家以后阅读的时候发现有问题，那就麻烦到下方评论区来进行错误指出，使错误尽快做出改正，</p> 
<p>在此，感谢大家的阅读与支持！🤝💦🎉</p> 
<h3><a id="_290"></a>🍻支持一下</h3> 
<p>觉得我写的好的话可以支持一下我哦~持续关注我，会更新其他好玩且实用的项目。</p> 
<h4><a id="_294"></a>👋如果我能帮助到你，那就请我喝杯🧋呗~👇👇👇</h4> 
<p>我的博客链接：<a href="https://blog.kbai.cc/" rel="nofollow">blog.kbai.cc</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/64e2187c870b6fb496ae7d1c591248cf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">推荐系统中保序回归校准方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d6c646b91ae60f8bb1f8ecb4822755e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">若依框架前后端如何改端口号</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>