<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于element-ui封装table组件 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于element-ui封装table组件" />
<meta property="og:description" content="基于element-ui实现的封装table,表格列通过render函数使用jsx渲染处理单个字段
效果如下
表格组件代码
&lt;template&gt; &lt;div class=&#34;table-management&#34;&gt; &lt;el-table style=&#34;width: 100%&#34; :data=&#34;tblData&#34; v-loading=&#34;tbLoading&#34; v-bind=&#34;attrs&#34; element-loading-text=&#34;正在加载&#34; @selection-change=&#34;handleSelectionChange&#34;&gt; &lt;el-table-column v-if=&#34;isSelect&#34; type=&#34;selection&#34; width=&#34;40&#34;&gt; &lt;/el-table-column&gt; &lt;el-table-column v-for=&#34;(item, index) in column&#34; :key=&#34;index&#34; :type=&#34;item.type&#34; :index=&#34;item.index&#34; :column-key=&#34;item.columnKey&#34; :label=&#34;item.label&#34; :prop=&#34;item.prop&#34; :width=&#34;item.width&#34; :min-width=&#34;item.minWidth&#34; :fixed=&#34;item.fixed&#34; :header-align=&#34;item.headerAlign&#34; :align=&#34;item.align&#34; :show-overflow-tooltip=&#34;showOverflowTooltip&#34;&gt; &lt;template slot=&#34;header&#34;&gt; &lt;div v-if=&#34;item.tip&#34;&gt; &lt;span&gt;{{item.label}}&lt;/span&gt; &lt;el-tooltip placement=&#34;right&#34;&gt; &lt;div slot=&#34;content&#34;&gt; &lt;div v-for=&#34;(items,index) in item.tipData&#34; :key=&#34;index&#34;&gt; &lt;p&gt; {{items.msg}} &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;i class=&#34;el-icon-question&#34;&gt;&lt;/i&gt; &lt;/el-tooltip&gt; &lt;/div&gt; &lt;p v-else&gt;{{item.label}}&lt;/p&gt; &lt;/template&gt; &lt;template slot-scope=&#34;scope&#34;&gt; &lt;expand-dom v-if=&#34;item.render&#34; :render=&#34;item.render&#34; :row=&#34;scope.row&#34; :index=&#34;scope.$index&#34; :column=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/889957f1a69229908e3a67bd1786d2e2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-28T15:05:59+08:00" />
<meta property="article:modified_time" content="2022-02-28T15:05:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于element-ui封装table组件</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> 基于element-ui实现的封装table,表格列通过render函数使用jsx渲染处理单个字段</p> 
<p><strong>效果如下</strong></p> 
<p><img alt="" height="608" src="https://images2.imgbox.com/0e/6b/YIAZdlZf_o.png" width="1200"></p> 
<p><strong>表格组件代码</strong></p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div class="table-management"&gt;
    &lt;el-table style="width: 100%"
              :data="tblData"
              v-loading="tbLoading"
              v-bind="attrs"
              element-loading-text="正在加载"
              @selection-change="handleSelectionChange"&gt;
      &lt;el-table-column v-if="isSelect"
                       type="selection"
                       width="40"&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column v-for="(item, index) in column"
                       :key="index"
                       :type="item.type"
                       :index="item.index"
                       :column-key="item.columnKey"
                       :label="item.label"
                       :prop="item.prop"
                       :width="item.width"
                       :min-width="item.minWidth"
                       :fixed="item.fixed"
                       :header-align="item.headerAlign"
                       :align="item.align"
                       :show-overflow-tooltip="showOverflowTooltip"&gt;
        &lt;template slot="header"&gt;
          &lt;div v-if="item.tip"&gt;
            &lt;span&gt;{<!-- -->{item.label}}&lt;/span&gt;
            &lt;el-tooltip placement="right"&gt;
              &lt;div slot="content"&gt;
                &lt;div v-for="(items,index) in item.tipData"
                     :key="index"&gt;
                  &lt;p&gt;
                    {<!-- -->{items.msg}}
                  &lt;/p&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;i class="el-icon-question"&gt;&lt;/i&gt;
            &lt;/el-tooltip&gt;
          &lt;/div&gt;
          &lt;p v-else&gt;{<!-- -->{item.label}}&lt;/p&gt;
        &lt;/template&gt;
        &lt;template slot-scope="scope"&gt;
          &lt;expand-dom v-if="item.render"
                      :render="item.render"
                      :row="scope.row"
                      :index="scope.$index"
                      :column="item"&gt;&lt;/expand-dom&gt;
          &lt;span v-else&gt;{<!-- -->{ scope.row[item.prop]||'-' }}&lt;/span&gt;
        &lt;/template&gt;
      &lt;/el-table-column&gt;
    &lt;/el-table&gt;
    &lt;div class="pagination"&gt;
      &lt;el-pagination @size-change="handleSizeChange"
                     @current-change="handleCurrentChange"
                     :current-page="pagination.curPage"
                     :page-sizes="pagination.pageSizes||defaultPagination.pageSizes"
                     :page-size="pagination.pageSize"
                     :layout="pagination.layout||defaultPagination.layout"
                     :total="pagination.total"
                     v-bind="pagination.attrs"&gt;
        &lt;span class="el-pagination__total"&gt;{<!-- -->{totalText}}&lt;/span&gt;
      &lt;/el-pagination&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  props: {
    tblData: { type: Array }, // 表格数据list
    column: { type: Array }, // 表格展示的表头以及单元格字段
    isSelect: { type: Boolean, default: false }, // 是否显示选中组件
    tbLoading: { type: Boolean, default: false }, // 表格加载loading
    pagination: {
      type: Object,
      require: true
    },
    // 表格的其他属性
    attrs: Object
  },
  components: {
    expandDom: {
      functional: true,
      props: {
        row: Object,
        render: Function,
        index: Number,
        column: {
          type: Object,
          default: null
        }
      },
      render: (h, ctx) =&gt; {
        const params = {
          row: ctx.props.row,
          index: ctx.props.index
        }
        if (ctx.props.column) params.column = ctx.props.column
        return ctx.props.render(h, params)
      }
    }
  },
  data () {
    return {
      showOverflowTooltip: true,
      defaultPagination: {
        pageSizes: [10, 20, 50, 100],
        layout: 'slot, prev, pager, next,sizes'
      }
    }
  },
  computed: {
    totalText () {
      const { total, curPage, pageSize } = this.pagination
      const range = [total === 0 ? 0 : (curPage - 1) * pageSize + 1, curPage * pageSize &gt; total ? total : curPage * pageSize]
      return `共${total}条,当前页为  ${range[0]} - ${range[1]}  页`
    }
  },
  methods: {
    // 选中方法回调
    handleSelectionChange (val) {
      // 选中事件
      this.$emit('handleSelectBtn', val)
    },
    handleButton (methods, row, index) {
      // 按钮事件
      this.$emit('handleButton', { methods: methods, row: row, index: index })
    },
    // 分页api（展示每页显示条数）
    handleSizeChange (val) {
      this.$emit('handleSizeChange', val)
    },
    // 分页点击api（获取当前页数据）
    handleCurrentChange (val) {
      this.$emit('handleCurrentChange', val)
    }
  },
  mounted () { }
}
&lt;/script&gt;
&lt;style lang="scss" scope&gt;
.table-management {
  .pagination {
    display: flex;
    justify-content: flex-end;
    margin: 10px 0;
  }
}
.table-management .el-table-column--selection .cell {
  text-overflow: unset;
}
.table-management {
  .el-pagination.is-background .btn-next,
  .el-pagination.is-background .btn-prev,
  .el-pagination.is-background .el-pager li {
    background: white;
  }
  .el-pagination.is-background .el-pager li:not(.disabled).active {
    border: 1px solid #409eff;
    color: #409eff;
    background: white;
  }
}
&lt;/style&gt;
</code></pre> 
<p>使用组件</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div&gt;
    &lt;table-tem @handleSizeChange="handleSizeChange"
               @handleCurrentChange="handleCurrentChange"
               :tblData="tblData"
               :attrs="attrs"
               :column="column"
               :isSelect="true"
               :pagination="pagination"
               @handleSelectBtn="handleSelectBtn"&gt;
    &lt;/table-tem&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
// 引入组件table
import tableTem from './table-it.vue'
export default {
  components: {
    tableTem
  },
  data () {
    return {
      attrs: {
        border: true
        // fit:false
      },
      tblData: [
        {
          imgUrl: 'https://img.yzcdn.cn/public_files/2017/10/24/2f9a36046449dafb8608e99990b3c205.jpeg',
          timeList: [
            { startTime: '2022-1-2', endTime: '2020-4-3' }
          ],
          type: 1,
          StatusDesc: 'ssss',
          createTime: '2020-3-4'
        },
        {
          imgUrl: 'https://img.yzcdn.cn/public_files/2017/10/24/320454216bbe9e25c7651e1fa51b31fd.jpeg',
          timeList: [
            { startTime: '2022-1-2', endTime: '2020-4-3' }
          ],
          type: 2,
          StatusDesc: 'ssss',
          createTime: '2020-3-4'
        }
      ], // 表格展示数据list，由接口获取
      pagination: {
        total: 67,
        pageSize: 10,
        curPage: 1,
        attrs: {
          // hideOnSinglePage: true,
          background: true
        }
      },
      selectList: [], // 储存列表选中的数据
      column: [// 表格展示列，也就是表头字段
        {
          prop: 'imgUrl', // 表格渲染字段
          label: 'logo', // 表头显示名字
          headerAlign: 'center', // 表头样式-居中显示
          align: 'center', // 单元格样式-居中显示
          width: 120,
          // 当前渲染字段api--列出显示img的api
          render: (h, { row }) =&gt; &lt;img src={row.imgUrl} width='80' height='80'&gt;&lt;/img&gt;
        },
        {
          prop: 'timeList',
          label: '时间段',
          headerAlign: 'center',
          align: 'center',
          render: this.renderTimeList
        },
        {
          prop: 'type',
          label: '类型',
          headerAlign: 'center',
          align: 'center',
          render: this.renderType
        },
        {
          prop: 'StatusDesc',
          label: '状态',
          headerAlign: 'center',
          align: 'center',
          tip: true, // 是否展示表头状态描述提示信息
          tipData: [// 展示的提示信息数组
            { msg: '我是展示在状态表头里面的提示信息1' },
            { msg: '我是展示在状态表头里面的提示信息2' }
          ],
          minWidth: 110
        },
        {
          prop: 'createTime',
          label: '创建时间',
          headerAlign: 'center',
          align: 'center',
          minWidth: '90'
          // render: this.renderCreateTime// 当前渲染字段api--(后端返回的是时间戳需要前端处理一下)
        },
        // 接下来就着重说一下表格的操作按钮（相同的字段前面都表述清楚了）
        {
          prop: 'operation',
          label: '操作',
          headerAlign: 'center',
          align: 'center',
          minWidth: '110',
          // 该方法是针对操作一列的按钮的api
          render: (h, { row }) =&gt; {
            return &lt;div&gt;
              &lt;el-button type='danger' icon='el-icon-edit' style="cursor:pointer;" onClick={this.btnClick}&gt;修改&lt;/el-button&gt;
              &lt;el-button type='primary' style="cursor:pointer;" onClick={() =&gt; this.btnClick(row)}&gt;删除&lt;/el-button&gt;
            &lt;/div&gt;
          }
        }
      ]
    }
  },
  methods: {
    // 分页点击
    handleCurrentChange (val) {
      this.pagination.curPage = val
      // 掉接口：获取表格数据接口
    },
    // 获取每页显示条数
    handleSizeChange (val) {
      this.pagination.curPage = 1
      this.pagination.pageSize = val
      // 掉接口：获取表格数据接口
    },
    // 列表选中回调api
    handleSelectBtn (val) {
      this.selectList = val
    },
    // 渲染时间数组
    renderTimeList (h, { row: { timeList } }) {
      const timeListArr = []
      for (const i of timeList) {
        timeListArr.push(i.startTime + '~' + i.endTime)
      }
      return &lt;div&gt;
        {timeListArr.map((item, index) =&gt; &lt;div&gt;{item}&lt;/div&gt;)}
      &lt;/div&gt;
    },
    // 状态渲染类
    renderType (h, { row }) {
      let statusStr = ''
      if (row.type === 1) {
        statusStr = '类型1'
      } else if (row.type === 2) {
        statusStr = '类型2'
      } else if (row.type === 3) {
        statusStr = '类型3'
      } else {
        statusStr = ''
      }
      return &lt;span&gt;{statusStr}&lt;/span&gt;
    },
    // 下面是操作按钮一列
    // 操作
    btnClick (row) { console.log(row) }
  }
}

&lt;/script&gt;
</code></pre> 
<p>实现中借鉴博主文章：<a href="https://blog.csdn.net/weixin_38373875/article/details/94752800?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0.pc_relevant_default&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=3" title="elementui提取table表格封装组件，elementui提取table表格单列展示按钮的展示效果_管火火火的博客-CSDN博客_elementui table 封装">elementui提取table表格封装组件，elementui提取table表格单列展示按钮的展示效果_管火火火的博客-CSDN博客_elementui table 封装</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c941b0ba9c062f39c3411cc944fd85f8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Umap与 t-sne可视化CNN特征</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/238d3da97e6bfe3d951c052ac1ad43ba/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">react 编译警告 Compiled with : WARNING in</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>