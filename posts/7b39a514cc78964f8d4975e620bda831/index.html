<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React（三）：脚手架、组件化、生命周期、父子组件通信、插槽、Context - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="React（三）：脚手架、组件化、生命周期、父子组件通信、插槽、Context" />
<meta property="og:description" content="React（三） 一、脚手架安装和创建1.安装脚手架2.创建脚手架3.看看脚手架目录4.运行脚手架 二、脚手架下从0开始写代码三、组件化1.类组件2.函数组件 四、React的生命周期1.认识生命周期2.图解生命周期（1）Constructor（2）componentDidMount（3）componentDidUpdate（4）componentWillUnmount 3.演示生命周期4.不常用的生命周期 五、父子组件通信1.父传子props接收2.props接收数据类型限制和默认值3.子传父用函数4.案例练习 六、React插槽效果1.通过props.children传递2.通过props直接传递3.作用域插槽 七、祖孙及更深层次的通信1.{...props}解构2.Context的使用（类组件）3.Context的使用（函数组件） 一、脚手架安装和创建 首先安装Node：保姆级别教程
1.安装脚手架 在git bash中输入： npm install create-react-app -g，然后输入create-react-app --version，如果能正常显示版本号，那么安装就成功了。
2.创建脚手架 目录下右键 =&gt; git bash =&gt; create-react-app 项目名 =&gt; 回车等几分钟就欧了。
注意项目名不能包含大写字母。
3.看看脚手架目录 4.运行脚手架 脚手架目录下 =&gt; npm run start，然后就可以看到非常帅气的大花。
二、脚手架下从0开始写代码 没啥用的先删了，我们自己搭建src中的文件：
好，那么接下来我们重新写一下src里面的文件：
index.js //重写react代码，并且通过react渲染出来对应的内容 import ReactDOM from &#39;react-dom/client&#39;; import App from &#39;./App&#39;; const root = ReactDOM.createRoot(document.querySelector(&#39;#root&#39;)); root.render(&lt;App/&gt;); App.jsx import React from &#39;react&#39;; import HelloReact from &#39;./Components/HelloReact&#39;; class App extends React.Component { constructor() { super(); this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/7b39a514cc78964f8d4975e620bda831/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-26T18:11:53+08:00" />
<meta property="article:modified_time" content="2023-03-26T18:11:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">React（三）：脚手架、组件化、生命周期、父子组件通信、插槽、Context</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>React（三）</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、脚手架安装和创建</a></li><li><ul><li><a href="#1_3" rel="nofollow">1.安装脚手架</a></li><li><a href="#2_5" rel="nofollow">2.创建脚手架</a></li><li><a href="#3_8" rel="nofollow">3.看看脚手架目录</a></li><li><a href="#4_10" rel="nofollow">4.运行脚手架</a></li></ul> 
  </li><li><a href="#0_12" rel="nofollow">二、脚手架下从0开始写代码</a></li><li><a href="#_77" rel="nofollow">三、组件化</a></li><li><ul><li><a href="#1_78" rel="nofollow">1.类组件</a></li><li><a href="#2_119" rel="nofollow">2.函数组件</a></li></ul> 
  </li><li><a href="#React_138" rel="nofollow">四、React的生命周期</a></li><li><ul><li><a href="#1_139" rel="nofollow">1.认识生命周期</a></li><li><a href="#2_149" rel="nofollow">2.图解生命周期</a></li><li><ul><li><a href="#1Constructor_152" rel="nofollow">（1）Constructor</a></li><li><a href="#2componentDidMount_157" rel="nofollow">（2）componentDidMount</a></li><li><a href="#3componentDidUpdate_163" rel="nofollow">（3）componentDidUpdate</a></li><li><a href="#4componentWillUnmount_167" rel="nofollow">（4）componentWillUnmount</a></li></ul> 
   </li><li><a href="#3_172" rel="nofollow">3.演示生命周期</a></li><li><a href="#4_252" rel="nofollow">4.不常用的生命周期</a></li></ul> 
  </li><li><a href="#_255" rel="nofollow">五、父子组件通信</a></li><li><ul><li><a href="#1props_318" rel="nofollow">1.父传子props接收</a></li><li><a href="#2props_372" rel="nofollow">2.props接收数据类型限制和默认值</a></li><li><a href="#3_460" rel="nofollow">3.子传父用函数</a></li><li><a href="#4_503" rel="nofollow">4.案例练习</a></li></ul> 
  </li><li><a href="#React_594" rel="nofollow">六、React插槽效果</a></li><li><ul><li><a href="#1propschildren_596" rel="nofollow">1.通过props.children传递</a></li><li><a href="#2props_629" rel="nofollow">2.通过props直接传递</a></li><li><a href="#3_681" rel="nofollow">3.作用域插槽</a></li></ul> 
  </li><li><a href="#_683" rel="nofollow">七、祖孙及更深层次的通信</a></li><li><ul><li><a href="#1props_684" rel="nofollow">1.{...props}解构</a></li><li><a href="#2Context_748" rel="nofollow">2.Context的使用（类组件）</a></li><li><a href="#3Context_784" rel="nofollow">3.Context的使用（函数组件）</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、脚手架安装和创建</h2> 
<p>首先安装Node：<a href="https://www.cnblogs.com/lgx5/p/10732016.html" rel="nofollow">保姆级别教程</a></p> 
<h3><a id="1_3"></a>1.安装脚手架</h3> 
<p>在git bash中输入： <code>npm install create-react-app -g</code>，然后输入<code>create-react-app --version</code>，如果能正常显示版本号，那么安装就成功了。</p> 
<h3><a id="2_5"></a>2.创建脚手架</h3> 
<p>目录下右键 =&gt; git bash =&gt; <code>create-react-app 项目名</code> =&gt; 回车等几分钟就欧了。<br> 注意项目名不能包含大写字母。</p> 
<h3><a id="3_8"></a>3.看看脚手架目录</h3> 
<p><img src="https://images2.imgbox.com/81/4d/kK1WbkaR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4_10"></a>4.运行脚手架</h3> 
<p>脚手架目录下 =&gt; <code>npm run start</code>，然后就可以看到非常帅气的大花。</p> 
<h2><a id="0_12"></a>二、脚手架下从0开始写代码</h2> 
<p>没啥用的先删了，我们自己搭建src中的文件：<br> <img src="https://images2.imgbox.com/af/97/M8UkCxTG_o.png" alt="在这里插入图片描述"><br> 好，那么接下来我们重新写一下src里面的文件：</p> 
<p><img src="https://images2.imgbox.com/52/c4/miBJx5JU_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript">index<span class="token punctuation">.</span>js
<span class="token comment">//重写react代码，并且通过react渲染出来对应的内容</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-javascript">App<span class="token punctuation">.</span>jsx
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> HelloReact <span class="token keyword">from</span> <span class="token string">'./Components/HelloReact'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zzy'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>奥里给<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>HelloReact<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-javascript">HelloReact<span class="token punctuation">.</span>jsx
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">HelloReact</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'react'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Hello React<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> HelloReact
</code></pre> 
<h2><a id="_77"></a>三、组件化</h2> 
<h3><a id="1_78"></a>1.类组件</h3> 
<p>类组件的定义有如下要求：</p> 
<ul><li>组件的名称是大写字符开头（无论类组件还是函数组件）</li><li>类组件需要继承自 <code>React.Component</code></li><li>类组件必须实现<code>render</code>函数</li></ul> 
<p>使用class定义一个组件：</p> 
<ul><li>constructor是可选的，我们通常在constructor中初始化一些数据；</li><li><code>this.state</code>中维护的就是我们组件内部的数据；</li><li><code>render()</code> 方法是 class 组件中唯一必须实现的方法；</li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zzy'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>奥里给<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>HelloReact<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>render函数的返回值可以是什么？</p> 
<ol><li>React 元素：<br> 通常通过 JSX 创建。<br> 例如，<code>&lt;div /&gt;</code> 会被 React 渲染为 DOM 节点，<code>&lt;MyComponent /&gt;</code> 会被 React 渲染为自定义组件；<br> 无论是 <code>&lt;div /&gt;</code> 还是 <code>&lt;MyComponent /&gt;</code> 均为 React 元素（通过creatElement创建出来的东西）。</li><li>数组或 fragments：使得 render 方法可以返回多个元素。</li><li>Portals：可以渲染子节点到不同的 DOM 子树中。</li><li>字符串或数值类型：它们在 DOM 中会被渲染为文本节点</li><li>布尔类型或 null：什么都不渲染</li></ol> 
<h3><a id="2_119"></a>2.函数组件</h3> 
<p>函数组件是使用function来进行定义的函数，只是这个函数会返回和类组件中render函数返回一样的内容。</p> 
<p>函数组件有自己的特点（当然，后面我们会讲hooks，就不一样了）：</p> 
<ol><li>没有生命周期，也会被更新并挂载，但是没有生命周期函数；</li><li>没有<code>this</code>(组件实例）；</li><li>没有内部状态（<code>state</code>）；</li></ol> 
<p>我们来定义一个函数组件:</p> 
<pre><code class="prism language-javascript"><span class="token comment">//函数式组件</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//返回的东西和render返回的是一样的。</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>我是一个函数组件<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre> 
<h2><a id="React_138"></a>四、React的生命周期</h2> 
<h3><a id="1_139"></a>1.认识生命周期</h3> 
<p>生命周期的概念和vue中是一样的，只不过在React中钩子更少一些。</p> 
<p>React内部为了告诉我们当前处于哪些阶段，会对我们组件内部实现的某些函数进行回调，这些函数就是生命周期函数：</p> 
<ol><li>比如实现componentDidMount函数：组件已经挂载到DOM上时，就会回调；</li><li>比如实现componentDidUpdate函数：组件已经发生了更新时，就会回调；</li><li>比如实现componentWillUnmount函数：组件即将被移除时，就会回调；</li></ol> 
<p>我们可以在这些回调函数中编写自己的逻辑代码，来完成自己的需求功能；<br> 我们谈React生命周期时，主要谈的类的生命周期，因为函数式组件是没有生命周期函数的；（后面我们可以通过hooks来模拟一些生命周期的回调）</p> 
<h3><a id="2_149"></a>2.图解生命周期</h3> 
<p><img src="https://images2.imgbox.com/c0/2e/nnxkmRCz_o.png" alt="在这里插入图片描述"><br> 这张图画的还是非常不错的，<code>在这里插入代码片</code></p> 
<h4><a id="1Constructor_152"></a>（1）Constructor</h4> 
<p>如果不初始化 state 或不进行方法绑定，则不需要为 React 组件实现构造函数。<br> constructor中通常只做两件事情：<br> 1、通过给 <code>this.state</code> 赋值对象来初始化内部的state；<br> 2、为事件绑定实例（this）；</p> 
<h4><a id="2componentDidMount_157"></a>（2）componentDidMount</h4> 
<p><code>componentDidMount()</code> 会在组件挂载后（插入 DOM 树中）立即调用。<br> componentDidMount中通常进行哪里操作呢？<br> 依赖于DOM的操作可以在这里进行；<br> 在此处发送网络请求就最好的地方；（官方建议）<br> 可以在此处添加一些订阅（会在componentWillUnmount取消订阅）；</p> 
<h4><a id="3componentDidUpdate_163"></a>（3）componentDidUpdate</h4> 
<p><code>componentDidUpdate()</code> 会在更新后会被立即调用，首次渲染不会执行此方法。<br> 当组件更新后，可以在此处对 DOM 进行操作；<br> 如果你对更新前后的 props 进行了比较，也可以选择在此处进行网络请求；（例如，当 props 未发生变化时，则不会执行网络请求）。</p> 
<h4><a id="4componentWillUnmount_167"></a>（4）componentWillUnmount</h4> 
<p><code>componentWillUnmount()</code> 会在组件卸载及销毁之前直接调用。<br> 在此方法中执行必要的清理操作；<br> 例如，清除 timer，取消网络请求或清除在 <code>componentDidMount()</code> 中创建的订阅等；</p> 
<h3><a id="3_172"></a>3.演示生命周期</h3> 
<p>我们创建累组件App，并将HelloReact组件作为它的子组件：</p> 
<pre><code class="prism language-javascript">App组件：
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'APP-constructor'</span><span class="token punctuation">)</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zzy'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">changeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ht'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'App-render'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点击修改数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token punctuation">{<!-- --></span>name <span class="token operator">==</span> <span class="token string">'zzy'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>HelloReact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'App-componentDidMount'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'App-componentDidUpdate'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-javascript">HelloReact组件
<span class="token keyword">class</span> <span class="token class-name">HelloReact</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'HR-constructor'</span><span class="token punctuation">)</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'react'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'HR-render'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Hello React<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'HR-componentDidMount'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'HR-componentDidUpdate'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'HR-componentWillUnmount'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>让我们看一下控制台的输出：<br> <img src="https://images2.imgbox.com/c3/33/tDDvuKWH_o.png" alt="在这里插入图片描述"><br> 不难看出生命周期的一个顺序：<br> 对于挂载来说：父组件<code>constuctor</code> =&gt; 父组件<code>render</code> =&gt; 子组件<code>constructor</code> =&gt; 子组件<code>render</code> =&gt; 子组件挂载完毕 =&gt; 父组件挂载完毕</p> 
<p>对于更新来说，如果要让子组件从页面上消失，那么点击跟新执行父组件render函数后子组件会走销毁的钩子，然后走子组件更新完毕的钩子，和图是一样滴。</p> 
<h3><a id="4_252"></a>4.不常用的生命周期</h3> 
<p>请参考：<a href="https://zh-hans.reactjs.org/docs/react-component.html" rel="nofollow">React官方文档生命周期</a><br> <img src="https://images2.imgbox.com/24/98/svFusipl_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_255"></a>五、父子组件通信</h2> 
<p>在了解React中的组件通信前，我们先搭建一个组件嵌套结构：<br> <img src="https://images2.imgbox.com/70/57/5feCQmRL_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Header<span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Main<span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Footer<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-javascript">Footer和Header长得一样
<span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Header<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Main<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Banner<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ProductList<span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Banner</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Banner<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">ProductList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>ProductList<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="1props_318"></a>1.父传子props接收</h3> 
<p>这里我们主要研究<code>Main</code>给<code>Banner或ProductList</code>组件传数据，我们可以准备一些静态数据。</p> 
<p>和vue一样，在子组件标签处写属性名，传变量用<code>{}</code>，传其他用字符串。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">banner</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'动作射击'</span><span class="token punctuation">,</span> <span class="token string">'角色扮演'</span><span class="token punctuation">,</span> <span class="token string">'策略运营'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">productList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'古墓丽影'</span><span class="token punctuation">,</span><span class="token string">'镜之边缘'</span><span class="token punctuation">,</span><span class="token string">'神秘海域'</span><span class="token punctuation">,</span><span class="token string">'奥里给'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> banner<span class="token punctuation">,</span> productList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Main<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Banner banner<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>banner<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ProductList title<span class="token operator">=</span><span class="token string">"商品列表"</span> productList<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>productList<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>然后子组件在<code>constructor</code>中使用<code>super(props)</code>继承父类的<code>props</code>属性，并把<code>props</code>这个属性设置为传进来的值。</p> 
<p>当然啊，如果不写constructor，也能自动接收到props，这是一个小细节。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">ProductList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> title<span class="token punctuation">,</span> productList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
         <span class="token punctuation">{<!-- --></span>productList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
           <span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
	  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/bf/4e/R0j6KyIz_o.png" alt="在这里插入图片描述"><br> 接下来我们就可以队商品列表和标题进行展示：</p> 
<h3><a id="2props_372"></a>2.props接收数据类型限制和默认值</h3> 
<p>我们以<code>Main</code>组件和<code>ProductList</code>组件为例，将Main中的数据传给<code>ProductList</code></p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">productList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'古墓丽影'</span><span class="token punctuation">,</span><span class="token string">'镜之边缘'</span><span class="token punctuation">,</span><span class="token string">'神秘海域'</span><span class="token punctuation">,</span><span class="token string">'奥里给'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> banner<span class="token punctuation">,</span> productList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Main<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ProductList age<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">18</span><span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token string">"商品列表"</span> productList<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>productList<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ProductList age<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">10</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>接下来我们就可以在<code>ProductList</code>组件中对接收的数据进行类型和默认值的设置：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ProductList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> age<span class="token punctuation">,</span>title<span class="token punctuation">,</span> productList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>ProductList<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
          <span class="token punctuation">{<!-- --></span>productList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token comment">//props接收数据类型的限定</span>
ProductList<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> 
  <span class="token literal-property property">age</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">//必须是数字类型，必须有</span>
  <span class="token literal-property property">productList</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>array<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">//props接收数据的默认值</span>
ProductList<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'我的网页的干活'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">productList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如上，首先引入<code>PropTypes</code></p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span><span class="token punctuation">;</span>
</code></pre> 
<p>然后在类组件名字后面设置属性<code>propTypes</code>。<br> 默认值则设置属性<code>defaultProps</code>。</p> 
<p>其他细节可以翻看官方文档：<a href="https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html#gatsby-focus-wrapper" rel="nofollow">props默认值大全</a><br> 有些新东西比如我们现在可以通过static关键字直接在组件中写：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zzy'</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3_460"></a>3.子传父用函数</h3> 
<p>这里的方法和vue中类似（vue还可以用<a href="https://blog.csdn.net/weixin_42044763/article/details/126487008?spm=1001.2014.3001.5501">组件自定义事件</a>）<br> 1、在父组件中通过属性给子组件传递一个回调</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Son getSonData<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2、子组件可以调用父组件传的函数，并把组件数据作为参数传递过去，然后父组件就能拿到子组件的数据并进行后续操作。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">sonData</span><span class="token operator">:</span> <span class="token string">'我是子组件数据'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">sendData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//调用父组件传的函数并把子组件数据作为参数传过去</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">getSonData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>sonData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>子组件<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sendData</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点击把子组件数据传给父组件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4_503"></a>4.案例练习</h3> 
<p>给我实现下面这个效果：<br> <img src="https://images2.imgbox.com/2e/c7/iVswLIf3_o.png" alt="在这里插入图片描述"><br> 这里我们把上面的导航栏封装成组件<code>Navigate</code> ，整体的思路如下：<br> 1、父组件存放数据，先传给子组件一份<br> 2、子组件接收数据并遍历展示<br> 3、子组件添加按钮，动态显示类名active（原理就是通过点击事件修改currentIndex）<br> 4、父组件给子组件一个回调，子组件动态显示类名后，把当前index传给父组件<br> 5、父组件接收index并存起来，然后在下面展示对应的数据。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">navList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'新款'</span><span class="token punctuation">,</span> <span class="token string">'精选'</span><span class="token punctuation">,</span> <span class="token string">'流行'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">contentIndex</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">contentIndex</span><span class="token operator">:</span> index
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span> navList<span class="token punctuation">,</span> index <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Navigation navList<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>navList<span class="token punctuation">}</span> getContent<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>navList<span class="token punctuation">[</span>contentIndex<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Navigate</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">currentIndex</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">changeIndex</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">currentIndex</span><span class="token operator">:</span> index
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span> currentIndex <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span> navList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'nav'</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span>navList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">nav<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div
              key<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>nav<span class="token punctuation">}</span>
              className<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">title </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>currentIndex <span class="token operator">===</span> index <span class="token operator">?</span> <span class="token string">'active'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span>
              onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&gt;</span>
              <span class="token punctuation">{<!-- --></span>nav<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>备注：react中使用scss：<code>npm add node-sass@npm:dart-sass</code></p> 
<pre><code class="prism language-css">// 安装scss：npm add node-sass<span class="token atrule"><span class="token rule">@npm</span><span class="token punctuation">:</span>dart-sass
.nav</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">border</span><span class="token punctuation">:</span> 2px solid black<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>

    <span class="token selector">.title</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>

        <span class="token selector">&amp;.active</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
            <span class="token property">border-bottom</span><span class="token punctuation">:</span> 3px solid red<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="React_594"></a>六、React插槽效果</h2> 
<p>插槽也是父子通信的一种方式</p> 
<h3><a id="1propschildren_596"></a>1.通过props.children传递</h3> 
<p>我们在父组件中的子组件标签内部写几个div：</p> 
<pre><code class="prism language-javascript">父组件App
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Navigation<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"left"</span><span class="token operator">&gt;</span>左边<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"middle"</span><span class="token operator">&gt;</span>中间<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"right"</span><span class="token operator">&gt;</span>右边<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Navigation<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>那么子组件中就可以通过<code>this.props.children</code>读取到我们写的这些div，如果写多个，那么<code>children是一个数组</code>，如果写一个，那么children就是一个<code>react元素</code>（当然啊，我们可以通过propType限制children的类型是数组还是react元素）。</p> 
<pre><code class="prism language-javascript">子组件
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Navigation</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//props中的children可以接收到子组件插槽中的react元素</span>
    <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span>children<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'box'</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这样的话，我们就可以拿着这些东西去子组件展示</p> 
<h3><a id="2props_629"></a>2.通过props直接传递</h3> 
<p>上面这种用children接收的方式有个问题，就是接到父组件的react元素默认是按照子组件书写顺序传入children数组的，这样通过索引去写可能会有展示的顺序问题。，而且比较麻烦</p> 
<pre><code class="prism language-javascript"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//props中的children可以接收到子组件插槽中的react元素</span>
    <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span>children<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div  className<span class="token operator">=</span><span class="token string">'box'</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>children<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>children<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>比第一种更好的方式，就是我们在父组件中的子组件标签上直接添加属性，传入相应的react元素，子组件就可以通过props直接读取，直接用，非常奈斯</p> 
<pre><code class="prism language-javascript">父组件
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> left <span class="token operator">=</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"left"</span><span class="token operator">&gt;</span>左边<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> middle <span class="token operator">=</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"middle"</span><span class="token operator">&gt;</span>中间<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> right <span class="token operator">=</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"right"</span><span class="token operator">&gt;</span>右边<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{<!-- --></span><span class="token comment">/* 2.第二种方式：直接通过props传react元素 */</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>Navigation left<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>left<span class="token punctuation">}</span> middle<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>middle<span class="token punctuation">}</span> right<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>right<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>子组件可以根据属性名随意切换顺序，不用去通过索引找元素</p> 
<pre><code class="prism language-javascript">子组件
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//props中的children可以接收到子组件插槽中的react元素</span>
    <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span>children<span class="token punctuation">,</span>left<span class="token punctuation">,</span>middle<span class="token punctuation">,</span>right<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div  className<span class="token operator">=</span><span class="token string">'box'</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span>left<span class="token punctuation">}</span>
        <span class="token punctuation">{<!-- --></span>right<span class="token punctuation">}</span>
        <span class="token punctuation">{<!-- --></span>middle<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3_681"></a>3.作用域插槽</h3> 
<p>本质上还是父给子传个函数，然后子去调用并把当前的数据传给父组件，父组件根据数据的类型，返回不同的节点，这里就不写了。</p> 
<h2><a id="_683"></a>七、祖孙及更深层次的通信</h2> 
<h3><a id="1props_684"></a>1.{…props}解构</h3> 
<p>使用<code>{...props}</code>这种react官方提供的解构语法，可以直接把数据传下去，举个例子：</p> 
<pre><code class="prism language-javascript">父组件
 <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">person</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zzy'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span> person <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{<!-- --></span><span class="token comment">/* 1.第一种传递方式，繁琐 */</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>Son name<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>person<span class="token punctuation">.</span>name<span class="token punctuation">}</span> age<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>person<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{<!-- --></span><span class="token comment">/* 2.第二种传递方式：直接解构 */</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>Son <span class="token punctuation">{<!-- --></span><span class="token operator">...</span>person<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>儿子</p> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">/* 2.传过来的props也是一个对象，直接结构继续往下传 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>GrandSon <span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>孙子</p> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GrandSon</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>GGrandSon <span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>曾孙可以直接拿到数据直接用</p> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GGrandSon</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">,</span> age<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>我拿到了数据<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>name<span class="token punctuation">}</span><span class="token operator">-</span><span class="token punctuation">{<!-- --></span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2Context_748"></a>2.Context的使用（类组件）</h3> 
<p>使用Context可以直接把数据给任意一层组件：<br> 使用步骤：<br> 1、使用<code>React.createContext()</code>定义一个context<br> <img src="https://images2.imgbox.com/4f/3c/coDI2h1Y_o.png" alt="在这里插入图片描述"><br> 2、父组件引入一下</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> myContext <span class="token keyword">from</span> <span class="token string">'./context'</span>
</code></pre> 
<p>在子组件外边包一个标签（也可以在孙子组件包，可以理解为给谁传就给谁包，如果儿子组件，那么孙子组件也可以用步骤3的方法获取数据，曾孙也可以），名字是刚才定义的<code>名字.Provider</code>，然后加上<code>value</code>属性，属性值就是要传的值。</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span><span class="token comment">/* 3.第三种传递方式：context */</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span>myContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'ht'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">'10'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Son<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>myContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
</code></pre> 
<p>3、子组件或孙子组件通过添加<code>contextType</code>属性为可以把数据添加到<code>this.context</code>上（说的官方点，就是订阅我们这个myContext）：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> GrandSon <span class="token keyword">from</span> <span class="token string">'./GrandSon'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> myContext <span class="token keyword">from</span> <span class="token string">'../context'</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Son'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      	<span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>GrandSon <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Son<span class="token punctuation">.</span>contextType <span class="token operator">=</span> myContext<span class="token punctuation">;</span>  <span class="token comment">//3.添加contextType </span>
</code></pre> 
<h3><a id="3Context_784"></a>3.Context的使用（函数组件）</h3> 
<p>对于函数组件，我们需要这样来做：<br> <img src="https://images2.imgbox.com/95/7b/TWcwkzi1_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bc684a2f7816f12b691e9104f0d073f0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">geometric源码阅读和分析：MessagePassin类详解和使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8f87ffaf089807a5cb310ba770d072e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">RN使用第三方库实现选择照片或打开摄像头</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>