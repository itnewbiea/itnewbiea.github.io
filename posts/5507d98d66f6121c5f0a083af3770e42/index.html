<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>TWaver HTML5学习笔记 —— 动态设置网元样式 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="TWaver HTML5学习笔记 —— 动态设置网元样式" />
<meta property="og:description" content="一、学习内容概述： 学习如何在拓扑图中动态设置网元的样式。
二、学习内容总结：
1、添加属性表格： 1）、属性表格定义：使用twaver.controls.PropertySheet类，例如： var nodeStylePropertySheet = new twaver.controls.PropertySheet(); 2）、设置属性表格可编辑：setEditable(true)
nodeStylePropertySheet.setEditable(true); 3）、添加属性表格关联的对象及关联事件： var nodeStyleData = new twaver.Element(); var propertyBox = nodeStylePropertySheet.getPropertyBox(); topo.Util.addClientProperty(propertyBox, &#34;label.color&#34;).setEnumInfo([&#39;black&#39;, &#39;red&#39;]); nodeStyleData.setClient(&#34;label.color&#34;, &#34;black&#34;); nodeStylePropertySheet.getDataBox().add(nodeStyleData); nodeStylePropertySheet.getDataBox().getSelectionModel().setSelection(nodeStyleData); nodeStylePropertySheet.getDataBox().addDataPropertyChangeListener(function handlePropertyChange(e) { var name = topo.Util.getPropertyName(e); network.getElementBox().forEach(function(element) { if ( element instanceof twaver.Node || element instanceof twaver.Link) { element.setStyle(name, e.newValue); } }); }, this); 4）、添加各种类型的属性参考（代码来源于demo）： var map = { &#39;&#39;: &#39;None&#39;, &#39;default&#39;: &#39;Default&#39;, &#39;children&#39;: &#39;Children&#39;, &#39;descendant&#39;: &#39;Descendant&#39;, &#39;descendantAncestor&#39;: &#39;Descendant and Ancestor&#39; }; demo." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/5507d98d66f6121c5f0a083af3770e42/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-03-23T17:17:52+08:00" />
<meta property="article:modified_time" content="2014-03-23T17:17:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">TWaver HTML5学习笔记 —— 动态设置网元样式</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 style="margin:0px; padding:0px; color:rgb(51,51,51); font-family:Arial; line-height:26px"> <span style="font-family:'Microsoft YaHei'; font-size:12px">一、学习内容概述：</span></h4> 
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> <span style="font-family:'Microsoft YaHei'">     学习如何在拓扑图中动态设置网元的样式。</span></p> 
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> <span style="font-family:'Microsoft YaHei'"><br> </span></p> 
<p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> <span style="font-family:'Microsoft YaHei'"><strong>二、学习内容总结：</strong></span></p> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="font-family:'Microsoft YaHei'"><span style="font-weight:bold">1、添加属性表格：</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="font-family:'Microsoft YaHei'">      1）、属性表格定义：使用twaver.controls.PropertySheet类，例如：</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="font-family:'Microsoft YaHei'"></span> 
 <pre><code class="language-html">              var nodeStylePropertySheet = new twaver.controls.PropertySheet();</code></pre> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="font-family:'Microsoft YaHei'"><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px">  </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="font-family:'Microsoft YaHei'"><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px">     2）、设置属性表格可编辑：<span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px">setEditable(true)</span></span><br> </span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="font-family:'Microsoft YaHei'"><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"></span></span> 
 <pre><code class="language-html">              nodeStylePropertySheet.setEditable(true);</code></pre> 
 <div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
  <span style="font-family:'Microsoft YaHei'"><br> </span> 
 </div> 
 <div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
  <span style="font-family:'Microsoft YaHei'">      3）、添加属性表格关联的对象及关联事件：</span> 
 </div> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <pre><code class="language-html">var nodeStyleData = new twaver.Element();
var propertyBox = nodeStylePropertySheet.getPropertyBox();
topo.Util.addClientProperty(propertyBox, "label.color").setEnumInfo(['black', 'red']);
nodeStyleData.setClient("label.color", "black");
nodeStylePropertySheet.getDataBox().add(nodeStyleData);
nodeStylePropertySheet.getDataBox().getSelectionModel().setSelection(nodeStyleData);
nodeStylePropertySheet.getDataBox().addDataPropertyChangeListener(function handlePropertyChange(e) {
	var name = topo.Util.getPropertyName(e);
	network.getElementBox().forEach(function(element) {
		if ( element instanceof twaver.Node || element instanceof twaver.Link) {
			element.setStyle(name, e.newValue);
		}
	});
}, this);</code></pre> 
 <span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px">      4）、添加各种类型的属性参考（代码来源于demo）：</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"></span> 
 <pre><code class="language-html">        var map = { '': 'None', 'default': 'Default', 'children': 'Children', 'descendant': 'Descendant', 'descendantAncestor': 'Descendant and Ancestor' };
        demo.Util.addClientProperty(propertyBox, "check.mode")
                .setEnumInfo({ map: map, values: ['', 'default', 'children', 'descendant', 'descendantAncestor'] });
        demo.Util.addClientProperty(propertyBox, "checkable.function").setEnumInfo(['Leaf', 'Category', 'Check Network', 'Check All']);
        demo.Util.addClientProperty(propertyBox, "unCheckable.style").setEnumInfo(['none', 'disabled']);
        demo.Util.addClientProperty(propertyBox, "show.icon").setValueType('boolean');
        demo.Util.addClientProperty(propertyBox, "layout.type").setEnumInfo(demo.LAYOUT_TYPE);

        this.data.setClient("check.mode", this.tree.isCheckMode());
        this.data.setClient("checkable.function", 'Check All');
        this.data.setClient("unCheckable.style", this.tree.getUncheckableStyle());
        this.data.setClient("show.icon", true);
        this.data.setClient("layout.type", 'round');</code></pre> 
 <br> 
 <span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><strong>三、验证代码运行效果截图：</strong></span> 
 <br> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px">      <img src="https://images2.imgbox.com/76/80/xTUtO3B9_o.png" alt=""><br> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><br> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><strong>四、验证代码：</strong></span><br> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><span style="color:rgb(51,51,51); font-family:'Microsoft YaHei'; font-size:14px; line-height:26px"><strong><br> </strong></span></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 
 <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
	&lt;head&gt;
		&lt;meta charset="utf-8"&gt;
		&lt;title&gt;动态设置网元样式&lt;/title&gt;
		&lt;script type="text/javascript" src="./js/twaver.js"&gt;&lt;/script&gt;
		&lt;script type="text/javascript" src="./js/topo.js"&gt;&lt;/script&gt;
		&lt;script type="text/javascript"&gt;

			function init() {
				// 添加网元
				var box = new twaver.ElementBox();
				// 创建拓扑图
				var network = new twaver.network.Network(box);
				// 注册图片
				topo.Util.registerImage("./images/ne/route.png");
				topo.Util.registerImage("./images/ne/route_icon.png");
				var node = new twaver.Node();
				node.setName("ne1");
				node.setLocation(20, 30);
				node.setImage("route");
				node.setIcon("route_icon");
				box.add(node);
				var node2 = new twaver.Node();
				node2.setName("ne2");
				node2.setLocation(80, 150);
				node2.setImage("route");
				node2.setStyle("label.color", "black");
				node2.setIcon("route_icon");
				box.add(node2);
				var link = new twaver.Link(node, node2);
				link.setName("ne1 -- ne2");
				link.setToolTip("&lt;b&gt; ne1 -- ne2&lt;/b&gt;");
				box.add(link);

				// 创建网元树
				var tree = new twaver.controls.Tree(box);
				tree.setCheckMode('descendantAncestor');
				// 设置在网元树中只显示节点
				tree.setVisibleFunction(function(element) {
					return element instanceof twaver.Node;
				});

				// 存储网元样式的变更的sheet页

				var nodeStyleData = new twaver.Element();
				var nodeStylePropertySheet = new twaver.controls.PropertySheet();
				nodeStylePropertySheet.setEditable(true);
				var propertyBox = nodeStylePropertySheet.getPropertyBox();
				topo.Util.addClientProperty(propertyBox, "label.color").setEnumInfo(['black', 'red']);
				nodeStyleData.setClient("label.color", "black");
				nodeStylePropertySheet.getDataBox().add(nodeStyleData);
				nodeStylePropertySheet.getDataBox().getSelectionModel().setSelection(nodeStyleData);
				nodeStylePropertySheet.getDataBox().addDataPropertyChangeListener(function handlePropertyChange(e) {
					var name = topo.Util.getPropertyName(e);
					network.getElementBox().forEach(function(element) {
						if ( element instanceof twaver.Node || element instanceof twaver.Link) {
							element.setStyle(name, e.newValue);
						}
					});
				}, this);

				// 拓扑各视图布局
				var rightSplit = new twaver.controls.SplitPane(network, nodeStylePropertySheet, 'vertical', 0.7);
				var mainSplitPane = new twaver.controls.SplitPane(tree, rightSplit, 'horizontal', 0.3);
				var networkDom = mainSplitPane.getView();
				networkDom.style.width = "100%";
				networkDom.style.height = "100%";
				document.body.appendChild(networkDom);
				network.getView().style.backgroundColor = "#f3f3f3";
				network.getView().style.cursor = "hand";
				window.onresize = function() {
					mainSplitPane.invalidate();
				};
			}

		&lt;/script&gt;
	&lt;/head&gt;

	&lt;body οnlοad="init()" style="margin:0;"&gt;

	&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <br> 
 <br> 
</div> 
<div style="color:rgb(51,51,51); font-size:14px; line-height:26px"> 
 <span style="font-family:Microsoft YaHei"><br> </span> 
 <br> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f478917db16346eb95c86a19c383d09a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">多表关联查询（ORACLE版）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e383f99799ac0311a97fd1fca0b741a2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">TWaver HTML5学习笔记 —— 选择隐藏网元</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>