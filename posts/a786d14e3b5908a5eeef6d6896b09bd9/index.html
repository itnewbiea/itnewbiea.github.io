<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【鸿蒙】HarMonyOS的UI组件学习七之图片轮播 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【鸿蒙】HarMonyOS的UI组件学习七之图片轮播" />
<meta property="og:description" content="图片轮播功能也是我们在很多应用中常见的一种效果，今天分享鸿蒙系统中展示图片轮播功能。
在鸿蒙系统中，实现轮播效果，主要使用PageSlider组件
接下来创建主布局，代码如下:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;DirectionalLayout xmlns:ohos=&#34;http://schemas.huawei.com/res/ohos&#34; ohos:height=&#34;match_parent&#34; ohos:width=&#34;match_parent&#34; ohos:orientation=&#34;vertical&#34;&gt; &lt;PageSlider ohos:id=&#34;$&#43;id:ps&#34; ohos:height=&#34;200fp&#34; ohos:orientation=&#34;horizontal&#34; ohos:width=&#34;match_parent&#34;/&gt; &lt;/DirectionalLayout&gt; ohos:orientation=&#34;horizontal&#34;设置轮播滑动方向为横向
private int[] images = { ResourceTable.Media_jinriteyue, ResourceTable.Media_ydqbannerbeihai, ResourceTable.Media_ydqbannershouti, ResourceTable.Media_i_back, ResourceTable.Media_spic}; private String[] names={ &#34;第一张图&#34;, &#34;第二张图&#34;, &#34;第三张图&#34;, &#34;第四张图&#34;, &#34;第五张图&#34; }; 添加五张图片，定义其图片的引用id数组和每张图片对应的文字信息数组
定义实体类，将图片和文字封装成实体类
package com.example.hm_phone_java.entity; public class Page { private int image; private String name; public int getImage() { return image; } public void setImage(int image) { this.image = image; } public String getName() { return name; } public void setName(String name) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a786d14e3b5908a5eeef6d6896b09bd9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-29T16:07:40+08:00" />
<meta property="article:modified_time" content="2021-06-29T16:07:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【鸿蒙】HarMonyOS的UI组件学习七之图片轮播</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>图片轮播功能也是我们在很多应用中常见的一种效果，今天分享鸿蒙系统中展示图片轮播功能。</p> 
<p><img alt="" height="464" src="https://images2.imgbox.com/67/a7/V3P3AOzF_o.png" width="236"><img alt="" height="465" src="https://images2.imgbox.com/8a/66/YA50ty67_o.png" width="232"><img alt="" height="458" src="https://images2.imgbox.com/f2/23/foSygNST_o.png" width="241"><img alt="" height="456" src="https://images2.imgbox.com/05/46/qF9b6Wyy_o.png" width="223"><img alt="" height="465" src="https://images2.imgbox.com/36/df/YBm2T5bU_o.png" width="221"></p> 
<p>在鸿蒙系统中，实现轮播效果，主要使用PageSlider组件</p> 
<p>接下来创建主布局，代码如下:</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;DirectionalLayout
    xmlns:ohos="http://schemas.huawei.com/res/ohos"
    ohos:height="match_parent"
    ohos:width="match_parent"
    ohos:orientation="vertical"&gt;

    &lt;PageSlider
        ohos:id="$+id:ps"
        ohos:height="200fp"
        ohos:orientation="horizontal"
        ohos:width="match_parent"/&gt;

&lt;/DirectionalLayout&gt;</code></pre> 
<p>ohos:orientation="horizontal"设置轮播滑动方向为横向</p> 
<pre><code>private int[] images = {
            ResourceTable.Media_jinriteyue,
            ResourceTable.Media_ydqbannerbeihai,
            ResourceTable.Media_ydqbannershouti,
            ResourceTable.Media_i_back,
            ResourceTable.Media_spic};
    private String[] names={
            "第一张图",
            "第二张图",
            "第三张图",
            "第四张图",
            "第五张图"
    };</code></pre> 
<p>添加五张图片，定义其图片的引用id数组和每张图片对应的文字信息数组</p> 
<p>定义实体类，将图片和文字封装成实体类</p> 
<pre><code>package com.example.hm_phone_java.entity;

public class Page {
    private int image;
    private String name;

    public int getImage() {
        return image;
    }

    public void setImage(int image) {
        this.image = image;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Page(int image, String name) {
        this.image = image;
        this.name = name;
    }

    @Override
    public String toString() {
        return "Page{" +
                "image=" + image +
                ", name='" + name + '\'' +
                '}';
    }
}
</code></pre> 
<p>定义集合存储所有封装好的实体类</p> 
<pre><code>private List&lt;Page&gt; pages=new ArrayList&lt;&gt;();</code></pre> 
<p>将数据进行封装</p> 
<pre><code>private void initPage() {
        for (int i = 0; i &lt; images.length; i++) {
            Page page=new Page(images[i],names[i]);
            pages.add(page);
        }
    }</code></pre> 
<p>创建滑动页面组件的适配器类</p> 
<pre><code>package com.example.hm_phone_java.adapter;

import com.example.hm_phone_java.entity.Page;
import ohos.aafwk.ability.AbilitySlice;
import ohos.agp.colors.RgbColor;
import ohos.agp.components.*;
import ohos.agp.components.element.ShapeElement;
import ohos.agp.utils.Color;
import ohos.agp.utils.TextAlignment;

import java.util.List;

public class PageItemAdapter extends PageSliderProvider {

    private List&lt;Page&gt; pages;
    private AbilitySlice context;

    public PageItemAdapter(List&lt;Page&gt; pages,AbilitySlice context) {
        this.pages = pages;
        this.context=context;
    }

    @Override
    public int getCount() {
        return pages.size();
    }

    @Override
    public Object createPageInContainer(ComponentContainer componentContainer, int i) {
        Page page=pages.get(i);
        //创建图片组件
        Image image=new Image(context);
        //创建文本组件
        Text text=new Text(context);
        //设置图片平铺Image组件的所有宽高
        image.setScaleMode(Image.ScaleMode.STRETCH);
        //设置图片的高宽
        image.setLayoutConfig(
                new StackLayout.LayoutConfig(
                        StackLayout.LayoutConfig.MATCH_PARENT,
                        StackLayout.LayoutConfig.MATCH_PARENT));
        //添加图片
        image.setPixelMap(pages.get(i).getImage());
        StackLayout.LayoutConfig lc=new StackLayout.LayoutConfig(
                StackLayout.LayoutConfig.MATCH_PARENT,
                StackLayout.LayoutConfig.MATCH_CONTENT);
        //设置文本高宽
        text.setLayoutConfig(lc);
        //设置文本对齐方式
        text.setTextAlignment(TextAlignment.CENTER);
        //设置文本文字
        text.setText(pages.get(i).getName());
        //设置文本大小
        text.setTextSize(80);
        //设置相对于其他组件的对齐方式
        //设置文字颜色为白色
        text.setTextColor(Color.WHITE);
        //设置文本背景颜色
        RgbColor color=new RgbColor(100,100,100);
        ShapeElement se=new ShapeElement();
        se.setRgbColor(color);
        text.setBackground(se);
        //创建层布局
        StackLayout sl=new StackLayout(context);
        sl.setLayoutConfig(new StackLayout.LayoutConfig(StackLayout.LayoutConfig.MATCH_PARENT,
                StackLayout.LayoutConfig.MATCH_PARENT));
        //将图片和文本组件添加至层布局
        sl.addComponent(image);
        sl.addComponent(text);
        //将层布局放入滑页组件中
        componentContainer.addComponent(sl);
        return sl;
    }

    @Override
    public void destroyPageFromContainer(ComponentContainer componentContainer, int i, Object o) {
        //滑出屏幕的组件进行移除
        componentContainer.removeComponent((Component) o);
    }

    @Override
    public boolean isPageMatchToObject(Component component, Object o) {
        //判断滑页上的每一页的组件和内容是否保持一致
        return true;
    }


}
</code></pre> 
<p>适配器中采用java代码动态创建子布局的形式，这里也可以使用xml的方式创建子布局然后进行加载进来，这里就不做操作了，可以自行调整页面</p> 
<p>接着主界面上定义适配器</p> 
<pre><code>private PageItemAdapter adapter;</code></pre> 
<p>重写onStart方法，加载主布局，根据id获得滑动页面对象</p> 
<pre><code> @Override
    protected void onStart(Intent intent) {
        super.onStart(intent);
//加载主布局
        this.setUIContent(ResourceTable.Layout_ability_page);
//根据id获得滑动页面组件对象
        PageSlider ps = (PageSlider) this.findComponentById(ResourceTable.Id_ps);
//初始化图片和文字数据封装在集合中
        initPage();
//创建适配器对象，将当前界面对象和封装好的集合发送过去
        adapter=new PageItemAdapter(pages,this);
//将适配器加载至滑动组件上，完成同步组装
        ps.setProvider(adapter);

    }</code></pre> 
<p>接下来开启华为模拟器，运行项目即可，界面可以自行设计的更美观。</p> 
<p>至此该文章分享到这里，感谢大家的关注和阅读，后期会分享更多鸿蒙技术文章！！！</p> 
<p>需要相关图片的，可以使用:</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/02/ab/sk2YgJlx_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4e/a1/sOcSMvFU_o.png"></p> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/48/3b/5OySltfI_o.jpg"></p> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/da/c4/akg4c5TJ_o.png"></p> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e9/02/VDxTe89E_o.png"></p> 
<p></p> 
<p>下一篇 <a href="https://blog.csdn.net/u010321564/article/details/118390422">【鸿蒙】HarMonyOS的UI组件学习八之网站引入</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/208093acbf4869e2c81ea25c093bcc9c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue 字符串换行</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ae7650a5f423f23e4bf8b6c1341908c1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">图像处理计算两个文件夹中对应图片的PSNR/SSIM，计算</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>