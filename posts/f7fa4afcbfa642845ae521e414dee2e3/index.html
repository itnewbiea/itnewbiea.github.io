<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>桥接模式、NAT模式和仅主机模式 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="桥接模式、NAT模式和仅主机模式" />
<meta property="og:description" content="目录
一、虚拟机的网络
二、桥接模式、NAT模式、仅主机模式
1、bridged（桥接模式）
2、NAT（网络地址转换模式）
3、host-only（仅主机模式）
三、使用 DHCP 自动分配地址
在 VMware 中，虚拟机的网络连接主要是由 VMware 创建的虚拟交换机（也叫做虚拟网络）负责实现的，VMware 可以根据需要创建多个虚拟网络。
在 Windows 系统的主机上，VMware 最多可以创建 20 个虚拟网络，每个虚拟网络可以连接任意数量的虚拟机网络设备；在 Linux 系统的主机上，VMware 最多可以创建 255 个虚拟网络，但每个虚拟网络仅能连接 32个 虚拟机网络设备。VMware 的虚拟网络都是以 &#34;VMnet&#43;数字&#34; 的形式来命名的，例如 VMnet0、VMnet1、VMnet2……以此类推（在 Linux 系统的主机上，虚拟网络的名称均采用小写形式，例如 vmnet0 )。
当我们安装 VMware 时，VMware 会自动为 3 种网络连接模式各自创建 1 个虚拟机网络：VMnet0 (桥接模式)、VMnet8 (NAT模式)、VMnet1 (仅主机模式)。此外，我们也可以根据需要自行创建更多的虚拟网络。
一、虚拟机的网络 虚拟机上的网络连接图示：
虚拟机上创建的两个网段 VMnet1 和 VMnet2 在物理机上对应的网卡的位置，如图：
我们在虚拟机上配置的网段，网卡会默认使用该网段的第一个 IP 地址作为此网卡的 IP 地址。
二、桥接模式、NAT模式、仅主机模式 1、bridged（桥接模式） VMware 桥接模式，也就是将虚拟机的虚拟网络适配器与主机的物理网络适配器进行交接，虚拟机中的虚拟网络适配器可通过主机中的物理网络适配器直接访问到外部网络。简而言之，这就好像在局域网中添加了一台新的、独立的计算机一样。因此，虚拟机也会占用局域网中的一个 IP 地址，并且可以和其他终端进行相互访问。
桥接模式网络连接支持有线和无线主机网络适配器。如果你想把虚拟机当做一台完全独立的计算机看待，并且允许它和其他终端一样的进行网络通信，那么桥接模式通常是虚拟机访问网络的最简单途径。
桥接模式配置示例
桥接模式，虚拟机网段必须和物理机网段保持一致，另外虚拟机在网络配置的时候，一定不要忘了加入对应 VMnet" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f7fa4afcbfa642845ae521e414dee2e3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-15T14:59:01+08:00" />
<meta property="article:modified_time" content="2022-11-15T14:59:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">桥接模式、NAT模式和仅主机模式</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%BD%91%E7%BB%9C-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%BD%91%E7%BB%9C" rel="nofollow">一、虚拟机的网络</a></p> 
<p id="%E4%BA%8C%E3%80%81%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E3%80%81NAT%E6%A8%A1%E5%BC%8F%E3%80%81%E4%BB%85%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E3%80%81NAT%E6%A8%A1%E5%BC%8F%E3%80%81%E4%BB%85%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F" rel="nofollow">二、桥接模式、NAT模式、仅主机模式</a></p> 
<p id="1%E3%80%81bridged(%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F)-toc" style="margin-left:80px;"><a href="#1%E3%80%81bridged%28%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%29" rel="nofollow">1、bridged（桥接模式）</a></p> 
<p id="2%E3%80%81NAT(%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E6%A8%A1%E5%BC%8F)-toc" style="margin-left:80px;"><a href="#2%E3%80%81NAT%28%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E6%A8%A1%E5%BC%8F%29" rel="nofollow">2、NAT（网络地址转换模式）</a></p> 
<p id="3%E3%80%81host-only(%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F)-toc" style="margin-left:80px;"><a href="#3%E3%80%81host-only%28%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F%29" rel="nofollow">3、host-only（仅主机模式）</a></p> 
<p id="%E4%B8%89%E3%80%81%E4%BD%BF%E7%94%A8DHCP%E8%87%AA%E5%8A%A8%E5%88%86%E9%85%8D%E5%9C%B0%E5%9D%80-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81%E4%BD%BF%E7%94%A8DHCP%E8%87%AA%E5%8A%A8%E5%88%86%E9%85%8D%E5%9C%B0%E5%9D%80" rel="nofollow">三、使用 DHCP 自动分配地址</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>        在 VMware 中，虚拟机的网络连接主要是由 VMware 创建的<span style="color:#e6999d;">虚拟交换机</span>（也叫做虚拟网络）负责实现的，VMware 可以<span style="color:#e6999d;">根据需要创建多个虚拟网络</span>。</p> 
<p>        在 Windows 系统的主机上，VMware 最多可以创建 20 个虚拟网络，每个虚拟网络可以连接任意数量的虚拟机网络设备；在 Linux 系统的主机上，VMware 最多可以创建 255 个虚拟网络，但每个虚拟网络仅能连接 32个 虚拟机网络设备。VMware 的虚拟网络都是以 "VMnet+数字" 的形式来命名的，例如 VMnet0、VMnet1、VMnet2……以此类推（在 Linux 系统的主机上，虚拟网络的名称均采用小写形式，例如 vmnet0 )。</p> 
<p>        当我们安装 VMware 时，VMware 会自动为 3 种网络连接模式各自创建 1 个虚拟机网络<strong>：VMnet0 (桥接模式)</strong>、<strong>VMnet8 (NAT模式)</strong>、<strong>VMnet1 (仅主机模式)</strong>。此外，我们也可以根据需要自行创建更多的虚拟网络。</p> 
<h3 id="%E4%B8%80%E3%80%81%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%BD%91%E7%BB%9C">一、虚拟机的网络</h3> 
<p>        虚拟机上的网络连接图示：</p> 
<p><img alt="" height="344" src="https://images2.imgbox.com/77/86/DiqaBG9Y_o.png" width="500"></p> 
<p>        虚拟机上创建的两个网段 VMnet1 和 VMnet2 在物理机上对应的网卡的位置，如图：</p> 
<p><img alt="" height="308" src="https://images2.imgbox.com/95/52/pFwLKN1c_o.png" width="800"></p> 
<p>        我们在虚拟机上配置的网段，网卡会默认使用该网段的第一个 IP 地址作为此网卡的 IP 地址。</p> 
<p><img alt="" height="410" src="https://images2.imgbox.com/81/39/TzQwALoD_o.png" width="1000"></p> 
<h3 id="%E4%BA%8C%E3%80%81%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E3%80%81NAT%E6%A8%A1%E5%BC%8F%E3%80%81%E4%BB%85%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F">二、桥接模式、NAT模式、仅主机模式</h3> 
<h4 id="1%E3%80%81bridged(%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F)">1、bridged（桥接模式）</h4> 
<p>        VMware 桥接模式，也就是将虚拟机的虚拟网络适配器与主机的物理网络适配器进行交接，虚拟机中的虚拟网络适配器可通过主机中的物理网络适配器直接访问到外部网络。简而言之，这就好像在局域网中添加了一台新的、独立的计算机一样。因此，<span style="color:#c7e699;">虚拟机也会</span><span style="color:#b7df9f;">占用局域网中的一个 IP 地址</span>，并且可以和其他终端进行相互访问。</p> 
<p>        桥接模式网络连接支持有线和无线主机网络适配器。如果你想<span style="color:#e69c99;">把虚拟机当做一台完全独立的计算机看待</span>，并且允许它和其他终端一样的进行网络通信，那么桥接模式通常是虚拟机访问网络的最简单途径。</p> 
<p id="%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><strong>桥接模式配置示例</strong></p> 
<p>        桥接模式，虚拟机网段必须和物理机网段保持一致，另外虚拟机在网络配置的时候，<strong>一定不要忘了加入对应 VMnet</strong></p> 
<p><img alt="" height="176" src="https://images2.imgbox.com/0b/12/stRm19GY_o.png" width="677"></p> 
<p><strong>      </strong>  虚拟机桥接网络图示：</p> 
<p><img alt="" height="451" src="https://images2.imgbox.com/f9/7f/3QybvLdi_o.png" width="500"></p> 
<h4 id="2%E3%80%81NAT(%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E6%A8%A1%E5%BC%8F)">2、NAT（网络地址转换模式）</h4> 
<p>        NAT，是 Network Address Translation 的缩写，意即网络地址转换。<span style="color:#e69c99;">NAT 模式也是 VMware 创建虚拟机的默认网络连接模式</span>。使用NAT模式网络连接时，VMware会在主机上建立单独的专用网络，用以在主机和虚拟机之间相互通信。虚拟机向外部网络发送的请求数据 "包裹"，都会交由 NAT 网络适配器加上 "特殊标记" 并以主机的名义转发出去，外部网络返回的响应数据 "包裹"，也是先由主机接收，然后交由 NAT 网络适配器根据 "特殊标记" 进行识别并转发给对应的虚拟机，因此，<span style="color:#e6999d;">虚拟机在外部网络中不必具有自己的IP地址</span>。<span style="color:#e6999d;">从外部网络来看，虚拟机和主机在</span><span style="color:#b7df9f;">共享一个IP地址</span><span style="color:#e6999d;">，</span><span style="color:#e69c99;">默认情况下，</span><span style="color:#e6999d;">外部网络终端也无法访问到虚拟机</span>。</p> 
<p>        此外，在一台主机上只允许有一个 NAT 模式的虚拟网络。因此，同一台主机上的多个采用 NAT 模式网络连接的虚拟机也是可以相互访问的。<span style="color:#99c4e6;">// 一台主机上只允许有一个 NAT 模式的虚拟网络</span></p> 
<p id="%EF%BC%881%EF%BC%89NAT%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><strong>（1）NAT 网络配置示例</strong></p> 
<p>        下图结构可以使虚拟机和物理机相互 ping 通，并且虚拟机通过物理机的网卡访问互联网</p> 
<p><img alt="" height="178" src="https://images2.imgbox.com/f4/eb/LR5R4ygP_o.png" width="726"></p> 
<p>        VMnet8 设置为 NAT 模式，VMnet8 的 IP 地址为 192.168.80.1，虚拟机 A 和虚拟机 B 是 VMnet8 网段的两个虚拟机，他们的网关为 192.168.80.2 ，跟虚拟机的设置一样，如图：</p> 
<p><img alt="" height="359" src="https://images2.imgbox.com/12/29/dLezdgtI_o.png" width="600"></p> 
<p>        虚拟路由服务启动图示：</p> 
<p><img alt="" height="109" src="https://images2.imgbox.com/97/00/AOvqxb5q_o.png" width="762"></p> 
<p><strong>        注意：</strong>如果发现虚拟机之间 ping 不通，需要检查防火墙的设置，查看防火墙是否关闭：<strong>wf.msc</strong></p> 
<p><img alt="" height="169" src="https://images2.imgbox.com/c5/6a/xreJYxjE_o.png" width="300"></p> 
<p id="%EF%BC%882%EF%BC%89NAT%E8%AE%BE%E7%BD%AE%E5%AE%9E%E7%8E%B0%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><strong>（2）NAT设置实现端口转发</strong></p> 
<p>        前面我们已经提到，默认情况下，外部网络无法访问到虚拟机，不过我们也可以通过手动修改 NAT 设置实现端口转发功能，将外部网络发送到主机指定端口的数据转发到指定的虚拟机上。比如，我们在虚拟机的 80 端口上 "建立" 了一个站点，只要我们设置端口转发，将主机 88 端口上的数据转发给虚拟机的 80 端口，就可以让外部网络通过主机的 88 端口访问到虚拟机 80 端口上的站点。</p> 
<p>        远程控制 NAT 网段虚拟机图示：</p> 
<p><img alt="" height="281" src="https://images2.imgbox.com/7b/17/5TMbcRLe_o.png" width="685"></p> 
<p>        虚拟机配置图示如下：</p> 
<p><img alt="" height="277" src="https://images2.imgbox.com/f4/d4/e88apWAY_o.png" width="800"></p> 
<p>        注：打开远程访问命令——mstsc</p> 
<h4 id="3%E3%80%81host-only(%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F)">3、host-only（仅主机模式）</h4> 
<p>        仅主机模式，是一种比 NAT 模式更加封闭的的网络连接模式，它将创建完全包含在主机中的专用网络。<span style="color:#e6999d;">仅主机模式的虚拟网络适配器仅对主机可见</span>，并在虚拟机和主机系统之间提供网络连接。相对于 NAT 模式而言，仅主机模式不具备 NAT 功能，因此在默认情况下，使用仅主机模式网络连接的虚拟机无法连接到 Internet (在主机上安装合适的路由或代理软件，或者在 Windows 系统的主机上使用 Internet 连接共享功能，仍然可以让虚拟机连接到 Internet 或其他网络)。</p> 
<p>        在同一台主机上可以创建多个仅主机模式的虚拟网络，如果多个虚拟机处于同一个仅主机模式网络中，那么它们之间是可以相互通信的；如果它们处于不同的仅主机模式网络，则默认情况下无法进行相互通信（可通过在它们之间设置路由器来实现相互通信）。</p> 
<blockquote> 
 <p><span style="color:#e6999d;">形象的说：</span><br><span style="color:#99c3e6;">        </span><span style="color:#99c3e6;">桥接模式的虚拟机</span>，就像一个在路由器"民政局"那里 "上过户口" 的成年人，有自己单独的居住地址，虽然和主机住在同一个大院里，但好歹是有户口的人，可以大摇大摆地直接和外面通信。<br><span style="color:#99c3e6;">        </span><span style="color:#99c3e6;">NAT模式的虚拟机</span>，纯粹就是一个没上过户口的黑户，路由器 "民政局" 根本不知道有这么个人，自然也不会主动和它通信。即使虚拟机偶尔要向外面发送点的信件，都得交给主机以主机的名义转发出去，主机还专门请了一位叫做 NAT 的老大爷来专门负责这些虚拟机的发信、收信事宜。<br><span style="color:#99c3e6;">        </span><span style="color:#99c3e6;">仅主机模式的虚拟机</span>，纯粹是一个彻彻底底的黑奴，不仅没有户口、路由器 "民政局" 不知道这么号人，还被主机关在小黑屋里，连信件也不准往外发。</p> 
</blockquote> 
<h3 id="%E4%B8%89%E3%80%81%E4%BD%BF%E7%94%A8DHCP%E8%87%AA%E5%8A%A8%E5%88%86%E9%85%8D%E5%9C%B0%E5%9D%80">三、使用 DHCP 自动分配地址</h3> 
<p>        勾选 DHCP 服务，可以配置 DHCP 分配地址的范围，自动分配 IP 地址</p> 
<p><img alt="" height="527" src="https://images2.imgbox.com/ab/c3/ONgH1lKR_o.png" width="679"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1083ad4a6342c366757c1f30653c78aa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux命令之hdparm</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9a164be2e9d7e70f546ee641cb0c90ad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux基础学习记录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>