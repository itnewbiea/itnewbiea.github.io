<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【NOIP2014提高组】寻找道路 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【NOIP2014提高组】寻找道路" />
<meta property="og:description" content="题目背景 NOIP2014 提高组 Day2 试题。
题目描述 在有向图 G 中，每条边的长度均为 1，现给定起点和终点，请你在图中找一条从起点到终点的路径，该路径满足以下条件： 1．路径上的所有点的出边所指向的点都直接或间接与终点连通。 2．在满足条件 1 的情况下使路径最短。 注意：图 G 中可能存在重边和自环，题目保证终点没有出边。 请你输出符合条件的路径的长度。
输入格式 第一行有两个用一个空格隔开的整数 n 和 m，表示图有 n 个点和 m 条边。 接下来的 m 行每行 2 个整数 x、y，之间用一个空格隔开，表示有一条边从点 x 指向点y。 最后一行有两个用一个空格隔开的整数 s、t，表示起点为 s，终点为 t。
输出格式 输出只有一行，包含一个整数，表示满足题目描述的最短路径的长度。如果这样的路径不存在，输出 -1。
样例数据 1 输入
3 2 1 2 2 1 1 3 输出
-1 样例数据 2 输入
6 6 1 2 1 3 2 6 2 5 4 5 3 4 1 5 输出" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/946496219163876ed2aa817d0b6c26b0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-15T16:56:51+08:00" />
<meta property="article:modified_time" content="2018-09-15T16:56:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【NOIP2014提高组】寻找道路</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>题目背景</h4> 
<p>NOIP2014 提高组 Day2 试题。</p> 
<h4>题目描述</h4> 
<p>在有向图 G 中，每条边的长度均为 1，现给定起点和终点，请你在图中找一条从起点到终点的路径，该路径满足以下条件： <br> 1．路径上的所有点的出边所指向的点都直接或间接与终点连通。 <br> 2．在满足条件 1 的情况下使路径最短。 <br> 注意：图 G 中可能存在重边和自环，题目保证终点没有出边。 <br> 请你输出符合条件的路径的长度。</p> 
<h4>输入格式</h4> 
<p>第一行有两个用一个空格隔开的整数 n 和 m，表示图有 n 个点和 m 条边。 <br> 接下来的 m 行每行 2 个整数 x、y，之间用一个空格隔开，表示有一条边从点 x 指向点y。 <br> 最后一行有两个用一个空格隔开的整数 s、t，表示起点为 s，终点为 t。</p> 
<h4>输出格式</h4> 
<p>输出只有一行，包含一个整数，表示满足题目描述的最短路径的长度。如果这样的路径不存在，输出 -1。</p> 
<h4>样例数据 1</h4> 
<p>输入</p> 
<blockquote id="testcase-i1">
  3 2  
 <br> 1 2  
 <br> 2 1  
 <br> 1 3 
</blockquote> 
<p>输出</p> 
<blockquote>
  -1 
</blockquote> 
<h4>样例数据 2</h4> 
<p>输入</p> 
<blockquote id="testcase-i2">
  6 6  
 <br> 1 2  
 <br> 1 3  
 <br> 2 6  
 <br> 2 5  
 <br> 4 5  
 <br> 3 4  
 <br> 1 5 
</blockquote> 
<p>输出</p> 
<blockquote>
  3 
</blockquote> 
<h4>备注</h4> 
<p>【样例1说明】</p> 
<p><img alt="" class="has" height="97" src="https://images2.imgbox.com/60/21/7uf4dxJZ_o.jpg" width="217"></p> 
<p>如上图所示，箭头表示有向道路，圆点表示城市。起点 1 与终点 3 不连通，所以满足题目描述的路径不存在，故输出 -1。</p> 
<p>【样例2说明】</p> 
<p><img alt="" class="has" height="215" src="https://images2.imgbox.com/90/4f/F4ck0FMU_o.jpg" width="303"></p> 
<p>如上图所示，满足条件的路径为 1-&gt;3-&gt;4-&gt;5。注意点 2 不能在答案路径中，因为点 2 连了一条边到点 6，而点 6 不与终点 5 连通。</p> 
<p>【数据说明】 <br> 对于 30% 的数据，0&lt;n≤10，0 &lt;m≤20； <br> 对于 60% 的数据，0&lt;n≤100，0 &lt;m≤2000； <br> 对于 100% 的数据，0&lt;n≤10,000，0&lt;m≤200,000，0&lt;x，y，s，t≤n，x≠t。</p> 
<p> </p> 
<p>解析：</p> 
<p>       题解是BFS，而我用的是另一种方法。</p> 
<p>       如果没有限制一，那么就是一道最短路的板题，其实对于限制一，我们只需要将与出度为0且不是终点的点相连的点标记不能走，然后直接最短路，就可以了。为什么是对的？稍微画图想想你就明白了。</p> 
<p> </p> 
<p>代码：</p> 
<pre class="has"><code class="language-cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;

const int Maxn=10005;
const int Maxm=200005;
const int inf=1e9;
int n,m,size,s,t;
int first[Maxn],First[Maxn],v[Maxn],pre[Maxn],dis[Maxn],to[Maxn],vis[Maxn];
struct shu{int to,next;};
shu edge[Maxm&lt;&lt;1],Edge[Maxm&lt;&lt;1];

inline int get_int()
{
	int x=0,f=1;
	char c;
	for(c=getchar();(!isdigit(c))&amp;&amp;(c!='-');c=getchar());
	if(c=='-') f=-1,c=getchar();
	for(;isdigit(c);c=getchar()) x=(x&lt;&lt;3)+(x&lt;&lt;1)+c-'0';
	return x*f;
}

inline void build(int x,int y)
{
	edge[++size].next=first[x];
	first[x]=size;
	edge[size].to=y;
	Edge[size].next=First[y];
	First[y]=size;
	Edge[size].to=x;
}

inline void dfs(int point)
{
	for(int u=First[point];u;u=Edge[u].next)
	{
	  int to=Edge[u].to;
	  first[to]=0;
	}
}

inline void dijkstra()
{
	priority_queue&lt;pair&lt;int,int&gt; &gt;q;
	for(int i=1;i&lt;=n;i++) dis[i]=inf;
	dis[s]=0,q.push(make_pair(0,s));
	while(q.size())
	{
	  int point=q.top().second;
	  q.pop();if(vis[point]) continue;vis[point]=1;
	  for(int u=first[point];u;u=edge[u].next)
	  {
	  	int to=edge[u].to;
	  	if(dis[to] &gt; dis[point] + 1)
	  	{
	  	  dis[to]=dis[point]+1;
	  	  q.push(make_pair(-dis[to],to));
	  	}
	  }
	}
}

int main()
{
	n=get_int(),m=get_int();
	for(int i=1;i&lt;=m;i++)
	{
	  int x=get_int(),y=get_int();
	  build(x,y),to[x]++;
	}
	s=get_int(),t=get_int();
	for(int i=1;i&lt;=n;i++) if(!to[i] &amp;&amp; i!=t) dfs(i);
	dijkstra();
	if(dis[t]==inf) cout&lt;&lt;"-1\n";
	else cout&lt;&lt;dis[t]&lt;&lt;"\n";
	return 0;
}</code></pre> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ba4eebfc1632cf51587f4ab45c1d8063/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">日常IT技巧总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/13c4a820fe1f030cbea4b114260ef072/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">8、最少交换次数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>