<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【DataSophon】大数据服务组件之Flink升级 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【DataSophon】大数据服务组件之Flink升级" />
<meta property="og:description" content="🦄 个人主页——🎐开着拖拉机回家_Linux,大数据运维-CSDN博客 🎐✨🍁
🪁🍁🪁🍁🪁🍁🪁🍁 🪁🍁🪁🍁🪁🍁🪁 🪁🍁🪁🍁🪁🍁🪁🍁🪁🍁🪁🍁
感谢点赞和关注 ，每天进步一点点！加油！
目录
一、DataSophon是什么
1.1 DataSophon概述
1.2 架构概览
1.3 设计思想
二、解压新旧组件安装包
三、 修改安装包中文件和目录
四、重新生成安装包
3.1 重新打包
3.2 生成加密码
3.3 生成md5加密文件
五、 删除已装的组件包flink(ALL)
六、修改service_ddl.json
七、修改env环境变量(ALL)
7.1修改环境变量配置参数(ALL)
7.2 重启manager服务
八、重新安装服务
九、测试验证
一、DataSophon是什么 1.1 DataSophon概述 DataSophon也是个类似的管理平台，只不过与智子不同的是，智子的目的是锁死人类的基础科学阻碍人类技术爆炸，而DataSophon是致力于自动化监控、运维、管理大数据基础组件和节点的，帮助您快速构建起稳定，高效的大数据集群服务。
主要特性有:
快速部署,可快速完成300个节点的大数据集群部署兼容复杂环境,极少的依赖使其很容易适配各种复杂环境监控指标全面丰富，基于生产实践展示用户最关心的监控指标灵活便捷的告警服务，可实现用户自定义告警组和告警指标可扩展性强，用户可通过配置的方式集成或升级大数据组件 官方地址：DataSophon | DataSophon
GITHUB地址：datasophon/README_CN.md at dev · datavane/datasophon
1.2 架构概览 1.3 设计思想 为设计出轻量级，高性能，高可扩的，可满足国产化环境要求的大数据集群管理平台。需满足以下设计要求：
（1）一次编译，处处运行，项目部署仅依赖java环境，无其他系统环境依赖。
（2）DataSophon工作端占用资源少，不占用大数据计算节点资源。
（3）可扩展性高，可通过配置的方式集成托管第三方组件。
二、解压新旧组件安装包 flink-1.6.2升级到flink-1.6.3，安装包下载
https://mirrors.tuna.tsinghua.edu.cn/apache/ https://archive.apache.org/dist/flink/flink-1.6.3/ 解压
tar -zxvf flink-1.16.3-bin-scala_2.12.tgz -C /opt/datasophon/DDP/packages 三、 修改安装包中文件和目录 cd /opt/datasophon/DDP/packages chown -R root:root flink-1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/29bbb660cf4a3f41b2d81c2d9ea3bc4f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-17T13:12:13+08:00" />
<meta property="article:modified_time" content="2023-12-17T13:12:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【DataSophon】大数据服务组件之Flink升级</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><img alt="" height="534" id="h3Xxk" src="https://images2.imgbox.com/50/15/xRMUb7Pn_o.png" width="950"></p> 
<blockquote> 
 <p id="u5d85d1e0" style="text-align:center;"><strong><span style="color:#fe2c24;">🦄 个人主页——🎐<a href="https://blog.csdn.net/qq_35995514?type=blog" title="开着拖拉机回家_Linux,大数据运维-CSDN博客">开着拖拉机回家_Linux,大数据运维-CSDN博客</a> 🎐✨🍁</span></strong></p> 
 <p id="u68fd9b7c" style="text-align:center;"><span style="color:#fe2c24;"><strong>🪁🍁🪁🍁🪁🍁🪁🍁 🪁🍁🪁🍁🪁🍁🪁 🪁🍁🪁🍁🪁🍁🪁🍁🪁🍁🪁🍁</strong></span></p> 
 <p id="u61d52a22" style="text-align:center;"><span style="color:#fe2c24;"><strong>感谢点赞和关注 ，每天进步一点点！加油！</strong></span></p> 
</blockquote> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="phd7P-toc" style="margin-left:0px;"><a href="#phd7P" rel="nofollow">一、DataSophon是什么</a></p> 
<p id="VX9ye-toc" style="margin-left:40px;"><a href="#VX9ye" rel="nofollow">1.1 DataSophon概述</a></p> 
<p id="eQNEi-toc" style="margin-left:40px;"><a href="#eQNEi" rel="nofollow">1.2 架构概览</a></p> 
<p id="Kwqnx-toc" style="margin-left:40px;"><a href="#Kwqnx" rel="nofollow">1.3 设计思想</a></p> 
<p id="ggeC9-toc" style="margin-left:0px;"><a href="#ggeC9" rel="nofollow">二、解压新旧组件安装包</a></p> 
<p id="h95Xo-toc" style="margin-left:0px;"><a href="#h95Xo" rel="nofollow">三、 修改安装包中文件和目录</a></p> 
<p id="jANmo-toc" style="margin-left:0px;"><a href="#jANmo" rel="nofollow">四、重新生成安装包</a></p> 
<p id="jPNB9-toc" style="margin-left:40px;"><a href="#jPNB9" rel="nofollow">3.1 重新打包</a></p> 
<p id="MTPXg-toc" style="margin-left:40px;"><a href="#MTPXg" rel="nofollow">3.2 生成加密码</a></p> 
<p id="rSghQ-toc" style="margin-left:40px;"><a href="#rSghQ" rel="nofollow">3.3 生成md5加密文件</a></p> 
<p id="YbgUk-toc" style="margin-left:0px;"><a href="#YbgUk" rel="nofollow">五、 删除已装的组件包flink(ALL)</a></p> 
<p id="eL36v-toc" style="margin-left:0px;"><a href="#eL36v" rel="nofollow">六、修改service_ddl.json</a></p> 
<p id="CWe7i-toc" style="margin-left:0px;"><a href="#CWe7i" rel="nofollow">七、修改env环境变量(ALL)</a></p> 
<p id="hQiCw-toc" style="margin-left:40px;"><a href="#hQiCw" rel="nofollow">7.1修改环境变量配置参数(ALL)</a></p> 
<p id="5b2mW-toc" style="margin-left:40px;"><a href="#5b2mW" rel="nofollow">7.2 重启manager服务</a></p> 
<p id="gqrDt-toc" style="margin-left:0px;"><a href="#gqrDt" rel="nofollow">八、重新安装服务</a></p> 
<p id="EoRcB-toc" style="margin-left:0px;"><a href="#EoRcB" rel="nofollow">九、测试验证</a></p> 
<hr id="hr-toc"> 
<h2><span style="color:#956fe7;">一、DataSophon是什么</span></h2> 
<hr id="pMGBm"> 
<h3 id="VX9ye" style="background-color:transparent;"><span style="color:#1a439c;">1.1 DataSophon概述</span></h3> 
<hr id="HjiLj"> 
<blockquote> 
 <p id="uebf73a89">DataSophon也是个类似的管理平台，只不过与智子不同的是，智子的目的是锁死人类的基础科学阻碍人类技术爆炸，而DataSophon是致力于自动化监控、运维、管理大数据基础组件和节点的，帮助您快速构建起稳定，高效的大数据集群服务。</p> 
</blockquote> 
<p id="u9d3eb9c3"><strong>主要特性有:</strong></p> 
<ul><li id="u5ff1bc7b">快速部署,可快速完成300个节点的大数据集群部署</li><li id="ufe2d5463">兼容复杂环境,极少的依赖使其很容易适配各种复杂环境</li><li id="u3d647737">监控指标全面丰富，基于生产实践展示用户最关心的监控指标</li><li id="u1ef0be3f">灵活便捷的告警服务，可实现用户自定义告警组和告警指标</li><li id="u1f302051">可扩展性强，用户可通过配置的方式集成或升级大数据组件</li></ul> 
<p class="img-center"><img alt="" height="873" id="u341613fc" src="https://images2.imgbox.com/e1/cd/XV4W1YhF_o.png" width="1200"></p> 
<p id="u9b5e3743">官方地址：<a href="https://datasophon.github.io/datasophon-website/docs/current/%E6%A6%82%E8%A7%88" rel="nofollow" title="DataSophon | DataSophon">DataSophon | DataSophon</a></p> 
<p id="u84e5cc6d">GITHUB地址：<a href="https://github.com/datavane/datasophon/blob/dev/README_CN.md" title="datasophon/README_CN.md at dev · datavane/datasophon">datasophon/README_CN.md at dev · datavane/datasophon</a></p> 
<h3 id="eQNEi"><span style="color:#1a439c;">1.2 架构概览</span></h3> 
<hr id="QHSMH"> 
<p id="u281dfcb7"></p> 
<p class="img-center"><img alt="" height="503" id="u6678063e" src="https://images2.imgbox.com/c0/d2/TWO3i5Hi_o.png" width="711"></p> 
<h3 id="Kwqnx"><span style="color:#1a439c;">1.3 设计思想</span></h3> 
<hr id="fp9pU"> 
<p id="uabf371c9">为设计出轻量级，高性能，高可扩的，可满足国产化环境要求的大数据集群管理平台。需满足以下设计要求：</p> 
<p id="ufa0838c6">（1）一次编译，处处运行，项目部署仅依赖java环境，无其他系统环境依赖。</p> 
<p id="uea9f0920">（2）DataSophon工作端占用资源少，不占用大数据计算节点资源。</p> 
<p id="u11055e60">（3）可扩展性高，可通过配置的方式集成托管第三方组件。</p> 
<hr> 
<h2 id="ggeC9"><span style="color:#956fe7;">二、解压新旧组件安装包</span></h2> 
<hr id="domM3"> 
<p id="ac536768a93f5e4d5520147b11a2bd94">flink-1.6.2升级到flink-1.6.3，安装包下载</p> 
<pre id="rHD9C"><code>https://mirrors.tuna.tsinghua.edu.cn/apache/
https://archive.apache.org/dist/flink/flink-1.6.3/</code></pre> 
<p class="img-center"><img alt="" height="812" id="u07be9641" src="https://images2.imgbox.com/f3/5f/fkzA6Vta_o.png" width="839"></p> 
<p id="ad7420ecbc32e08efa8fe993ddd88f35">解压</p> 
<pre id="Sowiy"><code>tar  -zxvf  flink-1.16.3-bin-scala_2.12.tgz  -C  /opt/datasophon/DDP/packages</code></pre> 
<h2 id="h95Xo"><span style="color:#956fe7;">三、 修改安装包中文件和目录</span></h2> 
<hr id="ijEfJ"> 
<pre id="MenV1"><code>cd  /opt/datasophon/DDP/packages
chown  -R root:root  flink-1.16.3</code></pre> 
<h2 id="jANmo"><span style="color:#956fe7;">四、重新生成安装包</span></h2> 
<hr id="NxZ1y"> 
<h3 id="jPNB9"><span style="color:#1a439c;">4.1 重新打包</span></h3> 
<pre id="yPwIv"><code>cd  /opt/datasophon/DDP/packages
tar -zcvf flink-1.16.3.tar.gz flink-1.16.3
</code></pre> 
<h3 id="MTPXg"><span style="color:#1a439c;">4.2 生成加密码</span></h3> 
<pre id="kbDTE"><code>md5sum flink-1.16.3.tar.gz</code></pre> 
<h3 id="rSghQ"><span style="color:#1a439c;">4.3 生成md5加密文件</span></h3> 
<pre id="NhYnj"><code>echo '4d292114646f220e43ec56b75c53dfdb' &gt; flink-1.16.3.tar.gz.md5</code></pre> 
<p class="img-center"><img alt="" height="102" id="u79708b2b" src="https://images2.imgbox.com/84/10/nNru8PcI_o.png" width="853"></p> 
<p id="u19af43e7"></p> 
<h2 id="YbgUk"><span style="color:#956fe7;">五、 删除已装的组件包flink(ALL)</span></h2> 
<hr id="CET8g"> 
<p id="ua5ac80b3">从DataSophon上把flink停止并删除</p> 
<p class="img-center"><img alt="" height="556" id="ucb422052" src="https://images2.imgbox.com/08/6d/PLpXj3qN_o.png" width="1114"></p> 
<p id="uee68af61">删除已装的组件包，所有安装的服务器都要执行</p> 
<pre id="i1ZgY"><code>rm -rf  /opt/datasophon/flink*</code></pre> 
<h2 id="eL36v"><span style="color:#956fe7;">六、修改service_ddl.json</span></h2> 
<hr id="j1xI0"> 
<pre id="aUGRa"><code>vim /opt/datasophon/DDP/packages/datasophon-manager-1.2.1/conf/meta/DDP-1.2.1/FLINK/service_ddl.json
</code></pre> 
<p id="294cb3319385d105c01a0cc5d8ae1258">*datasophon-manager-1.2.1 为当前的datasohon安装版本,可能多处地方需要修改</p> 
<p class="img-center"><img alt="" height="453" id="u135adfbf" src="https://images2.imgbox.com/7f/dd/FCbqRdLc_o.png" width="1200"></p> 
<p id="c610e9857d5fcfc8eed3502b3813adf1"></p> 
<h2 id="CWe7i"><span style="color:#956fe7;">七、修改env环境变量(ALL)</span></h2> 
<hr id="KvWcx"> 
<h3 id="hQiCw"><span style="color:#1a439c;">7.1修改环境变量配置参数(ALL)</span></h3> 
<pre id="pYq0w"><code>
[root@ddp01 packages]# cat   /etc/profile.d/datasophon-env.sh
export FLINK_HOME=/opt/datasophon/flink-1.16.3


[root@ddp01 packages]#  source  /etc/profile.d/datasophon-env.sh
</code></pre> 
<p id="ue96c3d06"></p> 
<h3 id="5b2mW"><span style="color:#1a439c;">7.2 重启manager服务</span></h3> 
<pre id="fLTZD"><code>rm -rf   /opt/datasophon/DDP/packages/datasophon-manager-1.2.1/logs/*
/opt/datasophon/DDP/packages/datasophon-manager-1.2.1/bin/datasophon-api.sh restart api
cd /opt/datasophon/DDP/packages/datasophon-manager-1.2.1/logs
  </code></pre> 
<p id="af2d6898f7e5d2b9459da0116e28de18">查看相应的表配置数据</p> 
<pre id="f0UKm"><code>   select * from t_ddh_frame_service;
   select * from t_ddh_frame_service_role;</code></pre> 
<p class="img-center"><img alt="" height="253" id="u2a26a40b" src="https://images2.imgbox.com/9d/66/JL9aBGZK_o.png" width="1200"></p> 
<p id="u91aa6539"></p> 
<h2 id="gqrDt"><span style="color:#956fe7;">八、重新安装服务</span></h2> 
<hr id="lBCJV"> 
<p id="cda52fe0e993c209b213338372c3c37b">选择Flink服务</p> 
<p class="img-center"><img alt="" height="480" id="u61de569a" src="https://images2.imgbox.com/33/be/zdnuBVgo_o.png" width="1200"></p> 
<p id="u8a8f1726">选择 FlinkClient 安装</p> 
<p class="img-center"><img alt="" height="495" id="uf14e42c6" src="https://images2.imgbox.com/84/0d/gW3ymLr0_o.png" width="1200"></p> 
<p id="u073f8efc">配置根据实际情况调整</p> 
<p class="img-center"><img alt="" height="572" id="u12d8c8ff" src="https://images2.imgbox.com/b5/f7/iWZKBZPs_o.png" width="1200"></p> 
<p id="u1372f151">安装成功，如若失败可查看失败原因再重新安装</p> 
<p class="img-center"><img alt="" height="556" id="uea0b9c9d" src="https://images2.imgbox.com/3c/77/0OToJJ0s_o.png" width="1200"></p> 
<p id="ub8879236">客户端查看版本</p> 
<p class="img-center"><img alt="" height="241" id="uc0fb05cf" src="https://images2.imgbox.com/74/b4/oZyjbhMw_o.png" width="1200"></p> 
<h2 id="EoRcB"><span style="color:#956fe7;">九、测试验证</span></h2> 
<hr id="rSVM5"> 
<p id="ud6dd6841">运行WordCount测试程序</p> 
<pre id="wlZYu"><code>export HADOOP_CLASSPATH=`hadoop classpath`
flink run -m yarn-cluster /opt/datasophon/flink/examples/batch/WordCount.jar</code></pre> 
<p id="9156804e9842386acebbb5bb4eb16d15">集群提交，日志需要在yarn上查看</p> 
<p class="img-center"><img alt="" height="775" id="ua61cb2a5" src="https://images2.imgbox.com/ab/82/NmRZqfje_o.png" width="1200"></p> 
<p id="uaaf02359">执行成功</p> 
<p class="img-center"><img alt="" height="414" id="u8384f01b" src="https://images2.imgbox.com/20/df/66humFIg_o.png" width="1138"></p> 
<p id="uae522477"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e67a98d1d3cfa7968c9e4274a24ed7ce/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何从 iPhone 上恢复已删除的照片教程分享</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8b00434facc850c7740de2a87d50c402/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AI项目十八：YOLOV8自训练关键点检测</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>