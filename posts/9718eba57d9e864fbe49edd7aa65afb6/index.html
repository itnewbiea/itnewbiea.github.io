<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React 之 Router - 路由详解 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="React 之 Router - 路由详解" />
<meta property="og:description" content="一、Router的基本使用 1. 安装react-router react-router会包含一些react-native的内容，web开发并不需要
npm install react-router-dom
2. 设置使用模式 BrowserRouter或HashRouter
Router中包含了对路径改变的监听，并且会将相应的路径传递给子组件BrowserRouter =&gt; 使用history模式HashRouter =&gt; 使用hash模式 import React from &#39;react&#39;; import ReactDOM from &#39;react-dom/client&#39;; import App from &#39;./App&#39;; import { HashRouter } from &#39;react-router-dom&#39;; const root = ReactDOM.createRoot(document.getElementById(&#39;root&#39;)); root.render( &lt;React.StrictMode&gt; &lt;HashRouter&gt; &lt;App /&gt; &lt;/HashRouter&gt; &lt;/React.StrictMode&gt; ); 3. 路由映射配置 Routes 包裹所有的Route，在其中匹配一个路由
&lt;Routes&gt; &lt;Route path=&#39;/&#39; element={&lt;div&gt;home&lt;/div&gt;} /&gt; &lt;Route path=&#39;/about&#39; element={&lt;div&gt;about&lt;/div&gt;} /&gt; &lt;/Routes&gt; Router5.x使用的是Switch组件
&lt;Switch&gt; &lt;Route path=&#39;/home&#39; component={Home} /&gt; &lt;Route path=&#39;/about&#39; component={About} /&gt; {/* 重定向 */} &lt;Redirect to=&#39;/home&#39; /&gt; &lt;/Switch&gt; Route Route用于路径的匹配 path属性：用于设置匹配到的路径；element属性：设置匹配到路径后，渲染的组件 Router5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9718eba57d9e864fbe49edd7aa65afb6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-18T10:25:48+08:00" />
<meta property="article:modified_time" content="2023-08-18T10:25:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">React 之 Router - 路由详解</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p class="img-center"><img alt="" height="411" src="https://images2.imgbox.com/0e/f4/Hv7RuGVw_o.jpg" width="730"></p> 
<h2><span style="color:#956fe7;">一、Router的基本使用</span></h2> 
<h3><span style="color:#4da8ee;">1. 安装react-router</span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>react-router会包含一些react-native的内容，web开发并不需要</strong></span></p> 
 <p><span style="color:#fe2c24;"><strong>npm install react-router-dom</strong></span></p> 
</blockquote> 
<h3><span style="color:#4da8ee;">2. 设置使用模式</span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>BrowserRouter或HashRouter</strong></span></p> 
</blockquote> 
<ul><li><strong>Router中包含了对路径改变的监听，并且会将相应的路径传递给子组件</strong></li><li><strong><span style="color:#fe2c24;">BrowserRouter      =&gt;      </span>使用history模式</strong></li><li><strong><span style="color:#fe2c24;">HashRouter           =&gt;      </span>使用hash模式</strong></li></ul> 
<pre><code class="language-javascript">import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import { HashRouter } from 'react-router-dom';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  &lt;React.StrictMode&gt;
    &lt;HashRouter&gt;
      &lt;App /&gt;
    &lt;/HashRouter&gt;
  &lt;/React.StrictMode&gt;
);
</code></pre> 
<h3><span style="color:#4da8ee;">3. 路由映射配置</span></h3> 
<h4><span style="color:#38d8f0;">Routes</span></h4> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>包裹所有的Route，在其中匹配一个路由</strong></span></p> 
</blockquote> 
<pre><code class="language-javascript">&lt;Routes&gt;
  &lt;Route path='/' element={&lt;div&gt;home&lt;/div&gt;} /&gt;
  &lt;Route path='/about' element={&lt;div&gt;about&lt;/div&gt;} /&gt;
&lt;/Routes&gt;</code></pre> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>Router5.x使用的是Switch组件</strong></span></p> 
</blockquote> 
<pre><code class="language-javascript">&lt;Switch&gt;
  &lt;Route path='/home' component={Home} /&gt;
  &lt;Route path='/about' component={About} /&gt;
  {/* 重定向 */}
  &lt;Redirect to='/home' /&gt;
&lt;/Switch&gt;</code></pre> 
<h4><span style="color:#38d8f0;">Route</span></h4> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>Route用于路径的匹配 </strong></span></p> 
</blockquote> 
<ul><li><span style="color:#fe2c24;"><strong>path属性：</strong></span><strong>用于设置匹配到的路径；</strong></li><li><span style="color:#fe2c24;"><strong>element属性：</strong></span><strong>设置匹配到路径后，渲染的组件</strong> 
  <ul><li><strong>Router5.x使用的是component属性</strong></li></ul></li><li><span style="color:#fe2c24;"><strong>exact：</strong></span><strong>精准匹配，只有精准匹配到完全一致的路径，才会渲染对应的组件</strong> 
  <ul><li><strong>Router6.x不再支持该属性</strong></li></ul></li></ul> 
<p class="img-center"><img alt="" height="560" src="https://images2.imgbox.com/ab/5c/ZYDTdcSd_o.png" width="1063"></p> 
<h2><span style="color:#956fe7;">二、路由组件跳转</span></h2> 
<h3><span style="color:#4da8ee;">1. Link</span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong> to属性：Link中最重要的属性，用于设置跳转到的路径</strong></span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="282" src="https://images2.imgbox.com/d1/fb/5MkEppwf_o.png" width="628"></p> 
<pre><code class="language-javascript">import React, { PureComponent } from 'react';

import { Route, Routes, Link } from 'react-router-dom';
import Home from './pages/Home.jsx';
import About from './pages/About.jsx';

export class App extends PureComponent {
  render() {
    return (
      &lt;div className='app'&gt;
        &lt;div className='header'&gt;
          {/* 设置组件跳转 */}
          &lt;Link to='/home'&gt;首页&lt;/Link&gt;
          &lt;Link to='/about'&gt;关于&lt;/Link&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div className='content'&gt;
          {/* 映射关系 : path =&gt; Component */}
          &lt;Routes&gt;
            &lt;Route path='/' element={&lt;Home /&gt;} /&gt;
            &lt;Route path='/home' element={&lt;Home /&gt;} /&gt;
            &lt;Route path='/about' element={&lt;About /&gt;} /&gt;
          &lt;/Routes&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div className='footer'&gt;footer&lt;/div&gt;
      &lt;/div&gt;
    );
  }
}

export default App;
</code></pre> 
<p class="img-center"><img alt="" height="196" src="https://images2.imgbox.com/0a/22/5WCM05ab_o.png" width="852"></p> 
<h3><span style="color:#4da8ee;">2. NavLink</span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>NavLink是在Link基础之上增加了一些样式属性</strong></span></p> 
 <p><span style="color:#fe2c24;"><strong>认匹配成功时，NavLink就会添加上一个动态的active class</strong></span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="331" src="https://images2.imgbox.com/ff/e4/8S8B5RcK_o.png" width="1069"></p> 
<p></p> 
<pre><code class="language-javascript">import React, { PureComponent } from 'react';

import { Route, Routes, NavLink } from 'react-router-dom';
import Home from './pages/Home.jsx';
import About from './pages/About.jsx';

export class App extends PureComponent {
  render() {
    return (
      &lt;div className=' app'&gt;
        &lt;div className='header'&gt;
          {/* 设置组件跳转 */}
          &lt;NavLink to='/home'&gt;首页&lt;/NavLink&gt;
          &lt;NavLink to='/about'&gt;关于&lt;/NavLink&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div className='content'&gt;
          {/* 映射关系 : path =&gt; Component */}
          &lt;Routes&gt;
            &lt;Route path='/' element={&lt;Home /&gt;} /&gt;
            &lt;Route path='/home' element={&lt;Home /&gt;} /&gt;
            &lt;Route path='/about' element={&lt;About /&gt;} /&gt;
          &lt;/Routes&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div className='footer'&gt;footer&lt;/div&gt;
      &lt;/div&gt;
    );
  }
}

export default App;
</code></pre> 
<h2><span style="color:#956fe7;">三、Navigate导航</span></h2> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>Navigate用于路由的重定向，当这个组件出现时，就会执行跳转到对应的to路径中</strong></span></p> 
 <p><span style="color:#ff9900;"><strong>Router5.x使用的 Redirect</strong></span></p> 
</blockquote> 
<h3><span style="color:#4da8ee;">用法一 </span></h3> 
<pre><code class="language-javascript">import React, { PureComponent } from 'react';
import { Navigate } from 'react-router-dom';

export class Mine extends PureComponent {
  constructor(props) {
    super(props);

    this.state = {
      isLogin: false
    };
  }
  login() {
    this.setState({
      isLogin: true
    });
  }
  render() {
    const { isLogin } = this.state;
    return (
      &lt;div&gt;
        &lt;h2&gt;Mine&lt;/h2&gt;
        {/* 一旦出现Navigate，会自动跳转到对应页面 */}
        {!isLogin ? &lt;button onClick={(e) =&gt; this.login()}&gt;登录&lt;/button&gt; : &lt;Navigate to='/home' /&gt;}
      &lt;/div&gt;
    );
  }
}

export default Mine;
</code></pre> 
<h3><span style="color:#4da8ee;">用法二</span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>用于显示默认显示的页面</strong></span></p> 
</blockquote> 
<pre><code class="language-javascript">&lt;Routes&gt;
  
  {/* &lt;Route path='/' element={&lt;Home /&gt;} /&gt; */}
  &lt;Route path='/' element={&lt;Navigate to='/home' /&gt;} /&gt;

  &lt;Route path='/home' element={&lt;Home /&gt;} /&gt;
  &lt;Route path='/about' element={&lt;About /&gt;} /&gt;
  &lt;Route path='/mine' element={&lt;Mine /&gt;} /&gt;
&lt;/Routes&gt;</code></pre> 
<h2><span style="color:#956fe7;">四、Not Found页面配置</span></h2> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>当随意输入一个地址，该地址无法匹配，则显示一个Not Found的页面</strong></span></p> 
</blockquote> 
<pre><code class="language-javascript">&lt;Routes&gt;
  &lt;Route path='/' element={&lt;Navigate to='/home' /&gt;} /&gt;
  &lt;Route path='/home' element={&lt;Home /&gt;} /&gt;
  &lt;Route path='/about' element={&lt;About /&gt;} /&gt;
  &lt;Route path='/mine' element={&lt;Mine /&gt;} /&gt;
  {/* 当前面的路由未匹配到时, 显示 NotFound 组件 */}
  &lt;Route path='*' element={&lt;NotFound /&gt;} /&gt;
&lt;/Routes&gt;</code></pre> 
<h2><span style="color:#956fe7;">五、路由嵌套</span></h2> 
<h3><span style="color:#4da8ee;">1. 创建嵌套组件</span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>这里创建home组件的嵌套</strong></span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="268" src="https://images2.imgbox.com/ba/0b/rUBNnCIb_o.png" width="778"></p> 
<h3><span style="color:#4da8ee;">2. 配置映射关系</span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>在App.jsx中，统一配置，</strong></span><span style="color:#fe2c24;"><strong>router6.x之后路由配置最好写在一起</strong></span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="449" src="https://images2.imgbox.com/a2/24/fVt0Y4KG_o.png" width="721"></p> 
<h3><span style="color:#4da8ee;">3. 跳转Link &amp;&amp; 占位组件</span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>在home组件中进行配置</strong></span></p> 
 <p><span style="color:#fe2c24;"><strong>&lt;Outlet&gt;组件用于在父路由元素中作为子路由的占位元素</strong></span></p> 
</blockquote> 
<pre><code class="language-javascript">import React, { PureComponent } from 'react';
import { Link, Outlet } from 'react-router-dom';

export class Home extends PureComponent {
  render() {
    return (
      &lt;div&gt;
        &lt;h1&gt;Home&lt;/h1&gt;
        {/* 跳转按钮 */}
        &lt;Link to='/home/recommand'&gt;推荐&lt;/Link&gt;
        &lt;Link to='/home/ranking'&gt;排行&lt;/Link&gt;

        {/* 占位组件 */}
        &lt;Outlet /&gt;
      &lt;/div&gt;
    );
  }
}

export default Home;
</code></pre> 
<h3><span style="color:#4da8ee;">4. 效果 </span></h3> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c2/fd/EmqSTYAf_o.gif"></p> 
<h2><span style="color:#956fe7;"> 六、手动路由跳转</span></h2> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>在Router6.x版本之后，代码类的API都迁移到了hooks的写法 =&gt; </strong></span><span style="color:#fe2c24;"><strong>useNavigate的Hook</strong></span></p> 
</blockquote> 
<h3><span style="color:#4da8ee;">1. 函数式组件</span></h3> 
<blockquote> 
 <p><span style="color:#fe2c24;"><strong><span style="background-color:#1a439c;">hook只能在函数式组件中使用</span></strong></span></p> 
</blockquote> 
<pre><code class="language-javascript">import React from 'react';

import { Route, Routes, NavLink, Navigate, useNavigate } from 'react-router-dom';
import Home from './pages/Home.jsx';
import Recommand from './pages/components/Recommand.jsx';
import Ranking from './pages/components/Ranking.jsx';
import About from './pages/About.jsx';
import Mine from './pages/Mine.jsx';
import NotFound from './pages/NotFound.jsx';
// 1. 导入组件
import Category from './pages/Category.jsx';
import Profily from './pages/Profily.jsx';

export function App(props) {
  // hooks 只能放在顶层中使用，不能放在嵌套函数、条件判断、循环中使用，否则会报错
  const navigate = useNavigate();

  function routerJump(path) {
    // 4. 跳转
    navigate(path);
  }
  return (
    &lt;div className=' app'&gt;
      &lt;div className='header'&gt;
        &lt;NavLink to='/home'&gt;首页&lt;/NavLink&gt;
        &lt;NavLink to='/about'&gt;关于&lt;/NavLink&gt;
        &lt;NavLink to='/mine'&gt;我的&lt;/NavLink&gt;
        {/* 3. 点击跳转 */}
        &lt;button onClick={(e) =&gt; routerJump('/category')}&gt;分类&lt;/button&gt;
        &lt;button onClick={(e) =&gt; routerJump('/profily')}&gt;我的&lt;/button&gt;
      &lt;/div&gt;
      &lt;hr /&gt;
      &lt;div className='content'&gt;
        {/* 映射关系 : path =&gt; Component */}
        &lt;Routes&gt;
          &lt;Route path='/' element={&lt;Navigate to='/home' /&gt;} /&gt;
          &lt;Route path='/home' element={&lt;Home /&gt;}&gt;
            &lt;Route path='/home' element={&lt;Navigate to='/home/recommand' /&gt;} /&gt;
            &lt;Route path='/home/recommand' element={&lt;Recommand /&gt;} /&gt;
            &lt;Route path='/home/ranking' element={&lt;Ranking /&gt;} /&gt;
          &lt;/Route&gt;
          &lt;Route path='/about' element={&lt;About /&gt;} /&gt;
          &lt;Route path='/mine' element={&lt;Mine /&gt;} /&gt;
          {/* 2. 配置映射关系 */}
          &lt;Route path='/category' element={&lt;Category /&gt;} /&gt;
          &lt;Route path='/profily' element={&lt;Profily /&gt;} /&gt;

          {/* 当前面的路由未匹配到时, 显示 NotFound 组件 */}
          &lt;Route path='*' element={&lt;NotFound /&gt;} /&gt;
        &lt;/Routes&gt;
      &lt;/div&gt;
      &lt;hr /&gt;
      &lt;div className='footer'&gt;footer&lt;/div&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre> 
<h3><span style="color:#4da8ee;">2. 类组件 </span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>如果要在类组件中使用，则需弄一个高级组件包裹一下</strong></span></p> 
</blockquote> 
<h4 style="background-color:transparent;"><span style="color:#38d8f0;">路由高阶组件封装</span></h4> 
<pre><code class="language-javascript">// 让类组件可以使用路由组件的API进行跳转

import { useNavigate } from 'react-router-dom';

export default function withRouter(WrapperComponent) {
  return (props) =&gt; {
    const navigate = useNavigate();

    return &lt;WrapperComponent {...props} router={<!-- -->{ navigate }} /&gt;;
  };
}
</code></pre> 
<h4><span style="color:#38d8f0;">类组件使用</span></h4> 
<pre><code class="language-javascript">import React, { PureComponent } from 'react';

import { Route, Routes, NavLink, Navigate } from 'react-router-dom';
import About from './pages/About.jsx';
import NotFound from './pages/NotFound.jsx';
// 1. 导入组件
import Category from './pages/Category.jsx';
import Profily from './pages/Profily.jsx';

// 2. 导入高阶组件
import withRouter from './hoc/withRouter.js';

export class App extends PureComponent {
  routerJump(path) {
    // 5. 拿到增强到的router，设置跳转
    const { router } = this.props;
    router.navigate(path);
  }
  render() {
    return (
      &lt;div className=' app'&gt;
        &lt;div className='header'&gt;
          &lt;NavLink to='/about'&gt;关于&lt;/NavLink&gt;
          {/* 4. 点击跳转 */}
          &lt;button onClick={(e) =&gt; this.routerJump('/category')}&gt;分类&lt;/button&gt;
          &lt;button onClick={(e) =&gt; this.routerJump('/profily')}&gt;我的&lt;/button&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div className='content'&gt;
          {/* 映射关系 : path =&gt; Component */}
          &lt;Routes&gt;
            &lt;Route path='/' element={&lt;Navigate to='/about' /&gt;} /&gt;
            &lt;Route path='/about' element={&lt;About /&gt;} /&gt;
            {/* 2. 配置映射关系 */}
            &lt;Route path='/category' element={&lt;Category /&gt;} /&gt;
            &lt;Route path='/profily' element={&lt;Profily /&gt;} /&gt;

            {/* 当前面的路由未匹配到时, 显示 NotFound 组件 */}
            &lt;Route path='*' element={&lt;NotFound /&gt;} /&gt;
          &lt;/Routes&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div className='footer'&gt;footer&lt;/div&gt;
      &lt;/div&gt;
    );
  }
}

// 3. 使用高阶组件
export default withRouter(App);
</code></pre> 
<h2 style="background-color:transparent;"><span style="color:#956fe7;">七、路由参数传递</span></h2> 
<h3><span style="color:#4da8ee;">1. 动态路由的方式</span></h3> 
<h4><span style="color:#38d8f0;">效果</span></h4> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/dd/f4/xyyRzZms_o.gif"></p> 
<h4><span style="color:#38d8f0;">配置</span></h4> 
<pre><code class="language-javascript">&lt;Route path='/detail/:id' element={&lt;Detail /&gt;} /&gt;</code></pre> 
<h4><span style="color:#38d8f0;">组件内跳转触发 </span></h4> 
<pre><code class="language-javascript">import React, { PureComponent } from 'react';
import withRouter from '../hoc/withRouter';

export class Category extends PureComponent {
  constructor(props) {
    super(props);
    this.state = {
      arrList: [22222, 33333, 44444, 55555]
    };
  }
  itemClick(id) {
    const { router } = this.props;
    // 跳转到详情页
    router.navigate(`/detail/${id}`);
  }
  render() {
    const { arrList } = this.state;
    return (
      &lt;&gt;
        &lt;div&gt;Category&lt;/div&gt;
        &lt;ul className='nav'&gt;
          {arrList.map((item, index) =&gt; {
            return (
              &lt;li onClick={(e) =&gt; this.itemClick(item)} key={index}&gt;
                {item}
              &lt;/li&gt;
            );
          })}
        &lt;/ul&gt;
      &lt;/&gt;
    );
  }
}

export default withRouter(Category);
</code></pre> 
<h4 style="background-color:transparent;"><span style="color:#38d8f0;">路由高阶组件进一步封装</span></h4> 
<pre><code class="language-javascript">// 让类组件可以使用路由组件的API

import { useNavigate, useParams } from 'react-router-dom';

export default function withRouter(WrapperComponent) {
  return (props) =&gt; {
    // 1. 跳转对象
    const navigate = useNavigate();
    // 2. 动态路由的参数 /detail/:id
    const params = useParams();

    return &lt;WrapperComponent {...props} router={<!-- -->{ navigate, params }} /&gt;;
  };
}
</code></pre> 
<h4 style="background-color:transparent;"><span style="color:#38d8f0;">显示的组件</span></h4> 
<pre><code class="language-javascript">import React, { PureComponent } from 'react';

import withRouter from '../hoc/withRouter';
export class Detail extends PureComponent {
  render() {
    // 1. 通过 withRouter 高阶组件，可以获取到路由信息
    const { router } = this.props;
    return (
      &lt;&gt;
        &lt;div&gt;Detail&lt;/div&gt;
        {/* 2. 通过 router.params 获取到路由参数 */}
        &lt;h1&gt;id: {router.params.id}&lt;/h1&gt;
      &lt;/&gt;
    );
  }
}

export default withRouter(Detail);
</code></pre> 
<h3><span style="color:#4da8ee;">2. search传递参数</span></h3> 
<h4><span style="color:#38d8f0;">效果</span></h4> 
<p class="img-center"><img alt="" height="346" src="https://images2.imgbox.com/e9/6f/258VGpe7_o.png" width="510"></p> 
<h4 style="background-color:transparent;"><span style="color:#38d8f0;">配置</span></h4> 
<pre><code class="language-javascript">import React, { PureComponent } from 'react';

import { Route, Routes, NavLink, Navigate } from 'react-router-dom';

// 2. 导入高阶组件
import withRouter from './hoc/withRouter.js';
import Detail from './pages/Detail.jsx';
import Category from './pages/Category.jsx';

export class App extends PureComponent {
  routerJump(path) {
    const { router } = this.props;
    router.navigate(path);
  }
  render() {
    return (
      &lt;div className=' app'&gt;
        &lt;div className='header'&gt;
          &lt;NavLink to='/category'&gt;分类&lt;/NavLink&gt;
          {/* 5. 携带参数，使用query传参 */}
          &lt;NavLink to='/detail?name=coder&amp;age=18'&gt;详情&lt;/NavLink&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div className='content'&gt;
          {/* 4. 映射关系 : path =&gt; Component */}
          &lt;Routes&gt;
            &lt;Route path='/' element={&lt;Navigate to='/category' /&gt;} /&gt;
            &lt;Route path='/category' element={&lt;Category /&gt;} /&gt;
            &lt;Route path='/detail' element={&lt;Detail /&gt;} /&gt;
          &lt;/Routes&gt;
        &lt;/div&gt;
        &lt;hr /&gt;
        &lt;div className='footer'&gt;footer&lt;/div&gt;
      &lt;/div&gt;
    );
  }
}

// 3. 使用高阶组件
export default withRouter(App);
</code></pre> 
<h4><span style="color:#38d8f0;">路由高阶组件再进一步封装</span></h4> 
<pre><code class="language-javascript">// 让类组件可以使用路由组件的API

import { useNavigate, useParams, useLocation, useSearchParams } from 'react-router-dom';

export default function withRouter(WrapperComponent) {
  return (props) =&gt; {
    // 1. 跳转对象
    const navigate = useNavigate();
    // 2. 动态路由的参数 /detail/:id
    const params = useParams();

    // 3. 查询字符串的参数 /detail?id=1&amp;name=jack
    // 3.1.1 通过useLocation获取查询字符串
    // const lacationSearchs = useLocation().search;
    // console.log('searchParams', lacationSearchs); // ?name=coder&amp;age=18 =&gt; 不太好用
    // 3.1.2 通过URLSearchParams获取查询字符串
    // const lacationSearchParams = new URLSearchParams(lacationSearchs);
    // console.log('searchParams', lacationSearchParams.get('name')); // coder

    // 3.2.1 通过useSearchParams获取查询字符串
    const [searchParams, setSearchParams] = useSearchParams();
    // console.log('searchParams', searchParams.get('name')); // coder
    const query = Object.fromEntries(searchParams.entries()); // 可直接转换为对象，Object.fromEntries(searchParams)
    // console.log('searchParams', query); // {name: "coder", age: "18"}

    return &lt;WrapperComponent {...props} router={<!-- -->{ navigate, params, query }} /&gt;;
  };
}
</code></pre> 
<h4><span style="color:#38d8f0;">显示的组件</span></h4> 
<pre><code class="language-javascript">import React, { PureComponent } from 'react';

import withRouter from '../hoc/withRouter';
export class Detail extends PureComponent {
  render() {
    // 1. 通过 withRouter 高阶组件，可以获取到路由信息
    const { router } = this.props;
    const { name, age } = router.query;
    return (
      &lt;&gt;
        &lt;div&gt;Detail&lt;/div&gt;
        {/* 2. 通过 router.params 获取到路由参数 */}
        &lt;h1&gt;name: {name}&lt;/h1&gt;
        &lt;h1&gt;age: {age}&lt;/h1&gt;
      &lt;/&gt;
    );
  }
}

export default withRouter(Detail);
</code></pre> 
<h2><span style="color:#956fe7;">八、路由配置文件</span></h2> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>目前所有的路由定义都是直接使用Route组件，并且添加属性来完成的</strong></span></p> 
</blockquote> 
<p><strong>但是这样的方式会<span style="color:#fe2c24;">让路由变得非常混乱</span>，我们希望将所有的路由<span style="color:#fe2c24;">配置放到一个地方进行集中管理</span>：</strong></p> 
<ul><li><strong>在早期的时候，Router并且没有提供相关的API，我们需要借助于react-router-config完成</strong></li><li><strong>在Router6.x中，为我们提供了<span style="color:#fe2c24;">useRoutes</span> API可以完成相关的配置；</strong></li></ul> 
<h3><span style="color:#4da8ee;">1. 创建router文件夹</span></h3> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>index.js</strong></span></p> 
</blockquote> 
<pre><code class="language-javascript">const routes = [];

export default routes;
</code></pre> 
<h3><span style="color:#4da8ee;">2. 在App.jsx中使用</span></h3> 
<pre><code class="language-javascript">import React from 'react';

import { NavLink, useNavigate, useRoutes } from 'react-router-dom';
// 1. 导入路由相关的组件
import routes from './router';

export function App(props) {
  const navigate = useNavigate();
  function routerJump(path) {
    navigate(path);
  }
  return (
    &lt;div className=' app'&gt;
      &lt;div className='header'&gt;
        &lt;NavLink to='/home'&gt;首页&lt;/NavLink&gt;
        &lt;NavLink to='/about'&gt;关于&lt;/NavLink&gt;
        &lt;NavLink to='/mine'&gt;我的&lt;/NavLink&gt;
        &lt;button onClick={(e) =&gt; routerJump('/category')}&gt;分类&lt;/button&gt;
        &lt;button onClick={(e) =&gt; routerJump('/profily')}&gt;我的&lt;/button&gt;
      &lt;/div&gt;
      &lt;hr /&gt;
      &lt;div className='content'&gt;
        {/* &lt;Routes&gt;
          &lt;Route path='/' element={&lt;Navigate to='/home' /&gt;} /&gt;
          &lt;Route path='/home' element={&lt;Home /&gt;}&gt;
            &lt;Route path='/home' element={&lt;Navigate to='/home/recommand' /&gt;} /&gt;
            &lt;Route path='/home/recommand' element={&lt;Recommand /&gt;} /&gt;
            &lt;Route path='/home/ranking' element={&lt;Ranking /&gt;} /&gt;
          &lt;/Route&gt;
          &lt;Route path='/about' element={&lt;About /&gt;} /&gt;
          &lt;Route path='/mine' element={&lt;Mine /&gt;} /&gt;
          &lt;Route path='/category' element={&lt;Category /&gt;} /&gt;
          &lt;Route path='/profily' element={&lt;Profily /&gt;} /&gt;
          &lt;Route path='*' element={&lt;NotFound /&gt;} /&gt;
        &lt;/Routes&gt; */}
        {/* 2. 使用路由组件,渲染路由,并且传入路由配置 */}
        {useRoutes(routes)}
      &lt;/div&gt;
      &lt;hr /&gt;
      &lt;div className='footer'&gt;footer&lt;/div&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre> 
<h3><span style="color:#4da8ee;">3. 对比</span></h3> 
<p class="img-center"><img alt="" height="863" src="https://images2.imgbox.com/64/79/Mjr1WYCM_o.png" width="1150"></p> 
<h3><span style="color:#4da8ee;">4. 路由懒加载</span></h3> 
<h4><span style="color:#38d8f0;">1. index.js中配置</span></h4> 
<pre><code class="language-javascript">import React, { Suspense } from 'react';
import ReactDOM from 'react-dom/client';
import App from './App.jsx';
import { HashRouter } from 'react-router-dom';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  &lt;React.StrictMode&gt;
    {/* 
      Suspense组件用于在组件渲染时显示一个fallback组件，直到该组件加载完成为止 
      fallback属性用于指定fallback组件，可以是任何react元素，可以是一个加载动画，也可以是一个加载提示文字
      当异步组件加载完成后，fallback组件会被卸载，然后渲染异步组件
    */}
    &lt;HashRouter&gt;
      &lt;Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;
        &lt;App /&gt;
      &lt;/Suspense&gt;
    &lt;/HashRouter&gt;
  &lt;/React.StrictMode&gt;
);
</code></pre> 
<h4><span style="color:#38d8f0;">2. router中配置</span></h4> 
<pre><code class="language-javascript">// Desc: 路由配置文件

// 同步路由配置，没进行分包处理
// import Home from '../pages/Home.jsx';
import Recommand from '../pages/components/Recommand.jsx';
import Ranking from '../pages/components/Ranking.jsx';
import About from '../pages/About.jsx';
import Mine from '../pages/Mine.jsx';
import NotFound from '../pages/NotFound.jsx';

import Category from '../pages/Category.jsx';
import Profily from '../pages/Profily.jsx';
import { Navigate } from 'react-router-dom';

// 异步路由配置，进行了分包处理 =&gt; 一般用于比较大的页面，比如登录页、注册页、首页等
import { lazy } from 'react';
// import =&gt; 会将整个文件加载进来，然后再从中导出需要的部分, 会导致整个文件被加载进来，会增加首屏加载时间 =&gt; 是webpack的语法</code></pre> 
<h4></h4> 
<h4></h4>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/90b1f3a568c05f9cb8776bf8c1c0ba76/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于C&#43;&#43;的OpenCV4入门基础--认识Mat</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/924c3459c969dd2173a641275d5545e9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于C&#43;&#43;的OpenCV4入门基础--图形绘制</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>