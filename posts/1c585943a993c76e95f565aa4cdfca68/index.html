<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Uni-app之Nvue开发细节总结 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Uni-app之Nvue开发细节总结" />
<meta property="og:description" content="uni-app App端内置了一个基于 weex 改进的原生渲染引擎，提供了原生渲染能力
适用场景
需要高性能的区域长列表或瀑布流滚动。webview的页面级长列表滚动是没有性能问题的，但页面中某个区域做长列表滚动，则需要使用nvue的list、recycle-list、waterfall等组件(详见)。这些组件的性能要高于vue页面里的区域滚动组件scroll-view。左右拖动的长列表。在webview里，通过swiper&#43;scroll-view实现左右拖动的长列表，前端模拟下拉刷新，这套方案的性能不好。此时推荐使用nvue，比如新建uni-app项目时的新闻示例模板，就采用了nvue，切换很流畅如深度使用map组件，建议使用nvue。除了层级问题，App端nvue文件的map功能更完善，和小程序拉齐度更高，多端一致性更好。如深度使用video，建议使用nvue。比如如下2个场景：video内嵌到swiper中，以实现抖音式视频滑动切换，例子见插件市场；nvue的视频全屏后，通过cover-view实现内容覆盖，比如增加文字标题、分享按钮。对App启动速度要求极致化。App端如果首页使用nvue且在manifest里配置fast模式，那么App的启动速度可以控制在1秒左右。而使用vue页面的话，App的启动速度一般是3秒起，取决于你的代码性能和体积。 Nvue与vue区别
nvue 页面控制显隐只可以使用v-if不可以使用v-show。nvue 页面只能使用flex布局，不支持其他布局方式。文字内容，必须、只能在&lt;text&gt;组件下，只有&lt;text&gt;标签可以设置字体大小，字体颜色。不支持背景图background-image。但可以使用&lt;image&gt;组件和层级来实现类似web中的背景效果。css选择器支持的比较少，只能使用 class 选择器，class 进行绑定时只支持数组语法在 App.vue 中定义的全局js变量不会在 nvue 页面生效。globalData和vuex是生效的.不能在 style 中引入字体文件。可使用以下写法 beforeCreate() { const domModule = uni.requireNativePlugin(&#39;dom&#39;) domModule.addRule(&#39;fontFace&#39;, { &#39;fontFamily&#39;: &#34;myIconfont&#34;, &#39;src&#39;: &#34;url(&#39;http://at.alicdn.com/t/font_2234252_v3hj1klw6k9.ttf&#39;)&#34; }); } 不能使用百分比布局，如width：100%Nvue与Vue直接可以通过uni.$on,uni.$emit进行通讯，注意要在界面销毁前调用uni.$off销毁监听器，或者使用uni.$once.Nvue与Vue共享数据vuex、uni.storage、globalData。推荐使用vuex（之后会出一篇简书总结vuex使用示例）。 兼容性
style：由于采用原生渲染，并非所有浏览器的 css 均支持，布局模型只支持 flex 布局设置render-whole=&#34;true&#34;时，视图层将组件以及子组件的信息结构一次性和原生层通讯，通过整个节点的重绘提升了排版渲染性能。
设置render-whole=&#34;false&#34;时，视图层将以子节点一个接着一个和原生层通讯再重绘。总体的渲染时间可能更久。目前暂不支持radial-gradient（径向渐变） 安卓与iOS区别
nvue 的各组件在安卓端默认是透明的，如果不设置background-color，可能会导致出现重影的问题。iOS下refresh可使用alwaysScrollableVertical支持上下滚动，支持下拉操作。如果定位元素超过容器边界，在 Android 下，超出部分将不可见，原因在于 Android 端元素 overflow默认值为hidden，但目前 Android 暂不支持设置 overflow: visibleiOS平台阴影box-shadow，安卓平台阴影elevation(组件的属性，不是css样式) {box-shadow:inset offset-x offset-y blur-radius color} {box-shadow:投影方式 X轴偏移量 Y轴偏移量 阴影模糊半径 阴影颜色} &lt;view elevation=&#34;5px&#34;&gt;&lt;/view&gt; 作者：大码猴
链接：https://www.jianshu.com/p/2fc394637e23
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1c585943a993c76e95f565aa4cdfca68/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-07T10:19:31+08:00" />
<meta property="article:modified_time" content="2022-07-07T10:19:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Uni-app之Nvue开发细节总结</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>uni-app App端内置了一个基于 weex 改进的原生渲染引擎，提供了原生渲染能力</p> 
<p>适用场景</p> 
<ol><li>需要高性能的区域长列表或瀑布流滚动。webview的页面级长列表滚动是没有性能问题的，但页面中某个区域做长列表滚动，则需要使用nvue的<code>list</code>、<code>recycle-list</code>、<code>waterfall</code>等组件(<a href="https://links.jianshu.com/go?to=https%3A%2F%2Funiapp.dcloud.io%2Fcomponent%2Flist" rel="nofollow" title="详见">详见</a>)。这些组件的性能要高于vue页面里的区域滚动组件<code>scroll-view</code>。</li><li>左右拖动的长列表。在webview里，通过<code>swiper</code>+<code>scroll-view</code>实现左右拖动的长列表，前端模拟下拉刷新，这套方案的性能不好。此时推荐使用nvue，比如新建uni-app项目时的<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fext.dcloud.net.cn%2Fplugin%3Fid%3D103" rel="nofollow" title="新闻示例模板">新闻示例模板</a>，就采用了nvue，切换很流畅</li><li>如深度使用map组件，建议使用nvue。除了层级问题，App端nvue文件的map功能更完善，和小程序拉齐度更高，多端一致性更好。</li><li>如深度使用<code>video</code>，建议使用nvue。比如如下2个场景：video内嵌到swiper中，以实现抖音式视频滑动切换，例子见<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fext.dcloud.net.cn%2Fsearch%3Fq%3D%25E4%25BB%25BF%25E6%258A%2596%25E9%259F%25B3" rel="nofollow" title="插件市场">插件市场</a>；nvue的视频全屏后，通过<code>cover-view</code>实现内容覆盖，比如增加文字标题、分享按钮。</li><li>对App启动速度要求极致化。App端如果首页使用nvue且在manifest里配置fast模式，那么App的启动速度可以控制在1秒左右。而使用vue页面的话，App的启动速度一般是3秒起，取决于你的代码性能和体积。</li></ol> 
<p>Nvue与vue区别</p> 
<ol><li>nvue 页面控制显隐只可以使用<code>v-if</code>不可以使用<code>v-show</code>。</li><li>nvue 页面只能使用<code>flex</code>布局，不支持其他布局方式。</li><li>文字内容，必须、只能在<code>&lt;text&gt;</code>组件下，只有<code>&lt;text&gt;</code>标签可以设置字体大小，字体颜色。</li><li>不支持背景图<code>background-image</code>。但可以使用<code>&lt;image&gt;</code>组件和层级来实现类似web中的背景效果。</li><li>css选择器支持的比较少，只能使用 class 选择器，class 进行绑定时只支持数组语法</li><li>在 App.vue 中定义的全局js变量不会在 nvue 页面生效。<code>globalData</code>和<code>vuex</code>是生效的.</li><li>不能在 style 中引入字体文件。可使用以下写法</li></ol> 
<p></p> 
<pre><code>beforeCreate() {
   const domModule = uni.requireNativePlugin('dom')
    domModule.addRule('fontFace', {
         'fontFamily': "myIconfont",
         'src': "url('http://at.alicdn.com/t/font_2234252_v3hj1klw6k9.ttf')"
    });
}
</code></pre> 
<ol><li>不能使用百分比布局，如<code>width：100%</code></li><li>Nvue与Vue直接可以通过<code>uni.$on</code>,<code>uni.$emit</code>进行通讯，注意要在界面销毁前调用<code>uni.$off</code>销毁监听器，或者使用<code>uni.$once</code>.</li><li>Nvue与Vue共享数据vuex、uni.storage、globalData。推荐使用vuex（之后会出一篇简书总结vuex使用示例）。</li></ol> 
<p>兼容性</p> 
<ol><li>style：由于采用原生渲染，并非所有浏览器的 css 均支持，布局模型只支持 flex 布局</li><li>设置render-whole="true"时，视图层将组件以及子组件的信息结构一次性和原生层通讯，通过整个节点的重绘提升了排版渲染性能。<br> 设置render-whole="false"时，视图层将以子节点一个接着一个和原生层通讯再重绘。总体的渲染时间可能更久。</li><li>目前暂不支持<code>radial-gradient</code>（径向渐变）</li></ol> 
<p>安卓与iOS区别</p> 
<ol><li>nvue 的各组件在安卓端默认是透明的，如果不设置background-color，可能会导致出现重影的问题。</li><li>iOS下<code>refresh</code>可使用<code>alwaysScrollableVertical</code>支持上下滚动，支持下拉操作。</li><li>如果定位元素超过容器边界，在 Android 下，超出部分将不可见，原因在于 Android 端元素 <code>overflow</code>默认值为<code>hidden</code>，但目前 Android 暂不支持设置 <code>overflow: visible</code></li><li>iOS平台阴影<code>box-shadow</code>，安卓平台阴影<code>elevation</code>(组件的属性，不是css样式)</li></ol> 
<p></p> 
<pre><code>{box-shadow:inset offset-x offset-y blur-radius color}
{box-shadow:投影方式 X轴偏移量 Y轴偏移量 阴影模糊半径  阴影颜色}
</code></pre> 
<p></p> 
<pre><code>&lt;view elevation="5px"&gt;&lt;/view&gt;</code></pre> 
<p><br><br> 作者：大码猴<br> 链接：https://www.jianshu.com/p/2fc394637e23<br> 来源：简书<br> 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/538482bd8f159fb08ff942d03aaa7cd0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">git入门（8）- git detached from commitID</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/481e2fa06279b1245f2c4cff8f75a867/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Docker 搭建单机 Redis</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>