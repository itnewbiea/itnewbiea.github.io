<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>uniapp 分享例子做个记录 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="uniapp 分享例子做个记录" />
<meta property="og:description" content="&lt;template&gt;
&lt;view class=&#34;content&#34;&gt;
&lt;view class=&#34;invite-wrapper&#34; v-if=&#34;inviteUrl&#34;&gt;
&lt;uni-qrcode class=&#34;invite-qrcode&#34; ref=&#34;qrcode&#34; cid=&#34;invite-qr-canvas&#34; :text=&#34;inviteUrl&#34; :margin=&#34;10&#34; makeOnLoad
@makeComplete=&#34;qrcodeComplete&#34; /&gt;
&lt;view class=&#34;share-btn&#34;&gt;
&lt;button type=&#34;primary&#34; @click=&#34;shareLink&#34;&gt;分享链接&lt;/button&gt;
&lt;button type=&#34;primary&#34; @click=&#34;shareImage&#34;&gt;分享图片&lt;/button&gt;
&lt;/view&gt;
&lt;view class=&#34;share-btn&#34;&gt;
&lt;button type=&#34;primary&#34; @click=&#34;toInvitedUser&#34;&gt;我邀请的用户&lt;/button&gt;
&lt;/view&gt;
&lt;uni-popup id=&#34;popupShare&#34; ref=&#34;popupShare&#34; type=&#34;share&#34;&gt;
&lt;uni-popup-share title=&#34;分享到&#34; :shareType=&#34;shareType&#34; @select=&#34;select&#34;&gt;&lt;/uni-popup-share&gt;
&lt;/uni-popup&gt;
&lt;/view&gt;
&lt;/view&gt;
&lt;/template&gt;
&lt;script&gt;
import {
mapState
} from &#39;vuex&#39;
export default {
data() {
return {
inviteUrl: &#39;&#39;,
qrcodeImagePath: &#39;&#39;,
qrcodePath: &#39;&#39;,
shareType: &#39;&#39;
}
},
onLoad() {
uni.showLoading({" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ca92fa7204e11c3978d2d23d112211c8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T09:58:04+08:00" />
<meta property="article:modified_time" content="2024-01-04T09:58:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">uniapp 分享例子做个记录</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>&lt;template&gt;<br>     &lt;view class="content"&gt;<br>         &lt;view class="invite-wrapper" v-if="inviteUrl"&gt;<br>             &lt;uni-qrcode class="invite-qrcode" ref="qrcode" cid="invite-qr-canvas" :text="inviteUrl" :margin="10" makeOnLoad<br>              @makeComplete="qrcodeComplete" /&gt;<br>             &lt;view class="share-btn"&gt;<br>                 &lt;button type="primary" @click="shareLink"&gt;分享链接&lt;/button&gt;<br>                 &lt;button type="primary" @click="shareImage"&gt;分享图片&lt;/button&gt;<br>             &lt;/view&gt;<br>             &lt;view class="share-btn"&gt;<br>                 &lt;button type="primary" @click="toInvitedUser"&gt;我邀请的用户&lt;/button&gt;<br>             &lt;/view&gt;<br>             &lt;uni-popup id="popupShare" ref="popupShare" type="share"&gt;<br>                 &lt;uni-popup-share title="分享到" :shareType="shareType" @select="select"&gt;&lt;/uni-popup-share&gt;<br>             &lt;/uni-popup&gt;<br>         &lt;/view&gt;<br>     &lt;/view&gt;<br> &lt;/template&gt;</p> 
<p>&lt;script&gt;<br>     import {<!-- --><br>         mapState<br>     } from 'vuex'<br>     export default {<!-- --><br>         data() {<!-- --><br>             return {<!-- --><br>                 inviteUrl: '',<br>                 qrcodeImagePath: '',<br>                 qrcodePath: '',<br>                 shareType: ''<br>             }<br>         },<br>         onLoad() {<!-- --><br>             uni.showLoading({<!-- --><br>                 title: '加载中...'<br>             })<br>             uniCloud.callFunction({<!-- --><br>                 name: 'user-center',<br>                 data: {<!-- --><br>                     action: 'getInviteCode'<br>                 },<br>                 success: (res) =&gt; {<!-- --><br>                     console.log(res);<br>                     if (res.result.code === 0) {<!-- --><br>                         // 这里请修改为真实的邀请页面url<br>                         this.inviteUrl = 'https://login.tpl.dcloud.net.cn/#/pages/invite-reg/invite-reg?invite_code=' + res.result.myInviteCode<br>                     } else {<!-- --><br>                         uni.showModal({<!-- --><br>                             content: '获取用户邀请码失败:' + res.result.msg,<br>                             showCancel: false<br>                         })<br>                     }<br>                 },<br>                 fail: (err) =&gt; {<!-- --><br>                     uni.showModal({<!-- --><br>                         content: '获取用户邀请码失败，请稍后再试',<br>                         showCancel: false<br>                     })<br>                 },<br>                 complete() {<!-- --><br>                     uni.hideLoading()<br>                 }<br>             })<br>         },<br>         methods: {<!-- --><br>             copyInviteUrl() {<!-- --><br>                 uni.setClipboardData({<!-- --><br>                     data: this.inviteUrl<br>                 })<br>             },<br>             qrcodeComplete(path) {<!-- --><br>                 this.qrcodeImagePath = path<br>             },<br>             shareLink() {<!-- --><br>                 this.shareType = 'link'<br>                 this.$refs.popupShare.open()<br>             },<br>             shareImage() {<!-- --><br>                 this.shareType = 'image'<br>                 this.$refs.popupShare.open()<br>             },<br>             select({<!-- --><br>                 item<br>             }) {<!-- --><br>                 const shareTitle = '登录模板',<br>                     shareSummary = 'DCloud邀请您试用登录模板'<br>                 let params = {}<br>                 switch (`${this.shareType}_${item.name}`) {<!-- --><br>                     case 'link_weixin':<br>                         params = {<!-- --><br>                             type: 1,<br>                             summary: this.inviteUrl,<br>                             scene: 'WXSceneSession'<br>                         }<br>                         break;<br>                     case 'link_qq':<br>                         params = {<!-- --><br>                             type: 1,<br>                             title: shareTitle,<br>                             summary: shareSummary,<br>                             href: this.inviteUrl<br>                         }<br>                         break;<br>                     case 'link_more':<br>                         uni.setClipboardData({<!-- --><br>                             data: this.inviteUrl<br>                         })<br>                         return<br>                     case 'image_weixin':<br>                         params = {<!-- --><br>                             type: 2,<br>                             imageUrl: this.qrcodeImagePath,<br>                             scene: 'WXSceneSession'<br>                         }<br>                         break;<br>                     case 'image_qq':<br>                         params = {<!-- --><br>                             type: 2,<br>                             imageUrl: this.qrcodeImagePath<br>                         }<br>                         break;<br>                     case 'image_more':<br>                         uni.shareWithSystem({<!-- --><br>                             type: 'image',<br>                             imageUrl: this.qrcodeImagePath<br>                         })<br>                         return<br>                     default:<br>                         break;<br>                 }<br>                 console.log(params);<br>                 uni.share({<!-- --><br>                     provider: item.name,<br>                     ...params,<br>                     success() {<!-- --><br>                         uni.showModal({<!-- --><br>                             content: '分享成功',<br>                             showCancel: false<br>                         })<br>                     },<br>                     fail(err) {<!-- --><br>                         uni.showModal({<!-- --><br>                             content: '分享失败：' + err.errMsg,<br>                             showCancel: false<br>                         })<br>                     }<br>                 })</p> 
<p>            },<br>             toInvitedUser() {<!-- --><br>                 uni.navigateTo({<!-- --><br>                     url: '/pages/invited-user/invited-user'<br>                 })<br>             }<br>         }<br>     }<br> &lt;/script&gt;</p> 
<p>&lt;style&gt;<br>     .invite-wrapper {<!-- --><br>         display: flex;<br>         padding: 20px;<br>         flex-direction: column;<br>         align-items: center;<br>     }</p> 
<p>    .invite-qrcode {<!-- --><br>         border-radius: 10px;<br>         box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 10px 1px;<br>         overflow: hidden;<br>     }</p> 
<p>    .share-btn {<!-- --><br>         display: flex;<br>         flex-direction: row;<br>         padding: 20px 0px 10px 0px;<br>     }</p> 
<p>    .share-btn button {<!-- --><br>         flex: 1;<br>         margin: 0px 10px;<br>         border-radius: 40px;<br>     }<br> &lt;/style&gt;</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/342aab35a34df07369794ee228b75a9c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">电动车低速提示音系统(AVAS)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c1bc39aee3aa2e408c3b40b6fb600297/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">置顶＞ 个人学习记录一览</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>