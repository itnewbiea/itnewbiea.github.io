<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue   根据后台返回文件流   导出数据 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue   根据后台返回文件流   导出数据" />
<meta property="og:description" content="第一步
&lt;el-button @click=&#34;exportMessage&#34;&gt;批量导出&lt;/el-button&gt;
第二部
methods里面写方法
exportMessage() {
let data = {
search: this.ruleForm.searchPeople, 向后台传的参数
PageIndex: this.PageIndex,
pageSize: this.pageSize
};
let Authorization = localStorage.getItem(&#34;token&#34;); token axios.defaults.headers.common[&#34;Authorization&#34;] = &#34;Bearer &#34; &#43; Authorization;
axios.post(&#39;http://114.55.169.186:1000/web/Export/exportTalent&#39;, data, {
responseType: &#39;blob&#39; 这个 必须得加上
}).then(res =&gt; {
// console.log(res,555)
console.log(res, &#39;返回数据列&#39;);
const blob = new Blob([res.data], {
type: &#39;application/vnd.ms-excel&#39;
});
console.log(blob, &#39;----------0990&#39;);
const fileName = &#39;招募人才.xlsx&#39;; 定义文件名字
const linkNode = document.createElement(&#39;a&#39;); 添加点击事件
linkNode.download = fileName; //a标签的download属性规定下载文件的名称" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/552cc3b5ae50f4f750231a12ff13c0b4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-12T10:11:13+08:00" />
<meta property="article:modified_time" content="2020-08-12T10:11:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue   根据后台返回文件流   导出数据</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>第一步</p> 
<p>       &lt;el-button @click="exportMessage"&gt;批量导出&lt;/el-button&gt;</p> 
<p>第二部</p> 
<p>methods里面写方法</p> 
<p> exportMessage() {<!-- --><br>            let data = {<!-- --><br>                     search: this.ruleForm.searchPeople,      向后台传的参数<br>                     PageIndex: this.PageIndex,<br>                     pageSize: this.pageSize<br>                 };<br>                 let Authorization = localStorage.getItem("token");      token  <br>                 axios.defaults.headers.common["Authorization"] = "Bearer " + Authorization;<br>                 axios.post('http://114.55.169.186:1000/web/Export/exportTalent', data, {<!-- --><br>                     responseType: 'blob'       这个 必须得加上<br>                 }).then(res =&gt; {<!-- --><br>                     // console.log(res,555)<br>                     console.log(res, '返回数据列');<br>                     const blob = new Blob([res.data], {<!-- --><br>                         type: 'application/vnd.ms-excel'<br>                     });<br>                     console.log(blob, '----------0990');<br>                     const fileName = '招募人才.xlsx';       定义文件名字<br>                     const linkNode = document.createElement('a');    添加点击事件</p> 
<p>                    linkNode.download = fileName; //a标签的download属性规定下载文件的名称<br>                     linkNode.style.display = 'none';<br>                     linkNode.href = URL.createObjectURL(blob); //生成一个Blob URL<br>                     document.body.appendChild(linkNode);<br>                     linkNode.click(); //模拟在按钮上的一次鼠标单击</p> 
<p>                    URL.revokeObjectURL(linkNode.href); // 释放URL 对象<br>                     document.body.removeChild(linkNode);<br>                 })</p> 
<p>      },</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4b47c086aadfb56fe9717653fa0d341d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">hive数据备份与恢复</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6c4dfb7cf19718635b19db7a16b910e8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数学建模方法 — 【02】模糊综合评价方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>