<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LR常见问题整理 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LR常见问题整理" />
<meta property="og:description" content="首先要感谢群友的无私分享，才能得到这篇好的学习资料，整理得太好了，所以收藏保存，方便以后学习。 一：LoadRunner常见问题整理 1.LR 脚本为空的解决方法： 1.去掉ie设置中的第三方支持取消掉
2.在系统属性－高级－性能－数据执行保护中，添加loadrunner安装目录中的vugen.exe文件.
有可能是由于录制的URL地址采用的是localhost的问题，改成分配的IP地址或127.0.0.1试试。
3、插入文本检查点步骤时，使用web_reg_find，通常TextPfx和TextSfx中会包含双引号，需要进行转义（用斜杠），例如：
web_reg_find(&#34;Search=Body&#34;,
&#34;SaveCount=Welcome&#34;,
&#34;TextPfx=欢迎&lt;a class=\&#34;drop\&#34; id=\&#34;viewpro\&#34; onMouseOver=\&#34;showMenu(this.id)\&#34;&gt;&#34;,
&#34;TextSfx=&lt;/a&gt;&#34;,
LAST)
遇到flight界面为空的解决的可能方法：
1、如果安装了IE以外的浏览器，并且IE不是默认浏览器，则无法生成录制脚本
2、如果录制脚本时IE不能打开，则需要将浏览器的IE工具高级选项中，将“启用第三方浏览器扩展”的
勾选去掉
3、lr自带的webtours系统，如果点击Flights选项，出现空白页面，请检查本机oracle的 PERL5LIB环境
2.LoadRunner录制脚本时为什么不弹出IE浏览器? 当一台主机上安装多个浏览器时，LoadRunner录制脚本经常遇到不能打开浏览器的情况，可以用下面的方法来解决。
启动浏览器，打开Internet选项对话框，切换到高级标签，去掉“启用第三方浏览器扩展(需要重启动)”的勾选，然后再次运行VuGen即可解决问题
提示：通常安装Firefox等浏览器后，都会勾选上面得选项，导致不能正常录制。因此建议运行LoadRunner得主机上保持一个干净的测试环境。
3.HTML-based script与URL-based script的脚本有什么区别? 使用“HTML-based script”的模式录制脚本，VuGen为用户的每个HTML操作生成单独的步骤，这种脚本看上去比较直观;
使用“URL-based script”模式录制脚本时，VuGen可以捕获所有作为用户操作结果而发送到服务器的HTTP请求，然后为用户的每个请求分别生成对应方法。
通常，基于浏览器的Web应用会使用“HTML-based script”模式来录制脚本;而没有基于浏览器的Web应用、Web应用中包含了与服务器进行交互的Java Applet、基于浏览器的应用中包含了向服务器进行通信的JavaScript/VBScript代码、基于浏览器的应用中使用了HTTPS安全协议，这时使用“URL-based script”模式进行录制。
4.运行时的Pacing设置主要影响什么? Pacing主要用来设置重复迭代脚本的间隔时间。共有三种方法：A:上次迭代结束后立刻开始、 B:上次迭代结束后等待固定时间、C:按固定或随机的时间间隔开始执行新的迭代。
根据实际需要设置迭代即可。通常，没有时间间隔会产生更大的压力。
5.运行时设置Log标签中，如果没有勾选“Enable logging”，则手工消息可以发送吗? Enable logging选项仅影响自动日志记录和通过lr_log_message发送的消息。即使没有勾选，虚拟用户脚本中如果使用lr_message、lr_output_message、lr_error_message,仍然会记录其发出的消息。
6.VuGen支持Netscape的客户证书吗? 不支持。目前的VuGen 8.0版本中仅支持Internet Explorer的客户端证书。录制脚本时可以先从Netscape中导出所需的证书，然后将其导入到Internet Explorer中，并确保以相同的顺序导出和导入这些证书。而且，在每台将要录制或运行需要证书的Web Vuser脚本的计算机上都要重复执行前面的过程。
7.VuGen会修改录制浏览器中的代理服务器设置吗? 会修改。在开始录制基于浏览器的Web Vuser脚本时，VuGen首先会启动指定的浏览器。然后，VuGen会指示浏览器访问VuGen代理服务器。为此，VuGen会修改录制浏览器上的代理服务器设置。默认情况下，VuGen会立即将代理服务器设置更改为Localhost:7777。录制之后，VuGen会将原始代理服务器设置还原到该录制浏览器中。因此，在VuGen进行录制的过程中，不可以更改代理服务器设置，否则将无法正常进行。
8.在LoadRunner脚本如何输出当前系统时间? LoadRunner提供了char *ctime(const time_t *time)函数，调用参数为一个Long型的整数指针，用于存放返回时间的数值表示。
调用语句与返回值如下示例：
typedef long time_t;
Action()
{
time_t t;
lr_message(“Time in seconds since 1/1/70: %ld\n”,time(&amp;t));" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e47b9a7401aa40c0562d92a5799d24f6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-08-20T15:48:37+08:00" />
<meta property="article:modified_time" content="2012-08-20T15:48:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LR常见问题整理</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>首先要感谢群友的无私分享，才能得到这篇好的学习资料，整理得太好了，所以收藏保存，方便以后学习。</h3> 
<h3>一：<span style="font-family:Arial">LoadRunner</span>常见问题整理</h3> 
<h4><span style="font-family:Times New Roman">      1.LR </span>脚本为空的解决方法：</h4> 
<p align="left"><span style="font-size:14px"><span style="color:black">       </span> 1.<span style="color:black">去掉ie</span>设置中的第三方支持取消掉</span></p> 
<p align="left"><span style="font-size:14px"><span style="color:black">       </span> 2.<span style="color:black">在系统属性－高级－性能－数据执行保护中，添加loadrunner</span>安装目录中的vugen.exe文件.</span></p> 
<p><span style="font-size:14px"><span style="color:black"> </span><span style="color:black">有可能是由于录制的URL</span>地址采用的是localhost的问题，改成分配的IP地址或127.0.0.1试试。</span></p> 
<p><span style="font-size:14px"><span style="color:black">3</span><span style="color:black">、插入文本检查点步骤时，使用web_reg_find</span>，通常TextPfx和TextSfx中会包含双引号，需要进行转义（用斜杠），例如：</span></p> 
<p><span style="color:black"><span style="font-size:14px">     </span></span>  web_reg_find("Search=Body",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"SaveCount=Welcome",</p> 
<p><span style="font-size:14px"><span style="color:black">             </span>"TextPfx=<span style="color:black">欢迎&lt;a class=\"drop\" id=\"viewpro\" onMouseOver=\"showMenu(this.id)\"&gt;",</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"TextSfx=&lt;/a&gt;",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>LAST)</p> 
<p><span style="color:black"><span style="font-size:14px">　遇到flight</span></span>界面为空的解决的可能方法：</p> 
<p><span style="font-size:14px"><span style="color:black">  </span>1<span style="color:black">、如果安装了IE</span>以外的浏览器，并且IE不是默认浏览器，则无法生成录制脚本</span></p> 
<p><span style="font-size:14px"><span style="color:black">  </span>2<span style="color:black">、如果录制脚本时IE</span>不能打开，则需要将浏览器的IE工具高级选项中，将“启用第三方浏览器扩展”的</span></p> 
<p><span style="color:black"><span style="font-size:14px">勾选去掉</span></span></p> 
<p><span style="font-size:14px"><span style="color:black">  </span>3<span style="color:black">、lr</span>自带的webtours系统，如果点击Flights选项，出现空白页面，请检查本机oracle的 PERL5LIB环境</span></p> 
<h4><span style="font-family:Times New Roman">      2.LoadRunner</span>录制脚本时为什么不弹出<span style="font-family:Times New Roman">IE</span>浏览器<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　当一台主机上安装多个浏览器时，LoadRunner</span></span>录制脚本经常遇到不能打开浏览器的情况，可以用下面的方法来解决。</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　启动浏览器，打开Internet</span></span>选项对话框，切换到高级标签，去掉“启用第三方浏览器扩展(需要重启动)”的勾选，然后再次运行VuGen即可解决问题</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　提示：通常安装Firefox</span></span>等浏览器后，都会勾选上面得选项，导致不能正常录制。因此建议运行LoadRunner得主机上保持一个干净的测试环境。</p> 
<h4><span style="font-family:Times New Roman">      3.HTML-based script</span>与<span style="font-family:Times New Roman">URL-based script</span>的脚本有什么区别<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">使用“HTML-based script”</span></span>的模式录制脚本，VuGen为用户的每个HTML操作生成单独的步骤，这种脚本看上去比较直观;</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">使用“URL-based script”</span></span>模式录制脚本时，VuGen可以捕获所有作为用户操作结果而发送到服务器的HTTP请求，然后为用户的每个请求分别生成对应方法。</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　通常，基于浏览器的Web</span></span>应用会使用“HTML-based script”模式来录制脚本;而没有基于浏览器的Web应用、Web应用中包含了与服务器进行交互的Java Applet、基于浏览器的应用中包含了向服务器进行通信的JavaScript/VBScript代码、基于浏览器的应用中使用了HTTPS安全协议，这时使用“URL-based script”模式进行录制。</p> 
<h4><span style="font-family:Times New Roman">      4.</span>运行时的<span style="font-family:Times New Roman">Pacing</span>设置主要影响什么<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　    </span> </span>Pacing主要用来设置重复迭代脚本的间隔时间。共有三种方法：A:上次迭代结束后立刻开始、 B:上次迭代结束后等待固定时间、C:按固定或随机的时间间隔开始执行新的迭代。</p> 
<p align="left"><span style="font-size:14px"><span style="color:black">    </span> <span style="color:black">　根据实际需要设置迭代即可。通常，没有时间间隔会产生更大的压力。</span></span></p> 
<h4>　　<span style="font-family:Times New Roman">  5.</span>运行时设置<span style="font-family:Times New Roman">Log</span>标签中，如果没有勾选“<span style="font-family:Times New Roman">Enable logging</span>”，则手工消息可以发送吗<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　Enable logging</span></span>选项仅影响自动日志记录和通过lr_log_message发送的消息。即使没有勾选，虚拟用户脚本中如果使用lr_message、lr_output_message、lr_error_message,仍然会记录其发出的消息。</p> 
<h4>　　<span style="font-family:Times New Roman">  6.VuGen</span>支持<span style="font-family:Times New Roman">Netscape</span>的客户证书吗<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　不支持。目前的VuGen 8.0</span></span>版本中仅支持Internet Explorer的客户端证书。录制脚本时可以先从Netscape中导出所需的证书，然后将其导入到Internet Explorer中，并确保以相同的顺序导出和导入这些证书。而且，在每台将要录制或运行需要证书的Web Vuser脚本的计算机上都要重复执行前面的过程。</p> 
<h4>　　<span style="font-family:Times New Roman"> 7.VuGen</span>会修改录制浏览器中的代理服务器设置吗<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　会修改。在开始录制基于浏览器的Web Vuser</span></span>脚本时，VuGen首先会启动指定的浏览器。然后，VuGen会指示浏览器访问VuGen代理服务器。为此，VuGen会修改录制浏览器上的代理服务器设置。默认情况下，VuGen会立即将代理服务器设置更改为Localhost:7777。录制之后，VuGen会将原始代理服务器设置还原到该录制浏览器中。因此，在VuGen进行录制的过程中，不可以更改代理服务器设置，否则将无法正常进行。</p> 
<h4>　<span style="font-family:Times New Roman">  </span>　<span style="font-family:Times New Roman">8.</span>在<span style="font-family:Times New Roman">LoadRunner</span>脚本如何输出当前系统时间<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　LoadRunner</span></span>提供了char *ctime(const time_t *time)函数，调用参数为一个Long型的整数指针，用于存放返回时间的数值表示。</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　调用语句与返回值如下示例：</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　typedef long time_t;</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　Action()</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　{<!-- --></span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　time_t t;</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　lr_message(“Time in seconds since 1/1/70: %ld\n”,time(&amp;t));</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　lr_message(“System time and date: %s”,ctime(&amp;t));</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　}</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　输出结果为：</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　Time in seconds since 1/1/70: 1185329968</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　System time and date:Wed Jul 25 10:19:28 2007</span></span></p> 
<h4><span style="font-family:Times New Roman">  </span>　　<span style="font-family:Times New Roman">9.</span>一些<span style="font-family:Times New Roman">Web</span>虚拟用户脚本录制后立刻回放没有任何问题，但是当设置迭代次数大于<span style="font-family:Times New Roman">1</span>时，如果进行回放则只能成功迭代一次。为什么从第二次迭代开始发生错误<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　这种现象多是由于在“Run-time Setting”</span></span>的“Browse Emulation”的设置中，勾选了“Simulate a new user on each iteration”及其下面的选项“Clear cache on each iteration”这两个选项的含义是每次迭代时模拟一个新的用户及每次迭代时清除缓存。</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　由于脚本迭代时，init</span></span>和end只能执行一次，如果每次迭代都模拟一个新的用户并清除缓存，则用户登录信息将一并清除，因此迭代时可能会发生错误。</p> 
<h4>　　<span style="font-family:Times New Roman">10.</span>虚拟客户脚本“<span style="font-family:Times New Roman">Run-time Setting</span>”中的线程和进程运行方式的区别<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　如果选择“Run Vuser as a process”</span></span>，则场景运行时会为每一个虚拟用户创建一个进程;选择“Run Vuser as a thread”则将每个虚拟用户作为一个线程来运行，在任务管理器中只看到一个mmdrv.exe，这种方式的运行效率更高，能造成更大的压力，时默认选项。</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　另外，如果启用了IP</span></span>欺骗功能，则先在Controller中选中Tools菜单下的“Expert Mode”，然后将Tools菜单下的“Options&gt;General”标签页中的IP地址分配方式也设置为与Vuser运行方式一致，同为线程或进程方式。</p> 
<h4>　　<span style="font-family:Times New Roman">11.</span>在<span style="font-family:Times New Roman">Controller</span>中运行<span style="font-family:Times New Roman">Web</span>相关测试场景时，经常会有很多超时错误提示，如何处理这类问题<span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　这主要有脚本的默认超时设置引起。当回放Web</span></span>脚本时，有时候由于服务器响应时间较长，会产生超时的错误。这时需要修改脚本的运行时配置。</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　进入“Run-time Setting”</span></span>对话框后，依次进入“Internet Protocol→Preference”。然后点击“Options…”按钮，进入高级设置对话框，可以修改各类超时设置的默认值。</p> 
<h4>　　<span style="font-family:Times New Roman">13</span>为什么<span style="font-family:Times New Roman">Windows</span>系统中的<span style="font-family:Times New Roman">CPU</span>、内存等资源仍然充足，但是模拟的用户数量却上不去<span style="font-family:Times New Roman">-</span><span style="color:black">27796</span><span style="font-family:Times New Roman">?</span></h4> 
<p align="left"><span style="color:black"><span style="font-size:14px">　    </span> </span>　在Windows计算机的标准设置下，操作系统的默认限制只能使用几百个Vuser，这个限制与CPU或内存无关，主要是操作系统本身规定了默认的最大线程数所导致。要想突破Windows这个限制，须修改Windows注册表。以Windows XP Professional为例。</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　      </span> </span>　(1)打开注册表后，进入注册表项HKEY_LOCAL_MACHINE中的下列关键字：System\CurrentControlSet\Control\Session Manager\SubSystems。</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　        </span> </span>(2)找到Windows关键字，Windows关键字如下所示：</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　%SystemRoot%\system32\csrss.exe bjectDirectory=\Windows</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　SharedSection=1024,3072,512 Windows=On SubSystemType=Windows ServerDll=basesrv,1</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　ServerDll=winsrv:UserServerDllInitialization,3 ServerDll=winsrv:ConServerDllInitialization,2</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　ProfileControl=Off MaxRequestThreads=16</span></span></p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　　SharedSection=1024,3072,512</span></span>关键字的格式为xxxx,yyyy,zzz。其中，xxxx定义了系统范围堆的最大值(以KB为单位)，yyyy定义每个桌面堆得大小。</p> 
<p align="left"><span style="color:black"><span style="font-size:14px">　      </span> </span>　(3)将yyyy的设置从3072更改为8192(即8MB)，增加SharedSection参数值。</p> 
<p align="left"><span style="font-size:14px"><span style="color:black"> </span><span style="color:black">通过对注册表的更改，系统将允许运行更多的线程，因而可以在计算机上运行更多的Vuser</span>。这意味着能够模拟的最大并发用户数量将不受Windows操作系统的限制，而只受硬件和内部可伸缩性限制的约束。</span></p> 
<h4><span style="font-family:Times New Roman">    14.Error -27728: Step download timeout (120 seconds)</span>的解决方法</h4> 
<p><span style="font-size:14px"><span style="color:#333333">  </span>loadruner<span style="color:#333333">报错：Error -27728: Step download timeout (120 seconds)</span>如何解决语法检查通过，但是在并发执行一个查询时候报错Action.c(16): Error -27728: Step download timeout (120 seconds) has expired when downloading non-resource(s)，                                 请问有啥子解决方法，我使用web_set_timeout ，好象不起作用，直接在option中设置timeout时间为600，（单位应该是秒吧）还是没有起作用，结果都还是提示（120seconds），说明还是以120秒来判断的；使用lrs_set_recv_timeout，语法检查不过，说明库函数里面没有这个函数。尝试步骤：设置超时时间到600秒，回放还是出错。后来我设置了runt time setting中的internet protocol-preferences中的advaced区域有一个winlnet replay instead of sockets选项，选项后再回放就成功了。   </span></p> 
<p><span style="font-size:14px"><span style="color:#333333">  </span> <span style="color:#333333">首先LR</span>是通过Microsoft WinInet DLL去录制web协议的！但是在Control运行的时候它默认通过socket去模拟请求，因为这些可以真实的模拟带宽，而采用Microsoft WinInet DLL通过这个DLL去访问网卡方式去模拟带宽，使得模拟不是很精确！而且也不支持unix的应用，但是使用这个确实有时无法处理winnet Dll的一些请求，我认为是它的一些BUG，比如说：回放时它会检查Content-Length，但是网页支持receive more data时，这时socket模拟会一直等待直到timeout!先说了一些优缺点，最后回到这个问题！这个问题分两个方面分析：</span></p> 
<p><span style="font-size:14px"><span style="color:#333333">  </span><span style="color:#333333">第一：你要明白web_set_timeout()</span>这个函数的适用范围！比如说一个web_submit_data（）中实际涵盖了10个对Server 端的请求，这个函数是针对10个请求的总和时间的！（别犯低级错误，timeout分了connect,receive以及download三个部分：） ）                                                                            第二：就是我解释的上面的一些BUG问题！WinInet dll在新版本中处理请求时可以异步的，就是不再是那种连接等待然后超时模式！但是LR用的socket是同步请求！只有等到timeout才会退出！microsoft已经明确表示INTERNET_OPTION_RECEIVE_TIMEOUT 不再适用于 Microsoft Internet Explorer 5.0，显而易见，他们处理请求采取了异步处理的方式！呵呵！这下大概可以圆满解释你的问题了！呵呵这里，</span></p> 
<p><span style="font-size:14px"><span style="color:#333333"> </span><span style="color:#333333">我补充如下：VuGen</span>专用的基于套接字的重播是一种可伸缩以便进行负载测试的轻型引擎。使用线程时是准确的。基于套接字的引擎不支持socks代理服务器。如果在这样的环境中录制，应该使用winInet重播引擎。</span></p> 
<h4><span style="font-family:Times New Roman">    15.</span>性能测试往往需要准备大批量的数据，大批量数据的生成方法有很多种，常见的有：</h4> 
<p><span style="font-size:14px"><span style="color:black">       </span><span style="color:black">（1</span>）编写SQL语句来插入数据</span></p> 
<p><span style="color:black"><span style="font-size:14px">（2</span></span>）使用DataFactory等专业的数据生成工具</p> 
<p><span style="font-size:14px"><span style="color:black">       </span><span style="color:black">（3</span>）通过LoadRunner录制回放的方式重复执行生成大批量数据</span></p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>Tips:</p> 
<p><span style="font-size:14px"><span style="color:black">        </span><span style="color:black">使用DataFactory</span>插入nchar数据类型的数据时会出现空值的情况，可以先修改数据库的数据类型设置，插完数据后再改回来</span></p> 
<p><strong><span style="font-size:14px"> </span></strong></p> 
<h4><span style="font-family:Times New Roman">    16.</span>录制脚本中包含中文，出现乱码怎么办？</h4> 
<p><span style="font-size:14px">           <span style="color:black">把录制选项中的Support charset</span>选中UTF-8</span></p> 
<p><span style="font-size:14px"><span style="color:black">           </span><span style="color:black">录制脚本后，切换到树视图中，打开相应的脚本页面。在右侧的PageView</span>中录制的脚本呈现中文版式，但是当切换到Server Response中，所有的中文全部换成的乱码，如“勌缞仫訆”。</span></p> 
<p><span style="font-size:14px"><span style="color:black">          </span><span style="color:black">原因是服务器端没有把响应的编码设置为gb2312</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">在IIS</span></span>中找到Web.Config文件，在&lt;system.web&gt;….&lt;/system.web&gt;节加入&lt;globalization requestEncoding="gb2312" responseEncoding="gb2312" fileEncoding="gb2312"/&gt;后再次录制脚本，乱码变中文。</p> 
<h4><span style="font-family:Times New Roman">    17.LoadRunner</span>回放脚本时，在浏览器显示的中文是乱码</h4> 
<p><span style="color:black"><span style="font-size:14px">解决办法（1</span></span>）：</p> 
<p><span style="color:black"><span style="font-size:14px">首先设置Run-Time Settings </span> </span>– Browser – Browser Emulation – User-Agent</p> 
<p><span style="color:black"><span style="font-size:14px">然后设置IE</span></span>：</p> 
<p><span style="color:black"><span style="font-size:14px">查看－编码－钩上“自动选择”和Unicode</span></span>（UTF-8）。</p> 
<p><span style="color:black"><span style="font-size:14px">解决办法（2</span></span>）：</p> 
<p><span style="font-size:14px"><span style="color:black">使用</span><span style="color:blue">lr_convert_string_encoding</span><span style="color:black">函数来转换编码</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">下面是一个使用的例子：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">lr_convert_string_encoding(lr_eval_string("{ReplyContents}"),LR_ENC_SYSTEM_LOCALE,LR_ENC_UTF8,"ReplyMessage");</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">       </span></span>web_submit_data("postreply.aspx_2",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Action=http://127.0.0.1/postreply.aspx?infloat=1&amp;topicid=2&amp;&amp;inajax=1",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Method=POST",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"EncType=multipart/form-data",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"RecContentType=text/xml",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Referer=http://127.0.0.1/showtopic-2.aspx",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Snapshot=t9.inf",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Mode=HTML",</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>ITEMDATA,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=iconid", "Value=0", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=title", "Value=", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=wysiwyg", "Value=0", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=checkbox", "Value=0", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=message", "Value=[localimg=180,112]1[/localimg]\r\n\r\n{ReplyMessage}", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=e_mediatyperadio", "Value=on", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=sl_attachdesc", "Value=", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=attachid", "Value=", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>      "Name=attachdesc", "Value=", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=localid", "Value=", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=attachdesc", "Value=", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=localid", "Value=1", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=attachdesc", "Value=", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">    </span></span>          "Name=localid", "Value=2", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=emailnotify", "Value=on", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=postreplynotice", "Value=on", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=postfile", "Value=", "File=Yes", ENDITEM,</p> 
<p><span style="font-size:14px"><span style="color:black">              </span>"Name=postfile", "Value=D:\\\\<span style="color:black">图片收集\\\\It's about time.JPG", "File=Yes", ENDITEM,</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=postfile", "Value=", "File=Yes", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=uploadallowmax", "Value=10", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=uploadallowtype", "Value=jpg,gif", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">         </span></span>     "Name=thumbwidth", "Value=300", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=thumbheight", "Value=250", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>"Name=noinsert", "Value=0", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">              </span></span>LAST);</p> 
<h4><span style="font-family:Times New Roman">    18.</span>可以在<span style="font-family:Times New Roman">LR</span>测试脚本的目录中找到参数文件，直接修改参数文件</h4> 
<p><span style="color:black"><span style="font-size:14px">            </span></span>The parameter file is stored in the script directory as .dat file extension.  It can be opened with a simple text editor like Notepad as it is stored in pure text format.  Therefore, you can manipulate the files via the Notepad.  You can also use office applications such as Microsoft Excel or OpenOffice.org Calc to work on the file.  This greatly the amount of work required for maintaining a long list of data.</p> 
<h4><span style="font-family:Times New Roman">    19.LR9.x</span>启动<span style="font-family:Times New Roman">VUGen</span>时提示<span style="font-family:Times New Roman">"Failed to connect to server"</span></h4> 
<p><span style="font-size:14px">           <span style="color:black">  </span>After upgrading to LoadRunner 9.x I started getting a window popup which said "Failed to connect to server" every time I opened virtual user generator (vugen.exe).</span></p> 
<p><span style="color:black"><span style="font-size:14px">The solution to this was to close virtual user generator and delete the [vugen.ini] file.</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">vugen.ini is found in the %systemroot% folder on your Windows PC (usually C:\WINDOWS or C:\WINNT).</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">Once you've deleted the file, virtual user generator will open without any issues and create a new vugen.ini file automatically.</span></span></p> 
<h4><span style="font-family:Times New Roman">    20.</span>怎样抓取有相同左右边界的动态<span style="font-family:Times New Roman">value</span>？</h4> 
<p><span style="color:black"><span style="font-size:14px">怎样抓取有相同左右边界的动态value</span></span>？例如：</p> 
<p><span style="color:black"><span style="font-size:14px">stateID="d7lg0ehmjkkm6uin3s4boei7oq"&gt;</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">stateID="cvopakp46ftsf8mh6l37ti3ubm"&gt;</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">stateID="bv9mja8gtgr39ddibm5t9163re"&gt;</span></span></p> 
<p><span style="font-size:14px"><span style="color:black">web_reg_save_param</span><span style="color:black">里的ORD</span>应该怎样设置？</span></p> 
<p><span style="color:black"><span style="font-size:14px">ORD: Indicates the ordinal position or instance of the match. The default instance is 1. If you specify "All," it saves the parameter values in an array.</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">例子：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">char outFlightParam[50]; // The name of the parameter for correlation</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">char outFlightParamVal[50]; // The formatted value of outFlightParam</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">web_reg_save_param("outFlightVal",</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"LB=outboundFlight value=", "RB=&gt;",</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"ORD=ALL",</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"SaveLen=18",</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>LAST);</p> 
<p><span style="color:black"><span style="font-size:14px">    </span></span>web_submit_form("reservations.pl",</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Snapshot=t4.inf",</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>ITEMDATA,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=depart", "Value=London", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=departDate", "Value=11/20/2003", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=arrive", "Value=New York", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=returnDate", "Value=11/21/2003", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=numPassengers", "Value=1", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=roundtrip", "Value=&lt;OFF&gt;", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=seatPref", "Value=None", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=seatType", "Value=Coach", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=findFlights.x", "Value=83", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=findFlights.y", "Value=16", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>LAST);</p> 
<p><span style="color:black"><span style="font-size:14px">    </span></span>sprintf(outFlightParam, "{outFlightVal_%s}",</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>lr_eval_string("{outFlightVal_count}"));</p> 
<p><span style="color:black"><span style="font-size:14px">    </span></span>sprintf(outFlightParamVal, "Value=%s",</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>lr_eval_string(outFlightParam));</p> 
<p><span style="color:black"><span style="font-size:14px">    </span></span>lr_message("The value argument is : %s", outFlightParamVal);</p> 
<p><span style="color:black"><span style="font-size:14px">    </span></span>web_submit_form("reservations.pl_2",</p> 
<p><span style="color:black"><span style="font-size:14px">       </span></span>"Snapshot=t5.inf",</p> 
<p><span style="color:black"><span style="font-size:14px">       </span></span>ITEMDATA,</p> 
<p><span style="color:black"><span style="font-size:14px">       </span></span>"Name=outboundFlight",outFlightParamVal, ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=reserveFlights.x", "Value=92", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>"Name=reserveFlights.y", "Value=10", ENDITEM,</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>LAST);</p> 
<h4><span style="font-family:Times New Roman">    21.</span>运行场景时提示“<span style="font-family:Times New Roman">Step download timeout (120 seconds) has expired when downloading resource(s)</span>”</h4> 
<p><span style="font-size:14px"><span style="color:black">vuser_init.c(12): Error -27728: Step download timeout (120 seconds) has expired when downloading non-resource(s)</span><span style="color:black">（出现个别，可以忽略）</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">vuser_init.c(12): Error -27727: Step download timeout (120 seconds) has expired when downloading resource(s). Set the "Step Timeout caused by resources is a warning" Run-Time Setting to Yes/No to have this message as a warning/error, respectively</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">vuser_init.c(12): Error -27796</span></span></p> 
<p><span style="font-size:14px"><span style="color:black">            </span><span style="color:black">如果觉得下载一个页面超过2</span>分钟不是错误的话，可以在Run-Time设置中选择Preferences-&gt;Options，修改Step download timeout(sec)的时间</span></p> 
<p><span style="color:black"><span style="font-size:14px">             </span></span></p> 
<p><span style="font-size:14px"><span style="color:black">            </span><span style="color:black">或者把“Step timeout caused by resources is a warning</span>”设置为Yes，这样下载资源超时也只是作为警告，不作为错误提示，但是对于非资源的下载超时，则总是会提示错误的</span></p> 
<p><span style="color:black"><span style="font-size:14px"> </span></span></p> 
<h4><span style="font-family:Times New Roman">    22.</span>用<span style="font-family:Times New Roman">strtok</span>函数分割字符串</h4> 
<p><span style="font-size:14px">             <span style="color:black"> </span><span style="color:black">需要在loadrunner</span>里面获得“15”（下面红色高亮的部分），并做成关联参数。</span></p> 
<p><span style="font-size:14px"><span style="color:black">//Body response </span> <span style="color:black">内容： &lt;BODY&gt;&lt;; PRE&gt;//OK[8,7,5,15,6,5,0,4,0,3,0,3,2,0,0,0,1</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">用web_reg_save_param</span></span>取出“8,7,5,15,6,5,0,4,0,3,0,3,2,0,0,0,1”这一段，然后用strtok函数切割出一个个数字，第四个数字就是要找的值</p> 
<p><span style="color:black"><span style="font-size:14px">例如:</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">extern char * strtok(char * string, const char * delimiters ); // Explicit declaration</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">char separators[] = ",";</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">char * token; </span></span></p> 
<p><span style="color:black"><span style="font-size:14px">lr_save_string("1,2,3,4,5,6","str");</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">token = (char *)strtok(lr_eval_string("{str}"), separators); // Get the first token</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">if (!token) { </span></span></p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>lr_output_message ("No tokens found in string!");</p> 
<p><span style="color:black"><span style="font-size:14px">        </span></span>return( -1 );</p> 
<p><span style="color:black"><span style="font-size:14px">    </span></span>} </p> 
<p><span style="color:black"><span style="font-size:14px">while (token != NULL ) { // While valid tokens are returned</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">       </span></span>lr_output_message ("%s", token );</p> 
<p><span style="color:black"><span style="font-size:14px">       </span></span>token = (char *)strtok(NULL, separators); // Get the next token</p> 
<p><span style="color:black"><span style="font-size:14px">   </span></span>}</p> 
<h4><span style="font-family:Times New Roman">    23.LoadRunner</span>没有购买<span style="font-family:Times New Roman">webservice</span>协议的<span style="font-family:Times New Roman">license</span>，只有<span style="font-family:Times New Roman">http</span>的，可不可以完全用<span style="font-family:Times New Roman">http</span>协议模拟<span style="font-family:Times New Roman">webservice</span>？</h4> 
<p><span style="font-size:14px"><span style="color:black"> </span><span style="color:black">可以，参考：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">   </span></span>http://blog.testsautomation.com/2009/01/web-services-performance-using-loadrunner/</p> 
<p><span style="color:black"><span style="font-size:14px">   </span></span>http://blog.testsautomation.com/2009/05/validating-web-service-response-with-xpath/</p> 
<h4><span style="font-family:Times New Roman">    24.</span>在场景设置中不忽略思考时间<span style="font-family:Times New Roman">,</span>但是在查看响应时间的时候怎样让<span style="font-family:Times New Roman">LR</span>自动在响应时间里减去思考时间？</h4> 
<p><span style="font-size:14px"><span style="color:black"> </span>         <span style="color:black"> 在analysis</span>中找到了设置是否在报告中包含思考时间的地方做相应的设置即可：</span></p> 
<h4><span style="font-family:Times New Roman">    25.LoadRunner</span>在运行过程中停掉<span style="font-family:Times New Roman">1</span>半虚拟用户</h4> 
<p><span style="font-size:14px"><span style="color:black">Another issue that I</span><span style="color:black">’m facing from time to time is that LoadRunner stops 50% of running users without any notification, issue, error message etc. I</span>’ve find out that it happens only when running with log level set to ‘always send a message’. Because of that, I suggest to run with log level set to ‘Send message only when error occur’.</span></p> 
<h4><span style="font-family:Times New Roman">    26.</span>测试<span style="font-family:Times New Roman">RTMP</span>协议应该在<span style="font-family:Times New Roman">LoadRunner</span>选择什么协议来录制？</h4> 
<p><span style="font-size:14px"><span style="color:black"> </span><span style="color:black">用flex</span>协议</span></p> 
<p><span style="color:black"><span style="font-size:14px">有这几个函数可用：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">flex_rtmp_connect  </span> </span>Connects a client to an RTMP server and sets connection options.  </p> 
<p><span style="color:black"><span style="font-size:14px">flex_rtmp_disconnect  </span> </span>Disconnects a client from an RTMP server.  </p> 
<p><span style="color:black"><span style="font-size:14px">flex_rtmp_send  </span> </span>Sends messages to an RTMP server.  </p> 
<p><span style="color:black"><span style="font-size:14px">flex_rtmp_receive  </span> </span>Receives responses from an RTMP server</p> 
<p><span style="color:black"><span style="font-size:14px">Flex can record and replay scripts involving RTMP (Real Time Messaging Protocol). In order to enable RTMP simulation, you must configure the recording options for the Flex protocol.</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">To enable RTMP:</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">1 Open the Recording Options dialog box by selecting Tools &gt; Recording Options or clicking the Options button in the Start Recording dialog box.</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">2 In the Network &gt; Port Mapping node click Options.</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">3 Set the Send-Receive buffer size threshold to 1500.</span></span></p> 
<h4><span style="font-family:Times New Roman">    27.</span>如何在<span style="font-family:Times New Roman">LoadRunner</span>中运行<span style="font-family:Times New Roman">QTP</span>脚本？</h4> 
<p><span style="color:black"><span style="font-size:14px">　　1</span></span>、运行准备：</p> 
<p><span style="font-size:14px"><span style="color:black">1</span><span style="color:black">）勾选QTP</span>的Tools--Options--Run的"Alow other Mercury products to run tests and components"</span></p> 
<p><span style="font-size:14px"><span style="color:black">2</span><span style="color:black">）录制需要在lr</span>中运行的QTP脚本，并且在QTP脚本中设置事务，Services.StartTransaction "start"与Services.EndTransaction "start"</span></p> 
<p><span style="font-size:14px"><span style="color:black">2</span><span style="color:black">、运行QTP</span>脚本</span></p> 
<p><span style="color:black"><span style="font-size:14px">在LR</span></span>中运行时选择QTP脚本，为QTP脚本存放目录下文件扩展名为.usr的文件。</p> 
<p><span style="color:black"><span style="font-size:14px">　注：LR</span></span>中运行QTP脚本时，只能有一个Vuser,否则将报错：</p> 
<p><span style="color:black"><span style="font-size:14px">　　The load generator is currently running the maximum number of Vusers of this type</span></span></p> 
<h4><span style="font-family:Times New Roman">    28.</span>在<span style="font-family:Times New Roman">LR</span>中如何忽略<span style="font-family:Times New Roman">Socket</span>接收数据的验证</h4> 
<p><span style="color:black"><span style="font-size:14px">在LR</span></span>中对Socket进行性能测试时，LR会自己判断lrs_receive回来的数据的长度，而如果长度不符的话会有时间延迟的情况(这是性能测试完全不能接受的事情)，如果做到这一点呢，经过反复尝试，发现一种简单的方法(用*代替具体的长度)：</p> 
<p><span style="color:black"><span style="font-size:14px">类似于将：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">recv buf1 12</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">"Hello, Denny"</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">改为：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">recv buf1 *</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">"Hello, Denny"</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">一切OK</span></span>。</p> 
<h4><span style="font-family:Times New Roman">    29.LoadRunner9.5</span>的<span style="font-family:Times New Roman">Controller</span>中不能添加<span style="font-family:Times New Roman">Apache</span>的监控</h4> 
<p><span style="font-size:14px"><span style="color:black">     </span><span style="color:black">在C:\Program Files\HP\LoadRunner\dat\online_graphs</span>中找到online_resource_graphs.rmd文件，修改[Apache]部分中的EnableInUI为1</span></p> 
<p><span style="color:black"><span style="font-size:14px">参考：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">http://forums11.itrc.hp.com/service/forums/questionanswer.do?admit=109447626+1274450165814+28353475&amp;threadId=1229523</span></span></p> 
<h4><span style="font-family:Times New Roman">    30.VB Vuser</span>开发<span style="font-family:Times New Roman">ADO</span>脚本，提示“<span style="font-family:Times New Roman">user-defined type not defined</span>”</h4> 
<p><span style="color:black"><span style="font-size:14px">想在VB Vuser</span></span>写入模拟数据操作的过程，然后在VB Vuser里定义了这个全局变量</p> 
<p><span style="font-size:14px"><span style="color:black">Private m_Conn As ADODB.Connection '</span><span style="color:black">连接对象</span></span></p> 
<p><span style="font-size:14px"><span style="color:black">Private m_Reco As ADODB.Recordset </span>'<span style="color:black">结果集</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">但是在VB Vuser</span></span>中不识别这个对象，报出user-defined type not defined</p> 
<p><span style="color:black"><span style="font-size:14px">需要在Run-Time </span></span>设置中的VBA部分把ADO的库选上</p> 
<p><span style="color:black"><span style="font-size:14px">如果用VB Script</span></span>虚拟用户来开发就不要，直接用CreateObject来创建ADO对象即可</p> 
<h4><span style="font-family:Times New Roman">    31.loadrunner9.5</span>录制脚本时出现<span style="font-family:Times New Roman">c:\PROGRA~1\MICROS~1\office12\Grooveutil.DLL</span>时出错内存位置访问无效</h4> 
<p><span style="font-size:14px"><span style="color:black">              </span>Office2007<span style="color:black">的问题，IE</span>加载项禁用Groove  GFSBrowser Helper 组件</span></p> 
<h4><span style="font-family:Times New Roman">    32.LR</span>自带的例子端口号怎么修改？</h4> 
<p><span style="font-size:14px"><span style="color:black">          </span>LR<span style="color:black">自带的例子端口号是1080,</span>我怎么样把这个端口设置我自己想用的端口号8088,在什么地方设置在LR安装目录下，找到Xitami.config文件，找到portbase，可以修改它（默认是1000）；</span></p> 
<p><span style="color:black"><span style="font-size:14px">默认的端口号是portbase+80</span></span>；要把端口号改成8088，就把portionbase改为8008，保存之后就是了（8088=8008+80）。</p> 
<h4><span style="font-family:Times New Roman">    33.</span>用<span style="font-family:Times New Roman">Web_reg_find</span>查找中文字符串时查找不到</h4> 
<p><span style="font-size:14px"><span style="color:black">         </span>   <span style="color:black">脚本文件里有个default.cfg</span>，里面有个参数是 UTF8InputOutput ，将其值改为0</span></p> 
<h4><span style="font-family:Times New Roman">    34.</span>替代<span style="font-family:Times New Roman">IP Wizard</span>的脚本</h4> 
<p><span style="color:black"><span style="font-size:14px">http://hi.baidu.com/higkoo/blog/item/39bbb21bc33d76dcac6e751c.html</span></span></p> 
<p><span style="font-size:14px"><span style="color:black">LoadRunner</span><span style="color:black">自带的“IP Wizard</span>”用起来非常麻烦，要不停的点，重要的是最后还必须重启系统生效。</span></p> 
<p><span style="color:black"><span style="font-size:14px">于是乎写个脚本替代之：</span></span></p> 
<p><span style="font-size:14px"><span style="color:black">1. </span><span style="color:black">假设客户端IP</span>为 192.168.10.31</span></p> 
<p><span style="font-size:14px"><span style="color:black">2. </span><span style="color:black">假设服务端IP</span>为 192.168.10.10</span></p> 
<p><span style="font-size:14px"><span style="color:black">3. </span><span style="color:black">需要模拟的IP</span>为 110.119.120.122</span></p> 
<p><span style="color:black"><span style="font-size:14px">那么，客户端提供添加虚拟IP</span></span>的BAT脚本：</p> 
<p><span style="font-size:14px"><span style="color:black">netsh    </span>interface    ip    add    address   <span style="color:black">本地连接    </span>110.119.120.122    255.255.0.0</span></p> 
<p><span style="color:black"><span style="font-size:14px">对应的删除设置为：</span></span></p> 
<p><span style="font-size:14px"><span style="color:black">netsh    </span>interface    ip    del    address    <span style="color:black">本地连接   </span>110.119.120.122</span></p> 
<p><span style="color:black"><span style="font-size:14px">对应服务器添加虚拟路由的Shell</span></span>脚本：</p> 
<p><span style="color:black"><span style="font-size:14px">route add -host 110.119.120.122 gw 192.168.10.31</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">删除路由的脚本：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">route del -host 110.119.120.122 gw 192.168.10.31</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">这样就非常方便了，不用重启任何机器，执行脚本就生效，再执行脚本就取消。</span></span></p> 
<h4><span style="font-family:Times New Roman">    35.</span>如何从命令行调用<span style="font-family:Times New Roman">LoadRunner</span>脚本？</h4> 
<p><span style="color:black"><span style="font-size:14px"> </span></span>Here is the command line that you need to execute to run a VuGen script from the command prompt:</p> 
<p><span style="color:black"><span style="font-size:14px">   </span></span>&lt;LoadRunner&gt;\bin\mmdrv.exe -usr &lt;path to usr file&gt;</p> 
<p><span style="color:black"><span style="font-size:14px">Note:</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">In order to get all the other options that go with the command, run mmdrv.exe from the command prompt without any options.</span></span></p> 
<h4><span style="font-family:Times New Roman">    36.</span>请问<span style="font-family:Times New Roman">"int64</span>这个类型<span style="font-family:Times New Roman">,</span>在<span style="font-family:Times New Roman">LR</span>中怎么表示<span style="font-family:Times New Roman">"</span>。我将一段<span style="font-family:Times New Roman">C</span>的代码放在<span style="font-family:Times New Roman">LR</span>中<span style="font-family:Times New Roman">,LR</span>不认<span style="font-family:Times New Roman">int64</span>这个类型<span style="font-family:Times New Roman">,</span>怎么解决<span style="font-family:Times New Roman">?</span></h4> 
<p><span style="font-size:14px"><span style="color:black"> </span><span style="color:black">把那段C</span>代码做成DLL，然后在LR中调用</span></p> 
<h4><span style="font-family:Times New Roman">    37.LoadRunner</span>监控远程机器<span style="font-family:Times New Roman">Windows</span>资源，提示“<span style="font-family:Times New Roman">net use failed</span>”</h4> 
<p><span style="color:black"><span style="font-size:14px">解决办法：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">在被监控机器上更改本地帐户的共享和安全模式为经典模式。控制面板-&gt;</span></span>管理工具-&gt;本地安全策略-&gt;网络访问：本地帐户的共享和安全模式-&gt;经典模式。</p> 
<p><span style="color:black"><span style="font-size:14px">监视连接前的准备工作：</span></span></p> 
<p><span style="color:black"><span style="font-size:14px">首先保证被监视的windows</span></span>系统开启以下二个服务Remote Procedure Call(RPC) 和Remote Registry Service</p> 
<p><span style="color:black"><span style="font-size:14px">被监视的WINDOWS</span></span>机器:右击我的电脑,选择管理-&gt;共享文件夹-&gt;共享 在这里面要有C$这个共享文件夹,(要是没有自己手动加)</p> 
<p><span style="color:black"><span style="font-size:14px">然后保证在安装LR</span></span>的机器上使用运行.输入\\被监视机器IP\C$ 然后输入管理员帐号和密码,如果能看到被监视机器的C盘了,就说明你得到了那台机器的管理员权限,可以使用LR去连接了</p> 
<h4>　<span style="font-family:Times New Roman">  38.LoadRunner</span>脚本中出现乱码问题现象某个链接或者图片名称为中文乱码，脚本运行无法通过。</h4> 
<p><strong><br> </strong><span style="color:black"><span style="font-size:14px">　　错误分析</span><br> </span><span style="font-size:14px">　　脚本录制可能采用的是URL-based script方式，如果程序定义的字符集合采用的是国际标准，脚本就会出现乱码现象。</span><br> <span style="font-size:14px">　　解决办法重新录制脚本，在录制脚本前，打开录制选项配置对话框进行设置，在“Recording Options”的“Advanced”选项里先将“Surport Charset”选中，然后选中支持“UTF-8”的选项。</span></p> 
<h4><span style="font-family:Times New Roman">    39.LoadRunner</span>不执行检查方法错误现象在脚本中插入函数<span style="font-family:Times New Roman">Web_find</span>，在脚本中设置文本以及图像的检查点，但是在回放过程中并没有对设置的检查点进行检查，即<span style="font-family:Times New Roman">Web_find</span>失效。</h4> 
<p><span style="color:black"><br> </span><span style="color:black"><span style="font-size:14px">　　错误分析</span><br> </span><span style="font-size:14px">　　由于检查功能会消耗一定的资源，因此LoadRunner默认关闭了对文本以及图像的数据执行保护检查，所以在设置检查点后，需要开启检查功能。</span><br> <span style="font-size:14px">　　解决办法打开运行环境设置对话框进行设置，在“Run-time Settings”的“Internet Protocol”选项里的“Perference”中勾选“Check”下的“Enable Image and text check”选项。</span><br> <span style="font-size:14px">　  需要注意的是，回放脚本时出现的错误有时是程序自身的原因导致的，因此在解决脚本回放问题前必须保证程序录制出的脚本是正确的。</span></p> 
<h4>　　<span style="font-family:Times New Roman">40.</span><a href="" rel="nofollow noopener noreferrer" target="_self"><span style="color:windowtext"><span style="font-family:Times New Roman">LoadRunner</span></span></a>超时错误：在录制<span style="font-family:Times New Roman">Web</span>协议脚本回放时超时情况经常出现，产生错误的原因也有很多，解决的方法也不同。</h4> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误现象1</span></span>：Action.c(16): Error -27728: Step download timeout (120 seconds) has expired when downloading non-resource(s)。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误分析：对于HTTP</span></span>协议，默认的超时时间是120秒（可以在LoadRunner中修改），客户端发送一个请求到服务器端，如果超过120秒服务器端还没有返回结果，则出现超时错误。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">解决办法：首先在运行环境中对超时进行设置，默认的超时时间可以设置长一些，再设置多次迭代运行，如果还有超时现象，需要在“Runtime Setting</span></span>”&gt;“Internet Protocol：Preferences”&gt;“Advanced”区域中设置一个“winlnet replay instead of sockets”选项，再回放是否成功。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px"> </span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误现象 2</span></span>：Action.c(81):Continuing after Error -27498: Timed out while processing URL=http://172.18.20.70:7001/workflow/bjtel/leasedline/ querystat/ subOrderQuery.do</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误分析：这种错误常常是因为并发压力过大，服务器端太繁忙，无法及时响应客户端的请求而造成的，所以这个错误是正常现象，是压力过大造成的。</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　如果压力很小就出现这个问题，可能是脚本某个地方有错误，要仔细查看脚本，提示的错误信息会定位某个具体问题发生的位置。</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　解决办法：例如上面的错误现象问题定位在某个URL</span></span>上，需要再次运行一下场景，同时在<a href="" rel="nofollow noopener noreferrer" target="_self"><span style="color:black">其他</span></a>机器上访问此URL。如果不能访问或时间过长，可能是服务器或者此应用不能支撑如此之大的负载。分析一下服务器，最好对其性能进行优化。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">如果再次运行场景后还有超时现象，就要在各种图形中分析一下原因，例如可以查看是否服务器、DNS</span></span>、网络等方面存在问题。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px"> </span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　最后，增加一下运行时的超时设置，在“Run-Time Settings</span></span>”&gt;“Internet Protocol:Preferences”中，单击“options”，增加“HTTP-request connect timeout” 或者“HTTP-request receive”的值。</p> 
<h4>　　<span style="font-family:Times New Roman">41.LoadRunner</span>脚本中出现乱码：在录制<span style="font-family:Times New Roman">Web</span>协议脚本时出现中文乱码，在回放脚本时会使回放停止在乱码位置，脚本无法运行。</h4> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误现象：某个链接或者图片名称为中文乱码，脚本运行无法通过。</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误分析：脚本录制可能采用的是URL-based script</span></span>方式，如果程序定义的字符集合采用的是国际标准，脚本就会出现乱码现象。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　解决办法：重新录制脚本，在录制脚本前，打开录制选项配置对话框进行设置，在“Recording Options</span></span>”的“Advanced”选项里先将“Surport Charset”选中，然后选中支持“UTF-8”的选项。</p> 
<h4>　　<span style="font-family:Times New Roman">42.LoadRunner HTTP</span>服务器状态代码：在录制<span style="font-family:Times New Roman">Web</span>协议脚本回放脚本的过程中，会出现<span style="font-family:Times New Roman">HTTP</span>服务器状态代码，例如常见的页面<span style="font-family:Times New Roman">-404</span>错误提示、<span style="font-family:Times New Roman">-500</span>错误提示。</h4> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误现象1</span></span>：-404 Not Found服务器没有找到与请求URI相符的资源，但还可以继续运行直到结束。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误分析：此处与请求URI</span></span>相符的资源在录制脚本时已经被提交过一次，回放时不可再重复提交同样的资源，而需要更改提交资源的内容，每次回放一次脚本都要改变提交的数据，保证模拟实际环境，造成一定的负载压力。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">解决办法：在出现错误的位置进行脚本关联，在必要时插入相应的函数。</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px"> </span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误现象2</span></span>：-500 Internal Server Error服务器内部错误，脚本运行停止。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误分析：服务器碰到了意外情况，使其无法继续回应请求。</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　解决办法：出现此错误是致命的，说明问题很严重，需要从问题的出现位置进行检查，此时需要此程序的开发人员配合来解决，而且产生的原因根据实际情况来定，测试人员无法单独解决问题，而且应该尽快解决，以便于后面的测试。</span></span></p> 
<h4>　　<span style="font-family:Times New Roman">43.LoadRunner</span>请求无法找到：在录制<span style="font-family:Times New Roman">Web</span>协议脚本回放脚本的过程中，会出现请求无法找到的现象，而导致脚本运行停止。</h4> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误现象：Action.c(41): Error -27979: Requested form. not found [MsgId: MERR-27979]</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　Action.c(41): web_submit_form. highest severity level was "ERROR",0 body bytes, 0 header bytes [MsgId: MMSG-27178]"</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　这时在tree view</span></span>中看不到此组件的相关URL。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">错误分析：所选择的录制脚本模式不正确，通常情况下，基于浏览器的Web</span></span>应用会使用“HTML-based script”模式来录制脚本；而没有基于浏览器的Web应用、Web应用中包含了与服务器进行交互的Java Applet、基于浏览器的应用中包含了向服务器进行通信的JavaScript/VBScript代码、基于浏览器的应用中使用HTTPS安全协议，这时则使用“URL-based script”模式进行录制。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　解决办法：打开录制选项配置对话框进行设置，在“Recording Options</span></span>”的“Internet Protocol”选项里的“Recording”中选择“Recording Level”为“HTML-based script”，单击“HTML Advanced”，选择“Script. Type”为“A script. containing explicit”。然后再选择使用“URL-based script”模式来录制脚本。</p> 
<h4>　　<span style="font-family:Times New Roman">44</span>．<span style="font-family:Times New Roman">LoadRunner</span>不执行检查方法：在录制<span style="font-family:Times New Roman">Web</span>协议脚本中添加了检查方法<span style="font-family:Times New Roman">Web_find</span>，但是在脚本回放的过程中并没有执行。</h4> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误现象：在脚本中插入函数Web_find</span></span>，在脚本中设置文本以及图像的检查点，但是在回放过程中并没有对设置的检查点进行检查，即Web_find失效。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误分析：由于检查功能会消耗一定的资源，因此LoadRunner</span></span>默认关闭了对文本以及图像的检查，所以在设置检查点后，需要开启检查功能。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">解决办法：打开运行环境设置对话框进行设置，在“Run-time Settings</span></span>”的“Internet Protocol”选项里的“Perference”中勾选“Check”下的“Enable Image and text check”选项。</p> 
<h4>　　<span style="font-family:Times New Roman">45.LoadRunner</span>回放<span style="font-family:Times New Roman">Web Services</span>协议脚本错误：<span style="font-family:Times New Roman">LoadRunner 8.0</span>版本在录制<span style="font-family:Times New Roman">Web Services</span>协议的脚本时正常，但在回放时会出现错误，提示停止脚本运行。</h4> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误现象：利用LoadRunner 8.0</span></span>版本来录制Web Services协议的脚本没有任何错误提示，回放脚本时会出现如下错误提示“Error：server returned an incorrectly formatted SOAP response”。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">　　错误分析：出现此错误的原因是LoadRunner8.0</span></span>在录制Web Services协议的脚本时存在一个缺陷：如果服务器的<a href="" rel="nofollow noopener noreferrer" target="_self"><span style="color:black">操作系统</span></a>是中文的，VuGen会自动将WSDL文件的头改为&lt;?xml version="1.0"encoding="zh_cn" ?&gt;，所以才会有此错误提示。</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">解决办法：下载两个补丁，分别为“LR80WebServicesFPI_setup.exe</span></span>”和“lrunner_web_ services_patch_1.exe”安装上即可。</p> 
<h4><span style="font-family:Times New Roman">    46.LR</span>启动<span style="font-family:Times New Roman">controller</span>报错“<span style="font-family:Times New Roman">transaction monitor not available</span>”</h4> 
<p><span style="font-family:宋体; font-size:14px"><span style="color:black">1.</span><span style="color:black">多是OS</span>系统问题，修复试试或升级</span></p> 
<p><span style="font-family:宋体; font-size:14px"><span style="color:black">2.</span><span style="color:black">或修复LR</span>试试</span></p> 
<h4><span style="font-family:Times New Roman">    47.Loadrunnber </span>报错误：<span style="font-family:Times New Roman">Error -- memory violation : Exception ACCESS_VIOLATION received.</span>的一种情况</h4> 
<p><span style="font-family:宋体; font-size:14px"><span style="color:black">Posted on 2011-01-05 12:12</span><span style="color:black">蝈蝈俊 阅读(433) </span>评论(0) 编辑收藏  </span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">最近写的一个Loadrunner</span></span>脚本，最后一步是点击“退出”按钮退出登录状态，如下：</p> 
<p><span style="font-family:宋体; font-size:14px"><span style="color:black">web_text_link("[</span><span style="color:black">退出]",</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">    </span> </span>"Snapshot=t18.inf", </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">    </span> </span>DESCRIPTION, </p> 
<p><span style="font-family:宋体; font-size:14px"><span style="color:black">    </span> "Text=[<span style="color:black">退出]", </span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">    </span> </span>ACTION, </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">    </span> </span>"UserAction=Click", </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">    </span> </span>LAST); </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">return 0;</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">但是会报错误：</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">Action1.c(94): Error: C interpreter run time error: Action1.c (94): </span></span>Error -- memory violation : Exception ACCESS_VIOLATION received. </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">Action1.c(94): Notify: CCI trace: Action1.c(94): web_text_link(0x02080870, 0x0208085f "Snapshot=t18.inf", 0x02080a42 "DESCRIPTION", 0x02080853, 0x02080a3b "ACTION", 0x020809de "UserAction=Click", 0x02080a6a "LAST") </span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">Action1.c(94): Notify: CCI trace: Compiled_code(0): Action1()</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">经过试验，发现是因为 退出后有个自动跳转。</span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">如果退出结束代码修改为下面就没有问题了。</span></span></p> 
<p><span style="font-family:宋体; font-size:14px"><span style="color:black">    </span> web_text_link("[<span style="color:black">退出]", </span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span></span>"Snapshot=t18.inf", </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span></span>DESCRIPTION, </p> 
<p><span style="font-family:宋体; font-size:14px"><span style="color:black">       </span>"Text=[<span style="color:black">退出]", </span></span></p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span></span>ACTION, </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span></span>"UserAction=Click", </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span></span>LAST); </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">    </span> </span>web_browser("Sync", </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span></span>"Snapshot=t18.inf", </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span></span>DESCRIPTION, </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span></span>ACTION, </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span> </span> "Sync", </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">       </span></span>LAST); </p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">     </span> </span>return 0;</p> 
<p><span style="color:black"><span style="font-family:宋体; font-size:14px">结论：</span></span></p> 
<p><span style="font-family:宋体; font-size:14px"><span style="color:black">web_text_link</span><span style="color:black">如果有中间跳转，不能放在代码的最后，最后要有一个 Sync </span>。</span></p> 
<h4><span style="font-family:Times New Roman">    48.</span><span style="color:black">Step download timeout(sec)</span><span style="color:black">设置</span></h4> 
<p><span style="font-family:Times New Roman; font-size:14px">     </span>这个默认是<span style="font-family:Times New Roman">120</span>秒，但是经常我们要设置的更大一些，具体设置方法：<span style="font-family:Times New Roman">Vugen--</span>》<span style="font-family:Times New Roman">Vuser---</span>》<span style="font-family:Times New Roman">Runtime-settings----</span>》<span style="font-family:Times New Roman">Preferences------</span>》<span style="font-family:Times New Roman">option</span>，将<span style="font-family:Times New Roman">Step download timeout(sec)</span>默认值<span style="font-family:Times New Roman">120s</span>改为自己需要的值，其次要改变<span style="font-family:Times New Roman">HTTP-reguest connnect timeout</span>（<span style="font-family:Times New Roman">sec</span>）和<span style="font-family:Times New Roman">HTTP-reguest receive timeout</span>（<span style="font-family:Times New Roman">sec</span>）也为相应的值。</p> 
<h4><span style="font-family:Times New Roman">    49.</span><span style="color:black">修改本机</span><span style="color:black">tcp</span><span style="color:black">连接数</span></h4> 
<p><span style="font-family:Times New Roman; font-size:14px">     </span><span style="color:black">   </span><span style="color:black">因为个人</span><span style="color:black">pc</span><span style="color:black">机的默认的</span><span style="color:black">tcp</span><span style="color:black">连接数只有</span><span style="color:black">15</span><span style="color:black">个（</span><span style="color:black">xp</span><span style="color:black">），所以我们在模拟虚拟多个用户时，就会遇到</span><span style="color:black">tcp</span><span style="color:black">的连接限制，从而报错。修改的方法：</span><span style="color:black">windows</span><span style="color:black">下运行</span><span style="color:black"> Patch.exe<br> </span><span style="color:black">输入</span><span style="color:black">C</span><span style="color:black">，再输入你要的</span><span style="color:black">TCP/IP</span><span style="color:black">连接数字（一般为</span><span style="color:black">500</span><span style="color:black">～</span><span style="color:black">2000</span><span style="color:black">）回车确认</span><span style="color:black"><br> </span><span style="color:black">输入</span><span style="color:black">Y </span><span style="color:black">回车确认。</span><span style="color:black"><br> </span><span style="color:black">倒计时</span><span style="color:black">15</span><span style="color:black">秒后结束。</span><span style="color:black"><br> </span><span style="color:black">接着再运行下</span><span style="color:black">Patch.exe</span><span style="color:black">，看连接数是不是由原来的</span><span style="color:black">10</span><span style="color:black">变成自己改了的数值。</span><span style="color:black"><br> Patch.exe </span><span style="color:black">下载地址：</span><u><span style="color:#075db3"><a href="http://www.touchboy.cn/2007/05/%E4%BF%AE%E6%94%B9windows-xp2003-%E7%9A%84tcpip%E8%BF%9E%E6%8E%A5%E6%95%B0/" rel="nofollow"><span style="color:#075db3">http://www.touchboy.cn/2007/05/% ... %E6%8E%A5%E6%95%B0/</span></a></span></u></p> 
<h4><span style="font-family:Times New Roman">    50.</span><span style="color:black">关于</span><span style="color:black">Error -27791: Error -27790:Error -27740:</span><span style="color:black">错误的解决方法：</span></h4> 
<p><span style="font-family:Times New Roman; font-size:14px">     </span><span style="color:black">   </span><span style="color:black">错误如下：</span><span style="color:black"><br> Action.c(198): Error -27791: Server "www.zcpx.cn" has shut down the connection prematurely<br> Action.c(198): Error -27790: Failed to read data from server "www.zcpx.cn": [10053] Software caused connection<br> abort<br> Action.c(198): Error -27740: Overlapped transmission of request to "www.zcpx.cn" for URL<br> <br> "http://www.zcpx.cn/userEntry.do" failed: WSA_IO_PENDING<br> <br> </span><span style="color:black">解决办法：</span><span style="color:black"><br> </span><span style="color:black">在脚本的最前面加上</span><span style="color:black">web_set_sockets_option("OVERLAPPED","0");</span></p> 
<h4><span style="font-family:Times New Roman">    51.</span><span style="color:black"> LR</span><span style="color:black">中错误代号为</span><span style="color:black">27796</span><span style="color:black">的一个解决方法</span></h4> 
<p><span style="font-family:Times New Roman; font-size:14px">     </span><span style="color:black">   </span><span style="color:black">错误如下：</span></p> 
<p><span style="font-size:14px">52.</span></p> 
<div> 
 <span style="font-size:14px">1A:注册表不能访问或写导致的，可以恢复注册表或卸载（清除注册表，可以使用工具）重新安装程序。</span> 
</div> 
<div> 
 <span style="font-size:14px">要启支LR自带的实例的服务时，出错了，提示：端口已经被另一个服务占用，请问一下能不能自己修改这个程序原来设定的端口啊？</span> 
</div> 
<div> 
 <span style="font-size:14px">2A:停止服务之后，在程序的安装目录\WebTours下找到xitami.cfg文件修改portbase值，注意 默认的端口号是portbase+80，portbase值是1000；要把端口号改成8088，就把portbase改为8008，保存之后就是了（8088=8008+80）。然后重启服务 <br> </span> 
</div> 
<p> </p> 
<h3>二：<span style="font-family:Arial">LoadRunner</span>面试（笔试）问题整理</h3> 
<p><span style="color:#333333">1.      </span><strong><span style="font-family:宋体">什么是负载测试？</span><span style="font-family:宋体">什么是性能测试？</span>    </strong><span style="font-family:宋体; font-size:14px">                                                                   </span></p> 
<p><span style="font-family:Times New Roman; font-size:14px">     </span>负载测试是通过逐步增加系统负载，测试系统性能的变化，并最终确定在满足性能指标的情况下，系统所能承受的最大负载量的测试，例如，访问一个页面的响应时间规定不超过<span style="font-family:Times New Roman">1</span>秒，负载测试就是测试在响应时间为<span style="font-family:Times New Roman">1</span>秒时，系统所能承受的最大并发访问用户的数量。</p> 
<p><span style="font-size:14px">压力测试通常是在高负载情况下来对系统的稳定性进行测试，更有效地发现系统稳定性的隐患和系统在负载峰值的条件下功能隐患等。</span></p> 
<p><span style="font-size:14px">性能测试：指在一定的约束条件下（指定的软件、硬件、网络环境等），确定系统所能承受的最大负载压力。</span></p> 
<p><span style="font-size:14px">2.</span>        <strong><span style="font-family:宋体">性能测试包含了哪些测试（至少举出</span>3</strong><span style="font-family:宋体"><strong>种）</strong></span></p> 
<p><span style="color:#333333"><span style="font-family:宋体">　</span></span><span style="font-family:宋体"><span style="color:#333333">性能测试包含负载测试、压力测试、大数据量测试、疲劳强度测试等。</span></span></p> 
<p><span style="font-family:宋体; font-size:14px">3.</span>   <span style="font-family:宋体"> <strong>简述性能测试的步骤</strong></span></p> 
<p align="center"><a href="http://www.51testing.com/batch.download.php?aid=23781" rel="nofollow noopener noreferrer" target="_blank"></a></p> 
<pre><span style="color:blue"> </span><span style="color:blue"><span style="font-family:宋体">第一，分析产品结构，明确性能测试的需求，包括并发、极限、配置和指标等方面的性能要求，必要时基于LOAD</span></span>测试的相同测略需同时考虑稳定性测试的需求。</pre> 
<pre><span style="color:blue"><span style="font-family:宋体">　　第二，分析应用场景和用户数据，细分用户行为和相关的数据流，确定测试点或测试接口，列示系统接口的可能瓶颈，一般是先主干接口再支线接口，并完成初步的测试用例设计。</span></span></pre> 
<pre><span style="color:blue"><span style="font-family:宋体">　　第三，依据性能测试需求和确定的测试点进行测试组网设计，并明确不同组网方案的重要程度或优先级作为取舍评估的依据，必要时在前期产品设计中提出支持性能测试的可测试性设计方案和对测试工具的需求。</span></span></pre> 
<pre><span style="color:blue"><span style="font-family:宋体">　　第四，完成性能测试用例设计、分类选择和依据用户行为分析设计测试规程，并准备好测试用例将用到的测试数据。</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:blue">    </span><span style="color:blue">第五，确定采用的测试工具。</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:blue">      </span><span style="color:blue">第六，进行初验测试，以主干接口的可用性为主，根据测试结果分析性能瓶颈，通过迭代保证基本的指标等测试的环境。</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:blue">      </span><span style="color:blue">第七，迭代进行全面的性能测试，完成计划中的性能测试用例的执行。</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:blue">      </span><span style="color:blue">第八，完成性能测试评估报告。</span></span></pre> 
<pre><span style="color:#333333"><span style="font-family:宋体">　　在进行性能测试的时候，我们需要知道一些有效的性能指标，下面我们来列出一些主要的性能指标：</span></span></pre> 
<pre><span style="color:#333333"><span style="font-family:宋体">　　一是，通用指标（指Web</span></span>应用服务器、数据库服务器必需测试项）：</pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*ProcessorTime<span style="color:#333333">：指服务器CPU</span>占用率，一般平均达到70%时，服务就接近饱和；</span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Memory Available Mbyte<span style="color:#333333">：可用内存数，如果测试时发现内存有变化情况也要注意，如果是内存泄露则比较严重；</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Physicsdisk Time <span style="color:#333333">：物理磁盘读写时间情况。</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span><span style="color:#333333">二是，Web</span>服务器指标：</span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Avg Rps<span style="color:#333333">：平均每秒钟响应次数＝总请求时间/</span>秒数；</span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Avg time to last byte per terstion<span style="color:#333333">（mstes</span>）：平均每秒业务角本的迭代次数；*Successful Rounds：成功的请求；</span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">   </span>   *Failed Rounds<span style="color:#333333">：失败的请求；</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Successful Hits<span style="color:#333333">：成功的点击次数；</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Failed Hits<span style="color:#333333">：失败的点击次数；</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Hits Per Second<span style="color:#333333">：每秒点击次数；</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Successful Hits Per Second<span style="color:#333333">：每秒成功的点击次数；</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Failed Hits Per Second<span style="color:#333333">：每秒失败的点击次数；</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Attempted Connections<span style="color:#333333">：尝试链接数。</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span><span style="color:#333333">三是，数据库服务器指标：</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*User 0 Connections <span style="color:#333333">：用户连接数，也就是数据库的连接数量；</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">      </span>*Number of deadlocks<span style="color:#333333">：数据库死锁；</span></span></pre> 
<pre><span style="font-family:宋体; font-size:14px">      *Butter Cache hit：数据库Cache的命中情况。</span></pre> 
<p><strong>4.         <span style="font-family:宋体">简述使用</span><a href="" rel="nofollow noopener noreferrer" target="_self"><span style="color:windowtext">Loadrunner</span></a></strong><span style="font-family:宋体"><strong>的步骤</strong></span></p> 
<p><span style="font-family:宋体"><span style="color:#333333">　　</span><strong><span style="color:#333333">A4</span><span style="color:#333333">：</span></strong><span style="color:#333333">制定性能测试计划</span></span><span style="color:#333333">—&gt;</span><span style="color:#333333"><span style="font-family:宋体">开发测试脚本</span></span><span style="color:#333333">—&gt;</span><span style="color:#333333"><span style="font-family:宋体">设计测试场景</span></span><span style="color:#333333">—&gt;</span><span style="color:#333333"><span style="font-family:宋体">执行测试场景</span></span><span style="color:#333333">—&gt;</span><span style="color:#333333"><span style="font-family:宋体">监控测试场景</span></span><span style="color:#333333">—&gt;</span><span style="font-family:宋体"><span style="color:#333333">分析测试结果</span></span></p> 
<p align="center"><a href="http://www.51testing.com/batch.download.php?aid=23782" rel="nofollow noopener noreferrer" target="_blank"></a></p> 
<p><strong>5.         </strong><span style="font-family:宋体"><strong>什么时候可以开始执行性能测试？</strong></span></p> 
<p><span style="font-family:宋体"><span style="color:#333333">　　</span><span style="color:#333333"><a href="" rel="nofollow noopener noreferrer" target="_self"><strong><span style="color:black">功能测试</span></strong></a></span><span style="color:#333333">通过；一般需要进行性能测试的系统，都是用户量比较大、业务使用比较频繁、比较重要的功能模块。</span></span></p> 
<p><strong>6.         LoadRunner</strong><span style="font-family:宋体"><strong>由哪些部件组成？</strong></span></p> 
<p><span style="font-family:宋体"><span style="color:#333333">　　</span><strong><span style="color:#333333">A6</span><span style="color:#333333">：</span></strong><span style="color:#333333">主要有三部分组成：</span></span></p> 
<p align="center"><a href="http://www.51testing.com/batch.download.php?aid=23783" rel="nofollow noopener noreferrer" target="_blank"></a></p> 
<p><strong>7.         <span style="font-family:宋体">你使用</span>LoadRunner</strong><span style="font-family:宋体"><strong>的哪个部件来录制脚本？</strong></span></p> 
<p><span style="color:#333333"><span style="font-family:宋体">　　</span></span><span style="color:#333333">   </span><span style="color:#333333"><span style="font-family:宋体">使用</span></span><span style="color:#333333">Virtual User Generator</span><span style="font-family:宋体"><span style="color:#333333">录制测试脚本</span></span></p> 
<p><strong>8.         LoadRunner</strong><span style="font-family:宋体"><strong>的哪个部件可以模拟多用户并发下回放脚本？</strong></span></p> 
<p><span style="color:#333333"><span style="font-family:宋体">　　</span></span><span style="color:#333333">LoadRunner</span><span style="color:#333333"><span style="font-family:宋体">的</span></span><span style="color:#333333">Controller</span><span style="font-family:宋体"><span style="color:#333333">组件。</span></span></p> 
<p><strong>9.         <span style="font-family:宋体">什么是集合点？设置集合点有什么意义？</span>Loadrunner</strong><span style="font-family:宋体"><strong>中设置集合点的函数是哪个？</strong></span></p> 
<p><span style="color:#333333"><span style="font-family:宋体">　</span></span><span style="color:#333333">   </span><span style="font-family:宋体"><span style="color:#333333">　在性能测试过程中，需要模拟大量用户在同一时刻，访问系统并同时操作某一任务，可以通过配置集合点来实现，多个用户同时进行某操作；</span></span></p> 
<p><span style="color:#333333"><span style="font-family:宋体">　　</span></span><span style="color:#333333">  </span><span style="color:#333333"><span style="font-family:宋体">集合点可以在服务器上创建密集的用户负载，使</span></span><span style="color:#333333">LoadRunner</span><span style="font-family:宋体"><span style="color:#333333">能够测试服务器在负载状态下的性能。</span></span></p> 
<p><span style="color:#333333"><span style="font-family:宋体">　</span></span><span style="color:#333333">    </span><span style="color:#333333"><span style="font-family:宋体">设置集合点函数：</span></span><span style="color:#333333">lr_rendezvous("Meeting")</span><span style="color:#333333"><span style="font-family:宋体">；</span></span><span style="color:#333333">  // Meeting</span><span style="font-family:宋体"><span style="color:#333333">是集合点名称</span></span></p> 
<p><strong>10.     </strong><span style="font-family:宋体"><strong>什么是场景？场景的重要性有哪些？如何设置场景？</strong></span></p> 
<p><span style="color:#333333"> </span><span style="color:#333333"><span style="font-family:宋体">　</span></span><span style="font-family:宋体"><span style="color:#333333">　场景用于模拟用户实际业务操作；</span></span></p> 
<p><span style="color:#333333">    </span> LoadRunner<span style="font-family:宋体"><span style="color:#333333">中场景有手工场景和面向目标的场景。</span></span></p> 
<p><span style="color:#333333">设置场景：选择场景类型、设置运行时设置、模拟用户数、加减压方式、持续时间，配置负载生成</span></p> 
<p><span style="color:#333333">1.</span><span style="color:#333333">选择场景中需要的脚本</span><span style="color:#333333"><br>      </span>2.<span style="color:#333333">选择为目标场景，还是指定的手工场景</span><span style="color:#333333"><br>      </span>3.<span style="color:#333333">设置用户数、设置产生负载的设备</span><span style="color:#333333"><br>      </span>4.<span style="color:#333333">设置执行策略</span></p> 
<p><strong>11.     <span style="font-family:宋体">请解释一下如何录制</span>web</strong><span style="font-family:宋体"><strong>脚本？</strong></span></p> 
<p align="left"><span style="color:#333333">LR</span><span style="color:#333333">通过转发请求，来捕获数据包，来形成脚本</span></p> 
<pre><span style="color:#333333"><span style="font-family:宋体">解释：1.</span></span>基于浏览器的应用程序推荐使用HTML-based Script, 脚本中采用</pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">HTML</span><span style="color:#333333">页面的形式来表示，这种方式的Script</span>脚本容易维护，容易理解，使用该选项中的advance中的第一个选项，如果单纯的HTML方式，是不允许使用关联的。</span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">2</span><span style="color:#333333">．不是基于浏览器的应用程序推荐使用URL-based Script</span>，脚本中的表示采用基于URL 的方式，不是很好阅读。</span></pre> 
<pre><span style="color:#333333"><span style="font-family:宋体">解释：1.</span></span>是否记录录制过程中的ThinkTime，如果记录，还可以设置最大值，一般我不记录这个值。</pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">2</span><span style="color:#333333">．通知Vugen</span>去重新设置每个action之间的Http context，缺省是需要的。</span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">3</span><span style="color:#333333">．完整记录录制过程的log</span>，</span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">4</span><span style="color:#333333">．保存一个本地的snapshot</span>，可以加速显示</span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">5</span><span style="color:#333333">．把html</span>的title放到web_reg_find函数里面</span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">6.</span><span style="color:#333333">支持的字符集标准</span></span></pre> 
<pre><span style="font-family:宋体"><span style="color:#333333">7</span><span style="color:#333333">．Http header</span>的录制，我们采用缺省即可，不需要用web_add_header去录制非标准的header信息。</span></pre> 
<pre><span style="color:#333333"><span style="font-family:宋体">对录制的content</span></span>的内容进行filter，不作为resource处理的。</pre> 
<pre><span style="color:#333333"><span style="font-family:宋体"> </span></span></pre> 
<pre><span style="color:#333333"><span style="font-family:宋体">解释：这个就是我前面提到的关联，系统已经预先设置好了一些常见的关联rules</span></span>，我们录制脚本之前，可以把系统的</pre> 
<p align="left"><strong><span style="font-family:Times New Roman"> </span></strong></p> 
<p align="left"><span style="color:#333333">12.    </span><span style="font-size:14px"><strong>为什么要创建参数<span style="font-family:Times New Roman">?</span>如何创建参数<span style="font-family:Times New Roman">?</span></strong></span><br> <span style="font-family:Times New Roman; font-size:14px"> </span><span style="color:#333333"> </span><span style="color:#333333">参数：在环境变化时必须时脚本具有环境变化的能力，就需要参数化（客户端发送到服务器端）</span><span style="color:#333333"><br>   </span>1.<span style="color:#333333">确定要参数话的数据</span><span style="color:#333333"><br>   </span>2.<span style="color:#333333">设定规则形式来取值</span></p> 
<p align="left"><strong><span style="font-family:Times New Roman; font-size:14px">13.</span>    <span style="font-size:14px">什么是关联？请解释一下自动关联和手动关联的不同。</span></strong></p> 
<p align="left"><span style="color:#333333">关联：很多构架用</span><span style="color:#333333">sessionid</span><span style="color:#333333">等方法标识不同任务和数据，应用在每次运行时方式发送数据不完全相同，需要利用的机制对录制的脚本进行处理，这种机制叫做关联（服务端发送到客户端）</span></p> 
<p align="left"><strong><span style="font-family:Times New Roman; font-size:14px">14.</span>    <span style="font-size:14px">场景设置有哪几种方法？</span></strong></p> 
<p><span style="color:#333333">目标场景，手工场景</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">15.</span>    <span style="font-size:14px"><strong>你如何找出哪里需要关联？请给一些你所在项目的实例</strong>。</span><br> <span style="color:#333333">用户登陆，</span><span style="color:#333333"><br> </span><span style="color:#333333">客户端发送请求后，服务端验证正确性后，发送给客户端</span><span style="color:#333333">sessionid</span><span style="color:#333333">，是某种规则产生。</span></p> 
<p align="left"><span style="color:#333333">16.    </span><strong><span style="font-size:14px">你在哪里设置自动关联选项？</span></strong><br> <span style="color:#333333">两地方可以设置</span><span style="color:#333333"><br> 1.</span><span style="color:#333333">设置允许录制时进行自动关联，可以自定义规则</span></p> 
<p align="left"><span style="color:#333333"><br> 2.</span><span style="color:#333333">录制完成后，</span><span style="color:#333333">vuser-scan action for correlations</span></p> 
<p align="left"><strong><span style="font-family:Times New Roman; font-size:14px">17.</span>    <span style="font-size:14px">哪个函数是用来截取虚拟用户脚本中的动态值？（手工关联）</span></strong></p> 
<p><span style="color:#333333">web_reg_save_param()</span><span style="color:#333333">函数主要根据需要做关联的动态数据前面和后面的固定字符串来识别、提取动态数据，所以在做关联时，需要找出动态数据的左、右边界字符串。</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">18.</span>    <span style="font-size:14px"><strong>你在<span style="font-family:Times New Roman">VUGen</span>中何时选择关闭日志？何时选择标准和扩展日志？</strong></span><br> <span style="color:#333333">Run-time</span><span style="color:#333333">，</span><span style="color:#333333">log</span><span style="color:#333333">，</span><span style="color:#333333"><br> </span><span style="color:#333333">当调试脚本时，可以只输出错误日志，当在场景找你管加载脚本时，日志自动变为不可用。</span><span style="color:#333333"><br> Standard Log Option</span><span style="color:#333333">：选择标准日志时，就会在脚本执行过程中，生成函数的标准日志并且输出信息，供调试用。大型负载测试场景不用启用这个选项。</span><span style="color:#333333"><br> </span><span style="color:#333333">扩展日志包括警告和其他信息。大型负载测试不要启用该选项。用扩展日志选项，可以指定哪些附加信息需要加到扩展日志中</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">19.</span>    <span style="font-size:14px"><strong>你如何调试<span style="font-family:Times New Roman">LoadRunner</span>脚本？</strong></span><br> <span style="color:#333333">VuGen</span><span style="color:#333333">有两个选项帮助调试</span><span style="color:#333333">Vuser</span><span style="color:#333333">脚本。</span><span style="color:#333333">Run Step by Step</span><span style="color:#333333">命令和断点（</span><span style="color:#333333">breakpoints</span><span style="color:#333333">）。</span><span style="color:#333333">Option</span><span style="color:#333333">对话框中的调试设置（</span><span style="color:#333333">Debug setting</span><span style="color:#333333">）项，可以确定在场景执行过程中执行轨迹范围。</span><span style="color:#333333">调试信息写在</span><span style="color:#333333">output</span><span style="color:#333333">窗口。可以用</span><span style="color:#333333"> <br> lr_set_debug_messag</span><span style="color:#333333">函数在脚本中手工设置信息类型。如果我们只想接收到一小段脚本的调式信息。</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">20.</span>    <span style="font-size:14px"><strong>你在<span style="font-family:Times New Roman">LR</span>中如何编写自定义函数？请给出一些你在以前进行的项目中编写的函数。</strong></span><br> <span style="color:#333333">在创建用户自定义函数前我们需要和创建</span><span style="color:#333333">DLL</span><span style="color:#333333">（</span><span style="color:#333333">external libary</span><span style="color:#333333">）。把库放在</span><span style="color:#333333">VuGen bin</span><span style="color:#333333">目录下。一旦加了库，把自定义函数分配做一个参数。该函数应该具有一下格式：</span><span style="color:#333333">__declspec (dllexport) char* &lt;function name&gt;(char*, char*)</span><span style="color:#333333">。</span><span style="color:#333333"><br> Milan</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">21.</span>    <strong><span style="font-size:14px">什么是逐步递增？你如何来设置？</span></strong><br> <span style="color:#333333">Ramp up</span><span style="color:#333333">这个选项用于逐渐增加服务器的虚拟用户数或负载量。设置一个初始值而且可以在两个迭代之间设置一个值等待。设置</span><span style="color:#333333">Ramp up</span><span style="color:#333333">，请到</span><span style="color:#333333">‘Scenario Scheduling Options’</span><span style="color:#333333">。</span></p> 
<p align="left"><span style="color:#333333">22.    </span><strong><span style="font-size:14px">以线程方式运行的虚拟用户有哪些优点？</span></strong><br> <span style="color:#333333">VuGen</span><span style="color:#333333">提供了用多线程的便利。这使得在每个生成器上可以跑更多的虚拟用户。如果是以进程的方式跑虚拟用户，为每个用户加载相同的驱动程序到内存中，因此占用了大量的内存。这就限制了在单个生成器上能跑的虚拟用户数。如果按线程运行，给定的所有虚拟用户数（比如</span><span style="color:#333333">100</span><span style="color:#333333">）只是加载一个驱动程序实例到内存里。每个线程共用父驱动程序的内存，因此在每个生成器上可以跑更多的虚拟用户。</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">23.</span>    <strong><span style="font-size:14px">当你需要在出错时停止执行脚本，你怎么做？</span></strong><br> <span style="color:#333333">lr_abort</span><span style="color:#333333">函数放弃虚拟用户脚本的执行。说明虚拟用户停止</span><span style="color:#333333">Action</span><span style="color:#333333">的执行，直接执行</span><span style="color:#333333">vuser_end</span><span style="color:#333333">然后结束执行。在出现错误情况下想手工放弃脚本的执行，这个函数是有用的。用这个函数停止脚本时，</span><span style="color:#333333">Vuser</span><span style="color:#333333">被指定为</span><span style="color:#333333">“Stopped”</span><span style="color:#333333">状态。为了这个函</span><span style="color:#333333">数起作用，开始时候就不能选择</span><span style="color:#333333">Run-Time Settings</span><span style="color:#333333">中的</span><span style="color:#333333">Continue on error</span><span style="color:#333333">选项</span><span style="font-size:14px">。</span></p> 
<p align="left"><span style="color:#333333">24.    </span><strong><span style="font-size:14px">响应时间和吞吐量之间的关系是什么？</span></strong><br> <span style="color:#333333">吞吐量图显示的是虚拟用户每秒钟从服务器接收到的字节数。当和响应时间比较时，可以发现随着吞吐量的降低，响应时间也降低，同样的，吞吐量的峰值和最大响</span><span style="color:#333333">应时间差不多在同时出现。</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">25.</span>    <span style="font-size:14px"><strong>说明一下如何在<span style="font-family:Times New Roman">LR</span>中配置系统计数器？</strong></span><br> <span style="color:#333333">通过</span><span style="color:#333333">Web</span><span style="color:#333333">资源监视器，利用这些监控器可以分析</span><span style="color:#333333">web</span><span style="color:#333333">服务器的吞吐量、点击率、每秒</span><span style="color:#333333">http</span><span style="color:#333333">响应数以及每秒下载的页面数。</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">26.</span>    <span style="font-size:14px"><strong>什么是<span style="font-family:Times New Roman">think time</span>？<span style="font-family:Times New Roman">think_time</span>有什么用？</strong></span><br> <span style="color:#333333">思考时间是真实用户在</span><span style="color:#333333">action</span><span style="color:#333333">之间等待的时间。例如：当一个用户从服务器接收到数据时，用户可能需要在响应之前等待几分钟回顾数据，这种推迟被称为思考时间。</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">27.</span>    <strong><span style="font-size:14px">标准日志和扩展日志的区别是什么？</span></strong><br> <span style="color:#333333">Standard Log Option</span><span style="color:#333333">：选择标准日志时，就会在脚本执行过程中，生成函数的标准日志并且输出信息，供调试用。大型负载测试场景不用启用这个选项。</span><span style="color:#333333"><br> </span><span style="color:#333333">扩展日志包括警告和其他信息。大型负载测试不要启用该选项。用扩展日志选项，可以指定哪些附加信息需要加到扩展日志中</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">28.</span>    <strong><span style="font-size:14px">解释以下函数及他们的不同之处。</span></strong><br> <span style="color:#333333">Lr_debug_message<br> lr_debug_message </span><span style="color:#333333">函数在指定的消息级别</span><span style="color:#333333"><br> // </span><span style="color:#333333">处于活动状态时发送一条调试消息。如果指定的</span><span style="color:#333333"><br> // </span><span style="color:#333333">消息级别未处于活动状态，则不发出消息。</span><span style="color:#333333"><br> Lr_output_message<br> </span><span style="color:#333333">要发送不是特定错误消息的特殊通知，</span><span style="color:#333333"><br> Lr_error_message<br> </span><span style="color:#333333">函数将错误消息发送到</span><span style="color:#333333"><br> // </span><span style="color:#333333">输出窗口和</span><span style="color:#333333"> Vuser</span><span style="color:#333333">日志文件</span><span style="color:#333333"><br> Lrd_stmt lrd_exec </span><span style="color:#333333">函数执行</span><span style="color:#333333"> lrd_stmt</span><span style="color:#333333">设置的</span><span style="color:#333333"> SQL </span><span style="color:#333333">语句。</span><span style="color:#333333"><br> Lrd_fetch  </span><span style="color:#333333">函数从结果集中提取后续若干行</span><span style="color:#333333"><br> result set. <br> </span><span style="color:#333333">函数准备用于</span><span style="color:#333333"><br> // </span><span style="color:#333333">通过光标输出字符串（通常为</span><span style="color:#333333"> SQL</span><span style="color:#333333">语句）</span><span style="color:#333333"><br> // </span><span style="color:#333333">的下一结果集。对于</span><span style="color:#333333"> CtLib</span><span style="color:#333333">，它发出</span><span style="color:#333333"> ct_result<br> // </span><span style="color:#333333">命令，并且在</span><span style="color:#333333"> ODBC</span><span style="color:#333333">中它运行用于当前数据库</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">29.</span>    <strong><span style="font-size:14px">什么是吞吐量？</span></strong><br> <span style="color:#333333">单位时间内系统处理客户端的请求数。</span></p> 
<p align="left"><span style="font-family:Times New Roman"><strong><span style="font-size:14px">30.</span>    <span style="font-size:14px">action</span></strong></span><span style="font-size:14px"><strong>和<span style="font-family:Times New Roman">init</span>、<span style="font-family:Times New Roman">end</span>除了迭代的区别还有其他吗？</strong></span></p> 
<p><span style="color:#333333">在</span><span style="color:#333333">init</span><span style="color:#333333">、</span><span style="color:#333333">end</span><span style="color:#333333">中不能使用集合点、事务等</span><span style="color:#333333">, init</span><span style="color:#333333">、</span><span style="color:#333333">end</span><span style="color:#333333">只执行一次。</span></p> 
<p align="left"><strong><span style="font-family:Times New Roman; font-size:14px">31.</span>    </strong><span style="font-size:14px"><strong>在什么地方设置<span style="font-family:Times New Roman">HTTP</span>页面<span style="font-family:Times New Roman">filter?</span></strong></span></p> 
<p><span style="font-family:Times New Roman; font-size:14px">       </span>在<span style="font-family:Times New Roman">runtime_settings</span>中<span style="font-family:Times New Roman">download filter</span>里面进行设置。</p> 
<p align="left"><span style="font-family:Times New Roman"><strong><span style="font-size:14px">32.</span>    <span style="font-size:14px">pot mapping</span></strong></span><strong><span style="font-size:14px">的原理是什么？</span></strong></p> 
<p><span style="font-family:Times New Roman; font-size:14px">       </span>就是代理服务器</p> 
<p align="left"><span style="font-family:Times New Roman"><strong><span style="font-size:14px">33.</span>    <span style="font-size:14px">HTTP</span></strong></span><strong><span style="font-size:14px">的超时有哪三种？</span></strong></p> 
<p><span style="font-family:Times New Roman; font-size:14px">HTTP-request connect timeout</span>、<span style="font-family:Times New Roman">HTTP-request receive timeout</span>、<span style="font-family:Times New Roman">step download timeout</span></p> 
<p align="left"><strong><span style="font-family:Times New Roman; font-size:14px">34.</span>    </strong><span style="font-size:14px"><strong>什么是<span style="font-family:Times New Roman">contentcheck?</span>如何来用？</strong></span></p> 
<p><span style="font-family:Times New Roman; font-size:14px">ContentCheck</span>的设置是为了让<span style="font-family:Times New Roman">VuGen</span>检测何种页面为错误页面。如果被测的<span style="font-family:Times New Roman">Web </span>应用没有使用自定义的错误页面，那么这里不用作更改；如果被测的<span style="font-family:Times New Roman">Web</span>应用使用了自定义的错误页面，那么这里需要定义，以便让<span style="font-family:Times New Roman">VuGen </span>在运行过程中检测，服务器返回的页面是否包含预定义的字符串，进而判断该页面是否为错误页</p> 
<p><span style="font-size:14px">面。如果是，<span style="font-family:Times New Roman">VuGen</span>就停止运行，指示运行失败。</span></p> 
<p><span style="font-size:14px">使用方法：点击在<span style="font-family:Times New Roman">runtime settings</span>中点击<span style="font-family:Times New Roman">“contentcheck”</span>，然后新建立一个符合要求的应用程序和规则，设定需要查找的文本和前缀后缀即可使用。</span></p> 
<p align="left"><span style="font-family:Times New Roman"><strong><span style="font-size:14px">35.</span>    <span style="font-size:14px">network</span></strong></span><span style="font-size:14px"><strong>中的<span style="font-family:Times New Roman">speed simulation</span>是模拟的什么带宽？</strong></span></p> 
<p><span style="font-size:14px">模拟用户访问速度的带宽。</span></p> 
<p align="left"><strong><span style="font-family:Times New Roman; font-size:14px">36.</span>    </strong><span style="font-size:14px"><strong>生成<span style="font-family:Times New Roman">WEB</span>性能图有什么意义？大概描述即可。</strong></span></p> 
<p><span style="font-size:14px">可以很直观的看到，在负载下系统的运行情况以及各种资源的使用情况，可以对系统的性能瓶颈定位、性能调优等起到想要的辅助作用。</span></p> 
<p align="left"><strong><span style="font-family:Times New Roman; font-size:14px">37.</span>    </strong><span style="font-size:14px"><strong>如果刷新<span style="font-family:Times New Roman">controller</span>里的脚本？</strong></span></p> 
<p><span style="font-size:14px">在<span style="font-family:Times New Roman">controller</span>中，点击<span style="font-family:Times New Roman">detailis</span>－<span style="font-family:Times New Roman">Refresh-script</span>即可。</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">38.</span>    <span style="font-size:14px"><strong>进程和线程有什么区别</strong>？</span></p> 
<p><span style="font-family:宋体; font-size:14px">线程有自己的全局数据。线程存在于进程中,因此一个进程的全局变量由所有的线程共享。由于线程共享同样的系统区域,操作系统分配给一个进程的资源对该进程的所有线程都是可用的,正如全局数据可供所有线程使用一样。在Controller中将使用驱动程序（如mdrv.exe、r3vuser.exe）运行vuser。如果按进程运行每个vuser，则对于每个vuser实例，都将反复启动同一驱动程序并将其加载到内存中。将同一驱动程序加载到内存中会占用大量的</span>RAM<span style="font-family:宋体">（随机存储器）及其他系统资源。这就限制了可以在任一负载生成器上运行的</span>vuser<span style="font-family:宋体">数量。如果按线程运行每个</span>vuser<span style="font-family:宋体">，</span>Controller<span style="font-family:宋体">为每</span>50<span style="font-family:宋体">个</span>vuser<span style="font-family:宋体">（默认情况下）仅启动驱动程序（如</span>mdrv.exe<span style="font-family:宋体">）的一个实例。该驱动程序将启动几个</span>vuser<span style="font-family:宋体">，每个</span>vuser<span style="font-family:宋体">都按线程运行。这些线程</span>vuser<span style="font-family:宋体">将共享父驱动进程的内存段。这就消除了多次重新加载驱动程序</span>/<span style="font-family:宋体">进程的需要，节省了大量内存空间，从而可以在一个负载生成器上运行更多的</span>Vuser.</p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">39.</span>    <span style="font-size:14px"><strong>如何把脚本和结果放到<span style="font-family:Times New Roman">load generator</span>的机器上？</strong></span></p> 
<p><span style="font-family:Times New Roman; font-size:14px">    </span>在<span style="font-family:Times New Roman">controller</span>中，点击<span style="font-family:Times New Roman">Results-Results settings,</span>在里面进行相应的设置即可。</p> 
<p align="left"><strong><span style="font-family:Times New Roman; font-size:14px">40.</span>    <span style="font-size:14px">如何设置才能让集合点只对一半的用户生效？</span></strong></p> 
<p><span style="font-family:宋体; font-size:14px">   对集合点策略进行相应的设置即可。即在controller中，点击Scenario－Rendezvous-policy进行相应的设置即可，由于题目中“一半的用户”没有说明白具体指什么样的用户，现在不好确定具体对里面的哪个选项进行设置。</span></p> 
<p align="left"><span style="font-family:Times New Roman"><strong><span style="font-size:14px">41.</span>    <span style="font-size:14px">LRd</span></strong></span><span style="font-size:14px"><strong>的<span style="font-family:Times New Roman">API</span>分为几类</strong></span></p> 
<p align="left">Ａ：通用的ＡＰＩ：，就是跟具体的协议无关，在任何协议的脚本里都能用的；</p> 
<p align="left">Ｂ：针对协议的：像lrs前缀是winsock的；lrd的是针对database;</p> 
<p align="left">Ｃ：自定义的：这个范围就比较广了；比如至<span style="font-size:14px"><span style="color:#333333">少有</span><span style="color:#333333">Java Vuser API</span><span style="color:#333333">、</span><span style="color:#333333">lrapi</span><span style="color:#333333">、</span><span style="color:#333333">XML API</span><span style="color:#333333">。还可以添加</span><span style="color:#333333">WindowsAPI</span><span style="color:#333333">和自定义函数库。</span></span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">42.</span>    <span style="font-size:14px">LR</span><span style="font-size:14px">几种日志函数的区别？</span></p> 
<p><span style="font-size:14px">【<span style="font-family:Times New Roman">lr_message</span>】<span style="font-family:Times New Roman"> int lr_message (const char *format, exp1, exp2,…expn.);</span>中文解释：<span style="font-family:Times New Roman">lr_message</span>函数将信息发送到日志文件和输入窗口。在<span style="font-family:Times New Roman">VuGen</span>中运行时，输入文件为<span style="color:blue"><span style="font-family:Times New Roman">output.txt</span></span><span style="color:blue">。</span><span style="font-family:Times New Roman"></span></span></p> 
<p><span style="font-size:14px">【<span style="font-family:Times New Roman">lr_log_message</span>】<span style="font-family:Times New Roman"> int lr_log_message (const char *format, exp1, exp2,…expn.);</span>中文解释：<span style="font-family:Times New Roman">lr_log_message</span>函数将消息发送到<span style="color:blue"><span style="font-family:Times New Roman">Vuser</span></span><span style="color:blue">或代理日志文件</span>（取决于应用程序），而不是发送到输出窗口。通过向日志文件发送错误消息或其他信息性消息，可以将该函数用于调试。<span style="font-family:Times New Roman">                   </span>【<span style="font-family:Times New Roman">lr_error_message</span>】<span style="font-family:Times New Roman"> int lr_error_message (const char *format, exp1, exp2,…expn. );</span>中文解释：<span style="font-family:Times New Roman">lr_error_message</span>函数将错误消息发送到<span style="color:blue">输出窗口和</span><span style="color:blue"><span style="font-family:Times New Roman">Vuser</span></span><span style="color:blue">日志文件</span>。要发送不是特定错误消息的特殊通知，请使用<span style="font-family:Times New Roman">lr_output_message</span>。</span></p> 
<p><span style="font-size:14px">【<span style="font-family:Times New Roman">lr_output_message</span>】<span style="font-family:Times New Roman"> int lr_output_message (const char *format, exp1, exp2,…expn.);</span>中文解释：<span style="font-family:Times New Roman">lr_output_message</span>函数将带有脚本部分的行号的消息发送到<span style="color:blue">输出窗口和日志文件</span>。</span></p> 
<p><span style="font-size:14px">【<span style="font-family:Times New Roman">lr_debug_message</span>函数组】<span style="font-family:Times New Roman"> int lr_debug_message (unsigned int message_level, const char *format, … );</span>中文解释：<span style="font-family:Times New Roman">lr_debug_message</span>函数在指定的消息级别处于活动状态时发送一条调试信息。如果指定的消息级别未出于活动状态，则不发送消息。您可以从用户界面或者使用<span style="font-family:Times New Roman">lr_set_debug_message</span>，将处于活动状态的消息级别设置为<span style="font-family:Times New Roman">MSG_CLASS_BRIEF_LOG</span>或<span style="font-family:Times New Roman">MSG_CLASSS_EXTENDED_LOG</span>。要确定当前级别，</span></p> 
<p><span style="font-size:14px">请使用<span style="font-family:Times New Roman">lr_get_debug_message</span>。<span style="font-family:Times New Roman"> unsigned int lr_get_debug_message ( );</span>中文解释：<span style="font-family:Times New Roman">lr_get_debug_message</span>函数返回当前的日志运行时设置。该设置确定发送到输出端的信息。日志设置是使用运行时设置对话框或通过使用<span style="font-family:Times New Roman">lr_set_debug_message</span>函数指定的。<span style="font-family:Times New Roman"> int lr_set_debug_message (unsigned int message_level, unsigned int on_off); </span> 中文解释：<span style="font-family:Times New Roman">lr_set_debug_message</span>函数设置脚本执行的调试消息级别<span style="font-family:Times New Roman">message_lvl</span>。通过设置消息级别，可以确定发送哪些信息。启动设置的方法是将<span style="font-family:Times New Roman">LR_SWITCH_ON</span>作为<span style="font-family:Times New Roman">on_off</span>传递，禁用设置的方法是传递<span style="font-family:Times New Roman">LR_SWITCH_OFF</span>。</span></p> 
<p><span style="font-size:14px">【<span style="font-family:Times New Roman">lrd_stmt</span>】：将<span style="font-family:Times New Roman">SQL</span>语句与光标关联</span></p> 
<p><span style="font-size:14px">【<span style="font-family:Times New Roman">lrd_fetch</span>】<span style="font-family:Times New Roman">:</span>提取结果集中得下一条记录</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">43.</span>    <span style="font-size:14px">性能瓶颈分析方法？</span></p> 
<p><span style="font-family:Times New Roman; font-size:14px"> </span>同一场景<br> <span style="font-family:Times New Roman; font-size:14px">1.</span><span style="font-size:14px">小用户量的情况下测试</span><br> <span style="font-family:Times New Roman; font-size:14px">2.</span><span style="font-size:14px">大用户量情况下的测试</span><br> <span style="font-size:14px">分析的方法：</span><br> <span style="font-size:14px">整个系统架构分析，系统响应时间消耗，利用图表分析</span><br> <span style="font-size:14px">查看事务响应时间，通过事务摘要图分析事务响应时间，那个消耗最大（通过小用户量和大用户量的响应时间分析，查看那个事务响应时间最高），确定哪部分功能是性能的瓶颈，分析<span style="font-family:Times New Roman">window resource</span>图表，查看</span><span style="font-family:Times New Roman; font-size:14px">cpu<br> </span>使用下列计数器标识<span style="font-family:Times New Roman">cpu</span>瓶颈<br> <span style="font-family:Times New Roman; font-size:14px">Processor\ Interrupts/sec<br> Processor\ % Processor Time<br> Process(process)\ % Processor Time<br> System\ Processor Queue Length<br> </span><span style="font-size:14px">通过它来确定是否硬件本身出现瓶颈，或者进一步确定应该怎么去判断性能产生瓶颈的地方！</span><br> <span style="font-size:14px">下一步去判断进程，那个进程消耗<span style="font-family:Times New Roman">cpu</span>最高</span><br> <span style="font-size:14px">下边就有很多种情况需要你自己去判断，有可能是进程调用了的函数消耗了系统资源形成上边的问题，也有可能是后台数据库出现的问题（这个就要看你的系统配置是什么样的，比如你的<span style="font-family:Times New Roman">db</span>服务器和应用服务器都配置在一台机器上）</span><br> <span style="font-size:14px">性能产生瓶颈有很多地方，所以需要进一判断，是否是后台数据库的问题还有待分析，是那条语句导致的问题需要进一步分析判断。</span><br> <span style="font-size:14px">分析原则：</span><br> <span style="font-family:Times New Roman; font-size:14px">• </span><span style="font-size:14px">具体问题具体分析（这是由于不同的应用系统，不同的测试目的，不同的性能关注点）</span><br> <span style="font-family:Times New Roman; font-size:14px">• </span><span style="font-size:14px">查找瓶颈时按以下顺序，由易到难。</span><br> <span style="font-size:14px">服务器硬件瓶颈<span style="font-family:Times New Roman">-</span>〉网络瓶颈（对局域网，可以不考虑）<span style="font-family:Times New Roman">-</span>〉服务器操作系统瓶颈（参数配置）<span style="font-family:Times New Roman">-</span>〉中间件瓶颈（参数配置，数据库，<span style="font-family:Times New Roman">web</span>服务器等）<span style="font-family:Times New Roman">-</span>〉应用瓶颈（<span style="font-family:Times New Roman">SQL</span>语句、数据库设计、业务逻辑、算法等）</span><br> <span style="font-size:14px">注：以上过程并不是每个分析中都需要的，要根据测试目的和要求来确定分析的深度。对一些要求低的，我们分析到应用系统在将来大的负载压力（并发用户数、数据量）下，系统的硬件瓶颈在哪儿就够了。</span><br> <span style="font-family:Times New Roman; font-size:14px">• </span><span style="font-size:14px">分段排除法很有效</span><br> <span style="font-size:14px">分析的信息来源：</span><br> <span style="font-family:Times New Roman; font-size:14px">•1 </span><span style="font-size:14px">根据场景运行过程中的错误提示信息</span><br> <span style="font-family:Times New Roman; font-size:14px">•2 </span><span style="font-size:14px">根据测试结果收集到的监控指标数据</span><br> <span style="font-size:14px">一．错误提示分析</span><br> <span style="font-size:14px">分析实例：</span><br> <span style="font-family:Times New Roman; font-size:14px">1 •Error: Failed to connect to server “10.10.10.30:8080″: [10060] Connection<br> •Error: timed out Error: Server “10.10.10.30″ has shut down the connection prematurely<br> </span><span style="font-size:14px">分析：</span><br> <span style="font-family:Times New Roman; font-size:14px">•A</span><span style="font-size:14px">、应用服务死掉。</span><br> <span style="font-size:14px">（小用户时：程序上的问题。程序上处理数据库的问题）</span><br> <span style="font-family:Times New Roman; font-size:14px">•B</span><span style="font-size:14px">、应用服务没有死</span><br> <span style="font-size:14px">（应用服务参数设置问题）</span><br> <span style="font-size:14px">例：在许多客户端连接<span style="font-family:Times New Roman">Weblogic</span>应用服务器被拒绝，而在服务器端没有错误显示，则有可能是<span style="font-family:Times New Roman">Weblogic</span>中的<span style="font-family:Times New Roman">server</span>元素的<span style="font-family:Times New Roman"> AcceptBacklog</span>属性值设得过低。如果连接时收到<span style="font-family:Times New Roman">connection refused</span>消息，说明应提高该值，每次增加<span style="font-family:Times New Roman">25</span>％</span><br> <span style="font-family:Times New Roman; font-size:14px">•C</span><span style="font-size:14px">、数据库的连接</span><br> <span style="font-family:Times New Roman; font-size:14px">(1</span><span style="font-size:14px">、在应用服务的性能参数可能太小了<span style="font-family:Times New Roman"> 2</span>、数据库启动的最大连接数（跟硬件的内存有关）</span><span style="font-family:Times New Roman; font-size:14px">)<br> 2  Error: Page download timeout (120 seconds) has expired<br> </span>分析：可能是以下原因造成<br> <span style="font-family:Times New Roman; font-size:14px">•A</span><span style="font-size:14px">、应用服务参数设置太大导致服务器的瓶颈</span><br> <span style="font-family:Times New Roman; font-size:14px">•B</span><span style="font-size:14px">、页面中图片太多</span><br> <span style="font-family:Times New Roman; font-size:14px">•C</span><span style="font-size:14px">、在程序处理表的时候检查字段太大多</span><br> <span style="font-size:14px">二．监控指标数据分析</span><br> <span style="font-family:Times New Roman; font-size:14px">1</span><span style="font-size:14px">．最大并发用户数：</span><br> <span style="font-size:14px">应用系统在当前环境（硬件环境、网络环境、软件环境（参数配置））下能承受的最大并发用户数。</span><br> <span style="font-size:14px">在方案运行中，如果出现了大于<span style="font-family:Times New Roman">3</span>个用户的业务操作失败，或出现了服务器<span style="font-family:Times New Roman">shutdown</span>的情况，则说明在当前环境下，系统承受不了当前并发用户的负载压力，那么最大并发用户数就是前一个没有出现这种现象的并发用户数。</span><br> <span style="font-size:14px">如果测得的最大并发用户数到达了性能要求，且各服务器资源情况良好，业务操作响应时间也达到了用户要求，那么<span style="font-family:Times New Roman">OK</span>。否则，再根据各服务器的资源情况和业务操作响应时间进一步分析原因所在。</span><br> <span style="font-family:Times New Roman; font-size:14px">2</span><span style="font-size:14px">．业务操作响应时间：</span><br> <span style="font-family:Times New Roman; font-size:14px">• </span><span style="font-size:14px">分析方案运行情况应从平均事务响应时间图和事务性能摘要图开始。使用<span style="font-family:Times New Roman">“</span>事务性能摘要<span style="font-family:Times New Roman">”</span>图，可以确定在方案执行期间响应时间过长的事务。</span><br> <span style="font-family:Times New Roman; font-size:14px">• </span><span style="font-size:14px">细分事务并分析每个页面组件的性能。查看过长的事务响应时间是由哪些页面组件引起的？问题是否与网络或服务器有关？</span><br> <span style="font-family:Times New Roman; font-size:14px">• </span><span style="font-size:14px">如果服务器耗时过长，请使用相应的服务器图确定有问题的服务器度量并查明服务器性能下降的原因。如果网络耗时过长，请使用<span style="font-family:Times New Roman">“</span>网络监视器<span style="font-family:Times New Roman">”</span>图确定导致性能瓶颈的网络问题</span><br> <span style="font-family:Times New Roman; font-size:14px">3</span><span style="font-size:14px">．服务器资源监控指标：</span><br> <span style="font-size:14px">内存：</span><br> <span style="font-family:Times New Roman; font-size:14px">1 UNIX</span><span style="font-size:14px">资源监控中指标内存页交换速率（<span style="font-family:Times New Roman">Paging rate</span>），如果该值偶尔走高，表明当时有线程竞争内存。如果持续很高，则内存可能是瓶颈。也可能是内存访问命中率低。</span><br> <span style="font-family:Times New Roman; font-size:14px">2 Windows</span><span style="font-size:14px">资源监控中，如果<span style="font-family:Times New Roman">Process\Private Bytes</span>计数器和<span style="font-family:Times New Roman">Process\Working Set</span>计数器的值在长时间内持续升高，同时<span style="font-family:Times New Roman">Memory\Available bytes</span>计数器的值持续降低，则很可能存在内存泄漏。</span><br> <span style="color:blue"><span style="font-size:14px">内存资源成为系统性能的瓶颈的征兆</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">:<br> </span></span><span style="color:blue">很高的换页率</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(high pageout rate);<br> </span></span><span style="color:blue">进程进入不活动状态</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">;<br> </span></span><span style="color:blue">交换区所有磁盘的活动次数可高</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">;<br> </span></span><span style="color:blue">可高的全局系统</span><span style="color:blue"><span style="font-family:Times New Roman">CPU</span></span><span style="color:blue">利用率</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">;<br> </span></span><span style="color:blue">内存不够出错</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(out of memory errors)<br> </span></span>处理器：</span><br> <span style="font-family:Times New Roman; font-size:14px">1 UNIX</span><span style="font-size:14px">资源监控（<span style="font-family:Times New Roman">Windows</span>操作系统同理）中指标<span style="font-family:Times New Roman">CPU</span>占用率（<span style="font-family:Times New Roman">CPU utilization</span>），如果该值持续超过<span style="font-family:Times New Roman">95%</span>，表明瓶颈是<span style="font-family:Times New Roman">CPU</span>。可以考虑增加一个处理器或换一个更快的处理器。如果服务器专用于<span style="font-family:Times New Roman">SQL Server,</span>可接受的最大上限是</span><span style="font-family:Times New Roman; font-size:14px">80-85%<br> </span>合理使用的范围在<span style="font-family:Times New Roman">60%</span>至<span style="font-family:Times New Roman">70%</span>。<br> <span style="font-family:Times New Roman; font-size:14px">2 Windows</span><span style="font-size:14px">资源监控中，如果<span style="font-family:Times New Roman">System\Processor Queue Length</span>大于<span style="font-family:Times New Roman">2</span>，而处理器利用率（<span style="font-family:Times New Roman">Processor Time</span>）一直很低，则存在着处理器阻塞。</span><br> <span style="color:blue"><span style="font-family:Times New Roman; font-size:14px">CPU</span></span><span style="color:blue"><span style="font-size:14px">资源成为系统性能的瓶颈的征兆</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">:<br> </span></span><span style="color:blue">很慢的响应时间</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(slow response time)<br> CPU</span></span><span style="color:blue">空闲时间为零</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(zero percent idle CPU)<br> </span></span><span style="color:blue">过高的用户占用</span><span style="color:blue"><span style="font-family:Times New Roman">CPU</span></span><span style="color:blue">时间</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(high percent user CPU)<br> </span></span><span style="color:blue">过高的系统占用</span><span style="color:blue"><span style="font-family:Times New Roman">CPU</span></span><span style="color:blue">时间</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(high percent system CPU)<br> </span></span><span style="color:blue">长时间的有很长的运行进程队列</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(large run queue size sustained over time)<br> </span></span>磁盘<span style="font-family:Times New Roman">I/O</span>：</span><br> <span style="font-family:Times New Roman; font-size:14px">1 UNIX</span><span style="font-size:14px">资源监控（<span style="font-family:Times New Roman">Windows</span>操作系统同理）中指标磁盘交换率（<span style="font-family:Times New Roman">Disk rate</span>），如果该参数值一直很高，表明<span style="font-family:Times New Roman">I/O</span>有问题。可考虑更换更快的硬盘系统。</span><br> <span style="font-family:Times New Roman; font-size:14px">2 Windows</span><span style="font-size:14px">资源监控中，如果<span style="font-family:Times New Roman"> Disk Time</span>和<span style="font-family:Times New Roman">Avg.Disk Queue Length</span>的值很高，而<span style="font-family:Times New Roman">Page Reads/sec</span>页面读取操作速率很低，则可能存在磁盘瓶径。</span><br> <span style="color:blue"><span style="font-family:Times New Roman; font-size:14px">I/O</span></span><span style="color:blue"><span style="font-size:14px">资源成为系统性能的瓶颈的征兆</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman"> :<br> </span></span><span style="color:blue">过高的磁盘利用率</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(high disk utilization)<br> </span></span><span style="color:blue">太长的磁盘等待队列</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(large disk queue length)<br> </span></span><span style="color:blue">等待磁盘</span><span style="color:blue"><span style="font-family:Times New Roman">I/O</span></span><span style="color:blue">的时间所占的百分率太高</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(large percentage of time waiting for disk I/O)<br> </span></span><span style="color:blue">太高的物理</span><span style="color:blue"><span style="font-family:Times New Roman">I/O</span></span><span style="color:blue">速率</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">:large physical I/O rate(not sufficient in itself)<br> </span></span><span style="color:blue">过低的缓存命中率</span></span><span style="font-size:14px"><span style="color:blue"><span style="font-family:Times New Roman">(low buffer cache hit ratio(not sufficient in itself))<br> </span></span><span style="color:blue">太长的运行进程队列，但</span><span style="color:blue"><span style="font-family:Times New Roman">CPU</span></span><span style="color:blue">却空闲</span></span><span style="font-family:Times New Roman; font-size:14px"><span style="color:blue">(large run queue with idle CPU)<br> </span>4</span>．数据库服务器：<br> <span style="font-family:Times New Roman; font-size:14px">SQL Server</span><span style="font-size:14px">数据库：</span><br> <span style="font-family:Times New Roman; font-size:14px">1 SQLServer</span><span style="font-size:14px">资源监控中指标缓存点击率（<span style="font-family:Times New Roman">Cache Hit Ratio</span>），该值越高越好。如果持续低于<span style="font-family:Times New Roman">80%</span>，应考虑增加内存。</span><br> <span style="font-family:Times New Roman; font-size:14px">2 </span><span style="font-size:14px">如果<span style="font-family:Times New Roman">Full Scans/sec</span>（全表扫描<span style="font-family:Times New Roman">/</span>秒）计数器显示的值比<span style="font-family:Times New Roman">1</span>或<span style="font-family:Times New Roman">2</span>高，则应分析你的查询以确定是否确实需要全表扫描，以及<span style="font-family:Times New Roman">SQL</span>查询是否可以被优化。</span><br> <span style="font-family:Times New Roman; font-size:14px">3 Number of Deadlocks/sec(</span><span style="font-size:14px">死锁的数量<span style="font-family:Times New Roman">/</span>秒<span style="font-family:Times New Roman">)</span>：死锁对应用程序的可伸缩性非常有害，并且会导致恶劣的用户体验。该计数器的值必须为<span style="font-family:Times New Roman">0</span>。</span><br> <span style="font-family:Times New Roman; font-size:14px">4 Lock Requests/sec(</span><span style="font-size:14px">锁请求<span style="font-family:Times New Roman">/</span>秒<span style="font-family:Times New Roman">)</span>，通过优化查询来减少读取次数，可以减少该计数器的值。</span></p> 
<p><span style="font-family:Times New Roman; font-size:14px">Oracle</span>数据库：<br> <span style="font-family:Times New Roman; font-size:14px">1 </span><span style="font-size:14px">如果自由内存接近于<span style="font-family:Times New Roman">0</span>而且库快存或数据字典快存的命中率小于<span style="font-family:Times New Roman">0.90</span>，那么需要增加<span style="font-family:Times New Roman">SHARED_POOL_SIZE</span>的大小。</span><br> <span style="font-size:14px">快存（共享<span style="font-family:Times New Roman">SQL</span>区）和数据字典快存的命中率：</span><br> <span style="font-family:Times New Roman; font-size:14px">select(sum(pins-reloads))/sum(pins) from v$librarycache;<br> select(sum(gets-getmisses))/sum(gets) from v$rowcache;<br> </span><span style="font-size:14px"><span style="color:blue">自由内存</span><span style="color:blue"><span style="font-family:Times New Roman"> select * from v$sgastat where name=’free memory’;</span></span></span><br> <span style="font-family:Times New Roman; font-size:14px">2 </span><span style="font-size:14px"><span style="color:blue">如果数据的缓存命中率小于</span><span style="color:blue"><span style="font-family:Times New Roman">0.90</span></span><span style="color:blue">，那么需要加大</span><span style="color:blue"><span style="font-family:Times New Roman">DB_BLOCK_BUFFERS</span></span><span style="color:blue">参数的值（单位：块）</span>。</span><br> <span style="font-size:14px">缓冲区高速缓存命中率：</span><br> <span style="font-family:Times New Roman; font-size:14px">select name,value from v$sysstat where name in (‘db block gets’,<br> ‘consistent gets’,'physical reads’) ;</span></p> 
<p><span style="font-family:Times New Roman; font-size:14px">Hit Ratio = 1-(physical reads / ( db block gets + consistent gets))<br> 3 </span>如果日志缓冲区申请的值较大，则应加大<span style="font-family:Times New Roman">LOG_BUFFER</span>参数的值。<br> <span style="font-size:14px">日志缓冲区的申请情况：</span><br> <span style="font-family:Times New Roman; font-size:14px">select name,value from v$sysstat where name = ‘redo log space requests’ ;<br> 4 </span><span style="font-size:14px">如果内存排序命中率小于<span style="font-family:Times New Roman">0.95</span>，则应加大<span style="font-family:Times New Roman">SORT_AREA_SIZE</span>以避免磁盘排序。</span><br> <span style="font-size:14px">内存排序命中率：</span></p> 
<p align="left"><span style="font-family:Times New Roman; font-size:14px">    </span> </p> 
<p><span style="font-family:Times New Roman; font-size:14px"> </span></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/56e2c2c2fc3e85ad04bd36f063ca9826/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">剪不断，理不乱——数据库中主外键的关系</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8ce656de0f88b9be09fa42fc7405d511/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">表空间创建格式及属性说明</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>