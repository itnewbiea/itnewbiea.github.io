<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux——用户账号和管理 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux——用户账号和管理" />
<meta property="og:description" content="Linux——账号和权限管理 一、管理用户账号1.1 用户账号概述1.1.1 用户账号分类1.1.2 用户标识UID（User IDentity ，用户标识号）1.1.3 用户账号文件 1.2 用户账号管理1.2.1修改账号和密码期限——chage1.2.2 添加用户账号——useradd1.2.3 设置/更改用户口令——passwd1.2.4 修改用户账号属性——usermod1.2.5 删除用户账号——userdel 1.3 用户账号的初始配置 二、删除历史记录（保护密码）三、管理组账号3.1 组账号概述3.1.1 组账号文件命令3.1.2 四个字段 3.2 添加组账号—groupadd命令3.3 添加、设置、删除组成员——gpasswd3.4 删除组账号—groupdel3.5 查询用户账号所属组——groups3.6 查询当前主机的用户登陆情况——w/who/lastlog -u3.7 查询用户账号身份标识——id 四、文件/目录的权限及归属4.1 查看文件/目录的权限和归属权限：归属 4.2 设置文件和目录权限——chmod4.3 设置文件/目录归属——chown/charp4.4 umask应用 一、管理用户账号 1.1 用户账号概述 1.1.1 用户账号分类 超级用户： root用户是Linux操作系统中默认的超级用户账号，对本主机拥有最高的权限，系统中超级用户是唯一的。普通用户： 由root用户或其他管理员用户创建，拥有的权限会受到限制，一般只在用户自己的宿主目录中拥有完整权限。程序用户： 在安装Linux操作系统及部分应用程序时，会添加一些特定的低权限用户账号，这些用户一般不允许登录到系统，仅用于维持系统或某个程序的正常运行，如bin、daemon、ftp、mail等。 1.1.2 用户标识UID（User IDentity ，用户标识号） root用户账号的UID固定值0程序用户账号的UID默认为Centos5,6: 1~499，Centos7: 1~ 999普通用户的UID默认为Centos5, 6: 500~ 65535，Centos7: 1000~ 65535 1.1.3 用户账号文件 作用： 保护用户名称、宿主目录、登录shell等基本信息
每一行对应一个用户的账号记录
文件位置：
/etc/passwd ：保存用户名称、宿主目录、登录shell等基本信息/etc/shadow ：保存用户的账号、密码等有效信息每一行对应一个用户的账号记录 /etc/passwd： 超级用户root及程序用户的账号信息
基于系统运行和管理需要，所有用户都可以访问passwd文件中的内容，但是只有root用户才能修改。passwd文件的每一行内容中，包含了7个用冒号“：”分割的配置字段，从左到右各配置字段的含义分别如下述：
root:x:0:0:root:/root:bin/bash 用户账号名称用户密码占位符用户的UID号所属基本组账号的GID账号第二个root：用户描述，用户全名第三个/root;宿主目录bin/bash ：登录Shell信息（/bin/bash为可登录系统，/sbin/nologin和bin/false为禁用户登录系统）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/74a3623c9519815704582fee68eb245a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-29T00:17:43+08:00" />
<meta property="article:modified_time" content="2022-03-29T00:17:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux——用户账号和管理</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Linux——账号和权限管理</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、管理用户账号</a></li><li><ul><li><a href="#11__2" rel="nofollow">1.1 用户账号概述</a></li><li><ul><li><a href="#111__3" rel="nofollow">1.1.1 用户账号分类</a></li><li><a href="#112_UIDUser_IDentity__8" rel="nofollow">1.1.2 用户标识UID（User IDentity ，用户标识号）</a></li><li><a href="#113__12" rel="nofollow">1.1.3 用户账号文件</a></li></ul> 
   </li><li><a href="#12__60" rel="nofollow">1.2 用户账号管理</a></li><li><ul><li><a href="#121chage_61" rel="nofollow">1.2.1修改账号和密码期限——chage</a></li><li><a href="#122_useradd_87" rel="nofollow">1.2.2 添加用户账号——useradd</a></li><li><a href="#123__passwd_176" rel="nofollow">1.2.3 设置/更改用户口令——passwd</a></li><li><a href="#124_usermod_227" rel="nofollow">1.2.4 修改用户账号属性——usermod</a></li><li><a href="#125_userdel_262" rel="nofollow">1.2.5 删除用户账号——userdel</a></li></ul> 
   </li><li><a href="#13__278" rel="nofollow">1.3 用户账号的初始配置</a></li></ul> 
  </li><li><a href="#_294" rel="nofollow">二、删除历史记录（保护密码）</a></li><li><a href="#_307" rel="nofollow">三、管理组账号</a></li><li><ul><li><a href="#31__308" rel="nofollow">3.1 组账号概述</a></li><li><ul><li><a href="#311__309" rel="nofollow">3.1.1 组账号文件命令</a></li><li><a href="#312__315" rel="nofollow">3.1.2 四个字段</a></li></ul> 
   </li><li><a href="#32_groupadd_331" rel="nofollow">3.2 添加组账号—groupadd命令</a></li><li><a href="#33_gpasswd_342" rel="nofollow">3.3 添加、设置、删除组成员——gpasswd</a></li><li><a href="#34_groupdel_395" rel="nofollow">3.4 删除组账号—groupdel</a></li><li><a href="#35_groups_400" rel="nofollow">3.5 查询用户账号所属组——groups</a></li><li><a href="#36_wwholastlog_u_408" rel="nofollow">3.6 查询当前主机的用户登陆情况——w/who/lastlog -u</a></li><li><a href="#37_id_414" rel="nofollow">3.7 查询用户账号身份标识——id</a></li></ul> 
  </li><li><a href="#_422" rel="nofollow">四、文件/目录的权限及归属</a></li><li><ul><li><a href="#41__424" rel="nofollow">4.1 查看文件/目录的权限和归属</a></li><li><ul><li><a href="#_426" rel="nofollow">权限：</a></li><li><a href="#_432" rel="nofollow">归属</a></li></ul> 
   </li><li><a href="#42_chmod_440" rel="nofollow">4.2 设置文件和目录权限——chmod</a></li><li><a href="#43_chowncharp_474" rel="nofollow">4.3 设置文件/目录归属——chown/charp</a></li><li><a href="#44_umask_531" rel="nofollow">4.4 umask应用</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、管理用户账号</h2> 
<h3><a id="11__2"></a>1.1 用户账号概述</h3> 
<h4><a id="111__3"></a>1.1.1 用户账号分类</h4> 
<ul><li><strong>超级用户：</strong> root用户是Linux操作系统中<strong>默认的</strong>超级用户账号，对本主机拥有最高的权限，系统中超级用户是唯一的。</li><li><strong>普通用户：</strong> 由root用户或其他管理员用户创建，拥有的权限会受到限制，一般只在用户自己的宿主目录中拥有完整权限。</li><li><strong>程序用户：</strong> 在安装Linux操作系统及部分应用程序时，会添加一些特定的低权限用户账号，这些用户一般<strong>不允许登录到系统</strong>，仅用于维持系统或某个程序的正常运行，如bin、daemon、ftp、mail等。</li></ul> 
<h4><a id="112_UIDUser_IDentity__8"></a>1.1.2 用户标识UID（User IDentity ，用户标识号）</h4> 
<ul><li><strong>root用户账号的UID固定值0</strong></li><li>程序用户账号的UID默认为Centos5,6: 1~499，Centos7: 1~ 999</li><li>普通用户的UID默认为Centos5, 6: 500~ 65535，Centos7: 1000~ 65535</li></ul> 
<h4><a id="113__12"></a>1.1.3 用户账号文件</h4> 
<p><strong>作用：</strong> 保护用户名称、宿主目录、登录shell等基本信息<br>            每一行对应一个用户的账号记录<br> <strong>文件位置：</strong></p> 
<ul><li>/etc/passwd ：保存用户名称、宿主目录、登录shell等基本信息</li><li>/etc/shadow ：保存用户的账号、密码等有效信息</li><li>每一行对应一个用户的账号记录</li></ul> 
<p><strong>/etc/passwd：</strong> 超级用户root及程序用户的账号信息<br> <img src="https://images2.imgbox.com/e3/1e/EewhO7tD_o.png" alt="在这里插入图片描述"><br> 基于系统运行和管理需要，所有用户都可以访问passwd文件中的内容，但是只有root用户才能修改。passwd文件的每一行内容中，包含了7个用冒号“：”分割的配置字段，从左到右各配置字段的含义分别如下述：</p> 
<pre><code class="prism language-bash">root:x:0:0:root:/root:bin/bash
</code></pre> 
<ol><li>用户账号名称</li><li>用户密码占位符</li><li>用户的UID号</li><li>所属基本组账号的GID账号</li><li>第二个root：用户描述，用户全名</li><li>第三个/root;宿主目录</li><li>bin/bash ：登录Shell信息（/bin/bash为可登录系统，/sbin/nologin和bin/false为禁用户登录系统）<br> <img src="https://images2.imgbox.com/82/fc/ofmTe013_o.png" alt="在这里插入图片描述"></li></ol> 
<p><strong>/etc/shadow:</strong> 各用户账号的密码信息<br> shadow文件又被称为“影子文件”，其中保存有各用户账号的密码信息，默认只有root用户能够读取文件中的内容，而不允许直接编辑该文件的内容。<br> <img src="https://images2.imgbox.com/d2/a9/XOdHDpts_o.png" alt="在这里插入图片描述"><br> shadow文件的每一行内容中，包含了7个用冒号“：”分割的配置字段，从左到右各配置字段的含义分别如下述：</p> 
<pre><code class="prism language-bash">root:<span class="token variable">$6</span><span class="token variable">$H9GTEb2qZL3lhJZd</span><span class="token variable">$Y0HeF0G</span>.szysNM3OZ/2ZyiiNU888yUhCuqcVUps9yQ3.cX4oGY8qNBAcSraTkZWn25KM.TdOXotNn9y8wyKAr0::0:99999:7:::
</code></pre> 
<ul><li>字段1：用户账号的<strong>名称</strong>； （root）</li><li>字段2：使用SHA512加密的密码字串信息，<strong>当为“*”或“！！”时表示此用户不能登陆到系统</strong>。若该字段内容为空，则该用户无需密码即可登录</li><li>字段3：<strong>上次修改密码时间</strong>，表示从1970年01月01日算起到最近一次修改密码是间隔的天数；</li><li>字段4：，密码的<strong>最短有效天数</strong>，自本次修改密码后，必须至少经过该天数才能再次修改密码。默认值为0，表示不进行限时；</li><li>字段5：</li><li>字段6：<strong>提前多少天警告用户密码将过期</strong>，默认值为7；每次登录系统都会向用户发出修改密码警告；</li><li>字段7：在<strong>密码过期多少天之后禁用此用户</strong>；</li><li>字段8：<strong>账年号失效时间</strong>，此字段指定了用户作废的天数（从1970年01月01日起计算），默认值为空，表示账号永久可用；</li><li>字段9：“保留字段（未使用）”，没有特殊用途。<br> <img src="https://images2.imgbox.com/27/72/SjfnzhTB_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="12__60"></a>1.2 用户账号管理</h3> 
<h4><a id="121chage_61"></a>1.2.1修改账号和密码期限——chage</h4> 
<p><img src="https://images2.imgbox.com/d7/b5/qnqmCkY9_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th>总结</th><th></th><th></th></tr></thead><tbody><tr><td>第一字段</td><td>密码最后一次修改时间</td><td>chage -d</td></tr><tr><td>第四字段</td><td>密码最小修改间隔时间</td><td>chage -m</td></tr><tr><td>第五字段</td><td>密码的有效期</td><td>chage -M</td></tr><tr><td>第六字段</td><td>密码需要变更前的警告天数</td><td>chage -w</td></tr><tr><td>第七字段</td><td>密码过期后的宽限天数</td><td>chage -I</td></tr><tr><td>第八字段</td><td>账号失效时间</td><td>chage -E</td></tr></tbody></table> 
<blockquote> 
 <p>chage范例</p> 
 <p><img src="https://images2.imgbox.com/91/5f/Yy8vrDDc_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/01/b0/YTtqq5KZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9e/0a/2yw0oEjt_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/dc/d1/Rm0MQrnR_o.png" alt="在这里插入图片描述"></p> 
 <ul><li><strong>设置时间</strong><br> <img src="https://images2.imgbox.com/be/ee/JN3xwjAw_o.png" alt="在这里插入图片描述"></li></ul> 
</blockquote> 
<ul><li>如果普通用户忘记密码的时候怎么办呢？<br> <img src="https://images2.imgbox.com/6c/3e/qZVO6PH7_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="122_useradd_87"></a>1.2.2 添加用户账号——useradd</h4> 
<p><img src="https://images2.imgbox.com/92/ee/Y0gKfTdu_o.png" alt="在这里插入图片描述"></p> 
<p>使用useradd添加账户完成以下任务：</p> 
<ul><li>在/etc/passwd 文件和/etc/shadow 文件的末尾增加该用户账号的记录</li><li>若未明确指定用户的宿主目录，则在/home 目录下自动创建与该用户账号同名的宿主目录，并在该目录建立用户的各种初始配置文件</li><li>若没有明确指定用户所属的主，则自动创建与该用户账号同名的基本组账号，组账号的记录信息将保存到/etc/group和/etc/shadow 文件中</li></ul> 
<table><thead><tr><th>选项</th><th>作用</th></tr></thead><tbody><tr><td>-u</td><td>指定用户的UID号，要求该UID号码未被其他用户使用</td></tr><tr><td>-d</td><td>指定用户的宿主目录位置（当与-M一起使用时，不生效）只能用绝对路径指定目录，且不需要实现创建目录</td></tr><tr><td>-e</td><td>指定用户的账户失效时间，，可使用YYYY-MM-DD的日期格式</td></tr><tr><td>-g</td><td>指定用户的基本组名（或使用GID号），对应的组名必须存在</td></tr><tr><td>-G</td><td>指定用户的附加组名（或使用GID号）对应的组名必须存在</td></tr><tr><td>-M</td><td>不建立宿主目录（一般用于系统用户账号）</td></tr><tr><td>-s</td><td>指定用户的登录shell（比如/bin/bash为可登录系统，/sbin/nologin和/bin/false为禁止用户登录系统）</td></tr></tbody></table> 
<p><img src="https://images2.imgbox.com/1d/8b/W8pZeSqO_o.png" alt="在这里插入图片描述"><br> <strong>useradd 创建用户</strong></p> 
<pre><code>[root@kiro kiro]# useradd xuet     //添加一个名为xuet的用户
[root@kiro kiro]# tail -1 /etc/passwd        //查看/etc下paswwd文件最后一行
xuet:x:1003:1003::/home/xuet:/bin/bash
[root@kiro kiro]# tail -1 /etc/shadow         //查看/etc 下shadow文件最后一行
xuet:!!:19077:0:99999:7:::            //以xuet开头代表创建成功

[root@kiro kiro]# cd /home       //所有的用户都是在/home里边
[root@kiro home]# ls            //查看xuet用户是否在里边
kiro  ky17  ky18  ky19  pengxw  xuet   
[root@kiro home]# cd xuet        //进入xuet用户
[root@kiro xuet]# ls       //查看到无文件
[root@kiro xuet]# ls -a           //-a   遍历所有文件和目录，可查询隐藏文件
.  ..  .bash_logout  .bash_profile  .bashrc  .mozilla
[root@kiro xuet]# ls -A           //不包括当前和上一层目录
.bash_logout  .bash_profile  .bashrc  .mozilla
</code></pre> 
<br> 
<p><strong>useadd -u</strong> 指定用户的UID号，要求未被使用</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro home<span class="token punctuation">]</span><span class="token comment"># useradd -u 2000 xuet3   //创建xuet3新用户，UID号为2000</span>
<span class="token punctuation">[</span>root@kiro home<span class="token punctuation">]</span><span class="token comment"># id xuet3     //查看xuet</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">(</span>xuet3<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">(</span>xuet3<span class="token punctuation">)</span> 组<span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">(</span>xuet3<span class="token punctuation">)</span>  
// <span class="token environment constant">UID</span>为2000，GID默认与<span class="token environment constant">UID</span>相同
</code></pre> 
<br> **useadd -d** 指定用户宿主目录位置 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># useradd -d /opt/xt xuet6</span>
<span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># tail -1 /etc/passwd</span>
xuet6:x:2004:2004::/opt/xt:/bin/bash

</code></pre> 
<br> 
<p><strong>useradd -e</strong> 指定用户的失效时间</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># useradd -e 2022-04-27 niangao  //添加普通用户niangao</span>
<span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># tail -1 /etc/shadow     //查看影子文件shadow最后一行</span>
niangao:<span class="token operator">!</span><span class="token operator">!</span>:19077:0:99999:7::19109:
// 显示第八字段；账号失联时间为19077天，从1970年linux建立开始
</code></pre> 
<br> 
<p><strong>useradd -g/-G</strong> 指定用户的基本组名/附加组名</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># useradd -g xuet3 ngng    </span>
//添加普通用户名称为ngng,指定用户基本组名xuet3，指定属组必须存在
<span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># id ngng</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">2007</span><span class="token punctuation">(</span>ngng<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">(</span>xuet3<span class="token punctuation">)</span> 组<span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">(</span>xuet3<span class="token punctuation">)</span>
<span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># tail -1 /etc/passwd</span>
ngng:x:2007:2000::/home/ngng:/bin/bash

<span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># useradd -G niangao ngng2</span>
<span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># id ngng2</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">2008</span><span class="token punctuation">(</span>ngng2<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">2008</span><span class="token punctuation">(</span>ngng2<span class="token punctuation">)</span> 组<span class="token operator">=</span><span class="token number">2008</span><span class="token punctuation">(</span>ngng2<span class="token punctuation">)</span>,2006<span class="token punctuation">(</span>niangao<span class="token punctuation">)</span>
</code></pre> 
<br> 
<p><strong>useradd -M</strong> 不建立属组目录<br> <img src="https://images2.imgbox.com/da/5f/itBMF2Sz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="123__passwd_176"></a>1.2.3 设置/更改用户口令——passwd</h4> 
<ul><li>root用户可以指定用户名作为参数，对指定账号的密码进行管理；不指定用户名时，修改当前账号的密码。</li><li>普通用户却只能执行单独的"passwd"命令修改自己的密码。</li></ul> 
<p><img src="https://images2.imgbox.com/0f/cf/i7pFiPpV_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>普通用户直接修改密码</strong></li></ul> 
<p><img src="https://images2.imgbox.com/71/4f/GTtRxRyt_o.png" alt="在这里插入图片描述"></p> 
<ul><li>有两个“！！”表示还未设置密码，不可登陆</li></ul> 
<p><img src="https://images2.imgbox.com/10/b4/DCBfcl87_o.png" alt="在这里插入图片描述"></p> 
<p><strong>常用选项</strong></p> 
<table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td>-d</td><td>清空指定用户的密码，仅使用用户名即可登录系统</td></tr><tr><td>-l</td><td>锁定用户账户，锁定的用户账号将无法再登录系统</td></tr><tr><td>-S</td><td>查看用户账户的状态(是否被锁定)</td></tr><tr><td>-u</td><td>解锁用户账户</td></tr></tbody></table> 
<blockquote> 
 <p>清空指定用户密码 passwd -d<br> <img src="https://images2.imgbox.com/c1/c8/LN8ngpqe_o.png" alt="在这里插入图片描述"><br> <br><br> 锁定用户 passwd -l<br> <img src="https://images2.imgbox.com/04/4a/Tj9DFOhb_o.png" alt="在这里插入图片描述"><br> <br><br> 查看用户是否被锁定 passwd -S<br> <img src="https://images2.imgbox.com/22/43/YMThn3Yl_o.png" alt="在这里插入图片描述"><br> <br><br> 解锁用户 passwd -u<br> <img src="https://images2.imgbox.com/ac/43/FyPdt0cv_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<br> 
<p><strong>设置密码</strong><br> <img src="https://images2.imgbox.com/a8/2f/PzKu1H8e_o.png" alt="在这里插入图片描述"></p> 
<p><strong>eg:</strong><br> <img src="https://images2.imgbox.com/06/61/RQ49JpFC_o.png" alt="在这里插入图片描述"></p> 
<br> 
<h4><a id="124_usermod_227"></a>1.2.4 修改用户账号属性——usermod</h4> 
<p><img src="https://images2.imgbox.com/81/de/21aY8cDV_o.png" alt="在这里插入图片描述"></p> 
<p><strong>常用格式</strong></p> 
<table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td>-u</td><td>修改用户的UID号</td></tr><tr><td>-d</td><td>修改用户的宿主目录位置</td></tr><tr><td>-e</td><td>指定用户的账户失效时间，，可使用YYYY-MM-DD的日期格式</td></tr><tr><td>-g</td><td>指定用户的基本组名（或使用GID号）</td></tr><tr><td>-G</td><td>指定用户的附加组名（或使用GID号）</td></tr><tr><td>-s</td><td>指定用户的登录shell （/sbin/nologin 和/sbin/false未禁止用户登录系统）</td></tr><tr><td></td><td>以上和useradd相同</td></tr><tr><td>-l（小写的L）</td><td>更改用户账号的登录名称</td></tr><tr><td>-L</td><td>锁定用户账户</td></tr><tr><td>-u(passws)</td><td>解锁用户账户</td></tr></tbody></table> 
<blockquote> 
 <p>修改名称 <strong>usermod -l</strong> 新名称 旧名称<br> <img src="https://images2.imgbox.com/69/aa/C7iVYZN5_o.png" alt="在这里插入图片描述"><br> <br><br> 修改用户uid号 <strong>usermod -u</strong><br> <img src="https://images2.imgbox.com/c8/7f/kVQGMkd0_o.png" alt="在这里插入图片描述"><br> <br><br> 锁定账户 <strong>usermod -L</strong> (查看是否锁定 passwd -S)<br> <img src="https://images2.imgbox.com/66/8c/AHpcK1gU_o.png" alt="在这里插入图片描述"><br> 解锁账户 <strong>passwd -u</strong> 用户<br> <img src="https://images2.imgbox.com/49/da/X7vgSh0Y_o.png" alt="在这里插入图片描述"><br><br> 修改账户基本组(-g)和附加组(-G)<br> <strong>wheel 比root权限小 比用户权限大</strong><br> <img src="https://images2.imgbox.com/bf/3c/wY357sDp_o.png" alt="在这里插入图片描述"><br> <br><br> 修改shell登陆<br> <img src="https://images2.imgbox.com/09/53/jkw5j5kJ_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h4><a id="125_userdel_262"></a>1.2.5 删除用户账号——userdel</h4> 
<p><img src="https://images2.imgbox.com/1b/cf/DcirMFSI_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td>-r</td><td>添加此选项时，可将该用户的宿主目录一并删除</td></tr></tbody></table> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro ~<span class="token punctuation">]</span><span class="token comment"># useradd xuet   //添加名为xuet的新用户</span>
<span class="token punctuation">[</span>root@kiro ~<span class="token punctuation">]</span><span class="token comment"># ls /home    //展示家目录中的用户</span>
kiro  kiro1  ky19  pengxw  xuet    //可以看到xuet在家目录里
<span class="token punctuation">[</span>root@kiro ~<span class="token punctuation">]</span><span class="token comment"># userdel -r xuet    //使用userdel命令删掉xuet</span>
<span class="token punctuation">[</span>root@kiro ~<span class="token punctuation">]</span><span class="token comment"># ls /home      //再次展示家目录</span>
kiro  kiro1  ky19  pengxw     //用户xuet已经不在了
</code></pre> 
<h3><a id="13__278"></a>1.3 用户账号的初始配置</h3> 
<ul><li><strong>文件来源</strong></li></ul> 
<blockquote> 
 <p>新建用户帐号时，从 <strong>/etc/skel</strong> 目录中复制而来，基本上都是隐藏文件比如默认bin/bash，默认家目录<br> <img src="https://images2.imgbox.com/b5/4f/L70iK4WM_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<ul><li>主要用户的初始配置文件（只针对用户）</li></ul> 
<table><thead><tr><th>文件名</th><th>说明</th></tr></thead><tbody><tr><td>.bash_profile</td><td>这个文件是为系统全局变量配置文件，可以通过重启系统或者执行source /etc/profile 命令使profile文件被读取</td></tr><tr><td></td><td>修改/etc/profile文件中相关配置，切换bash或者用户后都需要source /etc/profile才生效</td></tr><tr><td>.bashrc</td><td>这个文件实际上是/etc/profile的子目录，存放的是一些应用程序所需的启动脚本</td></tr><tr><td>.bash_logout</td><td>每一个允许bash shell 的用户都会执行此文件，可通过执行bash命令打开一个新的bash shell时，使bashrc文件被读取</td></tr><tr><td></td><td>修改/etc/bashrc文件中相关配置，切换bash或者用户后直接生效</td></tr></tbody></table> 
<h2><a id="_294"></a>二、删除历史记录（保护密码）</h2> 
<table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td>huistory -c</td><td>清除历史记录</td></tr><tr><td>history -r /root/history.txt</td><td>把命令度进来当做bash历史记录</td></tr><tr><td>history -w /root/history.txt</td><td>把当前bash的历史记录写入history.txt</td></tr><tr><td>echo “history -c”&gt;&gt; ~/.bash_logout</td><td></td></tr><tr><td>echo “history -c”&gt;&gt; ~/.bash_profile</td><td></td></tr></tbody></table> 
<p><img src="https://images2.imgbox.com/e3/5a/IA9mvx6W_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3e/92/DayYiYjQ_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_307"></a>三、管理组账号</h2> 
<h3><a id="31__308"></a>3.1 组账号概述</h3> 
<h4><a id="311__309"></a>3.1.1 组账号文件命令</h4> 
<table><thead><tr><th>文件名</th><th>说明</th></tr></thead><tbody><tr><td>/etc/group</td><td>保存组帐号基本信息</td></tr><tr><td>/etc/gshadow</td><td>保存组帐号的密码信息</td></tr></tbody></table> 
<h4><a id="312__315"></a>3.1.2 四个字段</h4> 
<pre><code>[root@kiro /]# tail -1 /etc/group   //查看组账户基本信息最后一行
user2:x:10009:
</code></pre> 
<table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>字段1</td><td>组帐号的名称</td></tr><tr><td>字段2</td><td>占位符"x"</td></tr><tr><td>字段3</td><td>组账号的GID号</td></tr><tr><td>字段4</td><td>组账号包含的用户成员(一般不包括基本组对应的用户帐号) ，多个成员之间以逗号"，"分隔</td></tr></tbody></table> 
<p><img src="https://images2.imgbox.com/cb/30/Kz5JVz63_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_groupadd_331"></a>3.2 添加组账号—groupadd命令</h3> 
<p><img src="https://images2.imgbox.com/d9/85/fwJGHDYk_o.png" alt="在这里插入图片描述"></p> 
<p><strong>groupadd -g GID 组名</strong></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># groupadd -g 1997 8zu  //添加一个uid为1997，名为8zu的组账号</span>
<span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># tail  -2 /etc/group  //查看组账号基本信息</span>
moxian:x:10003:  
8zu:x:1997:    //找到了 8zu
</code></pre> 
<h3><a id="33_gpasswd_342"></a>3.3 添加、设置、删除组成员——gpasswd</h3> 
<p><img src="https://images2.imgbox.com/c6/21/4WC2Lv63_o.png" alt="在这里插入图片描述"></p> 
<p>设置组账户密码；管理用户成员，添加/删除组成员:</p> 
<table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td>-a</td><td>向组内添加一个用户</td></tr><tr><td>-d</td><td>从组内删除一个用户成员</td></tr><tr><td>-M</td><td>定义组成员列表，以逗号分隔</td></tr></tbody></table> 
<br> 
<p><strong>gpasswd -a 用户名 组名</strong></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># gpasswd -a zhangzh 8zu     </span>
正在将用户“zhangzh”加入到“8zu”组中
<span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># gpasswd -a yaor 8zu</span>
正在将用户“yaor”加入到“8zu”组中
<span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># tail -5 /etc/group   //查看组账号基本信息最后5行</span>
8zu:x:1997:zhangzh,yaor     //账户zhangzh成功添加到组账户8zu
zhangzh:x:10004:
yaor:x:10005:
yuy:x:10006:
yangs:x:10007:
</code></pre> 
<br> 
<p><strong>gpasswd -d 用户名 组名 //删除命令</strong></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># gpasswd -d yaor 8zu</span>
正在将用户“yaor”从“8zu”组中删除
<span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># tail -5 /etc/group   //查看组账户基本信息最后5行</span>
8zu:x:1997:zhangzh     //yaor已经成功从组账户8zu删除
zhangzh:x:10004:
yaor:x:10005:
yuy:x:10006:
yangs:x:10007:
</code></pre> 
<br> 
<p><strong>gpasswd -M 用户1 用户2 组名</strong> （重新定义，之前的组员会消失）</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># useradd user1  //建立用户user1</span>
<span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># useradd user2   //建立用户user2</span>
<span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># </span>
<span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># gpasswd -M user1,user2 8zu   //重新定义组成员列表</span>
<span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># tail -10 /etc/group</span>
pengxw:x:10001:
test1:x:10002:
moxian:x:10003:
8zu:x:1997:user1,user2  //已经重新定义 之前的用户都没有了
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre> 
<h3><a id="34_groupdel_395"></a>3.4 删除组账号—groupdel</h3> 
<p><img src="https://images2.imgbox.com/fa/28/KK9HF4HT_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/7d/33/5PhUOHbk_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="35_groups_400"></a>3.5 查询用户账号所属组——groups</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># groups zhangzh</span>
zhangzh <span class="token builtin class-name">:</span> zhangzh
<span class="token punctuation">[</span>root@kiro /<span class="token punctuation">]</span><span class="token comment"># groups user1</span>
user1 <span class="token builtin class-name">:</span> user1 8zu
</code></pre> 
<h3><a id="36_wwholastlog_u_408"></a>3.6 查询当前主机的用户登陆情况——w/who/lastlog -u</h3> 
<p><img src="https://images2.imgbox.com/e2/b6/gfWqy1oy_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="37_id_414"></a>3.7 查询用户账号身份标识——id</h3> 
<p><img src="https://images2.imgbox.com/3f/dc/R5IhopBW_o.png" alt="在这里插入图片描述"></p> 
<pre><code>[root@kiro /]# id user1
uid=10008(user1) gid=10008(user1) 组=10008(user1),1997(8zu)
</code></pre> 
<h2><a id="_422"></a>四、文件/目录的权限及归属</h2> 
<h3><a id="41__424"></a>4.1 查看文件/目录的权限和归属</h3> 
<p><img src="https://images2.imgbox.com/e3/2a/hqc98KxW_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_426"></a>权限：</h4> 
<table><thead><tr><th>访问权限</th><th>说明</th></tr></thead><tbody><tr><td>读取r</td><td>允许查看文件内容、显示目录列表</td></tr><tr><td>写入w</td><td>允许修改文件内容，允许在目录中新建、移动、删除文件或子目录</td></tr><tr><td>可执行x</td><td>允许运行程序、切换目录</td></tr></tbody></table> 
<h4><a id="_432"></a>归属</h4> 
<table><thead><tr><th>归属（所有权）</th><th>说明</th></tr></thead><tbody><tr><td>属主</td><td>拥有该文件或目录的用户账号</td></tr><tr><td>属组</td><td>拥有该文件或目录的组账号</td></tr></tbody></table> 
<h3><a id="42_chmod_440"></a>4.2 设置文件和目录权限——chmod</h3> 
<p><img src="https://images2.imgbox.com/2f/f7/hRSlLiT2_o.png" alt="在这里插入图片描述"><br> 关于 <strong>[ugoa]</strong>:</p> 
<ul><li>‘u’ 代表文件属性</li><li>‘g’ 代表文件属组内的用户</li><li>‘o’ 代表其他任何用户</li><li>‘a’ 代表所有用户</li></ul> 
<p>关于 <strong>[±=]</strong> :</p> 
<ul><li>‘+’ 代表增加相应权限</li><li>‘-’ 代表减少相应权限</li><li>‘=’ 代表仅设置对应的权限</li></ul> 
<p><img src="https://images2.imgbox.com/08/fa/hTDCJsRH_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/97/70/AQ1R81QY_o.png" alt="在这里插入图片描述"><br> 注：八进制数字</p> 
<ul><li> <p>常用选项： -R：递归修改指定目录下所有子项的权限</p> </li><li> <p>读取 r ：允许查看文件的内容、显示目录列表<br> 写入 w ：允许修改文件内容，允许在目录中新建、移动、删除文件或子目录<br> 可执行 x ：允许运行程序、切换目录。</p> </li><li> <p>“rwx”是权限的字符组合形式，也可以拆分使用，如“r”、“rx”等。</p> </li></ul> 
<blockquote> 
 <p>字符类型：<br> <img src="https://images2.imgbox.com/c7/c9/cYpc4rO9_o.png" alt="在这里插入图片描述"><br> <br><br> 数字类型：<br> <img src="https://images2.imgbox.com/08/e5/x0uYO9uV_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h3><a id="43_chowncharp_474"></a>4.3 设置文件/目录归属——chown/charp</h3> 
<p><img src="https://images2.imgbox.com/1a/19/wFxXq2fs_o.png" alt="在这里插入图片描述"><br> 常用选项： -R 递归修改指定目录下所有子项的权限</p> 
<ul><li>属主的设置</li></ul> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># chown user1 1.txt  //属主user1 文件1.txt</span>
<span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># ll -h</span>
总用量 <span class="token number">0</span>
drwxr-xr-x. <span class="token number">2</span> root  root <span class="token number">6</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:07 <span class="token number">1</span>
-rw-r--r--. <span class="token number">1</span> user1 root <span class="token number">0</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:06 <span class="token number">1</span>.txt //1.txt修改归属成功 属主为user1
drwxr-xr-x. <span class="token number">2</span> root  root <span class="token number">6</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:07 <span class="token number">2</span>
-rw-r--r--. <span class="token number">1</span> root  root <span class="token number">0</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:06 <span class="token number">2</span>.txt
drwxr-xr-x. <span class="token number">2</span> root  root <span class="token number">6</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:07 <span class="token number">3</span>
-rw-r--r--. <span class="token number">1</span> root  root <span class="token number">0</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:06 <span class="token number">3</span>.txt
drwxr-xr-x. <span class="token number">2</span> root  root <span class="token number">6</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:07 kiro
-rw-r--r--. <span class="token number">1</span> root  root <span class="token number">0</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:06 kiro.txt
drwxr-xr-x. <span class="token number">2</span> root  root <span class="token number">6</span> <span class="token number">10</span>月 <span class="token number">31</span> <span class="token number">2018</span> rh

</code></pre> 
<ul><li>属组的设置</li></ul> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># chown :user2 2.txt  //设置文件2.txt的属组为user3</span>
<span class="token punctuation">[</span>root@kiro opt<span class="token punctuation">]</span><span class="token comment"># ll -h</span>
总用量 <span class="token number">0</span>
drwxr-xr-x. <span class="token number">2</span> root  root  <span class="token number">6</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:07 <span class="token number">1</span>
-rw-r--r--. <span class="token number">1</span> user1 root  <span class="token number">0</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:06 <span class="token number">1</span>.txt
drwxr-xr-x. <span class="token number">2</span> root  root  <span class="token number">6</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:07 <span class="token number">2</span>
-rw-r--r--. <span class="token number">1</span> root  user2 <span class="token number">0</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:06 <span class="token number">2</span>.txt  //设置成功 <span class="token number">2</span>.txt的属组为user2
drwxr-xr-x. <span class="token number">2</span> root  root  <span class="token number">6</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:07 <span class="token number">3</span>
-rw-r--r--. <span class="token number">1</span> root  root  <span class="token number">0</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:06 <span class="token number">3</span>.txt
drwxr-xr-x. <span class="token number">2</span> root  root  <span class="token number">6</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:07 kiro
-rw-r--r--. <span class="token number">1</span> root  root  <span class="token number">0</span> <span class="token number">3</span>月  <span class="token number">27</span> <span class="token number">17</span>:06 kiro.txt
drwxr-xr-x. <span class="token number">2</span> root  root  <span class="token number">6</span> <span class="token number">10</span>月 <span class="token number">31</span> <span class="token number">2018</span> rh
</code></pre> 
<ul><li>设置属主和属组</li></ul> 
<pre><code>[root@kiro opt]# chown user3:user3 3.txt     //设置3.txt的属主和属组
[root@kiro opt]# ll
总用量 0
drwxr-xr-x. 2 root  root  6 3月  27 17:07 1
-rw-r--r--. 1 user1 root  0 3月  27 17:06 1.txt
drwxr-xr-x. 2 root  root  6 3月  27 17:07 2
-rw-r--r--. 1 root  user2 0 3月  27 17:06 2.txt
drwxr-xr-x. 2 root  root  6 3月  27 17:07 3
-rw-r--r--. 1 user3 user3 0 3月  27 17:06 3.txt    // 3.txt的属主和属组建立成功
drwxr-xr-x. 2 root  root  6 3月  27 17:07 kiro
-rw-r--r--. 1 root  root  0 3月  27 17:06 kiro.txt
drwxr-xr-x. 2 root  root  6 10月 31 2018 rh
</code></pre> 
<h3><a id="44_umask_531"></a>4.4 umask应用</h3> 
<p>新建一个新的文件或者目录时，它的默认权限时什么呢，这个与umask有关：</p> 
<ul><li>设置目录和文件的默认权限；</li><li>指定目前用户在新建文件或目录时的权限默认值；</li><li>新建的文件或者目录的权限为默认最大权限减去umask（普通文件的最大默认权限为6，目录的最大默认权限为7）</li></ul> 
<p><img src="https://images2.imgbox.com/5f/9c/ngpuJpaI_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5ae07e6371daaaf6d4b6ea504202f3f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mongodb:安装教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3190179f3fc5791415d5fe684732704a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【git】git冲突解决详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>