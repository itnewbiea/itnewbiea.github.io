<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>多表联查（多表连接）（join） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="多表联查（多表连接）（join）" />
<meta property="og:description" content="多表联查（多表连接）（join）
1、 分类
内连接、自然连接、外链接（左外连接、右外连接、全外连接（mysql不支持））
2、 内连接 inner join（等值连接，制定对应的等值条件）
SELECT * FROM emp,dept;/*得到的数据是不对的*/
得到的数据叫做笛卡尔积：结果是两个表数据的乘积
使用内连接去查
SELECT * FROM emp INNER JOIN dept;
结果依然是笛卡尔积，是因为我们没有制定对应的等值条件
SELECT * FROM emp e INNER JOIN dept d WHERE e.deptno = d.deptno;
/*emp.deptno和dept.deptno这样的写法叫做：完全限定名
两个表中有相同的字段，类似于A村有个老张家，孩子叫张三
B村也有一个老张家，孩子也叫张三，
如果没有用到多表联查，就没有必要使用完全限定名，类似于
A村老张家的爸爸说，张三，吃饭了，指的是自己的孩子
用到了夺标联查，两家在一起，A村的老张家的爸爸说：张三，吃饭了
这个张三指的是谁？（不一定）
*/
提示：一般来讲，我们不使用内连接，因为效率低。用外链接
标准写法：select * from 表1 别名1 inner join 表2 别名2 where 别名1.xxx = 别名2.xxx;
SELECT * FROM emp e INNER JOIN dept d WHERE e.deptno = d." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c5c027c1b3ca8977df2fab4397184f66/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-03-12T17:43:47+08:00" />
<meta property="article:modified_time" content="2018-03-12T17:43:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">多表联查（多表连接）（join）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p align="center"><strong><span style="font-family:'宋体';">多表联查</span><span style="font-family:'宋体';">（多表连接）（</span>join<span style="font-family:'宋体';">）</span></strong></p> 
<p>1、 分类</p> 
<p><span style="font-family:'宋体';">内连接、自然连接、外链接（左外连接、右外连接、全外连接（</span>mysql<span style="font-family:'宋体';">不支持））</span></p> 
<p>2、 <span style="font-family:'宋体';">内连接</span> inner join<span style="font-family:'宋体';">（等值连接，制定对应的等值条件）</span></p> 
<p>SELECT * FROM emp,dept;/*<span style="font-family:'宋体';">得到的数据是不对的</span><span style="font-family:Calibri;">*/</span></p> 
<p>得到的数据叫做笛卡尔积：结果是两个表数据的乘积</p> 
<p>使用内连接去查</p> 
<p>SELECT * FROM emp INNER JOIN dept;</p> 
<p>结果依然是笛卡尔积，是因为我们没有制定对应的等值条件</p> 
<p>SELECT * FROM emp e INNER JOIN dept d WHERE e.deptno = d.deptno;</p> 
<p>/*emp.deptno<span style="font-family:'宋体';">和</span><span style="font-family:Calibri;">dept.deptno</span><span style="font-family:'宋体';">这样的写法叫做：完全限定名</span></p> 
<p><span style="font-family:'宋体';">两个表中有相同的字段，类似于</span>A<span style="font-family:'宋体';">村有个老张家，孩子叫张三</span></p> 
<p>B<span style="font-family:'宋体';">村也有一个老张家，孩子也叫张三，</span></p> 
<p>如果没有用到多表联查，就没有必要使用完全限定名，类似于</p> 
<p>A<span style="font-family:'宋体';">村老张家的爸爸说，张三，吃饭了，指的是自己的孩子</span></p> 
<p><span style="font-family:'宋体';">用到了夺标联查，两家在一起，</span>A<span style="font-family:'宋体';">村的老张家的爸爸说：张三，吃饭了</span></p> 
<p>这个张三指的是谁？（不一定）</p> 
<p>*/</p> 
<p>提示：一般来讲，我们不使用内连接，因为效率低。用外链接</p> 
<p><span style="font-family:'宋体';">标准写法：</span>select * from <span style="font-family:'宋体';">表</span><span style="font-family:Calibri;">1 </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">1 inner join </span><span style="font-family:'宋体';">表</span><span style="font-family:Calibri;">2 </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">2 where </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">1.xxx = </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">2.xxx;</span></p> 
<p>SELECT * FROM emp e INNER JOIN dept d WHERE e.deptno = d.deptno;</p> 
<p> </p> 
<p><span style="font-family:'宋体';">方言写法</span>:select * from <span style="font-family:'宋体';">表</span><span style="font-family:Calibri;">1 </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">1</span><span style="font-family:'宋体';">，表</span><span style="font-family:Calibri;">2</span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">2 where</span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">1.xxx = </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">2.xxx;</span></p> 
<p>SELECT * FROM emp e,dept d WHERE e.deptno = d.deptno;</p> 
<p> </p> 
<p>3、 <span style="font-family:'宋体';">自然连接</span> natural<span style="font-family:'宋体';">（不需要指定等值条件）</span></p> 
<p>select * from <span style="font-family:'宋体';">表</span><span style="font-family:Calibri;">1 </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">1 natural join </span><span style="font-family:'宋体';">表</span><span style="font-family:Calibri;">2 </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">2</span><span style="font-family:'宋体';">；</span></p> 
<p>4、 外链接（难点）</p> 
<p><span style="font-family:'宋体';">左外：</span>select * from <span style="font-family:'宋体';">表</span><span style="font-family:Calibri;">1 </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">1 left [ outer ] join </span><span style="font-family:'宋体';">表</span><span style="font-family:Calibri;">2 </span><span style="font-family:'宋体';">别名</span><span style="font-family:Calibri;">2 on </span><span style="font-family:'宋体';">等值条件；</span></p> 
<p>SELECT * FROM emp e LEFT OUTER JOIN dept d ON e.deptno = d.deptno;</p> 
<p><span style="font-family:'宋体';">左外的意思是：左表的记录无论是否满足条件，都会被查出来，而右表的记录只有满足条件的，才会被查出来。（左表中数据在右表中如果不存在，则右表的字段值为</span>null<span style="font-family:'宋体';">）</span></p> 
<p>理解左外右外：</p> 
<p>先看两个表数据：</p> 
<p> <img src="https://images2.imgbox.com/75/bd/6U5XGx7E_o.png" alt=""></p> 
<p> <img src="https://images2.imgbox.com/50/f6/n85goZI8_o.png" alt=""></p> 
<p>/*<span style="font-family:'宋体';">左外</span><span style="font-family:Calibri;">*/</span></p> 
<p>SELECT * FROM table1 t1 LEFT JOIN table2 t2 ON t1.id = t2.id;</p> 
<p> <img src="https://images2.imgbox.com/11/e7/XEvv2rlN_o.png" alt=""></p> 
<p><span style="font-family:'宋体';">左外连接是以左边的表为基准。通俗的讲，先把左表的数据全都显示出来，然后右边的表</span>id<span style="font-family:'宋体';">与左边表的</span><span style="font-family:Calibri;">id</span><span style="font-family:'宋体';">的值是一样的，就拼接上去，比如说上面的</span><span style="font-family:Calibri;">id=1</span><span style="font-family:'宋体';">的数据，就拼接了。</span></p> 
<p><span style="font-family:'宋体';">如果没有匹配的，比如说</span>id=2<span style="font-family:'宋体';">的数据，右边没有，用</span><span style="font-family:Calibri;">null</span><span style="font-family:'宋体';">拼接。</span></p> 
<p> </p> 
<p>/*<span style="font-family:'宋体';">右外 </span><span style="font-family:Calibri;">*/</span></p> 
<p>SELECT * FROM table1 t1 RIGHT JOIN table2 t2 ON t1.id = t2.id;</p> 
<p> <img src="https://images2.imgbox.com/35/37/YPvQG8pG_o.png" alt=""></p> 
<p>右外跟左外的机制刚好相反。</p> 
<p>如何去判断主副表？（左外连接：左边的是主表，右外连接：右边的是主表）</p> 
<p>跟讲过的内连接做个简单的比较</p> 
<p>SELECT * FROM table1 t1,table2 t2 WHERE t1.id = t2.id;</p> 
<p> <img src="https://images2.imgbox.com/75/c8/y9QJ6Psm_o.png" alt=""></p> 
<p>区别：内连接显示的是满足等值条件的记录，而外链接主表的记录都显示出来。</p> 
<p>注意：使用多表联查，不一定要有外键。</p> 
<p><span style="font-family:'宋体';">例题：</span>/*<span style="font-family:'宋体';">查询所有工作为文员的员工姓名及部门名称</span><span style="font-family:Calibri;">*/</span></p> 
<p>SELECT e.ename,e.job,d.dname</p> 
<p>FROM emp e LEFT JOIN dept d ON e.deptno = d.deptno</p> 
<p>WHERE e.job = '<span style="font-family:'宋体';">文员</span><span style="font-family:Calibri;">';</span></p> 
<p> <img src="https://images2.imgbox.com/f5/c5/nz0ICbn3_o.png" alt=""></p> 
<p><span style="font-family:'宋体';">例题：</span>/*<span style="font-family:'宋体';">查询至少有一个员工的部门信息</span><span style="font-family:Calibri;">*/</span></p> 
<p><span style="font-family:Calibri;"><img src="https://images2.imgbox.com/ea/cf/V2CrFQw8_o.png" alt=""><br></span></p> 
<p><span style="font-family:'宋体';">结果很显然不对，因为</span>40<span style="font-family:'宋体';">部门没人。</span></p> 
<p><span style="font-family:'宋体';">分析：因为我把</span>dept<span style="font-family:'宋体';">作为主表，而主表的数据都显示，所以不合适，更改如下：</span></p> 
<p> <img src="https://images2.imgbox.com/20/70/8AXWSmAa_o.png" alt=""></p> 
<p>如下写法也可以</p> 
<p> <img src="https://images2.imgbox.com/d0/9d/begUSbzo_o.png" alt=""></p> 
<p>其实可以不用外链接，也可以查询</p> 
<p> <img src="https://images2.imgbox.com/70/0f/phASBVvu_o.png" alt=""></p> 
<p> <img src="https://images2.imgbox.com/ce/3a/zC7m01t5_o.png" alt=""></p> 
<p> </p> 
<p align="center"><strong>子查询</strong></p> 
<p><span style="font-family:'宋体';">子查询：查询中还有查询（数</span>select<span style="font-family:'宋体';">的个数）</span></p> 
<p>1、 出现的位置</p> 
<p>A from<span style="font-family:'宋体';">前：作为字段存在的</span></p> 
<p> <img src="https://images2.imgbox.com/ae/26/mSuVaGyP_o.png" alt=""></p> 
<p>B where<span style="font-family:'宋体';">后：作为条件存在的</span></p> 
<p>/*<span style="font-family:'宋体';">查询出工资高于在</span><span style="font-family:Calibri;">30</span><span style="font-family:'宋体';">部门工作的所有员工的工资的员工信息</span><span style="font-family:Calibri;">*/</span></p> 
<p> <img src="https://images2.imgbox.com/84/aa/PPpTa49d_o.png" alt=""></p> 
<p>C from<span style="font-family:'宋体';">后：表（极为罕见）</span></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/17325a256ce1bcaabd086cfa832533b4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL 中的重做日志，回滚日志以及二进制日志的简单总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5dff27877827ed948b1d8aee20800160/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c&#43;&#43;Double类型不能直接比较大小</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>