<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用Jmeter轻松实现AES加密测试 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用Jmeter轻松实现AES加密测试" />
<meta property="og:description" content="大家在自己公司做接口测试的时候，有没有遇到过接口做加密处理的情况呢？相信我们的读者朋友们都有一定的概率会遇到这种情况，尤其是对接口数据安全有一定要求的公司接口数据一定会做加密处理。那么遇到加密情况，大家使用工具JMeter如何做接口测试呢？可以借助JMeter提供的函数digest和MD5，其中digest支持的加密方法是如下这7个：
由此可见到目前为止，JMeter自带的支持的加密方法仅MD和SHA，如果很幸运你所供职公司用的就是这两种加密中的任意一种，那么我们就可以通过JMeter提供的加密方法进行加密处理。但是我们很多读者遇到的是使用其他的通用加密算法，一说到通用加密方法，不得不说AES加密，AES加密算法是英文单词Advanced Encryption Standard的首字母缩写，AES加密采用的是效率较高的对称加密算法，也就是说，其加密、解密使用相同的密钥。
AES网络传输过程加密、解密过程详见如下图所示
术语说明：
明文：没有经过加密处理的数据
密文：经过加密处理后的数据
如果大家公司业务对应的接口是走AES加密，我们通过接口测试工具JMeter做接口测试时，需要对请求数据做加密处理，并且对应答数据做解码处理，我们拿响应数据解密处理来看，具体怎么实现接口aes解密处理。
01 解密方法获取 首先我们要获取到aes解密方法，可以跟开发要，也可以网上找，毕竟aes是比较通用的加密算法。
如下所示，是某公司开发提供的aes解密方法：
02 加密方法引入 接下来我们就需要将获取到的加密方法引入到JMeter中，有多种解决方案，咱们这里使用引入java源文件的方式，首先将java源文件拷贝到指定的盘符，例如：D盘。
然后在添加的beanshell后置处理器中增加如下脚本，来实现引入带加密方法的java源文件：
03 调用解密方法 如下脚本所示：
第4行实现调用aes解密方法，入参有2个，分别是aes密文字符串、秘钥
第2行定义aes密文字符串
第3行表示获取应答报体，并赋值给aes密文字符串变量decodeStr
第4行在日志查看面板打印应答报体aes明文
如下图所示，是经过aes解密后的应答报体内容：
经过以上步骤一、二、三操作即可实现对aes密文的解密。
接口请求aes加密，需要获取aes加密方法，不同于解密操作步骤是步骤三，调用的是获取到的aes加密方法。
04 URL解码 有些公司开发还会对应答报体进行URL编码处理，这种情况下，我们做接口、性能测试时，需要对应答做断言判断，因而需要先进行URL解码，然后再进行aes解密操作，然后再对解密后的应答信息做断言处理。
如下所示在JMeter的BeanShell 后置处理程序中已编写的脚本中，增加第5行调用url解码方法对应答报体做url解码处理，当然JMeter自带的urldecode函数也能实现url解码处理，第1行实现的是引入java.net包下的URLDecoder类，提供给第5行url解码方法调用，其他脚本行的注释内容详见步骤三，这里就不再赘述了
相应的开发对接口请求也会做对应的URL编码处理，我们测试的接口脚本就需要增加如下两行脚本。
以上就是AES&#43;URL接口的JMeter解决方案。
现在我邀请你进入我们的软件测试学习交流群：【746506216】，备注“入群”， 大家可以一起探讨交流软件测试，共同学习软件测试技术、面试等软件测试方方面面，还会有免费直播课，收获更多测试技巧，我们一起进阶Python自动化测试/测试开发，走向高薪之路。
喜欢软件测试的小伙伴们，如果我的博客对你有帮助、如果你喜欢我的博客内容，请 “点赞” “评论” “收藏” 一 键三连哦！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/96d32501b0ff64c44ed7cbfb199d56af/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-06T13:28:42+08:00" />
<meta property="article:modified_time" content="2022-09-06T13:28:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用Jmeter轻松实现AES加密测试</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>大家在自己公司做接口测试的时候，有没有遇到过接口做加密处理的情况呢？相信我们的读者朋友们都有一定的概率会遇到这种情况，尤其是对接口数据安全有一定要求的公司接口数据一定会做加密处理。那么遇到加密情况，大家使用工具JMeter如何做接口测试呢？可以借助JMeter提供的函数digest和MD5，其中digest支持的加密方法是如下这7个：</p> 
<p><img src="https://images2.imgbox.com/cb/91/dR6CNeeQ_o.png" alt="在这里插入图片描述"></p> 
<p>由此可见到目前为止，JMeter自带的支持的加密方法仅MD和SHA，如果很幸运你所供职公司用的就是这两种加密中的任意一种，那么我们就可以通过JMeter提供的加密方法进行加密处理。但是我们很多读者遇到的是使用其他的通用加密算法，一说到通用加密方法，不得不说AES加密，AES加密算法是英文单词Advanced Encryption Standard的首字母缩写，AES加密采用的是效率较高的对称加密算法，也就是说，其加密、解密使用相同的密钥。</p> 
<p>AES网络传输过程加密、解密过程详见如下图所示</p> 
<p><img src="https://images2.imgbox.com/13/f4/fCTlt4j9_o.png" alt="图片"></p> 
<p><strong>术语说明：</strong></p> 
<p>明文：没有经过加密处理的数据</p> 
<p>密文：经过加密处理后的数据</p> 
<p>如果大家公司业务对应的接口是走AES加密，我们通过接口测试工具JMeter做接口测试时，需要对请求数据做加密处理，并且对应答数据做解码处理，我们拿响应数据解密处理来看，具体怎么实现接口aes解密处理。</p> 
<h3><a id="01__24"></a>01 解密方法获取</h3> 
<p>首先我们要获取到aes解密方法，可以跟开发要，也可以网上找，毕竟aes是比较通用的加密算法。</p> 
<p>如下所示，是某公司开发提供的aes解密方法：</p> 
<p><img src="https://images2.imgbox.com/6c/09/YzRHZdfo_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="02__37"></a>02 加密方法引入</h3> 
<p>接下来我们就需要将获取到的加密方法引入到JMeter中，有多种解决方案，咱们这里使用引入java源文件的方式，首先将java源文件拷贝到指定的盘符，例如：D盘。</p> 
<p>然后在添加的beanshell后置处理器中增加如下脚本，来实现引入带加密方法的java源文件：</p> 
<p><img src="https://images2.imgbox.com/3d/cd/m6MwVONQ_o.png" alt="图片"></p> 
<h3><a id="03__52"></a>03 调用解密方法</h3> 
<p>如下脚本所示：</p> 
<p>第4行实现调用aes解密方法，入参有2个，分别是aes密文字符串、秘钥</p> 
<p>第2行定义aes密文字符串</p> 
<p>第3行表示获取应答报体，并赋值给aes密文字符串变量decodeStr</p> 
<p>第4行在日志查看面板打印应答报体aes明文</p> 
<p><img src="https://images2.imgbox.com/00/85/8eYmDJMd_o.png" alt="在这里插入图片描述"></p> 
<p>如下图所示，是经过aes解密后的应答报体内容：</p> 
<p><img src="https://images2.imgbox.com/ae/39/3eGSTAtj_o.png" alt="图片"></p> 
<p>经过以上步骤一、二、三操作即可实现对aes密文的解密。</p> 
<p>接口请求aes加密，需要获取aes加密方法，不同于解密操作步骤是步骤三，调用的是获取到的aes加密方法。</p> 
<h3><a id="04_URL_80"></a>04 URL解码</h3> 
<p>有些公司开发还会对应答报体进行URL编码处理，这种情况下，我们做接口、性能测试时，需要对应答做断言判断，因而需要先进行URL解码，然后再进行aes解密操作，然后再对解密后的应答信息做断言处理。</p> 
<p>如下所示在JMeter的BeanShell 后置处理程序中已编写的脚本中，增加第5行调用url解码方法对应答报体做url解码处理，当然JMeter自带的urldecode函数也能实现url解码处理，第1行实现的是引入java.net包下的URLDecoder类，提供给第5行url解码方法调用，其他脚本行的注释内容详见步骤三，这里就不再赘述了</p> 
<p><img src="https://images2.imgbox.com/9f/da/0kbn8qjA_o.png" alt="图片"></p> 
<p>相应的开发对接口请求也会做对应的URL编码处理，我们测试的接口脚本就需要增加如下两行脚本。</p> 
<p><img src="https://images2.imgbox.com/0c/f3/NoYaEyed_o.png" alt="图片"></p> 
<p>以上就是AES+URL接口的JMeter解决方案。</p> 
<blockquote> 
 <p><strong>现在我邀请你进入我们的软件测试学习交流群：</strong>【<strong><code>746506216</code></strong>】，备注“入群”， 大家可以一起探讨交流软件测试，共同学习软件测试技术、面试等软件测试方方面面，还会有免费直播课，收获更多测试技巧，<strong><code>我们一起进阶Python自动化测试/测试开发，走向高薪之路。</code></strong></p> 
</blockquote> 
<p><strong>喜欢软件测试的小伙伴们，如果我的博客对你有帮助、如果你喜欢我的博客内容，请 “点赞” “评论” “收藏” 一 键三连哦！</strong></p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/42/e4/bhN0TklN_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/a6/eb/lFOpe8KC_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7cd46f21cf9a28fc247ba813925833f4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Uncaught TypeError: Failed to construct ‘FormData‘: parameter 1 is not of type ‘HTMLFormElement‘.</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d7c630b1c904efaa06582e859aa44406/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">利用IO-Link技术实现小型高能效的工业传感器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>