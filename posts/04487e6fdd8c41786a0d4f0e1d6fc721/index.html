<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JS实现：纵向表格，且可在当前行下方添加一行 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JS实现：纵向表格，且可在当前行下方添加一行" />
<meta property="og:description" content="常规的表格是这样的 … 客户的需求是这样的 … 一些固定项目自动带出，可修改；想在哪项下面加一行就在哪里加一行，想删除哪行就删除哪行。就要竖着的表格，不要横着的。如下图：
例如：在身高那一行下方想加一个 胸围 100cm ，就点击“在下方添加行” 于是在下方出现一行空行
实现过程 一、纵向表格部分 java后端——备好数据的过程 注意事项 以上前端代码主体是谁？假设是 form （springMVC中的modelAttribute） table里所展示主体是谁？假设是 data form 和 data 什么关系？ 一个form 对应 多个data （所以把多个data对象放进集合再把一个集合放进form对象中） 1. data对象 @Data //用了Lombok public class Data { private String name; private String content; //有参构造 public PrintData(String name, String content) { super(); this.name = name; this.content = content; } //无参构造方法 public PrintData() { super(); } } 2. form主体对象 @Data //用了Lombok public class Form { private ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/04487e6fdd8c41786a0d4f0e1d6fc721/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-10T17:22:14+08:00" />
<meta property="article:modified_time" content="2020-04-10T17:22:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JS实现：纵向表格，且可在当前行下方添加一行</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="__0"></a>常规的表格是这样的 …</h2> 
<p><img src="https://images2.imgbox.com/87/dc/GxyS5r0e_o.jpg" alt="在这里插入图片描述"></p> 
<h2><a id="__2"></a>客户的需求是这样的 …</h2> 
<p>一些固定项目自动带出，可修改；想在哪项下面加一行就在哪里加一行，想删除哪行就删除哪行。就要竖着的表格，不要横着的。如下图：<br> 例如：在身高那一行下方想加一个 胸围 100cm ，就点击“在下方添加行” 于是在下方出现一行空行<br> <img src="https://images2.imgbox.com/60/0e/3rEU4ltP_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="_7"></a>实现过程</h3> 
<h4><a id="_8"></a>一、纵向表格部分</h4> 
<h6><a id="java_9"></a>java后端——备好数据的过程</h6> 
<dl> 
 
   注意事项 
  
 <dd>
   以上前端代码主体是谁？假设是 form （springMVC中的modelAttribute） 
 </dd> 
 <dd>
   table里所展示主体是谁？假设是 data 
 </dd> 
 <dd>
   form 和 data 什么关系？ 一个form 对应 多个data （所以把多个data对象放进集合再把一个集合放进form对象中） 
 </dd> 
</dl> 
<h6><a id="1_data_15"></a>1. data对象</h6> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>    <span class="token comment">//用了Lombok</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Data</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>
	<span class="token comment">//有参构造</span>
	<span class="token keyword">public</span> <span class="token class-name">PrintData</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//无参构造方法</span>
	<span class="token keyword">public</span> <span class="token class-name">PrintData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="2_form_33"></a>2. form主体对象</h6> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>    <span class="token comment">//用了Lombok</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
	<span class="token comment">//data集合是主体的一个属性</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Data</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="3_Controller_44"></a>3. Controller层与页面交互的部分</h6> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"xxxx"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">xxxx</span><span class="token punctuation">(</span><span class="token class-name">Form</span> form<span class="token punctuation">,</span><span class="token class-name">Model</span> model<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">//生成默认的数据（因为比较多，我做的比较麻烦所以单独放一个方法里）</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Data</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token function">generateDefaultData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//把集合让form主体带着去页面</span>
	form<span class="token punctuation">.</span><span class="token function">setList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
	model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">,</span> form<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token string">"xxx/xxxx/xx/xxx/前端页面"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//返回值是data对象的集合</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Data</span><span class="token punctuation">&gt;</span></span> <span class="token function">generateDefaultData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Data</span><span class="token punctuation">&gt;</span></span> arrayList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Data</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  arrayList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  arrayList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  arrayList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> units<span class="token punctuation">)</span><span class="token punctuation">;</span>
  arrayList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> hight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  arrayList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> arrayList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_69"></a>前端——画出表格基础结构，省略了一些样式</h6> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>form<span class="token operator">:</span>form id<span class="token operator">=</span><span class="token string">"inputForm"</span> modelAttribute<span class="token operator">=</span><span class="token string">"form"</span> method<span class="token operator">=</span><span class="token string">"post"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"form-horizontal"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"panel-body"</span><span class="token operator">&gt;</span>
			<span class="token comment">//是个表格</span>
			<span class="token operator">&lt;</span>table id<span class="token operator">=</span><span class="token string">"contentTable"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"table table-striped table-bordered table-condensed"</span><span class="token operator">&gt;</span>
				<span class="token comment">//表头</span>
				<span class="token operator">&lt;</span>thead<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>名称<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>内容<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>th<span class="token operator">&gt;</span>操作<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">&gt;</span>
				
				<span class="token comment">//表体（空的，用js动态加进去，下方介绍）</span>
				<span class="token operator">&lt;</span>tbody id<span class="token operator">=</span><span class="token string">"printDataList"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">&gt;</span>
				
			<span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
			
			<span class="token comment">//用于动态获取数据动态添加行</span>
			<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/template"</span> id<span class="token operator">=</span><span class="token string">"listTpl"</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span> tr一横行 <span class="token operator">--</span><span class="token operator">%</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>tr id<span class="token operator">=</span><span class="token string">"list{<!-- -->{idx}}"</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span> 对应的是 名称 那一竖列的每一行 <span class="token operator">--</span><span class="token operator">%</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"list{<!-- -->{idx}}_name"</span>  name<span class="token operator">=</span><span class="token string">"list[{<!-- -->{idx}}].name"</span>  value<span class="token operator">=</span><span class="token string">"{<!-- -->{row.name}}"</span>  <span class="token operator">/</span><span class="token operator">&gt;</span>			
					<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span> 对应的是 内容 那一竖列的每一行 <span class="token operator">--</span><span class="token operator">%</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"list{<!-- -->{idx}}_content"</span>  name<span class="token operator">=</span><span class="token string">"list[{<!-- -->{idx}}].content"</span> value<span class="token operator">=</span><span class="token string">"{<!-- -->{row.content}}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>			
					<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>span onclick<span class="token operator">=</span><span class="token string">"addLineBelow('{<!-- -->{idx}}')"</span> title<span class="token operator">=</span><span class="token string">"在下方添加行"</span><span class="token operator">&gt;</span>
								<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"button"</span> value<span class="token operator">=</span><span class="token string">"在下方添加行"</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
							<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span>span onclick<span class="token operator">=</span><span class="token string">"delLine('{<!-- -->{idx}}')"</span> title<span class="token operator">=</span><span class="token string">"删除行"</span><span class="token operator">&gt;</span>
								<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"button"</span> value<span class="token operator">=</span><span class="token string">"删除行"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
							<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>					
			<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
		 <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre> 
<p>以上内容写完是这样的效果，嘿嘿什么都没有<br> <img src="https://images2.imgbox.com/06/91/gn2TwXfz_o.jpg" alt="在这里插入图片描述"></p> 
<p>姓名：达摩；性别：男…等等 <mark>这些数据是要求的默认带出来的。</mark></p> 
<ol><li>写死的</li><li>纵向的</li><li>我有点笨，用笨方法吧</li></ol> 
<h6><a id="JS_124"></a>前端页面的动态JS——为空表格添加数据</h6> 
<p>希望这个表格在页面一加载就出现，写JS代码吧</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">&gt;</span>
	<span class="token comment">/**添加行方法**/</span>
	<span class="token keyword">function</span> <span class="token function">addAccRow</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> tpl<span class="token punctuation">,</span> row</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">$</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>Mustache<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>tpl<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
			idx<span class="token operator">:</span> idx<span class="token punctuation">,</span> delBtn<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> row<span class="token operator">:</span> row
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//设行数为0</span>
	<span class="token keyword">var</span> listRowIdx<span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
	<span class="token comment">//一行的样式作为模板，复制一份一模一样的到下一行</span>
	<span class="token keyword">var</span> listTpl <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#listTpl"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\/\/\&lt;!\-\-)|(\/\/\-\-&gt;)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//页面一加载就会执行</span>
	<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//初始化数据</span>
		<span class="token keyword">var</span> data <span class="token operator">=</span> $<span class="token punctuation">{<!-- --></span>fns<span class="token operator">:</span><span class="token function">toJson</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">/**有多少条数据，调用多少次添加行信息**/</span>
			<span class="token function">addAccRow</span><span class="token punctuation">(</span><span class="token string">'#list'</span><span class="token punctuation">,</span> listRowIdx<span class="token punctuation">,</span> listTpl<span class="token punctuation">,</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			listRowIdx <span class="token operator">=</span> listRowIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="_152"></a>到这里：跳转到此页面就会出现一个表格，带出默认的数据</h6> 
<h4><a id="_153"></a>二、指定行下方添加行</h4> 
<p>我的JS JQ比较薄弱，网上很多推荐用JQ的after() 或者 before()的实现方式，我并没有学会，即使样式是达到了指定行下方多了一行，但是此时集合的下标会出现错乱，F12检查时如下：</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>tr id<span class="token operator">=</span><span class="token string">"list{0}"</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr id<span class="token operator">=</span><span class="token string">"list{1}"</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr id<span class="token operator">=</span><span class="token string">"list{2}"</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr id<span class="token operator">=</span><span class="token string">"list{3}"</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr id<span class="token operator">=</span><span class="token string">"list{3}"</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr id<span class="token operator">=</span><span class="token string">"list{4}"</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr id<span class="token operator">=</span><span class="token string">"list{4}"</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr id<span class="token operator">=</span><span class="token string">"list{5}"</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
</code></pre> 
<p>我一直没找到给它重新设置ID 的办法，如果可以重置排序就简单多了，如果有大神看到这里可以指点一下如何重新设置集合的序号。那将一切都变得简单…<br> <mark>所以只能在现有基础上：用一些有限的自己会的方式去解决</mark></p> 
<dl> 
 
   注意事项 
  
 <dd>
   addAccRow这个方法是可以用的，但是它只会在全部的表格最最最下方添加一行。（它会的就是我会的，就是这么局限） 
 </dd> 
 <dd>
   点击后，只能在最后一行的后面添加一行（序号不会乱） 
 </dd> 
 <dd>
   那就把被点击的那行以下的数据全体都往后挪一位，这样就会在点击的那行下方空出一行，内容再设置为空。（灵感源自java数组的增删底层原理） 
 </dd> 
</dl> 
<h6><a id="_174"></a>指定行下方添加一行代码实现</h6> 
<pre><code class="prism language-javascript">onclick<span class="token operator">=</span><span class="token string">"addLineBelow('{<!-- -->{idx}}')"</span>
<span class="token comment">//当前行下方添加行</span>
<span class="token keyword">function</span> <span class="token function">addLineBelow</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">//此时的集合总共多少行？</span>
	<span class="token keyword">var</span> len <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
	<span class="token comment">//被点行 下标是多少？</span>
	<span class="token keyword">var</span> idx <span class="token operator">=</span> <span class="token punctuation">(</span>idx<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//在集合最后一行添加一行内容为空的空行</span>
	<span class="token function">addAccRow</span><span class="token punctuation">(</span><span class="token string">'#list'</span><span class="token punctuation">,</span> listRowIdx<span class="token punctuation">,</span> listTpl<span class="token punctuation">)</span><span class="token punctuation">;</span>
	listRowIdx <span class="token operator">=</span> listRowIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//（此时）</span>
	<span class="token comment">//从新表倒数第2行，也就是旧表倒数第1行的数据开始 依次搬家 搬到谁被点击了</span>
	<span class="token comment">//把那个谁复制一份到下一行 这样被点行数据就成了两份，正好给那个第二份变空</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> listRowIdx<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> idx<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		 <span class="token keyword">var</span> lastOneName <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">") td:eq(0) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">") td:eq(0) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>lastOneName<span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token keyword">var</span> lastOneContent <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">") td:eq(1) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">") td:eq(1) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>lastOneContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span> idx <span class="token operator">+</span><span class="token string">") td:eq(0) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span> idx <span class="token operator">+</span><span class="token string">") td:eq(1) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_200"></a>指定行被删除下表如何不乱呢？</h6> 
<pre><code class="prism language-javascript">onclick<span class="token operator">=</span><span class="token string">"delLine('{<!-- -->{idx}}')"</span>

<span class="token keyword">function</span> <span class="token function">delLine</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	 <span class="token comment">//此时的集合总共多少行？</span>
	 <span class="token keyword">var</span> len <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
	 <span class="token comment">//被删除行的下一行 是第几行</span>
	 <span class="token keyword">var</span> idx<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token comment">//从这行开始往后所有 向上移动</span>
	 <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> idx<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> listRowIdx<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		 <span class="token keyword">var</span> lastOneName <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">") td:eq(0) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">") td:eq(0) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>lastOneName<span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token keyword">var</span> lastOneContent <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">") td:eq(1) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">") td:eq(1) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>lastOneContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
	 <span class="token comment">//倒数第二行和倒数第一行重复，删除最后一行</span>
	 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#list tr:eq("</span><span class="token operator">+</span><span class="token punctuation">(</span>listRowIdx<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">") td:eq(1) input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 listRowIdx<span class="token operator">--</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_225"></a>完------</h3> 
<p>小结：黑猫白猫先抓老鼠再说吧…</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/abce449e692d0ad13007d73de3f5b2b1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">6.8过程纹理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6dfce6bf32af040ad1b24b844ffcf68b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MongoDB用Navicat的基本sql操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>