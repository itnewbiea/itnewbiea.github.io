<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>logback 日志压缩 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="logback 日志压缩" />
<meta property="og:description" content="logback 日志压缩
最近服务器日志量 越来越大,一个小时就1G了，得想办法压缩一下。查看百度发现logback有压缩功能了。
使用很简单，直接在日志文件名称后面添加 “.gz”即可，如 logback.%d{yyyy-MM-dd.HH}.log.gz
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;configuration debug=&#34;false&#34;&gt; &lt;!--定义日志文件的存储地址--&gt; &lt;property name=&#34;LOG_HOME&#34; value=&#34;./logs&#34; /&gt; &lt;!-- 控制台输出 --&gt; &lt;appender name=&#34;STDOUT&#34; class=&#34;ch.qos.logback.core.ConsoleAppender&#34;&gt; &lt;encoder class=&#34;ch.qos.logback.classic.encoder.PatternLayoutEncoder&#34;&gt; &lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--&gt; &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;!-- 日志文件 --&gt; &lt;appender name=&#34;FILE&#34; class=&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;&gt; &lt;rollingPolicy class=&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;&gt; &lt;!--文件的路径与名称,{yyyy-MM-dd.HH}精确到小时,则按小时分割保存--&gt; &lt;FileNamePattern&gt; ${LOG_HOME}/logback.%d{yyyy-MM-dd.HH}.log.gz &lt;/FileNamePattern&gt; &lt;!-- 如果当前是按小时保存，则保存72小时(=3天)内的日志 --&gt; &lt;MaxHistory&gt;72&lt;/MaxHistory&gt; &lt;/rollingPolicy&gt; &lt;layout class=&#34;ch.qos.logback.classic.PatternLayout&#34;&gt; &lt;Pattern&gt; %d{yyyy-MM-dd HH:mm:ss} -%msg%n &lt;/Pattern&gt; &lt;/layout&gt; &lt;/appender&gt; &lt;!--myibatis log configure--&gt; &lt;logger name=&#34;com.winshang.xuanzhi.dao&#34; level=&#34;DEBUG&#34;&gt;&lt;/logger&gt; &lt;logger name=&#34;com.apache.ibatis&#34; level=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/d58b7ce7f322409fae78cf8ab6e7773d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-23T16:55:36+08:00" />
<meta property="article:modified_time" content="2019-08-23T16:55:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">logback 日志压缩</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>logback 日志压缩</p> 
<p>最近服务器日志量 越来越大,一个小时就1G了，得想办法压缩一下。查看百度发现logback有压缩功能了。</p> 
<p>使用很简单，直接在日志文件名称后面添加 “.gz”即可，如 logback.%d{yyyy-MM-dd.HH}.log.gz</p> 
<pre class="has"><code class="hljs">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration debug="false"&gt;
    &lt;!--定义日志文件的存储地址--&gt;
    &lt;property name="LOG_HOME" value="./logs" /&gt;
    &lt;!-- 控制台输出 --&gt;
    &lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt;
        &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
            &lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!-- 日志文件 --&gt;
    &lt;appender name="FILE"
              class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;rollingPolicy
                class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;!--文件的路径与名称,{yyyy-MM-dd.HH}精确到小时,则按小时分割保存--&gt;
            &lt;FileNamePattern&gt;
                ${LOG_HOME}/logback.%d{yyyy-MM-dd.HH}.log.gz
            &lt;/FileNamePattern&gt;
            &lt;!-- 如果当前是按小时保存，则保存72小时(=3天)内的日志 --&gt;
            &lt;MaxHistory&gt;72&lt;/MaxHistory&gt;
        &lt;/rollingPolicy&gt;
        &lt;layout class="ch.qos.logback.classic.PatternLayout"&gt;
            &lt;Pattern&gt;
                %d{yyyy-MM-dd HH:mm:ss} -%msg%n
            &lt;/Pattern&gt;
        &lt;/layout&gt;
    &lt;/appender&gt;

    &lt;!--myibatis log configure--&gt;
    &lt;logger name="com.winshang.xuanzhi.dao" level="DEBUG"&gt;&lt;/logger&gt;
    &lt;logger name="com.apache.ibatis" level="TRACE"/&gt;
    &lt;logger name="java.sql.Connection" level="DEBUG"/&gt;
    &lt;logger name="java.sql.Statement" level="DEBUG"/&gt;
    &lt;logger name="java.sql.PreparedStatement" level="DEBUG"/&gt;

    &lt;!-- 日志输出级别 --&gt;
    &lt;root level="INFO"&gt;
        &lt;appender-ref ref="STDOUT" /&gt;
        &lt;appender-ref ref="FILE" /&gt;
    &lt;/root&gt;

    &lt;!--日志异步到数据库 --&gt;
    &lt;!--&lt;appender name="DB" class="ch.qos.logback.classic.db.DBAppender"&gt;--&gt;
    &lt;!--&amp;lt;!&amp;ndash;日志异步到数据库 &amp;ndash;&amp;gt;--&gt;
    &lt;!--&lt;connectionSource class="ch.qos.logback.core.db.DriverManagerConnectionSource"&gt;--&gt;
    &lt;!--&amp;lt;!&amp;ndash;连接池 &amp;ndash;&amp;gt;--&gt;
    &lt;!--&lt;dataSource class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt;--&gt;
    &lt;!--&lt;driverClass&gt;com.mysql.jdbc.Driver&lt;/driverClass&gt;--&gt;
    &lt;!--&lt;url&gt;jdbc:mysql://127.0.0.1:3306/databaseName&lt;/url&gt;--&gt;
    &lt;!--&lt;user&gt;root&lt;/user&gt;--&gt;
    &lt;!--&lt;password&gt;root&lt;/password&gt;--&gt;
    &lt;!--&lt;/dataSource&gt;--&gt;
    &lt;!--&lt;/connectionSource&gt;--&gt;
    &lt;!--&lt;/appender&gt;--&gt;
&lt;/configuration&gt;</code></pre> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5e5473cc9c95bae9a489eb075ae093fc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">babel-plugin-import 插件的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d60b782012864a903b1e4753b5385de1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL元数据获取基础笔记day05</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>