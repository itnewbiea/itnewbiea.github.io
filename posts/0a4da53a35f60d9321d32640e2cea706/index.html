<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>c# 跑马灯显示 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="c# 跑马灯显示" />
<meta property="og:description" content="//本文演示跑马灯
//用到了线程、同步委托
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
using System.IO;
namespace 跑马灯
{
public partial class Form1 : Form
{ public List&lt;Label&gt; lists = new List&lt;Label&gt;();//lists类型为Label
public delegate void MsgDelegate();//声明委托
public MsgDelegate msgDelegate; //声明委托变量
public bool start = new bool(); public bool stop=new bool();
public Form1()
{ InitializeComponent();
foreach (var item in this.Controls) //遍历所有Label,赋值到lists
{ if (item.GetType().ToString().Contains(&#34;Label&#34;))" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/0a4da53a35f60d9321d32640e2cea706/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-11T00:41:44+08:00" />
<meta property="article:modified_time" content="2023-02-11T00:41:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">c# 跑马灯显示</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <p style=""><span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">//本文演示跑马灯</span></span></p> 
 <p style=""><span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">//用到了线程、同步委托</span></span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:532px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:70.488716%;height:0;"> 
    <img src="https://images2.imgbox.com/2f/e8/3ncDi8IS_o.png" style="margin-left:;display:block;width:532px;margin-top:-70.488716%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style=""></p> 
 <p style=""></p> 
 <p style="">using System;</p> 
 <p style="">using System.Collections.Generic;</p> 
 <p style="">using System.ComponentModel;</p> 
 <p style="">using System.Data;</p> 
 <p style="">using System.Drawing;</p> 
 <p style="">using System.Linq;</p> 
 <p style="">using System.Text;</p> 
 <p style="">using System.Windows.Forms;</p> 
 <p style="">using System.Threading;</p> 
 <p style="">using System.IO;</p> 
 <p style=""></p> 
 <p style="">namespace 跑马灯</p> 
 <p style="">{<!-- --></p> 
 <p style=""> public partial class Form1 : Form</p> 
 <p style=""> { public List&lt;Label&gt; lists = new List&lt;Label&gt;();//lists类型为Label</p> 
 <p style=""> <span class="kdocs-color" style="background-color:#FBF5B3;color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;"> public delegate void MsgDelegate();//声明委托</span></span></p> 
 <p style=""> <span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">public MsgDelegate msgDelegate; //声明委托变量</span></span></p> 
 <p style=""> public bool start = new bool(); </p> 
 <p style=""> public bool stop=new bool();</p> 
 <p style=""> </p> 
 <p style=""> public Form1()</p> 
 <p style=""> { InitializeComponent();</p> 
 <p style=""> <span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">foreach (var item in this.Controls) //遍历所有Label,赋值到lists</span></span></p> 
 <p style=""> { if (item.GetType().ToString().Contains("Label"))</p> 
 <p style=""> { Label label = (Label)item;</p> 
 <p style=""> lists.Add(label);</p> 
 <p style=""> }</p> 
 <p style=""> }</p> 
 <p style=""> <span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;"> timer1.Enabled = true;//启动定时器</span></span></p> 
 <p style=""> }</p> 
 <p style=""> private void timer1_Tick(object sender, EventArgs e)//定义器开线程</p> 
 <p style=""> { timer1.Enabled = false;</p> 
 <p style=""> <span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;"> System.Threading.Thread thread = new Thread(loop);//开线程</span></span></p> 
 <p style=""> <span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;"> thread.Start();//线程启动</span></span></p> 
 <p style=""> }</p> 
 <p style=""> public void loop()//死循环</p> 
 <p style=""> { msgDelegate = new MsgDelegate(disp);//创建委托</p> 
 <p style=""> while (true)</p> 
 <p style=""> { if (start)</p> 
 <p style=""> { start_histoy = true;</p> 
 <p style=""> <span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">this.Invoke(msgDelegate); //调用同步委托</span></span></p> 
 <p style=""> } </p> 
 <p style=""> <span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;"> Application.DoEvents(); //防止界面停止响应</span></span></p> 
 <p style=""> }</p> 
 <p style=""> }</p> 
 <p style=""> public void disp()//显示跑马灯</p> 
 <p style=""> { for (int i = 0; i &lt; lists.Count(); i++)</p> 
 <p style=""> { Label label = lists[i];</p> 
 <p style=""> label.BackColor = Color.Red;</p> 
 <p style=""> <span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;"> Application.DoEvents();//防止界面停止响应</span></span></p> 
 <p style=""> Thread.Sleep(100);</p> 
 <p style=""> if (stop) break;</p> 
 <p style=""> label.BackColor = Color.White; </p> 
 <p style=""> }</p> 
 <p style=""> }</p> 
 <p style=""> private void button1_Click(object sender, EventArgs e)//开始</p> 
 <p style=""> { if (!start)</p> 
 <p style=""> { start = true;</p> 
 <p style=""> stop = false;</p> 
 <p style=""> }</p> 
 <p style=""> }</p> 
 <p style=""> private void button2_Click(object sender, EventArgs e)//停止</p> 
 <p style=""> { stop = true;</p> 
 <p style=""> start = false;</p> 
 <p style=""> }</p> 
 <p style=""> }</p> 
 <p style="">}</p> 
 <p style=""></p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0e6cd1c7a8dd48c78a3ff3b36f8b7713/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">js去掉所有的html 标签（正则）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2141099d0874bc19468f28a120c69fdc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c# 委托的同步调用（invoke）和异步调用(beginvoke)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>