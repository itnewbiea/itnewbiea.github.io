<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos7 虚拟机系统磁盘扩容 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="centos7 虚拟机系统磁盘扩容" />
<meta property="og:description" content=" 目录
1、 虚拟机硬盘容量修改
2、centos7扩容
1.修改分区表
2.更新内核内存分区表 3.调整物理体积
3.调整LV和文件系统扩容
1、 虚拟机硬盘容量修改 不同的软件有些不同这里不做说明
注意：此方法需要先删除所有快照，修改完硬盘大小重新做个快照，万一操作出错好恢复
2、centos7扩容 完成第一步后进系统查看空间使用情况
df -lH 可以看到可用容量并没有改变，用lsblk查看磁盘使用情况
这里要做的是扩充sda2的容量，网络上找到的一般是新增一个分区，然后扩容，我不太喜欢分区太多，所以只想简单的对sda2进行扩容。
扩容步骤 先删除sda2分区再重新创建，操作步骤如下：
1.修改分区表 fdisk /dev/sda 删除分区2：输入d回车=&gt;2回车
创建分区2：输入n回车=&gt;p回车=&gt;2回车=&gt;回车=&gt;回车
输入w回车保存退出
2.更新内核内存分区表 partx -u /dev/sda 3.调整物理体积 pvresize /dev/sda2 重新lsblk进行查看，可以看到sda2已经扩容完成 3.调整LV和文件系统扩容 lvextend -r centos/root /dev/sda2 centos-root已经扩容完成 df -lH 确认完成扩容 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/cd2dc677b9435801a80b94024d891599/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-08T18:26:49+08:00" />
<meta property="article:modified_time" content="2022-04-08T18:26:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos7 虚拟机系统磁盘扩容</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id=""><a href="https://blog.csdn.net/lsqtzj/article/details/123691954#t0" title="1、 虚拟机硬盘容量修改">1、 虚拟机硬盘容量修改</a></p> 
<p id=""><a href="https://blog.csdn.net/lsqtzj/article/details/123691954#t1" title="2、centos7扩容">2、centos7扩容</a></p> 
<p id=""><a href="https://blog.csdn.net/lsqtzj/article/details/123691954#t2" title="1.修改分区表">1.修改分区表</a></p> 
<p id=""><a href="https://blog.csdn.net/lsqtzj/article/details/123691954#t3" title=" 2.更新内核内存分区表 "> 2.更新内核内存分区表 </a></p> 
<p id=""><a href="https://blog.csdn.net/lsqtzj/article/details/123691954#t4" title=" 3.调整物理体积"> 3.调整物理体积</a></p> 
<p id=""><a href="https://blog.csdn.net/lsqtzj/article/details/123691954#t5" title="3.调整LV和文件系统扩容">3.调整LV和文件系统扩容</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1%E3%80%81%20%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A1%AC%E7%9B%98%E5%AE%B9%E9%87%8F%E4%BF%AE%E6%94%B9"><a name="t0"></a>1、 <a href="https://so.csdn.net/so/search?q=%E8%99%9A%E6%8B%9F%E6%9C%BA&amp;spm=1001.2101.3001.7020" title="虚拟机">虚拟机</a>硬盘容量修改</h2> 
<p>不同的软件有些不同这里不做说明</p> 
<p><span style="color:#fe2c24;">注意：此方法需要先删除所有快照，修改完硬盘大小重新做个快照，万一操作出错好恢复</span></p> 
<p><img alt="" src="https://images2.imgbox.com/c3/64/Kkd7unxV_o.png"></p> 
<h2 id="2%E3%80%81centos7%E6%89%A9%E5%AE%B9">2、<a href="https://so.csdn.net/so/search?q=centos7&amp;spm=1001.2101.3001.7020" title="centos7">centos7</a>扩容</h2> 
<p>完成第一步后进系统查看空间使用情况</p> 
<pre><code>df -lH</code></pre> 
<p><img alt="" src="https://images2.imgbox.com/57/90/PWdtwU4w_o.png"></p> 
<p> 可以看到可用容量并没有改变，用lsblk查看磁盘使用情况</p> 
<p><img alt="" src="https://images2.imgbox.com/63/5a/UvEdwQL4_o.png"></p> 
<p> </p> 
<p>这里要做的是扩充sda2的容量，网络上找到的一般是新增一个分区，然后扩容，我不太喜欢分区太多，所以只想简单的对sda2进行扩容。</p> 
<p>扩容步骤 先删除sda2分区再重新创建，操作步骤如下：</p> 
<h3 id="1.%E4%BF%AE%E6%94%B9%E5%88%86%E5%8C%BA%E8%A1%A8"><a name="t2"></a>1.修改<a href="https://so.csdn.net/so/search?q=%E5%88%86%E5%8C%BA%E8%A1%A8&amp;spm=1001.2101.3001.7020" title="分区表">分区表</a></h3> 
<pre><code>fdisk /dev/sda</code></pre> 
<p> </p> 
<p>删除分区2：输入d回车=&gt;2回车</p> 
<p>创建分区2：输入n回车=&gt;p回车=&gt;2回车=&gt;回车=&gt;回车</p> 
<p>输入w回车保存退出</p> 
<p><img alt="" src="https://images2.imgbox.com/14/2e/g8M7k8Ic_o.png"></p> 
<p> </p> 
<h3 id="%C2%A02.%E6%9B%B4%E6%96%B0%E5%86%85%E6%A0%B8%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA%E8%A1%A8%C2%A0">2.更新内核内存分区表 </h3> 
<pre><code>partx -u /dev/sda</code></pre> 
<h3 id="%C2%A03.%E8%B0%83%E6%95%B4%E7%89%A9%E7%90%86%E4%BD%93%E7%A7%AF"><a name="t4"></a> </h3> 
<h3>3.调整物理体积</h3> 
<pre><code>pvresize /dev/sda2</code></pre> 
<p><img alt="" src="https://images2.imgbox.com/2c/09/t5g9LO9G_o.png"></p> 
<p> 重新lsblk进行查看，可以看到sda2已经扩容完成 </p> 
<p><img alt="" src="https://images2.imgbox.com/a5/ad/ffFHOtDz_o.png"></p> 
<p> </p> 
<h3 id="3.%E8%B0%83%E6%95%B4LV%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%89%A9%E5%AE%B9">3.调整LV和文件系统扩容</h3> 
<pre><code>lvextend -r centos/root /dev/sda2</code></pre> 
<p><img alt="" height="246" src="https://images2.imgbox.com/e7/c8/O15cVk2r_o.png" width="804"></p> 
<p> </p> 
<p>centos-root已经扩容完成 </p> 
<p> <img alt="" height="151" src="https://images2.imgbox.com/5e/42/4YjrF128_o.png" width="435"> </p> 
<p>df -lH 确认完成扩容 </p> 
<p><img alt="" height="162" src="https://images2.imgbox.com/4f/ab/Gvcbgi9A_o.png" width="557"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/234cc7aaf1354b5bd160c42900241a22/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">充电&#43;拓展&#43;投屏三合一的Type-C适配器方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3b3f17d583534d00c21e4f86aa3f1728/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【SNA】社会网络分析二 Gephi 功能详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>