<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux入门攻坚——11、Linux网络属性配置相关知识1 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux入门攻坚——11、Linux网络属性配置相关知识1" />
<meta property="og:description" content="网络基础知识：
局域网：以太网，令牌环网，
Ethernet：CSMA/CD
冲突域
广播域
MAC：Media Access Control，共48bit，前24bit需要机构分配，后24bit自己自由使用
IP：Internet Protocol
Routing Protocol
Routed Protocol
传输层协议：tcp、udp、sctp
网络层协议：ip
ip协议：
IPv4地址分类：
点分十进制：0-255
0000 0000 - 1111 1111
0.0.0.0 - 255.255.255.255
A类：
0 000 0000 - 0 111 1111 ： 1-127
网络数：126个,127环回地址；每个网络中的主机数：2^24-2；默认子网掩码：255.0.0.0
私网地址：10.0.0.0/8
B类：
10 00 0000 - 10 11 1111 ： 128-191
网络数：2^14个；每个网络中的主机数：2^16-2；默认子网掩码：255.255.0.0
私网地址：172.16.0.0/16-172.31.0.0/16
C类：
110 0 0000 - 110 1 1111 ： 192-223
网络数：2^21个；每个网络中的主机数：2^8-2；默认子网掩码：255.255.255.0
私网地址：192.168.0.0/24-192.168.255.0/24
D类：组播用
1110 0000 - 1110 1111 ： 224 - 239" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/22067933670edf8f4177480d9af9a4d9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-05T16:42:00+08:00" />
<meta property="article:modified_time" content="2024-01-05T16:42:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux入门攻坚——11、Linux网络属性配置相关知识1</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>网络基础知识</strong>：<br> 局域网：以太网，令牌环网，<br>     Ethernet：CSMA/CD<br>         冲突域<br>         广播域<br>     MAC：Media Access Control，共48bit，前24bit需要机构分配，后24bit自己自由使用<br>     IP：Internet Protocol<br>         Routing Protocol<br>         Routed Protocol</p> 
<p>    传输层协议：tcp、udp、sctp<br>     网络层协议：ip</p> 
<p>ip协议：<br>     IPv4地址分类：<br>         点分十进制：0-255<br>         0000 0000 - 1111 1111<br>         0.0.0.0 - 255.255.255.255<br>         A类：<br>             0 000 0000 - 0 111 1111 ： 1-127<br>             网络数：126个,127环回地址；每个网络中的主机数：2^24-2；默认子网掩码：255.0.0.0<br>             私网地址：10.0.0.0/8<br>         B类：<br>             10 00 0000 - 10 11 1111 ： 128-191<br>             网络数：2^14个；每个网络中的主机数：2^16-2；默认子网掩码：255.255.0.0<br>             私网地址：172.16.0.0/16-172.31.0.0/16<br>         C类：<br>             110 0 0000 - 110 1 1111 ： 192-223<br>             网络数：2^21个；每个网络中的主机数：2^8-2；默认子网掩码：255.255.255.0<br>             私网地址：192.168.0.0/24-192.168.255.0/24<br>         D类：组播用<br>             1110 0000 - 1110 1111 ： 224 - 239<br>         E类：<br>             240-255    </p> 
<p>    子网掩码：用来进行网络号计算的<br>         跨网络通信：路由<br>         主机路由：目的是一个主机地址<br>         网络路由：目的是一个网络<br>         默认路由：<br>         按匹配精度优先级，最佳匹配原则：主机路由&gt;网络路由&gt;默认路由</p> 
<p><strong>Linux主机接入到网络中</strong>：</p> 
<p>需要配置：<br>     IP/mask：<br>     路由：默认网关<br>     DNS服务器：主DNS服务器、次DNS服务器、第三DNS服务器<br> 配置方式：<br>     静态指定：分为几个命令家族<br>         ifcfg：ifconfig，route，netstat<br>         ip：object：{<!-- --><span style="color:#1c7331;">link</span>，<span style="color:#1c7331;">addr</span>，<span style="color:#1c7331;">route</span>}，ss，tc<br>         配置文件：直接编辑配置文件，有图形工具如下<br>             （<span style="color:#956fe7;">setup</span>） system-config-network-tui<br>         CentOS 7：<br>             nmcli，nmtui<br>     动态分配：<br>         DHCP：Dynamic Host Configuration Protocol</p> 
<p><strong>配置网络接口</strong>：<br>     接口命名方式：<br>         CentOS 6：<br>             以太网：eth[0,1,2,...]<br>             ppp:ppp[0,1,2,...]</p> 
<p>   <strong> ifconfig命令</strong>：<br>         <span style="color:#956fe7;">ifconfig [interface] <br>             # ifconfig -a    显示所有网络接口信息，包括没激活接口，不带-a，只显示活动接口<br>             # ifconfig IFACE [up | down] </span><br>         <span style="color:#956fe7;">ifconfig interface [aftype] options | address </span>...<br>             <span style="color:#956fe7;"># ifconfig IFACE IP/mask_length [up]<br>             # ifconfig IFACE IP netmask MASK</span><br>         注意：立即生效，但不会永久有效；<br>         启用混杂模式：[ - ]promisc<br><img alt="" height="546" src="https://images2.imgbox.com/27/4a/RZHWR6Lm_o.png" width="714"><br><img alt="" height="322" src="https://images2.imgbox.com/57/28/p5eWFV4W_o.png" width="708"><br><img alt="" height="316" src="https://images2.imgbox.com/7e/07/bgUxDpGv_o.png" width="707"></p> 
<p>  <strong>  route命令</strong>：路由管理命令<br>         查看：<span style="color:#956fe7;">route -n</span><br>         添加：<span style="color:#956fe7;">route add [ -net | -host ] target [ netmask Nm ] [ gw Gw ] [[dev] If]</span><br>         例子：目标：192.168.1.3    网关：172.16.0.1  <br>         route add -host 192.168.1.3 gw 172.16.0.1 dev eth0<br>                    目标：192.168.0.0   网关：172.16.0.1<br>         route add -net 192.168.0.0 netmask 255.255.255.0 gw 172.16.0.1 dev eth0<br>         route add -net 192.168.0.0/24 gw 172.16.0.1 dev eth0<br>                    默认路由：<br>         route add -net 0.0.0.0 netmask 0.0.0.0 gw 172.16.0.1<br>         <span style="color:#956fe7;">route add default gw 172.16.0.1</span><br>         本地网关一定是与本地地址在同一网络段的地址，否则无法直接将报文发给网关<br>         删除：<span style="color:#956fe7;">route del [ -net | -host] target [ gw Gw ] [ netmask Nm ] [ [dev] If ]</span><br>         route del -host 192.168.1.3<br>         route del -net 192.168.0.0 netmask 255.255.255.0<br><img alt="" height="200" src="https://images2.imgbox.com/c1/9d/Z8y2CoxP_o.png" width="709"></p> 
<p>不加-n，会将地址进行反解成名字。<br><img alt="" height="471" src="https://images2.imgbox.com/dc/c4/xpNhX7QV_o.png" width="841"><br><img alt="" height="614" src="https://images2.imgbox.com/7d/34/fJZ5lgsm_o.png" width="703"></p> 
<p>    DNS服务器指定：<br>        <span style="color:#1c7331;"> /etc/resolv.conf</span><br>             <span style="color:#956fe7;">nameserver DNS_SERVER_IP1</span><br>             nameserver DNS_SERVER_IP2<br>             nameserver DNS_SERVER_IP3<br>         正解：FQDN --&gt; IP， <span style="color:#956fe7;"> dig -t A FQDN</span>；   <span style="color:#956fe7;">host -t A FQDN</span><br>         反解：IP --&gt; FQDN，  dig -x IP；            host -t PTR IP<br>            FQDN：www.baidu.com<br><img alt="" height="730" src="https://images2.imgbox.com/6f/72/NBXjG0i3_o.png" width="856"><br><img alt="" height="402" src="https://images2.imgbox.com/eb/3b/J4TJbo2y_o.png" width="650"></p> 
<p>    <strong>netstat命令</strong>：Print network connections, routing tables, interface statistics, masquerade connections, and multicast memberships</p> 
<p>        显示网络连接：<br>             <span style="color:#956fe7;">netstat [ --tcp | -t ] [ --udp | -u ] [ --raw | -w] [ --listening | -l ] [ --all | -a ] [ --numeric | -n ] [ --numeric-hosts ] [ --numeric-ports ] [ --extend | -e[--extend|-e] ] [ --program | -p ]</span><br>             -t：tcp协议相关<br>             -u：udp协议相关<br>             -r：raw socket相关<br>             -l：处于监听状态<br>             -a：所有状态<br>             -n：以数字显示IP和端口，不反解<br>             -e：扩展格式<br>             -p：显示相关进程及PID<br>         常用组合：<span style="color:#1c7331;">-tan， -uan ， -tnl ， -unl</span><br><img alt="" height="702" src="https://images2.imgbox.com/89/ed/NnHOh5NR_o.png" width="805"></p> 
<p>        显示路由表：<br>             <span style="color:#956fe7;">netstat {--route | -r } [--extent | -e[--extend|-e] ] [ --verbose | -v ] [ --numeric | -n ]</span><br>             -r：显示内核路由表<br>             -n：数字格式<br><img alt="" height="272" src="https://images2.imgbox.com/d1/fe/fUs4y7MW_o.png" width="719"></p> 
<p>        显示接口统计数据：<br>            <span style="color:#956fe7;"> netstat { --interfaces | -I | -i } [ iface ] [--all | -a] [ --extend |－ｅ] [ --program | -p ]　[ --numeric | -n ]</span><br>                 # netstat -i 所有接口<br>                 # netstat -IIFACE 指定接口，-I和接口名之间无空格<br><img alt="" height="182" src="https://images2.imgbox.com/7c/05/RbbjJzJV_o.png" width="773"></p> 
<p>总结：ifcfg家族命令配置<br>     ifconfig/route/netstat<br>     ifup/ifdown<br><img alt="" height="263" src="https://images2.imgbox.com/fe/02/CkfCKSj3_o.png" width="710"></p> 
<p><strong>配置Linux网络属性：ip命令</strong><br><img alt="" height="596" src="https://images2.imgbox.com/52/4c/TQK0Qu83_o.png" width="475"></p> 
<p>    <span style="color:#956fe7;">ip [ OPTIONS ] OBJECT { COMMAND | help }</span><br>     OBJECT := {<!-- --><span style="color:#956fe7;"> link </span>| <span style="color:#956fe7;">addr</span> | addrlabel | <span style="color:#956fe7;">route</span> | rule | neigh | tunnel | maddr | mroute | monitor }</p> 
<p>    link OBJECT：<br>         <span style="color:#956fe7;">ip link <strong>show</strong> [ dev  IFACE] [ up ]</span>      [ dev  IFACE]显示指定接口，[ up ]显示启用的接口<br>         <span style="color:#956fe7;">ip link <strong>set</strong> dev IFACE  [up | down]  </span><br><img alt="" height="236" src="https://images2.imgbox.com/64/af/zyT1Wh5C_o.png" width="811"><br><img alt="" height="369" src="https://images2.imgbox.com/68/d0/gD6pwbhw_o.png" width="721"></p> 
<p><span style="color:#956fe7;">    </span>addr OBJECT<br>        <span style="color:#956fe7;"> ip addr {add | del } IFADDR dev STRING   [label LABEL] [scope {global | link | host }] [broadcast ADDRESS]</span><br>             add是添加一个地址，原来配置一个ip，则又添加一个IP地址<br>              [label LABEL] ：添加地址时指明网卡别名<br>              [scope {global | link | host }] ：指明作用域<br>                  global：全局可用；link：仅链接可用；host：本机可用<br>              [broadcast ADDRESS] ：指明广播地址<br>         <span style="color:#956fe7;">ip addr show [dev IFACE] [label PATTERN] [primary and secondary]</span><br><span style="color:#494949;">            显示IP地址</span></p> 
<p>       <span style="color:#956fe7;"> ip addr flush dev IFACE  label PATTERN</span><br><span style="color:#494949;">            清空IP地址</span><br><img alt="" height="436" src="https://images2.imgbox.com/c8/c6/QnY5WGrr_o.png" width="795"><br><img alt="" height="168" src="https://images2.imgbox.com/8c/35/C7C9wYEg_o.png" width="796"><br><img alt="" height="185" src="https://images2.imgbox.com/db/be/6wA3qGoJ_o.png" width="794"><br><img alt="" height="169" src="https://images2.imgbox.com/96/80/OT5OZVPS_o.png" width="794"><br><img alt="" height="660" src="https://images2.imgbox.com/ca/b1/qm20xlPM_o.png" width="800"><br><img alt="" height="266" src="https://images2.imgbox.com/56/b3/sfsRXdGx_o.png" width="793"></p> 
<p>    route OBJECT：<br>        <span style="color:#956fe7;"> ip route  add</span><br>             添加路由：<span style="color:#956fe7;">ip route add TARGET via GW dev IFACE src SOURCE_IP</span><br>                 TARGET：主机路由：IP；网络路由：NETWORK/MASK；默认网关：default<br>        <span style="color:#956fe7;"> ip route delete</span><br>             删除路由：ip route del TARGET <br>        <span style="color:#956fe7;"> ip route show</span><br>        <span style="color:#956fe7;"> ip route flush</span><br>             [dev IFACE]<br>             [via PREFIX]<br><img alt="" height="110" src="https://images2.imgbox.com/28/82/VeCC4Gpp_o.png" width="764"><br><img alt="" height="220" src="https://images2.imgbox.com/0c/a6/8PnaLlSx_o.png" width="764"><br><img alt="" height="295" src="https://images2.imgbox.com/23/1e/4RPwutSA_o.png" width="756"></p> 
<p>ss命令：网络查看工具<br>     <span style="color:#956fe7;">ss [OPTION]... [FILTER]</span><br>        OPTIONS：<br>         -t：tcp协议相关<br>         -u：udp协议相关<br>         -w：裸套接字<br>         -x：unix sock相关<br>         -l：listen状态的连接<br>         -a：所有<br>         -n：数字格式<br>         -p：相关的程序及PID<br>         -e：扩展的信息<br>         -m：内存用量<br>         -o：计时器信息<br>         FILTER：=[state TCP-STATE ] [ EXPRESSION ]<br>         LISTEN：监听<br>         ESTABLISHED：已经建立的连接<br>         FIN_WAIT_1：<br>         FIN_WAIT_2：<br>         SYN_SENT：<br>         SYN_RECV：<br>         CLOSED：<br>         EXPRESSION：<br>         dport=<br>         sport=<br>         示例：‘（ dport=：ssh or sport =：ssh）’<br> 常用组合：-tan，tanl，-tanlp，-uan<br><img alt="" height="363" src="https://images2.imgbox.com/86/69/g4DzEqsi_o.png" width="712"><br><img alt="" height="112" src="https://images2.imgbox.com/c3/c4/iVsqn23g_o.png" width="707"><br><img alt="" height="168" src="https://images2.imgbox.com/ee/6b/g72hh8zu_o.png" width="694"></p> 
<p><strong>Linux网络属性配置（3）：修改配置文件</strong><br>    IP、MASK、GW、DNS相关配置文件： <span style="color:#1c7331;"> /etc/sysconfig/network-scripts/ifcfg-IFACE</span><br>     路由相关的配置文件：<span style="color:#1c7331;">/etc/syscofnig/network-scripts/route-IFACE</span></p> 
<p>    <span style="color:#1c7331;">/etc/sysconfig/network-scripts/ifcfg-IFACE</span>：<br>         DEVICE="" ：此配置文件应用到的设备；<br>         HWADDR：对应设备的MAC地址；<br>         BOOTPRORO：激活此设备时使用的地址配置协议，常用的dhcp，static，none，bootp<br>         NM_CONTROLLED：NM是NetworkManager的简写，此网卡是否接受NM控制，CentOS6建议为"no"<br>         ONBOOT：在系统引导时是否激活此设备<br>         TYPE：接口类型，常见有Ethernet，Bridge，<br>         UUID：设备的唯一标识<br><br>         IPADDR：指明IP地址<br>         NETMASK：子网掩码<br>         GATEWAY：默认网关<br>         DNS1：第一个DNS服务器指向<br>         DNS2：<br>         USERCTL：普通用户是否可控制此设备；<br>         PEERDNS：如果BOOTPROTO的值为“dhcp”，是否允许dhcp server分配的dns服务器指向信息直接覆盖至<span style="color:#1c7331;">/etc/resolv.conf</span>文件中。</p> 
<p>    <span style="color:#1c7331;">/etc/sysconfig/network-scripts/route-IFACE</span><br>     两种风格：<br>         （1）TARGET via GW<br>         （2）每三行定义一条路由<br>             ADDRESS#=TARGET<br>             NETMASK#=mask<br>             GATEWAY#=GW<br><img alt="" height="598" src="https://images2.imgbox.com/b4/5c/pIzwKoa3_o.png" width="717"></p> 
<p>给网卡配置多地址：<br>     ifconfig：<br>         <span style="color:#956fe7;">ifconfig IFACE_ALIAS</span><br>             ifconfig eth0:0 192.168.0.22/24<br>     ip<br>         <span style="color:#956fe7;">ip addr add</span><br>     配置文件：<br>        <span style="color:#1c7331;"> ifcfg-IFACE_ALIAS</span><br>             DEVICE=IFACE_ALIAS<br>     注意：网卡别名不能使用dhcp协议引导；<br><img alt="" height="420" src="https://images2.imgbox.com/01/cf/LeTokxJ3_o.png" width="713"></p> 
<p>Linux网络属性配置的tui（text user interface）：<br>     <span style="color:#956fe7;">system-config-network-tui</span><br><img alt="" height="284" src="https://images2.imgbox.com/c9/a2/wcaeVxSG_o.png" width="333"><br>     还可以使用<span style="color:#956fe7;">setup</span>命令，然后调用<span style="color:#1c7331;">Network configuration</span> 项<br><img alt="" height="247" src="https://images2.imgbox.com/ce/9a/wnplpunz_o.png" width="338"></p> 
<p>注意：要重新启动网络服务才能生效。<br><span style="color:#956fe7;">ifconfig eth0 down;ifconfig eth0 up<br> service network restart   --&gt;  /etc/rc.d/init.d/network restart</span></p> 
<p>配置当前主机的主机名：<br>     命令：<span style="color:#956fe7;">hostname [HOSTNAME]</span><br>     配置文件：<span style="color:#1c7331;">/etc/sysconfig/network</span><br>         HOSTNAME=<br><img alt="" height="309" src="https://images2.imgbox.com/1a/53/yjVe4iAy_o.png" width="804"></p> 
<p>网络接口识别并命名相关的udev配置文件：<br>     <span style="color:#1c7331;">/etc/udev/rules.d/70-persistent-net.rules</span><br>         文件中修改NAME=的值，修改后需要卸载和重新装载网卡驱动，才能生效<br>     卸载网络驱动：<span style="color:#956fe7;">modprobe -r e1000</span><br>     装载网卡驱动：<span style="color:#956fe7;">modprobe e1000</span></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/238877097a7bd06b37f9a056ac8c9140/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PnP解算及SolvePnp用法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/065c12a3bdd71fbc8fe9915e1c569b3a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">鸿蒙学习笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>