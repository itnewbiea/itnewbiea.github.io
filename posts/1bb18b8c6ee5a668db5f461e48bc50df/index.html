<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue-cli搭建项目及一些打包配置 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue-cli搭建项目及一些打包配置" />
<meta property="og:description" content="vu-cli vue create快速搭建项目 版本信息：Vue CLI v4.5.12
vue create projectName 模式和环境变量 模式 1》开发模式
vue-cli-service serve 2》测试模式
vue-cli-service test:unit 3》生产模式
vue-cli-service build 和 vue-cli-service test:e2e 当我们运行 vue-cli-service 时，环境变量从对应的环境文件中读取；如果文件内部不包含 NODE_ENV 变量，它的值将取决于模式，例如，在 production 模式下被设置为 &#34;production&#34;，在 test 模式下被设置为 &#34;test&#34;，默认则是 &#34;development&#34;
--mode 选项参数为命令行修改默认的模式，可以自己设置模式；比如我下面设置了devtest模式
&#34;devtest&#34; : &#34;vue-cli-service build --mode devtest&#34; 环境变量 然后我在项目的根目录下(新建 .env.devtest 文件)配置devtest环境的环境变量
一个环境文件只包含环境变量的“键=值”对
VUE_APP_MODE=&#34;devtest&#34; 设置环境变量的文件
.env # 在所有的环境中被载入 .env.local # 在所有的环境中被载入，但会被 git 忽略 .env.[mode] # 只在指定的模式中被载入 .env.[mode].local # 只在指定的模式中被载入，但会被 git 忽略 使用环境变量
process.env.VUE_APP_MODE 注意：不要在你的应用程序中存储任何机密信息（例如私有 API 密钥）；环境变量会随着构建打包嵌入到输出代码，意味着任何人都有机会能够看到它" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1bb18b8c6ee5a668db5f461e48bc50df/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-30T12:24:16+08:00" />
<meta property="article:modified_time" content="2023-12-30T12:24:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue-cli搭建项目及一些打包配置</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="vucli_0"></a>vu-cli</h2> 
<h4><a id="vue_create_2"></a>vue create快速搭建项目</h4> 
<p>版本信息：Vue CLI v4.5.12</p> 
<pre><code>vue create projectName
</code></pre> 
<h4><a id="_10"></a>模式和环境变量</h4> 
<h5><a id="_12"></a>模式</h5> 
<p>1》开发模式</p> 
<pre><code>vue-cli-service serve
</code></pre> 
<p>2》测试模式</p> 
<pre><code>vue-cli-service test:unit
</code></pre> 
<p>3》生产模式</p> 
<pre><code>vue-cli-service build 和 vue-cli-service test:e2e
</code></pre> 
<p>当我们运行 vue-cli-service 时，环境变量从对应的环境文件中读取；如果文件内部不包含 <code>NODE_ENV</code> 变量，它的值将取决于模式，例如，在 <code>production</code> 模式下被设置为 <code>"production"</code>，在 <code>test</code> 模式下被设置为 <code>"test"</code>，默认则是 <code>"development"</code></p> 
<p><code>--mode</code> 选项参数为命令行修改默认的模式，可以自己设置模式；比如我下面设置了devtest模式</p> 
<pre><code>"devtest" : "vue-cli-service build --mode devtest"
</code></pre> 
<h5><a id="_40"></a>环境变量</h5> 
<p>然后我在项目的根目录下(新建 .env.devtest 文件)配置devtest环境的环境变量</p> 
<p>一个环境文件只包含环境变量的“键=值”对</p> 
<pre><code>VUE_APP_MODE="devtest"
</code></pre> 
<p>设置环境变量的文件</p> 
<pre><code>.env                # 在所有的环境中被载入
.env.local          # 在所有的环境中被载入，但会被 git 忽略
.env.[mode]         # 只在指定的模式中被载入
.env.[mode].local   # 只在指定的模式中被载入，但会被 git 忽略
</code></pre> 
<p>使用环境变量</p> 
<pre><code>process.env.VUE_APP_MODE
</code></pre> 
<p>注意：不要在你的应用程序中存储任何机密信息（例如私有 API 密钥）；环境变量会随着构建打包嵌入到输出代码，意味着任何人都有机会能够看到它</p> 
<p>只有 <strong>NODE_ENV，BASE_URL和以 VUE_APP_ 开头</strong>的变量将通过 <code>webpack.DefinePlugin</code> 静态地嵌入到<em>客户端侧</em>的代码中。</p> 
<h4><a id="vueconfigjs_69"></a>vue.config.js文件配置</h4> 
<p>与package.json同级的可选配置文件，当没有时，会被@vue/cli-service自动加载</p> 
<h5><a id="outputDir_73"></a>路径-outputDir</h5> 
<p>打包生成的包名及路径（ npm run build（vue-cli-service build）后生成的生产环境构建文件的目录 ）</p> 
<p>相当于设置webpack的 output.path</p> 
<table><thead><tr><th>outputDir的值</th><th>生成的路径</th><th>说明</th></tr></thead><tbody><tr><td>“dist”</td><td>打包生成的文件全部都放在根目录下的dist目录下</td><td>默认值</td></tr><tr><td>“./packageName”</td><td>生成的包名时packageName,打包内容都再这个目录下</td><td>vue.config.js就在根目录下，所以使用相对路径也在根目录下</td></tr><tr><td>“./outcatalog/packageName”</td><td>打包生成的文件全部都放在outcatalog/packageName目录下</td><td>根目录下的outcatalog下的packageName目录</td></tr></tbody></table> 
<p><strong>路径-publicPath</strong></p> 
<p><strong>作用</strong>：项目部署的基础路径</p> 
<p><strong>默认值</strong> : ‘“/”</p> 
<p>用法和 webpack 本身的 output.publicPath一样</p> 
<p>它不会影响打包生成的文件的目录，它修改的是html文件对其他静态资源的引用路径</p> 
<p><strong>场景应用</strong>：</p> 
<p>假设域名是：https://www.test.com<br> 1.‘/’：默认部署在域名的根部。即：https://www.vueconfig.com/<br> 2./childrenpath/：认为部署在https://www.vueconfig.com/childrenpath/的子路径下<br> 3.‘./’：相对路径（打包后部署到服务器中，从index.html开始计算的相对路径）<br> 4.process.env.NODE_ENV === ‘production’ ? ‘/生产环境路径/’ : ’ ':不同开发环境的切换模式。<br> 5.NODE_ENV：Node.js 暴露给执行脚本的系统环境变量。通常用于确定在开发环境还是生产环境。</p> 
<p>这个值也可以被设置为空字符串 (<code>''</code>) 或是相对路径 (<code>'./'</code>)，这样所有的资源都会被链接为相对路径，这样打出来的包可以被部署在任意路径</p> 
<p>publicPath的限制</p> 
<p>当使用历史模式路由或构建多页面应用时，应避免使用相对路径的publicPath</p> 
<h5><a id="assetsDir_111"></a>路径-assetsDir</h5> 
<p><strong>作用</strong>：放置生成的静态资源 (js、css、img、fonts) 的 (相对于 <code>outputDir</code> 的) 目录</p> 
<p>它时相对与outputDir目录 的</p> 
<p><strong>例如</strong>：打包生成的js、css、img、fonts这些静态资源想要放到outputDir目录下的static目录下</p> 
<p>index.html的输出路径不由它控制</p> 
<pre><code>assetsDir: "static"
</code></pre> 
<h5><a id="indexPath_125"></a>路径-indexPath</h5> 
<p>默认值Default: “index.html”</p> 
<p>一般是不需要修改的</p> 
<p>指定生成的 <code>index.html</code> 的输出路径 (相对于 outputDir )。也可以是一个绝对路径</p> 
<h5><a id="lintOnSave_133"></a>lintOnSave</h5> 
<p>是否在开发环境下通过 eslint-loader 在每次保存时 lint 代码。这个值会在 @vue/cli-plugin-eslint被安装之后生效</p> 
<p>1.false：关闭 elsint 检测<br> 2.true：开启每次保存都进行检测，效果与warning一样。（一般选择true）<br> 3.‘warning’：开启每次保存都进行检测，lint 报错信息将显示到控制台命令行，编译并不会失败。<br> 4.‘default’：开启每次保存都进行检测，lint 报错信息将显示到浏览器页面上，且编译失败。<br> 5.‘error’：开启每次保存都进行检测，lint 报错信息以及警告信息将显示到浏览器页面上，且编译失败</p> 
<h5><a id="devServer_143"></a>devServer</h5> 
<p>对应webpack的devServer配置</p> 
<h5><a id="configureWebpack_147"></a>configureWebpack</h5> 
<p>如果这个值是一个对象，则会通过 <a href="https://github.com/survivejs/webpack-merge">webpack-merge</a> 合并到最终的配置中。</p> 
<p>如果这个值是一个函数，则会接收被解析的配置作为参数。该函数既可以修改配置并不返回任何东西，也可以返回一个被克隆或合并过的配置版本。</p> 
<p><strong>URL 转换规则</strong></p> 
<p>如果 URL 是一个绝对路径 (例如 <code>/images/foo.png</code>)，它将会被保留不变</p> 
<p>如果 URL 以 <code>.</code> 开头，它会作为一个相对模块请求被解释且基于你的文件系统中的目录结构进行解析</p> 
<p>如果 URL 以 <code>@</code> 开头，它也会作为一个模块请求被解析</p> 
<h4><a id="VUE_161"></a>构建VUE多页面应用</h4> 
<p>vue.config.js文件</p> 
<pre><code> pages: {
    index: {
      entry: "src/views/secondPage/index.js",
      template: "public/index.html",
      filename: "index.html",
      title: "登录页面",
    },

    firstContent: {
      entry: "src/views/firstPage/index.js",
      template: "public/index.html",
      filename: "firstContent.html",
      title: "内容页面一",
    },

    secondContent: {
      entry: "src/views/thirdPage/index.js",
      template: "public/index.html",
      filename: "secondContent.html",
      title: "内容页面二",
    },
  },
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/81b18743b64b9259dbea65777132b19c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32 智能家居项目 FreeRTOS 密码锁 指纹锁 GSM远程控制 设计报告</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aa04d7240c95d46604bcdd337bc5e052/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">软件集成测试</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>