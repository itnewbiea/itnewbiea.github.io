<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€NiosIIè®­ç»ƒã€‘ç¬¬äº”ç¯‡ã€FPGAé©±åŠ¨DHT11 - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ã€NiosIIè®­ç»ƒã€‘ç¬¬äº”ç¯‡ã€FPGAé©±åŠ¨DHT11" />
<meta property="og:description" content="ç›®å½• ç¬¬ä¸€éƒ¨åˆ†ã€å‰è¨€
1ã€é—²è¯
ç¬¬äºŒéƒ¨åˆ†ã€é¢˜ç›®è¦æ±‚
1ã€å›¾ç‰‡
2ã€æ–‡å­—æè¿°
3ã€dht11çŸ¥è¯†
ç¬¬ä¸‰éƒ¨åˆ†ã€å·¥ç¨‹ä»£ç 
1ã€è½¯æ ¸çš„æ­å»º
2ã€é¡¶å±‚æ–‡ä»¶çš„ä»£ç 
3ã€Ecpliseä»£ç 
ç¬¬å››éƒ¨åˆ†ã€æ€»ç»“
1ã€æ•ˆæœæ¼”ç¤º
2ã€æ„Ÿæƒ³
3ã€å®Œæ•´å·¥ç¨‹
ç¬¬ä¸€éƒ¨åˆ†ã€å‰è¨€ 1ã€é—²è¯ è¿˜æ˜¯ä¸€æ ·ï¼Œè¿™ä¸ªè®¾è®¡ä¹Ÿæ˜¯æˆ‘ä»¬ã€ŠSOPCæŠ€æœ¯åŠåº”ç”¨ã€‹è¯¾ç¨‹ç»“æŸçš„æœŸæœ«ä½œä¸šã€‚æˆ‘è‡ªå·±çš„æ˜¯è€å¸ˆé¢˜åº“é‡Œçš„ç¬¬é¢˜ã€é©±åŠ¨AD9854è¿™ä¸ªæ¨¡å—ï¼Œé¢˜ç›®è¦æ±‚åœ¨ç¬¬ä¸€ç¯‡å·²ç»è¯´åˆ°äº†ï¼Œæƒ³å›å»çœ‹çš„é“å­ä»¬å¯ä»¥å›å»çœ‹ã€‚
è¿™ä¸€é¢˜æ˜¯æˆ‘å®¤å‹çš„ï¼ŒæŠ¥é…¬æ˜¯ç»™æˆ‘ä¹°ä¸€æ¯å¥¶èŒ¶ï¼ˆç»“æœæ²¡ç»™ï¼Œæˆ‘äºå¤§å‘äº†ğŸ˜­ğŸ˜­ğŸ˜­ï¼‰ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š
ç¬¬äºŒéƒ¨åˆ†ã€é¢˜ç›®è¦æ±‚ 1ã€å›¾ç‰‡ 2ã€æ–‡å­—æè¿° ä½¿ç”¨FPGAè°ƒé€šDHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼Œå¹¶èƒ½å¤Ÿå°†æ¸©åº¦å’Œæ¹¿åº¦å®æ—¶æ˜¾ç¤ºåœ¨lcdä¸Šï¼Œç³»ç»Ÿéœ€è¦ä½¿ç”¨ucosiiæ“ä½œç³»ç»Ÿã€‚
3ã€dht11çŸ¥è¯† å…³äºDHT11çš„çŸ¥è¯†ï¼Œä½ åˆ°CSDNæœä¸€ä¸‹ï¼Œå‡ºæ¥ä¸€å¤§æŠŠï¼Œæœ‰äº›åšä¸»å¾ˆè¯¦ç»†çš„è®²è¿°äº†è¿™ä¸ªæ¨¡å—çš„å·¥ä½œåŸç†ï¼Œæˆ‘è¿™é‡Œå°±ä¸åšè¯¦è¿°äº†ã€‚
ç¬¬ä¸‰éƒ¨åˆ†ã€å·¥ç¨‹ä»£ç  1ã€è½¯æ ¸çš„æ­å»º 2ã€é¡¶å±‚æ–‡ä»¶çš„ä»£ç  module AC620_GHRD( input wire clk, // clk.clk input wire reset_n, // reset.reset_n output wire lcd_rst, // lcd_rst.export output wire lcd_rd_n, // lcd_rd.export output wire lcd_bl, // lcd_bl.export output wire lcd_wr_n, // lcd_wr.export output wire lcd_rs, // lcd_rs.export output wire lcd_cs_n, // lcd_cs." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/65473526796c59d8680e7ef9eef9208c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-16T09:00:02+08:00" />
<meta property="article:modified_time" content="2020-12-16T09:00:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€NiosIIè®­ç»ƒã€‘ç¬¬äº”ç¯‡ã€FPGAé©±åŠ¨DHT11</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="main-toc"><strong>ç›®å½•</strong></h3> 
<p id="%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%E3%80%81%E5%89%8D%E8%A8%80-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%E3%80%81%E5%89%8D%E8%A8%80" rel="nofollow">ç¬¬ä¸€éƒ¨åˆ†ã€å‰è¨€</a></p> 
<p id="1%E3%80%81%E9%97%B2%E8%AF%9D-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E9%97%B2%E8%AF%9D" rel="nofollow">1ã€é—²è¯</a></p> 
<p id="%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%E3%80%81%E9%A2%98%E7%9B%AE%E8%A6%81%E6%B1%82-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%E3%80%81%E9%A2%98%E7%9B%AE%E8%A6%81%E6%B1%82" rel="nofollow">ç¬¬äºŒéƒ¨åˆ†ã€é¢˜ç›®è¦æ±‚</a></p> 
<p id="1%E3%80%81%E5%9B%BE%E7%89%87-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E5%9B%BE%E7%89%87" rel="nofollow">1ã€å›¾ç‰‡</a></p> 
<p id="2%E3%80%81%E6%96%87%E5%AD%97-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E6%96%87%E5%AD%97" rel="nofollow">2ã€æ–‡å­—æè¿°</a></p> 
<p id="3%E3%80%81dht11%E7%9F%A5%E8%AF%86-toc" style="margin-left:80px;"><a href="#3%E3%80%81dht11%E7%9F%A5%E8%AF%86" rel="nofollow">3ã€dht11çŸ¥è¯†</a></p> 
<p id="%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86%E3%80%81%E5%B7%A5%E7%A8%8B%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86%E3%80%81%E5%B7%A5%E7%A8%8B%E4%BB%A3%E7%A0%81" rel="nofollow">ç¬¬ä¸‰éƒ¨åˆ†ã€å·¥ç¨‹ä»£ç </a></p> 
<p id="1%E3%80%81%E8%BD%AF%E6%A0%B8%E7%9A%84%E6%90%AD%E5%BB%BA-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E8%BD%AF%E6%A0%B8%E7%9A%84%E6%90%AD%E5%BB%BA" rel="nofollow">1ã€è½¯æ ¸çš„æ­å»º</a></p> 
<p id="%C2%A02%E3%80%81%E9%A1%B6%E5%B1%82%E6%96%87%E4%BB%B6%E7%9A%84%E4%BB%A3%E7%A0%81-toc" style="margin-left:80px;"><a href="#%C2%A02%E3%80%81%E9%A1%B6%E5%B1%82%E6%96%87%E4%BB%B6%E7%9A%84%E4%BB%A3%E7%A0%81" rel="nofollow">Â 2ã€é¡¶å±‚æ–‡ä»¶çš„ä»£ç </a></p> 
<p id="%C2%A03%E3%80%81Ecplise%E4%BB%A3%E7%A0%81-toc" style="margin-left:80px;"><a href="#%C2%A03%E3%80%81Ecplise%E4%BB%A3%E7%A0%81" rel="nofollow">Â 3ã€Ecpliseä»£ç </a></p> 
<p id="%C2%A0%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%E3%80%81%E6%80%BB%E7%BB%93-toc" style="margin-left:40px;"><a href="#%C2%A0%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%E3%80%81%E6%80%BB%E7%BB%93" rel="nofollow">Â ç¬¬å››éƒ¨åˆ†ã€æ€»ç»“</a></p> 
<p id="1%E3%80%81%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA" rel="nofollow">1ã€æ•ˆæœæ¼”ç¤º</a></p> 
<p id="2%E3%80%81%E6%84%9F%E6%83%B3-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E6%84%9F%E6%83%B3" rel="nofollow">2ã€æ„Ÿæƒ³</a></p> 
<p id="3%E3%80%81%E5%AE%8C%E6%95%B4%E5%B7%A5%E7%A8%8B-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E5%AE%8C%E6%95%B4%E5%B7%A5%E7%A8%8B" rel="nofollow">3ã€å®Œæ•´å·¥ç¨‹</a></p> 
<hr id="hr-toc"> 
<h3 id="%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%E3%80%81%E5%89%8D%E8%A8%80">ç¬¬ä¸€éƒ¨åˆ†ã€å‰è¨€</h3> 
<h4 id="1%E3%80%81%E9%97%B2%E8%AF%9D">1ã€é—²è¯</h4> 
<p style="text-indent:33px;">è¿˜æ˜¯ä¸€æ ·ï¼Œè¿™ä¸ªè®¾è®¡ä¹Ÿæ˜¯æˆ‘ä»¬<strong>ã€ŠSOPCæŠ€æœ¯åŠåº”ç”¨ã€‹</strong>è¯¾ç¨‹ç»“æŸçš„æœŸæœ«ä½œä¸šã€‚æˆ‘è‡ªå·±çš„æ˜¯è€å¸ˆé¢˜åº“é‡Œçš„ç¬¬é¢˜ã€é©±åŠ¨AD9854è¿™ä¸ªæ¨¡å—ï¼Œé¢˜ç›®è¦æ±‚åœ¨ç¬¬ä¸€ç¯‡å·²ç»è¯´åˆ°äº†ï¼Œæƒ³å›å»çœ‹çš„é“å­ä»¬å¯ä»¥å›å»çœ‹ã€‚</p> 
<p style="text-indent:33px;">è¿™ä¸€é¢˜æ˜¯æˆ‘å®¤å‹çš„ï¼ŒæŠ¥é…¬æ˜¯ç»™æˆ‘ä¹°ä¸€æ¯å¥¶èŒ¶ï¼ˆç»“æœæ²¡ç»™ï¼Œæˆ‘äºå¤§å‘äº†ğŸ˜­ğŸ˜­ğŸ˜­ï¼‰ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p> 
<p style="text-align:center;"><img alt="" height="787" src="https://images2.imgbox.com/62/bb/5CgRhP2X_o.jpg" width="590"></p> 
<h3 id="%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%E3%80%81%E9%A2%98%E7%9B%AE%E8%A6%81%E6%B1%82">ç¬¬äºŒéƒ¨åˆ†ã€é¢˜ç›®è¦æ±‚</h3> 
<h4 id="1%E3%80%81%E5%9B%BE%E7%89%87">1ã€å›¾ç‰‡</h4> 
<p style="text-align:center;"><img alt="" height="133" src="https://images2.imgbox.com/1e/98/hGVNCugi_o.png" width="935"></p> 
<h4>2ã€æ–‡å­—æè¿°</h4> 
<p style="text-indent:33px;">ä½¿ç”¨FPGAè°ƒé€šDHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼Œå¹¶èƒ½å¤Ÿå°†æ¸©åº¦å’Œæ¹¿åº¦å®æ—¶æ˜¾ç¤ºåœ¨lcdä¸Šï¼Œç³»ç»Ÿéœ€è¦ä½¿ç”¨ucosiiæ“ä½œç³»ç»Ÿã€‚</p> 
<h4 id="3%E3%80%81dht11%E7%9F%A5%E8%AF%86">3ã€dht11çŸ¥è¯†</h4> 
<p style="text-indent:33px;">å…³äº<strong>DHT11çš„çŸ¥è¯†</strong>ï¼Œä½ åˆ°CSDNæœä¸€ä¸‹ï¼Œ<strong>å‡ºæ¥ä¸€å¤§æŠŠ</strong>ï¼Œ<strong>æœ‰äº›åšä¸»å¾ˆè¯¦ç»†çš„è®²è¿°äº†è¿™ä¸ªæ¨¡å—çš„å·¥ä½œåŸç†</strong>ï¼Œæˆ‘è¿™é‡Œå°±ä¸åšè¯¦è¿°äº†ã€‚</p> 
<h3 id="%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86%E3%80%81%E5%B7%A5%E7%A8%8B%E4%BB%A3%E7%A0%81">ç¬¬ä¸‰éƒ¨åˆ†ã€å·¥ç¨‹ä»£ç </h3> 
<h4 id="1%E3%80%81%E8%BD%AF%E6%A0%B8%E7%9A%84%E6%90%AD%E5%BB%BA">1ã€è½¯æ ¸çš„æ­å»º</h4> 
<p style="text-align:center;"><img alt="" height="729" src="https://images2.imgbox.com/02/0b/qUJvnSWv_o.png" width="1200"></p> 
<h4 id="%C2%A02%E3%80%81%E9%A1%B6%E5%B1%82%E6%96%87%E4%BB%B6%E7%9A%84%E4%BB%A3%E7%A0%81">Â 2ã€é¡¶å±‚æ–‡ä»¶çš„ä»£ç </h4> 
<pre><code class="language-php">module AC620_GHRD(
	input  wire        clk,                           //                        clk.clk
	input  wire        reset_n,                     //                      reset.reset_n
	output wire        lcd_rst,                    //                    lcd_rst.export
	output wire        lcd_rd_n,                     //                     lcd_rd.export
	output wire        lcd_bl,                     //                     lcd_bl.export
	output wire        lcd_wr_n,                     //                     lcd_wr.export
	output wire        lcd_rs,                     //                     lcd_rs.export
	output wire        lcd_cs_n,                     //                     lcd_cs.export
	inout  wire [15:0] lcd_data,                     //                     lcd_db.export
	output wire        sdram_clk,                     //                  sdram_clk.clk
	output wire [11:0] sdram_addr,                        //                      sdram.addr
	output wire [1:0]  sdram_ba,                          //                           .ba
	output wire        sdram_cas_n,                       //                           .cas_n
	output wire        sdram_cke,                         //                           .cke
	output wire        sdram_cs_n,                        //                           .cs_n
	inout  wire [15:0] sdram_dq,                          //                           .dq
	output wire [1:0]  sdram_dqm,                         //                           .dqm
	output wire        sdram_ras_n,                       //                           .ras_n
	output wire        sdram_we_n,                         //                           .we_n
	input  wire        uart_0_rxd,                        //                     uart_0.rxd
	output wire        uart_0_txd,                        //                           .txd
	output wire        epcs_dclk,                         //                       epcs.dclk
	output wire        epcs_sce,                          //                           .sce
	output wire        epcs_sdo,                          //                           .sdo
	input  wire        epcs_data0,                         //                           .data0

	//å¯¹PIOç«¯å£è¿›è¡Œå®šä¹‰
	inout  wire        dht11,
   output wire [3:0]  led

);

    mysystem u0 (
		.clk_clk                           (clk),                           //                        clk.clk
		.reset_reset_n                     (reset_n),                     //                      reset.reset_n
      .uart_0_rxd                        (uart_0_rxd),                        //                     uart_0.rxd
      .uart_0_txd                        (uart_0_txd),                        //                           .txd
      .epcs_dclk                         (epcs_dclk),                         //                       epcs.dclk
      .epcs_sce                          (epcs_sce),                          //                           .sce
      .epcs_sdo                          (epcs_sdo),                          //                           .sdo
      .epcs_data0                        (epcs_data0),                        //
		.lcd_rst_export                    (lcd_rst),                    //                    lcd_rst.export
		.lcd_bl_export                     (lcd_bl),                     //                     lcd_bl.export
		.lcd_wr_n                          (lcd_wr_n),                          //                        lcd.wr_n
		.lcd_rd_n                          (lcd_rd_n),                          //                           .rd_n
		.lcd_data                          (lcd_data),                          //                           .data
		.lcd_rs                            (lcd_rs),                            //                           .rs
		.lcd_cs_n                          (lcd_cs_n),                           //  
		.sdram_clk_clk                     (sdram_clk),                     //                  sdram_clk.clk
		.altpll_0_phasedone_conduit_export (), // altpll_0_phasedone_conduit.export
		.altpll_0_locked_conduit_export    (),    //    altpll_0_locked_conduit.export
		.altpll_0_areset_conduit_export    (),    //    altpll_0_areset_conduit.export
		.sdram_addr                        (sdram_addr),                        //                      sdram.addr
		.sdram_ba                          (sdram_ba),                          //                           .ba
		.sdram_cas_n                       (sdram_cas_n),                       //                           .cas_n
		.sdram_cke                         (sdram_cke),                         //                           .cke
		.sdram_cs_n                        (sdram_cs_n),                        //                           .cs_n
		.sdram_dq                          (sdram_dq),                          //                           .dq
		.sdram_dqm                         (sdram_dqm),                         //                           .dqm
		.sdram_ras_n                       (sdram_ras_n),                       //                           .ras_n
		.sdram_we_n                        (sdram_we_n),                        //                           .we_n
	   
		//æ·»åŠ çš„PIOç«¯å£
		.dht11_export                      (dht11),   //     dht11.export
      .led_export                        (led)      //       led.export
	
	);

endmodule</code></pre> 
<h4 id="%C2%A03%E3%80%81Ecplise%E4%BB%A3%E7%A0%81">Â 3ã€Ecpliseä»£ç </h4> 
<p><strong>dht11.cä»£ç </strong></p> 
<pre><code class="language-cpp">#include "dht11.h"
//å¤ä½DHT11
void DHT11_Rst(void)
{
	IOWR_ALTERA_AVALON_PIO_DIRECTION(DHT11_BASE, 1);//æ–¹å‘ä¸ºè¾“å‡º
	IOWR_ALTERA_AVALON_PIO_DATA(DHT11_BASE, 1);
	usleep(25);//åˆå§‹25usä¸ºé«˜ç”µå¹³

//	DHT11_IO_OUT(); 	//SET OUTPUT
//    DHT11_DQ_OUT=0; 	//æ‹‰ä½DQ
//    delay_ms(20);    	//æ‹‰ä½è‡³å°‘18ms
	IOWR_ALTERA_AVALON_PIO_DATA(DHT11_BASE, 0);
	usleep(18000);

//    DHT11_DQ_OUT=1; 	//DQ=1
//	delay_us(30);     	//ä¸»æœºæ‹‰é«˜20~40us
	IOWR_ALTERA_AVALON_PIO_DATA(DHT11_BASE, 1);
	usleep(30);
}
//ç­‰å¾…DHT11çš„å›åº”
//è¿”å›1:æœªæ£€æµ‹åˆ°DHT11çš„å­˜åœ¨
//è¿”å›0:å­˜åœ¨
alt_u8 DHT11_Check(void)
{
	alt_u8 retry=0;
	IOWR_ALTERA_AVALON_PIO_DIRECTION(DHT11_BASE, 0);//æ–¹å‘ä¸ºè¾“å…¥
    while (IORD_ALTERA_AVALON_PIO_DATA(DHT11_BASE)&amp;&amp;retry&lt;100)//DHT11ä¼šæ‹‰ä½40~80us
	{
		retry++;
		usleep(1);
	};
	if(retry&gt;=100)return 1;
	else retry=0;
    while (!IORD_ALTERA_AVALON_PIO_DATA(DHT11_BASE)&amp;&amp;retry&lt;100)//DHT11æ‹‰ä½åä¼šå†æ¬¡æ‹‰é«˜40~80us
	{
		retry++;
		usleep(1);
	};
	if(retry&gt;=100)return 1;
	return 0;
}

//ä»DHT11è¯»å–ä¸€ä¸ªä½
//è¿”å›å€¼ï¼š1/0
alt_u8 DHT11_Read_Bit(void)
{
	alt_u8 retry=0;
	IOWR_ALTERA_AVALON_PIO_DIRECTION(DHT11_BASE, 0);//æ–¹å‘ä¸ºè¾“å…¥
	while(IORD_ALTERA_AVALON_PIO_DATA(DHT11_BASE)&amp;&amp;retry&lt;100)//ç­‰å¾…å˜ä¸ºä½ç”µå¹³
	{
		retry++;
//		delay_us(1);
		usleep(1);
	}
	retry=0;
	while(!IORD_ALTERA_AVALON_PIO_DATA(DHT11_BASE)&amp;&amp;retry&lt;100)//ç­‰å¾…å˜é«˜ç”µå¹³
	{
		retry++;
//		delay_us(1);
		usleep(1);
	}
//	delay_us(40);//ç­‰å¾…40us
	usleep(40);
	if(IORD_ALTERA_AVALON_PIO_DATA(DHT11_BASE))return 1;
	else return 0;
}

//ä»DHT11è¯»å–ä¸€ä¸ªå­—èŠ‚
//è¿”å›å€¼ï¼šè¯»åˆ°çš„æ•°æ®
alt_u8 DHT11_Read_Byte(void)
{
	alt_u8 i,dat;
    dat=0;
	for (i=0;i&lt;8;i++)
	{
   		dat&lt;&lt;=1;
	    dat|=DHT11_Read_Bit();
    }
    return dat;
}

//ä»DHT11è¯»å–ä¸€æ¬¡æ•°æ®
//temp:æ¸©åº¦å€¼(èŒƒå›´:0~50Â°)
//humi:æ¹¿åº¦å€¼(èŒƒå›´:20%~90%)
//è¿”å›å€¼ï¼š0,æ­£å¸¸;1,è¯»å–å¤±è´¥
alt_u8 DHT11_Read_Data(alt_u8 *temp,alt_u8 *humi)
{
	alt_u8 buf[5];
	alt_u8 i;
	DHT11_Rst();
	if(DHT11_Check()==0)
		{
			for(i=0;i&lt;5;i++)//è¯»å–40ä½æ•°æ®
			{
				buf[i]=DHT11_Read_Byte();
			}
			if((buf[0]+buf[1]+buf[2]+buf[3])==buf[4])
			{
				*humi=buf[0];
				*temp=buf[2];
			}
		}else return 1;
		return 0;
}

//åˆå§‹åŒ–DHT11çš„IOå£ DQ åŒæ—¶æ£€æµ‹DHT11çš„å­˜åœ¨
//è¿”å›1:ä¸å­˜åœ¨
//è¿”å›0:å­˜åœ¨
alt_u8 DHT11_Init(void)
{
	DHT11_Rst();  //å¤ä½DHT11
	return DHT11_Check();//ç­‰å¾…DHT11çš„å›åº”
}</code></pre> 
<p><strong>Â dht11.hä»£ç </strong></p> 
<pre><code class="language-cpp">#ifndef DHT11_H_
#define DHT11_H_

#include "stdlib.h"
#include "stdint.h"
#include "system.h"
#include "alt_types.h"
#include &lt;stdio.h&gt;  //printfçš„å¤´æ–‡ä»¶
#include "io.h"   //å‡½æ•°ç±»å‹
#include "altera_avalon_pio_regs.h"
#include "unistd.h"		//å»¶æ—¶å‡½æ•°çš„å¤´æ–‡ä»¶

//å¤ä½DHT11
void DHT11_Rst(void);
alt_u8 DHT11_Read_Data(alt_u8 *temp,alt_u8 *humi);
alt_u8 DHT11_Read_Byte(void);
alt_u8 DHT11_Read_Bit(void);
alt_u8 DHT11_Init(void);
alt_u8 DHT11_Check(void) ;

#endif /* DHT11_H_ */</code></pre> 
<p><strong>Â ä¸»å‡½æ•°ä»£ç </strong></p> 
<pre><code class="language-cpp">#include "lcd9341.h"
#include "dht11.h"
#include &lt;stdio.h&gt;

alt_u8 temperature;
alt_u8 humidity;

int main()
{
	printf("I am 666!\n");
 	LCD9341_Init();
 	unsigned char a1[20],a2[20];
 	while(DHT11_Init())	//DHT11åˆå§‹åŒ–
	{
		LCD_ShowString(30,130,"DHT11 Error");
		usleep(1000000);
	}
 	LCD_ShowString(30,130,"DHT11 OK    ");
	while(1)
	{
		DHT11_Read_Data(&amp;temperature,&amp;humidity);	//è¯»å–æ¸©æ¹¿åº¦å€¼
		printf("%d\n",temperature);
		printf("%d\n",humidity);
  		sprintf(a1,"Temp = %dC",temperature);
  		sprintf(a2,"Hum  = %d%%",humidity);
		LCD_ShowString(30,150,a1);
		LCD_ShowString(30,170,a2);
		usleep(1000000);
	}
}</code></pre> 
<h3 id="%C2%A0%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%E3%80%81%E6%80%BB%E7%BB%93">Â ç¬¬å››éƒ¨åˆ†ã€æ€»ç»“</h3> 
<h4 id="1%E3%80%81%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA">1ã€æ•ˆæœæ¼”ç¤º</h4> 
<p style="text-indent:33px;">DHT11çš„æ•°æ®è„šæ¥<strong><span style="color:#f33b45;">FPGAçš„R1ç®¡è„šã€‚</span></strong>è¿™é‡Œåªå±•ç¤ºå›¾ç‰‡ï¼Œè§†é¢‘æ–‡ä»¶æˆ‘å·²ç»ä¸Šä¼ åˆ°ç¾¤æ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥ç‚¹å‡»è¿™é‡Œçœ‹ä¸€ä¸‹æ¼”ç¤ºæ•ˆæœï¼ˆ<a href="https://live.csdn.net/v/121263" rel="nofollow">https://live.csdn.net/v/121263</a>ï¼‰</p> 
<p style="text-align:center;"><img alt="" height="540" src="https://images2.imgbox.com/1d/2a/gxr9XSfu_o.png" width="1007"></p> 
<p>Â </p> 
<h4 id="2%E3%80%81%E6%84%9F%E6%83%B3">2ã€æ„Ÿæƒ³</h4> 
<p style="text-indent:33px;">è°ƒè¯•è¿™ä¸ªæ¨¡å—ç¡®å®æå¾—æˆ‘å¤´éƒ½å¤§äº†ï¼Œè™½ç„¶åªç”¨äº†ä¸¤ä¸‰ä¸ªå°æ—¶ï¼Œä½†æ˜¯æå¾—æˆ‘å¿ƒçƒ¦æ°”ç‡¥ã€‚ä¸€å¼€å§‹æ˜¯ç§»æ¤CSDNä¸Šé¢çš„51çš„æ—¶åºï¼Œç»“æœå‡ºé—®é¢˜ï¼Œç„¶åæ²¡æ³•ï¼Œæˆ‘åˆé‡æ–°ç§»æ¤32ä¸Šé©±åŠ¨è¿™ä¸ªæ¨¡å—çš„æ—¶åºï¼Œè°ƒè¯•äº†å¥½åŠå¤©æ‰æå¥½ã€‚ï¼ˆå…¶å®è¿™ä¸¤ä¸ªæ—¶åºéƒ½æ˜¯ä¸€æ ·çš„ï¼Œç¬¬ä¸€æ¬¡å‡ºçš„é—®é¢˜ï¼Œæˆ‘æ‡’å¾—å›å»çœ‹ï¼Œå¤§æ¦‚æ˜¯å»¶æ—¶ä¸å‡†ï¼Œå¯¼è‡´æ—¶åºå‡ºäº†é—®é¢˜ï¼‰ã€‚</p> 
<p style="text-indent:33px;">è¿™ä¸ªæ¨¡å—å¯¹æ—¶åºçš„è¦æ±‚å¾ˆä¸¥æ ¼ï¼Œç„¶å<strong>æ£€æµ‹æ¸©åº¦æ—¶æ¸©åº¦å€¼ä¸Šå‡çš„å¾ˆæ…¢ï¼Œä½†æ˜¯æ£€æµ‹æ¹¿åº¦çš„å€¼è¿˜æ˜¯æŒºå¿«çš„ã€‚</strong></p> 
<h4 id="3%E3%80%81%E5%AE%8C%E6%95%B4%E5%B7%A5%E7%A8%8B">3ã€å®Œæ•´å·¥ç¨‹</h4> 
<p style="text-indent:33px;"><strong><span style="color:#86ca5e;">å«–å«–æ€ª</span></strong>æ—¶é—´ï¼Œè¿˜æ˜¯ä¸€æ ·ï¼Œæ‰«ç è¿›ç¾¤ï¼Œæˆ‘ä¼šæ”¾åœ¨ç¾¤èµ„æ–™é‡Œé¢ã€‚<strong>æˆ–è€…è®©æˆ‘<span style="color:#7c79e5;">éª—</span>ä½ å‡ ä¸ªç§¯åˆ†</strong>ï¼ˆ<a href="https://download.csdn.net/download/Learning1232/13695741">https://download.csdn.net/download/Learning1232/13695741</a>ï¼‰å†æˆ–è€…ç•™ä¸‹é‚®ç®±ï¼Œæˆ‘çœ‹åˆ°äº†å°±å‘ç»™ä½ ã€‚å½“ç„¶æœ‰é—®é¢˜ç›´æ¥ç•™è¨€ã€‚</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c297955fcb1db9bfc5eb93e67fcd1382/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">su -s /bin/sh -c â€œnova-manage api_db syncâ€œ novaæŠ¥é”™</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/155cd169c5787292bdca4ea07fc2325d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">pythonå®‰è£…sklearnï¼Œäº²æµ‹æœ‰æ•ˆï¼ï¼ï¼</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>