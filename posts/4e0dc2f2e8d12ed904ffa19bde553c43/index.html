<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Integer类源码解析之toString方法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Integer类源码解析之toString方法" />
<meta property="og:description" content="直接附上toString()方法源码
/** *@param i an integer to be converted to a string. *@param radix 字符串使用的基数(即指将i转成radix进制的字符串) *@return a string representation of the argument in the specified radix. **/ public static String toString(int i, int radix) { //基数的范围为2（MIN_RADIX）到36（MAX_RADIX） if (radix &lt; Character.MIN_RADIX || radix &gt; Character.MAX_RADIX) radix = 10; /* Use the faster version */ //十进制时，则调用十进制专用的的toString() //具体看下面的函数 if (radix == 10) { return toString(i); } //int型为32位，加上符号位，最长可以为33位，故先创建一个33位的char数组 char buf[] = new char[33]; boolean negative = (i &lt; 0); int charPos = 32; if (!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4e0dc2f2e8d12ed904ffa19bde553c43/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-29T22:11:54+08:00" />
<meta property="article:modified_time" content="2018-04-29T22:11:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Integer类源码解析之toString方法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>直接附上toString()方法源码</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-javadoc">/**
  *@param   i       an integer to be converted to a string.
  *@param   radix   字符串使用的基数(即指将i转成radix进制的字符串)
  *@return  a string representation of the argument in the specified radix.
  **/</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">toString</span>(<span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> radix) {
        <span class="hljs-comment">//基数的范围为2（MIN_RADIX）到36（MAX_RADIX）</span>
        <span class="hljs-keyword">if</span> (radix &lt; Character.MIN_RADIX || radix &gt; Character.MAX_RADIX)
            radix = <span class="hljs-number">10</span>;

        <span class="hljs-comment">/* Use the faster version */</span>
        <span class="hljs-comment">//十进制时，则调用十进制专用的的toString()</span>
        <span class="hljs-comment">//具体看下面的函数</span>
        <span class="hljs-keyword">if</span> (radix == <span class="hljs-number">10</span>) {
            <span class="hljs-keyword">return</span> toString(i);
        }
        <span class="hljs-comment">//int型为32位，加上符号位，最长可以为33位，故先创建一个33位的char数组</span>
        <span class="hljs-keyword">char</span> buf[] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[<span class="hljs-number">33</span>];
        <span class="hljs-keyword">boolean</span> negative = (i &lt; <span class="hljs-number">0</span>);
        <span class="hljs-keyword">int</span> charPos = <span class="hljs-number">32</span>;

        <span class="hljs-keyword">if</span> (!negative) {
            i = -i;
        }
        <span class="hljs-comment">//至于为什么要将正数转为负数来比较，我的想法是：</span>
        <span class="hljs-comment">//int型的最大值为2147483647，最小值为 -2147483648；</span>
        <span class="hljs-comment">//如果将负数转为正数，最小值在转时会溢出，故使用负数来进行运行</span>
        <span class="hljs-keyword">while</span> (i &lt;= -radix) {
            buf[charPos--] = digits[-(i % radix)];
            i = i / radix;
        }
        buf[charPos] = digits[-i];

        <span class="hljs-keyword">if</span> (negative) {
            buf[--charPos] = <span class="hljs-string">'-'</span>;
        }
        <span class="hljs-comment">//最后在根据buf数组、数组有效值位置charPos以及有效长度33-charPos创建一个string对象</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> String(buf, charPos, (<span class="hljs-number">33</span> - charPos));
    }</code></pre> 
<p>接着看基数为10的toString()方法：</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">toString</span>(<span class="hljs-keyword">int</span> i) {
        <span class="hljs-keyword">if</span> (i == Integer.MIN_VALUE)
            <span class="hljs-keyword">return</span> <span class="hljs-string">"-2147483648"</span>;
        <span class="hljs-comment">//由于stringSize()要求为正数，故前面判断需排除最小值，否则可能溢出</span>
        <span class="hljs-keyword">int</span> size = (i &lt; <span class="hljs-number">0</span>) ? stringSize(-i) + <span class="hljs-number">1</span> : stringSize(i);
        <span class="hljs-keyword">char</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[size];
        <span class="hljs-comment">//请看下面一个方法</span>
        getChars(i, size, buf);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> String(buf, <span class="hljs-keyword">true</span>);
    }

<span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> [] sizeTable = { <span class="hljs-number">9</span>, <span class="hljs-number">99</span>, <span class="hljs-number">999</span>, <span class="hljs-number">9999</span>, <span class="hljs-number">99999</span>, <span class="hljs-number">999999</span>, <span class="hljs-number">9999999</span>,
                                      <span class="hljs-number">99999999</span>, <span class="hljs-number">999999999</span>, Integer.MAX_VALUE };

    <span class="hljs-comment">// 获取x的长度，x为正数</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> stringSize(<span class="hljs-keyword">int</span> x) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; ; i++)
            <span class="hljs-keyword">if</span> (x &lt;= sizeTable[i])
                <span class="hljs-keyword">return</span> i+<span class="hljs-number">1</span>;
    }</code></pre> 
<pre class="prettyprint"><code class=" hljs axapta"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> getChars(<span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> <span class="hljs-keyword">index</span>, <span class="hljs-keyword">char</span>[] buf) {
        <span class="hljs-keyword">int</span> q, r;
        <span class="hljs-keyword">int</span> charPos = <span class="hljs-keyword">index</span>;
        <span class="hljs-keyword">char</span> sign = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span>) {
            sign = <span class="hljs-string">'-'</span>;
            i = -i;
        }

        <span class="hljs-comment">// Generate two digits per iteration</span>
        <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">65536</span>) {
            q = i / <span class="hljs-number">100</span>;
            <span class="hljs-comment">// 相当于: r = i - (q * 100);</span>
            r = i - ((q &lt;&lt; <span class="hljs-number">6</span>) + (q &lt;&lt; <span class="hljs-number">5</span>) + (q &lt;&lt; <span class="hljs-number">2</span>));
            i = q;
            <span class="hljs-comment">//根据定义好的DigitOnes、DigitTens可以分别获取到十位和个位对应的值</span>
            buf [--charPos] = DigitOnes[r];
            buf [--charPos] = DigitTens[r];
        }

        <span class="hljs-comment">// Fall thru to fast mode for smaller numbers</span>
        <span class="hljs-comment">// assert(i &lt;= 65536, i);</span>
        <span class="hljs-keyword">for</span> (;;) {
            <span class="hljs-comment">//这么不懂为啥？求哪位大神帮忙解答下</span>
            q = (i * <span class="hljs-number">52429</span>) &gt;&gt;&gt; (<span class="hljs-number">16</span>+<span class="hljs-number">3</span>);
            r = i - ((q &lt;&lt; <span class="hljs-number">3</span>) + (q &lt;&lt; <span class="hljs-number">1</span>));  <span class="hljs-comment">// r = i-(q*10) ...</span>
            buf [--charPos] = digits [r];
            i = q;
            <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">if</span> (sign != <span class="hljs-number">0</span>) {
            buf [--charPos] = sign;
        }
    }

<span class="hljs-comment">//获取对应的十位的值</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> [] DigitTens = {
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'0'</span>,
        <span class="hljs-string">'1'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1'</span>,
        <span class="hljs-string">'2'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'2'</span>,
        <span class="hljs-string">'3'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'3'</span>,
        <span class="hljs-string">'4'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'4'</span>,
        <span class="hljs-string">'5'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'5'</span>,
        <span class="hljs-string">'6'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'6'</span>,
        <span class="hljs-string">'7'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'7'</span>,
        <span class="hljs-string">'8'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'8'</span>,
        <span class="hljs-string">'9'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'9'</span>,
        } ;
<span class="hljs-comment">//获取对应的个位的值</span>
    <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> [] DigitOnes = {
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
        } ;

<span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span>[] digits = {
        <span class="hljs-string">'0'</span> , <span class="hljs-string">'1'</span> , <span class="hljs-string">'2'</span> , <span class="hljs-string">'3'</span> , <span class="hljs-string">'4'</span> , <span class="hljs-string">'5'</span> ,
        <span class="hljs-string">'6'</span> , <span class="hljs-string">'7'</span> , <span class="hljs-string">'8'</span> , <span class="hljs-string">'9'</span> , <span class="hljs-string">'a'</span> , <span class="hljs-string">'b'</span> ,
        <span class="hljs-string">'c'</span> , <span class="hljs-string">'d'</span> , <span class="hljs-string">'e'</span> , <span class="hljs-string">'f'</span> , <span class="hljs-string">'g'</span> , <span class="hljs-string">'h'</span> ,
        <span class="hljs-string">'i'</span> , <span class="hljs-string">'j'</span> , <span class="hljs-string">'k'</span> , <span class="hljs-string">'l'</span> , <span class="hljs-string">'m'</span> , <span class="hljs-string">'n'</span> ,
        <span class="hljs-string">'o'</span> , <span class="hljs-string">'p'</span> , <span class="hljs-string">'q'</span> , <span class="hljs-string">'r'</span> , <span class="hljs-string">'s'</span> , <span class="hljs-string">'t'</span> ,
        <span class="hljs-string">'u'</span> , <span class="hljs-string">'v'</span> , <span class="hljs-string">'w'</span> , <span class="hljs-string">'x'</span> , <span class="hljs-string">'y'</span> , <span class="hljs-string">'z'</span>
    };
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/81b396a5f7cddd5afa8f37eb7604f7e8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于Linux下安装MATLAB Compiler Runtime(MCR) 所遇到的问题以及解决方法（以Ubuntu 16.04 为例）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f2e1b6ff6947e0b04d619bae81cffbd2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">主机怎么加入组播组</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>