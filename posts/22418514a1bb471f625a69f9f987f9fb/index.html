<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ambari-2.7.7源码编译 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ambari-2.7.7源码编译" />
<meta property="og:description" content="0 说明 本文基于Ambari-2.7.7版本进行源码编译。所需的编译资料统一提供如下：
链接：https://pan.baidu.com/s/1F2D7zBGfKihxTBArnOilTw 提取码：8m17 1 前提条件 1.1 下载ambari源码包 wget https://github.com/apache/ambari/releases/tag/release-2.7.7-rc0/ambari-release-2.7.7-rc0.tar.gz wget https://www-eu.apache.org/dist/ambari/ambari-2.7.7/apache-ambari-2.7.7-src.tar.gz wget https://mirrors.tuna.tsinghua.edu.cn/apache/ambari/ambari-2.7.7/apache-ambari-2.7.7-src.tar.gz 选择其中一个下载一个就行，下载完成后解压
tar -zxvf apache-ambari-2.7.7-src.tar.gz chown -R root:root apache-ambari-2.7.7-src 1.2 需要安装软件 java1.8.0_201mavenApache Maven 3.8.6rpm-buildrpm-build-4.11.3-48.el7_9.x86_64gcc-c&#43;&#43;4.8.5python2.7.5python-develpython-devel-2.7.5-92.el7_9.x86_64git1.8.3.1nodejsv4.5.0 注：①rpm-build安装
yum install rpm-build -y 查看rpm-build版本
② python-devel安装
yum install python-devel -y 查看安装版本
③ 安装node
wget https://nodejs.org/dist/v4.5.0/node-v4.5.0-linux-x64.tar.gz tar -zxvf node-v4.5.0-linux-x64.tar.gz -C /usr/lib/node 安装完成后确保npm和node命令正常
注：如果执行npm -v时发生如下报错：
Cannot find module ‘npmlog’ 解决办法：
# cd 命令进入nodejs安装目录然后执行如下命令，建立软连接： ln -s ../lib/node_modules/npm/bin/npm-cli.js ④ 将以上安装的jdk/maven/node配置环境变量
#java environment export JAVA_HOME=/usr/local/java export CLASSPATH=." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/22418514a1bb471f625a69f9f987f9fb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-16T21:07:47+08:00" />
<meta property="article:modified_time" content="2023-05-16T21:07:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ambari-2.7.7源码编译</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="0__0"></a>0 说明</h2> 
<p>本文基于Ambari-2.7.7版本进行源码编译。所需的编译资料统一提供如下：</p> 
<pre><code class="prism language-bash">链接：https://pan.baidu.com/s/1F2D7zBGfKihxTBArnOilTw 
提取码：8m17 
</code></pre> 
<h2><a id="1__7"></a>1 前提条件</h2> 
<h3><a id="11_ambari_8"></a>1.1 下载ambari源码包</h3> 
<pre><code class="prism language-bash"><span class="token function">wget</span> https://github.com/apache/ambari/releases/tag/release-2.7.7-rc0/ambari-release-2.7.7-rc0.tar.gz
<span class="token function">wget</span> https://www-eu.apache.org/dist/ambari/ambari-2.7.7/apache-ambari-2.7.7-src.tar.gz
<span class="token function">wget</span> https://mirrors.tuna.tsinghua.edu.cn/apache/ambari/ambari-2.7.7/apache-ambari-2.7.7-src.tar.gz
</code></pre> 
<p>选择其中一个下载一个就行，下载完成后解压</p> 
<pre><code class="prism language-bash"><span class="token function">tar</span> -zxvf apache-ambari-2.7.7-src.tar.gz
<span class="token function">chown</span> -R root:root apache-ambari-2.7.7-src
</code></pre> 
<h3><a id="12__19"></a>1.2 需要安装软件</h3> 
<table><thead><tr><th>java</th><th>1.8.0_201</th></tr></thead><tbody><tr><td>maven</td><td>Apache Maven 3.8.6</td></tr><tr><td>rpm-build</td><td>rpm-build-4.11.3-48.el7_9.x86_64</td></tr><tr><td>gcc-c++</td><td>4.8.5</td></tr><tr><td>python</td><td>2.7.5</td></tr><tr><td>python-devel</td><td>python-devel-2.7.5-92.el7_9.x86_64</td></tr><tr><td>git</td><td>1.8.3.1</td></tr><tr><td>nodejs</td><td>v4.5.0</td></tr></tbody></table> 
<p>注：①rpm-build安装</p> 
<pre><code class="prism language-bash">yum <span class="token function">install</span> rpm-build -y
</code></pre> 
<p>查看rpm-build版本<br> <img src="https://images2.imgbox.com/29/57/yGm4jjdM_o.png" alt="在这里插入图片描述"><br> ② python-devel安装</p> 
<pre><code class="prism language-bash">yum <span class="token function">install</span> python-devel -y
</code></pre> 
<p>查看安装版本<br> <img src="https://images2.imgbox.com/a2/db/tlTyONUX_o.png" alt="在这里插入图片描述"><br> ③ 安装node</p> 
<pre><code class="prism language-bash"><span class="token function">wget</span> https://nodejs.org/dist/v4.5.0/node-v4.5.0-linux-x64.tar.gz
</code></pre> 
<pre><code class="prism language-bash"><span class="token function">tar</span> -zxvf node-v4.5.0-linux-x64.tar.gz -C /usr/lib/node
</code></pre> 
<p>安装完成后确保npm和node命令正常<br> <img src="https://images2.imgbox.com/92/ec/IFJBmYSJ_o.png" alt="在这里插入图片描述"><br> 注：如果执行npm -v时发生如下报错：</p> 
<pre><code class="prism language-bash">Cannot <span class="token function">find</span> module ‘npmlog’ 
</code></pre> 
<p>解决办法：</p> 
<pre><code class="prism language-bash"><span class="token comment"># cd 命令进入nodejs安装目录然后执行如下命令，建立软连接：</span>
<span class="token function">ln</span> -s <span class="token punctuation">..</span>/lib/node_modules/npm/bin/npm-cli.js
</code></pre> 
<p>④ 将以上安装的jdk/maven/node配置环境变量</p> 
<pre><code class="prism language-bash"><span class="token comment">#java environment</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">${JAVA_HOME}</span>/jre:<span class="token variable">${JAVA_HOME}</span>/lib
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">${JAVA_HOME}</span>/bin

<span class="token comment">#maven environment</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">MAVEN_HOME</span><span class="token operator">=</span>/usr/local/maven/apache-maven-3.8.6
<span class="token builtin class-name">export</span> <span class="token assign-left variable">M2_HOME</span><span class="token operator">=</span>/usr/local/maven/apache-maven-3.8.6
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$MAVEN_HOME</span>/bin

<span class="token comment">#node</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">NODE_HOME</span><span class="token operator">=</span>/usr/lib/node-v4.5.0-linux-x64
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$NODE_HOME</span>/bin
</code></pre> 
<h3><a id="13_maven_78"></a>1.3 maven镜像源配置</h3> 
<p>编辑 conf/settings.xml 配置文件，添加好下述镜像源，会提高编译ambari的速度。</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token comment">&lt;!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
--&gt;</span>
<span class="token comment">&lt;!--
 | This is the configuration file for Maven. It can be specified at two levels:
 |
 |  1. User Level. This settings.xml file provides configuration for a single user,
 |                 and is normally provided in ${user.home}/.m2/settings.xml.
 |
 |                 NOTE: This location can be overridden with the CLI option:
 |
 |                 -s /path/to/user/settings.xml
 |
 |  2. Global Level. This settings.xml file provides configuration for all Maven
 |                 users on a machine (assuming they're all using the same Maven
 |                 installation). It's normally provided in
 |                 ${maven.conf}/settings.xml.
 |
 |                 NOTE: This location can be overridden with the CLI option:
 |
 |                 -gs /path/to/global/settings.xml
 |
 | The sections in this sample file are intended to give you a running start at
 | getting the most out of your Maven installation. Where appropriate, the default
 | values (values used when the setting is not specified) are provided.
 |
 |--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span>
	<span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.2.0<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.2.0 https://maven.apache.org/xsd/settings-1.2.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- localRepository
   | The path to the local repository maven will use to store artifacts.
   |
   | Default: ${user.home}/.m2/repository
  &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;
  --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">&gt;</span></span>/usr/local/maven/apache-maven-3.8.6/repository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- interactiveMode
   | This will determine whether maven prompts you when it needs input. If set to false,
   | maven will use a sensible default value, perhaps based on some other setting, for
   | the parameter in question.
   |
   | Default: true
  &lt;interactiveMode&gt;true&lt;/interactiveMode&gt;
  --&gt;</span>
	<span class="token comment">&lt;!-- offline
   | Determines whether maven should attempt to connect to the network when executing a build.
   | This will have an effect on artifact downloads, artifact deployment, and others.
   |
   | Default: false
  &lt;offline&gt;false&lt;/offline&gt;
  --&gt;</span>
	<span class="token comment">&lt;!-- pluginGroups
   | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.
   | when invoking a command line like "mvn prefix:goal". Maven will automatically add the group identifiers
   | "org.apache.maven.plugins" and "org.codehaus.mojo" if these are not already contained in the list.
   |--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- pluginGroup
     | Specifies a further group identifier to use for plugin lookup.
    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;
    --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- proxies
   | This is a list of proxies which can be used on this machine to connect to the network.
   | Unless otherwise specified (by system property or command-line switch), the first proxy
   | specification in this list marked as active will be used.
   |--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>proxies</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- proxy
     | Specification for one proxy, to be used in connecting to the network.
     |
    &lt;proxy&gt;&lt;id&gt;optional&lt;/id&gt;&lt;active&gt;true&lt;/active&gt;&lt;protocol&gt;http&lt;/protocol&gt;&lt;username&gt;proxyuser&lt;/username&gt;&lt;password&gt;proxypass&lt;/password&gt;&lt;host&gt;proxy.host.net&lt;/host&gt;&lt;port&gt;80&lt;/port&gt;&lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;&lt;/proxy&gt;
    --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>proxies</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- servers
   | This is a list of authentication profiles, keyed by the server-id used within the system.
   | Authentication profiles can be used whenever maven must make a connection to a remote server.
   |--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servers</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- server
     | Specifies the authentication information to use when connecting to a particular server, identified by
     | a unique name within the system (referred to by the 'id' attribute below).
     |
     | NOTE: You should either specify username/password OR privateKey/passphrase, since these pairings are
     |       used together.
     |
    &lt;server&gt;&lt;id&gt;deploymentRepo&lt;/id&gt;&lt;username&gt;repouser&lt;/username&gt;&lt;password&gt;repopwd&lt;/password&gt;&lt;/server&gt;
    --&gt;</span>
		<span class="token comment">&lt;!-- Another sample, using keys to authenticate.
    &lt;server&gt;&lt;id&gt;siteServer&lt;/id&gt;&lt;privateKey&gt;/path/to/private/key&lt;/privateKey&gt;&lt;passphrase&gt;optional; leave empty if not used.&lt;/passphrase&gt;&lt;/server&gt;
    --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servers</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- mirrors
   | This is a list of mirrors to be used in downloading artifacts from remote repositories.
   |
   | It works like this: a POM may declare a repository to use in resolving certain artifacts.
   | However, this repository may have problems with heavy traffic at times, so people have mirrored
   | it to several places.
   |
   | That repository definition will have a unique id, so we can create a mirror reference for that
   | repository, to be used as an alternate download site. The mirror site will be the preferred
   | server for that repository.
   |--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrors</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- mirror
     | Specifies a repository mirror site to use instead of a given repository. The repository that
     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used
     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.
     |
    &lt;mirror&gt;&lt;id&gt;mirrorId&lt;/id&gt;&lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;&lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;&lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt;&lt;/mirror&gt;
     --&gt;</span>
		<span class="token comment">&lt;!-- Amabri build mirror source --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>huaweicloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>huaweicloud maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.huaweicloud.com/repository/maven/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus-aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Nexus aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://maven.aliyun.com/nexus/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>alimaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token comment">&lt;!-- &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central,apache.snapshots.https,maven2-repository.dev.java.net,maven2-glassfish-repository.dev.java.net,maven2-repository.atlassian,apache.staging.https,oss.sonatype.org,spring-milestones<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>aliyun maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://maven.aliyun.com/nexus/content/repositories/central/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus-hortonworks<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Nexus hortonworks<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.hortonworks.com/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>HDPReleases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>HDP Releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.hortonworks.com/content/repositories/releases/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>WSO2Releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>WSO2 Dist Repository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://dist.wso2.org/maven2/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>MavenCentralReleases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Maven Central Repository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo1.maven.org/maven2/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- profiles
   | This is a list of profiles which can be activated in a variety of ways, and which can modify
   | the build process. Profiles provided in the settings.xml are intended to provide local machine-
   | specific paths and repository locations which allow the build to work in the local environment.
   |
   | For example, if you have an integration testing plugin - like cactus - that needs to know where
   | your Tomcat instance is installed, you can provide a variable here such that the variable is
   | dereferenced during the build process to configure the cactus plugin.
   |
   | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles
   | section of this document (settings.xml) - will be discussed later. Another way essentially
   | relies on the detection of a system property, either matching a particular value for the property,
   | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a
   | value of '1.4' might activate a profile when the build is executed on a JDK version of '1.4.2_07'.
   | Finally, the list of active profiles can be specified directly from the command line.
   |
   | NOTE: For profiles defined in the settings.xml, you are restricted to specifying only artifact
   |       repositories, plugin repositories, and free-form properties to be used as configuration
   |       variables for plugins in the POM.
   |
   |--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- profile
     | Specifies a set of introductions to the build process, to be activated using one or more of the
     | mechanisms described above. For inheritance purposes, and to activate profiles via &lt;activatedProfiles/&gt;
     | or the command line, profiles have to have an ID that is unique.
     |
     | An encouraged best practice for profile identification is to use a consistent naming convention
     | for profiles, such as 'env-dev', 'env-test', 'env-production', 'user-jdcasey', 'user-brett', etc.
     | This will make it more intuitive to understand what the set of introduced profiles is attempting
     | to accomplish, particularly when you only have a list of profile id's for debug.
     |
     | This profile example uses the JDK version to trigger activation, and provides a JDK-specific repo.
    &lt;profile&gt;&lt;id&gt;jdk-1.4&lt;/id&gt;&lt;activation&gt;&lt;jdk&gt;1.4&lt;/jdk&gt;&lt;/activation&gt;&lt;repositories&gt;&lt;repository&gt;&lt;id&gt;jdk14&lt;/id&gt;&lt;name&gt;Repository for JDK 1.4 builds&lt;/name&gt;&lt;url&gt;http://www.myhost.com/maven/jdk14&lt;/url&gt;&lt;layout&gt;default&lt;/layout&gt;&lt;snapshotPolicy&gt;always&lt;/snapshotPolicy&gt;&lt;/repository&gt;&lt;/repositories&gt;&lt;/profile&gt;
    --&gt;</span>
		<span class="token comment">&lt;!--
     | Here is another profile, activated by the system property 'target-env' with a value of 'dev',
     | which provides a specific path to the Tomcat instance. To use this, your plugin configuration
     | might hypothetically look like:
     |
     | ...
     | &lt;plugin&gt;
     |   &lt;groupId&gt;org.myco.myplugins&lt;/groupId&gt;
     |   &lt;artifactId&gt;myplugin&lt;/artifactId&gt;
     |
     |   &lt;configuration&gt;
     |     &lt;tomcatLocation&gt;${tomcatPath}&lt;/tomcatLocation&gt;
     |   &lt;/configuration&gt;
     | &lt;/plugin&gt;
     | ...
     |
     | NOTE: If you just wanted to inject this configuration whenever someone set 'target-env' to
     |       anything, you could just leave off the &lt;value/&gt; inside the activation-property.
     |
    &lt;profile&gt;&lt;id&gt;env-dev&lt;/id&gt;&lt;activation&gt;&lt;property&gt;&lt;name&gt;target-env&lt;/name&gt;&lt;value&gt;dev&lt;/value&gt;&lt;/property&gt;&lt;/activation&gt;&lt;properties&gt;&lt;tomcatPath&gt;/path/to/tomcat/instance&lt;/tomcatPath&gt;&lt;/properties&gt;&lt;/profile&gt;
    --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>huaweicloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>huawei<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.huaweicloud.com/repository/maven/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus-aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://maven.aliyun.com/nexus/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>alimaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>ali<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://maven.aliyun.com/nexus/content/repositories/central/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus-hortonworks<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>hortonworks<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.hortonworks.com/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>HDPReleases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>HDP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.hortonworks.com/content/repositories/releases/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>WSO2Releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>WSO2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://dist.wso2.org/maven2/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>MavenCentralReleases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>MavenCentral<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo1.maven.org/maven2/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>huaweicloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>nexus-aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>alimaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>nexus-hortonworks<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>HDPReleases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>WSO2Releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>MavenCentralReleases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- activeProfiles
   | List of profiles that are active for all builds.
   |
  &lt;activeProfiles&gt;&lt;activeProfile&gt;alwaysActiveProfile&lt;/activeProfile&gt;&lt;activeProfile&gt;anotherAlwaysActiveProfile&lt;/activeProfile&gt;&lt;/activeProfiles&gt;
  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="14__HDP_30__31__441"></a>1.4 将 HDP 3.0 和 3.1 文件拷贝到源码中</h3> 
<p>HDP3.0/HDP3.1获取连接如下：<br> 将HDP3.0/HDP3.1拷贝到apache-ambari-2.7.7-src/ambari-server/src/main/resources/stacks/HDP目录下：<br> <img src="https://images2.imgbox.com/8a/27/vwfgFtMk_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="15__445"></a>1.5 编译加速</h3> 
<h4><a id="151_bower_components_446"></a>1.5.1 下载bower_components</h4> 
<p>ambari编译时需要去apache-ambari-2.7.7-src/ambari-admin/src/main/resources/ui/admin-web/app/目录下载bower_components内容，由于网络原因不能下载，可以自行下载放入该目录下，再重新编译。<br> <img src="https://images2.imgbox.com/24/36/XWKv1oFw_o.png" alt="在这里插入图片描述"><br> 注意：如果未做该操作可能会报4.1中的错误</p> 
<h4><a id="152_metrics_451"></a>1.5.2 下载编译metrics所需依赖</h4> 
<p>修改ambari-metrics/pom.xml文件，将habse、hadoop、phoenix和grafana的下载路径进行替换</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hbase.tar</span><span class="token punctuation">&gt;</span></span>http://192.168.5.78/compile-ambari/hbase-2.4.2-bin.tar.gz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hbase.tar</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hadoop.tar</span><span class="token punctuation">&gt;</span></span>http://192.168.5.78/compile-ambari/hadoop-3.1.1.tar.gz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hadoop.tar</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grafana.tar</span><span class="token punctuation">&gt;</span></span>http://192.168.5.78/compile-ambari/grafana-6.7.4.linux-amd64.tar.gz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grafana.tar</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phoenix.tar</span><span class="token punctuation">&gt;</span></span>http://192.168.5.78/compile-ambari/phoenix-hbase-2.4-5.1.2-bin.tar.gz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phoenix.tar</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>注意：① 这里的192.168.5.78已配置httpd功能，可以通过该下载方式下载所需的依赖包<br> <img src="https://images2.imgbox.com/51/92/BMH0Y0hz_o.png" alt="在这里插入图片描述"><br> ② 如果不做任何修改则在编译时会报4.2所示错误<br> ③ 如果没有配置httpd，也可以配置为本地路径。例如：</p> 
<pre><code class="prism language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hbase.tar</span><span class="token punctuation">&gt;</span></span>file:///opt/compile-ambari/hbase-2.4.2-bin.tar.gz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hbase.tar</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hbase.folder</span><span class="token punctuation">&gt;</span></span>hbase-2.4.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hbase.folder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hadoop.tar</span><span class="token punctuation">&gt;</span></span>file:///opt/compile-ambari/hadoop-3.1.1.tar.gz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hadoop.tar</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hadoop.folder</span><span class="token punctuation">&gt;</span></span>hadoop-3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hadoop.folder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grafana.folder</span><span class="token punctuation">&gt;</span></span>grafana-6.7.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grafana.folder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grafana.tar</span><span class="token punctuation">&gt;</span></span>file:///opt/compile-ambari/grafana-6.7.4.linux-amd64.tar.gz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grafana.tar</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phoenix.tar</span><span class="token punctuation">&gt;</span></span>file:///opt/compile-ambari/phoenix-hbase-2.4-5.1.2-bin.tar.gz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phoenix.tar</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phoenix.folder</span><span class="token punctuation">&gt;</span></span>phoenix-hbase-2.4-5.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phoenix.folder</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="153_ambariinfraambariinfraassemblypom_473"></a>1.5.3 修改ambari-infra/ambari-infra-assembly/pom文件</h4> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solr.tar</span><span class="token punctuation">&gt;</span></span>http://archive.apache.org/dist/lucene/solr/${solr.version}/solr-${solr.version}.tgz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>solr.tar</span><span class="token punctuation">&gt;</span></span>
改为：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solr.tar</span><span class="token punctuation">&gt;</span></span>http://192.168.5.78/compile-ambari/solr-${solr.version}.tgz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>solr.tar</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>注：如果没有安装httpd服务的节点，也可设置为本地路径，同上</p> 
<h4><a id="154_ambariinfraambariinfrasolrclientpom_480"></a>1.5.4 修改ambari-infra/ambari-infra-solr-client/pom文件</h4> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lucene6-core.url</span><span class="token punctuation">&gt;</span></span>https://repo1.maven.org/maven2/org/apache/lucene/lucene-core/${lucene6.version}/${lucene6-core-jar.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lucene6-core.url</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lucene6-backward-codecs.url</span><span class="token punctuation">&gt;</span></span>https://repo1.maven.org/maven2/org/apache/lucene/lucene-backward-codecs/${lucene6.version}/${lucene6-backward-codecs-jar.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lucene6-backward-codecs.url</span><span class="token punctuation">&gt;</span></span>
改为：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lucene6-core.url</span><span class="token punctuation">&gt;</span></span>http://192.168.5.78/compile-ambari/${lucene6-core-jar.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lucene6-core.url</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lucene6-backward-codecs.url</span><span class="token punctuation">&gt;</span></span>http://192.168.5.78/compile-ambari/${lucene6-backward-codecs-jar.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lucene6-backward-codecs.url</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>注：如果没有安装httpd服务的节点，也可设置为本地路径，同上</p> 
<h3><a id="156_maven_489"></a>1.5.6 替换maven仓库依赖</h3> 
<p>如果网络不好的小伙伴，可以直接使用我提供的maven仓库，将该依赖库直接解压到自己本地环境的maven仓库中再进行编译。<br> <img src="https://images2.imgbox.com/4d/98/n8vjDqhq_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="157__493"></a>1.5.7 赋予所有执行权限</h3> 
<p>为确保编译过程中无可执行权限导致的报错，在编译前可以对所有ambari编译目录文件赋予可执行的权限</p> 
<pre><code class="prism language-bash"><span class="token function">chmod</span> -R <span class="token number">777</span> apache-ambari-2.7.7/
</code></pre> 
<p>注：如果不执行上述操作，在编译时可能报如下错误：</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:exec <span class="token punctuation">(</span>Bower <span class="token function">install</span><span class="token punctuation">)</span> on project ambari-admin: Command execution failed. Process exited with an error: <span class="token number">1</span> <span class="token punctuation">(</span>Exit value: <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e6/53/zD0za87g_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2__506"></a>2 编译</h2> 
<p>① 编译ambari的话，如果有自定义版本号的要求，可以先给ambari源码打上自己定义的版本号。打版本号其实就是通过mvn命令自动修改pom.xml文件里面的version值，包括子模块。<br> ②通过mvn命令，将ambari各模块源码编译，最终得到各自的rpm包，类似hortonworks官方提供的ambari相关rpm包。</p> 
<h3><a id="21__509"></a>2.1 打版本号</h3> 
<p>给ambari源码打版本号，版本号可自定义</p> 
<pre><code class="prism language-bash">mvn versions:set -DnewVersion<span class="token operator">=</span><span class="token number">2.7</span>.7.0.1
</code></pre> 
<p><img src="https://images2.imgbox.com/8e/f6/hXFcQ0Dx_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="22_ambarimetrics_517"></a>2.2 ambari-metrics模块</h2> 
<pre><code class="prism language-bash"><span class="token function">pushd</span> ambari-metrics
</code></pre> 
<p><img src="https://images2.imgbox.com/6b/b3/J1Y7RbQl_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token comment"># 打版本号</span>
mvn versions:set -DnewVersion<span class="token operator">=</span><span class="token number">2.7</span>.7.0.1
</code></pre> 
<p><img src="https://images2.imgbox.com/cd/a2/GxMxLC9X_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="23_ambarilogsearch_529"></a>2.3 ambari-logsearch模块</h2> 
<pre><code class="prism language-bash"><span class="token comment"># 返回到ambari根目录</span>
<span class="token function">popd</span>
<span class="token function">pushd</span> ambari-logsearch
<span class="token comment"># 打版本号</span>
mvn versions:set -DnewVersion<span class="token operator">=</span><span class="token number">2.7</span>.7.0.1
</code></pre> 
<p><img src="https://images2.imgbox.com/e6/9e/u0Qjr5Fj_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="24_ambariinfra_540"></a>2.4 ambari-infra模块</h2> 
<pre><code class="prism language-bash"><span class="token comment"># 返回到ambari根目录</span>
<span class="token function">popd</span>
<span class="token function">pushd</span> ambari-infra
<span class="token comment"># 打版本号</span>
mvn versions:set -DnewVersion<span class="token operator">=</span><span class="token number">2.7</span>.7.0.1
</code></pre> 
<p><img src="https://images2.imgbox.com/f3/31/NMaxDftV_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="25__550"></a>2.5 开始编译所有模块</h2> 
<pre><code class="prism language-bash"><span class="token comment"># 返回到ambari根目录</span>
<span class="token function">popd</span>
mvn -B -X <span class="token function">install</span> rpm:rpm -DnewVersion<span class="token operator">=</span><span class="token number">2.7</span>.7.0.1 -DbuildNumber<span class="token operator">=</span>5895e4ed6b30a2da8a90fee2403b6cab91d19972 -DskipTests -Dpython.ver<span class="token operator">=</span><span class="token string">"python &gt;= 2.6"</span> -Drat.skip<span class="token operator">=</span>true
</code></pre> 
<p>建议将上述命令全量复制，需要buildNumber，否则等rpm包安装时，会报buildNumber错误；-Drat.skip=true会跳过license校验。</p> 
<p>编译成功<br> <img src="https://images2.imgbox.com/a7/6e/pwxtxi7I_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3__561"></a>3 编译说明</h2> 
<p>ambari 源码分为多个模块，当某个模块编译失败时，我们想继续从这个模块开始编译，怎么做呢？<br> 举个例子，假如 ambari-web 模块编译报错，只需要在编译命令的末尾添加：-rf :ambari-web 即可。当报错时显示的模块名，会在 mvn 输出的最后一行显示。</p> 
<h2><a id="4__565"></a>4 编译过程报错</h2> 
<h3><a id="41_Admin_View_566"></a>4.1 Admin View报错</h3> 
<p>具体报错内容</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.4:yarn <span class="token punctuation">(</span>yarn <span class="token function">install</span><span class="token punctuation">)</span> on project ambari-admin: Failed to run task: <span class="token string">'yarn install --ignore-engines --pure-lockfile'</span> failed. org.apache.commons.exec.ExecuteException: Process exited with an error: <span class="token number">1</span> <span class="token punctuation">(</span>Exit value: <span class="token number">1</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> <span class="token punctuation">[</span>Help <span class="token number">1</span><span class="token punctuation">]</span>
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.4:yarn <span class="token punctuation">(</span>yarn <span class="token function">install</span><span class="token punctuation">)</span> on project ambari-admin: Failed to run task
</code></pre> 
<pre><code class="prism language-bash">bower angular-bootstrap<span class="token comment">#0.11.0                       ECMDERR Failed to execute "git ls-remote --tags --heads https://github.com/angular-ui/bootstrap-bower.git", exit code of #128 fatal: unable to access 'https://github.com/angular-ui/bootstrap-bower.git/': Empty reply from server</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/52/As9Vs1At_o.png" alt="在这里插入图片描述"><br> 这是由于ambari编译时需要去apache-ambari-2.7.7-src/ambari-admin/src/main/resources/ui/admin-web目录下载bower_components内容，由于网络原因不能下载，可以自行下载放入该目录下，再重新编译即可。</p> 
<h3><a id="42_Ambari_Metrics_Collector_580"></a>4.2 Ambari Metrics Collector报错</h3> 
<p><img src="https://images2.imgbox.com/9e/4e/pKxRBhEB_o.png" alt="在这里插入图片描述"><br> 解决方法：<br> 方式①<br> 需要去掉ambari项目中pom.xml文件中的metric模块，删除后再重新编译即可<br> <img src="https://images2.imgbox.com/a9/0d/EWzoidb9_o.png" alt="在这里插入图片描述"><br> 方式②<br> 手动下载编译metrics需要的依赖包，并修改metrics的pom.xml文件。具体修改方法见1.5.2</p> 
<h3><a id="43_phoenixcore_588"></a>4.3 缺少phoenix-core包</h3> 
<p>进入<a href="https://mvnrepository.com/artifact/org.apache.phoenix/phoenix-core/5.1.2" rel="nofollow">maven仓库</a>下载该jar包，并将下载好的jar包放入maven中<br> <img src="https://images2.imgbox.com/6c/86/PZZ4QWzx_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="44_rpmbuild_591"></a>4.4 未安装rpm-build</h3> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> Failed <span class="token keyword">to</span> <span class="token keyword">execute</span> goal org<span class="token punctuation">.</span>codehaus<span class="token punctuation">.</span>mojo:rpm<span class="token operator">-</span>maven<span class="token operator">-</span>plugin:<span class="token number">2.1</span><span class="token number">.4</span>:rpm <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token operator">-</span>cli<span class="token punctuation">)</span> <span class="token keyword">on</span> project ambari: Unable <span class="token keyword">to</span> build the RPM: Error <span class="token keyword">while</span> executing process<span class="token punctuation">.</span> Cannot run program <span class="token string">"rpmbuild"</span> <span class="token punctuation">(</span><span class="token operator">in</span> directory <span class="token string">"/root/ambari/apache-ambari-2.7.7-src/target/rpm/ambari/SPECS"</span><span class="token punctuation">)</span>: error<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">No</span> such <span class="token keyword">file</span> <span class="token operator">or</span> directory <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>Help <span class="token number">1</span><span class="token punctuation">]</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/76/b0/g98pAL1a_o.png" alt="在这里插入图片描述"><br> 解决办法：安装rpm-build</p> 
<pre><code class="prism language-bash">yum <span class="token function">install</span> -y rpm-build
</code></pre> 
<h3><a id="45_yarn_602"></a>4.5 yarn报错</h3> 
<pre><code class="prism language-bash">Could not extract the Yarn archive: Could not extract archive
</code></pre> 
<p><img src="https://images2.imgbox.com/0b/5e/fqtEXjcl_o.png" alt="在这里插入图片描述"><br> 解决办法：<br> ① 手动下载https://github.com/yarnpkg/yarn/releases/download/v0.23.2/yarn-v0.23.2.tar.gz<br> ② 下载完成后手动放入maven仓库的com/github/eirslett/yarn/0.23.2/yarn-0.23.2./目录下即可</p> 
<h3><a id="46_yarn_install_612"></a>4.6 yarn install报错</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.4:yarn <span class="token punctuation">(</span>yarn <span class="token function">install</span><span class="token punctuation">)</span> on project ambari-web: Failed to run task: <span class="token string">'yarn install --ignore-engines --pure-lockfile'</span> failed. org.apache.commons.exec.ExecuteException: Process exited with an error: <span class="token number">1</span> <span class="token punctuation">(</span>Exit value: <span class="token number">1</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> <span class="token punctuation">[</span>Help <span class="token number">1</span><span class="token punctuation">]</span>
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.4:yarn <span class="token punctuation">(</span>yarn <span class="token function">install</span><span class="token punctuation">)</span> on project ambari-web: Failed to run task
</code></pre> 
<p><img src="https://images2.imgbox.com/6a/38/K03YziM9_o.png" alt="在这里插入图片描述"><br> 解决办法：这个问题最容易出现，主要是nodejs会通过 yarn去加载依赖包，解决方式是保证网络环境好。确保网络环境没问题之后删除编译报错目录下的*.lock文件（个人将target目录一起删除），重新编译</p> 
<pre><code class="prism language-bash"><span class="token comment"># find ~/.m2/repository/ -name "*.lastUpdated" -exec rm -rf {} \;</span>
</code></pre> 
<h3><a id="47_ambariadmin_624"></a>4.7 ambari-admin报错</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:exec <span class="token punctuation">(</span>Bower <span class="token function">install</span><span class="token punctuation">)</span> on project ambari-admin: Command execution failed. Process exited with an error: <span class="token number">1</span> <span class="token punctuation">(</span>Exit value: <span class="token number">1</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> <span class="token punctuation">[</span>Help <span class="token number">1</span><span class="token punctuation">]</span>
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:exec <span class="token punctuation">(</span>Bower <span class="token function">install</span><span class="token punctuation">)</span> on project ambari-admin: Command execution failed.
</code></pre> 
<p><img src="https://images2.imgbox.com/c1/4a/ctoocLXZ_o.png" alt="在这里插入图片描述"><br> 解决办法：cd ambari-admin/src/main/resources/ui/admin-web目录下，编辑 .bowerrc ，修改后的内容如下：</p> 
<pre><code class="prism language-bash"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"directory"</span><span class="token builtin class-name">:</span> <span class="token string">"app/bower_components"</span>,
    <span class="token string">"allow_root"</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="48_yarn_638"></a>4.8 yarn报错</h3> 
<pre><code class="prism language-bash"> Could not download Yarn: Could not download https://github.com/yarnpkg/yarn/releases/download/v1.1.0/yarn-v1.1.0.tar.gz: Connect to objects.githubusercontent.com:443 <span class="token punctuation">[</span>objects.githubusercontent.com/127.0.0.1, objects.githubusercontent.com/0:0:0:0:0:0:0:1<span class="token punctuation">]</span> failed: Connection refused <span class="token punctuation">(</span>Connection refused<span class="token punctuation">)</span> -<span class="token operator">&gt;</span> <span class="token punctuation">[</span>Help <span class="token number">1</span><span class="token punctuation">]</span>
</code></pre> 
<p>github的443端口不能访问</p> 
<pre><code class="prism language-bash"><span class="token comment"># 下载</span>
https://github.com/yarnpkg/yarn/releases/download/v1.1.0/yarn-v1.1.0.tar.gz
<span class="token comment"># 放入maven仓库</span>
repository/com/github/eirslett/yarn/1.1.0/yarn-1.1.0.tar.gz
</code></pre> 
<h2><a id="5__650"></a>5 编译包整理</h2> 
<p>Ambari 视图、ambari-metrics、ambari-logsearch、ambari-solr 都编译成功了。Ambari 源码全部编译完成后，我们需要将 ambari 各模块的编译包汇总起来。以 centos7 为例，我们需要将编译得到的 rpm 包汇总起来</p> 
<h3><a id="51_rpm_652"></a>5.1 合并rpm包</h3> 
<p>新建目录</p> 
<pre><code class="prism language-bash"><span class="token function">mkdir</span> ambari-2.7.7
</code></pre> 
<p>汇总所有的rpm包，并制作生成yum源</p> 
<pre><code class="prism language-bash"><span class="token function">cp</span> -r ./ambari-server/target/rpm/ambari-server/RPMS/x86_64/ambari-server-2.7.7.0-1.x86_64.rpm <span class="token punctuation">..</span>/ambari-2.7.7/
<span class="token function">cp</span> -r ./ambari-agent/target/rpm/ambari-agent/RPMS/x86_64/ambari-agent-2.7.7.0-1.x86_64.rpm  <span class="token punctuation">..</span>/ambari-2.7.7/

<span class="token function">cp</span> -r ./ambari-infra/ambari-infra-assembly/target/rpm/ambari-infra-solr/RPMS/noarch/ambari-infra-solr-2.7.7.0-1.noarch.rpm  <span class="token punctuation">..</span>/ambari-2.7.7/
<span class="token function">cp</span> -r ./ambari-infra/ambari-infra-assembly/target/rpm/ambari-infra-solr-client/RPMS/noarch/ambari-infra-solr-client-2.7.7.0-1.noarch.rpm <span class="token punctuation">..</span>/ambari-2.7.7/
<span class="token function">cp</span> -r ./ambari-infra/ambari-infra-assembly/target/rpm/ambari-infra-manager/RPMS/noarch/ambari-infra-manager-2.7.7.0-1.noarch.rpm <span class="token punctuation">..</span>/ambari-2.7.7/
<span class="token function">cp</span> -r ./ambari-logsearch/ambari-logsearch-assembly/target/rpm/ambari-logsearch-portal/RPMS/noarch/ambari-logsearch-portal-2.7.7.0-1.noarch.rpm <span class="token punctuation">..</span>/ambari-2.7.7/
<span class="token function">cp</span> -r ./ambari-logsearch/ambari-logsearch-assembly/target/rpm/ambari-logsearch-logfeeder/RPMS/noarch/ambari-logsearch-logfeeder-2.7.7.0-1.noarch.rpm <span class="token punctuation">..</span>/ambari-2.7.7/

<span class="token function">cp</span> -r ./ambari-metrics/ambari-metrics-assembly/target/rpm/ambari-metrics-collector/RPMS/x86_64/
<span class="token function">cp</span> -r ./ambari-metrics/ambari-metrics-assembly/target/rpm/ambari-metrics-hadoop-sink/RPMS/x86_64/
<span class="token function">cp</span> -r ./ambari-metrics/ambari-metrics-assembly/target/rpm/ambari-metrics-grafana/RPMS/x86_64/
<span class="token function">cp</span> -r ./ambari-metrics/ambari-metrics-assembly/target/rpm/ambari-metrics-monitor/RPMS/x86_64/
<span class="token function">cp</span> -r ./ambari-metrics/ambari-metrics-common/target/rpm/ambari-metrics-common/RPMS/noarch/

</code></pre> 
<p>创建yum源</p> 
<pre><code class="prism language-bash">createrepo ./
</code></pre> 
<p>执行完成后会生成repodata文件夹<br> <img src="https://images2.imgbox.com/67/8b/6vkpW60s_o.png" alt=""><br> 注：如果报没有这个命令，安装一下createrepo即可</p> 
<h3><a id="52_ambari_684"></a>5.2 压缩ambari安装文件</h3> 
<pre><code class="prism language-bash"><span class="token function">tar</span> -zcvf ambari-2.7.7.tar.gz ambari-2.7.7/
</code></pre> 
<p>压缩完成即可<br> <img src="https://images2.imgbox.com/8f/4b/o2KKdxBb_o.png" alt="在这里插入图片描述"><br> 根据编译生成的ambari-2.7.7.tar.gz包即可以用于安装和部署amabri集群</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ab0b5ffbfb67454155a557199d087fde/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Win&amp;Ubuntu环境下pip换源&#43;超级稳定的pip安装相关工具包的指令】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bedfc0b01e2567a22af45c307398c02a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java实现发送邮件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>