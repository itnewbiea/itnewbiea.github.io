<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32Cube &#43;VSCode开发环境搭建 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32Cube &#43;VSCode开发环境搭建" />
<meta property="og:description" content="STM32Cube &#43;VSCode开发环境搭建 0.前言一、各种方式对比1.STM32CubeMX &#43; CLion2.STM32CubeIDE &#43; VSCode &#43; STM32 VSCode Extension3.VSCode &#43; EIDE插件 二、STM32CubeIDE &#43; VSCode &#43; STM32 VSCode Extension环境搭建1.需要安装的软件2.相关配置3.编译测试 三、总结 0.前言 工欲善其事，必先利其器。由于受够了eclipse风格的cubeide，直接用vscode打开工程目录又是一大堆波浪线，所以终于下定决心整整我的开发环境。
一、各种方式对比 stm32开发环境有很多方式，由于一些原因，这里就不使用keil&#43;vscode方式进行介绍了，相关教程各大论坛也有不少，这里就介绍一下我踩坑的几种。环境搭建的宗旨是简单，尽量减少自己修改配置文件等繁琐步骤。
1.STM32CubeMX &#43; CLion Clion作为比较现代化风格的IDE工具，并且支持像vscode风格的插件，用起来还是比较舒适的，不过缺点就是调试只能用openocd，这种方式需要加载芯片相关的cfg文件和寄存器映射表，所以搭建环境时还是比较麻烦的。笔者最终没有使用这种方式，因为所使用的STM32F103RCT6找不到对应的cfg文件和寄存器映射表文件，又懒得自己照着手册写。如果有想用这种方式的可以移步B站@Kevin_WWW大佬的相关视频。
注：这种方式最好使用官方能找得到芯片cfg文件的开发板，否则自己手动配置起来比较麻烦。
2.STM32CubeIDE &#43; VSCode &#43; STM32 VSCode Extension ST官方出了一个VSCode的相关插件，使用此插件可以直接打开对应的工程，支持编译下载和调试功能，本节内容主要也是以此方式介绍。
注：使用此方式前最好先在CubeIDE中查看自己的ST-Link是否满足要求，有些国产ST-Link过不了IDE检测，就无法正常烧录和调试。
3.VSCode &#43; EIDE插件 由于笔者的两个ST-Link都无法过检测，又不想再花钱买新的，所以最终选择使用EIDE这种方式，使用起来甚至比第二种还要方便一点，相关教程可以移步同站@怠呆 大佬的《Windows VS Code &#43; EIDE arm-none-eabi-gcc 开发STM32》。
二、STM32CubeIDE &#43; VSCode &#43; STM32 VSCode Extension环境搭建 1.需要安装的软件 ① STM32CubeIDE
② VSCode
③ cmake
④ STM32 VSCode Extension（vscode插件）
①和②的安装就不多介绍了，官网下载后安装就行。STM32CubeIDE建议安装在默认路径下，可以省去后续配置麻烦。更换了目录也行，笔者就是更换了目录后重新配置的，后续会介绍。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/acf12139d3474478311d5c81370cf927/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-09T22:46:05+08:00" />
<meta property="article:modified_time" content="2023-11-09T22:46:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32Cube &#43;VSCode开发环境搭建</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>STM32Cube +VSCode开发环境搭建</h4> 
 <ul><li><a href="#0_3" rel="nofollow">0.前言</a></li><li><a href="#_5" rel="nofollow">一、各种方式对比</a></li><li><ul><li><a href="#1STM32CubeMX__CLion_7" rel="nofollow">1.STM32CubeMX + CLion</a></li><li><a href="#2STM32CubeIDE__VSCode__STM32_VSCode_Extension_10" rel="nofollow">2.STM32CubeIDE + VSCode + STM32 VSCode Extension</a></li><li><a href="#3VSCode__EIDE_13" rel="nofollow">3.VSCode + EIDE插件</a></li></ul> 
  </li><li><a href="#STM32CubeIDE__VSCode__STM32_VSCode_Extension_15" rel="nofollow">二、STM32CubeIDE + VSCode + STM32 VSCode Extension环境搭建</a></li><li><ul><li><a href="#1_16" rel="nofollow">1.需要安装的软件</a></li><li><a href="#2_23" rel="nofollow">2.相关配置</a></li><li><a href="#3_37" rel="nofollow">3.编译测试</a></li></ul> 
  </li><li><a href="#_43" rel="nofollow">三、总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="0_3"></a>0.前言</h2> 
<p>  工欲善其事，必先利其器。由于受够了eclipse风格的cubeide，直接用vscode打开工程目录又是一大堆波浪线，所以终于下定决心整整我的开发环境。</p> 
<h2><a id="_5"></a>一、各种方式对比</h2> 
<p>  stm32开发环境有很多方式，由于一些原因，这里就不使用keil+vscode方式进行介绍了，相关教程各大论坛也有不少，这里就介绍一下我踩坑的几种。环境搭建的宗旨是简单，尽量减少自己修改配置文件等繁琐步骤。</p> 
<h3><a id="1STM32CubeMX__CLion_7"></a>1.STM32CubeMX + CLion</h3> 
<p>  Clion作为比较现代化风格的IDE工具，并且支持像vscode风格的插件，用起来还是比较舒适的，不过缺点就是调试只能用openocd，这种方式需要加载芯片相关的cfg文件和寄存器映射表，所以搭建环境时还是比较麻烦的。笔者最终没有使用这种方式，因为所使用的STM32F103RCT6找不到对应的cfg文件和寄存器映射表文件，又懒得自己照着手册写。如果有想用这种方式的可以移步B站<a href="https://www.bilibili.com/video/BV1tL411a7Hv/?spm_id_from=333.337.search-card.all.click&amp;vd_source=7e038593bf4f40f52c4266b3dac41327" rel="nofollow">@Kevin_WWW</a>大佬的相关视频。<br> <code>注：这种方式最好使用官方能找得到芯片cfg文件的开发板，否则自己手动配置起来比较麻烦。</code></p> 
<h3><a id="2STM32CubeIDE__VSCode__STM32_VSCode_Extension_10"></a>2.STM32CubeIDE + VSCode + STM32 VSCode Extension</h3> 
<p>  ST官方出了一个VSCode的相关插件，使用此插件可以直接打开对应的工程，支持编译下载和调试功能，本节内容主要也是以此方式介绍。<br> <code>注：使用此方式前最好先在CubeIDE中查看自己的ST-Link是否满足要求，有些国产ST-Link过不了IDE检测，就无法正常烧录和调试。</code></p> 
<h3><a id="3VSCode__EIDE_13"></a>3.VSCode + EIDE插件</h3> 
<p>由于笔者的两个ST-Link都无法过检测，又不想再花钱买新的，所以最终选择使用EIDE这种方式，使用起来甚至比第二种还要方便一点，相关教程可以移步同站<code>@怠呆</code> 大佬的《<a href="https://blog.csdn.net/weixin_44347452/article/details/107595294?spm=1001.2014.3001.5506">Windows VS Code + EIDE arm-none-eabi-gcc 开发STM32</a>》。</p> 
<h2><a id="STM32CubeIDE__VSCode__STM32_VSCode_Extension_15"></a>二、STM32CubeIDE + VSCode + STM32 VSCode Extension环境搭建</h2> 
<h3><a id="1_16"></a>1.需要安装的软件</h3> 
<p>① STM32CubeIDE<br> ② VSCode<br> ③ cmake<br> ④ STM32 VSCode Extension（vscode插件）<br>   ①和②的安装就不多介绍了，官网下载后安装就行。STM32CubeIDE建议安装在默认路径下，可以省去后续配置麻烦。更换了目录也行，笔者就是更换了目录后重新配置的，后续会介绍。<br>   ③ cmake的安装可以从官网下载安装包直接安装（记得勾选添加到环境变量，后续会更方便），也可以下载免安装.zip格式的文件。不想添加环境变量的话后续就要在VSCode中配置，看个人喜好。</p> 
<h3><a id="2_23"></a>2.相关配置</h3> 
<p>在vscode中安装STM32 VSCode Extension 插件，添加后左侧会出现如下标志，并且此插件会安装cmake、Cotex-Debug等其他需要依赖的插件。<br> <img src="https://images2.imgbox.com/4d/99/SUOrm6sl_o.png" alt="在这里插入图片描述" width="265" height="500"><br> 添加cmake工具路径：<br> 如果安装cmake时没有添加到环境变量，或者只下载了工具压缩包，那么就需要在vscode中指定相关路径。在vscode中使用ctrl + shift + P，搜索<code>cmakepath</code>，将相关路径添加即可：<br> <img src="https://images2.imgbox.com/eb/7b/AZmThty5_o.png" alt="在这里插入图片描述" width="900" height="300"><br> 配置STM32CubeIDE工具链：<br> 在左侧STM32插件中导入一个CubeIDE生成的工程，然后修改如下文件：<br> <code>注：如果STM32CubeIDE安装在默认路径下，应该不需要修改此路径，请以实际情况为准</code><br> <img src="https://images2.imgbox.com/28/f5/VfjUiu6U_o.png" alt="在这里插入图片描述" width="1100" height="200"><br> 将launch.json中这四项参数修改到CubeIDE安装目录下的对应路径。<br> .cmake 文件中一项参数也需要修改：<br> <img src="https://images2.imgbox.com/00/1e/1NxnqL8p_o.png" alt="在这里插入图片描述"><br> 此项是用来加载交叉编译工具的，使用CubeIDE包内自带的交叉编译工具链即可。</p> 
<h3><a id="3_37"></a>3.编译测试</h3> 
<p>修改完这些参数正常情况应该就可以编译了，不过烧录和debug就需要自行解决了，由于ST-Link 的问题，尝试了很多种绕过检测的办法都没有奏效，感兴趣的可以参考此篇文章进行尝试：https://github.com/armink/HackSTLinkUpgrade .经过笔者尝试，应该只有1 和 3有尝试空间了。<br> <img src="https://images2.imgbox.com/86/0c/E8GqP1Sy_o.png" alt="在这里插入图片描述"><br> 点击左侧cmake工具中的构建按钮就可以编译工程了。左侧的运行按钮中可以对程序进行debug操作，这里就不演示了，有需求的可以自行研究。<br> <img src="https://images2.imgbox.com/ce/5e/tIMm8xAw_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_43"></a>三、总结</h2> 
<p>  官方的工具和插件虽然用起来方便快捷，但是捆绑st-link的情况比较严重，使用Jlink或者DAPLink的只能用openocd这种方式，加载芯片cfg文件和寄存器映射表也比较麻烦，不能做到每次都方便快捷的开始。Keil和IAR工具的界面一言难尽，所以只能寄希望于一些第三方平台的优化了，在此期间笔者还接触到PlatformIO的开发方式，可以直接兼容C++的类库及面向对象的编程模式，感兴趣的可以继续了解，笔者就先停在EIDE的开发方式了。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/df92d3ed09de3ebde8ce9b0e2f89cf24/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">OFD添加图片水印</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1bbdd65a9a1c45f8b9b6fcf4bc095111/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Latex数学公式符号大全（超详细）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>