<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ambari-2.7.5在麒麟V10操作系统中的集群部署（一） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ambari-2.7.5在麒麟V10操作系统中的集群部署（一）" />
<meta property="og:description" content="Ambari-2.7.5在麒麟V10操作系统中的集群部署（一） 注意：
​ 本次搭建只是尝试，检查是否有其他兼容性问题。
​ 本篇文章主要描述：下载到部署成功，能够打开页面即可。服务相关的操作问题将后续完成发布。
系统环境Kylin Linux Advanced Server release V10 (Tercel)CPUHygon C86 5285 16-core Processor （海光）架构：x86_64Ambari版本2.7.5HDP版本3.1.5.0 0、准备工作 关于安装包的下载和前期服务器准备工作，可以参考另一位博主的文章：http://t.csdn.cn/Yj6Ub 第一章第一节安装包准备。
本人之前的文章也有相关说明：
麒麟操作系统-01-java环境说明和安装：http://t.csdn.cn/tN1ju
麒麟操作系统-02-hosts域名映射、ssh免密等：http://t.csdn.cn/1eSZh
MySQL数据库的安装（tar.gz包）：http://t.csdn.cn/7mpJL （rpm包可以自行百度）
1、制作yum本地源 安装ambari-server和ambari-agent之前，我们需要制作本地的yum源，这样可以使用yum install PackageName进行自动安装，十分方便。
1.1安装httpd服务 每台服务器都要安装httpd
yum -y install httpd #开启httpd服务 systemctl start httpd #设置开机自启 systemctl enable httpd 注意：若是遇到yum无法下载的情况，请自行百度更换yum源，网络上有很多教程。如有需要，可以留言，我会总结一篇。一般情况下centos不会有这种问题，我只在麒麟V10上遇到过。修改测试完成后再执行上述命令。
1.2上传下载的安装包 创建文件夹并上传安装包
mkdir -p /opt/software/ambari #使用工具上传 解压 mysql-connector-java-5.1.40.tar.gz
tar -zxvf mysql-connector-java-5.1.40.tar.gz #将解压后目录中的 mysql-connector-java-5.1.40-bin.jar 复制到/usr/share/java/下 mv mysql-connector-java-5.1.40-bin.jar /usr/share/java/mysql-connector-java.jar 1.3制作本地yum源 mkdir /var/www/html/libtrpc mv libtirpc-0.2.4-0.16.el7.x86_64.rpm /var/www/html/libtrpc mv libtirpc-devel-0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e38e96c9112e6749ff6bdce4f318b3dd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-04T16:30:14+08:00" />
<meta property="article:modified_time" content="2023-07-04T16:30:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ambari-2.7.5在麒麟V10操作系统中的集群部署（一）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Ambari275V10_0"></a>Ambari-2.7.5在麒麟V10操作系统中的集群部署（一）</h3> 
<blockquote> 
 <p>注意：</p> 
 <p>​ 本次搭建只是尝试，检查是否有其他兼容性问题。</p> 
 <p>​ 本篇文章主要描述：下载到部署成功，能够打开页面即可。服务相关的操作问题将后续完成发布。</p> 
</blockquote> 
<table><thead><tr><th><strong>系统环境</strong></th><th><strong>Kylin Linux Advanced Server release V10 (Tercel)</strong></th></tr></thead><tbody><tr><td><strong>CPU</strong></td><td><strong>Hygon C86 5285 16-core Processor （海光）架构：x86_64</strong></td></tr><tr><td><strong>Ambari版本</strong></td><td><strong>2.7.5</strong></td></tr><tr><td><strong>HDP版本</strong></td><td><strong>3.1.5.0</strong></td></tr></tbody></table> 
<h4><a id="0_14"></a>0、准备工作</h4> 
<p>关于安装包的下载和前期服务器准备工作，可以参考另一位博主的文章：http://t.csdn.cn/Yj6Ub 第一章第一节安装包准备。</p> 
<p>本人之前的文章也有相关说明：</p> 
<p>麒麟操作系统-01-java环境说明和安装：http://t.csdn.cn/tN1ju</p> 
<p>麒麟操作系统-02-hosts域名映射、ssh免密等：http://t.csdn.cn/1eSZh</p> 
<p>MySQL数据库的安装（tar.gz包）：http://t.csdn.cn/7mpJL （rpm包可以自行百度）</p> 
<h4><a id="1yum_28"></a>1、制作yum本地源</h4> 
<blockquote> 
 <p>安装ambari-server和ambari-agent之前，我们需要制作本地的yum源，这样可以使用<code>yum install PackageName</code>进行自动安装，十分方便。</p> 
</blockquote> 
<h5><a id="11httpd_32"></a>1.1安装httpd服务</h5> 
<p>每台服务器都要安装httpd</p> 
<pre><code class="prism language-shell">yum -y <span class="token function">install</span> httpd
<span class="token comment">#开启httpd服务</span>
systemctl start httpd 
<span class="token comment">#设置开机自启</span>
systemctl <span class="token builtin class-name">enable</span> httpd 
</code></pre> 
<p>注意：若是遇到yum无法下载的情况，请自行百度更换yum源，网络上有很多教程。如有需要，可以留言，我会总结一篇。一般情况下centos不会有这种问题，我只在麒麟V10上遇到过。修改测试完成后再执行上述命令。</p> 
<h5><a id="12_46"></a>1.2上传下载的安装包</h5> 
<p>创建文件夹并上传安装包</p> 
<pre><code class="prism language-shell"><span class="token function">mkdir</span> -p /opt/software/ambari
<span class="token comment">#使用工具上传</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1d/33/YHhgrwiU_o.png" alt="安装包"></p> 
<p>解压<code> mysql-connector-java-5.1.40.tar.gz</code></p> 
<pre><code class="prism language-shell"><span class="token function">tar</span> -zxvf mysql-connector-java-5.1.40.tar.gz
<span class="token comment">#将解压后目录中的 mysql-connector-java-5.1.40-bin.jar 复制到/usr/share/java/下</span>
<span class="token function">mv</span> mysql-connector-java-5.1.40-bin.jar /usr/share/java/mysql-connector-java.jar
</code></pre> 
<h5><a id="13yum_65"></a>1.3制作本地yum源</h5> 
<pre><code class="prism language-shell"><span class="token function">mkdir</span> /var/www/html/libtrpc
<span class="token function">mv</span> libtirpc-0.2.4-0.16.el7.x86_64.rpm /var/www/html/libtrpc
<span class="token function">mv</span> libtirpc-devel-0.2.4-0.16.el7.x86_64.rpm /var/www/html/libtrpc
<span class="token builtin class-name">cd</span> /var/www/html/libtrpc
createrepo <span class="token builtin class-name">.</span> 
</code></pre> 
<pre><code class="prism language-shell"><span class="token function">tar</span> -zxvf  ambari-2.7.5.0-centos7.tar.gz -C /var/www/html/
<span class="token function">tar</span> -zxvf  HDP-3.1.5.0-centos7-rpm.tar.gz -C /var/www/html/
<span class="token function">tar</span> -zxvf  HDP-GPL-3.1.5.0-centos7-gpl.tar.gz -C /var/www/html/
<span class="token function">tar</span> -zxvf  HDP-UTILS-1.1.0.22-centos7.tar.gz -C /var/www/html/
</code></pre> 
<p>可以看到HDP、HDP-GPL、HDP-UTILS的权限有些不同，修改目录权限并编辑3个本地源</p> 
<p><img src="https://images2.imgbox.com/30/2d/JpwVTQV9_o.png" alt="权限问题"></p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@node1 html<span class="token punctuation">]</span><span class="token comment"># chown -R root:root HDP</span>
<span class="token punctuation">[</span>root@node1 html<span class="token punctuation">]</span><span class="token comment"># chown -R root:root HDP-GPL</span>
<span class="token punctuation">[</span>root@node1 html<span class="token punctuation">]</span><span class="token comment"># chown -R root:root HDP-UTILS</span>
<span class="token punctuation">[</span>root@node1 html<span class="token punctuation">]</span><span class="token comment"># chmod -R 755 HDP</span>
<span class="token punctuation">[</span>root@node1 html<span class="token punctuation">]</span><span class="token comment"># chmod -R 755 HDP-GPL</span>
<span class="token punctuation">[</span>root@node1 html<span class="token punctuation">]</span><span class="token comment"># chmod -R 755 HDP-UTILS</span>
<span class="token comment">#编辑三个本地源：</span>
<span class="token punctuation">[</span>root@node1 html<span class="token punctuation">]</span><span class="token comment"># vim /etc/yum.repos.d/ambari.repo</span>

<span class="token punctuation">[</span>Ambari-2.7.5.0<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Ambari-2.7.5.0
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://node1/ambari/centos7/2.7.5.0-72/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">priority</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token punctuation">[</span>root@node1 html<span class="token punctuation">]</span><span class="token comment"># vim /etc/yum.repos.d/HDP.repo</span>

<span class="token punctuation">[</span>HDP-3.1.5.0<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>HDP Version - HDP-3.1.5.0
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://node1/HDP/centos7/3.1.5.0-152/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">priority</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token punctuation">[</span>HDP-UTILS-1.1.0.22<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>HDP-UTILS Version - HDP-UTILS-1.1.0.22
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://node1/HDP-UTILS/centos7/1.1.0.22/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">priority</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token punctuation">[</span>HDP-GPL-3.1.5.0<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>HDP-GPL Version - HDP-GPL-3.1.5.0
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://node1/HDP-GPL/centos7/3.1.5.0-152
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">priority</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token punctuation">[</span>root@node1 html<span class="token punctuation">]</span><span class="token comment"># vim /etc/yum.repos.d/libtrpc.repo</span>

<span class="token punctuation">[</span>libtirpc_repo<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>libtirpc-0.2.4-0.16
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://node1/libtrpc/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">priority</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre> 
<p>分发到其他节点：</p> 
<pre><code class="prism language-shell"><span class="token function">scp</span>  /etc/yum.repos.d/ambari.repo node2:/etc/yum.repos.d/
<span class="token function">scp</span>  /etc/yum.repos.d/HDP.repo node2:/etc/yum.repos.d/
<span class="token function">scp</span>  /etc/yum.repos.d/libtrpc.repo node2:/etc/yum.repos.d/
<span class="token comment">#node2可以改为node3/4/5...</span>
<span class="token comment">#分别在每台机器上执行：</span>
<span class="token builtin class-name">cd</span> /etc/yum.repos.d/
yum clean all 
yum makecache
</code></pre> 
<p>至此，我们就可以使用yum来安装我们上传的安装包了。</p> 
<h5><a id="2ambariserverKylinV10_152"></a>2、安装ambari-server并解决在KylinV10系统上的问题</h5> 
<p>安装ambari-server</p> 
<pre><code class="prism language-shell">yum -y <span class="token function">install</span> ambari-server
</code></pre> 
<p>复制mysql jdbc驱动到/var/lib/ambari-server/resources/</p> 
<pre><code class="prism language-shell"><span class="token function">cp</span> /usr/share/java/mysql-connector-java.jar /var/lib/ambari-server/resources/
</code></pre> 
<p>配置/etc/ambari-server/conf/ambari.properties，添加如下行</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> /etc/ambari-server/conf/ambari.properties
server.jdbc.driver.path<span class="token operator">=</span>/usr/share/java/mysql-connector-java.jar
</code></pre> 
<p><code>关键来了!!!</code></p> 
<p>yum 安装完server后，需要修改ambari-server的系统检查设置</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> /usr/lib/ambari-server/lib/ambari_commons/os_check.py
<span class="token comment"># :set nu  可以显示脚本行数</span>
</code></pre> 
<p>一共需要修改三处：</p> 
<p><strong>第一处</strong>：在80行左右相似格式的地方插入如下代码(注意格式对齐)</p> 
<pre><code class="prism language-python">_IS_KYLIN_LINUX <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token string">'/etc/kylin-release'</span><span class="token punctuation">)</span>
</code></pre> 
<p>第二处：在90行左右相似格式的地方插入如下代码</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">_is_kylin_linux</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token keyword">return</span> _IS_KYLIN_LINUX
</code></pre> 
<p><strong>第三处</strong>：在210行左右相似格式的地方插入如下代码</p> 
<pre><code class="prism language-python"><span class="token keyword">elif</span> _is_kylin_linux<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	distribution <span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"centos"</span><span class="token punctuation">,</span><span class="token string">"7"</span><span class="token punctuation">,</span><span class="token string">"core"</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="3ambariserver_206"></a>3、安装配置ambari-server</h5> 
<p>初始化ambari数据库连接配置：</p> 
<pre><code class="prism language-shell">ambari-server setup --jdbc-db<span class="token operator">=</span>mysql --jdbc-driver<span class="token operator">=</span>/usr/share/java/mysql-connector-java.jar
</code></pre> 
<p>安装ambari-server：</p> 
<pre><code class="prism language-shell">ambari-server setup
</code></pre> 
<pre><code class="prism language-shell"><span class="token comment"># 提示是否自定义设置。输入：y</span>
Customize user account <span class="token keyword">for</span> ambari-server daemon <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>? y
<span class="token comment"># ambari-server 账号。</span>
Enter user account <span class="token keyword">for</span> ambari-server daemon <span class="token punctuation">(</span>root<span class="token punctuation">)</span>:
<span class="token comment"># 如果直接回车就是默认选择root用户</span>
Adjusting ambari-server permissions and ownership<span class="token punctuation">..</span>.
<span class="token comment"># 检查防火墙是否关闭</span>
Adjusting ambari-server permissions and ownership<span class="token punctuation">..</span>.
Checking firewall<span class="token punctuation">..</span>.
WARNING: iptables is running. Confirm the necessary Ambari ports are accessible. Refer to the Ambari documentation <span class="token keyword">for</span> <span class="token function">more</span> details on ports.
OK to <span class="token builtin class-name">continue</span> <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span>?
<span class="token comment"># 直接回车</span>
<span class="token comment"># 设置JDK。输入：2</span>
Checking JDK<span class="token punctuation">..</span>.
Do you want to change Oracle JDK <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>? y
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Oracle JDK <span class="token number">1.8</span> + Java Cryptography Extension <span class="token punctuation">(</span>JCE<span class="token punctuation">)</span> Policy Files <span class="token number">8</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> Custom JDK
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
Enter choice <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>: <span class="token number">2</span>
<span class="token comment"># 如果上面选择3自定义JDK,则需要设置JAVA_HOME。输入：/opt/module/jdk</span>
WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.
WARNING: JCE Policy files are required <span class="token keyword">for</span> configuring Kerberos security. If you plan to use Kerberos,please <span class="token function">make</span> sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.
Path to JAVA_HOME: /opt/module/jdk
Validating JDK on Ambari Server<span class="token punctuation">..</span>.done.
Check JDK version <span class="token keyword">for</span> Ambari Server<span class="token punctuation">..</span>.
JDK version found: <span class="token number">8</span>
Minimum JDK version is <span class="token number">8</span> <span class="token keyword">for</span> Ambari. Skipping to setup different JDK <span class="token keyword">for</span> Ambari Server.
Checking GPL software agreement<span class="token punctuation">..</span>.
GPL License <span class="token keyword">for</span> LZO: https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html
Enable Ambari Server to download and <span class="token function">install</span> GPL Licensed LZO packages <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>? y
Completing setup<span class="token punctuation">..</span>.
<span class="token comment"># 数据库配置。选择：y</span>
Configuring database<span class="token punctuation">..</span>.
Enter advanced database configuration <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>? y
<span class="token comment"># 选择数据库类型。输入：3</span>
Configuring database<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
Choose one of the following options:
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> - PostgreSQL <span class="token punctuation">(</span>Embedded<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> - Oracle
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> - MySQL/ MariaDB
<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> - PostgreSQL
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> - Microsoft SQL Server <span class="token punctuation">(</span>Tech Preview<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> - SQL Anywhere
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
Enter choice <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>: <span class="token number">3</span>
<span class="token comment"># 设置数据库的具体配置信息，根据实际情况输入，如果和括号内相同，则可以直接回车。如果想重命名，就输入。</span>
Hostname <span class="token punctuation">(</span>localhost<span class="token punctuation">)</span>:
Port <span class="token punctuation">(</span><span class="token number">3306</span><span class="token punctuation">)</span>: 
Database name <span class="token punctuation">(</span>ambari<span class="token punctuation">)</span>: ambari
Username <span class="token punctuation">(</span>ambari<span class="token punctuation">)</span>: ambari
Enter Database Password <span class="token punctuation">(</span>bigdata<span class="token punctuation">)</span>:ambari
Re-Enter password: ambari
<span class="token comment"># 将Ambari数据库脚本导入到数据库</span>
WARNING: Before starting Ambari Server, you must run the following DDL against the database to create the schema: /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql
<span class="token comment"># 这个sql后面会用到，导入数据库</span>
Proceed with configuring remote database connection properties <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span>? y
</code></pre> 
<p>登录MySQL</p> 
<pre><code class="prism language-SQL">mysql -uroot -p123456 

CREATE DATABASE ambari; 
use ambari; 
CREATE USER 'ambari'@'%' IDENTIFIED BY 'ambari'; 
GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'%'; 
CREATE USER 'ambari'@'localhost' IDENTIFIED BY 'ambari'; 
GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'localhost'; 
CREATE USER 'ambari'@'node1' IDENTIFIED BY 'ambari'; 
GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'node1'; 
-- 加载刚才生成的sql脚本
source /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql
</code></pre> 
<h5><a id="4ambariagent_301"></a>4、安装ambari-agent</h5> 
<p>每台服务器都要执行</p> 
<pre><code class="prism language-shell">yum -y <span class="token function">install</span> ambari-agent
</code></pre> 
<h5><a id="5_311"></a>5、启动</h5> 
<p>在主节点（安装server的节点）启动ambari-server</p> 
<pre><code class="prism language-shell">ambari-server start
</code></pre> 
<p>启动成功会提示webUI地址：<code>http://hostname:8080</code></p> 
<p>账户：admin 密码：admin</p> 
<p>未完待续。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bebf8197c4b77f9bc8c24656da154df9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">js获取当日时间。00:00:00。 23:59:59</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7d49f04ca5ddcc60a802edee6dc939c0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Paper Note】Swin Transformer: Hierarchical ViT using Shifted Windows</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>