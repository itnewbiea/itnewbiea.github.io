<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java 实现 Php 的 hash_hmac 函数 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java 实现 Php 的 hash_hmac 函数" />
<meta property="og:description" content="PHP 在php中hash_hmac函数就能将HMAC和一部分哈希加密算法相结合起来实现HMAC-SHA1 HMAC-SHA256 HMAC-MD5等等算法。
函数介绍如下：
string hash_hmac(string $algo, string $data, string $key, bool $raw_output = false)
algo：要使用的哈希算法名称，可以是上述提到的md5,sha1等
data：要进行哈希运算的消息，也就是需要加密的明文。
key：使用HMAC生成信息摘要是所使用的密钥。
raw_output：该参数为可选参数，默认为false，如果设为true，则返回原始二进制数据表示的信息摘要，否则返回16进制小写字符串格式表示的信息摘要（注意是16进制数，而非简单的字母加数字）。
另外：如果algo参数指定的不是受支持的算法，将返回false。
&lt;?php $data = &#34;b-b7a3b7cc7a57fb0433fef3252c60a105&#34;; $key = &#34;d25b2cb97c0b5a82d887ebbc0580cce0&#34;; $str = hash_hmac(&#34;sha1&#34;, $data, $key); echo $str.&#34;\n&#34;; ?&gt; 运行结果：
39b46d318c7338b034d1f623a551b8ddcadb7ac0
Java public static void main(String[] args) throws Exception { String key = &#34;d25b2cb97c0b5a82d887ebbc0580cce0&#34;; String data = &#34;b-b7a3b7cc7a57fb0433fef3252c60a105&#34;; String result = getSignature(data, key); System.out.println(result); } /** * 使用 HMAC-SHA1 签名算法对data进行签名 * @param data 被签名的字符串 * @param key 密钥 * @return 加密后的字符串 */ public static String getSignature(String data, String key) throws Exception { //根据给定的字节数组构造一个密钥,第二参数指定一个密钥算法的名称 SecretKeySpec signinKey = new SecretKeySpec(key." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c42569ab243d50e995f88399f6199a62/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-06T16:50:42+08:00" />
<meta property="article:modified_time" content="2021-07-06T16:50:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java 实现 Php 的 hash_hmac 函数</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>PHP</h4> 
<blockquote> 
 <p>在php中hash_hmac函数就能将HMAC和一部分哈希加密算法相结合起来实现HMAC-SHA1  HMAC-SHA256 HMAC-MD5等等算法。</p> 
 <p>函数介绍如下：<br> string hash_hmac(string $algo, string $data, string $key, bool $raw_output = false)<br> algo：要使用的哈希算法名称，可以是上述提到的md5,sha1等<br> data：要进行哈希运算的消息，也就是需要加密的明文。<br> key：使用HMAC生成信息摘要是所使用的密钥。<br> raw_output：该参数为可选参数，默认为false，如果设为true，则返回原始二进制数据表示的信息摘要，否则返回16进制小写字符串格式表示的信息摘要（注意是16进制数，而非简单的字母加数字）。<br> 另外：如果algo参数指定的不是受支持的算法，将返回false。</p> 
</blockquote> 
<pre><code class="language-php">&lt;?php

$data = "b-b7a3b7cc7a57fb0433fef3252c60a105";
$key = "d25b2cb97c0b5a82d887ebbc0580cce0";
$str  = hash_hmac("sha1", $data, $key);
echo $str."\n";

?&gt;</code></pre> 
<p>运行结果：</p> 
<blockquote> 
 <p>39b46d318c7338b034d1f623a551b8ddcadb7ac0</p> 
</blockquote> 
<h4>Java</h4> 
<pre><code class="language-java">public static void main(String[] args) throws Exception {

	String key = "d25b2cb97c0b5a82d887ebbc0580cce0";
	String data = "b-b7a3b7cc7a57fb0433fef3252c60a105";
	String result = getSignature(data, key);
	System.out.println(result);

}

/**
 * 使用 HMAC-SHA1 签名算法对data进行签名
 * @param data 被签名的字符串
 * @param key  密钥
 * @return 加密后的字符串
 */
public static String getSignature(String data, String key) throws Exception {
	//根据给定的字节数组构造一个密钥,第二参数指定一个密钥算法的名称
	SecretKeySpec signinKey = new SecretKeySpec(key.getBytes(), HmacSHA1);
	//生成一个指定 Mac 算法 的 Mac 对象
	Mac mac = Mac.getInstance(HmacSHA1);
	//用给定密钥初始化 Mac 对象
	mac.init(signinKey);
	//完成 Mac 操作
	byte[] rawHmac = mac.doFinal(data.getBytes());
	String hexBytes = byte2hex(rawHmac);
	return hexBytes;
}

private static String byte2hex(final byte[] b) {
	String hs = "";
	String stmp = "";
	for (int n = 0; n &lt; b.length; n++) {
		// 以十六进制（基数 16）无符号整数形式返回一个整数参数的字符串表示形式。
		stmp = (java.lang.Integer.toHexString(b[n] &amp; 0xFF));
		if (stmp.length() == 1) {
			hs = hs + "0" + stmp;
		} else {
			hs = hs + stmp;
		}
	}
	return hs;
}</code></pre> 
<p>运行结果：</p> 
<blockquote> 
 <p>39b46d318c7338b034d1f623a551b8ddcadb7ac0</p> 
</blockquote> 
<p>参考资料: <a href="https://blog.csdn.net/fairytall/article/details/38874615" title="使用JAVA实现PHP中hash_hmac 函数_我是一只有梦想的攻城狮-CSDN博客_hash_hmac java">使用JAVA实现PHP中hash_hmac 函数_我是一只有梦想的攻城狮-CSDN博客_hash_hmac java</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3452e25872369837843f5ab769578037/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一文让你轻松理解读懂KNN分类算法~</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c94b5d8e3c58405c10e37cc87d895aae/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">NVIDIA-Docker</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>