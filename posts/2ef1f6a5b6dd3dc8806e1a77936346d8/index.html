<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>el_table的this.$refs.MainTable.toggleRowSelection(row, true)；事件会触发selection-change - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="el_table的this.$refs.MainTable.toggleRowSelection(row, true)；事件会触发selection-change" />
<meta property="og:description" content="当我们遇到需求：
在点击时el-table行时，同时选中el-table的多选框。
&lt;el-table border ref=&#34;MainTable&#34; :height=&#34;&#39;100%&#39;&#34; :data=&#34;tableLeft&#34; @select=&#34;handleSelect&#34; @row-click=&#34;handleClick&#34; &gt; handleClick(row){ this.$refs.MainTable.toggleRowSelection(row, true); }, 在点击el-table行时，需求同时选中跟当前行人不同的申请单。比如点击当前人名叫小雪，那么同时选中el-table中小雪的所有不同申请单。
&lt;el-table border ref=&#34;MainTable&#34; :height=&#34;&#39;100%&#39;&#34; :data=&#34;tableLeft&#34; @select=&#34;handleSelect&#34; @row-click=&#34;handleClick&#34; @selection-change=&#34;handleSelectionChange&#34; &gt; handleClick(row){ this.curRow = JSON.parse(JSON.stringify(row)) // hisIsOne：选中一个人是否选中其所有的申请单标识 if (this.hisIsOne === &#34;0&#34;) { let arr = []; let requisitionId = this.curRow.requisitionId; this.tableLeft.forEach((i) =&gt; { if (i.patientSoid === this.curRow.patientSoid) { arr.push(i); } }); if (arr.length &gt; 0) { arr.forEach((j) =&gt; { if (j.requisitionId !== requisitionId) { this.$refs.MainTable.toggleRowSelection(j, true);//①---多选框选中 } }); } } }, // ①处就会触发这一行代码 handleSelectionChange(val){ //多选框做的事。。。。。。。 } ①处的代码因为是循环遍历，所以肯定会多次触发多选事件，那么如何拿到最后一次的多选事件呢（因为多选事件中，最后一次的事件获取的才是最终的）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2ef1f6a5b6dd3dc8806e1a77936346d8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-13T16:22:06+08:00" />
<meta property="article:modified_time" content="2023-12-13T16:22:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">el_table的this.$refs.MainTable.toggleRowSelection(row, true)；事件会触发selection-change</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>当我们遇到需求：</p> 
<p>在点击时el-table行时，同时选中el-table的多选框。</p> 
<pre><code class="language-javascript">&lt;el-table
          border
          ref="MainTable"
          :height="'100%'"
          :data="tableLeft"
          @select="handleSelect"
          @row-click="handleClick"
        &gt;
handleClick(row){
   this.$refs.MainTable.toggleRowSelection(row, true);
},
</code></pre> 
<p>在点击el-table行时，需求同时选中跟当前行人不同的申请单。比如点击当前人名叫小雪，那么同时选中el-table中小雪的所有不同申请单。</p> 
<pre><code class="language-javascript">&lt;el-table
          border
          ref="MainTable"
          :height="'100%'"
          :data="tableLeft"
          @select="handleSelect"
          @row-click="handleClick"
          @selection-change="handleSelectionChange"
        &gt;
handleClick(row){
   this.curRow = JSON.parse(JSON.stringify(row))
   // hisIsOne：选中一个人是否选中其所有的申请单标识
   if (this.hisIsOne === "0") {
       let arr = [];
       let requisitionId = this.curRow.requisitionId;
       this.tableLeft.forEach((i) =&gt; {
         if (i.patientSoid === this.curRow.patientSoid) {
           arr.push(i);
         }
       });
       if (arr.length &gt; 0) {
         arr.forEach((j) =&gt; {
           if (j.requisitionId !== requisitionId) {
             this.$refs.MainTable.toggleRowSelection(j, true);//①---多选框选中
           }
         });
       }
    }
},
// ①处就会触发这一行代码
handleSelectionChange(val){
    //多选框做的事。。。。。。。
}</code></pre> 
<p>①处的代码因为是循环遍历，所以肯定会多次触发多选事件，那么如何拿到最后一次的多选事件呢（因为多选事件中，最后一次的事件获取的才是最终的）</p> 
<p>此时就需要防抖</p> 
<p></p> 
<pre><code class="language-javascript">&lt;el-table
          border
          ref="MainTable"
          :height="'100%'"
          :data="tableLeft"
          @select="handleSelect"
          @row-click="handleClick"
          @selection-change="handleSelectionChange"
        &gt;
handleClick(row){
   this.curRow = JSON.parse(JSON.stringify(row))
   // hisIsOne：选中一个人是否选中其所有的申请单标识
   if (this.hisIsOne === "0") {
       let arr = [];
       let requisitionId = this.curRow.requisitionId;
       this.tableLeft.forEach((i) =&gt; {
         if (i.patientSoid === this.curRow.patientSoid) {
           arr.push(i);
         }
       });
       if (arr.length &gt; 0) {
         arr.forEach((j) =&gt; {
           if (j.requisitionId !== requisitionId) {
             this.$refs.MainTable.toggleRowSelection(j, true);//①---多选框选中
           }
         });
       }
    }
},
// ①处就会触发这一行代码
handleSelectionChange(val){
    //多选框做的事。。。。。。。
    if (this.timerS) clearTimeout(this.timerS);
    this.timerS = setTimeout(() =&gt; {
      this.handleSelectFn(val, type);
    },300);
}

beforeDestroy() {
    this.timerS = null;
  },</code></pre> 
<p>这种情况多用于：点击含有多选框的行，在某处显示当前行的患者信息（可能出现点击事件和多选事件冲突的情况）。那么我们在点击click事件中只做多选框的选中，在多选事件中，做传递数据的操作。</p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e529972c2522d531f5c72595c4f543ec/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">滤光片的作用和原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4cc3df2543d4ba5a7b910b8c1c341540/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android RecyclerView 动画处理 流程 原理（源码分析第二篇）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>