<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos 切换用户_linux进入单用户模式的几种方法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="centos 切换用户_linux进入单用户模式的几种方法" />
<meta property="og:description" content="前言：记得初中时有个刚毕业的老师要走了，同学们纷纷送礼，不过班上总有几个家庭拮据的同学，送的可能不入流或者没送吧，结果，老师一一数出了送的什么礼物，谁谁送的，哪些同学没心意，哪些同学没送，当时懵懂虫一般，好像并没啥，直到后来步入社会回想起，才悟到，其实那对于那几个掉队的人来说，实在有点太受伤害。 后来有个家境很不好的同学退学了，9年义务的最后一年还是放弃了，时隔多年我做一个恶意的猜测吧，那时的那位同学，是不是受到过周围的冷暴力而选择退学呢？当然，我也只能是猜测，没有任何的实际的或者理论来支持，那位同学也是从此再没见过，前年初中同学组了个群，也不曾见到他，或许他也和小编一样，躲在了大城市的角落里，不愿与过往有过多的交集吧
一，进入单用户模式的作用
单用户模式，只有一个用户可以访问某个资源的状态，在类Unix系统上工作时的一种拥有超级用户权限的模式，通常在引导菜单给予1或S参数能进入这个模式。这个模式只在面对主机实体时才有机会透过引导菜单进入，也因此确保超级权限授予的对象是能接触到主机的超级用户，此操作通常用于维护硬盘分区或更改超级用户密码等需在磁盘挂载前操作的维护，库都可以置于单用户模式linux单用户模式，也被称为维护模式，超级用户可以在此模式下恢复/修复系统问题 二，进入单用户的几种方式，以cento7为例子
方法 1：通过向内核添加 rd.break 参数来以单用户模式启动 CentOS/RHEL 7/8 系统方法 2：通过用 init=/bin/bash 或 init=/bin/sh 替换内核中的 rhgb quiet 语句来以单用户模式启动 CentOS/RHEL 7/8 系统方法 3：通过用 rw init=/sysroot/bin/sh 参数替换内核中的 ro 语句以单用户模式启动 CentOS/RHEL 7/8 系统 三，方法1实践：
通过向内核添加 rd.break 参数来以单用户模式启动系统重启系统，在 GRUB2 启动界面，按下 e 键来编辑选中的内核。第一个一般是最新的内核，如果想用旧的内核启动系统你也可以选择其他的行 CentOS 7的系统就找 linux16，提示：如果你的系统是 RHEL/CentOS 8，那么你需要找 linux。在utf-8后添加rd.break，然后ctrl&#43;x，进入紧急模式
如下命令，root 文件系统以 “只读(ro)” 模式挂载，你可以用下面的命令来验证下。下面的输出也明确地告诉你当前是在紧急模式。 mount -o remount,rw /sysroot 为了修改 sysroot 文件系统，我们要用读写模式(rw)重新挂载，以及修改环境。
mount -o remount,rw /sysrootchroot /sysroot 现在，已经进入单用户模式，当修复完问题退出，可以执行下面的步骤，centos7默认使用 SELinux，因此创建下面的隐藏文件，这个文件会在下一次启动时重新标记所有文件
touch /.autorelabelreboot -f #或者连词exit也能退出重启 四，方法2实践：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/986721d81636c559a472f8aa66e99e8f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-26T15:23:17+08:00" />
<meta property="article:modified_time" content="2020-11-26T15:23:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos 切换用户_linux进入单用户模式的几种方法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="._5ce-wx-style" style="font-size:16px;"> 
 <div class="rich_media_content" id="js_content">
   前言：记得初中时有个刚毕业的老师要走了，同学们纷纷送礼，不过班上总有几个家庭拮据的同学，送的可能不入流或者没送吧，结果，老师一一数出了送的什么礼物，谁谁送的，哪些同学没心意，哪些同学没送，当时懵懂虫一般，好像并没啥，直到后来步入社会回想起，才悟到，其实那对于那几个掉队的人来说，实在有点太受伤害。 
  <p>后来有个家境很不好的同学退学了，9年义务的最后一年还是放弃了，时隔多年我做一个恶意的猜测吧，那时的那位同学，是不是受到过周围的冷暴力而选择退学呢？当然，我也只能是猜测，没有任何的实际的或者理论来支持，那位同学也是从此再没见过，前年初中同学组了个群，也不曾见到他，或许他也和小编一样，躲在了大城市的角落里，不愿与过往有过多的交集吧</p> 
  <p><img src="https://images2.imgbox.com/2d/8c/6xGECZ36_o.png" alt="ad34b6967a8ffc6953e73d208174df19.png"></p> 
   
  <p>一，进入单用户模式的作用</p>单用户模式，只有一个用户可以访问某个资源的状态，在类Unix系统上工作时的一种拥有超级用户权限的模式，通常在引导菜单给予1或S参数能进入这个模式。这个模式只在面对主机实体时才有机会透过引导菜单进入，也因此确保超级权限授予的对象是能接触到主机的超级用户，此操作通常用于维护硬盘分区或更改超级用户密码等需在磁盘挂载前操作的维护，库都可以置于单用户模式linux单用户模式，也被称为维护模式，超级用户可以在此模式下恢复/修复系统问题 
  <p>二，进入单用户的几种方式，以cento7为例子</p> 
  <pre class="has"><code>方法 1：通过向内核添加 rd.break 参数来以单用户模式启动 CentOS/RHEL 7/8 系统方法 2：通过用 init=/bin/bash 或 init=/bin/sh 替换内核中的 rhgb quiet 语句来以单用户模式启动 CentOS/RHEL 7/8 系统方法 3：通过用 rw init=/sysroot/bin/sh 参数替换内核中的 ro 语句以单用户模式启动 CentOS/RHEL 7/8 系统</code></pre> 
  <p>三，方法1实践：</p>通过向内核添加 rd.break 参数来以单用户模式启动系统重启系统，在 GRUB2 启动界面，按下 e 键来编辑选中的内核。第一个一般是最新的内核，如果想用旧的内核启动系统你也可以选择其他的行 
  <p><img src="https://images2.imgbox.com/77/7a/ELzX1Rkz_o.png" alt="23e37d89ba8fc4e2266153b46eab0585.png"></p> 
  <p>CentOS 7的系统就找 linux16，提示：如果你的系统是 RHEL/CentOS 8，那么你需要找 linux。在utf-8后添加rd.break，然后ctrl+x，进入紧急模式</p> 
  <p><img src="https://images2.imgbox.com/c0/01/IZvzAgwr_o.png" alt="12ea712550c3cc03daf755de79375951.png"></p> 
  <p><img src="https://images2.imgbox.com/7e/df/EcD21NLc_o.png" alt="b15d887e14ef03c1a9702b46f1716010.png"></p> 
  <p><img src="https://images2.imgbox.com/84/28/anpFlWHz_o.png" alt="90de0532159bff86f10b20f59d98a46f.png"></p>如下命令，root 文件系统以 “只读(ro)” 模式挂载，你可以用下面的命令来验证下。下面的输出也明确地告诉你当前是在紧急模式。 
  <pre class="has"><code>mount -o remount,rw /sysroot</code></pre> 
  <p><img src="https://images2.imgbox.com/a3/96/zySOwqlb_o.png" alt="2b9c30e342bbb26df90adccf3618154d.png"></p> 
  <p>为了修改 sysroot 文件系统，我们要用读写模式(rw)重新挂载，以及修改环境。</p> 
  <pre class="has"><code>mount -o remount,rw /sysrootchroot /sysroot</code></pre> 
  <p><img src="https://images2.imgbox.com/df/1d/FWpoJcgy_o.png" alt="19f5391a544907bfb1ab182fb942422c.png"></p> 
  <p>现在，已经进入单用户模式，当修复完问题退出，可以执行下面的步骤，centos7默认使用 SELinux，因此创建下面的隐藏文件，这个文件会在下一次启动时重新标记所有文件</p> 
  <pre class="has"><code>touch /.autorelabelreboot -f #或者连词exit也能退出重启</code></pre> 
  <p>四，方法2实践：</p> 
  <p>通过用 init=/bin/bash 或 init=/bin/sh 替换内核中的 rhgb quiet 语句来以单用户模式启动系统。</p> 
  <p>同样，重启你的系统，在 GRUB2 启动界面，按下 e 键来编辑选中的内核</p> 
  <p><img src="https://images2.imgbox.com/85/44/5M9hxULt_o.png" alt="ad0a437ca5b95b0c3b43322e9c5f7dcc.png"></p> 
  <p>找到语句 rhgb quiet，用 init=/bin/bash 或 init=/bin/sh 替换它，然后按下 Ctrl+x 或 F10 来进入单用户模式</p> 
  <p><img src="https://images2.imgbox.com/15/90/CkbvAOe2_o.png" alt="770c4cc26ee2d7abf3512a5f960d46f6.png"></p> 
  <p><img src="https://images2.imgbox.com/3a/84/pbWuI0qY_o.png" alt="3f086ea02e227cb6f3048c4c8ecfaa57.png"></p> 
  <p>默认情况下，上面的操作会以只读(ro)模式挂载/ 分区，因此我们需要以读写(rw)模式重新挂载 / 文件系统</p> 
  <pre class="has"><code>mount -o remount,rw /</code></pre> 
  <p><img src="https://images2.imgbox.com/ad/d2/91pGInSx_o.png" alt="6f54d1764a1ad91ef7d188481c2e0cce.png"></p> 
  <p>当修复完系统，可以如下命令退出重启</p> 
  <pre class="has"><code>#执行下面的命令来开启重启时的 SELinux 重新标记touch /.autorelabelexec /sbin/init</code></pre> 
  <p>五，方法3实践：</p>通过用 rw init=/sysroot/bin/sh 参数替换内核中的 ro 单词，以单用户模式启动系统。同样，重启你的系统，在 GRUB2 启动界面，按下 e 键来编辑选中的内核，找到以 linux 或 linux16 开头的语句，用 rw init=/sysroot/bin/sh 替换 ro。替换完后按下 Ctrl+x 或 F10 来进入单用户模式 
  <img src="https://images2.imgbox.com/23/3e/PYfCGMy2_o.png" alt="ad0a437ca5b95b0c3b43322e9c5f7dcc.png"> 
  <p><img src="https://images2.imgbox.com/af/ce/h8SA7Obu_o.png" alt="f6ea04385db5b747c38d9b45d7ddfc8c.png"></p> 
  <p><img src="https://images2.imgbox.com/e2/26/Cb6mBTY5_o.png" alt="18afb15fe3f5cdcf50c5c4f9cc3c6291.png"></p> 
  运行下面的命令把环境切换为 “chroot 工作目录 ”，操作完同样可以退出重启 
  <pre class="has"><code>chroot /sysroottouch /.autorelabelreboot -f</code></pre> 
   
  六，总结 
  <p>在此模式下，系统会挂载所有的本地文件系统，但不开启网络接口，系统仅启动特定的几个服务和修复系统必要的尽可能少的功能，当你想运行文件系统一致性检查来修复损坏的文件系统，或忘记 root 密码后重置密码，或要修复系统上的一个挂载点问题时，这个方法会很有用。</p> 
  <pre><code></code></pre> 
  <p><code>最后的最后(Last but not least)，欢迎交流：</code></p> 
  <code></code> 
  <p><code>关注公众号留言，或者在下方直接留言：</code></p> 
  <code></code> 
  <p><code><img src="https://images2.imgbox.com/c2/4c/FIYrk79b_o.png" alt="f9ef6685047b823cbf19138d8f5efc1a.png"></code></p> 
  <code></code> 
 </div> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/190409471c39b7bf2a6959baeee76032/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">适合 Java 新手的开源项目集合——在 GitHub 学编程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eaa247f73cc539fb2c5d9913d2e3abc0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">plink软件初体验3--计算样本杂合度和SNP位点杂合度</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>