<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS 7.5一键脚本安装MySQL - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS 7.5一键脚本安装MySQL" />
<meta property="og:description" content="CentOS 7.5一键脚本安装MySQL mysql 版本 : mysql-5.7.27-linux-glibc2.12-x86_64.tar.gz
shell脚本： auto_install_mysql.sh
脚本写权限 [root@localhost /]# chmod &#43;x auto_install_mysql.sh
[root@localhost /]# yum install -y dos2unix.x86_64
[root@localhost /]# dos2unix auto_install_mysql.sh
dos2unix: converting file auto_install_mysql.sh to Unix format …
写入脚本
[root@localhost /]# sh auto_install_mysql.sh ##以下为脚本代码
#!/bin/bash export LANG=en_US.UTF-8 INSTALL_PATH=$(pwd) echo &#34;当前目录:&#34;&#43;${INSTALL_PATH} echo &#34;删除mysql相关配置文件并copy my.cnf到etc目录&#34; rm -rf /etc/my.cnf rm -rf /etc/init.d/mysql cp my.cnf /etc/my.cnf echo &#34;创建mysql用户组和用户&#34; groupadd mysql useradd -g mysql mysql echo &#34;解压.tar.gz到指定文件夹下 /usr/local/mysql&#34; tar -vxzf mysql-5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/0edd5b15b22fe7cdf5f68da6c111ff93/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-11T12:16:14+08:00" />
<meta property="article:modified_time" content="2022-11-11T12:16:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS 7.5一键脚本安装MySQL</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="CentOS_75MySQL_0"></a>CentOS 7.5一键脚本安装MySQL</h3> 
<p>mysql 版本 : mysql-5.7.27-linux-glibc2.12-x86_64.tar.gz<br> shell脚本： auto_install_mysql.sh</p> 
<h3><a id="_3"></a>脚本写权限</h3> 
<p>[root@localhost /]# chmod +x auto_install_mysql.sh<br> [root@localhost /]# yum install -y dos2unix.x86_64<br> [root@localhost /]# dos2unix auto_install_mysql.sh<br> dos2unix: converting file auto_install_mysql.sh to Unix format …<br> 写入脚本<br> [root@localhost /]# sh auto_install_mysql.sh ##以下为脚本代码</p> 
<pre><code class="prism language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>en_US.UTF-8
 
<span class="token assign-left variable">INSTALL_PATH</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">"当前目录:"</span>+<span class="token variable">${INSTALL_PATH}</span>
 
<span class="token builtin class-name">echo</span> <span class="token string">"删除mysql相关配置文件并copy my.cnf到etc目录"</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/my.cnf
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/init.d/mysql
<span class="token function">cp</span> my.cnf /etc/my.cnf
 
<span class="token builtin class-name">echo</span> <span class="token string">"创建mysql用户组和用户"</span>
<span class="token function">groupadd</span> mysql
<span class="token function">useradd</span> <span class="token parameter variable">-g</span> mysql mysql
 
<span class="token builtin class-name">echo</span> <span class="token string">"解压.tar.gz到指定文件夹下 /usr/local/mysql"</span>
<span class="token function">tar</span> <span class="token parameter variable">-vxzf</span> mysql-5.7.27-linux-glibc2.12-x86_64.tar.gz
<span class="token function">mv</span> mysql-5.7.27-linux-glibc2.12-x86_64/ /usr/local/mysql/
 
<span class="token builtin class-name">echo</span> <span class="token string">"更改usr/local/mysql所属的组和用户"</span>
<span class="token builtin class-name">cd</span> /usr/local
<span class="token assign-left variable">USR_LOCAL</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>
 
<span class="token function">chown</span> <span class="token parameter variable">-R</span> mysql mysql/
<span class="token function">chgrp</span> <span class="token parameter variable">-R</span> mysql mysql/
 
<span class="token builtin class-name">cd</span> mysql/
<span class="token builtin class-name">echo</span> <span class="token string">"创建mysql数据目录data并设置目录权限"</span>+<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>
<span class="token function">mkdir</span> data
<span class="token function">chown</span> <span class="token parameter variable">-R</span> mysql:mysql data
 
<span class="token builtin class-name">echo</span> <span class="token string">"创建my.cnf配置文件"</span>
<span class="token function">cat</span> <span class="token operator">&gt;</span>/etc/my.cnf<span class="token operator">&lt;&lt;</span><span class="token string">EOF
[mysql]
# 设置mysql客户端默认字符集
default-character-set=utf8 
[mysqld]
skip-name-resolve
#设置3306端口
port = 3306 
# 设置mysql的安装目录
basedir=/usr/local/mysql
# 设置mysql数据库的数据的存放目录
datadir=/usr/local/mysql/data
# 允许最大连接数
max_connections=200
# 服务端使用的字符集默认为8比特编码的latin1字符集
character-set-server=utf8
# 创建新表时将使用的默认存储引擎
default-storage-engine=INNODB 
lower_case_table_names=1
max_allowed_packet=16M
EOF</span>

<span class="token builtin class-name">echo</span> <span class="token string">"设置mysql权限并初始化mysql"</span>
<span class="token function">cp</span> ./support-files/mysql.server /etc/init.d/mysqld
<span class="token function">chown</span> <span class="token number">777</span> /etc/my.cnf
<span class="token function">chmod</span> a+x /etc/init.d/mysqld
/usr/local/mysql/bin/mysqld <span class="token parameter variable">--initialize</span>  <span class="token parameter variable">--user</span><span class="token operator">=</span>mysql <span class="token parameter variable">--basedir</span><span class="token operator">=</span>/usr/local/mysql/ <span class="token parameter variable">--datadir</span><span class="token operator">=</span>/usr/local/mysql/data/
 
<span class="token builtin class-name">echo</span> <span class="token string">"修改mysql环境变量&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;"</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export PATH=$PATH:/usr/local/mysql/bin'</span> <span class="token operator">&gt;&gt;</span> /etc/profile
<span class="token function">sleep</span> <span class="token number">2</span>
<span class="token builtin class-name">source</span> /etc/profile
 
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
     <span class="token builtin class-name">echo</span> <span class="token string">"配置mysql环境变量成功!"</span>
<span class="token keyword">else</span>
     <span class="token builtin class-name">echo</span> <span class="token string">"配置mysql环境变量失败!"</span>
<span class="token keyword">fi</span>
 
<span class="token comment">#yum install -y psmisc</span>
<span class="token comment">#killall mysqld</span>
 
<span class="token function">service</span> mysqld restart
<span class="token function">sleep</span> <span class="token number">5</span>
<span class="token builtin class-name">echo</span> <span class="token string">"mysql启动成功!"</span>

<span class="token builtin class-name">echo</span> <span class="token string">"通过mysql -uroot -p 操作"</span>
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/mysql/bin/mysql /usr/bin

<span class="token builtin class-name">echo</span> <span class="token string">"设置mysql开机自启!"</span>
<span class="token function">chmod</span> +x /etc/rc.d/init.d/mysqld
<span class="token function">chkconfig</span> <span class="token parameter variable">--add</span> mysqld
<span class="token function">chkconfig</span> <span class="token parameter variable">--level</span> <span class="token number">35</span> mysqld
 
<span class="token builtin class-name">echo</span> <span class="token string">"mysql重设后启动成功!!!!!!"</span>
</code></pre> 
<p>[root@localhost /]# sh auto_install_mysql.sh ##此处以下为安装过程内容<br> 当前目录:+/<br> 删除mysql相关配置文件并copy my.cnf到etc目录<br> cp: cannot stat ‘my.cnf’: No such file or directory<br> 创建mysql用户组和用户<br> 解压.tar.gz到指定文件夹下 /usr/local/mysql<br> mysql-5.7.27-linux-glibc2.12-x86_64/bin/myisam_ftdump<br> mysql-5.7.27-linux-glibc2.12-x86_64/bin/myisamchk<br> mysql-5.7.27-linux-glibc2.12-x86_64/bin/myisamlog<br> …<br> …<br> …<br> 2021-07-12T08:52:13.159791Z 1 [Note] A temporary password is generated for root@localhost: IrlOJCbHw1&gt;j ####MySQL登录密码<br> 修改mysql环境变量&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br> 配置mysql环境变量成功!<br> ERROR! MySQL server PID file could not be found!<br> Starting MySQL.Logging to ‘/usr/local/mysql/data/localhost.localdomain.err’.<br> SUCCESS!<br> mysql启动成功!<br> 通过mysql -uroot -p 操作<br> 设置mysql开机自启!<br> only one runlevel may be specified for a chkconfig query<br> mysql重设后启动成功!!!</p> 
<h3><a id="MySQL_125"></a>查看MySQL是否启动</h3> 
<p>[root@localhost /]# ps -ef|grep mysql</p> 
<h3><a id="_128"></a>查看监听端口</h3> 
<p>[root@localhost /]# netstat -lntp | grep mysqld<br> tcp6 0 0 :::3306 ::😗 LISTEN 2218mysqld</p> 
<h3><a id="mysql_132"></a>更改mysql数据库密码</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mysql -u root -p</span>
Enter password: 
Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.
Your MySQL connection <span class="token function">id</span> is <span class="token number">2</span>
Server version: <span class="token number">5.7</span>.27

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2019</span>, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">'help;'</span> or <span class="token string">'\h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'\c'</span> to <span class="token function">clear</span> the current input statement.

mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> password <span class="token keyword">for</span> root@localhost <span class="token operator">=</span> password<span class="token punctuation">(</span><span class="token string">'Admin@1234'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected, <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span> 

</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/09bd1d3f795ed10f85215c6f2ab929fc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">electron开发mac/windows桌面程序，配合vue3&#43;vite进行配置开发</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1b5bcbe948118b296667213597ea9f19/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决npm install安装vue-element-admin报错 Error while executing: C:\Program Files\Git\cmd\git.EXE ls-remote</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>