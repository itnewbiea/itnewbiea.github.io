<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WPF Prism（一）Region - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="WPF Prism（一）Region" />
<meta property="og:description" content="WPF Prism（一）Region
WPF Prism（二）Module
WPF Prism（三）ViewModelLocator
WPF Prism（四）MVVM
WPF Prism（五）Navigation
WPF Prism（六）Dialog
一、什么是Region 在Prism当中，一个页面我们可以不再为其固定显示的内容，而这种概念变成了区域（Region）划分的概念。将页面显示的区域划分成N个Region，每一个Region将动态分配区域。它将负责承担我们的UI组件或者控件。
二、RegionManager类 RegionManager IRegionManager &#43; IRegionCollection Regions &#43;IRegionManager AddToRegion(string regionName, object view) &#43;RegisterViewWithRegion(string regionName, Type viewType) RegionManager功能
维护区域集合提供对区域的访问合成视图区域导航定义区域 三、使用RegionManager 首先，我们需要将MainWindow的构造函数传入IRegionManager参数：
public partial class MainWindow : Window { public MainWindow(IRegionManager regionManager) { InitializeComponent(); } } 注意：因为MainWindow对象是我们在App类中使用容器解析得到的，那么它需要的依赖IRegion也会自动被创建，不需要我们自己创建。
在定义视图与Region之间的映射关系之前我们需要先定义Region，定义Region有两种方法：
3.1、在xaml中 &lt;Window xmlns:prism=&#34;http://prismlibrary.com/&#34; Title=&#34;Shell&#34;&gt; &lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&#34;0.2*&#34; /&gt; &lt;RowDefinition /&gt; &lt;/Grid.RowDefinitions&gt; &lt;ContentControl Grid.Row=&#34;0&#34; prism:RegionManager.RegionName=&#34;HeaderRegion&#34; /&gt; &lt;/Grid&gt; &lt;/Window&gt; 代码有省略，重点关注需要引入prism命名空间。
3.2、在cs文件中 &lt;ContentControl x:Name=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/fc22bd6e7f7c93b1d3be552b79383ff7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-20T09:54:38+08:00" />
<meta property="article:modified_time" content="2022-04-20T09:54:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">WPF Prism（一）Region</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="https://blog.csdn.net/zhudaokuan/article/details/114271434?spm=1001.2014.3001.5501">WPF Prism（一）Region</a><br> <a href="https://blog.csdn.net/zhudaokuan/article/details/114281989?spm=1001.2014.3001.5501">WPF Prism（二）Module</a><br> <a href="https://blog.csdn.net/zhudaokuan/article/details/114286497?spm=1001.2014.3001.5501">WPF Prism（三）ViewModelLocator</a><br> <a href="https://blog.csdn.net/zhudaokuan/article/details/114312428?spm=1001.2014.3001.5501">WPF Prism（四）MVVM</a><br> <a href="https://blog.csdn.net/zhudaokuan/article/details/114332190?spm=1001.2014.3001.5501">WPF Prism（五）Navigation</a><br> <a href="https://blog.csdn.net/zhudaokuan/article/details/114376498?spm=1001.2014.3001.5501">WPF Prism（六）Dialog</a></p> 
<h2><a id="Region_6"></a>一、什么是Region</h2> 
<p>在Prism当中，一个页面我们可以不再为其固定显示的内容，而这种概念变成了区域（Region）划分的概念。将页面显示的区域划分成N个Region，每一个Region将动态分配区域。它将负责承担我们的UI组件或者控件。</p> 
<h2><a id="RegionManager_10"></a>二、RegionManager类</h2> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-fFnJGXvqAHATkRhA" width="100%" xmlns="http://www.w3.org/2000/svg" height="286" style="max-width: 483.671875px;" viewbox="0 0 483.671875 286"> 
  <style>#mermaid-svg-fFnJGXvqAHATkRhA {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-fFnJGXvqAHATkRhA .error-icon{fill:#552222;}#mermaid-svg-fFnJGXvqAHATkRhA .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-fFnJGXvqAHATkRhA .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-fFnJGXvqAHATkRhA .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-fFnJGXvqAHATkRhA .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-fFnJGXvqAHATkRhA .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-fFnJGXvqAHATkRhA .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-fFnJGXvqAHATkRhA .marker{fill:#333333;stroke:#333333;}#mermaid-svg-fFnJGXvqAHATkRhA .marker.cross{stroke:#333333;}#mermaid-svg-fFnJGXvqAHATkRhA svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-fFnJGXvqAHATkRhA g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-svg-fFnJGXvqAHATkRhA g.classGroup text .title{font-weight:bolder;}#mermaid-svg-fFnJGXvqAHATkRhA .nodeLabel,#mermaid-svg-fFnJGXvqAHATkRhA .edgeLabel{color:#131300;}#mermaid-svg-fFnJGXvqAHATkRhA .edgeLabel .label rect{fill:#ECECFF;}#mermaid-svg-fFnJGXvqAHATkRhA .label text{fill:#131300;}#mermaid-svg-fFnJGXvqAHATkRhA .edgeLabel .label span{background:#ECECFF;}#mermaid-svg-fFnJGXvqAHATkRhA .classTitle{font-weight:bolder;}#mermaid-svg-fFnJGXvqAHATkRhA .node rect,#mermaid-svg-fFnJGXvqAHATkRhA .node circle,#mermaid-svg-fFnJGXvqAHATkRhA .node ellipse,#mermaid-svg-fFnJGXvqAHATkRhA .node polygon,#mermaid-svg-fFnJGXvqAHATkRhA .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-fFnJGXvqAHATkRhA .divider{stroke:#9370DB;stroke:1;}#mermaid-svg-fFnJGXvqAHATkRhA g.clickable{cursor:pointer;}#mermaid-svg-fFnJGXvqAHATkRhA g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-svg-fFnJGXvqAHATkRhA g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-svg-fFnJGXvqAHATkRhA .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-svg-fFnJGXvqAHATkRhA .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-svg-fFnJGXvqAHATkRhA .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-svg-fFnJGXvqAHATkRhA .dashed-line{stroke-dasharray:3;}#mermaid-svg-fFnJGXvqAHATkRhA #compositionStart,#mermaid-svg-fFnJGXvqAHATkRhA .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-svg-fFnJGXvqAHATkRhA #compositionEnd,#mermaid-svg-fFnJGXvqAHATkRhA .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-svg-fFnJGXvqAHATkRhA #dependencyStart,#mermaid-svg-fFnJGXvqAHATkRhA .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-svg-fFnJGXvqAHATkRhA #dependencyStart,#mermaid-svg-fFnJGXvqAHATkRhA .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-svg-fFnJGXvqAHATkRhA #extensionStart,#mermaid-svg-fFnJGXvqAHATkRhA .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-svg-fFnJGXvqAHATkRhA #extensionEnd,#mermaid-svg-fFnJGXvqAHATkRhA .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid-svg-fFnJGXvqAHATkRhA #aggregationStart,#mermaid-svg-fFnJGXvqAHATkRhA .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-svg-fFnJGXvqAHATkRhA #aggregationEnd,#mermaid-svg-fFnJGXvqAHATkRhA .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid-svg-fFnJGXvqAHATkRhA .edgeTerminals{font-size:11px;}#mermaid-svg-fFnJGXvqAHATkRhA :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g transform="translate(0, 0)"> 
   <defs> 
    <marker id="classDiagram-aggregationStart" class="marker aggregation classDiagram" refx="0" refy="7" markerwidth="190" markerheight="240" orient="auto"> 
     <path d="M 18,7 L9,13 L1,7 L9,1 Z"></path> 
    </marker> 
   </defs> 
   <defs> 
    <marker id="classDiagram-aggregationEnd" class="marker aggregation classDiagram" refx="19" refy="7" markerwidth="20" markerheight="28" orient="auto"> 
     <path d="M 18,7 L9,13 L1,7 L9,1 Z"></path> 
    </marker> 
   </defs> 
   <defs> 
    <marker id="classDiagram-extensionStart" class="marker extension classDiagram" refx="0" refy="7" markerwidth="190" markerheight="240" orient="auto"> 
     <path d="M 1,7 L18,13 V 1 Z"></path> 
    </marker> 
   </defs> 
   <defs> 
    <marker id="classDiagram-extensionEnd" class="marker extension classDiagram" refx="19" refy="7" markerwidth="20" markerheight="28" orient="auto"> 
     <path d="M 1,1 V 13 L18,7 Z"></path> 
    </marker> 
   </defs> 
   <defs> 
    <marker id="classDiagram-compositionStart" class="marker composition classDiagram" refx="0" refy="7" markerwidth="190" markerheight="240" orient="auto"> 
     <path d="M 18,7 L9,13 L1,7 L9,1 Z"></path> 
    </marker> 
   </defs> 
   <defs> 
    <marker id="classDiagram-compositionEnd" class="marker composition classDiagram" refx="19" refy="7" markerwidth="20" markerheight="28" orient="auto"> 
     <path d="M 18,7 L9,13 L1,7 L9,1 Z"></path> 
    </marker> 
   </defs> 
   <defs> 
    <marker id="classDiagram-dependencyStart" class="marker dependency classDiagram" refx="0" refy="7" markerwidth="190" markerheight="240" orient="auto"> 
     <path d="M 5,7 L9,13 L1,7 L9,1 Z"></path> 
    </marker> 
   </defs> 
   <defs> 
    <marker id="classDiagram-dependencyEnd" class="marker dependency classDiagram" refx="19" refy="7" markerwidth="20" markerheight="28" orient="auto"> 
     <path d="M 18,7 L9,13 L14,7 L9,1 Z"></path> 
    </marker> 
   </defs> 
   <g class="root"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <path d="M241.8359375,73L241.8359375,77.16666666666667C241.8359375,81.33333333333333,241.8359375,89.66666666666667,241.8359375,98C241.8359375,106.33333333333333,241.8359375,114.66666666666667,241.8359375,118.83333333333333L241.8359375,123" id="id1" class="  edge-pattern-solid relation" style="fill:none" marker-start="url(#classDiagram-extensionStart)"></path> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel"> 
      <g class="label" transform="translate(0, 0)"> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span class="edgeLabel"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="classid-RegionManager-2" transform="translate(241.8359375, 40.5)"> 
      <rect class="outer title-state" x="-63.875" y="-32.5" width="127.75" height="65"></rect> 
      <line class="divider" x1="-63.875" x2="63.875" y1="5.5" y2="5.5"></line> 
      <line class="divider" x1="-63.875" x2="63.875" y1="21.5" y2="21.5"></line> 
      <g class="label"> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span class="nodeLabel"></span> 
        </div> 
       </foreignobject> 
       <foreignobject class="classTitle" width="112.75" height="26" transform="translate( -56.375, -25)"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span class="nodeLabel">RegionManager</span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="node default" id="classid-IRegionManager-3" transform="translate(241.8359375, 200.5)"> 
      <rect class="outer title-state" x="-233.8359375" y="-77.5" width="467.671875" height="155"></rect> 
      <line class="divider" x1="-233.8359375" x2="233.8359375" y1="-39.5" y2="-39.5"></line> 
      <line class="divider" x1="-233.8359375" x2="233.8359375" y1="6.5" y2="6.5"></line> 
      <g class="label"> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span class="nodeLabel"></span> 
        </div> 
       </foreignobject> 
       <foreignobject class="classTitle" width="117.203125" height="26" transform="translate( -58.6015625, -70)"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span class="nodeLabel">IRegionManager</span> 
        </div> 
       </foreignobject> 
       <foreignobject width="196.0625" height="26" transform="translate( -226.3359375, -28)"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span class="nodeLabel">+ IRegionCollection Regions</span> 
        </div> 
       </foreignobject> 
       <foreignobject width="452.671875" height="26" transform="translate( -226.3359375, 14)"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span class="nodeLabel">+IRegionManager AddToRegion(string regionName, object view)</span> 
        </div> 
       </foreignobject> 
       <foreignobject width="437.765625" height="26" transform="translate( -226.3359375, 44)"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span class="nodeLabel">+RegisterViewWithRegion(string regionName, Type viewType)</span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>RegionManager功能</p> 
<ul><li>维护区域集合</li><li>提供对区域的访问</li><li>合成视图</li><li>区域导航</li><li>定义区域</li></ul> 
<h2><a id="RegionManager_29"></a>三、使用RegionManager</h2> 
<p>首先，我们需要将MainWindow的构造函数传入IRegionManager参数：</p> 
<pre><code class="prism language-csharp">    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Window</span></span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token class-name">IRegionManager</span> regionManager<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>注意：因为MainWindow对象是我们在App类中使用容器解析得到的，那么它需要的依赖IRegion也会自动被创建，不需要我们自己创建。</p> 
<p>在定义视图与Region之间的映射关系之前我们需要先定义Region，定义Region有两种方法：</p> 
<h3><a id="31xaml_49"></a>3.1、在xaml中</h3> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">Window</span>
    xmlns<span class="token punctuation">:</span>prism<span class="token operator">=</span><span class="token string">"http://prismlibrary.com/"</span>
    Title<span class="token operator">=</span><span class="token string">"Shell"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Grid<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Grid<span class="token punctuation">.</span>RowDefinitions<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">RowDefinition</span> Height<span class="token operator">=</span><span class="token string">"0.2*"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>RowDefinition <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token punctuation">.</span>RowDefinitions<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ContentControl Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"0"</span> prism<span class="token punctuation">:</span>RegionManager<span class="token punctuation">.</span>RegionName<span class="token operator">=</span><span class="token string">"HeaderRegion"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Window<span class="token operator">&gt;</span>
</code></pre> 
<p>代码有省略，重点关注需要引入prism命名空间。</p> 
<h3><a id="32cs_67"></a>3.2、在cs文件中</h3> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">ContentControl</span> x<span class="token punctuation">:</span>Name<span class="token operator">=</span><span class="token string">"Header"</span> Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> 
<pre><code class="prism language-csharp">        <span class="token keyword">public</span> <span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token class-name">IRegionManager</span> regionManager<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            RegionManager<span class="token punctuation">.</span><span class="token function">SetRegionName</span><span class="token punctuation">(</span>Header<span class="token punctuation">,</span> <span class="token string">"HeaderRegion"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>上述两种方式都是可以的。</p> 
<h2><a id="View_DiscoveryView_Injection_84"></a>四、View Discovery和View Injection</h2> 
<p>现在我们在MainWindow中定义了三个Region，同时定义了三个UserControl。</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">Window</span>
    x<span class="token punctuation">:</span>Class<span class="token operator">=</span><span class="token string">"PrismBlankAppCore.Views.MainWindow"</span>
    xmlns<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    xmlns<span class="token punctuation">:</span>x<span class="token operator">=</span><span class="token string">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
    xmlns<span class="token punctuation">:</span>prism<span class="token operator">=</span><span class="token string">"http://prismlibrary.com/"</span>
    Title<span class="token operator">=</span><span class="token string">"Shell"</span>
    Width<span class="token operator">=</span><span class="token string">"525"</span>
    Height<span class="token operator">=</span><span class="token string">"350"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Grid<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Grid<span class="token punctuation">.</span>RowDefinitions<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">RowDefinition</span> Height<span class="token operator">=</span><span class="token string">"0.2*"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>RowDefinition <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token punctuation">.</span>RowDefinitions<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ContentControl Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"0"</span> prism<span class="token punctuation">:</span>RegionManager<span class="token punctuation">.</span>RegionName<span class="token operator">=</span><span class="token string">"HeaderRegion"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Grid Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Grid<span class="token punctuation">.</span>ColumnDefinitions<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">ColumnDefinition</span> Width<span class="token operator">=</span><span class="token string">"0.4*"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ColumnDefinition <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token punctuation">.</span>ColumnDefinitions<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>ContentControl Grid<span class="token punctuation">.</span>Column<span class="token operator">=</span><span class="token string">"0"</span> prism<span class="token punctuation">:</span>RegionManager<span class="token punctuation">.</span>RegionName<span class="token operator">=</span><span class="token string">"MenuRegion"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>ContentControl Grid<span class="token punctuation">.</span>Column<span class="token operator">=</span><span class="token string">"1"</span> prism<span class="token punctuation">:</span>RegionManager<span class="token punctuation">.</span>RegionName<span class="token operator">=</span><span class="token string">"ContentRegion"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Window<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9a/4d/0TK1s0xg_o.png" alt="在这里插入图片描述"></p> 
<p>在Prism中有两种方式来定义视图与Region之间的映射关系——<strong>View Discovery</strong>和<strong>View Injection</strong>。</p> 
<h3><a id="41View_Discovery_122"></a>4.1View Discovery</h3> 
<pre><code class="prism language-csharp">        <span class="token keyword">public</span> <span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token class-name">IRegionManager</span> regionManager<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//View Dicovery</span>
            regionManager<span class="token punctuation">.</span><span class="token function">RegisterViewWithRegion</span><span class="token punctuation">(</span><span class="token string">"HeaderRegion"</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">HeaderView</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            regionManager<span class="token punctuation">.</span><span class="token function">RegisterViewWithRegion</span><span class="token punctuation">(</span><span class="token string">"MenuRegion"</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MenuView</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            regionManager<span class="token punctuation">.</span><span class="token function">RegisterViewWithRegion</span><span class="token punctuation">(</span><span class="token string">"ContentRegion"</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ContentView</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="42View_Injection_136"></a>4.2View Injection</h3> 
<pre><code class="prism language-csharp">    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Window</span></span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> <span class="token class-name">IRegionManager</span> regionManager<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">IContainerExtension</span> container<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token class-name">IRegionManager</span> regionManager<span class="token punctuation">,</span> <span class="token class-name">IContainerExtension</span> container<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//View Dicovery</span>
            <span class="token comment">//regionManager.RegisterViewWithRegion("HeaderRegion", typeof(HeaderView));</span>
            <span class="token comment">//regionManager.RegisterViewWithRegion("MenuRegion", typeof(MenuView));</span>
            <span class="token comment">//regionManager.RegisterViewWithRegion("ContentRegion", typeof(ContentView));</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>regionManager <span class="token operator">=</span> regionManager<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>container <span class="token operator">=</span> container<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Window_Loaded</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//View Injection</span>
            <span class="token class-name">HeaderView</span> headerView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HeaderView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"HeaderRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>headerView<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">MenuView</span> menuView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MenuView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"MenuRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>menuView<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">ContentView</span> contentView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ContentView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"ContentRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>contentView<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>注入View的时候需要用到Add方法，还得提前将View对象创建好，所以在构造函数中我们需要注入IRegionManager和IContainerExtension的实现。</p> 
<p>值得一提的是，在构造函数中IRegionManager对象还没有创建完成（应该是RegionName还没有创建完成），所以在Load函数中完成View Injection。如果需要View对象是单例的，可以提前在App类的重写函数中注册单例对象。</p> 
<p><img src="https://images2.imgbox.com/97/76/RWFa0Pl0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="43ActiveDeactivate_178"></a>4.3Active和Deactivate</h3> 
<p>将App类修改为：View对象注册为单例对象。</p> 
<pre><code class="prism language-csharp">        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RegisterTypes</span><span class="token punctuation">(</span><span class="token class-name">IContainerRegistry</span> containerRegistry<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            containerRegistry<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HeaderView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            containerRegistry<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MenuView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            containerRegistry<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ContentView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>MainWindow增加了三个按钮：</p> 
<pre><code class="prism language-csharp">        <span class="token operator">&lt;</span>UniformGrid Grid<span class="token punctuation">.</span>Row<span class="token operator">=</span><span class="token string">"2"</span> Columns<span class="token operator">=</span><span class="token string">"3"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                Width<span class="token operator">=</span><span class="token string">"80"</span>
                Height<span class="token operator">=</span><span class="token string">"30"</span>
                Content<span class="token operator">=</span><span class="token string">"Activate"</span> Click<span class="token operator">=</span><span class="token string">"Activate"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                Width<span class="token operator">=</span><span class="token string">"80"</span>
                Height<span class="token operator">=</span><span class="token string">"30"</span>
                Content<span class="token operator">=</span><span class="token string">"Refresh"</span> Click<span class="token operator">=</span><span class="token string">"Refresh"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                Width<span class="token operator">=</span><span class="token string">"80"</span>
                Height<span class="token operator">=</span><span class="token string">"30"</span>
                Content<span class="token operator">=</span><span class="token string">"Deactivate"</span> Click<span class="token operator">=</span>"Deactivate
                " <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>UniformGrid<span class="token operator">&gt;</span>
</code></pre> 
<p>增加对应的三个方法：</p> 
<pre><code class="prism language-csharp">    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//激活</span>
        <span class="token class-name">HeaderView</span> headerView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HeaderView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"HeaderRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span>headerView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">MenuView</span> menuView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MenuView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"MenuRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span>menuView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ContentView</span> contentView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ContentView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"ContentRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span>contentView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Refresh</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//刷新  因为已经add过，所以需要先remove</span>
        <span class="token class-name">HeaderView</span> headerView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HeaderView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"HeaderRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>headerView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">MenuView</span> menuView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MenuView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"MenuRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>menuView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ContentView</span> contentView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ContentView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"ContentRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>contentView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"HeaderRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>headerView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"MenuRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>menuView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"ContentRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>contentView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Deactivate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//使无效</span>
        <span class="token class-name">HeaderView</span> headerView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HeaderView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"HeaderRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Deactivate</span><span class="token punctuation">(</span>headerView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">MenuView</span> menuView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MenuView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"MenuRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Deactivate</span><span class="token punctuation">(</span>menuView<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ContentView</span> contentView <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ContentView<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        regionManager<span class="token punctuation">.</span>Regions<span class="token punctuation">[</span><span class="token string">"ContentRegion"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Deactivate</span><span class="token punctuation">(</span>contentView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b4/24/AAMa59Ei_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="RegionAdapters_261"></a>五、RegionAdapters</h2> 
<p>Prism提供了许多内置得RegionAdapter：</p> 
<ul><li>ContentControlRegionAdapter</li><li>ItemsControlRegionAdapter</li><li><strong>SelectorRegionAdapter</strong><br> - ComboBox<br> - ListBox<br> - Ribbon<br> - TabControl</li></ul> 
<p>除此之外，如果想要实现控件作用域Region，则必须创建自定义RegionAdapter。</p> 
<p>下面我们创建一个一个基于StackPanel的自定义适配器。</p> 
<h3><a id="51RegionAdapterBaseT_277"></a>5.1首先从创建一个继承于RegionAdapterBase的类。</h3> 
<pre><code class="prism language-csharp">    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StackPanelRegionAdapter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RegionAdapterBase<span class="token punctuation">&lt;</span>StackPanel<span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token function">StackPanelRegionAdapter</span><span class="token punctuation">(</span><span class="token class-name">IRegionBehaviorFactory</span> regionBehaviorFactory<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>regionBehaviorFactory<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>

        <span class="token punctuation">}</span>
        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Adapt</span><span class="token punctuation">(</span><span class="token class-name">IRegion</span> region<span class="token punctuation">,</span> <span class="token class-name">StackPanel</span> regionTarget<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">IRegion</span> <span class="token function">CreateRegion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="52_298"></a>5.2实现重写的方法</h3> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StackPanelRegionAdapter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RegionAdapterBase<span class="token punctuation">&lt;</span>StackPanel<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token function">StackPanelRegionAdapter</span><span class="token punctuation">(</span><span class="token class-name">IRegionBehaviorFactory</span> regionBehaviorFactory<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>regionBehaviorFactory<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Adapt</span><span class="token punctuation">(</span><span class="token class-name">IRegion</span> region<span class="token punctuation">,</span> <span class="token class-name">StackPanel</span> regionTarget<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        region<span class="token punctuation">.</span>Views<span class="token punctuation">.</span>CollectionChanged <span class="token operator">+=</span> <span class="token punctuation">(</span>s<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>Action <span class="token operator">==</span> NotifyCollectionChangedAction<span class="token punctuation">.</span>Add<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">FrameworkElement</span> element <span class="token keyword">in</span> e<span class="token punctuation">.</span>NewItems<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    regionTarget<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>Action <span class="token operator">==</span> NotifyCollectionChangedAction<span class="token punctuation">.</span>Remove<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">FrameworkElement</span> element <span class="token keyword">in</span> e<span class="token punctuation">.</span>OldItems<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    regionTarget<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//handle other case</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">IRegion</span> <span class="token function">CreateRegion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Region</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="53App_335"></a>5.3最后需要在App类中注册适配器</h3> 
<pre><code class="prism language-csharp">        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureRegionAdapterMappings</span><span class="token punctuation">(</span><span class="token class-name">RegionAdapterMappings</span> regionAdapterMappings<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">ConfigureRegionAdapterMappings</span><span class="token punctuation">(</span>regionAdapterMappings<span class="token punctuation">)</span><span class="token punctuation">;</span>

            regionAdapterMappings<span class="token punctuation">.</span><span class="token function">RegisterMapping</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">StackPanel</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>StackPanelRegionAdapter<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/408e13918357b34b92fe84c39b93e1f1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">URL 的编码和解码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/893b1f2eda9d83d847eb6e9eae94bc3b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Arcgis api for JavaScript 4.X 学习——图层加载（要素图层、栅格图层、切片图层）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>