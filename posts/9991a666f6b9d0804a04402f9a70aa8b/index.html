<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于 video 视频 autoplay 播放问题及解决方法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于 video 视频 autoplay 播放问题及解决方法" />
<meta property="og:description" content="自动播放机制 自动播放机制其实就是会拦截自动播放的视频。
chrome、safari、firefox、edge 浏览器在某版本后都限制了video自动播放功能，原因为内部机制认为此视频为垃圾广告，和IOS系统一样，同时也是为客户体验度考虑，因此会限制自动播放功能。
解决办法 视频静音模式允许自动播放
以下几种模式下 非静音也可以自动播放
客户已和当前做了交互方式 ：click tap 事件
客户将此网站添加到手机主桌面，就像App一样 采用PWA技术
媒体参与度达到一定值后，同样可以自动播放
PWA 描述: PWA 又为（Progressive Web App，PWA），是一个使用web平台技术构建的应用程序，采用各种Web 技术将浏览器页面实现APP应用化，当然手机应用如支持PWA，可以无需下载通过PWA Web APP 添加到客户主屏幕上，快速访问全屏体验，目前PWA已支持不同操作系统和设备上运行 。
特性:离线访问、推送消息、数据同步、实时更新。
手机无网络情况下，应用的启用动画特效等其实是使用离线访问实现。
媒体参与度 客户与媒体的交互度主要从客户的观看时间、交互行为、观看率、转换率来计算 - 浏览器内部算法。
错误代码示例 如只在video中加入autoplay 无任何错误提示 画面停留在第一帧。
不使用 autoplay，在页面加载后调用 video play 方法 使用 autoplay，同时调用 video play 方法才会出现错误信息 以下代码运行会提示：play() failed because the user didn&#39;t interact with the document
原因：提示为未与客户做交互。
解决：可以加入弹框提示，客户交互点击播放 - JS处代码 。 自定义 DIV 弹框、ElementPlus Dialog 均可，自行选择。 &lt;template&gt; &lt;video controls autoplay&gt; &lt;source src=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9991a666f6b9d0804a04402f9a70aa8b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-10T17:07:51+08:00" />
<meta property="article:modified_time" content="2023-10-10T17:07:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于 video 视频 autoplay 播放问题及解决方法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<h2>自动播放机制</h2> 
<p>        自动播放机制其实就是会拦截自动播放的视频。</p> 
<p>        chrome、safari、firefox、edge 浏览器在某版本后都限制了video自动播放功能，原因为内部机制认为此视频为垃圾广告，和IOS系统一样，同时也是为客户体验度考虑，因此会限制自动播放功能。</p> 
<h2></h2> 
<h2>解决办法</h2> 
<ul><li> <p>视频静音模式允许自动播放</p> </li><li> <p>以下几种模式下 非静音也可以自动播放</p> 
  <ul><li> <p>客户已和当前做了交互方式 ：click tap 事件</p> </li><li> <p>客户将此网站添加到手机主桌面，就像App一样 采用PWA技术</p> </li><li> <p>媒体参与度达到一定值后，同样可以自动播放</p> </li></ul></li></ul> 
<h2>PWA</h2> 
<p>描述: PWA 又为（Progressive Web App，PWA），是一个使用web平台技术构建的<a href="https://baike.baidu.com/item/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/5985445?fromModule=lemma_inlink" rel="nofollow" title="应用程序">应用程序</a>，采用各种Web 技术将浏览器页面实现APP应用化，当然手机应用如支持PWA，可以无需下载通过PWA Web APP 添加到客户主屏幕上，快速访问全屏体验，目前PWA已支持不同<a href="https://www.zhihu.com/search?q=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A3052378899%7D" rel="nofollow" title="操作系统">操作系统</a>和设备上运行 。</p> 
<p><strong>特性</strong>:离线访问、推送消息、数据同步、实时更新。</p> 
<p>手机无网络情况下，应用的启用动画特效等其实是使用离线访问实现。</p> 
<p></p> 
<h2>媒体参与度</h2> 
<p>客户与媒体的交互度主要从客户的观看时间、交互行为、观看率、转换率来计算 - 浏览器内部算法。</p> 
<p></p> 
<h2>错误代码示例</h2> 
<p>  如只在video中加入autoplay 无任何错误提示 画面停留在第一帧。</p> 
<ul><li> 不使用 autoplay，在页面加载后调用 video play 方法</li><li> 使用 autoplay，同时调用 video play 方法才会出现错误信息</li></ul> 
<p>  以下代码运行会提示：<span style="color:#fe2c24;">play() failed because the user didn't interact with the document</span></p> 
<p>  原因：提示为未与客户做交互。</p> 
<p>  解决：可以加入弹框提示，客户交互点击播放 - JS处代码 。                </p> 
<ul><li>自定义 DIV 弹框、ElementPlus Dialog 均可，自行选择。</li></ul> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;video controls autoplay&gt;
    &lt;source src="@/assets/audio/testVideo.mp4" type="video/mp4" /&gt;
  &lt;/video&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;

   import {
    ref,
    onMounted
  } from "vue";

  onMounted(() =&gt; {
    // 此处不加 play 控制台不会出现报错
    document.querySelector("video")!.play();
  })

&lt;/script&gt;

&lt;style scoped lang="less"&gt;

&lt;/style&gt;</code></pre> 
<h2></h2> 
<h2> 静音自动播放示例</h2> 
<p>  在 video 标签上添加 muted 属性</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;video controls autoplay muted&gt;
    &lt;source src="@/assets/audio/testVideo.mp4" type="video/mp4" /&gt;
  &lt;/video&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;

   import {
    ref,
    onMounted
  } from "vue";

  onMounted(() =&gt; {
    document.querySelector("video")!.play();
  })

&lt;/script&gt;

&lt;style scoped lang="less"&gt;

&lt;/style&gt;</code></pre> 
<p></p> 
<h2>客户交互播放示例</h2> 
<p> 此处仅实现交互方式，样式自行编写。</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;button @click="play"&gt;开始播放&lt;/button&gt;
  &lt;video controls autoplay&gt;
    &lt;source src="@/assets/audio/testVideo.mp4" type="video/mp4" /&gt;
  &lt;/video&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;

   import {
    ref,
    onMounted
  } from "vue";

  const play = () =&gt; {
    let video : HTMLVideoElement = document.querySelector("video")!;
    // paused 播放状态
    if(video.paused){
        video.play();
    }
  }

&lt;/script&gt;

&lt;style scoped lang="less"&gt;

&lt;/style&gt;</code></pre> 
<p></p> 
<p>此帖查阅了相关资料，如若对PWA感兴趣此处可<a class="link-info" href="https://blog.csdn.net/fuhanghang/article/details/120194334" title="快速访问">快速访问</a>，如有问题请指出，欢迎讨论。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ccbd30c495942cc14d48c444d25ce86b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">WSL2下的Docker配置和使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e143cca7b94a5e6e2d4cc15a007b620/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决OMP: Error #15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.报错问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>