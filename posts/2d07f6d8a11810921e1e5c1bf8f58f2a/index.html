<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【软件测试学习】MongoDB入门（基于Navicat） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【软件测试学习】MongoDB入门（基于Navicat）" />
<meta property="og:description" content="引入：电商平台商品信息存储
Mysql：针对不同商品创建不同的表；建一张打表，所有商品存储到表里；公共属性提取出来建表，特有属性各自建表；
MongoDB：没有表结构概念（无需建表），文档内容可以非常灵活地去定制。
与Mysql相比优势在于速度快、操作简单、使用便捷、灵活；
劣势：安全性、数据的一致性、稳定性不够
基本概念 一款流行的文档数据库。
主要特点：高性能（处理请求速度快）、高可用性（大多数时间都能正常运行）、自动扩展（有应对快速负载的能力）、免费开源
MongoDB三元素：数据库、集合（collection）、文档（document）
注解：一个数据库(书)可以包含多个集合(章)，一个集合又可以包含多个文档(每一页)；
MongoDB将数据存储为一个文档，文档数据由键值对组成。
键值对：键：属性/字段；值：属性/字段的取值；（放在一起叫键值对）
文档格式：{key1:value1,key2:value2,kye3:value3…}
键：字符串类型
值：的类型多种多样（数字，字符串、数组、文档等）
环境搭建 安装教程
安装成功
掌握全部操作 常见操作 围绕mongodb三元素----数据库、集合、文档（重点）
查看所有数据库列表
show dbs;建库
use 数据库名;（两重含义：如果use后面跟的数据库名在当前连接下没有，这创建数据库，并选择该数据库；如果当前连接下有该数据库，则直接选择该数据库。）
举例：
use test1;
显示当前连接的是哪个数据库
db;
查看当前数据库下有那些集合
show collections;
创建集合插入文档
db.collection_name.insert()
insert()两种含义:执行插入操作时会去检查collection_name在当前数据库下有没有，如果有则往该集合下插入数据；如果没有则会创建该集合并插入数据。
举例：db.a.insert({x:1});
_id为做文档插入时系统给每个文档分配的一个编号，这个编号在每次数据插入时都会自动生成有别于其他文档的编号作为这个文档的标识。 文档的操作 数据的增删改查
文档的插入
1.插入单个文档
db.a.insert({x:1,y:2,z:3}) ;
并实际没有按表的方式存储
2. 一次性往集合插入多个文档
多个文档以数组的方式插入
数组：一组数据；格式：[data1,data2,…datan]
db.a.insert([{},{},{}]);
当给同一个键赋多个值的时候，取最后一个值
db.a.insert({m:1,m:2,m:3});
允许重复插入多次相同的文档，因为系统每次给文档分配不同的编号（_id）不同的编号代表着不同的文档
允许用户自定义_id，但不可两次取值相同
db.a.insert({_id:编号,键:值});
文档的查询 运算符 算术运算符
$eq equal =
$ne not equal !=
$gt greater than &gt;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2d07f6d8a11810921e1e5c1bf8f58f2a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-23T14:43:50+08:00" />
<meta property="article:modified_time" content="2022-10-23T14:43:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【软件测试学习】MongoDB入门（基于Navicat）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>引入：电商平台商品信息存储<br> Mysql：针对不同商品创建不同的表；建一张打表，所有商品存储到表里；公共属性提取出来建表，特有属性各自建表；<br> MongoDB：没有表结构概念（无需建表），文档内容可以非常灵活地去定制。<br> 与Mysql相比优势在于速度快、操作简单、使用便捷、灵活；<br> 劣势：安全性、数据的一致性、稳定性不够</p> 
<h2><a id="_5"></a>基本概念</h2> 
<p>一款流行的文档数据库。<br> 主要特点：高性能（处理请求速度快）、高可用性（大多数时间都能正常运行）、自动扩展（有应对快速负载的能力）、免费开源<br> MongoDB三元素：数据库、集合（collection）、文档（document）<br> 注解：一个数据库(书)可以包含多个集合(章)，一个集合又可以包含多个文档(每一页)；<br> MongoDB将数据存储为一个文档，文档数据由键值对组成。<br> 键值对：键：属性/字段；值：属性/字段的取值；（放在一起叫键值对）<br> 文档格式：{key1:value1,key2:value2,kye3:value3…}<br> 键：字符串类型<br> 值：的类型多种多样（数字，字符串、数组、文档等）</p> 
<h2><a id="_15"></a>环境搭建</h2> 
<p><a href="https://blog.csdn.net/zy_tender/article/details/123249334">安装教程</a><br> 安装成功<br> <img src="https://images2.imgbox.com/f7/d6/d0kQxbjn_o.png" alt="1"><br> <img src="https://images2.imgbox.com/b4/50/q2FAj59K_o.png" alt="1"><br> <img src="https://images2.imgbox.com/b4/f9/uD3r3vFQ_o.png" alt="1"></p> 
<h2><a id="_22"></a>掌握全部操作</h2> 
<h3><a id="_23"></a>常见操作</h3> 
<p>围绕mongodb三元素----数据库、集合、文档（重点）</p> 
<ul><li>查看所有数据库列表<br> show dbs;</li><li>建库<br> use 数据库名;（两重含义：如果use后面跟的数据库名在当前连接下没有，这创建数据库，并选择该数据库；如果当前连接下有该数据库，则直接选择该数据库。）<br> 举例：<br> use test1;<br> <img src="https://images2.imgbox.com/25/48/5t8yZjMm_o.png" alt="1"></li><li>显示当前连接的是哪个数据库<br> db;<br> <img src="https://images2.imgbox.com/38/7d/KEHo2iQ6_o.png" alt="1"></li><li>查看当前数据库下有那些集合<br> show collections;<br> <img src="https://images2.imgbox.com/90/32/lbAdiUNb_o.png" alt="1"></li><li>创建集合插入文档<br> db.collection_name.insert()<br> insert()两种含义:执行插入操作时会去检查collection_name在当前数据库下有没有，如果有则往该集合下插入数据；如果没有则会创建该集合并插入数据。<br> 举例：db.a.insert({x:1});<br> <img src="https://images2.imgbox.com/cf/bd/1HbFDl83_o.png" alt="1"><br> <img src="https://images2.imgbox.com/25/53/TAE59Atn_o.png" alt="1"><br> <img src="https://images2.imgbox.com/a5/4e/AkjbOjxF_o.png" alt="1"><br> _id为做文档插入时系统给每个文档分配的一个编号，这个编号在每次数据插入时都会自动生成有别于其他文档的编号作为这个文档的标识。</li></ul> 
<h4><a id="_46"></a>文档的操作</h4> 
<p>数据的增删改查</p> 
<ul><li>文档的插入<br> 1.插入单个文档<br> db.a.insert({x:1,y:2,z:3}) ;<br> <img src="https://images2.imgbox.com/f2/44/rGsnrVLo_o.png" alt="1"><br> 并实际没有按表的方式存储<br> <img src="https://images2.imgbox.com/29/fe/xTIzPQt3_o.png" alt="1"><br> 2. 一次性往集合插入多个文档<br> 多个文档以数组的方式插入<br> 数组：一组数据；格式：[data1,data2,…datan]<br> db.a.insert([{},{},{}]);<br> <img src="https://images2.imgbox.com/2b/7c/eKa6qikU_o.png" alt="1"><br> 当给同一个键赋多个值的时候，取最后一个值<br> db.a.insert({m:1,m:2,m:3});<br> <img src="https://images2.imgbox.com/d3/0a/VQoKk78G_o.png" alt="1"><br> 允许重复插入多次相同的文档，因为系统每次给文档分配不同的编号（_id）不同的编号代表着不同的文档<br> <img src="https://images2.imgbox.com/e0/1e/fvWpBGyX_o.png" alt="1"></li><li>允许用户自定义_id，但不可两次取值相同<br> db.a.insert({_id:编号,键:值});<br> <img src="https://images2.imgbox.com/21/6d/IZ8acj21_o.png" alt="1"></li></ul> 
<h4><a id="_67"></a>文档的查询</h4> 
<h5><a id="_68"></a>运算符</h5> 
<ul><li>算术运算符<br> $eq equal =<br> $ne not equal !=<br> $gt greater than &gt;<br> $gte greater than equal &gt;=<br> $lt lower than &lt;<br> $lte &lt;=<br> $in 在。。。里面<br> $nin 不在。。。里面</li></ul> 
<pre><code class="prism language-bash"><span class="token punctuation">{<!-- --></span>field:<span class="token punctuation">{<!-- --></span>运算符:value<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> 
<p>查询导演是冯小刚的商品信息<br> 两种写法<br> <img src="https://images2.imgbox.com/f2/fb/9sOuMVIU_o.png" alt="1"><br> 查询非电影票的信息<br> <img src="https://images2.imgbox.com/89/37/qbcAB291_o.png" alt="1"><br> 查询价格高于200块的商品信息<br> <img src="https://images2.imgbox.com/1b/fc/cSY9Ww8v_o.png" alt="1"><br> 查询电影票和音乐的商品信息<br> <img src="https://images2.imgbox.com/d5/9b/tXrvoVau_o.png" alt="1"></p> 
<ul><li>逻辑运算符<br> $and 与<br> $or 或<br> $not 非</li></ul> 
<pre><code class="prism language-bash"><span class="token punctuation">{<!-- --></span><span class="token variable">$and</span>/<span class="token variable">$or</span>:<span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>条件1<span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span>条件2<span class="token punctuation">}</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span>键:<span class="token punctuation">{<!-- --></span><span class="token variable">$not</span>:<span class="token punctuation">{<!-- --></span>条件1<span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span>条件2<span class="token punctuation">}</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> 
<p>查询价格在40到280之间的商品信息<br> <img src="https://images2.imgbox.com/4b/99/Q1USqLyI_o.png" alt="1"><br> 查询导演是冯小刚的电影票信息<br> <img src="https://images2.imgbox.com/e6/87/5BejZoLM_o.png" alt="1"><br> 或者<code>db.product.find({director:'冯小刚',item:'电影票'});</code><br> 查询电影票和音乐的商品信息<br> <img src="https://images2.imgbox.com/4d/5f/XGUudJI2_o.png" alt="1"><br> 或者<code>db.product.find({$or:[{item:'电影票'},{item:'音乐'}]});</code></p> 
<h5><a id="_107"></a>内嵌文档的查询</h5> 
<p>查询商品尺寸满足长度为75，宽度为50，度量单位为cm的商品信息<br> <img src="https://images2.imgbox.com/44/ff/kp1tqliL_o.png" alt="1"><br> 以上这种写法，如果不按内嵌文档录入时的顺序写就会查询不到（保证顺序保持一致）<br> 希望顺序不匹配也能查询到，则写成</p> 
<pre><code class="prism language-bash">db.product.find<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'size.width'</span>:50,<span class="token string">'size.length'</span>:75,<span class="token string">'size.uom'</span><span class="token builtin class-name">:</span><span class="token string">'cm'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意：涉及到内嵌文档里的字段的引用，通过.的方式引用，<em><strong>内嵌字段的引号一定要加</strong></em><br> <img src="https://images2.imgbox.com/d9/7f/WsYKsV7e_o.png" alt="1"></p> 
<p>查询商品尺寸度量单位为cm的商品信息<br> <img src="https://images2.imgbox.com/34/82/28en7nkj_o.png" alt="1"></p> 
<h5><a id="_121"></a>数组的查询</h5> 
<p>数组(array)：[data1,data2,…,datan]<br> 数组里的每一个数据称为元素(element)，元素是由编号的，编号是从0开始，这就意味着我们可以通过数<em><strong>组名.编号</strong></em>的方式取值<br> 举例：取演员列表里的第二个值，用<em><strong>actor.1</strong></em>表示</p> 
<ul><li>完全匹配一个数组<br> 查询tags数组只包含red和blank，且red在前blank在后的商品信息<br> <img src="https://images2.imgbox.com/a9/60/nuM0eGGi_o.png" alt="1"></li><li>部分匹配<br> 查询tags数组包含了red和blank的商品信息<br> 使用了 $all<br> <img src="https://images2.imgbox.com/35/5a/56wxfeGJ_o.png" alt="1"><br> 举例：<br> 找到tags数组里由red元素的记录<br> <img src="https://images2.imgbox.com/75/83/e8eTsvUZ_o.png" alt="1"><br> 找到dim_cm数组里包含至少一个元素的值大于25的记录<br> <img src="https://images2.imgbox.com/45/a3/063Swtay_o.png" alt="1"><br> 找到数组dim_cm中某个元素大于15且小于20<br> 使用elemMatch作用把后面两个条件<em><strong>锁定在同一个数组元素</strong></em>上去<br> <img src="https://images2.imgbox.com/78/bc/Ntz8df0c_o.png" alt="1"><br> 以下写法会将一个元素大于15另外一个元素小于20的记录也查询出来<br> <img src="https://images2.imgbox.com/e3/51/UKjVfAbg_o.png" alt="1"><br> 找到数组dim_cm的第二个元素值大于25的记录<br> <img src="https://images2.imgbox.com/43/0e/x3Rwxeri_o.png" alt="1"><br> 找到tags数组里包含一个元素的记录<br> $size用来统计数组元素的个数<br> <img src="https://images2.imgbox.com/b8/0d/i0b62Nne_o.png" alt="在这里插入图片描述"></li><li>进阶：<br> 查询A仓库有5个数量的商品信息<br> 完全查询（此语句需要注意顺序）<br> <img src="https://images2.imgbox.com/25/c6/pZYdes09_o.png" alt="1"><br> 部分查询<br> <img src="https://images2.imgbox.com/bb/a2/8f0P9Wze_o.png" alt="1"></li></ul> 
<p>查询instock第一个数组元素的qty值小于等于20 的记录<br> <img src="https://images2.imgbox.com/bb/bb/06pCSV94_o.png" alt="1"><br> 查询instock任意数组元素的qty值小于等于20 的记录<br> （将.0删掉）<br> <img src="https://images2.imgbox.com/06/0e/75YOHZgb_o.png" alt="1"><br> 查询特定的字段信息<br> 查询猫妖传的价格<br> <img src="https://images2.imgbox.com/93/56/3qOwvMQ8_o.png" alt="1"><br> 排除_id（<em><strong>除了_id其他字段置0或置1不可以混用，否则会报错</strong></em>）<br> <img src="https://images2.imgbox.com/07/ee/H07nXRjt_o.png" alt="1"><br> 查询所有商品的名字<br> <img src="https://images2.imgbox.com/66/45/suFBeXqD_o.png" alt="在这里插入图片描述"></p> 
<p>小结：find();方法时会跟两个参数，每个参数都是文档的类型<br> 第一个参数位置放的是查询条件，第二个位置是字段显示的说明</p> 
<ul><li> <p>排序显示sort</p> 
  <ol><li>按价格升序<br> <img src="https://images2.imgbox.com/2b/fb/xqNnnQ7I_o.png" alt="1"><br> 2.按价格降序<br> <img src="https://images2.imgbox.com/8e/6e/elPHsVCg_o.png" alt="1"><br> 3. 先按价格升序，再按库存降序<br> <img src="https://images2.imgbox.com/53/66/8XeQg3bR_o.png" alt="1"></li></ol> </li><li> <p>空值查询<br> N/A:Not Applicable的缩写,表示不适用<br> block:阻塞状态<br> <img src="https://images2.imgbox.com/23/dd/hF2fkngS_o.png" alt="1"></p> 
  <ol><li>查询item为空<br> <img src="https://images2.imgbox.com/a0/8a/yX1PcTt8_o.png" alt="在这里插入图片描述"><br> 只想只想查询item为空的字段<br> <img src="https://images2.imgbox.com/39/ee/nOe5OXYn_o.png" alt="1"><br> 只想查询没有item的字段文档<br> <img src="https://images2.imgbox.com/21/74/pB3SdTLY_o.png" alt="1"></li></ol> </li></ul> 
<h5><a id="_188"></a>文档的更新和删除</h5> 
<p><em><strong>$set两重含义：当set后面的字段是原来没有的，就会把字段加进去，如果是原本就有的，则会做相应修改</strong></em></p> 
<ul><li> <p>文档的更新<br> update();<br> updateMany);<br> 通常跟两个参数第一个参数位置放的是更新的条件，第二个参数放的是更新的内容<br> 更新一个文档<br> 将猫妖传的票价更新为55<br> 不能写成<code>db.product.update({name:'猫妖传'},{price:55});</code>，因为它会使price覆盖掉满足这个条件的文档的所有字段（_id除外的其他字段都会被覆盖），需要加$set<br> <img src="https://images2.imgbox.com/3f/4b/c8rwmuri_o.png" alt="1"><br> 更新多个文档<br> 将电影票的库存更新为150<br> <img src="https://images2.imgbox.com/05/07/PZBosmO9_o.png" alt="1"><br> 将所有商品的价格上涨2块钱<br> <img src="https://images2.imgbox.com/6b/09/fm0GpBQN_o.png" alt="1"><br> 降价两块钱<br> <img src="https://images2.imgbox.com/50/36/FlZjDzYp_o.png" alt="1"></p> <p>将所有商品的stocks字段删除<br> <img src="https://images2.imgbox.com/a4/2d/TYM6jagU_o.png" alt="1"><br> 将stock是字段追加回来<br> <img src="https://images2.imgbox.com/3b/b5/K3ahTSNs_o.png" alt="1"></p> </li><li> <p>文档是删除<br> deleteOne()<br> deleteMany()</p> 
  <ol><li>删除一条文档<br> <img src="https://images2.imgbox.com/9f/e0/Qzp3B1Hd_o.png" alt="1"></li><li>删除多条文档<br> <img src="https://images2.imgbox.com/d2/c0/s9oI9IiB_o.png" alt="1"></li><li>删除所有文档<br> <img src="https://images2.imgbox.com/e0/e2/1GPLZbQT_o.png" alt="1"><br> 集合还在里面的数据还在<br> <img src="https://images2.imgbox.com/51/8e/KPkgcwXP_o.png" alt="1"></li></ol> </li></ul> 
<h4><a id="_221"></a>补充</h4> 
<h5><a id="_222"></a>集合的相关操作</h5> 
<ul><li>创建<br> 隐式创建：db.xxx.insert({x:1});<br> 显示创建：db.createCollection(‘xxx’);</li><li>删除集合<br> db.product.drop();<br> <img src="https://images2.imgbox.com/54/a9/MFcqAQRl_o.png" alt="1"></li></ul> 
<h5><a id="_229"></a>数据库相关操作</h5> 
<ul><li>创建<br> use xxx;<br> 需要插入一条数据，show dbs;才会显示<br> <img src="https://images2.imgbox.com/55/6c/tKHQ91T8_o.png" alt="1"></li><li>删除xxx数据库<br> <img src="https://images2.imgbox.com/16/c8/h7EWiyUt_o.png" alt="1"><br> 先切换到要删除的数据库，再用db.dropDatabase();来删除<br> <img src="https://images2.imgbox.com/e6/1f/yi1fdQu6_o.png" alt="1"><br> <a href="https://www.mongodb.com/docs/manual/reference/sql-comparison/" rel="nofollow">sql和mongodb对照表</a></li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e02159ccf39be0bc75019539a6bc4715/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">windows中copy /B 实现文件里藏文件（文件隐写的实现）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e2caf587f01bbb2b03a4bc51412aa3a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">动态规划算法05-KSum问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>