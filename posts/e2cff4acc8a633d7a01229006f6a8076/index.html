<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker 快速安装Jenkins完美教程（解决无法安装插件问题） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker 快速安装Jenkins完美教程（解决无法安装插件问题）" />
<meta property="og:description" content="一、前言
有人问，为什么要用Jenkins？我说下我以前开发的痛点，在一些中小型企业，每次开发一个项目完成后，需要打包部署，可能没有专门的运维人员，只能开发人员去把项目打成一个war包，可能这个项目已经上线了，需要把服务关，在部署到服务器上，将项目启动起来，这个时候可能某个用户正在操作某些功能上的东西，如果你隔三差五的部署一下，这样的话对用户的体验也不好，自己也是烦的很，总是打包拖到服务器上。希望小型企业工作人员学习一下，配置可能复杂，但是你配置好了之后，你只需要把代码提交到Git或者Svn上，自动构建部署，非常方便。有任何地方不懂的翻到最下方随时咨询我，想帮助更多的初学者共同一起努力成长！
二、Jenkins简介
Jenkins是一个开源软件项目，是基于Java开发的一种持续集成工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。
三、jenkins基本工作原理
以上为基本工作原理，只是为了开发人员更好的理解画的（个人理解），详情可查看官方文档：https://www.jenkins.io/zh/
四、准备工作
1.需要准备一台服务器。
2.需要准备一个远程连接工具，连接到Linux系统，作者采用的是：Xshell 工具 （注意：Xshell下载地址翻到本文最下面）。
3.如果没有安装Docker的，给大家准备好了教程如下：
Docker安装教程：https://www.cnblogs.com/fuzongle/p/12781828.html 五、开始安装
1.启动docker，下载Jenkins镜像文件（注意这里最好使用最新版本的Jenkins镜像，否则可能插件会无法下载）
docker pull jenkins/jenkins:lts 2.创建Jenkins挂载目录并授权权限（我们在服务器上先创建一个jenkins工作目录 /var/jenkins_mount，赋予相应权限，稍后我们将jenkins容器目录挂载到这个目录上，这样我们就可以很方便地对容器内的配置文件进行修改。 如果我们不这样做，那么如果需要修改容器配置文件，将会有点麻烦，因为虽然我们可以使用docker exec -it --user root 容器id /bin/bash 命令进入容器目录，但是连简单的 vi命令都不能使用）
mkdir -p /var/jenkins_mount chmod 777 /var/jenkins_mount 3.创建并启动Jenkins容器
-d 后台运行镜像
-p 10240:8080 将镜像的8080端口映射到服务器的10240端口。
-p 10241:50000 将镜像的50000端口映射到服务器的10241端口
-v /var/jenkins_*mount*:/var/jenkins_mount /var/jenkins_home目录为容器jenkins工作目录，我们将硬盘上的一个目录挂载到这个位置，方便后续更新镜像后继续使用原来的工作目录。这里我们设置的就是上面我们创建的 /var/jenkins_mount目录
-v /etc/localtime:/etc/localtime让容器使用和服务器同样的时间设置。
–name myjenkins 给容器起一个别名
docker run -d -p 10240:8080 -p 10241:50000 -v /var/jenkins_mount:/var/jenkins_home -v /etc/localtime:/etc/localtime --name jenkins jenkins/jenkins:lts 注意：
这样构建是有问题的，后面maven和jdk没办法使用。所以建议在创建容器的时候将jdk和maven的目录挂载到jenkins容器中。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e2cff4acc8a633d7a01229006f6a8076/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-16T12:44:29+08:00" />
<meta property="article:modified_time" content="2022-04-16T12:44:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker 快速安装Jenkins完美教程（解决无法安装插件问题）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>一、前言</strong></p> 
<p>有人问，为什么要用Jenkins？我说下我以前开发的痛点，在一些中小型企业，每次开发一个项目完成后，需要打包部署，可能没有专门的运维人员，只能开发人员去把项目打成一个war包，可能这个项目已经上线了，需要把服务关，在部署到服务器上，将项目启动起来，这个时候可能某个用户正在操作某些功能上的东西，如果你隔三差五的部署一下，这样的话对用户的体验也不好，自己也是烦的很，总是打包拖到服务器上。希望小型企业工作人员学习一下，配置可能复杂，但是你配置好了之后，你只需要把代码提交到Git或者Svn上，自动构建部署，非常方便。有任何地方不懂的翻到最下方随时咨询我，想帮助更多的初学者共同一起努力成长！</p> 
<p><strong>二、Jenkins简介</strong></p> 
<p>Jenkins是一个开源软件项目，是基于Java开发的一种持续集成工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。</p> 
<p><strong>三、jenkins基本工作原理</strong></p> 
<p><img src="https://images2.imgbox.com/23/94/gwNcvkNE_o.png" alt="img"></p> 
<p>以上为基本工作原理，只是为了开发人员更好的理解画的（个人理解），详情可查看官方文档：https://www.jenkins.io/zh/</p> 
<p><strong>四、准备工作</strong></p> 
<p>1.需要准备一台服务器。</p> 
<p>2.需要准备一个远程连接工具，连接到Linux系统，作者采用的是：Xshell 工具 （注意：Xshell下载地址翻到本文最下面）。</p> 
<p>3.如果没有安装Docker的，给大家准备好了教程如下：</p> 
<pre><code>Docker安装教程：https://www.cnblogs.com/fuzongle/p/12781828.html
</code></pre> 
<p><strong>五、开始安装</strong></p> 
<p>1.启动docker，下载Jenkins镜像文件（注意这里最好使用最新版本的Jenkins镜像，否则可能插件会无法下载）</p> 
<pre><code>docker pull jenkins/jenkins:lts
</code></pre> 
<p><img src="https://images2.imgbox.com/68/a7/opN2TF2H_o.png" alt="在这里插入图片描述"></p> 
<p>2.创建Jenkins挂载目录并授权权限（我们在服务器上先创建一个jenkins工作目录 /var/jenkins_mount，赋予相应权限，稍后我们将jenkins容器目录挂载到这个目录上，这样我们就可以很方便地对容器内的配置文件进行修改。 如果我们不这样做，那么如果需要修改容器配置文件，将会有点麻烦，因为虽然我们可以使用docker exec -it --user root 容器id /bin/bash 命令进入容器目录，但是连简单的 vi命令都不能使用）</p> 
<pre><code>mkdir -p /var/jenkins_mount
chmod 777 /var/jenkins_mount
</code></pre> 
<p>3.创建并启动Jenkins容器</p> 
<p><strong>-d 后台运行镜像</strong></p> 
<p><strong>-p 10240:8080 将镜像的8080端口映射到服务器的10240端口。</strong></p> 
<p><strong>-p 10241:50000 将镜像的50000端口映射到服务器的10241端口</strong></p> 
<p><strong>-v /var/jenkins_*<em>mount*</em>:/var/jenkins_mount /var/jenkins_home目录为容器jenkins工作目录，我们将硬盘上的一个目录挂载到这个位置，方便后续更新镜像后继续使用原来的工作目录。这里我们设置的就是上面我们创建的 /var/jenkins_mount目录</strong></p> 
<p><strong>-v /etc/localtime:/etc/localtime让容器使用和服务器同样的时间设置。</strong></p> 
<p><strong>–name myjenkins 给容器起一个别名</strong></p> 
<pre><code>docker run -d -p 10240:8080 -p 10241:50000 -v /var/jenkins_mount:/var/jenkins_home -v /etc/localtime:/etc/localtime --name jenkins jenkins/jenkins:lts
</code></pre> 
<p><img src="https://images2.imgbox.com/f3/de/ZcFA2OQX_o.png" alt="在这里插入图片描述"></p> 
<p><strong>注意：</strong><br> 这样构建是有问题的，后面maven和jdk没办法使用。所以建议在创建容器的时候将jdk和maven的目录挂载到jenkins容器中。<br> <a href="https://blog.csdn.net/qq1445654576/article/details/104448915">【问题解决】解决Docker容器应用中mvn: command not found的问题</a></p> 
<p>4.查看jenkins是否启动成功，如下图出现端口号，就为启动成功了</p> 
<pre><code>docker ps jenkins
</code></pre> 
<p><img src="https://images2.imgbox.com/bb/d2/aNPpn2z3_o.png" alt="在这里插入图片描述"></p> 
<p>5.查看docker容器日志。</p> 
<pre><code>docker logs myjenkins
</code></pre> 
<p><img src="https://images2.imgbox.com/70/3e/CUYCeKgy_o.png" alt="img"></p> 
<p>6.配置镜像加速，进入 cd /var/jenkins_mount/ 目录。</p> 
<pre><code>cd /var/jenkins_mount/
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/9b/sPEHkkuV_o.png" alt="img"></p> 
<p><strong>修改 vi hudson.model.UpdateCenter.xml里的内容</strong></p> 
<p><strong>修改前</strong></p> 
<p><img src="https://images2.imgbox.com/94/91/Hbj8jupA_o.png" alt="img"></p> 
<p>将 url 修改为 清华大学官方镜像：https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</p> 
<p><strong>修改后</strong></p> 
<p><img src="https://images2.imgbox.com/a7/dd/BB1OVmmX_o.png" alt="img"></p> 
<p>7.访问Jenkins页面，输入你的ip加上10240</p> 
<p><img src="https://images2.imgbox.com/ab/30/u1EZk0NT_o.png" alt="img"></p> 
<p>8.管理员密码获取方法，编辑initialAdminPassword文件(查看，把密码输入登录中的密码即可，开始使用。</p> 
<p>进入到容器内部查看密码：</p> 
<pre><code>docker exec -it jenkins /bin/bash
</code></pre> 
<pre><code>cat /var/jenkins_mount/secrets/initialAdminPassword
</code></pre> 
<p><img src="https://images2.imgbox.com/ce/ac/Dq71kVIu_o.png" alt="在这里插入图片描述"></p> 
<p>9.到此以全部安装成功，尽情的使用吧！</p> 
<p><img src="https://images2.imgbox.com/43/b2/nwEqdHOu_o.png" alt="img"></p> 
<p>9.到此以全部安装成功，尽情的使用吧！</p> 
<p><img src="https://images2.imgbox.com/43/f5/nfv8wjsd_o.png" alt="[外链图片转存中...(img-GmMKatCc-1598174411805)]"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/84b1a65209c4302169851742749081eb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android SDK解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dce11beeed80b00926ca0b27d13f1726/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python将excel或者csv表格中的空行删除</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>