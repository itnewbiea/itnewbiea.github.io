<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Dubbo与SpringCloud核心组件Ribbon、Hystrix、Feign的优劣势比较 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Dubbo与SpringCloud核心组件Ribbon、Hystrix、Feign的优劣势比较" />
<meta property="og:description" content="在微服务架构中，分布式通信、分布式事务、分布式锁等问题是亟待解决的几个重要问题。 Spring Cloud是一套完整的微服务解决方案，基于 Spring Boot 框架。确切的说，Spring Cloud是一个大容器（而不是一个框架），它可以将通过集成一些好的微服务框架，从而简化开发者的代码量。
Dubbo 是阿里开源的分布式通信框架，专注于通信服务治理，类似于Spring Cloud中 Ribbon、 Hystrix、 Feign等核心组件的功能。
下面，我们着重来聊下这两种处理方式有何不同。
01 协议处理 1）Spring Cloud更加优雅简单
Feign使用Http进行传输。
Feign 集成了Ribbon，并且嵌入了Spring cloud全家桶 ，通过简单配置 ，就能在分布式里面实现服务间的调用，类似于Bean 调用。
2）Dubbo方式更灵活
Dubbo协议可选，大部分情况使用Dubbo传输协议，也可以使用http协议。
从协议层选择看，Dubbo是配置化的，更加灵活。
Dubbo 协议更适合小数据高并发场景。
02 性能方面 1）Spring Cloud性能调优
Feign 在高并发场景下，通常需要进行如下性能优化，有明显瓶颈，需要改造。
· 调整服务容器到 UnderTow ，在负载大的情况下Undertow 的性能有提高；
· 曾有同学表示将HTTPURLConnection 改成 Httpclient /Okhttp，这样可以优化性能，其实单次调用性能Httpclient差很多，HttpClient 因为封装了很多方便开发者处理的方法，性能比HTTPURLConnection差，改进同时Httpclient 需要设置复用连接池，效果可见一般；
· 开启Gzip；
· Feign中HttpMessageConverters 默认使用jackson2方式进行序列化和反序列化，可以将其改造为ProtoBuf，降低Cpu 损耗并且响应时间也降低。
2）Dubbo性能调优
主要是配置而无需改造。
03 负载均衡 1）Ribbon 的负载均衡策略
· 随机；
· 规则轮询；
· 空闲策略；
· 响应时间策略。
Feign默认使用Ribbon作为负载均衡的组件，Ribbon需要进行全局配置，个性化配置比较麻烦。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b8ce534beb34e0e851c9a4ff0265db09/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-09T09:16:12+08:00" />
<meta property="article:modified_time" content="2023-03-09T09:16:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Dubbo与SpringCloud核心组件Ribbon、Hystrix、Feign的优劣势比较</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>在微服务架构中，分布式通信、分布式事务、分布式锁等问题是亟待解决的几个重要问题。</h4> 
<p>Spring Cloud是一套完整的微服务解决方案，基于 Spring Boot 框架。确切的说，Spring Cloud是一个大容器（而不是一个框架），它可以将通过集成一些好的微服务框架，从而简化开发者的代码量。</p> 
<p>Dubbo 是阿里开源的分布式通信框架，专注于通信服务治理，类似于Spring Cloud中 Ribbon、 Hystrix、 Feign等核心组件的功能。</p> 
<p>下面，我们着重来聊下这两种处理方式有何不同。</p> 
<p></p> 
<h3>01 协议处理</h3> 
<p><strong>1）Spring Cloud更加优雅简单</strong></p> 
<p>Feign使用Http进行传输。</p> 
<p>Feign 集成了Ribbon，并且嵌入了Spring cloud全家桶 ，通过简单配置 ，就能在分布式里面实现服务间的调用，类似于Bean 调用。</p> 
<p><strong>2）Dubbo方式更灵活</strong></p> 
<p>Dubbo协议可选，大部分情况使用Dubbo传输协议，也可以使用http协议。</p> 
<p>从协议层选择看，Dubbo是配置化的，更加灵活。</p> 
<p>Dubbo 协议更适合小数据高并发场景。</p> 
<p></p> 
<h3>02 性能方面</h3> 
<p><strong>1）Spring Cloud性能调优</strong></p> 
<p>Feign 在高并发场景下，通常需要进行如下性能优化，有明显瓶颈，需要改造。</p> 
<p>· 调整服务容器到 UnderTow ，在负载大的情况下Undertow 的性能有提高；</p> 
<p>· 曾有同学表示将HTTPURLConnection 改成 Httpclient /Okhttp，这样可以优化性能，其实单次调用性能Httpclient差很多，HttpClient 因为封装了很多方便开发者处理的方法，性能比HTTPURLConnection差，改进同时Httpclient 需要设置复用连接池，效果可见一般；</p> 
<p>· 开启Gzip；</p> 
<p>· Feign中HttpMessageConverters 默认使用jackson2方式进行序列化和反序列化，可以将其改造为ProtoBuf，降低Cpu 损耗并且响应时间也降低。</p> 
<p><strong>2）Dubbo性能调优</strong></p> 
<p>主要是配置而无需改造。</p> 
<p></p> 
<h3>03 负载均衡</h3> 
<p><strong>1）Ribbon 的负载均衡策略</strong></p> 
<p>· 随机；</p> 
<p>· 规则轮询；</p> 
<p>· 空闲策略；</p> 
<p>· 响应时间策略。</p> 
<p>Feign默认使用Ribbon作为负载均衡的组件，Ribbon需要进行全局配置，个性化配置比较麻烦。</p> 
<p><strong>2）Dubbo 的负载均衡策略</strong></p> 
<p>· 随机；</p> 
<p>· 权重轮询；</p> 
<p>· 最少活跃调用数；</p> 
<p>· 一致性Hash策略。</p> 
<p>Dubbo 可以使用路由策略，然后再进行负载均衡。</p> 
<p></p> 
<h3>04 容错机制</h3> 
<p>Spring cloud 的 Hystix 提供了服务降级，服务熔断，依赖隔离，监控(Hystrix Dashboard)等功能。</p> 
<p></p> 
<p>图片为引用，来源于官方图片</p> 
<p>Dubbo 提供了一整套 FailOver、FailFast、Failsafe、FailBack、Aviailable、Broadcast、Forking 策略，以及Mock</p> 
<p></p> 
<p>图片为引用，来源于官方图片</p> 
<h3>05 路由、流量调度、ABtest</h3> 
<p><strong>1）Ribbon需自己实现，应用不灵活</strong></p> 
<p>Ribbon主要通过扩展 AbstractLoadBalancerRule负载均衡的方法来实现，在负载均衡的部分还要进行改造升级。</p> 
<p><strong>2）Dubbo更加灵活方便</strong></p> 
<p>Dubbo通过界面化、校本化配置路由规则，可以实现灰度发布、动态流量调度、容量计算等，方案成熟。</p> 
<p>另外，Dubbo 还支持多版本调用。</p> 
<p></p> 
<h3>06 总结</h3> 
<p>正如Dubbo的介绍(如下图)，业务发展影响着架构的选型，当服务数量不是很大时，使用普通的分布式RPC架构即可，当服务数量增长到一定数据，需要进行服务治理时，就需要考虑使用流式计算架构。</p> 
<p></p> 
<p>图片为引用，来源于官方图片</p> 
<p>Dubbo可以方便的做更精细化的流量调度，服务结构治理的方案成熟，适合生产上使用，虽然Dubbo是尘封后重新开启，但这并不影响其技术价值。</p> 
<p>Ribbon Hystrix Feign在服务治理中，配合Spring Cloud做微服务，使用上有很多优势，社区也比较活跃，看将来更新发展。</p> 
<p><strong>如果觉得不错，请点赞支持下，谢谢</strong>。</p> 
<p><strong>超500+架构技术专题集合</strong>，可免费获得。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bf5398301a5c86aae7b703705ab49a24/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">线程池监控与动态参数调整设计</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7b5900663b23e9b077e169302824002e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">EnvironmentNotWritableError: The current user does not have write permissions to the target environm</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>