<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaSE学习笔记 2023-12-28 --MySQL - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JavaSE学习笔记 2023-12-28 --MySQL" />
<meta property="og:description" content="MySQL 1.数据库介绍 数据库:数据仓库 DataBase:简称DB,用于长期存储有结构的,大量的,共享的数据 长期的:持久存储,永久存储 有结构: 有类型,有内部的数据类型 有关系,数据与数据之前是有关联的 大量的: 大多数据库都是以文件系统存在的,可以将数据存储在磁盘中 共享的: 多个应用之间可以共享一个或多个数据库资源 2.数据库的分类 关系型数据库 关系型数据库采用关系表的形式进行数据的存储 可以通过表与表之间的关系来维护数据的关系 例如:用户 --- 购买 --- 商品 用户信息 --- 用户类 --- 用户表 常用的库:MySQL,Oracle,SQLServer... 非关系型数据库 采用键值对的数据模型来存储数据的,只完成数据的记录,不会有任何的关联关系 NoSQL:Not Only SQL 常见的库:redis,MongoDB... 3.数据库中的常用术语 数据库(DataBase):存储数据的集合 数据(Data):被描述的事物符号记录 数据库管理系统(DBMS,DataBase Management System) 用于管理数据库软件系统 数据库管理员(DBA,DataBase Administrator) 负责创建数据库,使用以及维护数据库的专业人员 数据库系统(DBS,DataBase System) 数据库管理员,数据库管理系统以及数据库组成的整个单元结构 4.数据库安装和配置 MySQL环境准备 下载,安装,配置,卸载 版本: 企业中主流的版本5.x和8.x 本次使用mysql8 安装: 参考攻略 mysql服务的启动和停止: 此电脑---&gt;右键---&gt;管理---&gt;服务和应用程序---&gt;服务---&gt;mysql相关 服务停止的原因:1.计算机改名 2.手动停止 3.外部的一些游戏加速器会停止该服务 软件卸载: 官方:关闭服务---&gt;控制面板点击程序卸载---&gt;自带的卸载程序---&gt;删除目录:mysql安装目录---&gt;删除注册表:win&#43;r输入regedit geek:直接卸载所有内容 管理工具: 可视化工具,数据库的一个图形管理工具 mysql自带clc(免费的) Navicat for MySql(需要破解的) mysql8配合navicat12&#43; mysql5配合navicat11- SQLyog(需要破解的) DBeaver(免费的) 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/800243c56ebfdf3cf3d96cf1592c778b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T19:02:17+08:00" />
<meta property="article:modified_time" content="2024-01-03T19:02:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaSE学习笔记 2023-12-28 --MySQL</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="MySQL_0"></a>MySQL</h2> 
<h3><a id="1_2"></a>1.数据库介绍</h3> 
<pre><code>数据库:数据仓库
DataBase:简称DB,用于长期存储有结构的,大量的,共享的数据

长期的:持久存储,永久存储
有结构:
	有类型,有内部的数据类型
	有关系,数据与数据之前是有关联的
大量的:
	大多数据库都是以文件系统存在的,可以将数据存储在磁盘中
共享的:
	多个应用之间可以共享一个或多个数据库资源
</code></pre> 
<h3><a id="2_18"></a>2.数据库的分类</h3> 
<pre><code>关系型数据库
	关系型数据库采用关系表的形式进行数据的存储
	可以通过表与表之间的关系来维护数据的关系
		例如:用户 --- 购买 --- 商品
	用户信息 --- 用户类 --- 用户表
	常用的库:MySQL,Oracle,SQLServer...
非关系型数据库
	采用键值对的数据模型来存储数据的,只完成数据的记录,不会有任何的关联关系
	NoSQL:Not Only SQL
	常见的库:redis,MongoDB...
</code></pre> 
<h3><a id="3_33"></a>3.数据库中的常用术语</h3> 
<pre><code>数据库(DataBase):存储数据的集合
数据(Data):被描述的事物符号记录
数据库管理系统(DBMS,DataBase Management System) 用于管理数据库软件系统
数据库管理员(DBA,DataBase Administrator) 负责创建数据库,使用以及维护数据库的专业人员
数据库系统(DBS,DataBase System) 数据库管理员,数据库管理系统以及数据库组成的整个单元结构
</code></pre> 
<h3><a id="4_43"></a>4.数据库安装和配置</h3> 
<pre><code>MySQL环境准备
	下载,安装,配置,卸载
版本:
	企业中主流的版本5.x和8.x
	本次使用mysql8
安装:
	参考攻略
mysql服务的启动和停止:
	此电脑---&gt;右键---&gt;管理---&gt;服务和应用程序---&gt;服务---&gt;mysql相关
	服务停止的原因:1.计算机改名 2.手动停止 3.外部的一些游戏加速器会停止该服务
软件卸载:
	官方:关闭服务---&gt;控制面板点击程序卸载---&gt;自带的卸载程序---&gt;删除目录:mysql安装目录---&gt;删除注册表:win+r输入regedit
	geek:直接卸载所有内容
管理工具:
	可视化工具,数据库的一个图形管理工具
		mysql自带clc(免费的)
		Navicat for MySql(需要破解的) mysql8配合navicat12+ mysql5配合navicat11-
		SQLyog(需要破解的)
		DBeaver(免费的)
</code></pre> 
<h3><a id="5MySQL_67"></a>5.MySQL的逻辑结构</h3> 
<pre><code>MySQL在数据库存储时是按照一定的结构进行存储的,MySQL的常见结构是表
MySQL本质是一个服务器(数据库服务器)
navicat是一个客户端(进行数据库的访问操作)
数据库软件都可以管理很多的数据库,每个库中可以管理若干张表,表中用于存储数据
</code></pre> 
<pre><code>记录/元组:表中的一条(行)数据就是记录/元组 在JDBC中一条数据库记录就是一个java对象
</code></pre> 
<table><thead><tr><th>学号</th><th>姓名</th><th>性别</th><th>年龄</th><th>身高</th><th>体重</th><th>出生时日期</th><th>入学日期</th><th>毕业日期</th><th>休学日期</th></tr></thead><tbody><tr><td>1</td><td>张三</td><td>男</td><td>19</td><td>190</td><td>200</td><td>20000101</td><td>20070901</td><td>20130601</td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table> 
<h3><a id="6SQL_86"></a>6.SQL语句</h3> 
<pre><code>Structured Query Language
	结构化查询语句,关系型数据库的主要使用语言,用于数据的增删改查,数据库管理对象等操作.
	
SQL作为关系型数据库的通用语言,对不同的数据库的支持是不一样的,有7成左右的相似度
	例如:oracle中分页使用rownum,mysql中使用limit,SQLServer中使用top
SQL的扩展名为.sql

SQL语句的分类:
	根据不同的功能,可以将SQL划分为多类
		DML:数据操作语言,用于对数据的增删改查操作
			DQL:数据查询语言,用于对数据的查询
		DDL:数据定义语言,用于完成对数据库对象(表,视图,索引等)的操作(创建,删除,修改)
		TCL:事务控制语言
		DCL:数据控制语言,权限操作
</code></pre> 
<h3><a id="7DML_105"></a>7.DML</h3> 
<h4><a id="71DQL_107"></a>7.1DQL</h4> 
<pre><code>数据查询语言
SQL可以在mysql中自带的工具中或者第三方工具(navicat)中使用
SQL语法:
	不区分大小写
	每天SQL以分号结尾,但不是强制的
	SQL中关键字之间使用空格进行分割
	SQL之间不限制换行,有空格的位置就可以使用换行
	SQL的注释:
		单行注释: --注释内容
		单行注释: # 注释内容
		多行注释: /*注释内容*/
</code></pre> 
<h5><a id="711_123"></a>7.1.1基本查询</h5> 
<pre><code>语法
select 列名1,列名2,列名3... | *
from 表名;
* 表示的是所有字段,在测试环境使用,但数据库调优时会进行调整
	*是不会写的,使用具体的字段名称
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 基本查询</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> dept<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="712_145"></a>7.1.2过滤查询</h5> 
<pre><code>语法
select 列名1,列名2,列名3... | *
from 表名
where 条件;

进行数据的筛选,等到我们需要的数据,过滤掉不符合的数据
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 过滤查询</span>
<span class="token comment">-- 查询工资高于5000的人</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">5000</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询工资低于5000的人</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">&lt;=</span> <span class="token number">5000</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="7121_169"></a>7.1.2.1条件运算符</h6> 
<pre><code class="prism language-sql"><span class="token operator">=</span>	等于
<span class="token operator">!=</span>
<span class="token operator">&lt;&gt;</span>	不等于
<span class="token operator">&gt;</span>
<span class="token operator">&gt;=</span>
<span class="token operator">&lt;</span>
<span class="token operator">&lt;=</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 条件运算符</span>
<span class="token comment">-- 查询工资不为5000的人</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">&lt;&gt;</span> <span class="token number">5000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">!=</span> <span class="token number">5000</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询名字为九元 单引号表示字符串</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'九元'</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="7122_197"></a>7.1.2.2逻辑运算符</h6> 
<pre><code>not and or
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 逻辑运算符</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">&gt;=</span> <span class="token number">5000</span>
<span class="token operator">and</span> ename <span class="token operator">=</span> <span class="token string">'九元'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">&gt;=</span> <span class="token number">5000</span>
<span class="token operator">or</span> ename <span class="token operator">=</span> <span class="token string">'九元'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> deptno <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> deptno <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="7123_224"></a>7.1.2.3特殊的比较运算符</h6> 
<pre><code>is null 判断数据是否为空;为空显示,不为空不显示
in(值的列表) 返回符合值列表中的数据
like 模糊查询*****
between ... and ... 在范围之内,包含范围的

上述的四个可以和not配合使用
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 特殊的比较运算符</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> deptno <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> deptno <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询在10和20号部门的员工 属于or的关系</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> deptno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">or</span> deptno <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> deptno <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> deptno <span class="token operator">!=</span> <span class="token number">10</span> <span class="token operator">and</span> deptno <span class="token operator">!=</span> <span class="token number">20</span><span class="token punctuation">;</span>

<span class="token comment">-- 模糊查询</span>
<span class="token comment">-- _一个字符的占位 %&gt;=0符号的占位</span>
<span class="token comment">-- 查询名字中有6的人</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp 
<span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%6%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 表示6开始</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp 
<span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'6%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 表示6结尾</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp 
<span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%6'</span><span class="token punctuation">;</span>

<span class="token comment">-- 第三个位置为6的</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp 
<span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'__6%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 倒数第三个字符</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp 
<span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%6__'</span><span class="token punctuation">;</span>

<span class="token comment">-- 不像</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp 
<span class="token keyword">where</span> ename <span class="token operator">not</span> <span class="token operator">like</span> <span class="token string">'%6%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询工资在3000-5000范围内的</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">between</span> <span class="token number">3000</span> <span class="token operator">and</span> <span class="token number">5000</span><span class="token punctuation">;</span>

<span class="token comment">-- 等价的</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">&gt;=</span> <span class="token number">3000</span> <span class="token operator">and</span> sal <span class="token operator">&lt;=</span> <span class="token number">5000</span><span class="token punctuation">;</span>

<span class="token comment">-- 可以执行的,但是可读性差 建议将字段写在前面,具体的数值在后面</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> <span class="token number">3000</span> <span class="token operator">&lt;=</span> sal <span class="token operator">and</span> <span class="token number">5000</span> <span class="token operator">&gt;=</span> sal<span class="token punctuation">;</span>

<span class="token comment">-- 查询工资不在3000-5000范围内的(不带边界)</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">not</span> <span class="token operator">between</span> <span class="token number">3000</span> <span class="token operator">and</span> <span class="token number">5000</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> sal <span class="token operator">&lt;</span> <span class="token number">3000</span> <span class="token operator">or</span> sal <span class="token operator">&gt;</span> <span class="token number">5000</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="713_319"></a>7.1.3计算列</h5> 
<pre><code>可以对查询的记录进行一定的计算之后进行显示
可以使用 + - * / 四个运算符
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 计算列</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token operator">+</span> <span class="token number">500</span><span class="token punctuation">,</span>comm <span class="token operator">-</span> <span class="token number">100</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="714_332"></a>7.1.4列别名</h5> 
<pre><code>使用 as 和 空格为某个列去添加别名
</code></pre> 
<pre><code class="prism language-java"><span class="token operator">--</span> 列别名
select ename<span class="token punctuation">,</span>sal <span class="token operator">+</span> <span class="token number">500</span> as 工资<span class="token punctuation">,</span>comm <span class="token operator">-</span> <span class="token number">100</span> 奖金
from emp<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="715_distinct_344"></a>7.1.5 distinct去除重复行</h5> 
<pre><code class="prism language-sql"><span class="token comment">-- 去除重复行</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> deptno
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="716_order_by_352"></a>7.1.6 order by排序</h5> 
<pre><code>必须是查询的最后一个字句
asc表示升序,默认不写就是
desc表示降序
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">order</span> <span class="token keyword">by</span> sal<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">asc</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">desc</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">order</span> <span class="token keyword">by</span> hiredate<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="717_379"></a>7.1.7组合函数</h5> 
<pre><code>组函数,聚合函数
类似于java中的方法
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 组函数</span>
<span class="token comment">-- 计数</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>empno<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- count(1)</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 最值</span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 总和</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 平均值</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="718_405"></a>7.1.8日期函数</h5> 
<pre><code>可以通过字符串进行赋值,格式为"yyyy-MM-dd hh:mm:ss"
表示当前的日期函数:now() sysdate()
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 日期函数</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> hiredate <span class="token operator">&lt;</span> <span class="token string">'2023-01-01'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> hiredate <span class="token operator">&lt;</span> <span class="token string">'2023-01-01 08:00:00'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> hiredate <span class="token operator">between</span> <span class="token string">'2023-01-01'</span> <span class="token operator">and</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> hiredate <span class="token operator">between</span> <span class="token string">'2023-01-01'</span> <span class="token operator">and</span> sysdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="719_431"></a>7.1.9字符函数</h5> 
<pre><code>处理字符使用
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 字符函数</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>ename<span class="token punctuation">,</span>job<span class="token punctuation">)</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token keyword">select</span> concat<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">,</span>job<span class="token punctuation">)</span>
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token keyword">select</span> upper<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token keyword">select</span> lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 数据库中的下标从1开始的</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>substring<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="7110_452"></a>7.1.10分组查询</h5> 
<pre><code>group by
配合组函数进行使用,分组后的过滤使用having
语法:
    select 字段
    from 表名
    where 条件
    group by 分组字段
    having 分组后的过滤
    order by 排序
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 查询每个部门的人数</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> emp
<span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>

<span class="token comment">-- 查询部门人数大于3的部门</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> emp
<span class="token keyword">group</span> <span class="token keyword">by</span> deptno
<span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="7111_479"></a>7.1.11分页查询</h5> 
<pre><code>一次性将所有数据都展示给用户,体验太差了,可以使用分页查询
limit关键字
limit param1,param2
parma1:从指定位置开始,不包含这个位置
param2:查几个
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 查询1~3条数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询4~6条数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="72_501"></a>7.2连接查询</h4> 
<pre><code>我们无法从一张表获取到所有的数据,需要将多张表关联在一起
n张表需要至少n-1个条件连接在一起
</code></pre> 
<h5><a id="721_508"></a>7.2.1笛卡尔积</h5> 
<pre><code>笛卡尔积/集，叉积/集
多张表连接在一起,没有使用过滤条件,会将多张表的数据乘在一起
语法
	select *
	from a表,b表;
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 笛卡尔积</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept<span class="token punctuation">,</span>users<span class="token punctuation">;</span>

<span class="token comment">-- 消除笛卡尔积,使用多张表的共有字段</span>
<span class="token comment">-- 默认忽略空值的</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept
<span class="token keyword">where</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">=</span> dept<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>

<span class="token comment">-- 查询1号员工的个人信息和部门信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept
<span class="token keyword">where</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">=</span> dept<span class="token punctuation">.</span>deptno
<span class="token operator">and</span> empno <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="722_539"></a>7.2.2内连接</h5> 
<pre><code>查询出只符合条件的数据
消除笛卡尔积就是内连接
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 查询1号员工的个人信息和部门信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept
<span class="token keyword">where</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">=</span> dept<span class="token punctuation">.</span>deptno
<span class="token operator">and</span> empno <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询小白666 的所有信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept
<span class="token keyword">where</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">=</span> dept<span class="token punctuation">.</span>deptno
<span class="token operator">and</span> ename <span class="token operator">=</span> <span class="token string">'小白666'</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="723_560"></a>7.2.3表别名</h5> 
<pre><code>简化表名的操作
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 表别名</span>
<span class="token comment">-- 空格</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp e<span class="token punctuation">,</span>dept d
<span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno
<span class="token operator">and</span> ename <span class="token operator">=</span> <span class="token string">'小白666'</span><span class="token punctuation">;</span>

<span class="token comment">-- as (在oracle中不支持)</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp <span class="token keyword">as</span> e<span class="token punctuation">,</span>dept <span class="token keyword">as</span> d
<span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno
<span class="token operator">and</span> ename <span class="token operator">=</span> <span class="token string">'小白666'</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="724SQL_581"></a>7.2.4SQL语法分类</h5> 
<pre><code>92语法
	上面写的内连接是92语法,在mysql中不支持其他的92语法
99语法
	使用join将多张表连接在一起
</code></pre> 
<h6><a id="7241_99_590"></a>7.2.4.1 99语法-内连接</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- 99 内连接</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp e <span class="token keyword">inner</span> <span class="token keyword">join</span> dept d
<span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp e <span class="token keyword">inner</span> <span class="token keyword">join</span> dept d
<span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno
<span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="7242_99_604"></a>7.2.4.2 99语法-外连接</h6> 
<pre><code>可以查询到不符合条件的数据
外连接分为左外连和右外连
outer left join ... on 条件
outer right join ... on 条件
inner/outer关键字可以省略
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 99 外连接</span>
<span class="token comment">-- 左外连 左侧表的数据是完全的</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp e <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> dept d
<span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token comment">-- 左右外连是可以互换的</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> dept d <span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> emp e
<span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>

<span class="token comment">-- 右外连 右侧表的数据是完全的</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp e <span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> dept d
<span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>

<span class="token comment">-- 满外连 左右两表的数据都可以查询不符合条件的(mysql中是不支持的)</span>
<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> emp e <span class="token keyword">full</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> dept d
<span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="725_636"></a>7.2.5子查询</h5> 
<pre><code>又称查询嵌套,内部查询的数据可以被外部查询所使用
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 子查询</span>
<span class="token comment">-- 查询工资比九元高的</span>
<span class="token comment">-- 1.查询九元的工资</span>
<span class="token keyword">select</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'九元'</span><span class="token punctuation">;</span>

<span class="token comment">-- 2.查询比上面工资高的</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">50000</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'九元'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="73DML_654"></a>7.3DML</h4> 
<pre><code>数据操作语言
主要用于数据的删除,修改,插入
</code></pre> 
<h5><a id="731_661"></a>7.3.1添加数据</h5> 
<pre><code>语法
insert into 表名(列名1,列名2...)
values (值1,值2....)

列与值一一对应
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 添加操作</span>
<span class="token comment">-- 注意不要违反主键约束(主键的值不能重复)</span>
<span class="token comment">-- 向dept表添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> dept<span class="token punctuation">(</span>deptno<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>city<span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token string">'小卖部'</span><span class="token punctuation">,</span><span class="token string">'昌图'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 若添加时的数据是全部数据,则列列表可以省略</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> dept
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token string">'外联部'</span><span class="token punctuation">,</span><span class="token string">'庄河'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 只添加一部分值 不是所有那么就需要列列表和值列表一一对应</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> dept<span class="token punctuation">(</span>deptno<span class="token punctuation">,</span>dname<span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token string">'技术部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 不是所有列都添加时,是不能省略的</span>
<span class="token comment">-- insert into dept</span>
<span class="token comment">-- values (80,'技术部');</span>

<span class="token comment">-- 批量添加(mysql支持,oracle中不支持)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> dept<span class="token punctuation">(</span>deptno<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>city<span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token string">'小卖2部'</span><span class="token punctuation">,</span><span class="token string">'昌图'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token string">'小卖3部'</span><span class="token punctuation">,</span><span class="token string">'昌图'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">'小卖4部'</span><span class="token punctuation">,</span><span class="token string">'昌图'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="732_695"></a>7.3.2删除数据</h5> 
<pre><code>语法
delete from 表名 where 条件;

oracle中from可以省略,但是mysql中不行
where 条件可以省略,省略了就是删除全部数据,在oracle中可以回滚的,在mysql中默认不可以回滚
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除操作</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> users<span class="token punctuation">;</span><span class="token comment">-- 别写</span>

<span class="token keyword">delete</span> <span class="token keyword">from</span> dept <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>逻辑删除:
	本质修改,改变某个字段
	Goods(id,name,type,status[状态:0启动,1禁用])
物理删除:
	本质删除,从磁盘下将数据删除了
</code></pre> 
<h5><a id="733_720"></a>7.3.3修改数据</h5> 
<pre><code>语法
	update 表名 set 列 = 值,列 = 值... where 条件;
	
where 可以省略,但是修改全部
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 修改操作</span>
<span class="token keyword">update</span> emp <span class="token keyword">set</span> ename <span class="token operator">=</span> <span class="token string">'张三'</span><span class="token punctuation">;</span><span class="token comment">-- 别写</span>

<span class="token keyword">update</span> emp <span class="token keyword">set</span> ename <span class="token operator">=</span> <span class="token string">'李四'</span><span class="token punctuation">,</span>sal <span class="token operator">=</span> <span class="token number">1000000</span> <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="8DDL_736"></a>8.DDL(表操作)</h3> 
<pre><code>数据库对象操作
</code></pre> 
<h4><a id="81_742"></a>8.1创建数据库</h4> 
<pre><code>数据库的创建类似于java中二维数组,外部的一维表名,内部就是字段(字段名,类型,默认值,约束等)
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 建表</span>
<span class="token comment">-- 表名/字段名:数字 字母 下划线 连接符 井字符 可以使用 长度最长30个字符</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
	stu_no <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 字符串</span>
	stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 字符串</span>
	stu_gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	stu_age <span class="token keyword">int</span><span class="token punctuation">,</span>
	stu_qq <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> student 
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'王成輝'</span><span class="token punctuation">,</span><span class="token string">'未知'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token string">'1233456678'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'王成輝2号'</span><span class="token punctuation">,</span><span class="token string">'未知'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token string">'1233456678'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="82_763"></a>8.2修改表</h4> 
<h5><a id="821_765"></a>8.2.1添加列</h5> 
<pre><code>alter table 表名 add 列名 类型;
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 添加列</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">add</span> birthday <span class="token keyword">date</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="822_776"></a>8.2.2修改列(列名和类型)</h5> 
<pre><code>alter table 表名 change 旧列名 新列名 类型;
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 修改列 名字和类型</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student change stu_name name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="823_787"></a>8.2.3修改列(类型)</h5> 
<pre><code>alter table 表名 modify 列名 类型;
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 修改列 类型</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">modify</span> stu_no <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="824_798"></a>8.2.4删除列</h5> 
<pre><code>alter table 表名 drop 列名;
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除列</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">drop</span> stu_qq<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="825_809"></a>8.2.5表改名</h5> 
<pre><code>alter table 表 rename to 新名;
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 表改名</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">rename</span> <span class="token keyword">to</span> stu<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="83_820"></a>8.3删除表</h4> 
<pre><code>drop table 表名;
	若没有对应的表,则报错
drop table if exists 表名;
	若没有对应的表,则报错,也不删除;存在则删除
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span><span class="token comment">-- 不存在报错</span>

<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> student<span class="token punctuation">;</span><span class="token comment">-- 只删除存在的</span>

<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> stu<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="9MySQL_838"></a>9.MySQL数据类型</h3> 
<pre><code>存储数据时,支持的类型
</code></pre> 
<h4><a id="91_844"></a>9.1数值型</h4> 
<pre><code>int/integer 整数 4byte
double 双精度浮点型 8byte
其他:
tinyint 特小的整数型 1byte
smallint 小整数型 2byte
bigint 大整数型 8byte
float 单精度浮点型 4byte
</code></pre> 
<h4><a id="92_856"></a>9.2字符型</h4> 
<pre><code>char 
	定长字符串,长度0~255 若存储的长度不足时,使用'\u0000'进行补位
	用于存储长度的固定的内容,例如:手机号,身份证号,性别...
varchar
	变长字符串,长度0~65535
	
其他:
blob 
	存储二进制字符串
longblob
	存储二进制字符串
longtext
	存储文本内容的,例如:小说,博客,base64的图片
</code></pre> 
<h4><a id="93_874"></a>9.3日期型</h4> 
<pre><code>date
	日期型,存储的是年月日
datetime
	日期型,存储的是年月日 时分秒
	
其他
time
	时间,存储时分秒
year
	年,年份
</code></pre> 
<h3><a id="10_889"></a>10.约束</h3> 
<pre><code>创建表时,为指定的字段添加限定条件
来保证数据的准确，完整和正确
约束的分类:
	非空约束 not null 被限定的字段不能为null
	唯一约束 unique 被限定的字段不能重复
	主键约束 primary key 非空且唯一，每张表中的唯一表示
	外键约束 foreign key 必须依赖主键才能使用(先有主键才能有外键)
	检查约束 check	对某个字段进行限制(mysql5中不支持 mysql8中支持)
</code></pre> 
<h4><a id="101_902"></a>10.1非空约束</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 非空约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> goods <span class="token punctuation">(</span>
	goods_id <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	goods_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	goods_pirce <span class="token keyword">double</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token comment">-- 默认值,若不添加对应的字段,则使用默认值</span>
<span class="token punctuation">)</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> goods 
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'黑人牙膏'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- name是不可以使用null添加的</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> goods <span class="token punctuation">(</span>goods_id<span class="token punctuation">)</span> <span class="token keyword">value</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 默认值</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> goods <span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span>goods_name<span class="token punctuation">)</span> <span class="token keyword">value</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"白人药膏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="102_922"></a>10.2唯一约束</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 唯一约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span>
	stu_no <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unique</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token punctuation">(</span>stu_no<span class="token punctuation">,</span>stu_name<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'张春啸'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token punctuation">(</span>stu_no<span class="token punctuation">,</span>stu_name<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'张春啸'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 重复名字不能添加</span>
</code></pre> 
<h4><a id="103_935"></a>10.3主键约束</h4> 
<h5><a id="1031_937"></a>10.3.1主键的基本使用</h5> 
<pre><code>一张表的唯一表示,主键一张表中只能有一个
唯一且非空的

唯一和非空在一张表中可以有多个

主键一般是自增的数值,所有的表中都会有xxx_id、xxx_no的字段
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 主键</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> teacher <span class="token punctuation">(</span>
	tea_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	tea_name <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> teacher <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'殷亮'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> teacher <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'殷亮'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 不能重复</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> teacher <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'殷亮'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 不能为空</span>
</code></pre> 
<h5><a id="1032_960"></a>10.3.2主键自增长</h5> 
<pre><code>主键希望有一个自动增长的字段为其服务
mysql中有自增长功能
oracle中需要是sequence对象进行服务

定义int类型的主键,设置自动增长,auto_increment
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 自增长的主键</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> pet <span class="token punctuation">(</span>
	pet_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	pet_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> pet <span class="token punctuation">(</span>pet_name<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'咪咪'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="1033_980"></a>10.3.3联合主键</h5> 
<pre><code>一张表中的多个字段共同承担主键的任务,是一个主键由多个值组成
定义联合主键比较少
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 联合主键</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> kecheng <span class="token punctuation">(</span>
	stu_no <span class="token keyword">int</span><span class="token punctuation">,</span>
	cls_no <span class="token keyword">int</span><span class="token punctuation">,</span>
	score <span class="token keyword">int</span><span class="token punctuation">,</span>
	<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>stu_no<span class="token punctuation">,</span>cls_no<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> kecheng <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 不可添加</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> kecheng <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 两个字段不能同时重复</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> kecheng <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 字段不能为空</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> kecheng <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> kecheng <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 可添加</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> kecheng <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> kecheng <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>学生表
</code></pre> 
<table><thead><tr><th>学号(主键)</th><th>姓名</th><th>性别</th><th>年龄</th></tr></thead><tbody><tr><td>1</td><td>张三</td><td>男</td><td>19</td></tr><tr><td>2</td><td>李四</td><td>男</td><td>20</td></tr></tbody></table> 
<pre><code>课程表
</code></pre> 
<table><thead><tr><th>课程编号(主键)</th><th>课程名</th><th>学分</th></tr></thead><tbody><tr><td>1</td><td>JavaSE</td><td>4</td></tr><tr><td>2</td><td>MySQL</td><td>3</td></tr><tr><td>3</td><td>WEB</td><td>3</td></tr></tbody></table> 
<pre><code>选课(关联表:可以使用联合主键,不用也不会影响,关联表往往都没有主键)
</code></pre> 
<table><thead><tr><th>学号</th><th>课程号</th><th>成绩</th><th>补考成绩</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>88</td><td>90</td></tr><tr><td>1</td><td>2</td><td>77</td><td></td></tr><tr><td>2</td><td>3</td><td>66</td><td></td></tr></tbody></table> 
<h4><a id="104_1036"></a>10.4外键约束</h4> 
<h5><a id="1041_1038"></a>10.4.1表之间的关系</h5> 
<pre><code>四种:
	一对一	人和身份证
	一对多 
	多对一
		 班级和学生
	多对多
		 讲师和学生
在sql中使用主外键的形式来体现这种关联关系
	主键所在表,称之为主表
	外键所在表,称之为从表
	
外键必须依赖主键,有主键了才能有外键
外键的值都是从主键中选的
外键可以重复,可以为空,必须依赖主键
</code></pre> 
<h5><a id="1042_1057"></a>10.4.2外键约束</h5> 
<pre><code>语法
	constraint 外键的名字 foreign key(当前表的外键字段) references 主表名(主表的主键字段)
	名字:fk_主表名_从表名
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 外联约束</span>
<span class="token comment">-- 学生和班级为例</span>
<span class="token comment">-- 主表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> classes <span class="token punctuation">(</span>
	c_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	c_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	c_info <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 从表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> students <span class="token punctuation">(</span>
	s_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	s_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	s_gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'0'</span><span class="token punctuation">,</span><span class="token comment">-- 0是性别男 1是性别女</span>
	s_age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	c_id <span class="token keyword">int</span><span class="token punctuation">,</span>
	<span class="token keyword">constraint</span> fk_stu_cls <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>c_id<span class="token punctuation">)</span> <span class="token keyword">references</span> classes<span class="token punctuation">(</span>c_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token punctuation">(</span>s_name<span class="token punctuation">,</span>s_age<span class="token punctuation">,</span>c_id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 外键的值是从主键中选出来的</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token punctuation">(</span>s_name<span class="token punctuation">,</span>s_age<span class="token punctuation">,</span>c_id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 想为外键添加值,先在主表添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> classes <span class="token punctuation">(</span>c_name<span class="token punctuation">,</span>c_info<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'4教室'</span><span class="token punctuation">,</span><span class="token string">'班级可以容纳47人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> classes <span class="token punctuation">(</span>c_name<span class="token punctuation">,</span>c_info<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'3教室'</span><span class="token punctuation">,</span><span class="token string">'班级可以容纳44人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加学生</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token punctuation">(</span>s_name<span class="token punctuation">,</span>s_age<span class="token punctuation">,</span>c_id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'ww'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="1043_1097"></a>10.4.3外键的级联操作</h5> 
<pre><code>级联删除:主键数据删除,对应的外键数据一起删除
级联置空:主键数据删除,对应者外键字段赋值为null
级联修改:主键的id修改,外键对应的字段会同步修改
</code></pre> 
<h6><a id="10431_1105"></a>10.4.3.1级联删除</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- 级联删除</span>
<span class="token comment">-- 主表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> classes <span class="token punctuation">(</span>
	c_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	c_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	c_info <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 从表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> students <span class="token punctuation">(</span>
	s_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	s_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	s_gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
	s_age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	c_id <span class="token keyword">int</span><span class="token punctuation">,</span>
	<span class="token keyword">constraint</span> fk_stu_cls <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>c_id<span class="token punctuation">)</span> <span class="token keyword">references</span> classes<span class="token punctuation">(</span>c_id<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">cascade</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 主表数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> classes <span class="token punctuation">(</span>c_name<span class="token punctuation">,</span>c_info<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'4教室'</span><span class="token punctuation">,</span><span class="token string">'班级可以容纳47人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> classes <span class="token punctuation">(</span>c_name<span class="token punctuation">,</span>c_info<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'3教室'</span><span class="token punctuation">,</span><span class="token string">'班级可以容纳44人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 从表数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token punctuation">(</span>s_name<span class="token punctuation">,</span>s_age<span class="token punctuation">,</span>c_id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token punctuation">(</span>s_name<span class="token punctuation">,</span>s_age<span class="token punctuation">,</span>c_id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> classes <span class="token keyword">where</span> c_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="10432_1138"></a>10.4.3.2级联置空</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- 级联置空(项目中常用的)</span>
<span class="token comment">-- 主表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> classes <span class="token punctuation">(</span>
	c_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	c_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	c_info <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 从表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> students <span class="token punctuation">(</span>
	s_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	s_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	s_gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
	s_age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	c_id <span class="token keyword">int</span><span class="token punctuation">,</span>
	<span class="token keyword">constraint</span> fk_stu_cls <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>c_id<span class="token punctuation">)</span> <span class="token keyword">references</span> classes<span class="token punctuation">(</span>c_id<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">set</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 主表数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> classes <span class="token punctuation">(</span>c_name<span class="token punctuation">,</span>c_info<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'4教室'</span><span class="token punctuation">,</span><span class="token string">'班级可以容纳47人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> classes <span class="token punctuation">(</span>c_name<span class="token punctuation">,</span>c_info<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'3教室'</span><span class="token punctuation">,</span><span class="token string">'班级可以容纳44人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 从表数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token punctuation">(</span>s_name<span class="token punctuation">,</span>s_age<span class="token punctuation">,</span>c_id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token punctuation">(</span>s_name<span class="token punctuation">,</span>s_age<span class="token punctuation">,</span>c_id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> classes <span class="token keyword">where</span> c_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="10433_1171"></a>10.4.3.3级联更新</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- 级联更新</span>
<span class="token comment">-- 主表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> classes <span class="token punctuation">(</span>
	c_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	c_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	c_info <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 从表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> students <span class="token punctuation">(</span>
	s_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	s_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	s_gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
	s_age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	c_id <span class="token keyword">int</span><span class="token punctuation">,</span>
	<span class="token keyword">constraint</span> fk_stu_cls <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>c_id<span class="token punctuation">)</span> <span class="token keyword">references</span> classes<span class="token punctuation">(</span>c_id<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">cascade</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 主表数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> classes <span class="token punctuation">(</span>c_name<span class="token punctuation">,</span>c_info<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'4教室'</span><span class="token punctuation">,</span><span class="token string">'班级可以容纳47人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> classes <span class="token punctuation">(</span>c_name<span class="token punctuation">,</span>c_info<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'3教室'</span><span class="token punctuation">,</span><span class="token string">'班级可以容纳44人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 从表数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token punctuation">(</span>s_name<span class="token punctuation">,</span>s_age<span class="token punctuation">,</span>c_id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token punctuation">(</span>s_name<span class="token punctuation">,</span>s_age<span class="token punctuation">,</span>c_id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 更新主表</span>
<span class="token keyword">update</span> classes <span class="token keyword">set</span> c_id <span class="token operator">=</span> <span class="token number">3</span> <span class="token keyword">where</span> c_name <span class="token operator">=</span> <span class="token string">'4教室'</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="105_1204"></a>10.5检查约束</h4> 
<pre><code>mysql5.x没有该约束
mysql8.x中添加该约束
oracle中任何版本都可以使用
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 检查约束 (mysql中length是判断字节数)</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> person <span class="token punctuation">(</span>
	p_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	p_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">check</span><span class="token punctuation">(</span>length<span class="token punctuation">(</span>p_name<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">insert</span> <span class="token keyword">into</span> person <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'王成輝6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> person <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'王成'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> person <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'ab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="11DDL_1227"></a>11.DDL(库操作)</h3> 
<h4><a id="111_MySQL_Command_Line_Cilent_1229"></a>11.1 MySQL Command Line Cilent</h4> 
<pre><code>mysql自带的管理工具,纯命令行的
打开:
	开始菜单---&gt;MySQL---&gt;CLC工具
连接MySQL:
	在CLC中输入密码即可,若闪退说明密码输出错误
关闭CLC:
	输入exit指令即可
</code></pre> 
<h4><a id="112DDL_1241"></a>11.2DDL(库操作)</h4> 
<h5><a id="1121_1243"></a>11.2.1查询库</h5> 
<pre><code>show databases;查询本地所有数据库的列表
show create database mysql;显示指定名称的数据库的创建SQL指令
</code></pre> 
<h5><a id="1122_1250"></a>11.2.2创建库</h5> 
<pre><code>create database 库名;创建指定数据库名字的库
create database if not exists 库名;若库名不存在时则创建
create database 库名 character set 字符集;创建库时采用何种编码集
</code></pre> 
<h5><a id="1123_1258"></a>11.2.3删除库</h5> 
<pre><code>drop database 库名;
drop database if exists 库名;
</code></pre> 
<h5><a id="1124_1265"></a>11.2.4使用库</h5> 
<pre><code>use 库名;
</code></pre> 
<h3><a id="12_1271"></a>12.视图</h3> 
<pre><code>命名化查询,由数据库中的一张或者多张表组成,构成的虚拟表
视图是基于表存在的,简化查询,安全性高,可以只公开表的部分数据
</code></pre> 
<h4><a id="121_1278"></a>12.1视图的创建</h4> 
<pre><code>语法
create view 视图名
as
子查询;

视图只能通过子查询创建
视图的分类:简单视图,复杂视图
</code></pre> 
<h5><a id="1211_1290"></a>12.1.1简单视图</h5> 
<pre><code>由一张表组成
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 简单视图</span>
<span class="token comment">-- 通过emp表创建myemp视图</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> myemp
<span class="token keyword">as</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 查询视图,将表中的其他数据就隐藏起来了</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> myemp<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="1212_1307"></a>12.1.2简单视图和表中的数据关系</h5> 
<pre><code>简单视图和表中的数据添加是会同步的
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 向emp表中添加数据,myemp视图的数据是同步的</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'王成輝'</span><span class="token punctuation">,</span><span class="token string">'总经理助理'</span><span class="token punctuation">,</span><span class="token string">'2022-12-12'</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 向myemp视图中添加数据,同步到emp表中</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> myemp <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token string">'李昊阳睡着了'</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>简单视图和表中的数据删除是会同步的
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除</span>
<span class="token comment">-- 删除表中数据,视图同步</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">;</span>
<span class="token comment">-- 删除视图中数据,表中数据同步</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> myemp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>简单视图和表中的数据修改是会同步的
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 修改</span>
<span class="token comment">-- 改表,视图同步</span>
<span class="token keyword">update</span> emp <span class="token keyword">set</span> ename <span class="token operator">=</span> <span class="token string">'王成輝'</span> <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
<span class="token comment">-- 改视图,表同步</span>
<span class="token keyword">update</span> myemp <span class="token keyword">set</span> ename <span class="token operator">=</span> <span class="token string">'李昊阳'</span> <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">21</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="1213_1345"></a>12.1.3复杂视图</h5> 
<pre><code class="prism language-sql"><span class="token comment">-- 复杂视图</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> mydept_emp
<span class="token keyword">as</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>dname
<span class="token keyword">from</span> emp e<span class="token punctuation">,</span>dept d
<span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="1214_1356"></a>12.1.4复杂视图和表中的数据关系</h5> 
<pre><code>添加
	向表中添加数据,可以同步到视图中
	向视图中添加数据
		只能向对应的某一张表的视图去添加数据
		添加的数据不能是连接字段(外键)
		可以添加到复杂视图中的数据是单表
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 添加</span>
<span class="token comment">-- 添加数据到表中,视图同步</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'王成輝'</span><span class="token punctuation">,</span><span class="token string">'总经理助理'</span><span class="token punctuation">,</span><span class="token string">'2022-12-12'</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加数据到视图中,</span>
<span class="token comment">-- 向视图中添加数据,不能每个字段都添加</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> mydept_emp <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token string">'毕明辉'</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'行政部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 只添加到emp表中对应视图部分,可以添加</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> mydept_emp <span class="token punctuation">(</span>empno<span class="token punctuation">,</span>ename<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token string">'毕明辉'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 只添加到dept表中对应视图部分,可以添加非共有字段(deptno是两张表中都有字段)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> mydept_emp <span class="token punctuation">(</span>dname<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'毕明辉部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>删除
	删除表中数据,复杂视图同步
	无法删除复杂视图中的数据
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除</span>
<span class="token comment">-- 删除表,视图同步</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">;</span>
<span class="token comment">-- 删除视图,是无法完成</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> mydept_emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">21</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> mydept_emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'李昊阳'</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> mydept_emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token string">'101'</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> mydept_emp <span class="token keyword">where</span> dname <span class="token operator">=</span> <span class="token string">'毕明辉部'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>修改
	修改表,视图中数据同步
	修改视图,表中数据同步
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 修改</span>
<span class="token comment">-- 修改表,视图同步</span>
<span class="token keyword">update</span> emp <span class="token keyword">set</span> ename <span class="token operator">=</span> <span class="token string">'王成輝'</span> <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token comment">-- 修改视图,表中同步</span>
<span class="token keyword">update</span> mydept_emp <span class="token keyword">set</span> ename <span class="token operator">=</span> <span class="token string">'王成輝66'</span> <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token comment">-- 修改视图,通过dname,修改ename字段 可以改</span>
<span class="token keyword">update</span> mydept_emp <span class="token keyword">set</span> ename <span class="token operator">=</span> <span class="token string">'王成輝66'</span> <span class="token keyword">where</span> dname <span class="token operator">=</span> <span class="token string">'总部'</span><span class="token punctuation">;</span>
<span class="token comment">-- 通过empno,修改depname</span>
<span class="token keyword">update</span> mydept_emp <span class="token keyword">set</span> dname <span class="token operator">=</span> <span class="token string">'王成輝66部'</span> <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="13_1415"></a>13.索引</h3> 
<pre><code>提供查询效率,增强用户的体验
</code></pre> 
<h4><a id="131_1421"></a>13.1索引的分类</h4> 
<pre><code>主键索引:被primary key修饰,就自动的添加了主键索引,每张表中只有一个主键索引
唯一索引:添加唯一键时就添加唯一索引
	主键索引和唯一索引都自动的添加的
</code></pre> 
<h4><a id="132_1429"></a>13.2索引的优缺点</h4> 
<pre><code>优点:
	提高查询效率,减少磁盘IO的过程
缺点:
	占用磁盘资源,做DML时慢
</code></pre> 
<h3><a id="14_1438"></a>14.数据库事务</h3> 
<pre><code>事务就同时完成一组DML操作,或者一个DDL操作
事务就是一个功能,也是业务中的某个功能,按照指定的步骤去完成DML操作
</code></pre> 
<h4><a id="141_1445"></a>14.1事务的特性</h4> 
<pre><code>ACID
原子性:一个事务中多个DML操作,要么同时执行成功,要么同时执行失败
一致性:事务执行前后,数据库中的数据要保持一致,完整的不能被破坏的
隔离性:多个事务之间执行操作是互不干扰的
持久性:事务完成之后,数据库中的数据是永久保存的
</code></pre> 
<h4><a id="142MySQL_1455"></a>14.2MySQL中的事务管理</h4> 
<pre><code>MySQL中的事务默认是自动提交的
	只要执行了一个DML语句,那么自动的进行数据同步
事务管理
	1.开启事务管理,关闭自动提交
	2.在执行DML操作前,执行strat transcation(事务管理开启)
	3.以此的执行DML操作
	4.若执行成功,选择使用commit(提交)事务语句
	5.若执行失败,选择使用rollback(回滚)事务语句
		commit提交,将数据保存
		rollback回滚,数据恢复原样
			commit和rollback只能需要一个
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 使用默认的事务,自动提交的,每条DML都需要使用事务语句进行提交或者回滚</span>
<span class="token comment">-- 开启MySQL的事务管理,关闭自动提交,每次都需要手动的开启</span>
<span class="token keyword">start</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token comment">-- 转账功能</span>
<span class="token keyword">update</span> t_user <span class="token keyword">set</span> u_balance <span class="token operator">=</span> u_balance <span class="token operator">-</span> <span class="token number">200</span> <span class="token keyword">where</span> u_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">update</span> t_user <span class="token keyword">set</span> u_balance <span class="token operator">=</span> u_balance <span class="token operator">+</span> <span class="token number">200</span> <span class="token keyword">where</span> u_id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">-- 手动提交</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>

<span class="token comment">-- 手动回滚</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span>

<span class="token comment">-- navicat一个窗口就是一个新的事务开始</span>
<span class="token comment">-- 每个事务之间是相互独立的,默认是看不到别人事务的操作(隔离性)</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="143_1491"></a>14.3事务的隔离级别</h4> 
<pre><code>在数据库中是允许多个事务并行的操作,多个事务之间是互不干扰的,相互独立的;若多个事务之间没有隔离操作,可能会导致多个事务之间同时操作同一条数据,可能会破坏数据的一致性
读未提交:
	read uncommitted,两个事务同时执行,T2可以读取到T1未提交的数据,可能造成脏读。脏读:一个事务读取到另一个事务未提交的数据。
读已提交:
	read committed,T2只能读取到T1以提交的数据,避免了脏读,但可能出现虚读。虚读(重复读取数据):在一个事务中的两次查询结果不一致。
可重复读:(mysql中事务隔离级别的默认值)
	repeatable read:T2执行查询时,无论T1进行了任何操作,都不会影响到T2,避免了虚读。可能会出现幻读:T1在做操作的同时T2也在做操作,T1和T2是互不干扰的,但是T1执行完成之后,T2也执行完成了，T1看到了T2数据。
串行化:
	serializable,同时只能允许一个事务对一张表进行操作(单线程的),效率非常低的。可以避免脏读,幻读,虚读。
</code></pre> 
<table><thead><tr><th>隔离级别</th><th>脏读</th><th>虚读</th><th>幻读</th></tr></thead><tbody><tr><td>read uncommitted</td><td>√</td><td>√</td><td>√</td></tr><tr><td>read committed</td><td>×</td><td>√</td><td>√</td></tr><tr><td>repeatable read</td><td>×</td><td>×</td><td>√</td></tr><tr><td>serializable</td><td>×</td><td>×</td><td>×</td></tr></tbody></table> 
<h4><a id="144MySQL_1512"></a>14.4MySQL中设置事务的隔离级别</h4> 
<pre><code>MySQL默认的隔离级别为可重复读
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 查看事务的隔离级别</span>
<span class="token keyword">select</span> @<span class="token variable">@transaction_isolation</span><span class="token punctuation">;</span> <span class="token comment">-- 默认为可重复读</span>

<span class="token comment">-- 设置隔离级别</span>
<span class="token keyword">set</span> <span class="token keyword">session</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation</span> <span class="token keyword">level</span> <span class="token keyword">serializable</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="15_1526"></a>15.数据库设计</h3> 
<pre><code>MySQL数据库作为数据存储的介质,需要为应用程序提供数据存储功能,那么就要设计出合理的数据和数据表
</code></pre> 
<h4><a id="151_1532"></a>15.1数据库设计流程</h4> 
<pre><code>1.根据应用系统的功能,分析数据实体(数据对象)
	学生管理系统:学生,课程,成绩...
	外卖管理系统:商家,客户,骑手...
2.提取实体的数据项(实体属性)
	学生:学号,姓名,性别,爱好,生日...
3.根据数据库设计的三大范式进行数据表的设计
	数据设计有自己的规则,遵循规则会使得我们的数据库更加的合理,使用起来更方便
	若不满足三大范式,会导致数据冗余,维护困难
4.绘制ER图
	展现出实体与实体之间的关联关系,直观的展现出每个实体之间的联系
5.进行数据库建模
	三线图进行数据库设计
	...
6.创建数据库
	编写sql指令完成库和表的创建
7.CRUD的SQL功能测试
</code></pre> 
<h4><a id="152_1553"></a>15.2数据库设计的三大范式</h4> 
<pre><code>在数据设计时不止三大范式,但是三大范式是我们必须遵守的
</code></pre> 
<pre><code>第一范式:要求数据表中的字段不可分割的
下面的联系方式可以被分割
</code></pre> 
<table><thead><tr><th>ID</th><th>姓名</th><th>性别</th><th>联系方式(手机号,QQ,微信…)</th></tr></thead><tbody><tr><td>1</td><td>张三</td><td>男</td><td></td></tr></tbody></table> 
<pre><code>联系方式字段可以被分割为若干字段,不合理,至少可以被分为3个字段
遵循第一范式进行设计,如下
</code></pre> 
<table><thead><tr><th>ID</th><th>姓名</th><th>性别</th><th>手机号</th><th>QQ</th><th>微信</th><th>…</th></tr></thead><tbody><tr><td>1</td><td>zs</td><td>男</td><td>134xxxxxxxxx</td><td>12xxxxxxx</td><td>xxxxxx</td><td></td></tr></tbody></table> 
<pre><code>第二范式:在满足第一范式的基础上,不存在非关键字段对关机字段段的部分依赖
	下面例子中有部分的依赖
		学号和课程号,是这张表的联合主键,我们就认定学号和课程号是关键字段,除了关键字段以外都是非关键字段
	姓名和性别只依赖于学号,课程名只依赖于课程号,就存在非关键字段对关键字段的部分依赖
</code></pre> 
<table><thead><tr><th>学号</th><th>课程号</th><th>姓名</th><th>性别</th><th>课程名称</th><th>成绩</th></tr></thead><tbody><tr><td>1001</td><td>1</td><td>张三</td><td>男</td><td>java</td><td>88</td></tr><tr><td>1002</td><td>1</td><td>李四</td><td>男</td><td>mysql</td><td>76</td></tr></tbody></table> 
<pre><code>遵循第二范式,设计上述表结构如下:
	非关键字段只依赖于关键字段
</code></pre> 
<table><thead><tr><th>学号</th><th>姓名</th><th>性别</th></tr></thead><tbody><tr><td>1</td><td>zs</td><td>男</td></tr></tbody></table> 
<table><thead><tr><th>课程编号</th><th>课程名</th></tr></thead><tbody><tr><td>1</td><td>java</td></tr></tbody></table> 
<table><thead><tr><th>成绩编号(可以没有的,只是关联表)</th><th>学号</th><th>课程号</th><th>成绩</th></tr></thead><tbody><tr><td></td><td>1</td><td>1</td><td>88</td></tr></tbody></table> 
<pre><code>第三范式:在满足第二范式的基础上,不存在非关键字段之间的传递依赖
	如下就不符合
		姓名,性别,年龄,院系编号是依赖学号;但是存在院系名称和院系描述依赖于院系编号
</code></pre> 
<table><thead><tr><th>学号</th><th>姓名</th><th>性别</th><th>年龄</th><th>院系编号</th><th>院系名称</th><th>院系描述</th><th>…</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table> 
<pre><code>遵循第三范式设计如下:
</code></pre> 
<table><thead><tr><th>学号</th><th>姓名</th><th>性别</th><th>年龄</th><th>院系编号</th></tr></thead><tbody><tr><td>1</td><td>zs</td><td>男</td><td>19</td><td>1</td></tr><tr><td>2</td><td>ls</td><td>男</td><td>20</td><td>1</td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table> 
<table><thead><tr><th>院系编号</th><th>院系名称</th><th>院系描述</th></tr></thead><tbody><tr><td>1</td><td>计算机科学与计算</td><td>挺好</td></tr></tbody></table> 
<h4><a id="153ER_1630"></a>15.3ER图</h4> 
<pre><code>数据库建模
可以直观的体现出实体与实体之间的联系
图形:
	矩形:实体
	菱形:关系
	直线:连接
	椭圆:属性
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/b4/zPvjX995_o.png" alt="外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传"></p> 
<h4><a id="154_1644"></a>15.4三线表</h4> 
<pre><code>每个实体都会对应着一个三线表
</code></pre> 
<p><img src="https://images2.imgbox.com/67/05/1zwyh9bp_o.png" alt="外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/18b0299dc7bbacafd227fae3f8690f7d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">训练神经网络(上)激活函数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d373ec8b9f37a1c81c936d086793e738/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">百度搜索&amp;金融：构建高时效、高可用的分布式数据传输系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>