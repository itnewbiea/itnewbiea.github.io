<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据分析基础——R语言（处理缺失值） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据分析基础——R语言（处理缺失值）" />
<meta property="og:description" content=" 进行简单的数据处理时，我们处理的基本都是完整的数据集，但是实际问题中我们经常会遇到带有缺失值的数据，处理此类数据也就显得尤为重要。
处理缺失值的一般步骤 首先我们列出处理缺失值的一般步骤，对整个流程有一个大致的了解。
识别缺失数据；检查导致数据缺失的原因；删除包含缺失值的实例或用合理的数值插补缺失值。 数据缺失的种类 完全随机缺失（MCAR）随机缺失（MAR）非随机缺失（NMAR） 完全随机缺失：若某变量的缺失数据与其他任何观测和未观测变量都不相关，则数据为完全随机缺失。
随机缺失：若某变量上的缺失数据与其他观测变量相关，与他自己的未观测值不相关，则数据为随机缺失。
非随机缺失：若缺失数据不属于上两种则是非随机缺失。
识别缺失值 要想处理缺失值，首先我们就要去识别出来哪些数据是缺失值，R语言中，NA代表缺失值，NaN代表不可能的值，Inf和-Inf代表的是正无穷和负无穷。有对应的函数is.na()、is.nan()、is.infinite()可以分别用来识别缺失值，不可能值以及无穷值，返回的结果是TRUE/FALSE。
要想统计缺失值的个数，我们可以直接通过sum()函数来对TRUE/FALSE进行统计，其中TRUE的逻辑值是1，FALSE的逻辑值为0，同样不可能的值以及无穷值也可以用此方法进行判断。
探究缺失值 对于缺失值，我们只统计他的个数是不可取的，本节中给出探究缺失值的几种方法。
一、图表显示缺失值
我们可以用一个图标的形式去展示缺失值，在R语言中mice包中的md.pttern()函数提供了一个可以生成矩阵来显示缺失值的表格，示例如下：
library(lattice) library(mice) data(sleep,package=&#34;VIM&#34;) md.pattern(sleep) 得到的图表结果以及图形结果如下：
二、图形展示缺失值
md.pattren()函数已经给我们清晰的列出了每一项的缺失值，但是图形时一种更能够清晰的表达缺失值的一种方法，VIM包中提供了大量的可视化函数，我们来学习一下其中的一些函数。
aggr()函数
library(VIM) aggr(sleep,prop=FALSE,numbers=TRUE) matrixplot()函数
matrixplot() marginplot()函数
marginplot(sleep[c(&#34;Gest&#34;,&#34;Dream&#34;)],pch=c(20),col=c(&#34;darkgray&#34;,&#34;red&#34;,&#34;blue&#34;)) 缺失值的处理 一、删除
对于缺失值的处理首先我们先采用第一种最简单的方法——删除缺失值所在的行，R语言中提供了两种删除缺失值的函数，分别是complete.cases()函数和na.omit()函数。
对于删除的处理直接对数据进行使用即可，这里不做演示。
二、多重插补法
多重插补（MI）是一种基于重复模拟的处理缺失值的方法，在面对复杂的缺失值问题时，MI是常选用的方法，它将从一个包含缺失值的数据集中生成一组完整的数据集。本节中我们将使用R中的mice包对数据集进行插补。
mice包中多重插补法的工作流程如下：
基于mice包的分析通常要符合以下的过程：
library(mice) imp &lt;- mice(mydata,m) fit &lt;- with(imp, analysis) pooled &lt;- pool(fit) summary(pooled) 过程说明：
mydata是一个包含缺失值的矩阵或数据框imp是一个包含m个插补数据集的列表对象，同时还含有完成插补过程的信息。默认的m的值为5。analysis是一个表达式对象，用来设定应用于m个插补数据集的统计分析方法。fit是一个包含m个单独统计分析结果的列表对象。pooled是一个包含这m个统计平均分析结果的列表对象。 三、简单插补法
简单插补法，即用某个值（如均值、中位数、众数）来替换变量中的缺失值。注意的一点是，这些替换是随机的，这也就意味着不会引入随机误差。
四、处理缺失值的其他方法
R语言支持其他一些缺失值的处理方法。
软件包描述Hmisc包含多种函数，支持简单插补、多重插补和典型变量插补。mvnmle对多元正太分布数据中缺失值的最大似然估计。cat对线性模型中多元类别型变量的多重插补。arrayInpute、Seqknn处理微阵列缺失数据的实时函数。longitudinalData相关的函数列表，比如对时间序列缺失值进行插补的一系列函数。kmi处理生存分析缺失值的Kaplan-Meier多重插补。mix一般位置模型中混合类别型和连续型数据的多重插补。pan多元面板数据或聚类数据的多重插补。 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/064673c4d810e5913b9fa45f07f7b063/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-01T16:32:20+08:00" />
<meta property="article:modified_time" content="2019-08-01T16:32:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据分析基础——R语言（处理缺失值）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>进行简单的数据处理时，我们处理的基本都是完整的数据集，但是实际问题中我们经常会遇到带有缺失值的数据，处理此类数据也就显得尤为重要。</p> 
<h4>处理缺失值的一般步骤</h4> 
<p>首先我们列出处理缺失值的一般步骤，对整个流程有一个大致的了解。</p> 
<ol><li>识别缺失数据；</li><li>检查导致数据缺失的原因；</li><li>删除包含缺失值的实例或用合理的数值插补缺失值。</li></ol> 
<h4>数据缺失的种类</h4> 
<ol><li>完全随机缺失（MCAR）</li><li>随机缺失（MAR）</li><li>非随机缺失（NMAR）</li></ol> 
<p>完全随机缺失：若某变量的缺失数据与其他任何观测和未观测变量都不相关，则数据为完全随机缺失。</p> 
<p>随机缺失：若某变量上的缺失数据与其他观测变量相关，与他自己的未观测值不相关，则数据为随机缺失。</p> 
<p>非随机缺失：若缺失数据不属于上两种则是非随机缺失。</p> 
<h4>识别缺失值</h4> 
<p>要想处理缺失值，首先我们就要去识别出来哪些数据是缺失值，R语言中，NA代表缺失值，NaN代表不可能的值，Inf和-Inf代表的是正无穷和负无穷。有对应的函数is.na()、is.nan()、is.infinite()可以分别用来识别缺失值，不可能值以及无穷值，返回的结果是TRUE/FALSE。</p> 
<p>要想统计缺失值的个数，我们可以直接通过sum()函数来对TRUE/FALSE进行统计，其中TRUE的逻辑值是1，FALSE的逻辑值为0，同样不可能的值以及无穷值也可以用此方法进行判断。</p> 
<h4>探究缺失值</h4> 
<p>对于缺失值，我们只统计他的个数是不可取的，本节中给出探究缺失值的几种方法。</p> 
<p><strong>一、图表显示缺失值</strong></p> 
<p>我们可以用一个图标的形式去展示缺失值，在R语言中mice包中的md.pttern()函数提供了一个可以生成矩阵来显示缺失值的表格，示例如下：</p> 
<pre class="has"><code>library(lattice)
library(mice)
data(sleep,package="VIM")
md.pattern(sleep)</code></pre> 
<p>得到的图表结果以及图形结果如下：</p> 
<p><img alt="" class="has" height="150" src="https://images2.imgbox.com/bd/80/WwTtQYYs_o.png" width="537"></p> 
<p><img alt="" class="has" height="584" src="https://images2.imgbox.com/43/97/gz4TCZvx_o.png" width="740"></p> 
<p><strong>二、图形展示缺失值</strong></p> 
<p>md.pattren()函数已经给我们清晰的列出了每一项的缺失值，但是图形时一种更能够清晰的表达缺失值的一种方法，VIM包中提供了大量的可视化函数，我们来学习一下其中的一些函数。</p> 
<p>aggr()函数</p> 
<pre class="has"><code>library(VIM)
aggr(sleep,prop=FALSE,numbers=TRUE)</code></pre> 
<p><img alt="" class="has" height="662" src="https://images2.imgbox.com/a8/8f/KmJEML4b_o.png" width="1142"></p> 
<p>matrixplot()函数</p> 
<pre class="has"><code>matrixplot()</code></pre> 
<p><img alt="" class="has" height="649" src="https://images2.imgbox.com/ba/f9/kSy5uwA5_o.png" width="1132"></p> 
<p>marginplot()函数</p> 
<pre class="has"><code>marginplot(sleep[c("Gest","Dream")],pch=c(20),col=c("darkgray","red","blue"))</code></pre> 
<p><img alt="" class="has" height="512" src="https://images2.imgbox.com/ca/fd/PqGzUXI3_o.png" width="951"></p> 
<h4>缺失值的处理</h4> 
<p><strong>一、删除</strong></p> 
<p>对于缺失值的处理首先我们先采用第一种最简单的方法——删除缺失值所在的行，R语言中提供了两种删除缺失值的函数，分别是complete.cases()函数和na.omit()函数。</p> 
<p>对于删除的处理直接对数据进行使用即可，这里不做演示。</p> 
<p><strong>二、多重插补法</strong></p> 
<p>多重插补（MI）是一种基于重复模拟的处理缺失值的方法，在面对复杂的缺失值问题时，MI是常选用的方法，它将从一个包含缺失值的数据集中生成一组完整的数据集。本节中我们将使用R中的mice包对数据集进行插补。</p> 
<p>mice包中多重插补法的工作流程如下：</p> 
<p><img alt="Rå¤éæè¡¥æ³mice" class="has" src="https://images2.imgbox.com/0b/ca/qvPep00P_o.gif"></p> 
<p> </p> 
<p>基于mice包的分析通常要符合以下的过程：</p> 
<pre class="has"><code>library(mice)
imp &lt;- mice(mydata,m)
fit &lt;- with(imp, analysis)
pooled &lt;- pool(fit)
summary(pooled)</code></pre> 
<p>过程说明：</p> 
<ul><li>mydata是一个包含缺失值的矩阵或数据框</li><li>imp是一个包含m个插补数据集的列表对象，同时还含有完成插补过程的信息。默认的m的值为5。</li><li>analysis是一个表达式对象，用来设定应用于m个插补数据集的统计分析方法。</li><li>fit是一个包含m个单独统计分析结果的列表对象。</li><li>pooled是一个包含这m个统计平均分析结果的列表对象。</li></ul> 
<p><strong>三、简单插补法</strong></p> 
<p>简单插补法，即用某个值（如均值、中位数、众数）来替换变量中的缺失值。注意的一点是，这些替换是随机的，这也就意味着不会引入随机误差。</p> 
<p><strong>四、处理缺失值的其他方法</strong></p> 
<p>R语言支持其他一些缺失值的处理方法。</p> 
<table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td>软件包</td><td style="width:515px;">描述</td></tr><tr><td>Hmisc</td><td style="width:515px;">包含多种函数，支持简单插补、多重插补和典型变量插补。</td></tr><tr><td>mvnmle</td><td style="width:515px;">对多元正太分布数据中缺失值的最大似然估计。</td></tr><tr><td>cat</td><td style="width:515px;">对线性模型中多元类别型变量的多重插补。</td></tr><tr><td>arrayInpute、Seqknn</td><td style="width:515px;">处理微阵列缺失数据的实时函数。</td></tr><tr><td>longitudinalData</td><td style="width:515px;">相关的函数列表，比如对时间序列缺失值进行插补的一系列函数。</td></tr><tr><td>kmi</td><td style="width:515px;">处理生存分析缺失值的Kaplan-Meier多重插补。</td></tr><tr><td>mix</td><td style="width:515px;">一般位置模型中混合类别型和连续型数据的多重插补。</td></tr><tr><td>pan</td><td style="width:515px;">多元面板数据或聚类数据的多重插补。</td></tr></tbody></table> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8259c4a1bb06505376460a0df820f82d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ajax方法参数详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/21a4544e9a5c75b51fe6a929e153826a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mysql安装与操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>