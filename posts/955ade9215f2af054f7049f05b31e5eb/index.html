<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Shell脚本进阶：${}提取变量的值 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Shell脚本进阶：${}提取变量的值" />
<meta property="og:description" content="自己博客网站里的文章
Shell脚本进阶：使用${}提取变量 在Shell脚本编程中，提取变量通常使用$符号，即使用$VARIABLE来提取变量VARIABLE的值。而${}是另外一种用于引用变量的语法。
相比于$，${]的功能更加强大，提供了一系列额外的功能，包括获取变量的值、进行字符串替换、执行命令以及提供默认值等。本文将详细介绍${}的用法和示例。
1. 获取变量的值 ${var}用于获取变量var的值。这适用于普通变量、数组变量和环境变量。以下是一个示例：
name=&#34;John&#34; echo &#34;欢迎，${name}！&#34; 在上述示例中，${name}将会被替换为变量name的值，输出为&#34;欢迎，John！&#34;。
2. 大小写转换 在变量后使用^和,可以修改字符串的大小写。
${var^}会让字符串首字母大写${var^^}会让字符串全部大写${var,}会让字符串首字母小写${var,,}会让字符串全部小写 var=&#34;hello world&#34; echo &#34;Original string: $var&#34; # hello world echo &#34;Capitalizing the first letter: ${var^}&#34; # Hello world echo &#34;Converting to uppercase: ${var^^}&#34; # HELLO WORLD var=&#34;HELLO WORLD&#34; echo &#34;Lowercasing the first letter: ${var,}&#34; # hELLO WORLD echo &#34;Converting to lowercase: ${var,,}&#34; # hello world 3. 未定义时使用默认值 ${var:-default}用于获取变量var的值，如果var未定义或为空，则使用默认值default。以下是一个示例：
echo &#34;${debug_level:-&#34;error&#34;}&#34; # error debug_level=&#34;info&#34; echo &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/955ade9215f2af054f7049f05b31e5eb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-01T15:22:20+08:00" />
<meta property="article:modified_time" content="2023-12-01T15:22:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Shell脚本进阶：${}提取变量的值</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>自己博客网站里的文章<br> <img src="https://images2.imgbox.com/73/b4/auH2bMaA_o.jpg" alt="Bash"></p> 
<h2><a id="Shell_7"></a>Shell脚本进阶：使用${}提取变量</h2> 
<p>在Shell脚本编程中，提取变量通常使用<code>$</code>符号，即使用<code>$VARIABLE</code>来提取变量<code>VARIABLE</code>的值。而<code>${}</code>是另外一种用于引用变量的语法。</p> 
<p>相比于<code>$</code>，<code>${]</code>的功能更加强大，提供了一系列额外的功能，包括获取变量的值、进行字符串替换、执行命令以及提供默认值等。本文将详细介绍<code>${}</code>的用法和示例。</p> 
<h3><a id="1__15"></a>1. 获取变量的值</h3> 
<p><code>${var}</code>用于获取变量<code>var</code>的值。这适用于普通变量、数组变量和环境变量。以下是一个示例：</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">"John"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"欢迎，<span class="token variable">${name}</span>！"</span>
</code></pre> 
<p>在上述示例中，<code>${name}</code>将会被替换为变量<code>name</code>的值，输出为"欢迎，John！"。</p> 
<h3><a id="2__28"></a>2. 大小写转换</h3> 
<p>在变量后使用<code>^</code>和<code>,</code>可以修改字符串的大小写。</p> 
<ul><li><code>${var^}</code>会让字符串首字母大写</li><li><code>${var^^}</code>会让字符串全部大写</li><li><code>${var,}</code>会让字符串首字母小写</li><li><code>${var,,}</code>会让字符串全部小写</li></ul> 
<pre><code class="prism language-bash"><span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token string">"hello world"</span>

<span class="token builtin class-name">echo</span> <span class="token string">"Original string: <span class="token variable">$var</span>"</span>                  <span class="token comment"># hello world</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Capitalizing the first letter: <span class="token variable">${var<span class="token operator">^</span>}</span>"</span> <span class="token comment"># Hello world</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Converting to uppercase: <span class="token variable">${var<span class="token operator">^^</span>}</span>"</span>      <span class="token comment"># HELLO WORLD</span>

<span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token string">"HELLO WORLD"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Lowercasing the first letter: <span class="token variable">${var<span class="token operator">,</span>}</span>"</span> <span class="token comment"># hELLO WORLD</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Converting to lowercase: <span class="token variable">${var<span class="token operator">,,</span>}</span>"</span>     <span class="token comment"># hello world</span>
</code></pre> 
<h3><a id="3__51"></a>3. 未定义时使用默认值</h3> 
<p><code>${var:-default}</code>用于获取变量<code>var</code>的值，如果<code>var</code>未定义或为空，则使用默认值<code>default</code>。以下是一个示例：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"${debug_level:-"</span>error<span class="token string">"}"</span> <span class="token comment"># error</span>

<span class="token assign-left variable">debug_level</span><span class="token operator">=</span><span class="token string">"info"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"${debug_level:-"</span>error<span class="token string">"}"</span> <span class="token comment"># info</span>
</code></pre> 
<p>这个语法在<code>oh-my-zsh</code>的<code>powerlevel 10k</code>这个主题的下载命令中也有所使用：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> clone <span class="token parameter variable">--depth</span><span class="token operator">=</span><span class="token number">1</span> https://github.com/romkatv/powerlevel10k.git <span class="token variable">${ZSH_CUSTOM<span class="token operator">:-</span>$HOME<span class="token operator">/</span>.oh-my-zsh<span class="token operator">/</span>custom}</span>/themes/powerlevel10k
</code></pre> 
<p>这里就是如果用户在安装<code>oh-my-zsh</code>的时候指定了另外的安装目录，那么<code>.zshrc</code>文件中就会利用<code>ZSH_CUSTOM</code>变量来记录这个安装位置。</p> 
<h3><a id="4__72"></a>4. 未定义时设置默认值</h3> 
<p><code>${var:=default}</code>用于获取变量<code>var</code>的值，如果<code>var</code>未定义或为空，则将其设置为默认值<code>default</code>并使用该值。以下是一个示例：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"${debug_level:="</span>error<span class="token string">"}"</span> <span class="token comment"># error</span>
<span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${debug_level}</span>"</span> <span class="token comment"># error</span>

<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">5</span>
<span class="token builtin class-name">echo</span> <span class="token string">"当前计数：<span class="token variable">${count<span class="token operator">:=</span>0}</span>"</span>      <span class="token comment"># 5</span>
<span class="token builtin class-name">echo</span> <span class="token string">"变量已存在则不会重新设置：<span class="token variable">${count}</span>"</span> <span class="token comment"># 5</span>
</code></pre> 
<p>在上述示例中，变量<code>debug_level</code>未定义或为空，<code>${debug_level:=0}</code>将将其设置为默认值<code>error</code>。而<code>count</code>的值已经定义，所以<code>${count:=5}</code>直接输出当前计数为0，不会修改其默认值</p> 
<h3><a id="5__89"></a>5. 已定义时使用默认值</h3> 
<p><code>${var:+default}</code>用于获取变量<code>var</code>的值，如果<code>var</code>已经定义，则使用默认值<code>default</code>。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"${debug_flag:+"</span>You will not see this debug info<span class="token string">"}"</span> <span class="token comment"># （空）</span>

<span class="token assign-left variable">debug_flag</span><span class="token operator">=</span><span class="token string">"yes"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"${debug_flag:+"</span>You will see this debug info<span class="token string">"}"</span> <span class="token comment"># You will see this debug info</span>
</code></pre> 
<h3><a id="6__104"></a>6. 字符串替换</h3> 
<p><code>${var/pattern/replacement}</code>用于将变量<code>var</code>中第一个匹配<code>pattern</code>的子串替换为<code>replacement</code>。</p> 
<ul><li><code>${var//pattern/replacement}</code>会替换字符串中所有匹配的子字符串</li><li><code>${var/%pattern/replacement}</code>只会替换字符串中最后一个匹配的子字符串</li><li><code>${var/#pattern/replacement}</code>只会替换字符串中第一个匹配的子字符串</li><li><code>${var/pattern/}</code>相当于删除子字符串，即用空白来替换</li></ul> 
<p>以下是一个示例：</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">sentence</span><span class="token operator">=</span><span class="token string">"I love apples, apples are delicious."</span>
<span class="token builtin class-name">echo</span> <span class="token string">"替换前的句子：<span class="token variable">${sentence}</span>"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"替换后的句子：<span class="token variable">${sentence<span class="token operator">/</span><span class="token operator">/</span>apples<span class="token operator">/</span>oranges}</span>"</span>
</code></pre> 
<p>在上述示例中，<code>${sentence//apples/oranges}</code>将会将句子中的所有"apples"替换为"oranges"。</p> 
<h3><a id="7__125"></a>7. 提取子字符串</h3> 
<p><code>${string:position:length}</code>用于提取字符串<code>string</code>从<code>position</code>开始的<code>length</code>个字符，即获得子字符串。也支持负数开始的<code>positon</code>，表示从字符串结尾开始。</p> 
<p>以下是一个示例：</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">"JackWang"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"First Name: <span class="token variable">${name<span class="token operator">:</span>0<span class="token operator">:</span>4}</span>"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Last Name: <span class="token variable">${nane<span class="token operator">:</span>(-4)<span class="token operator">:</span>4}</span>"</span>
</code></pre> 
<p>注意，负数需要用括号括起来。</p> 
<h3><a id="8__141"></a>8. 变量长度</h3> 
<p><code>${#var}</code>用于获取变量<code>var</code>的长度（字符个数）。以下是一个示例：</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">word</span><span class="token operator">=</span><span class="token string">"Hello"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"单词长度为：<span class="token variable">${<!-- --><span class="token operator">#</span>word}</span>"</span>
</code></pre> 
<p>在上述示例中，<code>${#word}</code>将会输出变量<code>word</code>的长度，即单词"Hello"的长度为5。</p> 
<h3><a id="9__156"></a>9. 总结</h3> 
<p><code>${}</code>结构在Shell脚本编程中提供了灵活和强大的功能。通过它，我们可以方便地引用变量、进行字符串替换、提供默认值等操作，以满足不同的编程需求。</p> 
<p>希望本文对你理解<code>${}</code>的用法有所帮助，让你在Shell脚本编程中能够更加灵活地处理变量和字符串操作。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e1bda9d81c50103a5a0f1df20e1c6d3b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SQL的执行顺序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8ee7fdd1519168981b0b403b526c8b41/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux周期任务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>