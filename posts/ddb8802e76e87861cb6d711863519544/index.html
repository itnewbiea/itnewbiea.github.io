<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>uniapp 微信小程序获取当前位置定位不准确问题 uniapp 微信小程序获取当前位置的坐标（经纬度），通过坐标去获取当前具体地址 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="uniapp 微信小程序获取当前位置定位不准确问题 uniapp 微信小程序获取当前位置的坐标（经纬度），通过坐标去获取当前具体地址" />
<meta property="og:description" content="点击获取定位-位置授权-显示地址信息
12、
3、
以下3处(！！！必需)必须满足
&lt;template&gt; &lt;view class=&#34;other-item&#34;&gt; &lt;view class=&#34;min-left&#34;&gt;当前地址&lt;/view&gt; &lt;view class=&#34;right-text&#34;&gt; //如果已经获取了地址则显示地址信息 &lt;view v-if=&#34;address&#34;&gt; {{address}} &lt;/view&gt; //如果没有获取地址则显示获取按钮（获取地址后获取按钮消失，显示地址信息） &lt;view class=&#34;get-location&#34; @click=&#34;getCurrentLocation&#34; v-else&gt; &lt;image src=&#34;../../static/img/get-location.png&#34;&gt;&lt;/image&gt; &lt;/view&gt; &lt;/view&gt; &lt;/view&gt; &lt;/template&gt; manifest.json(！！！必需)
data() { return { longitude: &#39;&#39;, // 经度(当前用户位置) latitude: &#39;&#39;,// 纬度(当前用户位置) address : &#39;&#39;// 地址信息(当前用户位置的) } }, methods: { //通过微信自带的方法获取到当前的经纬度 getCurrentLocation() { let that = this //uni.getLocation比wx.getLocation精确一点 uni.getLocation({ type: &#39;gcj02&#39;,// (！！！必需)默认为 wgs84 返回 gps 坐标，gcj02（更准确） 返回可用于 wx.openLocation 的坐标 isHighAccuracy: true,//开启高精度定位(！！！必需) success: function(res) { console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ddb8802e76e87861cb6d711863519544/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-18T10:54:53+08:00" />
<meta property="article:modified_time" content="2023-07-18T10:54:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">uniapp 微信小程序获取当前位置定位不准确问题 uniapp 微信小程序获取当前位置的坐标（经纬度），通过坐标去获取当前具体地址</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>点击获取定位-位置授权-显示地址信息</p> 
</blockquote> 
<p>1<img src="https://images2.imgbox.com/7d/f0/1Opuo416_o.png" alt="在这里插入图片描述">2、<img src="https://images2.imgbox.com/de/e9/libkkDnQ_o.png" alt="在这里插入图片描述"></p> 
<p>3、<img src="https://images2.imgbox.com/69/85/zzogxKey_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>以下3处(！！！必需)必须满足</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"other-item"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"min-left"</span><span class="token operator">&gt;</span>当前地址<span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"right-text"</span><span class="token operator">&gt;</span>
			//如果已经获取了地址则显示地址信息
			<span class="token operator">&lt;</span>view v-if<span class="token operator">=</span><span class="token string">"address"</span><span class="token operator">&gt;</span>
				<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>address<span class="token punctuation">}</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
			//如果没有获取地址则显示获取按钮（获取地址后获取按钮消失，显示地址信息）
			<span class="token operator">&lt;</span>view <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"get-location"</span> @click<span class="token operator">=</span><span class="token string">"getCurrentLocation"</span> v-else<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>image <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"../../static/img/get-location.png"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/image<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>/view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/template<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>manifest.json(！！！必需)</strong><br> <img src="https://images2.imgbox.com/4b/7b/pFCj87oN_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token function-name function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token builtin class-name">return</span> <span class="token punctuation">{<!-- --></span>
		longitude: <span class="token string">''</span>, // 经度<span class="token punctuation">(</span>当前用户位置<span class="token punctuation">)</span>
		latitude: <span class="token string">''</span>,// 纬度<span class="token punctuation">(</span>当前用户位置<span class="token punctuation">)</span>
		address <span class="token builtin class-name">:</span> <span class="token string">''</span>// 地址信息<span class="token punctuation">(</span>当前用户位置的<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>,
</code></pre> 
<pre><code class="prism language-bash">methods: <span class="token punctuation">{<!-- --></span>
	//通过微信自带的方法获取到当前的经纬度
	<span class="token function-name function">getCurrentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token builtin class-name">let</span> that <span class="token operator">=</span> this 
		//uni.getLocation比wx.getLocation精确一点
		uni.getLocation<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
			type: <span class="token string">'gcj02'</span>,// <span class="token punctuation">(</span>！！！必需<span class="token punctuation">)</span>默认为 wgs84 返回 gps 坐标，gcj02（更准确） 返回可用于 wx.openLocation 的坐标
			isHighAccuracy: true,//开启高精度定位<span class="token punctuation">(</span>！！！必需<span class="token punctuation">)</span>
			success: function<span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				console.log<span class="token punctuation">(</span><span class="token string">"当前位置信息："</span>,res<span class="token punctuation">)</span>
				that.longitude <span class="token operator">=</span> res.longitude<span class="token punctuation">;</span> // 经度，范围为-180~180，负数表示西经
				that.latitude <span class="token operator">=</span> res.latitude<span class="token punctuation">;</span>// 纬度，范围为-90~90，负数表示南纬
				//根据获取的经纬度去解析当前坐标的地址信息
				that.loAcquire<span class="token punctuation">(</span>that.longitude, that.latitude<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>,
			fail: function<span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				uni.showToast<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
					title: <span class="token string">'无法获取位置信息！无法使用位置功能'</span>,
					icon: <span class="token string">'none'</span>,
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>,
	//根据获取的经纬度去解析当前坐标的地址信息
	loAcquire<span class="token punctuation">(</span>longitude, latitude<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token builtin class-name">let</span> that <span class="token operator">=</span> this<span class="token punctuation">;</span>
		uni.showLoading<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
			title: <span class="token string">'加载中'</span>,
			mask: <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token builtin class-name">let</span> str <span class="token operator">=</span> <span class="token variable"><span class="token variable">`</span><span class="token assign-left variable">key</span><span class="token operator">=</span>你的key值<span class="token operator">&amp;</span><span class="token assign-left variable">location</span><span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span>latitude<span class="token punctuation">}</span>,$<span class="token punctuation">{<!-- --></span>longitude<span class="token punctuation">}</span><span class="token variable">`</span></span>
		uni.request<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
			url: <span class="token string">'https://apis.map.qq.com/ws/geocoder/v1/?'</span> + str,
			data: <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>,
			method: <span class="token string">'get'</span>,
			success: res <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
				uni.hideLoading<span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>res.data.status <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					that.address <span class="token operator">=</span> res.data.result.address<span class="token punctuation">;</span> //当前定位
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>,
			fail: <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>,
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>,
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/36a5f2bf2867b4d5236509458373db61/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">字符串加密C语言实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cf58f0dfc1daf209c418ff0a9fb21bc8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机毕业设计springboot共享电单车管理系统3447i【附源码】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>