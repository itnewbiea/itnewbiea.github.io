<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何通过「迭代分支」提高 API 开发的升级效率 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何通过「迭代分支」提高 API 开发的升级效率" />
<meta property="og:description" content="在软件快速迭代的今天，“敏捷开发”已经成为大多数软件公司的首选。通过小步快跑的方式快速更新产品，持续高效升级，提升用户体验，从而保证产品的竞争力和价值。
在使用敏捷方式进行产品迭代的过程中，必然会碰到以下场景：
本次迭代需要对原有生产环境的 API 进行升级；本次迭代需求的新功能需要引入新的 API。 针对于这类场景，Apifox 推出了「迭代分支」功能，提供了灵活可控的 API 迭代协作机制，既保证了主分支稳定性，又提升了团队工作效率。非常适合敏捷开发的团队，主要优势有：
主分支稳定：开发者基于已存在的 API 开发新版本，但不破坏原有的 API 定义与调用参数。每个迭代分支包含独立的接口、数据模型、响应组件等数据，数据互不影响，保证各分支数据的稳定性和独立性。协作并行：不同团队角色可在不同分支上同时工作，互不干扰，提升协作效率。快速合并：新分支开发完成后，可轻松快速地对比两个分支之间的内容差异，并将迭代分支的内容合并回主分支。 创建与管理迭代分支 当你的 项目角色为「管理员」 时，你可以在「项目设置 - 项目资源 - 管理迭代分支」内创建和管理迭代分支。每条迭代分支都拥有独立的名称、创建时间、创建者信息及资源统计数据。
系统默认内置主分支（main），所有生产环境的 API 文档 都要处于这个主分支内。
对已上线且相关数据资源都已并入主分支的迭代分支，你可以 执行「归档」 操作将其收起，释放分支席位。当前，一个项目中暂时仅支持含有一个未归档的迭代分支。
在子分支上维护 API 文档 在创建未被归档的迭代分支后，你可以点击接口管理的右上角的分支按钮组件，对迭代分支进行切换。切换到分支时，目录树的 UI 背景为淡蓝色渐变，与主分支的纯白背景有明显区别。
新建的迭代分支中默认不包含任何内容。这里的最佳实践是：
对需要升级调整的接口，从主分支创建副本到此迭代分支中；对需要新增的接口，直接在此迭代分支中添加。 需要注意的是，在子分支创建副本时，尽量不要将本次迭代中无需改动的接口导入其中，这会导致数据冗余，降低功能可用性。这里与 Git 的 Fork 概念有区别，研发同学需要区分和理解。
从主分支拉取的副本会在目录树右侧显示关联图标，代表该资源是现有的线上资源，需要进行升级。在迭代分支内编辑资源不会影响到主分支及其他分支的资源内容。
在子分支中完成 API 定义后，团队成员就需要根据子分支的内容进行研发协同了。前端 Mock 数据来写页面，后端生成服务端代码写接口，测试根据文档写用例。
合并至主分支 当实际的研发测试工作已完成，本次迭代的代码也已经发布到线上之后，我们需要回到 Apifox 对应的迭代分支中，对 API 文档、数据模型、响应组件等资源执行「合并至主分支」操作。
合并入口位于目录树右上角分支组件的下拉菜单中，也可以在切换至具体子分支后，在目录最底部找到。只有项目管理员才有权限执行整分支合并的操作。
选择合并后，系统会根据资源具体变更情况及主分支关联关系，自动推荐最合适的处理方式。处理方式有三种：
覆盖：当子分支资源是主分支的关联副本时，默认选择「覆盖」方式，将会用子分支内容完全替换主分支的对应资源。常用于已有接口的升级场景；新增：当此子分支资源是新增的资源，与主分支没有对应关联时，默认选择「新增」方式将该资源在主分支中新增。常用于迭代开发的新功能新接口的场景；不合并：此子分支资源在合并后不对主分支资源做任何操作。常用于此资源没有实际发生变动，或实际上线代码内容与资源内容不匹配不可直接合并至主分支，需要后续调整的场景。 合并分之前，你可以通过「对比」功能，以 YAML 形式查看当前分支与主分支资源间的细节差异对比。
其中数据模型支持可视化 对比。
当然，也可以根据实际情况针对单资源进行合并、对比，只需选中子分支资源后右键即可执行这些操作。
合并完成后，就可以在主分支中查看合并后的资源了。建议在完成合并之后，把已完成的迭代分支归档。
常见疑问 Q ：所有类型的接口都支持迭代分支功能吗？
A ：目前只支持 HTTP 接口使用迭代分支功能。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/71f41c291f9bcade008428973c71b734/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-26T10:36:34+08:00" />
<meta property="article:modified_time" content="2023-12-26T10:36:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何通过「迭代分支」提高 API 开发的升级效率</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在软件快速迭代的今天，“敏捷开发”已经成为大多数软件公司的首选。通过小步快跑的方式快速更新产品，持续高效升级，提升用户体验，从而保证产品的竞争力和价值。</p> 
<p>在使用敏捷方式进行产品迭代的过程中，必然会碰到以下场景：</p> 
<ol><li>本次迭代需要对原有生产环境的 <strong><a href="https://apifox.com/apiskills/understanding-apis/" rel="nofollow" title="API">API</a></strong> 进行升级；</li><li>本次迭代需求的新功能需要引入新的 API。</li></ol> 
<p>针对于这类场景，<strong>Apifox 推出了「迭代分支」功能</strong>，提供了灵活可控的 API 迭代协作机制，既保证了主分支稳定性，又提升了团队工作效率。非常适合敏捷开发的团队，主要优势有：</p> 
<ul><li><strong>主分支稳定</strong>：开发者基于已存在的 API 开发新版本，但不破坏原有的 API 定义与调用参数。每个迭代分支包含独立的<strong>接口、数据模型、响应组件</strong>等数据，数据互不影响，保证各分支数据的稳定性和独立性。</li><li><strong>协作并行</strong>：不同团队角色可在不同分支上同时工作，互不干扰，提升协作效率。</li><li><strong>快速合并</strong>：新分支开发完成后，可轻松快速地对比两个分支之间的内容差异，并将迭代分支的内容合并回主分支。 </li></ul> 
<h3><strong>创建与管理迭代分支</strong></h3> 
<p>当你的 <strong>项目角色为「管理员」</strong> 时，你可以在「项目设置 - 项目资源 - 管理迭代分支」内创建和管理迭代分支。每条迭代分支都拥有独立的名称、创建时间、创建者信息及资源统计数据。</p> 
<p>系统默认内置主分支（main），所有生产环境的 <strong><a href="https://apifox.com/apiskills/api-and-api-documentation/" rel="nofollow" title="API 文档">API 文档</a></strong> 都要处于这个主分支内。</p> 
<p>对已上线且相关数据资源都已并入主分支的迭代分支，你可以 <strong>执行「归档」</strong> 操作将其收起，释放分支席位。当前，一个项目中暂时仅支持含有一个未归档的迭代分支。</p> 
<p></p> 
<p class="img-center"><img alt="图片" height="668" src="https://images2.imgbox.com/51/fe/mMFIOvOe_o.png" width="1080"></p> 
<h3><strong>在子分支上维护 API 文档</strong></h3> 
<p>在创建未被归档的迭代分支后，你可以点击接口管理的右上角的分支按钮组件，对迭代分支进行切换。<strong>切换到分支时，目录树的 UI 背景为淡蓝色渐变</strong>，与主分支的纯白背景有明显区别。</p> 
<p></p> 
<p class="img-center"><img alt="图片" height="778" src="https://images2.imgbox.com/e9/4f/lkTUJBaT_o.png" width="1080"></p> 
<p>新建的迭代分支中默认不包含任何内容。这里的最佳实践是：</p> 
<ol><li>对需要升级调整的接口，从主分支创建副本到此迭代分支中；</li><li>对需要新增的接口，直接在此迭代分支中添加。</li></ol> 
<p><em>需要注意的是，在子分支创建副本时，尽量不要将本次迭代中无需改动的接口导入其中，这会导致数据冗余，降低功能可用性。这里与 Git 的 Fork 概念有区别，研发同学需要区分和理解。</em></p> 
<p></p> 
<p class="img-center"><img alt="图片" height="668" src="https://images2.imgbox.com/7b/3b/aGsBKVUB_o.png" width="1080"></p> 
<p><strong>从主分支拉取的副本会在目录树右侧显示关联图标</strong>，代表该资源是现有的线上资源，需要进行升级。在迭代分支内编辑资源不会影响到主分支及其他分支的资源内容。</p> 
<p></p> 
<p class="img-center"><img alt="图片" height="668" src="https://images2.imgbox.com/70/5a/PbHbQ9nF_o.png" width="1080"></p> 
<p>在子分支中完成 API 定义后，团队成员就需要根据子分支的内容进行研发协同了。前端 <strong><a href="https://apifox.com/apiskills/mock-done/" rel="nofollow" title="Mock">Mock</a></strong> 数据来写页面，后端生成服务端代码写接口，测试根据文档写用例。</p> 
<h3><strong>合并至主分支</strong></h3> 
<p>当实际的研发测试工作已完成，本次迭代的代码也已经发布到线上之后，我们需要回到 Apifox 对应的迭代分支中，对 API 文档、数据模型、响应组件等资源执行「合并至主分支」操作。</p> 
<p>合并入口位于<strong>目录树右上角分支组件的下拉菜单</strong>中，也可以在<strong>切换至具体子分支后，在目录最底部找到</strong>。只有<strong>项目管理员</strong>才有权限执行整分支合并的操作。</p> 
<p></p> 
<p class="img-center"><img alt="图片" height="668" src="https://images2.imgbox.com/80/80/siEsC6yd_o.png" width="1080"></p> 
<p>选择合并后，系统会根据资源具体变更情况及主分支关联关系，自动推荐最合适的处理方式。处理方式有三种：</p> 
<ul><li><strong>覆盖</strong>：当子分支资源是主分支的关联副本时，默认选择「覆盖」方式，将会用子分支内容完全替换主分支的对应资源。常用于已有接口的升级场景；</li><li><strong>新增</strong>：当此子分支资源是新增的资源，与主分支没有对应关联时，默认选择「新增」方式将该资源在主分支中新增。常用于迭代开发的新功能新接口的场景；</li><li><strong>不合并</strong>：此子分支资源在合并后不对主分支资源做任何操作。常用于此资源没有实际发生变动，或实际上线代码内容与资源内容不匹配不可直接合并至主分支，需要后续调整的场景。</li></ul> 
<p></p> 
<p class="img-center"><img alt="图片" height="668" src="https://images2.imgbox.com/88/ce/k6ZRDruG_o.png" width="1080"></p> 
<p>合并分之前，你可以通过「对比」功能，<strong>以 YAML 形式查看当前分支与主分支资源间的细节差异对比</strong>。</p> 
<p></p> 
<p class="img-center"><img alt="图片" height="668" src="https://images2.imgbox.com/93/7a/AuGh4SD1_o.png" width="1080"></p> 
<p>其中<strong>数据模型支持可视化</strong> <strong>对比</strong>。</p> 
<p></p> 
<p class="img-center"><img alt="图片" height="668" src="https://images2.imgbox.com/15/2d/i7pGS3YI_o.png" width="1080"></p> 
<p>当然，也可以根据实际情况<strong>针对单资源进行合并、对比</strong>，只需选中子分支资源后右键即可执行这些操作。</p> 
<p></p> 
<p class="img-center"><img alt="图片" height="668" src="https://images2.imgbox.com/dc/5c/Pp6FYuNf_o.png" width="1080"></p> 
<p>合并完成后，就可以在主分支中查看合并后的资源了。建议在完成合并之后，把已完成的迭代分支归档。</p> 
<h3><strong>常见疑问</strong></h3> 
<p>Q ：<strong>所有类型的接口都支持迭代分支功能吗？</strong></p> 
<p>A ：目前只支持 <strong><a href="https://apifox.com/apiskills/the-5-pillars-of-every-http-request/" rel="nofollow" title="HTTP">HTTP</a> 接口</strong>使用迭代分支功能。</p> 
<p>Q ：<strong>可以创建多个迭代分支吗？</strong></p> 
<p>A ：公网版当前<strong>每个项目仅可含一个未归档的迭代分支</strong>，如果你有需要创建多个迭代分支的需求，可以联系客服使用企业版/私有化版本。</p> 
<p>Q ：<strong>子分支内的接口如何做<a href="https://apifox.com/apiskills/what-is-automation-testing/" rel="nofollow" title="自动化测试">自动化测试</a>？</strong></p> 
<p>A ：目前迭代分支<strong>暂不支持接口用例和自动化测试的相关功能</strong>。但此功能已在开发计划中，会尽快上线与大家见面，同时，我们也会继续提升迭代分支的能力，真正实现从需求到测试的全链路闭环协作。</p> 
<p>Q ：<strong>可以只通过迭代分支修改主分支资源吗？我不想让我的项目成员随便修改主分支上的接口。</strong></p> 
<p>A ：暂不支持，此需求已在规划中。当前的整分支合并需要管理员权限，我们也在研究是否增加一个合并审核流程来做到更好的合并控制。</p> 
<p>Q ：<strong>可以回溯和复原回之前迭代的分支内容吗？</strong></p> 
<p>A ：可以。如果你因为某些原因需要查看之前迭代的内容，可以<strong>将其从归档状态恢复成正常分支状态</strong>（注意迭代分支限额），恢复后即可在接口管理的目录树中重新访问这个分支。归档前分支内的数据会自动保留不变。如果你希望恢复分支历史内容，可以直接使用该分支再次合并到主分支完成还原。 </p> 
<p>Q ：<strong>可以通过迭代分支功能管理多个线上版本的接口吗？</strong></p> 
<p>A ：不建议这样使用。虽然迭代分支功能也有版本管理的概念在里面（研发中版本的接口、线上生产版本的接口），但主要还是针对「软件迭代」场景设计。后续会有其它功能来支持和满足接口多线上版本的管理这类场景的需求。</p> 
<p>Q ：<strong>可以分享子分支的接口文档给其他人吗？</strong></p> 
<p>A ：你<strong>可以分享接口、数据模型、响应组件的协作链接给已加入项目的伙伴</strong>。普通的接口文档在线分享暂不支持分享子分支上的接口文档，后续会增加此功能。</p> 
<p>Q ：<strong>可以导入/导出子分支的数据吗？</strong></p> 
<p>A ：目前只支持<strong>主分支的导入导出</strong>。子分支的相关功能后续会支持。</p> 
<p>Q ：<strong>迭代分支中的目录与主分支中的目录，是什么关系？</strong></p> 
<p>A ：子分支是跟主分支<strong>共用的一套</strong>。子分支的资源（副本、新增）会显示主分支上级目录。子分支上不可对主分支的目录设置进行修改，仅支持修改目录名；在子分支上创建新的目录（UI 显示为渐变蓝色）可以在子分支中进行修改。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6f73ad4f771e0ca93fe9bc3a656660a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">el-date-picker周选择器获取选择的日期范围</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ae8e72f357326d4fcc43192e3b5d928e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">background-size的几种取值</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>