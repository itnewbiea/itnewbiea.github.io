<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Fiddler捕捉数据包得到几乎全是加密过的tunnel to【解决方法】 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Fiddler捕捉数据包得到几乎全是加密过的tunnel to【解决方法】" />
<meta property="og:description" content="困扰了我很久的这个问题被解决了 这个东西一直都没有办法解决，让我们在后面想要做到爬取手机应用上的数据根本就做不到。
因为，根据网络上设置的很多方法，改变了ip代理之后，我就发现我的手机上不了网络了。都上不了网络了，我还怎么抓到对应的包呢？所以，在这陷入了深思。
手机上不了网！设置完代理之后手机上不了网！得到的所有包的信息显示的都是加密的（tunnel to）
这样类似的字样，已经把我搞得头都炸了！
解决方案 修改FiddlerScript
也就是改写Fiddler代理脚本。
然后找到 OnBeforeRequest这个函数，用下面的函数来替换原来的函数
目的就是为了欺骗对方的服务器。
修改之后，记得要保存！！！！！
点击左上角的 Save Script 这个按钮
之后，我们就可以发现，手机就变得可以上网了！！！
而且看到对应的包都是没有被加密的！ 我仿佛又看到一堆的数据在向我招手！！！
static function OnBeforeRequest(oSession: Session) { // Sample Rule: Color ASPX requests in RED // if (oSession.uriContains(&#34;.aspx&#34;)) { oSession[&#34;ui-color&#34;] = &#34;red&#34;; } // Sample Rule: Flag POSTs to fiddler2.com in italics // if (oSession.HostnameIs(&#34;www.fiddler2.com&#34;) &amp;&amp; oSession.HTTPMethodIs(&#34;POST&#34;)) { oSession[&#34;ui-italic&#34;] = &#34;yup&#34;; } // Sample Rule: Break requests for URLs containing &#34;/sandbox/&#34; // if (oSession." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/6efb255553b3665e502213394ca9ee67/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-11-22T09:20:39+08:00" />
<meta property="article:modified_time" content="2018-11-22T09:20:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Fiddler捕捉数据包得到几乎全是加密过的tunnel to【解决方法】</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <div class="markdown_views prism-atom-one-light" id="content_views">
          
         
 <svg xmlns="http://www.w3.org/2000/svg"> 
  <path id="raphael-marker-block" stroke-linecap="round" d="M 5 0 L 0 2.5 L 5 5 Z"> 
 </path></svg>        
 <h3><a id="_0" target="_blank"></a>困扰了我很久的这个问题被解决了</h3> 
 <p>这个东西一直都没有办法解决，让我们在后面想要做到爬取手机应用上的数据根本就做不到。</p> 
 <p>因为，根据网络上设置的很多方法，改变了ip代理之后，我就发现我的手机上不了网络了。都上不了网络了，我还怎么抓到对应的包呢？所以，在这陷入了深思。<br><strong>手机上不了网！设置完代理之后手机上不了网！得到的所有包的信息显示的都是加密的（tunnel to）</strong></p> 
 <p><img alt="这里写图片描述" src="https://images2.imgbox.com/a3/6b/MM3FykQ8_o.png"><br><strong>这样类似的字样，已经把我搞得头都炸了！</strong></p> 
 <hr> 
 <h3><a id="_10" target="_blank"></a>解决方案</h3> 
 <p><strong>修改FiddlerScript</strong><br>也就是改写Fiddler代理脚本。<br><img alt="这里写图片描述" src="https://images2.imgbox.com/b0/49/PjW0KdA6_o.png"></p> 
 <p><strong>然后找到 OnBeforeRequest这个函数，用下面的函数来替换原来的函数</strong><br>目的就是为了欺骗对方的服务器。<br><strong>修改之后，记得要保存！！！！！</strong><br><strong>点击左上角的 Save Script 这个按钮</strong><br>之后，我们就可以发现，手机就变得可以上网了！！！<br>而且看到对应的包都是没有被加密的！ <strong>我仿佛又看到一堆的数据在向我招手！！！</strong></p> 
 <pre class="prettyprint"><code class="has-numbering">static function OnBeforeRequest(oSession: Session) {        // Sample Rule: Color ASPX requests in RED        // if (oSession.uriContains(".aspx")) { oSession["ui-color"] = "red"; }        // Sample Rule: Flag POSTs to fiddler2.com in italics        // if (oSession.HostnameIs("www.fiddler2.com") &amp;&amp; oSession.HTTPMethodIs("POST")) { oSession["ui-italic"] = "yup"; }        // Sample Rule: Break requests for URLs containing "/sandbox/"        // if (oSession.uriContains("/sandbox/")) {        //     oSession.oFlags["x-breakrequest"] = "yup"; // Existence of the x-breakrequest flag creates a breakpoint; the "yup" value is unimportant.        // }        if ((null != gs_ReplaceToken) &amp;&amp; (oSession.url.indexOf(gs_ReplaceToken)&gt;-1)) {   // Case sensitive            oSession.url = oSession.url.Replace(gs_ReplaceToken, gs_ReplaceTokenWith);         }        if ((null != gs_OverridenHost) &amp;&amp; (oSession.host.toLowerCase() == gs_OverridenHost)) {            oSession["x-overridehost"] = gs_OverrideHostWith;         }        if ((null!=bpRequestURI) &amp;&amp; oSession.uriContains(bpRequestURI)) {            oSession["x-breakrequest"]="uri";        }        if ((null!=bpMethod) &amp;&amp; (oSession.HTTPMethodIs(bpMethod))) {            oSession["x-breakrequest"]="method";        }        if ((null!=uiBoldURI) &amp;&amp; oSession.uriContains(uiBoldURI)) {            oSession["ui-bold"]="QuickExec";        }        if (m_SimulateModem) {            // Delay sends by 300ms per KB uploaded.            oSession["request-trickle-delay"] = "300";             // Delay receives by 150ms per KB downloaded.            oSession["response-trickle-delay"] = "150";         }        if (m_DisableCaching) {            oSession.oRequest.headers.Remove("If-None-Match");            oSession.oRequest.headers.Remove("If-Modified-Since");            oSession.oRequest["Pragma"] = "no-cache";        }        // User-Agent Overrides        if (null != sUA) {            oSession.oRequest["User-Agent"] = sUA;         }        if (m_Japanese) {            oSession.oRequest["Accept-Language"] = "ja";        }        if (m_AutoAuth) {            // Automatically respond to any authentication challenges using the             // current Fiddler user's credentials. You can change (default)            // to a domain\\username:password string if preferred.            //            // WARNING: This setting poses a security risk if remote             // connections are permitted!            oSession["X-AutoAuth"] = "(default)";        }        if (m_AlwaysFresh &amp;&amp; (oSession.oRequest.headers.Exists("If-Modified-Since") || oSession.oRequest.headers.Exists("If-None-Match")))        {            oSession.utilCreateResponseAndBypassServer();            oSession.responseCode = 304;            oSession["ui-backcolor"] = "Lavender";        }        var hosts = 'zkd.me develop.dog';        FiddlerApplication.Log.LogFormat("Logger session {0}, Url: {1}, isHttps: {2}, port: {3}", oSession.id, oSession.fullUrl, oSession.isHTTPS, oSession.port);        if(hosts.indexOf(oSession.host) &gt; -1){            FiddlerApplication.Log.LogFormat("Capture session {0}, Url: {1}, isHttps: {2}, port: {3}", oSession.id, oSession.fullUrl, oSession.isHTTPS, oSession.port);            if(oSession.HTTPMethodIs('CONNECT')){                FiddlerApplication.Log.LogString('create fake tunnel response');                oSession['x-replywithtunnel'] = 'FakeTunnel';                return;            }            if (oSession.isHTTPS){                FiddlerApplication.Log.LogString('switch https to http request');                oSession.fullUrl = oSession.fullUrl.Replace("https://","http://");                oSession.port = 80;            }               FiddlerApplication.Log.LogFormat("Processed session {0}, Url: {1}, isHttps: {2}, port: {3}", oSession.id, oSession.fullUrl, oSession.isHTTPS, oSession.port);        }        FiddlerApplication.Log.LogFormat("Logger session {0}, Url: {1}, isHttps: {2}, port: {3}", oSession.id, oSession.fullUrl, oSession.isHTTPS, oSession.port);    }</code>
  
  </pre><ul class="pre-numbering"><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li><li>54</li><li>55</li><li>56</li><li>57</li><li>58</li><li>59</li><li>60</li><li>61</li><li>62</li><li>63</li><li>64</li><li>65</li><li>66</li><li>67</li><li>68</li><li>69</li><li>70</li><li>71</li><li>72</li><li>73</li><li>74</li><li>75</li><li>76</li><li>77</li><li>78</li><li>79</li><li>80</li><li>81</li><li>82</li><li>83</li><li>84</li><li>85</li><li>86</li><li>87</li><li>88</li><li>89</li></ul>            
</div> 
<p></p> 
<p><strong>再分享一下我老师大神的人工智能教程吧。零基础！通俗易懂！风趣幽默！希望你也加入到我们人工智能的队伍中来！<a href="http://www.captainbed.net/" rel="nofollow">http://www.captainbed.net</a></strong></p> 
<p></p> 
<div align="center"> 
 <img title="" alt="这里写图片描述" src="https://images2.imgbox.com/09/66/yzrfZ0DW_o.gif"> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/53b58f56beebd253d156e6e535c76711/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HttpRunner学习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5de4a0cd11792baa9ceb0e9e2911e637/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Ubuntu查看文件夹下文件的个数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>