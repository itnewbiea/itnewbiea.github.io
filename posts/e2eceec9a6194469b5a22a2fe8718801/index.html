<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>httprunner的用例模板 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="httprunner的用例模板" />
<meta property="og:description" content="httprunner的用例模板。
1. 用例用[{&#34;config&#34;:{}},&#34;test&#34;:{}}]格式。
2. config 为全局配置变量
name
required
格式：string
测试用例集的名称，在测试报告中将作为标题 variables
optional
格式：list of dict
定义的全局变量，作用域为整个用例集 parameters
optional
格式：list of dict
全局参数，用于实现数据化驱动，作用域为整个用例集 request
optional
格式：dict of dict
request 的公共参数，作用域为整个用例集
常用参数包括 base_url 和 headers base_url
optional
格式：string
测试用例集请求 URL 的公共 host，指定该参数后，test 中的 url 可以只描述 path 部分
headers
optional
格式：dict of dict
request 中 headers 的公共参数，作用域为整个用例集 output
optional
格式：list of string
整个用例集输出的参数列表，可输出的参数包括公共的 variable 和 extract 的参数
在 log-level 为 debug 模式下，会在 terminal 中打印出参数内容" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e2eceec9a6194469b5a22a2fe8718801/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-03T13:28:35+08:00" />
<meta property="article:modified_time" content="2018-05-03T13:28:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">httprunner的用例模板</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>httprunner的用例模板。</p> 
<p>1. 用例用[{"config":{}},"test":{}}]格式。</p> 
<p>2. config 为全局配置变量</p> 
<p></p> 
<h4 style="text-align:left;letter-spacing:-.01em;line-height:1.5;color:rgba(0,0,0,.87);"></h4> 
<h6><span style="font-family:'FangSong_GB2312';font-weight:normal;">name<br>required<br>格式：string<br>测试用例集的名称，在测试报告中将作为标题</span></h6> 
<h6><span style="font-family:'FangSong_GB2312';font-weight:normal;">variables<br>optional<br>格式：list of dict<br>定义的全局变量，作用域为整个用例集</span></h6> 
<h6><span style="font-family:'FangSong_GB2312';font-weight:normal;">parameters<br>optional<br>格式：list of dict<br>全局参数，用于实现数据化驱动，作用域为整个用例集</span></h6> 
<h6><span style="font-family:'FangSong_GB2312';font-weight:normal;">request<br>optional<br>格式：dict of dict<br>request 的公共参数，作用域为整个用例集<br>常用参数包括 base_url 和 headers</span></h6> 
<h6><span style="font-family:'FangSong_GB2312';font-weight:normal;">base_url<br>optional<br>格式：string<br>测试用例集请求 URL 的公共 host，指定该参数后，test 中的 url 可以只描述 path 部分<br></span></h6> 
<h6><span style="font-family:'FangSong_GB2312';font-weight:normal;">headers<br>optional<br>格式：dict of dict<br>request 中 headers 的公共参数，作用域为整个用例集</span></h6> 
<h6><span style="font-weight:normal;"><span style="font-family:'FangSong_GB2312';">output<br>optional<br>格式：list of string<br>整个用例集输出的参数列表，可输出的参数包括公共的 variable 和 extract 的参数<br>在 log-level 为 debug 模式下，会在 terminal 中打印出参数内容</span><br></span></h6> 
<div> 
 <span style="font-weight:normal;"><span style="font-family:SimSun;">3. Test用例参数</span></span> 
</div> 
<div> 
 <span style="font-family:SimSun;">name<br><span style="font-weight:normal;">required</span><br><span style="font-weight:normal;">格式：string</span><br><span style="font-weight:normal;">测试用例的名称，在测试报告中将作为每一项测试的标题</span><br><span style="font-weight:normal;"><br></span></span> 
</div> 
<div> 
 <span style="font-family:SimSun;">request<br><span style="font-weight:normal;">required</span><br><span style="font-weight:normal;">格式：dict of dict</span><br><span style="font-weight:normal;">HTTP 请求的详细内容</span><br><span style="font-weight:normal;">可用参数详见 python-requests 官方文档</span><br><span style="font-weight:normal;"><br></span></span> 
</div> 
<div> 
 <span style="font-family:SimSun;">variables<br><span style="font-weight:normal;">optional</span><br><span style="font-weight:normal;">格式：list of dict</span><br><span style="font-weight:normal;">测试用例中定义的变量，作用域为当前测试用例</span><br><span style="font-weight:normal;"><br></span></span> 
</div> 
<div> 
 <span style="font-family:SimSun;">parameters<br><span style="font-weight:normal;">optional</span><br><span style="font-weight:normal;">格式：list of dict</span><br><span style="font-weight:normal;">测试用例中定义的参数列表，作用域为当前测试用例，用于实现对当前测试用例进行数据化驱动</span><br><span style="font-weight:normal;"><br></span></span> 
</div> 
<div> 
 <span style="font-family:SimSun;">extract<br><span style="font-weight:normal;">optional</span><br><span style="font-weight:normal;">格式：list of dict</span><br><span style="font-weight:normal;">从当前 HTTP 请求的响应结果中提取参数，并保存到参数变量中（例如token），后续测试用例可通过$token的形式进行引用</span><br><span style="font-weight:normal;">支持多种提取方式</span><br><span style="font-weight:normal;">响应结果为 JSON 结构，可采用.运算符的方式，例如headers.Content-Type、content.success；</span><br><span style="font-weight:normal;">响应结果为 text/html 结构，可采用正则表达式的方式，例如blog-motto\"&gt;(.*)&lt;/h2&gt;</span><br><span style="font-weight:normal;">详情可阅读《ApiTestEngine，不再局限于API的测试》</span><br><span style="font-weight:normal;"><br></span></span> 
</div> 
<div> 
 <span style="font-family:SimSun;">validate<br><span style="font-weight:normal;">optional</span><br><span style="font-weight:normal;">格式：list of dict</span><br><span style="font-weight:normal;">测试用例中定义的结果校验项，作用域为当前测试用例，用于实现对当前测试用例运行结果的校验</span><br><span style="font-weight:normal;">支持两种格式：</span><br><span style="font-weight:normal;">{"comparator_name": [check_item, expect_value]}</span><br><span style="font-weight:normal;">{"check": check_item, "comparator": comparator_name, "expect": expect_value}</span><br><span style="font-weight:normal;"><br></span></span> 
</div> 
<div> 
 <span style="font-family:SimSun;">setup_hooks<br><span style="font-weight:normal;">optional</span><br><span style="font-weight:normal;">格式：list of string</span><br><span style="font-weight:normal;">在 HTTP 请求发送前执行 hook 函数，主要用于准备工作</span><br><span style="font-weight:normal;">hook 函数放置于 debugtalk.py 中，并且必须包含三个参数：</span><br><span style="font-weight:normal;">method: 请求方法，e.g. GET, POST, PUT</span><br><span style="font-weight:normal;">url: 请求 URL</span><br><span style="font-weight:normal;">kwargs: request 的参数字典</span><br><span style="font-weight:normal;"><br></span></span> 
</div> 
<div> 
 <span style="font-family:SimSun;">teardown_hooks<br><span style="font-weight:normal;">optional</span><br><span style="font-weight:normal;">格式：list of string</span><br><span style="font-weight:normal;">在 HTTP 请求发送后执行 hook 函数，主要用户测试后的清理工作</span><br><span style="font-weight:normal;">hook 函数放置于 debugtalk.py 中，并且必须包含一个参数：</span><br><span style="font-weight:normal;">resp_obj: requests.Response 实例</span></span> 
 <br> 
</div> 
<div> 
 <span style="font-family:SimSun;"><span style="font-weight:normal;"><br></span></span> 
</div> 
<pre><code class="language-plain">[
    {
        "config": {
            "name": "testset description",
            "variables": [
                {"device_sn": "${gen_random_string(15)}"},
                {"user_id": 1000}
            ],
            "parameters": [
                {"user_id": [2001, 2002, 2003, 2004]}
            ],
            "request": {
                "base_url": "http://172.16.78.72:8301/",
                "headers": {
                    "User-Agent": "python-requests/2.18.4",
                    "device_sn": "$device_sn",
                    "Content-Type": "application/json"
                }
            },
            "output":["token"]
        }
    },
    {
        "test": {
            "name": "login and get token",
            "variables":[],
            "request": {
                "url": "v1/chameleon-user/user/login",
                "headers": {
                    "Content-Type": "application/json"
                },
                "method": "POST",
                "json": {
                    "account":"admin",
                    "password":"zs123YL!"
                }
            },
            "json":{},
            "extract": [
                {"token": "content.token"}
            ],
            "validate": [
                {"eq": ["status_code", 200]},
                {"eq": ["headers.Content-Type", "application/json;charset=UTF-8"]}
            ],
            "setup_hooks":[],
            "teardown_hooks":[]
        }
    }
]</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f2e1b6ff6947e0b04d619bae81cffbd2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">主机怎么加入组播组</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/47dd5a0b465d637c2996b9fec0ab3235/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">docker国内拉取国外docker镜像加速服务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>