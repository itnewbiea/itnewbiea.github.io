<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>介绍Jackson JsonNode和ObjectNode - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="介绍Jackson JsonNode和ObjectNode" />
<meta property="og:description" content="介绍Jackson JsonNode和ObjectNode Jackson JsonNode类，完整路径为com.fasterxml.jackson.databind.JsonNode，是Jackson的json树模型(对象图模型)。Jackson能读JSON至JsonNode实例，写JsonNode到JSON。本文不涉及json序列化或反序列化，主要介绍如何从头构建JsonNode对象图，之后你可以序列化为json。
1. JsonNode vs. ObjectNode The Jackson JsonNode对象不可变，这意味着不能直接构建JsonNode实例的对象图，但你可以创建JsonNode 的子类ObjectNode实例的对象图。作为JsonNode 的子类，ObjectNode可以在任何使用了JsonNode之处使用。后面你会看到如何构建ObjectNode对象图。
2. 操作JsonNode 2.1. 从json中读JsonNode 为了使用Jackson读json为JsonNode，需要创建Jackson ObjectMapper 实例。然后调用其readTree()方法，使用源json作为参数，请看示例：
String json = &#34;{ \&#34;f1\&#34; : \&#34;v1\&#34; } &#34;; ObjectMapper objectMapper = new ObjectMapper(); JsonNode jsonNode = objectMapper.readTree(json); System.out.println(jsonNode.get(&#34;f1&#34;).asText()); 实际项目中ObjectMapper不应每次都创建，比如从spring容器中注入。
2.2. 写JsonNode至json 使用Jackson写JsonNode至json，也需要ObjectMapper对象。调用writeValueAsString()方法，或其他适合你的写方法(writeValue)，请看示例：
ObjectMapper objectMapper = new ObjectMapper(); JsonNode jsonNode = readJsonIntoJsonNode(); String json = objectMapper.writeValueAsString(jsonNode); readJsonIntoJsonNode()方法是我创建用于解析json字符串值JsonNode的方法，为了生成JsonNode去写。该方法抽取内容在本例中不是重点，你仅需了解产生了一个JsonNode对象。重要的是调用了ObjectWriter的writeValueAsString()方法将JsonNode写入JSON字符串。ObjectMapper提供了很多写方法，用于不同目的写操作，读者可以查看相应文档或源码。
2.3. 获取JsonNode 字段 和json对象一样，JsonNode可以多个字段。假设我们解析下面json值JsonNode:
{ &#34;field1&#34; : &#34;value1&#34;, &#34;field2&#34; : 999 } json有两个字段，如果你用jsonNode表示上面json对象，则可以获得其两个字段：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ff38ab0024f7d4c664cbf5d3d29b74e3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-09T17:51:44+08:00" />
<meta property="article:modified_time" content="2019-09-09T17:51:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">介绍Jackson JsonNode和ObjectNode</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Jackson_JsonNodeObjectNode_0"></a>介绍Jackson JsonNode和ObjectNode</h3> 
<p>Jackson JsonNode类，完整路径为com.fasterxml.jackson.databind.JsonNode，是Jackson的json树模型(对象图模型)。Jackson能读JSON至JsonNode实例，写JsonNode到JSON。本文不涉及json序列化或反序列化，主要介绍如何从头构建JsonNode对象图，之后你可以序列化为json。</p> 
<h3><a id="1_JsonNode_vs_ObjectNode_4"></a>1. JsonNode vs. ObjectNode</h3> 
<p>The Jackson JsonNode对象不可变，这意味着不能直接构建JsonNode实例的对象图，但你可以创建JsonNode 的子类ObjectNode实例的对象图。作为JsonNode 的子类，ObjectNode可以在任何使用了JsonNode之处使用。后面你会看到如何构建ObjectNode对象图。</p> 
<h3><a id="2_JsonNode_8"></a>2. 操作JsonNode</h3> 
<h4><a id="21_jsonJsonNode_10"></a>2.1. 从json中读JsonNode</h4> 
<p>为了使用Jackson读json为JsonNode，需要创建Jackson ObjectMapper 实例。然后调用其readTree()方法，使用源json作为参数，请看示例：</p> 
<pre><code>String json = "{ \"f1\" : \"v1\" } ";

ObjectMapper objectMapper = new ObjectMapper();

JsonNode jsonNode = objectMapper.readTree(json);

System.out.println(jsonNode.get("f1").asText());
</code></pre> 
<p>实际项目中ObjectMapper不应每次都创建，比如从spring容器中注入。</p> 
<h4><a id="22_JsonNodejson_24"></a>2.2. 写JsonNode至json</h4> 
<p>使用Jackson写JsonNode至json，也需要ObjectMapper对象。调用writeValueAsString()方法，或其他适合你的写方法(writeValue)，请看示例：</p> 
<pre><code>ObjectMapper objectMapper = new ObjectMapper();

JsonNode jsonNode = readJsonIntoJsonNode();

String json = objectMapper.writeValueAsString(jsonNode);
</code></pre> 
<p>readJsonIntoJsonNode()方法是我创建用于解析json字符串值JsonNode的方法，为了生成JsonNode去写。该方法抽取内容在本例中不是重点，你仅需了解产生了一个JsonNode对象。重要的是调用了ObjectWriter的writeValueAsString()方法将JsonNode写入JSON字符串。ObjectMapper提供了很多写方法，用于不同目的写操作，读者可以查看相应文档或源码。</p> 
<h4><a id="23_JsonNode__36"></a>2.3. 获取JsonNode 字段</h4> 
<p>和json对象一样，JsonNode可以多个字段。假设我们解析下面json值JsonNode:</p> 
<pre><code>{
    "field1" : "value1",
    "field2" : 999
}
</code></pre> 
<p>json有两个字段，如果你用jsonNode表示上面json对象，则可以获得其两个字段：</p> 
<pre><code>JsonNode jsonNode = ... //parse above JSON into a JsonNode

JsonNode field1 = jsonNode.get("field1");
JsonNode field2 = jsonNode.get("field2");
</code></pre> 
<p>注意，即使两个字段是字符串类型，但get方法总是返回JsonNode类型表示字段。</p> 
<h4><a id="24_atJsonNode_57"></a>2.4. 使用at方法获取JsonNode字段</h4> 
<p>Jackson JsonNode有个特殊方法是at()方法。at方法可以在给定JsonNode作为根节点Json对象图中访问任何字段。<br> 示例如下：</p> 
<pre><code>{
  "identification" :  {
        "name" : "James",
        "ssn: "ABC123552"
    }
}
</code></pre> 
<p>如果该json对应的JsonNode可以通过at方法访问其name字段：</p> 
<pre><code>JsonNode nameNode = jsonNode.at("/identification/name");
</code></pre> 
<p>注意at方法的参数：字符串"/identification/name"，这是json路径表达式。路径表达式指定了完整的从JsonNode的根到要访问字段的路径，与文件系统的路径很相似。但需要提醒的是必须以/开头。</p> 
<p>at方法返回要访问的字段的JsonNode，如果没有找到则返回null。为了获得字段的实际值，需要调用其他方法进行转换，下面部分开始讲解。</p> 
<h4><a id="25_JsonNode_79"></a>2.5. 转换JsonNode字段</h4> 
<p>Jackson JsonNode类提供一组方法可以转换字段值至其他数据类型。如long、字符串等。请看示例：</p> 
<pre><code>String f2Str = jsonNode.get("f2").asText();
double f2Dbl = jsonNode.get("f2").asDouble();
int    f2Int = jsonNode.get("f2").asInt();
long   f2Lng = jsonNode.get("f2").asLong();
</code></pre> 
<p>如果f2字段包含值为123456，则其有可能呗转换为字符串，double，int，long类型。</p> 
<h3><a id="3_ObjectNode_91"></a>3. 操作ObjectNode</h3> 
<p>前面提到，JsonNode是不可变的。为了创建JsonNode对象图，你需要改变图中的JsonNode实例，如设置属性值和子JsonNode实例。因为其不可变性，不能直接进行操作，替代的是其子类ObjectNode，下面详细进行说明。</p> 
<h4><a id="31_ObjectNode_95"></a>3.1. 设置ObjectNode属性</h4> 
<p>首先创建ObjectNode实例：</p> 
<pre><code>ObjectMapper objectMapper = new ObjectMapper();

ObjectNode objectNode = objectMapper.createObjectNode();
</code></pre> 
<p>为了设置ObjectNode对象属性，需要调用set方法。传入字段名和JsonNode作为参数。</p> 
<pre><code>ObjectMapper objectMapper = new ObjectMapper();
ObjectNode parentNode = objectMapper.createObjectNode();

JsonNode childNode = readJsonIntoJsonNode();

parentNode.set("child1", childNode);
</code></pre> 
<p>readJsonIntoJsonNode() 方法负责生产一些JsonNode对象，我们准备作为ObjectNode的子节点。</p> 
<h4><a id="32_ObjectNode_118"></a>3.2. 设置ObjectNode属性值为原始数据类型值</h4> 
<p>ObjectNode类也提供一组方法用于设置属性值为原始数据类型。相对于转换原始值为JsonNode再进行设置要简单。请看示例：</p> 
<pre><code>objectNode.put("field1", "value1");
objectNode.put("field2", 123);
objectNode.put("field3", 999.999);
</code></pre> 
<h3><a id="4__128"></a>4. 总结</h3> 
<p>本文介绍了Jackson的JsonNode和ObjectNode两个类，前者是不可变的，一般用于读取。后者可变，一般用于创建Json对象图。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2782a3767c3e68835091cde49a01a18c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ArcGIS统计各面块中点的平均值</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c4d95a89eb5f21d0819b877badc281dd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据更新</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>