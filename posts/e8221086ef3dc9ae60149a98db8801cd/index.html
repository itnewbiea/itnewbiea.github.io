<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于arcpy开发arcgis工具 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于arcpy开发arcgis工具" />
<meta property="og:description" content="基于arcpy开发arcgis工具 1.添加工具2.使用方法2.1批量添加坐标系脚本工具简介工具源码 2.2批量添加字段脚本工具简介工具源码 2.3更新属性表脚本工具简介工具源码 2.4批量连接表脚本工具简介工具源码 3.工具分享4.参考 1.添加工具 1、把压缩包解压缩，把里边的文件放到合适的位置。
2、在arcgis“目录”里点击“连接到文件夹”，将脚本工具所在的文件夹连接到目录里。
3、右击“批量添加坐标系”点击“属性”，进行属性修改。
4、点击“源”，找到之前解压的.py文件添加进来，点击“确认”，完成工具添加。
2.使用方法 2.1批量添加坐标系脚本 工具简介 双击工具，显示操作页面，添加需要添加坐标系的要素类，选择所添加的坐标系，点击确定，完成要素类批量添加坐标系。
工具源码 #Script to Import data to a feature class within a geodatabase import arcpy, os,sys reload(sys) sys.setdefaultencoding(&#39;utf-8&#39;) inputs=arcpy.GetParameterAsText(0) coor_system=arcpy.GetParameterAsText(1) inputlist = inputs.split(&#39;;&#39;) for input in inputlist: arcpy.DefineProjection_management(input, coor_system) 2.2批量添加字段脚本 工具简介 所用到的字段文本编辑格式为
字段名、字段别名（可选）、字段类型、字段长度（可选）、字段中可储存的数字位数（可选）、字段中储存的小数点位数（可选）。中间用英文逗号隔开，（可选）的在不需要时不用写上。
如：
FCODE,TEXT,50,
FSCALE,LONG,
USOURCE,TEXT,50,
UPDATETIME,TEXT,50,
UPDATESTATUS,TEXT,1,
status,TEXT,1,
字段类型有TEXT（文本）、FLOAT（单精度浮点）、DOUBLE（双精度浮点）、SHORT（短整型）、LONG（长整型）、DATE（日期）、BLOB（影像或多媒体）、RASTER（栅格影像）、GUID（GUID values），根据需要进行选择。
工具源码 #Script to Import data to a feature class within a geodatabase import arcpy, os,sys reload(sys) sys." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e8221086ef3dc9ae60149a98db8801cd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-02T16:49:12+08:00" />
<meta property="article:modified_time" content="2022-04-02T16:49:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于arcpy开发arcgis工具</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>基于arcpy开发arcgis工具</h4> 
 <ul><li><a href="#1_1" rel="nofollow">1.添加工具</a></li><li><a href="#2_9" rel="nofollow">2.使用方法</a></li><li><ul><li><a href="#21_10" rel="nofollow">2.1批量添加坐标系脚本</a></li><li><ul><li><a href="#_11" rel="nofollow">工具简介</a></li><li><a href="#_14" rel="nofollow">工具源码</a></li></ul> 
   </li><li><a href="#22_27" rel="nofollow">2.2批量添加字段脚本</a></li><li><ul><li><a href="#_28" rel="nofollow">工具简介</a></li><li><a href="#_39" rel="nofollow">工具源码</a></li></ul> 
   </li><li><a href="#23_63" rel="nofollow">2.3更新属性表脚本</a></li><li><ul><li><a href="#_64" rel="nofollow">工具简介</a></li><li><a href="#_70" rel="nofollow">工具源码</a></li></ul> 
   </li><li><a href="#24_93" rel="nofollow">2.4批量连接表脚本</a></li><li><ul><li><a href="#_94" rel="nofollow">工具简介</a></li><li><a href="#_99" rel="nofollow">工具源码</a></li></ul> 
  </li></ul> 
  </li><li><a href="#3_117" rel="nofollow">3.工具分享</a></li><li><a href="#4_121" rel="nofollow">4.参考</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1_1"></a>1.添加工具</h2> 
<p>1、把压缩包解压缩，把里边的文件放到合适的位置。<br> 2、在arcgis“目录”里点击“连接到文件夹”，将脚本工具所在的文件夹连接到目录里。<br> <img src="https://images2.imgbox.com/d9/3b/iW8zVTaY_o.png" alt="图一"><br> 3、右击“批量添加坐标系”点击“属性”，进行属性修改。<br> <img src="https://images2.imgbox.com/31/7a/yOPKDyox_o.png" alt="图二"><br> 4、点击“源”，找到之前解压的.py文件添加进来，点击“确认”，完成工具添加。<br> <img src="https://images2.imgbox.com/df/3f/B3fTLh79_o.png" alt="图三"></p> 
<h2><a id="2_9"></a>2.使用方法</h2> 
<h3><a id="21_10"></a>2.1批量添加坐标系脚本</h3> 
<h4><a id="_11"></a>工具简介</h4> 
<p>双击工具，显示操作页面，添加需要添加坐标系的要素类，选择所添加的坐标系，点击确定，完成要素类批量添加坐标系。<br> <img src="https://images2.imgbox.com/99/ad/8EmS9Knd_o.png" alt="图四"></p> 
<h4><a id="_14"></a>工具源码</h4> 
<pre><code class="prism language-python"><span class="token comment">#Script to Import data to a feature class within a geodatabase</span>
<span class="token keyword">import</span> arcpy<span class="token punctuation">,</span> os<span class="token punctuation">,</span>sys
<span class="token builtin">reload</span><span class="token punctuation">(</span>sys<span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>setdefaultencoding<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

inputs<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
coor_system<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
inputlist <span class="token operator">=</span> inputs<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token builtin">input</span> <span class="token keyword">in</span> inputlist<span class="token punctuation">:</span>
	arcpy<span class="token punctuation">.</span>DefineProjection_management<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> coor_system<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="22_27"></a>2.2批量添加字段脚本</h3> 
<h4><a id="_28"></a>工具简介</h4> 
<p>所用到的字段文本编辑格式为<br> 字段名、字段别名（可选）、字段类型、字段长度（可选）、字段中可储存的数字位数（可选）、字段中储存的小数点位数（可选）。中间用英文逗号隔开，（可选）的在不需要时不用写上。<br> 如：<br> FCODE,TEXT,50,<br> FSCALE,LONG,<br> USOURCE,TEXT,50,<br> UPDATETIME,TEXT,50,<br> UPDATESTATUS,TEXT,1,<br> status,TEXT,1,<br> 字段类型有TEXT（文本）、FLOAT（单精度浮点）、DOUBLE（双精度浮点）、SHORT（短整型）、LONG（长整型）、DATE（日期）、BLOB（影像或多媒体）、RASTER（栅格影像）、GUID（GUID values），根据需要进行选择。</p> 
<h4><a id="_39"></a>工具源码</h4> 
<pre><code class="prism language-python"><span class="token comment">#Script to Import data to a feature class within a geodatabase</span>
<span class="token keyword">import</span> arcpy<span class="token punctuation">,</span> os<span class="token punctuation">,</span>sys
<span class="token builtin">reload</span><span class="token punctuation">(</span>sys<span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>setdefaultencoding<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

inputs<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
inputlist <span class="token operator">=</span> inputs<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token builtin">input</span> <span class="token keyword">in</span> inputlist<span class="token punctuation">:</span>
    <span class="token comment">#arcpy.env.workspace = os.path.split(input)[0]</span>
    <span class="token comment">#arcpy.env.workspace = input</span>
    f<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span>
    <span class="token comment">#lines=f.readlines()</span>
    line<span class="token operator">=</span>f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">#for line in lines:</span>
    <span class="token keyword">while</span> line<span class="token punctuation">:</span>
        lineList<span class="token operator">=</span>line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
        <span class="token comment">#add field</span>
        arcpy<span class="token punctuation">.</span>AddField_management<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span>field_name<span class="token operator">=</span>lineList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>field_alias<span class="token operator">=</span>lineList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>field_type<span class="token operator">=</span>lineList<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>field_length<span class="token operator">=</span>lineList<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>field_precision<span class="token operator">=</span>lineList<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>field_scale<span class="token operator">=</span>lineList<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        line<span class="token operator">=</span>f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">#close the txt file</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="23_63"></a>2.3更新属性表脚本</h3> 
<h4><a id="_64"></a>工具简介</h4> 
<p>所用到的更新字段文本编辑格式为<br> 更新字段名，更新值，中间用英文逗号隔开。<br> 如：<br> UPDATESTATUS,B<br> status,B</p> 
<h4><a id="_70"></a>工具源码</h4> 
<pre><code class="prism language-python"><span class="token comment">#Script to Import data to a feature class within a geodatabase</span>
<span class="token keyword">import</span> arcpy<span class="token punctuation">,</span> os<span class="token punctuation">,</span>sys
<span class="token builtin">reload</span><span class="token punctuation">(</span>sys<span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>setdefaultencoding<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

inputs<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
f<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span>
lines<span class="token operator">=</span>f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
inputlist <span class="token operator">=</span> inputs<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token builtin">input</span> <span class="token keyword">in</span> inputlist<span class="token punctuation">:</span>
    cursor <span class="token operator">=</span> arcpy<span class="token punctuation">.</span>UpdateCursor<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> my_row <span class="token keyword">in</span> cursor<span class="token punctuation">:</span>
        <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">:</span>
            lineList<span class="token operator">=</span>line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
            my_row<span class="token punctuation">.</span>setValue<span class="token punctuation">(</span>lineList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>lineList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#####14</span>
        cursor<span class="token punctuation">.</span>updateRow<span class="token punctuation">(</span>my_row<span class="token punctuation">)</span>     
    <span class="token keyword">del</span> my_row
    <span class="token comment">#close the txt file</span>
    <span class="token keyword">del</span> cursor
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="24_93"></a>2.4批量连接表脚本</h3> 
<h4><a id="_94"></a>工具简介</h4> 
<p>其中连接字段为字段名中间用英文分号隔开<br> 如：<br> 省代码;温编码<br> 此脚本使用中可能会遇到“没有OID”的问题，原因是为连接的表中没有OBJECTID这一列，此字段为软件自动生成的，无法认为修改，通过将表格导入到gdb中，得到的表自动带有OBJECTID，此脚本便可正常使用。</p> 
<h4><a id="_99"></a>工具源码</h4> 
<pre><code class="prism language-python"><span class="token comment">#Script to Import data to a feature class within a geodatabase</span>
<span class="token keyword">import</span> arcpy<span class="token punctuation">,</span> os<span class="token punctuation">,</span>sys
<span class="token builtin">reload</span><span class="token punctuation">(</span>sys<span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>setdefaultencoding<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

inputs<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
joinTable<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
joinFieldA<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
joinFieldB<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
inputfields<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>GetParameterAsText<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
fieldList <span class="token operator">=</span> inputfields<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span>
<span class="token comment">#fieldList[-1]=fieldList[-1].replace("\n","")</span>
inputlist <span class="token operator">=</span> inputs<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token comment">#13</span>
<span class="token keyword">for</span> <span class="token builtin">input</span> <span class="token keyword">in</span> inputlist<span class="token punctuation">:</span>
    inputsfields<span class="token operator">=</span>arcpy<span class="token punctuation">.</span>JoinField_management <span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> joinFieldA<span class="token punctuation">,</span> joinTable<span class="token punctuation">,</span> joinFieldB<span class="token punctuation">,</span> fieldList<span class="token punctuation">)</span>
</code></pre> 
<h2><a id="3_117"></a>3.工具分享</h2> 
<p>以上所有工具已上传至<a href="https://download.csdn.net/download/QBigBangQ/20200879">基于arcpy开发的arcgis工具</a>，欢迎有兴趣的朋友参考学习。<br> <a href="https://pan.baidu.com/s/1UXYCn4eL-aojQu0GoIqmZQ" rel="nofollow">网盘链接</a><br> 提取码：c6w8</p> 
<h2><a id="4_121"></a>4.参考</h2> 
<p><a href="https://blog.csdn.net/zhoujiaaw/article/details/102755879?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162600344616780261939871%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=162600344616780261939871&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-102755879.first_rank_v2_pc_rank_v29&amp;utm_term=arcpy&amp;spm=1018.2226.3001.4187">ArcPy批量化入门篇</a><br> <a href="https://blog.csdn.net/gislaozhang/article/details/80690090">ArcGIS Python编程案例-创建自定义地理处理工具</a><br> <a href="https://www.cnblogs.com/liweis/p/13905715.html" rel="nofollow">ArcPy批量选择指定属性的要素</a><br> <a href="https://www.cnblogs.com/liweis/p/4252596.html" rel="nofollow">ArcGIS使用Python脚本工具</a><br> <a href="https://www.cnblogs.com/yzhyingcool/p/10274477.html" rel="nofollow">ArcGis Python脚本——批量添加字段</a><br> <a href="https://blog.csdn.net/Geo_Phy/article/details/118399780">使用arcpy进行批量的空间连接</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c52c41a3a2f6e42bf7a60a6288f88d99/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">BiomaRt 将小鼠的ENTREZID转化为人类的ENTREZID（同源ENTREZID转换）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/015153fd847d01edd7e09365b0ce5ad2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">让我们一起携手在编程的路上越走越远吧</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>