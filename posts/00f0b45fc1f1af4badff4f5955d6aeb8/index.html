<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Opencv-Python(一) 读取, 写入图片 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Opencv-Python(一) 读取, 写入图片" />
<meta property="og:description" content="cv2.imread(filename, flags) 这个函数用来读取一副图像. 第一个参数（必须传）可以是图片的相对路径或者绝对路径（如果你第一个参数传错，程序不会报错，但是函数的返回值会是None）. 第二个参数（可选）指定你要以何种方式读取图片，第二参数是个值它可以是： cv2.IMREAD_COLOR：加载一张彩色图片，忽略它的透明度，在不传第二个参数时，它也是默认值. cv2.IMREAD_GRAYSCALE：加载灰度图.cv2.IMREAD_UNCHANGED：加载一张图片包含它的alpha通道(透明度)，就是原图像不做改变的加载. 可以简单的用1，0，-1分别代替三个值. # read in one image img = cv2.imread(&#39;1.jpg&#39;) 将图像文件以数组的形式读入到变量img中。
cv2.imshow(winname, mat) 这个函数用来在制定窗口中显示指定的图像,如果这个窗口不存在,将新建这个窗口. 第一个参数为窗口名称,需要加单引号,每个窗口名称不同. 第二个参数为存储要显示的图片的变量.
# display the image in the window image1 # the window&#39;s size is the size of image and can not be changed cv2.imshow(&#39;image1&#39;, img) 显示刚才读入的图像。
cv2.nameWindow(winname, flags) 用来新建一个窗口. 第一个参数为窗口名称. 第二个参数为窗口类型,具体可以使用的类型如下：
参数值作用cv2.WINDOW_NORMAL用户可以调整窗口的大小，也可以将一个窗口从全屏窗口切换到普通窗口cv2.WINDOW_AUTOSIZE用户不能改变窗口的大小，窗口的大小被所展示的图片所约束cv2.WINDOW_OPENGLopengl支持的窗口cv2.WINDOW_FULLSCREEN将窗口设置为全屏cv2.WINDOW_FREERATIO扩展图片不考虑图片的分辨率cv2.WINDOW_KEEPRATIO扩展图片但考虑图片的分辨率cv2.WINDOW_GUI_EXPANDED带进度条和工具条cv2.WINDOW_GUI_NORMAL旧方法 # open a new window ,the second parameter means ths size of the window can change cv2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/00f0b45fc1f1af4badff4f5955d6aeb8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-12-17T23:46:28+08:00" />
<meta property="article:modified_time" content="2017-12-17T23:46:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Opencv-Python(一) 读取, 写入图片</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5 id="cv2imreadfilename-flags">cv2.imread(filename, flags)</h5> 
<p>这个函数用来读取一副图像. <br> 第一个参数（必须传）可以是图片的相对路径或者绝对路径（如果你第一个参数传错，程序不会报错，但是函数的返回值会是None）. <br> 第二个参数（可选）指定你要以何种方式读取图片，第二参数是个值它可以是： </p> 
<ul><li>cv2.IMREAD_COLOR：加载一张彩色图片，忽略它的透明度，在不传第二个参数时，它也是默认值. </li><li>cv2.IMREAD_GRAYSCALE：加载灰度图.</li><li>cv2.IMREAD_UNCHANGED：加载一张图片包含它的alpha通道(透明度)，就是原图像不做改变的加载. <br> 可以简单的用1，0，-1分别代替三个值.</li></ul> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment"># read in one image</span>
img = cv2.imread(<span class="hljs-string">'1.jpg'</span>)</code></pre> 
<p>将图像文件以数组的形式读入到变量img中。</p> 
<h5 id="cv2imshowwinname-mat">cv2.imshow(winname, mat)</h5> 
<p>这个函数用来在制定窗口中显示指定的图像,如果这个窗口不存在,将新建这个窗口. <br> 第一个参数为窗口名称,需要加单引号,每个窗口名称不同. <br> 第二个参数为存储要显示的图片的变量.</p> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment"># display the image in the window image1</span>
<span class="hljs-comment"># the window's size is the size of image and can not be changed</span>
cv2.imshow(<span class="hljs-string">'image1'</span>, img)</code></pre> 
<p>显示刚才读入的图像。</p> 
<h5 id="cv2namewindowwinname-flags">cv2.nameWindow(winname, flags)</h5> 
<p>用来新建一个窗口. <br> 第一个参数为窗口名称. <br> 第二个参数为窗口类型,具体可以使用的类型如下：</p> 
<table><thead><tr><th>参数值</th><th>作用</th></tr></thead><tbody><tr><td>cv2.WINDOW_NORMAL</td><td>用户可以调整窗口的大小，也可以将一个窗口从全屏窗口切换到普通窗口</td></tr><tr><td>cv2.WINDOW_AUTOSIZE</td><td>用户不能改变窗口的大小，窗口的大小被所展示的图片所约束</td></tr><tr><td>cv2.WINDOW_OPENGL</td><td>opengl支持的窗口</td></tr><tr><td>cv2.WINDOW_FULLSCREEN</td><td>将窗口设置为全屏</td></tr><tr><td>cv2.WINDOW_FREERATIO</td><td>扩展图片不考虑图片的分辨率</td></tr><tr><td>cv2.WINDOW_KEEPRATIO</td><td>扩展图片但考虑图片的分辨率</td></tr><tr><td>cv2.WINDOW_GUI_EXPANDED</td><td>带进度条和工具条</td></tr><tr><td>cv2.WINDOW_GUI_NORMAL</td><td>旧方法</td></tr></tbody></table> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment"># open a new window ,the second parameter means ths size of the window can change</span>
cv2.namedWindow(<span class="hljs-string">'NewWindow'</span>, cv2.WINDOW_NORMAL)
<span class="hljs-comment"># show the image in the opened window</span>
cv2.imshow(<span class="hljs-string">'NewWindow'</span>, img)</code></pre> 
<h5 id="cv2imwritefilename-img-params">cv2.imwrite(filename, img, params)</h5> 
<p>用来将一个图片写入硬盘。 <br> 第一个参数是想要保存的图片的名称， <br> 第二个参数是想要保存的图片存储在的变量， <br> 第三个参数是一些附加参数(可选)。</p> 
<ul><li>对于JPEG，其表示的是图像的质量，用0 - 100的整数表示，默认95;</li><li>对于png ,第三个参数表示的是压缩级别。默认为3. <br> 注意:</li><li>cv2.IMWRITE_JPEG_QUALITY类型为 long ,必须转换成 int</li><li>cv2.IMWRITE_PNG_COMPRESSION, 从0到9 压缩级别越高图像越小。</li></ul> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment"># write the image into the disk</span>
cv2.imwrite(<span class="hljs-string">'image1.jpg'</span>, img1)
cv2.imwrite(<span class="hljs-string">'1.png'</span>,img, [int( cv2.IMWRITE_JPEG_QUALITY), <span class="hljs-number">95</span>])
cv2.imwrite(<span class="hljs-string">'1.png'</span>,img, [int(cv2.IMWRITE_PNG_COMPRESSION), <span class="hljs-number">9</span>])</code></pre> 
<p>将数组img1中保存的图片存入image1.jpg中.</p> 
<h5 id="cv2destoryallwindows">cv2.destoryAllWindows()</h5> 
<p>代表销毁所有Opencv打开的窗口. <br> cv2.destoryWindow(window’s name) <br> 用来销毁指定的窗口</p> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment"># destory one window</span>
cv2.destoryWindow(newWindow)
<span class="hljs-comment"># destory all opened windows</span>
cv2.destoryAllWindows()</code></pre> 
<h5 id="需要注意的点">需要注意的点</h5> 
<p><strong>Opencv中读入彩色图像之后默认的通道顺序是：BGR</strong>（历史遗留问题） <br> <strong>很多日常使用的图像处理工具默认是RGB（例如matplotlib.pyplot），如果直接将Opencv读入的数组放到其它工具中进行处理很容易出错，一定要注意这个细节</strong> <br> 下面给出一些将Opencv读入的BGR图像转换为RGB图像的方法：</p> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment"># pay attention opencv use the BGR color model normally we use RGB color model</span>
<span class="hljs-comment"># some ways of change BGR into RGB</span>
<span class="hljs-comment"># img is the matrix created by Opencv using BGR model</span>
<span class="hljs-comment"># other imgs are convert to RBG model</span>
b, g, r = cv2.split(img)
img2 = cv2.merge([r, g, b])
img3 = img[:, :, ::-<span class="hljs-number">1</span>]
img4 = img[..., ::-<span class="hljs-number">1</span>]
img5 = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</code></pre> 
<p>使用工具展示图像的时候一定要注意其使用的通道，不然显示的图像可能会出错。使用matplotlib.pyplot展示刚才那些处理后和没处理的图像结果如下：</p> 
<pre class="prettyprint"><code class="language-python hljs ">plt.subplot(<span class="hljs-number">231</span>); plt.imshow(img)    <span class="hljs-comment"># expects distorted color</span>
plt.subplot(<span class="hljs-number">232</span>); plt.imshow(img2)   <span class="hljs-comment"># expect true color</span>
plt.subplot(<span class="hljs-number">233</span>); plt.imshow(img3)   <span class="hljs-comment"># expect true color</span>
plt.subplot(<span class="hljs-number">234</span>); plt.imshow(img4)   <span class="hljs-comment"># expect true color</span>
plt.subplot(<span class="hljs-number">235</span>); plt.imshow(img5)   <span class="hljs-comment"># expect true color</span>
plt.show()</code></pre> 
<p><img src="https://images2.imgbox.com/d4/e2/exR5ikgP_o.png" alt="这里写图片描述" title=""></p> 
<h5 id="完整过程使用的全部代码如下">完整过程，使用的全部代码如下。</h5> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-comment"># -*- coding: utf-8 -*-</span>
<span class="hljs-comment"># =================================================================</span>
<span class="hljs-comment"># windows10, PyCharm, anaconda2, python 2.7.13, opencv 2.4.13</span>
<span class="hljs-comment"># 2017-12-17</span>
<span class="hljs-comment"># powered by tuzixini</span>
<span class="hljs-comment"># attention: you might need install the encoder fist, like x264vfw</span>
<span class="hljs-comment"># =================================================================</span>

<span class="hljs-keyword">import</span> cv2  <span class="hljs-comment"># import opencv</span>
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-comment"># read in one image</span>
img = cv2.imread(<span class="hljs-string">'1.jpg'</span>)
<span class="hljs-comment"># display the image in the window image1</span>
<span class="hljs-comment"># the window's size is the size of image and can not be changed</span>
cv2.imshow(<span class="hljs-string">'image1'</span>, img)
<span class="hljs-comment"># open a new window ,the second parameter means ths size of the window can change</span>
cv2.namedWindow(<span class="hljs-string">'NewWindow'</span>, cv2.WINDOW_NORMAL)
<span class="hljs-comment"># show the image in the opened window</span>
cv2.imshow(<span class="hljs-string">'NewWindow'</span>, img)
<span class="hljs-comment"># processing the image</span>
img1 = img + <span class="hljs-number">100</span>
cv2.imshow(<span class="hljs-string">'newImage'</span>, img1)
<span class="hljs-comment"># write the image into the disk</span>
cv2.imwrite(<span class="hljs-string">'image1.jpg'</span>, img1)
<span class="hljs-comment"># pay attention opencv use the BGR color model normally we use RGB color model</span>
<span class="hljs-comment"># some ways of change BGR into RGB</span>
<span class="hljs-comment"># img is the matrix created by Opencv using BGR model</span>
<span class="hljs-comment"># other imgs are convert to RBG model</span>
b, g, r = cv2.split(img)
img2 = cv2.merge([r, g, b])
img3 = img[:, :, ::-<span class="hljs-number">1</span>]
img4 = img[..., ::-<span class="hljs-number">1</span>]
img5 = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

plt.subplot(<span class="hljs-number">231</span>); plt.imshow(img)    <span class="hljs-comment"># expects distorted color</span>
plt.subplot(<span class="hljs-number">232</span>); plt.imshow(img2)   <span class="hljs-comment"># expect true color</span>
plt.subplot(<span class="hljs-number">233</span>); plt.imshow(img3)   <span class="hljs-comment"># expect true color</span>
plt.subplot(<span class="hljs-number">234</span>); plt.imshow(img4)   <span class="hljs-comment"># expect true color</span>
plt.subplot(<span class="hljs-number">235</span>); plt.imshow(img5)   <span class="hljs-comment"># expect true color</span>
plt.show()
<span class="hljs-comment"># wait one key input and close the opened opencv windows</span>
cv2.waitKey()
cv2.destroyAllWindows()

</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5e1e48f63a83595b656e86ebf512f5f4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">锁存器（74HCT573）使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6a4446bf35e438d33d654aca2b1e58fd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Cloud云架构 - SSO单点登录之OAuth2.0登录认证(1)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>