<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于python的信用卡评分模型 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于python的信用卡评分模型" />
<meta property="og:description" content="基于python的信用卡评分模型
1. 项目背景介绍 1.1 信用风险和评分卡模型的基本概念 信用风险指的是交易对手未能履行约定合同中的义务造成经济损失的风险，即受信人不能履行还本付息的责任而使授信人的预期收益与实际收益发生偏离的可能性，它是金融风险的主要类型。
借贷场景中的评分卡是一种以分数的形式来衡量风险几率的一种手段，也是对未来一段时间内违约、逾期、失联概率的预测。一般来说，分数越高，风险越小。
信用风险计量体系包括主体评级模型和债项评级两部分。其中主体评级模型包含以下四个方面内容：
申请者评级模型：主要应用于相关融资类业务中新用户的主体评级，适用于个人及机构融资主体。位于贷前准入环节。行为评级模型：主要用于相关融资类业务中存量客户在续存期内的管理，如对客户可能出现的逾期、延期等行为进行预测，仅适用于个人融资主体。 催收评级模型：主要应用于相关融资类业务中存量客户是否需要催收的预测管理，仅适用于个人融资主体。 欺诈评级模型：主要应用于相关融资类业务中新客户可能存在的欺诈行为的预测管理，适用于个人和机构融资主体。 在贷前准入环节里面。 本项目主要针对申请者评分模型。
1.2 数据来源 本项目数据来源于kaggle竞赛Give Me Some Credit。
2. 信用卡评分模型开发 模型的构建主要包含以下几大部分内容：数据准备及数据预处理、变量选择、模型构建、模型验证、模型评估、模型部署、模型监控几大部分。下面一一讲述。
2.1 数据准备及数据预处理 2.1.1 获取数据 数据获取包括存量客户包括获取存量客户及潜在客户的数据。存量客户是指已经在证券公司开展相关融资类业务的客户，包括个人客户和机构客户；潜在客户是指未来拟在证券公司开展相关融资类业务的客户，主要包括机构客户，这也是解决证券业样本较少的常用方法，这些潜在机构客户包括上市公司、公开发行债券的发债主体、新三板上市公司、区域股权交易中心挂牌公司、非标融资机构等。
首先我们来观察现有的数据及指标。
本项目数据来源于kaggle竞赛Give Me Some Credit。其中训练数据共计15万条。
变量名
描述
类型
标号
SeriousDlqin2yrs
超过90天或更糟的逾期拖欠
Y/N
Y
RevolvingUtilizationOfUnsecuredLines
贷款以及信用卡可用额度与总额度比例
百分比
x0
age
借款人当时的年龄
整型
x1
NumberOfTime30-59DaysPastDueNotWorse
35-59天逾期但不糟糕次数
整型
x2
DebtRatio
负债比率
百分比
x3
MonthlyIncome
月收入
real
x4
NumberOfOpenCreditLinesAndLoans
开放式信贷和贷款数量，开放式贷款（分期付款如汽车贷款或抵押贷款）和信贷（如信用卡）的数量
整型
x5
NumberOfTimes90DaysLate
90天逾期次数：借款者有90天或更高逾期的次数
整型
x6
NumberRealEstateLoansOrLines" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/99583da6e87a657c3777a8b65f6b05c0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-24T01:25:32+08:00" />
<meta property="article:modified_time" content="2018-05-24T01:25:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于python的信用卡评分模型</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-family:'KaiTi_GB2312';">基于python的信用卡评分模型</span></p> 
<h2><span style="font-family:'KaiTi_GB2312';">1. 项目背景介绍</span></h2> 
<h3><span style="font-family:'KaiTi_GB2312';">1.1 信用风险和评分卡模型的基本概念</span></h3> 
<p style="text-align:left;"><span style="font-family:'KaiTi_GB2312';">       信用风险指的是交易对手未能履行约定合同中的义务造成经济损失的风险，即受信人不能履行还本付息的责任而使授信人的预期收益与实际收益发生偏离的可能性，它是金融风险的主要类型。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">      借贷场景中的评分卡是一种以分数的形式来衡量风险几率的一种手段，也是对未来一段时间内违约、逾期、失联概率的预测。一般来说，分数越高，风险越小。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">      信用风险计量体系包括主体评级模型和债项评级两部分。其中主体评级模型包含以下四个方面内容：</span></p> 
<p></p> 
<ul><li><span style="font-family:'KaiTi_GB2312';">申请者评级模型：主要应用于相关融资类业务中新用户的主体评级，适用于个人及机构融资主体。位于贷前准入环节。</span></li><li><span style="font-family:'KaiTi_GB2312';">行为评级模型：主要用于相关融资类业务中存量客户在续存期内的管理，如对客户可能出现的逾期、延期等行为进行预测，仅适用于个人融资主体。 </span></li><li><span style="font-family:'KaiTi_GB2312';">催收评级模型：主要应用于相关融资类业务中存量客户是否需要催收的预测管理，仅适用于个人融资主体。 </span></li><li><span style="font-family:'KaiTi_GB2312';">欺诈评级模型：主要应用于相关融资类业务中新客户可能存在的欺诈行为的预测管理，适用于个人和机构融资主体。 在贷前准入环节里面。</span></li></ul> 
<p><span style="font-family:'KaiTi_GB2312';">       本项目主要针对申请者评分模型。</span></p> 
<h3><span style="font-family:'KaiTi_GB2312';">1.2 数据来源</span></h3> 
<p><span style="font-family:'KaiTi_GB2312';">         本项目数据来源于kaggle竞赛<a href="https://link.jianshu.com/?t=https://www.kaggle.com/c/GiveMeSomeCredit/data" rel="nofollow"><span style="color:rgb(49,148,208);background:rgb(255,255,255);">Give Me Some Credit</span></a>。</span></p> 
<h2><span style="font-family:'KaiTi_GB2312';">2. 信用卡评分模型开发</span></h2> 
<p><span style="font-family:'KaiTi_GB2312';">      模型的构建主要包含以下几大部分内容：数据准备及数据预处理、变量选择、模型构建、模型验证、模型评估、模型部署、模型监控几大部分。下面一一讲述。</span></p> 
<h3><span style="font-family:'KaiTi_GB2312';">2.1 数据准备及数据预处理</span></h3> 
<h4><span style="font-family:'KaiTi_GB2312';">2.1.1 获取数据</span></h4> 
<p><span style="font-family:'KaiTi_GB2312';">       数据获取包括存量客户包括获取存量客户及潜在客户的数据。存量客户是指已经在证券公司开展相关融资类业务的客户，包括个人客户和机构客户；潜在客户是指未来拟在证券公司开展相关融资类业务的客户，主要包括机构客户，这也是解决证券业样本较少的常用方法，这些潜在机构客户包括上市公司、公开发行债券的发债主体、新三板上市公司、区域股权交易中心挂牌公司、非标融资机构等。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">       首先我们来观察现有的数据及指标。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">       本项目数据来源于kaggle竞赛<a href="https://link.jianshu.com/?t=https://www.kaggle.com/c/GiveMeSomeCredit/data" rel="nofollow"><span style="color:rgb(49,148,208);background:rgb(255,255,255);">Give Me Some Credit</span></a>。其中训练数据共计15万条。</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td><p><span style="font-family:'KaiTi_GB2312';">变量名</span></p></td><td><p><span style="font-family:'KaiTi_GB2312';">描述</span></p></td><td><p><span style="font-family:'KaiTi_GB2312';">类型</span></p></td><td><p><span style="font-family:'KaiTi_GB2312';">标号</span></p></td></tr><tr><td><p><strong><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">SeriousDlqin2yrs</span></span></strong></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">超过90天或更糟的逾期拖欠</span></span></p></td><td><p><span style="font-family:'KaiTi_GB2312';">Y/N</span></p></td><td><p><span style="font-family:'KaiTi_GB2312';">Y</span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">RevolvingUtilizationOfUnsecuredLines</span></span></p><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';"> </span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">贷款以及信用卡可用额度与总额度比例</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">百分比</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x0</span></span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">age</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">借款人当时的年龄</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">整型</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x1</span></span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">NumberOfTime30-59DaysPastDueNotWorse</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">35-59天逾期但不糟糕次数</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">整型</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x2</span></span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">DebtRatio</span></span></p><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';"> </span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">负债比率</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">百分比</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x3</span></span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">MonthlyIncome</span></span></p></td><td> 
    <table border="1" cellspacing="0"><tbody><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">月收入</span></span></p></td></tr></tbody></table><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';"> </span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">real</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x4</span></span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">NumberOfOpenCreditLinesAndLoans</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">开放式信贷和贷款数量，开放式贷款（分期付款如汽车贷款或抵押贷款）和信贷（如信用卡）的数量</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">整型</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x5</span></span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">NumberOfTimes90DaysLate</span></span></p></td><td> 
    <table border="1" cellspacing="0"><tbody><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">90天逾期次数：借款者有90天或更高逾期的次数</span></span></p></td></tr></tbody></table><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';"> </span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">整型</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x6</span></span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">NumberRealEstateLoansOrLines</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">不动产贷款或额度数量：抵押贷款和不动产放款包括房屋净值信贷额度</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">整型</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x7</span></span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">NumberOfTime60-89DaysPastDueNotWorse</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">60-89天逾期但不糟糕次数：借款人在在过去两年内有60-89天逾期还款但不糟糕的次数</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">整型</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x8</span></span></p></td></tr><tr><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">NumberOfDependents</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">家属数量：不包括本人在内的家属数量</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">整型</span></span></p></td><td><p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">x9</span></span></p></td></tr></tbody></table> 
<p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';"><br></span></span></p> 
<h4><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">2.1.2 数据预处理</span></span></h4> 
<p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">       通过python里的describe（）函数可以浏览整份数据的大致情况：</span></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">如下图：</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/99/07/fAePh2UA_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 2.1</span></p> 
<h5><span style="font-family:'KaiTi_GB2312';"><span style="color:rgb(0,0,0);">A. </span><span style="color:rgb(0,0,0);">缺失值处理</span></span></h5> 
<p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">       变量中如果有缺失值，针对缺失值有四种情况：</span></span></p> 
<p></p> 
<ul><li><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">缺省值极多：若缺省值样本占总数比例极高，直接舍弃，因为作为特征加入反而会引入噪声值。</span></span></li><li><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">非连续特征缺省值适中：如果缺值的样本适中，而该属性非连续值特征属性，就把NaN作为一个新类别，加入到类别特征中。</span></span></li><li><span style="font-family:'KaiTi_GB2312';">连续特征缺省值适中：如果缺值的样本适中，考虑给定一个<span style="color:rgb(0,0,0);">step，然后离散化，将NaN作为一个type加入到属性类目中。</span></span></li><li><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">缺省值较少：考虑利用填充的办法进行处理。其中有均值、众数、中位数填充；用sklearn里的RandomForest模型去拟合数据样本训练模型，然后去填充缺失值；拉格朗日插值法。</span></span></li></ul> 
<p><span style="font-family:'KaiTi_GB2312';">     可以看出<span style="color:rgb(0,0,0);">MonthlyIncome</span><span style="color:rgb(0,0,0);">（月收入）及</span><span style="color:rgb(0,0,0);">NumberOfDependents</span><span style="color:rgb(0,0,0);">（家属数量）两个变量出现了缺失值。由于</span><span style="color:rgb(0,0,0);">MonthlyIncome</span><span style="color:rgb(0,0,0);">缺失值达到</span><span style="color:rgb(0,0,0);">29731条数据，比例较大，因此不能直接将缺失值删除，选择随机森林法。而</span><span style="color:rgb(0,0,0);">NumberOfDependents</span><span style="color:rgb(0,0,0);">的缺失较少，对数据影响不大，因此直接删除。</span></span></p> 
<p><span style="font-family:'KaiTi_GB2312';"><span style="color:rgb(0,0,0);">       使用</span><span style="color:rgb(0,0,0);">dropna（）函数删除空值，使用drop_duplicates()删除重复值。</span></span></p> 
<p><span style="font-family:'KaiTi_GB2312';"><span style="color:rgb(0,0,0);"><img src="https://images2.imgbox.com/f9/d0/hT47Rh3N_o.png" style="margin-bottom:0px;font-family:'KaiTi_GB2312';" alt=""><br></span></span></p> 
<h5><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">B.异常值处理</span></span></h5> 
<p><span style="font-family:'KaiTi_GB2312';"><span style="background:rgb(255,255,255);">      缺失值处理完毕后，我们还需要进行异常值处理。异常值是指明显偏离大多数抽样数据的数值，比如个人客户的年龄大于100</span><span style="background:rgb(255,255,255);">或小于</span><span style="background:rgb(255,255,255);">0</span><span style="background:rgb(255,255,255);">时，通常认为该值为异常值。找出样本总体中的异常值，通常采用离群值检测的方法。 离群值检测的方法有单变量离群值检测、局部离群值因子检测、基于聚类方法的离群值检测等方法。 </span><span style="color:rgb(0,0,0);background:rgb(255,255,255);"> </span></span></p> 
<p><span style="color:rgb(0,0,0);background:rgb(255,255,255);"><span style="font-family:'KaiTi_GB2312';">       在本数据集中，采用单变量离群值检测来判断异常值，采用箱线图。</span></span></p> 
<p><span style="color:rgb(0,0,0);background:rgb(255,255,255);"><span style="font-family:'KaiTi_GB2312';">       对于age变量而言，我们认为大于100岁小于等于0岁的为异常值，由箱线图可知，异常值样本不多，故直接删除。</span></span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/08/cb/RvRDTxJ2_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 2.2</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">       对于RevolvingUtilizationOfUnsecuredLines（可用额度比值）及DebtRatio（负债率）而言，箱线图如下图：</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"><img src="https://images2.imgbox.com/5e/c1/vZBoYalj_o.png" alt=""><br></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 2.3</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">      因为上述两变量的数值型为百分比，故大于1的值全部删除。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">      对于变量x2（逾期30-59天笔数）、x6（逾期90天笔数）、x8（逾期60-89天笔数做箱线图，由图可知，有两异常值点，数值为96、98，删除。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"></span></p> 
<div> 
 <div> 
  <img src="https://images2.imgbox.com/8e/b1/Ys6TDDZS_o.png" alt=""> 
  <br> 
 </div> 
 <br> 
</div>图 2.4 
<h3><span style="font-family:'KaiTi_GB2312';">2.2 探索数据</span></h3> 
<p><span style="font-family:'KaiTi_GB2312';">      探索数据主要是为了分析各变量对输出结果的影响，在本项目中，主要关注的是违约客户与各变量间的关系。</span></p> 
<h4><span style="font-family:'KaiTi_GB2312';">2.2.1 单变量分析</span></h4> 
<p><span style="font-family:'KaiTi_GB2312';">      首先来观察好坏客户的整体情况。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">      <img src="https://images2.imgbox.com/34/5a/prJITKE7_o.png" alt=""></span></p> 
<p style="text-align:left;"><span style="font-family:'KaiTi_GB2312';">       图 2.5</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">        再看年龄对违约客户率的影响，由下图可知，违约客户率随着年龄增大而逐步下降。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/32/bf/scPaMzKC_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 2.6</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">     现在再来分析月收入对违约客户数量的影响，将月收入划分为以下几个级别:[0,5000]，[5000,10000], [10000,15000],[15000,20000],[20000,100000].由下面两图可知，在20000收入之前随着收入增加，违约客户率递减，而当月收入大于20000后，违约客户率又随收入增高发生递增。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/92/fe/PJdBgXUc_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 2.7</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/01/7f/klZdkgQa_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 2.8</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">       接下来我们再分析<span style="color:rgb(0,0,0);">NumberOfDependents</span><span style="color:rgb(0,0,0);">（家属数量）与最终输出结果之间的关系。可以看出随着家庭人口增多，违约客户率呈现递增的态势。</span></span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/7b/bd/hNRTY6JW_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 2.9</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/fc/80/g9sSUlOp_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 2.10</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">     观察逾期30-59天次数与违约客户率之间的关系，可以看出随着违约次数增加，违约客户率呈现递增的态势。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/dc/4b/A4gLc05o_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 2.11</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">      对数据的单变量分析就暂时处理到这里，剩余的变量也采取同样的方式进行分析。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> </span></p> 
<h4><span style="font-family:'KaiTi_GB2312';">2.2.2 多变量分析</span></h4> 
<p><span style="font-family:'KaiTi_GB2312';">      多变量分析主要用于分析变量之间的相关的程度，python中可采用corr（）函数计算各变量间的相关性。由图11知，各变量间相关性较小，不存在共线性可能。</span></p> 
<p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">     </span></span></p> 
<p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/42/b6/b8orDIBR_o.png" alt=""></span></span></p> 
<p><span style="color:rgb(0,0,0);"><span style="font-family:'KaiTi_GB2312';">图 2.12</span></span></p> 
<h2><span style="font-family:'KaiTi_GB2312';">3. 构建模型</span></h2> 
<h3><span style="font-family:'KaiTi_GB2312';">3.1特征选择</span></h3> 
<p><span style="font-family:'KaiTi_GB2312';">      特征选择非常重要，好的特征能够构造出较好的模型，<span style="color:rgb(47,47,47);background:rgb(255,255,255);">至于Python的变量选择代码实现可以参考</span><a href="https://link.jianshu.com/?t=https://www.cnblogs.com/hhh5460/p/5186226.html" rel="nofollow"><span style="color:rgb(49,148,208);background:rgb(255,255,255);">结合Scikit-learn介绍几种常用的特征选择方法</span></a><span style="color:rgb(47,47,47);background:rgb(255,255,255);">。</span><span style="color:rgb(47,47,47);background:rgb(255,255,255);">在此，我们采用信用卡评分模型常用的</span><span style="color:rgb(47,47,47);background:rgb(255,255,255);">IV值筛选。具体的IV值及WOE计算方法在下面这篇博文中有详细解释，此处就不再赘述。</span></span></p> 
<h4><span style="font-family:'KaiTi_GB2312';"><span style="color:rgb(47,47,47);background:rgb(255,255,255);">3.1.1 </span>特征分箱</span></h4> 
<p><span style="font-family:'KaiTi_GB2312';">      特征分箱指的是将连续变量离散化或将多状态的离散变量合并成少状态。离散特征的增加和减少都很容易，易于模型的快速迭代，离散化后的特征对异常数据有很强的鲁棒性，能够减少未离散化之前异常值对模型的干扰，同时离散化后可以进行特征交叉。此外本文所选的模型算法为逻辑回归，逻辑回归属于广义线性模型，表达能力受限；单变量离散化为N个后，每个变量有单独的权重，相当于为模型引入非线性，提升模型表达能力，加大拟合，同时也降低了模型过拟合的风险。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">       特征分箱常用的有以下几种方法：有监督的有Best-KS，ChiMerge（卡分分箱），无监督的包括等频、等距、聚类。根据数据特征，针对不同数据采用不同分箱方式。代码如下：</span></p> 
<p><img src="https://images2.imgbox.com/86/4d/U40z8jtU_o.png" alt=""><br></p> 
<h4><span style="font-family:'KaiTi_GB2312';">3.1.2 WOE值计算</span></h4> 
<p><span style="font-family:'KaiTi_GB2312';">       定义WOE值并计算。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/fa/f8/OqLG4g0m_o.png" alt=""></span></p> 
<p><br></p> 
<h4><span style="font-family:'KaiTi_GB2312';">3.1.3 计算IV值</span></h4> 
<p><span style="font-family:'KaiTi_GB2312';"><span style="color:rgb(0,0,0);background:rgb(255,255,255);">      IV的全称是Information Value，中文意思是信息价值，或者信息量。</span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">图</span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">13为各变量的IV值。我们定义IV值低于0.2的特征为预测能力较弱或无关特征，因此将</span><span style="color:rgb(0,0,0);">DebtRatio</span><span style="color:rgb(0,0,0);">等五个变量删除。</span></span></p> 
<p><span style="color:rgb(0,0,0);background:rgb(255,255,255);"><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/1f/c1/9Zrah3H8_o.png" alt=""></span></span></p> 
<p><span style="color:rgb(0,0,0);background:rgb(255,255,255);"><span style="font-family:'KaiTi_GB2312';">图 3.1</span></span></p> 
<h3><span style="font-family:'KaiTi_GB2312';"><span style="color:rgb(0,0,0);background:rgb(255,255,255);">3.2 </span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">构造模型</span></span></h3> 
<h4><span style="font-family:'KaiTi_GB2312';"><span style="color:rgb(0,0,0);background:rgb(255,255,255);">3.2.1 </span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">WOE值替换</span></span></h4> 
<p><span style="color:rgb(0,0,0);background:rgb(255,255,255);"><span style="font-family:'KaiTi_GB2312';">        将筛选后的特征变量进行WOE转换，目的是减少逻辑回归的自变量处理量。</span></span></p> 
<p><img src="https://images2.imgbox.com/84/5f/iDL1kAS9_o.png" alt=""><span style="font-family:'KaiTi_GB2312';">      </span></p> 
<h4><span style="font-family:'KaiTi_GB2312';">3.2.2 LR建模</span></h4> 
<p><span style="font-family:'KaiTi_GB2312';">      采用sklearn里的linear_model 中的LogisticRegression()来构建模型。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/a7/89/r3qLo7XY_o.png" alt=""></span></p> 
<h2><span style="font-family:'KaiTi_GB2312';">4. 模型检验</span></h2> 
<p><span style="font-family:'KaiTi_GB2312';">利用测试集进行测试。看到ROC如下图：</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/41/22/rWHlZYUH_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 4.1</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">        从上图可知，AUC值为0.85，说明该模型的预测效果还是不错的，正确率较高。</span></p> 
<h2><span style="font-family:'KaiTi_GB2312';">5. 信用评分</span></h2> 
<p><span style="font-family:'KaiTi_GB2312';">      上面的模型的输出结果可以为每个客户的客户类别(好客户还是违约客户),也可以说出每个客户是好客户/违约客户对应的概率值。这种结果看起来不直观，我们需要把LR模型的结果值转化为对应的分数(0-999分)。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> </span></p> 
<p><img src="https://images2.imgbox.com/c3/be/LEGH1fR4_o.png" alt=""><br></p> 
<p><span style="font-family:'KaiTi_GB2312';"> </span></p> 
<p><span style="font-family:'KaiTi_GB2312';">根据资料查得：</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">a=log（p_good/P_bad）</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">Score = offset + factor * log(odds)</span></p> 
<p><br></p> 
<p><img src="https://images2.imgbox.com/be/6f/ssU1CkTp_o.png" alt=""><br></p> 
<p><span style="font-family:'KaiTi_GB2312';"> </span></p> 
<p><span style="font-family:'KaiTi_GB2312';">      得出各对应特征分组分数为：</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> <img src="https://images2.imgbox.com/0f/3f/zo6iXGkT_o.png" alt=""></span></p> 
<p><span style="font-family:'KaiTi_GB2312';">图 5.1</span></p> 
<p><span style="font-family:'KaiTi_GB2312';">       在基础分数上对对应的分组分数加减，得出对应的评分，评分越高则违约风险越高。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"> </span></p> 
<h2><span style="font-family:'KaiTi_GB2312';">6. 总结</span></h2> 
<p></p> 
<p><span style="font-family:'KaiTi_GB2312';">       本文通过对kaggle上的<a href="https://link.jianshu.com?t=https://www.kaggle.com/c/GiveMeSomeCredit/data" rel="nofollow"><u><span style="color:rgb(0,0,255);">Give Me Some Credit</span></u></a>数据的挖掘分析，结合信用评分卡的建立原理，从数据的预处理、变量选择、建模分析到创建信用评分，创建了一个简单的信用评分系统。本项目还有许多不足之处，比如分箱应当使用最优分箱或卡方分箱，减少人为分箱的随机性，此外模型采用的是逻辑回归算法，还可以多多尝试其他模型。</span></p> 
<p><span style="font-family:'KaiTi_GB2312';"><br></span></p> 
<h2>7.  参考文献</h2> 
<p></p> 
<div> 
 <a href="https://link.jianshu.com?t=http://blog.csdn.net/huobanjishijian/article/details/51611860">信用卡评分模型</a> 
 <br> 
 <a href="https://link.jianshu.com?t=http://blog.csdn.net/lll1528238733/article/details/76602006">信用标准评分卡模型开发及实现</a> 
 <br> 
 <a href="https://www.jianshu.com/p/2acb9bf6ac0b" rel="nofollow">Python异常值处理与检测</a> 
 <br> 
 <a href="https://link.jianshu.com?t=https://www.cnblogs.com/hhh5460/p/5186226.html" rel="nofollow">结合Scikit-learn介绍几种常用的特征选择方法</a> 
</div> 
<a href="https://cloud.tencent.com/developer/article/1092230" rel="nofollow">https://cloud.tencent.com/developer/article/1092230</a> 
<br> 
<br> 
<br> 
<p><br></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/41fefb91b8e977e0bfa4758b6a543442/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql 8.0.11 用Navicat远程无法连接 解决之道</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/47679a875b5eea7f0ad8a2b802ef559f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java面试题10(如何取到set集合的第一个元素)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>