<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>附和导线平差程序（by C#） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="附和导线平差程序（by C#）" />
<meta property="og:description" content="附和导线平差程序（by C#） 内容简介过程简介程序源码矩阵类Matrix点类Point角类Angle主程序 更新 内容简介 本文主要内容包括本人编写附和导线平差程序的过程及附和导线平差程序源代码，在此记录，以供有兴趣的朋友参考学习。
过程简介 最近学习《C#（注：读音为C sharp）程序设计》这门课时，老师布置了一个设计导线平差程序的作业，一直在学python，好久没用类C语言了，很是头大，好在参考博主：流浪猪头拯救地球的一系列文章，终于是将程序编写出来。
（2020/12/7:初始版本优点是方便上手，缺点是还有很多地方可以优化，下一版本将在不久后更新，coding……）
程序源码 附和导线平差C#程序工程文件及用于测试的文本已上传至附和导线平差C#程序。
此程序一共用到三个类库，分别是矩阵类Matrix、点类Point、角类Angle。
矩阵类Matrix 此类库代码量过大，无法放入博文中，有兴趣的话可以从C#矩阵类库下载。
点类Point using System; using System.IO; using System.Collections.Generic; using System.Linq; using System.Text; using System.Drawing;//与PointF 联系起来了 namespace work //这里改成和您的namespace 名字一样即可 { public class Point {//Define fields public string name; public double x; //coordinate public double y; public double z; public string Name { get { return name; } set { name = value; } } public double X { get { return x; } set { x = value; } } public double Y { get { return y; } set { y = value; } } public double Z { get { return z; } set { z = value; } } //The constructor public Point(double x = 0, double y = 0, double z = 0, string name = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4e88bf952d56e512d23ff0044492a120/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-14T22:00:23+08:00" />
<meta property="article:modified_time" content="2023-01-14T22:00:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">附和导线平差程序（by C#）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>附和导线平差程序（by C#）</h4> 
 <ul><li><a href="#_1" rel="nofollow">内容简介</a></li><li><a href="#_3" rel="nofollow">过程简介</a></li><li><a href="#_7" rel="nofollow">程序源码</a></li><li><ul><li><a href="#Matrix_10" rel="nofollow">矩阵类Matrix</a></li><li><a href="#Point_12" rel="nofollow">点类Point</a></li><li><a href="#Angle_198" rel="nofollow">角类Angle</a></li><li><a href="#_384" rel="nofollow">主程序</a></li></ul> 
  </li><li><a href="#_661" rel="nofollow">更新</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>内容简介</h2> 
<p>本文主要内容包括本人编写附和导线平差程序的过程及附和导线平差程序源代码，在此记录，以供有兴趣的朋友参考学习。</p> 
<h2><a id="_3"></a>过程简介</h2> 
<p>最近学习《C#（注：读音为C sharp）程序设计》这门课时，老师布置了一个设计导线平差程序的作业，一直在学python，好久没用类C语言了，很是头大，好在参考博主：<a href="https://blog.csdn.net/Gou_Hailong">流浪猪头拯救地球</a>的一系列文章，终于是将程序编写出来。<br> （2020/12/7:初始版本优点是方便上手，缺点是还有很多地方可以优化，下一版本将在不久后更新，coding……）</p> 
<h2><a id="_7"></a>程序源码</h2> 
<p>附和导线平差C#程序工程文件及用于测试的文本已上传至<a href="https://download.csdn.net/download/QBigBangQ/13453085">附和导线平差C#程序</a>。<br> 此程序一共用到三个类库，分别是矩阵类Matrix、点类Point、角类Angle。</p> 
<h3><a id="Matrix_10"></a>矩阵类Matrix</h3> 
<p>此类库代码量过大，无法放入博文中，有兴趣的话可以从<a href="https://download.csdn.net/download/gou_hailong/11469981">C#矩阵类库</a>下载。</p> 
<h3><a id="Point_12"></a>点类Point</h3> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>IO</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Text</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Drawing</span><span class="token punctuation">;</span><span class="token comment">//与PointF 联系起来了</span>

<span class="token keyword">namespace</span> work <span class="token comment">//这里改成和您的namespace 名字一样即可</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Point</span>
    <span class="token punctuation">{<!-- --></span><span class="token comment">//Define fields</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> x<span class="token punctuation">;</span>    <span class="token comment">//coordinate</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> y<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> z<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> X
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> x <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Y
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> y <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Z
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> z<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> z <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

        <span class="token comment">//The constructor</span>
        <span class="token keyword">public</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> name <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数1,将一串数据传到一个 Point 中</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">=</span> z<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> sArry<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> mod <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数2,重载 Point函数,将一个字符串数组传到 Point 中</span>
            <span class="token comment">//mod 1带名字，0 不带名字，默认不带名字</span>
            <span class="token class-name"><span class="token keyword">int</span></span> n <span class="token operator">=</span> sArry<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mod <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> sArry<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArry<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArry<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArry<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArry<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArry<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArry<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token class-name">Point</span> p1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> s<span class="token punctuation">,</span> <span class="token class-name">Angle</span> a<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数3 已知基点，边长，方位角，求另一个点</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> p1<span class="token punctuation">.</span>x <span class="token operator">+</span> s <span class="token operator">*</span> a<span class="token punctuation">.</span>cos<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> p1<span class="token punctuation">.</span>y <span class="token operator">+</span> s <span class="token operator">*</span> a<span class="token punctuation">.</span>sin<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">=</span> p1<span class="token punctuation">.</span>z<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token class-name">PointF</span> p1<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数4 将 PointF 转化为 Point, 需要using System.Drawing;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> p1<span class="token punctuation">.</span>X<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> p1<span class="token punctuation">.</span>Y<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Point</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token class-name">Point</span> p2<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//两点相加</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> p2<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> p2<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">+</span> p2<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Point</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token class-name">Point</span> p2<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//两点相减</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> p2<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">-</span> p2<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">-</span> p2<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Point</span> <span class="token function">Mut</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//点与数相乘</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*</span> d<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">*</span> d<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">*</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Point</span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//点与数相除</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">/</span> d<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">/</span> d<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">/</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">Dis</span><span class="token punctuation">(</span><span class="token class-name">Point</span> p2<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//求距离</span>
            <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">Sqrt</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> p2<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> p2<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">-</span> p2<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">*</span>
                <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">-</span> p2<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">-</span> p2<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">-</span> p2<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Angle</span> <span class="token function">getAn</span><span class="token punctuation">(</span><span class="token class-name">Point</span> p2<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//以此点为基点，得到其到另一个点的坐标方位角</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token function">arctan</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> p2<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">-</span> p2<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsClose0</span><span class="token punctuation">(</span><span class="token class-name">Point</span> p2<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//判断 其与p2 哪个和(0,0)更接近</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
                Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
                Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">find_Close0</span><span class="token punctuation">(</span><span class="token class-name">Point<span class="token punctuation">[</span><span class="token punctuation">]</span></span> p<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//找出一个点数组中最接近(0,0)的下标</span>
            <span class="token class-name"><span class="token keyword">int</span></span> n <span class="token operator">=</span> p<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">IsClose0</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    index <span class="token operator">=</span> i<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> index<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">/*此函数用于求象限角
         * 返回的是弧度，取值范围为[0,2*pi)
         */</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">arctan</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> dx<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> dy<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">double</span></span> angle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>dx <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>dy <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> angle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> angle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> <span class="token number">1.5</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> angle<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            angle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">Atan2</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>dy<span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>dx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>dx <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>dy <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> angle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">+</span> angle<span class="token punctuation">;</span>
                <span class="token keyword">else</span> angle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">-</span> angle<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>dy <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> angle <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">-</span> angle<span class="token punctuation">;</span>
            <span class="token keyword">return</span> angle<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//打印出点坐标</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"X {0:f3},   Y {1:f3},   Z {2:f3},   Name {3}"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>z<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">Dis2To0</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//到原点距离的平方</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>z <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>z<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Point<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token function">ZXH</span><span class="token punctuation">(</span><span class="token class-name">Point<span class="token punctuation">[</span><span class="token punctuation">]</span></span> pt<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//坐标重心化，最后一个点存重心坐标</span>
            <span class="token class-name"><span class="token keyword">int</span></span> n <span class="token operator">=</span> pt<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
            <span class="token class-name">Point<span class="token punctuation">[</span><span class="token punctuation">]</span></span> po <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">double</span></span> x0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> z0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                x0 <span class="token operator">+=</span> pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
                y0 <span class="token operator">+=</span> pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
                z0 <span class="token operator">+=</span> pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>z<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            x0 <span class="token operator">/=</span> n<span class="token punctuation">;</span> y0 <span class="token operator">/=</span> n<span class="token punctuation">;</span> z0 <span class="token operator">/=</span> n<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                po<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                po<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
                po<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> x0<span class="token punctuation">;</span>
                po<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> y0<span class="token punctuation">;</span>
                po<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>z <span class="token operator">=</span> pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>z <span class="token operator">-</span> z0<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            po<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span> y0<span class="token punctuation">,</span> z0<span class="token punctuation">,</span> <span class="token string">"ZX"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> po<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//重载一些操作符</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Point <span class="token keyword">operator</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token class-name">Point</span> m1<span class="token punctuation">,</span> <span class="token class-name">Point</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Point <span class="token keyword">operator</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token class-name">Point</span> m1<span class="token punctuation">,</span> <span class="token class-name">Point</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Sub</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Point <span class="token keyword">operator</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token class-name">Point</span> m1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Mut</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Point <span class="token keyword">operator</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">,</span> <span class="token class-name">Point</span> m1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Mut</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Point <span class="token keyword">operator</span> <span class="token operator">/</span><span class="token punctuation">(</span><span class="token class-name">Point</span> m1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Div</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token comment">//public static Point operator =(Point m1) {}</span>
    <span class="token punctuation">}</span>



<span class="token punctuation">}</span>


</code></pre> 
<h3><a id="Angle_198"></a>角类Angle</h3> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Text</span><span class="token punctuation">;</span>
<span class="token comment">//using work;</span>

<span class="token keyword">namespace</span> <span class="token namespace">work</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Angle</span>
    <span class="token punctuation">{<!-- --></span><span class="token comment">//角类</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> d<span class="token punctuation">;</span>    <span class="token comment">//coordinate</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> f<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> m<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> ad<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> rad<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> D
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> d <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> F
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> f<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> f <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> M
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> m <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Rad
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> rad<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> rad <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Ad
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> ad<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> ad <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">double</span> sin<span class="token comment">//正弦</span>
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> cos<span class="token comment">//余弦</span>
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">Cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> tan<span class="token comment">//正切</span>
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">Tan</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> csc<span class="token comment">//余割</span>
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> sec<span class="token comment">//正割</span>
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">Cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> cot<span class="token comment">//余切</span>
        <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">Tan</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token comment">//The constructor 构造函数</span>
        <span class="token keyword">public</span> <span class="token function">Angle</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> f <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数1,将一串数据传到一个 Angle 中,顺便算出弧度</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>d <span class="token operator">=</span> d<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>f <span class="token operator">=</span> f<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>m <span class="token operator">=</span> m<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>rad <span class="token operator">=</span> <span class="token punctuation">(</span>d <span class="token operator">+</span> f <span class="token operator">/</span> <span class="token number">60.0</span> <span class="token operator">+</span> m <span class="token operator">/</span> <span class="token number">3600</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ad <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rad <span class="token operator">*</span> <span class="token number">180</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">Angle</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> rad<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数2,将弧度传到一个 Angle 中,顺便算出度分秒</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>rad <span class="token operator">=</span> rad<span class="token punctuation">;</span> rad <span class="token operator">=</span> rad <span class="token operator">/</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> <span class="token number">180</span><span class="token punctuation">;</span><span class="token comment">//度</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>rad<span class="token punctuation">;</span> rad <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>d<span class="token punctuation">;</span> rad <span class="token operator">*=</span> <span class="token number">60</span><span class="token punctuation">;</span><span class="token comment">//分</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>f <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>rad<span class="token punctuation">;</span> rad <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>f<span class="token punctuation">;</span> rad <span class="token operator">*=</span> <span class="token number">60</span><span class="token punctuation">;</span><span class="token comment">//秒</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>m <span class="token operator">=</span> rad<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ad <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rad <span class="token operator">*</span> <span class="token number">180</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">Angle</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> sArray<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数3,将字符数组传到一个 Angle 中,顺便算出弧度</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>f <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>m <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArray<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>rad <span class="token operator">=</span> <span class="token punctuation">(</span>d <span class="token operator">+</span> f <span class="token operator">/</span> <span class="token number">60.0</span> <span class="token operator">+</span> m <span class="token operator">/</span> <span class="token number">3600</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ad <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rad <span class="token operator">*</span> <span class="token number">180</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">Angle</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> other<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//拷贝构造函数</span>
            rad <span class="token operator">=</span> other<span class="token punctuation">.</span>rad<span class="token punctuation">;</span>
            d <span class="token operator">=</span> other<span class="token punctuation">.</span>d<span class="token punctuation">;</span>
            f <span class="token operator">=</span> other<span class="token punctuation">.</span>f<span class="token punctuation">;</span>
            m <span class="token operator">=</span> other<span class="token punctuation">.</span>m<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ad <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rad <span class="token operator">*</span> <span class="token number">180</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">Angle</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> str<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数4,将字符串传到一个 Angle 中,顺便算出弧度</span>
            <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> sArry <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{<!-- --></span> <span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> <span class="token string">"."</span><span class="token punctuation">,</span> <span class="token string">"°"</span><span class="token punctuation">,</span> <span class="token string">"'"</span><span class="token punctuation">,</span> <span class="token string">"\""</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> StringSplitOptions<span class="token punctuation">.</span>RemoveEmptyEntries<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArry<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>f <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArry<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>m <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArry<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>rad <span class="token operator">=</span> <span class="token punctuation">(</span>d <span class="token operator">+</span> f <span class="token operator">/</span> <span class="token number">60.0</span> <span class="token operator">+</span> m <span class="token operator">/</span> <span class="token number">3600</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ad <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rad <span class="token operator">*</span> <span class="token number">180</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//运算函数</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Angle</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> other<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Angle</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result<span class="token punctuation">.</span>rad <span class="token operator">+=</span> other<span class="token punctuation">.</span>rad<span class="token punctuation">;</span>
            result<span class="token punctuation">.</span>rad <span class="token operator">=</span> result<span class="token punctuation">.</span>rad <span class="token operator">%</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Angle</span> <span class="token function">Subtract</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> other<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Angle</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result<span class="token punctuation">.</span>rad <span class="token operator">-=</span> other<span class="token punctuation">.</span>rad<span class="token punctuation">;</span>
            <span class="token comment">//result.rad = (result.rad + 2 * Math.PI) % (Math.PI * 2);</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Angle</span> <span class="token function">Multiply</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Angle</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result<span class="token punctuation">.</span>rad <span class="token operator">*=</span> d<span class="token punctuation">;</span>
            result<span class="token punctuation">.</span>rad <span class="token operator">=</span> result<span class="token punctuation">.</span>rad <span class="token operator">%</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Angle</span> <span class="token function">Divide</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Angle</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result<span class="token punctuation">.</span>rad <span class="token operator">/=</span> d<span class="token punctuation">;</span>
            result<span class="token punctuation">.</span>rad <span class="token operator">=</span> result<span class="token punctuation">.</span>rad <span class="token operator">%</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sDelim <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//将角转化为字符串，sDelim是分隔符，默认'°′″'</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sDelim <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> d<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"°"</span> <span class="token operator">+</span> f<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"'"</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\""</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token keyword">return</span> d<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> sDelim <span class="token operator">+</span> f<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> sDelim <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">//打印出点坐标</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"D {0:d3},   F {1:d3},   M {2:f3}"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>d<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>f<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//重载运算符</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Angle <span class="token keyword">operator</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Angle <span class="token keyword">operator</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Subtract</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Angle <span class="token keyword">operator</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token operator">-</span>m1<span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">static</span> Angle <span class="token keyword">operator</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Multiply</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Angle <span class="token keyword">operator</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Multiply</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Angle <span class="token keyword">operator</span> <span class="token operator">/</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> d<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span><span class="token function">Divide</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> Angle <span class="token keyword">operator</span> <span class="token operator">%</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>rad <span class="token operator">%</span> m2<span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span>rad <span class="token operator">&gt;</span> m2<span class="token punctuation">.</span>rad<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span>rad <span class="token operator">&lt;</span> m2<span class="token punctuation">.</span>rad<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span>rad <span class="token operator">==</span> m2<span class="token punctuation">.</span>rad<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span>rad <span class="token operator">&gt;=</span> m2<span class="token punctuation">.</span>rad<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span>rad <span class="token operator">&lt;=</span> m2<span class="token punctuation">.</span>rad<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span><span class="token class-name">Angle</span> m1<span class="token punctuation">,</span> <span class="token class-name">Angle</span> m2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> m1<span class="token punctuation">.</span>rad <span class="token operator">!=</span> m2<span class="token punctuation">.</span>rad<span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token comment">//旋转矩阵</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Matrix</span> R2
        <span class="token punctuation">{<!-- --></span><span class="token comment">//返回此角的二维旋转矩阵：数学坐标系顺时针旋转此角度</span>
            <span class="token keyword">get</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Matrix</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Matrix</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cos<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sin<span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>sin<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cos<span class="token punctuation">;</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Matrix</span> Rx
        <span class="token punctuation">{<!-- --></span><span class="token comment">//返回此角的旋转矩阵：绕x轴顺时针旋转此角度</span>
            <span class="token keyword">get</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Matrix</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Matrix</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cos<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sin<span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>sin<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cos<span class="token punctuation">;</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Matrix</span> Ry
        <span class="token punctuation">{<!-- --></span><span class="token comment">//返回此角的旋转矩阵：绕y轴顺时针旋转此角度</span>
            <span class="token keyword">get</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Matrix</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Matrix</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cos<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>sin<span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sin<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cos<span class="token punctuation">;</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Matrix</span> Rz
        <span class="token punctuation">{<!-- --></span><span class="token comment">//返回此角的旋转矩阵：绕z轴顺时针旋转此角度</span>
            <span class="token keyword">get</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Matrix</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Matrix</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cos<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sin<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>sin<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cos<span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="_384"></a>主程序</h3> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>IO</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Text</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>OleDb</span><span class="token punctuation">;</span>

<span class="token keyword">using</span> <span class="token namespace">work</span><span class="token punctuation">;</span>
<span class="token comment">//测站类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GPoint</span>
<span class="token punctuation">{<!-- --></span><span class="token comment">//Define fields</span>
    <span class="token keyword">public</span> <span class="token class-name">Point</span> pt<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">double</span></span> s<span class="token punctuation">;</span><span class="token comment">//观测角(弧度表示),边长</span>
    <span class="token keyword">public</span> <span class="token class-name">Angle</span> an<span class="token punctuation">;</span><span class="token comment">//观测角</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Point</span> Pt
    <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> pt<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> pt <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Angle</span> An
    <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> an<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> an <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> S
    <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> s<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{<!-- --></span> s <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

    <span class="token comment">//The constructor</span>
    <span class="token keyword">public</span> <span class="token function">GPoint</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> name <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数1</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>an <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">GPoint</span><span class="token punctuation">(</span><span class="token class-name">Point</span> pt<span class="token punctuation">,</span> <span class="token class-name">Angle</span> an<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> s<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span><span class="token comment">//构造函数2</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pt <span class="token operator">=</span> pt<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>an <span class="token operator">=</span> an<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//public GPoint(string[] sArry)</span>
    <span class="token comment">//{//构造函数3,将字符数组传到一个 GPoint 中,顺便算出弧度</span>
    <span class="token comment">//    this.an.d = int.Parse(sArry[0]);</span>
    <span class="token comment">//    this.an.f = int.Parse(sArry[1]);</span>
    <span class="token comment">//    this.an.m = double.Parse(sArry[2]);</span>
    <span class="token comment">//    this.an.rad = (an.d + an.f / 60.0 + an.m / 3600) * Math.PI / 180;</span>
    <span class="token comment">//    this.an.ad = this.an.rad * 180 / Math.PI;</span>
    <span class="token comment">//}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Read</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">/*用sDelim 将str 分割成字符串数组
    * @sDelim 可选参数,分隔符
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token function">Split</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> str<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> sDelim <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sDelim <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token comment">//默认分割</span>
            <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{<!-- --></span> <span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">,</span> <span class="token string">"?"</span><span class="token punctuation">,</span> <span class="token string">"-&gt;"</span><span class="token punctuation">,</span> <span class="token string">"   "</span><span class="token punctuation">,</span> <span class="token string">"\t"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> StringSplitOptions<span class="token punctuation">.</span>RemoveEmptyEntries<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span><span class="token comment">//根据传入参数分割</span>
            <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{<!-- --></span> sDelim <span class="token punctuation">}</span><span class="token punctuation">,</span> StringSplitOptions<span class="token punctuation">.</span>RemoveEmptyEntries<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/*得到一个文本文件的行数
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">getTextRows</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> txt<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">int</span></span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token class-name">StreamReader</span> sR <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StreamReader</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> sR<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Split</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> n<span class="token operator">++</span><span class="token punctuation">;</span>
            str <span class="token operator">=</span> sR<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        sR<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/*读取txt至点数组中
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Point<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token function">T2Po</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> txt<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token function">getTextRows</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Point<span class="token punctuation">[</span><span class="token punctuation">]</span></span> Pt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">StreamReader</span> sR <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StreamReader</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> sR<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> sArray <span class="token operator">=</span> <span class="token function">Split</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sArray <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Point</span> pt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point</span><span class="token punctuation">(</span>sArray<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                Pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> pt<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            str <span class="token operator">=</span> sR<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        sR<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Pt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Angle<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token function">T2An</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> txt<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token function">getTextRows</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Angle<span class="token punctuation">[</span><span class="token punctuation">]</span></span> Pt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">StreamReader</span> sR <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StreamReader</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> sR<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> sArray <span class="token operator">=</span> <span class="token function">Split</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sArray <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Angle</span> pt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span>sArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
                Pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> pt<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            str <span class="token operator">=</span> sR<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        sR<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Pt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token function">T2S</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> txt<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token function">getTextRows</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Pt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">double</span></span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">StreamReader</span> sR <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StreamReader</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> sR<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> sArray <span class="token operator">=</span> <span class="token function">Split</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sArray <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token class-name"><span class="token keyword">double</span></span> pt <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>sArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                Pt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> pt<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            str <span class="token operator">=</span> sR<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        sR<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Pt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//public static GPoint[] T2GP(string txt)</span>
    <span class="token comment">//{<!-- --></span>
    <span class="token comment">//    int i = 0, n = getTextRows(txt);</span>
    <span class="token comment">//    GPoint[] Pt = new GPoint[n];</span>
    <span class="token comment">//    StreamReader sR = new StreamReader(txt);</span>
    <span class="token comment">//    string str = sR.ReadLine();</span>
    <span class="token comment">//    while (str != null)</span>
    <span class="token comment">//    {<!-- --></span>
    <span class="token comment">//        string[] sArray = Split(str);</span>
    <span class="token comment">//        if (sArray != null)</span>
    <span class="token comment">//        {<!-- --></span>
    <span class="token comment">//            GPoint pt = new GPoint(sArray);</span>
    <span class="token comment">//            Pt[i] = pt; i++;</span>
    <span class="token comment">//        }</span>
    <span class="token comment">//        str = sR.ReadLine();</span>
    <span class="token comment">//    }</span>
    <span class="token comment">//    sR.Close();</span>
    <span class="token comment">//    return Pt;</span>
    <span class="token comment">//}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DXPC</span> <span class="token comment">//导线平差</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">GPoint<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token function">FHDX</span><span class="token punctuation">(</span><span class="token class-name">GPoint<span class="token punctuation">[</span><span class="token punctuation">]</span></span> data<span class="token punctuation">,</span><span class="token class-name">Angle</span> an1<span class="token punctuation">,</span><span class="token class-name">Angle</span> an2<span class="token punctuation">)</span><span class="token comment">//附和导线平差，an1、an2分别为始边、终边方位角</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//Angle d360 = new Angle(360, 0, 0);</span>
        <span class="token class-name">Angle</span> d180 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Angle</span> a <span class="token operator">=</span> an1<span class="token punctuation">;</span>
        <span class="token class-name">Angle</span> b<span class="token punctuation">;</span>
        <span class="token class-name">Angle</span> fb<span class="token punctuation">;</span><span class="token comment">//角度闭合差</span>
        <span class="token class-name"><span class="token keyword">int</span></span> n <span class="token operator">=</span> data<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
        <span class="token class-name">Angle<span class="token punctuation">[</span><span class="token punctuation">]</span></span> c<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> dx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">double</span></span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//增量</span>
        <span class="token class-name"><span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> dy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">double</span></span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> ddx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">double</span></span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//改正量</span>
        <span class="token class-name"><span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> ddy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">double</span></span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">double</span></span> fx<span class="token punctuation">,</span> fy<span class="token punctuation">,</span> ex<span class="token punctuation">,</span> ey<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">double</span></span> sums <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//导线全长</span>
        <span class="token class-name"><span class="token keyword">double</span></span> fs<span class="token punctuation">;</span><span class="token comment">//全长闭合差</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//计算角度闭合差</span>
        <span class="token punctuation">{<!-- --></span>
            a <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>an <span class="token operator">+</span> a<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">&gt;</span>d180<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                a <span class="token operator">=</span> a <span class="token operator">-</span> d180<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
                a <span class="token operator">=</span> a <span class="token operator">+</span> d180<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>       
        b <span class="token operator">=</span> <span class="token punctuation">(</span>an2 <span class="token operator">-</span> a<span class="token punctuation">)</span> <span class="token operator">/</span> n<span class="token punctuation">;</span>
        fb <span class="token operator">=</span> <span class="token punctuation">(</span>an2 <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//fb.show();</span>
        a <span class="token operator">=</span> an1<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//进行角度改正</span>
        <span class="token punctuation">{<!-- --></span>
            data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>an <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>an <span class="token operator">+</span> b<span class="token punctuation">;</span>
            a <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>an <span class="token operator">+</span> a<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> d180<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                a <span class="token operator">=</span> a <span class="token operator">-</span> d180<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
                a <span class="token operator">=</span> a <span class="token operator">+</span> d180<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            c<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">;</span>
            <span class="token comment">//a.show();</span>
        <span class="token punctuation">}</span>
        fx <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        fy <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
        ex <span class="token operator">=</span> data<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        ey <span class="token operator">=</span> data<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//计算坐标增量及x、y方向的导线闭合差及导线全长</span>
        <span class="token punctuation">{<!-- --></span>
            dx<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>s <span class="token operator">*</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>cos<span class="token punctuation">;</span>
            dy<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>s <span class="token operator">*</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>sin<span class="token punctuation">;</span>
            fx <span class="token operator">=</span> fx <span class="token operator">+</span> dx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            fy <span class="token operator">=</span> fy <span class="token operator">+</span> dy<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            sums <span class="token operator">=</span> sums <span class="token operator">+</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        fs <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">Sqrt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ex <span class="token operator">-</span> fx<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>ex <span class="token operator">-</span> fx<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>ey <span class="token operator">-</span> fy<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>ey <span class="token operator">-</span> fy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//全长闭合差</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//计算改正量并对增量改正</span>
        <span class="token punctuation">{<!-- --></span>
            ddx<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>ex <span class="token operator">-</span> fx<span class="token punctuation">)</span> <span class="token operator">*</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>s <span class="token operator">/</span> sums<span class="token punctuation">;</span>
            ddy<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>ey <span class="token operator">-</span> fy<span class="token punctuation">)</span> <span class="token operator">*</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>s <span class="token operator">/</span> sums<span class="token punctuation">;</span>
            dx<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dx<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> ddx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            dy<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dy<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> ddy<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//计算最终坐标</span>
        <span class="token punctuation">{<!-- --></span>
            data<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span>x <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span>x <span class="token operator">+</span> dx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            data<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span>y <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span>y <span class="token operator">+</span> dy<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">/</span> <span class="token punctuation">(</span>sums <span class="token operator">/</span> fs<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>fb<span class="token punctuation">.</span>rad<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">Sqrt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rad<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">//检测是否符合限差</span>
        <span class="token punctuation">{<!-- --></span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"符合限差"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{<!-- --></span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"不符合限差"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"fs:{0};sums:{1};fb:{2}"</span><span class="token punctuation">,</span> fs<span class="token punctuation">,</span> sums<span class="token punctuation">,</span> fb<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>



<span class="token keyword">namespace</span> <span class="token namespace">Test2017</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">class</span> <span class="token class-name">Program</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>

            <span class="token class-name"><span class="token keyword">string</span></span> fo1 <span class="token operator">=</span> <span class="token string">@"C:\Users\Dr.z\Desktop\HTML\point.txt"</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">string</span></span> fo2 <span class="token operator">=</span> <span class="token string">@"C:\Users\Dr.z\Desktop\HTML\angle.txt"</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">string</span></span> fo3 <span class="token operator">=</span> <span class="token string">@"C:\Users\Dr.z\Desktop\HTML\s.txt"</span><span class="token punctuation">;</span>
            <span class="token class-name">Point<span class="token punctuation">[</span><span class="token punctuation">]</span></span> po <span class="token operator">=</span> Read<span class="token punctuation">.</span><span class="token function">T2Po</span><span class="token punctuation">(</span>fo1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里我是把T2Po放到一个Read类里面了。</span>
            <span class="token class-name">Angle<span class="token punctuation">[</span><span class="token punctuation">]</span></span> an <span class="token operator">=</span> Read<span class="token punctuation">.</span><span class="token function">T2An</span><span class="token punctuation">(</span>fo2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> s <span class="token operator">=</span> Read<span class="token punctuation">.</span><span class="token function">T2S</span><span class="token punctuation">(</span>fo3<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">int</span></span> n <span class="token operator">=</span> po<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
            
            <span class="token class-name">GPoint<span class="token punctuation">[</span><span class="token punctuation">]</span></span> gpo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GPoint</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                gpo<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GPoint</span><span class="token punctuation">(</span>po<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>an<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            gpo <span class="token operator">=</span> DXPC<span class="token punctuation">.</span><span class="token function">FHDX</span><span class="token punctuation">(</span>gpo<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token number">298</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Angle</span><span class="token punctuation">(</span><span class="token number">182</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                gpo<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="_661"></a>更新</h2> 
<p>很久之前的东西了，现在已经不太记得了，但发现在CSDN下载是真的不便，就还是改到网盘上会好点。<br> <a href="https://pan.baidu.com/s/1UXYCn4eL-aojQu0GoIqmZQ" rel="nofollow">网盘链接</a><br> 提取码：c6w8</p> 
<p>在此祝各位学有所成，身体健康。（20220317）</p> 
<p>啰嗦一下，之前有听过老师讲的要有学术诚信，这里包括不去抄和不去传，因为这样才能使自己和他人都能得到必要的锻炼，希望朋友们能尽可能多锻炼自己能力。（20230114）</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dbda89a760cf4cc2b882386b0220d9fe/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">从 level-ip 源码来看 TCP 如何接收消息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1ae896f91941e9fa521f800edd4a8948/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">详解python列表等对象的赋值和复制（浅拷贝copy()及深拷贝deepcopy()的使用区别与示例）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>