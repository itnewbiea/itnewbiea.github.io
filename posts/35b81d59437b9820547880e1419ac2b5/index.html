<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos7解决update-grub无效 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="centos7解决update-grub无效" />
<meta property="og:description" content="背景 升级内核
yum install -y epel-release elrepo-release yum --enablerepo=elrepo-kernel -y install kernel-ml 设置默认启动内核报错
idx=$(awk -F &#34;&#39;&#34; &#39;$1==&#34;menuentry &#34; {print i&#43;&#43; &#34; : &#34; $2}&#39; /etc/grub2.cfg | grep -iv Rescue | head -n 1 | cut -d&#39; &#39; -f1) grub2-set-default $idx ​ cannot open file `/etc/grub2.cfg&#39; for reading (No such file or directory) 概念 GNU GRUB（GRand Unified Bootloader简称“GRUB”）是一个来自GNU项目的多操作系统启动程序。GRUB是多启动规范的实现，它允许用户可以在计算机内同时拥有多个操作系统，并在计算机启动时选择希望运行的操作系统。GRUB可用于选择操作系统分区上的不同内核，也可用于向这些内核传递启动参数。
尝试 网上各种方法都尝试了，55555 都想放弃了 T_T
update-grub 在centos7下的update-grub命令等同效果的是：grub2-mkconfig -o /boot/grub2/grub.cfg 这个命令。
grub2-mkconfig grub2-tools-minimal 内核切换成功 解决步骤 https://mp." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/35b81d59437b9820547880e1419ac2b5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-26T23:11:08+08:00" />
<meta property="article:modified_time" content="2023-06-26T23:11:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos7解决update-grub无效</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>背景</h4> 
<p>升级内核</p> 
<pre><code class="language-bash">yum install -y epel-release elrepo-release
yum --enablerepo=elrepo-kernel -y install kernel-ml</code></pre> 
<p>设置默认启动内核报错</p> 
<pre><code class="language-bash">idx=$(awk -F "'" '$1=="menuentry " {print i++ " : " $2}' /etc/grub2.cfg | grep -iv Rescue | head -n 1 | cut -d' ' -f1)
grub2-set-default $idx
​
cannot open file `/etc/grub2.cfg' for reading (No such file or directory)</code></pre> 
<h4>概念</h4> 
<p>GNU GRUB（GRand Unified Bootloader简称“GRUB”）是一个来自<a href="https://baike.baidu.com/item/GNU?fromModule=lemma_inlink" rel="nofollow" title="GNU">GNU</a>项目的多<a href="https://baike.baidu.com/item/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/192?fromModule=lemma_inlink" rel="nofollow" title="操作系统">操作系统</a>启动程序。GRUB是多启动规范的实现，它允许用户可以在<a href="https://baike.baidu.com/item/%E8%AE%A1%E7%AE%97%E6%9C%BA/140338?fromModule=lemma_inlink" rel="nofollow" title="计算机">计算机</a>内同时拥有多个<a href="https://baike.baidu.com/item/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/192?fromModule=lemma_inlink" rel="nofollow" title="操作系统">操作系统</a>，并在计算机启动时选择希望运行的操作系统。GRUB可用于选择<a href="https://baike.baidu.com/item/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/192?fromModule=lemma_inlink" rel="nofollow" title="操作系统">操作系统</a>分区上的不同<a href="https://baike.baidu.com/item/%E5%86%85%E6%A0%B8/108410?fromModule=lemma_inlink" rel="nofollow" title="内核">内核</a>，也可用于向这些<a href="https://baike.baidu.com/item/%E5%86%85%E6%A0%B8/108410?fromModule=lemma_inlink" rel="nofollow" title="内核">内核</a>传递启动参数。</p> 
<h4>尝试</h4> 
<blockquote> 
 <p>网上各种方法都尝试了，55555 都想放弃了 T_T</p> 
</blockquote> 
<h5>update-grub</h5> 
<blockquote> 
 <p>在centos7下的update-grub命令等同效果的是：grub2-mkconfig -o /boot/grub2/grub.cfg 这个命令。</p> 
</blockquote> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ab/fe/oo7IloO8_o.png"></p> 
<h5>grub2-mkconfig</h5> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/e8/95/21t8wGhC_o.png"></p> 
<h5>grub2-tools-minimal</h5> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/86/33/IKWGsljN_o.png"></p> 
<p></p> 
<h4>内核切换成功</h4> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/12/3c/5jY3aKFV_o.png"></p> 
<h4>解决步骤</h4> 
<p><a class="link-info has-card" href="https://mp.weixin.qq.com/s?__biz=MzA4OTQ0MjA1Ng==&amp;amp;mid=2651269292&amp;amp;idx=1&amp;amp;sn=f060be47686ce1fd32ce6f3f3188f737&amp;amp;chksm=8be95acbbc9ed3ddfbc1a611f5cd0f18a1e2317bce157f24684ad2ab13c61d1fa71ed530e2e7&amp;token=2133504094&amp;lang=zh_CN#rd" rel="nofollow" title="https://mp.weixin.qq.com/s?__biz=MzA4OTQ0MjA1Ng==&amp;amp;mid=2651269292&amp;amp;idx=1&amp;amp;sn=f060be47686ce1fd32ce6f3f3188f737&amp;amp;chksm=8be95acbbc9ed3ddfbc1a611f5cd0f18a1e2317bce157f24684ad2ab13c61d1fa71ed530e2e7&amp;token=2133504094&amp;lang=zh_CN#rd"><span class="link-card-box"><span class="link-title">https://mp.weixin.qq.com/s?__biz=MzA4OTQ0MjA1Ng==&amp;mid=2651269292&amp;idx=1&amp;sn=f060be47686ce1fd32ce6f3f3188f737&amp;chksm=8be95acbbc9ed3ddfbc1a611f5cd0f18a1e2317bce157f24684ad2ab13c61d1fa71ed530e2e7&amp;token=2133504094&amp;lang=zh_CN#rd</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/e5/a2/0WaiIihc_o.png" alt="icon-default.png?t=N5K3">https://mp.weixin.qq.com/s?__biz=MzA4OTQ0MjA1Ng==&amp;mid=2651269292&amp;idx=1&amp;sn=f060be47686ce1fd32ce6f3f3188f737&amp;chksm=8be95acbbc9ed3ddfbc1a611f5cd0f18a1e2317bce157f24684ad2ab13c61d1fa71ed530e2e7&amp;token=2133504094&amp;lang=zh_CN#rd</span></span></a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/14d9dc1914c28f573224b202f921d237/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">UI还不错的视频播放器：GOMPlayerPlus</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/06efa86da2c8a2b957a5cf9240508f83/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Linux基础及shell脚本】查看、安装、卸载软件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>