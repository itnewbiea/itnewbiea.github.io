<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python：六步教会你使用python爬虫爬取数据 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python：六步教会你使用python爬虫爬取数据" />
<meta property="og:description" content="用python的爬虫爬取数据真的很简单，只要掌握这六步就好，也不复杂。以前还以为爬虫很难，结果一上手，从初学到把东西爬下来，一个小时都不到就解决了。
python爬出六部曲 第一步：安装requests库和BeautifulSoup库： 在程序中两个库的书写是这样的：
import requests from bs4 import BeautifulSoup 由于我使用的是pycharm进行的python编程。所以我就讲讲在pycharm上安装这两个库的方法。在主页面文件选项下，找到设置。进一步找到项目解释器。之后在所选框中，点击软件包上的&#43;号就可以进行查询插件安装了。有过编译器插件安装的hxd估计会比较好入手。具体情况就如下图所示。
第二步：获取爬虫所需的header和cookie： 我写了一个爬取微博热搜的爬虫程序，这里就直接以它为例吧。获取header和cookie是一个爬虫程序必须的，它直接决定了爬虫程序能不能准确的找到网页位置进行爬取。
首先进入微博热搜的页面，按下F12，就会出现网页的js语言设计部分。如下图所示。找到网页上的Network部分。然后按下ctrl&#43;R刷新页面。如果，进行就有文件信息，就不用刷新了，当然刷新了也没啥问题。然后，我们浏览Name这部分，找到我们想要爬取的文件，鼠标右键，选择copy，复制下网页的URL。就如下图所示。
复制好URL后，我们就进入一个网页Convert curl commands to code。这个网页可以根据你复制的URL，自动生成header和cookie，如下图。生成的header和cookie，直接复制走就行，粘贴到程序中。
#爬虫头数据 cookies = { &#39;SINAGLOBAL&#39;: &#39;6797875236621.702.1603159218040&#39;, &#39;SUB&#39;: &#39;_2AkMXbqMSf8NxqwJRmfkTzmnhboh1ygvEieKhMlLJJRMxHRl-yT9jqmg8tRB6PO6N_Rc_2FhPeZF2iThYO9DfkLUGpv4V&#39;, &#39;SUBP&#39;: &#39;0033WrSXqPxfM72-Ws9jqgMF55529P9D9Wh-nU-QNDs1Fu27p6nmwwiJ&#39;, &#39;_s_tentry&#39;: &#39;www.baidu.com&#39;, &#39;UOR&#39;: &#39;www.hfut.edu.cn,widget.weibo.com,www.baidu.com&#39;, &#39;Apache&#39;: &#39;7782025452543.054.1635925669528&#39;, &#39;ULV&#39;: &#39;1635925669554:15:1:1:7782025452543.054.1635925669528:1627316870256&#39;, } headers = { &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Cache-Control&#39;: &#39;max-age=0&#39;, &#39;Upgrade-Insecure-Requests&#39;: &#39;1&#39;, &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36 SLBrowser/7.0.0.6241 SLBChan/25&#39;, &#39;Accept&#39;: &#39;text/html,application/xhtml&#43;xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#39;, &#39;Sec-Fetch-Site&#39;: &#39;cross-site&#39;, &#39;Sec-Fetch-Mode&#39;: &#39;navigate&#39;, &#39;Sec-Fetch-User&#39;: &#39;?1&#39;, &#39;Sec-Fetch-Dest&#39;: &#39;document&#39;, &#39;Accept-Language&#39;: &#39;zh-CN,zh;q=0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/be22330378e0af6f074ebb930e996fbb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-07T10:55:52+08:00" />
<meta property="article:modified_time" content="2023-10-07T10:55:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python：六步教会你使用python爬虫爬取数据</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>用python的爬虫爬取数据真的很简单，只要掌握这六步就好，也不复杂。以前还以为爬虫很难，结果一上手，从初学到把东西爬下来，一个小时都不到就解决了。</p> 
<h3><a id="python_4"></a>python爬出六部曲</h3> 
<h3><a id="requestsBeautifulSoup_6"></a>第一步：安装requests库和BeautifulSoup库：</h3> 
<p>在程序中两个库的书写是这样的：</p> 
<pre><code> import requests
from bs4 import BeautifulSoup
</code></pre> 
<p>由于我使用的是pycharm进行的python编程。所以我就讲讲在pycharm上安装这两个库的方法。在主页面文件选项下，找到设置。进一步找到项目解释器。之后在所选框中，点击软件包上的+号就可以进行查询插件安装了。有过编译器插件安装的hxd估计会比较好入手。具体情况就如下图所示。</p> 
<p><img src="https://images2.imgbox.com/dc/36/ZPi38TzY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9c/91/Rov40Ygg_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="headercookie_21"></a>第二步：获取爬虫所需的header和cookie：</h3> 
<p>我写了一个爬取微博热搜的爬虫程序，这里就直接以它为例吧。获取header和cookie是一个爬虫程序必须的，它直接决定了爬虫程序能不能准确的找到网页位置进行爬取。</p> 
<p>首先进入微博热搜的页面，按下F12，就会出现网页的js语言设计部分。如下图所示。找到网页上的Network部分。然后按下ctrl+R刷新页面。如果，进行就有文件信息，就不用刷新了，当然刷新了也没啥问题。然后，我们浏览Name这部分，找到我们想要爬取的文件，鼠标右键，选择copy，复制下网页的URL。就如下图所示。</p> 
<p><img src="https://images2.imgbox.com/62/ed/z91maXY4_o.png" alt="在这里插入图片描述"></p> 
<p>复制好URL后，我们就进入一个网页Convert curl commands to code。这个网页可以根据你复制的URL，自动生成header和cookie，如下图。生成的header和cookie，直接复制走就行，粘贴到程序中。<br> <img src="https://images2.imgbox.com/f0/54/C2Tfj3dH_o.png" alt="在这里插入图片描述"></p> 
<pre><code>#爬虫头数据
cookies = {
    'SINAGLOBAL': '6797875236621.702.1603159218040',
    'SUB': '_2AkMXbqMSf8NxqwJRmfkTzmnhboh1ygvEieKhMlLJJRMxHRl-yT9jqmg8tRB6PO6N_Rc_2FhPeZF2iThYO9DfkLUGpv4V',
    'SUBP': '0033WrSXqPxfM72-Ws9jqgMF55529P9D9Wh-nU-QNDs1Fu27p6nmwwiJ',
    '_s_tentry': 'www.baidu.com',
    'UOR': 'www.hfut.edu.cn,widget.weibo.com,www.baidu.com',
    'Apache': '7782025452543.054.1635925669528',
    'ULV': '1635925669554:15:1:1:7782025452543.054.1635925669528:1627316870256',
}
headers = {
    'Connection': 'keep-alive',
    'Cache-Control': 'max-age=0',
    'Upgrade-Insecure-Requests': '1',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36 SLBrowser/7.0.0.6241 SLBChan/25',
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',
    'Sec-Fetch-Site': 'cross-site',
    'Sec-Fetch-Mode': 'navigate',
    'Sec-Fetch-User': '?1',
    'Sec-Fetch-Dest': 'document',
    'Accept-Language': 'zh-CN,zh;q=0.9',
}
params = (
    ('cate', 'realtimehot'),
)
</code></pre> 
<p>复制到程序中就像这样。这是微博热搜的请求头。</p> 
<h3><a id="_65"></a>第三步：获取网页：</h3> 
<p>我们将header和cookie搞到手后，就可以将它复制到我们的程序里。之后，使用request请求，就可以获取到网页了。</p> 
<pre><code>#获取网页
response = requests.get('https://s.weibo.com/top/summary', headers=headers, params=params, cookies=cookies)
</code></pre> 
<h3><a id="_74"></a>第四步：解析网页：</h3> 
<p>这个时候，我们需要回到网页。同样按下F12，找到网页的Elements部分。用左上角的小框带箭头的标志，如下图，点击网页内容，这个时候网页就会自动在右边显示出你获取网页部分对应的代码。</p> 
<p><img src="https://images2.imgbox.com/68/83/xe4ucf2P_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/ee/c1/H6NgRiOO_o.png" alt="在这里插入图片描述"></p> 
<p>如上图所示，我们在找到想要爬取的页面部分的网页代码后，将鼠标放置于代码上，右键，copy到selector部分。就如上图所示。</p> 
<h3><a id="_84"></a>第五步：分析得到的信息，简化地址：</h3> 
<p>其实刚才复制的selector就相当于网页上对应部分存放的地址。由于我们需要的是网页上的一类信息，所以我们需要对获取的地址进行分析，提取。当然，就用那个地址也不是不行，就是只能获取到你选择的网页上的那部分内容。</p> 
<pre><code>#pl_top_realtimehot &gt; table &gt; tbody &gt; tr:nth-child(1) &gt; td.td-02 &gt; a
#pl_top_realtimehot &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td.td-02 &gt; a
#pl_top_realtimehot &gt; table &gt; tbody &gt; tr:nth-child(9) &gt; td.td-02 &gt; a
</code></pre> 
<p>这是我获取的三条地址，可以发现三个地址有很多相同的地方，唯一不同的地方就是tr部分。由于tr是网页标签，后面的部分就是其补充的部分，也就是子类选择器。可以推断出，该类信息，就是存储在tr的子类中，我们直接对tr进行信息提取，就可以获取到该部分对应的所有信息。所以提炼后的地址为：</p> 
<pre><code>#pl_top_realtimehot &gt; table &gt; tbody &gt; tr &gt; td.td-02 &gt; a
</code></pre> 
<p>这个过程对js类语言有一定了解的hxd估计会更好处理。不过没有js类语言基础也没关系，主要步骤就是，保留相同的部分就行，慢慢的试，总会对的。</p> 
<h3><a id="_102"></a>第六步：爬取内容，清洗数据</h3> 
<p>这一步完成后，我们就可以直接爬取数据了。用一个标签存储上面提炼出的像地址一样的东西。标签就会拉取到我们想获得的网页内容。</p> 
<pre><code>#爬取内容
content="#pl_top_realtimehot &gt; table &gt; tbody &gt; tr &gt; td.td-02 &gt; a"
</code></pre> 
<p>之后我们就要soup和text过滤掉不必要的信息，比如js类语言，排除这类语言对于信息受众阅读的干扰。这样我们就成功的将信息，爬取下来了。</p> 
<pre><code>fo = open("./微博热搜.txt",'a',encoding="utf-8")
a=soup.select(content)
for i in range(0,len(a)):
    a[i] = a[i].text
    fo.write(a[i]+'\n')
fo.close()
</code></pre> 
<p>我是将数据存储到了文件夹中，所以会有wirte带来的写的操作。想把数据保存在哪里，或者想怎么用，就看读者自己了。</p> 
<p>爬取微博热搜的代码实例以及结果展示：</p> 
<pre><code>import os
import requests
from bs4 import BeautifulSoup
#爬虫头数据
cookies = {
    'SINAGLOBAL': '6797875236621.702.1603159218040',
    'SUB': '_2AkMXbqMSf8NxqwJRmfkTzmnhboh1ygvEieKhMlLJJRMxHRl-yT9jqmg8tRB6PO6N_Rc_2FhPeZF2iThYO9DfkLUGpv4V',
    'SUBP': '0033WrSXqPxfM72-Ws9jqgMF55529P9D9Wh-nU-QNDs1Fu27p6nmwwiJ',
    '_s_tentry': 'www.baidu.com',
    'UOR': 'www.hfut.edu.cn,widget.weibo.com,www.baidu.com',
    'Apache': '7782025452543.054.1635925669528',
    'ULV': '1635925669554:15:1:1:7782025452543.054.1635925669528:1627316870256',
}
headers = {
    'Connection': 'keep-alive',
    'Cache-Control': 'max-age=0',
    'Upgrade-Insecure-Requests': '1',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36 SLBrowser/7.0.0.6241 SLBChan/25',
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',
    'Sec-Fetch-Site': 'cross-site',
    'Sec-Fetch-Mode': 'navigate',
    'Sec-Fetch-User': '?1',
    'Sec-Fetch-Dest': 'document',
    'Accept-Language': 'zh-CN,zh;q=0.9',
}
params = (
    ('cate', 'realtimehot'),
)
#数据存储
fo = open("./微博热搜.txt",'a',encoding="utf-8")
#获取网页
response = requests.get('https://s.weibo.com/top/summary', headers=headers, params=params, cookies=cookies)
#解析网页
response.encoding='utf-8'
soup = BeautifulSoup(response.text, 'html.parser')
#爬取内容
content="#pl_top_realtimehot &gt; table &gt; tbody &gt; tr &gt; td.td-02 &gt; a"
#清洗数据
a=soup.select(content)
for i in range(0,len(a)):
    a[i] = a[i].text
    fo.write(a[i]+'\n')
fo.close()
</code></pre> 
<p><img src="https://images2.imgbox.com/e9/fb/jfo4DQTU_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Python_175"></a>关于Python的技术储备</h3> 
<p>在这里给大家分享一些免费的课程供大家学习，下面是课程里面的截图，扫描最下方的二维码就能全部领取。</p> 
<h4><a id="1Python_179"></a>1.Python所有方向的学习路线</h4> 
<p><img src="https://images2.imgbox.com/7f/5d/Ce6Oini0_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="2_184"></a>2.学习软件</h4> 
<p>工欲善其事必先利其器。学习Python常用的开发软件都在这里了，给大家节省了很多时间。<br> <img src="https://images2.imgbox.com/f3/9b/zycRA2As_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="3_189"></a>3.学习资料</h4> 
<p><img src="https://images2.imgbox.com/38/16/ymRZjLuO_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="4_193"></a>4.实战资料</h4> 
<p>实践是检验真理的唯一标准。这里的压缩包可以让你再闲暇之余帮你提升你的个人能力。<br> <img src="https://images2.imgbox.com/19/34/V7XgOV6Z_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="5_198"></a>5.视频课程</h4> 
<p><img src="https://images2.imgbox.com/3e/c2/PDKZHQBE_o.jpg" alt="在这里插入图片描述"></p> 
<p>好啦今天的分享就到这里结束了，快乐的时光总是短暂呢，想学习更多课程的小伙伴不要着急，有更多惊喜哦~<img src="https://images2.imgbox.com/b6/16/2EQvKxYI_o.jpg" alt="在这里插入图片描述"></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/06a1356dc1e1cc5e9d0fa4a055a400e0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">快速入门到精通：一篇学会Oracle</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/93f847eef151a6281c1edb48c7379289/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【已解决】Pyecharts折线图，只有坐标轴没有折线数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>