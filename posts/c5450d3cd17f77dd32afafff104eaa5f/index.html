<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Electron&#43;Vue3开发桌面文件加密工具应用 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Electron&#43;Vue3开发桌面文件加密工具应用" />
<meta property="og:description" content="成果展示： 一、Electron&#43;Vue3项目搭建步骤 1、查看node版本，版本必须16及以上版本；查看是否安装npm cmd =&gt; node -v 2、切换镜像 yarn config set registry https://registry.yarnpkg.com 或 npm config set registry https://registry.npmjs.org 3、安装Vue脚手架，若已安装则可以跳过，未安装可用如下方式安装 npm install -g @vue/cli # OR yarn global add @vue/cli 4、创建项目 项目名，可自己定义
vue create myproject 选择Vue3版本
如图，安装完成，我这边安装的yarn，所以vue默认用yarn作包管理了，
cd myproject 切换到 myproject目录下，yarn serve即可启动Vue3项目。
如果你使用的npm或cnpm，使用npm run serve 运行即可。
5、配置Electron 首先进入项目目录：cd myproject
然后通过运行以下命令安装并调用vue-cli-plugin-electron-builder的生成器：
vue add electron-builder 如下图所示，提示我们选择Electron版本，直接选择最新13.0.0版本即可 。
如下图，则项目创建成功。 6、项目启动 使用yarn（推荐使用yarn），则直接执行：
yarn electron:serve 或者使用npm，则直接执行 npm run electron:serve 7、打包 使用yarn（推荐使用yarn），则直接执行：
yarn electron:build 或者使用npm，则直接执行 npm run electron:build 桌面应用配置，在vue." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c5450d3cd17f77dd32afafff104eaa5f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-11T15:54:38+08:00" />
<meta property="article:modified_time" content="2023-07-11T15:54:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Electron&#43;Vue3开发桌面文件加密工具应用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h5>成果展示：</h5> 
<p><img alt="" height="769" src="https://images2.imgbox.com/89/8f/MvRXH1fR_o.png" width="941"></p> 
<h2>一、Electron+Vue3项目搭建步骤</h2> 
<h6>1、查看node版本，版本必须16及以上版本；查看是否安装npm</h6> 
<p>cmd =&gt; node -v </p> 
<h6>2、切换镜像</h6> 
<pre><code class="language-javascript">yarn config set registry https://registry.yarnpkg.com
或
npm config set registry https://registry.npmjs.org</code></pre> 
<h6>3、安装Vue脚手架，若已安装则可以跳过，未安装可用如下方式安装</h6> 
<pre><code class="language-javascript">npm install -g @vue/cli
# OR
yarn global add @vue/cli</code></pre> 
<h6> 4、创建项目</h6> 
<p>        项目名，可自己定义</p> 
<pre><code class="language-javascript">vue create myproject</code></pre> 
<p>选择Vue3版本<img alt="" height="519" src="https://images2.imgbox.com/bf/00/MOdw8uD7_o.png" width="634"></p> 
<p>如图，安装完成，我这边安装的yarn，所以vue默认用yarn作包管理了，</p> 
<p> cd myproject 切换到 myproject目录下，yarn serve即可启动Vue3项目。</p> 
<p><img alt="" height="759" src="https://images2.imgbox.com/82/9a/eTci5AhM_o.png" width="548"></p> 
<p>如果你使用的npm或cnpm，使用npm run serve 运行即可。</p> 
<h6>5、配置Electron</h6> 
<p>首先进入项目目录：cd myproject</p> 
<p>然后通过运行以下命令安装并调用vue-cli-plugin-electron-builder的生成器：</p> 
<pre><code>vue add electron-builder</code></pre> 
<p>如下图所示，提示我们选择Electron版本，直接选择最新13.0.0版本即可 。</p> 
<p><img alt="" height="609" src="https://images2.imgbox.com/2e/15/njfzNpFQ_o.png" width="662"></p> 
<p>如下图，则项目创建成功。 </p> 
<p><img alt="" height="608" src="https://images2.imgbox.com/6b/7f/FiKSRNTF_o.png" width="664"></p> 
<h6>6、项目启动</h6> 
<p>使用yarn（推荐使用yarn），则直接执行：</p> 
<pre><code>yarn electron:serve</code></pre> 
<p>或者使用npm，则直接执行 </p> 
<pre><code>npm run electron:serve</code></pre> 
<h6>7、打包</h6> 
<p> 使用yarn（推荐使用yarn），则直接执行：</p> 
<pre><code class="language-javascript">yarn electron:build</code></pre> 
<p>或者使用npm，则直接执行 </p> 
<pre><code class="language-javascript">npm run electron:build</code></pre> 
<p>桌面应用配置，在vue.config.js中配置，代码如下：</p> 
<p>注意：<span style="color:#fe2c24;">修改logo，图标大小一定要是256*256</span></p> 
<pre><code class="language-javascript">const { defineConfig } = require('@vue/cli-service')
module.exports = defineConfig({
  transpileDependencies: true,
  configureWebpack: {
    resolve: { fallback: { fs: false , path: false} }
  },
  pluginOptions: {
    electronBuilder: {
        nodeIntegration: true,
        
        //打包配置
        builderOptions:{
          productName: "加解密工具",
          appId: "",
          win: {
            target: 'nsis',
            icon: "public/logo.ico"
          },
          mac: {
            icon: "public/logo.ico",
            category:"加解密工具"
          },
          nsis: {
            oneClick: false,
            allowElevation: true,
            allowToChangeInstallationDirectory: true,
            installerIcon: "public/logo.ico",
            uninstallerIcon: "public/logo.ico",
            installerHeaderIcon: "public/logo.ico",
            createDesktopShortcut: true,
            createStartMenuShortcut: true,
            shortcutName: "加解密工具"
          }
        }
    }
  }
})</code></pre> 
<h2>二、桌面应用窗体配置</h2> 
<pre><code class="language-javascript">const win = new BrowserWindow({
    width: 800,
    height: 600,
    // titleBarStyle: 'hidden',//隐藏导航栏
    // frame:false, //隐藏导航栏
    autoHideMenuBar: true,//隐藏工具栏
    icon: 'public/logo.png',

    webPreferences: {

      // Use pluginOptions.nodeIntegration, leave this alone
      // See nklayman.github.io/vue-cli-plugin-electron-builder/guide/security.html#node-integration for more info
      nodeIntegration: process.env.ELECTRON_NODE_INTEGRATION,
      contextIsolation: !process.env.ELECTRON_NODE_INTEGRATION
    }
  })</code></pre> 
<p><img alt="" height="628" src="https://images2.imgbox.com/d1/4b/HYC8Bxcl_o.png" width="1169"></p> 
<h2> 三、打包时报错could not find: “C:\Users\XX\AppData\Local\Temp\t-bDWVX6\0-messages.nsh“</h2> 
<p>解决方法：打开 node_module/app-builder-lib/out/targets/nsis/NsisTarget.js文件，在 executeMakensis 方法中加入 args.push("-INPUTCHARSET", "UTF8");如下所示：</p> 
<pre><code class="language-javascript">//node_module/app-builder-lib/out/targets/nsis/NsisTarget.js

async executeMakensis(defines, commands, script) {
        const args = this.options.warningsAsErrors === false ? [] : ["-WX"];
        //此处新增
        args.push("-INPUTCHARSET", "UTF8");
        //结束
        for (const name of Object.keys(defines)) {
            const value = defines[name];
            if (value == null) {
                args.push(`-D${name}`);
            }
            else {
                args.push(`-D${name}=${value}`);
            }
        }
......</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/602be4732ca3b57529303ce6ee4aa45c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数学 {罗尔中值定理}</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/26d8f656894c52df0a650f9d31bc3bb4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MQTT QoS 0,1,2 的介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>