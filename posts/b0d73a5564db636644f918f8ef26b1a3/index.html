<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>传统点云分割三部曲（一）——VCCS（Voxel Cloud Connectivity Segmentation） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="传统点云分割三部曲（一）——VCCS（Voxel Cloud Connectivity Segmentation）" />
<meta property="og:description" content="文章目录 一、前言二、VCCS论文阅读2.1 摘要部分2.2 方法2.2.1 Adjacency Graph2.2.2 Spatial Seeding2.2.3 Features and Distance Measure2.2.4 Flow Constrained Clustering2.2.4.1 k-means算法2.2.4.2 本文的改进 2.3 PCL代码效果以及调参建议 一、前言 我之前狭隘地以为只有点云深度学习才能处理分割问题，偶然发现传统方法的分割结果一样可以令我眼前一亮。这三篇论文原文是：VCCS原文 LCCP原文 CPC原文
其中VCCS是分割前的准备工作，LCCP和CPC是分割的方法，二者论文中的效果图如下，有点出乎我的意料。。。。
传统方法我认为最好的点在于通用性很强，并且可解释，应用起来比较友好。这三篇论文出自同一实验室，并且算法实现均已发布到PCL中，所以我准备学习这三篇论文的方法，并整理成笔记与大家交流。
二、VCCS论文阅读 2.1 摘要部分 在2D图像分割任务中，通常会将相似的像素先聚类成超像素（superpixel），通过这步预处理，可以有效降低后续分割的计算开销。2D超像素在3D中对应超体素（supervoxel），传统方法通过比较颜色和深度的差异来完成超体素的生成，但容易出现跨越物体边界的情况，本文解决这个问题的思路是利用三维几何信息。在3D空间中操作与在投影空间中相比有一明显的优势，投影空间只能处理2.5D的点云（使用RGB-D相机进行一次拍摄），而在3D空间中可以处理3D的情况（使用多个标定好的相机进行拍摄）。实验结果证明了提出方法在抑制跨越边界以及处理速度上的优越表现。
2.2 方法 后文中 V r ( i ) = F 1.. n V_r(i)=F_{1..n} Vr​(i)=F1..n​，代表分辨率为 r r r的体素云中索引为 i i i的体素，体素用 F F F来描述， F F F是一个 n n n维特征向量，包含了体素的颜色、位置、法线等信息。
2.2.1 Adjacency Graph 构建邻接图是本文提出方法中的关键，对于体素化的三维空间，有三种邻接的定义方式，6-，18-和26邻接，可以用魔方来辅助理解，6邻接包含六个面的中心块，18邻接再包含12个棱块，26邻接则是再包含8个角块。遍历每个体素，使用 3 R v o x e l \sqrt 3R_{voxel} 3 ​Rvoxel​的搜索半径即可完成邻接图的构建" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b0d73a5564db636644f918f8ef26b1a3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-12T22:41:25+08:00" />
<meta property="article:modified_time" content="2023-11-12T22:41:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">传统点云分割三部曲（一）——VCCS（Voxel Cloud Connectivity Segmentation）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、前言</a></li><li><a href="#VCCS_8" rel="nofollow">二、VCCS论文阅读</a></li><li><ul><li><a href="#21__9" rel="nofollow">2.1 摘要部分</a></li><li><a href="#22__11" rel="nofollow">2.2 方法</a></li><li><ul><li><a href="#221_Adjacency_Graph_13" rel="nofollow">2.2.1 Adjacency Graph</a></li><li><a href="#222__Spatial_Seeding_19" rel="nofollow">2.2.2 Spatial Seeding</a></li><li><a href="#223_Features_and_Distance_Measure_38" rel="nofollow">2.2.3 Features and Distance Measure</a></li><li><a href="#224_Flow_Constrained_Clustering_46" rel="nofollow">2.2.4 Flow Constrained Clustering</a></li><li><ul><li><a href="#2241_kmeans_48" rel="nofollow">2.2.4.1 k-means算法</a></li><li><a href="#2242__51" rel="nofollow">2.2.4.2 本文的改进</a></li></ul> 
   </li></ul> 
   </li><li><a href="#23_PCL_59" rel="nofollow">2.3 PCL代码</a></li><li><ul><li><a href="#_230" rel="nofollow">效果以及调参建议</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、前言</h2> 
<p>我之前狭隘地以为只有点云深度学习才能处理分割问题，偶然发现传统方法的分割结果一样可以令我眼前一亮。这三篇论文原文是：<a href="https://www.cv-foundation.org/openaccess/content_cvpr_2013/papers/Papon_Voxel_Cloud_Connectivity_2013_CVPR_paper.pdf" rel="nofollow">VCCS原文</a> <a href="https://www.cv-foundation.org/openaccess/content_cvpr_2014/papers/Stein_Object_Partitioning_using_2014_CVPR_paper.pdf" rel="nofollow">LCCP原文</a> <a href="https://openaccess.thecvf.com/content_cvpr_2015/papers/Schoeler_Constrained_Planar_Cuts_2015_CVPR_paper.pdf" rel="nofollow">CPC原文</a><br> 其中VCCS是分割前的准备工作，LCCP和CPC是分割的方法，二者论文中的效果图如下，有点出乎我的意料。。。。<br> <img src="https://images2.imgbox.com/98/0a/Mv8tph9P_o.png"><br> <img src="https://images2.imgbox.com/58/09/vB4PE8GS_o.png"><br> 传统方法我认为最好的点在于通用性很强，并且可解释，应用起来比较友好。这三篇论文出自同一实验室，并且算法实现均已发布到PCL中，所以我准备学习这三篇论文的方法，并整理成笔记与大家交流。</p> 
<h2><a id="VCCS_8"></a>二、VCCS论文阅读</h2> 
<h3><a id="21__9"></a>2.1 摘要部分</h3> 
<p>在2D图像分割任务中，通常会将相似的像素先聚类成超像素（superpixel），通过这步预处理，可以有效降低后续分割的计算开销。2D超像素在3D中对应超体素（supervoxel），传统方法通过比较颜色和深度的差异来完成超体素的生成，但容易出现跨越物体边界的情况，本文解决这个问题的思路是利用三维几何信息。在3D空间中操作与在投影空间中相比有一明显的优势，投影空间只能处理2.5D的点云（使用RGB-D相机进行一次拍摄），而在3D空间中可以处理3D的情况（使用多个标定好的相机进行拍摄）。实验结果证明了提出方法在抑制跨越边界以及处理速度上的优越表现。</p> 
<h3><a id="22__11"></a>2.2 方法</h3> 
<p>后文中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          V 
         
        
          r 
         
        
       
         ( 
        
       
         i 
        
       
         ) 
        
       
         = 
        
        
        
          F 
         
         
         
           1.. 
          
         
           n 
          
         
        
       
      
        V_r(i)=F_{1..n} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.2222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.2222em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1..</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，代表分辨率为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
      
        r 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span>的体素云中索引为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
      
        i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>的体素，体素用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         F 
        
       
      
        F 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span></span></span></span></span>来描述，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         F 
        
       
      
        F 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span></span></span></span></span>是一个<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
      
        n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>维特征向量，包含了体素的颜色、位置、法线等信息。</p> 
<h4><a id="221_Adjacency_Graph_13"></a>2.2.1 Adjacency Graph</h4> 
<p>构建邻接图是本文提出方法中的关键，对于体素化的三维空间，有三种邻接的定义方式，6-，18-和26邻接，可以用魔方来辅助理解，6邻接包含六个面的中心块，18邻接再包含12个棱块，26邻接则是再包含8个角块。遍历每个体素，使用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          3 
         
        
        
        
          R 
         
         
         
           v 
          
         
           o 
          
         
           x 
          
         
           e 
          
         
           l 
          
         
        
       
      
        \sqrt 3R_{voxel} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0572em; vertical-align: -0.15em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.9072em;"><span class="svg-align" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord" style="padding-left: 0.833em;">3</span></span><span class="" style="top: -2.8672em;"><span class="pstrut" style="height: 3em;"></span><span class="hide-tail" style="min-width: 0.853em; height: 1.08em;"> 
           <svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"> 
            <path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path> 
           </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.1328em;"><span class=""></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的搜索半径即可完成邻接图的构建<br> <img src="https://images2.imgbox.com/60/df/bWnOMduT_o.png" height="250"></p> 
<p><font color="red">最后一句话写的怪怪的，最后重新修改一下，这个邻接图到底是啥</font></p> 
<h4><a id="222__Spatial_Seeding_19"></a>2.2.2 Spatial Seeding</h4> 
<p>种子点会被用于初始化超体素，首先以<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           s 
          
         
           e 
          
         
           e 
          
         
           d 
          
         
        
       
      
        R_{seed} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">see</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的分辨率对空间再做一次栅格化，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           s 
          
         
           e 
          
         
           e 
          
         
           d 
          
         
        
       
      
        R_{seed} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">see</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>需要大于<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           v 
          
         
           o 
          
         
           x 
          
         
           e 
          
         
           l 
          
         
        
       
      
        R_{voxel} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，这很容易理解，因为超体素中需要包含多个体素。然后找到每个大体素（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           s 
          
         
           e 
          
         
           e 
          
         
           d 
          
         
        
       
      
        R_{seed} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">see</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>）中距离中心最近的小体素（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           v 
          
         
           o 
          
         
           x 
          
         
           e 
          
         
           l 
          
         
        
       
      
        R_{voxel} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>）作为初始种子体素。未被占据的大体素将不被考虑。<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           s 
          
         
           e 
          
         
           e 
          
         
           d 
          
         
        
       
      
        R_{seed} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">see</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的大小会直接影响到最后超体素的大小<br> <img src="https://images2.imgbox.com/98/68/2lTZt2Nf_o.png"></p> 
<p>接着处理噪声，目的是去除因空间中离散的噪声体素而生成的种子点，方法如下：<br> <img src="https://images2.imgbox.com/6c/9c/uvZ4LNbj_o.png"><br> 对于被查询的种子体素，以<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           s 
          
         
           e 
          
         
           a 
          
         
           r 
          
         
           c 
          
         
           h 
          
         
        
       
      
        R_{search} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">rc</span><span class="mord mathnormal mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>半径搜索其周围的体素个数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         N 
        
       
      
        N 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           s 
          
         
           e 
          
         
           a 
          
         
           r 
          
         
           c 
          
         
           h 
          
         
        
       
      
        R_{search} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">rc</span><span class="mord mathnormal mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>小于<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           s 
          
         
           e 
          
         
           e 
          
         
           d 
          
         
        
       
      
        R_{seed} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">see</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>但大于<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           v 
          
         
           o 
          
         
           x 
          
         
           e 
          
         
           l 
          
         
        
       
      
        R_{voxel} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，在代码中使用的是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         0.5 
        
        
        
          R 
         
         
         
           s 
          
         
           e 
          
         
           e 
          
         
           d 
          
         
        
       
      
        0.5R_{seed} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord">0.5</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">see</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         N 
        
       
      
        N 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span></span></span></span></span>小于某个阈值，则认为是噪声。阈值的确定，结合示意图，我猜测是统计过查询体素的平面（图中的绿色平面）会包含多少在<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          R 
         
         
         
           s 
          
         
           e 
          
         
           a 
          
         
           r 
          
         
           c 
          
         
           h 
          
         
        
       
      
        R_{search} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">rc</span><span class="mord mathnormal mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>范围内的体素，以此作为阈值。代码实现使用了一个经验值：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          N 
         
        
          = 
         
        
          0.05 
         
        
          × 
         
         
          
           
           
             R 
            
            
            
              s 
             
            
              e 
             
            
              a 
             
            
              r 
             
            
              c 
             
            
              h 
             
            
           
             2 
            
           
          
            ∗ 
           
          
            π 
           
          
          
          
            R 
           
           
           
             v 
            
           
             o 
            
           
             x 
            
           
             e 
            
           
             l 
            
           
          
            2 
           
          
         
        
       
         N=0.05\times \frac{R_{search}^2*\pi}{R_{voxel}^2} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;"></span><span class="mord">0.05</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 2.4784em; vertical-align: -0.9873em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.4911em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7959em;"><span class="" style="top: -2.3987em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">l</span></span></span></span><span class="" style="top: -3.0448em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.3013em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -2.4169em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">rc</span><span class="mord mathnormal mtight">h</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2831em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.9873em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
<p>滤除噪声后，计算搜索范围内体素的梯度，将梯度最小的体素确定为最终的种子体素。梯度的计算公式如下：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
          ( 
         
        
          i 
         
        
          ) 
         
        
          = 
         
         
         
           ∑ 
          
          
          
            k 
           
          
            ∈ 
           
           
           
             V 
            
           
             adj 
            
           
          
         
         
          
          
            ∥ 
           
          
            V 
           
          
            ( 
           
          
            i 
           
          
            ) 
           
          
            − 
           
          
            V 
           
          
            ( 
           
          
            k 
           
          
            ) 
           
           
           
             ∥ 
            
            
            
              C 
             
            
              I 
             
            
              E 
             
            
              L 
             
            
              a 
             
            
              b 
             
            
           
          
          
          
            N 
           
           
           
             a 
            
           
             d 
            
           
             j 
            
           
          
         
        
          , 
         
        
       
         G(i) = \sum_{k \in V_{\text{adj}}} \frac{\| V(i) - V(k) \|_{CIELab}}{N_{adj}}, 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.9322em; vertical-align: -1.5052em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.05em;"><span class="" style="top: -1.8479em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.2222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3488em; margin-left: -0.2222em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">adj</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2901em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.5052em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.109em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.109em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">∥</span><span class="mord mathnormal" style="margin-right: 0.2222em;">V</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal" style="margin-right: 0.2222em;">V</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mclose">)</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0715em;">C</span><span class="mord mathnormal mtight" style="margin-right: 0.0785em;">I</span><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">E</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight">ab</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.9721em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span></span></span></span></span></span><br> CIELab是一种色彩空间，与我们熟悉的RGB、HSV等均用来描述颜色，</p> 
<ul><li>L* 表示亮度，从0（黑色）到100（白色）。</li><li>a* 表示从绿色到红色的颜色对立。</li><li>b* 表示从蓝色到黄色的颜色对立。</li></ul> 
<p>他的优势在于可以量化颜色的差异，回想RGB，RGB空间上的距离其实并不能让我们直观的感受出颜色的差异，而在CIELab空间中，数值相差的多少与我们眼睛直观感受到颜色的差异是成正比的。这个地方其实考虑的不是很周到，因为并不是所有点云数据都有对应的颜色信息。</p> 
<h4><a id="223_Features_and_Distance_Measure_38"></a>2.2.3 Features and Distance Measure</h4> 
<p>VCCS的超体素是用一个39维度的向量描述的<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          F 
         
        
          = 
         
        
          [ 
         
        
          x 
         
        
          , 
         
        
          y 
         
        
          , 
         
        
          z 
         
        
          , 
         
        
          L 
         
        
          , 
         
        
          a 
         
        
          , 
         
        
          b 
         
        
          , 
         
        
          F 
         
        
          P 
         
        
          F 
         
         
         
           H 
          
         
           1..33 
          
         
        
          ] 
         
        
       
         F=[x, y, z, L, a, b, FPFH_{1..33}] 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.044em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">FPF</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0813em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1..33</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span></span><br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         F 
        
       
         P 
        
       
         F 
        
       
         H 
        
       
      
        FPFH 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">FPF</span><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span></span></span></span></span>是点云的一种特征描述子，具有位姿不变性，用来描述点云的几何特性，计算复杂度是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         n 
        
       
         ⋅ 
        
       
         k 
        
       
         ) 
        
       
      
        O(n\cdot k) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mclose">)</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
      
        n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>是点云个数，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         k 
        
       
      
        k 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span></span></span></span></span>是计算特征子时所考虑的邻域点个数。</p> 
<p>为了计算<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         F 
        
       
      
        F 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span></span></span></span></span>之间的距离<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         D 
        
       
      
        D 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span></span></span></span></span>，需要先对各部分做归一化，这很容易理解，因为不同物理量的单位不同，不能使用相同的权重。公式中的<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         m 
        
       
      
        m 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span>是一个常数，没啥用。。。。论文中并没有明确指出测试使用的权重，实际需要根据自己对不同特征的侧重来选择<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          D 
         
        
          = 
         
         
          
           
            
            
              λ 
             
             
             
               D 
              
             
               c 
              
             
               2 
              
             
            
            
            
              m 
             
            
              2 
             
            
           
          
            + 
           
           
            
            
              μ 
             
             
             
               D 
              
             
               s 
              
             
               2 
              
             
            
            
            
              3 
             
             
             
               R 
              
              
              
                s 
               
              
                e 
               
              
                e 
               
              
                d 
               
              
             
            
           
          
            + 
           
          
            ϵ 
           
           
           
             D 
            
            
            
              H 
             
            
              i 
             
            
              K 
             
            
           
             2 
            
           
          
         
        
       
         D = \sqrt{\frac{\lambda D_c^2}{m^2} + \frac{\mu D_s^2}{3R_{seed}} + \epsilon D_{HiK}^2} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 3.04em; vertical-align: -1.1156em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.9244em;"><span class="svg-align" style="top: -5em;"><span class="pstrut" style="height: 5em;"></span><span class="mord" style="padding-left: 1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.4171em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.7401em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7401em;"><span class="" style="top: -2.453em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.4171em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">3</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">see</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7401em;"><span class="" style="top: -2.453em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.836em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">ϵ</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7959em;"><span class="" style="top: -2.4065em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0813em;">H</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right: 0.0715em;">K</span></span></span></span><span class="" style="top: -3.0448em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2935em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.8844em;"><span class="pstrut" style="height: 5em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 3.08em;"> 
            <svg width="400em" height="3.08em" viewbox="0 0 400000 3240" preserveaspectratio="xMinYMin slice"> 
             <path d="M473,2793
c339.3,-1799.3,509.3,-2700,510,-2702 l0 -0
c3.3,-7.3,9.3,-11,18,-11 H400000v40H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM1001 80h400000v40H1017.7z"></path> 
            </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.1156em;"><span class=""></span></span></span></span></span></span></span></span></span></span></p> 
<h4><a id="224_Flow_Constrained_Clustering_46"></a>2.2.4 Flow Constrained Clustering</h4> 
<p>本文的聚类方法是k-means的一种变体，会考虑到连通性和流动性。</p> 
<h5><a id="2241_kmeans_48"></a>2.2.4.1 k-means算法</h5> 
<img src="https://images2.imgbox.com/cd/ce/TVYlq5UK_o.png" height="300"> 
<h5><a id="2242__51"></a>2.2.4.2 本文的改进</h5> 
<p>从最靠近聚类中心的体素开始，向外流动到相邻的体素，计算与聚类中心的距离（用上一节的距离计算公式），如果距离是该体素见过的最小值，就会设置其标签，并使用邻接图将其邻居均添加到这个标签的搜索队列中。然后处理下一个超体素，这样所有超体素都能同时的向外进行。“We proceed iteratively outwards until we have reached the edge of the search volume for each supervoxel (or have no more neighbors to check).” 结束条件没看懂。。。。</p> 
<p>一旦所有超体素邻接图搜索结束，通过取每个组成部分的均值来更新每个超体素聚类的中心，不断迭代，直到聚类中心稳定下来。作者提到，VCCS使用五次迭代就基本稳定下来了。</p> 
<p>这种改进的优势在于，超体素的标签不能跨越在3D空间中不接触的物体边界，因为我们只考虑相邻的体素<br> <img src="https://images2.imgbox.com/f0/d5/zjOmbSRa_o.png"></p> 
<h3><a id="23_PCL_59"></a>2.3 PCL代码</h3> 
<p>测试代码来自pcl的应用示例</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pcl/console/parse.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pcl/point_cloud.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pcl/point_types.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pcl/io/pcd_io.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pcl/visualization/pcl_visualizer.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pcl/segmentation/supervoxel_clustering.h&gt;</span></span>

<span class="token comment">//VTK include needed for drawing graph lines</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vtkPolyLine.h&gt;</span></span>

<span class="token comment">// Types</span>
<span class="token keyword">typedef</span> pcl<span class="token double-colon punctuation">::</span>PointXYZRGBA PointT<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pcl<span class="token double-colon punctuation">::</span>PointCloud<span class="token operator">&lt;</span>PointT<span class="token operator">&gt;</span> PointCloudT<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pcl<span class="token double-colon punctuation">::</span>PointNormal PointNT<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pcl<span class="token double-colon punctuation">::</span>PointCloud<span class="token operator">&lt;</span>PointNT<span class="token operator">&gt;</span> PointNCloudT<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pcl<span class="token double-colon punctuation">::</span>PointXYZL PointLT<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pcl<span class="token double-colon punctuation">::</span>PointCloud<span class="token operator">&lt;</span>PointLT<span class="token operator">&gt;</span> PointLCloudT<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">addSupervoxelConnectionsToViewer</span> <span class="token punctuation">(</span>PointT <span class="token operator">&amp;</span>supervoxel_center<span class="token punctuation">,</span>
                                       PointCloudT <span class="token operator">&amp;</span>adjacent_supervoxel_centers<span class="token punctuation">,</span>
                                       std<span class="token double-colon punctuation">::</span>string supervoxel_name<span class="token punctuation">,</span>
                                       pcl<span class="token double-colon punctuation">::</span>visualization<span class="token double-colon punctuation">::</span>PCLVisualizer<span class="token double-colon punctuation">::</span>Ptr <span class="token operator">&amp;</span> viewer<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">int</span>
<span class="token function">main</span> <span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">print_error</span> <span class="token punctuation">(</span><span class="token string">"Syntax is: %s &lt;pcd-file&gt; \n "</span>
                                <span class="token string">"--NT Dsables the single cloud transform \n"</span>
                                <span class="token string">"-v &lt;voxel resolution&gt;\n-s &lt;seed resolution&gt;\n"</span>
                                <span class="token string">"-c &lt;color weight&gt; \n-z &lt;spatial weight&gt; \n"</span>
                                <span class="token string">"-n &lt;normal_weight&gt;\n"</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  PointCloudT<span class="token double-colon punctuation">::</span>Ptr <span class="token function">cloud</span> <span class="token punctuation">(</span><span class="token keyword">new</span> PointCloudT<span class="token punctuation">)</span><span class="token punctuation">;</span>
  pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">print_highlight</span> <span class="token punctuation">(</span><span class="token string">"Loading point cloud...\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pcl<span class="token double-colon punctuation">::</span>io<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">loadPCDFile</span><span class="token generic class-name"><span class="token operator">&lt;</span>PointT<span class="token operator">&gt;</span></span></span> <span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">print_error</span> <span class="token punctuation">(</span><span class="token string">"Error loading cloud file!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  <span class="token keyword">bool</span> disable_transform <span class="token operator">=</span> pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">find_switch</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"--NT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">float</span> voxel_resolution <span class="token operator">=</span> <span class="token number">0.008f</span><span class="token punctuation">;</span>
  <span class="token keyword">bool</span> voxel_res_specified <span class="token operator">=</span> pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">find_switch</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-v"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>voxel_res_specified<span class="token punctuation">)</span>
    pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">parse</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-v"</span><span class="token punctuation">,</span> voxel_resolution<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">float</span> seed_resolution <span class="token operator">=</span> <span class="token number">0.1f</span><span class="token punctuation">;</span>
  <span class="token keyword">bool</span> seed_res_specified <span class="token operator">=</span> pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">find_switch</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>seed_res_specified<span class="token punctuation">)</span>
    pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">parse</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-s"</span><span class="token punctuation">,</span> seed_resolution<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">float</span> color_importance <span class="token operator">=</span> <span class="token number">0.2f</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">find_switch</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-c"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">parse</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-c"</span><span class="token punctuation">,</span> color_importance<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">float</span> spatial_importance <span class="token operator">=</span> <span class="token number">0.4f</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">find_switch</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-z"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">parse</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-z"</span><span class="token punctuation">,</span> spatial_importance<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">float</span> normal_importance <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">find_switch</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">parse</span> <span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"-n"</span><span class="token punctuation">,</span> normal_importance<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  //</span>
  <span class="token comment">// This is how to use supervoxels</span>
  <span class="token comment">//  //</span>

  pcl<span class="token double-colon punctuation">::</span>SupervoxelClustering<span class="token operator">&lt;</span>PointT<span class="token operator">&gt;</span> <span class="token function">super</span> <span class="token punctuation">(</span>voxel_resolution<span class="token punctuation">,</span> seed_resolution<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>disable_transform<span class="token punctuation">)</span>
    super<span class="token punctuation">.</span><span class="token function">setUseSingleCameraTransform</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  super<span class="token punctuation">.</span><span class="token function">setInputCloud</span> <span class="token punctuation">(</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>
  super<span class="token punctuation">.</span><span class="token function">setColorImportance</span> <span class="token punctuation">(</span>color_importance<span class="token punctuation">)</span><span class="token punctuation">;</span>
  super<span class="token punctuation">.</span><span class="token function">setSpatialImportance</span> <span class="token punctuation">(</span>spatial_importance<span class="token punctuation">)</span><span class="token punctuation">;</span>
  super<span class="token punctuation">.</span><span class="token function">setNormalImportance</span> <span class="token punctuation">(</span>normal_importance<span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token double-colon punctuation">::</span>map <span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span><span class="token keyword">uint32_t</span><span class="token punctuation">,</span> pcl<span class="token double-colon punctuation">::</span>Supervoxel<span class="token operator">&lt;</span>PointT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>Ptr <span class="token operator">&gt;</span> supervoxel_clusters<span class="token punctuation">;</span>

  pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">print_highlight</span> <span class="token punctuation">(</span><span class="token string">"Extracting supervoxels!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  super<span class="token punctuation">.</span><span class="token function">extract</span> <span class="token punctuation">(</span>supervoxel_clusters<span class="token punctuation">)</span><span class="token punctuation">;</span>
  pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">print_info</span> <span class="token punctuation">(</span><span class="token string">"Found %d supervoxels\n"</span><span class="token punctuation">,</span> supervoxel_clusters<span class="token punctuation">.</span><span class="token function">size</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  pcl<span class="token double-colon punctuation">::</span>visualization<span class="token double-colon punctuation">::</span>PCLVisualizer<span class="token double-colon punctuation">::</span>Ptr <span class="token function">viewer</span> <span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token double-colon punctuation">::</span>visualization<span class="token double-colon punctuation">::</span><span class="token function">PCLVisualizer</span> <span class="token punctuation">(</span><span class="token string">"3D Viewer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token operator">-&gt;</span><span class="token function">setBackgroundColor</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  PointCloudT<span class="token double-colon punctuation">::</span>Ptr voxel_centroid_cloud <span class="token operator">=</span> super<span class="token punctuation">.</span><span class="token function">getVoxelCentroidCloud</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token operator">-&gt;</span><span class="token function">addPointCloud</span> <span class="token punctuation">(</span>voxel_centroid_cloud<span class="token punctuation">,</span> <span class="token string">"voxel centroids"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token operator">-&gt;</span><span class="token function">setPointCloudRenderingProperties</span> <span class="token punctuation">(</span>pcl<span class="token double-colon punctuation">::</span>visualization<span class="token double-colon punctuation">::</span>PCL_VISUALIZER_POINT_SIZE<span class="token punctuation">,</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token string">"voxel centroids"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token operator">-&gt;</span><span class="token function">setPointCloudRenderingProperties</span> <span class="token punctuation">(</span>pcl<span class="token double-colon punctuation">::</span>visualization<span class="token double-colon punctuation">::</span>PCL_VISUALIZER_OPACITY<span class="token punctuation">,</span><span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token string">"voxel centroids"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  PointLCloudT<span class="token double-colon punctuation">::</span>Ptr labeled_voxel_cloud <span class="token operator">=</span> super<span class="token punctuation">.</span><span class="token function">getLabeledVoxelCloud</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token operator">-&gt;</span><span class="token function">addPointCloud</span> <span class="token punctuation">(</span>labeled_voxel_cloud<span class="token punctuation">,</span> <span class="token string">"labeled voxels"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token operator">-&gt;</span><span class="token function">setPointCloudRenderingProperties</span> <span class="token punctuation">(</span>pcl<span class="token double-colon punctuation">::</span>visualization<span class="token double-colon punctuation">::</span>PCL_VISUALIZER_OPACITY<span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token string">"labeled voxels"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  PointNCloudT<span class="token double-colon punctuation">::</span>Ptr sv_normal_cloud <span class="token operator">=</span> super<span class="token punctuation">.</span><span class="token function">makeSupervoxelNormalCloud</span> <span class="token punctuation">(</span>supervoxel_clusters<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//We have this disabled so graph is easy to see, uncomment to see supervoxel normals</span>
  <span class="token comment">//viewer-&gt;addPointCloudNormals&lt;PointNormal&gt; (sv_normal_cloud,1,0.05f, "supervoxel_normals");</span>

  pcl<span class="token double-colon punctuation">::</span>console<span class="token double-colon punctuation">::</span><span class="token function">print_highlight</span> <span class="token punctuation">(</span><span class="token string">"Getting supervoxel adjacency\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  std<span class="token double-colon punctuation">::</span>multimap<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span><span class="token keyword">uint32_t</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token keyword">uint32_t</span><span class="token operator">&gt;</span> supervoxel_adjacency<span class="token punctuation">;</span>
  super<span class="token punctuation">.</span><span class="token function">getSupervoxelAdjacency</span> <span class="token punctuation">(</span>supervoxel_adjacency<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//To make a graph of the supervoxel adjacency, we need to iterate through the supervoxel adjacency multimap</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> label_itr <span class="token operator">=</span> supervoxel_adjacency<span class="token punctuation">.</span><span class="token function">cbegin</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> label_itr <span class="token operator">!=</span> supervoxel_adjacency<span class="token punctuation">.</span><span class="token function">cend</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//First get the label</span>
    std<span class="token double-colon punctuation">::</span><span class="token keyword">uint32_t</span> supervoxel_label <span class="token operator">=</span> label_itr<span class="token operator">-&gt;</span>first<span class="token punctuation">;</span>
    <span class="token comment">//Now get the supervoxel corresponding to the label</span>
    pcl<span class="token double-colon punctuation">::</span>Supervoxel<span class="token operator">&lt;</span>PointT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>Ptr supervoxel <span class="token operator">=</span> supervoxel_clusters<span class="token punctuation">.</span><span class="token function">at</span> <span class="token punctuation">(</span>supervoxel_label<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//Now we need to iterate through the adjacent supervoxels and make a point cloud of them</span>
    PointCloudT adjacent_supervoxel_centers<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> adjacent_itr <span class="token operator">=</span> supervoxel_adjacency<span class="token punctuation">.</span><span class="token function">equal_range</span> <span class="token punctuation">(</span>supervoxel_label<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">;</span> adjacent_itr<span class="token operator">!=</span>supervoxel_adjacency<span class="token punctuation">.</span><span class="token function">equal_range</span> <span class="token punctuation">(</span>supervoxel_label<span class="token punctuation">)</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token operator">++</span>adjacent_itr<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      pcl<span class="token double-colon punctuation">::</span>Supervoxel<span class="token operator">&lt;</span>PointT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>Ptr neighbor_supervoxel <span class="token operator">=</span> supervoxel_clusters<span class="token punctuation">.</span><span class="token function">at</span> <span class="token punctuation">(</span>adjacent_itr<span class="token operator">-&gt;</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
      adjacent_supervoxel_centers<span class="token punctuation">.</span><span class="token function">push_back</span> <span class="token punctuation">(</span>neighbor_supervoxel<span class="token operator">-&gt;</span>centroid_<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//Now we make a name for this polygon</span>
    std<span class="token double-colon punctuation">::</span>stringstream ss<span class="token punctuation">;</span>
    ss <span class="token operator">&lt;&lt;</span> <span class="token string">"supervoxel_"</span> <span class="token operator">&lt;&lt;</span> supervoxel_label<span class="token punctuation">;</span>
    <span class="token comment">//This function is shown below, but is beyond the scope of this tutorial - basically it just generates a "star" polygon mesh from the points given</span>
    <span class="token function">addSupervoxelConnectionsToViewer</span> <span class="token punctuation">(</span>supervoxel<span class="token operator">-&gt;</span>centroid_<span class="token punctuation">,</span> adjacent_supervoxel_centers<span class="token punctuation">,</span> ss<span class="token punctuation">.</span><span class="token function">str</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> viewer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Move iterator forward to next label</span>
    label_itr <span class="token operator">=</span> supervoxel_adjacency<span class="token punctuation">.</span><span class="token function">upper_bound</span> <span class="token punctuation">(</span>supervoxel_label<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>viewer<span class="token operator">-&gt;</span><span class="token function">wasStopped</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    viewer<span class="token operator">-&gt;</span><span class="token function">spinOnce</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span>
<span class="token function">addSupervoxelConnectionsToViewer</span> <span class="token punctuation">(</span>PointT <span class="token operator">&amp;</span>supervoxel_center<span class="token punctuation">,</span>
                                  PointCloudT <span class="token operator">&amp;</span>adjacent_supervoxel_centers<span class="token punctuation">,</span>
                                  std<span class="token double-colon punctuation">::</span>string supervoxel_name<span class="token punctuation">,</span>
                                  pcl<span class="token double-colon punctuation">::</span>visualization<span class="token double-colon punctuation">::</span>PCLVisualizer<span class="token double-colon punctuation">::</span>Ptr <span class="token operator">&amp;</span> viewer<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  vtkSmartPointer<span class="token operator">&lt;</span>vtkPoints<span class="token operator">&gt;</span> points <span class="token operator">=</span> <span class="token class-name">vtkSmartPointer</span><span class="token operator">&lt;</span>vtkPoints<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">New</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  vtkSmartPointer<span class="token operator">&lt;</span>vtkCellArray<span class="token operator">&gt;</span> cells <span class="token operator">=</span> <span class="token class-name">vtkSmartPointer</span><span class="token operator">&lt;</span>vtkCellArray<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">New</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  vtkSmartPointer<span class="token operator">&lt;</span>vtkPolyLine<span class="token operator">&gt;</span> polyLine <span class="token operator">=</span> <span class="token class-name">vtkSmartPointer</span><span class="token operator">&lt;</span>vtkPolyLine<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">New</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//Iterate through all adjacent points, and add a center point to adjacent point pair</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> adjacent_itr <span class="token operator">=</span> adjacent_supervoxel_centers<span class="token punctuation">.</span><span class="token function">begin</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> adjacent_itr <span class="token operator">!=</span> adjacent_supervoxel_centers<span class="token punctuation">.</span><span class="token function">end</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>adjacent_itr<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    points<span class="token operator">-&gt;</span><span class="token function">InsertNextPoint</span> <span class="token punctuation">(</span>supervoxel_center<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    points<span class="token operator">-&gt;</span><span class="token function">InsertNextPoint</span> <span class="token punctuation">(</span>adjacent_itr<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Create a polydata to store everything in</span>
  vtkSmartPointer<span class="token operator">&lt;</span>vtkPolyData<span class="token operator">&gt;</span> polyData <span class="token operator">=</span> <span class="token class-name">vtkSmartPointer</span><span class="token operator">&lt;</span>vtkPolyData<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">New</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Add the points to the dataset</span>
  polyData<span class="token operator">-&gt;</span><span class="token function">SetPoints</span> <span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">;</span>
  polyLine<span class="token operator">-&gt;</span><span class="token function">GetPointIds</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">SetNumberOfIds</span><span class="token punctuation">(</span>points<span class="token operator">-&gt;</span><span class="token function">GetNumberOfPoints</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> points<span class="token operator">-&gt;</span><span class="token function">GetNumberOfPoints</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    polyLine<span class="token operator">-&gt;</span><span class="token function">GetPointIds</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">SetId</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  cells<span class="token operator">-&gt;</span><span class="token function">InsertNextCell</span> <span class="token punctuation">(</span>polyLine<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Add the lines to the dataset</span>
  polyData<span class="token operator">-&gt;</span><span class="token function">SetLines</span> <span class="token punctuation">(</span>cells<span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token operator">-&gt;</span><span class="token function">addModelFromPolyData</span> <span class="token punctuation">(</span>polyData<span class="token punctuation">,</span>supervoxel_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_230"></a>效果以及调参建议</h4> 
<ul><li>需要调整的参数有五个<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           R 
          
          
          
            s 
           
          
            e 
           
          
            e 
           
          
            d 
           
          
         
        
       
         R_{seed} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">see</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           R 
          
          
          
            v 
           
          
            o 
           
          
            x 
           
          
            e 
           
          
            l 
           
          
         
        
       
         R_{voxel} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          λ 
         
        
       
         \lambda 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">λ</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          μ 
         
        
       
         \mu 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">μ</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          ϵ 
         
        
       
         \epsilon 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span></span>，对于没有RGB信息的点云，颜色权重可以设为0</li><li>比较好的效果应该如下图所示（注释掉了<code>addSupervoxelConnectionsToViewer </code>）<br> <img src="https://images2.imgbox.com/2a/99/nA8jgKv7_o.png" height="300"><br> 不同颜色代表不同的supervoxel，放大点云观察物体交界的地方，可以看到VCCS确实具有抑制supervoxel越过物体边界的效果。降低normal_importance之后，效果减弱，supervoxel会跨越边界。</li><li>如果发现有空洞的情况出现，下图进行了一种比较极端的展示<br> <img src="https://images2.imgbox.com/32/29/LI4wdUsY_o.png" height="300"><br> 这种情况是因为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           R 
          
          
          
            v 
           
          
            o 
           
          
            x 
           
          
            e 
           
          
            l 
           
          
         
        
       
         R_{voxel} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>设置的太小，已经接近了实际点云的点间距，尤其是对于RGB-D数据，距离越远点云越稀疏，所以出现了很多没被栅格化的区域；而同时<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           R 
          
          
          
            s 
           
          
            e 
           
          
            e 
           
          
            d 
           
          
         
        
       
         R_{seed} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0077em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">see</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>设置的太大，导致很多点被当作离群点去除了。</li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/05668876d7b339c25159ebac5b1b0ddc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Qt之QStandardItemModel类】介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7b00164a515accf92924143848604ab2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JDK1.8 新特性（一）【默认方法、静态方法和Lambda表达式】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>