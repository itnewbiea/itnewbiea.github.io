<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>『Python爬虫』抓包工具 Fiddler 入门教程 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="『Python爬虫』抓包工具 Fiddler 入门教程" />
<meta property="og:description" content="如今Python爬虫越来越火，有想学好Python爬虫的小伙伴可以前往gzh【Python编程学习圈】领取系统的学习资料以及教程视频，还分享有大量的技术干货文章可以阅读学习，欢迎大家关注学习。
传统的抓包工具，如：Fiddler、Charles、Wireshark、Tcpdump，大家肯定都不陌生了；
今天我们就来聊一聊这款常用的抓包工具：Fiddler；
fiddler简介 Fiddler是个蛮好用的抓包工具，也是比较好用的web代理调试工具之一；
它能记录并检查所有客户端与服务端的HTTP/HTTPS请求，能够设置断点，篡改及伪造Request/Response的数据；
修改hosts、限制网速、http请求性能统计、简单并发、接口测试、辅助自动化测试等等，也可以用来检测网络安全。
Fiddler与其他抓包工具 ① Firebug
虽然它可以抓包，但对于分析http请求的详细信息不够强大，模拟http请求的功能也不够。
且firebug常常是需要“无刷新修改”，如果刷新了页面，所有的修改都不会保存；
② Wireshark：
通用的抓包工具，能获取HTTP，也能获取HTTPS，但是不能解密HTTPS，所以wireshark看不懂HTTPS中的内容。
但如果是TCP、UDP协议可以用wireshark；
③ Httpwatch
也是比较常用的http抓包工具，但是只支持IE和firefox浏览器（其他浏览器可能会有相应的插件）；
而Fiddler 是一个使用本地 127.0.0.1:8888 的 HTTP 代理，任何能够设置 HTTP 代理为 127.0.0.1:8888 的浏览器和应用程序都可以使用 Fiddler。
爬虫与Fiddler：
在一些稍复杂的网络请求中，我们直接看网址的变化是看不出规律的，如果要自动爬取，就必须通过程序构造这些请求，并分析这些请求的规律。
进行登录时，很多网页的真实登录处理并不是我们看到的网址，这些网址一般需要通过工具进行分析得出。
分析过程中，抓包软件的配合会变得更加方便。
Fiddler的工作原理 Fiddler是以代理WEB服务器的形式工作的，它默认使用代理地址**:127.0.0.1**， 端口**:8888**。 当Fiddler开启时会自动设置代理， 退出的时候它会自动注销代理，这样就不会影响别的程序。
不过如果Fiddler非正常退出，这时候因为Fiddler没有自动注销，会造成网页无法访问。
解决的办法是重新启动下Fiddler；
Fiddler界面 Fiddler想要抓到数据包，要确保Capture Traffic是开启，在File –&gt; Capture Traffic。
开启后再左下角会有显示，当然也可以直接点击界面底栏左下角的图标来关闭/开启抓包功能。
左边面板
左边web session面板的字段及图标含义；
右边面板
右边是详情和数据统计面板；
1）Statistics
关于HTTP请求的性能（例如发送/接受字节数，发送/接收时间，还有粗略统计世界各地访问该服务器所花费的时间）以及数据分析。
2）Inspectors
是用于查看会话的内容，上半部分是请求的内容，下半部分是响应的内容；
提供headers、textview、hexview,Raw等多种方式查看单条http请求的请求报文的信息。
3）AutoResponder 可用于拦截某一请求，即按自己添加的指定规则重定向到本地的资源或Fiddler资源，从而代替服务器响应。
4）Composer 自定义请求发送服务器，Parsed模式下你只需要提供简单的URLS地址即可；
5）Filters 即过滤规则，通过设置过滤规则来过滤所需的http请求，勾选Use Filters开启过滤器。
内外网过滤：
对host过滤：
输入多个HOST，多个之前用半角逗号或者回车分隔；
支持通配符：*,baidu.com；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/dbda12a9a906bdbfa27d71f7ec73de58/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-23T11:10:59+08:00" />
<meta property="article:modified_time" content="2022-05-23T11:10:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">『Python爬虫』抓包工具 Fiddler 入门教程</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> 如今Python爬虫越来越火，有想学好Python爬虫的小伙伴可以前往gzh【Python编程学习圈】领取系统的学习资料以及教程视频，还分享有大量的技术干货文章可以阅读学习，欢迎大家关注学习。</p> 
<p>传统的抓包工具，如：Fiddler、Charles、Wireshark、Tcpdump，大家肯定都不陌生了；</p> 
<p>今天我们就来聊一聊这款常用的抓包工具：Fiddler；</p> 
<h4>fiddler简介</h4> 
<p>Fiddler是个蛮好用的抓包工具，也是比较好用的web代理调试工具之一；</p> 
<p>它能记录并检查所有客户端与服务端的HTTP/HTTPS请求，能够设置断点，篡改及伪造Request/Response的数据；</p> 
<p>修改hosts、限制网速、http请求性能统计、简单并发、接口测试、辅助自动化测试等等，也可以用来检测网络安全。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/fd/b0/DZD5kODL_o.png"></p> 
<h4>Fiddler与其他抓包工具</h4> 
<p><strong>① Firebug</strong></p> 
<p>虽然它可以抓包，但对于分析http请求的详细信息不够强大，模拟http请求的功能也不够。</p> 
<p>且firebug常常是需要“无刷新修改”，如果刷新了页面，所有的修改都不会保存；</p> 
<p><strong>② Wireshark：</strong></p> 
<p>通用的抓包工具，能获取HTTP，也能获取HTTPS，但是不能解密HTTPS，所以wireshark看不懂HTTPS中的内容。</p> 
<p>但如果是TCP、UDP协议可以用wireshark；</p> 
<p><strong>③ Httpwatch</strong></p> 
<p>也是比较常用的http抓包工具，但是只支持IE和firefox浏览器（其他浏览器可能会有相应的插件）；</p> 
<p>而Fiddler 是一个使用本地 127.0.0.1:8888 的 HTTP 代理，任何能够设置 HTTP 代理为 127.0.0.1:8888 的浏览器和应用程序都可以使用 Fiddler。</p> 
<p><strong>爬虫与Fiddler：</strong></p> 
<p>在一些稍复杂的网络请求中，我们直接看网址的变化是看不出规律的，如果要自动爬取，就必须通过程序构造这些请求，并分析这些请求的规律。</p> 
<p>进行登录时，很多网页的真实登录处理并不是我们看到的网址，这些网址一般需要通过工具进行分析得出。</p> 
<p>分析过程中，抓包软件的配合会变得更加方便。</p> 
<h4>Fiddler的工作原理</h4> 
<p>Fiddler是以代理WEB服务器的形式工作的，它默认使用代理地址**:127.0.0.1**， 端口**:8888**。 </p> 
<p>当Fiddler开启时会自动设置代理， 退出的时候它会自动注销代理，这样就不会影响别的程序。</p> 
<p>不过如果Fiddler非正常退出，这时候因为Fiddler没有自动注销，会造成网页无法访问。</p> 
<p>解决的办法是重新启动下Fiddler；</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/59/da/BZUnHnKn_o.png"></p> 
<h4>Fiddler界面</h4> 
<p>Fiddler想要抓到数据包，要确保Capture Traffic是开启，在File –&gt; Capture Traffic。</p> 
<p>开启后再左下角会有显示，当然也可以直接点击界面底栏左下角的图标来关闭/开启抓包功能。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a9/c6/dlfYUQMW_o.png"></p> 
<p><strong>左边面板</strong></p> 
<p>左边web session面板的字段及图标含义；</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/97/f0/CNo07VmT_o.png"></p> 
<p><strong>右边面板</strong></p> 
<p>右边是详情和数据统计面板；</p> 
<p><strong>1）Statistics</strong></p> 
<p>关于HTTP请求的性能（例如发送/接受字节数，发送/接收时间，还有粗略统计世界各地访问该服务器所花费的时间）以及数据分析。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/90/69/yg6FTb8R_o.png"></p> 
<p><strong>2）Inspectors</strong></p> 
<p>是用于查看会话的内容，上半部分是请求的内容，下半部分是响应的内容；</p> 
<p>提供headers、textview、hexview,Raw等多种方式查看单条http请求的请求报文的信息。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/91/35/qPRVDTFo_o.png"></p> 
<p><strong>3）AutoResponder </strong></p> 
<p>可用于拦截某一请求，即按自己添加的指定规则重定向到本地的资源或Fiddler资源，从而代替服务器响应。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/2b/35/lN4fi1Gt_o.png"></p> 
<p><strong>4）Composer </strong></p> 
<p>自定义请求发送服务器，Parsed模式下你只需要提供简单的URLS地址即可；</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/1d/70/6LwkdpFW_o.png"></p> 
<p><strong>5）Filters </strong></p> 
<p>即过滤规则，通过设置过滤规则来过滤所需的http请求，勾选Use Filters开启过滤器。</p> 
<p>内外网过滤：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/63/5e/fi5tsJmR_o.png"></p> 
<p>对host过滤：</p> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/1c/26/XTSGtvzZ_o.png"></p> 
<p>输入多个HOST，多个之前用半角逗号或者回车分隔；</p> 
<p>支持通配符：*,baidu.com；</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/61/e5/7wuMNPBO_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/98/8d/77Srg1Oi_o.png"></p> 
<p>这里有两个最常用的过滤条件：Zone和Host；<br>  </p> 
<ul><li> <p>Zone 指定只显示内网（Intranet）或互联网（Internet）的内容；</p> </li><li> <p>Host 指定显示某个域名下的会话；</p> </li></ul> 
<p><strong>6）timeline </strong></p> 
<p>请求响应时间，在左侧会话窗口点击一个或多个请求，Timeline 便会显示指定内容从服务端传输到客户端的时间：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ad/dc/MTaiyGbj_o.png"></p> 
<h4>Fiddler设置代理</h4> 
<p>fiddler是一个很好的抓包工具，默认是抓http请求的，对于pc上的https请求，会提示网页不安全，这时候需要在浏览器上安装证书。</p> 
<p>谷歌、IE浏览器</p> 
<p>谷歌浏览器和IE浏览器启动的时候，就会默认读取系统代理，所以只需要将Fiddler设置为启动后作为系统代理即可。</p> 
<p>设置启动即作为系统代理——点击Tools-&gt;Options-&gt;Connections；</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/07/6d/D865B2QL_o.png"></p> 
<p>这样设置后，我们在谷歌浏览器和IE浏览器访问HTTP请求，就会在Fiddler工具左侧中显示出请求，但是HTTPS的请求却没有显示出来？</p> 
<p>原因Fiddler作为一个代理服务器，是可以代理到HTTPS请求的。</p> 
<p>但是HTTPS可以理解为HTTPS=HTTP+SSL/TLS,也就是HTTPS是加密的，是有证书存在的，所以我们需要配置解密HTTPS并安装证书。</p> 
<p>配置解密HTTPS并安装证书——点击Tools-&gt;Options-&gt;HTTPS。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c4/6a/CxaDhcnA_o.png"></p> 
<p>查看证书是否安装成功</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/68/5e/FDOiVA6K_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/72/2f/4YTAZ3K5_o.png"></p> 
<p>浏览器中访问HTTPS的页面，也能在Fiddler中显示；</p> 
<h4>Fiddler断点功能</h4> 
<p>通信过程中，在传递信息的中间进行修改后再传递，那么就可以使用Fiddler的断点功能。</p> 
<p>（1）使用Fiddler的断点，可以实现的功能：</p> 
<ul><li> <p>拦截响应数据，并进行相应修改</p> </li><li> <p>修改请求数据中的头信息，实现相应功能，比如模拟用户请求等功能</p> </li><li> <p>构建请求数据，随意进行数据提交</p> </li></ul> 
<p>断点可以打到两个地方:</p> 
<ul><li> <p>before response：这个是打在request请求的时候，未到达服务器之前。</p> </li><li> <p>after response：也就是服务器响应之后，在Fiddler将响应传回给客户端之前。</p> </li></ul> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/28/56/lDY0ojzZ_o.png"></p> 
<p><strong>断点请求/响应</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/72/9c/V8jgwX3l_o.png"></p> 
<p>如图，箭头所指的位置时可以点击的，共三种状态：</p> 
<ul><li> <p>空白：不设置断点。</p> </li><li> <p>箭头向上：表示断点请求。此时客户端的请求是无法直接到达目标服务器的，需要手动控制。</p> </li><li> <p>箭头向下：表示断点响应。此时目标服务器的响应是无法直接到达客户端的，需要手动控制。</p> </li></ul> 
<p>还有一种打断点的方式：在命令行中输入命令； </p> 
<ul><li> <p>bpu www.baidu.com  （断点请求）</p> </li><li> <p>bpuafter www.baidu.com（断点响应）</p> </li></ul> 
<p>这种方法只会中断www.baidu.com；</p> 
<p><strong>断点请求并修改</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ee/41/xlum9t39_o.png"></p> 
<p> 操作步骤:</p> 
<ul><li> <p>设置断点请求，访问网页</p> </li><li> <p>点击对应的会话</p> </li><li> <p>查看请求报文信息</p> </li><li> <p>修改请求内容</p> </li><li> <p>完成断点，放行，把该请求发送给目标服务器</p> </li></ul> 
<p>图中Break On Response表示把请求发给服务器，但是服务器的响应被fiddler拦截，此时可以修改响应内容（和断点响应类似）。</p> 
<p><strong>-&gt; 断点响应并修改</strong></p> 
<ul><li> <p>和断点请求操作类似，只是在响应区域修改报文信息即可。</p> </li><li> <p>在断点响应时，请注意超时时间。</p> </li></ul> 
<p><strong>-&gt; Fiddler中拦截请求：</strong></p> 
<ul><li> <p>F11先开始拦截，然后在发送请求</p> </li><li> <p>修改拦截下来的请求，修改数据</p> </li><li> <p>shift+F11关闭拦截</p> </li><li> <p>run to complete，把所有拦截下来的请求发送过去</p> </li></ul> 
<p><strong>-&gt; Fiddler中拦截响应：</strong></p> 
<ul><li> <p>alt+F11开始拦截</p> </li><li> <p>修改数据</p> </li><li> <p>shift+F11关闭拦截</p> </li><li> <p>run to complete，把修改的请求发送过去</p> </li></ul> 
<p><strong>断点命令</strong></p> 
<p>断点的命令则可以精确设置需要截获那些请求，如下表所示：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/59/06/c09PhZjh_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a7/b1/pUI1OzDn_o.png"></p> 
<p>注意：</p> 
<p>如bpafter断点命令使用方法为：bpafter 后边跟字符串-&gt;表示中断所有包含该字符串的请求；bpafter -&gt;表示解除刚刚的中断断点；</p> 
<p>命令设置断点</p> 
<pre><code>响应断点
bqafter 百度一下，你就知道  对www.baidu.com进行响应断点
bqafter                取消响应断点

请求断点
bp  百度一下，你就知道      对www.baidu.com进行请求断点
bp                     取消请求断点</code></pre> 
<h4>手机端抓包操作</h4> 
<p>以Android手机上配置Fiddler工具为主，讲解配置手机抓包过程。</p> 
<p>配置Android手机</p> 
<p>Fiddler配置中Connections中设置允许远程连接和端口号。</p> 
<p>手机端设置：手机端与Fiddler工具所在电脑处于同一个网络中。</p> 
<p>查看电脑的IP 地址，手机网络代理指定为电脑IP地址；</p> 
<p>打开设置 &gt; WLAN &gt; 连接上的 WLAN 设置，点击代理 &gt; 手动，设置主机名为 Fiddler 所在主机的 IP，端口为 Fiddler 监听端口。</p> 
<p>安装Fiddler证书；用浏览器打开证书地址，点击页面底部 FiddlerRoot certificate下载证书，打开设置 &gt; 安全&gt;更多安全设置 &gt; 加密和凭据 &gt; 从存储设备安装，选择下载好的 FiddlerRoot.cer 进行安装。</p> 
<p>浏览器打开目标地址，已经可以抓取 HTTPS 包了；</p> 
<p>注意：测试完毕，记得关闭代理，否则手机无法上网！</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/9e/59/MfvVHZQo_o.png"></p> 
<p>最后再多说一句：Fiddler请谨慎使用！</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/80a82cb1389ea78fb72e5599199cef6b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">USB转RS422带隔离电路设计(CAIS3082W替代方案)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/210e441a6480bdff3dc105bd993d08e0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Autodesk Maya Unreal LiveLink 构建踩坑记录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>