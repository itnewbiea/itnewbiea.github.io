<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>组件（模糊查询数据select下拉表单） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="组件（模糊查询数据select下拉表单）" />
<meta property="og:description" content="&lt;template&gt; &lt;div&gt; &lt;el-form ref=&#34;Ref&#34; :model=&#34;Form&#34; :rules=&#34;rulesForm&#34; :disabled=&#34;zjdisabled&#34; label-width=&#34;100px&#34;&gt; &lt;el-row&gt; &lt;el-col :span=&#34;8&#34;&gt; &lt;el-form-item prop=&#34;mzh&#34; label=&#34;门诊号：&#34;&gt; &lt;el-select @change=&#34;(value) =&gt; handleSelect(value, &#39;mzh&#39;)&#34; v-model=&#34;Form.mzh&#34; filterable remote placeholder=&#34;请选择门诊号&#34; :remote-method=&#34;(query) =&gt; remoteMethod(query, &#39;mzh&#39;)&#34; :loading=&#34;loading&#34;&gt; &lt;el-option v-for=&#34;item in options&#34; :key=&#34;item&#34; :label=&#34;item&#34; :value=&#34;item&#34; /&gt; &lt;/el-select&gt; &lt;/el-form-item&gt; &lt;/el-col&gt; &lt;el-col :span=&#34;8&#34;&gt; &lt;el-form-item prop=&#34;zyh&#34; label=&#34;住院号：&#34;&gt; &lt;el-select @change=&#34;(value) =&gt; handleSelect(value, &#39;zyh&#39;)&#34; v-model=&#34;Form.zyh&#34; filterable remote placeholder=&#34;请输入住院号&#34; :remote-method=&#34;(query) =&gt; remoteMethod(query, &#39;zyh&#39;)&#34; :loading=&#34;loading&#34;&gt; &lt;el-option v-for=&#34;item in zyhoptions&#34; :key=&#34;item&#34; :label=&#34;item&#34; :value=&#34;item&#34; /&gt; &lt;/el-select&gt; &lt;/el-form-item&gt; &lt;/el-col&gt; &lt;el-col :span=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4a76e04093a50ada06dcf1c964834863/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-23T10:07:37+08:00" />
<meta property="article:modified_time" content="2022-08-23T10:07:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">组件（模糊查询数据select下拉表单）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-form ref="Ref" :model="Form" :rules="rulesForm" :disabled="zjdisabled" label-width="100px"&gt;
      &lt;el-row&gt;
        &lt;el-col :span="8"&gt;
          &lt;el-form-item prop="mzh" label="门诊号："&gt;
            &lt;el-select @change="(value) =&gt; handleSelect(value, 'mzh')" v-model="Form.mzh" filterable remote
              placeholder="请选择门诊号" :remote-method="(query) =&gt; remoteMethod(query, 'mzh')" :loading="loading"&gt;
              &lt;el-option v-for="item in options" :key="item" :label="item" :value="item" /&gt;
            &lt;/el-select&gt;
          &lt;/el-form-item&gt;
        &lt;/el-col&gt;
        &lt;el-col :span="8"&gt;
          &lt;el-form-item prop="zyh" label="住院号："&gt;
            &lt;el-select @change="(value) =&gt; handleSelect(value, 'zyh')" v-model="Form.zyh" filterable remote
              placeholder="请输入住院号" :remote-method="(query) =&gt; remoteMethod(query, 'zyh')" :loading="loading"&gt;
              &lt;el-option v-for="item in zyhoptions" :key="item" :label="item" :value="item" /&gt;
            &lt;/el-select&gt;
          &lt;/el-form-item&gt;
        &lt;/el-col&gt;
        &lt;el-col :span="8"&gt;
          &lt;el-form-item prop="xm" label="姓名："&gt;
            &lt;el-select @change="(value) =&gt; handleSelect(value, 'xm')" v-model="Form.xm" filterable remote
              placeholder="请输入姓名" :remote-method="(query) =&gt; remoteMethod(query, 'xm')" :loading="loading"&gt;
              &lt;el-option v-for="item in xmoptions" :key="item" :label="item" :value="item" /&gt;
            &lt;/el-select&gt;
          &lt;/el-form-item&gt;
        &lt;/el-col&gt;
      &lt;/el-row&gt;
    &lt;/el-form&gt;
    &lt;el-divider style="margin:10px" /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;

const { proxy } = getCurrentInstance();
const data = reactive({
  Form: {
    mzh: "",
    zyh: "",
    xm: "",
  },
  rulesForm: {
    mzh: [{ required: true, message: "门诊号不可为空", trigger: "blur" }],
    xm: [{ required: true, message: "姓名不可为空", trigger: "blur" }],
    zyh: [{ required: true, message: "住院号不可为空", trigger: "blur" }],
  },
});
const options = ref([])
const xmoptions = ref([])
const zyhoptions = ref([])
const loading = ref(false)
const { Form, rulesForm, } = toRefs(data);
const emit = defineEmits(["childChange"]);
const handleSelect = async (value, flag) =&gt; {
  if (!value) return
  const { data: res } = await proxy.$postRequest(
    "hzxx/selectHzByFlag",
    {
      flag: flag,
      val: value
    }
  );
  if (res.status == 200) {
    const { mzh, zyh, xm } = res.data;
    Form.value.zyh = zyh;
    Form.value.xm = xm;
    Form.value.mzh = mzh;
  } else {
    proxy.$message.error(res.msg);
  }
  // 必须经过defineEmits声明，不然方法无效！
  emit("childChange", Form.value);
};
watch(props, (val) =&gt; {
  Form.value = val.data
}, { deep: true })
const props = defineProps({
  data: {
    type: Object,
    default: "",
  },
  zjdisabled: {
    type: Boolean,
    default: false,
  },
});
const zjdisabled = props.zjdisabled
//根据门诊号-住院号-姓名查找患者列表
const remoteMethod = async (query, flag) =&gt; {
  if (!query) return
  const { data: res } = await proxy.$postRequest(
    "hzxx/selectHzOptionList",
    {
      flag: flag,
      val: query
    }
  );
  if (res.status == 200) {
    if (flag == 'mzh') {
      options.value = res.data
    }
    if (flag == 'zyh') {
      zyhoptions.value = res.data
    }
    if (flag == 'xm') {
      xmoptions.value = res.data
    }
  } else {
    proxy.$message.error(res.msg);
  }
}
&lt;/script&gt;

&lt;style  scoped&gt;
&lt;/style&gt;

</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/63e6dab4241371af4ad223e48781a373/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mysql存储过程批量修改数据库中的表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6398c906a775b98db04a60b2995781c0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Unity Resources.LoadAsync 优雅的写法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>