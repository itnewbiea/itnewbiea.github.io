<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32CubeIDE的MCU开发 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32CubeIDE的MCU开发" />
<meta property="og:description" content="以前做stm32嵌入式开发均使用的是破解版的keil软件，现在工作需要无法按照此步骤进行，最近针对ST官方免费软件STM32CubeIDE进行了相关调研工作。
1 STM32CubeIDE简介 目前主流的STM32开发环境是ARM公司的KEIL软件, 由于KEIL对于STM32大部分型号是收费的, 使用需要破解, 存在版权问题。 并且使用KEIL编译大型工程, 编译太慢了, 编译耗时长。
STM32CubeIDE是ST公司推出的免费多功能STM32开发工具，采用了行业标准的开放式许可条款，为简化和加快基于STM32的嵌入式设计，新增了STM32专用功能，包括功能强大的STM32CubeMX微控制器配置和项目管理工具。用户能够最大限度地提高产品的功能和性能，缩短研发周期，降低开发成本。
STM32CubeIDE是一个多操作系统集成开发工具，它是STM32Cube软件生态系统的一部分。STM32CubeIDE具有STM32 MCU和MPU的外设配置、代码生成、代码编译和调试功能，它基于Eclipse®/CDT框架和GCC工具链进行开发，GDB进行调试。STM32CubeIDE集成了STM32的配置和项目创建功能，提供了一体化的工具体验，节省安装和开发时间。在开发过程中任何时间，用户都能返回到外设/中间件的初始化和配置，并且在不影响用户代码的情况下生成初始化代码。
2 STM32CubeIDE下载与安装 2.1 STM32CubeIDE下载 进入意法半导体的官网 STM32CubeIDE - STM32的集成开发环境 - STMicroelectronics，选择最新版本，按照提示下载STM32CubeIDE软件安装包，如下图所示。
图1 官网获取最新安装包
例如，作者的电脑是windows操作系统，选择了当前最新版本1.6.1 STM32CubeIDE-Win的安装包进行下载。
2.2 STM32CubeIDE安装 软件下载成功后，解压缩软件安装包，右键.exe文件 —&gt; 以管理员身份运行，注意：安装目录中不允许有中文路径。
图2 管理员身份运行
弹出的界面，点击Next。
图3 安装界面
弹出的界面，点击I Agree。
图4 同意安装
选择安装路径，点击Next。
图5 选择安装路径
勾选“SEGGER J-Link drivers”和“ST-LINK drivers”，点击“Install”，等待安装完成。
图6 勾选调试工具
安装完成，点击Next。
图7 安装完成
弹出的界面，点击Finish。
图8 Finish
2.3 STM32CubeIDE器件包安装 双击软件STM32CubeIDE 1.6.1.exe ，点击help —&gt; Manage Embedded Software Packages 。
图9 安装器件包" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/297607cdab4fc925928229fd02a96ed6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-15T15:25:30+08:00" />
<meta property="article:modified_time" content="2023-11-15T15:25:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32CubeIDE的MCU开发</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        以前做stm32嵌入式开发均使用的是破解版的keil软件，现在工作需要无法按照此步骤进行，最近针对ST官方免费软件STM32CubeIDE进行了相关调研工作。</p> 
<h2 style="margin-left:0;text-align:justify;"><a name="_Toc77684286"><span style="color:#0d0016;">1 STM32CubeIDE</span></a>简介</h2> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#2f2f2f;">        目前主流的STM32开发环境是ARM公司的KEIL软件, 由于KEIL对于STM32大部分型号是收费的, 使用需要破解, 存在版权问题。 并且使用KEIL编译大型工程, 编译太慢了, 编译耗时长。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">        STM32CubeIDE</span><span style="color:#2f2f2f;">是ST公司推出的</span><span style="color:#ff0000;">免费</span><span style="color:#2f2f2f;">多功能</span><span style="color:#ff0000;">STM32</span><span style="color:#ff0000;">开发工具</span><span style="color:#2f2f2f;">，采用了行业标准的开放式许可条款，为简化和加快基于STM32的嵌入式设计，新增了STM32专用功能，包括功能强大的</span><span style="color:#ff0000;">STM32CubeMX</span><span style="color:#2f2f2f;">微控制器配置和项目管理工具。用户能够最大限度地提高产品的功能和性能，缩短研发周期，降低开发成本。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#2f2f2f;">        STM32CubeIDE是一个多操作系统集成开发工具，它是STM32Cube软件生态系统的一部分。STM32CubeIDE具有STM32 MCU和MPU的外设配置、代码生成、代码编译和调试功能，它基于Eclipse®/CDT框架和GCC工具链进行开发，GDB进行调试。STM32CubeIDE集成了STM32的配置和项目创建功能，提供了一体化的工具体验，节省安装和开发时间。在开发过程中任何时间，用户都能返回到外设/中间件的初始化和配置，并且在不影响用户代码的情况下生成初始化代码。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h2 style="margin-left:0;text-align:justify;"><a name="_Toc77684287"><span style="color:#0d0016;">2 STM32CubeIDE</span></a><span style="color:#0d0016;">下载与安装</span></h2> 
<h3 style="margin-left:0;text-align:justify;"><a name="_Toc77684288"><span style="color:#0d0016;">2.1 STM32CubeIDE</span></a><span style="color:#0d0016;">下载</span></h3> 
<p style="margin-left:.0001pt;text-align:justify;">        进入意法半导体的官网 <a href="https://www.st.com/zh/development-tools/stm32cubeide.html#get-software" rel="nofollow" title="STM32CubeIDE - STM32的集成开发环境 - STMicroelectronics">STM32CubeIDE - STM32的集成开发环境 - STMicroelectronics</a>，选择最新版本，按照提示下载STM32CubeIDE软件安装包，如下图所示。</p> 
<p style="text-align:center;"><img alt="" height="616" src="https://images2.imgbox.com/a5/09/Ia0cr6aC_o.png" width="1196"></p> 
<p style="margin-left:.0001pt;text-align:center;">图1 官网获取最新安装包</p> 
<p style="margin-left:.0001pt;text-align:justify;">       例如，作者的电脑是windows操作系统，选择了当前最新版本1.6.1 STM32CubeIDE-Win的安装包进行下载。</p> 
<h3 style="margin-left:0;text-align:justify;"><a name="_Toc77684289"><span style="color:#0d0016;">2.2 STM32CubeIDE</span></a><span style="color:#0d0016;">安装</span></h3> 
<p style="margin-left:.0001pt;text-align:justify;">        软件下载成功后，解压缩软件安装包，右键.exe文件 —&gt; 以管理员身份运行，<span style="color:#ff0000;">注意：安装目录中不允许有中文路径</span>。</p> 
<p style="text-align:center;"><img alt="" height="196" src="https://images2.imgbox.com/41/db/WU5VpZxB_o.png" width="591"></p> 
<p style="text-align:center;"> 图2 管理员身份运行</p> 
<p style="margin-left:.0001pt;text-align:justify;">        弹出的界面，点击Next。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="386" src="https://images2.imgbox.com/c2/79/iKF1p7od_o.png" width="497"></p> 
<p style="text-align:center;"> 图3 安装界面</p> 
<p style="margin-left:.0001pt;text-align:justify;">        弹出的界面，点击I Agree。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="382" src="https://images2.imgbox.com/cc/db/hGrJKyoh_o.png" width="494"></p> 
<p style="margin-left:.0001pt;text-align:center;">图4 同意安装</p> 
<p style="margin-left:.0001pt;text-align:justify;">        选择安装路径，点击Next。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="386" src="https://images2.imgbox.com/c9/45/tiJp3mNL_o.png" width="499"></p> 
<p style="margin-left:.0001pt;text-align:center;">图5 选择安装路径</p> 
<p style="margin-left:.0001pt;text-align:justify;">        勾选“SEGGER J-Link drivers”和“ST-LINK drivers”，点击“Install”，等待安装完成。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="388" src="https://images2.imgbox.com/4f/a2/eVjwf4xb_o.png" width="501"></p> 
<p style="margin-left:.0001pt;text-align:center;">图6 勾选调试工具</p> 
<p style="margin-left:.0001pt;text-align:justify;">        安装完成，点击Next。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="387" src="https://images2.imgbox.com/47/7c/ZW58MfZp_o.png" width="496"></p> 
<p style="margin-left:.0001pt;text-align:center;">图7 安装完成</p> 
<p style="margin-left:.0001pt;text-align:justify;">        弹出的界面，点击Finish。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="385" src="https://images2.imgbox.com/65/ba/ejMq1YhH_o.png" width="500"></p> 
<p style="margin-left:.0001pt;text-align:center;">图8 Finish</p> 
<h3 style="margin-left:0;text-align:justify;"><a name="_Toc77684290"><span style="color:#0d0016;">2.3 STM32CubeIDE</span></a><span style="color:#0d0016;">器件包安装</span></h3> 
<p style="margin-left:.0001pt;text-align:justify;">        双击软件STM32CubeIDE 1.6.1.exe <img alt="" height="25" src="https://images2.imgbox.com/ac/df/ghuq3X1b_o.png" width="162"> ，点击help —&gt; Manage Embedded Software Packages 。</p> 
<p style="text-align:center;"><img alt="" height="456" src="https://images2.imgbox.com/af/04/PG6cpqqG_o.png" width="935"></p> 
<p style="margin-left:.0001pt;text-align:center;">图9 安装器件包</p> 
<p style="margin-left:.0001pt;text-align:justify;">        根据项目需要选择安装STM32器件库，例如要使用STM32F1系列和STM32F4系列，勾选最新的器件库，点击Install Now直接安装即可。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="824" src="https://images2.imgbox.com/19/f9/owmMCX6u_o.png" width="788"></p> 
<p style="margin-left:.0001pt;text-align:center;">图10 STM32F1系列器件包</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="834" src="https://images2.imgbox.com/98/47/g0aO7PFy_o.png" width="794"></p> 
<p style="margin-left:.0001pt;text-align:center;">图11 STM32F4系列器件包</p> 
<p style="margin-left:.0001pt;text-align:justify;">        安装成功后勾选框显示为绿色，查看器件包的安装路径，点击Window —&gt; Preferences 。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="213" src="https://images2.imgbox.com/ac/ef/RM1bUBiC_o.png" width="682"></p> 
<p style="margin-left:.0001pt;text-align:center;">图12 查看已器件包路径</p> 
<p style="margin-left:.0001pt;text-align:justify;">        在STM32Cube —&gt; Firmware Updater中可以看到器件库的默认安装路径，此路径也可以自行修改。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="744" src="https://images2.imgbox.com/96/a6/gUfkbe56_o.png" width="810"></p> 
<p style="margin-left:.0001pt;text-align:center;">图13 器件包默认路径</p> 
<p style="margin-left:.0001pt;text-align:justify;">        查看此路径，可以看到已经安装成功的器件库，项目开发就可以正常使用该系列的STM32芯片。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="207" src="https://images2.imgbox.com/cc/28/CGKn68xn_o.png" width="598"></p> 
<p style="margin-left:.0001pt;text-align:center;">图14 已安装器件包文件夹</p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<h2 style="margin-left:0;text-align:justify;"><a name="_Toc77684291"><span style="color:#0d0016;">3 STM32CubeIDE</span></a><span style="color:#0d0016;">的使用</span></h2> 
<p style="margin-left:.0001pt;text-align:justify;">        下面以STM32F407ZGT6型号为例，开发和调试LED闪烁、串口中断回环的功能，介绍STM32CubeIDE软件的基本使用方法。</p> 
<h3 style="margin-left:0;text-align:justify;"><a name="_Toc77684292"><span style="color:#0d0016;">3.1 </span></a><span style="color:#0d0016;">资料准备</span></h3> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="https://www.st.com/zh/microcontrollers-microprocessors/stm32f407zg.html" rel="nofollow" title="        STM32F407ZG - 带DSP和FPU的高性能基础系列ARM Cortex-M4 MCU，具有1 MB Flash、168 MHz CPU、ART加速器、以太网和FSMC - STMicroelectronics">        STM32F407ZG - 带DSP和FPU的高性能基础系列ARM Cortex-M4 MCU，具有1 MB Flash、168 MHz CPU、ART加速器、以太网和FSMC - STMicroelectronics</a></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffff00;">《STM32参考手册》</span>，用于查询STM32各类寄存器的使用方法；</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffff00;">《STM32数据手册》</span>（产品规格书），用于查询STM32的物理结构（总线架构、时钟树、管脚功能等）；</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffff00;">《板卡原理图》</span></p> 
<h3 style="margin-left:0;text-align:justify;"><a name="_Toc77684293"><span style="color:#0d0016;">3.2 </span></a><span style="color:#0d0016;">搭建工程</span></h3> 
<p style="margin-left:.0001pt;text-align:justify;">        点击File —&gt; New —&gt; STM32 Project 。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="544" src="https://images2.imgbox.com/7c/b8/MO7oqZz4_o.png" width="925"></p> 
<p style="margin-left:.0001pt;text-align:center;">图15 新建工程</p> 
<p style="margin-left:.0001pt;text-align:justify;">        弹出的界面，在1中搜索项目使用的STM32芯片型号，点击2处，然后再点击Next。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="857" src="https://images2.imgbox.com/1c/e9/BOw1X4CL_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图16 搜索STM32芯片型号</p> 
<p style="margin-left:.0001pt;text-align:justify;">        设置project名，点击Finish 。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="580" src="https://images2.imgbox.com/72/7d/2UJKPra1_o.png" width="526"></p> 
<p style="margin-left:.0001pt;text-align:center;">图17 工程命名</p> 
<p style="margin-left:.0001pt;text-align:justify;">        此时弹出与STM32CubeMX相同的图形化外设配置界面，根据本次例程的功能，我们需要配置时钟、IO、串口、中断等功能。</p> 
<p style="margin-left:.0001pt;text-align:justify;">        首先配置时钟管脚， 选择晶振（板卡上配置频率为8MHz的）作为外部高速时钟（HSE），外部低速时钟（LSE）暂时不需要。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="912" src="https://images2.imgbox.com/94/78/7q9MwY5M_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图18 配置外部高速时钟HSE</p> 
<p style="margin-left:.0001pt;text-align:justify;">        配置系统管脚，debug用，选择4pin的jtag功能。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="901" src="https://images2.imgbox.com/cd/ac/PEEnqigT_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图19 配置调试接口</p> 
<p style="margin-left:.0001pt;text-align:justify;">        配置LED IO引脚为输出功能引脚，查看板卡原理图，LED0连接在PF9引脚、LED1连接在PF10引脚，那么分别将PF9和PF10配置为OUTPUT引脚。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="909" src="https://images2.imgbox.com/ed/3c/VTONHwUM_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图20 配置LED0管脚</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="909" src="https://images2.imgbox.com/c8/19/cn44Td4K_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图21配置LED1管脚</p> 
<p style="margin-left:.0001pt;text-align:justify;">        修改引脚命名。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="906" src="https://images2.imgbox.com/f7/b6/zEFYjrCd_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图22 修改LED0名</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="901" src="https://images2.imgbox.com/18/18/DJnYh3zj_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图23 修改LED1名</p> 
<p style="margin-left:.0001pt;text-align:justify;">        配置串口，本次测试使用USART3，配置USART的IO引脚、波特率、中断等参数。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="901" src="https://images2.imgbox.com/a0/47/HSwVUyN0_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图24 配置串口3管脚</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="906" src="https://images2.imgbox.com/f4/58/f6UHtqNv_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图25 配置串口3中断</p> 
<p style="margin-left:.0001pt;text-align:justify;">        开启USART3的中断功能，由于本次测试仅使用一个串口中断的功能，所以在界面中的中断优先级分组、抢占优先级和子优先级按默认设置即可。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="902" src="https://images2.imgbox.com/e4/72/PAmdnuqW_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图26 配置串口3中断</p> 
<p style="margin-left:.0001pt;text-align:justify;">        配置时钟树，此处将APB1配置为最高的42MHz，APB2配置为最高的84MHz。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="911" src="https://images2.imgbox.com/96/14/oUNJEh7y_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图27 配置时钟树</p> 
<p style="margin-left:.0001pt;text-align:justify;">        STM32F407时钟树，HSE（高速外部时钟信号）、LSE（低速外部时钟信号）、HSI（高速内部时钟信号）、LSI（低速内部时钟信号）。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="819" src="https://images2.imgbox.com/9b/a2/Z3IBMl3s_o.png" width="731"></p> 
<p style="margin-left:.0001pt;text-align:center;">图28 STM32F4时钟树结构</p> 
<p style="margin-left:.0001pt;text-align:justify;">        工程设置，先查看工程名和路径，再选择生成的Code格式。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="896" src="https://images2.imgbox.com/68/37/lJ85rhoY_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图29 确认工程名和路径</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="539" src="https://images2.imgbox.com/cd/83/g7RPAely_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图30 勾选生成的code特征</p> 
<p style="margin-left:.0001pt;text-align:justify;">        保存.ioc文件，生成project code模板。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="85" src="https://images2.imgbox.com/4e/53/XpvHpwTa_o.png" width="784"></p> 
<p style="margin-left:.0001pt;text-align:center;">图31 生成code</p> 
<p style="margin-left:.0001pt;text-align:justify;">        可以看到生成的工程文件夹结构。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="633" src="https://images2.imgbox.com/c1/11/akSC6NpY_o.png" width="299"></p> 
<p style="margin-left:.0001pt;text-align:center;">图32 生成的project结构</p> 
<h3 style="margin-left:0;text-align:justify;"><a name="_Toc77684294"><span style="color:#0d0016;">3.3 </span></a><span style="color:#0d0016;">用户程序编写</span></h3> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">        用户程序的编写只能在注释有“USER CODE BEGIN”与“USER CODE END”之间进行，防止修改.ioc文件后重新生成project code时将已经编写的用户程序覆盖掉。</span></p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="627" src="https://images2.imgbox.com/d6/ab/s3qC3Y8g_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图33 用户程序编写区域</p> 
<h3 style="margin-left:0;text-align:justify;"><a name="_Toc77684295"><span style="color:#0d0016;">3.4 </span></a><span style="color:#0d0016;">编译、调试</span></h3> 
<p style="margin-left:.0001pt;text-align:justify;">        工程编译。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="447" src="https://images2.imgbox.com/86/19/3u3jFJGC_o.png" width="1040"></p> 
<p style="margin-left:.0001pt;text-align:center;">图34 工程编译</p> 
<p style="margin-left:.0001pt;text-align:justify;">        设置调试工具。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="450" src="https://images2.imgbox.com/73/59/3td2k0Y3_o.png" width="425"></p> 
<p style="margin-left:.0001pt;text-align:center;">图35 调试工具设置</p> 
<p style="margin-left:.0001pt;text-align:justify;">        选中当前工程，设置调试器，本次测试使用JLINK进行调试，因此调试探头选中SEGGER J-LINK，接口选中JTAG接口，调试初始速度默认为4000kHz。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="690" src="https://images2.imgbox.com/a0/0e/9LPy1fW5_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图36 选择jlink</p> 
<p style="margin-left:.0001pt;text-align:justify;">        1表示下载程序（.elf文件），2表示Debug程序。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="457" src="https://images2.imgbox.com/3b/76/KMHq9XOH_o.png" width="1162"></p> 
<p style="margin-left:.0001pt;text-align:center;">图37 下载与调试</p> 
<p style="margin-left:.0001pt;text-align:justify;">        下载程序成功。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="452" src="https://images2.imgbox.com/d7/ef/PqBoMXPL_o.png" width="807"></p> 
<p style="margin-left:.0001pt;text-align:center;">图38 程序下载</p> 
<p style="margin-left:.0001pt;text-align:justify;">        Debug程序成功，程序运行暂停在main函数内的第一条语句。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="926" src="https://images2.imgbox.com/63/22/OFhhViDY_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:center;">图39 程序debug</p> 
<p style="margin-left:.0001pt;text-align:justify;">        全速运行程序后，从板卡上可以看到led0（红色）开始闪烁/led1（绿色）常亮，这是因为我们在STM32CubeIDE的.ioc中配置了这两个IO（默认低电平，低电平常亮），但是应用程序中只针对led0做了翻转功能，所以现象就是红灯闪烁、绿灯常亮。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="831" src="https://images2.imgbox.com/9f/aa/hW2LnoiC_o.png" width="1184"></p> 
<p style="margin-left:.0001pt;text-align:center;">图40 LED0灭、LED1亮</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="848" src="https://images2.imgbox.com/cd/5a/ShZJDdUR_o.png" width="1164"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:center;">图41 LED0亮、LED1亮</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="316" src="https://images2.imgbox.com/09/22/1zq37qDQ_o.png" width="967"></p> 
<p style="margin-left:.0001pt;text-align:center;">图42 STM32CubeMX中GPIO的默认状态</p> 
<p style="margin-left:.0001pt;text-align:justify;">        测试串口中断回环功能。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="587" src="https://images2.imgbox.com/13/a4/w3XLgthy_o.png" width="647"></p> 
<p style="margin-left:.0001pt;text-align:center;">图43 串口中断回环测试</p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<h2 style="background-color:transparent;margin-left:0px;text-align:justify;">5 STM32CubeIDE软件使用遇到的问题记录</h2> 
<h3 style="background-color:transparent;">5.1 设置tab键与空格键的关系(tab == 4 spaces)</h3> 
<ol><li>Window ——&gt; Preferences</li><li>General ——&gt; Editors ——&gt; Text Editors 
  <ol><li>选中"Insert spaces for tabs"</li><li>选中"Show whitespace characters(configure visibility)" 
    <ol><li>在(configure visibility)中可以根据使用习惯显示or不显示space/enter等</li></ol></li></ol></li><li>C/C++ ——&gt; Code Style ——&gt; Formatter 
  <ol><li>点击"Formatter"页面中的"New..."新建格式</li><li>在"Profile name"中输入"spaces_4_tab"</li><li>点击"OK"</li><li>在弹出的Profile 'spaces_4_tab'页面中，在"Tab policy”中将"Tabs only"改为"Spaces only"</li><li>点击"Apply" ——&gt; "OK"</li></ol></li><li> 点击"Apply” ——&gt; "Apply and Close"</li><li>可以在.c和.h文件中使用Tab键进行4个spaces的快捷操作</li></ol> 
<h3>5.2 STM32CubeIDE在无联网的情况下加载设置MCU Packages</h3> 
<ol><li>Help ——&gt; Manage Embedded Software Packages</li><li>点击"From Local..."</li><li>此时需要提前准备好在官网下载的STM32系列的配置包 
  <ol><li>网页上搜索"STM32Cube MCU &amp; MPU Packages - Products"</li><li>进入ST官网配置包页面后，选择"Product selector"，下载需要的MCU配置包</li><li>这里以STM32CubeF1为例</li><li>下载Patch_CubeF1和STM32CubeF1，实际加载使用的为STM32CubeF1，从官网上看到当前下载的STM32CubeF1版本为1.8.0</li></ol></li><li>选中刚刚准备好的STM32CubeF1包，注意该包的版本为1.8.0，等待软件加载配置包</li><li>加载完成后可在Embedded Software Packages Manager页面的STM32F1下看到安装的配置包及其版本</li></ol> 
<h2>5.3 报错“The Firmware Package (STM32Cube FW_F1 V1.8.5) or one of its dependencies required by the Project is not available in your STM32CubeMX Repository”</h2> 
<ol><li>方法1 
  <ol><li>在.ioc中，找到ProjectManager下的Project，可以看到Frimware Package Name and Version默认按照最新的版本（当前最新的版本为"STM32Cube_FW_F1 V1.8.5"）进行使用，此处将"Use latest available"取消，同时将"STM32Cube_FW_F1 V1.8.5调整为STM32Cube_FW_F1 V1.8.0"即可正常</li></ol></li><li>方法2 
  <ol><li>新建STM32工程时，输入完Project Name之后，注意不要点击"Finish"，点击"Next"</li><li>这里会进入Firmware Library Package Setup页面，这里可以进行配置包的选择，默认为最新的"V1.8.5"，手动切换为"V1.8.0"后，点击"Finish"即可</li></ol></li></ol> 
<h3>5.4 需要使用.hex文件或.bin文件进行单独烧写</h3> 
<p>        STM32CubeIDE软件默认编译后不会生成.hex或者.bin文件，需要对软件进行设置</p> 
<ol><li>Project ——&gt; Properties</li><li>C/C++ Build ——&gt; Settings</li><li>MCU Post build output ——&gt; 选中"Convert to binary file (-O binary)"和"Convert to Intel Hex filr (-O ihex)" ——&gt; Apply ——&gt; Apply and Close</li><li>重新编译，可以在工程路径的Debug文件夹中找到对应的bin文件和hex文件</li></ol> 
<h2 style="background-color:transparent;margin-left:0px;text-align:justify;"><a name="_Toc77684296"><span style="color:#0d0016;">6 STM32CubeIDE</span></a><span style="color:#0d0016;">使用小结</span></h2> 
<ol><li style="text-align:justify;">使用STM32CubeMX的图形化界面生成和修改底层驱动，可操作性更强、入门难度更小、开发效率更高，我们只需要将重心放在应用程序的开发上即可；</li><li style="text-align:justify;">STM32CubeIDE软件是免费软件，无需破解，程序运行大小不受影响，对于我们进行STM32嵌入式开发的成本更低。</li></ol>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8fcf4c2c8e6f7c2d903a6b9952399c20/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于el-table&#43;el-input&#43;el-propover的封装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aea0af22fc2408fe9318366cbf6186f5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python_pycharm安装与jihuo</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>