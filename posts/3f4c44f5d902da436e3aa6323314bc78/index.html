<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43;连接数据库（DataBase）之加载外部依赖项 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C&#43;&#43;连接数据库（DataBase）之加载外部依赖项" />
<meta property="og:description" content="文章目录 在VS中进行配置一、 先找到VS的解决方案资源管理器：二、 找到“属性”，进行附加项配置三、 移植libmysql.dll目录 在VSCode中进行配置依赖文件的移动库文件的移动可能遇到的问题 重点！！！！！！！（必看！！！！） C&#43;&#43;在语言层面上没有提供数据库操作，我们需要使用Orcle公司对MySQL提供的接口对其进行操作，这就需要使用外部依赖项，因此我们需要进行一些配置。 在VS中进行配置 一、 先找到VS的解决方案资源管理器： 可能新手在关闭了它之后就找不到了，如果我们需要再次找到它，首先需要找到视图：
然后在其下拉菜单中找到解决方案资源管理器，单击它就好了：
二、 找到“属性”，进行附加项配置 找到属性之后，单击进入；
到这里，就要正式开始进行附加项配置了：
找到：“C/C&#43;&#43;” =&gt; “常规” =&gt; “附加包含目录”：
然后就开始”编辑附加包含目录“：
按照下图步骤选择，就会成功进入”系统文件资源管理器“：
然后找到本机中MySQL的安装文件夹，其中能够找到：MySQL Server 8.0（或类似这种），我们所需要的头文件和库文件都在其中：
此处我们找到MySQL Server 8.0/include，将其加入到附加包含目录中：
完成后应该就是上图那样。
接下来，找到：“链接器” =&gt; “常规”：
选择MySQL Server 8.0/lib，这一步的操作和刚才加载include的操作类似，只是这是加载lib目录，也就是库目录：
然后就是跟刚刚类似的编辑操作：添加附加依赖项&#34;libmysql.lib&#34;
这样大致就好了。
三、 移植libmysql.dll目录 只是完成刚刚的操作还是没法进行数据库连接的，当我们运行程序的时候会报错，显示：”无法找到libmysql.dll文件，我们需要在刚刚的MySQL Server 8.0/lib文件夹中找到这个文件：
将其复制粘贴到本项目的Debug文件夹中，这样就行了，在这里，我这个文件的存放路径即为：“C:\Users\Lenovo\Desktop\demo\connectMysql\x64\Debug\libmysql.dll”。
这样就完成了外部依赖项的配置。
在VSCode中进行配置 VSCode我觉得是不太适合用来进行项目编写的，因此在写项目的时候我一般使用VS，但是VSCode的轻量级又是让我爱不释手的地方，在VSCode中连接数据库我一般是直接将需要使用到的文件进行一个复制操作，放在项目文件下。
我一般喜欢使用不同的文件夹来包含不同的文件：bin（存放源文件），include（存放包含文件），lib（存放库文件），output（存放二进制输出文件），例如这样：
依赖文件的移动 在连接数据库的时候，我们使用到了mysql.h文件，因此我们需要将MySQL Server 8.0/include完全拷贝进我们的项目文件中（不能只将mysql.h拷贝，我试验过了，mysql.h中还使用了大量的其他文件，一个个复制黏贴搞起来会很麻烦），这个文件夹就可以放在一个叫做include的文件夹中，并且这么做也是合乎规范的。这步做完后应该是这样的：
库文件的移动 完成了上面这步，我们的文件中就已经能够找到mysql.h文件了，但是我们仍然不能正常编译运行文件，因为我们只是引用了头文件，而mysql.h的实现代码都在库文件中，即：mysql.dll和mysql.lib，这两个文件肯定已经不陌生了，一个是动态库一个是静态库，我们需要在MySQL Server 8.0/lib中找到这两个文件，并将其放在我们项目的lib文件中，除此之外还要找到mysqlclient.lib，这个文件负责与MySQL服务器进行通信，就像这样：
我们也可以只是用dll和lib中的其中一个，这个道理也很简单我相信大家都能理解，如果不能理解就去看看什么是动态库什么是静态库了吧。
可能遇到的问题 在这么做完之后，我们在bin中编写我们的源文件，按照道理来说就是能够正常运行的了，但是我们照常点击运行却会报错：
这是因为在vscode中，它实际上是通过终端进行操作的，跟我们在Linux系统中使用命令行是一样的，这一点我们通过C&#43;&#43;插件的配置就能看出来（tasks.json）：
因此，如果不想重写tasks.json中的配置的话，我们就需要使用命令行，像在Linux中编译C&#43;&#43;程序一样：
g&#43;&#43; ./bin/main.cpp -Llib -lmysql -Iinclude -o ./output/main.exe 当然，我们也可以使用makefile，但是这似乎需要一些额外的配置。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/3f4c44f5d902da436e3aa6323314bc78/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-28T14:27:04+08:00" />
<meta property="article:modified_time" content="2023-12-28T14:27:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43;连接数据库（DataBase）之加载外部依赖项</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#VS_2" rel="nofollow">在VS中进行配置</a></li><li><ul><li><a href="#_VS_4" rel="nofollow">一、 先找到VS的解决方案资源管理器：</a></li><li><a href="#__14" rel="nofollow">二、 找到“属性”，进行附加项配置</a></li><li><a href="#_libmysqldll_41" rel="nofollow">三、 移植libmysql.dll目录</a></li></ul> 
   </li><li><a href="#VSCode_48" rel="nofollow">在VSCode中进行配置</a></li><li><ul><li><a href="#_53" rel="nofollow">依赖文件的移动</a></li><li><a href="#_56" rel="nofollow">库文件的移动</a></li><li><a href="#_61" rel="nofollow">可能遇到的问题</a></li></ul> 
   </li><li><a href="#_73" rel="nofollow">重点！！！！！！！（必看！！！！）</a></li></ul> 
 </li></ul> 
</div> 
<br> C++在语言层面上没有提供数据库操作，我们需要使用Orcle公司对MySQL提供的接口对其进行操作，这就需要使用外部依赖项，因此我们需要进行一些配置。 
<p></p> 
<h3><a id="VS_2"></a>在VS中进行配置</h3> 
<h4><a id="_VS_4"></a>一、 先找到VS的解决方案资源管理器：</h4> 
<p><img src="https://images2.imgbox.com/0a/6a/mwRnSTH3_o.png" alt="在这里插入图片描述"></p> 
<p>可能新手在关闭了它之后就找不到了，如果我们需要再次找到它，首先需要找到视图：<br> <img src="https://images2.imgbox.com/94/13/KVoA80xj_o.png" alt="在这里插入图片描述"></p> 
<p>然后在其下拉菜单中找到<strong>解决方案资源管理器</strong>，单击它就好了：<br> <img src="https://images2.imgbox.com/90/2f/yeJEu6mQ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="__14"></a>二、 找到“属性”，进行附加项配置</h4> 
<p><img src="https://images2.imgbox.com/67/04/SHo0Ru0u_o.png" alt="在这里插入图片描述"></p> 
<p>找到属性之后，单击进入；<br> 到这里，就要正式开始进行附加项配置了：<br> 找到：<strong>“C/C++” =&gt; “常规” =&gt; “附加包含目录”</strong>：<br> <img src="https://images2.imgbox.com/55/71/qPM2yO6y_o.png" alt="在这里插入图片描述"></p> 
<p>然后就开始”编辑附加包含目录“：<br> <img src="https://images2.imgbox.com/9f/13/0RCSKlfU_o.png" alt="在这里插入图片描述"></p> 
<p>按照下图步骤选择，就会成功进入”系统文件资源管理器“：<br> <img src="https://images2.imgbox.com/3e/0b/IKsC5Bii_o.png" alt="在这里插入图片描述"></p> 
<p>然后<font color="red"><b>找到本机中MySQL的安装文件夹，其中能够找到：MySQL Server 8.0（或类似这种），我们所需要的头文件和库文件都在其中</b></font>：<br> 此处我们找到<font color="red"><b>MySQL Server 8.0/include</b></font>，将其加入到附加包含目录中：<br> 完成后应该就是上图那样。<br> 接下来，找到：<strong>“链接器” =&gt; “常规”</strong>：<br> <img src="https://images2.imgbox.com/e8/3f/YQd8wHrC_o.png" alt="在这里插入图片描述"></p> 
<p>选择<font color="red"><b>MySQL Server 8.0/lib</b></font>，这一步的操作和刚才加载include的操作类似，只是这是加载lib目录，也就是<strong>库目录</strong>：<br> <img src="https://images2.imgbox.com/48/c8/FdSUtz2p_o.png" alt="在这里插入图片描述"></p> 
<p>然后就是跟刚刚类似的编辑操作：<strong>添加附加依赖项"libmysql.lib"</strong><img src="https://images2.imgbox.com/a4/27/8NdAj78Y_o.png" alt="在这里插入图片描述"></p> 
<p>这样大致就好了。</p> 
<h4><a id="_libmysqldll_41"></a>三、 移植libmysql.dll目录</h4> 
<p>只是完成刚刚的操作还是没法进行数据库连接的，当我们运行程序的时候会报错，显示：”<strong>无法找到libmysql.dll文件</strong>，我们需要在刚刚的MySQL Server 8.0/lib文件夹中找到这个文件：<br> <img src="https://images2.imgbox.com/40/5c/nJaNlNM8_o.png" alt="在这里插入图片描述"></p> 
<p>将其复制粘贴到<font color="red"><b>本项目的Debug文件夹中</b></font>，这样就行了，在这里，我这个文件的存放路径即为：<strong>“C:\Users\Lenovo\Desktop\demo\connectMysql\x64\Debug\libmysql.dll”</strong>。<br> 这样就完成了外部依赖项的配置。</p> 
<h3><a id="VSCode_48"></a>在VSCode中进行配置</h3> 
<p>VSCode我觉得是不太适合用来进行项目编写的，因此在写项目的时候我一般使用VS，但是VSCode的轻量级又是让我爱不释手的地方，在VSCode中连接数据库我一般是<font color="red"><b>直接将需要使用到的文件进行一个复制操作，放在项目文件下</b></font>。</p> 
<p>我一般喜欢使用不同的文件夹来包含不同的文件：<strong>bin（存放源文件），include（存放包含文件），lib（存放库文件），output（存放二进制输出文件）</strong>，例如这样：<img src="https://images2.imgbox.com/f9/eb/wEO86jeQ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_53"></a>依赖文件的移动</h4> 
<p>在连接数据库的时候，我们使用到了mysql.h文件，因此我们需要<font color="red"><b>将MySQL Server 8.0/include完全拷贝进我们的项目文件中（不能只将mysql.h拷贝，我试验过了，mysql.h中还使用了大量的其他文件，一个个复制黏贴搞起来会很麻烦）</b></font>，这个文件夹就可以放在一个叫做<strong>include</strong>的文件夹中，并且这么做也是合乎规范的。这步做完后应该是这样的：<img src="https://images2.imgbox.com/e7/69/QMqTyW5f_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_56"></a>库文件的移动</h4> 
<p>完成了上面这步，我们的文件中就已经能够找到mysql.h文件了，<mark>但是我们仍然不能正常编译运行文件</mark>，因为我们只是引用了头文件，而mysql.h的实现代码都在库文件中，即：<font color="red"><b>mysql.dll和mysql.lib</b></font>，这两个文件肯定已经不陌生了，一个是动态库一个是静态库，我们需要在<font color="red"><b>MySQL Server 8.0/lib</b></font>中找到这两个文件，并将其放在我们项目的lib文件中，除此之外还要找到<font color="red"><b>mysqlclient.lib</b></font>，这个文件负责与MySQL服务器进行通信，就像这样：<br> <img src="https://images2.imgbox.com/b6/20/TPHN2V1I_o.png" alt="在这里插入图片描述"><br> 我们也可以只是用dll和lib中的其中一个，这个道理也很简单我相信大家都能理解，如果不能理解就去看看什么是动态库什么是静态库了吧。</p> 
<h4><a id="_61"></a>可能遇到的问题</h4> 
<p>在这么做完之后，我们在bin中编写我们的源文件，按照道理来说就是能够正常运行的了，但是我们照常点击运行却会报错：</p> 
<p><img src="https://images2.imgbox.com/1c/41/y8lQ9qAJ_o.png" alt="在这里插入图片描述"><br> 这是因为在vscode中，<mark>它实际上是通过终端进行操作的，跟我们在Linux系统中使用命令行是一样的</mark>，这一点我们通过C++插件的配置就能看出来（tasks.json）：<br> <img src="https://images2.imgbox.com/6d/fd/55XNDXGG_o.png" alt="在这里插入图片描述"><br> 因此，如果不想重写tasks.json中的配置的话，我们就需要使用命令行，像在Linux中编译C++程序一样：</p> 
<pre><code class="prism language-powershell">g+<span class="token operator">+</span> <span class="token punctuation">.</span><span class="token operator">/</span>bin/main<span class="token punctuation">.</span><span class="token function">cpp</span> <span class="token operator">-</span>Llib <span class="token operator">-</span>lmysql <span class="token operator">-</span>Iinclude <span class="token operator">-</span>o  <span class="token punctuation">.</span><span class="token operator">/</span>output/main<span class="token punctuation">.</span>exe
</code></pre> 
<p>当然，我们也可以使用makefile，但是这似乎需要一些额外的配置。</p> 
<h3><a id="_73"></a>重点！！！！！！！（必看！！！！）</h3> 
<p><font color="red"><b>vscode中能够正常编写文件，但是无法运行！！！！！这是因为MySQL Connection需要依赖VC，需要借助VS的链接器才能够正常运行，应该有能使其可在VSCode下编写的办法，但是我能力有限，找不出来，大家最好还是使用VS或者Qt进行项目编写吧</b></font></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a651d98603de9f1a46954ad2d7bb2694/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java8 新的日期/时间API操作和示例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c4fa52d7b7fdf946413b3b32d2191c82/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">个推消息推送“智能文案推荐算法”获评中国信通院2023年“数据&#43;”行业应用优秀案例</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>