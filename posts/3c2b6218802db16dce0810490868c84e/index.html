<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ubuntu docker离线安装docker（.deb包方式）（成功）（附卸载方法） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ubuntu docker离线安装docker（.deb包方式）（成功）（附卸载方法）" />
<meta property="og:description" content="参考文章：Install Docker Engine on Ubuntu
文章目录 安装步骤下载安装包拷贝到目标主机并执行安装命令 验证拉取运行容器测试build dockerfile测试持久运行容器测试主机重启后，docker各服务是否正常自启 卸载方法附：各安装包作用说明（以及插件）1. `containerd.io_&lt;version&gt;_&lt;arch&gt;.deb`2. `docker-ce_&lt;version&gt;_&lt;arch&gt;.deb`3. `docker-ce-cli_&lt;version&gt;_&lt;arch&gt;.deb`4. `docker-buildx-plugin_&lt;version&gt;_&lt;arch&gt;.deb`5. `docker-compose-plugin_&lt;version&gt;_&lt;arch&gt;.deb` 附：`docker-ce-rootless-extras_&lt;version&gt;_&lt;arch&gt;.deb`和`docker-scan-plugin_&lt;version&gt;_&lt;arch&gt;.deb `是什么？ https://docs.docker.com/desktop/install/ubuntu/
https://docs.docker.com/engine/install/ubuntu/#install-from-a-package
说明：这个安装方式是下载.deb包安装，最终效果几乎与用apt install docker.io完全相同。不仅安装方便，卸载起来也十分方便，不会破环系统环境。
安装步骤 下载安装包 https://download.docker.com/linux/ubuntu/dists/
我是ubuntu20.04，选择focal：
选择pool（官网让选这的）：
解释：
目录说明：
edge/：包含一些实验性或开发中的软件包，可能不稳定或不适合生产环境使用。nightly/：包含每日构建的软件包，用于测试和开发目的。pool/：存放软件包的目录。stable/：包含稳定版本的软件包，适合生产环境使用。test/：包含一些测试相关的软件包。 文件说明：
InRelease：包含软件包的元数据和数字签名，用于验证软件包的完整性和真实性。Release：包含软件包的元数据，如软件包列表、版本信息等。Release.gpg：包含对Release文件的数字签名，用于验证Release文件的真实性。 选择stable：
选择amd64（根据系统来，我的目前是amd64）：
将下列文件全下载下来：
containerd.io_&lt;version&gt;_&lt;arch&gt;.deb docker-ce_&lt;version&gt;_&lt;arch&gt;.deb docker-ce-cli_&lt;version&gt;_&lt;arch&gt;.deb docker-buildx-plugin_&lt;version&gt;_&lt;arch&gt;.deb docker-compose-plugin_&lt;version&gt;_&lt;arch&gt;.deb 关于下载什么版本的，我就根据我ubuntu20.04虚拟机上之前用apt install docker.io的来吧：
这是我们ubuntu20.04arm盒子的，我也备份下：
root@ubuntu:~# docker version Client: Version: 20.10.21 API version: 1.41 Go version: go1.18.1 Git commit: 20.10.21-0ubuntu1~20.04.2 Built: Thu Apr 27 05:56:44 2023 OS/Arch: linux/arm64 Context: default Experimental: true Server: Engine: Version: 20." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/3c2b6218802db16dce0810490868c84e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-05T19:10:41+08:00" />
<meta property="article:modified_time" content="2024-01-05T19:10:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ubuntu docker离线安装docker（.deb包方式）（成功）（附卸载方法）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="https://docs.docker.com/engine/install/ubuntu/#prerequisites" rel="nofollow">参考文章：Install Docker Engine on Ubuntu</a></p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_11" rel="nofollow">安装步骤</a></li><li><ul><li><a href="#_12" rel="nofollow">下载安装包</a></li><li><a href="#_123" rel="nofollow">拷贝到目标主机并执行安装命令</a></li></ul> 
   </li><li><a href="#_196" rel="nofollow">验证</a></li><li><ul><li><a href="#_198" rel="nofollow">拉取运行容器</a></li><li><a href="#build_dockerfile_212" rel="nofollow">测试build dockerfile</a></li><li><a href="#_217" rel="nofollow">测试持久运行容器</a></li><li><a href="#docker_220" rel="nofollow">测试主机重启后，docker各服务是否正常自启</a></li></ul> 
   </li><li><a href="#_228" rel="nofollow">卸载方法</a></li><li><a href="#_288" rel="nofollow">附：各安装包作用说明（以及插件）</a></li><li><ul><li><ul><li><a href="#1_containerdio_version_archdeb_291" rel="nofollow">1. `containerd.io_&lt;version&gt;_&lt;arch&gt;.deb`</a></li><li><a href="#2_dockerce_version_archdeb_294" rel="nofollow">2. `docker-ce_&lt;version&gt;_&lt;arch&gt;.deb`</a></li><li><a href="#3_dockercecli_version_archdeb_297" rel="nofollow">3. `docker-ce-cli_&lt;version&gt;_&lt;arch&gt;.deb`</a></li><li><a href="#4_dockerbuildxplugin_version_archdeb_300" rel="nofollow">4. `docker-buildx-plugin_&lt;version&gt;_&lt;arch&gt;.deb`</a></li><li><a href="#5_dockercomposeplugin_version_archdeb_303" rel="nofollow">5. `docker-compose-plugin_&lt;version&gt;_&lt;arch&gt;.deb`</a></li></ul> 
   </li></ul> 
   </li><li><a href="#dockercerootlessextras_version_archdebdockerscanplugin_version_archdeb___306" rel="nofollow">附：`docker-ce-rootless-extras_&lt;version&gt;_&lt;arch&gt;.deb`和`docker-scan-plugin_&lt;version&gt;_&lt;arch&gt;.deb `是什么？</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p><a href="https://docs.docker.com/desktop/install/ubuntu/" rel="nofollow">https://docs.docker.com/desktop/install/ubuntu/</a></p> 
<p><a href="https://docs.docker.com/engine/install/ubuntu/#install-from-a-package" rel="nofollow">https://docs.docker.com/engine/install/ubuntu/#install-from-a-package</a></p> 
<p>说明：这个安装方式是下载.deb包安装，最终效果几乎与用<code>apt install docker.io</code>完全相同。不仅安装方便，卸载起来也十分方便，不会破环系统环境。</p> 
<h3><a id="_11"></a>安装步骤</h3> 
<h4><a id="_12"></a>下载安装包</h4> 
<p><a href="https://download.docker.com/linux/ubuntu/dists/" rel="nofollow">https://download.docker.com/linux/ubuntu/dists/</a></p> 
<p>我是ubuntu20.04，选择focal：</p> 
<p><img src="https://images2.imgbox.com/1d/92/LRsrCDYK_o.png" alt="在这里插入图片描述"></p> 
<p>选择pool（官网让选这的）：<br> <img src="https://images2.imgbox.com/55/3e/XcHfTU9d_o.png" alt="在这里插入图片描述"><br> 解释：</p> 
<p>目录说明：</p> 
<ul><li><code>edge/</code>：包含一些实验性或开发中的软件包，可能不稳定或不适合生产环境使用。</li><li><code>nightly/</code>：包含每日构建的软件包，用于测试和开发目的。</li><li><code>pool/</code>：存放软件包的目录。</li><li><code>stable/</code>：包含稳定版本的软件包，适合生产环境使用。</li><li><code>test/</code>：包含一些测试相关的软件包。</li></ul> 
<p>文件说明：</p> 
<ul><li><code>InRelease</code>：包含软件包的元数据和数字签名，用于验证软件包的完整性和真实性。</li><li><code>Release</code>：包含软件包的元数据，如软件包列表、版本信息等。</li><li><code>Release.gpg</code>：包含对<code>Release</code>文件的数字签名，用于验证<code>Release</code>文件的真实性。</li></ul> 
<p>选择stable：</p> 
<p><img src="https://images2.imgbox.com/6e/2c/5Om3GrmX_o.png" alt="在这里插入图片描述"></p> 
<p>选择amd64（根据系统来，我的目前是amd64）：</p> 
<p><img src="https://images2.imgbox.com/20/68/iNdpxkBT_o.png" alt="在这里插入图片描述"></p> 
<p>将下列文件全下载下来：</p> 
<pre><code class="prism language-py">containerd<span class="token punctuation">.</span>io_<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span><span class="token punctuation">.</span>deb
docker<span class="token operator">-</span>ce_<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span><span class="token punctuation">.</span>deb
docker<span class="token operator">-</span>ce<span class="token operator">-</span>cli_<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span><span class="token punctuation">.</span>deb
docker<span class="token operator">-</span>buildx<span class="token operator">-</span>plugin_<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span><span class="token punctuation">.</span>deb
docker<span class="token operator">-</span>compose<span class="token operator">-</span>plugin_<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span><span class="token punctuation">.</span>deb
</code></pre> 
<p>关于下载什么版本的，我就根据我ubuntu20.04虚拟机上之前用<code>apt install docker.io</code>的来吧：</p> 
<p><img src="https://images2.imgbox.com/d5/13/mpvxeyvB_o.png" alt="在这里插入图片描述"></p> 
<p>这是我们ubuntu20.04arm盒子的，我也备份下：</p> 
<pre><code class="prism language-python">root@ubuntu<span class="token punctuation">:</span><span class="token operator">~</span><span class="token comment"># docker version</span>
Client<span class="token punctuation">:</span>
 Version<span class="token punctuation">:</span>           <span class="token number">20.10</span><span class="token number">.21</span>
 API version<span class="token punctuation">:</span>       <span class="token number">1.41</span>
 Go version<span class="token punctuation">:</span>        go1<span class="token punctuation">.</span><span class="token number">18.1</span>
 Git commit<span class="token punctuation">:</span>        <span class="token number">20.10</span><span class="token number">.21</span><span class="token operator">-</span>0ubuntu1<span class="token operator">~</span><span class="token number">20.04</span><span class="token number">.2</span>
 Built<span class="token punctuation">:</span>             Thu Apr <span class="token number">27</span> <span class="token number">05</span><span class="token punctuation">:</span><span class="token number">56</span><span class="token punctuation">:</span><span class="token number">44</span> <span class="token number">2023</span>
 OS<span class="token operator">/</span>Arch<span class="token punctuation">:</span>           linux<span class="token operator">/</span>arm64
 Context<span class="token punctuation">:</span>           default
 Experimental<span class="token punctuation">:</span>      true

Server<span class="token punctuation">:</span>
 Engine<span class="token punctuation">:</span>
  Version<span class="token punctuation">:</span>          <span class="token number">20.10</span><span class="token number">.21</span>
  API version<span class="token punctuation">:</span>      <span class="token number">1.41</span> <span class="token punctuation">(</span>minimum version <span class="token number">1.12</span><span class="token punctuation">)</span>
  Go version<span class="token punctuation">:</span>       go1<span class="token punctuation">.</span><span class="token number">18.1</span>
  Git commit<span class="token punctuation">:</span>       <span class="token number">20.10</span><span class="token number">.21</span><span class="token operator">-</span>0ubuntu1<span class="token operator">~</span><span class="token number">20.04</span><span class="token number">.2</span>
  Built<span class="token punctuation">:</span>            Thu Apr <span class="token number">27</span> <span class="token number">05</span><span class="token punctuation">:</span><span class="token number">37</span><span class="token punctuation">:</span><span class="token number">01</span> <span class="token number">2023</span>
  OS<span class="token operator">/</span>Arch<span class="token punctuation">:</span>          linux<span class="token operator">/</span>arm64
  Experimental<span class="token punctuation">:</span>     false
 containerd<span class="token punctuation">:</span>
  Version<span class="token punctuation">:</span>          <span class="token number">1.6</span><span class="token number">.12</span><span class="token operator">-</span>0ubuntu1<span class="token operator">~</span><span class="token number">20.04</span><span class="token number">.1</span>
  GitCommit<span class="token punctuation">:</span>        
 runc<span class="token punctuation">:</span>
  Version<span class="token punctuation">:</span>          <span class="token number">1.1</span><span class="token number">.4</span><span class="token operator">-</span>0ubuntu1<span class="token operator">~</span><span class="token number">20.04</span><span class="token number">.3</span>
  GitCommit<span class="token punctuation">:</span>        
 docker<span class="token operator">-</span>init<span class="token punctuation">:</span>
  Version<span class="token punctuation">:</span>          <span class="token number">0.19</span><span class="token number">.0</span>
  GitCommit<span class="token punctuation">:</span>        
root@ubuntu<span class="token punctuation">:</span><span class="token operator">~</span><span class="token comment"># </span>
root@ubuntu<span class="token punctuation">:</span><span class="token operator">~</span><span class="token comment"># </span>

</code></pre> 
<p>不过我的虚拟机貌似没装buildx插件和compose，我用命令装下：</p> 
<pre><code class="prism language-python">apt install docker<span class="token punctuation">.</span>io

docker buildx install

apt install docker<span class="token operator">-</span>compose
</code></pre> 
<p>算了，还是不装了，不装好像也没事，docker基本功能能用就行。（我后来试了，上面命令好像有问题，buildx还装不了。。。）</p> 
<p>那我们就只装下面这几个，保证基本功能能用就行：</p> 
<pre><code class="prism language-python">containerd<span class="token punctuation">.</span>io_1<span class="token punctuation">.</span><span class="token number">6.12</span><span class="token operator">-</span>1_amd64<span class="token punctuation">.</span>deb
docker<span class="token operator">-</span>ce<span class="token operator">-</span>cli_20<span class="token punctuation">.</span><span class="token number">10.21</span><span class="token operator">~</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">0</span><span class="token operator">~</span>ubuntu<span class="token operator">-</span>focal_amd64<span class="token punctuation">.</span>deb
docker<span class="token operator">-</span>ce_20<span class="token punctuation">.</span><span class="token number">10.21</span><span class="token operator">~</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">0</span><span class="token operator">~</span>ubuntu<span class="token operator">-</span>focal_amd64<span class="token punctuation">.</span>deb
</code></pre> 
<p>这也奇怪，列表中文件名有<code>~</code>符号，下下来文件又没了。。。。</p> 
<p><img src="https://images2.imgbox.com/e1/c4/g2hHBp5b_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_123"></a>拷贝到目标主机并执行安装命令</h4> 
<p>把下好的文件拷贝到目标虚拟机中：</p> 
<p><img src="https://images2.imgbox.com/29/e1/mZ3aadGw_o.png" alt="在这里插入图片描述"></p> 
<p>然后根据官网提供的方法安装各安装包：</p> 
<p><img src="https://images2.imgbox.com/c0/73/et2P32Ov_o.png" alt="在这里插入图片描述"></p> 
<p>我这为了方便和可维护，直接做了个脚本：</p> 
<pre><code class="prism language-python"><span class="token comment">#!/bin/bash</span>

<span class="token comment"># 打印所有，包括注释</span>
<span class="token comment"># set -v</span>
<span class="token comment"># 打印执行命令</span>
<span class="token comment"># set -x</span>
<span class="token comment"># 命令出错退出</span>
<span class="token builtin">set</span> <span class="token operator">-</span>e
<span class="token comment"># 使用未初始化变量退出</span>
<span class="token builtin">set</span> <span class="token operator">-</span>u

USER<span class="token operator">=</span>root

<span class="token comment"># Check user: only support root</span>
WHO<span class="token operator">=</span>$<span class="token punctuation">(</span>whoami <span class="token operator">|</span> grep <span class="token string">"${USER}$"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>z <span class="token string">"${WHO}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
    echo
    echo <span class="token string">"Please change to \"${USER}\" user mode first!"</span>
    echo
    exit <span class="token number">1</span>
fi

<span class="token comment"># 获取脚本所在目录</span>
SCRIPT_DIR<span class="token operator">=</span>$<span class="token punctuation">(</span>
    cd <span class="token string">"$(dirname "</span>$<span class="token number">0</span><span class="token string">")"</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token punctuation">{<!-- --></span>
        echo <span class="token string">"cd Failure"</span>
        exit <span class="token number">1</span>
    <span class="token punctuation">}</span>
    pwd
<span class="token punctuation">)</span>

DEB_PATH_DOCKER_CONTAINERD_IO<span class="token operator">=</span>$SCRIPT_DIR<span class="token operator">/</span>containerd<span class="token punctuation">.</span>io_1<span class="token punctuation">.</span><span class="token number">6.12</span><span class="token operator">-</span>1_amd64<span class="token punctuation">.</span>deb
DEB_PATH_DOCKER_CE<span class="token operator">=</span>$SCRIPT_DIR<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token operator">-</span>cli_20<span class="token punctuation">.</span><span class="token number">10.21_3</span><span class="token operator">-</span>0_ubuntu<span class="token operator">-</span>focal_amd64<span class="token punctuation">.</span>deb
DEB_PATH_DOCKER_CE_CLI<span class="token operator">=</span>$SCRIPT_DIR<span class="token operator">/</span>docker<span class="token operator">-</span>ce_20<span class="token punctuation">.</span><span class="token number">10.21_3</span><span class="token operator">-</span>0_ubuntu<span class="token operator">-</span>focal_amd64<span class="token punctuation">.</span>deb
<span class="token comment"># DEB_PATH_DOCKER_BUILDX=$SCRIPT_DIR/docker-buildx-plugin_0.11.1-1_ubuntu.20.04_focal_amd64.deb</span>
<span class="token comment"># DEB_PATH_DOCKER_COMPOSE=$SCRIPT_DIR/docker-buildx-plugin_0.11.1-1_ubuntu.20.04_focal_amd64.deb</span>

<span class="token comment"># 安装.deb包（注意是有顺序的，顺序错了安装不起来）</span>

<span class="token comment"># （网友提醒，这个顺序不对，我未做验证）</span>
<span class="token comment"># dpkg -i $DEB_PATH_DOCKER_CONTAINERD_IO \</span>
<span class="token comment">#     $DEB_PATH_DOCKER_CE \</span>
<span class="token comment">#     $DEB_PATH_DOCKER_CE_CLI</span>

dpkg <span class="token operator">-</span>i $DEB_PATH_DOCKER_CE_CLI \
    $DEB_PATH_DOCKER_CONTAINERD_IO \
    $DEB_PATH_DOCKER_CE 

</code></pre> 
<p>把脚本搞到目录下，并且运行：</p> 
<p><img src="https://images2.imgbox.com/37/82/WjontEbX_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/22/3f/ZyqMcmeH_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/e7/3a/FPSN4EMR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_196"></a>验证</h3> 
<h4><a id="_198"></a>拉取运行容器</h4> 
<pre><code class="prism language-python"><span class="token comment"># 第一次安装可以不用，但是卸载后再安装，就需要执行一下，否则会报错：“Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?”</span>
sudo service docker start
</code></pre> 
<pre><code class="prism language-python">sudo docker run hello<span class="token operator">-</span>world
</code></pre> 
<p>成功了！</p> 
<p><img src="https://images2.imgbox.com/09/8d/Bn43330W_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="build_dockerfile_212"></a>测试build dockerfile</h4> 
<p>测试build dockerfile也没有问题，那那个buildx应该是build跨平台镜像用的：</p> 
<p><img src="https://images2.imgbox.com/a6/bf/C7xUPDeC_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_217"></a>测试持久运行容器</h4> 
<p><img src="https://images2.imgbox.com/75/82/Iyg7SZOG_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="docker_220"></a>测试主机重启后，docker各服务是否正常自启</h4> 
<p>重启后：</p> 
<p><img src="https://images2.imgbox.com/f3/0e/TNFjgiqE_o.png" alt="在这里插入图片描述"></p> 
<p>看起来应该是没有什么问题，跟用<code>apt install docker.io</code>效果一样</p> 
<h3><a id="_228"></a>卸载方法</h3> 
<p>可以用<code>dpkg -r &lt;package_name&gt;</code>命令来卸载包，</p> 
<p>我写了个卸载脚本，执行脚本可以一键卸载docker（卸载上面安装的那三个.deb包）：</p> 
<pre><code class="prism language-python"><span class="token comment">#!/bin/bash</span>

<span class="token comment"># 打印所有，包括注释</span>
<span class="token comment"># set -v</span>
<span class="token comment"># 打印执行命令</span>
<span class="token comment"># set -x</span>
<span class="token comment"># 命令出错退出</span>
<span class="token builtin">set</span> <span class="token operator">-</span>e
<span class="token comment"># 使用未初始化变量退出</span>
<span class="token builtin">set</span> <span class="token operator">-</span>u

USER<span class="token operator">=</span>root

<span class="token comment"># Check user: only support root</span>
WHO<span class="token operator">=</span>$<span class="token punctuation">(</span>whoami <span class="token operator">|</span> grep <span class="token string">"${USER}$"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>z <span class="token string">"${WHO}"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
    echo
    echo <span class="token string">"Please change to \"${USER}\" user mode first!"</span>
    echo
    exit <span class="token number">1</span>
fi

<span class="token comment"># 卸载函数</span>
uninstall_package<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    package_name<span class="token operator">=</span>$<span class="token number">1</span>

    dpkg <span class="token operator">-</span>r $package_name
    <span class="token keyword">if</span> <span class="token punctuation">[</span> $? <span class="token operator">-</span>ne <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
        echo <span class="token string">"卸载 $package_name 失败!"</span>
        echo
        exit <span class="token number">1</span>
    fi
    echo <span class="token string">"卸载 $package_name 成功"</span>
    echo
<span class="token punctuation">}</span>

<span class="token comment"># 注意卸载顺序：docker-ce 依赖 docker-ce-cli，不能先卸载 docker-ce-cli</span>

<span class="token comment"># 卸载docker-ce</span>
uninstall_package <span class="token string">"docker-ce"</span>

<span class="token comment"># 卸载docker-ce-cli</span>
uninstall_package <span class="token string">"docker-ce-cli"</span>

<span class="token comment"># 卸载containerd.io</span>
uninstall_package <span class="token string">"containerd.io"</span>

</code></pre> 
<p>执行结果：</p> 
<p><img src="https://images2.imgbox.com/7d/01/w785bHQR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_288"></a>附：各安装包作用说明（以及插件）</h3> 
<p>下面是Docker相关软件包的安装文件，各自的作用如下：</p> 
<h5><a id="1_containerdio_version_archdeb_291"></a>1. <code>containerd.io_&lt;version&gt;_&lt;arch&gt;.deb</code></h5> 
<p>这是Docker容器运行时（containerd）的软件包。Containerd是一个开源的容器运行时，用于管理和运行容器。</p> 
<h5><a id="2_dockerce_version_archdeb_294"></a>2. <code>docker-ce_&lt;version&gt;_&lt;arch&gt;.deb</code></h5> 
<p>这是Docker社区版（Community Edition）的软件包。Docker CE是免费的Docker版本，适用于个人和小型团队使用。</p> 
<h5><a id="3_dockercecli_version_archdeb_297"></a>3. <code>docker-ce-cli_&lt;version&gt;_&lt;arch&gt;.deb</code></h5> 
<p>这是Docker社区版的命令行界面（CLI）的软件包。它提供了与Docker守护进程进行交互的命令行工具。</p> 
<h5><a id="4_dockerbuildxplugin_version_archdeb_300"></a>4. <code>docker-buildx-plugin_&lt;version&gt;_&lt;arch&gt;.deb</code></h5> 
<p>这是Docker Buildx插件的软件包。Buildx是一个用于构建多平台镜像的工具，它可以同时构建多个平台的镜像，并支持交叉编译。</p> 
<h5><a id="5_dockercomposeplugin_version_archdeb_303"></a>5. <code>docker-compose-plugin_&lt;version&gt;_&lt;arch&gt;.deb</code></h5> 
<p>这是Docker Compose插件的软件包。Docker Compose是一个用于定义和运行多容器应用的工具，它使用一个YAML文件来配置应用的服务、网络和卷等。</p> 
<h3><a id="dockercerootlessextras_version_archdebdockerscanplugin_version_archdeb___306"></a>附：<code>docker-ce-rootless-extras_&lt;version&gt;_&lt;arch&gt;.deb</code>和<code>docker-scan-plugin_&lt;version&gt;_&lt;arch&gt;.deb </code>是什么？</h3> 
<p><a href="https://download.docker.com/linux/ubuntu/dists/focal/pool/stable/amd64/" rel="nofollow">https://download.docker.com/linux/ubuntu/dists/focal/pool/stable/amd64/</a></p> 
<p>下载文件列表里有这两个，不知道是啥？</p> 
<p><img src="https://images2.imgbox.com/e2/ec/UzKAt7rB_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/04/3f/UeG9YDXk_o.png" alt="在这里插入图片描述"></p> 
<p><code>docker-ce-rootless-extras_&lt;version&gt;_&lt;arch&gt;.deb</code> 是Docker社区版（Community Edition）的非root用户额外组件的软件包。它包含了一些用于在非root用户下运行Docker的额外工具和插件。这些组件允许非特权用户在没有root权限的情况下使用Docker。</p> 
<p><code>docker-scan-plugin_&lt;version&gt;_&lt;arch&gt;.deb</code> 是Docker的扫描插件的软件包。这个插件允许用户对Docker镜像进行安全扫描，以检测其中的漏洞和安全问题。它可以帮助用户在构建和部署容器时提前发现潜在的安全风险。</p> 
<p>这两个软件包是Docker的附加组件，可以根据需要选择安装。<code>docker-ce-rootless-extras</code>适用于非root用户使用Docker的场景，而<code>docker-scan-plugin</code>适用于进行Docker镜像的安全扫描。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2f0ddc1ed9b35808356520f751899d09/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第三章 前端发起HTTP请求</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0bdfed371a3488301760f3adc50275e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">杨中科 ASP.NETCore Rest</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>