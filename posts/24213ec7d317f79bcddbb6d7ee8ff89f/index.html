<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【JAVA - Druid】Druid数据库连接池 -- 快速入门使用 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【JAVA - Druid】Druid数据库连接池 -- 快速入门使用" />
<meta property="og:description" content="1. 导入相关的 jar 包
* mysql-connector-java.jar包（此包用于idea连接数据库用）
* Druid.jar（对数据库进行操作（增删查改，用的是mysql）
* 其他包用于数据操作使用
2. 进行相关的数据库配置 ，编写.xml文件 （放在java工程src目录下）
// 告诉java去com.mysql.jdbc路径下将Driver类加载到jvm内存中 driverClassName=com.mysql.jdbc.Driver /* 因为此处是本机与端口号默认为80所以简写，全写为（jdbc:mysql://ip地址:端口号/db3?userUnicode=true&amp;characterEncoding=UTF-8 */ url=jdbc:mysql:///db3?useUnicode=true&amp;characterEncoding=UTF-8 // mysql的用户名和密码 username=root password=root // 初始化连接池的大小 initialSize=5 // 连接池最大的连接数 maxActive=10 // 等待时间，以防出现bug持续等待，设置3s（3000ms）无反应自动归还连接对象 maxWait=3000 3.编写JDBC的工具类，java-jvm加载Druid相关配置，初始化连接池等操作，具体代码如下：
package webtest; import com.alibaba.druid.pool.DruidDataSourceFactory; import javax.sql.DataSource; import java.io.IOException; import java.io.InputStream; import java.sql.Connection; import java.sql.SQLException; import java.util.Properties; // JDBC工具类，使用的是 Druid连接池 public class JDBCUtils { // 创建一个连接池 ds，private对象默认为 null private static DataSource ds; static { try { // 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/24213ec7d317f79bcddbb6d7ee8ff89f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-22T01:31:43+08:00" />
<meta property="article:modified_time" content="2020-02-22T01:31:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【JAVA - Druid】Druid数据库连接池 -- 快速入门使用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1. 导入相关的 jar 包</p> 
<p>    * mysql-connector-java.jar包（此包用于idea连接数据库用）</p> 
<p>    * Druid.jar（对数据库进行操作（增删查改，用的是mysql）</p> 
<p>     * 其他包用于数据操作使用</p> 
<p><img alt="" height="323" src="https://images2.imgbox.com/9f/43/IfolqQSG_o.png" width="432"></p> 
<p>2. 进行相关的数据库配置 ，编写.xml文件 （放在java工程src目录下）</p> 
<pre><code>
// 告诉java去com.mysql.jdbc路径下将Driver类加载到jvm内存中
driverClassName=com.mysql.jdbc.Driver
/* 因为此处是本机与端口号默认为80所以简写，全写为（jdbc:mysql://ip地址:端口号/db3?userUnicode=true&amp;characterEncoding=UTF-8 */
url=jdbc:mysql:///db3?useUnicode=true&amp;characterEncoding=UTF-8 
// mysql的用户名和密码
username=root
password=root
// 初始化连接池的大小
initialSize=5
// 连接池最大的连接数
maxActive=10
// 等待时间，以防出现bug持续等待，设置3s（3000ms）无反应自动归还连接对象
maxWait=3000</code></pre> 
<p>3.编写JDBC的工具类，java-jvm加载Druid相关配置，初始化连接池等操作，具体代码如下：</p> 
<pre><code>package webtest;


import com.alibaba.druid.pool.DruidDataSourceFactory;

import javax.sql.DataSource;
import java.io.IOException;
import java.io.InputStream;
import java.sql.Connection;
import java.sql.SQLException;
import java.util.Properties;


// JDBC工具类，使用的是 Druid连接池
public class JDBCUtils {

    // 创建一个连接池 ds，private对象默认为 null
    private static DataSource ds;

    static {
        try {
            // 1.加载配置文件
            Properties pro = new Properties();
            InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream("druid.properties");
            pro.load(is);

            // 2.初始化连接池
            ds = DruidDataSourceFactory.createDataSource(pro);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    // 获取连接池对象
    public static DataSource getDs(){
        return ds;
    }

    // 获取连接对象
    public static Connection getConnection() throws SQLException {
        return ds.getConnection();
    }



}
</code></pre> 
<p> 4.创建数据库 -- 建表 -- 插入数据 以便于样例的测试</p> 
<pre><code>
// 创建数据库 db3
CREATE DATABASE db3;

// 使用数据库 db3
USE db3；

// 建一个 users 表
CREATE TABLE users(
	id INT PRIMARY KEY AUTO_INCREMENT,
	username VARCHAR(30) UNIQUE NOT NULL,
	PASSWORD VARCHAR(30) NOT NULL
);

// 插入数据方便接下来的测试
INSERT INTO users VALUES(NULL,123,123);</code></pre> 
<p>5.封装一个 users 类</p> 
<pre><code>package webtest;

public class User {
    private int id;
    private String username;
    private String password;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @Override
    public String toString() {
        return "User{" +
                "id=" + id +
                ", username='" + username + '\'' +
                ", password='" + password + '\'' +
                '}';
    }
}
</code></pre> 
<p>6.写一个Test类进行测试（本应该使用@Test独立测试，由于电脑配置有限，使用简单测试）</p> 
<pre><code>package webtest;

public class UserDaoTest {
    public static void main(String[] args) {
        UserDao userDao = new UserDao();
        User loginuser = new User();
        loginuser.setUsername("123");
        loginuser.setPassword("123");
        User user = userDao.login(loginuser);
        if(user == null){
            System.out.println("账号或密码错误");
        }else {
            System.out.println("欢迎您：" + loginuser.getUsername() + ",登录成功");
        }
    }
}
</code></pre> 
<p>7.测试结果：</p> 
<p> </p> 
<p><img alt="" height="226" src="https://images2.imgbox.com/84/9c/4Xxtn8tw_o.png" width="724"></p> 
<p>8.其他：</p> 
<p>  *需要相关jar留言留下邮箱即可。</p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/671ec7be19fae58344bfc1163d308675/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">词嵌入</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6d632063b1cdbbc54eeab4cc2441ea06/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Windows Sockets 网络编程及UR机器人通信数据解析代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>