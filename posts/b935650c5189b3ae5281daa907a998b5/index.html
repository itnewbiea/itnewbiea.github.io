<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>边缘测量 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="边缘测量" />
<meta property="og:description" content="1. 边缘定义 灰度明暗变化产生边缘，如何量化边缘的定义呢？
一维边缘的定义：图像中的点，其一阶导数绝对值是局部最大值，也被称为非最大抑制。一阶导数大于0是正边缘，小于0是负边缘。
等价定义：二阶导数过零的点。
按照上述定义，一维边缘就是点。与此相对应，二维边缘就是线，由一维边缘点组合而成的线（直线、曲线）。
二维边缘的定义：图像中的若干点组合成的线，这些点的方向导数在垂直于边缘的方向上局部最大的。或者说在这些点上梯度值在梯度方向上局部最大。
类似于一维边缘的定价定义：拉普拉斯算子过零的那些点。
但是，对于二维边缘来说，拉普拉斯和梯度计算出来的边缘位置通常是不同的，通过梯度计算二维边缘是首选。
2. HALCON 1D测量 HALCON一维测量的步骤如下：
1) 生成测量矩形或者测量弧形。算子有：
gen_measure_rectangle2 gen_measure_arc
2）执行测量。算子有：
measure_pos： extracts straight edges perpendicular to the main axis of the measure object and returns the positions of the edge centers, the edge amplitudes, and the distances between consecutive edges.
measure_pairs： extracts straight edge pairs perpendicular to the main axis of the measure object and returns the positions of the edge centers of the edge pairs, the edge amplitudes for the edge pairs, the distances between the edges of an edge pair, and the distances between consecutive edge pairs." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b935650c5189b3ae5281daa907a998b5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-21T20:56:06+08:00" />
<meta property="article:modified_time" content="2021-02-21T20:56:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">边缘测量</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1. 边缘定义</h2> 
<p>灰度明暗变化产生边缘，如何量化边缘的定义呢？</p> 
<p>一维边缘的定义：图像中的点，其一阶导数绝对值是局部最大值，也被称为非最大抑制。一阶导数大于0是正边缘，小于0是负边缘。</p> 
<p>等价定义：二阶导数过零的点。</p> 
<p>按照上述定义，一维边缘就是点。与此相对应，二维边缘就是线，由一维边缘点组合而成的线（直线、曲线）。</p> 
<p>二维边缘的定义：图像中的若干点组合成的线，这些点的方向导数在垂直于边缘的方向上局部最大的。或者说在这些点上梯度值在梯度方向上局部最大。</p> 
<p>类似于一维边缘的定价定义：拉普拉斯算子过零的那些点。</p> 
<p>但是，对于二维边缘来说，拉普拉斯和梯度计算出来的边缘位置通常是不同的，通过梯度计算二维边缘是首选。</p> 
<h2>2. HALCON 1D测量</h2> 
<p>HALCON一维测量的步骤如下：</p> 
<p>1) 生成测量矩形或者测量弧形。算子有：</p> 
<p><strong>gen_measure_rectangle2</strong> </p> 
<p><strong>gen_measure_arc</strong></p> 
<p>2）执行测量。算子有：</p> 
<p><strong>measure_pos</strong>： extracts <span style="color:#f33b45;">straight edges perpendicular to the main axis of the measure object</span> and returns the positions of the edge centers, the edge amplitudes, and the distances between consecutive edges.</p> 
<p><strong>measure_pairs</strong>： extracts <span style="color:#f33b45;">straight edge pairs perpendicular to the main axis of the measure object </span>and returns the positions of the edge centers of the edge pairs, the edge amplitudes for the edge pairs, the distances between the edges of an edge pair, and the distances between consecutive edge pairs.</p> 
<p><strong>fuzzy_measure_pos</strong>： extracts <span style="color:#f33b45;">straight edges perpendicular to the main axis of the measure object</span> and returns the positions of the edge centers, the edge amplitudes, the fuzzy scores, and the distances between consecutive edges.</p> 
<p><strong>fuzzy_measure_pairs</strong>： extracts<span style="color:#f33b45;"> straight edge pairs perpendicular to the main axis of the measure object </span>and returns the positions of the first and second edges of the edge pairs, the edge amplitudes for the edge pairs, the positions of the centers of the edge pairs, the fuzzy scores, the distances between the edges of an edge pair, and the distances between consecutive edge pairs.</p> 
<p>3）释放测量矩形或者测量弧形。算子有：</p> 
<p><strong>close_measure</strong></p> 
<p>一维测量的准确度依赖于测量矩形或者测量弧形。因为一维测量认为：待测量的边缘垂直于测量矩形或者测量弧形的主轴。所以一旦测量矩形或者测量弧形的主轴定位发生较大的偏差，意味着找到的边缘也发生较大的变差。实际执行时，往往通过形状匹配来准确定位测量矩形或者测量弧形。</p> 
<p>下图故意将测量矩形倾斜，导致找出的边缘也跟着倾斜，计算出来的边缘位置和距离都与实际发生较大偏差。</p> 
<p><img alt="" src="https://images2.imgbox.com/81/bc/7lm95AeM_o.jpg"></p> 
<h2>3. 2D测量</h2> 
<p>二维测量的步骤如下：</p> 
<p>1）创建测量模型。算子为：</p> 
<p>create_metrology_model</p> 
<p>2）为测量模型设置图像尺寸。算子为</p> 
<p>set_metrology_model_image_size</p> 
<p>3）添加测量物。算子有：</p> 
<p>add_metrology_object_circle_measure：添加圆</p> 
<p>add_metrology_object_ellipse_measure ：添加椭圆</p> 
<p>add_metrology_object_rectangle2_measure：添加带方向矩形</p> 
<p>add_metrology_object_line_measure：添加线.</p> 
<p>add_metrology_object_generic ：添加其他形状</p> 
<p>如下图，测量物（红色）定义了图像中待测物体的大概位置、方向和形状。HALCON自动沿着测量物边界定义了一圈垂直于边界的矩形组，作为测量区域。实际边缘（绿色）就是在这些测量区域内找到的。</p> 
<p>查看测量物，可以用算子 get_metrology_object_model_contour。查看测量区域，可以用算子 get_metrology_object_measures</p> 
<p><img alt="" src="https://images2.imgbox.com/76/2e/j4DefCzf_o.jpg"></p> 
<p>4）设置模型参数。算子为：</p> 
<p>set_metrology_model_param</p> 
<p>可以设置相机的标定参数，从而直接得到世界坐标的测量值。也可以重新设置坐标系的原点和角度。</p> 
<p>5）设置测量物参数。算子为：</p> 
<p>set_metrology_object_param</p> 
<p>可以在第三步添加测量物时设置参数，也可以在此单独设置。主要参数有控制测量区域尺寸、分布的，有控制边缘判断的,...</p> 
<p>6) 测量模型定位。算子为：</p> 
<p>align_metrology_model</p> 
<p>旋转、平移测量模型，以匹配待测物位置的改变。</p> 
<p>7）测量。算子为：</p> 
<p>apply_metrology_model</p> 
<p>Halcon内部执行了一些列 measure_pos or fuzzy_measure_pos。获得一些列边缘点，然后进行优化拟合，返回结果给用户。</p> 
<p>所以，二维测量基于一维测量，但是相较一维测量，二维测量更加复杂，返回的数据也更加准确。</p> 
<p>8）获取结果。算子为：</p> 
<p>get_metrology_object_result </p> 
<p>get_metrology_object_measures 返回测量区域</p> 
<p>get_metrology_object_result_contour 返回最终得到的边缘</p> 
<p>9）释放测量模型。算子为：</p> 
<p>clear_metrology_model</p> 
<p>把一维测量的那副图像，应用二维测量：</p> 
<p><img alt="" src="https://images2.imgbox.com/67/d1/nEW3qhEv_o.jpg"></p> 
<p>红色的测量物的两条直线，故意倾斜一定角度。但仍然准确地识别出边缘（绿色）。灰色矩形框是测量区域。</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7468989d068612129954b4cf50fc861b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Keil5中出现UNDEFINED SYMBOL</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/85a7bf675b50ef39a2e31f5dcc0a827d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">pytorch的两个函数 .detach() .detach_() 的作用和区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>