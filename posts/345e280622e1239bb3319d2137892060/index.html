<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>k8s中yaml文件详解 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="k8s中yaml文件详解" />
<meta property="og:description" content="目录 一、yaml文件格式二、deployment.yaml文件详解三、Service yaml文件详解四、Pod yaml文件详解 一、yaml文件格式 Kubernetes支持YAML和lJSON格式管理资源对象
JSON格式:主要用于api接口之间消息的传递
YAML格式:用于配置和管理，YAML是一种简洁的非标记性语言，内容格式人性化，较易读YAMLi语法格式: 大小写敏感使用缩进表示层级关系不支持Tab键制表符缩i进,只使用空格缩进缩进的空格数目不重要，只要相同层级的元素左侧对齐即可，通常开头缩进两个空格字符后缩进一个空格，如冒号，逗号，短横杆（-)等&#34;—&#34;表示YAML格式，一个文件的开始，用于分隔文件间&#34;#&#34;表示注释 二、deployment.yaml文件详解 apiVersion: extensions/v1beta1 #接口版本 kind: Deployment #接口类型 metadata: name: cango-demo #Deployment名称 namespace: cango-prd #命名空间 labels: app: cango-demo #标签 spec: replicas: 3 strategy: rollingUpdate: ##由于replicas为3,则整个升级,pod个数在2-4个之间 maxSurge: 1 #滚动升级时会先启动1个pod maxUnavailable: 1 #滚动升级时允许的最大Unavailable的pod个数 template: metadata: labels: app: cango-demo #模板名称必填 sepc: #定义容器模板，该模板可以包含多个容器 containers: - name: cango-demo #镜像名称 image: swr.cn-east-2.myhuaweicloud.com/cango-prd/cango-demo:0.0.1-SNAPSHOT #镜像地址 command: [ &#34;/bin/sh&#34;,&#34;-c&#34;,&#34;cat /etc/config/path/to/special-key&#34; ] #启动命令 args: #启动参数 - &#39;-storage.local.retention=$(STORAGE_RETENTION)&#39; - &#39;-storage.local.memory-chunks=$(STORAGE_MEMORY_CHUNKS)&#39; - &#39;-config.file=/etc/prometheus/prometheus.yml&#39; - &#39;-alertmanager." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/345e280622e1239bb3319d2137892060/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-18T16:46:07+08:00" />
<meta property="article:modified_time" content="2021-08-18T16:46:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">k8s中yaml文件详解</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#yaml_1" rel="nofollow">一、yaml文件格式</a></li><li><a href="#deploymentyaml_13" rel="nofollow">二、deployment.yaml文件详解</a></li><li><a href="#Service_yaml_118" rel="nofollow">三、Service yaml文件详解</a></li><li><a href="#Pod_yaml_148" rel="nofollow">四、Pod yaml文件详解</a></li></ul> 
</div> 
<p></p> 
<h2><a id="yaml_1"></a>一、yaml文件格式</h2> 
<ul><li>Kubernetes支持YAML和lJSON格式管理资源对象<br> JSON格式:主要用于api接口之间消息的传递<br> YAML格式:用于配置和管理，YAML是一种简洁的非标记性语言，内容格式人性化，较易读</li><li>YAMLi语法格式: 
  <ul><li>大小写敏感</li><li>使用缩进表示层级关系</li><li>不支持Tab键制表符缩i进,只使用空格缩进</li><li>缩进的空格数目不重要，只要相同层级的元素左侧对齐即可，通常开头缩进两个空格</li><li>字符后缩进一个空格，如冒号，逗号，短横杆（-)等</li><li>"—"表示YAML格式，一个文件的开始，用于分隔文件间</li><li>"#"表示注释</li></ul> </li></ul> 
<h2><a id="deploymentyaml_13"></a>二、deployment.yaml文件详解</h2> 
<pre><code class="prism language-javascript">apiVersion<span class="token operator">:</span> extensions<span class="token operator">/</span>v1beta1   #接口版本
kind<span class="token operator">:</span> Deployment                 #接口类型
metadata<span class="token operator">:</span>
  name<span class="token operator">:</span> cango<span class="token operator">-</span>demo               #Deployment名称
  namespace<span class="token operator">:</span> cango<span class="token operator">-</span>prd           #命名空间
  labels<span class="token operator">:</span>
    app<span class="token operator">:</span> cango<span class="token operator">-</span>demo              #标签
spec<span class="token operator">:</span>
  replicas<span class="token operator">:</span> <span class="token number">3</span>
  strategy<span class="token operator">:</span>
    rollingUpdate<span class="token operator">:</span>  ##由于replicas为<span class="token number">3</span><span class="token punctuation">,</span>则整个升级<span class="token punctuation">,</span>pod个数在<span class="token number">2</span><span class="token operator">-</span><span class="token number">4</span>个之间
      maxSurge<span class="token operator">:</span> <span class="token number">1</span>      #滚动升级时会先启动<span class="token number">1</span>个pod
      maxUnavailable<span class="token operator">:</span> <span class="token number">1</span> #滚动升级时允许的最大Unavailable的pod个数
  template<span class="token operator">:</span>         
    metadata<span class="token operator">:</span>
      labels<span class="token operator">:</span>
        app<span class="token operator">:</span> cango<span class="token operator">-</span>demo  #模板名称必填
    sepc<span class="token operator">:</span> #定义容器模板，该模板可以包含多个容器
      containers<span class="token operator">:</span>                                                                   
        <span class="token operator">-</span> name<span class="token operator">:</span> cango<span class="token operator">-</span>demo                                                           #镜像名称
          image<span class="token operator">:</span> swr<span class="token punctuation">.</span>cn<span class="token operator">-</span>east<span class="token operator">-</span><span class="token number">2.</span>myhuaweicloud<span class="token punctuation">.</span>com<span class="token operator">/</span>cango<span class="token operator">-</span>prd<span class="token operator">/</span>cango<span class="token operator">-</span>demo<span class="token operator">:</span><span class="token number">0.0</span><span class="token number">.1</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span> #镜像地址
          command<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"/bin/sh"</span><span class="token punctuation">,</span><span class="token string">"-c"</span><span class="token punctuation">,</span><span class="token string">"cat /etc/config/path/to/special-key"</span> <span class="token punctuation">]</span>    #启动命令
          args<span class="token operator">:</span>                                                                #启动参数
            <span class="token operator">-</span> <span class="token string">'-storage.local.retention=$(STORAGE_RETENTION)'</span>
            <span class="token operator">-</span> <span class="token string">'-storage.local.memory-chunks=$(STORAGE_MEMORY_CHUNKS)'</span>
            <span class="token operator">-</span> <span class="token string">'-config.file=/etc/prometheus/prometheus.yml'</span>
            <span class="token operator">-</span> <span class="token string">'-alertmanager.url=http://alertmanager:9093/alertmanager'</span>
            <span class="token operator">-</span> <span class="token string">'-web.external-url=$(EXTERNAL_URL)'</span>
    #如果command和args均没有写，那么用Docker默认的配置。
    #如果command写了，但args没有写，那么Docker默认的配置会被忽略而且仅仅执行<span class="token punctuation">.</span>yaml文件的command（不带任何参数的）。
    #如果command没写，但args写了，那么Docker默认配置的<span class="token constant">ENTRYPOINT</span>的命令行会被执行，但是调用的参数是<span class="token punctuation">.</span>yaml中的args。
    #如果如果command和args都写了，那么Docker默认的配置被忽略，使用<span class="token punctuation">.</span>yaml的配置。
          imagePullPolicy<span class="token operator">:</span> IfNotPresent  #如果不存在则拉取
          livenessProbe<span class="token operator">:</span>       #表示container是否处于live状态。如果LivenessProbe失败，LivenessProbe将会通知kubelet对应的container不健康了。随后kubelet将kill掉container，并根据RestarPolicy进行进一步的操作。默认情况下LivenessProbe在第一次检测之前初始化值为Success，如果container没有提供LivenessProbe，则也认为是Success；
            httpGet<span class="token operator">:</span>
              path<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">health #如果没有心跳检测接口就为</span><span class="token regex-delimiter">/</span></span>
              port<span class="token operator">:</span> <span class="token number">8080</span>
              scheme<span class="token operator">:</span> <span class="token constant">HTTP</span>
            initialDelaySeconds<span class="token operator">:</span> <span class="token number">60</span> ##启动后延时多久开始运行检测
            timeoutSeconds<span class="token operator">:</span> <span class="token number">5</span>
            successThreshold<span class="token operator">:</span> <span class="token number">1</span>
            failureThreshold<span class="token operator">:</span> <span class="token number">5</span>
          readinessProbe<span class="token operator">:</span>
            httpGet<span class="token operator">:</span>
              path<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">health #如果没有心跳检测接口就为</span><span class="token regex-delimiter">/</span></span>
              port<span class="token operator">:</span> <span class="token number">8080</span>
              scheme<span class="token operator">:</span> <span class="token constant">HTTP</span>
            initialDelaySeconds<span class="token operator">:</span> <span class="token number">30</span> ##启动后延时多久开始运行检测
            timeoutSeconds<span class="token operator">:</span> <span class="token number">5</span>
            successThreshold<span class="token operator">:</span> <span class="token number">1</span>
            failureThreshold<span class="token operator">:</span> <span class="token number">5</span>
          resources<span class="token operator">:</span>              ##<span class="token constant">CPU</span>内存限制
            requests<span class="token operator">:</span>
              cpu<span class="token operator">:</span> <span class="token number">2</span>
              memory<span class="token operator">:</span> <span class="token number">2048</span>Mi
            limits<span class="token operator">:</span>
              cpu<span class="token operator">:</span> <span class="token number">2</span>
              memory<span class="token operator">:</span> <span class="token number">2048</span>Mi
          env<span class="token operator">:</span>                    ##通过环境变量的方式，直接传递pod<span class="token operator">=</span>自定义Linux <span class="token constant">OS</span>环境变量
            <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token constant">LOCAL_KEY</span>     #本地Key
              value<span class="token operator">:</span> value
            <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token constant">CONFIG_MAP_KEY</span>  #局策略可使用configMap的配置Key，
              valueFrom<span class="token operator">:</span>
                configMapKeyRef<span class="token operator">:</span>
                  name<span class="token operator">:</span> special<span class="token operator">-</span>config   #configmap中找到name为special<span class="token operator">-</span>config
                  key<span class="token operator">:</span> special<span class="token punctuation">.</span>type      #找到name为special<span class="token operator">-</span>config里data下的key
          ports<span class="token operator">:</span>
            <span class="token operator">-</span> name<span class="token operator">:</span> http
              containerPort<span class="token operator">:</span> <span class="token number">8080</span> #对service暴露端口
          volumeMounts<span class="token operator">:</span>     #挂载volumes中定义的磁盘
          <span class="token operator">-</span> name<span class="token operator">:</span> log<span class="token operator">-</span>cache
            mount<span class="token operator">:</span> <span class="token operator">/</span>tmp<span class="token operator">/</span>log
          <span class="token operator">-</span> name<span class="token operator">:</span> sdb       #普通用法，该卷跟随容器销毁，挂载一个目录
            mountPath<span class="token operator">:</span> <span class="token operator">/</span>data<span class="token operator">/</span>media    
          <span class="token operator">-</span> name<span class="token operator">:</span> nfs<span class="token operator">-</span>client<span class="token operator">-</span>root    #直接挂载硬盘方法，如挂载下面的nfs目录到<span class="token operator">/</span>mnt<span class="token operator">/</span>nfs
            mountPath<span class="token operator">:</span> <span class="token operator">/</span>mnt<span class="token operator">/</span>nfs
          <span class="token operator">-</span> name<span class="token operator">:</span> example<span class="token operator">-</span>volume<span class="token operator">-</span>config  #高级用法第<span class="token number">1</span>种，将ConfigMap的log<span class="token operator">-</span>script<span class="token punctuation">,</span>backup<span class="token operator">-</span>script分别挂载到<span class="token operator">/</span>etc<span class="token operator">/</span>config目录下的一个相对路径path<span class="token operator">/</span>to<span class="token operator">/</span><span class="token operator">...</span>下，如果存在同名文件，直接覆盖。
            mountPath<span class="token operator">:</span> <span class="token operator">/</span>etc<span class="token operator">/</span>config       
          <span class="token operator">-</span> name<span class="token operator">:</span> rbd<span class="token operator">-</span>pvc                #高级用法第<span class="token number">2</span>中，挂载<span class="token constant">PVC</span><span class="token punctuation">(</span>PresistentVolumeClaim<span class="token punctuation">)</span>
 
#使用volume将ConfigMap作为文件或目录直接挂载，其中每一个key<span class="token operator">-</span>value键值对都会生成一个文件，key为文件名，value为内容，
  volumes<span class="token operator">:</span>  # 定义磁盘给上面volumeMounts挂载
  <span class="token operator">-</span> name<span class="token operator">:</span> log<span class="token operator">-</span>cache
    emptyDir<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token operator">-</span> name<span class="token operator">:</span> sdb  #挂载宿主机上面的目录
    hostPath<span class="token operator">:</span>
      path<span class="token operator">:</span> <span class="token operator">/</span>any<span class="token operator">/</span>path<span class="token operator">/</span>it<span class="token operator">/</span>will<span class="token operator">/</span>be<span class="token operator">/</span>replaced
  <span class="token operator">-</span> name<span class="token operator">:</span> example<span class="token operator">-</span>volume<span class="token operator">-</span>config  # 供ConfigMap文件内容到指定路径使用
    configMap<span class="token operator">:</span>
      name<span class="token operator">:</span> example<span class="token operator">-</span>volume<span class="token operator">-</span>config  #ConfigMap中名称
      items<span class="token operator">:</span>
      <span class="token operator">-</span> key<span class="token operator">:</span> log<span class="token operator">-</span>script           #ConfigMap中的Key
        path<span class="token operator">:</span> path<span class="token operator">/</span>to<span class="token operator">/</span>log<span class="token operator">-</span>script  #指定目录下的一个相对路径path<span class="token operator">/</span>to<span class="token operator">/</span>log<span class="token operator">-</span>script
      <span class="token operator">-</span> key<span class="token operator">:</span> backup<span class="token operator">-</span>script        #ConfigMap中的Key
        path<span class="token operator">:</span> path<span class="token operator">/</span>to<span class="token operator">/</span>backup<span class="token operator">-</span>script  #指定目录下的一个相对路径path<span class="token operator">/</span>to<span class="token operator">/</span>backup<span class="token operator">-</span>script
  <span class="token operator">-</span> name<span class="token operator">:</span> nfs<span class="token operator">-</span>client<span class="token operator">-</span>root         #供挂载<span class="token constant">NFS</span>存储类型
    nfs<span class="token operator">:</span>
      server<span class="token operator">:</span> <span class="token number">10.42</span><span class="token number">.0</span><span class="token number">.55</span>          #<span class="token constant">NFS</span>服务器地址
      path<span class="token operator">:</span> <span class="token operator">/</span>opt<span class="token operator">/</span><span class="token keyword">public</span>           #showmount <span class="token operator">-</span>e 看一下路径
  <span class="token operator">-</span> name<span class="token operator">:</span> rbd<span class="token operator">-</span>pvc                 #挂载<span class="token constant">PVC</span>磁盘
    persistentVolumeClaim<span class="token operator">:</span>
      claimName<span class="token operator">:</span> rbd<span class="token operator">-</span>pvc1         #挂载已经申请的pvc磁盘
</code></pre> 
<h2><a id="Service_yaml_118"></a>三、Service yaml文件详解</h2> 
<pre><code class="prism language-javascript">apiVersion<span class="token operator">:</span> v1
kind<span class="token operator">:</span> Service
matadata<span class="token operator">:</span>                                #元数据
  name<span class="token operator">:</span> string                           #service的名称
  namespace<span class="token operator">:</span> string                      #命名空间  
  labels<span class="token operator">:</span>                                #自定义标签属性列表
    <span class="token operator">-</span> name<span class="token operator">:</span> string
  annotations<span class="token operator">:</span>                           #自定义注解属性列表  
    <span class="token operator">-</span> name<span class="token operator">:</span> string
spec<span class="token operator">:</span>                                    #详细描述
  selector<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>                           #label selector配置，将选择具有label标签的Pod作为管理 
                                         #范围
  type<span class="token operator">:</span> string                           #service的类型，指定service的访问方式，默认为 
                                         #clusterIp
  clusterIP<span class="token operator">:</span> string                      #虚拟服务地址      
  sessionAffinity<span class="token operator">:</span> string                #是否支持session
  ports<span class="token operator">:</span>                                 #service需要暴露的端口列表
  <span class="token operator">-</span> name<span class="token operator">:</span> string                         #端口名称
    protocol<span class="token operator">:</span> string                     #端口协议，支持<span class="token constant">TCP</span>和<span class="token constant">UDP</span>，默认<span class="token constant">TCP</span>
    port<span class="token operator">:</span> int                            #服务监听的端口号
    targetPort<span class="token operator">:</span> int                      #需要转发到后端Pod的端口号
    nodePort<span class="token operator">:</span> int                        #当type <span class="token operator">=</span> NodePort时，指定映射到物理机的端口号
  status<span class="token operator">:</span>                                #当spce<span class="token punctuation">.</span>type<span class="token operator">=</span>LoadBalancer时，设置外部负载均衡器的地址
    loadBalancer<span class="token operator">:</span>                        #外部负载均衡器    
      ingress<span class="token operator">:</span>                           #外部负载均衡器 
        ip<span class="token operator">:</span> string                       #外部负载均衡器的Ip地址值
        hostname<span class="token operator">:</span> string                 #外部负载均衡器的主机名
</code></pre> 
<h2><a id="Pod_yaml_148"></a>四、Pod yaml文件详解</h2> 
<pre><code class="prism language-javascript">
apiVersion<span class="token operator">:</span> v1			#必选，版本号，例如v1
kind<span class="token operator">:</span> Pod				#必选，Pod
metadata<span class="token operator">:</span>				#必选，元数据
  name<span class="token operator">:</span> string			  #必选，Pod名称
  namespace<span class="token operator">:</span> string		  #必选，Pod所属的命名空间
  labels<span class="token operator">:</span>				  #自定义标签
    <span class="token operator">-</span> name<span class="token operator">:</span> string		    #自定义标签名字
  annotations<span class="token operator">:</span>			    #自定义注释列表
    <span class="token operator">-</span> name<span class="token operator">:</span> string
spec<span class="token operator">:</span>					#必选，Pod中容器的详细定义
  containers<span class="token operator">:</span>			  #必选，Pod中容器列表
  <span class="token operator">-</span> name<span class="token operator">:</span> string		    #必选，容器名称
    image<span class="token operator">:</span> string		    #必选，容器的镜像名称
    imagePullPolicy<span class="token operator">:</span> <span class="token punctuation">[</span>Always <span class="token operator">|</span> Never <span class="token operator">|</span> IfNotPresent<span class="token punctuation">]</span>	#获取镜像的策略：Alawys表示总是下载镜像，IfnotPresent表示优先使用本地镜像，否则下载镜像，Nerver表示仅使用本地镜像
    command<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span>		#容器的启动命令列表，如不指定，使用打包时使用的启动命令
    args<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span>			#容器的启动命令参数列表
    workingDir<span class="token operator">:</span> string		#容器的工作目录
    volumeMounts<span class="token operator">:</span>			#挂载到容器内部的存储卷配置
    <span class="token operator">-</span> name<span class="token operator">:</span> string			  #引用pod定义的共享存储卷的名称，需用volumes<span class="token punctuation">[</span><span class="token punctuation">]</span>部分定义的的卷名
      mountPath<span class="token operator">:</span> string		  #存储卷在容器内mount的绝对路径，应少于<span class="token number">512</span>字符
      readOnly<span class="token operator">:</span> boolean		  #是否为只读模式
    ports<span class="token operator">:</span>					#需要暴露的端口库号列表
    <span class="token operator">-</span> name<span class="token operator">:</span> string			  #端口号名称
      containerPort<span class="token operator">:</span> int	  #容器需要监听的端口号
      hostPort<span class="token operator">:</span> int			  #容器所在主机需要监听的端口号，默认与Container相同
      protocol<span class="token operator">:</span> string		  #端口协议，支持<span class="token constant">TCP</span>和<span class="token constant">UDP</span>，默认<span class="token constant">TCP</span>
    env<span class="token operator">:</span>					#容器运行前需设置的环境变量列表
    <span class="token operator">-</span> name<span class="token operator">:</span> string			  #环境变量名称
      value<span class="token operator">:</span> string			  #环境变量的值
    resources<span class="token operator">:</span>				#资源限制和请求的设置
      limits<span class="token operator">:</span>				  #资源限制的设置
        cpu<span class="token operator">:</span> string			    #Cpu的限制，单位为core数，将用于docker run <span class="token operator">--</span>cpu<span class="token operator">-</span>shares参数
        memory<span class="token operator">:</span> string			#内存限制，单位可以为Mib<span class="token operator">/</span>Gib，将用于docker run <span class="token operator">--</span>memory参数
      requests<span class="token operator">:</span>				  #资源请求的设置
        cpu<span class="token operator">:</span> string			    #Cpu请求，容器启动的初始可用数量
        memory<span class="token operator">:</span> string		    #内存清楚，容器启动的初始可用数量
    livenessProbe<span class="token operator">:</span>     		#对Pod内个容器健康检查的设置，当探测无响应几次后将自动重启该容器，检查方法有exec、httpGet和tcpSocket，对一个容器只需设置其中一种方法即可
      exec<span class="token operator">:</span>					#对Pod容器内检查方式设置为exec方式
        command<span class="token operator">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span>	  #exec方式需要制定的命令或脚本
      httpGet<span class="token operator">:</span>				#对Pod内个容器健康检查方法设置为HttpGet，需要制定Path、port
        path<span class="token operator">:</span> string
        port<span class="token operator">:</span> number
        host<span class="token operator">:</span> string
        scheme<span class="token operator">:</span> string
        HttpHeaders<span class="token operator">:</span>
        <span class="token operator">-</span> name<span class="token operator">:</span> string
          value<span class="token operator">:</span> string
      tcpSocket<span class="token operator">:</span>			#对Pod内个容器健康检查方式设置为tcpSocket方式
         port<span class="token operator">:</span> number
       initialDelaySeconds<span class="token operator">:</span> <span class="token number">0</span>	#容器启动完成后首次探测的时间，单位为秒
       timeoutSeconds<span class="token operator">:</span> <span class="token number">0</span>		#对容器健康检查探测等待响应的超时时间，单位秒，默认<span class="token number">1</span>秒
       periodSeconds<span class="token operator">:</span> <span class="token number">0</span>			#对容器监控检查的定期探测时间设置，单位秒，默认<span class="token number">10</span>秒一次
       successThreshold<span class="token operator">:</span> <span class="token number">0</span>
       failureThreshold<span class="token operator">:</span> <span class="token number">0</span>
       securityContext<span class="token operator">:</span>
         privileged<span class="token operator">:</span><span class="token boolean">false</span>
    restartPolicy<span class="token operator">:</span> <span class="token punctuation">[</span>Always <span class="token operator">|</span> Never <span class="token operator">|</span> OnFailure<span class="token punctuation">]</span>		#Pod的重启策略，Always表示一旦不管以何种方式终止运行，kubelet都将重启，OnFailure表示只有Pod以非<span class="token number">0</span>退出码退出才重启，Nerver表示不再重启该Pod
    nodeSelector<span class="token operator">:</span> obeject		#设置NodeSelector表示将该Pod调度到包含这个label的node上，以key：value的格式指定
    imagePullSecrets<span class="token operator">:</span>			#Pull镜像时使用的secret名称，以key：secretkey格式指定
    <span class="token operator">-</span> name<span class="token operator">:</span> string
    hostNetwork<span class="token operator">:</span><span class="token boolean">false</span>			#是否使用主机网络模式，默认为<span class="token boolean">false</span>，如果设置为<span class="token boolean">true</span>，表示使用宿主机网络
    volumes<span class="token operator">:</span>					#在该pod上定义共享存储卷列表
    <span class="token operator">-</span> name<span class="token operator">:</span> string				  #共享存储卷名称 （volumes类型有很多种）
      emptyDir<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>				  #类型为emtyDir的存储卷，与Pod同生命周期的一个临时目录。为空值
      hostPath<span class="token operator">:</span> string			  #类型为hostPath的存储卷，表示挂载Pod所在宿主机的目录
        path<span class="token operator">:</span> string			    #Pod所在宿主机的目录，将被用于同期中mount的目录
      secret<span class="token operator">:</span>					#类型为secret的存储卷，挂载集群与定义的secre对象到容器内部
        scretname<span class="token operator">:</span> string  
        items<span class="token operator">:</span>     
        <span class="token operator">-</span> key<span class="token operator">:</span> string
          path<span class="token operator">:</span> string
      configMap<span class="token operator">:</span>				#类型为configMap的存储卷，挂载预定义的configMap对象到容器内部
        name<span class="token operator">:</span> string
        items<span class="token operator">:</span>
        <span class="token operator">-</span> key<span class="token operator">:</span> string
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a0098b2fb64a8011e1ff5a1a1d1dbaf2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">kubectl基本命令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/85fa7b53957446efae0ffe8e3e42aa89/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mysql通过xbk备份快速进行大数据量搭建gtid主从</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>