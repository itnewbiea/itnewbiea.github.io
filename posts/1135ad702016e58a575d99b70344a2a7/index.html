<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue3添加高德地图、Vue3添加省市区三级联动 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue3添加高德地图、Vue3添加省市区三级联动" />
<meta property="og:description" content="目录
1.进入高德地图官网 官网地址：高德开放平台 | 高德地图API
2.到这步直接运行代码
3.注意写入你的key 4.注意更改你所需的初始化地图中心位置
1-1 Vue3添加省市区三级联动
1-1.1代码
1-1.2省市区都选择 1.进入高德地图官网 官网地址：高德开放平台 | 高德地图API # 安装地图命令 npm i @amap/amap-jsapi-loader --save 注册账号 - 认证 - 控制台 - 应用 -我的应用 -添加 key 2.到这步直接运行代码 &lt;template&gt; &lt;div class=&#34;app-container&#34;&gt; &lt;div style=&#34;background-color: #ffffff;&#34;&gt; &lt;div id=&#34;container&#34;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script setup&gt; import AMapLoader from &#39;@amap/amap-jsapi-loader&#39;; /*在Vue3中使用时,需要引入Vue3中的shallowRef方法(使用shallowRef进行非深度监听, 因为在Vue3中所使用的Proxy拦截操作会改变JSAPI原生对象,所以此处需要区别Vue2使用方式对地图对象进行非深度监听, 否则会出现问题,建议JSAPI相关对象采用非响应式的普通对象来存储)*/ import { shallowRef } from &#39;@vue/reactivity&#39;; import {ref} from &#34;vue&#34;; // const map = shallowRef(null); const path = ref([]); const current_position = ref([]); function initMap() { window." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1135ad702016e58a575d99b70344a2a7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-12T09:34:41+08:00" />
<meta property="article:modified_time" content="2023-07-12T09:34:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue3添加高德地图、Vue3添加省市区三级联动</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%C2%A01.%E8%BF%9B%E5%85%A5%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%AE%98%E7%BD%91%C2%A0%20%C2%A0%20%E5%AE%98%E7%BD%91%E5%9C%B0%E5%9D%80%EF%BC%9A%E9%AB%98%E5%BE%B7%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%20%7C%20%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BEAPI%C2%A0-toc" style="margin-left:0px;"><a href="#%C2%A01.%E8%BF%9B%E5%85%A5%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%AE%98%E7%BD%91%C2%A0%20%C2%A0%20%E5%AE%98%E7%BD%91%E5%9C%B0%E5%9D%80%EF%BC%9A%E9%AB%98%E5%BE%B7%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%20%7C%20%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BEAPI%C2%A0" rel="nofollow"> 1.进入高德地图官网    官网地址：高德开放平台 | 高德地图API</a></p> 
<p id="2.%E5%88%B0%E8%BF%99%E6%AD%A5%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8C%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#2.%E5%88%B0%E8%BF%99%E6%AD%A5%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8C%E4%BB%A3%E7%A0%81" rel="nofollow">2.到这步直接运行代码</a></p> 
<p id="3.%E6%B3%A8%E6%84%8F%E5%86%99%E5%85%A5%E4%BD%A0%E7%9A%84key%C2%A0-toc" style="margin-left:80px;"><a href="#3.%E6%B3%A8%E6%84%8F%E5%86%99%E5%85%A5%E4%BD%A0%E7%9A%84key%C2%A0" rel="nofollow">3.注意写入你的key </a></p> 
<p id="4.%E6%B3%A8%E6%84%8F%E6%9B%B4%E6%94%B9%E4%BD%A0%E6%89%80%E9%9C%80%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9C%B0%E5%9B%BE%E4%B8%AD%E5%BF%83%E4%BD%8D%E7%BD%AE-toc" style="margin-left:120px;"><a href="#4.%E6%B3%A8%E6%84%8F%E6%9B%B4%E6%94%B9%E4%BD%A0%E6%89%80%E9%9C%80%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9C%B0%E5%9B%BE%E4%B8%AD%E5%BF%83%E4%BD%8D%E7%BD%AE" rel="nofollow">4.注意更改你所需的初始化地图中心位置</a></p> 
<p id="%C2%A01-1%C2%A0%20Vue3%E6%B7%BB%E5%8A%A0%E7%9C%81%E5%B8%82%E5%8C%BA%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8-toc" style="margin-left:0px;"><a href="#%C2%A01-1%C2%A0%20Vue3%E6%B7%BB%E5%8A%A0%E7%9C%81%E5%B8%82%E5%8C%BA%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8" rel="nofollow"> 1-1  Vue3添加省市区三级联动</a></p> 
<p id="1-1.1%E4%BB%A3%E7%A0%81-toc" style="margin-left:120px;"><a href="#1-1.1%E4%BB%A3%E7%A0%81" rel="nofollow">1-1.1代码</a></p> 
<p id="1-1.2%E7%9C%81%E5%B8%82%E5%8C%BA%E9%83%BD%E9%80%89%E6%8B%A9%C2%A0-toc" style="margin-left:120px;"><a href="#1-1.2%E7%9C%81%E5%B8%82%E5%8C%BA%E9%83%BD%E9%80%89%E6%8B%A9%C2%A0" rel="nofollow">1-1.2省市区都选择 </a></p> 
<hr id="hr-toc"> 
<p></p> 
<p> </p> 
<blockquote> 
 <h2 id="%C2%A01.%E8%BF%9B%E5%85%A5%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%AE%98%E7%BD%91%C2%A0%20%C2%A0%20%E5%AE%98%E7%BD%91%E5%9C%B0%E5%9D%80%EF%BC%9A%E9%AB%98%E5%BE%B7%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%20%7C%20%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BEAPI%C2%A0"><strong> 1.进入高德地图官网    官网地址：<strong><a href="https://lbs.amap.com/" rel="nofollow" title="高德开放平台 | 高德地图API">高德开放平台 | 高德地图API</a></strong></strong></h2> 
</blockquote> 
<pre><code class="language-css"># 安装地图命令
npm i @amap/amap-jsapi-loader --save</code></pre> 
<p></p> 
<blockquote> 
 <pre><code>注册账号 - 认证 - 控制台 - 应用 -我的应用 -添加 key</code></pre> 
</blockquote> 
<p></p> 
<p><img alt="" height="831" src="https://images2.imgbox.com/82/b3/jZjHjlNK_o.png" width="1200"></p> 
<p></p> 
<p><img alt="" height="834" src="https://images2.imgbox.com/a1/7c/sbhLa6GM_o.png" width="1200"></p> 
<p> </p> 
<p><img alt="" height="298" src="https://images2.imgbox.com/3f/1f/EmtL9Gg5_o.png" width="1200"></p> 
<p> <img alt="" height="755" src="https://images2.imgbox.com/73/5a/QKYxtEOo_o.png" width="1008"></p> 
<p> </p> 
<p></p> 
<p><img alt="" height="484" src="https://images2.imgbox.com/cc/08/MCBSnLFq_o.png" width="1200"></p> 
<p> </p> 
<blockquote> 
 <h3 id="2.%E5%88%B0%E8%BF%99%E6%AD%A5%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8C%E4%BB%A3%E7%A0%81"><strong>2.到这步直接运行代码</strong></h3> 
</blockquote> 
<pre><code class="language-javascript">&lt;template&gt;
    &lt;div class="app-container"&gt;
        &lt;div style="background-color: #ffffff;"&gt;
            &lt;div id="container"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;
 
&lt;script setup&gt;
import AMapLoader from '@amap/amap-jsapi-loader';
/*在Vue3中使用时,需要引入Vue3中的shallowRef方法(使用shallowRef进行非深度监听,
因为在Vue3中所使用的Proxy拦截操作会改变JSAPI原生对象,所以此处需要区别Vue2使用方式对地图对象进行非深度监听,
否则会出现问题,建议JSAPI相关对象采用非响应式的普通对象来存储)*/
import { shallowRef } from '@vue/reactivity';
import {ref} from "vue";
 
// const map = shallowRef(null);
const path = ref([]);
const current_position = ref([]);
 
 
function initMap() {
    window._AMapSecurityConfig = {
        securityJsCode: '8e920f73eb2e6880a92ea6662eefc476',
    }
    AMapLoader.load({
        key:"这里写入你的key", // 申请好的Web端开发者Key，首次调用 load 时必填
        version:"2.0", // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15
        // plugins:[''], // 需要使用的的插件列表，如比例尺'AMap.Scale'等
    }).then((AMap)=&gt;{
        const map = new AMap.Map("container",{  //设置地图容器id
            viewMode:"3D",    //是否为3D地图模式
            zoom:13,           //初始化地图级别
            center:[113.808299,34.791787], //初始化地图中心点位置
        });
        // 添加插件
        AMap.plugin(["AMap.ToolBar", "AMap.Scale", "AMap.HawkEye","AMap.Geolocation","AMap.MapType","AMap.MouseTool"], function () {
            //异步同时加载多个插件
            // 添加地图插件
            map.addControl(new AMap.ToolBar()); // 工具条控件;范围选择控件
            map.addControl(new AMap.Scale()); // 显示当前地图中心的比例尺
            map.addControl(new AMap.HawkEye()); // 显示缩略图
            map.addControl(new AMap.Geolocation()); // 定位当前位置
            map.addControl(new AMap.MapType()); // 实现默认图层与卫星图,实时交通图层之间切换
 
            // 以下是鼠标工具插件
            const mouseTool = new AMap.MouseTool(map);
            // mouseTool.rule();// 用户手动绘制折线图,测量距离
            mouseTool.measureArea(); // 测量面积
        });
        // 单击
        map.on('click',(e) =&gt; {
            // lng ==&gt; 经度值  lat =&gt; 维度值
            current_position.value = [e.lnglat.lng,e.lnglat.lat];
            path.value.push([e.lnglat.lng,e.lnglat.lat]);
            // addMarker();
            // addPolyLine();
        })
 
 
        // 实例化点标记
        // 第一种(封成函数来触发)
        function addMarker() {
            const marker = new AMap.Marker({
                icon: "//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",
                position: current_position.value, // 这里我们通过上面的点击获取经纬度坐标,实时添加标记
                // 通过设置 offset 来添加偏移量
                offset: new AMap.Pixel(-26, -54),
            });
            marker.setMap(map);
        }
        // 第二种 直接写死 position 的经纬度值
        /*const marker = new AMap.Marker({
            icon: "//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",
            position: [113.808299,34.791787],
            // 通过设置 offset 来添加偏移量
            offset: new AMap.Pixel(-26, -54),
        });
        marker.setMap(map);*/
 
 
        // 折线
        function addPolyLine() {
            const polyline = new AMap.Polyline({
                path: path.value,
                isOutline: true,
                outlineColor: "#ffeeff",
                borderWeight: 1,
                strokeColor: "#3366FF",
                strokeOpacity: 0.6,
                strokeWeight: 5,
                // 折线样式还支持 'dashed'
                strokeStyle: "solid",
                // strokeStyle是dashed时有效
                // strokeDasharray: [10, 5],
                lineJoin: "round",
                lineCap: "round",
                zIndex: 50,
            });
            map.add([polyline]);
        }
 
 
 
    }).catch(e=&gt;{
        console.log(e);
    })
}
 
initMap()
&lt;/script&gt;
 
&lt;style&gt;
#container{
    padding:0px;
    margin: 0px;
    width: 100%;
    height: 800px;
}
&lt;/style&gt;</code></pre> 
<blockquote> 
 <h4 id="3.%E6%B3%A8%E6%84%8F%E5%86%99%E5%85%A5%E4%BD%A0%E7%9A%84key%C2%A0"><strong>3.注意写入你的<span style="color:#fe2c24;">key </span></strong></h4> 
</blockquote> 
<p><img alt="" height="659" src="https://images2.imgbox.com/81/be/ZV8Z4LWp_o.png" width="1049"></p> 
<blockquote> 
 <h5 id="4.%E6%B3%A8%E6%84%8F%E6%9B%B4%E6%94%B9%E4%BD%A0%E6%89%80%E9%9C%80%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9C%B0%E5%9B%BE%E4%B8%AD%E5%BF%83%E4%BD%8D%E7%BD%AE"><strong>4.注意更改你所需的初始化地图中心位置</strong></h5> 
</blockquote> 
<p> <img alt="" height="635" src="https://images2.imgbox.com/44/32/K2EMzIev_o.png" width="1200"></p> 
<blockquote> 
 <h2 id="%C2%A01-1%C2%A0%20Vue3%E6%B7%BB%E5%8A%A0%E7%9C%81%E5%B8%82%E5%8C%BA%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8"><strong> 1-1  Vue3添加省市区三级联动</strong></h2> 
</blockquote> 
<pre><code class="language-cs"># 安装三省联动代码
npm install element-china-area-data -S</code></pre> 
<blockquote> 
 <h5 id="1-1.1%E4%BB%A3%E7%A0%81">1-1.1代码</h5> 
</blockquote> 
<pre><code class="language-html">&lt;template&gt;
  &lt;div class="areabox" &gt;
    &lt;el-form-item label="省" prop="province" &gt;
      &lt;el-select
        v-model="form.province"
        placeholder="请选择省"
        :style="{ width: `${prop.width}px`, marginRight: `${prop.gap}px` }"
        @change="handleProvinceSelect"
      &gt;
        &lt;el-option v-for="item in regionData" :label="item.label" :value="item.value" /&gt;
      &lt;/el-select&gt;
    &lt;/el-form-item&gt;

    &lt;el-form-item label="市" prop="city" &gt;
      &lt;el-select
        v-model="form.city"
        placeholder="请选择市"
        :disabled="!form.province || cityList.length == 0"
        :style="{ width: `${prop.width}px`, marginRight: `${prop.gap}px` }"
        @change="handleCitySelect"
      &gt;
        &lt;el-option v-for="item in cityList" :label="item.label" :value="item.value" /&gt;
      &lt;/el-select&gt;
    &lt;/el-form-item&gt;

    &lt;el-form-item label="区" prop="district"&gt;
      &lt;el-select
        v-model="form.district"
        placeholder="请选择区"
        :style="{ width: `${prop.width}px` }"
        :disabled="!form.province || !form.city || districtList.length == 0"
        @change="handleAreaSelect"
      &gt;
        &lt;el-option v-for="item in districtList" :label="item.label" :value="item.value" /&gt;
      &lt;/el-select&gt;
    &lt;/el-form-item&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script lang="ts" setup&gt;
import { reactive, computed, ComputedRef } from "vue";
import { regionData, codeToText } from "element-china-area-data";

const prop = withDefaults(
  defineProps&lt;{
    gap: string | number; //选择框中间间隙
    width: string | number; //选择框宽度
  }&gt;(),
  {
    gap: "8",
    width: "220",
  }
);
//抛出地址
const emit = defineEmits&lt;{
  (
    e: "getAddress",
    data: {
      code: string[]; //区域码
      name: string[]; //汉字
      isComplete: boolean; //是否选择完整，方便校验
    }
  ): void;
}&gt;();
let form = reactive&lt;{
  province: string;
  city: string;
  district: string;
}&gt;({
  province: "",
  city: "",
  district: "",
});
interface DistrictList {
  value: string;
  label: string;
  children?: DistrictList[];
}
//切换省份函数
const handleProvinceSelect = () =&gt; {
  
  console.log(codeToText[form.province]);
  
    form.city = "";
    form.district = "";
  emit("getAddress", {
    code: [form.province], //区域码
    name: [codeToText[form.province]], //汉字
    isComplete: false,
  });
};
//切换城市函数
const handleCitySelect = () =&gt; {

  console.log(codeToText[form.city]);
  
    form.district = "";
  emit("getAddress", {
    code: [form.province, form.city], //区域码
    name: [codeToText[form.province], codeToText[form.city]], //汉字
    isComplete: districtList.value.length == 0 ? true : false,
  });
};
//切换地区函数
const handleAreaSelect = () =&gt; {

  console.log(codeToText[form.district]);
  
  emit("getAddress", {
    code: [form.province, form.city, form.district], //区域码
    name: [
      codeToText[form.province],
      codeToText[form.city],
      codeToText[form.district],
    ], //汉字
    isComplete: true,
  });
};
//二级城市列表
const cityList: ComputedRef&lt;DistrictList[]&gt; = computed((): DistrictList[] =&gt; {
  if (!form.province) {
    return [];
  }
  let temp = regionData.find((item: any) =&gt; {
    return item.value == form.province;
  }); 
  return temp.children ? temp.children : [];
});
//三级地区列表
const districtList: ComputedRef&lt;DistrictList[]&gt; = computed((): DistrictList[] =&gt; {
  if (!form.province || !form.city) {
    return [];
  }
  if (cityList.value.length == 0) {
    return [];
  } else {
    let temp = cityList.value.find((item: any) =&gt; {
      return item.value == form.city;
    });
    if (temp) {
      return temp.children ? temp.children : [];
    } else {
      return [];
    }
  }
});
&lt;/script&gt;
&lt;style scoped&gt;
.areabox {
    width: 800px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
 
}

&lt;/style&gt;
</code></pre> 
<blockquote> 
 <h5 id="1-1.2%E7%9C%81%E5%B8%82%E5%8C%BA%E9%83%BD%E9%80%89%E6%8B%A9%C2%A0"><strong>1-1.2省市区都选择 </strong></h5> 
</blockquote> 
<p><img alt="" height="356" src="https://images2.imgbox.com/24/e0/uW423jFr_o.png" width="760"></p> 
<p> </p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/54e9c32459b72b4f972ff175317417ee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IMX6ULL-Linux6.3.5版本网卡调试深入讲解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cae0790ef4c9760d9de95c4d8f4aedc0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OpenCV - 图片增加透明通道，图片合并透明通道</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>