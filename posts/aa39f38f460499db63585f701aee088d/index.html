<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>应用软件运行速度提升16倍：Lightbits与Ceph的存储性能对比 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="应用软件运行速度提升16倍：Lightbits与Ceph的存储性能对比" />
<meta property="og:description" content="作者: Russ Fellows, Mohammad J Rabin
概述 云计算和基于容器的应用是推动当今IT领域产生重大变革的两大趋势。与其他技术和方法相比，二者都能够以更高的灵活性和更低的成本去运行和操作应用，因此日益受到欢迎。然而，在所有新的机遇面前，要实现潜在优势也都会有巨大的挑战。
层出不穷的新技术通常会对业务运营产生渐进式的影响。但是，以云计算作为运行模式，结合管理云原生应用的Kubernetes——这一做法已经改变了信息技术的交付、管理和使用方式。
此外，为支持这些环境而设计的系统需要选择计算、网络，尤其是存储系统，这些系统具备高度可扩展的容量和性能，而无需采用传统管理方式。Kubernetes提供机制，帮助应用以透明的方式利用多种计算和存储资源。但是，要确保应用对持久数据的访问，需要底层存储基础架构具有弹性，同时还能满足成千上万个应用的容量和性能需求。
在此背景下，Evaluator Group获邀对适合云原生应用环境的两种存储系统展开对比。
Ceph：云原生环境中常用的开源软件定义存储Lightbits云数据平台：专为云环境设计的软件定义存储 如下所示，在使用相同硬件和存储介质的情况下，Lightbits在所有工作负载测试中，实现的性能均远远优于Ceph。表1汇总显示了使用QLC介质的NVMe固态硬盘（SSD）的测试结果。该测试使用在OpenShift Kubernetes环境中作为容器运行的工作负载来进行。
Ceph IOPs
Lightbits IOPs
Lightbits Advantage
4K-100% Read
1,032,428 4,068,462 3.94 X
4K-100% Write
30,728 515,697 16.78 X
8K-80% Read
90,363 1,129,335 12.50 X
16K-70% Read
35,740 372,009 10.41 X
32K-50% Read
19,797 111,852 5.65 X
表表1表11表1：在容器环境中使用QLC介质时的Lightbits与Ceph I/O速率比较。
（来源：Evaluator Group）
本文的其余部分将更深入地探讨二者的技术和性能差异，以及使用NVMe SSD与TLC介质时的性能数据。
新兴技术 如前所述，多个趋势正在推动IT领域发生重大变化；其中，利用公共云等服务的趋势正在改变IT运行的地点和付费方式，影响了应用程序的运行方式。云原生应用程序（CNA）的推行正在改变应用程序的开发和管理方式，这在一定程度上得益于企业向服务和云端迁移的趋势。此外，可通过Fabric去访问NVMe存储的新技术，以及新的非易失性存储技术的出现，使得那些能够利用这些功能的系统拥有显著的性能优势。
云原生应用程序 基于容器的应用程序设计旨在运行于云环境，包括本地云和公共云。云原生应用程序被设计为可独立扩展的服务，又称为微服务。借助微服务架构，CNA能够在少量或甚至无需管理介入的情况下，按需扩展应用程序的各个部分。
此外，CNA部署在一个位置后，可以根据可用资源甚至根据资源的价格而移动到其他位置。另外，许多此类应用程序所需的持久性存储也必须动态响应不断变化的容量和性能需求。
NVMe over Fabrics协议 非易失性存储主机控制器接口规范（NVMe）是一个支持固态硬盘（SSD）去使用高速PCIe总线进行通信的接口，以实现对固态设备的低时延访问。与SCSI或SATA设备相比，NVMe支持数十亿条命令，显著减少了延迟或时延。为了兼容与外部设备的通信，NVMe over Fabrics扩展了NVMe协议，支持通过Fabric去访问NVMe。
NVMe over Fabric访问的最新选择之一是使用TCP传输协议，即NVMe/TCP。实施这项协议的技术负担可显著减少，无需任何特定的硬件或交换机设置即可支持商用以太网。总体而言，与TCP上的其他存储协议相比，在仍然使用现有网络基础设施的情况下，NVMe over TCP具有更低的时延和更高的吞吐量。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/aa39f38f460499db63585f701aee088d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-29T14:09:57+08:00" />
<meta property="article:modified_time" content="2022-04-29T14:09:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">应用软件运行速度提升16倍：Lightbits与Ceph的存储性能对比</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;"><strong><span style="color:#25548b;">作者</span></strong><strong><span style="color:#25548b;">: </span></strong><strong><span style="color:#25548b;">Russ Fellows, </span></strong><strong><span style="color:#25548b;">Mohammad J Rabin</span></strong></p> 
<p style="margin-left:0;"> </p> 
<h2 style="margin-left:0;"><span style="color:#25548b;">概述</span></h2> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">云计算和基于容器的应用是推动当今</span><span style="color:#000000;">IT</span><span style="color:#000000;">领域产生重大变革的两大趋势。与其他技术和方法相比，二者都能够以更高的灵活性和更低的成本去运行和操作应用，因此日益受到欢迎。然而，在所有新的机遇面前，要实现潜在优势也都会有巨大的挑战。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">层出不穷的新技术通常会对业务运营产生渐进式的影响。但是，以云计算作为运行模式，结合管理云原生应用的</span><span style="color:#000000;">Kubernetes</span><span style="color:#000000;">——这一做法已经改变了信息技术的交付、管理和使用方式。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">此外，为支持这些环境而设计的系统需要选择计算、网络，尤其是存储系统，这些系统具备高度可扩展的容量和性能，而无需采用传统管理方式。</span><span style="color:#000000;">Kubernetes</span><span style="color:#000000;">提供机制，帮助应用以透明的方式利用多种计算和存储资源。但是，要确保应用对持久数据的访问，需要底层存储基础架构具有弹性，同时还能满足成千上万个应用的容量和性能需求。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">在此背景下，</span><span style="color:#000000;">Evaluator Group</span><span style="color:#000000;">获邀对适合云原生应用环境的两种存储系统展开对比。</span></p> 
<ul><li style="text-align:justify;"><span style="color:#000000;">Ceph</span><span style="color:#000000;">：云原生环境中常用的开源软件定义存储</span></li><li style="text-align:justify;"><span style="color:#000000;">Lightbits</span><span style="color:#000000;">云数据平台：专为云环境设计的软件定义存储</span></li></ul> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">如下所示，在使用相同硬件和存储介质的情况下，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">在所有工作负载测试中，实现的性能均远远优于</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">。表</span><span style="color:#000000;">1</span><span style="color:#000000;">汇总显示了使用</span><span style="color:#000000;">QLC</span><span style="color:#000000;">介质的</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">固态硬盘（</span><span style="color:#000000;">SSD</span><span style="color:#000000;">）的测试结果。该测试使用在</span><span style="color:#000000;">OpenShift Kubernetes</span><span style="color:#000000;">环境中作为容器运行的工作负载来进行。</span></p> 
<table align="center" border="1" cellspacing="0"><tbody><tr><td style="background-color:#4f81bd;border-color:#FFFFFF;width:127.5pt;"> <p style="margin-left:0;text-align:center;"></p> </td><td style="background-color:#4f81bd;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#FFFFFF;">Ceph IOPs</span></strong></p> </td><td style="background-color:#4f81bd;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#FFFFFF;">Lightbits IOPs</span></strong></p> </td><td style="background-color:#4f81bd;border-color:#FFFFFF;width:114.95pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#FFFFFF;">Lightbits Advantage</span></strong></p> </td></tr><tr><td style="background-color:#4f81bd;border-color:#FFFFFF;width:127.5pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#FFFFFF;">4K-100% Read</span></strong></p> </td><td style="background-color:#b8cce4;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 1,032,428 </span></p> </td><td style="background-color:#b8cce4;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 4,068,462 </span></p> </td><td style="background-color:#b8cce4;width:114.95pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;">3.94 X</span></p> </td></tr><tr><td style="background-color:#4f81bd;border-color:#FFFFFF;width:127.5pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#FFFFFF;">4K-100% Write</span></strong></p> </td><td style="background-color:#dbe5f1;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 30,728 </span></p> </td><td style="background-color:#dbe5f1;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 515,697 </span></p> </td><td style="background-color:#dbe5f1;width:114.95pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;">16.78 X</span></p> </td></tr><tr><td style="background-color:#4f81bd;border-color:#FFFFFF;width:127.5pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#FFFFFF;">8K-80% Read</span></strong></p> </td><td style="background-color:#b8cce4;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 90,363 </span></p> </td><td style="background-color:#b8cce4;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 1,129,335 </span></p> </td><td style="background-color:#b8cce4;width:114.95pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;">12.50 X</span></p> </td></tr><tr><td style="background-color:#4f81bd;border-color:#FFFFFF;width:127.5pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#FFFFFF;">16K-70% Read</span></strong></p> </td><td style="background-color:#dbe5f1;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 35,740 </span></p> </td><td style="background-color:#dbe5f1;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 372,009 </span></p> </td><td style="background-color:#dbe5f1;width:114.95pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;">10.41 X</span></p> </td></tr><tr><td style="background-color:#4f81bd;border-color:#FFFFFF;width:127.5pt;"> <p style="margin-left:0;text-align:center;"><strong><span style="color:#FFFFFF;">32K-50% Read</span></strong></p> </td><td style="background-color:#b8cce4;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 19,797 </span></p> </td><td style="background-color:#b8cce4;width:114.9pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;"> 111,852 </span></p> </td><td style="background-color:#b8cce4;width:114.95pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#000000;">5.65 X</span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:center;"><strong><span style="color:#FFFFFF;">表表1表11</span>表1：在容器环境中使用QLC介质时的Lightbits与Ceph I/O速率比较。</strong></p> 
<p style="margin-left:0;text-align:center;"><strong>（来源：Evaluator Group）</strong></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">本文的其余部分将更深入地探讨二者的技术和性能差异，以及使用</span><span style="color:#000000;">NVMe SSD</span><span style="color:#000000;">与</span><span style="color:#000000;">TLC</span><span style="color:#000000;">介质时的性能数据。</span></p> 
<h2 style="margin-left:0;"><span style="color:#25548b;">新兴技术</span></h2> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">如前所述，多个趋势正在推动</span><span style="color:#000000;">IT</span><span style="color:#000000;">领域发生重大变化；其中，利用公共云等服务的趋势正在改变</span><span style="color:#000000;">IT</span><span style="color:#000000;">运行的地点和付费方式，影响了应用程序的运行方式。云原生应用程序（</span><span style="color:#000000;">CNA</span><span style="color:#000000;">）的推行正在改变应用程序的开发和管理方式，这在一定程度上得益于企业向服务和云端迁移的趋势。此外，可通过</span><span style="color:#000000;">Fabric</span><span style="color:#000000;">去访问</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">存储的新技术，以及新的非易失性存储技术的出现，使得那些能够利用这些功能的系统拥有显著的性能优势。</span></p> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">云原生应用程序</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">基于容器的应用程序设计旨在运行于云环境，包括本地云和公共云。云原生应用程序被设计为可独立扩展的服务，又称为微服务。借助微服务架构，</span><span style="color:#000000;">CNA</span><span style="color:#000000;">能够在少量或甚至无需管理介入的情况下，按需扩展应用程序的各个部分。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">此外，</span><span style="color:#000000;">CNA</span><span style="color:#000000;">部署在一个位置后，可以根据可用资源甚至根据资源的价格而移动到其他位置。另外，许多此类应用程序所需的持久性存储也必须动态响应不断变化的容量和性能需求。</span></p> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">NVMe over Fabrics协议</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">非易失性存储主机控制器接口规范（</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">）是一个支持固态硬盘（</span><span style="color:#000000;">SSD</span><span style="color:#000000;">）去使用高速</span><span style="color:#000000;">PCIe</span><span style="color:#000000;">总线进行通信的接口，以实现对固态设备的低时延访问。与</span><span style="color:#000000;">SCSI</span><span style="color:#000000;">或</span><span style="color:#000000;">SATA</span><span style="color:#000000;">设备相比，</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">支持数十亿条命令，显著减少了延迟或时延。为了兼容与外部设备的通信，</span><span style="color:#000000;">NVMe over Fabrics</span><span style="color:#000000;">扩展了</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">协议，支持通过</span><span style="color:#000000;">Fabric</span><span style="color:#000000;">去访问</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">NVMe over Fabric</span><span style="color:#000000;">访问的最新选择之一是使用</span><span style="color:#000000;">TCP</span><span style="color:#000000;">传输协议，即</span><span style="color:#000000;">NVMe/TCP</span><span style="color:#000000;">。实施这项协议的技术负担可显著减少，无需任何特定的硬件或交换机设置即可支持商用以太网。总体而言，与</span><span style="color:#000000;">TCP</span><span style="color:#000000;">上的其他存储协议相比，在仍然使用现有网络基础设施的情况下，</span><span style="color:#000000;">NVMe over TCP</span><span style="color:#000000;">具有更低的时延和更高的吞吐量。</span></p> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">持久性存储</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">持久性存储（</span><span style="color:#000000;">PMem</span><span style="color:#000000;">）兼具存储特性（特别是无需能耗即可保留或“持久保存”数据的能力），以及内存总线访问特性（例如极低的时延和字节寻址能力）。持久性存储有两种主要类型，分别是</span><span style="color:#000000;">NVDIMM</span><span style="color:#000000;">和英特尔傲腾持久性存储（</span><span style="color:#000000;">Optane Persistent Memory</span><span style="color:#000000;">）。</span><span style="color:#000000;">NVDIMM</span><span style="color:#000000;">和傲腾</span><span style="color:#000000;">PMem</span><span style="color:#000000;">之间的主要区别在于存储密度和成本，其中，与</span><span style="color:#000000;">NVDIMM</span><span style="color:#000000;">设备相比，英特尔傲腾</span><span style="color:#000000;">PMem</span><span style="color:#000000;">持久性存储在这两个方面都具有显著优势。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">英特尔</span><span style="color:#000000;">PMem</span><span style="color:#000000;">既可用于“应用程序直接访问模式”，也可用于“内存模式”。前者需要修改应用程序，后者以低于</span><span style="color:#000000;">DRAM</span><span style="color:#000000;">的成本、透明地扩展系统内存容量。</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">在</span><span style="color:#000000;">App Direct</span><span style="color:#000000;">模式下使用</span><span style="color:#000000;">PMem</span><span style="color:#000000;">作为非易失性写入</span><span style="color:#000000;">缓冲区，将写入和元数据访问直接定向至</span><span style="color:#000000;">PMem</span><span style="color:#000000;">，减少了备份介质的磨损，改善了系统写入性能。</span></p> 
<h2 style="margin-left:0;"><span style="color:#25548b;">解决方案概述</span></h2> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">过去几十年里，使用商用硬件、以“软件或软件定义存储（</span><span style="color:#000000;">SDS</span><span style="color:#000000;">）”的形式运行的存储系统日益受到追捧。这种方法之所以引人入胜，是因为它能够在不可使用专用或专有硬件的环境中运行弹性的数据中心级存储。此外，其灵活性有利于在不同的环境和部署规模中使用相同的</span><span style="color:#000000;">SDS</span><span style="color:#000000;">堆栈。如前所述，我们的评估中就使用两种不同的</span><span style="color:#000000;">SDS</span><span style="color:#000000;">选项，为容器应用提供持久存储。随后将概述它们的功能。采用英特尔技术的</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">解决方案如图</span><span style="color:#000000;">1</span><span style="color:#000000;">所示。</span></p> 
<p style="margin-left:0px;text-align:center;"><span style="color:#000000;"><img alt="" src="https://images2.imgbox.com/cc/1b/9XHzAmuT_o.png"></span></p> 
<p>                          <strong>图1：用于Lightbits软件定义存储的英特尔平台（来源：英特尔）</strong></p> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">英特尔</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">英特尔为当今许多领先的服务器和存储解决方案提供基础平台组件。这些组件包括英特尔至强处理器、英特尔网络适配器和英特尔傲腾™技术等，其中，英特尔傲腾™可作为NVMe固态硬盘，或内存形式的傲腾持久性存储（PMem）设备提供。此外，具有应用设备队列（ADQ）的英特尔Ethernet 800系列提供了高性能、低时延的NVMe/TCP网络接口卡。</span></p> 
<h3 style="margin-left:0;"><span style="color:#8dad53;"><a name="_Hlk98865445">Lightbits</a>云数据平台</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">Lightbits云数据平台是一种软件定义存储，旨在运用最新的技术，包括NAND闪存和英特尔傲腾持久性存储（PMem）；它使用高速100GbE网络接口卡，支持NVMe over TCP。Lightbits使用分布式架构，能够按需独立扩展CPU、内存、PMem或NVMe设备。因此，Lightbits能够提供可扩展的企业级存储，性能优于本地NVMe设备。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">Lightbits</span><span style="color:#000000;">智能闪存管理解决方案</span><span style="color:#000000;">Intelligent Flash Management </span><span style="color:#000000;">™（</span><span style="color:#000000;">IFM</span><span style="color:#000000;">）支持最大限度地提高</span><span style="color:#000000;">SSD</span><span style="color:#000000;">性能和延长其耐用性。其主要特性包括写条带化、无</span><span style="color:#000000;">IOP</span><span style="color:#000000;">元数据访问、智能垃圾收集、追加写策略和并行读</span><span style="color:#000000;">/</span><span style="color:#000000;">写通道。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">通过将英特尔的高性能硬件平台与</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">方案进行耦合，可提供可扩展的解决方案，降低总体拥有成本（</span><span style="color:#000000;">TCO</span><span style="color:#000000;">）。</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">解决方案特别采用了以下技术：</span></p> 
<ul><li style="text-align:justify;"><strong><span style="color:#000000;">英特尔</span></strong><strong><span style="color:#000000;">®</span></strong><strong><span style="color:#000000;">至强</span></strong><strong><span style="color:#000000;">®</span></strong><strong><span style="color:#000000;">处理器系统</span></strong> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">高性能</span><span style="color:#000000;">CPU</span><span style="color:#000000;">、内存、</span><span style="color:#000000;">I/O</span><span style="color:#000000;">和</span><span style="color:#000000;">PCIe Gen4</span></li><li style="text-align:justify;"><span style="color:#000000;">使用高性能</span><span style="color:#000000;">CPU</span><span style="color:#000000;">架构的高效存储软件</span></li><li style="text-align:justify;"><span style="color:#000000;">企业级</span><span style="color:#000000;">SSD</span><span style="color:#000000;">热插拔和</span><span style="color:#000000;">LED</span><span style="color:#000000;">支持</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">介质</span></li></ul></li><li style="text-align:justify;"><strong><span style="color:#000000;">英特尔傲腾持久性存储（</span></strong><strong><span style="color:#000000;">PMem</span></strong><strong><span style="color:#000000;">）</span></strong><strong> </strong> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">低时延、非易失性写缓冲区和元数据存储</span></li><li style="text-align:justify;"><span style="color:#000000;">无需电池或电容器即可维持持久性</span></li><li style="text-align:justify;"><span style="color:#000000;">大容量持久性存储</span><span style="color:#000000;">，</span> <span style="color:#000000;">总拥有成本低于其他替代方案</span></li></ul></li><li style="text-align:justify;"><strong><span style="color:#000000;">英特尔</span></strong> <strong><span style="color:#000000;">Ethernet  800</span></strong><strong><span style="color:#000000;">系列网络适配器</span></strong> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">提供应用设备队列（</span><span style="color:#000000;">ADQ</span><span style="color:#000000;">）</span></li><li style="text-align:justify;"><span style="color:#000000;">高性能应用设备队列</span></li><li style="text-align:justify;"><span style="color:#000000;">低时延</span><span style="color:#000000;">NVMe/TCP</span><span style="color:#000000;">，无需使用定制的驱动程序</span></li></ul></li></ul> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">通过</span><span style="color:#000000;">Kubernetes</span><span style="color:#000000;">容器存储接口（</span><span style="color:#000000;">CSI</span><span style="color:#000000;">），</span><span style="color:#000000;">Kubernetes</span><span style="color:#000000;">管理的容器可以作为持久卷（</span><span style="color:#000000;">PV</span><span style="color:#000000;">）访问</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">存储。</span><span style="color:#000000;">Lightbits CSI</span><span style="color:#000000;">插件使</span><span style="color:#000000;">Kubernetes</span><span style="color:#000000;">能够使用其“</span><span style="color:#000000;">Elastic RAID</span><span style="color:#000000;">”</span>在Lightbits集群中存储持久卷（PV）<span style="color:#000000;">，该“</span><span style="color:#000000;">Elastic RAID</span><span style="color:#000000;">”提供纠删码保护，防止每个节点的数据丢失。其他</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">服务包括压缩、复制、卷快照、克隆和用于多租户环境中的基于角色的访问控制（</span><span style="color:#000000;">RBAC</span><span style="color:#000000;">）。</span></p> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">Ceph</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">Ceph</span><span style="color:#000000;">是一款开源的软件定义存储产品，带有多个不同的接口，可作为块设备、文件系统和目标存储进行访问。设计</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">时，采用旋转硬盘驱动器作为主要的存储介质，基于</span><span style="color:#000000;">NAND</span><span style="color:#000000;">的</span><span style="color:#000000;">SSD</span><span style="color:#000000;">在大多数主流存储系统中不发挥作用。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">自</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">设计以来的</span><span style="color:#000000;">15</span><span style="color:#000000;">年间，各种外形规格的固态闪存已成为高性能存储系统的主要介质。但</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">初始设计中旨在提高旋转物理介质性能的许多元素仍得以保留。最近，更新后的</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">已经可以使用固态的“</span><span style="color:#000000;">BlueStore</span><span style="color:#000000;">”和“</span><span style="color:#000000;">RocksDB</span><span style="color:#000000;">”进行元数据操作。迄今为止，</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">还没有针对持久性存储进行优化，也不支持</span><span style="color:#000000;">NVMe over fabrics</span><span style="color:#000000;">或</span><span style="color:#000000;">NVMe over TCP</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">我们在测试中使用</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">的开源版本，详见附录。</span></p> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">存储效率</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">与一些软件定义存储系统相比，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">的弹性设计拥有更多优势。</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">针对每个节点使用纠删码保护，确保在丢失存储设备时的数据可用性；此外，节点之间可进行复制，因此，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">能够在减少开销和存储容量浪费的同时，提供</span>   <span style="color:#000000;">更大的弹性。在测试期间，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">的配置是：在每个节点上使用纠删码来保护</span><span style="color:#000000;">数据</span><span style="color:#000000;">，同时在</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">集群中的另一个节点上额外制作一份数据拷贝。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">与此相反，</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">的配置是：创建三个数据副本来进行</span><span style="color:#000000;">数据</span><span style="color:#000000;">保护，此时，如果一个节点的驱动器和另一个节点出现故障断电，则无法确保数据可用性。尽管这两种保护方法的存储效率相似，但</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">方法的可用性更高。</span></p> 
<h2 style="margin-left:0;"><span style="color:#25548b;">不同容器工作负载下的性能</span></h2> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">Evaluator Group</span><span style="color:#000000;">需对</span><span style="color:#000000;">Kubernetes</span><span style="color:#000000;">应用环境中作为容器运行的两种不同的存储产品进行分析。我们对</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">软件定义存储与面向容器的开源软件定义存储产品</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">进行了比较。测试环境由</span><span style="color:#000000;">12</span><span style="color:#000000;">个</span><span style="color:#000000;">Kubernetes</span><span style="color:#000000;">节点组成，在专用的</span><span style="color:#000000;">3</span><span style="color:#000000;">节点</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">集群或</span><span style="color:#000000;">3</span><span style="color:#000000;">节点</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">集群中运行容器工作负载。容器应用测试图表和其他细节、硬件、软件和其他方面的详细信息，请参见附录描述。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">测量存储性能时，使用众所周知的“</span><span style="color:#000000;">vdbench</span><span style="color:#000000;">”工具创建工作负载，每个节点使用</span><span style="color:#000000;">8</span><span style="color:#000000;">个运行</span><span style="color:#000000;">vdbench</span><span style="color:#000000;">的容器实例，总共</span><span style="color:#000000;">96</span><span style="color:#000000;">个</span><span style="color:#000000;">vdbench</span><span style="color:#000000;">实例。</span></p> 
<p style="margin-left:0;">测试包括性能敏感型应用中常见的5种不同的访问模式和块大小：</p> 
<ul><li style="text-align:justify;"><span style="color:#000000;">4KB</span><span style="color:#000000;">，</span><span style="color:#000000;">100%</span><span style="color:#000000;">读取，</span><span style="color:#000000;">100%</span><span style="color:#000000;">随机访问</span></li><li style="text-align:justify;"><span style="color:#000000;">4KB</span><span style="color:#000000;">，</span><span style="color:#000000;">100%</span><span style="color:#000000;">写入，</span><span style="color:#000000;">100%</span><span style="color:#000000;">随机访问</span></li><li style="text-align:justify;"><span style="color:#000000;">8KB</span><span style="color:#000000;">，</span><span style="color:#000000;">80%</span><span style="color:#000000;">读取</span><span style="color:#000000;">/20%</span><span style="color:#000000;">写入，</span><span style="color:#000000;">80%</span><span style="color:#000000;">随机访问</span></li><li style="text-align:justify;"><span style="color:#000000;">16KB</span><span style="color:#000000;">，</span><span style="color:#000000;">70%</span><span style="color:#000000;">读取</span><span style="color:#000000;">/30%</span><span style="color:#000000;">写入，</span><span style="color:#000000;">80%</span><span style="color:#000000;">随机访问</span></li><li style="text-align:justify;"><span style="color:#000000;">32KB</span><span style="color:#000000;">，</span><span style="color:#000000;">50%</span><span style="color:#000000;">读取</span><span style="color:#000000;">/50%</span><span style="color:#000000;">写入，</span><span style="color:#000000;">80%</span><span style="color:#000000;">随机访问</span></li></ul> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">这些工作负载用于比较</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">与</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">的性能，使用</span><span style="color:#000000;">QLC</span><span style="color:#000000;">固态介质作为主要存储介质，并根据每个存储系统使用适当的高速持久介质。在所有情况下，分别多次运行</span><span style="color:#000000;">5</span><span style="color:#000000;">个工作负载，获得可用于比较的平均结果。有关</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">和</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">配置的具体细节，请参见附录。</span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<div style="margin-left:43.1pt;"> 
 <p style="margin-left:0;"><strong><em><span style="color:#4f81bd;">Evaluator Group</span></em></strong><strong><em><span style="color:#4f81bd;">评论：测试结果显示，使用</span></em></strong><strong><em><span style="color:#4f81bd;">Lightbits</span></em></strong><strong><em><span style="color:#4f81bd;">具有巨大的性能优势，其中，</span></em></strong><strong><em><span style="color:#4f81bd;">4KB</span></em></strong><strong><em><span style="color:#4f81bd;">写入工作负载的性能是</span></em></strong><strong><em><span style="color:#4f81bd;">Ceph</span></em></strong><strong><em><span style="color:#4f81bd;">的</span></em></strong><strong><em><span style="color:#4f81bd;">16</span></em></strong><strong><em><span style="color:#4f81bd;">倍。考虑到在所有比较中，底层介质的数量和类型是相同的，这种优势尤为明显。</span></em></strong></p> 
 <p style="margin-left:0px;text-align:center;"><strong><em><span style="color:#4f81bd;"><img alt="" src="https://images2.imgbox.com/c9/ae/kAfMkdDg_o.png"></span></em></strong></p> 
 <p>             <strong>图2：Ceph与Lightbits吞吐量比较（来源：Evaluator Group)</strong></p> 
</div> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">图</span><span style="color:#000000;">2</span><span style="color:#000000;">显示了使用</span><span style="color:#000000;">QLC</span><span style="color:#000000;">介质时，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">和</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">在</span><span style="color:#000000;">5</span><span style="color:#000000;">种不同访问模式下的吞吐量结果。吞吐量结果是直接可比较的，因为它们考虑了数据块大小的差异，因此将其全部显示在一起。</span></p> 
<h3 style="margin-left:0;"><span style="color:#8dad53;"><a name="bookmark=id.3znysh7"></a><a name="bookmark=id.30j0zll"></a><a name="bookmark=id.1fob9te"></a>性能详情</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">I/O</span><span style="color:#000000;">速率（以每秒</span><span style="color:#000000;">I/O</span><span style="color:#000000;">传输次数或</span><span style="color:#000000;">IOPs</span><span style="color:#000000;">衡量）是小数据块工作负载的常用指标，但不利于对比不同的数据块大小。如下方图</span><span style="color:#000000;">3</span><span style="color:#000000;">所示，对典型应用大小——</span><span style="color:#000000;">8KB</span><span style="color:#000000;">、</span><span style="color:#000000;">16KB</span><span style="color:#000000;">和</span><span style="color:#000000;">32 KB</span><span style="color:#000000;">进行比较，绘制</span><span style="color:#000000;">I/O</span><span style="color:#000000;">速率，以每秒</span><span style="color:#000000;">I/O</span><span style="color:#000000;">传输次数衡量。在</span><span style="color:#000000;">32KB</span><span style="color:#000000;">时，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">的优势是</span><span style="color:#000000;">5.7</span><span style="color:#000000;">倍，在</span><span style="color:#000000;">16KB</span><span style="color:#000000;">时，优势是</span><span style="color:#000000;">10.4</span><span style="color:#000000;">倍，在</span><span style="color:#000000;">8K</span><span style="color:#000000;">工作负载时，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">的性能超过</span><span style="color:#000000;">Ceph 12</span><span style="color:#000000;">倍。</span> </p> 
<p style="margin-left:0px;"><img alt="" src="https://images2.imgbox.com/92/d2/1mX12DPv_o.png"></p> 
<p> <strong>图3：使用QLC介质时Lightbits与Ceph的性能对比–不同数据块大小的吞吐量（来源：Evaluator Group)</strong></p> 
<p><span style="color:#000000;">上文显示的三种工作负载是数据库或其他事务应用程序中的常见负载。尽管许多数据库尝试执行16K或32K</span><span style="color:#000000;">大小的</span><span style="color:#000000;">I/O</span><span style="color:#000000;">，但在许多情况下，如果更改较小或事务率较高，它们倾向于使用较小数据块。数据库将执行</span><span style="color:#000000;">8K</span><span style="color:#000000;">甚至</span><span style="color:#000000;">4K</span><span style="color:#000000;">事务，而非等待合并几个较小的</span><span style="color:#000000;">I/O</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0;text-align:center;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">以下显示</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">和</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">使用两种不同类型的存储介质，即</span><span style="color:#000000;">QLC</span><span style="color:#000000;">和</span><span style="color:#000000;">TLC</span><span style="color:#000000;">介质时，</span><span style="color:#000000;">4KB</span><span style="color:#000000;">读取操作的</span><span style="color:#000000;">I/O</span><span style="color:#000000;">速率比较。</span></p> 
<p style="margin-left:0px;text-align:center;"><img alt="" src="https://images2.imgbox.com/18/b7/6DrDWZXk_o.png"></p> 
<p>     <strong>图4：使用QLC和TLC介质时，Ceph与Lightbits的4KB读取I/O速率比较（来源：Evaluator Group)</strong></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">虽然会发生4KB</span><span style="color:#000000;">读取操作，但</span><span style="color:#000000;">4KB</span><span style="color:#000000;">写入操作更经常用于数据库日志记录操作。使用</span><span style="color:#000000;">QLC</span><span style="color:#000000;">介质时，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">的性能比</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">高出近</span><span style="color:#000000;">17</span><span style="color:#000000;">倍，使用</span><span style="color:#000000;">TLC</span><span style="color:#000000;">介质时，性能比</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">高出近</span><span style="color:#000000;">7</span><span style="color:#000000;">倍，如下图</span><span style="color:#000000;">5</span><span style="color:#000000;">所示。</span></p> 
<p style="margin-left:0px;text-align:center;"><img alt="" src="https://images2.imgbox.com/35/6f/PJIc7rRJ_o.png"></p> 
<p> </p> 
<p style="margin-left:0;text-align:center;"></p> 
<p style="margin-left:0;text-align:center;"><strong>图5：使用QLC和TLC介质时，Ceph与Lightbits的4KB写入I/O速率比较（来源：Evaluator Group）</strong></p> 
<p style="margin-left:0;text-align:center;"></p> 
<div style="margin-left:43.2pt;"> 
 <p style="margin-left:0;"><strong><em><span style="color:#4f81bd;">Evaluator Group</span></em></strong><strong><em><span style="color:#4f81bd;">评论：</span></em></strong><strong><em>  </em></strong><strong><em><span style="color:#4f81bd;">数据库和其他事务应用程序依赖于低时延存储，尤其是事务日志，后者必须在事务完成前写入持久介质。日志大多通过</span></em></strong><strong><em><span style="color:#4f81bd;">4K I/O</span></em></strong><strong><em><span style="color:#4f81bd;">操作写入，在此工作负载下，</span></em></strong><strong><em><span style="color:#4f81bd;">Lightbits</span></em></strong><strong><em><span style="color:#4f81bd;">显示出比</span></em></strong><strong><em><span style="color:#4f81bd;">Ceph</span></em></strong><strong><em><span style="color:#4f81bd;">更大的优势：使用</span></em></strong><strong><em><span style="color:#4f81bd;">TLC</span></em></strong><strong><em><span style="color:#4f81bd;">介质时，优势高出近</span></em></strong><strong><em><span style="color:#4f81bd;">7</span></em></strong><strong><em><span style="color:#4f81bd;">倍，使用</span></em></strong><strong><em><span style="color:#4f81bd;">QLC</span></em></strong><strong><em><span style="color:#4f81bd;">时，优势高出近</span></em></strong><strong><em><span style="color:#4f81bd;">17</span></em></strong><strong><em><span style="color:#4f81bd;">倍。</span></em></strong></p> 
</div> 
<p></p> 
<h3 style="margin-left:0;"></h3> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">其他性能数据</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">下文为性能结果概述，其中指出三个主要指标，包括吞吐量、</span><span style="color:#000000;">I/O</span><span style="color:#000000;">速率以及时延。</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">相对于</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">的性能优势极其显著，因此用“</span><span style="color:#000000;">x</span><span style="color:#000000;">”倍数来体现这种优势。使用简单的除法（即</span><span style="color:#000000;">515,697 / 30,728 = 16.78 x</span><span style="color:#000000;">）来显示</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">性能优势倍数。要点如下：</span></p> 
<ul><li style="text-align:justify;"><span style="color:#000000;">在所有五个工作负载下的测试结果表明，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">具有</span><span style="color:#000000;">4</span><span style="color:#000000;">到</span><span style="color:#000000;">16</span><span style="color:#000000;">倍的优势</span></li><li style="text-align:justify;"><span style="color:#000000;">数据库经常使用对时延高度敏感的小块写入日志或日记</span></li><li style="text-align:justify;"><span style="color:#000000;">在</span><span style="color:#000000;">4KB</span><span style="color:#000000;">写入下，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">的性能优势为</span><span style="color:#000000;">16.78</span><span style="color:#000000;">倍，优势显著</span></li></ul> 
<p style="margin-left:0px;text-align:center;"><img alt="" src="https://images2.imgbox.com/f6/e1/tR3Q5PSX_o.png"></p> 
<p>                          <strong>表3：Lightbits与Ceph性能比较（来源：Evaluator Group）</strong></p> 
<p style="margin-left:0;text-align:center;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">关于测试，还有一点值得留意，即在使用</span><span style="color:#000000;">QLC</span><span style="color:#000000;">介质时，</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">的时延高于大多数工作负载可接受的水平。这是因为，我们在所有测试中使用相同的队列深度设置，确保比较结果的公平公正。如果工作负载针对</span><span style="color:#000000;">Ceph QLC</span><span style="color:#000000;">进行了优化，将使用较低的队列深度设置，从而降低</span><span style="color:#000000;">I/O</span><span style="color:#000000;">速率，同时减小时延。如果以这种方式进行测试，</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">的时延水平更易于接受，但性能会显著降低，从而放大</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">的优势。</span></p> 
<h2 style="margin-left:0;"><span style="color:#25548b;">最终结论</span></h2> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">性能始终是</span><span style="color:#000000;">IT</span><span style="color:#000000;">基础设施的重要考虑因素，尤其是在运行云环境或托管云原生应用程序时。尽管并非每个应用或微服务都需要高</span><span style="color:#000000;">I/O</span><span style="color:#000000;">速率，但如要运行现代云基础设施，提供具有高</span><span style="color:#000000;">I/O</span><span style="color:#000000;">速率和低时延的弹性、可扩展存储至关重要。</span></p> 
<div style="margin-left:43.2pt;"> 
 <p style="margin-left:0;"><strong><em><span style="color:#4f81bd;">Evaluator Group</span></em></strong><strong><em><span style="color:#4f81bd;">评论：在使用相同硬件配置的情况下，</span></em></strong><strong><em><span style="color:#4f81bd;">Lightbits</span></em></strong><strong><em><span style="color:#4f81bd;">的性能显著优于</span></em></strong><strong><em><span style="color:#4f81bd;">Ceph</span></em></strong><strong><em><span style="color:#4f81bd;">，弹性也更高。</span></em></strong><strong><em><span style="color:#4f81bd;">Lightbits</span></em></strong><strong><em><span style="color:#4f81bd;">针对英特尔的高性能技术进行优化，为支持云的</span></em></strong><strong><em><span style="color:#4f81bd;">Kubernetes</span></em></strong><strong><em><span style="color:#4f81bd;">环境提供了强大的存储平台。</span></em></strong></p> 
</div> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">近期技术进展层出不穷，助力</span><span style="color:#000000;">IT</span><span style="color:#000000;">用户去大规模、经济高效地运营基础设施。当与英特尔傲腾持久性存储结合使用时，</span><span style="color:#000000;">QLC</span><span style="color:#000000;">等新型存储介质可以为要求不高的工作负载支持海量存储容量，并提供良好的性能。包括新处理器和端到端</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">在内的其他技术也可以提供性能和成本优势。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">英特尔的专有技术，如</span><span style="color:#000000;">Xeon CPU</span><span style="color:#000000;">、支持</span><span style="color:#000000;">NVMe over TCP</span><span style="color:#000000;">的英特尔网卡，以及傲腾持久性存储和高密度</span><span style="color:#000000;">NVMe SSD</span><span style="color:#000000;">，为软件定义产品提供了强大的硬件基础。由于高效利用了英特尔</span><span style="color:#000000;">CPU</span><span style="color:#000000;">、网络接口和持久存储介质，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">存储可提供本地</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">级别的性能，从而持续确保低时延和数据服务。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">本文中所示的性能测试使用了</span><span style="color:#000000;">IT</span><span style="color:#000000;">环境和应用中常见的工具和工作负载。附录提供了进一步的详细信息，如希望进一步了解测试，或希望使用自己的硬件配置重复这些测试，可参考附录。</span></p> 
<div style="margin-left:43.2pt;"> 
 <p style="margin-left:0;"><strong><em><span style="color:#4f81bd;">Evaluator Group</span></em></strong><strong><em><span style="color:#4f81bd;">评论：借助存储专业人员熟知的测试工具和工作负载，我们认为，</span></em></strong><strong><em><span style="color:#4f81bd;">Lightbits</span></em></strong><strong><em><span style="color:#4f81bd;">可以提升现代应用程序的性能。</span></em></strong><strong><em><span style="color:#4f81bd;">Lightbits</span></em></strong><strong><em><span style="color:#4f81bd;">可以通过</span></em></strong><strong><em><span style="color:#4f81bd;">QLC</span></em></strong><strong><em><span style="color:#4f81bd;">介质和傲腾</span></em></strong><strong><em><span style="color:#4f81bd;">PMem</span></em></strong><strong><em><span style="color:#4f81bd;">，支持时延敏感型应用，而</span></em></strong><strong><em><span style="color:#4f81bd;">Ceph</span></em></strong><strong><em><span style="color:#4f81bd;">在明显具有更高延迟的情况下只能提供很低的</span></em></strong><strong><em><span style="color:#4f81bd;">I/O</span></em></strong><strong><em><span style="color:#4f81bd;">速率。</span></em></strong></p> 
</div> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">利用持久性存储和端到端</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">等新技术，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">即可提供比</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">更优异的性能，且弹性更高。显而易见，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">的性能是</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">的</span><span style="color:#000000;">16</span><span style="color:#000000;">倍，时延更低，是适合现代应用和云环境的更佳选择。</span></p> 
<p style="margin-left:0;"></p> 
<div> 
 <p style="margin-left:0;"><strong><span style="color:#25548b;">附录</span></strong></p> 
</div> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">测试环境详情</span></h3> 
<p style="margin-left:0;"><span style="color:#000000;">测试环境利用以下硬件、软件和应用工作负载项目。</span></p> 
<p style="margin-left:0;"><span style="color:#000000;">测试持续</span><span style="color:#000000;">4</span><span style="color:#000000;">个月，从</span><span style="color:#000000;">2021</span><span style="color:#000000;">年</span><span style="color:#000000;">9</span><span style="color:#000000;">月起至</span><span style="color:#000000;">12</span><span style="color:#000000;">月止。</span></p> 
<h4 style="margin-left:0;"><span style="color:#bb3721;">硬件和基础设施</span></h4> 
<ul><li style="text-align:justify;"><span style="color:#000000;">关于测试配置的概述，请参见下方图</span><span style="color:#000000;">6</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">在裸机上运行的应用集群，由</span><span style="color:#000000;">12</span><span style="color:#000000;">个</span><span style="color:#000000;">Kubernetes</span><span style="color:#000000;">“</span><span style="color:#000000;">worker</span><span style="color:#000000;">”节点组成</span></li><li style="text-align:justify;"><span style="color:#000000;">3</span><span style="color:#000000;">节点管理集群</span><span style="color:#000000;">/</span><span style="color:#000000;">作为虚拟机运行的</span><span style="color:#000000;">Kubernetes</span><span style="color:#000000;">“</span><span style="color:#000000;">master</span><span style="color:#000000;">”节点</span></li><li style="text-align:justify;"><span style="color:#000000;">运行软件定义存储堆栈的</span><span style="color:#000000;">3</span><span style="color:#000000;">节点存储集群</span></li></ul></li><li style="text-align:justify;"><span style="color:#000000;">应用环境和编排使用</span><span style="color:#000000;">OpenShift 4.6</span><span style="color:#000000;">版</span></li></ul> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="420" src="https://images2.imgbox.com/93/b9/n7AuxGZm_o.png" width="969"></p> 
<p>               <strong>图6：OpenShift访问存储节点的工作负载测试设置（来源：Evaluator Group)</strong></p> 
<p><span style="color:#4f81bd;"><em>软件环境</em></span></p> 
<ul><li style="text-align:justify;"><span style="color:#000000;">使用</span><span style="color:#000000;">Red Hat OpenShift 4.6</span><span style="color:#000000;">版作为</span><span style="color:#000000;">3</span><span style="color:#000000;">个管理节点和</span><span style="color:#000000;">12</span><span style="color:#000000;">个应用节点</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">12</span><span style="color:#000000;">个应用（</span><span style="color:#000000;">OpenShift</span><span style="color:#000000;">“</span><span style="color:#000000;">worker</span><span style="color:#000000;">”）节点直接运行于硬件上，因此称为“裸机”</span></li><li style="text-align:justify;"><span style="color:#000000;">3</span><span style="color:#000000;">个管理（</span><span style="color:#000000;">OpenShift</span><span style="color:#000000;">“</span><span style="color:#000000;">master</span><span style="color:#000000;">”）节点作为虚拟机运行，但作为“裸机”安装</span></li></ul></li><li style="text-align:justify;"><span style="color:#000000;">CentOS 8.4</span><span style="color:#000000;">版是</span><span style="color:#000000;">3</span><span style="color:#000000;">个</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">节点使用的基础操作系统</span></li><li style="text-align:justify;"><span style="color:#000000;">Ceph SDS</span><span style="color:#000000;">堆栈使用开源</span><span style="color:#000000;">Ceph 16.2.6</span><span style="color:#000000;">版（又名“</span><span style="color:#000000;">Pacific</span><span style="color:#000000;">”）</span></li><li style="text-align:justify;"><span style="color:#000000;">VMware 7.0</span><span style="color:#000000;">；</span><span style="color:#000000;">3</span><span style="color:#000000;">台虚拟机使用</span><span style="color:#000000;">ESXi</span><span style="color:#000000;">及</span><span style="color:#000000;">vCenter </span></li></ul> 
<p><span style="color:#4f81bd;"><em>SUT配置</em></span></p> 
<ul><li style="text-align:justify;"><span style="color:#000000;">一个</span><span style="color:#000000;">12</span><span style="color:#000000;">节点应用集群，运行</span><span style="color:#000000;">Red Hat OpenShift</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">应用</span><span style="color:#000000;">/</span><span style="color:#000000;">工作节点配置：</span> 
    <ul><li style="text-align:justify;"><span style="color:#000000;">双插槽第一代英特尔至强可扩展系统（</span><span style="color:#000000;">Intel Xeon Platinum 8173M</span><span style="color:#000000;">）</span></li><li style="text-align:justify;"><span style="color:#000000;">96 GB</span><span style="color:#000000;">内存（</span><span style="color:#000000;">12</span><span style="color:#000000;">个</span><span style="color:#000000;">8 GB DIMM</span><span style="color:#000000;">）</span></li><li style="text-align:justify;"><span style="color:#000000;">英特尔</span><span style="color:#000000;">XXV710-DA2</span><span style="color:#000000;">网卡，每台主机带</span><span style="color:#000000;">2</span><span style="color:#000000;">个</span><span style="color:#000000;">25 Gb/s</span><span style="color:#000000;">连接</span></li></ul></li></ul></li><li style="text-align:justify;"><span style="color:#000000;">两个存储系统连接到</span><span style="color:#000000;">OpenShift</span><span style="color:#000000;">应用集群</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">SDS #1</span><span style="color:#000000;">，</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">配置：</span> 
    <ul><li style="text-align:justify;"><span style="color:#000000;">双插槽第三代英特尔至强可扩展系统（</span><span style="color:#000000;">Intel Xeon Gold 6338</span><span style="color:#000000;">）</span></li><li style="text-align:justify;"><span style="color:#000000;">256 GB</span><span style="color:#000000;">内存（</span><span style="color:#000000;">16</span><span style="color:#000000;">个</span><span style="color:#000000;">16 GB DIMM</span><span style="color:#000000;">）</span></li><li style="text-align:justify;"><span style="color:#000000;">2 TB</span><span style="color:#000000;">的英特尔傲腾</span><span style="color:#000000;">PMem</span><span style="color:#000000;">（配置为</span><span style="color:#000000;">WAL</span><span style="color:#000000;">和</span><span style="color:#000000;">Cache</span><span style="color:#000000;">设备）</span></li><li style="text-align:justify;"><span style="color:#000000;">英特尔</span><span style="color:#000000;">E810-CQDA2</span><span style="color:#000000;">网卡，每台主机带</span><span style="color:#000000;">1</span><span style="color:#000000;">个</span><span style="color:#000000;">100 Gb/s</span><span style="color:#000000;">连接</span></li><li style="text-align:justify;"><span style="color:#000000;">8</span><span style="color:#000000;">个英特尔</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">存储介质，可选择</span> 
      <ul><li style="text-align:justify;"><span style="color:#000000;">QLC SSD</span><span style="color:#000000;">介质：英特尔</span><span style="color:#000000;">SSD D5-P5316 @ 15.36 TB</span></li><li style="text-align:justify;"><span style="color:#000000;">TLC SSD</span><span style="color:#000000;">介质：英特尔</span><span style="color:#000000;">SSD D7-P5510 @ 3.84 TB</span></li></ul></li></ul></li><li style="text-align:justify;"><span style="color:#000000;">SDS #2</span><span style="color:#000000;">，</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">配置：</span> 
    <ul><li style="text-align:justify;"><span style="color:#000000;">双插槽第三代英特尔至强可扩展系统（</span><span style="color:#000000;">Intel Xeon Gold 6338</span><span style="color:#000000;">）</span></li><li style="text-align:justify;"><span style="color:#000000;">256b GB</span><span style="color:#000000;">内存（</span><span style="color:#000000;">16</span><span style="color:#000000;">个</span><span style="color:#000000;">16 GB DIMM</span><span style="color:#000000;">）</span></li><li style="text-align:justify;"><span style="color:#000000;">2 TB</span><span style="color:#000000;">英特尔傲腾持久性存储</span><span style="color:#000000;">Persistent Memory 200</span><span style="color:#000000;">（配置为</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">写入缓冲区）</span></li><li style="text-align:justify;"><span style="color:#000000;">英特尔</span><span style="color:#000000;">E810-CQDA2</span><span style="color:#000000;">网卡，每台主机带</span><span style="color:#000000;">1</span><span style="color:#000000;">个</span><span style="color:#000000;">100 Gb/s</span><span style="color:#000000;">连接</span></li><li style="text-align:justify;"><span style="color:#000000;">8</span><span style="color:#000000;">台英特尔</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">存储设备，可选择：</span> 
      <ul><li style="text-align:justify;"><span style="color:#000000;">QLC SSD</span><span style="color:#000000;">介质：英特尔</span><span style="color:#000000;">SSD D5-P5316 @ 15.36 TB</span></li><li style="text-align:justify;"><span style="color:#000000;">TLC SSD</span><span style="color:#000000;">介质：英特尔</span><span style="color:#000000;">SSD D7-P5510 @ 3.84 TB</span></li></ul></li></ul></li></ul></li></ul> 
<p><span style="color:#4f81bd;"><em>客户端配置–基础设施 </em></span></p> 
<ul><li style="text-align:justify;"><span style="color:#000000;">使用运行</span><span style="color:#000000;">VMware ESXi</span><span style="color:#000000;">的单一英特尔</span><span style="color:#000000;">系统来支持基础设施</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">3</span><span style="color:#000000;">台虚拟机用作</span><span style="color:#000000;">OpenShift</span><span style="color:#000000;">“</span><span style="color:#000000;">master</span><span style="color:#000000;">”节点</span></li><li style="text-align:justify;"><span style="color:#000000;">运行</span><span style="color:#000000;">Microsoft Server 2019</span><span style="color:#000000;">的“</span><span style="color:#000000;">jump</span><span style="color:#000000;">”主机，用于远程访问基础设施</span></li></ul></li></ul> 
<h4 style="margin-left:0;"><span style="color:#bb3721;">SDS存储配置</span></h4> 
<p><span style="color:#4f81bd;"><em>Ceph配置</em></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><em><span style="color:#000000;">备注</span></em></strong><strong><span style="color:#000000;">：</span></strong><em><span style="color:#000000;">Ceph</span></em><em><span style="color:#000000;">没有“默认”配置，由于硬件的可用性和其他配置参数，每次安装都可能不同。有关配置，请参见下文：</span></em></p> 
<ul><li style="text-align:justify;"><span style="color:#000000;">使用“</span><span style="color:#000000;">CentOS 8.4</span><span style="color:#000000;">版”作为所有三个节点的主机操作系统</span></li><li style="text-align:justify;"><span style="color:#000000;">按照上述定义配置硬件，每个节点配置</span><span style="color:#000000;">8</span><span style="color:#000000;">个</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">设备</span></li><li style="text-align:justify;"><span style="color:#000000;">下载后，在全部</span><span style="color:#000000;">3</span><span style="color:#000000;">个节点上配置</span><span style="color:#000000;">Ceph</span><span style="color:#000000;">“</span><span style="color:#000000;">Pacific</span><span style="color:#000000;">”</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">将</span><span style="color:#000000;">2 TB</span><span style="color:#000000;">的</span><span style="color:#000000;">PMem</span><span style="color:#000000;">分成两个分区，一个用于</span><span style="color:#000000;">WAL</span><span style="color:#000000;">，另一个用于</span><span style="color:#000000;">RocksDB</span></li><li style="text-align:justify;"><span style="color:#000000;">每个</span><span style="color:#000000;">NVMe SSD</span><span style="color:#000000;">配置为</span><span style="color:#000000;">6</span><span style="color:#000000;">个逻辑</span><span style="color:#000000;">OSD</span><span style="color:#000000;">（每台设备设置</span><span style="color:#000000;">6</span><span style="color:#000000;">个</span><span style="color:#000000;">OSD</span><span style="color:#000000;">）</span></li></ul></li><li style="text-align:justify;"><span style="color:#000000;">Ceph</span><span style="color:#000000;">设备配置</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">每台主机有</span><span style="color:#000000;">8</span><span style="color:#000000;">个</span><span style="color:#000000;">SSD</span><span style="color:#000000;">，分别被划分为</span><span style="color:#000000;">6</span><span style="color:#000000;">个区域</span></li><li style="text-align:justify;"><span style="color:#000000;">在</span><span style="color:#000000;">8</span><span style="color:#000000;">个物理</span><span style="color:#000000;">SSD</span><span style="color:#000000;">上使用</span><span style="color:#000000;">6</span><span style="color:#000000;">个分区，每个系统总共有</span><span style="color:#000000;">6 * 8 = 48</span><span style="color:#000000;">个</span><span style="color:#000000;">OSD </span></li><li style="text-align:justify;"><span style="color:#000000;">Ceph</span><span style="color:#000000;">配置了驻留在</span><span style="color:#000000;">Optane PMem</span><span style="color:#000000;">上的</span><span style="color:#000000;">WAL</span></li></ul></li><li style="text-align:justify;"><span style="color:#000000;">默认资源设置：</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">CPU</span><span style="color:#000000;">设置为每个</span><span style="color:#000000;">OSD 1</span><span style="color:#000000;">个</span><span style="color:#000000;">CPU</span><span style="color:#000000;">，内存设置为每个设备</span><span style="color:#000000;">4 GB</span></li></ul></li></ul> 
<p><span style="color:#4f81bd;"><em>Lightbits配置</em></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><em><span style="color:#000000;">备注</span></em></strong><strong><span style="color:#000000;">：</span></strong><em><span style="color:#000000;">Lightbits</span></em><em><span style="color:#000000;">没有“默认”配置。</span></em><em><span style="color:#000000;">Lightbits</span></em><em><span style="color:#000000;">和英特尔工程部门为</span></em><em><span style="color:#000000;">Lightbits</span></em><em><span style="color:#000000;">执行了所有的设置操作。有关配置，请参见下文：</span></em></p> 
<ul><li style="text-align:justify;"><span style="color:#000000;">使用“</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">”作为全部三个节点的主机操作系统</span></li><li style="text-align:justify;"><span style="color:#000000;">按照上述定义配置硬件，每个节点配置</span><span style="color:#000000;">8</span><span style="color:#000000;">个</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">设备</span></li><li style="text-align:justify;"><span style="color:#000000;">在全部</span><span style="color:#000000;">3</span><span style="color:#000000;">个节点上配置</span><span style="color:#000000;">Lightbits</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">指定</span><span style="color:#000000;">2 TB</span><span style="color:#000000;">的</span><span style="color:#000000;">PMem</span><span style="color:#000000;">作为缓存设备</span></li><li style="text-align:justify;"><span style="color:#000000;">将每个</span><span style="color:#000000;">NVMe SSD</span><span style="color:#000000;">用作逻辑设备</span></li></ul></li></ul> 
<h4 style="margin-left:0;"><span style="color:#bb3721;">应用工作负载</span></h4> 
<ul><li style="text-align:justify;"><span style="color:#000000;">使用“</span><span style="color:#000000;">vdbench</span><span style="color:#000000;">”工具，生成具有不同数据块大小和读写比率的合成工作负载</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">在开始其他测试之前，运行“写入</span><span style="color:#000000;">-</span><span style="color:#000000;">填充”工作负载，完全写入被测的整个存储容量</span></li><li style="text-align:justify;"><span style="color:#000000;">每个测试运行</span><span style="color:#000000;">15</span><span style="color:#000000;">分钟进行“预热”，然后运行</span><span style="color:#000000;">30</span><span style="color:#000000;">分钟进行“测量”</span></li><li style="text-align:justify;"><span style="color:#000000;">测试按顺序进行，每完成</span><span style="color:#000000;">5</span><span style="color:#000000;">个测试称为一“组”</span></li><li style="text-align:justify;"><span style="color:#000000;">每个测试组重复</span><span style="color:#000000;">9</span><span style="color:#000000;">次，用</span><span style="color:#000000;">9</span><span style="color:#000000;">轮运行结果的平均值进行比较</span></li></ul></li><li style="text-align:justify;"><span style="color:#000000;">针对存储配置测试以下</span><span style="color:#000000;">5</span><span style="color:#000000;">种工作负载</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">4KB</span><span style="color:#000000;">，</span><span style="color:#000000;">100%</span><span style="color:#000000;">读取，</span><span style="color:#000000;">100%</span><span style="color:#000000;">随机访问</span></li><li style="text-align:justify;"><span style="color:#000000;">4KB</span><span style="color:#000000;">，</span><span style="color:#000000;">100%</span><span style="color:#000000;">写入，</span><span style="color:#000000;">100%</span><span style="color:#000000;">随机访问</span></li><li style="text-align:justify;"><span style="color:#000000;">8KB</span><span style="color:#000000;">，</span><span style="color:#000000;">80%</span><span style="color:#000000;">读取</span><span style="color:#000000;">/20%</span><span style="color:#000000;">写入，</span><span style="color:#000000;">100%</span><span style="color:#000000;">随机访问</span></li><li style="text-align:justify;"><span style="color:#000000;">16KB</span><span style="color:#000000;">，</span><span style="color:#000000;">70%</span><span style="color:#000000;">读取</span><span style="color:#000000;">/30%</span><span style="color:#000000;">写入，</span><span style="color:#000000;">80%</span><span style="color:#000000;">随机访问</span></li><li style="text-align:justify;"><span style="color:#000000;">32KB</span><span style="color:#000000;">，</span><span style="color:#000000;">50%</span><span style="color:#000000;">读取</span><span style="color:#000000;">/50%</span><span style="color:#000000;">写入，</span><span style="color:#000000;">50%</span><span style="color:#000000;">随机访问</span></li></ul></li></ul> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">测试过程概述</span></h3> 
<ul><li style="text-align:justify;"><span style="color:#000000;">设置用于应用的服务器和网络</span></li><li style="text-align:justify;"><span style="color:#000000;">设置系统，安装附加测试基础设施使用的</span><span style="color:#000000;">VMware</span></li><li style="text-align:justify;"><span style="color:#000000;">在</span><span style="color:#000000;">15</span><span style="color:#000000;">个系统上安装</span><span style="color:#000000;">OpenShift</span><span style="color:#000000;">（</span><span style="color:#000000;">12</span><span style="color:#000000;">个“</span><span style="color:#000000;">worker</span><span style="color:#000000;">”裸机硬件和</span><span style="color:#000000;">3</span><span style="color:#000000;">个“</span><span style="color:#000000;">master</span><span style="color:#000000;">”虚拟机节点）</span></li><li style="text-align:justify;"><span style="color:#000000;">安装和配置软件定义存储目标集群</span> 
  <ul><li style="text-align:justify;"><span style="color:#000000;">将</span><span style="color:#000000;">Lightbits</span><span style="color:#000000;">安装到</span><span style="color:#000000;">3</span><span style="color:#000000;">个节点上，用于</span><span style="color:#000000;">Lightbits SDS</span><span style="color:#000000;">存储</span></li><li style="text-align:justify;"><span style="color:#000000;">安装</span><span style="color:#000000;">CentOS</span><span style="color:#000000;">，并在用于</span><span style="color:#000000;">Ceph SDS</span><span style="color:#000000;">存储的</span><span style="color:#000000;">3</span><span style="color:#000000;">个节点上安装</span><span style="color:#000000;">Ceph Pacific</span></li></ul></li><li style="text-align:justify;"><span style="color:#000000;">创建包含</span><span style="color:#000000;">96</span><span style="color:#000000;">个</span><span style="color:#000000;">vdbench</span><span style="color:#000000;">客户端容器实例和</span><span style="color:#000000;">1</span><span style="color:#000000;">个</span><span style="color:#000000;">vdbench</span><span style="color:#000000;">控制器实例的容器工作负载环境</span></li><li style="text-align:justify;"><span style="color:#000000;">在控制器容器上运行</span><span style="color:#000000;">vdbench</span><span style="color:#000000;">工作负载，将工作负载分配给所有</span><span style="color:#000000;">96</span><span style="color:#000000;">个</span><span style="color:#000000;">vdbench</span><span style="color:#000000;">实例</span></li><li style="text-align:justify;"><span style="color:#000000;">为每个工作负载收集</span><span style="color:#000000;">9</span><span style="color:#000000;">组结果，得到平均</span><span style="color:#000000;">I/O</span><span style="color:#000000;">速率、吞吐量和时延</span></li></ul> 
<h3 style="margin-left:0;"><span style="color:#8dad53;">使用TLC介质进行比较</span></h3> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">使用</span><span style="color:#000000;">QLC</span><span style="color:#000000;">介质测试完毕后，重新将两个存储系统配置为使用</span><span style="color:#000000;">TLC</span><span style="color:#000000;">介质设备，而非</span><span style="color:#000000;">QLC</span><span style="color:#000000;">设备。众所周知，</span><span style="color:#000000;">TLC</span><span style="color:#000000;">介质的写入</span><span style="color:#000000;">I/O</span><span style="color:#000000;">速率更优，时延更低。同样，测试两个存储系统时，使用相同的工作负载，在相同的服务器硬件、网络上运行，最重要的是，使用相同数量和类型的存储介质。基于</span><span style="color:#000000;">TLC</span><span style="color:#000000;">的</span><span style="color:#000000;">NVMe</span><span style="color:#000000;">固态设备作为主要的存储介质，并根据最佳实践，为每个存储堆栈使用英特尔傲腾</span><span style="color:#000000;">PMem</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0px;text-align:center;"><span style="color:#000000;"><img alt="" src="https://images2.imgbox.com/c6/07/6iWAtKWv_o.png"></span></p> 
<p style="margin-left:0;text-align:center;"></p> 
<p style="margin-left:0;text-align:center;"><strong>图7：TLC多工作负载下的Lightbits与Ceph吞吐量比较（来源：Evaluator Group)</strong></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">图</span><span style="color:#000000;">7</span><span style="color:#000000;">显示了使用</span><span style="color:#000000;">TLC SSD</span><span style="color:#000000;">介质时，五次相同测试的吞吐量结果。显示吞吐量结果旨在提供可直接比较的结果，不过</span><span style="color:#000000;">I/O</span><span style="color:#000000;">速率是更常用于显示单个小数据块工作负载的指标。</span></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e549e920edf5a2b90d66dd0e2e1d9c2a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ICEM绘制体积网格的基本操作步骤</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/09b5652a2d85e1a39793bcdc506c1dc2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">浅析 postMessage 方法介绍、如何接收数据（监听message事件及其属性介绍）、使用postMessage的安全注意事项、具体使用方式（父子页面如何互发消息、接收消息）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>