<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>通道突破 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="通道突破" />
<meta property="og:description" content="通道突破策略利用价格对通道的突破产生交易信号，以布林带突破策略为例 布林带突破 - 无止盈止损 利用前收盘价格precloseprice对于布林带上边带 upperband 和下边带lowerband突破生成开平仓信号：
precloseprice 上穿 upperband，形成做多信号，买入开仓； precloseprice 下穿 lowerband，形成做空信号，卖出开仓。
************************************ 布林带突破 - 无止盈止损 价格上穿布林上边带，形成做多信号，买入开仓； 价格下穿布林下边带，形成做空信号，卖出开仓； ************************************ import talib import pandas as pd import numpy as np import quartz_futures as qf from quartz_futures.api import *
参数初始化 universe = [‘RB1610’] # 策略证券池 start = pd.datetime(2016, 6, 1) # 回测开始时间 end = pd.datetime(2016, 9, 1) # 回测结束时间 capital_base = 1e4 # 初试可用资金 refresh_rate = 1 # 调仓周期 freq = ‘d’ # 调仓频率：s -&gt; 秒；m-&gt; 分钟；d-&gt; 日；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/bc67d0204c935acf567dc4ea482c82d3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-08-24T21:29:27+08:00" />
<meta property="article:modified_time" content="2018-08-24T21:29:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">通道突破</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>通道突破策略利用价格对通道的突破产生交易信号，以布林带突破策略为例 <br> 布林带突破 - 无止盈止损 <br> 利用前收盘价格precloseprice对于布林带上边带 upperband 和下边带lowerband突破生成开平仓信号：</p> 
<p>precloseprice 上穿 upperband，形成做多信号，买入开仓； <br> precloseprice 下穿 lowerband，形成做空信号，卖出开仓。</p> 
<h2 id="title"><strong><em><strong>************************************</strong></em></strong></h2> 
<h2 id="布林带突破-无止盈止损">布林带突破 - 无止盈止损</h2> 
<h2 id="价格上穿布林上边带形成做多信号买入开仓">价格上穿布林上边带，形成做多信号，买入开仓；</h2> 
<h2 id="价格下穿布林下边带形成做空信号卖出开仓">价格下穿布林下边带，形成做空信号，卖出开仓；</h2> 
<h2 id="title-1"><strong><em><strong>************************************</strong></em></strong></h2> 
<p>import talib <br> import pandas as pd <br> import numpy as np <br> import quartz_futures as qf <br> from quartz_futures.api import *</p> 
<h4 id="参数初始化">参数初始化</h4> 
<p>universe = [‘RB1610’] # 策略证券池 <br> start = pd.datetime(2016, 6, 1) # 回测开始时间 <br> end = pd.datetime(2016, 9, 1) # 回测结束时间 <br> capital_base = 1e4 # 初试可用资金 <br> refresh_rate = 1 # 调仓周期 <br> freq = ‘d’ # 调仓频率：s -&gt; 秒；m-&gt; 分钟；d-&gt; 日；</p> 
<h3 id="自动生成保证金比例-marginrate">自动生成保证金比例： margin_rate</h3> 
<p>margin_ratio = DataAPI.FutuGet(ticker = universe, field = [‘ticker’,’tradeMarginRatio’], pandas = ‘1’) <br> margin_rate = dict(zip(margin_ratio.ticker.tolist(), [0.01*index for index in margin_ratio.tradeMarginRatio.tolist()]))</p> 
<h4 id="策略初始化函数一般用于设置计数器回测辅助变量等">策略初始化函数，一般用于设置计数器，回测辅助变量等。</h4> 
<p>def initialize(futures_account): <br> pass</p> 
<h4 id="回测调仓逻辑每个调仓周期运行一次可在此函数内实现信号生产生成调仓指令">回测调仓逻辑，每个调仓周期运行一次，可在此函数内实现信号生产，生成调仓指令。</h4> 
<p>def handle_data(futures_account): <br> symbol, amount = universe[0], 1 <br> history_data = get_symbol_history(symbol = symbol, time_range = 20)[symbol] <br> upper_band, middle_band, lower_band = talib.BBANDS(history_data[‘closePrice’].apply(float).values, timeperiod = 10, nbdevup = 0.5, nbdevdn = 0.5) <br> pre_close_price = history_data[‘closePrice’][-1]</p> 
<pre><code>current_long = futures_account.position.get(symbol, dict()).get('long_position', 0)
current_short = futures_account.position.get(symbol, dict()).get('short_position', 0)    
if pre_close_price &gt; upper_band[-1]:
    if current_short &gt; 0:
        print futures_account.current_date, futures_account.current_time, '买入平仓'
        order(symbol, current_short, 'close')
    if current_long &lt; amount:
        print futures_account.current_date, futures_account.current_time, '买入开仓'
        order(symbol, amount, 'open')

if pre_close_price &lt; lower_band[-1]:
    if current_long &gt; 0:
        print futures_account.current_date, futures_account.current_time,'卖出平仓'
        order(symbol, -current_long, 'close')
    if current_short &lt; amount:
        print futures_account.current_date, futures_account.current_time, '卖出开仓'
        order(symbol, -amount, 'open')
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8d3cc7b375a710dc7fbc123a7c4176cd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【SlickGrid】------- SlickGrid改变高度的示例代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a9206e982d74362e647e969ff29355a9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">找到Qt程序长时间运行崩溃原因的方法--Dump（DMP）文件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>