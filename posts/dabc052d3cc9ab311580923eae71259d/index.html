<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Erlang - 入门之一日志系统如何打印输出使用lager框架 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Erlang - 入门之一日志系统如何打印输出使用lager框架" />
<meta property="og:description" content="在合适的地方插入一句代码即可： lager:error(&#34;Some Message&#34;), 就这样，谢谢阅读
。。。。。。。
。。。。。。。。。
。。。。。。。。。。。
。。。。。。。。。。。。。。
。。。。。。。。。。。。。。。。。
没有什么比从直接“”拷贝“”代码的方法，能更快“”掌握“”代码
下面都只是很无聊的“”程序开发“”，要是你懂ErLang可不必往下看；要是你不懂往下看了也不会懂
问题零：字串的拼接 这里没有lager的原理，也没有errlang的原理，因为毕竟哥不懂服务器
但是如果你和哥的情况一样：有一个项目，能编译，能运行，但就是想改亿点点逻辑，那么你确实需要打印输出
%一开始我参考了这段代码 ?ERROR(&#34;node_kf start ~p port=~p&#34;,[Ip,Port]), 所以写上 &#34;~p&#34; 相当于 format 字串了
%% 所以把一段打印代码改成。。。。。。 %% 当然，前面你需要先引入lager：-include(&#34;xxxxx.hrl&#34;). start([NodeId]) -&gt; Ip = config:get_server_ip(), Port = config:get_server_port(), % lager:error(&#34;node_kf Start() ip====&#34;), lager:error(&#34;node_kf Start() ip====nodeid=~p&#34;,[NodeId]), 打印最终输出
[error] &lt;0.112.0&gt;@node_kf:start:21 node_kf Start() ip====nodeid=100 又因为另外一段代码，我们知道了
SqlFmt = &lt;&lt;&#34;REPLACE INTO `base_node_kf` (`node_id`, `node`, `cookie`, `ip`, `time`) VALUES (~p, &#39;~s&#39;, &#39;~s&#39;, &#39;~s&#39;, ~p)&#34;&gt;&gt;, ~s字串~p数字 问题一：Lager未定义 一开始在 preload() 插入这句代码" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/dabc052d3cc9ab311580923eae71259d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-16T01:21:45+08:00" />
<meta property="article:modified_time" content="2022-12-16T01:21:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Erlang - 入门之一日志系统如何打印输出使用lager框架</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在合适的地方插入一句代码即可： </p> 
<pre><code class="language-Erlang">lager:error("Some Message"),</code></pre> 
<p>就这样，谢谢阅读</p> 
<p>。。。。。。。</p> 
<p>。。。。。。。。。</p> 
<p>。。。。。。。。。。。</p> 
<p>。。。。。。。。。。。。。。</p> 
<p>。。。。。。。。。。。。。。。。。</p> 
<blockquote> 
 <p>没有什么比从直接“”拷贝“”代码的方法，能更快“”掌握“”代码</p> 
</blockquote> 
<p><span style="color:#fe2c24;">下面都只是很无聊的“”程序开发“”，要是你懂ErLang可不必往下看；要是你不懂往下看了也不会懂</span></p> 
<h2>问题零：字串的拼接</h2> 
<p>这里没有lager的原理，也没有errlang的原理，因为毕竟哥不懂服务器</p> 
<p>但是如果你和哥的情况一样：有一个项目，能编译，能运行，但就是想改亿点点逻辑，那么你确实需要打印输出</p> 
<pre><code class="language-Erlang">%一开始我参考了这段代码
?ERROR("node_kf start ~p port=~p",[Ip,Port]),</code></pre> 
<p>所以写上 "~p"  相当于 format 字串了</p> 
<pre><code class="language-Erlang">%% 所以把一段打印代码改成。。。。。。
%% 当然，前面你需要先引入lager：-include("xxxxx.hrl").
start([NodeId]) -&gt;
    Ip = config:get_server_ip(),
    Port = config:get_server_port(),
   % lager:error("node_kf Start() ip===="),
    lager:error("node_kf Start() ip====nodeid=~p",[NodeId]),</code></pre> 
<p>打印最终输出</p> 
<pre><code class="language-Erlang">[error] &lt;0.112.0&gt;@node_kf:start:21 node_kf Start() ip====nodeid=100</code></pre> 
<p>又因为另外一段代码，我们知道了</p> 
<pre><code class="language-Erlang">SqlFmt = &lt;&lt;"REPLACE INTO `base_node_kf` (`node_id`, `node`, `cookie`, `ip`, `time`) VALUES (~p, '~s', '~s', '~s', ~p)"&gt;&gt;,</code></pre> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td></td><td></td></tr><tr><td>~s</td><td>字串</td></tr><tr><td>~p</td><td>数字</td></tr></tbody></table> 
<h2>问题一：Lager未定义</h2> 
<p>一开始在 preload() 插入这句代码</p> 
<p><img alt="" height="191" src="https://images2.imgbox.com/4a/f4/oojz3rZV_o.png" width="1200"></p> 
<p></p> 
<p>会提示 undefine<strong> Lager ["Some Message"]</strong></p> 
<p><img alt="" height="169" src="https://images2.imgbox.com/a9/dd/UxNQzZar_o.png" width="727"></p> 
<p></p> 
<p>最终，插入前后如下</p> 
<p><img alt="" height="156" src="https://images2.imgbox.com/47/e6/usOtSlrD_o.png" width="550"></p> 
<pre><code class="language-Erlang">%% @doc 启动游戏
start() -&gt;
    preload_codes(),
    start_apps(?APPS),
    lager:error("Some Message"),%插入一句
    ok.</code></pre> 
<p></p> 
<h2>本来不想做什么全栈工程师</h2> 
<p>由于突然好像有2个项目都是使用Erlang作为服务器</p> 
<p>所以年底了还是随便学习一下，golang比较火，skynet上升期，erlang老而不倒</p> 
<p>（2022.)以上成熟三大服务器架构应该是肯定的 ，老稳了</p> 
<p>掌握了c++,golang,skynet,erlang等3种语言及以上的老哥才能算是全栈六边形战士，</p> 
<p>哥并不是什么全栈，就浅浅地说下一些“”概念“（小学生）</p> 
<p>当你要使用一个功能，或调用一个api，最简单的方法可能是：</p> 
<p>0）知道自己在干啥（可能并没有可视化，基础软件一点不直观）</p> 
<p>1）有一个已经稳定开发的环境（源码）</p> 
<p>2）一个lager日志库（lib），并引入</p> 
<p>3）调用它</p> 
<p>4）灵活地封装它</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/5e/46/tlXVba0Y_o.jpg"></p> 
<p></p> 
<pre><code class="language-Erlang">%一旦你用lager构建了你的代码并启动了lager应用程序，你就可以通过以下操作来生成日志消息:

%lager:error("Some message")</code></pre> 
<h2>问题二：</h2> 
<p>某个项目的封装</p> 
<pre><code class="language-Erlang">?ERROR("start_client(~p) error !~nType:~p, Error:~p", [Sock, Type, Error])</code></pre> 
<h2>问题三：</h2> 
<p>在配置写了console输出，实际并不能</p> 
<pre><code class="language-bash">#Lager's console backend is incompatible with the 'old' shell, not enabling it</code></pre> 
<h2></h2> 
<h2>其他参考日志 lager 文章：</h2> 
<p><a href="https://www.pianshen.com/article/91851999067/" rel="nofollow" title="解析Erlang日志组件lager的监督树和模块 - 程序员大本营">解析Erlang日志组件lager的监督树和模块 - 程序员大本营</a></p> 
<p><a href="https://blog.csdn.net/mt4836/article/details/121867202" title="Lager使用说明_mt4836的博客-CSDN博客_erlang lager">Lager使用说明_mt4836的博客-CSDN博客_erlang lager</a></p> 
<p><a href="https://blog.csdn.net/qqqrtretretee/article/details/84776775" title="Erlang Behaviour行为模式之一：Supervisor之说明_自不凡的博客-CSDN博客">Erlang Behaviour行为模式之一：Supervisor之说明_自不凡的博客-CSDN博客</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/71565f0d61653eead056a4229f9050f3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">排查 Edge WebView2 在某个设备上不出图像的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6fe2936e33f2609a2b339facce27fc27/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一次搞懂数据大屏适配方案 (vw vh、rem、scale)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>