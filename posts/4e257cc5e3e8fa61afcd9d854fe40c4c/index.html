<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python3的requests库发送Form Data请求的简单实现 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python3的requests库发送Form Data请求的简单实现" />
<meta property="og:description" content="在接口请求参数中，Form Data算是相对少见的，也正是少见，所以平时并没有太留意用法，有一些细节处理不好就会容易“上坑”。这里用一个例子简单记录一下用requests发送Form Data的实用例子。
如下图是在抓包过程中看到网络请求Form Data数据格式：
要实现的api接口：
api接口请求发送的数据：
实现的过程主要分2步，需要用到一个第三方模块requests_toolbelt：
1、安装 requests_toolbelt 模块，引入该模块下的 MultipartEncoder封装Form Data
2、生成请求header的centent_type值，并在接口中传入封装好的Form Data参数对象。
如下实现代码：
&#34;&#34;&#34; @IDE: PyCharm @Desc: &#34;&#34;&#34; from requests_toolbelt.multipart.encoder import MultipartEncoder import requests headers = { &#34;Accept&#34;: &#34;*/*&#34;, &#34;Accept-Language&#34;: &#34;zh-CN,zh;q=0.9&#34;, &#34;Cache-Control&#34;: &#34;no-cache&#34;, &#34;Connection&#34;: &#34;keep-alive&#34;, &#34;Content-Type&#34;: &#34;multipart/form-data; boundary=----WebKitFormBoundary6zQNxu3pk2G0HUKs&#34;, &#34;Origin&#34;: &#34;https://为安全着想，此处具体值省略&#34;, &#34;Pragma&#34;: &#34;no-cache&#34;, &#34;Referer&#34;: &#34;https://为安全着想，此处具体值省略-campaigns?ref_=vc_xx_subNav&#34;, &#34;Sec-Fetch-Dest&#34;: &#34;empty&#34;, &#34;Sec-Fetch-Mode&#34;: &#34;cors&#34;, &#34;Sec-Fetch-Site&#34;: &#34;same-origin&#34;, &#34;User-Agent&#34;: &#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36&#34;, &#34;X-Requested-With&#34;: &#34;XMLHttpRequest&#34;, &#34;cookie&#34;:&#39;&#39;&#39;为安全着想，此处具体值省略&#39;&#39;&#39; } request_body = MultipartEncoder( { &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4e257cc5e3e8fa61afcd9d854fe40c4c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-24T12:53:39+08:00" />
<meta property="article:modified_time" content="2022-04-24T12:53:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python3的requests库发送Form Data请求的简单实现</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>在接口请求参数中，Form Data算是相对少见的，也正是少见，所以平时并没有太留意用法，有一些细节处理不好就会容易“上坑”。这里用一个例子简单记录一下用requests发送Form Data的实用例子。</p> 
</blockquote> 
<p>如下图是在抓包过程中看到网络请求Form Data数据格式：</p> 
<p><strong>要实现的api接口：</strong></p> 
<p><img alt="" height="672" src="https://images2.imgbox.com/c9/42/5i64oWQM_o.png" width="1200"></p> 
<p><strong>api接口请求发送的数据：</strong></p> 
<p><img alt="" height="343" src="https://images2.imgbox.com/bf/f7/3HVr1IAI_o.png" width="716"></p> 
<p></p> 
<p>实现的过程主要分2步，需要用到一个第三方模块requests_toolbelt：</p> 
<p></p> 
<p><strong>1、安装 requests_toolbelt 模块，引入该模块下的 MultipartEncoder封装Form Data</strong></p> 
<p><strong>2、生成请求header的centent_type值，并在接口中传入封装好的Form Data参数对象。</strong></p> 
<p></p> 
<p>如下实现代码：</p> 
<p></p> 
<pre><code class="language-python">"""
    @IDE: PyCharm
    @Desc: 
"""
from requests_toolbelt.multipart.encoder import MultipartEncoder
import requests

headers = {
    "Accept": "*/*",
    "Accept-Language": "zh-CN,zh;q=0.9",
    "Cache-Control": "no-cache",
    "Connection": "keep-alive",
    "Content-Type": "multipart/form-data; boundary=----WebKitFormBoundary6zQNxu3pk2G0HUKs",
    "Origin": "https://为安全着想，此处具体值省略",
    "Pragma": "no-cache",
    "Referer": "https://为安全着想，此处具体值省略-campaigns?ref_=vc_xx_subNav",
    "Sec-Fetch-Dest": "empty",
    "Sec-Fetch-Mode": "cors",
    "Sec-Fetch-Site": "same-origin",
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36",
    "X-Requested-With": "XMLHttpRequest",
    "cookie":'''为安全着想，此处具体值省略'''
}



request_body = MultipartEncoder(
    {
        "coupon-campaign-search-name":"",
        "coupon-campaign-search-date-option":"range",
        "coupon-campaign-search-start-date":"1/4/2022",
        "coupon-campaign-search-end-date":"",
        "coupon-campaign-search-budget-type":"all",
        "coupon-campaign-search-campaign-status":"all",
        "anti-csrftoken-a2z":"hD03rdqaG8lSAPNsKztlOCfqcgOBjiFLO5e2g/qmG7tmAAAAAGJktrEAAAAB"}
)

headers['Content-Type']= request_body.content_type
res = requests.post(
    "https://为安全着想，此处具体值省略/ajax/campaigns-search",
    headers=headers,
    data=request_body,
)

print(res.text)
print(len(res.text),res.status_code)</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1597aeecc676cc7b309449c6b5203839/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu Crontab安装使用以及解决配置后不生效问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c9719c52f26ffe13d550bc04493040bb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Shell编程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>