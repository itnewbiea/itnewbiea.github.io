<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu常见问题记录 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu常见问题记录" />
<meta property="og:description" content="Ubuntu常见问题记录 查看系统信息查看本机内核驱动查看Opencv版本 常用软件安装换成国内源add-apt-repository(PPA)ubuntu-drivers: command not found安装Opencv apt-get相关apt-get update -&gt; E: Unable to lock directory /var/lib/apt/lists/apt-get update -&gt; 卡在Waiting for headersbazel authentication failed 其他错误运行shell脚本出现`%0D`编码 查看系统信息 查看本机内核驱动 $ cat /proc/driver/nvidia/version NVRM version: NVIDIA UNIX x86_64 Kernel Module 450.102.04 Tue Dec 29 06:51:23 UTC 2020 GCC version: gcc version 7.5.0 (Ubuntu 7.5.0-6ubuntu2) 查看Opencv版本 $ pkg-config --modversion opencv 2.4.9.1 常用软件安装 换成国内源 例如：清华源 https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/
换源之后可能的问题：
root@9ff72f3b6504:/etc/apt# apt-get update Ign:1 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic InRelease Ign:2 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-updates InRelease Ign:3 https://mirrors." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/abc928eab05adc1f7e9e14c966996b89/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-26T22:13:57+08:00" />
<meta property="article:modified_time" content="2022-02-26T22:13:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu常见问题记录</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Ubuntu常见问题记录</h4> 
 <ul><li><ul><li><a href="#_2" rel="nofollow">查看系统信息</a></li><li><ul><li><a href="#_3" rel="nofollow">查看本机内核驱动</a></li><li><a href="#Opencv_10" rel="nofollow">查看Opencv版本</a></li></ul> 
   </li><li><a href="#_16" rel="nofollow">常用软件安装</a></li><li><ul><li><a href="#_17" rel="nofollow">换成国内源</a></li><li><a href="#addaptrepositoryPPA_74" rel="nofollow">add-apt-repository(PPA)</a></li><li><a href="#ubuntudrivers_command_not_found_84" rel="nofollow">ubuntu-drivers: command not found</a></li><li><a href="#Opencv_116" rel="nofollow">安装Opencv</a></li></ul> 
   </li><li><a href="#aptget_144" rel="nofollow">apt-get相关</a></li><li><ul><li><a href="#aptget_update__E_Unable_to_lock_directory_varlibaptlists_145" rel="nofollow">apt-get update -&gt; E: Unable to lock directory /var/lib/apt/lists/</a></li><li><a href="#aptget_update__Waiting_for_headers_155" rel="nofollow">apt-get update -&gt; 卡在Waiting for headers</a></li><li><a href="#bazel_authentication_failed_166" rel="nofollow">bazel authentication failed</a></li></ul> 
   </li><li><a href="#_179" rel="nofollow">其他错误</a></li><li><ul><li><a href="#shell0D_180" rel="nofollow">运行shell脚本出现`%0D`编码</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_2"></a>查看系统信息</h3> 
<h4><a id="_3"></a>查看本机内核驱动</h4> 
<pre><code class="prism language-shell">$ <span class="token function">cat</span> /proc/driver/nvidia/version
NVRM version: NVIDIA UNIX x86_64 Kernel Module  <span class="token number">450.102</span>.04  Tue Dec <span class="token number">29</span> 06:51:23 UTC <span class="token number">2020</span>
GCC version:  gcc version <span class="token number">7.5</span>.0 <span class="token punctuation">(</span>Ubuntu <span class="token number">7.5</span>.0-6ubuntu2<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="Opencv_10"></a>查看Opencv版本</h4> 
<pre><code class="prism language-shell">$ pkg-config --modversion opencv
<span class="token number">2.4</span>.9.1
</code></pre> 
<h3><a id="_16"></a>常用软件安装</h3> 
<h4><a id="_17"></a>换成国内源</h4> 
<p>例如：清华源 https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/<br> 换源之后可能的问题：</p> 
<pre><code>root@9ff72f3b6504:/etc/apt# apt-get update
Ign:1 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic InRelease
Ign:2 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-updates InRelease
Ign:3 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-backports InRelease
Ign:4 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-security InRelease
Err:5 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic Release
  Certificate verification failed: The certificate is NOT trusted. The certificate issuer is unknown.  Could not handshake: Error in the certificate verification. [IP: 101.6.8.193 443]
Err:6 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-updates Release
  Certificate verification failed: The certificate is NOT trusted. The certificate issuer is unknown.  Could not handshake: Error in the certificate verification. [IP: 101.6.8.193 443]
Err:7 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-backports Release
  Certificate verification failed: The certificate is NOT trusted. The certificate issuer is unknown.  Could not handshake: Error in the certificate verification. [IP: 101.6.8.193 443]
Err:8 https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-security Release
  Certificate verification failed: The certificate is NOT trusted. The certificate issuer is unknown.  Could not handshake: Error in the certificate verification. [IP: 101.6.8.193 443]
Reading package lists... Done
W: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/dists/bionic/InRelease: No system certificates available. Try installing ca-certificates.
W: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/dists/bionic-updates/InRelease: No system certificates available. Try installing ca-certificates.
W: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/dists/bionic-backports/InRelease: No system certificates available. Try installing ca-certificates.
W: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/dists/bionic-security/InRelease: No system certificates available. Try installing ca-certificates.
W: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/dists/bionic/Release: No system certificates available. Try installing ca-certificates.
E: The repository 'https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
W: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/dists/bionic-updates/Release: No system certificates available. Try installing ca-certificates.
E: The repository 'https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-updates Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
W: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/dists/bionic-backports/Release: No system certificates available. Try installing ca-certificates.
E: The repository 'https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-backports Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
W: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/dists/bionic-security/Release: No system certificates available. Try installing ca-certificates.
E: The repository 'https://mirrors.tuna.tsinghua.edu.cn/ubuntu bionic-security Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
root@9ff72f3b6504:/etc/apt# apt install ca-certificates
Reading package lists... Done
Building dependency tree
Reading state information... Done
Package ca-certificates is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'ca-certificates' has no installation candidate
</code></pre> 
<p>解决方案：<br> 默认的源是http的，但替换用的镜像源是https，所以休要额外的安装关于HTTPS的包。</p> 
<pre><code>apt install apt-transport-https
apt install ca-certificates
apt update
</code></pre> 
<p>参考：https://www.caorui.net/blog/103683375281209344.html</p> 
<h4><a id="addaptrepositoryPPA_74"></a>add-apt-repository(PPA)</h4> 
<p>如果没有装PPA，则会无法使用，会出现这样的错误。</p> 
<pre><code class="prism language-shell">root@9ff72f3b6504:/<span class="token comment"># add-apt-repository</span>
bash: add-apt-repository: <span class="token builtin class-name">command</span> not found
</code></pre> 
<p>解决方案：</p> 
<pre><code class="prism language-shell"><span class="token function">apt-get</span> <span class="token function">install</span> software-properties-common
</code></pre> 
<h4><a id="ubuntudrivers_command_not_found_84"></a>ubuntu-drivers: command not found</h4> 
<p>解决方法：</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ubuntu-drivers-common
</code></pre> 
<p>若安装后再次报错，如下：</p> 
<pre><code>root@9ff72f3b6504:/# ubuntu-drivers devices
Traceback (most recent call last):
  File "/usr/bin/ubuntu-drivers", line 480, in &lt;module&gt;
    greet()
  File "/usr/lib/python3/dist-packages/click/core.py", line 722, in __call__
    return self.main(*args, **kwargs)
  File "/usr/lib/python3/dist-packages/click/core.py", line 676, in main
    _verify_python3_env()
  File "/usr/lib/python3/dist-packages/click/_unicodefun.py", line 118, in _verify_python3_env
    'for mitigation steps.' + extra)
RuntimeError: Click will abort further execution because Python 3 was configured to use ASCII as encoding for the environment.  Consult http://click.pocoo.org/python3/for mitigation steps.

This system supports the C.UTF-8 locale which is recommended.
You might be able to resolve your issue by exporting the
following environment variables:

    export LC_ALL=C.UTF-8
    export LANG=C.UTF-8
</code></pre> 
<p>解决方案：</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>C.UTF-8
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>C.UTF-8
</code></pre> 
<h4><a id="Opencv_116"></a>安装Opencv</h4> 
<p>安装opencv报错</p> 
<pre><code class="prism language-shell">    Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
      File <span class="token string">"&lt;string&gt;"</span>, line <span class="token number">1</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
      File <span class="token string">"/tmp/pip-build-nWnHUR/opencv-python/setup.py"</span>, line <span class="token number">9</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
        <span class="token function">import</span> skbuild
    ImportError: No module named skbuild
</code></pre> 
<p>解决方案：</p> 
<pre><code class="prism language-shell">pip <span class="token function">install</span> opencv-python<span class="token operator">==</span><span class="token number">4.1</span>.1.26 -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre> 
<p>运行代码，错误：</p> 
<pre><code class="prism language-shell">  File <span class="token string">"/usr/local/lib/python2.7/dist-packages/skimage/util/__init__.py"</span>, line <span class="token number">7</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    from .arraycrop <span class="token function">import</span> crop
  File <span class="token string">"/usr/local/lib/python2.7/dist-packages/skimage/util/arraycrop.py"</span>, line <span class="token number">8</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    from numpy.lib.arraypad <span class="token function">import</span> _validate_lengths
ImportError: cannot <span class="token function">import</span> name _validate_lengths
</code></pre> 
<p>numpy版本太高，我对numpy进行了重新安装：</p> 
<pre><code class="prism language-shell">pip <span class="token function">install</span> <span class="token assign-left variable">numpy</span><span class="token operator">==</span><span class="token number">1.15</span>.0
</code></pre> 
<p>参考：<a href="https://blog.csdn.net/qq_22764813/article/details/86534227">ImportError: cannot import name ‘_validate_lengths’</a></p> 
<h3><a id="aptget_144"></a>apt-get相关</h3> 
<h4><a id="aptget_update__E_Unable_to_lock_directory_varlibaptlists_145"></a>apt-get update -&gt; E: Unable to lock directory /var/lib/apt/lists/</h4> 
<p>在使用<code>apt-get update</code>时，出现如图错误。<br> <img src="https://images2.imgbox.com/40/06/Qf680Ypk_o.png" alt="在这里插入图片描述"><br> 解决方案：</p> 
<pre><code class="prism language-shell"><span class="token function">rm</span> /var/lib/apt/lists/lock
</code></pre> 
<p>参考：<a href="https://blog.csdn.net/u013387787/article/details/78326553?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.control&amp;dist_request_id=&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.control">在Ubuntu下解决E: 无法对目录 /var/lib/apt/lists/ 加锁的问题</a></p> 
<h4><a id="aptget_update__Waiting_for_headers_155"></a>apt-get update -&gt; 卡在Waiting for headers</h4> 
<p>在使用<code>apt-get update</code>指令时，卡在了Waiting for headers不动。<br> <img src="https://images2.imgbox.com/de/ab/oS12LBqd_o.png" alt="在这里插入图片描述"><br> 解决方案：</p> 
<pre><code>rm /var/lib/apt/lists/*
rm /var/lib/apt/lists/partial/*
apt-get update
</code></pre> 
<p>参考：<a href="https://blog.csdn.net/zc123456zzc/article/details/47153913">apt-get update时卡在 waiting for headers</a></p> 
<h4><a id="bazel_authentication_failed_166"></a>bazel authentication failed</h4> 
<p>安装tensorflow或caffe过程中，会安装bazel. 该处因为<code>PPA key expired</code>.</p> 
<p>解决方案：</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> apt-transport-https <span class="token function">curl</span> gnupg
<span class="token function">curl</span> -fsSL https://bazel.build/bazel-release.pub.gpg <span class="token operator">|</span> gpg --dearmor <span class="token operator">&gt;</span> bazel.gpg
<span class="token function">sudo</span> <span class="token function">mv</span> bazel.gpg /etc/apt/trusted.gpg.d/
<span class="token builtin class-name">echo</span> <span class="token string">"deb [arch=amd64] https://storage.googleapis.com/bazel-apt stable jdk1.8"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/bazel.list
</code></pre> 
<p>参考：https://docs.bazel.build/versions/master/install-ubuntu.html#install-on-ubuntu</p> 
<h3><a id="_179"></a>其他错误</h3> 
<h4><a id="shell0D_180"></a>运行shell脚本出现<code>%0D</code>编码</h4> 
<p>修改文件格式，<code>vim</code>打开设置如下</p> 
<pre><code class="prism language-shell">:set <span class="token assign-left variable">ff</span><span class="token operator">=</span>unix
</code></pre> 
<p>解决方案参考：https://www.jianshu.com/p/fe8ec5f5792d</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0f842ef337519f42a1a395033fc02e93/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">目标检测学习笔记——OHEM和focal loss</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c941b0ba9c062f39c3411cc944fd85f8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Umap与 t-sne可视化CNN特征</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>