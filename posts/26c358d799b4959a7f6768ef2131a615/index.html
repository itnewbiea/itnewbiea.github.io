<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ä¿å­˜å›¾ç‰‡åˆ°MySQL&amp;ä»MySQLè¯»å–å›¾ç‰‡ - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ä¿å­˜å›¾ç‰‡åˆ°MySQL&amp;ä»MySQLè¯»å–å›¾ç‰‡" />
<meta property="og:description" content="ğŸ‰æ¥ä¸Šæ¬¡Â çˆ¬å–å¤å¤è¡¨æƒ…åŒ…Â ï¼Œè¿™æ¬¡æˆ‘ä»¬ç›´æ¥å°†è¡¨æƒ…åŒ…å­˜åˆ°MySQLæ•°æ®åº“è€Œä¸æ˜¯æœ¬åœ°ã€‚ğŸ‰
ğŸ¥­1. åˆ›å»ºæ•°æ®åº“ é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œæ•°æ®åº“åä¸ºikunï¼Œè¡¨åä¸ºimgï¼Œ3ä¸ªå­—æ®µåˆ†åˆ«ä¸ºidï¼ˆå›¾ç‰‡idï¼‰ã€imgï¼ˆäºŒè¿›åˆ¶ç ï¼‰ã€dateï¼ˆå­˜å‚¨æ—¶é—´ï¼‰
å…¶ä¸­ï¼ŒäºŒè¿›åˆ¶ç çš„å­˜å‚¨æ ¼å¼åº”è¯¥ä¸º BLOBç±»å‹ï¼Œä¸‹é¢ä¸ºä¸åŒç±»å‹å¯¹åº”çš„æœ€å¤§å­˜å‚¨ç©ºé—´
TINYBLOBÂ 255ä¸ªå­—èŠ‚BLOBÂ 65535å­—èŠ‚MEDIUMBLOBÂ 16MLONGBLOBÂ 4G USE ikun; CREATE TABLE `img` ( `id` int NOT NULL AUTO_INCREMENT, `img` mediumblob NOT NULL, `date` date NOT NULL, PRIMARY KEY (`id`) ) ; ğŸˆ2. ä¿å­˜å›¾ç‰‡åˆ°æ•°æ®åº“ å°†å›¾ç‰‡è½¬ä¸ºäºŒè¿›åˆ¶æµ
å¯¹äºå›¾ç‰‡çš„è¾“å…¥å’Œè¾“å‡ºï¼Œæˆ‘ä»¬æ›´å¤šä½¿ç”¨BufferedInputStreamæˆ–è€…BufferedOutPutStream
public static void saveInMySQL(String url) throws IOException { //è·å¾—è¿æ¥å¯¹è±¡ Connection con = DBUtil.getConnection(&#34;root&#34;,&#34;******&#34;,&#34;ikun&#34;); PreparedStatement pre = null; //è·å–å›¾ç‰‡ä¿¡æ¯ï¼Œåšè¾“å‡ºæµ InputStream in = getEntityByHttpGetMethod(url).getContent(); BufferedInputStream inputStream = new BufferedInputStream(in); try { String sql = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/26c358d799b4959a7f6768ef2131a615/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-01T14:34:19+08:00" />
<meta property="article:modified_time" content="2023-04-01T14:34:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ä¿å­˜å›¾ç‰‡åˆ°MySQL&amp;ä»MySQLè¯»å–å›¾ç‰‡</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><strong>ğŸ‰æ¥ä¸Šæ¬¡Â <a class="link-info" href="http://t.csdn.cn/SrNZt" rel="nofollow" title="çˆ¬å–å¤å¤è¡¨æƒ…åŒ…">çˆ¬å–å¤å¤è¡¨æƒ…åŒ…</a>Â ï¼Œè¿™æ¬¡æˆ‘ä»¬ç›´æ¥å°†è¡¨æƒ…åŒ…å­˜åˆ°MySQLæ•°æ®åº“è€Œä¸æ˜¯æœ¬åœ°ã€‚ğŸ‰</strong></p> 
 <p></p> 
</blockquote> 
<h2><span style="color:#a2e043;">ğŸ¥­1. åˆ›å»ºæ•°æ®åº“</span></h2> 
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œæ•°æ®åº“åä¸ºikunï¼Œè¡¨åä¸ºimgï¼Œ3ä¸ªå­—æ®µåˆ†åˆ«ä¸ºidï¼ˆå›¾ç‰‡idï¼‰ã€imgï¼ˆäºŒè¿›åˆ¶ç ï¼‰ã€dateï¼ˆå­˜å‚¨æ—¶é—´ï¼‰</p> 
<p></p> 
<p>å…¶ä¸­ï¼ŒäºŒè¿›åˆ¶ç çš„å­˜å‚¨æ ¼å¼åº”è¯¥ä¸º <strong>BLOBç±»å‹</strong>ï¼Œä¸‹é¢ä¸ºä¸åŒç±»å‹å¯¹åº”çš„æœ€å¤§å­˜å‚¨ç©ºé—´</p> 
<ol><li><code>TINYBLOB</code>Â 255ä¸ªå­—èŠ‚</li><li><code>BLOB</code>Â 65535å­—èŠ‚</li><li><code>MEDIUMBLOB</code>Â 16M</li><li><code>LONGBLOB</code>Â 4G</li></ol> 
<pre><code class="language-sql">USE ikun; 
CREATE TABLE `img` (
  `id` int NOT NULL AUTO_INCREMENT,
  `img` mediumblob NOT NULL,
  `date` date NOT NULL,
  PRIMARY KEY (`id`)
) ;</code></pre> 
<h2><span style="color:#a2e043;">ğŸˆ2. ä¿å­˜å›¾ç‰‡åˆ°æ•°æ®åº“</span></h2> 
<p><span style="color:#ed7976;"><strong>å°†å›¾ç‰‡è½¬ä¸ºäºŒè¿›åˆ¶æµ</strong></span></p> 
<blockquote> 
 <p><span style="color:#ed7976;"><strong>å¯¹äºå›¾ç‰‡çš„è¾“å…¥å’Œè¾“å‡ºï¼Œæˆ‘ä»¬æ›´å¤šä½¿ç”¨</strong></span><span style="color:#1c7331;"><strong>BufferedInputStream</strong></span><span style="color:#ed7976;"><strong>æˆ–è€…</strong></span><span style="color:#1c7331;"><strong>BufferedOutPutStream</strong></span></p> 
</blockquote> 
<pre><code class="language-java">public static void saveInMySQL(String url) throws IOException {
        //è·å¾—è¿æ¥å¯¹è±¡
        Connection con = DBUtil.getConnection("root","******","ikun");
        PreparedStatement pre = null;
        //è·å–å›¾ç‰‡ä¿¡æ¯ï¼Œåšè¾“å‡ºæµ
        InputStream in = getEntityByHttpGetMethod(url).getContent();
        BufferedInputStream inputStream = new BufferedInputStream(in);

        try {
            String sql = "insert into img (img,date) values (?,?)";
            pre = con.prepareStatement(sql);
            pre.setBinaryStream(1,inputStream,in.available());
            Date date = new Date(System.currentTimeMillis());
            pre.setDate(2,date);
            //è·å–è¿”å›ç»“æœ
            int i = pre.executeUpdate();
            System.out.println(i);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }</code></pre> 
<h3><span style="color:#ed7976;">æŸ¥çœ‹æ•ˆæœ</span></h3> 
<p><img alt="" height="1090" src="https://images2.imgbox.com/74/d1/NcD3iV4h_o.png" width="1200"></p> 
<h2><span style="color:#a2e043;">ğŸ…Â 3. ä»æ•°æ®åº“è¯»å–å›¾ç‰‡</span></h2> 
<p><span style="color:#ed7976;"><strong>å°†äºŒè¿›åˆ¶æµè½¬ä¸ºæ–‡ä»¶è¾“å‡ºåˆ°æœ¬åœ°æŸ¥çœ‹</strong></span></p> 
<pre><code class="language-java">public static void readFromMysql(){
        //è·å¾—è¿æ¥å¯¹è±¡
        Connection con = DBUtil.getConnection("root","******.","ikun");
        PreparedStatement pre = null;
        ResultSet res = null;

        try {
            //è¿™é‡Œè¯»å–ä¸€å¼ 
            String sql = "select * from img where id = 1";
            pre = con.prepareStatement(sql);
            res = pre.executeQuery(sql);
            while (res.next()){
                int id = res.getInt("id");
                InputStream stream = res.getBinaryStream("img");
                Date date = res.getDate("date");
                System.out.println("å›¾ç‰‡idä¸º"+id+" åˆ›å»ºæ—¶é—´ä¸º"+date.toString());
                Files.copy(stream, Paths.get("D:\\ikun.jpg"));
            }
        } catch (SQLException | IOException e) {
            e.printStackTrace();
        }
        //æ–­å¼€è¿æ¥
        DBUtil.close();
    }</code></pre> 
<h2>å†™åœ¨æœ€å</h2> 
<blockquote> 
 <p>Â Â Â Â Â Â Â Â Â æˆ‘å‘ç°é˜…è¯»é‡æŒºé«˜çš„ä½†æ˜¯æ²¡äººæ”¶è—ï¼Œç¡®å®ï¼Œä¸€èˆ¬äººç›¸ä¿¡çœ‹å®Œä¸‹é¢å°±æœæ–­åˆ’èµ°äº†ï¼Œä½†è¯•é”™ä¸æ˜“ï¼Œèƒ½ä¸èƒ½ç•™ä¸ªç‚¹èµå†èµ°å‘¢ï¼Œè°¢è°¢~</p> 
 <p></p> 
 <p><br><span style="color:#ed7976;"><strong><span style="background-color:#fef2f0;">ğŸŠé€šå¸¸æˆ‘ä»¬å»ºè®®ä¸è¦ç›´æ¥å°†å›¾ç‰‡å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œè€Œæ˜¯æ”¾åˆ°æœ¬åœ°ç£ç›˜ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸å°†å›¾ç‰‡ç»Ÿä¸€å‘½åï¼Œé€šè¿‡å…¶æ–‡ä»¶åæˆ–è·¯å¾„æ¥è®¿é—®æ•°æ®åº“å®ç°è·å–å›¾ç‰‡çš„ç›®çš„ã€‚</span></strong></span></p> 
 <p>ğŸ…è€Œä¸å»ºè®®ç›´æ¥å¾€æ•°æ®åº“å­˜æ”¾å›¾ç‰‡çš„åŸå› å¦‚ä¸‹ï¼š</p> 
 <ol><li><strong>æ•°æ®åº“æ€§èƒ½ä¸‹é™</strong>ï¼šå­˜å‚¨å¤§é‡æ•°æ®å°†å ç”¨å¤§é‡çš„ç£ç›˜ç©ºé—´å’Œç³»ç»Ÿèµ„æºï¼Œç‰¹åˆ«å½±å“æ•°æ®åº“æ€§èƒ½ï¼Œå°¤å…¶æ˜¯å¤šç”¨æˆ·è®¿é—®çš„æƒ…å†µ</li><li><strong>æ•°æ®åº“çš„å¤‡ä»½å’Œç»´æŠ¤å˜å¾—å›°éš¾ï¼Œä¸”å¯è¯»æ€§å·®</strong></li><li><strong>å‹åŠ›æµ‹è¯•ï¼š</strong>å¤šç”¨æˆ·åŒæ—¶ä¸Šä¼ æˆ–ä¸‹è½½å›¾ç‰‡æ—¶ï¼Œå°†å¯¼è‡´æ•°æ®åº“æœåŠ¡å™¨å‹åŠ›è´Ÿè½½è¿‡å¤§</li><li><strong>å›¾ç‰‡è´¨é‡ä¸‹é™ï¼š</strong>æ¯”å¦‚æˆ‘ä»¬å¾…ä¼šçš„è¿è¡Œç»“æœå…¶å®æ˜¯è¿™æ ·çš„ï¼Œå·¦è¾¹æ˜¯æˆ‘ä»¬ä¸‹è½½åˆ°æœ¬åœ°çš„å›¾ç‰‡ï¼Œå³è¾¹åˆ™æ˜¯ä¸‹è½½åˆ°æ•°æ®åº“ï¼Œå†ä»æ•°æ®åº“è¯»å–å‡ºæ¥çš„æ•ˆæœã€‚è€Œä¸”æˆ‘å°†äºŒè¿›åˆ¶æ•°å€¼ç±»å‹è®¾ç½®ä¸ºæœ€å¤§è¿˜æ˜¯æ¨¡ç³Šã€‚</li></ol> 
 <p><img alt="" height="633" src="https://images2.imgbox.com/9d/a3/5ZYvxVqV_o.png" width="1188"></p> 
</blockquote>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/42c568a520d0eec99d429ec2364a7163/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Javaä¸­çš„Switchè¯­å¥</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2651ba13832016a4860d7c12bbabadd4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Javaé›†ç¾¤å®æˆ˜ï¼šå•ä½“æ¶æ„å‡çº§åˆ°é›†ç¾¤æ¶æ„ï¼ˆå…­ï¼‰åˆ†å¸ƒå¼ç¼“å­˜REDIS</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>