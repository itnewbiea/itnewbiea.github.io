<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Type-C边充边听PD协议芯片 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Type-C边充边听PD协议芯片" />
<meta property="og:description" content="目前市面上的大部分手机都取消了3.5mm音频耳机接口，仅保留一个Type-C接口，但是追求音质和零延迟的用户仍然会选择3.5mm有线耳机，因为在玩手机游戏的时候，音画不同步真的很影响游戏体验，所以Type-C转3.5mm接口线应运而生。
有需求就有市场，这款Type-C转3.5mm接口线刚推出就火爆了手机配件市场，简单好用而且很好的解决了用户的痛点，订单自然不会少。但是过了不久，用户反馈听歌的问题是解决了，但是手机充不了电，这又产生了新的痛点，不少厂家很快也发现了这个问题，谁能先解决这痛点，谁就能快人一步抢占市场，大家都想做第一个吃螃蟹的人，于是第二代音频转接器很快研发了出来！
音频转接器一共三个接口，一端type-c公头连接手机设备，一端type-c母座连接适配器，一端3.5mm音频接口连接耳机，看似简单其实里面集成了很多高新技术。
加入充电的初衷起因是用户在玩手机游戏的时候，电量消耗的特别快，只连接耳机的时候根本无法充电，所以使用这款音频转接器就能实现边玩边充，音频充电两不误，很好的解决了用户的痛点。
当你不需要充电的时候，仅仅插耳机也是不影响使用的。
接下来我们看看到底是如何实现边充电边听歌的呢？我们研究了几款产品，拆开发现里面主要的IC芯片有两个，一个是音频芯片负责数字信号转模拟信号给耳机输出音频，另一个是PD协议芯片，负责与手机进行PD协议通讯。
首先我们先了解一下PD协议里边充电边听歌的原理，手机和PD协议芯片都属于DRP，是双角色端口。在没做角色切换之前，sink（受电方）只能是UFP（从机），source（供电方）只能是DFP（主机），例如手机接U盘的时候，手机作为source（供电方），U盘作为sink（受电方），所以手机会放电给U盘使用。
虽然说只是做角色切换就能实现边充电边听歌，但是目前市面上的手机型号五花八门，而且不少手机的PD协议做的并不规范，在角色切换过程中出现的问题也千奇百怪，目前常规做法有两种：
为了更直观了解，我们用协议分析器对边充电边听歌的手机抓取了PD协议过程，用的是赛普拉斯的PD协议分析仪：
OPPO与vivo系列的手机做边充电边听歌角色切换的时候，如果强制做PR_Swap可能会导致手机死机重启等问题，所以这里芯片选择CC断开重连让CC置高，让芯片做source（供电方）和DFP（主机），然后再做DR_Swap，只切换数据角色。
总结：
这里测试的PD协议芯片是来自乐得瑞科技的LDR6028，这款PD协议芯片针对 USB Type-C 标准中的 Bridge 设备而开发的 USB-C DRP 接口 USB PD 通信芯片。 可以实现切换 Data Role 功能，提供予智能设备(电脑，平板，手机) PDO 及 REQUEST 协商，自动进行 DR_SWAP 转为 UFP 模式。
LDR6028特点：
SOP-8 封装，外围精简
支持 USB PD 2.0，兼容 USB PD 3.0
提供予智能设备(电脑，平板，手机) 5V PDO 及 REQUEST 协商
自动进行 DR_SWAP 转为 UFP 模式
主要应用场景：
1.USB TYPE-C 转接器
2.USB Type-C HUB
部分原理图：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/bc8751faf8bba62c79662b744db48bf9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-21T11:27:16+08:00" />
<meta property="article:modified_time" content="2022-07-21T11:27:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Type-C边充边听PD协议芯片</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>目前市面上的大部分手机都取消了3.5mm音频耳机接口，仅保留一个Type-C接口，但是追求音质和零延迟的用户仍然会选择3.5mm有线耳机，因为在玩手机游戏的时候，音画不同步真的很影响游戏体验，所以Type-C转3.5mm接口线应运而生。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/2f/a6/E5ZPCmuP_o.png"></p> 
<p>有需求就有市场，这款Type-C转3.5mm接口线刚推出就火爆了手机配件市场，简单好用而且很好的解决了用户的痛点，订单自然不会少。但是过了不久，用户反馈听歌的问题是解决了，但是手机充不了电，这又产生了新的痛点，不少厂家很快也发现了这个问题，谁能先解决这痛点，谁就能快人一步抢占市场，大家都想做第一个吃螃蟹的人，于是第二代音频转接器很快研发了出来！</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d1/e6/JQIxYJSU_o.png"> </p> 
<p>音频转接器一共三个接口，一端type-c公头连接手机设备，一端type-c母座连接适配器，一端3.5mm音频接口连接耳机，看似简单其实里面集成了很多高新技术。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/de/28/Kt8VxJXC_o.png"></p> 
<p> </p> 
<p>加入充电的初衷起因是用户在玩手机游戏的时候，电量消耗的特别快，只连接耳机的时候根本无法充电，所以使用这款音频转接器就能实现边玩边充，音频充电两不误，很好的解决了用户的痛点。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/29/e3/7FzB0cnx_o.png"> </p> 
<p> 当你不需要充电的时候，仅仅插耳机也是不影响使用的。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/35/e2/gBmMeuU0_o.png"></p> 
<p>接下来我们看看到底是如何实现边充电边听歌的呢？我们研究了几款产品，拆开发现里面主要的IC芯片有两个，一个是音频芯片负责数字信号转模拟信号给耳机输出音频，另一个是PD协议芯片，负责与手机进行PD协议通讯。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/99/88/ptFe7m95_o.jpg"> </p> 
<p>首先我们先了解一下PD协议里边充电边听歌的原理，手机和PD协议芯片都属于DRP，是双角色端口。在没做角色切换之前，sink（受电方）只能是UFP（从机），source（供电方）只能是DFP（主机），例如手机接U盘的时候，手机作为source（供电方），U盘作为sink（受电方），所以手机会放电给U盘使用。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5b/de/tS41Mf5e_o.png"> </p> 
<p>虽然说只是做角色切换就能实现边充电边听歌，但是目前市面上的手机型号五花八门，而且不少手机的PD协议做的并不规范，在角色切换过程中出现的问题也千奇百怪，目前常规做法有两种：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ce/c8/gJVcR8ib_o.png"> </p> 
<p>为了更直观了解，我们用协议分析器对边充电边听歌的手机抓取了PD协议过程，用的是赛普拉斯的PD协议分析仪：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6a/07/pnYrU5Sg_o.png"> </p> 
<p>OPPO与vivo系列的手机做边充电边听歌角色切换的时候，如果强制做PR_Swap可能会导致手机死机重启等问题，所以这里芯片选择CC断开重连让CC置高，让芯片做source（供电方）和DFP（主机），然后再做DR_Swap，只切换数据角色。</p> 
<p>总结：</p> 
<p>这里测试的PD协议芯片是来自乐得瑞科技的LDR6028，这款PD协议芯片针对 USB Type-C 标准中的 Bridge 设备而开发的 USB-C DRP 接口 USB PD 通信芯片。 可以实现切换 Data Role 功能，提供予智能设备(电脑，平板，手机) PDO 及 REQUEST 协商，自动进行 DR_SWAP 转为 UFP 模式。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/de/4d/MTW0wnL6_o.png"></p> 
<p>LDR6028特点：</p> 
<ol><li> <p>SOP-8 封装，外围精简</p> </li><li> <p>支持 USB PD 2.0，兼容 USB PD 3.0</p> </li><li> <p>提供予智能设备(电脑，平板，手机) 5V PDO 及 REQUEST 协商</p> </li><li> <p>自动进行 DR_SWAP 转为 UFP 模式</p> </li></ol> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d4/8a/TPzy4Cft_o.png"></p> 
<p>主要应用场景：</p> 
<p>1.USB TYPE-C 转接器</p> 
<p>2.USB Type-C HUB</p> 
<p></p> 
<p>部分原理图：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/02/83/maOHFcJL_o.png"></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ecf7fd0683721bc84437070fa9c6a65b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决在VScode中调试C&#43;&#43;代码断点无效、断点错位的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e0343a600b80b92a7663466a58b41987/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">UE4官方文档毛发部分整合笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>