<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>How to umount when the device is busy - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="How to umount when the device is busy" />
<meta property="og:description" content="It happens all the time doesn’t it? You need to unmount a CD or you want to pack away the external drive but when you try to umount it you get the dreaded “device is busy” message. Wouldn’t it be great if Linux actually told you what was keeping the drive busy? Here we are in 2008, I’m using Ubuntu Gutsy, and that message hasn’t changed in all the years I’ve used Linux." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f993d32598f79c573ee4ce776c8ddddb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2011-02-07T13:55:00+08:00" />
<meta property="article:modified_time" content="2011-02-07T13:55:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">How to umount when the device is busy</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>It happens all the time doesn’t it? You need to unmount a CD or you want to pack away the external drive but when you try to umount it you get the dreaded “device is busy” message. Wouldn’t it be great if Linux actually told you what was keeping the drive busy? Here we are in 2008, I’m using Ubuntu Gutsy, and that message hasn’t changed in all the years I’ve used Linux.</p> 
<blockquote> 
 <p><code># umount /media/disk/ <br>umount: /media/disk: device is busy <br>umount: /media/disk: device is busy</code></p> 
</blockquote> 
<p>First thing you’ll do will probably be to close down all your terminals and xterms but here’s a better way. You can use the fuser command to find out which process was keeping the device busy:</p> 
<blockquote> 
 <p><code># fuser -m /dev/sdc1 <br>/dev/sdc1: 538 <br># ps auxw|grep 538 <br>donncha 538 0.4 2.7 219212 56792 ? SLl Feb11 11:25 rhythmbox</code></p> 
</blockquote> 
<p>Rhythmbox is the culprit! Close that down and umount the drive. Problem solved!</p> 
<blockquote> 
 <h6>You might also like</h6> 
 <ul><li><a href="http://ocaoimh.ie/backups-save-the-day/" rel="nofollow">Backups save the day</a>A few weeks ago I blogged about my backup </li><li><a href="http://ocaoimh.ie/busy-busy-busy/" rel="nofollow">Busy, busy, busy</a>Just when I think I have a project finished and </li><li><a href="http://ocaoimh.ie/adbusters-buy-nothi/" rel="nofollow">Adbusters: Buy Nothing Day – i …</a>Adbusters: Buy Nothing Day - it was December 2nd here</li></ul> 
</blockquote> 
<p><small>If you like this post then please subscribe to my <a href="http://feeds.feedburner.com/HolyShmoly" rel="nofollow">full RSS feed</a>. You can also <a href="http://www.feedburner.com/fb/a/emailverifySubmit?feedId=536659&amp;loc=en_US" rel="nofollow">click here</a> to subscribe by email. There are also my <a href="http://ocaoimh.ie/ipo" rel="nofollow">fabulous photos</a> and <a href="http://thefunnyvideoblog.com/" rel="nofollow">funny videos</a> to explore too!</small></p> 
<p> </p> 
<p>from :  <a href="http://ocaoimh.ie/how-to-umount-when-the-device-is-busy/" rel="nofollow">http://ocaoimh.ie/how-to-umount-when-the-device-is-busy/</a></p> 
<p> </p> 
<h5><a href="http://borland.mblogger.cn/aiirii/posts/34633.aspx" rel="nofollow">umount出现device is busy</a></h5> 
<p>     最近几次发现mount了一个网络共享磁盘后， 就无法umount, 老是提示：device is busy， 服务又不能停止的。 无意发现可以用"umount -l"解决!</p> 
<p>    上网找下umount -l，发现这里讲得不错：</p> 
<p><a href="http://blog.chinaunix.net/u/4206/showart_105859.html" rel="nofollow">http://blog.chinaunix.net/u/4206/showart_105859.html</a></p> 
<p><strong>2. </strong><strong>mount</strong><strong>的基本用法是？</strong></p> 
<p>格式：mount [-参数] [设备名称] [挂载点]</p> 
<p>其中常用的参数有：</p> 
<p>-a 安装在/etc/fstab文件中类出的所有文件系统。</p> 
<p>-f 伪装mount，作出检查设备和目录的样子，但并不真正挂载文件系统。</p> 
<p>-n 不把安装记录在/etc/mtab 文件中。</p> 
<p>-r 讲文件系统安装为只读。</p> 
<p>-v 详细显示安装信息。</p> 
<p>-w 将文件系统安装为可写，为命令默认情况。</p> 
<p>-t 
 &lt;文件系统类型&gt;
   指定设备的文件系统类型，常见的有： 
 </p> 
<p>ext2 linux目前常用的文件系统</p> 
<p>msdos MS-DOS的fat，就是fat16</p> 
<p>vfat windows98常用的fat32</p> 
<p>nfs 网络文件系统</p> 
<p>iso9660 CD-ROM光盘标准文件系统</p> 
<p>ntfs windows NT/2000/XP的文件系统</p> 
<p>auto 自动检测文件系统</p> 
<p>-o 
 &lt;选项&gt;
   指定挂载文件系统时的选项，有些也可写到在/etc/fstab中。常用的有： 
 </p> 
<p>defaults 使用所有选项的默认值（auto、nouser、rw、suid）</p> 
<p>auto/noauto 允许/不允许以 –a选项进行安装</p> 
<p>dev/nodev 对/不对文件系统上的特殊设备进行解释</p> 
<p>exec/noexec 允许/不允许执行二进制代码</p> 
<p>suid/nosuid 确认/不确认suid和sgid位</p> 
<p>user /nouser 允许/不允许一般用户挂载</p> 
<p>codepage=XXX 代码页</p> 
<p>iocharset=XXX 字符集</p> 
<p>ro 以只读方式挂载</p> 
<p>rw 以读写方式挂载</p> 
<p>remount 重新安装已经安装了的文件系统</p> 
<p>loop 挂载回旋设备</p> 
<p>需要注意的是，挂载点必须是一个已经存在的目录，这个目录可以不为空，但挂载后这个目录下以前的内容将不可用，umount以后会恢复正常。使用多个-o参数的时候，-o 只用一次，参数之间用半角逗号隔开：</p> 
<p># mount –o remount,rw /</p> 
<p>例如要挂载windows下文件系统为FAT32的D盘，一般而言在Linux下这个分区对应/dev/hda5，根据具体的分区情况会有不同，这里就以hda5来举例说明：</p> 
<p># mkdir /mnt/hda5 //创建hda5的目录作为挂载点，位置和目录名可自定义//</p> 
<p># mount -t vfat /dev/hda5 /mnt/hda5</p> 
<p>一般而言，Linux会自动探测分区的文件系统，除非让你指定时，否则-t vfat 可以省掉。</p> 
<p># mount /dev/hda5 /mnt/hda5</p> 
<p>这样就可以进入/mnt/hda5目录去访问分区中的资源了。</p> 
<p><strong>3. </strong><strong>为什么</strong><strong>mount</strong><strong>上分区后显示不了中文文件为问号</strong><strong>/</strong><strong>乱码？</strong></p> 
<p>显示问号表明你的系统中没有可识别使用的中文字体，请先安装中文字体。确保你的系统已经可以很好的显示中文。显示为乱码一般是mount默认使用的文件系统编码和文件系统中文件的实际编码不一致造成的。要想正常显示中文文件，mount时需要用到 -o 参数里的codepage和iocharset选项。codepage指定文件系统的代码页，简体中文中文代码是936；iocharset指定字符集，简体中文一般用cp936或gb2312。</p> 
<p># mount –o iocharset=gb2312 codepage=936 /dev/hda5 /mnt/hda5</p> 
<p>一般来说 mount –o iocharset=cp936 /dev/hda5 /mnt/hda5 就可以解决问题了。</p> 
<p>如果这样做了以后还有问题，请尝试UTF-8编码：</p> 
<p># mount –o iocharset=utf8 /dev/hda5 /mnt/hda5</p> 
<p><strong>4. </strong><strong>为什么</strong><strong>mount</strong><strong>上去以后分区普通用户不可写？</strong></p> 
<p>mount时加上 –o umask=000 即可：</p> 
<p># mount –o umask=000, iocharset=cp936 /dev/hda5 /mnt/hda5</p> 
<p><strong>5. </strong><strong>为什么</strong><strong>mount</strong><strong>上去后的分区中的文件都变成短文件名了？</strong></p> 
<p>这是文件系统挂错的原因，将FAT32挂载成FAT16时就会出现这种情况，先umount，然后用 –t vfat 重新挂载即可解决问题。</p> 
<p># mount –t vat /dev/hda5 /mnt/hda5</p> 
<p><strong>7. </strong><strong>如何挂载</strong><strong>U</strong><strong>盘和</strong><strong>mp3</strong><strong>？</strong></p> 
<p>如果计算机没有其它SCSI设备和usb外设的情况下，插入的U盘的设备路径是 /dev/sda1，用命令：</p> 
<p># mkdir /mnt/u</p> 
<p># mount /dev/sda1 /mnt/u</p> 
<p>挂载即可。</p> 
<p><strong>8. </strong><strong>可以直接使用</strong><strong>iso</strong><strong>文件吗？</strong></p> 
<p>可以，就是mount的这一选项使得Linux下有免费虚拟光驱的说法，具体用法是：</p> 
<p># mkdir /mnt/iso</p> 
<p># mount –o loop linux.iso /mnt/iso</p> 
<p>当然，挂载以后挂载点/mnt/iso也是只读的。</p> 
<p><strong>12. </strong><strong>如何开机自动挂载分区？</strong></p> 
<p>每次挂载都要输入那么长的命令的确是繁琐了些，只要将分区信息写到/etc/fstab文件中即可实现系统启动的自动挂载，例如对于/dev/hda5的自动挂载添加如下的行即可：</p> 
<p>/dev/hda5 /mnt/hda5 vfat defaults,iocharset=cp936, rw 0 0</p> 
<p><strong>13. </strong><strong>如何挂载</strong><strong>samba </strong><strong>分区？</strong></p> 
<p># mkdir /mnt/share</p> 
<p># mount -t smbfs -o username=root,password=abc,codepage=936,iocharset=gb2312 //192.168.1.100/share /mnt/share</p> 
<p>如果中文显示不正常请尝试UTF-8编码。当然可以写到fstab中实现自动挂载。</p> 
<p><strong>14. </strong><strong>mount --bind</strong><strong>是什么意思？</strong><strong></strong></p> 
<p>mount --bind 是将一个目录中的内容挂载到另一个目录上，用法是</p> 
<p># mount --bind olddir newdir</p> 
<p>这个命令使得自己搭建的FTP要共享某个目录的时候变得特别方便。如果要取消mount用命令：</p> 
<p># mount --move olddir newdir 即可。</p> 
<p>如果mount --bind 也想写入fstab中的话格式如下：</p> 
<p>olddir newdir none bind 0 0</p> 
<p><strong>16. </strong><strong>为什么</strong><strong>umount</strong><strong>的时候老显示</strong><strong> device busy</strong><strong>？</strong></p> 
<p>这是因为有程序正在访问这个设备，最简单的办法就是让访问该设备的程序退出以后再umount。可能有时候用户搞不清除究竟是什么程序在访问设备，如果用户不急着umount，则可以用:</p> 
<p># umount -l /mnt/hda5</p> 
<p>来卸载设备。选项 –l 并不是马上umount，而是在该目录空闲后再umount。还可以先用命令 ps aux 来查看占用设备的程序PID，然后用命令kill来杀死占用设备的进程，这样就umount的非常放心了。</p> from :   
<a href="http://hi.baidu.com/carbens/blog/item/f10f8288b8743190a4c272fe.html" rel="nofollow">http://hi.baidu.com/carbens/blog/item/f10f8288b8743190a4c272fe.html</a>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8364dceade91a4cb881d63714b8b130a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">揭秘华为标准岗位工资</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/417c0feab45c8129db390bacf54d770a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">XPCOM开发需要注意的地方</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>