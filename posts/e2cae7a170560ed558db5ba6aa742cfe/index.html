<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[微信小程序]搜索功能实现,搜索框样式 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[微信小程序]搜索功能实现,搜索框样式" />
<meta property="og:description" content="微信小程序开发交流qq群 173683895
承接微信小程序开发。扫码加微信。 正文： 上效果图:
一:搜索框功能实现
1.在首页做一个搜索框的样式并实现跳转到搜索页面
&lt;view class=&#39;page_row&#39; bindtap=&#34;suo&#34;&gt; &lt;view class=&#34;search&#34;&gt; &lt;view class=&#34;df search_arr&#34;&gt; &lt;icon class=&#34;searchcion&#34; size=&#39;20&#39; type=&#39;search&#39;&gt;&lt;/icon&gt; &lt;input class=&#34;&#34; disabled placeholder=&#34;请输入关键字&#34; value=&#34;{{searchValue}}&#34;/&gt; &lt;/view&gt; &lt;/view&gt; &lt;view class=&#39;sousuo&#39;&gt;搜索&lt;/view&gt; &lt;/view&gt; .search{ width: 80%; } .search_arr { border: 1px solid #d0d0d0; border-radius: 10rpx; margin-left: 20rpx; } .search_arr input{ margin-left: 60rpx; height: 60rpx; border-radius: 5px; } .bc_text { line-height: 68rpx; height: 68rpx; margin-top: 34rpx; } .sousuo { margin-left: 15rpx; width: 15%; line-height: 150%; text-align: center; border: 1px solid #d0d0d0; border-radius: 10rpx; } ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e2cae7a170560ed558db5ba6aa742cfe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-11-28T11:21:11+08:00" />
<meta property="article:modified_time" content="2017-11-28T11:21:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[微信小程序]搜索功能实现,搜索框样式</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>微信小程序开发交流qq群   173683895</p> 
<h4><img alt="" class="has" height="260" src="https://images2.imgbox.com/5b/e7/n3PQreXK_o.jpg" width="260">   承接微信小程序开发。扫码加微信。</h4> 
<h4><strong>正文：</strong></h4> 
<p>上效果图:</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/2a/28/vU8HHbGf_o.png"></p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/dd/dd/VrcABVHD_o.png"><img alt="" class="has" src="https://images2.imgbox.com/fb/0b/8lKOs1m5_o.png"></p> 
<p>一:搜索框功能实现</p> 
<p>1.在首页做一个搜索框的样式并实现跳转到搜索页面</p> 
<p> </p> 
<pre class="has"><code class="language-html">  &lt;view class='page_row' bindtap="suo"&gt;
    &lt;view class="search"&gt;
      &lt;view class="df search_arr"&gt;
        &lt;icon class="searchcion" size='20' type='search'&gt;&lt;/icon&gt;
        &lt;input class="" disabled placeholder="请输入关键字" value="{<!-- -->{searchValue}}"/&gt;
      &lt;/view&gt;
    &lt;/view&gt;
    &lt;view class='sousuo'&gt;搜索&lt;/view&gt;
  &lt;/view&gt;</code></pre> 
<p> </p> 
<pre class="has"><code class="language-css">.search{
  width: 80%;
}
.search_arr {
  border: 1px solid #d0d0d0;
  border-radius: 10rpx;
  margin-left: 20rpx;
}
.search_arr input{
  margin-left: 60rpx;
  height: 60rpx;
  border-radius: 5px;
}
.bc_text {
  line-height: 68rpx;
  height: 68rpx;
  margin-top: 34rpx;
}

.sousuo {
  margin-left: 15rpx;
  width: 15%;
  line-height: 150%;
  text-align: center;
  border: 1px solid #d0d0d0;
  border-radius: 10rpx;
}
.page_row{
  display: flex;
  flex-direction: row
}
.searchcion {
  margin: 10rpx 10rpx 10rpx 10rpx;
  position: absolute;
  left:25rpx;
  z-index: 2;
  width: 20px;
  height: 20px;
  text-align: center;
}</code></pre> 
<p>js.点击跳转到搜索的页面</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<pre class="has"><code class="language-javascript">  suo: function (e) {
    wx.navigateTo({
      url: '../search/search',
    })
  },</code></pre> 
<p><br> 2.搜索页面实现搜索功能</p> 
<p> </p> 
<p> </p> 
<pre class="has"><code class="language-html">&lt;!--pages/search/search.wxml--&gt;
&lt;view class="search page_row"&gt;
  &lt;input class="df_1" placeholder="请输入你有搜索的内容" value="{<!-- -->{searchValue}}" bindinput="searchValueInput" /&gt;
  &lt;button bindtap="suo" data-id='1'&gt;
    媒婆
  &lt;/button&gt;
  &lt;button bindtap="suo" data-id='2'&gt;
    单身
  &lt;/button&gt;
&lt;/view&gt;
&lt;view class="search_no" wx:if="{<!-- -->{!centent_Show}}"&gt;
  &lt;text&gt;很抱歉,没有找到您要搜索的资料/(ㄒoㄒ)/~~&lt;/text&gt;
&lt;/view&gt;
&lt;import src="../index/card/card.wxml" /&gt;
&lt;template is="nanshen_card" data="{<!-- -->{nanshen_card,img}}" /&gt;</code></pre> 
<p> </p> 
<pre class="has"><code class="language-html"> </code></pre> 
<p> </p> 
<pre class="has"><code class="language-javascript">var app = getApp();
var searchValue =''
// pages/search/search.js
Page({
  data: {
    centent_Show: true,
    searchValue: '',
    img: '',
    nanshen_card:''
  },
  onLoad: function () {
  },
  searchValueInput: function (e) {
    var value = e.detail.value;
    this.setData({
      searchValue: value,
    });
    if (!value &amp;&amp; this.data.productData.length == 0) {
      this.setData({
        centent_Show: false,
      });
    }
  },
  suo:function(e){
    var id= e.currentTarget.dataset.id
    var program_id = app.program_id;
    var that = this;
    wx.request({
      url: 'aaa.php',//这里填写后台给你的搜索接口
      method: 'post',
      data: { str: that.data.searchValue, program_id: program_id, style:id },
      header: {
        'content-type': 'application/x-www-form-urlencoded'
      },
      success: function (res) {
        if(res.data.length ==0){
          that.setData({
            centent_Show: false,
          });
        }
        that.setData({
          nanshen_card: res.data,
        });
      },
      fail: function (e) {
        wx.showToast({
          title: '网络异常！',
          duration: 2000
        });
      },
    });
  }
});</code></pre> 
<p> </p> 
<p> </p> 
<pre class="has"><code class="language-html"> </code></pre> 
<p> </p> 
<p> </p> 
<p> </p> 
<pre class="has"><code class="language-html"> </code></pre> 
<pre class="has"><code class="language-css">/* pages/search/search.wxss */
@import "../index/card/card";
.searchcion{
    width: 24px;
    height: 24px;
    text-align: center;
    margin-top: 5rpx
}
.search{
    padding: 1% 3%;
    background: #D0D0D0;
}
.search input{
    width: 85%;
    border-radius: 5px;
    background: #fff;
    border: none;
    font-size: 12px;
    padding:1% 2.5%;
    margin-right: 5px;
    }
.search button{
    line-height:30px;

    text-align: center;
    border: none;
    font-size: 28rpx;
    background: white
}</code></pre> 
<p> </p> 
<p>php实现代码</p> 
<pre class="has"><code>&lt;?php
    header("Content-Type:text/html;charset=utf8"); 
	header("Access-Control-Allow-Origin: *"); //解决跨域
	header('Access-Control-Allow-Methods:POST');// 响应类型  
	header('Access-Control-Allow-Headers:*'); // 响应头设置 
    $link=mysql_connect("localhost","root","root"); 
    mysql_select_db("shige", $link); //选择数据库
    mysql_query("SET NAMES utf8");//解决中文乱码问题
    
	$str = $_POST['str'];
	
	
	//SQL查询语句 SELECT * FROM 表名  LIKE 模糊搜索的变量
	$q="SELECT * FROM curriculum WHERE CONCAT_WS('',school,college,major,mtype,title) LIKE '%{$str}%'";
	
    $rs = mysql_query($q); //获取数据集
    if(!$rs){die("数据库没有数据!");}
	
	//循环读取数据并存入数组对象
    $dlogs;$i=0;
    while($row=mysql_fetch_array($rs))
    {
			    $dlog['title']= $row["title"];
			    $dlog['mtype']= $row["mtype"];
				$dlog['name']= $row["name"];
				$dlog['mfile']= $row["mfile"];
				$dlog['myear']= $row["myear"];
				$dlog['school']= $row["school"];
				$dlog['college']= $row["college"];
				$dlog['major']= $row["major"];
				$dlog['time']= $row["time"];
        $dlogs[$i++]=$dlog;
    }
	
	
    //以json格式返回html页面
    echo urldecode(json_encode($dlogs));
?&gt;</code></pre> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/46670d4aa4bb055e5542dd17dabc63eb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于Flink流处理的动态实时超大规模用户行为分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e86e1fa3ea104c210fcb97ce79e44c14/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ajax请求当发送post方式application/json格式数据，url后面又带有参数的时候</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>