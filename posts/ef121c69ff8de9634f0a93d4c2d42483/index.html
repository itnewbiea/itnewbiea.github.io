<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>四、使用Kibana执行elasticsearch的CRUD操作 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="四、使用Kibana执行elasticsearch的CRUD操作" />
<meta property="og:description" content="目录
使用kibana测试
1、创建一个索引
2、创建索引并添加数据
3、获取索引的具体信息
4、通过GET请求_cat查看所有的_cat命令
5、修改数据
5.1、使用PUT修改
5.2、使用POST最后加上_update修改
6、删除文档
7、删除索引
8、查询操作
Rest风格说明
Rest是一种软件架构风格，而不是标准，只是提供了一组设计原则和约束条件，它主要用于客户端和服务端交互类的软件，基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存等机制。
基于Rest命令说明
Method
Url地址
描述
PUT
localhost:9200/索引名称/类型名称/文档id
创建文档（指定文档id）
POST
localhost:9200/索引名称/类型名称
创建文档（随机文档id）
POST
localhost:9200/索引名称/类型名称/文档id/_update
修改文档
DELETE
localhost:9200/索引名称/类型名称/文档id
删除文档
GET
localhost:9200/索引名称/类型名称/文档id
通过文档id查询文档
POST
localhost:9200/索引名称/类型名称/_search
查询所有数据
使用kibana测试 启动elasticsearch服务
启动kibana服务（crud操作elasticsearch）
启动elasticsearch-head插件（查看elasticsearch中的数据）
1、创建一个索引 PUT /索引名
{
请求体
}
示例：
PUT /test { &#34;mappings&#34;: { &#34;properties&#34;: { &#34;name&#34;: { &#34;type&#34;: &#34;text&#34; }, &#34;age&#34;: { &#34;type&#34;: &#34;long&#34; }, &#34;birth&#34;: { &#34;type&#34;: &#34;date&#34; } } } } 执行完操作后查看elasticsearch可视化界面(elasticsearch-head插件)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ef121c69ff8de9634f0a93d4c2d42483/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-19T15:21:45+08:00" />
<meta property="article:modified_time" content="2023-06-19T15:21:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">四、使用Kibana执行elasticsearch的CRUD操作</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%BD%BF%E7%94%A8kibana%E6%B5%8B%E8%AF%95-toc" style="margin-left:0px;"><a href="#%E4%BD%BF%E7%94%A8kibana%E6%B5%8B%E8%AF%95" rel="nofollow">使用kibana测试</a></p> 
<p id="1%E3%80%81%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%B4%A2%E5%BC%95-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%B4%A2%E5%BC%95" rel="nofollow">1、创建一个索引</a></p> 
<p id="2%E3%80%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E5%B9%B6%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E5%B9%B6%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE" rel="nofollow">2、创建索引并添加数据</a></p> 
<p id="3%E3%80%81%E8%8E%B7%E5%8F%96%E7%B4%A2%E5%BC%95%E7%9A%84%E5%85%B7%E4%BD%93%E4%BF%A1%E6%81%AF-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E8%8E%B7%E5%8F%96%E7%B4%A2%E5%BC%95%E7%9A%84%E5%85%B7%E4%BD%93%E4%BF%A1%E6%81%AF" rel="nofollow">3、获取索引的具体信息</a></p> 
<p id="%C2%A04%E3%80%81%E9%80%9A%E8%BF%87GET%E8%AF%B7%E6%B1%82_cat%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84_cat%E5%91%BD%E4%BB%A4-toc" style="margin-left:40px;"><a href="#%C2%A04%E3%80%81%E9%80%9A%E8%BF%87GET%E8%AF%B7%E6%B1%82_cat%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84_cat%E5%91%BD%E4%BB%A4" rel="nofollow">4、通过GET请求_cat查看所有的_cat命令</a></p> 
<p id="5%E3%80%81%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE" rel="nofollow">5、修改数据</a></p> 
<p id="5.1%E3%80%81%E4%BD%BF%E7%94%A8PUT%E4%BF%AE%E6%94%B9-toc" style="margin-left:80px;"><a href="#5.1%E3%80%81%E4%BD%BF%E7%94%A8PUT%E4%BF%AE%E6%94%B9" rel="nofollow">5.1、使用PUT修改</a></p> 
<p id="%C2%A05.2%E3%80%81%E4%BD%BF%E7%94%A8POST%E6%9C%80%E5%90%8E%E5%8A%A0%E4%B8%8A_update%E4%BF%AE%E6%94%B9-toc" style="margin-left:80px;"><a href="#%C2%A05.2%E3%80%81%E4%BD%BF%E7%94%A8POST%E6%9C%80%E5%90%8E%E5%8A%A0%E4%B8%8A_update%E4%BF%AE%E6%94%B9" rel="nofollow">5.2、使用POST最后加上_update修改</a></p> 
<p id="6%E3%80%81%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3-toc" style="margin-left:40px;"><a href="#6%E3%80%81%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3" rel="nofollow">6、删除文档</a></p> 
<p id="7%E3%80%81%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95-toc" style="margin-left:40px;"><a href="#7%E3%80%81%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95" rel="nofollow">7、删除索引</a></p> 
<p id="8%E3%80%81%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#8%E3%80%81%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C" rel="nofollow">8、查询操作</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;">Rest风格说明</p> 
<p style="margin-left:.0001pt;text-align:justify;">        Rest是一种软件架构风格，而不是标准，只是提供了一组设计原则和约束条件，它主要用于客户端和服务端交互类的软件，基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存等机制。</p> 
<p style="margin-left:.0001pt;text-align:justify;">基于Rest命令说明</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:71.7pt;"> <p style="margin-left:.0001pt;text-align:justify;">Method</p> </td><td style="vertical-align:top;width:212.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Url地址</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">描述</p> </td></tr><tr><td style="vertical-align:top;width:71.7pt;"> <p style="margin-left:.0001pt;text-align:justify;">PUT</p> </td><td style="vertical-align:top;width:212.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">localhost:9200/索引名称/类型名称/文档id</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">创建文档（指定文档id）</p> </td></tr><tr><td style="vertical-align:top;width:71.7pt;"> <p style="margin-left:.0001pt;text-align:justify;">POST</p> </td><td style="vertical-align:top;width:212.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">localhost:9200/索引名称/类型名称</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">创建文档（随机文档id）</p> </td></tr><tr><td style="vertical-align:top;width:71.7pt;"> <p style="margin-left:.0001pt;text-align:justify;">POST</p> </td><td style="vertical-align:top;width:212.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">localhost:9200/索引名称/类型名称/文档id/_update</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">修改文档</p> </td></tr><tr><td style="vertical-align:top;width:71.7pt;"> <p style="margin-left:.0001pt;text-align:justify;">DELETE</p> </td><td style="vertical-align:top;width:212.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">localhost:9200/索引名称/类型名称/文档id</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">删除文档</p> </td></tr><tr><td style="vertical-align:top;width:71.7pt;"> <p style="margin-left:.0001pt;text-align:justify;">GET</p> </td><td style="vertical-align:top;width:212.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">localhost:9200/索引名称/类型名称/文档id</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">通过文档id查询文档</p> </td></tr><tr><td style="vertical-align:top;width:71.7pt;"> <p style="margin-left:.0001pt;text-align:justify;">POST</p> </td><td style="vertical-align:top;width:212.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">localhost:9200/索引名称/类型名称/_search</p> </td><td style="vertical-align:top;width:142.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">查询所有数据</p> </td></tr></tbody></table> 
<h2 id="%E4%BD%BF%E7%94%A8kibana%E6%B5%8B%E8%AF%95" style="margin-left:.0001pt;text-align:justify;">使用kibana测试</h2> 
<p style="margin-left:.0001pt;text-align:justify;">启动elasticsearch服务</p> 
<p style="margin-left:.0001pt;text-align:justify;">启动kibana服务（crud操作elasticsearch）</p> 
<p style="margin-left:.0001pt;text-align:justify;">启动elasticsearch-head插件（查看elasticsearch中的数据）</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/56/72/vUOuL31B_o.png"></p> 
<h3 id="1%E3%80%81%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%B4%A2%E5%BC%95" style="text-align:justify;">1、创建一个索引</h3> 
<p style="margin-left:.0001pt;text-align:justify;">PUT /索引名</p> 
<p style="margin-left:.0001pt;text-align:justify;">{<!-- --></p> 
<p style="margin-left:.0001pt;text-align:justify;">请求体</p> 
<p style="margin-left:.0001pt;text-align:justify;">}</p> 
<p style="margin-left:.0001pt;text-align:justify;">示例：</p> 
<pre><code class="hljs">PUT /test
{
  "mappings": {
    "properties": {
      "name": {
        "type": "text"
      },
      "age": {
        "type": "long"
      },
      "birth": {
        "type": "date"
      }
    }
  }
}</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/45/e0/qdRdUtJ6_o.png"></p> 
<p style="margin-left:.0001pt;text-align:justify;">执行完操作后查看elasticsearch可视化界面(elasticsearch-head插件)</p> 
<p style="margin-left:.0001pt;text-align:justify;">http://localhost:9100/</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/a1/53/EeNj3Ncq_o.png"></p> 
<p> </p> 
<h3 id="2%E3%80%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E5%B9%B6%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE" style="text-align:justify;">2、创建索引并添加数据</h3> 
<p style="margin-left:.0001pt;text-align:justify;">PUT /索引名/类型名/文档id</p> 
<p style="margin-left:.0001pt;text-align:justify;">{<!-- --></p> 
<p style="margin-left:.0001pt;text-align:justify;">请求体</p> 
<p style="margin-left:.0001pt;text-align:justify;">}</p> 
<p style="margin-left:.0001pt;text-align:justify;">创建索引并添加数据时，没有指定数据的具体类型，es会自动推断字段类型并设置对应默认值</p> 
<pre><code class="hljs">PUT /test1/type1/1
{
  "name": "张三",
  "age": 18
}</code></pre> 
<p><img alt="" src="https://images2.imgbox.com/ad/a6/DcOnQi2f_o.png"></p> 
<p style="margin-left:.0001pt;text-align:justify;">执行完操作后查看elasticsearch可视化界面(elasticsearch-head插件)</p> 
<p style="margin-left:.0001pt;text-align:justify;">http://localhost:9100/ <img alt="" src="https://images2.imgbox.com/d9/dc/kZqVIxIx_o.png"></p> 
<p> 查看数据</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/41/50/e2otCP5h_o.png"></p> 
<p> 可以看到创建了test1索引和type1类型（类型默认为_doc）,数据也成功添加到了对应的索引下</p> 
<h3 id="3%E3%80%81%E8%8E%B7%E5%8F%96%E7%B4%A2%E5%BC%95%E7%9A%84%E5%85%B7%E4%BD%93%E4%BF%A1%E6%81%AF" style="text-align:justify;">3、获取索引的具体信息</h3> 
<p style="margin-left:.0001pt;text-align:justify;">GET 索引名称</p> 
<p style="margin-left:.0001pt;text-align:justify;">示例</p> 
<pre><code class="hljs">GET test</code></pre> 
<p><img alt="" src="https://images2.imgbox.com/39/c6/KzGqMIma_o.png"></p> 
<h3 id="%C2%A04%E3%80%81%E9%80%9A%E8%BF%87GET%E8%AF%B7%E6%B1%82_cat%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84_cat%E5%91%BD%E4%BB%A4"> 4、通过GET请求_cat查看所有的_cat命令</h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/99/d5/qBICqOsC_o.png"></p> 
<p> 在对应的命令上加上参数”<span style="color:#ff0000;">?v</span>”，会在结果中把title带上,简单举几个常用的命令</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:213.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">命令</p> </td><td style="vertical-align:top;width:213.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">描述</p> </td></tr><tr><td style="vertical-align:top;width:213.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">GET _cat/indices?v</p> </td><td style="vertical-align:top;width:213.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">查看ES的所有索引信息</p> </td></tr><tr><td style="vertical-align:top;width:213.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">GET _cat/health?v</p> </td><td style="vertical-align:top;width:213.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">查看ES的健康状态</p> </td></tr><tr><td style="vertical-align:top;width:213.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">GET _cat/plugins?v</p> </td><td style="vertical-align:top;width:213.05pt;"> <p style="margin-left:.0001pt;text-align:justify;">查看ES的所有插件</p> </td></tr></tbody></table> 
<p> GET _cat/plugins</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/df/67/laIBAgEQ_o.png"></p> 
<p> GET _cat/plugins?v</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/fc/23/GuSBfxJh_o.png"></p> 
<h3 id="5%E3%80%81%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE" style="text-align:justify;">5、修改数据</h3> 
<h4 id="5.1%E3%80%81%E4%BD%BF%E7%94%A8PUT%E4%BF%AE%E6%94%B9" style="margin-left:.0001pt;text-align:justify;">5.1、使用PUT修改</h4> 
<p style="margin-left:.0001pt;text-align:justify;">数据修改前</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/9b/72/097NHV3W_o.png"></p> 
<pre><code class="hljs">PUT /test1/type1/1
{
  "name": "李四",
  "age": 18
}</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9d/75/pmBi91Qg_o.png"></p> 
<p> 数据修改后</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/96/4f/oZUCQ1oP_o.png"></p> 
<h4 id="%C2%A05.2%E3%80%81%E4%BD%BF%E7%94%A8POST%E6%9C%80%E5%90%8E%E5%8A%A0%E4%B8%8A_update%E4%BF%AE%E6%94%B9"> 5.2、使用POST最后加上_update修改</h4> 
<pre><code class="hljs">POST /test1/type1/1/_update
{
  "doc":{
    "name":"赵六"
  }
}</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/98/24/Bh8tIOcM_o.png"></p> 
<p> 修改数据后</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a0/fb/RJcmYMZS_o.png"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;">两者之间的区别</p> 
<p style="margin-left:.0001pt;text-align:justify;">PUT修改会直接覆盖原来的数据，如果字段缺失，则会导致数据丢失</p> 
<p style="margin-left:.0001pt;text-align:justify;">POST+_update修改只会改变对应字段上的值</p> 
<p style="margin-left:.0001pt;text-align:justify;">例如：</p> 
<pre><code class="hljs">PUT /test1/type1/1

{

  "name": "李四"

}</code></pre> 
<p style="margin-left:.0001pt;text-align:justify;">则修改后的数据为</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/5f/ae/ge5F7qPy_o.png"></p> 
<p> 原来的age字段数据丢失了</p> 
<h3 id="6%E3%80%81%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3" style="text-align:justify;">6、删除文档</h3> 
<p style="margin-left:.0001pt;text-align:justify;">DELETE /索引名称/类型名称/文档id</p> 
<p style="margin-left:.0001pt;text-align:justify;">示例</p> 
<pre><code class="hljs">DELETE /test1/type1/1</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b7/f2/IdwIqHBV_o.png"></p> 
<h3 id="7%E3%80%81%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95" style="text-align:justify;">7、删除索引</h3> 
<p style="margin-left:.0001pt;text-align:justify;">DELETE  /索引名称</p> 
<pre><code class="hljs">DELETE /test1</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6b/4a/JC7h2atX_o.png"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;">DELETE /test1   删除test1这个索引</p> 
<p style="margin-left:.0001pt;text-align:justify;">DELETE /test1/type1/1  删除test下的id为1的文档</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">通过DETELE命令实现删除，根据请求来判断是删除索引还是删除文档记录</span></p> 
<h3 id="8%E3%80%81%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C" style="text-align:justify;">8、查询操作</h3> 
<p style="margin-left:.0001pt;text-align:justify;">GET 索引名称/类型名称/文档id（查询文档id的内容）</p> 
<pre><code class="hljs">GET test1/type1/1</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/66/c4/1bJf4Snt_o.png"></p> 
<p> POST  索引名称/_search(查询索引下的所有文档)</p> 
<pre><code class="hljs">POST test1/_search</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/20/86/pZAuVfWi_o.png"></p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8e39d1c872c4c6a9108cf9206616a173/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一、elasticsearch的简介与安装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3ccdc4dccfd653d938c33f946b6acf4e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">五、elasticsearch查询操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>