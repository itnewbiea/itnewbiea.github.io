<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>直接插入排序和希尔排序 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="直接插入排序和希尔排序" />
<meta property="og:description" content="文章目录 前言概述直接插入排序本质分析代码总结 希尔排序一组一组排序多组同时进行完整的代码 总结 前言 排序： 所谓排序，就是使一串记录，按照其中的某个或某些关键字的大小，递增或递减的排列起来的操作。
稳定性： 假定在待排序的记录序列中，存在多个具有相同的关键字的记录，若经过排序，这些记录的相对次序保持不变，即在原序列中，r[i]=r[j]，且r[i]在r[j]之前，而在排序后的序列中，r[i]仍在r[j]之前，则称这种排序算法是稳定的；否则称为不稳定的。
内部排序： 数据元素全部放在内存中的排序。
外部排序： 数据元素太多不能同时放在内存中，根据排序过程的要求不能在内外存之间移动数据的排序。
概述 直接插入排序是一种简单的插入排序法，其基本思想是：把待排序的记录按其关键码值的大小逐个插入到一个已经排好序的有序序列中，直到所有的记录插入完为止，得到一个新的有序序列 。
现实生活中，打扑克牌就是一个插入排序的例子
直接插入排序 本质 设一个待排序的数组，a[1]是一个有序的序列将后面的元素和已经排序好的元素进行比较。 图解：
分析 本篇文章，以从小到大的顺序排序为例
以其中一趟排序为例：
前面的4 5 6已经是排序好的数字，现在需要将元素3继续排序。
此时的end指向6，tmp指向的的是end&#43;1的位置，即3。
将end和tmp进行比较，显然3&lt;6，即tmp&lt;end
此时将tmp拿出来，将end移动到tmp位置
end继续往前移动，继续和tmp比较
此时依然tmp&lt;end，end还是需要往前移动，即end--
此时依然tmp&lt;end，end还是需要往前移动，即end--
此时end&lt;0，循环结束，无需再比较，直接将tmp元素插入到最前面。
一趟排序的代码：
while (end &gt;= 0) { if (tmp &lt; a[end]) { a[end &#43; 1] = a[end]; --end; } else { break; } } 因此一趟排序的终止条件为end&lt;0
要想完成所有元素排序，在一趟排序的基础上套一个for循环。从第一个元素开始遍历，end=i，循环结束的标志是i&lt;n-1，此时end指向的的是倒数第二个元素，tmp指向最后一个元素。
代码 # define _CRT_SECURE_NO_WARNINGS #include&lt;stdio.h&gt; #include&lt;assert.h&gt; void InsertSort(int*a,int n) { // [0,end] end&#43;1 for (int i = 0; i &lt; n - 1; i&#43;&#43;) { int end = i; int tmp = a[end &#43; 1]; while (end &gt;= 0) { if (tmp &lt; a[end]) { a[end &#43; 1] = a[end]; --end; } else { break; } } a[end &#43; 1] = tmp; } } //输出排序后的数组 void PrintArray(int* a, int n) { for (int i = 0; i &lt; n; i&#43;&#43;) { printf(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/bf96a9cbe5014faf7530d64e65297d25/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-26T21:56:32+08:00" />
<meta property="article:modified_time" content="2023-12-26T21:56:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">直接插入排序和希尔排序</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/81/77/1Ae71pdX_o.gif" alt="在这里插入图片描述"></p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_6" rel="nofollow">前言</a></li><li><a href="#_16" rel="nofollow">概述</a></li><li><a href="#_21" rel="nofollow">直接插入排序</a></li><li><ul><li><a href="#_22" rel="nofollow">本质</a></li><li><a href="#_30" rel="nofollow">分析</a></li><li><a href="#_78" rel="nofollow">代码</a></li><li><a href="#_130" rel="nofollow">总结</a></li></ul> 
  </li><li><a href="#_137" rel="nofollow">希尔排序</a></li><li><ul><li><a href="#_146" rel="nofollow">一组一组排序</a></li><li><a href="#_191" rel="nofollow">多组同时进行</a></li><li><a href="#_219" rel="nofollow">完整的代码</a></li></ul> 
  </li><li><a href="#_331" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_6"></a>前言</h2> 
<p><strong>排序：</strong> 所谓排序，就是使一串记录，按照其中的某个或某些关键字的大小，递增或递减的排列起来的操作。</p> 
<p><strong>稳定性：</strong> 假定在待排序的记录序列中，存在多个具有相同的关键字的记录，若经过排序，这些记录的相对次序保持不变，即在原序列中，<code>r[i]=r[j]</code>，且<code>r[i]</code>在<code>r[j]</code>之前，而在排序后的序列中，<code>r[i]</code>仍在<code>r[j]</code>之前，则称这种排序算法是稳定的；否则称为不稳定的。</p> 
<p><strong>内部排序：</strong> 数据元素全部放在内存中的排序。</p> 
<p><strong>外部排序：</strong> 数据元素太多不能同时放在内存中，根据排序过程的要求不能在内外存之间移动数据的排序。</p> 
<h2><a id="_16"></a>概述</h2> 
<p>直接插入排序是一种简单的插入排序法，其基本思想是：把待排序的记录按其关键码值的大小逐个插入到一个已经排好序的有序序列中，直到所有的记录插入完为止，得到一个新的有序序列 。</p> 
<p>现实生活中，打扑克牌就是一个插入排序的例子<br> <img src="https://images2.imgbox.com/8d/7a/L32ycLbM_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_21"></a>直接插入排序</h2> 
<h3><a id="_22"></a>本质</h3> 
<ol><li>设一个待排序的数组，<code>a[1]</code>是一个有序的序列</li><li>将后面的元素和已经排序好的元素进行比较。</li></ol> 
<p>图解：<br> <img src="https://images2.imgbox.com/95/80/bMt9eb7C_o.gif" alt="在这里插入图片描述"></p> 
<h3><a id="_30"></a>分析</h3> 
<p>本篇文章，以从小到大的顺序排序为例</p> 
<p>以其中一趟排序为例：</p> 
<p><img src="https://images2.imgbox.com/e1/62/cEQ2ylej_o.png" alt="在这里插入图片描述"></p> 
<p>前面的<code>4 5 6</code>已经是排序好的数字，现在需要将元素<code>3</code>继续排序。</p> 
<p>此时的<code>end</code>指向<code>6</code>，<code>tmp</code>指向的的是<code>end+1</code>的位置，即<code>3</code>。</p> 
<p>将<code>end</code>和<code>tmp</code>进行比较，显然<code>3&lt;6</code>，即<code>tmp&lt;end</code></p> 
<p>此时将<code>tmp</code>拿出来，将<code>end</code>移动到<code>tmp</code>位置</p> 
<p><code>end</code>继续往前移动，继续和<code>tmp</code>比较</p> 
<p><img src="https://images2.imgbox.com/fa/65/OluykqcU_o.png" alt="在这里插入图片描述"><br> 此时依然<code>tmp&lt;end</code>，<code>end</code>还是需要往前移动，即<code>end--</code></p> 
<p><img src="https://images2.imgbox.com/29/61/yirSo3oC_o.png" alt="在这里插入图片描述"><br> 此时依然<code>tmp&lt;end</code>，<code>end</code>还是需要往前移动，即<code>end--</code></p> 
<p><img src="https://images2.imgbox.com/06/4e/tOCMNMUb_o.png" alt="在这里插入图片描述"></p> 
<p>此时<code>end&lt;0</code>，循环结束，无需再比较，直接将<code>tmp</code>元素插入到最前面。</p> 
<p><img src="https://images2.imgbox.com/5b/9d/9vrjEwI4_o.png" alt="在这里插入图片描述"></p> 
<p>一趟排序的代码：</p> 
<pre><code class="prism language-c"><span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				a<span class="token punctuation">[</span>end <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token operator">--</span>end<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
</code></pre> 
<p>因此一趟排序的终止条件为<code>end&lt;0</code></p> 
<p>要想完成所有元素排序，在一趟排序的基础上套一个<code>for</code>循环。从第一个元素开始遍历，<code>end=i</code>，循环结束的标志是<code>i&lt;n-1</code>，此时<code>end</code>指向的的是倒数第二个元素，<code>tmp</code>指向最后一个元素。</p> 
<h3><a id="_78"></a>代码</h3> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;assert.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">InsertSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span>a<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// [0,end] end+1</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> end <span class="token operator">=</span> i<span class="token punctuation">;</span>
		<span class="token keyword">int</span> tmp <span class="token operator">=</span> a<span class="token punctuation">[</span>end <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				a<span class="token punctuation">[</span>end <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token operator">--</span>end<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		a<span class="token punctuation">[</span>end <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//输出排序后的数组</span>
<span class="token keyword">void</span> <span class="token function">PrintArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

	<span class="token comment">//测试</span>
	<span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">InsertSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">PrintArray</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_130"></a>总结</h3> 
<p>直接插入排序适用于较为有序的元素</p> 
<p>当元素较为有序时，时间复杂度为O（N）</p> 
<p>当元素为逆序时，时间复杂度为O（N<sup>2</sup>)</p> 
<h2><a id="_137"></a>希尔排序</h2> 
<p>希尔排序简单来说，可以分为两步，先进行分组排序，再进行插入排序。</p> 
<p>先将整个待排序序列分割成几组，从而减少参与直接插入排序的数据量，对每组放分别进行直接插入排序，然后增加每组的数据量，重新分组。这样当经过几次分组排序后，整个序列中的记录“基本有序”时，再对整个序列进行一次直接插入排序。</p> 
<h3><a id="_146"></a>一组一组排序</h3> 
<p>将待排序列<code>9 8 7 6 6 5 4 3 2 1 0</code>进行排序，先进行分组，小编以间隔3为一组，可得到以下分组方式：<br> <img src="https://images2.imgbox.com/33/a4/Kvkqchdz_o.png" alt="在这里插入图片描述"></p> 
<p>红色的为一组排序，蓝色的为一组排序，绿色为一组排序</p> 
<p>先对红色的一组排序，红色的序列为<code>9 6 4 1</code>，进行直接插入排序，即<code>1 4 6 9</code></p> 
<p>然后对蓝色的一组排序，蓝色的序列为<code>8 6 3 0</code>，进行直接插入排序，即<code>0 3 6 8</code></p> 
<p>最后对绿色的一组排序，绿色的序列为<code>7 5 2</code>，进行直接插入排序，即<code>2 5 7</code></p> 
<p>此时的整个序列的顺序为<code>1 0 2 4 3 5 6 6 7 9 8</code>，待排序序列是一个较为有序的序列，这时直接使用插入排序，降低了插入排序的复杂度</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> gap <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> gap<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n <span class="token operator">-</span> gap<span class="token punctuation">;</span> j <span class="token operator">=</span> j <span class="token operator">+</span> gap<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> end <span class="token operator">=</span> j<span class="token punctuation">;</span>
			<span class="token keyword">int</span> tmp <span class="token operator">=</span> a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
					end <span class="token operator">=</span> end <span class="token operator">-</span> gap<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>j == 0时，红色组进行排序</p> 
<p>j == 1时，蓝色组进行排序</p> 
<p>j == 2时，绿色组进行排序</p> 
<h3><a id="_191"></a>多组同时进行</h3> 
<p>多组同时进行，只需要一个for循环，不需要再嵌套循环。</p> 
<p>只需要将<code>j</code>一开始指向第一个待排序元素（是红色组的第一个元素），然后<code>j++</code>，指向第二个元素（蓝色组第一个元素），再<code>j++</code>，此时指向第三个元素（绿色组第一个元素）。</p> 
<pre><code class="prism language-c"><span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n <span class="token operator">-</span> gap<span class="token punctuation">;</span> j <span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> end <span class="token operator">=</span> j<span class="token punctuation">;</span>
			<span class="token keyword">int</span> tmp <span class="token operator">=</span> a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
					end <span class="token operator">=</span> end <span class="token operator">-</span> gap<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
</code></pre> 
<p>无论是一组一组进行还是多组同时进行，都只是一个预排序，并没有完成整个跑排序</p> 
<h3><a id="_219"></a>完整的代码</h3> 
<p><code>gap</code>越大，大的值可以更快的跳到后面，小的值可以更快的跳到前面，越不接近有序</p> 
<p><code>gap</code>越小，跳的越慢，但是越接近有序，如果<code>gap==1</code>就是直接插入排序</p> 
<p>那么，gap的值到底应该是多少？？这个问题官方也没有一个直接的解答，但是有一个操作，可以解决这个问题：<br> gap &gt; 1时是预排序，目的让他接近有序<br> gap == 1是直接插入排序，目的是让他有序</p> 
<p>首先将<code>gap</code>的置为待排序元素的大小<code>n</code>，让<code>gap</code>循环一次就除以2，无论<code>gap</code>的值是多少，最终都会等于1；或者<code>gap/3+1</code>，无论<code>gap</code>的值是多少，最终都会等于1。<code>gap==1</code>时，是直接插入排序，不会再进入循环。</p> 
<p>图解：<br> <img src="https://images2.imgbox.com/2e/63/M5FzoDgi_o.png" alt="在这里插入图片描述"></p> 
<p>ShellSort排序代码：</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">ShellSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> gap <span class="token operator">=</span> n<span class="token punctuation">;</span>

	<span class="token comment">// gap &gt; 1时是预排序，目的让他接近有序</span>
	<span class="token comment">// gap == 1是直接插入排序，目的是让他有序</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>gap <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//gap = gap / 2;</span>
		gap <span class="token operator">=</span> gap <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> gap<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> end <span class="token operator">=</span> i<span class="token punctuation">;</span>
			<span class="token keyword">int</span> tmp <span class="token operator">=</span> a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
					end <span class="token operator">-=</span> gap<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>	
</code></pre> 
<p>测试代码：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">ShellSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> gap <span class="token operator">=</span> n<span class="token punctuation">;</span>

	<span class="token comment">// gap &gt; 1时是预排序，目的让他接近有序</span>
	<span class="token comment">// gap == 1是直接插入排序，目的是让他有序</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>gap <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//gap = gap / 2;</span>
		gap <span class="token operator">=</span> gap <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> gap<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> end <span class="token operator">=</span> i<span class="token punctuation">;</span>
			<span class="token keyword">int</span> tmp <span class="token operator">=</span> a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
					end <span class="token operator">-=</span> gap<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			a<span class="token punctuation">[</span>end <span class="token operator">+</span> gap<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">PrintArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">ShellSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">PrintArray</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/03/zSlSC1Ht_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_331"></a>总结</h2> 
<p>希尔排序是在直接插入排序基础上完成的，希尔排序的时间复杂度的计算涉及数论，小编无法解读。直接排序的时间复杂度虽然是O（N<sup>2</sup>)，但是不要小瞧它，比冒泡排序还是优秀很多。在冒泡排序直接插入排序，希尔排序中，希尔排序还是很优秀的。</p> 
<p><img src="https://images2.imgbox.com/dd/11/25xTs4Nu_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1789db6b914920fb3b04086663a92f8e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Kubernetes(k8s)部署DolphinScheduler</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d71118030c739b25367d5e1b033bdb7c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Boot中如何优雅的重试调用第三方API？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>