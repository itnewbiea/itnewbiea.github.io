<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>云原生事件驱动框架(KnativeEventing) - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="云原生事件驱动框架(KnativeEventing)" />
<meta property="og:description" content="事件驱动是指事件在持续事务管理过程中，进行决策的一种策略。可以通过调动可用资源执行相关任务，从而解决不断出现的问题。通俗地说是当用户触发使用行为时对用户行为的响应。在 Serverless 场景下，事件驱动完美符合其设计初衷之一：按需付费。
1. Knative 模型 图：Knative 模型
Knative 主要包括两大部分：一是用于工作负载的 Serving，包括版本管理、灰度流量、自动弹性；二是 Eventing（事件驱动框架）。
核心玩家
Google；IBM；Pivotal；RedHat；SAP。 友商相关产品
Google CloudRun；IBM；Pivotal Function Service(PFC)；OpenShift。 2. 事件驱动框架：Eventing Knative 的 Eventing 提供了一个完整的事件模型，方便接入各个外部系统的事件。事件接入以后，通过 Cloud Event 标准在内部流转，结合 Broker-Trigger 模型进行事件处理。
从上图可以看到，Eventing 中包含三部分内容：
事件源**Broker-Trigger：**事件驱动模型，这个模型在早期 16 年的版本开始出现，其原理是 Trigger 订阅 Broker 信息并过滤，最后将事件发送到对应的服务进行消费。**消息系统：**在 Eventing 中每个 Broker 下面对应一个消息的系统，来承载对事件的整个流转。目前社区支持的消息系统包括 Kafka、NATS、Rocket MQ、Rabbit MQ 等。 3. 关键特性：事件规则 事件规则的核心是 Broker-Trigger 模型，它包含以下特性：
Trigger 的 filter 的作用是对 Event 进行内容过滤；支持对 Event 的 Attribute 以及 Data 的内容进行过滤；支持 Common Expression Language（CEL）表达式过滤；支持通过 SourceAndType（事件源类型）进行过滤。 二、事件驱动引擎-事件源 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/cc8697fca336008ad74d0bf2a668e05c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-11T02:00:56+08:00" />
<meta property="article:modified_time" content="2022-12-11T02:00:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">云原生事件驱动框架(KnativeEventing)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>事件驱动是指事件在持续事务管理过程中，进行决策的一种策略。可以通过调动可用资源执行相关任务，从而解决不断出现的问题。通俗地说是当用户触发使用行为时对用户行为的响应。在 Serverless 场景下，事件驱动完美符合其设计初衷之一：按需付费。</p> 
<h3>1. Knative 模型</h3> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d3/8e/b3MV9zD3_o.jpg"></p> 
<p>图：Knative 模型</p> 
<p>Knative 主要包括两大部分：一是用于工作负载的 Serving，包括版本管理、灰度流量、自动弹性；二是 Eventing（事件驱动框架）。</p> 
<ul><li> <p>核心玩家</p> 
  <ul><li>Google；</li><li>IBM；</li><li>Pivotal；</li><li>RedHat；</li><li>SAP。</li></ul></li><li> <p>友商相关产品</p> 
  <ul><li>Google CloudRun；</li><li>IBM；</li><li>Pivotal Function Service(PFC)；</li><li>OpenShift。</li></ul></li></ul> 
<h3>2. 事件驱动框架：Eventing</h3> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/87/d5/YPx3DBfP_o.jpg"></p> 
<p>Knative 的 Eventing 提供了一个完整的事件模型，方便接入各个外部系统的事件。事件接入以后，通过 Cloud Event 标准在内部流转，结合 Broker-Trigger 模型进行事件处理。</p> 
<p>从上图可以看到，Eventing 中包含三部分内容：</p> 
<ul><li><strong>事件源</strong></li><li>**Broker-Trigger：**事件驱动模型，这个模型在早期 16 年的版本开始出现，其原理是 Trigger 订阅 Broker 信息并过滤，最后将事件发送到对应的服务进行消费。</li><li>**消息系统：**在 Eventing 中每个 Broker 下面对应一个消息的系统，来承载对事件的整个流转。目前社区支持的消息系统包括 Kafka、NATS、Rocket MQ、Rabbit MQ 等。</li></ul> 
<h3>3. 关键特性：事件规则</h3> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/81/95/eo9hmFoV_o.jpg"></p> 
<p>事件规则的核心是 Broker-Trigger 模型，它包含以下特性：</p> 
<ul><li>Trigger 的 filter 的作用是对 Event 进行内容过滤；</li><li>支持对 Event 的 Attribute 以及 Data 的内容进行过滤；</li><li>支持 Common Expression Language（CEL）表达式过滤；</li><li>支持通过 SourceAndType（事件源类型）进行过滤。</li></ul> 
<h2>二、事件驱动引擎-事件源</h2> 
<h3>1. 事件源介绍</h3> 
<p>Knative 社区中提供了丰富的事件源接入，包括 Kafka、Github，也支持接入消息云产品的一些事件，比如 MNS、RocketMQ 等。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/78/aa/S1KlmaqI_o.jpg"></p> 
<p>如上图所示，接入事件源之后，可以通过 Broker-Trigger 模型请求相应的服务。这些服务包括一些具体场景，比如从源码构建镜像、自动化镜像发布、AI 音视频处理、定时任务等。所有的事件都需要这样的事件源来拉取，然后下发到 Eventing 整个事件流转过程。</p> 
<ul><li> <p>事件接入</p> 
  <ul><li>接入消息云产品事件源；</li><li>通过 MNS 接入更多云产品的事件。</li></ul></li><li> <p>事件处理</p> 
  <ul><li>Knative Eventing 内部实现事件的订阅、过滤和路由机制；</li><li>事件最终通过 Knative 管理的 Serverless 服务进行消费。</li></ul></li><li> <p>典型案例</p> 
  <ul><li>AI 音视频处理；</li><li>代码提交自动构建镜像。</li></ul></li></ul> 
<h3>2. RocketMQ 事件源</h3> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/5c/bb/DzGtv1Hc_o.jpg"></p> 
<p>消息队列 RocketMQ 版是阿里云基于 Apache RocketMQ 构建的低延迟、高并发、高可用、高可靠的分布式消息中间件。</p> 
<p>消息队列 RocketMQ 版既可为分布式应用系统提供异步解耦和削峰填谷的能力，同时也具备互联网应用所需的海量消息堆积、高吞吐、可靠重试等特性。</p> 
<p></p> 
<p>RocketMQSource 是 Knative 平台的 RocketMQ 事件源。其可以将 RocketMQ 集群的消息以 Cloud Event 的格式实时转发到 Knative 平台，是 Apahe RocketMQ 和 Knative 之间的连接器。</p> 
<h3>3. Kafka 事件源</h3> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/7e/41/AggipuET_o.jpg"></p> 
<p>消息队列 Kafka 版是阿里云基于 Apache Kafka 构建的高吞吐量、高可扩展性的分布式消息队列服务，广泛用于日志收集、监控数据聚合、流式数据处理、在线和离线分析等，是大数据生态中不可或缺的产品之一，阿里云提供全托管服务，用户无需部署运维，更专业、更可靠、更安全。</p> 
<h2>三、AI 事件驱动场景实践</h2> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/0c/f3/nFCf8euv_o.jpg"></p> 
<p>以具体场景为例，该案例是一个<strong>直播系统</strong>，系统每天都有海量的直播访问，访问量根据直播热度随时变化，弹性有波动，同时存在不定时的增量。客户的诉求，一是业务弹性波动，消息并发性比较高；二是互动实时响应，要求低延迟。</p> 
<p>为了满足对消息处理的<strong>弹性波动、高并发及低延迟</strong>的要求，客户选择阿里云的 Knative 服务进行数据的弹性处理。阿里云 Knative 完全契合了用户当前的诉求，并且在接入 K8s 标准之上，提供了基于事件和消息的弹性调度。</p> 
<p></p> 
<p>当应用实例数随着业务的波峰波谷进行扩容和缩容时，真正做到了<strong>按需使用、实时弹性</strong>的能力。整个过程完全自动化，减少业务开发人员在基础设施上的负担。在这个案例中，Knative 主要提供了三个能力：<strong>极致弹性、事件处理、开箱即用。</strong></p> 
<p>下面进行示例演示，演示内容主要有：</p> 
<ul><li>部署 Kafka 事件源</li><li>部署事件网关</li><li>部署服务</li><li>模拟事件处理</li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6f3482a64edf21caa33e58e3da0b3da0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Windows10 java环境变量的配置详细教程（Windows10 和Windows11）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/89c86a0b70ea648c0c65c39752a10797/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">实战讲解Spring定时任务：@Scheduled（图&#43;文&#43;源码）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>