<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>table表格自动循环滚动 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="table表格自动循环滚动" />
<meta property="og:description" content="实现效果：
自动循环滚动
功能点：
1. 当表格内容超出时，自动滚动，滚动到最后一条之后在从头滚动。
2. 鼠标移入表格中，停止滚动；移出后，继续滚动。
1.vue-seamless-scroll依赖的使用（不太推荐） &lt;vue-seamless-scroll :data=&#34;detailData&#34; :class-option=&#34;classOptionThree&#34; class=&#34;warp&#34;&gt; &lt;table style=&#34;width:100%; height:90%&#34; cellspacing=&#34;0&#34; cellpadding=&#34;0&#34;&gt; ...... &lt;/table&gt; &lt;/vue-seamless-scroll&gt; 局部引入或全局引入后，用组件包住要滚动的表格，并将表格数据传进去。
参数：detailData是表格数据数组，classOptionThree是滚动的参数，
computed: { classOptionThree() { return { step: 0.2, // 数值越大速度滚动越快 limitMoveNum: 2, // 开始无缝滚动的数据量 this.dataList.length hoverStop: true, // 是否开启鼠标悬停stop direction: 1, // 0向下 1向上 2向左 3向右 openWatch: true, // 开启数据实时监控刷新dom singleHeight: 0, // 单步运动停止的高度(默认值0是无缝不停止的滚动) direction =&gt; 0/1 singleWidth: 0, // 单步运动停止的宽度(默认值0是无缝不停止的滚动) direction =&gt; 2/3 waitTime: 1000, // 单步运动停止的时间(默认值1000ms) }; }, }, 这个实现效果是表头也会跟着滚动，要想表头不滚动很简单，利用两个表格组件，" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/730912742036edf6793b4a8833597b06/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-27T11:22:49+08:00" />
<meta property="article:modified_time" content="2023-11-27T11:22:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">table表格自动循环滚动</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>实现效果：</p> 
<div class="csdn-video-box"> 
 <iframe id="v8qMU06L-1701053593286" frameborder="0" src="https://live.csdn.net/v/embed/346587" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p>自动循环滚动</p> 
</div> 
<p><strong>功能点：</strong></p> 
<p><strong>1. 当表格内容超出时，自动滚动，滚动到最后一条之后在从头滚动。</strong></p> 
<p><strong>2. 鼠标移入表格中，停止滚动；移出后，继续滚动。</strong></p> 
<p></p> 
<h3><strong>1.vue-seamless-scroll依赖的使用（不太推荐）</strong></h3> 
<pre><code class="hljs">&lt;vue-seamless-scroll :data="detailData" :class-option="classOptionThree" class="warp"&gt;
    &lt;table style="width:100%; height:90%" cellspacing="0" cellpadding="0"&gt;
    ......                    
    &lt;/table&gt;
&lt;/vue-seamless-scroll&gt;</code></pre> 
<p>局部引入或全局引入后，用组件包住要滚动的表格，并将表格数据传进去。</p> 
<p>参数：detailData是表格数据数组，classOptionThree是滚动的参数，</p> 
<pre><code class="hljs">computed: {
    classOptionThree() {
      return {
        step: 0.2, // 数值越大速度滚动越快
        limitMoveNum: 2, // 开始无缝滚动的数据量 this.dataList.length
        hoverStop: true, // 是否开启鼠标悬停stop
        direction: 1, // 0向下 1向上 2向左 3向右
        openWatch: true, // 开启数据实时监控刷新dom
        singleHeight: 0, // 单步运动停止的高度(默认值0是无缝不停止的滚动) direction =&gt; 0/1
        singleWidth: 0, // 单步运动停止的宽度(默认值0是无缝不停止的滚动) direction =&gt; 2/3
        waitTime: 1000, // 单步运动停止的时间(默认值1000ms)
      };
    },
  },</code></pre> 
<p>这个实现效果是表头也会跟着滚动，要想表头不滚动很简单，利用两个表格组件，</p> 
<p> 1. 需要滚动的表格去掉表头，用<strong>vueSeamlessScroll </strong>组件包着，        </p> 
<p> 2. 将另一个表格放在<strong>vueSeamlessScroll </strong>组件外边，只显示表格标题。</p> 
<p>这个组件有个缺陷：数据更新的时候，dom却不会更新。为了解决这个问题，可以利用v-if的强制刷新。在数据有更新时先将<strong>upDateFlag</strong>设为false,过100毫秒再设为true。</p> 
<pre><code class="hljs">&lt;vue-seamless-scroll v-if='upDataFlag' :data="detailData" :class-option="classOptionThree" class="warp"&gt;
    &lt;table style="width:100%; height:90%" cellspacing="0" cellpadding="0"&gt;
    ......                    
    &lt;/table&gt;
&lt;/vue-seamless-scroll&gt;

this.upDataFlag=false
setTimeout(()=&gt;{
    this.upDataFlag=true
},100)</code></pre> 
<p>看似很完美，但是坑在业务场景了，数据刷新频率在10秒左右，也就意味着在业务场景中只会看到前几条数据，因为每次数据更新，都会从头滚动。</p> 
<h3>2.使用scrollTop属性（比较推荐这个）</h3> 
<pre><code class="hljs">&lt;template&gt;
  &lt;div class="infoBoxLeft"&gt;
    &lt;div class="tableBox"&gt;
      &lt;div class="table-header"&gt;
        &lt;div class="header-name" style="width: 1.32rem; text-align: center"&gt;
          时间
        &lt;/div&gt;
        &lt;div class="header-name" style="width: 1.32rem; text-align: center"&gt;
          企业名称
        &lt;/div&gt;
        &lt;div class="header-name" style="width: 1.32rem; text-align: center"&gt;
          业务类型
        &lt;/div&gt;
        &lt;div class="header-name" style="width: 1.32rem; text-align: center"&gt;
          金额（万元）
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;el-table
        ref="dealTable"
        :data="tableList"
        highlight-current-row
        @mouseenter.native="stopScroll"
        @mouseleave.native="startScorll"
        height="100%"
        :header-cell-style="{
          color: 'rgba(15, 54, 153, 1)',
          fontSize: '0.15rem',
        }"
        style="color: #131314; font-size: 0.14rem"
      &gt;
        &lt;el-table-column prop="dealTime" label=""  align="center" show-overflow-tooltip/&gt;
        &lt;el-table-column
          prop="mount"
          label=""
          align="center"
          show-overflow-tooltip
        /&gt;
        &lt;el-table-column
          prop="quarter"
          label=""
          align="center"
          show-overflow-tooltip
        /&gt;
        &lt;el-table-column
          prop="mount"
          label=""
          align="center"
          show-overflow-tooltip
        /&gt;
      &lt;/el-table&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { statisticalApplicationField, getDealInfo } from "./middleapi.js";
export default {
  components: {  },
  data() {
    return {
      tableList: [],
      rolltimer: null
    };
  },
  watch: {},
  created() {
    this.getDealDynamic();
  },
  mounted() {
    //要放在mounted里面数据加载完成后
    this.tableScroll(false);
  },
  methods: {
    //获取成交动态信息
    getDealDynamic() {
      getDealInfo().then(res =&gt; {
        if (res.data.status) {
          this.tableList = res.data.data.dealList;
        }
      });
    },
    //表格滚动开始
    startScorll() {
      this.tableScroll(false);
    },
    stopScroll() {
      this.tableScroll(true);
    },
    tableScroll(stop) {
      if (stop) {
        clearInterval(this.rolltimer);
        return;
      }
      const table = this.$refs.dealTable;
      const divData = table.bodyWrapper;
      this.rolltimer = setInterval(() =&gt; {
        divData.scrollTop += 1;
        if (
          divData.clientHeight + divData.scrollTop + 1 &gt;
          divData.scrollHeight
        ) {
          if (table.tableData.length &gt; 5) {
            divData.scrollTop = 0;
          }
        }
      }, 50);
    }
    //表格滚动结束
  }
};
&lt;/script&gt;

&lt;style lang="less" scoped&gt;
@font-face {
  font-family: "SourceHansCN";
  src: url("~@/assets/font/SourceHanSansCN-Regular.otf");
}
.infoBoxLeft {
  padding: 0.1rem 0;
  .tableBox {
    width: 535px;
    height: 330px;
    position: relative;
    .table-header {
      width: 535px;
      height: 48px;
      position: absolute;
      z-index: 1000;
      display: flex;
      flex-direction: row;
      line-height: 48px;
      .header-name {
        //font-family:Microsoft YaHei;
        color: #44dcff;
        font-size: 14px;
        font-family: "sHans", "Helvetica Neue", Helvetica, "PingFang SC",
          "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
      }
    }
    /deep/ .el-table--enable-row-hover .el-table__body tr:hover &gt; td {
      background-color: rgb(60, 171, 231);
      //border-radius:4px !important;
      box-shadow: 0px 2px 20px rgba(15, 95, 223, 0.4) !important;
      color: #ffffff !important;
    }
    /deep/.el-table__header-wrapper {
      height: 0.48rem;
    }
    /deep/.el-table .cell {
      color: #dee8ff;
      font-size: 14px;
      font-family: "sHans", "Helvetica Neue", Helvetica, "PingFang SC",
        "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
      background-color: transparent;
    }
    /deep/ .el-table tr,
    /deep/ .el-table th.el-table__cell,
    /deep/ .el-table,
    /deep/ .el-table__expanded-cell {
      background-color: transparent !important;
    }
    /deep/ .el-table::before {
      background-color: transparent !important;
    }
    /deep/ .el-table .el-table__cell {
      padding: 0.08rem 0;
    }
    /deep/ .el-table td.el-table__cell,
    /deep/ .el-table th.el-table__cell.is-leaf {
      border: 0;
    }
    /deep/.el-table__body-wrapper::-webkit-scrollbar {
      display: block;
      width: 2px !important; /*滚动条宽度*/
      height: 2px !important; /*滚动条高度*/
    }
    /*定义滚动条轨道 内阴影+圆角*/
    /deep/ .el-table__body-wrapper::-webkit-scrollbar-track {
      box-shadow: 0px 1px 3px #eff0f3 inset; /*滚动条的背景区域的内阴影*/
      // border-radius: 10px; /*滚动条的背景区域的圆角*/
      background-color: #f7f7f8 !important; /*滚动条的背景颜色*/
    }
    /*定义滑块 内阴影+圆角*/
    /deep/.el-table__body-wrapper::-webkit-scrollbar-thumb {
      box-shadow: 0px 1px 3px #8da2ef inset; /*滚动条的内阴影*/
      border-radius: 4px; /*滚动条的圆角*/
      background-color: #5d7ae6 !important; /*滚动条的背景颜色*/
      border: 1px solid #6688e5 !important;
    }
    /deep/ .el-table__body-wrapper {
      .el-table__body {
        width: 100% !important;
      }
    }
    /deep/ .el-table th.el-table__cell {
      //background-color: rgb(180, 218, 239);
    }
    //标题加下划线
    /deep/.el-table__header-wrapper,
    .el-table__footer-wrapper {
      border-bottom: none;
    }
  }
}
&lt;/style&gt;
</code></pre> 
<p>这里el-table里的el-table-column加with这个属性在后有一些浏览器会不适配，为了避免适配问题就不设置with这个属性了，加一个show-overflow-tooltip属性就可以。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7c616ffc12420a20d76756b76057a9ec/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringBoot中如何优雅地使用重试</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3af231dd5ede0b07244366753da16102/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Required request parameter ‘***‘ for method parameter type String is not present</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>