<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>git入门（5）-Git revert和git reset版本的回退 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="git入门（5）-Git revert和git reset版本的回退" />
<meta property="og:description" content="git revert 撤销 某次操作，此次操作之前和之后的commit和history都会保留，并且把这次撤销 作为一次最新的commit，如果需要彻底回退，只需要将本次commit * git revert HEAD 撤销前一次 commit * git revert HEAD^ 撤销前前一次 commit * git revert commit （比如：fa042ce57ebbe5bb9c8db709f719cec2c58ee7ff）撤销指定的版本，撤销也会作为一次commit进行保存。 * 这时候可以直接使用git push提交本次commit，但是在需要change-ID的场景下，往往会提示需要插入change-ID，按照提示完成插入change-ID的操作后，需要执行
git commit –amend 然后重新push到远程分支。
git维护的代码分为三个部分：当前工作目录，index，git仓库。
工作目录：git的工作目录是保存当前正在工作的文件所在的目录。如果在不同的分支之间切换可能会引起工作目录中文件的变化。
Index：git 索引是工作目录和git库目录之间的暂存区，staging area。
git仓库，就是commit之后的文件，所有的提交都保存于此。
以上可以通过使用git status查看时的文件进行理解：
命令中”Changes to be committed“中所列的内容是在Index中的内容，commit之后进入Git Directory。
命令中“Changed but not updated”中所列的内容是在Working Directory中的内容，add之后将进入Index。
命令中“Untracked files”中所列的内容是尚未被Git跟踪的内容，add之后进入Index。
基于上面的基本概念，我们可以比较快速的理解git reset的概念。
Git reset分为三种，
git reset –mixed 默认方式，不带任何参数的git reset,只保留源码，回退commit和index 信息。 实际在操作时，会提示： changes not staged for commit: use “git add …” to update what will be committed use “git checkout – …” xxxxxxxxxxx" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1626fdc920521358b6233e3a8a3c29a4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-03-02T10:28:44+08:00" />
<meta property="article:modified_time" content="2016-03-02T10:28:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">git入门（5）-Git revert和git reset版本的回退</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="git-revert-撤销-某次操作此次操作之前和之后的commit和history都会保留并且把这次撤销">git revert 撤销 某次操作，此次操作之前和之后的commit和history都会保留，并且把这次撤销</h2> 
<p>作为一次最新的commit，如果需要彻底回退，只需要将本次commit <br> * git revert HEAD 撤销前一次 commit <br> * git revert HEAD^ 撤销前前一次 commit <br> * git revert commit （比如：fa042ce57ebbe5bb9c8db709f719cec2c58ee7ff）撤销指定的版本，撤销也会作为一次commit进行保存。 <br> * 这时候可以直接使用git push提交本次commit，但是在需要change-ID的场景下，往往会提示需要插入change-ID，按照提示完成插入change-ID的操作后，需要执行</p> 
<h2 id="git-commit-amend">git commit –amend</h2> 
<p>然后重新push到远程分支。</p> 
<p><img src="https://images2.imgbox.com/59/65/alNGjAIb_o.jpg" alt="这里写图片描述" title=""></p> 
<p>git维护的代码分为三个部分：当前工作目录，index，git仓库。</p> 
<p>工作目录：git的工作目录是保存当前正在工作的文件所在的目录。如果在不同的分支之间切换可能会引起工作目录中文件的变化。</p> 
<p>Index：git 索引是工作目录和git库目录之间的暂存区，staging area。</p> 
<p>git仓库，就是commit之后的文件，所有的提交都保存于此。</p> 
<p>以上可以通过使用git status查看时的文件进行理解：</p> 
<p>命令中”Changes to be committed“中所列的内容是在Index中的内容，commit之后进入Git Directory。</p> 
<p>命令中“Changed but not updated”中所列的内容是在Working Directory中的内容，add之后将进入Index。</p> 
<p>命令中“Untracked files”中所列的内容是尚未被Git跟踪的内容，add之后进入Index。</p> 
<p>基于上面的基本概念，我们可以比较快速的理解git reset的概念。</p> 
<p>Git reset分为三种，</p> 
<h2 id="git-reset-mixed-默认方式不带任何参数的git-reset只保留源码回退commit和index-信息">git reset –mixed 默认方式，不带任何参数的git reset,只保留源码，回退commit和index 信息。</h2> 
<p>实际在操作时，会提示： <br> changes not staged for commit: <br> use “git add …” to update what will be committed <br> use “git checkout – …” xxxxxxxxxxx</p> 
<h2 id="git-reset-soft-回退到某个版本只回退了commit不会恢复index-file一级如果需要提交直接commit就好">git reset –soft 回退到某个版本，只回退了commit，不会恢复index file一级，如果需要提交直接commit就好。</h2> 
<p>changes to be commit: <br> use “git reset HEAD …” to unstage</p> 
<h2 id="git-reset-hard-回退到某个版本文件全部回退到当前版本不可恢复慎用">git reset –hard 回退到某个版本，文件全部回退到当前版本，不可恢复。慎用！！！</h2> 
<p>另外，我们可以通过git diff查看两次提交之间的差别。其中特别有用的一条命令是：</p> 
<p>git diff –cached […]：这个命令初学者不太常用，却非常有用，它表示查看已经add进入index但是尚未commit的内容同最后一次commit时的内容的差异。即index和git directory的差异。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f7d8a3cdeeb339fca53ca0390672ebcd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">git入门（1）--提交代码的一般步骤</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/809a163233730a7de63de9ebefc0c6f2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">git入门（6）-Git checkout 和git branch分支的创建和删除</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>