<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[ToolsChain] 关于cmake 编译时候编译器寻找路径问题，两种解决即使findpackage也提示找不到头文件或库的办法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[ToolsChain] 关于cmake 编译时候编译器寻找路径问题，两种解决即使findpackage也提示找不到头文件或库的办法" />
<meta property="og:description" content="写在前面 自动安装了anaconda 之后 （以及使用源码编译安装，apt安装等不同方式）安装库，我编写cmakelist的时候会经常找不到一些已经确认安装好的库，如有此篇记录，防止corona后遗症。
outline 继续修改cmakelist添加cmake编译路径 我的报错示例 我使用apt get方式安装的glog，
find了package 和add了头文件和库
依旧报相关错误，根本原因就是找不到对应的库导致的为定义符号问题。
修改cmakelist 既然我是aptget方式安装的，那么可以使用
dpkg-query -L libgoogle-glog-dev | grep libglog 找到头文件 和要使用的库（比如我这里用来动态库so）
Set(GLOG_INCLUDE_DIRS &#34;/usr/include/glog/&#34;) Set(GLOG_LIBRARIES &#34;/usr/lib/x86_64-linux-gnu/libglog.so&#34;) 重新编译问题解决
ps: 这里也看得出我问题之一就是有一个非常见的系统默认路径？？所以自己设定了
修改cmake查找路径 这个我理解和visual studio； matlab的设置大同小异
比如方法find package没有找的原因就是搜索路径下没有，如此加上去就好了。
cmake -LAH 可以看一下当前已经有的路径
两种方式，一种是只针对本项目，一种是全局的设置。见下：（注意是修改和expand两种）
cmake -DCMAKE_PREFIX_PATH=&#34;/usr/include/glog/:/usr/lib/x86_64-linux-gnu/&#34; 运行cmake命令时临时生效，不会影响到其他CMake配置
export CMAKE_PREFIX_PATH=&#34;/usr/include/glog/:/usr/lib/x86_64-linux-gnu/&#34; shell中执行这个export命令后，所有后续的cmake命令都会考虑到这个环境变量的值（我理解是本shell 懒得实验了）
export CMAKE_PREFIX_PATH=&#34;/usr/include/glog/:/usr/lib/x86_64-linux-gnu/:$CMAKE_PREFIX_PATH&#34; 这个是全局修改的expand模式（不删除）
网上还看到一种方式，可以针对一个cmakelist单独设置一个路径,也就是写在cmakelist里
set(CMAKE_PREFIX_PATH &#34;/path/to/package-config-file-directory&#34; ${CMAKE_PREFIX_PATH}) 感觉人类发明的东西还挺灵活的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/dc7346bcd1d36b271da3564fb388edc4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-22T17:24:14+08:00" />
<meta property="article:modified_time" content="2023-12-22T17:24:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[ToolsChain] 关于cmake 编译时候编译器寻找路径问题，两种解决即使findpackage也提示找不到头文件或库的办法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>写在前面</h2> 
<p>自动安装了anaconda 之后 （以及使用源码编译安装，apt安装等不同方式）安装库，我编写cmakelist的时候会经常找不到一些已经确认安装好的库，如有此篇记录，防止corona后遗症。</p> 
<h2><a id="outline_4"></a>outline</h2> 
<ul><li>继续修改cmakelist</li><li>添加cmake编译路径</li></ul> 
<h2><a id="_8"></a>我的报错示例</h2> 
<p><img src="https://images2.imgbox.com/6d/35/qxItuNm1_o.png" alt="在这里插入图片描述">我使用apt get方式安装的glog，<br> <img src="https://images2.imgbox.com/c0/2b/py1lyMwD_o.png" alt="在这里插入图片描述">find了package 和add了头文件和库<br> <img src="https://images2.imgbox.com/21/e9/4Z2bHC6L_o.png" alt="在这里插入图片描述"></p> 
<p>依旧报相关错误，根本原因就是找不到对应的库导致的为定义符号问题。</p> 
<h2><a id="cmakelist_18"></a>修改cmakelist</h2> 
<p>既然我是aptget方式安装的，那么可以使用</p> 
<pre><code class="prism language-bash">dpkg-query <span class="token parameter variable">-L</span> libgoogle-glog-dev <span class="token operator">|</span> <span class="token function">grep</span> libglog

</code></pre> 
<p>找到头文件 和要使用的库（比如我这里用来动态库so）</p> 
<pre><code class="prism language-xml">Set(GLOG_INCLUDE_DIRS "/usr/include/glog/")
Set(GLOG_LIBRARIES "/usr/lib/x86_64-linux-gnu/libglog.so")
</code></pre> 
<p>重新编译问题解决</p> 
<p><strong>ps: 这里也看得出我问题之一就是有一个非常见的系统默认路径？？所以自己设定了</strong><br> <img src="https://images2.imgbox.com/b6/53/sWF8d6eF_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="cmake_38"></a>修改cmake查找路径</h2> 
<p>这个我理解和visual studio； matlab的设置大同小异</p> 
<p>比如方法find package没有找的原因就是搜索路径下没有，如此加上去就好了。</p> 
<pre><code class="prism language-bash"> cmake <span class="token parameter variable">-LAH</span>
</code></pre> 
<p>可以看一下当前已经有的路径<br> 两种方式，一种是只针对本项目，一种是全局的设置。见下：（注意是修改和expand两种）</p> 
<pre><code class="prism language-bash">cmake <span class="token parameter variable">-DCMAKE_PREFIX_PATH</span><span class="token operator">=</span><span class="token string">"/usr/include/glog/:/usr/lib/x86_64-linux-gnu/"</span>
</code></pre> 
<p>运行cmake命令时临时生效，不会影响到其他CMake配置</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">CMAKE_PREFIX_PATH</span><span class="token operator">=</span><span class="token string">"/usr/include/glog/:/usr/lib/x86_64-linux-gnu/"</span>
</code></pre> 
<p>shell中执行这个export命令后，所有后续的cmake命令都会考虑到这个环境变量的值（我理解是本shell 懒得实验了）</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">CMAKE_PREFIX_PATH</span><span class="token operator">=</span><span class="token string">"/usr/include/glog/:/usr/lib/x86_64-linux-gnu/:<span class="token variable">$CMAKE_PREFIX_PATH</span>"</span>
</code></pre> 
<p>这个是全局修改的expand模式（不删除）</p> 
<p>网上还看到一种方式，可以针对一个cmakelist单独设置一个路径,也就是写在cmakelist里</p> 
<pre><code class="prism language-bash">set<span class="token punctuation">(</span>CMAKE_PREFIX_PATH <span class="token string">"/path/to/package-config-file-directory"</span> <span class="token variable">${CMAKE_PREFIX_PATH}</span><span class="token punctuation">)</span>
</code></pre> 
<p>感觉人类发明的东西还挺灵活的</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a53e89187df992104f7ed262ca5d8f22/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">帆软报表 - 数据显示为列表，但是数据仍全部显示在同一行上？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/089a9184950b239c9de7e61e7605f74b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">大创项目推荐 深度学习&#43;opencv&#43;python实现车道线检测 - 自动驾驶</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>