<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>较YOLOv7精度提升1.9%，54.7mAP的PP-YOLOE&#43;强势登场！ - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="较YOLOv7精度提升1.9%，54.7mAP的PP-YOLOE&#43;强势登场！" />
<meta property="og:description" content="精度54.7mAP，相较YOLOv7提升1.9%
L版本端到端推理速度42.2FPS
训练速度提升3.75倍
COCO数据集仅需20epoch即可达到50.0mAP
下游任务泛化性最高提升8%
10&#43;即开即用多端部署Demo
这究竟是什么模型，竟可达到以上效果？
答案是：PP-YOLOE&#43;
PP-YOLOE&#43;是基于飞桨云边一体高精度模型PP-YOLOE迭代优化升级的版本，具备以下特点：
超强性能
表格1：PP-YOLOE&#43;与PP-YOLOE性能对比
*备注：以上速度为端到端推理速度，包含数据解码&#43;数据预处理&#43;模型预测&#43;后处理计算；均在v100上测试所得，V100 &#43; CUDA11.2 &#43; cudnn8.2.0 &#43; TRT8.0.1.6
训练收敛加速：使用Objects365预训练模型，减少训练轮数，训练收敛速度提升3.75倍。
下游任务泛化性显著提升：在农业、夜间安防、工业等不同场景数据集上验证，精度最高提升8.1%。
高性能部署能力：本次升级PP-YOLOE&#43;支持多种部署方式，包括Python/C&#43;&#43;、Serving、ONNX Runtime、ONNX-TRT、INT8量化等部署能力。
超强性能与超高泛化性使得PP-YOLOE&#43;助力开发者在最短时间、最少量数据上能得到最优效果。
模型下载与完整教程请见PP-YOLOE&#43;：
https://github.com/PaddlePaddle/PaddleDetection/tree/release/2.5/configs/ppyoloe 回顾：PP-YOLOE
经典网络结构剖析
图1：PP-YOLOE网络结构
PP-YOLOE是一款高精度推理速度快的检测模型，包含骨干网络CSPRepResNet、特征融合CSPPAN、轻量级ET-Head和改进的动态匹配算法TAL（Task Alignment Learning）等模块， 并且根据不同的应用场景设计了一系列模型，即s/m/l/x。
PP-YOLOE的全系列模型从精度速度性价比来看达到工业界最优。具体来说，PP-YOLOE-l在COCO test-dev上AP可达51.4，在V100上速度可达78.1 FPS，使用TensorRT FP16进行推理，在V100上速度可达149FPS。
PP-YOLOE-l相较于PP-YOLOv2精度提升1.9AP、速度提升13.35%，相对于YOLOX-l精度提升1.3AP、速度提升24.96%。
此外，PP-YOLOE还避免使用诸如可变形卷积或者Matrix NMS之类的特殊算子，使PP-YOLOE全系列模型能轻松地部署在NVIDIA V100和T4这样的云端GPU架构、Jetson系列的移动端GPU和高性能的FPGA开发板上。
具体的结构包括以下三大部分：
可扩展的backbone和neck
我们设计了CSPRepResNet作为backbone, neck部分也采用了新设计的CSPPAN结构，backbone和neck均以我们提出的CSPRepResStage为基础模块。新的backbone和neck在增强模型表征能力的同时提升了模型的推理速度，并且可以通过width multiplier和depth multiplier灵活地配置模型的大小。
TAL（Task Alignment Learning）
为了进一步提升模型的精度，我们选用了TOOD [1]中的动态匹配算法策略TAL。TAL同时考虑分类和回归，使得匹配结果同时获得了最优的分类和定位精度。
Efficient Task-aligned head
检测head方面，我们在TOOD的T-head基础上进行改进。
首先，使用ESE block替换掉了原文中比较耗时的layer attention，使得模型在保证精度不变的同时提升了速度。
其次，由于T-head使用了可变形卷积算子，对硬件部署不友好，我们在分类分支使用shortcut替换cls-align模块，回归分支使用积分层替换掉含有可变形卷积的reg-align模块，以上两个改进使得head变得更为高效、简洁且易部署。
最终，我们进一步使用VFL（VariFocal Loss）替换BCE作为分类分支Loss，达到了速度精度双高的目的。
PP-YOLOE&#43;
算法升级深度解读
本次PP-YOLOE&#43;升级主要内容：
升级一：强大的Objects365预训练模型、升级版backbone等改动大幅提升PP-YOLOE系列模型的精度；
升级二：优化预处理，提升模型端到端推理速度，更贴近用户使用的真实场景；
升级三：完善多种环境下的推理部署能力。
精度
首先，我们使用Objects365大规模数据集对模型进行了预训练。Objects365数据集含有的数据量可达百万级，在大数据量下的训练可以使模型获得更强大的特征提取能力、更好的泛化能力，在下游任务上的训练可以达到更好的效果。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/541306a596facb971f194c8a531df560/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-17T21:25:18+08:00" />
<meta property="article:modified_time" content="2022-10-17T21:25:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">较YOLOv7精度提升1.9%，54.7mAP的PP-YOLOE&#43;强势登场！</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/f9/3f/GJXDBdwK_o.gif" alt="050f81b64229cecb3ecf822fba058247.gif"></p> 
 <p style="text-align:center;">精度54.7mAP，相较YOLOv7提升1.9%</p> 
 <p style="text-align:center;">L版本端到端推理速度42.2FPS</p> 
 <p style="text-align:center;">训练速度提升3.75倍</p> 
 <p style="text-align:center;">COCO数据集仅需20epoch即可达到50.0mAP</p> 
 <p style="text-align:center;">下游任务泛化性最高提升8%</p> 
 <p style="text-align:center;">10+即开即用多端部署Demo</p> 
 <p style="text-align:center;"><strong>这究竟是什么模型，竟可达到以上效果？</strong></p> 
 <p style="text-align:center;"><strong>答案是：</strong><strong>PP-YOLO</strong><strong>E+</strong></p> 
 <p>PP-YOLOE+是基于飞桨云边一体高精度模型PP-YOLOE迭代优化升级的版本，具备以下特点：</p> 
 <ul><li><p><strong>超强性能</strong></p></li></ul> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/8c/06/v4lKA2Wl_o.png" alt="1c93e1c6b54c403fdd7d4c405f7d5cce.png"></p> 
 <p style="text-align:center;">表格1：PP-YOLOE+与PP-YOLOE性能对比</p> 
 <p>*备注：以上速度为端到端推理速度，包含数据解码+数据预处理+模型预测+后处理计算；均在v100上测试所得，V100 + CUDA11.2 + cudnn8.2.0 + TRT8.0.1.6</p> 
 <ul><li><p><strong>训练收敛加速</strong>：使用Objects365预训练模型，减少训练轮数，训练收敛速度提升3.75倍。</p></li><li><p><strong>下游任务泛化性显著提升</strong>：在农业、夜间安防、工业等不同场景数据集上验证，精度最高提升8.1%。</p></li><li><p><strong>高性能部署能力</strong>：本次升级PP-YOLOE+支持多种部署方式，包括Python/C++、Serving、ONNX Runtime、ONNX-TRT、INT8量化等部署能力。</p></li></ul> 
 <p>超强性能与超高泛化性使得PP-YOLOE+助力开发者在<strong>最短时间</strong>、<strong>最少量数据</strong>上能得到<strong>最优效果</strong>。</p> 
 <p>模型下载与完整教程请见PP-YOLOE+：</p> 
 <p>https://github.com/PaddlePaddle/PaddleDetection/tree/release/2.5/configs/ppyoloe </p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/78/55/ykO7djXK_o.png" alt="fe8ec1ca463362df72726e24ae6eed5e.png"></p> 
 <p style="text-align:center;"></p> 
 <p><strong>回顾：PP-YOLOE</strong></p> 
 <p><strong>经典网络结构剖析</strong></p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/64/87/SLJbfCHO_o.png" alt="222be5abc47e86b4bd876f68917ada16.png"></p> 
 <p style="text-align:center;">图1：PP-YOLOE网络结构</p> 
 <p>PP-YOLOE是一款高精度推理速度快的检测模型，包含<strong>骨干网络CSPRepResNet</strong>、<strong>特征融合CSPPAN</strong>、<strong>轻量级ET-Head</strong>和改进的动态匹配算法TAL（Task Alignment Learning）等模块， 并且根据不同的应用场景设计了一系列模型，即s/m/l/x。</p> 
 <p>PP-YOLOE的全系列模型从精度速度性价比来看达到工业界最优。具体来说，<strong>PP-YOLOE-l</strong>在COCO test-dev上<strong>AP可达51.4</strong>，在V100上速度可达78.1 FPS，使用TensorRT FP16进行推理，在V100上速度可达<strong>149FPS</strong>。</p> 
 <p><strong>PP-YOLOE-l</strong>相较于<strong>PP-YOLOv2</strong>精度提升<strong>1.9AP</strong>、速度提升<strong>13.35%</strong>，相对于<strong>YOLOX-l</strong>精度提升<strong>1.3AP</strong>、速度提升<strong>24.96%</strong>。</p> 
 <p>此外，PP-YOLOE还避免使用诸如可变形卷积或者Matrix NMS之类的特殊算子，使PP-YOLOE全系列模型能轻松地部署在<strong>NVIDIA V100和T4这样的云端GPU架构、Jetson系列的移动端GPU和高性能的FPG</strong><strong>A开发板</strong><strong>上</strong><strong>。</strong></p> 
 <p>具体的结构包括以下三大部分：</p> 
 <p><strong></strong><strong>可扩展的backbone和neck</strong><strong></strong></p> 
 <p>我们设计了CSPRepResNet作为backbone, neck部分也采用了新设计的CSPPAN结构，backbone和neck均以我们提出的CSPRepResStage为基础模块。新的backbone和neck在增强模型表征能力的同时提升了模型的推理速度，并且可以通过width multiplier和depth multiplier灵活地配置模型的大小。</p> 
 <p><strong></strong><strong>TAL（Task Alignment Learning）</strong></p> 
 <p>为了进一步提升模型的精度，我们选用了TOOD [1]中的动态匹配算法策略TAL。TAL同时考虑分类和回归，使得匹配结果同时获得了最优的分类和定位精度。</p> 
 <p><strong></strong><strong>Efficient Task-aligned head</strong></p> 
 <p>检测head方面，我们在TOOD的T-head基础上进行改进。</p> 
 <p>首先，使用ESE block替换掉了原文中比较耗时的layer attention，使得模型在保证精度不变的同时提升了速度。</p> 
 <p>其次，由于T-head使用了可变形卷积算子，对硬件部署不友好，我们在分类分支使用shortcut替换cls-align模块，回归分支使用积分层替换掉含有可变形卷积的reg-align模块，以上两个改进使得head变得更为高效、简洁且易部署。</p> 
 <p>最终，我们进一步使用VFL（VariFocal Loss）替换BCE作为分类分支Loss，达到了速度精度双高的目的。</p> 
 <p style="text-align:center;"></p> 
 <p><strong>PP-YOLOE+</strong></p> 
 <p><strong>算法升级深度解读</strong></p> 
 <p>本次PP-YOLOE+升级主要内容：</p> 
 <ul><li><p><strong>升级一</strong>：强大的Objects365预训练模型、升级版backbone等改动大幅提升PP-YOLOE系列模型的精度；</p></li><li><p><strong>升级二</strong>：优化预处理，提升模型端到端推理速度，更贴近用户使用的真实场景；</p></li><li><p><strong>升级三</strong>：完善多种环境下的推理部署能力。</p></li></ul> 
 <p><strong>精度</strong></p> 
 <p>首先，我们使用Objects365大规模数据集对模型进行了预训练。Objects365数据集含有的数据量可达百万级，在大数据量下的训练可以使模型获得更强大的特征提取能力、更好的泛化能力，在下游任务上的训练可以达到更好的效果。</p> 
 <p>其次，我们在RepResBlock中的1x1卷积上增加了一个可学习的权重alpha，进一步提升了backbone的表征能力，获得了不错的效果提升。最后，我们调整了NMS的参数，在COCO上可以获得更好的评估精度。</p> 
 <p><strong></strong><strong>训练速度</strong></p> 
 <p>基于Objects365的预训练模型，将学习率调整为原始学习率的十分之一，训练的epoch从300降到了80，在大大缩短了训练时间的同时，获得了精度上的提升。</p> 
 <p><strong></strong><strong>端到端推理速度</strong></p> 
 <p>我们精简了预处理的计算方式，由于减均值除方差的方式在CPU上极其耗时，所以我们在优化时直接去除掉了这部分的预处理操作，使得PP-YOLOE+系列模型在端到端的速度上能获得40%以上的加速提升。</p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/7b/4e/aLVWe4JL_o.jpg" alt="88dc8a3178a52fb3deb9ccac6cbd8a59.jpeg"></p> 
 <p style="text-align:center;">图2：PP-YOLOE+模型效果</p> 
 <p><strong>下游泛化性增强</strong></p> 
 <p>我们验证了PP-YOLOE+模型强大的泛化能力，在农业、低光、工业等不同场景下游任务检测效果稳定提升。</p> 
 <p>农业数据集采用Embrapa WGISD，该数据集用于葡萄栽培中基于图像的监测和现场机器人技术，提供了来自5种不同葡萄品种的实地实例。</p> 
 <ul><li><p><strong>链接</strong></p></li></ul> 
 <p>https://github.com/thsant/wgisd</p> 
 <p>低光数据集使用ExDark，该数据集是一个专门在低光照环境下拍摄出针对低光目标检测的数据集，包括从极低光环境到暮光环境等10种不同光照条件下的图片。</p> 
 <ul><li><p><strong>链接</strong></p></li></ul> 
 <p>https://github.com/cs-chan/Exclusively-Dark-Image-Dataset</p> 
 <p>工业数据集使用PKU-Market-PCB，该数据集用于印刷电路板（PCB）的瑕疵检测，提供了6种常见的PCB缺陷。</p> 
 <ul><li><p><strong>链接</strong></p></li></ul> 
 <p>https://robotics.pkusz.edu.cn/resources/dataset/</p> 
 <p><strong>精度</strong></p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/23/9d/biOYlZ44_o.png" alt="899b4300ef9b4a4c4b5bd8b229f50085.png"></p> 
 <p style="text-align:center;">表格2：PP-YOLOE+在不同场景数据集的效果<br></p> 
 <p><strong>可视化效果</strong></p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/15/ab/L8gSlZmj_o.png" alt="0a9db97f03e3e249761d1e4fa40726a4.png"></p> 
 <p style="text-align:center;">图3：可视化效果</p> 
 <p><strong></strong><strong>全面升级的部署支持</strong></p> 
 <p>在推理部署方面，本次升级给大家带来了较为完备的部署能力，包括Python、C++、Serving、ONNX Runtime、ONNX-TRT、INT8量化等部署能力。具体的使用文档可以到PaddleDetection的GitHub上获取。</p> 
 <ul><li><p><strong>文档链接</strong></p></li></ul> 
 <p>https://github.com/PaddlePaddle/PaddleDetection/tree/release/2.5/deploy</p> 
 <p>总的来说，PP-YOLOE+希望真正的站在用户的角度去解决<strong>训练慢</strong>、<strong>泛化性差</strong>、<strong>部署难</strong>的问题。通过使用大规模数据集Objects365对模型进行预训练，使得模型在下游任务上表现<strong>更鲁棒</strong>、<strong>泛化能力更强</strong>。通过优化推理过程，完善推理链条，使得PP-YOLOE+不但在端到端预测速度上得到极大的提升，还拓展了Python、C++、Serving、ONNX Runtime以及TensorRT等多种推理环境下的部署能力，提升模型可扩展性，从而提升用户的使用体验。</p> 
 <p style="text-align:center;"></p> 
 <p><strong>飞桨端到端开发套件</strong></p> 
 <p><strong>PaddleDetection</strong><br></p> 
 <p>PaddleDetection为基于飞桨的端到端目标检测套件，内置<strong>30+模</strong><strong>型算法</strong>及<strong>300+预训练模型</strong>，覆盖<strong>目标检测</strong>、<strong>实例分割</strong>、<strong>跟踪</strong>、<strong>关键点检测</strong>等方向，其中包括服务器端和移动端<strong>高精度</strong>、<strong>轻量化产业级SOTA模型</strong>、<strong>冠军方案和学术前沿算法</strong>，并提供即插即用的<strong>垂类场景预训练模型</strong>，<strong>覆盖人</strong>、<strong>车等20+场景</strong>，提供配置化的网络模块组件、十余种数据增强策略和损失函数等高阶优化支持和多种部署方案，在打通数据处理、模型开发、训练、压缩、部署全流程的基础上，提供丰富的案例及教程，加速算法产业落地应用。</p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/5d/6f/3KjGHuWH_o.png" alt="3626edfc1a60fee333effcd745c67b8f.gif"></p> 
 <p style="text-align:center;">图4：PaddleDetection全景图</p> 
 <ul><li><p><strong>项目链接</strong></p></li></ul> 
 <p>https://github.com/PaddlePaddle/PaddleDetection</p> 
 <ul><li><p><strong>参考文献</strong></p></li></ul> 
 <p>[1] Feng C , Zhong Y , Gao Y , et al. TOOD: Task-aligned One-stage Object Detection[C]// 2021</p> 
 <p style="text-align:center;"></p> 
 <p><strong>直播预告</strong></p> 
 <p>10月18日晚20:30，飞桨PP-YOLO系列作者——百度高级研发工程师将带来<strong>目标检测YOLO全系列算法详解</strong>，深度解析<strong>每一代YOLO算法的特点</strong>，并重点介绍<strong>PP-YOLO系列的研发心得与技术特性</strong>，千万不可错过！</p> 
 <p>扫码报名入群即可获得YOLO全系列飞桨高性能实现算法合集以及5+端到端目标检测实战项目源码，快来报名吧！</p> 
 <p style="text-align:center;"><strong>扫码报名直播课，加入技术交流群</strong></p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/13/95/GbLvVXB2_o.png" alt="160b00677bbff65936aa2dd5d6649b6f.jpeg"></p> 
 <p style="text-align:center;"><strong>更多精彩抢先看！</strong><br></p> 
 <p style="text-align:center;"><strong>入群福利</strong></p> 
 <p><strong>获取重磅学习大礼包</strong></p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/04/35/JUf0w5rL_o.jpg" alt="f3f7026c24907e45b21a0682846858d5.jpeg"></p> 
 <p><strong>获取10月18日直播课程链接</strong></p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/61/45/4ae59eTX_o.png" alt="0225119e7973cab777e078d0af766588.jpeg"></p> 
 <p><img src="https://images2.imgbox.com/14/b2/WJY0wGPq_o.gif" alt="4719948da05ef50a07f08f7105efdee1.gif"></p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/be107537ff4559c8c715e6ada673e67d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">双系统卸载ubuntu</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3ace546076ab9ab8198299b215eebabf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">unity urp 实现丝绸渲染</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>