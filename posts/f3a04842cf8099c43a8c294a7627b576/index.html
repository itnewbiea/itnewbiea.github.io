<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>js 对象操作赋值操作 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="js 对象操作赋值操作" />
<meta property="og:description" content="问题：当我们在项目需要 复制一个对象到另一个对象并且 被复制的对象不能受复制后的对象的影响
我先总结下 我们哪些方法可以复制对象：
// 直接赋值 var obj1 = { a: 1 }; var obj2 = obj1; console.log(obj2); // { a: 1 } // 通过 Object.assign() 这个属性来进行复制 var obj = { a: 1 }; var obj2 = Object.assign({}, obj); console.log(obj2); // { a: 1 } // 通过 for in 循环赋值 var obj1={ a: 1, b: { c: 2 }, c: 0 } var obj2={} for( var key in obj1 ){ obj2[key]=obj[key] } console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f3a04842cf8099c43a8c294a7627b576/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-04-18T13:41:00+08:00" />
<meta property="article:modified_time" content="2019-04-18T13:41:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">js 对象操作赋值操作</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>问题：当我们在项目需要 复制一个对象到另一个对象并且  被复制的对象不能受复制后的对象的影响</p> 
 <p>我先总结下 我们哪些方法可以复制对象：</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#008000;">//</span><span style="color:#008000;"> 直接赋值</span>
 
<span style="color:#0000ff;">var</span> obj1 = { a: 1<span style="color:#000000;"> };
</span><span style="color:#0000ff;">var</span> obj2 =<span style="color:#000000;"> obj1;
 
console.log(obj2); </span><span style="color:#008000;">//</span><span style="color:#008000;"> { a: 1 }</span>
 
<span style="color:#008000;">//</span><span style="color:#008000;"> 通过 Object.assign() 这个属性来进行复制</span>
 
<span style="color:#0000ff;">var</span> obj = { a: 1<span style="color:#000000;"> };
</span><span style="color:#0000ff;">var</span> obj2 =<span style="color:#000000;"> Object.assign({}, obj);
 
console.log(obj2); </span><span style="color:#008000;">//</span><span style="color:#008000;"> { a: 1 }</span>
 
<span style="color:#008000;">//</span><span style="color:#008000;"> 通过 for in 循环赋值</span>
 
<span style="color:#0000ff;">var</span> obj1={ a: 1, b: { c: 2 }, c: 0<span style="color:#000000;"> }
</span><span style="color:#0000ff;">var</span> obj2=<span style="color:#000000;">{}
</span><span style="color:#0000ff;">for</span>( <span style="color:#0000ff;">var</span> key <span style="color:#0000ff;">in</span><span style="color:#000000;"> obj1 ){
    obj2[key]</span>=<span style="color:#000000;">obj[key]
}
 
console.log(obj2); </span><span style="color:#008000;">//</span><span style="color:#008000;"> { a: 1, b: { c: 2 }, c: 0 }</span></pre> 
 </div> 
 <p>以上的方法中 都可以把一个对象的键值赋值给另一个对象（但是我们可以测试出来obj2修改他的键值，obj1的键值也会被修改），</p> 
 <p>这就跟我家的钥匙刚开始是一把钥匙，然后我到配钥匙的地方配了一把一模一样的钥匙，那么我的这把原来的钥匙可以开我家的门，拿我家的东西，那么配的那把钥匙，也可以打开我家的门，拿走我家的东西。</p> 
 <p>　其实我们想做的是，我们心买了一个房子，只是房子里的东西摆设跟我原来的房子是一模一样的，唯独不一样的就是，我原来家的钥匙只能开原来家的门，新家的钥匙只能开新家的门，虽然两个房子里的东西是一模一样的，但是都是没有实际的关联关系。那么这样我门需要怎么做呢。</p> 
 <p>　我们可以先看看下面的这个方法：</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#008000;">//</span><span style="color:#008000;"> 使用 Object.assign() 方法复制对象</span>
let obj1 = { a: 0 , b: { c: 0<span style="color:#000000;">}};
  let obj2 </span>=<span style="color:#000000;"> Object.assign({}, obj1);
  console.log(JSON.stringify(obj2)); </span><span style="color:#008000;">//</span><span style="color:#008000;"> { a: 0, b: { c: 0}}</span>
<span style="color:#000000;">   
  obj1.a </span>= 1<span style="color:#000000;">;
  console.log(JSON.stringify(obj1)); </span><span style="color:#008000;">//</span><span style="color:#008000;"> { a: 1, b: { c: 0}}</span>
  console.log(JSON.stringify(obj2)); <span style="color:#008000;">//</span><span style="color:#008000;"> { a: 0, b: { c: 0}}</span>
<span style="color:#000000;">   
  obj2.a </span>= 2<span style="color:#000000;">;
  console.log(JSON.stringify(obj1)); </span><span style="color:#008000;">//</span><span style="color:#008000;"> { a: 1, b: { c: 0}}</span>
  console.log(JSON.stringify(obj2)); <span style="color:#008000;">//</span><span style="color:#008000;"> { a: 2, b: { c: 0}}</span>
<span style="color:#000000;">   
  obj2.b.c </span>= 3<span style="color:#000000;">;
  console.log(JSON.stringify(obj1)); </span><span style="color:#008000;">//</span><span style="color:#008000;"> { a: 1, b: { c: 3}}</span>
  console.log(JSON.stringify(obj2)); <span style="color:#008000;">//</span><span style="color:#008000;"> { a: 2, b: { c: 3}}</span></pre> 
 </div> 
 <p>我们可以看到上面 Object.assign() 的这个方法虽然可以复制我第一层的对象值，并且当我obj2修改第一层的数据时，obj1不会受到影响。</p> 
 <p>　　但是我们在修改obj2 里 b 对象里的c的值得时候，这个时候 obj1 里的 b 对象里的 c 的值也发生了改变，这就说明了，Object.assign()这个方法不是深层的复制对象，只是让对象里第一层的数据没有了关联性，但是对象内的对象则跟被复制的对象有着关联性的。那么我们其实可以想象，怎么才能让他们完全没有关联性没呢。</p> 
 <p>　　字符串类型 和 对象类型 肯定是没有关联性的 ，因为它们的类型都不一样，肯定是没有可比性和关联性的。 有了这样的想法我觉得我们就有办法决绝这个问题了；</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#008000;">//</span><span style="color:#008000;"> 这个最简单暴力的处理 两个对象的关联性的问题</span>
<span style="color:#000000;"> 
  obj1 </span>= { a: 0 , b: { c: 0<span style="color:#000000;">}};
  let obj3 </span>=<span style="color:#000000;"> JSON.parse(JSON.stringify(obj1));
  obj1.a </span>= 4<span style="color:#000000;">;
  obj1.b.c </span>= 4<span style="color:#000000;">;
  console.log(JSON.stringify(obj3)); </span><span style="color:#008000;">//</span><span style="color:#008000;"> { a: 0, b: { c: 0}}</span></pre> 
 </div> 
 <p>上面的代码已经可以体现出来我们刚才的一个假设，我们先把obj1 转成了字符串类型， 这样他就失去了对象的属性和一切的特性，然后我们再把它转成一个对象类型，这样我们心生成的对象是通过字符串转换过来的，已经是一个新的对象，然后再赋值给obj2 ，这样就相当于，我把我原来家的布置等东西，用设计稿的方式展现出来，然后我们又买了一个新家，按着原来的设计方式重构了出来，这样两个房子的内饰是一模一样的，但是门的钥匙不一样，这样就失去了以前的关联性。</p> 
 <p>以上的方法可以封装成方法方便使用</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">var</span> <span style="color:#0000ff;">function</span> cloneObjectFn (obj){ <span style="color:#008000;">//</span><span style="color:#008000;"> 对象复制</span>
    <span style="color:#0000ff;">return</span><span style="color:#000000;"> JSON.parse(JSON.stringify(obj))
}
 
</span><span style="color:#0000ff;">var</span> obj1={a:2,b{c:0<span style="color:#000000;">}}
</span><span style="color:#0000ff;">var</span> obj2=<span style="color:#000000;">cloneObjectFn(obj1)
console.log(obj2)    </span><span style="color:#008000;">//</span><span style="color:#008000;"> {a:2,b{c:0}}</span></pre> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/xieli26/p/10729110.html</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a3da79c2eca7bb3f15cb7458faedc25a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">简单的登录事件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e36d21d9adf311917573257c7d5de88f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">go语言有哪些好的debug方法？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>