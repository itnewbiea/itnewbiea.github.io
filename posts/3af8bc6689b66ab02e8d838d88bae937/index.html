<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android开发环境搭建&#43;AS常用功能指导 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android开发环境搭建&#43;AS常用功能指导" />
<meta property="og:description" content="AndroidStudio 已经迭代了好几个版本，功能已稳定，各种配置的方法在搜索引擎里基本都能找到，这里做一些简单汇总整理。
一、AndroidStudio 开发环境搭建 1.1 简单介绍AndroidStudio 它是 Google 推出的功能强大的 android 开发工具，支持 Java 和 Koltin 语言。
官网的介绍：
Android Studio provides the fastest tools for building apps on every type of Android device.
1.2 下载AndroidStudio 去官网 https://developer.android.google.cn/studio 下载最新版本。
1.3 官网说明的新功能简单介绍 快速预览：xml编写的UI页面在预览页快速看到效果、ConstraintLayout 的可视化操作等；apk 分析：检查清单文件、资源和DEX文件等；模拟器：快速的模拟器、小改动可以直接 Apply Changes ；代码编辑：智能代码编辑器，主要体现在代码提示；灵活构建系统：由Gradle提供支持，androidstudio的构建系统允许您定制构建，以便从单个项目为不同设备生成多个构建变体，主要体现在多渠道打包；实时分析器：实时分析app内存情况； 1.4 开始安装 安装的时候一直下一步即可，在选择 安装路径 和 SDK 的时候，默认放在C盘 ，建议放在D盘、E盘等，防止占用太多 C 盘空间，导致电脑卡顿。
详细步骤可参考 https://www.jianshu.com/p/492111393275
二、AS工程初步了解 2.1 新建一个 HelloWorld 工程 首次安装点击 Create a new Android studio Project ，非首次则执行 File – New – New Project" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/3af8bc6689b66ab02e8d838d88bae937/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-21T10:22:29+08:00" />
<meta property="article:modified_time" content="2023-08-21T10:22:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android开发环境搭建&#43;AS常用功能指导</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>AndroidStudio 已经迭代了好几个版本，功能已稳定，各种配置的方法在搜索引擎里基本都能找到，这里做一些简单汇总整理。</p> 
<h2><a id="AndroidStudio__1"></a>一、AndroidStudio 开发环境搭建</h2> 
<h3><a id="11_AndroidStudio_2"></a>1.1 简单介绍AndroidStudio</h3> 
<p>它是 Google 推出的功能强大的 android 开发工具，支持 Java 和 Koltin 语言。<br> 官网的介绍：<br> Android Studio provides the <strong>fastest tools</strong> for building apps on every type of Android device.</p> 
<h3><a id="12__AndroidStudio_6"></a>1.2 下载AndroidStudio</h3> 
<p>去官网 <a href="https://developer.android.google.cn/studio" rel="nofollow">https://developer.android.google.cn/studio</a> 下载最新版本。</p> 
<h3><a id="13__8"></a>1.3 官网说明的新功能简单介绍</h3> 
<ul><li>快速预览：xml编写的UI页面在预览页快速看到效果、<code>ConstraintLayout</code> 的可视化操作等；</li><li>apk 分析：检查清单文件、资源和DEX文件等；</li><li>模拟器：快速的模拟器、小改动可以直接 Apply Changes ；</li><li>代码编辑：智能代码编辑器，主要体现在代码提示；</li><li>灵活构建系统：由Gradle提供支持，androidstudio的构建系统允许您定制构建，以便从单个项目为不同设备生成多个构建变体，主要体现在多渠道打包；</li><li>实时分析器：实时分析app内存情况；</li></ul> 
<h3><a id="14__15"></a>1.4 开始安装</h3> 
<p>安装的时候一直下一步即可，在选择 安装路径 和 SDK 的时候，默认放在C盘 ，建议放在D盘、E盘等，防止占用太多 C 盘空间，导致电脑卡顿。<br> 详细步骤可参考 <a href="https://www.jianshu.com/p/492111393275" rel="nofollow">https://www.jianshu.com/p/492111393275</a><br> <img src="https://images2.imgbox.com/6d/50/sdDLlyq7_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="AS_19"></a>二、AS工程初步了解</h2> 
<h3><a id="21__HelloWorld__20"></a>2.1 新建一个 HelloWorld 工程</h3> 
<p>首次安装点击 <strong>Create a new Android studio Project</strong> ，非首次则执行 File – New – New Project<br> <img src="https://images2.imgbox.com/ab/0b/QLjxwIlx_o.png" alt="在这里插入图片描述"><br> 写上工程名、包名、选择存储路径等，<br> <img src="https://images2.imgbox.com/d7/6f/kr9x8P4Y_o.png" alt="在这里插入图片描述"></p> 
<p>然后默认得到一个 Hello World 工程。</p> 
<h3><a id="22__27"></a>2.2 目录介绍</h3> 
<ul><li>project 视图，就是磁盘目录的形式，我们重点关注 <code>app/src/main</code> 目录，也就是源代码目录；<img src="https://images2.imgbox.com/b2/a1/8trtABPX_o.png" alt="在这里插入图片描述"></li><li>app 视图，就只显示源码和编译配置相关的东西 <img src="https://images2.imgbox.com/89/43/wH0jys0v_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="23_%09httpsimgblogcsdnimgcn20200727140430643pngxossprocessimagewatermarktype_ZmFuZ3poZW5naGVpdGkshadow_10text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDAyMTMzNAsize_16color_FFFFFFt_70_30"></a>2.3 常用工具栏说明 <img src="https://images2.imgbox.com/5a/41/LykuIeEb_o.png" alt="在这里插入图片描述"></h3> 
<ul><li>Project 栏：查看项目整体架构、编译相关配置等；</li><li>Structure 栏：查看类结构，方便找到类里的方法；</li><li>Build Variants 栏：选择编译的版本， debug 或者 release 版本；</li><li>Terminal 栏：命令行形式显示工程目录，在这里执行 <code>adb shell</code> 就可以使用 adb 调试了；</li><li>Logcat 栏：adb 连接之后查看应用 log ，连接平台后，也可以看到系统 log ；</li><li>Gradle 栏：使用 gradle 执行 build 、clean 等操作 ；</li><li>Event Log 栏：项目编译的 log 在这里显示；</li><li>Layout Inspector 栏：adb 连接后可查看应用 layout 布局信息；</li></ul> 
<h2><a id="AS_39"></a>三、AS配置修改</h2> 
<h3><a id="31__40"></a>3.1 修改主题和面板字体</h3> 
<p>File – Settings – Appearance<br> <img src="https://images2.imgbox.com/bb/56/g27Yf5RV_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32__43"></a>3.2 修改代码字体</h3> 
<p>File – Settings – Editor – Font<img src="https://images2.imgbox.com/9a/f3/P6XYatDr_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33__UTF8_httpsimgblogcsdnimgcn20200725154434641pngxossprocessimagewatermarktype_ZmFuZ3poZW5naGVpdGkshadow_10text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDAyMTMzNAsize_16color_FFFFFFt_70_45"></a>3.3 修改文件格式为 UTF-8 ，方便显示中文<img src="https://images2.imgbox.com/8c/a3/rA645Pww_o.png" alt="在这里插入图片描述"></h3> 
<p>ps：代码文件格式一般保存为 <strong>UTF-8 无BOM</strong> 格式<br> <img src="https://images2.imgbox.com/ab/08/gBERLYI8_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="34_SDK_48"></a>3.4 修改SDK路径</h3> 
<p>SDK 默认放在C盘，可修改放到其他盘。<br> <img src="https://images2.imgbox.com/7e/37/sV3uRtZL_o.png" alt="在这里插入图片描述"></p> 
<ul><li>SDK Platforms 栏，可下载多个版本备用，方便跳转、查看Android 源码，示例：<br> <img src="https://images2.imgbox.com/0f/ca/CgnnlPkx_o.png" alt="在这里插入图片描述"></li><li>SDK Tools 栏，主要下载SDK相关工具， CMake 、NDK 相关的，按需下载即可；<br> <img src="https://images2.imgbox.com/be/9b/30k0CAhE_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="35__55"></a>3.5 分配内存</h3> 
<p>找到AS安装路径，如 D:\Android\Android Studio\bin ，<br> 32位机器打开 studio.exe.vmoptions 文件 ，<br> 64位机器打开 <strong>studio64.exe.vmoptions</strong> 文件，修改 Xms 、Xmx的值。<br> 其中 -<strong>Xms</strong> 是JVM启动的起始堆内存，堆内存是分配给对象的内存。<br> 其中 -<strong>Xmx</strong> 是 Java 虚拟机启动时的参数，用于限制最大堆内存。所以这里也需要更改。<br> 这个修改可根据自己电脑的实际情况进行分配。<br> <img src="https://images2.imgbox.com/99/cf/TjXIrctZ_o.png" alt="在这里插入图片描述"><br> 直接在AS里修改也可以，<br> <img src="https://images2.imgbox.com/42/de/JqZ8yBIv_o.png" alt="在这里插入图片描述"><br> 重启后生效。</p> 
<h3><a id="36_ToolBar_66"></a>3.6 自定义ToolBar</h3> 
<p>如下图几个选中项，是我自己添加的。<br> <img src="https://images2.imgbox.com/f7/2c/DSrd1vvW_o.png" alt="在这里插入图片描述"></p> 
<p>新增按钮、分隔线、为新按钮添加图标等<br> <img src="https://images2.imgbox.com/55/ac/l2Gc5l8I_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="37__74"></a>3.7 添加插件</h3> 
<p>直接在AS里下载，File – Settings – Plugins ，搜索后安装即可。<br> <img src="https://images2.imgbox.com/84/c4/7B0FrNHP_o.png" alt="在这里插入图片描述"></p> 
<p>从本地导入，然后根据路径选择对应的插件包<br> <img src="https://images2.imgbox.com/c3/2c/yk7q9mAP_o.png" alt="在这里插入图片描述"><br> 导入后重启生效。</p> 
<h3><a id="38_AVD_81"></a>3.8 修改模拟器(AVD)路径</h3> 
<p>模拟器默认放在 C:\Users\Administrator.android\avd ，占用C盘；把它改到其他盘。<br> 方法；添加环境变量，<br> 变量名：<code>ANDROID_SDK_HOME</code><br> 变量值：D:\Android\AVD ；这个是我的目录，也可以创建其他目录，把目录名对应上即可；</p> 
<p>计算机右键–属性–高级系统设置–环境变量–系统变量，新增<code>ANDROID_SDK_HOME</code>系统变量，对应的值添加为自己创建的目录。<br> 参考 <a href="https://blog.csdn.net/bctool/article/details/52714359">AndroidStudio修改虚拟机AVD路径_bctool的博客-CSDN博客_android studio更改虚拟机路径<br> https://blog.csdn.net/bctool/article/details/52714359</a><br> <img src="https://images2.imgbox.com/9d/14/upkKZYNt_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_91"></a>四、常用快捷键</h2> 
<p>在AS里， Help – Keymap Reference 可以得到官方快捷键汇总表 IntelliJIDEA_ReferenceCard.pdf<br> 这里列出部分：</p> 
<ol><li>某个文件里搜索： Ctrl + F</li><li>全局搜索：双击 shift</li><li>对文件重命名：Shift + F6</li><li>复制整行：Ctrl + D</li><li>删除整行：Ctrl +Y</li><li>跳到指定行： Ctrl +G</li><li>重写父类方法：Ctrl + O</li><li>重写接口：Ctrl + I</li><li>显示常用操作：Alt + Insert</li><li>安装应用 Run app : Shift + F10</li><li>代码格式化 ： Ctrl + Alt + L</li><li>删除没有使用的 import ：Ctrl + Alt +O</li><li>单行注释：Ctrl + / ，取消注释也是此快捷键</li><li>区块注释：Ctrl + Shift + / ，取消注释也是此快捷键</li></ol> 
<h2><a id="_108"></a>五、常用插件</h2> 
<p>AS 插件很多，可访问 <a href="https://plugins.jetbrains.com/" rel="nofollow">https://plugins.jetbrains.com/</a> 了解。<br> 插件介绍的相关博客也有很多，自己搜一下就知道了。<br> 可参考<br> <a href="https://blog.csdn.net/u014551772/article/details/73274646">最好用的Android Studio插件</a><br> <a href="https://mp.weixin.qq.com/s/7cUVU_ar-ckH7iHlfarBRA" rel="nofollow">热门Android Studio 插件，这里是Top 20！</a></p> 
<p>这里列出部分：</p> 
<ol><li>Material Theme UI Lite / Material Theme UI ：酷炫的 UI<br> <img src="https://images2.imgbox.com/73/fd/2E0nYu4g_o.png" alt="在这里插入图片描述"></li><li>ECTranslation ：翻译插件，选中单词后右键翻译；</li><li>GsonFormat ：Gson插件，根据 json 数据快速得到 JavaBean ；</li><li>Rainbow Brackets ：为括号添加多个颜色，方便查看多重嵌套 ，xml 文件里也有效；<br> <img src="https://images2.imgbox.com/df/eb/vLg3EFh8_o.png" alt="在这里插入图片描述"></li><li>ADB WIFI ：添加后可在局域网内通过 wifi 实现 adb 调试；</li><li>ADB Idea ：添加后方便进行 adb 调试，具体的操作在 Tools --&gt; ADB Idea 里<br> <img src="https://images2.imgbox.com/d5/90/NXNzVOfy_o.png" alt="在这里插入图片描述"></li><li>Android Parcelable code generator ：快速实现 Parcelable 序列化代码<br> <img src="https://images2.imgbox.com/a2/16/Xkv18F6A_o.png" alt="在这里插入图片描述"></li><li>Nyan Progress Bar ：彩色进度条（没什么用，换个UI而已）<br> <img src="https://images2.imgbox.com/6a/73/CTm4wdi2_o.png" alt="在这里插入图片描述"></li><li>Android ButterKnife Zelezny ：配合 ButterKnife 实现注解，在Activity，Fragment，Adapter中选中布局资源id自动生成 ButterKnife 注解，不用再写 findViewById 了。</li><li>Lifecycle Sorter ：对 Activity 、Fragment 的生命周期方法排序，快捷键 Ctrl + Alt + k</li><li>PermissionsDispatcher plugin：自动生成 6.0 运行时权限代码<br> <img src="https://images2.imgbox.com/e3/f1/jLTkpHLf_o.png" alt="在这里插入图片描述"></li></ol> 
<h2><a id="AS_136"></a>六、AS实践</h2> 
<h3><a id="61__137"></a>6.1 导入工程</h3> 
<ul><li>导入一个 AS 工程<br> File – Open ，选择对应路径下的工程即可。</li><li>导入 Eclipse 工程<br> 我们系统应用的源码，目录结构是 Eclipse 形式的；<br> File – New – Import Project ，<br> 根据路径选择需要导入的工程源码，<br> <img src="https://images2.imgbox.com/d2/57/rtflaKEi_o.png" alt="在这里插入图片描述"><br> 选择存放的路径，<br> <img src="https://images2.imgbox.com/f2/df/0Mbk4cWi_o.png" alt="在这里插入图片描述"><br> Next 之后就完成了。</li></ul> 
<h3><a id="62__gradle__148"></a>6.2 修改 gradle 配置</h3> 
<p>从其他地方导入的 AS 工程到自己电脑上，gradle 可能同步很久也不行，参照如下修改；</p> 
<h4><a id="621___buildgradle__150"></a>6.2.1 修改项目的 <code> build.gradle</code> 文件</h4> 
<p>从服务器里导出的系统源码，同步之后可能缺失 <code>google()</code> ，参考注释 1、2 处添加即可。</p> 
<pre><code>buildscript {
    repositories {
        google()//1
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:4.0.1'
    }
}

allprojects {
    repositories {
        google()//2
        jcenter()
    }
}
</code></pre> 
<h4><a id="622___buildgradle__gradle__171"></a>6.2.2 修改项目的 <code> build.gradle</code> 文件，修改 gradle 版本</h4> 
<p><img src="https://images2.imgbox.com/35/7b/Mwjfoofl_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="623__gradlewrapperproperties__173"></a>6.2.3 修改 <code>gradle-wrapper.properties</code> 文件</h4> 
<p><img src="https://images2.imgbox.com/4a/d6/yxB5loDl_o.png" alt="在这里插入图片描述"><br> 把这两个地方改成自己的版本就可以了。如果不知道自己使用的是哪个版本，新建一个工程或者查看本地已同步的工程来确定上述两处应该设置的版本。</p> 
<h4><a id="63__SdkVersion__176"></a>6.3 修改 SdkVersion 相关</h4> 
<p>从服务器导入的应用源码，同步之后可能提示 AndroidManifest 里 sdkVersion 相关的警告，注释掉这一段</p> 
<pre><code>&lt;!--&lt;uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="23" /&gt;--&gt;
</code></pre> 
<p>某些系统 API 会提示，此 API 最低支持是 14 ，当前工程最低支持是 1 ，修改 app 的 build.gradle 文件，设置 minSdkVersion 、targetSdkVersion 。把 compileSdkVersion 和 targetSdkVersion 保持一样的版本，消除 AS 的版本警告。<br> <img src="https://images2.imgbox.com/e3/15/tisMjzK7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="64__187"></a>6.4 导入依赖包</h3> 
<p>把要导入的依赖包（jar包、aar包）放到在目录 <code>app/libs</code>下（有则直接放，没有就创建；一般创建为 lib 或者 libs），修改 <code>app 的 build.gradle</code> 文件</p> 
<pre><code>implementation fileTree(dir: "libs", include: ["*.jar"])
implementation(name: 'name', ext: 'aar')
</code></pre> 
<p><img src="https://images2.imgbox.com/1a/66/Y8LaiaC2_o.png" alt="在这里插入图片描述"><br> 另一种方法是，把 xxx.jar 包放到 libs 目录下，对 xxx.jar 右键，add as library。</p> 
<h3><a id="65__196"></a>6.5 同步工程</h3> 
<p>如上述 6.2 、6.3 的操作，改动到了编译相关的配置，都需要同步工程。<br> 一般修改了 build.gradle 文件，AS 都提示要同步，Sync Now 即可。<img src="https://images2.imgbox.com/d3/f6/eMACSHGO_o.png" alt="在这里插入图片描述"><br> 也可以手动在 Toolbar 同步。<br> <img src="https://images2.imgbox.com/31/a0/ooiqnayg_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="66__202"></a>6.6 新建文件</h3> 
<ul><li> <p>新建文件<br> 在文件夹右键 New – File 即可，文件类型可以自己定义。<img src="https://images2.imgbox.com/93/ee/WndDuEqZ_o.png" alt="在这里插入图片描述"></p> </li><li> <p>新建 Class 文件<br> 同新建文件，在对应的文件夹右键 New – File – Java Class 即可。</p> </li><li> <p>新建 xml 文件<br> 同新建文件，在 layout 文件夹右键 New – File – Xml 即可。</p> </li></ul> 
<h3><a id="67__210"></a>6.7 查看历史修改记录</h3> 
<p>在文件里右键 – Local History – Show History 可以查看历史修改记录，方便对比、还原代码。<br> <img src="https://images2.imgbox.com/09/57/1G89ZRVB_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="68_git_213"></a>6.8 关联git</h3> 
<p>AS 关联 git 仓库或者项目后，可以很方便的进行 git 操作。<br> 在 VCS – Get from Version Control 里操作，设置远程仓库URL 和本地仓库地址，Clone 即可。<br> 这样就关联成功了，关联成功后在操作栏会出现 pull 、push 的图标，也可以进行分支等操作。<br> 参考 <a href="https://blog.csdn.net/u010680097/article/details/52768376">AndroidStudio怎样和Git关联_u010680097的专栏-CSDN博客_as关联git<br> https://blog.csdn.net/u010680097/article/details/52768376</a><br> <img src="https://images2.imgbox.com/2c/cb/MQf04W4G_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="69__221"></a>6.9 使用国内镜像</h3> 
<p>有些库可能因为网络因素无法引用，可使用国内镜像，修改后同步工程即可。</p> 
<pre><code>buildscript {
    repositories {
        maven { url 'https://maven.aliyun.com/repository/public' }
        maven { url 'https://maven.aliyun.com/repository/google' }
        //google()
        //jcenter()
    }
    dependencies {
        classpath "com.android.tools.build:gradle:4.0.1"

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        maven { url 'https://maven.aliyun.com/repository/public' }
        maven { url 'https://maven.aliyun.com/repository/google' }
        //google()
        //jcenter()
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/ce/ee/7gFy4RJH_o.png" alt="在这里插入图片描述"><br> 参考 AndroidStudio maven jcenter google 等仓库配置国内镜像_ezconn的博客-CSDN博客_maven google<br> https://blog.csdn.net/ezconn/article/details/90794869?d=1594366163619</p> 
<h3><a id="610__253"></a>6.10 清除缓存</h3> 
<p>修改了工程的配置之后可能出现奇怪的错误，多次同步也无效的话清空缓存即可。<br> 具体操作为 Build – Clean Project / Rebuild Project 。<br> <img src="https://images2.imgbox.com/ca/17/nNqwcR45_o.png" alt="在这里插入图片描述"></p> 
<p>如果这个操作也无效，尝试 File – Invalidate Caches / Restart<br> <img src="https://images2.imgbox.com/55/bb/grvPy3Ly_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="611__apk__261"></a>6.11 修改生成的 apk 的名字</h3> 
<p>默认 build 生成的 apk 名为 app-debug.apk ，修改为自己的。修改 app 的 build.gradle 文件，<br> 在 <code>android{ }</code> 里添加如下</p> 
<pre><code>android.applicationVariants.all {
        variant -&gt;
            variant.outputs.all {
                //这里修改apk文件名
                outputFileName = "ApkName_${variant.name}_v${variant.versionName}.apk"
            }
    }
</code></pre> 
<p>variant.name 对应编译的版本， release 或者 debug ；<br> variant.versionName 对应 <code>defaultConfig{ }</code> 里的 versionName 。<br> <img src="https://images2.imgbox.com/42/d3/q42lAW5g_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="612_apk_278"></a>6.12 生成apk</h3> 
<p>Build Variant 栏可选择编译的版本，debug 或者 release 版本。<br> <img src="https://images2.imgbox.com/be/c2/T0Jp4sF7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="613__282"></a>6.13 打系统签名</h3> 
<p>打了系统签名的应用，拥有系统级权限，可以使用系统级API，权限很高。</p> 
<p>方法总结：</p> 
<h4><a id="6131_AndroidManifest__286"></a>6.13.1 AndroidManifest 配置文件声明</h4> 
<p>声明应用是系统级app ，<code>android:sharedUserId="android.uid.system"</code></p> 
<pre><code>&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.xxx.yyyyy"
    android:sharedUserId="android.uid.system"&gt;
    //省略其他
&lt;/manifest&gt;
</code></pre> 
<h4><a id="6132___jks__keystore_297"></a>6.13.2 生成 jks 或者 keystore</h4> 
<p>用 <strong>keytool-importkeypair-master</strong> 工具、系统签名文件 <strong>platform.x509.pem</strong> 、<strong>platform.pk8</strong> 生成 jks 或者 keystore ，<br> 在 Linux 环境下按照实际配置执行如下命令得到 test.jks 文件；</p> 
<pre><code>./keytool-importkeypair -k test.jks -p yourpassword -pk8 platform.pk8 -cert platform.x509.pem -alias testalias
</code></pre> 
<p>其中，test.jks 为生成的 jks，test是 jks 的名称，随便取；<br> jks 的密码为 yourpassword，自己设置，一般为字母和数字；<br> testalias 为 jks 的别名，随便取；</p> 
<h4><a id="6133_AS__jks__keystore__307"></a>6.13.3 AS 导入 jks 或者 keystore 并添加配置</h4> 
<p>导入 jks ，Build – Generate Signed Bundle / APK – apk – Choose existing , 导入外部的jks 。 如果是<br> 要创建新的，选择 Create new 。<br> <img src="https://images2.imgbox.com/27/08/YLdo7i7q_o.png" alt="在这里插入图片描述"></p> 
<p>将生成的 test.jks 放到 app/ 目录下，build.gradle 配置 <code>signingConfigs { }</code>，</p> 
<pre><code>android {
    compileSdkVersion 29
    buildToolsVersion "29.0.3"
    defaultConfig {
        applicationId "com.xxx.test"
        minSdkVersion 23
        targetSdkVersion 26
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        vectorDrawables.useSupportLibrary = true
    }

    signingConfigs {
        release {
            storeFile file('test.jks')
            storePassword '123456'
            keyAlias 'testalias'
            keyPassword '123456'
        }
        // 如果 debug 版本也打签名，则添加这一部分
        debug {
            storeFile file('test.jks')
            storePassword '123456'
            keyAlias 'testalias'
            keyPassword '123456'
        }
        // 如果 debug 版本也打签名，则添加这一部分
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}
</code></pre> 
<p>这样编译出来的应用就是系统应用了。<br> 具体可参考 <a href="https://blog.csdn.net/weixin_44021334/article/details/107091140">使用AndroidStudio生成打有系统签名的apk</a></p> 
<h3><a id="614__355"></a>6.14 多渠道打包</h3> 
<p>用一套代码编译生成不同发布渠道的应用，应用的功能大体一致，可配置不一样的签名、包名、应用图标等。<br> 通过配置 productFlavors 来实现，app 的 build.gradle 示例</p> 
<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 30
    buildToolsVersion "30.0.0"

    defaultConfig {
        applicationId "com.test.multibale"
        minSdkVersion 23
        targetSdkVersion 30
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }

    signingConfigs {
        // 只是用来做演示，没有特地生成签名文件
        MultiBale {
            storeFile file("src/main/multibale.jks")
            storePassword "mul123"
            keyAlias "keymul"
            keyPassword "mul123"
            // 开启 V2 签名
            v2SigningEnabled true
        }
        ktc {
            storeFile file("src/ktc/multibalektc.jks")
            storePassword "ktc123"
            keyAlias "keyktc"
            keyPassword "ktc123"
            v2SigningEnabled true
        }
        ktc_v2 {
            storeFile file("src/ktc/multibalektc.jks")
            storePassword "ktc123"
            keyAlias "keyktc"
            keyPassword "ktc123"
            v2SigningEnabled true
        }
    }

    flavorDimensions "app"

    sourceSets {
        MultiBale {
            java.srcDir('src/main/java')
            res.srcDir('src/main/res')
            // assets.srcDir('src/main/assets')
            // manifest.srcFile('src/main/AndroidManifest.xml')
        }

        ktc {
            java.srcDir('src/ktc/java')
            res.srcDir('src/ktc/res')
            // assets.srcDir('src/ktc/assets')
            // manifest.srcFile('src/ktc/AndroidManifest.xml')
        }

        ktc_v2 {
            java.srcDir('src/ktc_v2/java')
            res.srcDir('src/ktc_v2/res')
            // assets.srcDir('src/ktc_v2/assets')
            // manifest.srcFile('src/ktc_v2/AndroidManifest.xml')
        }
    }

    productFlavors {
        MultiBale {
            applicationId "com.test.multibale"
            dimension "app"
            versionCode 1
            versionName "1.0"
            signingConfig signingConfigs.MultiBale
        }
        ktc {
            applicationId "com.test.multibale.ktc"
            dimension "app"
            versionCode 1
            versionName "1.2"
            signingConfig signingConfigs.ktc
        }
        ktc_v2 {
            applicationId "com.test.multibale.ktc_v2"
            dimension "app"
            versionCode 2
            versionName "2.0"
            signingConfig signingConfigs.ktc_v2
        }
    }

    applicationVariants.all {
        variant -&gt;
            variant.outputs.all {
                outputFileName = "${variant.productFlavors[0].name}_v${variant.productFlavors[0].versionName}_${releaseTime()}.apk"
            }
    }
}

dependencies {
    implementation fileTree(dir: "libs", include: ["*.jar"])
    implementation 'androidx.appcompat:appcompat:1.1.0'
    implementation 'com.google.android.material:material:1.1.0'
    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'
    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'
    testImplementation 'junit:junit:4.12'
    androidTestImplementation 'androidx.test.ext:junit:1.1.1'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'

}
</code></pre> 
<p>具体可参考 <a href="https://mp.weixin.qq.com/s?__biz=MzAxMTI4MTkwNQ==&amp;mid=2650824805&amp;idx=1&amp;sn=d3102e022334b60305d42c2da317384d&amp;chksm=80b7b4fbb7c03ded87b2d366a3cab88752292ae850c94e52b16f343fc32ff9fedf541767136f&amp;scene=38#wechat_redirect" rel="nofollow">教你如何一套源码编译多个APP，不同的签名，包名，界面，字段</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8791f37beaea296b7d813dcb632e3f98/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Docker】完整的搭建和发布过程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0bff7a02ab9e54c7e2d41e68355e1acf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">笔记本设置扩展屏幕时第二块屏幕的纵横比不对（字体变宽）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>