<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>UE4C&#43;&#43; 常用游戏算法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="UE4C&#43;&#43; 常用游戏算法" />
<meta property="og:description" content="1.锁定敌人 void AARPGPlayerController::LockAI()
{
/**获取自己的位置*/
FVector pos = myCharacter-&gt;GetActorLocation();
/**获取所有AI对象*/
UGameplayStatics::GetAllActorsOfClass(GetWorld(), AAICharacter::StaticClass(), AiArray);
int aiNum = AiArray.Num();
if (aiNum&gt;0)
{
/**求出最短距离*/
float MainDistance = FVector::Dist(pos, AiArray[0]-&gt;GetActorLocation());
/**距离玩家最近的AI*/
AActor * MainDistActor = AiArray[0];
/*遍历所有敌人*/
for (int i =0;i&lt;aiNum;&#43;&#43;i)
{
/**判断敌人是否死亡*/
if (Cast&lt;AAICharacter&gt;(AiArray[i])-&gt;isDie)
{
continue;
}
/**获取距离*/
float dist = FVector::Dist(pos, AiArray[i]-&gt;GetActorLocation());
/**判断最近距离*/
if (MainDistance&gt;=dist)
{
MainDistance = dist;
MainDistActor = AiArray[i];
}
}
/**如果在附近 就进行朝向玩家*/
if (MainDistance&lt;&#43;400)
{
FRotator rot = UKismetMathLibrary::FindLookAtRotation(pos, MainDistActor-&gt;GetActorLocation());" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/98cfaeec75f8ae86258daef7debfd571/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-24T23:10:01+08:00" />
<meta property="article:modified_time" content="2019-03-24T23:10:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">UE4C&#43;&#43; 常用游戏算法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <hr> 
<h2><span style="color:#bc0058;"><strong>1.锁定敌人</strong></span></h2> 
<p><strong><span style="color:#0000ff;">void</span></strong> <strong><span style="color:#0000ff;">AARPGPlayerController</span></strong><strong>::</strong><strong><span style="color:#880000;">LockAI</span></strong><strong>()</strong></p> 
<p><strong>{<!-- --></strong></p> 
<p>       <strong><span style="color:#008000;">/**获取自己的位置*/</span></strong></p> 
<p>       <strong><span style="color:#0000ff;">FVector</span></strong> <strong><span style="color:#000080;">pos</span></strong> <strong>=</strong> <strong><span style="color:#000080;">myCharacter</span></strong><strong>-&gt;</strong><strong><span style="color:#880000;">GetActorLocation</span></strong><strong>();</strong></p> 
<p>       <strong><span style="color:#008000;">/**获取所有AI对象*/</span></strong></p> 
<p>       <strong><span style="color:#0000ff;">UGameplayStatics</span></strong><strong>::</strong><strong><span style="color:#880000;">GetAllActorsOfClass</span></strong><strong>(</strong><strong><span style="color:#880000;">GetWorld</span></strong><strong>(),</strong> <strong><span style="color:#0000ff;">AAICharacter</span></strong><strong>::</strong><strong><span style="color:#880000;"><em>StaticClass</em></span></strong><strong>(),</strong> <strong><span style="color:#000080;">AiArray</span></strong><strong>);</strong></p> 
<p>       <strong><span style="color:#0000ff;">int</span></strong> <strong><span style="color:#000080;">aiNum</span></strong> <strong>=</strong> <strong><span style="color:#000080;">AiArray</span></strong><strong>.</strong><strong><span style="color:#880000;">Num</span></strong><strong>();</strong></p> 
<p>       <strong><span style="color:#0000ff;">if</span></strong> <strong>(</strong><strong><span style="color:#000080;">aiNum</span></strong><strong>&gt;0)</strong></p> 
<p><strong>       {<!-- --></strong></p> 
<p>              <strong><span style="color:#008000;">/**求出最短距离*/</span></strong></p> 
<p>              <strong><span style="color:#0000ff;">float</span></strong> <strong><span style="color:#000080;">MainDistance</span></strong> <strong>=</strong> <strong><span style="color:#0000ff;">FVector</span></strong><strong>::</strong><strong><span style="color:#880000;"><em>Dist</em></span></strong><strong>(</strong><strong><span style="color:#000080;">pos</span></strong><strong>,</strong> <strong><span style="color:#000080;">AiArray</span></strong><strong><span style="color:#008080;">[</span></strong><strong>0</strong><strong><span style="color:#008080;">]</span></strong><strong>-&gt;</strong><strong><span style="color:#880000;">GetActorLocation</span></strong><strong>());</strong></p> 
<p>              <strong><span style="color:#008000;">/**距离玩家最近的AI*/</span></strong></p> 
<p>              <strong><span style="color:#0000ff;">AActor</span></strong> <strong>*</strong> <strong><span style="color:#000080;">MainDistActor</span></strong> <strong>=</strong> <strong><span style="color:#000080;">AiArray</span></strong><strong><span style="color:#008080;">[</span></strong><strong>0</strong><strong><span style="color:#008080;">]</span></strong><strong>;</strong></p> 
<p>              <strong><span style="color:#008000;">/*遍历所有敌人*/</span></strong></p> 
<p>              <strong><span style="color:#0000ff;">for</span></strong> <strong>(</strong><strong><span style="color:#0000ff;">int</span></strong>  <strong><span style="color:#000080;">i</span></strong> <strong>=0;</strong><strong><span style="color:#000080;">i</span></strong><strong>&lt;</strong><strong><span style="color:#000080;">aiNum</span></strong><strong>;++</strong><strong><span style="color:#000080;">i</span></strong><strong>)</strong></p> 
<p><strong>              {<!-- --></strong></p> 
<p>                     <strong><span style="color:#008000;">/**判断敌人是否死亡*/</span></strong></p> 
<p>                     <strong><span style="color:#0000ff;">if</span></strong> <strong>(</strong><strong><span style="color:#880000;">Cast</span></strong><strong>&lt;</strong><strong><span style="color:#0000ff;">AAICharacter</span></strong><strong>&gt;(</strong><strong><span style="color:#000080;">AiArray</span></strong><strong><span style="color:#008080;">[</span></strong><strong><span style="color:#000080;">i</span></strong><strong><span style="color:#008080;">]</span></strong><strong>)-&gt;</strong><strong><span style="color:#000080;">isDie</span></strong><strong>)</strong></p> 
<p><strong>                     {<!-- --></strong></p> 
<p>                           <strong><span style="color:#0000ff;">continue</span></strong><strong>;</strong></p> 
<p><strong>                     }</strong></p> 
<p>                     <strong><span style="color:#008000;">/**获取距离*/</span></strong></p> 
<p>                     <strong><span style="color:#0000ff;">float</span></strong> <strong><span style="color:#000080;">dist</span></strong> <strong>=</strong> <strong><span style="color:#0000ff;">FVector</span></strong><strong>::</strong><strong><span style="color:#880000;"><em>Dist</em></span></strong><strong>(</strong><strong><span style="color:#000080;">pos</span></strong><strong>,</strong> <strong><span style="color:#000080;">AiArray</span></strong><strong><span style="color:#008080;">[</span></strong><strong><span style="color:#000080;">i</span></strong><strong><span style="color:#008080;">]</span></strong><strong>-&gt;</strong><strong><span style="color:#880000;">GetActorLocation</span></strong><strong>());</strong></p> 
<p>                     <strong><span style="color:#008000;">/**判断最近距离*/</span></strong></p> 
<p>                     <strong><span style="color:#0000ff;">if</span></strong> <strong>(</strong><strong><span style="color:#000080;">MainDistance</span></strong><strong>&gt;=</strong><strong><span style="color:#000080;">dist</span></strong><strong>)</strong></p> 
<p><strong>                     {<!-- --></strong></p> 
<p>                           <strong><span style="color:#000080;">MainDistance</span></strong> <strong>=</strong> <strong><span style="color:#000080;">dist</span></strong><strong>;</strong></p> 
<p>                           <strong><span style="color:#000080;">MainDistActor</span></strong> <strong>=</strong> <strong><span style="color:#000080;">AiArray</span></strong><strong><span style="color:#008080;">[</span></strong><strong><span style="color:#000080;">i</span></strong><strong><span style="color:#008080;">]</span></strong><strong>;</strong></p> 
<p><strong>                     }</strong></p> 
<p><strong>              }</strong></p> 
<p>              <strong><span style="color:#008000;">/**如果在附近 就进行朝向玩家*/</span></strong></p> 
<p>              <strong><span style="color:#0000ff;">if</span></strong> <strong>(</strong><strong><span style="color:#000080;">MainDistance</span></strong><strong>&lt;+400)</strong></p> 
<p><strong>              {<!-- --></strong></p> 
<p>                     <strong><span style="color:#0000ff;">FRotator</span></strong> <strong><span style="color:#000080;">rot</span></strong> <strong>=</strong> <strong><span style="color:#0000ff;">UKismetMathLibrary</span></strong><strong>::</strong><strong><span style="color:#880000;">FindLookAtRotation</span></strong><strong>(</strong><strong><span style="color:#000080;">pos</span></strong><strong>,</strong> <strong><span style="color:#000080;">MainDistActor</span></strong><strong>-&gt;</strong><strong><span style="color:#880000;">GetActorLocation</span></strong><strong>());</strong></p> 
<p>            <strong><span style="color:#008000;">/**只让Yaw变化*/</span></strong></p> 
<p>                     <strong><span style="color:#000080;">rot</span></strong><strong>.</strong><strong><span style="color:#000080;">Pitch</span></strong> <strong>=</strong> <strong><span style="color:#000080;">myCharacter</span></strong><strong>-&gt;</strong><strong><span style="color:#880000;">GetCapsuleComponent</span></strong><strong>()-&gt;</strong><strong><span style="color:#880000;">GetComponentRotation</span></strong><strong>().</strong><strong><span style="color:#000080;">Pitch</span></strong><strong>;</strong></p> 
<p>                     <strong><span style="color:#000080;">rot</span></strong><strong>.</strong><strong><span style="color:#000080;">Roll</span></strong> <strong>=</strong> <strong><span style="color:#000080;">myCharacter</span></strong><strong>-&gt;</strong><strong><span style="color:#880000;">GetCapsuleComponent</span></strong><strong>()-&gt;</strong><strong><span style="color:#880000;">GetComponentRotation</span></strong><strong>().</strong><strong><span style="color:#000080;">Roll</span></strong><strong>;</strong></p> 
<p>                     <strong><span style="color:#008000;">/**设置玩家朝向*/</span></strong></p> 
<p>                     <strong><span style="color:#000080;">myCharacter</span></strong><strong>-&gt;</strong><strong><span style="color:#880000;">GetCapsuleComponent</span></strong><strong>()-&gt;</strong><strong><span style="color:#880000;">SetRelativeRotation</span></strong><strong>(</strong><strong><span style="color:#000080;">rot</span></strong><strong>);</strong></p> 
<p> </p> 
<p><strong>              }</strong></p> 
<p><strong>       }</strong></p> 
<p><strong>}</strong></p> 
<h2><strong>2.未完待续。。。</strong></h2>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/22f1afc44e31df7c3cbbf5fa09b25efe/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Hashcat 破解 wifi WPA2 PMKID</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d0e23d89155a52e4b65cb6e406fb7ced/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">面试之sql——删除冗余数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>