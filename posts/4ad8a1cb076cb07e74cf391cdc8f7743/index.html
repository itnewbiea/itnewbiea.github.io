<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python合并拼接图片 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python合并拼接图片" />
<meta property="og:description" content="目录 图片二维合并拼接（类似九宫格）图片纵向合并拼接举例18张图片合并为2张九宫格图片18张图片合并为2张纵向图片 使用前需要安装PIL库，以下代码使用的Pillow(10.1.0)
pip install pillow 图片二维合并拼接（类似九宫格） from PIL import Image def img_merge1(img_list, output_file, x, y, isresize=True): &#34;&#34;&#34; 合并图片列表中的图片，生成一个横向x个纵向y个的新图片，并指定保存名称 :param list img_list: 待合并的图片名称列表，文件名含路径 :param str output_file: 输出合并后的新图片，文件名含路径 :param int x: 合并后的新图片横向图片数 :param int y: 合并后的新图片纵向图片数 :param bool isresize: 是否统一每张图片的大小，默认True &#34;&#34;&#34; imgs = []; max_w, max_h = 0, 0 # 图片列表；图片最大宽，高 for f in img_list: img = Image.open(f); imgs.append(img) # 打开图片，并存入列表 w, h = img.size # 图片尺寸宽*高，元组 max_w = w if max_w &lt; w else max_w max_h = h if max_h &lt; h else max_h new_img = Image." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4ad8a1cb076cb07e74cf391cdc8f7743/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-10T11:26:50+08:00" />
<meta property="article:modified_time" content="2023-11-10T11:26:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python合并拼接图片</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><ul><li><a href="#_6" rel="nofollow">图片二维合并拼接（类似九宫格）</a></li><li><a href="#_39" rel="nofollow">图片纵向合并拼接</a></li><li><a href="#_72" rel="nofollow">举例</a></li><li><ul><li><a href="#182_94" rel="nofollow">18张图片合并为2张九宫格图片</a></li><li><a href="#182_109" rel="nofollow">18张图片合并为2张纵向图片</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p>使用前需要安装PIL库，以下代码使用的<code>Pillow(10.1.0)</code></p> 
<pre><code class="prism language-python">pip install pillow
</code></pre> 
<h3><a id="_6"></a>图片二维合并拼接（类似九宫格）</h3> 
<pre><code class="prism language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image

<span class="token keyword">def</span> <span class="token function">img_merge1</span><span class="token punctuation">(</span>img_list<span class="token punctuation">,</span> output_file<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> isresize<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    合并图片列表中的图片，生成一个横向x个纵向y个的新图片，并指定保存名称
    :param list img_list: 待合并的图片名称列表，文件名含路径
    :param str output_file: 输出合并后的新图片，文件名含路径
    :param int x: 合并后的新图片横向图片数
    :param int y: 合并后的新图片纵向图片数
    :param bool isresize: 是否统一每张图片的大小，默认True
    """</span>
    imgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> max_w<span class="token punctuation">,</span> max_h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>  <span class="token comment"># 图片列表；图片最大宽，高</span>
    <span class="token keyword">for</span> f <span class="token keyword">in</span> img_list<span class="token punctuation">:</span>
        img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span> imgs<span class="token punctuation">.</span>append<span class="token punctuation">(</span>img<span class="token punctuation">)</span>  <span class="token comment"># 打开图片，并存入列表</span>
        w<span class="token punctuation">,</span> h <span class="token operator">=</span> img<span class="token punctuation">.</span>size  <span class="token comment"># 图片尺寸宽*高，元组</span>
        max_w <span class="token operator">=</span> w <span class="token keyword">if</span> max_w <span class="token operator">&lt;</span> w <span class="token keyword">else</span> max_w
        max_h <span class="token operator">=</span> h <span class="token keyword">if</span> max_h <span class="token operator">&lt;</span> h <span class="token keyword">else</span> max_h
    new_img <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">'RGB'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>max_w <span class="token operator">*</span> x<span class="token punctuation">,</span> max_h <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">)</span>
    k <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 将所有的图片拼接到新的图片上，resize每张图片统一宽高</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 按行写入，横向</span>
            <span class="token keyword">if</span> isresize<span class="token punctuation">:</span>  <span class="token comment"># 统一图片尺寸</span>
                img_k <span class="token operator">=</span> imgs<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>max_w<span class="token punctuation">,</span> max_h<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                img_k <span class="token operator">=</span> imgs<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
            new_img<span class="token punctuation">.</span>paste<span class="token punctuation">(</span>img_k<span class="token punctuation">,</span> <span class="token punctuation">(</span>j <span class="token operator">*</span> max_w<span class="token punctuation">,</span> i <span class="token operator">*</span> max_h<span class="token punctuation">)</span><span class="token punctuation">)</span>
            k <span class="token operator">=</span> k <span class="token operator">+</span> <span class="token number">1</span>
    new_img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>output_file<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_39"></a>图片纵向合并拼接</h3> 
<pre><code class="prism language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image

<span class="token keyword">def</span> <span class="token function">img_merge2</span><span class="token punctuation">(</span>img_list<span class="token punctuation">,</span> output_file<span class="token punctuation">,</span> isresize<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    纵向合并图片列表中的图片，并指定保存名称
    :param list img_list: 待合并的图片名称列表，文件名含路径
    :param str output_file: 输出合并后的新图片，文件名含路径
    :param bool isresize: 是否统一每张图片的大小，默认True
    """</span>
    imgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> max_w<span class="token punctuation">,</span> max_h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>  <span class="token comment"># 图片列表；图片最大宽，高</span>
    total_h <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> f <span class="token keyword">in</span> img_list<span class="token punctuation">:</span>
        img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span> imgs<span class="token punctuation">.</span>append<span class="token punctuation">(</span>img<span class="token punctuation">)</span>  <span class="token comment"># 打开图片，并存入列表</span>
        w<span class="token punctuation">,</span> h <span class="token operator">=</span> img<span class="token punctuation">.</span>size  <span class="token comment"># 图片尺寸宽*高，元组</span>
        max_w <span class="token operator">=</span> w <span class="token keyword">if</span> max_w <span class="token operator">&lt;</span> w <span class="token keyword">else</span> max_w
        max_h <span class="token operator">=</span> h <span class="token keyword">if</span> max_h <span class="token operator">&lt;</span> h <span class="token keyword">else</span> max_h
        total_h <span class="token operator">=</span> total_h <span class="token operator">+</span> h
    <span class="token keyword">if</span> isresize<span class="token punctuation">:</span>  <span class="token comment"># 统一图片尺寸</span>
        new_img <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">'RGB'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>max_w<span class="token punctuation">,</span> max_h <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            new_img<span class="token punctuation">.</span>paste<span class="token punctuation">(</span>imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>max_w<span class="token punctuation">,</span> max_h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">*</span> max_h<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        new_img <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">'RGB'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>max_w<span class="token punctuation">,</span> total_h<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">)</span>
        h <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            new_img<span class="token punctuation">.</span>paste<span class="token punctuation">(</span>imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span>
            h <span class="token operator">=</span> h <span class="token operator">+</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># 高度递增</span>
    new_img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>output_file<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_72"></a>举例</h3> 
<pre><code class="prism language-python"><span class="token keyword">from</span> glob <span class="token keyword">import</span> glob
<span class="token keyword">from</span> natsort <span class="token keyword">import</span> natsorted

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    filepath <span class="token operator">=</span> <span class="token string">r'E:\测试\jpg\一眼丁真'</span>  <span class="token comment"># 待合并图片所在文件夹</span>
    n <span class="token operator">=</span> <span class="token number">9</span>  <span class="token comment"># 每组需要合并的图片数量</span>
    img_file <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> c <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">r'\*.jpg'</span><span class="token punctuation">,</span> <span class="token string">r'\*.png'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># 获取所有格式的图片，名称写入列表</span>
        img_file<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>glob<span class="token punctuation">(</span>filepath <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span>
    img_file <span class="token operator">=</span> natsorted<span class="token punctuation">(</span>img_file<span class="token punctuation">)</span>  <span class="token comment"># 自然排序，避免格式不同导致顺序不同</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>img_file<span class="token punctuation">)</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        img_list <span class="token operator">=</span> img_file<span class="token punctuation">[</span>i <span class="token punctuation">:</span> i<span class="token operator">+</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span> c <span class="token operator">=</span> c <span class="token operator">+</span> <span class="token number">1</span>
        file_name <span class="token operator">=</span> filepath <span class="token operator">+</span> <span class="token string">r'\合并图片{:04d}.jpg'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
        img_merge1<span class="token punctuation">(</span>img_list<span class="token punctuation">,</span> file_name<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment"># 调用函数合并图片</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'图片合并成功:{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>file_name<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="182_94"></a>18张图片合并为2张九宫格图片</h4> 
<p><strong>统一原始图片尺寸</strong>，举例中<code>调用函数合并图片</code>行代码</p> 
<pre><code class="prism language-python">img_merge1<span class="token punctuation">(</span>img_list<span class="token punctuation">,</span> file_name<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre> 
<p>合并前（内含17张jpg图片和1张png图片）<br> <img src="https://images2.imgbox.com/49/2f/KohFK1Zr_o.png" alt="在这里插入图片描述"><br> 合并后<br> <img src="https://images2.imgbox.com/7a/bd/XWyAYcbK_o.png" alt="在这里插入图片描述"><br> 如果<strong>不需要统一原始图片尺寸</strong></p> 
<pre><code class="prism language-python">img_merge1<span class="token punctuation">(</span>img_list<span class="token punctuation">,</span> file_name<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> 
<p>合并后，可以清楚的看到图片有留白的区域<br> <img src="https://images2.imgbox.com/16/81/EOJY5BGc_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="182_109"></a>18张图片合并为2张纵向图片</h4> 
<p><strong>统一原始图片尺寸</strong>，举例中<code>调用函数合并图片</code>行代码</p> 
<pre><code class="prism language-python">img_merge2<span class="token punctuation">(</span>img_list<span class="token punctuation">,</span> file_name<span class="token punctuation">)</span>
</code></pre> 
<p>合并后<br> <img src="https://images2.imgbox.com/c8/bc/DEolZymq_o.png" alt="在这里插入图片描述"><br> 同样，如果<strong>不需要统一原始图片尺寸</strong></p> 
<pre><code class="prism language-python">img_merge2<span class="token punctuation">(</span>img_list<span class="token punctuation">,</span> file_name<span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> 
<p>合并结果小图看不清，就不展示了，和上面的一样，图片有留白的区域</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3b8d1546f22c7025f69b811442bd976b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vnpy_ctp源码下载后转变为python可用的处理过程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/62f298f7266c3e1122b7bc6154478433/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python实现图片与PDF互相转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>