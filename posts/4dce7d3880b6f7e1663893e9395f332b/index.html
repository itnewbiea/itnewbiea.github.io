<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android---Kotlin 学习011 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android---Kotlin 学习011" />
<meta property="og:description" content="扩展函数 定义扩展函数
扩展可以在不直接修改类定义的情况下增加类功能，扩展可以用于自定义类，也可以用于比如 List、String，已经 Kotlin 标准库里的其它类。和继承相似，扩展也能共享类行为，在你无法接触某个类定义，或者某个类没有使用 open 修饰符，导致你无法继承它时，扩展就是增加类功能的最后选择。
示例：给 String 增加一个我们自定义的函数 addExt()
后面所有的字符串都会有这个 addExt() 扩展函数。
超类(Any)上定义扩展函数，那么所有的类都会有这个扩展函数。
注意：如果扩展函数是私有的(private)，那么只有在当前类里能使用。
泛型扩展函数
新的泛型扩展函数不仅可以支持任何类型的接收者，还保留了接收者的类型信息，使用泛型类型后，扩展函数能够支持更多类型的接收者，适用范围更广。
为了解决这个问题，那么我们可以通过泛型扩展函数来完成。
泛型扩展函数在 Kotlin 标准库里随处可见，例如 let 函数，let 函数被定义成了泛型扩展函数，所以能支持任何类型，它接收一个 lambda 表达式，这个 lambda 表达式接收者 T 作为值参，返回的 R-lambda 表达式返回的任何新类型。
扩展属性
除了给类添加功能扩展函数外，你还可以给类定义 扩展属性，给 String 类添加一个扩展，这个扩展属性可以统计字符串里有多少个元音字母。
示例：
可空类扩展
也可以定义扩展函数用于可空类型，在可空类型上定义扩展函数，你就可以直接在扩展函数体内解决可能出现的空值问题。
infix 关键字
infex 关键字适用于有单个参数的扩展类函数，可以让你以更简洁的语法调用函数。如果一个函数定义使用了 infix 关键字，那么调用它时，接收者和函数之间的点操作以及参数的一对括号都可以不要。
定义扩展文件
扩展函数需要在多个文件里面使用，可以将它定义在单独的文件，然后 Import。
示例：定义一个扩展文件
在其它文件里使用 com.HL.extension.randomTake 这个扩展文件
重命名扩展文件
有时候，你想使用一个扩展或一个类，但它的名字不合你意。用 as 关键字。
Kotlin 标准库中的扩展
Kotlin 标准库提供的很多功能都是通过扩展函数和扩展属性来实现的，包含类扩展的标准库文件通常都是以类名加 s 后缀来命名的，例如 Sequences.kt，Ranges.kt，Maps.kt。
DSL 带接收者的函数字面量
apply 函数是如何做到支持接收者对象的隐式调用的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4dce7d3880b6f7e1663893e9395f332b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T15:47:45+08:00" />
<meta property="article:modified_time" content="2023-12-27T15:47:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android---Kotlin 学习011</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><strong>扩展函数</strong></h2> 
<p><strong>定义扩展函数</strong></p> 
<p>扩展可以在不直接修改类定义的情况下增加类功能，扩展可以用于自定义类，也可以用于比如 List、String，已经 Kotlin 标准库里的其它类。<strong>和继承相似</strong>，扩展也能共享类行为，在你无法接触某个类定义，或者某个类没有使用 open 修饰符，导致你无法继承它时，扩展就是增加类功能的最后选择。</p> 
<p>示例：给 String 增加一个我们自定义的函数 addExt()</p> 
<p><img alt="" height="445" src="https://images2.imgbox.com/6b/25/0bKp3l7X_o.png" width="783"></p> 
<p>后面所有的字符串都会有这个 addExt() 扩展函数。</p> 
<p>超类(Any)上定义扩展函数，那么所有的类都会有这个扩展函数。</p> 
<p><img alt="" height="462" src="https://images2.imgbox.com/b9/28/9euwunrs_o.png" width="897"></p> 
<p>注意：如果扩展函数是私有的(private)，那么只有在当前类里能使用。</p> 
<p><strong>泛型扩展函数</strong></p> 
<p>新的泛型扩展函数不仅可以支持任何类型的接收者，还保留了接收者的类型信息，使用泛型类型后，扩展函数能够支持更多类型的接收者，适用范围更广。</p> 
<p><img alt="" height="542" src="https://images2.imgbox.com/53/25/KeScrYIj_o.png" width="924"></p> 
<p>为了解决这个问题，那么我们可以通过<strong>泛型扩展函数</strong>来完成。</p> 
<p><img alt="" height="518" src="https://images2.imgbox.com/c4/55/ocfLcQSy_o.png" width="883"></p> 
<p>泛型扩展函数在 Kotlin 标准库里随处可见，例如 let 函数，let 函数被定义成了<strong>泛型扩展函数</strong>，所以能支持任何类型，它接收一个 lambda 表达式，这个 lambda 表达式接收者 T 作为值参，返回的 R-lambda 表达式返回的任何新类型。</p> 
<p><img alt="" height="220" src="https://images2.imgbox.com/e1/2b/LpxWpcCe_o.png" width="810"></p> 
<p><strong>扩展属性</strong></p> 
<p>除了给类添加功能扩展函数外，你还可以给类定义 扩展属性，给 String 类添加一个扩展，这个扩展属性可以统计字符串里有多少个元音字母。</p> 
<p>示例：</p> 
<p><img alt="" height="544" src="https://images2.imgbox.com/8e/94/HqohjXpH_o.png" width="849"></p> 
<p><strong>可空类扩展</strong></p> 
<p>也可以定义扩展函数用于可空类型，在可空类型上定义扩展函数，你就可以直接在扩展函数体内解决可能出现的空值问题。</p> 
<p><img alt="" height="425" src="https://images2.imgbox.com/5a/07/7WsYkUSr_o.png" width="1168"></p> 
<p><strong>infix 关键字</strong></p> 
<p>infex 关键字适用于有<strong>单个参数</strong>的扩展类函数，可以让你以更简洁的语法调用函数。如果一个函数定义使用了 infix 关键字，那么调用它时，<span style="color:#fe2c24;">接收者和函数之间的<strong>点操作</strong>以及参数的<strong>一对括号</strong>都可以不要</span>。</p> 
<p><img alt="" height="271" src="https://images2.imgbox.com/a8/aa/ZANAsjVk_o.png" width="1042"></p> 
<p><strong>定义扩展文件</strong></p> 
<p>扩展函数需要在多个文件里面使用，可以将它定义在单独的文件，然后 Import。</p> 
<p>示例：定义一个扩展文件</p> 
<p><img alt="" height="214" src="https://images2.imgbox.com/d3/e1/9mUTPMMC_o.png" width="877"></p> 
<p>在其它文件里使用 com.HL.extension.randomTake 这个扩展文件</p> 
<p><img alt="" height="396" src="https://images2.imgbox.com/8e/19/5eur6eQ3_o.png" width="957"></p> 
<p><strong>重命名扩展文件</strong></p> 
<p>有时候，你想使用一个扩展或一个类，但它的名字不合你意。用 as 关键字。</p> 
<p><img alt="" height="441" src="https://images2.imgbox.com/d0/73/0Z44eQsV_o.png" width="952"></p> 
<p><strong>Kotlin 标准库中的扩展</strong></p> 
<p>Kotlin 标准库提供的很多功能都是<span style="color:#fe2c24;">通过扩展函数和扩展属性来实现</span>的，包含类扩展的标准库文件通常都是以类名加 s 后缀来命名的，例如 Sequences.kt，Ranges.kt，Maps.kt。</p> 
<h2>DSL</h2> 
<p><strong>带接收者的函数字面量</strong></p> 
<p>apply 函数是如何做到支持接收者对象的隐式调用的。</p> 
<p><img alt="" height="248" src="https://images2.imgbox.com/8a/14/muvxiL6e_o.png" width="939"></p> 
<p>使用这样的编程范式，就可以写出业界知名的“领域特定语言”（DSL），一种 API 编程范式，暴露接收者的函数和特性，以便于使用你定义的 lambda 表达式来读取和配置它们。 </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/41a12cd6794c31c6f83901c8d74c6079/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">onnxruntime 不使用 gpu</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b369209c9ccd27f638305ffac1c90516/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">前端实现websocket类封装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>