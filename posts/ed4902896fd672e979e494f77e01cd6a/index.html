<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信播放在服务器视频无法播放音乐,H5页面在ios微信中，视频播放完成自动播放音频不成功... - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信播放在服务器视频无法播放音乐,H5页面在ios微信中，视频播放完成自动播放音频不成功..." />
<meta property="og:description" content="1.需求：H5页面视频播放完成后，自动播放音频
2.开始在video播放完成后，调用音频播放没成功。无奈，加了个定时器尝试，也不行。(仅针对于ios微信上打开)
3.http://t1.toptest.yidianzixun...
var video_play=function(){
$(&#39;.parent&#39;).css(&#39;background&#39;,&#39;#000&#39;);
window.video = document.getElementById(&#39;video&#39;);
window.video.play();
}
var audio_play=function(){
window.audio = document.getElementById(&#39;audio&#39;);
window.audio.play();
}
document.addEventListener(&#34;WeixinJSBridgeReady&#34;, function () {
if(ua.indexOf(&#39;android&#39;) &gt; -1 || ua.indexOf(&#39;linux&#39;) &gt; -1){
$(&#39;#video&#39;).attr(&#39;poster&#39;,&#39;https://ks3-cn-beijing.ksyun.com/static.toptest.yidianzixun.com/public/file/1523865098649/4891523864996_.pic_hd.jpg&#39;);
}else{
video_play();
// audio_play();
var t1 = window.setInterval(function(){
if(audio_num==0){
audio_play();
window.clearInterval(t1);
}
},1000);
}
}, false);
var audio_num=1;
//video播放结束
$(&#34;#video&#34;).get(0).addEventListener(&#34;ended&#34;, function () {
$(&#39;.parent&#39;).hide();
$(&#34;.audio_container&#34;).show();
$(&#39;.container&#39;).show();
audio_play();
audio_num--;
containerSwiper.slideTo(0, 0, false);
containerSwiper.autoplay.start();
containerSwiper.init();
}, false);" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ed4902896fd672e979e494f77e01cd6a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-11T23:04:48+08:00" />
<meta property="article:modified_time" content="2021-08-11T23:04:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信播放在服务器视频无法播放音乐,H5页面在ios微信中，视频播放完成自动播放音频不成功...</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>1.需求：H5页面视频播放完成后，自动播放音频</p> 
 <p>2.开始在video播放完成后，调用音频播放没成功。无奈，加了个定时器尝试，也不行。(仅针对于ios微信上打开)</p> 
 <p>3.http://t1.toptest.yidianzixun...</p> 
 <p>var video_play=function(){<!-- --></p> 
 <p>$('.parent').css('background','#000');</p> 
 <p>window.video = document.getElementById('video');</p> 
 <p>window.video.play();</p> 
 <p>}</p> 
 <p>var audio_play=function(){<!-- --></p> 
 <p>window.audio = document.getElementById('audio');</p> 
 <p>window.audio.play();</p> 
 <p>}</p> 
 <p>document.addEventListener("WeixinJSBridgeReady", function () {<!-- --></p> 
 <p>if(ua.indexOf('android') &gt; -1 || ua.indexOf('linux') &gt; -1){<!-- --></p> 
 <p>$('#video').attr('poster','https://ks3-cn-beijing.ksyun.com/static.toptest.yidianzixun.com/public/file/1523865098649/4891523864996_.pic_hd.jpg');</p> 
 <p>}else{<!-- --></p> 
 <p>video_play();</p> 
 <p>// audio_play();</p> 
 <p>var t1 = window.setInterval(function(){<!-- --></p> 
 <p>if(audio_num==0){<!-- --></p> 
 <p>audio_play();</p> 
 <p>window.clearInterval(t1);</p> 
 <p>}</p> 
 <p>},1000);</p> 
 <p>}</p> 
 <p>}, false);</p> 
 <p>var audio_num=1;</p> 
 <p>//video播放结束</p> 
 <p>$("#video").get(0).addEventListener("ended", function () {<!-- --></p> 
 <p>$('.parent').hide();</p> 
 <p>$(".audio_container").show();</p> 
 <p>$('.container').show();</p> 
 <p>audio_play();</p> 
 <p>audio_num--;</p> 
 <p>containerSwiper.slideTo(0, 0, false);</p> 
 <p>containerSwiper.autoplay.start();</p> 
 <p>containerSwiper.init();</p> 
 <p>}, false);</p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e49f2848f735278a5a795d4d65aade86/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">服务器操作系统比较,服务器操作系统比较</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a3583fcf89d171d83fc788eff3ef2904/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">电脑ps4,Windows电脑玩PS4游戏，索尼：先来升级Win10吧</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>