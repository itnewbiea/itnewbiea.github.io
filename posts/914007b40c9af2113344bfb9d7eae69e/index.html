<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>shell脚本练习题 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="shell脚本练习题" />
<meta property="og:description" content="1、猜数字游戏 系统随机给出一个数，猜大小，
#!/bin/bash echo &#34;可以输入q或者quit退出！&#34; a=$[RANDOM%100&#43;1] while : do read -p &#34;请输入一个1-100之间的整数：&#34; num i=`echo $num | sed &#39;s/[0-9]//g&#39;` if [ -z &#34;$num&#34; ];then echo &#39;输入为空，请重新输入！&#39; continue fi if [ $num == q ] || [ $num == quit ];then exit 2 fi if [ ! -z &#34;$i&#34; ];then echo &#34;你输入的不是一个数字，请重新输入！&#34; continue fi if [ $num -lt 0 ] || [ $num -gt 100 ];then echo &#34;请输入1-100之间的整数！&#34; continue fi if [ $num -lt $a ];then echo &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/914007b40c9af2113344bfb9d7eae69e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-02-25T22:14:41+08:00" />
<meta property="article:modified_time" content="2019-02-25T22:14:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">shell脚本练习题</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_0"></a>1、猜数字游戏</h3> 
<p>系统随机给出一个数，猜大小，</p> 
<pre><code>#!/bin/bash
echo "可以输入q或者quit退出！"

a=$[RANDOM%100+1]
while :
do
        read -p "请输入一个1-100之间的整数：" num
        i=`echo $num | sed 's/[0-9]//g'`
                if [ -z "$num" ];then
                        echo '输入为空，请重新输入！'
                        continue
                fi
                        if [ $num == q ] || [ $num == quit ];then
                                exit 2
                        fi
                                if [ ! -z "$i" ];then
                                        echo "你输入的不是一个数字，请重新输入！"
                                        continue
                                fi
                        if [ $num -lt 0 ] || [ $num -gt 100 ];then
                                echo "请输入1-100之间的整数！"
                                continue
                        fi
                if [ $num -lt $a ];then
                        echo "猜小了，请重新猜"
                elif [ $num -gt $a ];then
                        echo "猜大了，请重新猜"
                else
                        echo "恭喜你才对了"
                        read -p "输入yes再来一次，输入no或者其他退出：" as
                        case $as in
                                yes)
                                continue
                                ;;
                                no)
                                exit
                                ;;
                                *)
                                break
                        esac
                fi
done              
</code></pre> 
<h3><a id="2web_47"></a>2、监控web可用性</h3> 
<p>写一个shell脚本，每隔10秒通过curl -I 返回的状态码来判定所访问的网站是否正常。比如，当状态码为200时，才算正常。</p> 
<pre><code>#!/bin/bash
read -p "请输入url：" url
sta=`curl -I $url 2&gt;/dev/null | head -1 | awk '{print $2}'`
while :
do
        if [ $sta != "200" ];then
                echo "$url down."
        else
                echo "$url is up!"
        fi
        sleep 10
        continue
done
</code></pre> 
<h3><a id="3_63"></a>3、三行变一行</h3> 
<pre><code>[root@localhost shell]# cat /tmp/1.txt 
1
2
3
4
5
6
7
8
9
10
11
12
[root@localhost shell]# sed 'N;N;s/\n/ /g' /tmp/1.txt 
1 2 3
4 5 6
7 8 9
10 11 12
</code></pre> 
<h3><a id="3_83"></a>3、检查服务</h3> 
<p>检查服务是否启动,如果没有启动，启动服务</p> 
<pre><code>#!/bin/bash
read -p "请输入服务名：" server
test=`ps -ef | grep $server | grep -v grep`
if [ ! -n "$test" ];then
        echo "$server is down!" 
        /etc/init.d/$server start &amp;&gt;/dev/null
        echo "$server restart is ok!"
else        
        echo "$server is up!" 
fi
</code></pre> 
<h3><a id="4getinterfacesh_96"></a>4、写一个getinterface.sh脚本，完成下面任务</h3> 
<p>1、使用以下形式：<a href="http://getinterface.sh" rel="nofollow">getinterface.sh</a> [-i interface | -I ip]<br> 2、当用户使用-i选项时，显示指定网卡的IP地址；当用户使用-I选项时，显示指定ip所属的网卡。<br> 例：sh <a href="http://getinterface.sh" rel="nofollow">getinterface.sh</a> -i eth0<br> sh <a href="http://getinterface.sh" rel="nofollow">getinterface.sh</a> -I 192.168.0.1<br> 3、当用户使用除[-i | -I]选项时，显示[-i interface | -I ip]此信息<br> 4、当用户指定信息不符合时，显示错误。（比如指定的eth0没有，而是eth1时）</p> 
<pre><code>#!/bin/bash
ip addr | awk -F ":" '$1 ~ /^[1-9]/ {print $2}' | sed 's/ //g' &gt; /tmp/eths.txt
[ -f /tmp/eth_ip.log ] &amp;&amp; rm -f /tmp/eth_ip.log
for eth in `cat /tmp/eths.txt`
do
        ip=`ifconfig $eth | awk -F " " '/inet / {print $2}' | cut -d ":" -f 2`
        echo "$eth:$ip" &gt;&gt; /tmp/eth_ip.log
done
useage()
{       
        echo "please useage:$0 -i 网卡名字 or $0 -I ip地址"
}

wrong_eth()
{
        if ! awk -F ":" '{print $1}' /tmp/eth_ip.log | grep -qw "^$1$"
        then
                echo "请指定正确的网卡名字"
                exit
        fi
}
wrong_ip()
{
        if ! awk -F ":" '{print $2}' /tmp/eth_ip.log | grep -qw "^$1$"
        then
                echo "请指定正确的ip地址"
                exit
        fi
}
if [ $# -ne 2 ]
then
        useage
        exit
fi
case $1 in
        -i)
        wrong_eth $2
        grep -w $2 /tmp/eth_ip.log | awk -F ":" '{print $2}'
        ;;
        -I)
        wrong_ip $2
        grep -w $2 /tmp/eth_ip.log | awk -F ":" '{print $1}'
        ;;
        *)
        useage
        exit
esac
</code></pre> 
<h3><a id="5_151"></a>5、写一个计算器，可以运行加减乘除等运算</h3> 
<pre><code>#!/bin/bash
read -p "请输入第一个数字：" num1
read -p "请输入运算符：" opr
read -p "请输入第二个数字：" num2

sum1=`echo $num1 | sed 's/[0-9]//g' | sed 's/-//g'`
sum2=`echo $num2 | sed 's/[0-9]//g' | sed 's/-//g'`

if [ -z "$sum1" -a -z "$sum2" ];then
        case $opr in
                \*)
                result=$(($num1*$num2))
                ;;
                +)
                result=$(($num1+$num2))
                ;;
                -)
                result=$(($num1-$num2))
                ;;
                /)
                result=$(($num1/$num2))
                ;;
                %)
                result=$(($num1%$num2))
                ;;
                *)
                echo "请输入正确的运算符:"
                exit 2
        esac
        echo $result
else
        echo "请输入正确的数字！！"
fi
</code></pre> 
<h3><a id="63_186"></a>6、3位随机数字</h3> 
<p>写一个脚本产生随机3未的数字，并且可以根据用户的输入参数来判断输出几组，例如： <a href="http://xn--number3-e73k064bfxr6v4a498d.sh" rel="nofollow">脚本名字为number3.sh</a><br> 执行方法：<br> bash <a href="http://number3.sh" rel="nofollow">number3.sh</a> 直接产生一组3位数字<br> bash <a href="http://number3.sh" rel="nofollow">number3.sh</a> 10 插上10组3为数字</p> 
<pre><code>#!/bin/bash
get_a_num() {
        n=$[$RANDOM%10]
        echo $n
}
get_numbers() {
        for i in 1 2 3;do
                a[$i]=`get_a_num`
        done
        echo ${a[@]}
}
if [ -n "$1" ];then
        m=`echo $1 | sed 's/[0-9]//g'`
        if [ -n "$m" ];then
                echo "Useage bash $0 n,n is a number,example:bash $0 5"
                exit
        else
                for i in `seq 1 $1`
                do
                        get_numbers
                done
        fi
else
        get_numbers
fi
</code></pre> 
<h3><a id="7chnametxtdoc_217"></a>7、编写一个chname脚本，将目录下的.txt结尾的文件名都修改为以.doc结尾</h3> 
<pre><code>#!/bin/bash
find /tmp/dir/ -type f -name "*.txt" &gt; /tmp/txt.list
for f in `cat /tmp/txt.list`
do
        n=`echo $f | sed -r 's/(.*)\.txt/\1/'`
        mv $f $n.doc
done
</code></pre> 
<h3><a id="8chuser5_226"></a>8、编写一个chuser程序，执行中没割5分钟检测指定的用户登录，用户名，从命令行输入；如果指定的用户登录，则显示相关信息</h3> 
<pre><code>#!/bin/bash
read -p "Please input the username:" user
USER=`env | grep USER | cut -d "=" -f 2`
while :
do
        if [ "$user" == "$USER" ];then
                echo $user login
        else
                echo $user not login
        fi
        sleep 300
done
</code></pre> 
<h3><a id="9pid_240"></a>9、判断pid是否一致</h3> 
<p>我们用ps -aux命令查看到的进程的pid都会在/proc内产生，如果通过命令看到的pid是/proc里面没有的，则进程很可能被修改了，编写一个脚本，定期检查下，自己的系统是否被入侵过</p> 
<pre><code>#!/bin/bash
ps aux | awk '/[0-9]/ {print $2}' | while read pid
do
	result=`find /proc/ -maxdepth 1 -type d -name "$pid"`
	if [ -z $result ];then
		echo "$pid abnormal!"
	fi
done
</code></pre> 
<h3><a id="10_251"></a>10、判断文件是否存在</h3> 
<p>编写一个名为iffile程序，它执行时判断/bin/目录下date文件是否存在？</p> 
<pre><code>#!/bin/bash

if [ -f /bin/date ]
then
	echo "/bin/date file exist!"
else
	echo "/bin/date not exist!"
fi
</code></pre> 
<h3><a id="11greet_262"></a>11、编写一个名为greet的文成程序，它执行时能根据系统当前的时间向用户输出问候信息，设从半夜到中午为造成，中午到下午六点为下午，下午六点到半夜为晚上</h3> 
<pre><code>#!/bin/bash

h=`date +%H`
if [ $h -ge 0 ] &amp;&amp; [ $h -lt 12 ]
then
        echo "Good morning."
elif [ $h -ge 12 ] &amp;&amp; [ $h -lt 18 ]
then
        echo "Good afternoon."
else
        echo "Good evening."
fi
</code></pre> 
<h3><a id="12ifuser_276"></a>12、编写一个名为ifuser的程序，它执行时代用户名作为命令行参数，判断该用户是否已经在系统中登录，并给出相关信息</h3> 
<pre><code>#!/bin/bash

read -p "Please input the username:" user
if who | grep -qw $user
then
	echo $user is online.
else
	echo $user not online
fi
</code></pre> 
<h3><a id="13menu_287"></a>13、编写一个名为menu的程序，实现简单的弹出式菜单，用户能根据显示的额菜单项从键盘选择执行对应的命令</h3> 
<pre><code>#!/bin/bash

function message()
{
	echo "0. w"
	echo "1. ls"
	echo "2. quit"
	read -p "please input parameter: " par
}
message
while [ $par -ne '2' ];do
	case $par in
	0)
		w
		;;
	1)
		ls
		;;
	2)
		exit
		;;
	*)
		echo "Unkown command"
		;;
	esac
	message
done
</code></pre> 
<h3><a id="14_317"></a>14、格式化输出</h3> 
<p>输入一串随机数字，然后按千分位输出，比如输入的数字串味“123456789”，输出为“123,456,789”</p> 
<pre><code> #!/bin/bash
read -p "输入一串数字：" num
v=`echo $num | sed 's/[0-9]//g'`
if [ -n "$v" ]
then
	echo "请输入纯数字！"
	exit
fi
echo $num | sed -r '{:number;s/([0-9]+)([0-9]{3})/\1,\2/;t number}'
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a386972e71843bc15c21fbcb0c42599c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">语言_JAVA</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8ce83a209f7041e64199378a479fd38e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">判断集合中是否存在重复元素/查找集合中所有的重复元素,并进行显示</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>