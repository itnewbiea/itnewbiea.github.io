<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OCS2 入门教程（四）- 机器人示例 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OCS2 入门教程（四）- 机器人示例" />
<meta property="og:description" content="系列文章目录 前言 OCS2 包含多个机器人示例。我们在此简要讨论每个示例的主要特点。
System
State Dim.
Input Dim.
Constrained
Caching
Double Integrator
2
1
No
No
Cartpole
4
1
Yes
No
Ballbot
10
3
No
No
Quadrotor
12
4
No
No
Mobile Manipulator
6-13
6-13
Yes
Yes / No
Legged Robot
24
24
Yes
No
对于所有这些机器人示例，有两个独立的软件包：
ocs2_&lt;robot&gt;： 提供机器人专用 MPC 实现库。ocs2_&lt;robot&gt;_ros： 用 ROS 封装 MPC 实现，以定义 ROS 节点。 一、Double Integrator 双积分器示例是我们最简单的问题。它模拟了一个沿 x 方向移动的一维点质量。模型是线性的，成本函数是二次函数。目标点通过参考管理器模块设置为二次成本。
# Build the example catkin build ocs2_double_integrator_ros # Source workspace # Do not forget to change &lt;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e30cc2115e11bca56deb1fbeaff21eb1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-06T11:20:15+08:00" />
<meta property="article:modified_time" content="2024-01-06T11:20:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OCS2 入门教程（四）- 机器人示例</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><a id="_0"></a>系列文章目录</h2> 
<p></p> 
<hr> 
<h2><a id="_12"></a>前言</h2> 
<p></p> 
<p>OCS2 包含多个机器人示例。我们在此简要讨论每个示例的主要特点。</p> 
<table><thead><tr><th> <p>System</p> </th><th> <p>State Dim.</p> </th><th> <p>Input Dim.</p> </th><th> <p>Constrained</p> </th><th> <p>Caching</p> </th></tr></thead><tbody><tr><td> <p>Double Integrator</p> </td><td> <p>2</p> </td><td> <p>1</p> </td><td> <p>No</p> </td><td> <p>No</p> </td></tr><tr><td> <p>Cartpole</p> </td><td> <p>4</p> </td><td> <p>1</p> </td><td> <p>Yes</p> </td><td> <p>No</p> </td></tr><tr><td> <p>Ballbot</p> </td><td> <p>10</p> </td><td> <p>3</p> </td><td> <p>No</p> </td><td> <p>No</p> </td></tr><tr><td> <p>Quadrotor</p> </td><td> <p>12</p> </td><td> <p>4</p> </td><td> <p>No</p> </td><td> <p>No</p> </td></tr><tr><td> <p>Mobile Manipulator</p> </td><td> <p>6-13</p> </td><td> <p>6-13</p> </td><td> <p>Yes</p> </td><td> <p>Yes / No</p> </td></tr><tr><td> <p>Legged Robot</p> </td><td> <p>24</p> </td><td> <p>24</p> </td><td> <p>Yes</p> </td><td> <p>No</p> </td></tr></tbody></table> 
<p>对于所有这些机器人示例，有两个独立的软件包：</p> 
<ul><li>ocs2_&lt;robot&gt;： 提供机器人专用 MPC 实现库。</li><li>ocs2_&lt;robot&gt;_ros： 用 ROS 封装 MPC 实现，以定义 ROS 节点。</li></ul> 
<p> </p> 
<hr> 
<p></p> 
<h2><a id="pandas_22"></a>一、Double Integrator</h2> 
<p>        双积分器示例是我们最简单的问题。它模拟了一个沿 x 方向移动的一维点质量。模型是线性的，成本函数是二次函数。目标点通过参考管理器模块设置为二次成本。</p> 
<pre><code class="language-bash"># Build the example
catkin build ocs2_double_integrator_ros
# Source workspace
# Do not forget to change &lt;...&gt; parts
source &lt;directory_to_ws&gt;/&lt;catkin_ws_name&gt;/devel/setup.bash

# Launch the example
roslaunch ocs2_double_integrator_ros double_integrator.launch</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/12/b2/EXEEgc3z_o.gif"> </p> 
<h2>二、Cartpole </h2> 
<p>        推车杆的例子是一个典型的控制问题，一根杆子通过一个无驱动的接头连接到一辆小车上。小车沿着无摩擦轨道移动。目标是在遵守输入限制的前提下，通过沿轨道加速或减速小车，使摆锤从右下方位置开始摆动起来并保持平衡。 </p> 
<pre><code class="language-bash"># Build the example
catkin build ocs2_cartpole_ros
# Source workspace
# Do not forget to change &lt;...&gt; parts
source &lt;directory_to_ws&gt;/&lt;catkin_ws_name&gt;/devel/setup.bash

# Launch the example
roslaunch ocs2_cartpole_ros cartpole.launch</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9c/76/lOVJ9g80_o.gif"> </p> 
<h2>三、Ballbot</h2> 
<p>        Ballbot 是一个 5DoF 系统。该平台是一个扭矩控制的全向机器人，通过三个全向轮在一个球上保持平衡。该系统具有非线性动力学特性，并表现出非最小相位行为。系统动力学以 Ballbot 的前向动力学为基础，通过自动微分计算流量图的线性近似值。任务目标是根据用户指令控制机器人的 XY 位置和偏航。 </p> 
<pre><code class="language-bash"># Build the example
catkin build ocs2_ballbot_ros
# Source workspace
# Do not forget to change &lt;...&gt; parts
source &lt;directory_to_ws&gt;/&lt;catkin_ws_name&gt;/devel/setup.bash

# Launch the example
roslaunch ocs2_ballbot_ros ballbot.launch</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/99/11/6Y5PoCkb_o.gif"> </p> 
<h2>四、Quadrotor</h2> 
<p>        四旋翼机器人示例是一个 6DoF 系统。平台建模为浮动基座、刚体动力学、三维力矩和机器人法线方向的一维力控制。系统动力学及其导数均由代码生成。本示例旨在跟踪用户指令，该指令定义为四旋翼机器人的三维位置和偏航。 </p> 
<pre><code class="language-bash"># Build the example
catkin build ocs2_quadrotor_ros
# Source workspace
# Do not forget to change &lt;...&gt; parts
source &lt;directory_to_ws&gt;/&lt;catkin_ws_name&gt;/devel/setup.bash

# Launch the example
roslaunch ocs2_quadrotor_ros quadrotor.launch</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/74/78/lwBOjhm4_o.gif"> </p> 
<h2 style="background-color:transparent;">五、Mobile Manipulator</h2> 
<p>        移动机械手示例是一个全运动学问题。模型包括一个 6DOF 机械臂和移动底座的 2D 位置和航向。控制输入为机械臂的 6 个关节速度以及底座的前进速度和旋转速度。任务目标是跟踪 6DoF 末端执行器姿势。关节位置和速度限制包含在最优控制问题的约束条件中。避免自碰撞是根据 URDF 模型中的碰撞体和避免碰撞约束来实现的（参见 ocs2_self_collision）。</p> 
<p>注：本例实现了 MPC 的缓存和非缓存变体，可通过配置文件中的 usePreComputation 标志进行选择。</p> 
<p>        系统模型通过解析 URDF 和任务文件确定。目前支持以下系统模型：</p> 
<ul><li>默认（值：0）： 通过解析 URDF 获得的默认系统模型。</li><li>驱动假轮距（值：1）： 在从 URDF 解析的模型中添加一个假 XY-Yaw 关节，该关节在整体动力学约束（速度控制）下被驱动。这是一个由 SE(2) 控制底座的移动机械手模型。</li><li>Unactuated 假浮动基座（值：2）： 在从 URDF 解析出的模型中添加一个未驱动的 XYZ-RPY 假关节。</li><li>激活的虚拟浮动基点（值：3）： 为从 URDF 中解析出的模型添加一个完全致动（速度控制）的 XYZ-RPY 假关节。这是一个用 SE(3) 控制基座的移动机械手模型。</li></ul> 
<p>要玩转不同的模型类型，可以更改 task.info 文件中的模型信息。</p> 
<p> </p> 
<pre><code class="language-bash"># Build the example
catkin build ocs2_mobile_manipulator_ros
# Source workspace
# Do not forget to change &lt;...&gt; parts
source &lt;directory_to_ws&gt;/&lt;catkin_ws_name&gt;/devel/setup.bash</code></pre> 
<p>对于几种常见的机器人机械手，我们提供了使用 OCS2 运行它们的示例。这里提供了生成机器人模型文件（URDF）的步骤。</p> 
<p>在其中一些示例中，我们通过 task.info 文件中的 model_information.removeJoints 属性固定了 URDF 中的某些关节（如抓手手指关节或车轮关节）。这样就可以简化所构建的 Pinocchio 模型。仅出于 rviz 可视化目的，task.info 文件中 removeJoints 属性下的关节将通过虚拟仿真节点发布在零关节位置。</p> 
<blockquote> 
 <p><span style="color:#fe2c24;">警告</span></p> 
 <p>对于这些示例，可能需要对 MPC 进行额外调整才能在硬件上运行。此外，对于某些示例，需要将碰撞网格简化为原始形状（如圆柱和方框），以便避免碰撞。</p> 
 <p>我们欢迎社会各界为这些用例做出贡献。</p> 
</blockquote> 
<h3>5.1 Mabi-Mobile</h3> 
<pre><code class="language-bash">roslaunch ocs2_mobile_manipulator_ros manipulator_mabi_mobile.launch</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e4/0c/0BnWdNiF_o.gif"> </p> 
<h3 style="background-color:transparent;">5.2 Kinova Jaco2 </h3> 
<pre><code class="language-bash"># For 6-Dof
roslaunch ocs2_mobile_manipulator_ros manipulator_kinova_j2n6.launch
# For 7-Dof
roslaunch ocs2_mobile_manipulator_ros manipulator_kinova_j2n7.launch</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/31/f8/JTv8jwJw_o.gif"></p> 
<h3 style="background-color:transparent;">5.3 Franka Panda </h3> 
<pre><code class="language-bash">roslaunch ocs2_mobile_manipulator_ros manipulator_franka.launch</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ce/6d/t5luBs5a_o.gif"> </p> 
<h3 style="background-color:transparent;">5.4 Willow Garage PR2 </h3> 
<pre><code class="language-bash">roslaunch ocs2_mobile_manipulator_ros manipulator_pr2.launch</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5e/c5/zTOUd2gd_o.gif"> </p> 
<h3 style="background-color:transparent;">5.5 Clearpath Ridgeback with UR-5</h3> 
<pre><code class="language-bash">roslaunch ocs2_mobile_manipulator_ros manipulator_ridgeback_ur5.launch</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/83/ef/5MS7TNpW_o.gif"></p> 
<h2>六、Legged Robot  </h2> 
<p>        腿部机器人示例是一个开关系统问题。它采用 MPC 方法对四足机器人 Anymal 进行运动控制。机器人的步态由用户定义，并可在执行过程中通过解算器同步模块（步态接收器）进行修改。模式序列和目标轨迹通过参考管理器模块（SwitchedModelReferenceManager）进行定义。成本函数为二次罚则，用于跟踪指令的基座位置和偏航，并将机器人的重量平均分配到站立脚上。该问题有几个取决于模式的约束条件，例如摆动脚的力为零，站立脚的速度为零。在接触力上强制执行摩擦锥，为避免脚擦伤，摆动脚在 Z 方向上跟踪预定义的运动。</p> 
<p>        系统动力学有两种建模方式，可从配置文件中选择：</p> 
<ol><li> 单刚体动力学（SRBD）： 该模型假定系统具有恒定惯性，与关节位置无关。</li><li> 全中心动力学（FCD）： 该模型使用中心动力学，包含机器人四肢的运动。与 SRBD 相似，它考虑了机器人的全运动学。</li></ol> 
<pre><code class="language-bash"># Build the example
catkin build ocs2_legged_robot_ros
# Source workspace
# Do not forget to change &lt;...&gt; parts
source &lt;directory_to_ws&gt;/&lt;catkin_ws_name&gt;/devel/setup.bash

# Launch the example for DDP
roslaunch ocs2_legged_robot_ros legged_robot_ddp.launch
# OR launch the example for SQP
roslaunch ocs2_legged_robot_ros legged_robot_sqp.launch</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f8/56/m2mSLzRK_o.gif"> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d59f7bad8523f533e295ebabb33a63fd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">华为机试（Python）真题Od【A卷&#43;B卷&#43;C卷&#43;D卷】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bea2767fdc7ffca0ff3865d3ca50bcd4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">专业课128分总分400&#43;南京理工大学818信号系统与数字电路南理工考研经验分享</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>