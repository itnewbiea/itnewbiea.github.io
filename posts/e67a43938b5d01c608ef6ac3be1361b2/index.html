<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Gradio使用教程-检测分割界面 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Gradio使用教程-检测分割界面" />
<meta property="og:description" content="from ultralytics import YOLO from PIL import Image import cv2 import gradio as gr model_seg = YOLO(&#39;/home/user-f381/Python_Project/pytorch_project/ultralytics/runs/segment/train/weights/best.pt&#39;) # 加载自定义模型 model_detect = YOLO(&#39;/home/user-f381/Python_Project/pytorch_project/ultralytics/runs/detect/train/weights/best.pt&#39;) def seg(image): results = model_seg([image]) # 返回 Results 对象列表 for r in results: im_array = r.plot() # 绘制包含预测结果的BGR numpy数组 im = Image.fromarray(im_array[..., ::-1]) # RGB PIL图像 # im.show() # 显示图像 # im.save(&#39;results_seg.jpg&#39;) # 保存图像 return im def det(image): results = model_detect([image]) # 返回 Results 对象列表 for r in results: im_array = r." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e67a43938b5d01c608ef6ac3be1361b2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-12T16:52:16+08:00" />
<meta property="article:modified_time" content="2023-12-12T16:52:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Gradio使用教程-检测分割界面</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="language-python">
from ultralytics import YOLO
from PIL import Image
import cv2
import gradio as gr

model_seg = YOLO('/home/user-f381/Python_Project/pytorch_project/ultralytics/runs/segment/train/weights/best.pt')  # 加载自定义模型
model_detect = YOLO('/home/user-f381/Python_Project/pytorch_project/ultralytics/runs/detect/train/weights/best.pt')

def seg(image):
    results = model_seg([image])  # 返回 Results 对象列表
    for r in results:
        im_array = r.plot()  # 绘制包含预测结果的BGR numpy数组
        im = Image.fromarray(im_array[..., ::-1])  # RGB PIL图像
        # im.show()  # 显示图像
        # im.save('results_seg.jpg')  # 保存图像
    return im

def det(image):
    results = model_detect([image])  # 返回 Results 对象列表
    for r in results:
        im_array = r.plot()  # 绘制包含预测结果的BGR numpy数组
        im = Image.fromarray(im_array[..., ::-1])  # RGB PIL图像
        # im.show()  # 显示图像
        # im.save('results_seg.jpg')  # 保存图像
    return im



with gr.Blocks() as demo:


    with gr.Tab("语义分割"):
        gr.Markdown("# yolov8语义分割演示")
        # 在这个域里都按列
        with gr.Row():
            in_img = gr.Image(sources='upload', type='pil')
            out_img = gr.Image(type='pil')

        # 所有组建默认是垂直排列gr.Examples　gr.Button　gr.Markdown都是组件
        gr.Examples(examples=['./images/000000000049.jpg'], inputs=[in_img])
        button = gr.Button("执行分割", variant="primary")
        button.click(seg,
                        inputs=in_img,
                        outputs=out_img,
                        concurrency_limit=10)

    with gr.Tab("目标检测"):
        gr.Markdown("# yolov8目标检测演示")
        with gr.Row():
            in_img = gr.Image(sources='upload', type='pil')
            out_img = gr.Image(type='pil')

        gr.Examples(examples=['./images/000000000307.jpg'], inputs=[in_img])
        button = gr.Button("执行检测", variant="primary")

        button.click(det,
                        inputs=in_img,
                        outputs=out_img,
                        concurrency_limit=10)


gr.close_all()
demo.queue()
demo.launch()



    </code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a2b7d3fcdb5bb6284ded4990099ddf8a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LIO-SAM的安装与运行 --ubuntu18.04</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/49b5e87b81f14dd5eb2c6587f47a640a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">倾斜三维模型生成DOM、DSM（附下载软件）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>