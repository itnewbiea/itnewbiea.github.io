<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>矩阵式键盘按键值的数码管显示实验 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="矩阵式键盘按键值的数码管显示实验" />
<meta property="og:description" content="#include&lt;reg51.h&gt; //包含51单片机寄存器定义的头文件
sbit P14=P1^4; //将P14位定义为P1.4引脚
sbit P15=P1^5; //将P15位定义为P1.5引脚
sbit P16=P1^6; //将P16位定义为P1.6引脚
sbit P17=P1^7; //将P17位定义为P1.7引脚
unsigned char code Tab[ ]={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90}; //数字0~9的段码
unsigned char keyval; //定义变量储存按键值
/**************************************************************
函数功能：数码管动态扫描延时
**************************************************************/
void led_delay(void) {
unsigned char j;
for(j=0;j&lt;200;j&#43;&#43;)
;
}
/**************************************************************
函数功能：按键值的数码管显示子程序
**************************************************************/
void display(unsigned char k)
{
P2=0xbf; //点亮数码管DS6
P0=Tab[k/10]; //显示十位 led_delay(); //动态扫描延时 P2=0x7f; //点亮数码管DS7
P0=Tab[k%10]; //显示个位 led_delay(); //动态扫描延时 }
/**************************************************************
函数功能：软件延时子程序
**************************************************************/
void delay20ms(void) {
unsigned char i,j;
for(i=0;i&lt;100;i&#43;&#43;)
for(j=0;j&lt;60;j&#43;&#43;)
;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/357e0c3e317fc777aea912feed1ce234/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T19:21:13+08:00" />
<meta property="article:modified_time" content="2024-01-04T19:21:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">矩阵式键盘按键值的数码管显示实验</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>#include&lt;reg51.h&gt;   //包含51单片机寄存器定义的头文件<br> sbit P14=P1^4;      //将P14位定义为P1.4引脚<br> sbit P15=P1^5;      //将P15位定义为P1.5引脚<br> sbit P16=P1^6;      //将P16位定义为P1.6引脚<br> sbit P17=P1^7;      //将P17位定义为P1.7引脚<br> unsigned char code Tab[ ]={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90};    //数字0~9的段码<br> unsigned char keyval;    //定义变量储存按键值<br> /**************************************************************<br> 函数功能：数码管动态扫描延时<br> **************************************************************/<br> void led_delay(void)     <br>  {<!-- --><br>    unsigned char j;<br>     for(j=0;j&lt;200;j++)<br>      ;<br>   }<br> /**************************************************************<br> 函数功能：按键值的数码管显示子程序<br> **************************************************************/<br>  void display(unsigned char k)<br> {<!-- --><br>    P2=0xbf;            //点亮数码管DS6<br>    P0=Tab[k/10];       //显示十位 <br>    led_delay();        //动态扫描延时 <br>    P2=0x7f;            //点亮数码管DS7<br>    P0=Tab[k%10];       //显示个位 <br>     led_delay();       //动态扫描延时   <br>  }<br> /**************************************************************<br> 函数功能：软件延时子程序<br> **************************************************************/<br>  void delay20ms(void)   <br> {<!-- --><br>    unsigned char i,j;<br>     for(i=0;i&lt;100;i++)<br>      for(j=0;j&lt;60;j++)<br>            ;<br>  }<br> /**************************************************************<br> 函数功能：主函数<br> **************************************************************/ <br>  void main(void)<br>  {<!-- --><br>    EA=1;                  //开总中断<br>     ET0=1;                 //定时器T0中断允许         <br>     TMOD=0x01;            //使用定时器T0的模式1<br>     TH0=(65536-500)/256;  //定时器T0的高8位赋初值<br>     TL0=(65536-500)%256;  //定时器T0的高8位赋初值<br>     TR0=1;                //启动定时器T0<br>     keyval=0x00;          //按键值初始化为0<br>        <br>     while(1)                //无限循环<br>         {<!-- --><br>           display(keyval);   //调用按键值的数码管显示子程序<br>         }</p> 
<p>}<br> /**************************************************************<br> 函数功能：定时器0的中断服务子程序，进行键盘扫描，判断键位<br> **************************************************************/ <br>   void time0_interserve(void) interrupt 1 using 1    //定时器T0的中断编号为1，使用第一组寄存器<br>   {<!-- --><br>      TR0=0;                  //关闭定时器T0<br>      P1=0xf0;                 //所有行线置为低电平“0”，所有列线置为高电平“1”<br>       if((P1&amp;0xf0)!=0xf0)      //列线中有一位为低电平“0”，说明有键按下<br>          delay20ms();           //延时一段时间、软件消抖<br>       if((P1&amp;0xf0)!=0xf0)      //确实有键按下<br>         {<!-- --><br>            P1=0xfe;             //第一行置为低电平“0”（P1.0输出低电平“0”）<br>            if(P14==0)           //如果检测到接P1.4引脚的列线为低电平“0”<br>              keyval=1;            //可判断是S1键被按下<br>            if(P15==0)             //如果检测到接P1.5引脚的列线为低电平“0”<br>              keyval=2;            //可判断是S2键被按下<br>            if(P16==0)             //如果检测到接P1.6引脚的列线为低电平“0”<br>              keyval=3;            //可判断是S3键被按下<br>            if(P17==0)            //如果检测到接P1.7引脚的列线为低电平“0”<br>              keyval=4;           //可判断是S4键被按下</p> 
<p>           P1=0xfd;             //第二行置为低电平“0”（P1.1输出低电平“0”）<br>           if(P14==0)           //如果检测到接P1.4引脚的列线为低电平“0”<br>              keyval=5;            //可判断是S5键被按下<br>            if(P15==0)             //如果检测到接P1.5引脚的列线为低电平“0”<br>              keyval=6;            //可判断是S6键被按下<br>            if(P16==0)             //如果检测到接P1.6引脚的列线为低电平“0”<br>              keyval=7;            //可判断是S7键被按下<br>            if(P17==0)            //如果检测到接P1.7引脚的列线为低电平“0”<br>              keyval=8;           //可判断是S8键被按下<br>         <br>            P1=0xfb;             //第三行置为低电平“0”（P1.2输出低电平“0”）<br>         if(P14==0)          //如果检测到接P1.4引脚的列线为低电平“0”<br>              keyval=9;          //可判断是S9键被按下<br>            if(P15==0)           //如果检测到接P1.5引脚的列线为低电平“0”<br>              keyval=10;         //可判断是S10键被按下<br>            if(P16==0)          //如果检测到接P1.6引脚的列线为低电平“0”<br>              keyval=11;        //可判断是S11键被按下<br>            if(P17==0)          //如果检测到接P1.7引脚的列线为低电平“0”<br>              keyval=12;        //可判断是S12键被按下</p> 
<p>           P1=0xf7;             //第四行置为低电平“0”（P1.3输出低电平“0”）<br>         if(P14==0)          //如果检测到接P1.4引脚的列线为低电平“0”<br>              keyval=13;          //可判断是S13键被按下<br>            if(P15==0)           //如果检测到接P1.5引脚的列线为低电平“0”<br>              keyval=14;         //可判断是S14键被按下<br>            if(P16==0)          //如果检测到接P1.6引脚的列线为低电平“0”<br>              keyval=15;        //可判断是S15键被按下<br>            if(P17==0)          //如果检测到接P1.7引脚的列线为低电平“0”<br>              keyval=16;        //可判断是S16键被按下<br>        }<br>      TR0=1;                    //开启定时器T0<br>      TH0=(65536-500)/256;  //定时器T0的高8位赋初值<br>       TL0=(65536-500)%256;  //定时器T0的高8位赋初值         <br>  }</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/13/c4/fT7Ga6Uq_o.png"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/da1c16552be217d14c0e33fa82b61de5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据挖掘总结(考试版）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a5dae69340b4cf661adfbe280f33531a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">血细胞图像检测Matlab代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>