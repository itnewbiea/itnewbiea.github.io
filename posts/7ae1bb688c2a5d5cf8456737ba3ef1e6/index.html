<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>作业调度框架 Quartz 学习笔记(三) -- Cron表达式 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="作业调度框架 Quartz 学习笔记(三) -- Cron表达式" />
<meta property="og:description" content="前面两篇说的是简单的触发器(SimpleTrigger) , SimpleTrigger 只能处理简单的事件出发,如果想灵活的进行任务的触发,就要请出
CronTrigger 这个重要人物了.
CronTrigger也是Quartz最重要的特色之一，通过Quartz特有的Cron表达式来确定某类时间，能完成类似&#34;2011年11月11号(神棍节,已经过去了)，每个星期三XXX&#34;之类的复杂定时任务。 代码还是老套路 , 两个类 : SimpleJob.java 和 CronTriggerExample.java
建议先跑代码 ,看结果 ,然后再 看代码
SimpleJob.java
[java] view plain copy print ? import java.text.SimpleDateFormat; import java.util.Calendar; import org.quartz.Job; import org.quartz.JobExecutionContext; import org.quartz.JobExecutionException; public class SimpleJob implements Job { @Override public void execute(JobExecutionContext context) throws JobExecutionException { // job 的名字 String jobName = context.getJobDetail().getKey().getName(); // 任务执行的时间 SimpleDateFormat dateFormat = new SimpleDateFormat(&#34;yyyy 年 MM 月 dd 日 HH 时 mm 分 ss 秒&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/7ae1bb688c2a5d5cf8456737ba3ef1e6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-07-10T12:12:01+08:00" />
<meta property="article:modified_time" content="2014-07-10T12:12:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">作业调度框架 Quartz 学习笔记(三) -- Cron表达式</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>   前面两篇说的是简单的触发器(SimpleTrigger) , SimpleTrigger 只能处理简单的事件出发,如果想灵活的进行任务的触发,就要请出</p> 
<p><span style="color:rgb(204,0,0)">CronTrigger</span> 这个重要人物了.</p> 
<p><span style="line-height:25.2px; font-family:helvetica,tahoma,arial,sans-serif; font-size:14px"><span style="font-size:12px">    CronTrigger也是Quartz最重要的特色之一，通过Quartz特有的Cron表达式来确定某类时间，能完成类似"2011年11月11号(神棍节,已经过去了)，每个星期三XXX"之类的复杂定时任务。</span> </span></p> 
<p>代码还是老套路 , 两个类 : SimpleJob.java  和 CronTriggerExample.java</p> 
<p> </p> 
<p><strong><span style="color:rgb(204,102,204)">建议先跑代码 ,看结果 ,然后再 看代码</span></strong></p> 
<p> </p> 
<p><span style="color:rgb(255,0,0)">SimpleJob.java</span></p> 
<div class="dp-highlighter bg_java"> 
 <div class="bar"> 
  <div class="tools"> 
   <strong>[java]</strong> 
   <a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/lnara/article/details/8636656#" rel="noopener noreferrer"> view plain</a> 
   <a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/lnara/article/details/8636656#" rel="noopener noreferrer">copy</a> 
   <a target="_blank" title="print" class="PrintSource" href="http://blog.csdn.net/lnara/article/details/8636656#" rel="noopener noreferrer">print</a> 
   <a target="_blank" title="?" class="About" href="http://blog.csdn.net/lnara/article/details/8636656#" rel="noopener noreferrer">?</a> 
  </div> 
 </div> 
 <ol class="dp-j"><li class="alt"><span class="keyword">import</span> java.text.SimpleDateFormat;  </li><li><span class="keyword">import</span> java.util.Calendar;  </li><li class="alt">  </li><li><span class="keyword">import</span> org.quartz.Job;  </li><li class="alt"><span class="keyword">import</span> org.quartz.JobExecutionContext;  </li><li><span class="keyword">import</span> org.quartz.JobExecutionException;  </li><li class="alt">  </li><li><span class="keyword">public</span> <span class="keyword">class</span> SimpleJob <span class="keyword">implements</span> Job {  </li><li class="alt">  </li><li>    <span class="annotation">@Override</span>  </li><li class="alt">    <span class="keyword">public</span> <span class="keyword">void</span> execute(JobExecutionContext context)  </li><li>            <span class="keyword">throws</span> JobExecutionException {  </li><li class="alt">        <span class="comment">// job 的名字</span>  </li><li>        String jobName = context.getJobDetail().getKey().getName();  </li><li class="alt">          </li><li>        <span class="comment">// 任务执行的时间</span>  </li><li class="alt">        SimpleDateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy 年 MM 月 dd 日  HH 时 mm 分 ss 秒"</span>);  </li><li>        String jobRunTime = dateFormat.format(Calendar.getInstance().getTime());  </li><li class="alt">          </li><li>        <span class="comment">// 输出任务执行情况</span>  </li><li class="alt">        System.out.println(<span class="string">"任务 : "</span> + jobName + <span class="string">" 在  "</span> +jobRunTime + <span class="string">" 执行了 "</span>);  </li><li>    }  </li><li class="alt">}  </li></ol> 
</div> 
<pre><code class="language-java">import java.text.SimpleDateFormat;
import java.util.Calendar;

import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;

public class SimpleJob implements Job {

	@Override
	public void execute(JobExecutionContext context)
			throws JobExecutionException {
		// job 的名字
		String jobName = context.getJobDetail().getKey().getName();
		
		// 任务执行的时间
		SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy 年 MM 月 dd 日  HH 时 mm 分 ss 秒");
		String jobRunTime = dateFormat.format(Calendar.getInstance().getTime());
		
		// 输出任务执行情况
		System.out.println("任务 : " + jobName + " 在  " +jobRunTime + " 执行了 ");
	}
}
</code></pre> 
<p><span style="color:rgb(255,0,0)">CronTriggerExample.java</span></p> 
<div class="dp-highlighter bg_java"> 
 <div class="bar"> 
  <div class="tools"> 
   <strong>[java]</strong> 
   <a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/lnara/article/details/8636656#" rel="noopener noreferrer"> view plain</a> 
   <a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/lnara/article/details/8636656#" rel="noopener noreferrer">copy</a> 
   <a target="_blank" title="print" class="PrintSource" href="http://blog.csdn.net/lnara/article/details/8636656#" rel="noopener noreferrer">print</a> 
   <a target="_blank" title="?" class="About" href="http://blog.csdn.net/lnara/article/details/8636656#" rel="noopener noreferrer">?</a> 
  </div> 
 </div> 
 <ol class="dp-j"><li class="alt"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.CronScheduleBuilder.cronSchedule;  </li><li><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.JobBuilder.newJob;  </li><li class="alt"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.TriggerBuilder.newTrigger;  </li><li>  </li><li class="alt"><span class="keyword">import</span> java.text.SimpleDateFormat;  </li><li><span class="keyword">import</span> java.util.Date;  </li><li class="alt">  </li><li><span class="keyword">import</span> org.quartz.CronTrigger;  </li><li class="alt"><span class="keyword">import</span> org.quartz.JobDetail;  </li><li><span class="keyword">import</span> org.quartz.Scheduler;  </li><li class="alt"><span class="keyword">import</span> org.quartz.SchedulerFactory;  </li><li><span class="keyword">import</span> org.quartz.SchedulerMetaData;  </li><li class="alt"><span class="keyword">import</span> org.quartz.impl.StdSchedulerFactory;  </li><li>  </li><li class="alt"><span class="comment">/**</span> </li><li><span class="comment"> * Cron Triggers 的使用</span> </li><li class="alt"><span class="comment"> */</span>  </li><li><span class="keyword">public</span> <span class="keyword">class</span> CronTriggerExample {  </li><li class="alt">  </li><li>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> Exception {  </li><li class="alt">        CronTriggerExample example = <span class="keyword">new</span> CronTriggerExample();  </li><li>        example.run();  </li><li class="alt">    }  </li><li>  </li><li class="alt">    <span class="keyword">public</span> <span class="keyword">void</span> run() <span class="keyword">throws</span> Exception {  </li><li>        <span class="comment">// 日期格式化</span>  </li><li class="alt">        SimpleDateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat(  </li><li>                <span class="string">"yyyy 年 MM 月 dd 日  HH 时 mm 分 ss 秒"</span>);  </li><li class="alt">  </li><li>        SchedulerFactory sf = <span class="keyword">new</span> StdSchedulerFactory();  </li><li class="alt">        Scheduler sched = sf.getScheduler();  </li><li>        System.out.println(<span class="string">"--------------- 初始化 -------------------"</span>);  </li><li class="alt">  </li><li>        <span class="comment">// job1 每20s运行一次</span>  </li><li class="alt">        JobDetail job = newJob(SimpleJob.<span class="keyword">class</span>).withIdentity(<span class="string">"job1"</span>, <span class="string">"group1"</span>)  </li><li>                .build();  </li><li class="alt">  </li><li>        CronTrigger trigger = newTrigger().withIdentity(<span class="string">"trigger1"</span>, <span class="string">"group1"</span>)  </li><li class="alt">                .withSchedule(cronSchedule(<span class="string">"0/20 * * * * ?"</span>)).build();  </li><li>  </li><li class="alt">        Date ft = sched.scheduleJob(job, trigger);  </li><li>        System.out.println(job.getKey().getName() + <span class="string">" 将在: "</span>  </li><li class="alt">                + dateFormat.format(ft) + <span class="string">" 运行 . 并且基于Cron表达式 : "</span>  </li><li>                + trigger.getCronExpression() + <span class="string">"  (含义:每20s运行一次)"</span>);  </li><li class="alt">  </li><li>        <span class="comment">// job2 偶数分钟的第15秒运行</span>  </li><li class="alt">        job = newJob(SimpleJob.<span class="keyword">class</span>).withIdentity(<span class="string">"job2"</span>, <span class="string">"group1"</span>).build();  </li><li>        trigger = newTrigger().withIdentity(<span class="string">"trigger2"</span>, <span class="string">"group1"</span>)  </li><li class="alt">                .withSchedule(cronSchedule(<span class="string">"15 0/2 * * * ?"</span>)).build();  </li><li>  </li><li class="alt">        ft = sched.scheduleJob(job, trigger);  </li><li>        System.out.println(job.getKey().getName() + <span class="string">" 将在: "</span>  </li><li class="alt">                + dateFormat.format(ft) + <span class="string">" 运行 . 并且基于Cron表达式 : "</span>  </li><li>                + trigger.getCronExpression() + <span class="string">"  (含义:偶数分钟的第15秒运行)"</span>);  </li><li class="alt">  </li><li>        <span class="comment">// job3 从8时到17时 ,每个 偶数分钟执行一次</span>  </li><li class="alt">        job = newJob(SimpleJob.<span class="keyword">class</span>).withIdentity(<span class="string">"job3"</span>, <span class="string">"group1"</span>).build();  </li><li>  </li><li class="alt">        trigger = newTrigger().withIdentity(<span class="string">"trigger3"</span>, <span class="string">"group1"</span>)  </li><li>                .withSchedule(cronSchedule(<span class="string">"0 0/2 8-17 * * ?"</span>)).build();  </li><li class="alt">  </li><li>        ft = sched.scheduleJob(job, trigger);  </li><li class="alt">        System.out.println(job.getKey().getName() + <span class="string">" 将在: "</span>  </li><li>                + dateFormat.format(ft) + <span class="string">" 运行 . 并且基于Cron表达式 : "</span>  </li><li class="alt">                + trigger.getCronExpression() + <span class="string">"  (含义:从8时到17时 ,每个 偶数分钟执行一次)"</span>);  </li><li>  </li><li class="alt">        <span class="comment">// job4 从17时到23时,每3分钟运行一次</span>  </li><li>        job = newJob(SimpleJob.<span class="keyword">class</span>).withIdentity(<span class="string">"job4"</span>, <span class="string">"group1"</span>).build();  </li><li class="alt">  </li><li>        trigger = newTrigger().withIdentity(<span class="string">"trigger4"</span>, <span class="string">"group1"</span>)  </li><li class="alt">                .withSchedule(cronSchedule(<span class="string">"0 0/3 17-23 * * ?"</span>)).build();  </li><li>  </li><li class="alt">        ft = sched.scheduleJob(job, trigger);  </li><li>        System.out.println(job.getKey().getName() + <span class="string">" 将在: "</span>  </li><li class="alt">                + dateFormat.format(ft) + <span class="string">" 运行 . 并且基于Cron表达式 : "</span>  </li><li>                + trigger.getCronExpression() + <span class="string">"  (含义: 从17时到23时,每3分钟运行一次)"</span>);  </li><li class="alt">  </li><li>        <span class="comment">// job5 每个月的1号和15号的上午10点 运行</span>  </li><li class="alt">        job = newJob(SimpleJob.<span class="keyword">class</span>).withIdentity(<span class="string">"job5"</span>, <span class="string">"group1"</span>).build();  </li><li>  </li><li class="alt">        trigger = newTrigger().withIdentity(<span class="string">"trigger5"</span>, <span class="string">"group1"</span>)  </li><li>                .withSchedule(cronSchedule(<span class="string">"0 0 10am 1,15 * ?"</span>)).build();  </li><li class="alt">  </li><li>        ft = sched.scheduleJob(job, trigger);  </li><li class="alt">        System.out.println(job.getKey().getName() + <span class="string">" 将在: "</span>  </li><li>                + dateFormat.format(ft) + <span class="string">" 运行 . 并且基于Cron表达式 : "</span>  </li><li class="alt">                + trigger.getCronExpression() + <span class="string">"  (含义:每个月的1号和15号的上午10点 运行)"</span>);  </li><li>  </li><li class="alt">        <span class="comment">// job6 周一至周五,每30秒运行一次</span>  </li><li>        job = newJob(SimpleJob.<span class="keyword">class</span>).withIdentity(<span class="string">"job6"</span>, <span class="string">"group1"</span>).build();  </li><li class="alt">  </li><li>        trigger = newTrigger().withIdentity(<span class="string">"trigger6"</span>, <span class="string">"group1"</span>)  </li><li class="alt">                .withSchedule(cronSchedule(<span class="string">"0,30 * * ? * MON-FRI"</span>)).build();  </li><li>  </li><li class="alt">        ft = sched.scheduleJob(job, trigger);  </li><li>        System.out.println(job.getKey().getName() + <span class="string">" 将在: "</span>  </li><li class="alt">                + dateFormat.format(ft) + <span class="string">" 运行 . 并且基于Cron表达式 : "</span>  </li><li>                + trigger.getCronExpression() + <span class="string">"  (含义:周一至周五,每30秒运行一次 )"</span>);  </li><li class="alt">  </li><li>        <span class="comment">// job7 周六,周日 每30秒运行</span>  </li><li class="alt">        job = newJob(SimpleJob.<span class="keyword">class</span>).withIdentity(<span class="string">"job7"</span>, <span class="string">"group1"</span>).build();  </li><li>  </li><li class="alt">        trigger = newTrigger().withIdentity(<span class="string">"trigger7"</span>, <span class="string">"group1"</span>)  </li><li>                .withSchedule(cronSchedule(<span class="string">"0,30 * * ? * SAT,SUN"</span>)).build();  </li><li class="alt">  </li><li>        ft = sched.scheduleJob(job, trigger);  </li><li class="alt">        System.out.println(job.getKey().getName() + <span class="string">" 将在: "</span>  </li><li>                + dateFormat.format(ft) + <span class="string">" 运行 . 并且基于Cron表达式 : "</span>  </li><li class="alt">                + trigger.getCronExpression() + <span class="string">"  (含义:周六,周日  每30秒运行 )"</span>);  </li><li>  </li><li class="alt">        sched.start();  </li><li>  </li><li class="alt">        System.out.println(<span class="string">"------- 开始调度 (调用.start()方法) ----------------"</span>);  </li><li>        System.out.println(<span class="string">"------- 等待5分钟,给任务的调度留出时间  ... ------------"</span>);  </li><li class="alt">        <span class="keyword">try</span> {  </li><li>            Thread.sleep(300L * 1000L);  </li><li class="alt">        } <span class="keyword">catch</span> (Exception e) {  </li><li>        }  </li><li class="alt">  </li><li>        sched.shutdown(<span class="keyword">true</span>);  </li><li class="alt">        System.out.println(<span class="string">"------- 调度已关闭 ---------------------"</span>);  </li><li>  </li><li class="alt">        <span class="comment">// 显示一下 已经执行的任务信息</span>  </li><li>        SchedulerMetaData metaData = sched.getMetaData();  </li><li class="alt">        System.out.println(<span class="string">"~~~~~~~~~~  执行了 "</span>  </li><li>                + metaData.getNumberOfJobsExecuted() + <span class="string">" 个 jobs."</span>);  </li><li class="alt">    }  </li><li>}  </li></ol> 
</div> 
<pre><code class="language-java">import static org.quartz.CronScheduleBuilder.cronSchedule;
import static org.quartz.JobBuilder.newJob;
import static org.quartz.TriggerBuilder.newTrigger;

import java.text.SimpleDateFormat;
import java.util.Date;

import org.quartz.CronTrigger;
import org.quartz.JobDetail;
import org.quartz.Scheduler;
import org.quartz.SchedulerFactory;
import org.quartz.SchedulerMetaData;
import org.quartz.impl.StdSchedulerFactory;

/**
 * Cron Triggers 的使用
 */
public class CronTriggerExample {

	public static void main(String[] args) throws Exception {
		CronTriggerExample example = new CronTriggerExample();
		example.run();
	}

	public void run() throws Exception {
		// 日期格式化
		SimpleDateFormat dateFormat = new SimpleDateFormat(
				"yyyy 年 MM 月 dd 日  HH 时 mm 分 ss 秒");

		SchedulerFactory sf = new StdSchedulerFactory();
		Scheduler sched = sf.getScheduler();
		System.out.println("--------------- 初始化 -------------------");

		// job1 每20s运行一次
		JobDetail job = newJob(SimpleJob.class).withIdentity("job1", "group1")
				.build();

		CronTrigger trigger = newTrigger().withIdentity("trigger1", "group1")
				.withSchedule(cronSchedule("0/20 * * * * ?")).build();

		Date ft = sched.scheduleJob(job, trigger);
		System.out.println(job.getKey().getName() + " 将在: "
				+ dateFormat.format(ft) + " 运行 . 并且基于Cron表达式 : "
				+ trigger.getCronExpression() + "  (含义:每20s运行一次)");

		// job2 偶数分钟的第15秒运行
		job = newJob(SimpleJob.class).withIdentity("job2", "group1").build();
		trigger = newTrigger().withIdentity("trigger2", "group1")
				.withSchedule(cronSchedule("15 0/2 * * * ?")).build();

		ft = sched.scheduleJob(job, trigger);
		System.out.println(job.getKey().getName() + " 将在: "
				+ dateFormat.format(ft) + " 运行 . 并且基于Cron表达式 : "
				+ trigger.getCronExpression() + "  (含义:偶数分钟的第15秒运行)");

		// job3 从8时到17时 ,每个 偶数分钟执行一次
		job = newJob(SimpleJob.class).withIdentity("job3", "group1").build();

		trigger = newTrigger().withIdentity("trigger3", "group1")
				.withSchedule(cronSchedule("0 0/2 8-17 * * ?")).build();

		ft = sched.scheduleJob(job, trigger);
		System.out.println(job.getKey().getName() + " 将在: "
				+ dateFormat.format(ft) + " 运行 . 并且基于Cron表达式 : "
				+ trigger.getCronExpression() + "  (含义:从8时到17时 ,每个 偶数分钟执行一次)");

		// job4 从17时到23时,每3分钟运行一次
		job = newJob(SimpleJob.class).withIdentity("job4", "group1").build();

		trigger = newTrigger().withIdentity("trigger4", "group1")
				.withSchedule(cronSchedule("0 0/3 17-23 * * ?")).build();

		ft = sched.scheduleJob(job, trigger);
		System.out.println(job.getKey().getName() + " 将在: "
				+ dateFormat.format(ft) + " 运行 . 并且基于Cron表达式 : "
				+ trigger.getCronExpression() + "  (含义: 从17时到23时,每3分钟运行一次)");

		// job5 每个月的1号和15号的上午10点 运行
		job = newJob(SimpleJob.class).withIdentity("job5", "group1").build();

		trigger = newTrigger().withIdentity("trigger5", "group1")
				.withSchedule(cronSchedule("0 0 10am 1,15 * ?")).build();

		ft = sched.scheduleJob(job, trigger);
		System.out.println(job.getKey().getName() + " 将在: "
				+ dateFormat.format(ft) + " 运行 . 并且基于Cron表达式 : "
				+ trigger.getCronExpression() + "  (含义:每个月的1号和15号的上午10点 运行)");

		// job6 周一至周五,每30秒运行一次
		job = newJob(SimpleJob.class).withIdentity("job6", "group1").build();

		trigger = newTrigger().withIdentity("trigger6", "group1")
				.withSchedule(cronSchedule("0,30 * * ? * MON-FRI")).build();

		ft = sched.scheduleJob(job, trigger);
		System.out.println(job.getKey().getName() + " 将在: "
				+ dateFormat.format(ft) + " 运行 . 并且基于Cron表达式 : "
				+ trigger.getCronExpression() + "  (含义:周一至周五,每30秒运行一次 )");

		// job7 周六,周日 每30秒运行
		job = newJob(SimpleJob.class).withIdentity("job7", "group1").build();

		trigger = newTrigger().withIdentity("trigger7", "group1")
				.withSchedule(cronSchedule("0,30 * * ? * SAT,SUN")).build();

		ft = sched.scheduleJob(job, trigger);
		System.out.println(job.getKey().getName() + " 将在: "
				+ dateFormat.format(ft) + " 运行 . 并且基于Cron表达式 : "
				+ trigger.getCronExpression() + "  (含义:周六,周日  每30秒运行 )");

		sched.start();

		System.out.println("------- 开始调度 (调用.start()方法) ----------------");
		System.out.println("------- 等待5分钟,给任务的调度留出时间  ... ------------");
		try {
			Thread.sleep(300L * 1000L);
		} catch (Exception e) {
		}

		sched.shutdown(true);
		System.out.println("------- 调度已关闭 ---------------------");

		// 显示一下 已经执行的任务信息
		SchedulerMetaData metaData = sched.getMetaData();
		System.out.println("~~~~~~~~~~  执行了 "
				+ metaData.getNumberOfJobsExecuted() + " 个 jobs.");
	}
}
</code></pre> 
<p><br>  你也许发现什么是关键了?   </p> 
<p>yes你是对的.就是这些东西 </p> 
<p>0 0/2 8-17 * * ?   </p> 
<p>0 0 10am 1,15 * ?</p> 
<p>0,30 * * ? * MON-FRI</p> 
<p>由它们可以 灵活的组织出 你想要执行任务的时间.下面让我们来看看这东西的具体含义</p> 
<p> </p> 
<p>在这之前,我们先看一下几个例子吧:</p> 
<ol><li><span class="comment">--------------------------------------</span> </li><li><span class="comment">    0 0 12 * * ?            每天12点触发</span> </li><li><span class="comment">    0 15 10 ? * *           每天10点15分触发</span> </li><li><span class="comment">    0 15 10 * * ?           每天10点15分触发</span> </li><li><span class="comment">    0 15 10 * * ? *         每天10点15分触发</span> </li><li><span class="comment">    0 15 10 * * ? 2005      2005年每天10点15分触发</span></li><li><span class="comment">    0 * 14 * * ?            每天下午的 2点到2点59分每分触发</span></li><li><span class="comment">    0 0/5 14 * * ?          每天下午的 2点到2点59分(整点开始，每隔5分触发)</span></li><li><span class="comment">    0 0/5 14,18 * * ?       每天下午的 2点到2点59分(整点开始，每隔5分触发) 每天下午的 18点到18点59分(整点开始，每隔5分触发)</span></li><li><span class="comment">    0 0-5 14 * * ?          每天下午的 2点到2点05分每分触发</span></li><li><span class="comment">    0 10,44 14 ? 3 WED      3月分每周三下午的 2点10分和2点44分触发</span></li><li><span class="comment">    0 15 10 ? * MON-FRI     从周一到周五每天上午的10点15分触发</span></li><li><span class="comment">    0 15 10 15 * ?          每月15号上午10点15分触发</span></li><li><span class="comment">    0 15 10 L * ?           每月最后一天的10点15分触发</span></li><li><span class="comment">    0 15 10 ? * 6L          每月最后一周的星期五的10点15分触发</span></li><li><span class="comment">    0 15 10 ? * 6L 2002-2005    从2002年到2005年每月最后一周的星期五的10点15分触发</span></li><li><span class="comment">    0 15 10 ? * 6#3         每月的第三周的星期五开始触发</span></li><li><span class="comment">    0 0 12 1/5 * ?          每月的第一个中午开始每隔5天触发一次</span></li><li><span class="comment">    0 11 11 11 11 ?         每年的11月11号 11点11分触发(光棍节)</span></li><li><span class="comment">--------------------------------------</span> </li></ol> 
<p><span style="color:rgb(51,204,255)">怎么样? 有没有发现规律,还用往下看吗? 你说了蒜 0.0~!</span></p> 
<p> </p> 
<p>CronTrigger配置格式:<br> <br> 格式:<strong><span style="color:rgb(0,0,153)"> [秒] [分] [小时] [日] [月] [周] [年]<br> </span></strong><br> </p> 
<table width="500" height="111" border="0" cellspacing="2" cellpadding="2" style="margin:2px"><tbody><tr><td>序号</td><td>说明</td><td>是否必填</td><td>允许填写的值</td><td>允许的通配符</td></tr><tr><td>1</td><td>秒</td><td>是</td><td>0-59 </td><td>  , - * /</td></tr><tr><td>2</td><td>分</td><td>是</td><td>0-59</td><td>  , - * /</td></tr><tr align="left"><td>3</td><td>小时</td><td>是</td><td>0-23</td><td>  , - * /</td></tr><tr align="left"><td>4</td><td>日</td><td>是</td><td>1-31</td><td>  , - * ? / L W</td></tr><tr align="left"><td>5</td><td>月</td><td>是</td><td>1-12 or JAN-DEC</td><td>  , - * /</td></tr><tr align="left"><td>6</td><td>周</td><td>是</td><td>1-7 or SUN-SAT</td><td>  , - * ? / L #</td></tr><tr><td>7</td><td>年</td><td>否</td><td>empty 或 1970-2099</td><td>, - * /</td></tr></tbody></table> 
<p><br> 通配符说明:<br> <tt><strong><span style="color:red"><tt><strong><span style="font-size:12pt">*</span></strong></tt></span></strong></tt>表示所有值. 例如:在分的字段上设置 "*",表示每一分钟都会触发。<br> <tt><strong><span style="color:red"><tt><strong><span style="font-size:12pt">?</span></strong></tt></span></strong></tt> 表示不指定值。使用的场景为不需要关心当前设置这个字段的值。例如:要在每月的10号触发一个操作，但不关心是周几，所以需要周位置的那个字段设置为"?" 具体设置为 0 0 0 10<span style="color:red"><span style="font-size:12pt">*</span></span> ?<br> <tt><strong><span style="color:red"><span style="font-size:12pt">-</span></span></strong></tt> 表示区间。例如 在小时上设置 "10-12",表示 10,11,12点都会触发。<br> <tt><strong><span style="color:red"><span style="font-size:12pt">,</span></span></strong></tt> 表示指定多个值，例如在周字段上设置 "MON,WED,FRI" 表示周一，周三和周五触发<br> <tt><strong><span style="color:red"><tt><strong><span style="font-size:12pt">/</span></strong></tt></span></strong></tt>用于递增触发。如在秒上面设置"5/15" 表示从5秒开始，每增15秒触发(5,20,35,50)。 在月字段上设置'1/3'所示每月1号开始，每隔三天触发一次。<br> <tt><strong><span style="color:red"><span style="font-size:12pt">L</span></span></strong></tt> 表示最后的意思。在日字段设置上，表示当月的最后一天(依据当前月份，如果是二月还会依据是否是润年[leap]), 在周字段上表示星期六，相当于"7"或"SAT"。如果在"L"前加上数字，则表示该数据的最后一个。例如在周字段上设置"6L"这样的格式,则表示“本月最后一个星期五"<br> <tt><strong><span style="color:red"><tt><strong><span style="font-size:12pt">W</span></strong></tt></span></strong></tt> 表示离指定日期的最近那个工作日(周一至周五). 例如在日字段上设置"15W"，表示离每月15号最近的那个工作日触发。如果15号正好是周六，则找最近的周五(14号)触发, 如果15号是周未，则找最近的下周一(16号)触发.如果15号正好在工作日(周一至周五)，则就在该天触发。如果指定格式为 "1W",它则表示每月1号往后最近的工作日触发。如果1号正是周六，则将在3号下周一触发。(注，"W"前只能设置具体的数字,不允许区间"-").</p> 
<p><em>小提示       'L'和 'W'可以一组合使用。如果在日字段上设置"LW",则表示在本月的最后一个工作日触发</em></p> 
<p>   <tt><strong><span style="color:red"><span style="font-size:12pt">#</span></span></strong></tt> 序号(表示每月的第几个周几)，例如在周字段上设置"6#3"表示在每月的第三个周六.注意如果指定"#5",正好第五周没有周六，则不会触发该配置(用在母亲节和父亲节再合适不过了)</p> 
<p><em>小提示 :周字段的设置，若使用英文字母是不区分大小写的 <tt>MON</tt> <tt>与mon相同</tt>.</em></p> 
<p> </p> 
<p>如果还嫌讲的不够多,请到我的百度网盘(没有广告嫌疑吧)   地址:<a target="_blank" href="http://pan.baidu.com/share/link?shareid=343136&amp;uk=838886155" rel="nofollow noopener noreferrer">http://pan.baidu.com/share/link?shareid=343136&amp;uk=838886155</a></p> 
<p>里面有一些资料,参见：《cron表达式.doc》 </p> 
<p>--------------------------------------------------------------------------------------------------------------</p> 
<p><strong><em>看到这,相信你已经对cron表达式有了自己的看法,自己到上面的例子里去试试吧.咱们下回再见! </em></strong></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0a4fcb811eb3bf816a8cddee3675dfef/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">double ：数据类型保留两位小数，不足补0，满10进1</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3932a4752455656822946c1c54192507/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java.lang.NoClassDefFoundError: org/hibernate/service/jta/platform/spi/JtaPlatform</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>