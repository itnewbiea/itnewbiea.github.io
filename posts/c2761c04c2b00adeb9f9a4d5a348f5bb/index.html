<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>记一次CDH集群磁盘扩容(热插拔)详细步骤 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="记一次CDH集群磁盘扩容(热插拔)详细步骤" />
<meta property="og:description" content="前言：
如果CDH集群搭载的是Hadoop3，支持单节点内磁盘的数据均衡，那给集群节点增加磁盘是可行的。若搭载的是Hadoop2.x版本，请注意，2.x版本的Hadoop没有单节点内磁盘均衡的功能，增加的新磁盘可能只会写入很少的数据，不能实际解决集群磁盘空间不足的问题，谨记！
正文：
数据仓库的其中一个作用是保存公司完整的业务或其他数据,在RDB如mysql/Oracle中,数据太多可以进行归档,但数仓不可以.这就导致了数仓中的磁盘占用率越来越高,终归有一天,磁盘不足,那给CDH集群增加磁盘就不能避免.
以下是我实际工作中一次增加磁盘的记录.分享出来希望可以帮到有缘人.
分为以下三个部分描述
1-磁盘热插拔的注意事项
2-具体操作步骤
3-增加磁盘后的效果
注意事项
热插拔只能添加具有空数据目录的磁盘。卸下磁盘不会将数据移出磁盘，这可能会导致数据丢失。不要同时在多个主机上执行热交换。每次更改单独机器的HDFS配置信息,不要更改角色组的信息,即便是统一每台机器都增加同样数量的磁盘且磁盘mount路径都相同 因此次我们是操作增加磁盘,所以注意事项第二条可以忽略掉.
操作步骤
准备阶段:
准备阶段主要是磁盘硬件添加和挂载,这些工作都是IT部门同事帮忙做的,最终给一台机器增加10块磁盘,分别挂载在/u06和/u07 ..../u15目录下.
a-登录CDH主界面,点击HDFS角色
b-点击&#34;实例&#34;选项卡
此时我们可以看到所有DataNode节点的列表,选择要添加磁盘的机器,点击它对应的DATA NODE
点进去后,我们看到的就是这台机器单独的界面,点击配置.
绿色框部分为该机器现有的磁盘挂载目录.只需要点击加号按钮添加磁盘路径即可.添加后截图如下
更改完毕,点击保存更改.此时DN处于使用过期配置的情况,更新配置界面如下
勾选上这两个选项,只重新启动单台DN,对集群影响降低到最小.不会影响正在运行的各种服务.重启过程如下
增加后的效果
重启后,在CDH界面查看该机器信息,发现磁盘容量从4T&#43;变为了25T&#43;,此时登录服务器导磁盘挂载目录下,发现创建好了对应的dfs数据文件夹.
扩容完成.其他应用没有受到影响
以上,为CDH机器增加磁盘的过程,请注意,不要一次性操作多台机器.感谢耐心阅读.
2019-12-06=================================================
在集群页面找到了一个直接更新数据目录的按钮.截图如下
也就是说,在添加完数据存储目录的时候,直接在右上角找到操作-&gt;刷新数据目录即可完成数据目录的更改和添加,该步骤执行结果如下" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c2761c04c2b00adeb9f9a4d5a348f5bb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-21T16:22:55+08:00" />
<meta property="article:modified_time" content="2019-11-21T16:22:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">记一次CDH集群磁盘扩容(热插拔)详细步骤</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="background-color:#efedf6;">前言：</span></p> 
<p><span style="background-color:#efedf6;">        如果CDH集群搭载的是Hadoop3，支持单节点内磁盘的数据均衡，那给集群节点增加磁盘是可行的。若搭载的是Hadoop2.x版本，请注意，2.x版本的Hadoop没有单节点内磁盘均衡的功能，增加的新磁盘可能只会写入很少的数据，不能实际解决集群磁盘空间不足的问题，谨记！</span></p> 
<p>正文：</p> 
<p>        数据仓库的其中一个作用是保存公司完整的业务或其他数据,在RDB如mysql/Oracle中,数据太多可以进行归档,但数仓不可以.这就导致了数仓中的磁盘占用率越来越高,终归有一天,磁盘不足,那给CDH集群增加磁盘就不能避免.</p> 
<p>        以下是我实际工作中一次增加磁盘的记录.分享出来希望可以帮到有缘人.</p> 
<p>分为以下三个部分描述</p> 
<p>    1-磁盘热插拔的注意事项</p> 
<p>    2-具体操作步骤</p> 
<p>    3-增加磁盘后的效果</p> 
<p></p> 
<p><strong>注意事项</strong></p> 
<ul id="xd_583c10bfdbd326ba-590cb1d1-149e9ca9886--7510__ul_sq2_p4w_mr" style="margin-left:1.2em;"><li>热插拔只能添加具有空数据目录的磁盘。</li><li>卸下磁盘不会将数据移出磁盘，这可能会导致数据丢失。</li><li>不要同时在多个主机上执行热交换。</li><li>每次更改单独机器的HDFS配置信息,不要更改角色组的信息,即便是统一每台机器都增加同样数量的磁盘且磁盘mount路径都相同</li></ul> 
<p>因此次我们是操作增加磁盘,所以注意事项第二条可以忽略掉.</p> 
<p></p> 
<p><strong>操作步骤</strong></p> 
<p>准备阶段:</p> 
<p>准备阶段主要是磁盘硬件添加和挂载,这些工作都是IT部门同事帮忙做的,最终给一台机器增加10块磁盘,分别挂载在/u06和/u07 ..../u15目录下.</p> 
<p>a-登录CDH主界面,点击HDFS角色</p> 
<p><img alt="" class="has" height="264" src="https://images2.imgbox.com/44/fb/caRfsmlQ_o.png" width="605"></p> 
<p>b-点击"实例"选项卡</p> 
<p><img alt="" class="has" height="124" src="https://images2.imgbox.com/f9/15/nr4dhoRc_o.png" width="609"></p> 
<p>此时我们可以看到所有DataNode节点的列表,选择要添加磁盘的机器,点击它对应的DATA NODE</p> 
<p><img alt="" class="has" height="39" src="https://images2.imgbox.com/86/d4/FfMsIXBC_o.png" width="1200"></p> 
<p>点进去后,我们看到的就是这台机器单独的界面,点击配置.</p> 
<p><img alt="" class="has" height="359" src="https://images2.imgbox.com/23/eb/9gACUv9t_o.png" width="694"></p> 
<p>绿色框部分为该机器现有的磁盘挂载目录.只需要点击加号按钮添加磁盘路径即可.添加后截图如下</p> 
<p><img alt="" class="has" height="500" src="https://images2.imgbox.com/6c/1a/DPuUAcMA_o.png" width="1200"></p> 
<p>更改完毕,点击保存更改.此时DN处于使用过期配置的情况,更新配置界面如下</p> 
<p><img alt="" class="has" height="500" src="https://images2.imgbox.com/aa/d6/sa30Ig2p_o.png" width="1200"></p> 
<p>勾选上这两个选项,只重新启动单台DN,对集群影响降低到最小.不会影响正在运行的各种服务.重启过程如下</p> 
<p><img alt="" class="has" height="500" src="https://images2.imgbox.com/8d/4f/91fmWhxt_o.png" width="1200"></p> 
<p></p> 
<p><strong>增加后的效果</strong></p> 
<p>重启后,在CDH界面查看该机器信息,发现磁盘容量从4T+变为了25T+,此时登录服务器导磁盘挂载目录下,发现创建好了对应的dfs数据文件夹.</p> 
<p>扩容完成.其他应用没有受到影响</p> 
<p><img alt="" class="has" height="48" src="https://images2.imgbox.com/63/9c/O5l4734R_o.png" width="1129"></p> 
<p></p> 
<p>以上,为CDH机器增加磁盘的过程,请注意,不要一次性操作多台机器.感谢耐心阅读.</p> 
<p>2019-12-06=================================================</p> 
<p>在集群页面找到了一个直接更新数据目录的按钮.截图如下</p> 
<p><img alt="" class="has" height="554" src="https://images2.imgbox.com/43/67/M4BxRL5y_o.png" width="878"></p> 
<p>也就是说,在添加完数据存储目录的时候,直接在右上角找到操作-&gt;刷新数据目录即可完成数据目录的更改和添加,该步骤执行结果如下</p> 
<p><img alt="" class="has" height="500" src="https://images2.imgbox.com/35/cc/u3a8eCRw_o.png" width="1200"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d994da70670cccaedec1d252e133cd93/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python题目：学生信息管理系统-高级版（图形界面&#43;MySQL数据库）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ed60bd532217da2a0395561eb2e0858a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue-element-admin执行npm install 报错解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>