<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>addEventListener第二个参数的handleEvent - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="addEventListener第二个参数的handleEvent" />
<meta property="og:description" content="昨天无意中看到一篇老外的文章，文章提到了addEventListener第二个参数可以传入object，并且对象中handleEvent为事件处理函数。例如下面的javascript代码：
var obj = { handleEvent: function() { alert(&#39;body clicked&#39;); } }; document.body.addEventListener(&#39;click&#39;,obj,false); 测试发现这段代码在IE9&#43;，chrome，FF，opera等浏览器是正确的（测试范围可能不够宽），而且可以成功的绑定click事件。在Qwrap群里一问才知道是DOM2中接口，很有意思的一个发现，@貘大大 也发微博说自己先入为主了，我相信很多人跟@貘大大 一样都先入为主了。
addEventListener的handleEvent应用 发现了这个“新大陆”有什么用法呢？哈哈~首先想到的是对象引用。看下面的javascript代码：
&lt;script type=&#34;text/javascript&#34;&gt; var obj = { handleEvent: function() { alert(&#39;body clicked&#39;); } }; document.body.addEventListener(&#39;click&#39;,obj,false); function fn2(){ obj.handleEvent = function(){ alert(&#39;fn2&#39;); }; } &lt;/script&gt; &lt;button οnclick=&#34;fn2();&#34;&gt;change&lt;/button&gt; 因为对象的引用关系，点击下button就可以切换绑定事件的处理函数，而不需要remove之前的事件，然后重新绑定一个新的处理函数。
如果你觉得这个不够炫，那么下面的javascript代码可能就更有吸引力了哦~ var obj2 = { addEvent:function(el){ el.addEventListener(&#39;click&#39;,this,false); }, handleEvent:function(e){ alert(e.target); } }; obj2.addEvent(document.body); addEventListener handleEvent缺点 显而易见，IE6~IE8不能使用……可是如果是高级浏览器还是不错的功能哦~
扩展阅读 http://peter.michaux.ca/articles/our-backwards-dom-event-libraries
http://ajaxian.com/archives/an-alternative-way-to-addeventlistener" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1d3d200384eed23c7d3b008204e3d284/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-03-21T22:29:29+08:00" />
<meta property="article:modified_time" content="2012-03-21T22:29:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">addEventListener第二个参数的handleEvent</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; line-height:25px; color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; background-color:rgb(192,208,246)"> 昨天无意中看到一篇<a target="_blank" href="http://peter.michaux.ca/articles/our-backwards-dom-event-libraries" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(38,162,218)">老外的文章</a>，文章提到了<strong><a title="addEventListener" href="http://js8.in/tag/addeventlistener" rel="nofollow" style="text-decoration:none; color:rgb(38,162,218)">addEventListener</a></strong>第二个参数可以传入object，并且对象中handleEvent为事件处理函数。例如下面的<a title="javascript" href="http://js8.in/category/front-end/javascript-front-end-2" rel="nofollow" style="text-decoration:none; color:rgb(38,162,218)">javascript</a>代码：</p> 
<div class="wp_syntax" style="color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; line-height:15px; background-color:rgb(192,208,246)"> 
 <div class="code"> 
  <pre><code class="language-javascript"><span style="color:rgb(0,51,102)"><strong>var</strong></span> obj <span style="color:rgb(51,153,51)">=</span> <span style="color:rgb(0,153,0)">{<!-- --></span>
	handleEvent<span style="color:rgb(51,153,51)">:</span> <span style="color:rgb(0,51,102)"><strong>function</strong></span><span style="color:rgb(0,153,0)">(</span><span style="color:rgb(0,153,0)">)</span> <span style="color:rgb(0,153,0)">{<!-- --></span>
		<span style="color:rgb(0,0,102)">alert</span><span style="color:rgb(0,153,0)">(</span><span style="color:rgb(51,102,204)">'body clicked'</span><span style="color:rgb(0,153,0)">)</span><span style="color:rgb(51,153,51)">;</span>
	<span style="color:rgb(0,153,0)">}</span>
<span style="color:rgb(0,153,0)">}</span><span style="color:rgb(51,153,51)">;</span>
document.<span style="color:rgb(102,0,102)">body</span>.<span style="color:rgb(102,0,102)">addEventListener</span><span style="color:rgb(0,153,0)">(</span><span style="color:rgb(51,102,204)">'click'</span><span style="color:rgb(51,153,51)">,</span>obj<span style="color:rgb(51,153,51)">,</span><span style="color:rgb(0,51,102)"><strong>false</strong></span><span style="color:rgb(0,153,0)">)</span><span style="color:rgb(51,153,51)">;</span></code></pre> 
 </div> 
</div> 
<p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; line-height:25px; color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; background-color:rgb(192,208,246)"> 测试发现这段代码在IE9+，chrome，FF，opera等浏览器是正确的（测试范围可能不够宽），而且可以成功的绑定click事件。在Qwrap群里一问才知道是<a target="_blank" href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventListener" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(38,162,218)">DOM2中接口</a>，很有意思的一个发现，<a target="_blank" href="http://weibo.com/itapir" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(38,162,218)">@貘大大</a> 也发微博说自己先入为主了，我相信很多人跟<a target="_blank" href="http://weibo.com/itapir" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(38,162,218)">@貘大大</a> 一样都先入为主了。</p> 
<h3 style="margin-top:20px; margin-right:0px; margin-bottom:20px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; font-size:18px; font-family:'Microsoft YaHei'; color:rgb(102,102,102); background-color:rgb(192,208,246)"> addEventListener的handleEvent应用</h3> 
<p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; line-height:25px; color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; background-color:rgb(192,208,246)"> 发现了这个“新大陆”有什么用法呢？哈哈~首先想到的是<a href="http://js8.in/736.html" rel="nofollow noopener noreferrer" target="_blank" style="text-decoration:none; color:rgb(38,162,218)">对象引用</a>。看下面的<a title="javascript" href="http://js8.in/tag/javascript" rel="nofollow" style="text-decoration:none; color:rgb(38,162,218)">javascript</a>代码：</p> 
<div class="wp_syntax" style="color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; line-height:15px; background-color:rgb(192,208,246)"> 
 <div class="code"> 
  <pre><code class="language-html">&lt;script type="text/javascript"&gt;
var obj = {
handleEvent: function() {
	alert('body clicked');
}
};
document.body.addEventListener('click',obj,false);
function fn2(){
	obj.handleEvent = function(){
		alert('fn2');
	};
}
&lt;/script&gt;
&lt;button οnclick="fn2();"&gt;change&lt;/button&gt;</code></pre> 
 </div> 
</div> 
<p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; line-height:25px; color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; background-color:rgb(192,208,246)"> 因为对象的引用关系，点击下button就可以切换绑定事件的处理函数，而不需要remove之前的事件，然后重新绑定一个新的处理函数。</p> 
<span style="color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; line-height:15px; background-color:rgb(192,208,246)">如果你觉得这个不够炫，那么下面的javascript代码可能就更有吸引力了哦~</span> 
<p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; line-height:25px; color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; background-color:rgb(192,208,246)"> </p> 
<div class="wp_syntax" style="color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; line-height:15px; background-color:rgb(192,208,246)"> 
 <div class="code"> 
  <pre><code class="language-javascript"><span style="color:rgb(0,51,102)"><strong>var</strong></span> obj2 <span style="color:rgb(51,153,51)">=</span> <span style="color:rgb(0,153,0)">{<!-- --></span>
	addEvent<span style="color:rgb(51,153,51)">:</span><span style="color:rgb(0,51,102)"><strong>function</strong></span><span style="color:rgb(0,153,0)">(</span>el<span style="color:rgb(0,153,0)">)</span><span style="color:rgb(0,153,0)">{<!-- --></span>
		el.<span style="color:rgb(102,0,102)">addEventListener</span><span style="color:rgb(0,153,0)">(</span><span style="color:rgb(51,102,204)">'click'</span><span style="color:rgb(51,153,51)">,</span><span style="color:rgb(0,0,102)"><strong>this</strong></span><span style="color:rgb(51,153,51)">,</span><span style="color:rgb(0,51,102)"><strong>false</strong></span><span style="color:rgb(0,153,0)">)</span><span style="color:rgb(51,153,51)">;</span>
	<span style="color:rgb(0,153,0)">}</span><span style="color:rgb(51,153,51)">,</span>
	handleEvent<span style="color:rgb(51,153,51)">:</span><span style="color:rgb(0,51,102)"><strong>function</strong></span><span style="color:rgb(0,153,0)">(</span>e<span style="color:rgb(0,153,0)">)</span><span style="color:rgb(0,153,0)">{<!-- --></span>
		<span style="color:rgb(0,0,102)">alert</span><span style="color:rgb(0,153,0)">(</span>e.<span style="color:rgb(102,0,102)">target</span><span style="color:rgb(0,153,0)">)</span><span style="color:rgb(51,153,51)">;</span>
	<span style="color:rgb(0,153,0)">}</span>
<span style="color:rgb(0,153,0)">}</span><span style="color:rgb(51,153,51)">;</span>
obj2.<span style="color:rgb(102,0,102)">addEvent</span><span style="color:rgb(0,153,0)">(</span>document.<span style="color:rgb(102,0,102)">body</span><span style="color:rgb(0,153,0)">)</span><span style="color:rgb(51,153,51)">;</span></code></pre> 
 </div> 
</div> 
<h3 style="margin-top:20px; margin-right:0px; margin-bottom:20px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; font-size:18px; font-family:'Microsoft YaHei'; color:rgb(102,102,102); background-color:rgb(192,208,246)"> addEventListener handleEvent缺点</h3> 
<p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; line-height:25px; color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; background-color:rgb(192,208,246)"> 显而易见，IE6~IE8不能使用……可是如果是高级浏览器还是不错的功能哦~</p> 
<h4 style="margin-top:20px; margin-right:0px; margin-bottom:20px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; font-size:16px; font-family:'Microsoft YaHei'; color:rgb(102,102,102); background-color:rgb(192,208,246)"> 扩展阅读</h4> 
<p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; line-height:25px; color:rgb(102,102,102); font-family:Arial,Helvetica,sans-serif; font-size:14px; background-color:rgb(192,208,246)"> http://peter.michaux.ca/articles/our-backwards-dom-event-libraries<br> http://ajaxian.com/archives/an-alternative-way-to-addeventlistener</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9f14b01af45f5746e43a14c2568d8cd0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python 简单的Http服务器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7636871b751f1f593ccd37401da97be6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PLSQL Developer 你用的很方便吗，看看就方便了</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>