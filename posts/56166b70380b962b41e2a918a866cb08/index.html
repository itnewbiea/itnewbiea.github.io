<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>无线智能阀门控制器 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="无线智能阀门控制器" />
<meta property="og:description" content=" 1、产品研发的由来 今年做了一个比较满意的产品，这个产品也是总结过去三年的产品经验，融入最新的软件架构，通信技术，按照自己的对产品与技术的理解，自己定义研发这样一款产品，此次产品的功能结构，设计理念，软件架构都有了一个质的变化，特发此文纪念一下。
一个硬件产品要想真正的质量过硬，客户用着皮实耐用，没有个三个年的功夫是做不出来一个好产品的，那些花一年时间做出来的产品顶多是一个功能样机，实现基本功能，远远达不到可靠耐用，市场认可的程度，还是要让产品去市场上接受考验，同时根据客户反馈，不断升级优化才能做出好产品。这些年来见过太多的公司，产品研发只做一次，上市后就不再管了，不升级，不改进。下一次还是再开发一款新产品出来兼容老产品的功能，再加新功能，周而复始做着只装半瓶水的事，就是不肯踏踏实实下来把一款产品迭代稳定。总想着时间快，多出产品，占有市场。就说中国企业没有工匠精神的企业，所以也就难以研发设计制造出像国际大企业ABB, SIEMENS,GE这个公司质量过硬的产品。
2、产品的功能 产品的功能说起来很简单，实现起来也不难，在校大学生都能做，但是要真正做出一个产品，经受住用户的使用与考验，这个事就难了。这次研发的产品是一个12路智能电磁阀控制器。
12路智能电磁阀控制器的功能有，手机远程控制打开，关闭电磁阀的功能、手持遥控器本地打开，关闭电磁阀的功能、定时开关功能、支持有线以太网，4G两种联联网方式，自动进行网络切换，优先使用有线网络连接服务器。
3、软件架构 产品的软件采用RT Thread嵌入式实时操作， 优化kawii mqtt软件包，实现使用mqtt协议连接服务器功能，编写onenet软件包抽象服务器网络接入功能，编写zFTP软件包用于实现支持有线以太网与4G双通道自适应联网进行远程固件OTA功能。有线网络接入使用lwip协议，4G网络接入使用AT SOCKET组件，上层mqtt协议使用kawii mqtt软件包（经过优化）。整个产品的软件架构图如下图所示。
在一个优良的技术架构下，轻松的实现了产品的功能设计，产品的关键技术指示相对于上一代产品有了质的变化，产品在线时间由原来的90%提高了99%的，产品性能得到了很大幅度的提升。
4、硬件架构 硬件设计此次优先以实现产品各个方面的性能，以前的设计连双层板与四层板相差的成本都要计较。实际从整个产品来看，产品质量与性能的提升是能覆盖住设计上的就点小小的成本的。
电源方案采用12-24V AC/DC输入，经过DC-DC变成5V，5V经LDO变成3.8V供4G CAT1模块使用，5V经LDO变成3.3V供MCU及外围通信，存储模块使用。
MCU采用STM32F207VE，外接有线以太网，4G模块，遥控器接收模块，IO驱动12路电磁阀，指示灯，蜂鸣器，存储芯片。
5、产品性能测试 产品可以实现稳定的联网工作，长达10天连接服务器不断网，产品超长时间工作软件不死机，不重启，4G连接发生断网时间最多1分钟，有线连接发生断网时间2秒钟，大大提升了产品的在网时间。软件功能划分合理，各个软件功能模块全部解耦合，互不影响，各司其职，模块化的设计提升的产品的软件的可靠性，具有很强可维护性。
硬件电路设计紧凑，电路布局合理，各路射频信号阻抗匹配，性能优越。电路上各个信号完整，硬件工作稳定可靠。
6、产品实拍 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/56166b70380b962b41e2a918a866cb08/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-29T23:11:52+08:00" />
<meta property="article:modified_time" content="2020-12-29T23:11:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">无线智能阀门控制器</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1、产品研发的由来</h2> 
<p>      今年做了一个比较满意的产品，这个产品也是总结过去三年的产品经验，融入最新的软件架构，通信技术，按照自己的对产品与技术的理解，自己定义研发这样一款产品，此次产品的功能结构，设计理念，软件架构都有了一个质的变化，特发此文纪念一下。</p> 
<p>         一个硬件产品要想真正的质量过硬，客户用着皮实耐用，没有个三个年的功夫是做不出来一个好产品的，那些花一年时间做出来的产品顶多是一个功能样机，实现基本功能，远远达不到可靠耐用，市场认可的程度，还是要让产品去市场上接受考验，同时根据客户反馈，不断升级优化才能做出好产品。这些年来见过太多的公司，产品研发只做一次，上市后就不再管了，不升级，不改进。下一次还是再开发一款新产品出来兼容老产品的功能，再加新功能，周而复始做着只装半瓶水的事，就是不肯踏踏实实下来把一款产品迭代稳定。总想着时间快，多出产品，占有市场。就说中国企业没有工匠精神的企业，所以也就难以研发设计制造出像国际大企业ABB, SIEMENS,GE这个公司质量过硬的产品。</p> 
<h3>2、产品的功能</h3> 
<p>       产品的功能说起来很简单，实现起来也不难，在校大学生都能做，但是要真正做出一个产品，经受住用户的使用与考验，这个事就难了。这次研发的产品是一个12路智能电磁阀控制器。</p> 
<p>       12路智能电磁阀控制器的功能有，手机远程控制打开，关闭电磁阀的功能、手持遥控器本地打开，关闭电磁阀的功能、定时开关功能、支持有线以太网，4G两种联联网方式，自动进行网络切换，优先使用有线网络连接服务器。</p> 
<h3> 3、软件架构</h3> 
<p>       产品的软件采用RT Thread嵌入式实时操作， 优化kawii mqtt软件包，实现使用mqtt协议连接服务器功能，编写onenet软件包抽象服务器网络接入功能，编写zFTP软件包用于实现支持有线以太网与4G双通道自适应联网进行远程固件OTA功能。有线网络接入使用lwip协议，4G网络接入使用AT SOCKET组件，上层mqtt协议使用kawii mqtt软件包（经过优化）。整个产品的软件架构图如下图所示。</p> 
<p>       </p> 
<p style="text-align:center;"><img alt="" height="294" src="https://images2.imgbox.com/0a/43/4qtS5HUl_o.png" width="408"></p> 
<p> </p> 
<p>      在一个优良的技术架构下，轻松的实现了产品的功能设计，产品的关键技术指示相对于上一代产品有了质的变化，产品在线时间由原来的90%提高了99%的，产品性能得到了很大幅度的提升。</p> 
<h2>4、硬件架构</h2> 
<p>        硬件设计此次优先以实现产品各个方面的性能，以前的设计连双层板与四层板相差的成本都要计较。实际从整个产品来看，产品质量与性能的提升是能覆盖住设计上的就点小小的成本的。</p> 
<p>        电源方案采用12-24V AC/DC输入，经过DC-DC变成5V，5V经LDO变成3.8V供4G CAT1模块使用，5V经LDO变成3.3V供MCU及外围通信，存储模块使用。</p> 
<p>        MCU采用STM32F207VE，外接有线以太网，4G模块，遥控器接收模块，IO驱动12路电磁阀，指示灯，蜂鸣器，存储芯片。</p> 
<p style="text-align:center;"><img alt="" height="284" src="https://images2.imgbox.com/d3/0b/gvUcGELO_o.png" width="337"></p> 
<h2>5、产品性能测试</h2> 
<p>        产品可以实现稳定的联网工作，长达10天连接服务器不断网，产品超长时间工作软件不死机，不重启，4G连接发生断网时间最多1分钟，有线连接发生断网时间2秒钟，大大提升了产品的在网时间。软件功能划分合理，各个软件功能模块全部解耦合，互不影响，各司其职，模块化的设计提升的产品的软件的可靠性，具有很强可维护性。</p> 
<p>        硬件电路设计紧凑，电路布局合理，各路射频信号阻抗匹配，性能优越。电路上各个信号完整，硬件工作稳定可靠。</p> 
<h2>6、产品实拍</h2> 
<p>      <img alt="" height="1200" src="https://images2.imgbox.com/d3/08/zAijcBFU_o.png" width="1080"></p> 
<p> </p> 
<p> <img alt="" height="1080" src="https://images2.imgbox.com/93/ad/GnyVgDZ9_o.png" width="1200"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/49bc30423bd748bc6b587b8427614645/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">面试题之数组var fun = function(){for(var i = 0 ,arr = []； i＜3； i&#43;&#43;){arr[i] = function(){ console.log(i) }</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5223989008feedce25afd0b89bc6b5f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">错误：非法字符：“\ufeff”　　Java　python</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>