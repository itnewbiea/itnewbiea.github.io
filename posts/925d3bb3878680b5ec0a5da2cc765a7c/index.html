<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>郝斌老师 sql 语句笔记 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="郝斌老师 sql 语句笔记" />
<meta property="og:description" content="一、数据库是如何解决数据存储问题的 1 从三个方面来学习数据库 a) 数据库是如何存储的 i. 字段，记录，表，约束 ( 主键，外键，唯一键，非空， check, default, 触发器 ) b) 数据库是如何操作数据的 i. Insert, update, delete, T-SQL, 存储过程，函数， 触发器 c) 数据库是如何显示数据的 i. select( 重点中的重点 ) 必备的一些操作 d) 如何建数据库 i. .mdf 是数据文件 .LDF 是日志文件 ii. 右键 -&gt; 新建数据库 -&gt; 输入名字 -&gt; 确定 e) 如何删除一个库； 如何附加和分离数据库 f) 设置登录用户名和密码； 建用户 用鼠标建立的第一个数据库 Test g) nvarchar() 国际化编码的可变的字符串。 n 表示国际化，对汉字也支持； var 是 变量，字符的长度是可变化的 h) ，其中的 dbo 表示一个系统的身份 i) update emp set emp_id = 1001 j) 存在外键的表叫外键表 k) 当要选择是否可以为空时，用空格键来进行控制，即： 可以用空格来选择 l) PK ， primary 主要的； FK, foreign 外部的 通过 sql 命令建表和主外键约束 m) 在 sql server 里最后一句写不写逗号都可以，但是在 oracle 里不可以写逗号，因此 在写命令时，最后一个字段的后面就不要写逗号了 n) create table dept ( dept_id int primary key, -- 在此处设置了主键 dept_name nvarchar(100) not null , -- 设置了非空 dept_address nvarchar(100) ) create table emp ( -- 这个是注释 emp_id int constraint PK_emp_id_haah primary key, -- 此处给主键起了 -- 一个名字，红字部分可以不写 emp_name nvarchar(20) not null, emp_sex nchar(1), dept_id int constraint FK_dept_id_hd foreign key references dept(dept_id) 2 -- 在此处建立了一个外键，使用了 references ) 约束 o) 约束的分类 i." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/925d3bb3878680b5ec0a5da2cc765a7c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T22:19:12+08:00" />
<meta property="article:modified_time" content="2023-12-27T22:19:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">郝斌老师 sql 语句笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <span style="color:#000000;">一、数据库是如何解决数据存储问题的 </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>1 </strong></span> 
</div> 
<div> 
 <span style="color:#ff0000;">从三个方面来学习数据库 </span> 
</div> 
<div> 
 <span style="color:#000000;">a) </span> 
 <span style="color:#000000;">数据库是如何存储的 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">字段，记录，表，约束</span> 
 <span style="color:#000000;">(</span> 
 <span style="color:#000000;">主键，外键，唯一键，非空，</span> 
 <span style="color:#000000;">check, default, </span> 
 <span style="color:#000000;">触发器</span> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">b) </span> 
 <span style="color:#000000;">数据库是如何操作数据的 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">Insert, update, delete, T-SQL, </span> 
 <span style="color:#000000;">存储过程，函数， 触发器 </span> 
</div> 
<div> 
 <span style="color:#000000;">c) </span> 
 <span style="color:#000000;">数据库是如何显示数据的 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">select(</span> 
 <span style="color:#000000;">重点中的重点</span> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#ff0000;">必备的一些操作 </span> 
</div> 
<div> 
 <span style="color:#000000;">d) </span> 
 <span style="color:#000000;">如何建数据库 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">.mdf </span> 
 <span style="color:#000000;">是数据文件 </span> 
</div> 
<div> 
 <span style="color:#000000;">.LDF </span> 
 <span style="color:#000000;">是日志文件 </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">右键 </span> 
 <span style="color:#000000;">-&gt; </span> 
 <span style="color:#000000;">新建数据库 </span> 
 <span style="color:#000000;">-&gt; </span> 
 <span style="color:#000000;">输入名字 </span> 
 <span style="color:#000000;">-&gt; </span> 
 <span style="color:#000000;">确定 </span> 
</div> 
<div> 
 <span style="color:#000000;">e) </span> 
 <span style="color:#000000;">如何删除一个库； </span> 
</div> 
<div> 
 <span style="color:#000000;">如何附加和分离数据库 </span> 
</div> 
<div> 
 <span style="color:#000000;">f) </span> 
 <span style="color:#000000;">设置登录用户名和密码； </span> 
</div> 
<div> 
 <span style="color:#000000;">建用户 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">用鼠标建立的第一个数据库 Test </span> 
</div> 
<div> 
 <span style="color:#000000;">g) nvarchar() </span> 
</div> 
<div> 
 <span style="color:#000000;">国际化编码的可变的字符串。</span> 
 <span style="color:#000000;">n </span> 
 <span style="color:#000000;">表示国际化，对汉字也支持；</span> 
 <span style="color:#000000;">var </span> 
 <span style="color:#000000;">是 </span> 
</div> 
<div> 
 <span style="color:#000000;">变量，字符的长度是可变化的 </span> 
</div> 
<div> 
 <span style="color:#000000;">h) </span> 
</div> 
<div> 
 <span style="color:#000000;">，其中的 </span> 
 <span style="color:#000000;">dbo </span> 
 <span style="color:#000000;">表示一个系统的身份 </span> 
</div> 
<div> 
 <span style="color:#000000;">i) update emp set emp_id = 1001 </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>j) </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">存在外键的表叫外键表 </span> 
</div> 
<div> 
 <span style="color:#000000;">k) </span> 
 <span style="color:#000000;">当要选择是否可以为空时，用空格键来进行控制，即： 可以用空格来选择 </span> 
</div> 
<div> 
 <span style="color:#000000;">l) PK</span> 
 <span style="color:#000000;">，</span> 
 <span style="color:#000000;">primary </span> 
 <span style="color:#000000;">主要的； </span> 
</div> 
<div> 
 <span style="color:#000000;">FK, foreign </span> 
 <span style="color:#000000;">外部的 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">通过 sql 命令建表和主外键约束 </span> 
</div> 
<div> 
 <span style="color:#000000;">m) </span> 
 <span style="color:#000000;">在 </span> 
 <span style="color:#000000;">sql server </span> 
 <span style="color:#000000;">里最后一句写不写逗号都可以，但是在 </span> 
 <span style="color:#000000;">oracle </span> 
 <span style="color:#000000;">里不可以写逗号，因此 </span> 
</div> 
<div> 
 <span style="color:#000000;">在写命令时，最后一个字段的后面就不要写逗号了 </span> 
</div> 
<div> 
 <span style="color:#000000;">n) create table dept </span> 
</div> 
<div> 
 <span style="color:#000000;">( </span> 
</div> 
<div> 
 <span style="color:#000000;">dept_id int </span> 
 <span style="color:#ff0000;">primary key, </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">在此处设置了主键 </span> 
</div> 
<div> 
 <span style="color:#000000;">dept_name nvarchar(100) </span> 
 <span style="color:#ff0000;">not null</span> 
 <span style="color:#000000;">, </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">设置了非空 </span> 
</div> 
<div> 
 <span style="color:#000000;">dept_address nvarchar(100) </span> 
</div> 
<div> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">create table emp </span> 
</div> 
<div> 
 <span style="color:#000000;">( </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">这个是注释 </span> 
</div> 
<div> 
 <span style="color:#000000;">emp_id int </span> 
 <span style="color:#ff0000;">constraint PK_emp_id_haah </span> 
 <span style="color:#000000;">primary key, --</span> 
 <span style="color:#000000;">此处给主键起了 </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">一个名字，红字部分可以不写 </span> 
</div> 
<div> 
 <span style="color:#000000;">emp_name nvarchar(20) not null, </span> 
</div> 
<div> 
 <span style="color:#000000;">emp_sex nchar(1), </span> 
</div> 
<div> 
 <span style="color:#000000;">dept_id int </span> 
 <span style="color:#ff0000;">constraint FK_dept_id_hd </span> 
 <span style="color:#000000;">foreign key </span> 
 <span style="color:#ff0000;">references </span> 
 <span style="color:#000000;">dept(dept_id)</span> 
 <span style="color:#000000;"><strong>2 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">在此处建立了一个外键，使用了 </span> 
 <span style="color:#ff0000;">references </span> 
</div> 
<div> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#ff0000;">约束 </span> 
</div> 
<div> 
 <span style="color:#000000;">o) </span> 
 <span style="color:#000000;">约束的分类 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">主键约束 </span> 
</div> 
<div> 
 <span style="color:#000000;">不允许重复元素，避免了数据的冗余（实体完整性） </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">外键约束 </span> 
</div> 
<div> 
 <span style="color:#000000;">通过外键约束从语法上保证了本事物所关联的其他事物一定是 </span> 
</div> 
<div> 
 <span style="color:#000000;">存在的（引用完整性） </span> 
</div> 
<div> 
 <span style="color:#000000;">事物和事物之间的关系是通过外键来体现的 </span> 
</div> 
<div> 
 <span style="color:#000000;">p) check </span> 
 <span style="color:#000000;">约束 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">create table student </span> 
</div> 
<div> 
 <span style="color:#000000;">{ </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_id int primary key, </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_sal int check </span> 
 <span style="color:#ff0000;">(stu_sal &gt;= 1000 and stu_sal &lt;= 8000) </span> 
</div> 
<div> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">在此处使用了 </span> 
 <span style="color:#000000;">check </span> 
 <span style="color:#000000;">约束，限定了 </span> 
 <span style="color:#000000;">stu_sal </span> 
 <span style="color:#000000;">的值在 </span> 
 <span style="color:#000000;">1000 </span> 
 <span style="color:#000000;">与 </span> 
 <span style="color:#000000;">8000 </span> 
 <span style="color:#000000;">之间 </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">保证事物属性的取值在合法的范围之内 </span> 
</div> 
<div> 
 <span style="color:#000000;">q) default </span> 
 <span style="color:#000000;">约束 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">数据库中的</span> 
 <span style="color:#ff0000;">单引号用来标识一个字符串，双引号用来模拟一个数据的名字 </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">保证事物的属性一定有一个值 </span> 
</div> 
<div> 
 <span style="color:#000000;">iii. </span> 
</div> 
<div> 
 <span style="color:#000000;">create table student2 </span> 
</div> 
<div> 
 <span style="color:#000000;">( </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_id int primary key, </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_sal int check (stu_sal &gt;= 1000 and stu_sal &lt;= 8000), </span> 
</div> 
<div> 
 <span style="color:#ff0000;">stu_sex nchar(1) default('</span> 
 <span style="color:#ff0000;">男</span> 
 <span style="color:#ff0000;">') </span> 
 <span style="color:#000000;">--()</span> 
 <span style="color:#000000;">是可以省略的，在数据库中字符串是 </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">必须用</span> 
 <span style="color:#000000;">’ ’</span> 
 <span style="color:#000000;">括起来 </span> 
</div> 
<div> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into student2(stu_id, stu_sal) values (1, 1000) </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into student2 values (2, 5000, '</span> 
 <span style="color:#000000;">女</span> 
 <span style="color:#000000;">') </span> 
</div> 
<div> 
 <span style="color:#000000;">--insert into student2 values (3, 10000) </span> 
 <span style="color:#000000;">这样写是不对的 </span> 
</div> 
<div> 
 <span style="color:#000000;">在此处，声明了三个属性，在第一个命令中，指定了二个属性，所以填入了两 </span> 
</div> 
<div> 
 <span style="color:#000000;">个值；第二个命令中，没有指定要填写几个属性，所以要填写全部的三个值； </span> 
</div> 
<div> 
 <span style="color:#000000;">第三个命令中，没有指定要填写几个属性，不过只写了两个值，这是不对的 </span> 
</div> 
<div> 
 <span style="color:#000000;">r) unique </span> 
 <span style="color:#000000;">约束（唯一约束） </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">保证了事物的取值不允许重复， </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">create table student5 </span> 
</div> 
<div> 
 <span style="color:#000000;">( </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_id int primary key, </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_sal int check (stu_sal &gt;= 1000 and stu_sal &lt;= 8000), </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_sex nchar(1) default'</span> 
 <span style="color:#000000;">男</span> 
 <span style="color:#000000;">', </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_name nvarchar(200) </span> 
 <span style="color:#ff0000;">unique </span> 
</div> 
<div> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into student5 values (1, 6000, '</span> 
 <span style="color:#000000;">男</span> 
 <span style="color:#000000;">', </span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">张三</span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#000000;">) --</span> 
 <span style="color:#000000;">此句话正确 </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into student5 values (2, 6000, '</span> 
 <span style="color:#000000;">男</span> 
 <span style="color:#000000;">', </span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">张三</span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#000000;">) --</span> 
 <span style="color:#000000;">违反了唯一键约束，不正确 </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into student5 values (null, 6000, '</span> 
 <span style="color:#000000;">男</span> 
 <span style="color:#000000;">', '</span> 
 <span style="color:#000000;">王五</span> 
 <span style="color:#000000;">') </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">主键不能为空，不正确</span> 
 <span style="color:#000000;">insert into student5 values (3, 6000, ' </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>3 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">男</span> 
 <span style="color:#000000;">', </span> 
 <span style="color:#ff0000;">null</span> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">唯一键可以为空 </span> 
</div> 
<div> 
 <span style="color:#000000;">iii. </span> 
</div> 
<div> 
 <span style="color:#000000;">unique </span> 
 <span style="color:#000000;">键是否允许多列为空？ </span> 
</div> 
<div> 
 <span style="color:#000000;">1. Sql Server 2012 </span> 
 <span style="color:#000000;">只允许一个 </span> 
 <span style="color:#000000;">unique </span> 
 <span style="color:#000000;">列为空 </span> 
</div> 
<div> 
 <span style="color:#000000;">2. Oracle11G </span> 
 <span style="color:#000000;">允许多个 </span> 
 <span style="color:#000000;">unique </span> 
 <span style="color:#000000;">列为空 </span> 
</div> 
<div> 
 <span style="color:#000000;">s) </span> 
 <span style="color:#000000;">主键和唯一键区别及其两者配合使用举例 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">不要用业务逻辑作主键（编号不是一个事物的属性） </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">把编号（代理主键）当主键， </span> 
</div> 
<div> 
 <span style="color:#000000;">iii. </span> 
</div> 
<div> 
 <span style="color:#000000;">create table student6 </span> 
</div> 
<div> 
 <span style="color:#000000;">( </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_id int primary key </span> 
 <span style="color:#ff0000;">identity</span> 
 <span style="color:#000000;">, </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_name nvarchar(50) not null unique, </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_email nvarchar(50) not null, </span> 
</div> 
<div> 
 <span style="color:#000000;">stu_address nvarchar(50) </span> 
</div> 
<div> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#ff0000;">drop </span> 
 <span style="color:#000000;">table student6 </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">这一句是删除一个表 </span> 
</div> 
<div> 
 <span style="color:#000000;">在此处，</span> 
 <span style="color:#000000;"><strong>identity </strong></span> 
 <span style="color:#000000;">是自增的意思；设定了一个编号当作主键，把用户名作 </span> 
</div> 
<div> 
 <span style="color:#000000;">为唯一键；通常不会删除一个用户，一般每个用户都有一个标识位，</span> 
 <span style="color:#000000;">1 </span> 
 <span style="color:#000000;">或者 </span> 
 <span style="color:#000000;">0</span> 
 <span style="color:#000000;">， </span> 
</div> 
<div> 
 <span style="color:#000000;">如果注消一个用户的话可以把他的标识位改一个，就不能使用此帐户了 </span> 
</div> 
<div> 
 <span style="color:#000000;">t) not null</span> 
 <span style="color:#000000;">（可以当作一个约束）和 </span> 
 <span style="color:#000000;">default </span> 
 <span style="color:#000000;">的区别 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">not null </span> 
 <span style="color:#000000;">要求用户必须为该属性赋一个值，否则语法出错 </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">如果有默认值，如果不指定要为哪一个属性赋值的话，必须为全部属性赋值 </span> 
</div> 
<div> 
 <span style="color:#000000;">iii. </span> 
</div> 
<div> 
 <span style="color:#000000;">如果指定了为哪些属性赋值，有一个属性没在括号内且可以为空的话，这个值 </span> 
</div> 
<div> 
 <span style="color:#000000;">就是 </span> 
 <span style="color:#000000;">NULL</span> 
 <span style="color:#000000;">；如果指定了为哪些属性赋值，有一个属性没在括号内且有默认值， </span> 
</div> 
<div> 
 <span style="color:#000000;">那么这个值就是默认值 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">表和约束的区别（他自己的理解） </span> 
</div> 
<div> 
 <span style="color:#000000;">u) </span> 
 <span style="color:#000000;">数据库是通过表来解决事物的存储问题的 </span> 
</div> 
<div> 
 <span style="color:#000000;">v) </span> 
 <span style="color:#000000;">数据库是通过约束来解决事物取值的有效性和合法性的问题 </span> 
</div> 
<div> 
 <span style="color:#000000;">w) </span> 
 <span style="color:#000000;">建表的过程就是指定事物属性及其事物属性各种约束的过程 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">什么是关系 </span> 
</div> 
<div> 
 <span style="color:#000000;">x) </span> 
 <span style="color:#000000;">定义：表和表之间的联系 </span> 
</div> 
<div> 
 <span style="color:#000000;">y) </span> 
 <span style="color:#000000;">实现方式：通过设置不同形式的外键来体现表和表的不同关系 </span> 
</div> 
<div> 
 <span style="color:#000000;">z) </span> 
 <span style="color:#000000;">分类：一对一，一对多，多对多 </span> 
</div> 
<div> 
 <span style="color:#000000;">aa) </span> 
 <span style="color:#000000;">一对一： </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">可以把表 </span> 
 <span style="color:#000000;">A </span> 
 <span style="color:#000000;">的主键充当表 </span> 
 <span style="color:#000000;">B </span> 
 <span style="color:#000000;">的外键，也可以把表 </span> 
 <span style="color:#000000;">B </span> 
 <span style="color:#000000;">的主键当充当表 </span> 
 <span style="color:#000000;">A </span> 
 <span style="color:#000000;">的主键 </span> 
</div> 
<div> 
 <span style="color:#000000;">bb) </span> 
 <span style="color:#000000;">一对多： </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>i. </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">在多的一方添加外键 </span> 
</div> 
<div> 
 <span style="color:#000000;">cc) </span> 
 <span style="color:#000000;">多对多： </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">任何一个表都有一个主键，但不一定都有外键 </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">多对多的关系需要另外一张表来表示（通常至少有两列） </span> 
</div> 
<div> 
 <span style="color:#000000;">iii. </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">班级表 </span> 
</div> 
<div> 
 <span style="color:#000000;">create table banji </span> 
</div> 
<div> 
 <span style="color:#000000;">(</span> 
 <span style="color:#000000;"><strong>4 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">banji_id int primary key, </span> 
</div> 
<div> 
 <span style="color:#000000;">banji_num int not null, </span> 
</div> 
<div> 
 <span style="color:#000000;">banji_name nvarchar(100) </span> 
</div> 
<div> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">教师表 </span> 
</div> 
<div> 
 <span style="color:#000000;">create table jiaoshi </span> 
</div> 
<div> 
 <span style="color:#000000;">( </span> 
</div> 
<div> 
 <span style="color:#000000;">jiaoshi_id int primary key, </span> 
</div> 
<div> 
 <span style="color:#000000;">jiaoshi_name nvarchar(200) </span> 
</div> 
<div> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">第三张表 用来模拟班级和教师的关系 </span> 
</div> 
<div> 
 <span style="color:#000000;">create table banji_jiaoshi_mapping </span> 
</div> 
<div> 
 <span style="color:#000000;">( </span> 
</div> 
<div> 
 <span style="color:#000000;">banji_id int </span> 
 <span style="color:#ff0000;">constraint fk_banji_id foreign key references banji(banji_id)</span> 
 <span style="color:#000000;">, </span> 
</div> 
<div> 
 <span style="color:#000000;">jiaoshi_id int </span> 
 <span style="color:#ff0000;">foreign key references jiaoshi(jiaoshi_id)</span> 
 <span style="color:#000000;">, </span> 
</div> 
<div> 
 <span style="color:#000000;">kecheng nvarchar(20), </span> 
</div> 
<div> 
 <span style="color:#000000;">constraint pk_banji_id_jiao_id </span> 
 <span style="color:#ff0000;">primary key(banji_id, jiaoshi_id, kecheng) </span> 
</div> 
<div> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">删除表 </span> 
</div> 
<div> 
 <span style="color:#000000;">drop table banji_jiaoshi_mapping </span> 
</div> 
<div> 
 <span style="color:#000000;">在第三张表里面，</span> 
 <span style="color:#000000;">constraint fk_banji_id </span> 
 <span style="color:#000000;">为 </span> 
 <span style="color:#000000;">banji_id </span> 
 <span style="color:#000000;">这个外键设置了一个别 </span> 
</div> 
<div> 
 <span style="color:#000000;">名；</span> 
 <span style="color:#000000;">foreign key references banji(banji_id)</span> 
 <span style="color:#000000;">这句话，设置了一个外键，其中“一” </span> 
</div> 
<div> 
 <span style="color:#000000;">的一方是 </span> 
 <span style="color:#000000;">banji </span> 
 <span style="color:#000000;">里的 </span> 
 <span style="color:#000000;">banji_id</span> 
 <span style="color:#000000;">；下面一条命令同样设置了一外键，不过是省略了 </span> 
</div> 
<div> 
 <span style="color:#000000;">外 键 的 名 字 ； 最 后 一 条 命 令 设 置 了 一 个 联 合 主 键 ， 设 其 名 字 为 </span> 
</div> 
<div> 
 <span style="color:#000000;">pk_banji_id_jiao_id</span> 
 <span style="color:#000000;">，只能用这种方法来设置联合主键，不能一个一个地单独写 </span> 
</div> 
<div> 
 <span style="color:#000000;">主键；在第三张表里面，删除了这个关系表 </span> 
</div> 
<div> 
 <span style="color:#000000;">dd) </span> 
 <span style="color:#000000;">数据库关系图的使用 </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">在一个库里右击数据库关系图，新建数据库关系图，选中要选择的表 </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">在删除一个关系时，不会把属性同时删除 </span> 
</div> 
<div> 
 <span style="color:#000000;">iii. </span> 
</div> 
<div> 
 <span style="color:#000000;">要放大和缩小关系图，</span> 
 <span style="color:#000000;"><strong>Ctrl+</strong></span> 
 <span style="color:#000000;">鼠标滚轮 </span> 
</div> 
<div> 
 <span style="color:#000000;">iv. </span> 
</div> 
<div> 
 <span style="color:#000000;">利用 </span> 
</div> 
<div> 
 <span style="color:#000000;">可以快速改变视图的位置 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">主键的具体定义及注意事项 </span> 
</div> 
<div> 
 <span style="color:#000000;">ee) </span> 
 <span style="color:#000000;">主键定义：能够唯一标识一个事物的一个字段或者多个字段的组合 </span> 
</div> 
<div> 
 <span style="color:#000000;">ff) </span> 
 <span style="color:#000000;">主键特征： </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">含有主键的表叫做主键表 </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">主键通常都是整数，不建议使用字符串当主键（如果主键是用于集群式服务， </span> 
</div> 
<div> 
 <span style="color:#000000;">才可以考虑用字符串当主键） </span> 
</div> 
<div> 
 <span style="color:#000000;">iii. </span> 
</div> 
<div> 
 <span style="color:#000000;">主键的值通常都不允许修改，除非本记录被删除 </span> 
</div> 
<div> 
 <span style="color:#000000;">iv. </span> 
</div> 
<div> 
 <span style="color:#000000;">主键不要定义成 </span> 
 <span style="color:#000000;">id</span> 
 <span style="color:#000000;">，而要定义成“表名 </span> 
 <span style="color:#000000;">id</span> 
 <span style="color:#000000;">”或者“表名</span> 
 <span style="color:#000000;">_id</span> 
 <span style="color:#000000;">” </span> 
</div> 
<div> 
 <span style="color:#000000;">v. </span> 
</div> 
<div> 
 <span style="color:#000000;">要用代理主键，不要用业务主键 </span> 
</div> 
<div> 
 <span style="color:#000000;">1. </span> 
 <span style="color:#000000;">任何一张表，强烈建议不要使用有业务含义的字段充当主键 </span> 
</div> 
<div> 
 <span style="color:#000000;">2. </span> 
 <span style="color:#000000;">我们通常都是在表中单独添加一个整型的编号充当主键字段</span> 
 <span style="color:#000000;"><strong>5 </strong></span> 
</div> 
<div> 
 <span style="color:#ff0000;">外键的具体定义及要注意的问题 </span> 
</div> 
<div> 
 <span style="color:#000000;">定义：如果一个表中的若干个字段是来自另外若干个表的主键或唯一键，则这若干 </span> 
</div> 
<div> 
 <span style="color:#000000;">个字段就是外键 </span> 
</div> 
<div> 
 <span style="color:#000000;">注意： </span> 
</div> 
<div> 
 <span style="color:#000000;">vi. </span> 
</div> 
<div> 
 <span style="color:#000000;">外键通常是来自另外表的主键而不是唯一键，因为唯一键可能为 </span> 
 <span style="color:#000000;">null </span> 
</div> 
<div> 
 <span style="color:#000000;">vii. </span> 
</div> 
<div> 
 <span style="color:#000000;">外键不一定是来自另外的表，也可能来自本表的主键 </span> 
</div> 
<div> 
 <span style="color:#000000;">viii. </span> 
</div> 
<div> 
 <span style="color:#000000;">含有外键的表叫外键表，外键字段来自的那一张表叫做主键表 </span> 
</div> 
<div> 
 <span style="color:#000000;">gg) </span> 
 <span style="color:#000000;">问题：先删主键表还是外键表？ </span> 
</div> 
<div> 
 <span style="color:#000000;">先删外键表 </span> 
</div> 
<div> 
 <span style="color:#000000;">二、查询(顺序) </span> 
</div> 
<div> 
 <span style="color:#ff0000;">计算列(scott 库) </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select empno, ename from emp; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select ename, </span> 
 <span style="color:#ff0000;">sal*12 as "年薪" </span> 
 <span style="color:#000000;">from emp； </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">这里所写的 </span> 
 <span style="color:#000000;">sal*12 </span> 
 <span style="color:#000000;">是指把一个月的工资乘以 </span> 
 <span style="color:#000000;">12 </span> 
 <span style="color:#000000;">之后的结果；</span> 
 <span style="color:#000000;">as </span> 
 <span style="color:#000000;">在这里写不写 </span> 
</div> 
<div> 
 <span style="color:#000000;">都可以；年薪这里要写的是</span> 
 <span style="color:#ff0000;">双引号</span> 
 <span style="color:#000000;">，不要写其他的符号，值是 </span> 
 <span style="color:#000000;">5 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select 888 from emp; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">这里写 </span> 
 <span style="color:#000000;">888</span> 
 <span style="color:#000000;">，查询出来的没有列名，输出的行数是 </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#000000;">表的行，每行只有一 </span> 
</div> 
<div> 
 <span style="color:#000000;">个字段 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select 5; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">这里写的 </span> 
 <span style="color:#000000;">5</span> 
 <span style="color:#000000;">，查询出来的是没有列名，只有一个记录（不推荐这样写） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">在 </span> 
 <span style="color:#000000;">Oracle </span> 
 <span style="color:#000000;">里不能通过 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">注意：在 </span> 
 <span style="color:#000000;">Oracle </span> 
 <span style="color:#000000;">中字段的别名不允许用单引号括起来，但是 </span> 
 <span style="color:#000000;">SqlServer2012 </span> 
 <span style="color:#000000;">却允许， </span> 
</div> 
<div> 
 <span style="color:#000000;">因此为了兼容性，最好</span> 
 <span style="color:#ff0000;">将字段的别名用双引号括起来 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">distinct（不允许重复的）的用法 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">select distinct </span> 
 <span style="color:#000000;">deptno from emp; </span> 
 <span style="color:#000000;">这里，</span> 
 <span style="color:#000000;">distinct deptno </span> 
 <span style="color:#000000;">会过滤掉重复的 </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">select distinct comm </span> 
 <span style="color:#000000;">from emp; distinct </span> 
 <span style="color:#000000;">也可以过滤掉重复的 </span> 
 <span style="color:#000000;">null</span> 
 <span style="color:#000000;">，或者说如果有多 </span> 
</div> 
<div> 
 <span style="color:#000000;">个 </span> 
 <span style="color:#000000;">null</span> 
 <span style="color:#000000;">，只输出一个 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">select distinct comm, deptno </span> 
 <span style="color:#000000;">from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">把 </span> 
 <span style="color:#000000;">comm </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">deptnor </span> 
 <span style="color:#000000;">的组合进行过滤 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select deptno, distinct comm from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">逻辑上有冲突 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select ename, * from emp; </span> 
 <span style="color:#000000;">这个在 </span> 
 <span style="color:#000000;">SqlServer </span> 
 <span style="color:#000000;">里正确，在 </span> 
 <span style="color:#000000;">Oracle </span> 
 <span style="color:#000000;">里不正确 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">between（在某个范围）的用法 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">在这里，先执行 </span> 
 <span style="color:#000000;">from emp</span> 
 <span style="color:#000000;">，知道要在哪个表里查找，然后 </span> 
</div> 
<div> 
 <span style="color:#000000;">执行 </span> 
 <span style="color:#000000;">select *</span> 
 <span style="color:#000000;">，知道要找哪些数据 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">查找工资在 </span> 
 <span style="color:#000000;">1500 </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">3000 </span> 
 <span style="color:#000000;">之间（包括 </span> 
 <span style="color:#000000;">1500 </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">3000</span> 
 <span style="color:#000000;">）的所有的员工的信息 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">where sal &gt;= 1500 and sal &lt;= 3000</span> 
 <span style="color:#000000;">; </span> 
</div> 
<div> 
 <span style="color:#000000;">等价于： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">where sal between 1500 and 3000</span> 
 <span style="color:#000000;">;</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>6 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">查找工资小于 </span> 
 <span style="color:#000000;">1500 </span> 
 <span style="color:#000000;">或大于 </span> 
 <span style="color:#000000;">3000 </span> 
 <span style="color:#000000;">的所有的员工的信息 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where sal &lt; 1500 or sal &gt; 3000; </span> 
</div> 
<div> 
 <span style="color:#000000;">等价于： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where sal not between 1500 and 3000 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">in（属于若干个孤立的值） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">where sal in (1500, 3000)</span> 
 <span style="color:#000000;">; </span> 
</div> 
<div> 
 <span style="color:#000000;">在 </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#000000;">表中取出 </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#000000;">为 </span> 
 <span style="color:#000000;">1500 </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">3000 </span> 
</div> 
<div> 
 <span style="color:#000000;">的所有记录，等价于： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">where sal = 1500 or sal = 3000</span> 
 <span style="color:#000000;">; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">where sal not in (1500, 3000)</span> 
 <span style="color:#000000;">; </span> 
 <span style="color:#000000;">在 </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#000000;">表中取出 </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#000000;">既不是 </span> 
 <span style="color:#000000;">1500 </span> 
 <span style="color:#000000;">也 </span> 
</div> 
<div> 
 <span style="color:#000000;">不是 </span> 
 <span style="color:#000000;">3000 </span> 
 <span style="color:#000000;">的记录，等价于： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">where sal &lt;&gt; 1500 and sal &lt;&gt; 3000</span> 
 <span style="color:#000000;">; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">在数据库中不等于有两种表示方式： </span> 
 <span style="color:#ff0000;">!= &lt;&gt; </span> 
 <span style="color:#000000;">推荐使用第二种 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">对或取反是并且，对并且取反是或 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">top（最前面的若干个记录，专属于 SqlServer 的语法，不可移 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">植到其他数据库中） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select </span> 
 <span style="color:#ff0000;">top 2 * </span> 
 <span style="color:#000000;">from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">选出 </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#000000;">表中的前两个记录 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select </span> 
 <span style="color:#ff0000;">top 15 percent * </span> 
 <span style="color:#000000;">from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">输出 </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#000000;">表中的前 </span> 
 <span style="color:#000000;">15%</span> 
 <span style="color:#000000;">个，如果不是整数的 </span> 
</div> 
<div> 
 <span style="color:#000000;">话，就进位。如，</span> 
 <span style="color:#000000;">14 * 15% = 2.1</span> 
 <span style="color:#000000;">，则输出 </span> 
 <span style="color:#000000;">3 </span> 
 <span style="color:#000000;">个值 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select top 2 from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">这里没有</span> 
 <span style="color:#000000;">*</span> 
 <span style="color:#000000;">会出错 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">把工资在 </span> 
 <span style="color:#000000;">1500 </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">3000 </span> 
 <span style="color:#000000;">之间（包括 </span> 
 <span style="color:#000000;">1500 </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">3000</span> 
 <span style="color:#000000;">）的员工中工资最高的 </span> 
 <span style="color:#000000;">4 </span> 
 <span style="color:#000000;">个人的 </span> 
</div> 
<div> 
 <span style="color:#000000;">信息输出 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select top 5 * from emp where sal between 1500 and 3000 </span> 
 <span style="color:#ff0000;">order by sal desc</span> 
 <span style="color:#000000;">; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">其中 </span> 
 <span style="color:#000000;">desc </span> 
 <span style="color:#000000;">是降序的意思，默认情况下是升序 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">null（没有值 空值） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">零和 </span> 
 <span style="color:#000000;">null </span> 
 <span style="color:#000000;">是不一样的，</span> 
 <span style="color:#000000;">null </span> 
 <span style="color:#000000;">表示空值，没有值；零表示一个确定的值 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">null </span> 
 <span style="color:#000000;">不能参与如下运算：</span> 
 <span style="color:#ff0000;">&lt;&gt; </span> 
</div> 
<div> 
 <span style="color:#ff0000;">!= = </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">null </span> 
 <span style="color:#000000;">可以参与如下运算：</span> 
 <span style="color:#ff0000;">is </span> 
</div> 
<div> 
 <span style="color:#ff0000;">is not </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例如： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where comm &lt;&gt; null; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">错误 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where comm != null; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">错误 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where comm = null; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">错误 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">where comm is null</span> 
 <span style="color:#000000;">; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">输出奖金为空的员工的信息 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">where comm is not null</span> 
 <span style="color:#000000;">; --</span> 
 <span style="color:#000000;">输出奖金不为空的员工的信息 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">任何类型的数据都允许为 </span> 
 <span style="color:#000000;"><strong>null</strong></span> 
 <span style="color:#000000;">,</span> 
 <span style="color:#000000;">如： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">create table t1(name nvarchar(20), cnt int , riqi datetime), </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into t1 values (null, null, null); </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">任何数字与 </span> 
 <span style="color:#000000;"><strong>null </strong></span> 
 <span style="color:#000000;">参与数学运算的结果永远是 </span> 
 <span style="color:#000000;"><strong>null</strong></span> 
 <span style="color:#000000;">，例如： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">–</span> 
 <span style="color:#000000;">输出第个员工的姓名年薪（包含了资金），</span> 
 <span style="color:#000000;">comm </span> 
 <span style="color:#000000;">假设是一年的资金 </span> 
</div> 
<div> 
 <span style="color:#000000;">select empno, ename, sal * 12 +comm “</span> 
 <span style="color:#000000;">年薪</span> 
 <span style="color:#000000;">” from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">如果有 </span> 
 <span style="color:#000000;">null </span> 
 <span style="color:#000000;">参与运算的话，结果全部为 </span> 
 <span style="color:#000000;">null </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">正确的写法是：</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>7 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">select ename, sal * 12 + </span> 
 <span style="color:#ff0000;">isnull(comm, 0) “</span> 
 <span style="color:#ff0000;">年薪</span> 
 <span style="color:#ff0000;">” from emp</span> 
 <span style="color:#000000;">; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">isnull(comm, 0)</span> 
 <span style="color:#ff0000;">表示：如果 </span> 
 <span style="color:#ff0000;">comm </span> 
 <span style="color:#ff0000;">是 </span> 
 <span style="color:#ff0000;">null</span> 
 <span style="color:#ff0000;">，就返回零否则返回 </span> 
 <span style="color:#ff0000;">comm </span> 
 <span style="color:#ff0000;">的值 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">order by 的用法（以某个字段排序） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">order by a, b; </span> 
</div> 
<div> 
 <span style="color:#000000;">a </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">b </span> 
 <span style="color:#000000;">都是升序 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">order by a, b desc; a </span> 
 <span style="color:#000000;">升序， </span> 
 <span style="color:#000000;">b </span> 
 <span style="color:#000000;">降序 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">order by a desc, b; a </span> 
 <span style="color:#000000;">降序， </span> 
 <span style="color:#000000;">b </span> 
 <span style="color:#000000;">升序 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">order by a desc, b desc; </span> 
</div> 
<div> 
 <span style="color:#000000;">a </span> 
 <span style="color:#000000;">降序， </span> 
 <span style="color:#000000;">b </span> 
 <span style="color:#000000;">降序 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">文字描述： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">如果不指定排序的标准，则默认是升序，</span> 
 <span style="color:#ff0000;">升序用 </span> 
 <span style="color:#ff0000;">asc </span> 
 <span style="color:#ff0000;">表示</span> 
 <span style="color:#000000;">，默认可以省略不写， </span> 
</div> 
<div> 
 <span style="color:#ff0000;">降序用 </span> 
 <span style="color:#ff0000;">desc </span> 
 <span style="color:#ff0000;">表示 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">为一个字段指定的排序标准并不会对另一个字段产生影响 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">强烈建议为第一个字段都指定排序的标准 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp order by sal; </span> 
 <span style="color:#000000;">如果不加什么排序标准，默认是按照升序排列 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">order by deptno, sal</span> 
 <span style="color:#000000;">; </span> 
</div> 
<div> 
 <span style="color:#000000;">先 按 照 </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">排 序 ， 如 果 </span> 
</div> 
<div> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">相同，则再按照 </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#000000;">来排序，默认都是升序 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp </span> 
 <span style="color:#ff0000;">order by deptno desc, sal</span> 
 <span style="color:#000000;">; </span> 
</div> 
<div> 
 <span style="color:#000000;">这里 </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">里面写了 </span> 
 <span style="color:#000000;">desc</span> 
 <span style="color:#000000;">，则 </span> 
</div> 
<div> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">按照降序来排列；如果 </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">相同，后面的 </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#000000;">没有写排序类型，则 </span> 
</div> 
<div> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#000000;">按照升序来排序（</span> 
 <span style="color:#000000;">Oracle </span> 
 <span style="color:#000000;">也是这样） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp order by deptno, sal desc; </span> 
</div> 
<div> 
 <span style="color:#000000;">与上相同，先按 </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">升序， </span> 
</div> 
<div> 
 <span style="color:#000000;">如果 </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">相同，则再按 </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#000000;">的降序来排列；不会对 </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">产生影响 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">模糊查询[搜索时经常使用] </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">格式：</span> 
 <span style="color:#ff0000;">select </span> 
 <span style="color:#ff0000;">字段的集合 </span> 
 <span style="color:#ff0000;">from </span> 
 <span style="color:#ff0000;">表名 </span> 
 <span style="color:#ff0000;">where </span> 
 <span style="color:#ff0000;">某个字段的名字 </span> 
 <span style="color:#ff0000;">like </span> 
 <span style="color:#ff0000;">匹配条件 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">匹配的条件通常含有</span> 
 <span style="color:#ff0000;">通配符 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">%</span> 
 <span style="color:#000000;">（百分号）表示任意 </span> 
 <span style="color:#ff0000;">0 </span> 
 <span style="color:#ff0000;">个</span> 
 <span style="color:#000000;">或</span> 
 <span style="color:#ff0000;">多个</span> 
 <span style="color:#000000;">字符 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where ename </span> 
 <span style="color:#ff0000;">like '%A%'</span> 
 <span style="color:#000000;">; --ename </span> 
 <span style="color:#000000;">只要含有 </span> 
 <span style="color:#000000;">A </span> 
 <span style="color:#000000;">就输出 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where ename </span> 
 <span style="color:#ff0000;">like 'A%''</span> 
 <span style="color:#000000;">; --ename </span> 
 <span style="color:#000000;">只要首字母为 </span> 
 <span style="color:#000000;">A </span> 
 <span style="color:#000000;">就输出 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">_</span> 
 <span style="color:#000000;">（下划线）表示任意</span> 
 <span style="color:#ff0000;">单个字符 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where ename like '_A%'; --ename </span> 
 <span style="color:#000000;">第二个字母是 </span> 
 <span style="color:#000000;">A </span> 
 <span style="color:#000000;">就输出 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">[a-f] </span> 
 <span style="color:#000000;">a </span> 
 <span style="color:#000000;">到 </span> 
 <span style="color:#000000;">f </span> 
 <span style="color:#000000;">中的任意</span> 
 <span style="color:#ff0000;">单个字符</span> 
 <span style="color:#000000;">，只能是 </span> 
 <span style="color:#000000;">a, b, c, d, e, f </span> 
 <span style="color:#000000;">中的任意一个字符 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where ename like '_[A-F]%';--</span> 
 <span style="color:#000000;">把 </span> 
 <span style="color:#000000;">ename </span> 
 <span style="color:#000000;">中第二个字母是 </span> 
</div> 
<div> 
 <span style="color:#000000;">A, B, C, D, E, F </span> 
 <span style="color:#000000;">中的任意一个字符的记录输出 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">[a, f] </span> 
 <span style="color:#000000;">a </span> 
 <span style="color:#000000;">或 </span> 
 <span style="color:#000000;">f </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">[^a-c] </span> 
 <span style="color:#000000;">不是 </span> 
 <span style="color:#000000;">a</span> 
 <span style="color:#000000;">，也不是 </span> 
 <span style="color:#000000;">b</span> 
 <span style="color:#000000;">，也不是 </span> 
 <span style="color:#000000;">c </span> 
 <span style="color:#000000;">的记录 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from emp where ename like '_[^A-C]%';--</span> 
 <span style="color:#000000;">把 </span> 
 <span style="color:#000000;">ename </span> 
 <span style="color:#000000;">中第二个字母不 </span> 
</div> 
<div> 
 <span style="color:#000000;">是 </span> 
 <span style="color:#000000;">A</span> 
 <span style="color:#000000;">，不是 </span> 
 <span style="color:#000000;">B</span> 
 <span style="color:#000000;">，也不是 </span> 
 <span style="color:#000000;">C </span> 
 <span style="color:#000000;">的记录输出 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">注意：匹配的条件必须用单引号括起来，不能省略，也不能改用双引号 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">单引号：字符串 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">双引号：对象的名字</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#ff0000;">自己的理解</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">模糊查询中通配符作为普通字符使用的问题 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select * from student where name like ‘%\_%’ escape ‘\’ </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">这表示把所有记录中 </span> 
 <span style="color:#000000;">name </span> 
 <span style="color:#000000;">列包含下划线</span> 
 <span style="color:#000000;">‘_’</span> 
 <span style="color:#000000;">字符的记录输出 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">escape ‘\’ </span> 
 <span style="color:#000000;">表示把 </span> 
 <span style="color:#000000;">‘\’</span> 
 <span style="color:#000000;">字符当做转义字符的标志</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>8 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">在 </span> 
 <span style="color:#000000;">sql </span> 
 <span style="color:#000000;">中可以把任意的字符当做转义字符的标志，具体是把哪个字符当做转义 </span> 
</div> 
<div> 
 <span style="color:#000000;">字符，这是由 </span> 
 <span style="color:#000000;">escape ‘</span> 
 <span style="color:#000000;">要制定为转义字符的字符</span> 
 <span style="color:#000000;">’ </span> 
 <span style="color:#000000;">来决定的 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">聚合函数[多行记录返回一个值，通常用于统计分组的信息] </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">函数的分类： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">单行函数，</span> 
 <span style="color:#ff0000;">每一行返回一个值 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">多行函数，</span> 
 <span style="color:#ff0000;">多行返回记录一个值</span> 
 <span style="color:#000000;">；聚合函数是多行函数 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子：</span> 
 <span style="color:#000000;">select lower(ename) from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">最终返回的是 </span> 
 <span style="color:#000000;">14 </span> 
 <span style="color:#000000;">行 </span> 
 <span style="color:#000000;">lower()</span> 
 <span style="color:#000000;">是单行 </span> 
</div> 
<div> 
 <span style="color:#000000;">函数（</span> 
 <span style="color:#000000;">lower()</span> 
 <span style="color:#000000;">是将大写的转换成小写的；</span> 
 <span style="color:#000000;">upper()</span> 
 <span style="color:#000000;">将小写的转换成大写的） </span> 
</div> 
<div> 
 <span style="color:#000000;">select max(sal) from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">返回行 </span> 
 <span style="color:#000000;">max()</span> 
 <span style="color:#000000;">是多行函数 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;">聚合函数的分类：</span> 
 <span style="color:#ff0000;">（当聚合函数作用某个字段时，会忽略所有的 </span> 
 <span style="color:#ff0000;">NULL </span> 
 <span style="color:#ff0000;">行） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">常用的聚合函数： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">AVG(ALL|DISTINCT expression) </span> 
 <span style="color:#000000;">数字表达式中所有值的平均值 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">SUM(ALL|DISTINCT expression) </span> 
 <span style="color:#000000;">表达式中所有值的平均值 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">COUNT(ALL|DISTINCT expression) </span> 
 <span style="color:#000000;">表达式中值的个数 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">COUNT(*) </span> 
</div> 
<div> 
 <span style="color:#000000;">选定的行数 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">MAX(expression) </span> 
</div> 
<div> 
 <span style="color:#000000;">表达式中的最高值 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">MIN(expression) </span> 
</div> 
<div> 
 <span style="color:#000000;">表达式中的最低值 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;"><strong>max() </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">适用于数值型，字符型和日期型的列，对于列值为 </span> 
 <span style="color:#000000;"><strong>NULL </strong></span> 
 <span style="color:#000000;">的列，</span> 
 <span style="color:#000000;"><strong>MAX </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">不将其列为对比的对象 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">min() </span> 
</div> 
<div> 
 <span style="color:#000000;">avg()</span> 
 <span style="color:#000000;">（平均值） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">count()</span> 
 <span style="color:#000000;">（求个数） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">count(*) --</span> 
 <span style="color:#000000;">返回 </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#000000;">表所有记录的个数 </span> 
</div> 
<div> 
 <span style="color:#000000;">a) select count(*) from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">返回 </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#000000;">表所有记录的个数 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">count (</span> 
 <span style="color:#000000;">字段名</span> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">返回字段值非空的记录的个数，重复的记录也会被当 </span> 
</div> 
<div> 
 <span style="color:#000000;">做有效的记录 </span> 
</div> 
<div> 
 <span style="color:#000000;">a) select count(deptno) from emp; --</span> 
 <span style="color:#000000;">返回值是 </span> 
 <span style="color:#000000;">14</span> 
 <span style="color:#000000;">，说明 </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">重复的 </span> 
</div> 
<div> 
 <span style="color:#000000;">记录也被当做有效值 </span> 
</div> 
<div> 
 <span style="color:#000000;">b) select count(comm) from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">返回值是 </span> 
 <span style="color:#000000;">4</span> 
 <span style="color:#000000;">，说明 </span> 
 <span style="color:#000000;">comm </span> 
 <span style="color:#000000;">为 </span> 
 <span style="color:#000000;">null </span> 
 <span style="color:#000000;">的 </span> 
</div> 
<div> 
 <span style="color:#000000;">记录不会被当做有效的记录 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">count (distinct </span> 
 <span style="color:#000000;">字段名</span> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">返回字段不重复并且非空的记录的个数 </span> 
</div> 
<div> 
 <span style="color:#000000;">a) select count(distinct deptno) from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">返回值是 </span> 
 <span style="color:#000000;">3</span> 
 <span style="color:#000000;">，</span> 
</div> 
<div> 
 <span style="color:#000000;">统计 </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#000000;">中不重复的个数 </span> 
</div> 
<div> 
 <span style="color:#000000;">b) select count (distinct comm) from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">返回值是 </span> 
 <span style="color:#000000;">4</span> 
 <span style="color:#000000;">，这说明 </span> 
 <span style="color:#000000;">comm </span> 
</div> 
<div> 
 <span style="color:#000000;">为 </span> 
 <span style="color:#000000;">null </span> 
 <span style="color:#000000;">的记录不会被当做有效的记录 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">注意的问题： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select max(sal) "</span> 
 <span style="color:#000000;">最高工资</span> 
 <span style="color:#000000;">", min(sal) "</span> 
 <span style="color:#000000;">最低工资</span> 
 <span style="color:#000000;">", count(*) "</span> 
 <span style="color:#000000;">员工人数</span> 
 <span style="color:#000000;">" from emp; </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">这样写没有冲突 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select max(sal), lower(sal) from emp; --</span> 
 <span style="color:#000000;">错误，单行函数和多行函数不能混用 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">grout by 用法[</span> 
 <span style="color:#0000ff;">分组统计查询</span> 
 <span style="color:#ff0000;">][重难点] </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">从一个数据库切换到另一个数据库，可以使用 </span> 
 <span style="color:#ff0000;">use scott; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">格式：</span> 
 <span style="color:#000000;">group by </span> 
 <span style="color:#000000;">字段的集合 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">功能：把表中的记录按照字段分成不同的组</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>9 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">例子： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">查询不同部门的平均工资 </span> 
</div> 
<div> 
 <span style="color:#000000;">select deptno, avg(sal) as “</span> 
 <span style="color:#000000;">部门平均工资</span> 
 <span style="color:#000000;">” </span> 
</div> 
<div> 
 <span style="color:#000000;">from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">group by deptno </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">理解： </span> 
 <span style="color:#000000;">group by a, b, c </span> 
 <span style="color:#000000;">的用法 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">先按 </span> 
 <span style="color:#ff0000;">a </span> 
 <span style="color:#ff0000;">分组， 如果 </span> 
 <span style="color:#ff0000;">a </span> 
 <span style="color:#ff0000;">相同，再按 </span> 
 <span style="color:#ff0000;">b </span> 
 <span style="color:#ff0000;">分组；如果 </span> 
 <span style="color:#ff0000;">b </span> 
 <span style="color:#ff0000;">相同， 再按 </span> 
 <span style="color:#ff0000;">c </span> 
 <span style="color:#ff0000;">分组；最终统 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">计的是最小分组的信息 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">下面几行语句是错误的： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select deptno, avg(sal) as”</span> 
 <span style="color:#000000;">部门平均工资</span> 
 <span style="color:#000000;">”, ename </span> 
</div> 
<div> 
 <span style="color:#000000;">from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">group by deptno </span> 
</div> 
<div> 
 <span style="color:#000000;">在这里按照部门 </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#000000;">来分组，</span> 
 <span style="color:#ff0000;">只能写组的信息，不能写组内部的信息。这 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">样写部门分组只有三组，名字却有 </span> 
 <span style="color:#ff0000;">14 </span> 
 <span style="color:#ff0000;">个，所以不行 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select deptno, ename </span> 
</div> 
<div> 
 <span style="color:#000000;">from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">group by deptno </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select deptno, job, sal </span> 
</div> 
<div> 
 <span style="color:#000000;">from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">group by deptno, job </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">使用了 </span> 
 <span style="color:#000000;">group by </span> 
 <span style="color:#000000;">之后 </span> 
 <span style="color:#000000;">select </span> 
 <span style="color:#000000;">中</span> 
 <span style="color:#ff0000;">只能出现分组后每组的整体信息，不能出现组内 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">的详细信息 </span> 
</div> 
<div> 
 <span style="color:#000000;">使用</span> 
 <span style="color:#000000;"><strong>group by</strong></span> 
 <span style="color:#000000;">后</span> 
 <span style="color:#000000;"><strong>select</strong></span> 
 <span style="color:#000000;">后面的字段只能写可以描述每条记录属性的字段 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">use </span> 
 <span style="color:#000000;">scott</span> 
 <span style="color:#ff0000;">; </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出每个部门的编号和该部门的平均工资 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#0000ff;">as </span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">部门编号</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">as</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">部门平均工资</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">按部门编号分组</span> 
 <span style="color:#008000;">,</span> 
 <span style="color:#008000;">统计分组每组整体信息 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#008000;">--error </span> 
 <span style="color:#008000;">不能写组内部信息</span> 
 <span style="color:#008000;">,ename</span> 
 <span style="color:#008000;">不能写 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno"</span> 
 <span style="color:#000000;">部门编号</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">job"</span> 
 <span style="color:#000000;">职称</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">job</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">先按部门编号分组，部门编号相同，按职称分组 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno"</span> 
 <span style="color:#000000;">部门号</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">job"</span> 
 <span style="color:#000000;">职称</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">同一部门相同职位的平均工资</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">job</span> 
 <span style="color:#008000;">-- </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>10 </strong></span> 
</div> 
<div> 
 <span style="color:#008000;">对上面进行排序输出 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno"</span> 
 <span style="color:#000000;">部门编号</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">job"</span> 
 <span style="color:#000000;">职称</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">同一部门相同职称的平均工资</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">job </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#0000ff;">desc</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;">--select</span> 
 <span style="color:#008000;">后面的字段只能写可以描述每条记录属性的字段 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno"</span> 
 <span style="color:#000000;">部门编号</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">job"</span> 
 <span style="color:#000000;">职称</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">count</span> 
 <span style="color:#ff0000;">(*)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">同一部门相同职称员工数</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">job </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#0000ff;">desc</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">), </span> 
 <span style="color:#ff00ff;">count</span> 
 <span style="color:#ff0000;">(*)</span> 
 <span style="color:#008000;">--count(*)</span> 
 <span style="color:#008000;">为相同组的员工人数 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#000000;">谨记：使用</span> 
 <span style="color:#000000;"><strong>group by </strong></span> 
 <span style="color:#000000;">后</span> 
 <span style="color:#ff0000;"><strong>select</strong></span> 
 <span style="color:#ff0000;">后面的字段只能写可以描述每条记 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">录属性的字段 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">出现在 </span> 
 <span style="color:#ff0000;">SELECT </span> 
 <span style="color:#ff0000;">列表中的字段，如果不是包含在分组函数中，那么该字段必须同时 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">在 </span> 
 <span style="color:#ff0000;">GROUP BY </span> 
 <span style="color:#ff0000;">子句中出现。但是在 </span> 
 <span style="color:#ff0000;">GROUP BY </span> 
 <span style="color:#ff0000;">子句中的字段则不必须出现在 </span> 
 <span style="color:#ff0000;">SELECT </span> 
</div> 
<div> 
 <span style="color:#ff0000;">列表中</span> 
 <span style="color:#000000;">，例如： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select avg(sal) </span> 
</div> 
<div> 
 <span style="color:#000000;">from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">group by deptno; </span> 
</div> 
<div> 
 <span style="color:#000000;">--OK </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select deptno, avg(sal) </span> 
</div> 
<div> 
 <span style="color:#000000;">from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">group by deptno; --OK </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select ename, avg(sal) </span> 
</div> 
<div> 
 <span style="color:#000000;">from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">group by deptno --error </span> 
 <span style="color:#000000;">一定要明白该句为什么是错误的 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">having（</span> 
 <span style="color:#0000ff;">用来对分组之后的信息进行过滤</span> 
 <span style="color:#ff0000;">） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">having </span> 
 <span style="color:#000000;">子句是用来对分组之后的数据进行过滤， </span> 
</div> 
<div> 
 <span style="color:#000000;">因此使用 </span> 
 <span style="color:#000000;">having </span> 
 <span style="color:#000000;">时通常都会先使用 </span> 
 <span style="color:#000000;">group by </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">如果没有使用 </span> 
 <span style="color:#000000;">group by </span> 
 <span style="color:#000000;">但使用了 </span> 
 <span style="color:#000000;">having</span> 
 <span style="color:#000000;">，则意味着把所有的记录当做一组来进行 </span> 
</div> 
<div> 
 <span style="color:#000000;">过滤。一般很少这样用 </span> 
 <span style="color:#000000;">select count(*) from emp having avg(sal) &gt; 1000; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;"><strong>having </strong></span> 
 <span style="color:#000000;">子句出现的字段必须得是分组之后的</span> 
 <span style="color:#ff0000;">组的整体信息，</span> 
 <span style="color:#ff0000;"><strong>having </strong></span> 
 <span style="color:#000000;">不允许出现</span> 
 <span style="color:#ff0000;">组 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">内的详细的信息 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">尽管 </span> 
 <span style="color:#000000;">select </span> 
 <span style="color:#000000;">字段中可以出现别名，但是 </span> 
 <span style="color:#ff0000;"><strong>having </strong></span> 
 <span style="color:#ff0000;">子句中不能出现字段的别名</span> 
 <span style="color:#000000;">，只能 </span> 
</div> 
<div> 
 <span style="color:#000000;">使用字段最原始的名字 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">having </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">where </span> 
 <span style="color:#000000;">的异同 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">相同点： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">都是对数据过滤，只保留有效的数据</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>11 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">where </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">having </span> 
 <span style="color:#000000;">一样，</span> 
 <span style="color:#ff0000;">都不允许出现字段的别名</span> 
 <span style="color:#000000;">，只允许出现最原始的字 </span> 
</div> 
<div> 
 <span style="color:#000000;">段名字，在 </span> 
 <span style="color:#000000;">SqlServer2012 </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">Oracle </span> 
 <span style="color:#000000;">中都成立 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">不同点： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">where </span> 
 <span style="color:#000000;">是对原始的记录过滤，</span> 
 <span style="color:#000000;">having </span> 
 <span style="color:#000000;">是对分组之后的记录过滤 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;"><strong>where </strong></span> 
 <span style="color:#000000;">必须得写在 </span> 
 <span style="color:#ff0000;"><strong>having </strong></span> 
 <span style="color:#000000;">的前面，顺序不可颠倒，否则运行出错 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;"><strong>where </strong></span> 
 <span style="color:#000000;">是对</span> 
 <span style="color:#ff0000;">原始的数据</span> 
 <span style="color:#000000;">过滤</span> 
 <span style="color:#ff0000;">，不能使用聚合函数，</span> 
 <span style="color:#000000;">因为还没有分组 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select deptno, avg(sal) </span> 
</div> 
<div> 
 <span style="color:#000000;">from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">where sal &gt; 2000 </span> 
</div> 
<div> 
 <span style="color:#000000;">group by deptno </span> 
</div> 
<div> 
 <span style="color:#000000;">having avg(sal) &gt; 3000; </span> 
 <span style="color:#000000;">（正确） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">select deptno, avg(sal) </span> 
</div> 
<div> 
 <span style="color:#000000;">from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">group by deptno </span> 
</div> 
<div> 
 <span style="color:#000000;">having avg(sal) &gt; 3000; </span> 
</div> 
<div> 
 <span style="color:#000000;">where sal &gt; 2000; </span> 
 <span style="color:#000000;">（不正确） </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">having--</span> 
 <span style="color:#008000;">对分组后进行过滤 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">use </span> 
 <span style="color:#000000;">scott</span> 
 <span style="color:#ff0000;">; </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">; </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出部门平均工资大于的部门的编号</span> 
 <span style="color:#008000;">,</span> 
 <span style="color:#008000;">以及该部门的平均工资 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)&gt;</span> 
 <span style="color:#000000;">2000</span> 
 <span style="color:#ff0000;">;</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">对分组后的记录过滤 </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno"</span> 
 <span style="color:#000000;">编号大于的部门</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">该部门的平均工资</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">&gt;</span> 
 <span style="color:#000000;">10</span> 
 <span style="color:#ff0000;">;</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">对分组后的记录过滤 </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">ename </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">ename </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">), </span> 
 <span style="color:#ff00ff;">count</span> 
 <span style="color:#ff0000;">(*)</span> 
 <span style="color:#008000;">--count(*)</span> 
 <span style="color:#008000;">为相同组的员工人数 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#000000;"><strong>12 </strong></span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having </span> 
 <span style="color:#ff00ff;">count</span> 
 <span style="color:#ff0000;">(*)&gt;=</span> 
 <span style="color:#000000;">5</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">对分组后的记录过滤 </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">--having </span> 
 <span style="color:#008000;">与</span> 
 <span style="color:#008000;">where </span> 
 <span style="color:#008000;">的区别 </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">把姓名不包含</span> 
 <span style="color:#008000;">A</span> 
 <span style="color:#008000;">的所有员工按部门编号分组 </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">统计输出平均工资大于的部门的编号以及该部门的平均工资 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno"</span> 
 <span style="color:#000000;">部门编号</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">ename"</span> 
 <span style="color:#000000;">名字不含</span> 
 <span style="color:#000000;">A</span> 
 <span style="color:#000000;">的员工</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">ename </span> 
 <span style="color:#ff0000;">not like '%A%'</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">对原始记录过滤</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">排除部门中名字中含</span> 
 <span style="color:#008000;">A</span> 
 <span style="color:#008000;">的员工 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">ename </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno"</span> 
 <span style="color:#000000;">部门编号</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">ename"</span> 
 <span style="color:#000000;">名字不含</span> 
 <span style="color:#000000;">A</span> 
 <span style="color:#000000;">的员工</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">ename </span> 
 <span style="color:#ff0000;">not like '%A%'</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">对原始记录过滤</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">排除部门中名字中含</span> 
 <span style="color:#008000;">A</span> 
 <span style="color:#008000;">的员工 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having </span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&gt;</span> 
 <span style="color:#000000;">1500</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">对分组后的记录过滤 </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno"</span> 
 <span style="color:#000000;">部门编号</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">count</span> 
 <span style="color:#ff0000;">(*)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">部门人数</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">部门平均工资</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
</div> 
<div> 
 <span style="color:#ff00ff;">min</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">最少工资</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">max</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">最多工资</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">ename </span> 
 <span style="color:#ff0000;">not like '%A%'</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">排除部门中名字中含</span> 
 <span style="color:#008000;">A</span> 
 <span style="color:#008000;">的员工 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno"</span> 
 <span style="color:#000000;">部门编号</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">count</span> 
 <span style="color:#ff0000;">(*)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">部门人数</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">部门平均工资</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
</div> 
<div> 
 <span style="color:#ff00ff;">min</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">最少工资</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">max</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#000000;">最多工资</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">ename </span> 
 <span style="color:#ff0000;">not like '%A%'</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">排除部门中名字中含</span> 
 <span style="color:#008000;">A</span> 
 <span style="color:#008000;">的员工 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)&gt;</span> 
 <span style="color:#000000;">2000</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">对分组后的记录过滤 </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------</span> 
 <span style="color:#000000;"><strong>13 </strong></span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">总结： </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">list </span> 
</div> 
<div> 
 <span style="color:#0000ff;">into </span> 
 <span style="color:#000000;">new_table_name </span> 
 <span style="color:#008000;">-- </span> 
 <span style="color:#008000;">把查询结果放入新表 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">tablename </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">search conditions </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">list </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having </span> 
 <span style="color:#000000;">search conditions </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">list </span> 
</div> 
<div> 
 <span style="color:#000000;">union </span> 
 <span style="color:#000000;">运算符可以合并多个查询结果 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">连接查询(</span> 
 <span style="color:#0000ff;">多表查询</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">定义：</span> 
 <span style="color:#000000;">将两个或者两个以上的表以一定的连接条件连接起来， </span> 
</div> 
<div> 
 <span style="color:#000000;">从中检索出满足条件的数据 </span> 
</div> 
<div> 
 <span style="color:#000000;">分类：</span> 
 <span style="color:#000000;">内连接，外连接，完全连接，交叉连接，自连接，联合 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">内连接（重点，但不难） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;"><strong>select …from A, B </strong></span> 
 <span style="color:#000000;">的用法 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">产生的结果：行数是 </span> 
 <span style="color:#000000;">A </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">B </span> 
 <span style="color:#000000;">的乘积，列数是 </span> 
 <span style="color:#000000;">A </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">B </span> 
 <span style="color:#000000;">之和；或者说：把 </span> 
 <span style="color:#000000;">A </span> 
</div> 
<div> 
 <span style="color:#000000;">（或 </span> 
 <span style="color:#000000;">B</span> 
 <span style="color:#000000;">）表的每一条记录都和 </span> 
 <span style="color:#000000;">B</span> 
 <span style="color:#000000;">（或 </span> 
 <span style="color:#000000;">A</span> 
 <span style="color:#000000;">）表的每一条记录组合在一起，形 </span> 
</div> 
<div> 
 <span style="color:#000000;">成的是个</span> 
 <span style="color:#0000ff;">笛卡尔积 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">注意：</span> 
 <span style="color:#000000;">select * from A, B </span> 
 <span style="color:#000000;">输出结果和 </span> 
 <span style="color:#000000;">select * from B, A </span> 
 <span style="color:#000000;">的结果是一样的 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子：</span> 
 <span style="color:#000000;"><strong>14 </strong></span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">--emp 14 </span> 
 <span style="color:#008000;">行列 </span> 
 <span style="color:#008000;">dept 5 </span> 
 <span style="color:#008000;">行列 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">dept </span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出行列 </span> 
 <span style="color:#008000;">70=14×5 11=8+3 </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;"><strong>select …from A, B where … </strong></span> 
 <span style="color:#000000;">的用法 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">对 </span> 
 <span style="color:#000000;">select … from A, B </span> 
 <span style="color:#000000;">产生的笛卡尔积用 </span> 
 <span style="color:#ff0000;">where </span> 
 <span style="color:#ff0000;">中的条件进行过滤</span> 
 <span style="color:#000000;">（</span> 
 <span style="color:#000000;">A </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">B </span> 
</div> 
<div> 
 <span style="color:#000000;">互换输出结果一样） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子： </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">dept </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">empno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">7369</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出行列 </span> 
 <span style="color:#008000;">5=1×11=8+3 </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#000000;">这条语句可以理解成：将 </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#000000;">中的 </span> 
 <span style="color:#000000;">empno </span> 
 <span style="color:#000000;">为 </span> 
 <span style="color:#000000;">7369 </span> 
 <span style="color:#000000;">的记录分别与 </span> 
 <span style="color:#000000;">dept </span> 
</div> 
<div> 
 <span style="color:#000000;">中的每一条记录相连，其中 </span> 
 <span style="color:#000000;">dept </span> 
 <span style="color:#000000;">表中只有 </span> 
 <span style="color:#000000;">5 </span> 
 <span style="color:#000000;">行，所以结果只有 </span> 
 <span style="color:#000000;">5 </span> 
 <span style="color:#000000;">行记录 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;"><strong>select …from A join B on …</strong></span> 
 <span style="color:#000000;">的用法</span> 
 <span style="color:#000000;"><strong>(</strong></span> 
 <span style="color:#000000;">有 </span> 
 <span style="color:#000000;"><strong>join,</strong></span> 
 <span style="color:#000000;">必须有 </span> 
 <span style="color:#000000;"><strong>on) </strong></span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">A </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">B </span> 
 <span style="color:#000000;">互换输出结果不变 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">on </span> 
 <span style="color:#000000;">中是连接条件 </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E"</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">为</span> 
 <span style="color:#008000;">emp</span> 
 <span style="color:#008000;">表起个别名</span> 
 <span style="color:#008000;">E </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D"</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">把</span> 
 <span style="color:#008000;">emp</span> 
 <span style="color:#008000;">表和</span> 
 <span style="color:#008000;">dept</span> 
 <span style="color:#008000;">表连接起来 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">1</span> 
 <span style="color:#ff0000;">=</span> 
 <span style="color:#000000;">1 </span> 
 <span style="color:#008000;">--on</span> 
 <span style="color:#008000;">表示连接条件“真” </span> 
</div> 
<div> 
 <span style="color:#000000;">输出行列</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">因为连接条件永远成立就和没有一样了 </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename "</span> 
 <span style="color:#000000;">员工姓名</span> 
 <span style="color:#000000;">"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">dname "</span> 
 <span style="color:#000000;">部门姓名</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">1</span> 
 <span style="color:#ff0000;">=</span> 
 <span style="color:#000000;">1</span> 
 <span style="color:#ff0000;">;</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出行列 </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">俩张表中都有</span> 
 <span style="color:#008000;">deptno</span> 
 <span style="color:#008000;">就</span> 
 <span style="color:#008000;">error </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">1</span> 
 <span style="color:#ff0000;">=</span> 
 <span style="color:#000000;">1</span> 
 <span style="color:#ff0000;">; </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#008000;">--ok </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">1</span> 
 <span style="color:#ff0000;">=</span> 
 <span style="color:#000000;">1</span> 
 <span style="color:#ff0000;">; </span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出</span> 
 <span style="color:#008000;">70</span> 
 <span style="color:#008000;">行</span> 
 <span style="color:#008000;">1</span> 
 <span style="color:#008000;">列 </span> 
</div> 
<div> 
 <span style="color:#008000;">-----------------------------------------------</span> 
 <span style="color:#008000;">-- </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>15 </strong></span> 
</div> 
<div> 
 <span style="color:#008000;">这样俩张表中相同部门就对着连接起来了 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#000000;">推荐使用 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出</span> 
 <span style="color:#008000;">14</span> 
 <span style="color:#008000;">行</span> 
 <span style="color:#008000;">11</span> 
 <span style="color:#008000;">列 </span> 
</div> 
<div> 
 <span style="color:#008000;">------------------------------------------------------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">与上面输出结果一样 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">dept </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">dept</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出行列 </span> 
</div> 
<div> 
 <span style="color:#008000;">------------------------------------------------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;"><strong>select …from A, B where … </strong></span> 
 <span style="color:#0000ff;">与 </span> 
 <span style="color:#000000;"><strong>select …from A join B on … </strong></span> 
 <span style="color:#000000;">的比较 </span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">把工资大于的员工的姓名和部门的编号</span> 
 <span style="color:#008000;">,</span> 
 <span style="color:#008000;">部门名称输出 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">dname</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&gt;</span> 
 <span style="color:#000000;">2000 </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">dname</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&gt;</span> 
 <span style="color:#000000;">2000 </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">把工资大于的员工的姓名</span> 
 <span style="color:#008000;">,</span> 
 <span style="color:#008000;">部门的名称和工资的等级输出 </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">涉及</span> 
 <span style="color:#008000;">3 </span> 
 <span style="color:#008000;">个表</span> 
 <span style="color:#008000;">emp dept SALGRADE </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#008000;">--emp</span> 
 <span style="color:#008000;">和</span> 
 <span style="color:#008000;">dept</span> 
 <span style="color:#008000;">成一张临时表了 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">SALGRADE "G"</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">与第三张表连接 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&gt;=</span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">LOSAL </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&lt;=</span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">HISAL</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">三表 </span> 
</div> 
<div> 
 <span style="color:#008000;">成一表 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">GRADE </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">SALGRADE "G" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&gt;=</span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">LOSAL </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&lt;=</span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">HISAL </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">&gt; </span> 
 <span style="color:#000000;">2000 </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">dept "D"</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">SALGRADE "G"</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">迪卡尔积</span> 
 <span style="color:#000000;"><strong>16 </strong></span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">and </span> 
</div> 
<div> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&gt;=</span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">LOSAL </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&lt;=</span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">HISAL</span> 
 <span style="color:#ff0000;">) and </span> 
</div> 
<div> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&gt;</span> 
 <span style="color:#000000;">2000 </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">-</span> 
 <span style="color:#008000;">-</span> 
 <span style="color:#008000;">输出姓名不包含</span> 
 <span style="color:#008000;">A</span> 
 <span style="color:#008000;">的工资前三名的员工的姓名工资工资等级部门名称 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">3 "E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">GRADE</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">dname </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">SALGRADE "G" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">LOSAL </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">HISAL </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename </span> 
 <span style="color:#ff0000;">not like '%A%'</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">只能写这 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;"><strong>select</strong></span> 
 <span style="color:#000000;">、 </span> 
 <span style="color:#000000;"><strong>from</strong></span> 
 <span style="color:#000000;">、 </span> 
 <span style="color:#000000;"><strong>where</strong></span> 
 <span style="color:#000000;">、 </span> 
 <span style="color:#000000;"><strong>join</strong></span> 
 <span style="color:#000000;">、 </span> 
 <span style="color:#000000;"><strong>on</strong></span> 
 <span style="color:#000000;">、 </span> 
 <span style="color:#000000;"><strong>group by</strong></span> 
 <span style="color:#000000;">、 </span> 
 <span style="color:#000000;"><strong>order by</strong></span> 
 <span style="color:#000000;">、 </span> 
 <span style="color:#000000;"><strong>top</strong></span> 
 <span style="color:#000000;">、 </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>having </strong></span> 
 <span style="color:#000000;">的混合使用</span> 
 <span style="color:#000000;"><strong>(having </strong></span> 
 <span style="color:#000000;">里面只能有原始字段的名字</span> 
 <span style="color:#000000;"><strong>) </strong></span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">查询的顺序： </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top</span> 
 <span style="color:#ff0000;">... </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">A </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">B </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#ff0000;">... </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">C </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on</span> 
 <span style="color:#ff0000;">... </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where</span> 
 <span style="color:#ff0000;">... </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by</span> 
 <span style="color:#ff0000;">... </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having ... </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by... </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子：</span> 
 <span style="color:#000000;"><strong>--</strong></span> 
 <span style="color:#000000;">把工资大于 </span> 
 <span style="color:#000000;"><strong>1500 </strong></span> 
 <span style="color:#000000;">的所有的员工按部门分组 把部门平均工资大于 </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>2000 </strong></span> 
 <span style="color:#000000;">的最高前 </span> 
 <span style="color:#000000;"><strong>2 </strong></span> 
 <span style="color:#000000;">个的部门的编号 部门的名称 部门平均工资的等级 </span> 
</div> 
<div> 
 <span style="color:#008000;">------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">2 "E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">salgrade "S" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">losal </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">hisal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">&gt; </span> 
 <span style="color:#000000;">1500 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) &gt; </span> 
 <span style="color:#000000;">2000 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#008000;">------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#0000ff;">Select </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">dname</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">grade"</span> 
 <span style="color:#000000;">部平工资等级</span> 
 <span style="color:#000000;">" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">dept"D" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">2 "E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"avg_sal"</span> 
 <span style="color:#000000;"><strong>17 </strong></span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">salgrade "S" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">losal </span> 
 <span style="color:#ff0000;">and </span> 
</div> 
<div> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">hisal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">&gt; </span> 
 <span style="color:#000000;">1500 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) &gt; </span> 
 <span style="color:#000000;">2000 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"T" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">salgrade "S" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">avg_sal </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">losal </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">hisal </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.*, </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">dname</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">grade </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">inner join ( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">2 deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">as </span> 
</div> 
<div> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">&gt; </span> 
 <span style="color:#000000;">1500 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">having </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) &gt; </span> 
 <span style="color:#000000;">2000 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">"avg_sal" </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#000000;">"T" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">inner join </span> 
 <span style="color:#000000;">salgrade "S" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">"avg_sal" </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">losal </span> 
 <span style="color:#ff0000;">and </span> 
</div> 
<div> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">hisal </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">习题： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">判断以下语句输出是几行： </span> 
</div> 
<div> 
 <span style="color:#000000;">a) select * from emp, dept where emp.deptno = 10 </span> 
</div> 
<div> 
 <span style="color:#000000;">--15 </span> 
 <span style="color:#000000;">行 </span> 
</div> 
<div> 
 <span style="color:#000000;">b) select * from emp, dept where dept.deptno = 10 </span> 
</div> 
<div> 
 <span style="color:#000000;">--14 </span> 
 <span style="color:#000000;">行这里是过 </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">滤条件不是连接条件 </span> 
</div> 
<div> 
 <span style="color:#000000;">如何把</span> 
 <span style="color:#000000;">select * from emp, dept where dept.deptno = 10</span> 
 <span style="color:#000000;">以</span> 
 <span style="color:#000000;">sql99</span> 
 <span style="color:#000000;">标准来完成 </span> 
</div> 
<div> 
 <span style="color:#000000;">select * from emp join dept on 1 = 1 where dept. deptno = 10; </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">求出每个员工的姓名、部门编号、薪水和薪水的等级 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">GRADE </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">SALGRADE "G" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">LOSAL </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">HISAL</span> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>18 </strong></span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">查找每个部门的编号、该部门所有员工的平均工资、平均工资的等级 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">avg_sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">GRADE </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from</span> 
 <span style="color:#ff0000;">( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#008000;">--order by "E".deptno--error</span> 
 <span style="color:#008000;">，</span> 
 <span style="color:#008000;">不能加 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">这是一张临时表 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">SALGRADE "G" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">avg_sal </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">LOSAL </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">HISAL </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">等价于</span> 
 <span style="color:#008000;">--------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">avg_sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">grade </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">SALGRADE "G" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"T" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">avg_sal </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">losal </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">hisal </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">等价于</span> 
 <span style="color:#008000;">--------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">avg_sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">grade </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">salgrade "G"</span> 
 <span style="color:#ff0000;">, ( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"T" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">avg_sal</span> 
 <span style="color:#ff0000;">between</span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">losal</span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">hisal </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">查找每个部门的编号、部门名称、该部门所有员工的平均工资、平均工 </span> 
</div> 
<div> 
 <span style="color:#000000;">资的等级 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">avg_sal</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">grade</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">dname </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">SALGRADE "G" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"T" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">avg_sal </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">losal </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"G"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">hisal</span> 
 <span style="color:#000000;"><strong>19 </strong></span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">求出 </span> 
 <span style="color:#000000;"><strong>emp </strong></span> 
 <span style="color:#000000;">表中所有领导的信息 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">empno </span> 
 <span style="color:#ff0000;">in (</span> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">mgr </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">empno </span> 
 <span style="color:#ff0000;">not in(</span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">mgr </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#008000;">—error </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">因为里面有</span> 
 <span style="color:#008000;">null</span> 
 <span style="color:#008000;">，属于</span> 
 <span style="color:#008000;">in</span> 
 <span style="color:#008000;">与</span> 
 <span style="color:#008000;">null</span> 
 <span style="color:#008000;">的组合带来的问题 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">求出平均薪水最高的部门的编号和部门的平均工资 </span> 
</div> 
<div> 
 <span style="color:#000000;">a) </span> 
 <span style="color:#000000;">第一种写法： </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">1 deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#000000;">b) </span> 
 <span style="color:#000000;">第二种写法：</span> 
 <span style="color:#000000;">(</span> 
 <span style="color:#000000;">可以跨数据库</span> 
 <span style="color:#000000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#ff0000;">( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#000000;">"E" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">"avg_sal" </span> 
 <span style="color:#ff0000;">= ( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff00ff;">max</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">"avg_sal"</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#ff0000;">( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#000000;">"T" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">把工资大于所有员工中工资最低的人中，前 </span> 
 <span style="color:#000000;"><strong>3 </strong></span> 
 <span style="color:#000000;">个人的姓名、工资、部门 </span> 
</div> 
<div> 
 <span style="color:#000000;">编号、部门名称、工资等级输出 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff00ff;">min</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#000000;"><strong>20 </strong></span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">&gt; (</span> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff00ff;">min</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">到此生成一个临时表 </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">不能</span> 
 <span style="color:#008000;">join on </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select TOP </span> 
 <span style="color:#000000;">3 "T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
</div> 
<div> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">dname</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">GRADE </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#ff0000;">( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">&gt; (</span> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff00ff;">min</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"T" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">dept "D" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"D"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">SALGRADE "S" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">between </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">losal </span> 
 <span style="color:#ff0000;">and </span> 
 <span style="color:#000000;">"S"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">hisal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">asc </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">外连接 </span> 
</div> 
<div> 
 <span style="color:#000000;">不但返回 满足连接条件的所有记录， </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">定义： </span> 
</div> 
<div> 
 <span style="color:#000000;">而且会返回 部分不满足条件的记录 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">分类：左（右）外连接：不但返回满足连接条件的所有记录，而且 </span> 
</div> 
<div> 
 <span style="color:#000000;">会返回左（右）表不满足连接条件的记录 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">左外连接运行原理： </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>select * from emp “E” </strong></span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>left join dept “D” </strong></span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>on E.deptno = D.deptno </strong></span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#0000ff;">用左表的第一行分别和右表的所有行进行连接</span> 
 <span style="color:#000000;">， </span> 
</div> 
<div> 
 <span style="color:#000000;">如果有匹配的行，则一起输出， </span> 
</div> 
<div> 
 <span style="color:#000000;">如果右表有多行匹配，则结果集输出多行， </span> 
</div> 
<div> 
 <span style="color:#000000;">如果没有匹配行，则结果集中只输出一行，该输出行左边为左表第一行内 </span> 
</div> 
<div> 
 <span style="color:#000000;">容，右边全部输出 </span> 
 <span style="color:#000000;">null</span> 
 <span style="color:#000000;">（内连接不输出） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#0000ff;">然后再用左表第二行和右边所有行进行连接， </span> 
</div> 
<div> 
 <span style="color:#000000;">如果有匹配的行，则一起输出， </span> 
</div> 
<div> 
 <span style="color:#000000;">如果右表有多行匹配，则结果集输出多行， </span> 
</div> 
<div> 
 <span style="color:#000000;">如果没有匹配行，则结果集中只输出一行，该输出行左边为左表第二行内 </span> 
</div> 
<div> 
 <span style="color:#000000;">容，右边全部输出 </span> 
 <span style="color:#000000;">null </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#0000ff;">以此类推，直至左边所有行连接完毕 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">因为右边很可能出现有多行和左边的某一行匹配，所以左连接产生的结果 </span> 
</div> 
<div> 
 <span style="color:#000000;">集的行数</span> 
 <span style="color:#ff0000;">至少大于 </span> 
 <span style="color:#000000;"><strong>left join </strong></span> 
 <span style="color:#000000;">左边表的记录的总数</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>21 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">帮助文档：左向外连接的结果集包括 </span> 
 <span style="color:#000000;">LEFT OUTER </span> 
 <span style="color:#000000;">子句中指定的左表的所 </span> 
</div> 
<div> 
 <span style="color:#000000;">有行，而不仅仅是连接列所匹配的行。如果左表的某行在右表中没有匹配 </span> 
</div> 
<div> 
 <span style="color:#000000;">行，则在相关联的结果集行中右表的所有选择列表列均为空值 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">实际上左连接产生的结果集的行数很至少大于左边表的记录的总数，不 </span> 
</div> 
<div> 
 <span style="color:#000000;">能理解为：左边表有 </span> 
 <span style="color:#000000;"><strong>n </strong></span> 
 <span style="color:#000000;">行，最终产生的记录也是 </span> 
 <span style="color:#000000;"><strong>n </strong></span> 
 <span style="color:#000000;">行。实际上左连接产 </span> 
</div> 
<div> 
 <span style="color:#000000;">生的结果集的行数至少大于左边表的记录的总数 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">dept"D" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">left join </span> 
 <span style="color:#000000;">emp "E" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">E</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">D</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#000000;">结果有 </span> 
 <span style="color:#000000;">16 </span> 
 <span style="color:#000000;">行，左面的 </span> 
 <span style="color:#000000;">dept </span> 
 <span style="color:#000000;">有 </span> 
 <span style="color:#000000;">5 </span> 
 <span style="color:#000000;">行（</span> 
 <span style="color:#000000;">10</span> 
 <span style="color:#000000;">，</span> 
 <span style="color:#000000;">20</span> 
 <span style="color:#000000;">，</span> 
 <span style="color:#000000;">30</span> 
 <span style="color:#000000;">，</span> 
 <span style="color:#000000;">40</span> 
 <span style="color:#000000;">，</span> 
 <span style="color:#000000;">50</span> 
 <span style="color:#000000;">），前三行可以 </span> 
</div> 
<div> 
 <span style="color:#000000;">与 </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#000000;">表中的值进行连接，将有 </span> 
 <span style="color:#000000;">14 </span> 
 <span style="color:#000000;">行，其中 </span> 
 <span style="color:#000000;">40 </span> 
 <span style="color:#000000;">与 </span> 
 <span style="color:#000000;">50 </span> 
 <span style="color:#000000;">与右面的表没有 </span> 
</div> 
<div> 
 <span style="color:#000000;">连接成功，分别输出 </span> 
 <span style="color:#000000;">dept </span> 
 <span style="color:#000000;">表中的第 </span> 
 <span style="color:#000000;">15</span> 
 <span style="color:#000000;">，</span> 
 <span style="color:#000000;">16 </span> 
 <span style="color:#000000;">行，右面都为 </span> 
 <span style="color:#000000;">null </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">左外连接的实际意义 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#0000ff;">一个事物</span> 
 <span style="color:#000000;">及其</span> 
 <span style="color:#0000ff;">该事物的相关信息</span> 
 <span style="color:#000000;">，</span> 
 <span style="color:#ff0000;">如果该事物</span> 
 <span style="color:#0000ff;">没相关信息</span> 
 <span style="color:#ff0000;">，则</span> 
 <span style="color:#0000ff;">输出 </span> 
 <span style="color:#0000ff;"><strong>null </strong></span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子： </span> 
</div> 
<div> 
 <span style="color:#000000;">a) </span> 
 <span style="color:#000000;">已知条件： </span> 
</div> 
<div> 
 <span style="color:#000000;">productStocks </span> 
 <span style="color:#000000;">货物库存表 </span> 
</div> 
<div> 
 <span style="color:#000000;">orderForm </span> 
 <span style="color:#000000;">订单表 </span> 
</div> 
<div> 
 <span style="color:#000000;">pId </span> 
 <span style="color:#000000;">产品的编号 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">sql </span> 
 <span style="color:#000000;">语句： </span> 
</div> 
<div> 
 <span style="color:#000000;">a) select productStocks.*, orderForm.* </span> 
</div> 
<div> 
 <span style="color:#000000;">from productStocks </span> 
</div> 
<div> 
 <span style="color:#000000;">left join orderForm </span> 
</div> 
<div> 
 <span style="color:#000000;">on productStocks.pId = orderForm.pId </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">实际意义： </span> 
</div> 
<div> 
 <span style="color:#0000ff;">返回仓库中现存</span> 
 <span style="color:#000000;">货物的信息表</span> 
 <span style="color:#0000ff;">及其该</span> 
 <span style="color:#000000;">货物的订单信息表</span> 
 <span style="color:#0000ff;">，如果货物 </span> 
</div> 
<div> 
 <span style="color:#800080;">没有订单信息</span> 
 <span style="color:#0000ff;">，在把该</span> 
 <span style="color:#800080;">货物的订单信息全部输出为 </span> 
 <span style="color:#800080;"><strong>null </strong></span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">完全连接（</span> 
 <span style="color:#0000ff;">左外连接与右外连接的结合</span> 
 <span style="color:#000000;">） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子： </span> 
</div> 
<div> 
 <span style="color:#000000;">select * from productStocks </span> 
</div> 
<div> 
 <span style="color:#000000;">full join orderForm </span> 
</div> 
<div> 
 <span style="color:#000000;">on productStocks.pId = orderForm.pId </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">结果集中包含二部分内容 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#0000ff;">两个表匹配的所有行记录 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#0000ff;">左表中那些在右表中找不到匹配的行的记录，这些记录的右边全为 </span> 
 <span style="color:#0000ff;">null </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#0000ff;">右表中那些在左表中找不到匹配的行的几率，这些记录的左边全为 </span> 
 <span style="color:#0000ff;">null </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">交叉连接 </span> 
</div> 
<div> 
 <span style="color:#000000;">select * from emp cross join dept </span> 
</div> 
<div> 
 <span style="color:#000000;">等价于 </span> 
</div> 
<div> 
 <span style="color:#000000;">select * from emp, dept</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>22 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">自连接 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">定义：一张表</span> 
 <span style="color:#0000ff;">自己</span> 
 <span style="color:#000000;">和</span> 
 <span style="color:#0000ff;">自己连接</span> 
 <span style="color:#000000;">起来查询数据 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子：不准用聚合函数，求薪水最高的员工的信息 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">用聚合函数，求薪水最高的员工的信息 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#ff0000;">= (</span> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff00ff;">max</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#008000;">-</span> 
 <span style="color:#008000;">-</span> 
 <span style="color:#008000;">注意</span> 
 <span style="color:#008000;">= </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">不用聚合函数，求薪水最高的员工的信息 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">empno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E2"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E1" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">emp "E2" </span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">自连接 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&lt;</span> 
 <span style="color:#000000;">"E2"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出不包含那一行 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">empno</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">"E2"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E2"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E1" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">left join </span> 
 <span style="color:#000000;">emp "E2"</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">自连接 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&lt;</span> 
 <span style="color:#000000;">"E2"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出包含那一行，且右边为</span> 
 <span style="color:#008000;">null </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">所以 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">empno </span> 
 <span style="color:#ff0000;">not in (</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">注意不能用</span> 
 <span style="color:#008000;">= </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select distinct </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">empno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E1" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">emp "E2"</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">自连接 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">&lt;</span> 
 <span style="color:#000000;">"E2"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">联合（</span> 
 <span style="color:#ff0000;">纵向</span> 
 <span style="color:#0000ff;">连接</span> 
 <span style="color:#000000;">） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">定义：表和表之间的数据以</span> 
 <span style="color:#ff0000;">纵向的方式</span> 
 <span style="color:#0000ff;">连接在一起 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">我们以前讲的所有的连接是以横向的方式连接在一起的 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">例子：输出每个员工的姓名，工资，上司的姓名 </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E1" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">emp "E2" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">mgr </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"E2"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">empno </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出</span> 
 <span style="color:#008000;">13</span> 
 <span style="color:#008000;">行，因为有一行</span> 
 <span style="color:#008000;">king</span> 
 <span style="color:#008000;">没有上司为</span> 
 <span style="color:#008000;">null </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------</span> 
 <span style="color:#008000;">-- </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>23 </strong></span> 
</div> 
<div> 
 <span style="color:#008000;">此时使用联合 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#000000;">"E2"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">ename </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp "E1" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">join </span> 
 <span style="color:#000000;">emp "E2" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">on </span> 
 <span style="color:#000000;">"E1"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">mgr </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#000000;">"E2"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">empno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">union</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">最后添加行 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">老板</span> 
 <span style="color:#ff0000;">' </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">mgr </span> 
 <span style="color:#ff0000;">is null </span> 
</div> 
<div> 
 <span style="color:#008000;">---------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">注意：若干个 </span> 
 <span style="color:#000000;">select </span> 
 <span style="color:#000000;">子句要联合成功的话，必须得满足两个条件， </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">这若干个 </span> 
 <span style="color:#000000;">select </span> 
 <span style="color:#000000;">子句输出的列数必须是相等的 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">这若干个 </span> 
 <span style="color:#000000;">select </span> 
 <span style="color:#000000;">子句输出列的数据类型至少是兼容的 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">identity </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">identity【</span> 
 <span style="color:#ff0000;">主键自动增长</span> 
 <span style="color:#000000;">，用户不需要为 identity 修饰的主键赋值】 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">表示该字段的值会自动更新，不需要我们维护，通常 </span> 
</div> 
<div> 
 <span style="color:#000000;">情况下我们不可以直接给 </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">修饰的字符赋值，否则编译 </span> 
</div> 
<div> 
 <span style="color:#000000;">时会报错 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">语法格式为</span> 
 <span style="color:#000000;">： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;"><strong>identity(m, n) </strong></span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;"><strong>m </strong></span> 
 <span style="color:#000000;">表示的是初始值， </span> 
 <span style="color:#000000;"><strong>n </strong></span> 
 <span style="color:#000000;">表示的是每次自动增加的值 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">要么同时指定 </span> 
 <span style="color:#000000;">m </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">n </span> 
 <span style="color:#000000;">的值，要么 </span> 
 <span style="color:#000000;">m </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">n </span> 
 <span style="color:#000000;">都不指定，不能只写其中一个值；如 </span> 
</div> 
<div> 
 <span style="color:#000000;">果 </span> 
 <span style="color:#000000;">m </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">n </span> 
 <span style="color:#000000;">都未指定，则取默认值</span> 
 <span style="color:#000000;">(1, 1) </span> 
</div> 
<div> 
 <span style="color:#008000;">--------------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">create table </span> 
 <span style="color:#000000;">student2 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">( </span> 
</div> 
<div> 
 <span style="color:#000000;">student_id </span> 
 <span style="color:#0000ff;">int primary key</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#008000;">-</span> 
 <span style="color:#008000;">-</span> 
 <span style="color:#008000;">必须手动为主键赋值 </span> 
</div> 
<div> 
 <span style="color:#000000;">student_name </span> 
 <span style="color:#0000ff;">nvarchar</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">200</span> 
 <span style="color:#ff0000;">) not null </span> 
</div> 
<div> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">insert into </span> 
 <span style="color:#000000;">student2 </span> 
 <span style="color:#0000ff;">values </span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">1</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">张三</span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">insert into </span> 
 <span style="color:#000000;">student2 </span> 
 <span style="color:#0000ff;">values </span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">2</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">李四</span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">insert into </span> 
 <span style="color:#000000;">student2 </span> 
 <span style="color:#0000ff;">values </span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">3</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">王五</span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">student2 </span> 
</div> 
<div> 
 <span style="color:#008000;">----------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#0000ff;">create table </span> 
 <span style="color:#000000;">student3 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">( </span> 
</div> 
<div> 
 <span style="color:#000000;">student_id </span> 
 <span style="color:#0000ff;">int primary key identity</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#008000;">-</span> 
 <span style="color:#008000;">-</span> 
 <span style="color:#008000;">从增长自动 </span> 
</div> 
<div> 
 <span style="color:#008000;">--indentity(100, 5)</span> 
 <span style="color:#008000;">从开始自增</span> 
 <span style="color:#000000;"><strong>24 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">student_name </span> 
 <span style="color:#0000ff;">nvarchar</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">200</span> 
 <span style="color:#ff0000;">) not null </span> 
</div> 
<div> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">insert into </span> 
 <span style="color:#000000;">student3 </span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">student_name</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">values</span> 
 <span style="color:#ff0000;">('</span> 
 <span style="color:#ff0000;">赵六</span> 
 <span style="color:#ff0000;">') </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">student3 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">insert into </span> 
 <span style="color:#000000;">student3 </span> 
 <span style="color:#0000ff;">values</span> 
 <span style="color:#ff0000;">('</span> 
 <span style="color:#ff0000;">李四</span> 
 <span style="color:#ff0000;">')</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">可以忽略主键 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">student3 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">delete from </span> 
 <span style="color:#000000;">student3 </span> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">student_name </span> 
 <span style="color:#ff0000;">= </span> 
 <span style="color:#ff0000;">'</span> 
 <span style="color:#ff0000;">李四</span> 
 <span style="color:#ff0000;">' </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">*</span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">student3 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">insert into </span> 
 <span style="color:#000000;">student3 </span> 
 <span style="color:#0000ff;">values</span> 
 <span style="color:#ff0000;">('</span> 
 <span style="color:#ff0000;">张三</span> 
 <span style="color:#ff0000;">') </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">*</span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">student3</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">主键值为</span> 
 <span style="color:#008000;">3</span> 
 <span style="color:#008000;">, </span> 
</div> 
<div> 
 <span style="color:#008000;">----------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">数据类型是整型的列才能被定义成标识列 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">int, bigint, smallint </span> 
 <span style="color:#000000;">列都可以被定义成 </span> 
 <span style="color:#000000;">identity </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">不含有小数位的 </span> 
 <span style="color:#000000;">decimal </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#000000;">numeric </span> 
 <span style="color:#000000;">也可以被标记为 </span> 
 <span style="color:#000000;">identity,</span> 
 <span style="color:#000000;">如：</span> 
 <span style="color:#000000;">decimal, </span> 
</div> 
<div> 
 <span style="color:#000000;">decimal(6, 0)</span> 
 <span style="color:#000000;">字段都可以被标记为 </span> 
 <span style="color:#000000;">identity</span> 
 <span style="color:#000000;">，但是 </span> 
 <span style="color:#000000;">decimal(6, 2)</span> 
 <span style="color:#000000;">字段就不能被标 </span> 
</div> 
<div> 
 <span style="color:#000000;">记为 </span> 
 <span style="color:#000000;">identity </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">标识列通常与 </span> 
 <span style="color:#000000;">primary key </span> 
 <span style="color:#000000;">约束一起用作表的唯一行标识符（非 </span> 
</div> 
<div> 
 <span style="color:#000000;">主键也是可以被定义为 </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">的，但不推荐） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">如何重新设置 </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">字段的值 </span> 
</div> 
<div> 
 <span style="color:#000000;">create table emp( </span> 
</div> 
<div> 
 <span style="color:#000000;">empid identity(1, 1), </span> 
</div> 
<div> 
 <span style="color:#000000;">ename nvarchar(20) not null, </span> 
</div> 
<div> 
 <span style="color:#000000;">); </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into emp values(‘aaaa’); </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into emp values(‘bbbb’); </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into emp values(‘cccc’); </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into emp values(‘dddd’); </span> 
</div> 
<div> 
 <span style="color:#000000;">--8 </span> 
 <span style="color:#000000;">行 </span> 
</div> 
<div> 
 <span style="color:#000000;">select * from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">delete from emp where empid = 4 </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">删除 </span> 
 <span style="color:#000000;">empid </span> 
 <span style="color:#000000;">为 </span> 
 <span style="color:#000000;">4 </span> 
 <span style="color:#000000;">的记录 </span> 
</div> 
<div> 
 <span style="color:#000000;">select * from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into emp values(‘eeee’) </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">因为执行 </span> 
 <span style="color:#000000;">8 </span> 
 <span style="color:#000000;">行时 </span> 
 <span style="color:#000000;">empid </span> 
 <span style="color:#000000;">为 </span> 
 <span style="color:#000000;">4</span> 
 <span style="color:#000000;">，所以执行 </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">本句时，</span> 
 <span style="color:#000000;">empid </span> 
 <span style="color:#000000;">为 </span> 
 <span style="color:#000000;">5 </span> 
</div> 
<div> 
 <span style="color:#000000;">select * from emp </span> 
</div> 
<div> 
 <span style="color:#000000;">delete from emp where empid = 5 </span> 
</div> 
<div> 
 <span style="color:#0000ff;"><strong>dbcc checkident(‘emp’, reseed, 3) </strong></span> 
</div> 
<div> 
 <span style="color:#0000ff;">--16 </span> 
 <span style="color:#0000ff;">行，把 </span> 
 <span style="color:#0000ff;">emp </span> 
 <span style="color:#0000ff;">表中 </span> 
 <span style="color:#0000ff;">identity </span> 
 <span style="color:#0000ff;">字段的初始 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">--</span> 
 <span style="color:#0000ff;">值重新设置为 </span> 
 <span style="color:#0000ff;">3 </span> 
</div> 
<div> 
 <span style="color:#000000;">insert into emp values(‘eeee’) </span> 
</div> 
<div> 
 <span style="color:#000000;">--</span> 
 <span style="color:#000000;">此时插入记录时，</span> 
 <span style="color:#000000;">empid </span> 
 <span style="color:#000000;">为 </span> 
 <span style="color:#000000;">4</span> 
 <span style="color:#000000;">，因为 </span> 
 <span style="color:#000000;">16 </span> 
</div> 
<div> 
 <span style="color:#000000;">行代码已经把 </span> 
 <span style="color:#000000;">empid </span> 
 <span style="color:#000000;">设置成了 </span> 
 <span style="color:#000000;">3 </span> 
</div> 
<div> 
 <span style="color:#000000;">select * from emp </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">dbcc checkident(‘emp’, reseed, 0)</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>25 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">种子的值也可以是零，这样设置的话，用户插入值时，种子的初始值将从 </span> 
 <span style="color:#000000;">1 </span> 
</div> 
<div> 
 <span style="color:#000000;">开始 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">如何向 </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">字段插入数据（不是重点） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">通常 </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">标记的字段我们是不需要插入数据的，即我们不需要维护 </span> 
 <span style="color:#000000;">identity </span> 
</div> 
<div> 
 <span style="color:#000000;">字段的值，它会自动更新，如果我们需要向 </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">修饰的字段插入值，则必 </span> 
</div> 
<div> 
 <span style="color:#000000;">须满足如下两点： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">先得执行 </span> 
 <span style="color:#000000;">setidentity_insert[database.[owner]] {bable} {on|off} </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">插入数据时必须得指定 </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">修饰的字段的名字 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">向 </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">字段插入数据示例： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">create database Test </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">use Test </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">create bable dept( </span> 
</div> 
<div> 
 <span style="color:#000000;">a) deptid decimal(6, 0) identity, </span> 
</div> 
<div> 
 <span style="color:#000000;">b) deptname varchar(20) </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">); </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">set identity_insert test.dbo.dept on </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">–</span> 
 <span style="color:#000000;">执行本句的目的是：希望可以各 </span> 
 <span style="color:#000000;">identity </span> 
 <span style="color:#000000;">修饰的字段插入值 </span> 
</div> 
<div> 
 <span style="color:#000000;">ii. </span> 
</div> 
<div> 
 <span style="color:#000000;">–</span> 
 <span style="color:#000000;">不可以改为 </span> 
 <span style="color:#000000;">set identity _insert dept on </span> 
</div> 
<div> 
 <span style="color:#000000;">iii. </span> 
</div> 
<div> 
 <span style="color:#000000;">–</span> 
 <span style="color:#000000;">不可以改为 </span> 
 <span style="color:#000000;">set identity _insert dbo.test.dept on </span> 
</div> 
<div> 
 <span style="color:#000000;">iv. </span> 
</div> 
<div> 
 <span style="color:#000000;">–</span> 
 <span style="color:#000000;">不可以改为 </span> 
 <span style="color:#000000;">set identity _insert dbo.test.dept.on </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">insert into dept(deptid, deptname) values (1, ‘zhangsan’) </span> 
</div> 
<div> 
 <span style="color:#000000;">i. </span> 
</div> 
<div> 
 <span style="color:#000000;">–</span> 
 <span style="color:#000000;">不能改为：</span> 
 <span style="color:#000000;">insert into dept values(1, ‘zhangsan’) </span> 
</div> 
<div> 
 <span style="color:#ff0000;">视图 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">为什么需要视图：简化查询（避免了代码的冗余，改名了书写 </span> 
</div> 
<div> 
 <span style="color:#000000;">大量重复的 </span> 
 <span style="color:#000000;">sql </span> 
 <span style="color:#000000;">语句） </span> 
</div> 
<div> 
 <span style="color:#000000;">------------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">求出平均工资最高的部门的编号和部门的平均工资 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#ff0000;">( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"T" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">"T"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">"avg_sal" </span> 
 <span style="color:#ff0000;">= ( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff00ff;">max</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">"E"</span> 
 <span style="color:#ff0000;">.</span> 
 <span style="color:#000000;">"avg_sal"</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from</span> 
 <span style="color:#ff0000;">( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#000000;"><strong>26 </strong></span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"E" </span> 
</div> 
<div> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;">------------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">使用视图避免了代码的冗余 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">create view </span> 
 <span style="color:#000000;">v$_emp_1 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">as </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">deptno</span> 
 <span style="color:#ff0000;">, </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"avg_sal" </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">group by </span> 
 <span style="color:#000000;">deptno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">v$_emp_1 </span> 
</div> 
<div> 
 <span style="color:#000000;">------------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">v$_emp_1 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">avg_sal </span> 
 <span style="color:#ff0000;">= (</span> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff00ff;">max</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">avg_sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">v$_emp_1</span> 
 <span style="color:#ff0000;">) </span> 
</div> 
<div> 
 <span style="color:#008000;">------------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">什么是视图： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">视图</span> 
 <span style="color:#000000;">从代码上看是一个 </span> 
 <span style="color:#0000ff;"><strong>select </strong></span> 
 <span style="color:#0000ff;">语句 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#ff0000;">视图</span> 
 <span style="color:#000000;">从逻辑上看被当做一个</span> 
 <span style="color:#0000ff;">虚拟表</span> 
 <span style="color:#000000;">看待 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">如何创建视图： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">create view </span> 
 <span style="color:#000000;">视图的名字 </span> 
</div> 
<div> 
 <span style="color:#000000;">as </span> 
</div> 
<div> 
 <span style="color:#000000;">–select </span> 
 <span style="color:#000000;">的前面不能添加 </span> 
 <span style="color:#000000;">begin </span> 
</div> 
<div> 
 <span style="color:#000000;">select </span> 
 <span style="color:#000000;">语句 </span> 
</div> 
<div> 
 <span style="color:#000000;">–select </span> 
 <span style="color:#000000;">的后面不能添加 </span> 
 <span style="color:#000000;">end </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">视图的优点：简化查询，增加数据的保密性（隐藏） </span> 
</div> 
<div> 
 <span style="color:#000000;">------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">隐藏工资</span> 
 <span style="color:#008000;">,</span> 
 <span style="color:#008000;">入职年费 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">create view </span> 
 <span style="color:#000000;">v$_emp2 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">as </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#000000;">empno</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">ename</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">job</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">mgr</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">comm</span> 
 <span style="color:#ff0000;">,</span> 
 <span style="color:#000000;">deptno </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">v$_emp2 </span> 
</div> 
<div> 
 <span style="color:#000000;">------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">视图的缺点：增加了数据库维护的成本 </span> 
</div> 
<div> 
 <span style="color:#000000;">只是简化了查询，但是并不能加快查询的速度 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">注意的问题：</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>27 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">创建视图的 </span> 
 <span style="color:#000000;">select </span> 
 <span style="color:#000000;">语句必须为所有的计算列指定别名 </span> 
</div> 
<div> 
 <span style="color:#000000;">------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#0000ff;">create view </span> 
 <span style="color:#000000;">v$_a </span> 
</div> 
<div> 
 <span style="color:#0000ff;">as </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">) </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#008000;">--error </span> 
</div> 
<div> 
 <span style="color:#000000;">------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#0000ff;">create view </span> 
 <span style="color:#000000;">v$_a </span> 
</div> 
<div> 
 <span style="color:#0000ff;">as </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff00ff;">avg</span> 
 <span style="color:#ff0000;">(</span> 
 <span style="color:#000000;">sal</span> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#000000;">"avg_sal" </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp</span> 
 <span style="color:#008000;">--OK </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">不使用分组默认全部为一组 </span> 
</div> 
<div> 
 <span style="color:#000000;">------------------------------------------------ </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">视图不是物理表，是虚拟表 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">不建议通过视图更新视图所依附的原始表的数据或结构 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">事务【重要，初学者重在理解概念】 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">初学者必须理解的三个概念： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">事务是用来研究什么的</span> 
 <span style="color:#000000;"><strong>,</strong></span> 
 <span style="color:#000000;">为什么需要事物 </span> 
</div> 
<div> 
 <span style="color:#000000;">保证数据的合理性（</span> 
 <span style="color:#0000ff;">要么成功要么失败</span> 
 <span style="color:#000000;">） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">事务主要用来 </span> 
</div> 
<div> 
 <span style="color:#000000;">并发处理的能力（</span> 
 <span style="color:#0000ff;">多个用户访问怎么办</span> 
 <span style="color:#000000;">） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">通俗点说： </span> 
</div> 
<div> 
 <span style="color:#000000;">a) </span> 
 <span style="color:#000000;">事务可以保证避免数据处于一种不合理的中间状态 </span> 
</div> 
<div> 
 <span style="color:#000000;">要么全部执行失败， </span> 
</div> 
<div> 
 <span style="color:#000000;">要么全部执行成功， </span> 
</div> 
<div> 
 <span style="color:#000000;">不能出现半对半错的情况。 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">例如</span> 
 <span style="color:#ff0000;">银行转帐 </span> 
</div> 
<div> 
 <span style="color:#000000;">b) </span> 
 <span style="color:#000000;">利用事务可以实现</span> 
 <span style="color:#0000ff;">多个用户</span> 
 <span style="color:#ff0000;">对共享资源的</span> 
 <span style="color:#0000ff;">同时访问 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">事务和线程的关系： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">事务 是 通过</span> 
 <span style="color:#ff0000;">锁 </span> 
 <span style="color:#000000;">来解决并发访问的 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">线程同步 也是 通过锁 来解决并发访问的 </span> 
 <span style="color:#000000;">synchronized </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">所谓并发访问是指：多用户同时访问同一个数据 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">事务和第三方插件的关系 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">直接使用事务库技术难度大，很多人是借助第三方插件来实现，因 </span> 
</div> 
<div> 
 <span style="color:#000000;">此一般人不需要细细研究数据库中事务的语法细节 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">第三方插件要想完成预期的功能，一般必须得借助数据库中的事物 </span> 
</div> 
<div> 
 <span style="color:#000000;">机制来实现</span> 
 <span style="color:#008000;"> </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>28 </strong></span> 
</div> 
<div> 
 <span style="color:#000000;">T-SQL </span> 
 <span style="color:#000000;">使用下列语句来管理事务（不重要）</span> 
 <span style="color:#000000;">”</span> 
 <span style="color:#0000ff;">异常机制</span> 
 <span style="color:#000000;">” </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">开始事务：</span> 
 <span style="color:#0000ff;">begin transaction </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">提交事务：</span> 
 <span style="color:#0000ff;">commit transaction </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">回滚（撤销）事务：</span> 
 <span style="color:#0000ff;">rollback transaction </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">一旦事务提交或回滚，则事务结束 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">事务三种运行模式： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">显式事务</span> 
 <span style="color:#000000;">：（一般使用） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">每个事务均以 </span> 
 <span style="color:#0000ff;">begin transaction </span> 
 <span style="color:#000000;">语句显式开始 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">以 </span> 
 <span style="color:#0000ff;">commit </span> 
 <span style="color:#000000;">或 </span> 
 <span style="color:#0000ff;">rollback </span> 
 <span style="color:#000000;">语句显式结束 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">自动提交事务： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">第条单独的语句都是一个事务。如果成功执行，则自动提交；如果错误， </span> 
</div> 
<div> 
 <span style="color:#000000;">则自动回滚；这是 </span> 
 <span style="color:#000000;">sql server 2005 </span> 
 <span style="color:#000000;">默认的模式 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">隐性事务： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">在前一个事务完成时</span> 
 <span style="color:#983200;">新事务隐式启动</span> 
 <span style="color:#000000;">，但每个事务仍以 </span> 
 <span style="color:#000000;">commit </span> 
 <span style="color:#000000;">或 </span> 
 <span style="color:#000000;">rollback </span> 
</div> 
<div> 
 <span style="color:#000000;">语句 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">事务的四大特性（简称 </span> 
 <span style="color:#000000;">ACID </span> 
 <span style="color:#000000;">属性，一般在面试的时候能用到）： </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">原子性：事务是一个完整的操作。事务的各步操作是不可分的； </span> 
</div> 
<div> 
 <span style="color:#000000;">要么都执行，要么都不执行 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">一致性：当事务完成时，数据必须处于一致状态， </span> 
</div> 
<div> 
 <span style="color:#000000;">要么处于开始状态 </span> 
</div> 
<div> 
 <span style="color:#000000;">要么处于结束状态， </span> 
</div> 
<div> 
 <span style="color:#000000;">不允许出现中间状态 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">隔离性：指当前的事务与其他未完成的事务是隔离的。在不同的隔 </span> 
</div> 
<div> 
 <span style="color:#000000;">离级别下，事务的为读取操作，可以得到的结果是不同的 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">持久性：事务完成后，它对数据库的修改被永久保持，事务日志能 </span> 
</div> 
<div> 
 <span style="color:#000000;">够保持事务的永久性 </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">注意问题：不能在 </span> 
 <span style="color:#000000;">sql server </span> 
 <span style="color:#000000;">中单独使用 </span> 
 <span style="color:#000000;">commit, rollback </span> 
 <span style="color:#000000;">语句 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">索引（可以加快查询） </span> 
</div> 
<div> 
 <span style="color:#008000;"> </span> 
 <span style="color:#000000;">类似于字典的目录 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">存储过程 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">游标 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">TL-SQL</span> 
 <span style="color:#000000;"><strong>29 </strong></span> 
</div> 
<div> 
 <span style="color:#ff0000;">触发器 </span> 
</div> 
<div> 
 <span style="color:#ff0000;">分页查询 </span> 
</div> 
<div> 
 <span style="color:#000000;">假设每而显示 </span> 
 <span style="color:#000000;"><strong>n </strong></span> 
 <span style="color:#000000;">条记录，当前要显示的是第 </span> 
 <span style="color:#000000;"><strong>m </strong></span> 
 <span style="color:#000000;">而，表名是 </span> 
 <span style="color:#000000;"><strong>A</strong></span> 
 <span style="color:#000000;">，主键是 </span> 
 <span style="color:#000000;"><strong>A_id</strong></span> 
 <span style="color:#000000;">： </span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>select top n * </strong></span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>from A </strong></span> 
</div> 
<div> 
 <span style="color:#000000;"><strong>where A_id not in (select top (m - 1) * n A _id from emp ) </strong></span> 
</div> 
<div> 
 <span style="color:#008000;">-------------------------------------------------- </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">分页</span> 
 <span style="color:#008000;">---</span> 
 <span style="color:#008000;">打开网页下面可以一页一页的看，有下一页上一页按钮等 </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">输出工资最高的前三个 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select </span> 
 <span style="color:#ff0000;">* </span> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">3 </span> 
 <span style="color:#ff0000;">*</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">后执行 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">先执行 </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">工资从高到低排序，输出工资排名第</span> 
 <span style="color:#008000;">-6</span> 
 <span style="color:#008000;">的员工信息 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">3 </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">empno </span> 
 <span style="color:#ff0000;">not in ( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">3 empno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">找到工资最高的三个排除 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">工资从高到低排序，输出工资排名第</span> 
 <span style="color:#008000;">-9</span> 
 <span style="color:#008000;">的员工信息 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">3 </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">empno </span> 
 <span style="color:#ff0000;">not in ( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">6 empno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">找到工资最高的六个排除 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">工资从高到低排序，输出工资排名第</span> 
 <span style="color:#008000;">-12</span> 
 <span style="color:#008000;">的员工信息 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">3 </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">empno </span> 
 <span style="color:#ff0000;">not in (</span> 
 <span style="color:#000000;"><strong>30 </strong></span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">9 empno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">找到工资最高的九个排除 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">工资从高到低排序，输出工资排名第</span> 
 <span style="color:#008000;">-15</span> 
 <span style="color:#008000;">的员工信息 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">3 </span> 
 <span style="color:#ff0000;">* </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">where </span> 
 <span style="color:#000000;">empno </span> 
 <span style="color:#ff0000;">not in ( </span> 
</div> 
<div> 
 <span style="color:#0000ff;">select top </span> 
 <span style="color:#000000;">12 empno </span> 
</div> 
<div> 
 <span style="color:#0000ff;">from </span> 
 <span style="color:#000000;">emp </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc </span> 
</div> 
<div> 
 <span style="color:#ff0000;">)</span> 
 <span style="color:#008000;">--</span> 
 <span style="color:#008000;">找到工资最高的个排除 </span> 
</div> 
<div> 
 <span style="color:#0000ff;">order by </span> 
 <span style="color:#000000;">sal </span> 
 <span style="color:#0000ff;">desc</span> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ad3812f7fb502027809d476a07f84a15/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Cookie的详解使用（创建，获取，销毁）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dc3bd6b9fa4a589732a261205155598d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">WPF&#43;Halcon 培训项目实战(1-5):Halcon安装,图像处理,Halcon简单模板匹配</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>