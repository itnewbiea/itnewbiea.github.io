<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Django 7 实现Web便签 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Django 7 实现Web便签" />
<meta property="og:description" content="一、效果图 二、会用到的知识 目录结构与URL路由注册request与response对象模板基础与模板继承ORM查询后台管理 三、实现步骤 1. terminal 输入 django-admin startapp the_10回车
2. 注册， 在 tutorial子文件夹settings.py INSTALLED_APPS 中括号添加 &#34;the_10&#34;
INSTALLED_APPS = [ &#39;django.contrib.admin&#39;, &#39;django.contrib.auth&#39;, &#39;django.contrib.contenttypes&#39;, &#39;django.contrib.sessions&#39;, &#39;django.contrib.messages&#39;, &#39;django.contrib.staticfiles&#39;, &#34;the_3&#34;, &#34;the_5&#34;, &#34;the_6&#34;, &#34;the_7&#34;, &#34;the_8&#34;, &#34;the_9&#34;, &#34;the_10&#34;, ] 3. 路由 tutorial子文件夹 urls.py urlpatterns = [ path(&#39;admin/&#39;, admin.site.urls), path(&#39;the_3/&#39;, include(&#39;the_3.urls&#39;)), path(&#39;the_4/&#39;, include(&#39;the_4.urls&#39;)), path(&#39;the_5/&#39;, include(&#39;the_5.urls&#39;)), path(&#39;the_7/&#39;, include(&#39;the_7.urls&#39;)), path(&#39;the_10/&#39;, include(&#39;the_10.urls&#39;)), ] 4. the_10文件夹新建子文件夹 urls.py
from django.urls import path from .views import index urlpatterns = [ path(&#39;index/&#39;, index), ] 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/25a965e8dfc6f25de1c7cb2aa1459ed2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T23:26:42+08:00" />
<meta property="article:modified_time" content="2024-01-03T23:26:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Django 7 实现Web便签</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、效果图</h2> 
<p><img alt="" height="507" src="https://images2.imgbox.com/31/57/8C1vxJ9C_o.png" width="775"></p> 
<h2>二、会用到的知识</h2> 
<ul><li>目录结构与URL路由注册</li><li>request与response对象</li><li>模板基础与模板继承</li><li>ORM查询</li><li>后台管理</li></ul> 
<h2>三、实现步骤</h2> 
<p>1. terminal 输入 django-admin startapp the_10回车</p> 
<p><img alt="" height="107" src="https://images2.imgbox.com/f7/72/rH9OSJ4X_o.png" width="281"></p> 
<p>2. 注册， 在 tutorial子文件夹settings.py INSTALLED_APPS 中括号添加 "the_10"</p> 
<blockquote> 
 <pre>INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    "the_3",
    "the_5",
    "the_6",
    "the_7",
    "the_8",
    "the_9",
    "the_10",
]
</pre> 
</blockquote> 
<p>3. 路由 tutorial子文件夹 urls.py </p> 
<blockquote> 
 <pre>urlpatterns = [
    path('admin/', admin.site.urls),
    path('the_3/', include('the_3.urls')),
    path('the_4/', include('the_4.urls')),
    path('the_5/', include('the_5.urls')),
    path('the_7/', include('the_7.urls')),
    path('the_10/', include('the_10.urls')),
]</pre> 
</blockquote> 
<p>4. the_10文件夹新建子文件夹 urls.py</p> 
<pre><code class="language-python">from django.urls import path
from .views import index


urlpatterns = [
    path('index/', index),
]</code></pre> 
<p>5. the_10文件夹内的 views.py </p> 
<pre><code class="language-python">from django.shortcuts import render

# Create your views here.

def index(request):
    return render(request, "the_10/the_10_index.html")</code></pre> 
<p>6. templates 文件夹创建 the_10子文件夹，再在the_10子文件夹 创建 the_10_index.html</p> 
<p><img alt="" height="176" src="https://images2.imgbox.com/1c/8f/YDV1GoaJ_o.png" width="328"></p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;web便签&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;hello 2024&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>7. 运行tutorial, 点击 <a href="http://127.0.0.1:8000/" rel="nofollow" title="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a>， 地址栏 https://127.0.0.1:8000/the_10/index/</p> 
<p><img alt="" height="180" src="https://images2.imgbox.com/b6/22/kTUpYQsi_o.png" width="716"></p> 
<p>8. the_10_index.html 代码 </p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;web便签&lt;/title&gt;
    &lt;style&gt;
        {# 归零#}
        *{
            padding: 0;
            margin: 0;
        }
        .appbar{
            height: 100px;
            color: rgb(92,53,21);
            /*给阴影*/
            text-shadow: 0 0 2px red;
            font-size: 60px;
        }
        .main{
            display: flex;
        }
        .content{
            width: 90%;
            height: 700px;
            display: flex;
        }
        .sidebar{
            width: 10%;
            height: 400px;
            font-size: 30px;
            /*文字上下展示，从右向左读*/
            writing-mode: vertical-rl;
            text-shadow: 3px 5px 5px  gray;
        }
        .footer{
            width: 100%;
            background: gray;
            text-align: center;
            color: white;
            padding: 5px 0;
            position: fixed;
            bottom: 0;
        }

        .card{
            align-content: center;
            display: flex;
            flex-wrap:wrap;
            align-items: center;
            width: 200px;
            height: 200px;
            background: rgb(138,109,53);
            justify-content: space-around;
            margin: 10px;
            padding: 10px;
        }
        .card .msg{
            width: 100%;
            text-align: left;
            color: white;
        }
        .card .username{
            width: 100%;
            text-align: right;
            color: red;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
{#页眉#}
    &lt;div class="appbar"&gt;
        人生苦短,我用python
    &lt;/div&gt;
{#主体#}
    &lt;div class="main"&gt;
{#        左边#}
        &lt;div class="content"&gt;
            &lt;div class="card"&gt;
                &lt;div class="msg"&gt;
                    小明，记得好好吃饭哦！
                &lt;/div&gt;
                &lt;div class="username"&gt;
                    python大佬
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="card"&gt;
                &lt;div class="msg"&gt;
                    python大佬，记得明天是项目截止日期！
                &lt;/div&gt;
                &lt;div class="username"&gt;
                    python大佬的老大
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
{#        右边#}
        &lt;div class="sidebar"&gt;
            这世上本没有路，走的人多了，也便成了路！
        &lt;/div&gt;
    &lt;/div&gt;
{#页脚#}
    &lt;div class="footer"&gt;
        Copyright C 1970-2077 Python大佬 All Rights Reserved.
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>9. 刷新浏览器，实现效果 </p> 
<h2><img alt="" height="992" src="https://images2.imgbox.com/65/bd/gky11bec_o.png" width="1200">四、继承</h2> 
<p>1. 在templates\the_10 创建base.html</p> 
<p><img alt="" height="206" src="https://images2.imgbox.com/46/d0/VNaSeeHk_o.png" width="315"></p> 
<p>2. 把the_10_index.html里面的内容全部复制到base.html里面， 然后清空the_10_index.html里面的内容， 然后写入 {% extends 'the_10/base.html' %}</p> 
<pre><code class="language-python">{% extends 'the_10/base.html' %}</code></pre> 
<p>3. 刷新浏览器，发现也能打印，证明the_10/已经引入成功</p> 
<p><img alt="" height="243" src="https://images2.imgbox.com/ea/dd/iJY4nKBa_o.png" width="407"></p> 
<p>4. 在最外面的tutorial文件夹创建一个static的文件夹，专门用来存放css,js等内容， 然后在static文件夹创建一个css的文件，再在css文件夹创建the_10_base.css文件</p> 
<p><img alt="" height="101" src="https://images2.imgbox.com/e5/3e/zZFDdJRu_o.png" width="316"></p> 
<p>5. 把base.html里面style里面的样式内容全部剪切到the_10_base.css里面，删除style标签，然后在the_10_base.css里面改下注释</p> 
<pre><code class="language-css">        /*归零*/
        *{
            padding: 0;
            margin: 0;
        }
        .appbar{
            height: 100px;
            color: rgb(92,53,21);
            /*给阴影*/
            text-shadow: 0 0 2px red;
            font-size: 60px;
        }
        .main{
            display: flex;
        }
        .content{
            width: 90%;
            height: 700px;
            display: flex;
        }
        .sidebar{
            width: 10%;
            height: 400px;
            font-size: 30px;
            /*文字上下展示，从右向左读*/
            writing-mode: vertical-rl;
            text-shadow: 3px 5px 5px  gray;
        }
        .footer{
            width: 100%;
            background: gray;
            text-align: center;
            color: white;
            padding: 5px 0;
            position: fixed;
            bottom: 0;
        }

        .card{
            align-content: center;
            display: flex;
            flex-wrap:wrap;
            align-items: center;
            width: 200px;
            height: 200px;
            background: rgb(138,109,53);
            justify-content: space-around;
            margin: 10px;
            padding: 10px;
        }
        .card .msg{
            width: 100%;
            text-align: left;
            color: white;
        }
        .card .username{
            width: 100%;
            text-align: right;
            color: red;
        }</code></pre> 
<p>6. 我想用这个样式 需要去tutorial\settings.py里面进行配置</p> 
<pre><code class="language-python">STATIC_URL = '/static/'
STATICFILES_DIRS = [
    BASE_DIR / "static",
]</code></pre> 
<p>7. 配置好以后需要引入， 在templates\the_10\base.html 最上面添加 {% load static %}, 然后添加link标签 &lt;link rel="stylesheet" href="{% static 'css/the_10_base.css'%}"&gt;</p> 
<pre><code class="language-python">{% load static %}

&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;web便签&lt;/title&gt;
    &lt;link rel="stylesheet" href="{% static 'css/the_10_base.css'%}"&gt;
&lt;/head&gt;
&lt;body&gt;
{#页眉#}
    &lt;div class="appbar"&gt;
        人生苦短,我用python
    &lt;/div&gt;
{#主体#}
    &lt;div class="main"&gt;
{#        左边#}
        &lt;div class="content"&gt;
            &lt;div class="card"&gt;
                &lt;div class="msg"&gt;
                    小明，记得好好吃饭哦！
                &lt;/div&gt;
                &lt;div class="username"&gt;
                    python大佬
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="card"&gt;
                &lt;div class="msg"&gt;
                    python大佬，记得明天是项目截止日期！
                &lt;/div&gt;
                &lt;div class="username"&gt;
                    python大佬的老大
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
{#        右边#}
        &lt;div class="sidebar"&gt;
            这世上本没有路，走的人多了，也便成了路！
        &lt;/div&gt;
    &lt;/div&gt;
{#页脚#}
    &lt;div class="footer"&gt;
        Copyright C 1970-2077 Python大佬 All Rights Reserved.
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>8. 刷新浏览器，样式就有了，页面如步骤3</p> 
<p>9. 对templates\the_10\base.html里面的content内容进行挖坑</p> 
<p><img alt="" height="164" src="https://images2.imgbox.com/47/20/1uRhpDrR_o.png" width="424"></p> 
<p>10. 把上面的内容复制到the_10_index.html里面，然后把templates\the_10\base.html里面block内的内容删掉</p> 
<p>the_10_index.html</p> 
<pre><code class="language-python">{% extends 'the_10/base.html' %}

{% block content %}
&lt;div class="card"&gt;
    &lt;div class="msg"&gt;
        小明，记得好好吃饭哦！
    &lt;/div&gt;
    &lt;div class="username"&gt;
        python大佬
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="card"&gt;
    &lt;div class="msg"&gt;
        python大佬，记得明天是项目截止日期！
    &lt;/div&gt;
    &lt;div class="username"&gt;
        python大佬的老大
    &lt;/div&gt;
&lt;/div&gt;
{% endblock %}</code></pre> 
<p>templates\the_10\base.html</p> 
<p><img alt="" height="190" src="https://images2.imgbox.com/7a/37/8O5DRMUf_o.png" width="399"></p> 
<p>11. 刷新浏览器，效果如步骤3</p> 
<h2>五、前后端交互</h2> 
<p>1. the_10\views.py做如下修改</p> 
<pre><code class="language-python">from django.shortcuts import render


# Create your views here.

def index(request):
    l = [
        {'msg':'小红，一定要记得好好吃饭哦！', 'username':'python大佬'},
        {'msg': 'python大佬，记得明天是项目截止日期！一定要交，不交不准下班！', 'username': 'python大佬的老大'},
    ]
    return render(request, "the_10/the_10_index.html",{'cards':l})</code></pre> 
<p>2. templates\the_10\the_10_index.html</p> 
<pre><code class="language-python">{% extends 'the_10/base.html' %}

{% block content %}
    {% for i in cards %}
    &lt;div class="card"&gt;
    &lt;div class="msg"&gt;
        {<!-- -->{ i.msg }}
    &lt;/div&gt;
    &lt;div class="username"&gt;
        {<!-- -->{ i.username }}
    &lt;/div&gt;
&lt;/div&gt;
    {% endfor %}
{% endblock %}</code></pre> 
<p>3. 刷新网页，自定义的内容就渲染出来了，这个就叫前后端不分离。</p> 
<p><img alt="" height="454" src="https://images2.imgbox.com/61/95/3wvLAjC9_o.png" width="932"></p> 
<p>4. 这样就可以通过后端控制前端的内容，如果我们再加一条， 刷新网页，就自动加进去了。</p> 
<pre>{'msg': '还有一个月，就到农历新年了！', 'username': 'python大佬'},</pre> 
<p><img alt="" height="244" src="https://images2.imgbox.com/b4/14/auL6bXsE_o.png" width="545"></p> 
<p>六、连接数据库</p> 
<p>1. the_10\models.py 写入代码</p> 
<pre><code class="language-python">from django.db import models

# Create your models here.

class Card(models.Model):
    msg = models.CharField(max_length=200)
    # user = models.OneToOneField('auth.User',on_delete=models.CASCADE) # 一个用户只能发一个便签
    user = models.ForeignKey('auth.User', on_delete=models.CASCADE) # 一个用户可以发多个便签

    def __str__(self):
        return self.msg</code></pre> 
<p>2. 迁移 ， terminal 输入 python .\manage.py makemigrations回车</p> 
<blockquote> 
 <p>Migrations for 'the_10':<br>   the_10\migrations\0001_initial.py<br>     - Create model Card  </p> 
</blockquote> 
<p>3. terminal 再输入 python .\manage.py migrate 回车</p> 
<blockquote> 
 <p>Operations to perform:<br>   Apply all migrations: admin, auth, contenttypes, sessions, the_10, the_6, the_8, the_9<br> Running migrations:<br>   Applying the_10.0001_initial... OK</p> 
</blockquote> 
<p>4. the_10\admin.py加内容</p> 
<pre><code class="language-python">from django.contrib import admin
from the_10.models import Card

# Register your models here.

class CardAdmin(admin.ModelAdmin):
    # fields = ['pub_date','question_text']
    fieldsets = [
        ('日期', {'fields':['user']}),
        ('文本', {'fields': ['msg']}),
    ]
    list_display = ('user','msg')

admin.site.register(Card,CardAdmin)</code></pre> 
<p>5. 浏览器打开 <a href="http://127.0.0.1:8000/admin/" rel="nofollow" title="站点管理 | Django 站点管理员">站点管理 | Django 站点管理员</a>  </p> 
<p><img alt="" height="297" src="https://images2.imgbox.com/29/3b/MeUqFM0X_o.png" width="429"></p> 
<p>6. 点击 Cards， 增加内容</p> 
<p><img alt="" height="243" src="https://images2.imgbox.com/0e/da/udbg4ufH_o.png" width="457"></p> 
<p>7. 从数据库中查询出来,the_10\views.py做如下更改</p> 
<pre><code class="language-python">from django.shortcuts import render
from the_10.models import Card

# Create your views here.

def index(request):
    card = Card.objects.select_related().all()
    # l = [
    #     {'msg':'小红，一定要记得好好吃饭哦！', 'username':'python大佬'},
    #     {'msg': 'python大佬，记得明天是项目截止日期！一定要交，不交不准下班！', 'username': 'python大佬的老大'},
    #     {'msg': '还有一个月，就到农历新年了！', 'username': 'python大佬'},
    # ]
    return render(request, "the_10/the_10_index.html",{'cards':card})</code></pre> 
<p>8.  templates\the_10\the_10_index.html 把username 改成user.username</p> 
<pre><code class="language-python">{% extends 'the_10/base.html' %}

{% block content %}
    {% for i in cards %}
    &lt;div class="card"&gt;
    &lt;div class="msg"&gt;
        {<!-- -->{ i.msg }}
    &lt;/div&gt;
    &lt;div class="username"&gt;
        {<!-- -->{ i.user.username }}
    &lt;/div&gt;
&lt;/div&gt;
    {% endfor %}</code></pre> 
<p>9. 浏览器访问 <a href="http://127.0.0.1:8000/the_10/index/" rel="nofollow" title="web便签">web便签</a></p> 
<p><img alt="" height="207" src="https://images2.imgbox.com/22/76/X39rbK8X_o.png" width="441"></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c6beeab9b33321a5310bd59717c5686e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构 第八章节 排序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/46ed8c17bfcee80489f24424fd69fdd2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">jwt工具类（配置即用）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>