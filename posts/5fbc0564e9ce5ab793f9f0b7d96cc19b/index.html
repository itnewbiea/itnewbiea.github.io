<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Spring学习之生命周期】什么是生命周期？什么是作用域？了解六种作用域 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Spring学习之生命周期】什么是生命周期？什么是作用域？了解六种作用域" />
<meta property="og:description" content="前言：
💞💞从前⾯的课程我们可以看出 Spring 是⽤来读取和存储 Bean，因此在 Spring 中 Bean 是最核⼼的操作资源，所以接下来我们深⼊学习⼀下 Bean 对象。
前路漫漫，希望大家坚持下去，不忘初心，成为一名优秀的程序员
个人主页⭐： 书生♡
gitee主页🙋‍♂：奋斗的小白
专栏主页💞：JavaEE进阶专栏
博客领域💥：java编程前端，算法，强训题目
写作风格💞：超前知识点，干货，思路讲解，通俗易懂
支持博主💖：关注⭐，点赞、收藏⭐、留言💬
目录 1.常见的作用域问题1.1 问题所在1.2 代码示例 2. 作用域2.1 作用域定义2.2Bean 的 6 种作⽤域2.2.1 singleton 单例作⽤域2.2.2 prototype 原型作⽤域2.2.3request 请求作⽤域2.2.4 session 会话作⽤域2.2.5 application 全局作⽤域（了解）2.2.6 websocket ：HTTP WebSocket 作⽤域 2.3 singleton 和 application 的区别2.4 设置作用域 3. Spring执行流程4.Bean ⽣命周期4.1Bean ⽣命周期4.2 实例化和初始化的区别4.3 Bean生命周期代码 1.常见的作用域问题 1.1 问题所在 有一个公共类，类对象被@Controller注解修饰，里面的方法被方法注解@Bean修饰。现在有两个用户都使用这个公共类，但是其中一个用户突然改变了里面的值，这个就导致了另一个用户使用的时候变量值已经发生了变化，因此第二个用户得到的应该是修改以后的。
1.2 代码示例 公共类
@Controller public class StudentBeans { @Bean public Student student1() { // 伪代码，构建对象 Student stu = new Student(); stu." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/5fbc0564e9ce5ab793f9f0b7d96cc19b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-15T13:58:16+08:00" />
<meta property="article:modified_time" content="2023-06-15T13:58:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Spring学习之生命周期】什么是生命周期？什么是作用域？了解六种作用域</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>前言：<br> 💞💞从前⾯的课程我们可以看出 Spring 是⽤来读取和存储 Bean，因此在 Spring 中 Bean 是最核⼼的操作资源，所以接下来我们深⼊学习⼀下 Bean 对象。<br> 前路漫漫，希望大家坚持下去，不忘初心，成为一名优秀的程序员</p> 
</blockquote> 
<blockquote> 
 <p>个人主页⭐： <a href="https://blog.csdn.net/zjm521521?type=blog">书生♡</a><br> gitee主页🙋‍♂：<a href="https://gitee.com/struggling-zjm" rel="nofollow">奋斗的小白</a><br> 专栏主页💞：<a href="http://t.csdn.cn/12P1u" rel="nofollow">JavaEE进阶专栏</a><br> 博客领域💥：java编程前端，算法，强训题目<br> 写作风格💞：超前知识点，干货，思路讲解，通俗易懂<br> 支持博主💖：关注⭐，点赞、收藏⭐、留言💬</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/b3/81/ZEFD5m2J_o.png" alt="在这里插入图片描述"><br> </p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#1_17" rel="nofollow">1.常见的作用域问题</a></li><li><ul><li><a href="#11__18" rel="nofollow">1.1 问题所在</a></li><li><a href="#12__22" rel="nofollow">1.2 代码示例</a></li></ul> 
  </li><li><a href="#2__97" rel="nofollow">2. 作用域</a></li><li><ul><li><a href="#21__98" rel="nofollow">2.1 作用域定义</a></li><li><a href="#22Bean__6__111" rel="nofollow">2.2Bean 的 6 种作⽤域</a></li><li><ul><li><a href="#221_singleton___124" rel="nofollow">2.2.1 singleton 单例作⽤域</a></li><li><a href="#222_prototype___134" rel="nofollow">2.2.2 prototype 原型作⽤域</a></li><li><a href="#223request___140" rel="nofollow">2.2.3request 请求作⽤域</a></li><li><a href="#224_session____150" rel="nofollow">2.2.4 session 会话作⽤域</a></li><li><a href="#225__application___164" rel="nofollow">2.2.5 application 全局作⽤域（了解）</a></li><li><a href="#226__websocket___HTTP_WebSocket__172" rel="nofollow">2.2.6 websocket ：HTTP WebSocket 作⽤域</a></li></ul> 
   </li><li><a href="#23_singleton__application__181" rel="nofollow">2.3 singleton 和 application 的区别</a></li><li><a href="#24__188" rel="nofollow">2.4 设置作用域</a></li></ul> 
  </li><li><a href="#3_Spring_224" rel="nofollow">3. Spring执行流程</a></li><li><a href="#4Bean__242" rel="nofollow">4.Bean ⽣命周期</a></li><li><ul><li><a href="#41Bean__243" rel="nofollow">4.1Bean ⽣命周期</a></li><li><a href="#42__274" rel="nofollow">4.2 实例化和初始化的区别</a></li><li><a href="#43_Bean_277" rel="nofollow">4.3 Bean生命周期代码</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_17"></a>1.常见的作用域问题</h2> 
<h3><a id="11__18"></a>1.1 问题所在</h3> 
<p> 有一个公共类，类对象被@Controller注解修饰，里面的方法被方法注解@Bean修饰。现在有两个用户都使用这个公共类，但是其中一个用户突然改变了里面的值，这个就导致了另一个用户使用的时候变量值已经发生了变化，因此第二个用户得到的应该是修改以后的。</p> 
<h3><a id="12__22"></a>1.2 代码示例</h3> 
<p>公共类</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentBeans</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">student1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 伪代码，构建对象</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>一个类</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"user1"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token comment">//@Qualifier(value = "user2")</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user:"</span><span class="token operator">+</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user2<span class="token operator">=</span>user<span class="token punctuation">;</span>
        user2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user:"</span><span class="token operator">+</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>另一个类</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User1Controller</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user:"</span><span class="token operator">+</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/3c/P8pIgekU_o.png" alt="在这里插入图片描述"><br> 咋们看一下结果，会发现我们另一个类的消息也发生了变化，但是我们并没有改变第二各类的信息。<br> 我们可以发现，我们只有在第一个类中，创建了一个局部的变量，将这个局部变量进行改变，但是为什么我们的公用的会发生变化呢？</p> 
<p> 这里面就包含了我们本篇文章要讲述的作用域问题。</p> 
<blockquote> 
 <p>操作以上问题的原因是因为 Bean 默认情况下是单例状态（singleton），也就是所有⼈的使⽤的都是同<br> ⼀个对象，这个就导致了，我们一个类改变了，那么就是公共类改变了。</p> 
</blockquote> 
<p>这个时候就会由人问了？我在第一个类里面不是创建一个局部的User类型的变量吗？我改变的也是局部的，为啥会改变公共的呢？其实这个问题很简单，就是因为创建的 局部的User类型变量也是指向这个公共类的，所以哪怕直接改变的是非公共类，公共类也会改变的。这个大家不需要纠结。</p> 
<blockquote> 
 <p>之前我们学单例模式的时候都知道，使⽤单例可以很⼤程度上提⾼性能，所以在 Spring 中 Bean 的作⽤域默认也是 singleton单例模式。</p> 
</blockquote> 
<p>下面我们正式进入我们今天要讲的内容。</p> 
<h2><a id="2__97"></a>2. 作用域</h2> 
<h3><a id="21__98"></a>2.1 作用域定义</h3> 
<blockquote> 
 <p>作用域：就是一个限制变量在程序的使用范围<br> 或者说在源代码中定义变量的某个区域就叫做作⽤域</p> 
</blockquote> 
<p>那Bean的作用域是什么呢？</p> 
<blockquote> 
 <p>Bean的作用域就是Bean在Spring整个框架中的某种行为模式。⽐如 singleton 单例作⽤域，就<br> 表示 Bean 在整个 Spring 中只有⼀份，它是全局共享的，那么当其他⼈修改了这个值之后，那么另⼀<br> 个⼈读取到的就是被修改的值。</p> 
</blockquote> 
<h3><a id="22Bean__6__111"></a>2.2Bean 的 6 种作⽤域</h3> 
<p>Spring 容器在初始化⼀个 Bean 的实例时，同时会指定该实例的作⽤域。</p> 
<p>Spring有 6 种作⽤域，最后四种是基于 Spring MVC ⽣效的，也就是说在普通的Spring项目中是见不到的，在普通的 Spring 项⽬中只有前两种。</p> 
<ol><li>singleton：单例作⽤域（默认作用域）</li><li>prototype：原型作⽤域（多例作⽤域）</li><li>request：请求作⽤域</li><li>session：回话作⽤域</li><li>application：全局作⽤域</li><li>websocket：HTTP WebSocket 作⽤域</li></ol> 
<h4><a id="221_singleton___124"></a>2.2.1 singleton 单例作⽤域</h4> 
<blockquote> 
 <p>描述：该作⽤域下的Bean在IoC容器中只存在⼀个实例：获取Bean（applicationContext.getBean获取）及装配Bean（@Autowired注⼊）都是同⼀个对象。</p> 
</blockquote> 
<blockquote> 
 <p>场景：通常⽆状态的Bean使⽤该作⽤域。⽆状态表示Bean对象的属性状态不需要更新</p> 
</blockquote> 
<p>备注：<mark><strong>Spring默认选择该作⽤域</strong></mark></p> 
<h4><a id="222_prototype___134"></a>2.2.2 prototype 原型作⽤域</h4> 
<blockquote> 
 <p>描述：每次对该作⽤域下的Bean的请求都会创建新的实例：获取Bean（ applicationContext.getBean获取）及装配Bean（@Autowired注⼊）都是新的对象 实例。</p> 
</blockquote> 
<blockquote> 
 <p>场景：通常有状态的Bean使⽤该作⽤域</p> 
</blockquote> 
<h4><a id="223request___140"></a>2.2.3request 请求作⽤域</h4> 
<blockquote> 
 <p>描述：每次前端发送http请求会创建新的Bean实例，类似于prototype</p> 
</blockquote> 
<blockquote> 
 <p>场景：⼀次http的请求和响应的共享Bean，等到第二次请求的时候，就会重新新建一个作用域</p> 
</blockquote> 
<p>备注：限定SpringMVC中使⽤</p> 
<h4><a id="224_session____150"></a>2.2.4 session 会话作⽤域</h4> 
<blockquote> 
 <p><strong>描述：在⼀个http session中，定义⼀个Bean实例</strong></p> 
</blockquote> 
<blockquote> 
 <p>场景：⽤户回话的共享Bean, ⽐如：记录⼀个⽤户的登陆信息</p> 
</blockquote> 
<p>备注：限定SpringMVC中使⽤，session会话作用域的范围要比请求作用域更大</p> 
<h4><a id="225__application___164"></a>2.2.5 application 全局作⽤域（了解）</h4> 
<p>描述：在⼀个http servlet Context中，定义⼀个Bean实例</p> 
<p>场景：Web应⽤的上下⽂信息，⽐如：记录⼀个应⽤的共享信息</p> 
<p>备注：限定SpringMVC中使⽤</p> 
<h4><a id="226__websocket___HTTP_WebSocket__172"></a>2.2.6 websocket ：HTTP WebSocket 作⽤域</h4> 
<p>描述：在⼀个HTTP WebSocket的⽣命周期中，定义⼀个Bean实例</p> 
<p>场景：WebSocket的每次会话中，保存了⼀个Map结构的头信息，将⽤来包裹客户端消息头。第⼀次初始化后，直到WebSocket结束都是同⼀个Bean。</p> 
<p>备注：限定Spring WebSocket中使⽤</p> 
<h3><a id="23_singleton__application__181"></a>2.3 singleton 和 application 的区别</h3> 
<blockquote> 
 <p>singleton 是 Spring Core 的作⽤域；application 是 Spring Web 中的作⽤域；</p> 
 <p>singleton 作⽤于 IoC 的容器，⽽ application 作⽤于 Servlet 容器。</p> 
</blockquote> 
<h3><a id="24__188"></a>2.4 设置作用域</h3> 
<p>我们的程序默认是单例作用域，这个就会导致，我们用的始终是一个Bean对象。会出现不是我们想要的结果，所以我们就要设置作用域。</p> 
<blockquote> 
 <p>使⽤ @Scope 标签就可以⽤来声明 Bean 的作⽤域</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserBean</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span class="token punctuation">)</span><span class="token comment">//设置作用域</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>  user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>   
</code></pre> 
<p>我们设置作用域有两种方式</p> 
<p>一种是只直接设置作用域</p> 
<blockquote> 
 <p>@Scope(“prototype”)//设置作用域</p> 
</blockquote> 
<p>另一种是使⽤成员变量设置</p> 
<blockquote> 
 <p>@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)//设置作用域</p> 
</blockquote> 
<p>两种都是可以设置作用域的</p> 
<h2><a id="3_Spring_224"></a>3. Spring执行流程</h2> 
<p>Spring流程分为四步：<br> 第一步：启动容器（加载配置文件）<br> <img src="https://images2.imgbox.com/75/bc/q6s6AaJ4_o.png" alt="在这里插入图片描述"><br> 第二步：完成Bean初始化</p> 
<p>这一步有两种方式：<br> 1.使用xml直接注册bean<br> 2.配置bean根（扫描）路径<br> <img src="https://images2.imgbox.com/8d/e8/IUYYsd03_o.png" alt="在这里插入图片描述"><br> 第三步：注册bean对象到容器中（.将 bean存储到spring 中，通过类注解进行扫描和装配）<br> <img src="https://images2.imgbox.com/61/7b/ninIyRhM_o.png" alt="在这里插入图片描述"><br> 第四步：装配Bean属性 （将bean从spring读取出来，装配到相应的类）<br> <img src="https://images2.imgbox.com/74/cc/XASEoWyr_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>Bean 执⾏流程（Spring 执⾏流程）：启动 Spring 容器 -&gt; 实例化 Bean（分配内存空间，从⽆到<br> 有） -&gt; Bean 注册到 Spring 中（存操作） -&gt; 将 Bean 装配到需要的类中（取操作)。</p> 
</blockquote> 
<h2><a id="4Bean__242"></a>4.Bean ⽣命周期</h2> 
<h3><a id="41Bean__243"></a>4.1Bean ⽣命周期</h3> 
<blockquote> 
 <p>所谓的⽣命周期指的是⼀个对象从诞⽣到销毁的整个⽣命过程，我们把这个过程就叫做⼀个对象的⽣命周期。</p> 
</blockquote> 
<blockquote> 
 <p>Bean 的⽣命周期分为以下 5 ⼤部分：<br> 1.实例化 Bean（为 Bean 分配内存空间，对应JVM中的加载）<br> 2.设置属性（Bean 注⼊和装配）<br> 3.Bean 初始化<br>   实现了各种 通知的⽅法，<br>   执⾏ 初始化前置⽅法；<br>   执⾏ 初始化⽅法，依赖注⼊操作之后被执⾏；执⾏⾃⼰指定的 init-method方法<br>   执⾏初始化后置⽅法。<br> 4.使⽤ Bean<br> 5.销毁 Bean</p> 
</blockquote> 
<p>整个生命周期就好像我买了一个房子：<br> 1.实例化就像是：买了一个毛坯房，<br> 2.设置属性就等同于：购买装修材料（引入外部资源），<br> 3.初始化就等同于：给房子装修，<br>  3.1里面的各种通知方法：相当于通知装修的工人<br>  3.2初始化前置工作：就相当于制定装修方法<br>  3.3进行初始化：就相当于工人师傅开始装修了<br>  3.4初始化的后置工作：相当于装修后的清理工作<br> 4.使用Bean：就相当于入住房子<br> 5.销毁房子：等同于卖掉房子</p> 
<blockquote> 
 <p>销毁容器的各种⽅法，如 @PreDestroy、DisposableBean 接⼝⽅法、destroy-method</p> 
</blockquote> 
<h3><a id="42__274"></a>4.2 实例化和初始化的区别</h3> 
<p>实例化和属性设置是 Java 级别的系统“事件”，其操作过程不可⼈⼯⼲预和修改；⽽初始化是给开发者提供的，可以在实例化之后，类加载完成之前进⾏⾃定义“事件”处理。</p> 
<h3><a id="43_Bean_277"></a>4.3 Bean生命周期代码</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token class-name">Spring</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token class-name">Spring</span><span class="token punctuation">.</span>demo<span class="token punctuation">.</span>component<span class="token punctuation">.</span>BeanLifeComponent<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ClassPathXmlApplicationContext</span> context <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"spring-config.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanLifeComponent</span> life <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"beanLifeComponent"</span><span class="token punctuation">,</span><span class="token class-name">BeanLifeComponent</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" 使用Bean⽅法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 执⾏销毁⽅法</span>
        context<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token class-name">Spring</span><span class="token punctuation">.</span>demo<span class="token punctuation">.</span>component<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">BeanNameAware</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostConstruct</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PreDestroy</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanLifeComponent</span>  <span class="token keyword">implements</span> <span class="token class-name">BeanNameAware</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@PostConstruct</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postConstruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"执⾏ PostConstruct()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"执⾏ BeanLifeComponent init-method"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanName</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"执⾏了通知 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@PreDestroy</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">preDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"执⾏：preDestroy()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>最重要的是配置spring-config.xml文件<br> <img src="https://images2.imgbox.com/9d/33/aqkKSlzT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bf/84/dSgyCzqE_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dce3258f5d3fccbf4e6c7d3994df4b5f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信公众号开发-token验证</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cae8b3f5825cd5a90bb5b9a2c4a390da/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue element-ui infinite-scroll无限滚动实现懒加载</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>