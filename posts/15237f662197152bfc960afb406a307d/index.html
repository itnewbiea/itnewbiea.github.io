<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>（STM32笔记5）ws2812驱动开发 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="（STM32笔记5）ws2812驱动开发" />
<meta property="og:description" content="ws2812
需要开发的外设：ws2812
开发环境：MDK
开发板：stm32最小系统板
杜邦线无数
一、原理阐述 （一）这个ws2812有很多种，一个小灯、灯带，矩形像素屏等等。
这些都是DIN连接输入,DOUT连接输出，另外两个引脚是GNE和VCC
（二）数据传输原理：
第1个WS2812B灯珠接收到了第1个24bit的数据，做出响应（发光）；
第N个WS2812B灯珠接收到了第N个24bit的数据，
再收到第二个24bit的数据后，直接转发给第二个WS2812B灯珠，由第二个WS2812B灯珠做出响应；依次类推。
每次给一个灯一个24位的数据，顺序是GRB-green red bule
（三）数据编码
编码时序是低高电平占位大小来区分的，分别是高比低比例位 1/2--&gt;0 code
2/1--&gt;1 code
（四）定时器配置
根据WS2812的最大传输速率800kbps，设置定时器不分频和计数周期为89&#43;1，这样下来波形的频率为 72M /（89&#43;1） = 800K ，并且一个波形的周期为 1 / 800 = 1.25us
我用的最大是72M，不同板子不同配置，自行选择。
二、代码展示 main.h
#include &#34;sys.h&#34; #include &#34;delay.h&#34; #include &#34;usart.h&#34; #include &#34;led.h&#34; #include &#34;ws2812b.h&#34; uint8_t rgb0[][3] = {0,0,0}; uint8_t rgb1[212][3] = {{0,0,0},{10,0,0},{20,0,0},{30,0,0},{40,0,0},{50,0,0},{60,0,0},{70,0,0},{80,0,0},{90,0,0}, {100,0,0},{110,0,0},{120,0,0},{130,0,0},{140,0,0},{150,0,0},{160,0,0},{170,0,0},{180,0,0},{190,0,0}, {200,0,0},{210,0,0},{220,0,0},{230,0,0},{240,0,0},{250,0,0},{10,10,0},{20,20,0},{30,30,0}, {40,40,0},{50,50,0},{60,60,0},{70,70,0},{80,80,0},{90,90,0},{100,100,0},{110,110,0},{120,120,0},{130,130,0},{140,140,0}, {150,150,0},{160,160,0},{170,170,0},{180,180,0},{190,190,0},{200,200,0},{210,210,0},{220,220,0},{230,230,0},{240,240,0}, {250,250,0},{10,0,10},{20,0,20},{30,0,30},{40,0,40},{50,0,50},{60,0,60},{70,0,70},{80,0,80},{90,0,90},{100,0,100},{110,0,110},{120,0,120}, {130,0,130},{140,0,140},{150,0,150},{160,0,160},{170,0,170},{180,0,180},{190,0,190},{200,0,200},{210,0,210},{220,0,220}, {230,0,230},{240,0,240},{250,0,250},{0,10,10},{0,20,20},{0,30,30},{0,40,40},{0,50,50},{0,60,60},{0,70,70}, {0,80,80},{0,90,90},{0,100,100},{0,110,110},{0,120,120},{0,130,130},{0,140,140},{0,150,150},{0,160,160},{0,170,170}, {0,180,180},{0,190,190},{0,200,200},{0,210,210},{0,220,220},{0,230,230},{0,240,240},{0,250,250},{10,10,10},{30,30,30}, {90,90,90},{140,140,140},{200,200,200},{0,0,0},{10,0,0},{20,0,0},{30,0,0},{40,0,0},{50,0,0},{60,0,0},{70,0,0},{80,0,0},{90,0,0}, {100,0,0},{110,0,0},{120,0,0},{130,0,0},{140,0,0},{150,0,0},{160,0,0},{170,0,0},{180,0,0},{190,0,0}, {200,0,0},{210,0,0},{220,0,0},{230,0,0},{240,0,0},{250,0,0},{10,10,0},{20,20,0},{30,30,0}, {40,40,0},{50,50,0},{60,60,0},{70,70,0},{80,80,0},{90,90,0},{100,100,0},{110,110,0},{120,120,0},{130,130,0},{140,140,0}, {150,150,0},{160,160,0},{170,170,0},{180,180,0},{190,190,0},{200,200,0},{210,210,0},{220,220,0},{230,230,0},{240,240,0}, {250,250,0},{10,0,10},{20,0,20},{30,0,30},{40,0,40},{50,0,50},{60,0,60},{70,0,70},{80,0,80},{90,0,90},{100,0,100},{110,0,110},{120,0,120}, {130,0,130},{140,0,140},{150,0,150},{160,0,160},{170,0,170},{180,0,180},{190,0,190},{200,0,200},{210,0,210},{220,0,220}, {230,0,230},{240,0,240},{250,0,250},{0,10,10},{0,20,20},{0,30,30},{0,40,40},{0,50,50},{0,60,60},{0,70,70}, {0,80,80},{0,90,90},{0,100,100},{0,110,110},{0,120,120},{0,130,130},{0,140,140},{0,150,150},{0,160,160},{0,170,170}, {0,180,180},{0,190,190},{0,200,200},{0,210,210},{0,220,220},{0,230,230},{0,240,240},{0,250,250},{10,10,10},{30,30,30}, {90,90,90},{140,140,140},{200,200,200}}; uint8_t rgb2[109][3] = {{0,0,0},{0,5,0},{0,10,0},{0,15,0},{0,20,0},{0,25,0},{0,30,0},{0,35,0},{0,40,0},{0,45,0},{0,50,0},{0,55,0},{0,60,0},{0,65,0},{0,70,0},{0,75,0},{0,80,0},{0,85,0},{0,90,0}, {0,95,0},{0,100,0},{0,105,0},{0,110,0},{0,115,0},{0,120,0},{0,125,0},{0,130,0},{0,135,0},{0,140,0},{0,145,0},{0,150,0},{0,155,0},{0,160,0},{0,165,0},{0,170,0},{0,175,0},{0,180,0},{0,185,0},{0,190,0}, {0,195,0},{0,200,0},{0,205,0},{0,210,0},{0,215,0},{0,220,0},{0,225,0},{0,230,0},{0,235,0},{0,240,0},{0,245,0},{0,250,0},{0,255,0},{0,250,0},{0,245,0},{0,240,0},{0,235,0},{0,230,0}, {0,225,0},{0,220,0},{0,215,0},{0,210,0},{0,205,0},{0,200,0},{0,195,0},{0,190,0},{0,185,0},{0,180,0},{0,175,0},{0,170,0},{0,165,0},{0,160,0},{0,155,0},{0,150,0},{0,145,0},{0,140,0},{0,135,0},{0,130,0}, {0,125,0},{0,120,0},{0,115,0},{0,110,0},{0,105,0},{0,100,0},{0,95,0},{0,90,0},{0,85,0},{0,80,0},{0,75,0},{0,70,0},{0,65,0},{0,60,0},{0,55,0},{0,50,0},{0,45,0},{0,40,0},{0,35,0},{0,30,0}, {0,25,0},{0,20,0},{0,15,0},{0,10,0},{0,5,0},{0,0,0}}; uint8_t rgb3[53][3] = {{0,0,0},{0,0,10},{0,0,20},{0,0,30},{0,0,40},{0,0,50},{0,0,60},{0,0,70},{0,0,80},{0,0,90}, {0,0,100},{0,0,110},{0,0,120},{0,0,130},{0,0,140},{0,0,150},{0,0,160},{0,0,170},{0,0,180},{0,0,190}, {0,0,200},{0,0,210},{0,0,220},{0,0,230},{0,0,240},{0,0,250},{0,0,255},{0,0,250},{0,0,240},{0,0,230}, {0,0,220},{0,0,210},{0,0,200},{0,0,190},{0,0,180},{0,0,170},{0,0,160},{0,0,150},{0,0,140},{0,0,130}, {0,0,120},{0,0,110},{0,0,100},{0,0,90},{0,0,80},{0,0,70},{0,0,60},{0,0,50},{0,0,40},{0,0,30}, {0,0,20},{0,0,10},{0,0,0}}; uint8_t rgb5[200][3] = {{0,0,0},{100,0,0}, {100,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,100,0},{0,100,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,100},{0,0,100},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{10,100,0},{10,100,0}, {0,0,0},{0,0,0},{0,0,0},{0,0,0},{10,0,100},{10,0,100},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,10,100},{0,10,100},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{100,0,10},{100,0,10},{0,0,0},{0,0,0},{0,0,0},{0,0,0}, {0,0,100},{0,0,100},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,100,0},{0,100,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{100,0,0},{100,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{100,0,100},{0,100,100}, {0,0,0},{0,0,0},{0,0,0},{0,0,0},{100,0,100},{100,100,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{90,0,100},{0,100,0}}; uint8_t rgb4[53][3] = {{0,0,0},{10,0,0},{20,0,0},{30,0,0},{40,0,0},{50,0,0},{60,0,0},{70,0,0},{80,0,0},{90,0,0}, {100,0,0},{110,0,0},{120,0,0},{130,0,0},{140,0,0},{150,0,0},{160,0,0},{170,0,0},{180,0,0},{190,0,0}, {200,0,0},{210,0,0},{220,0,0},{230,0,0},{240,0,0},{250,0,0},{255,0,0},{250,0,0},{240,0,0},{230,0,0}, {220,0,0},{210,0,0},{200,0,0},{190,0,0},{180,0,0},{170,0,0},{160,0,0},{150,0,0},{140,0,0},{130,0,0}, {120,0,0},{110,0,0},{100,0,0},{90,0,0},{80,0,0},{70,0,0},{60,0,0},{50,0,0},{40,0,0},{30,0,0},{20,0,0},{10,0,0},{0,0,0}}; //每个三位数，每一个位位一个不同颜色，数字大小表明亮度大小，最大256，通过将这个三个灯亮不同种类、大小程度进行调制不同量的颜色 u16 i,j; int main(void) {	delay_init();	LED_Init();	Timer2_init(); while(1) { for(i=0;i&lt;110;i&#43;&#43;) { WS2812_send(&amp;rgb2[i],50,0); delay_ms(50); } for(i=0;i&lt;77;i&#43;&#43;) { WS2812_send(&amp;rgb5[i],50,0); delay_ms(50); }	for(i=0;i&lt;212;i&#43;&#43;) { WS2812_send(&amp;rgb1[i],50,1); delay_ms(50); } } } 每个三位数，每一个位位一个不同颜色，数字大小表明亮度大小，最大256，通过将这个三个灯亮不同种类、大小程度进行调制不同量的颜色" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/15237f662197152bfc960afb406a307d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-12T19:32:24+08:00" />
<meta property="article:modified_time" content="2022-08-12T19:32:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">（STM32笔记5）ws2812驱动开发</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="csdn-video-box"> 
 <iframe id="2Iht59Lb-1660303859851" frameborder="0" src="https://live.csdn.net/v/embed/231429" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p>ws2812</p> 
</div> 
<p>需要开发的外设：ws2812</p> 
<p>开发环境：MDK</p> 
<p>开发板：stm32最小系统板</p> 
<p>杜邦线无数</p> 
<p></p> 
<h4><span style="color:#fe2c24;"><strong>一、原理阐述</strong></span></h4> 
<p><span style="color:#0d0016;"><strong>（一）</strong>这个ws2812有很多种，一个小灯、灯带，矩形像素屏等等。</span></p> 
<p style="text-align:center;"><span style="color:#0d0016;"><img alt="" height="198" src="https://images2.imgbox.com/ee/0d/2A8bIuNE_o.jpg" width="198"></span><img alt="" height="213" src="https://images2.imgbox.com/f5/44/SbyE4z0y_o.jpg" width="213"><img alt="" height="199" src="https://images2.imgbox.com/ef/30/9dPZsY0q_o.jpg" width="199"></p> 
<p>这些都是DIN连接输入,DOUT连接输出，另外两个引脚是GNE和VCC</p> 
<p style="text-align:center;"><img alt="" height="447" src="https://images2.imgbox.com/f7/18/Wa8e2sfN_o.png" width="586"></p> 
<p> </p> 
<p><strong>（二）</strong>数据传输原理：</p> 
<p>第1个WS2812B灯珠接收到了第1个24bit的数据，做出响应（发光）；</p> 
<p>第N个WS2812B灯珠接收到了第N个24bit的数据，<br> 再收到第二个24bit的数据后，直接转发给第二个WS2812B灯珠，由第二个WS2812B灯珠做出响应；依次类推。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/35/09/iupfLBWS_o.png"></p> 
<p>每次给一个灯一个24位的数据，顺序是GRB-green red bule</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/53/1a/GPwUwUDS_o.png"></p> 
<p><strong>（三）</strong>数据编码</p> 
<p>编码时序是低高电平占位大小来区分的，分别是高比低比例位    1/2--&gt;0 code</p> 
<p>                                                                                                      2/1--&gt;1 code</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/76/b1/Dua5F4Hv_o.png"></p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/d4/18/2NCm1VTz_o.png"></p> 
<p><strong> （四）定时器配置</strong></p> 
<p>根据WS2812的最大传输速率800kbps，设置定时器不分频和计数周期为89+1，这样下来波形的频率为  72M /（89+1） = 800K  ，并且一个波形的周期为  1 / 800 = 1.25us</p> 
<p>我用的最大是72M，不同板子不同配置，自行选择。</p> 
<h4><span style="color:#fe2c24;"><strong>二、代码展示</strong></span></h4> 
<p> main.h</p> 
<pre><code>#include "sys.h"
#include "delay.h"
#include "usart.h"
#include "led.h"
#include "ws2812b.h"
uint8_t rgb0[][3] = {0,0,0};
uint8_t rgb1[212][3] = {<!-- -->{0,0,0},{10,0,0},{20,0,0},{30,0,0},{40,0,0},{50,0,0},{60,0,0},{70,0,0},{80,0,0},{90,0,0},
											 {100,0,0},{110,0,0},{120,0,0},{130,0,0},{140,0,0},{150,0,0},{160,0,0},{170,0,0},{180,0,0},{190,0,0},
										   {200,0,0},{210,0,0},{220,0,0},{230,0,0},{240,0,0},{250,0,0},{10,10,0},{20,20,0},{30,30,0},
											 {40,40,0},{50,50,0},{60,60,0},{70,70,0},{80,80,0},{90,90,0},{100,100,0},{110,110,0},{120,120,0},{130,130,0},{140,140,0},
											 {150,150,0},{160,160,0},{170,170,0},{180,180,0},{190,190,0},{200,200,0},{210,210,0},{220,220,0},{230,230,0},{240,240,0},
											 {250,250,0},{10,0,10},{20,0,20},{30,0,30},{40,0,40},{50,0,50},{60,0,60},{70,0,70},{80,0,80},{90,0,90},{100,0,100},{110,0,110},{120,0,120},
											 {130,0,130},{140,0,140},{150,0,150},{160,0,160},{170,0,170},{180,0,180},{190,0,190},{200,0,200},{210,0,210},{220,0,220},
											 {230,0,230},{240,0,240},{250,0,250},{0,10,10},{0,20,20},{0,30,30},{0,40,40},{0,50,50},{0,60,60},{0,70,70},
											 {0,80,80},{0,90,90},{0,100,100},{0,110,110},{0,120,120},{0,130,130},{0,140,140},{0,150,150},{0,160,160},{0,170,170},
											 {0,180,180},{0,190,190},{0,200,200},{0,210,210},{0,220,220},{0,230,230},{0,240,240},{0,250,250},{10,10,10},{30,30,30},
											 {90,90,90},{140,140,140},{200,200,200},{0,0,0},{10,0,0},{20,0,0},{30,0,0},{40,0,0},{50,0,0},{60,0,0},{70,0,0},{80,0,0},{90,0,0},
											 {100,0,0},{110,0,0},{120,0,0},{130,0,0},{140,0,0},{150,0,0},{160,0,0},{170,0,0},{180,0,0},{190,0,0},
										   {200,0,0},{210,0,0},{220,0,0},{230,0,0},{240,0,0},{250,0,0},{10,10,0},{20,20,0},{30,30,0},
											 {40,40,0},{50,50,0},{60,60,0},{70,70,0},{80,80,0},{90,90,0},{100,100,0},{110,110,0},{120,120,0},{130,130,0},{140,140,0},
											 {150,150,0},{160,160,0},{170,170,0},{180,180,0},{190,190,0},{200,200,0},{210,210,0},{220,220,0},{230,230,0},{240,240,0},
											 {250,250,0},{10,0,10},{20,0,20},{30,0,30},{40,0,40},{50,0,50},{60,0,60},{70,0,70},{80,0,80},{90,0,90},{100,0,100},{110,0,110},{120,0,120},
											 {130,0,130},{140,0,140},{150,0,150},{160,0,160},{170,0,170},{180,0,180},{190,0,190},{200,0,200},{210,0,210},{220,0,220},
											 {230,0,230},{240,0,240},{250,0,250},{0,10,10},{0,20,20},{0,30,30},{0,40,40},{0,50,50},{0,60,60},{0,70,70},
											 {0,80,80},{0,90,90},{0,100,100},{0,110,110},{0,120,120},{0,130,130},{0,140,140},{0,150,150},{0,160,160},{0,170,170},
											 {0,180,180},{0,190,190},{0,200,200},{0,210,210},{0,220,220},{0,230,230},{0,240,240},{0,250,250},{10,10,10},{30,30,30},
											 {90,90,90},{140,140,140},{200,200,200}};
uint8_t rgb2[109][3] = {<!-- -->{0,0,0},{0,5,0},{0,10,0},{0,15,0},{0,20,0},{0,25,0},{0,30,0},{0,35,0},{0,40,0},{0,45,0},{0,50,0},{0,55,0},{0,60,0},{0,65,0},{0,70,0},{0,75,0},{0,80,0},{0,85,0},{0,90,0},
											 {0,95,0},{0,100,0},{0,105,0},{0,110,0},{0,115,0},{0,120,0},{0,125,0},{0,130,0},{0,135,0},{0,140,0},{0,145,0},{0,150,0},{0,155,0},{0,160,0},{0,165,0},{0,170,0},{0,175,0},{0,180,0},{0,185,0},{0,190,0},
											 {0,195,0},{0,200,0},{0,205,0},{0,210,0},{0,215,0},{0,220,0},{0,225,0},{0,230,0},{0,235,0},{0,240,0},{0,245,0},{0,250,0},{0,255,0},{0,250,0},{0,245,0},{0,240,0},{0,235,0},{0,230,0},
											 {0,225,0},{0,220,0},{0,215,0},{0,210,0},{0,205,0},{0,200,0},{0,195,0},{0,190,0},{0,185,0},{0,180,0},{0,175,0},{0,170,0},{0,165,0},{0,160,0},{0,155,0},{0,150,0},{0,145,0},{0,140,0},{0,135,0},{0,130,0},
											 {0,125,0},{0,120,0},{0,115,0},{0,110,0},{0,105,0},{0,100,0},{0,95,0},{0,90,0},{0,85,0},{0,80,0},{0,75,0},{0,70,0},{0,65,0},{0,60,0},{0,55,0},{0,50,0},{0,45,0},{0,40,0},{0,35,0},{0,30,0},
											 {0,25,0},{0,20,0},{0,15,0},{0,10,0},{0,5,0},{0,0,0}};
uint8_t rgb3[53][3] = {<!-- -->{0,0,0},{0,0,10},{0,0,20},{0,0,30},{0,0,40},{0,0,50},{0,0,60},{0,0,70},{0,0,80},{0,0,90},
											 {0,0,100},{0,0,110},{0,0,120},{0,0,130},{0,0,140},{0,0,150},{0,0,160},{0,0,170},{0,0,180},{0,0,190},
											 {0,0,200},{0,0,210},{0,0,220},{0,0,230},{0,0,240},{0,0,250},{0,0,255},{0,0,250},{0,0,240},{0,0,230},
											 {0,0,220},{0,0,210},{0,0,200},{0,0,190},{0,0,180},{0,0,170},{0,0,160},{0,0,150},{0,0,140},{0,0,130},
											 {0,0,120},{0,0,110},{0,0,100},{0,0,90},{0,0,80},{0,0,70},{0,0,60},{0,0,50},{0,0,40},{0,0,30},
											 {0,0,20},{0,0,10},{0,0,0}};
uint8_t rgb5[200][3] = {<!-- -->{0,0,0},{100,0,0},
											 {100,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,100,0},{0,100,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,100},{0,0,100},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{10,100,0},{10,100,0},
											 {0,0,0},{0,0,0},{0,0,0},{0,0,0},{10,0,100},{10,0,100},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,10,100},{0,10,100},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{100,0,10},{100,0,10},{0,0,0},{0,0,0},{0,0,0},{0,0,0},
											 {0,0,100},{0,0,100},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,100,0},{0,100,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{100,0,0},{100,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{100,0,100},{0,100,100},
											 {0,0,0},{0,0,0},{0,0,0},{0,0,0},{100,0,100},{100,100,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{90,0,100},{0,100,0}};


											 
uint8_t rgb4[53][3] = {<!-- -->{0,0,0},{10,0,0},{20,0,0},{30,0,0},{40,0,0},{50,0,0},{60,0,0},{70,0,0},{80,0,0},{90,0,0},
											 {100,0,0},{110,0,0},{120,0,0},{130,0,0},{140,0,0},{150,0,0},{160,0,0},{170,0,0},{180,0,0},{190,0,0},
											 {200,0,0},{210,0,0},{220,0,0},{230,0,0},{240,0,0},{250,0,0},{255,0,0},{250,0,0},{240,0,0},{230,0,0},
											 {220,0,0},{210,0,0},{200,0,0},{190,0,0},{180,0,0},{170,0,0},{160,0,0},{150,0,0},{140,0,0},{130,0,0},
											 {120,0,0},{110,0,0},{100,0,0},{90,0,0},{80,0,0},{70,0,0},{60,0,0},{50,0,0},{40,0,0},{30,0,0},{20,0,0},{10,0,0},{0,0,0}};

//每个三位数，每一个位位一个不同颜色，数字大小表明亮度大小，最大256，通过将这个三个灯亮不同种类、大小程度进行调制不同量的颜色
u16 i,j;

 int main(void)
 {	

	delay_init();	      
	LED_Init();		  	
  Timer2_init();
	 
	while(1)
	{
		
		

		for(i=0;i&lt;110;i++)
		{
			WS2812_send(&amp;rgb2[i],50,0);
			delay_ms(50);
		}
		for(i=0;i&lt;77;i++)
		{
		  WS2812_send(&amp;rgb5[i],50,0);
			delay_ms(50);
		}	
		for(i=0;i&lt;212;i++)
		{
			WS2812_send(&amp;rgb1[i],50,1);
			delay_ms(50);
		} 
	}
 }



</code></pre> 
<p> 每个三位数，每一个位位一个不同颜色，数字大小表明亮度大小，最大256，通过将这个三个灯亮不同种类、大小程度进行调制不同量的颜色</p> 
<p> </p> 
<p>ws2812.c</p> 
<pre><code>#include "WS2812B.h"

#define TIM2_CCR1_Address 0x40000034
	
#define TIMING_ONE  50
#define TIMING_ZERO 25
 uint16_t LED_BYTE_Buffer[300];
void WS2812_send(uint8_t (*color)[3], uint16_t len,u8 flag)
{
	static unsigned char iie = 0;
	uint8_t i;
	uint16_t memaddr;
	uint16_t buffersize;
	buffersize = (len*24);
	memaddr = 0;				

	while (len)
	{	
		for(i=0; i&lt;8; i++) // G
		{
			LED_BYTE_Buffer[memaddr] = ((color[iie][1]&lt;&lt;i) &amp; 0x0080) ? TIMING_ONE:TIMING_ZERO;
			memaddr++;
		}
		for(i=0; i&lt;8; i++) // r
		{
				LED_BYTE_Buffer[memaddr] = ((color[iie][0]&lt;&lt;i) &amp; 0x0080) ? TIMING_ONE:TIMING_ZERO;
				memaddr++;
		}
		for(i=0; i&lt;8; i++) // B
		{
				LED_BYTE_Buffer[memaddr] = ((color[iie][2]&lt;&lt;i) &amp; 0x0080) ? TIMING_ONE:TIMING_ZERO;
				memaddr++;
		}
		if(flag==1)
		{
		if(iie&gt;=12)
			iie = 0;
			iie++;
			
		}
		len--;
	}</code></pre> 
<p> </p> 
<p> ws2812.h</p> 
<pre><code>#ifndef __WS2812B_H
#define	__WS2812B_H

#include "stm32f10x.h"
#include "delay.h"	

void Timer2_init(void);
void WS2812_send(uint8_t (*color)[3], uint16_t len,u8 flag);

#endif 
</code></pre> 
<p><span style="color:#fe2c24;"><strong>BUG：</strong></span></p> 
<p><span style="color:#0d0016;">如果使用象素萍的话我们只能成功使用50个，然后使用单一装置和小灯带可以成功，这个目前没有解决。</span></p> 
<h4><span style="color:#956fe7;"><strong>完整工程代码：</strong></span></h4> 
<p><a class="has-card" href="https://download.csdn.net/download/weixin_52451652/86399407?spm=1001.2014.3001.5503" title="(35条消息) 外设ws2812使用32驱动-单片机文档类资源-CSDN文库"><span class="link-card-box"><span class="link-title">(35条消息) 外设ws2812使用32驱动-单片机文档类资源-CSDN文库</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/20/e0/QVkz3T59_o.png" alt="icon-default.png?t=M666">https://download.csdn.net/download/weixin_52451652/86399407?spm=1001.2014.3001.5503</span></span></a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7f4829cf3ffed7c9ed9c59245a2c4286/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">jssip&#43;webrtc&#43;freeswitch实现电话网页及遇到的488状态码问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/581edcf2170ba60c7e23772ce5976a5e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">信息技术-简答汇总</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>