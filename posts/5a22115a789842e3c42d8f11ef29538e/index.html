<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>js 表格数据处理横向变纵向数据 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="js 表格数据处理横向变纵向数据" />
<meta property="og:description" content="// 这是后台数据 var dataSource = [{ &#34;saturday&#34;: 2764, &#34;project&#34;: &#34;过店人次&#34;, &#34;thursday&#34;: 3389, &#34;sum&#34;: 18958, &#34;sunday&#34;: 2364, &#34;tuesday&#34;: 2945, &#34;wednesday&#34;: 3452, &#34;friday&#34;: 1398, &#34;monday&#34;: 2646 }, { &#34;saturday&#34;: 17, &#34;project&#34;: &#34;环比上周&#34;, &#34;thursday&#34;: 73, &#34;sum&#34;: 205, &#34;sunday&#34;: 9, &#34;tuesday&#34;: 48, &#34;wednesday&#34;: 54, &#34;friday&#34;: -39, &#34;monday&#34;: 43 }, { &#34;saturday&#34;: -36, &#34;project&#34;: &#34;对比今年均值&#34;, &#34;thursday&#34;: -21, &#34;sum&#34;: -261, &#34;sunday&#34;: -45, &#34;tuesday&#34;: -32, &#34;wednesday&#34;: -20, &#34;friday&#34;: -68, &#34;monday&#34;: -39 }, { &#34;saturday&#34;: &#34;296 (17 - 18点)&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/5a22115a789842e3c42d8f11ef29538e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-01T16:55:07+08:00" />
<meta property="article:modified_time" content="2022-11-01T16:55:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">js 表格数据处理横向变纵向数据</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="language-javascript">    // 这是后台数据
    var dataSource = [{
            "saturday": 2764,
            "project": "过店人次",
            "thursday": 3389,
            "sum": 18958,
            "sunday": 2364,
            "tuesday": 2945,
            "wednesday": 3452,
            "friday": 1398,
            "monday": 2646
        },
        {
            "saturday": 17,
            "project": "环比上周",
            "thursday": 73,
            "sum": 205,
            "sunday": 9,
            "tuesday": 48,
            "wednesday": 54,
            "friday": -39,
            "monday": 43
        },
        {
            "saturday": -36,
            "project": "对比今年均值",
            "thursday": -21,
            "sum": -261,
            "sunday": -45,
            "tuesday": -32,
            "wednesday": -20,
            "friday": -68,
            "monday": -39
        },
        {
            "saturday": "296 (17 - 18点)",
            "project": "过店峰值1",
            "thursday": "326 (10 - 11点)",
            "sum": 2348,
            "sunday": "297 (9 - 10点)",
            "tuesday": "314 (17 - 18点)",
            "wednesday": "352 (8 - 9点)",
            "friday": "435 (8 - 9点)",
            "monday": "328 (18 - 19点)"
        },
        {
            "saturday": "289 (8 - 9点)",
            "project": "过店峰值2",
            "thursday": "325 (9 - 10点)",
            "sum": 2052,
            "sunday": "236 (8 - 9点)",
            "tuesday": "284 (8 - 9点)",
            "wednesday": "299 (10 - 11点)",
            "friday": "298 (17 - 18点)",
            "monday": "321 (17 - 18点)"
        },
        {
            "saturday": "285 (9 - 10点)",
            "project": "过店峰值3",
            "thursday": "298 (8 - 9点)",
            "sum": 1866,
            "sunday": "219 (12 - 13点)",
            "tuesday": "260 (9 - 10点)",
            "wednesday": "297 (11 - 12点)",
            "friday": "272 (9 - 10点)",
            "monday": "235 (10 - 11点)"
        }
    ]
    // 想要的data 
    var newData = [
        // 周一就是每个对象里的monday
        // key可以自定义的英文唯一值
        {
            '日期': '周一',
            '过店人次': 2646,
            '环比上周': 43,
            '对比今年均值': -39,
            '过店峰值1': "328 (18 - 19点)",
            '过店峰值2': "321 (17 - 18点)",
            '过店峰值3': "235 (10 - 11点)"
        },
        // 以此类推 周二tuesday 周二就是每个对象里面的tuesday的
        {
            '日期': '周二 ',
            '过店人次': 2646,
            '环比上周': 43,
            '对比今年均值': -39,
            '过店峰值1': "328 (18 - 19点)",
            '过店峰值2': "321 (17 - 18点)",
            '过店峰值3': "235 (10 - 11点)"
        },
        //... 34 5 6 7 合计
    ]
   // 函数 </code></pre> 
<pre><code class="language-javascript">    //方法1  
let mapData = new Map([
        ["monday", "周一"],
        ["tuesday", "周二"],
        ["wednesday", "周三"],
        ["thursday", "周四"],
        ["friday", "周五"],
        ["saturday", "周六"],
        ["sunday", "周日"]
    ])
    let mapData1 = new Map([
        ["周一", "1"],
        ["周二", "2"],
        ["周三", "3"],
        ["周四", "4"],
        ["周五", "5"],
        ["周六", "6"],
        ["周日", "7"],
        ["合计", "8"],
    ])

    function changeAir(params) {
        let temp = params.project
        return temp
    }
    for (const key in dataSource[0]) {
        mapData.get(key) &amp;&amp; newData.push({'日期':key})
    }
    dataSource.forEach((item,index)=&gt;{
        let temp = changeAir(item)
        newData.map(i=&gt;{
            i[temp] = item.project
            if(item.project === temp){
                i[temp] =  item[i['日期']]
            }
        })
     })
     newData.map(item=&gt;{
       item.dataName = mapData.get(item['日期'])
       item.enData = item['日期']
       item.sort = mapData1.get(item.dataName)
       delete item['日期']
     })
    console.log(newData)

</code></pre> 
<pre><code class="language-javascript">//方法2

    var daobulArr = ['过店人次', '环比上周', '对比今年均值', '过店峰值1', '过店峰值2', '过店峰值3']
    dataSource.map((item) =&gt; {
        if (item.project === '过店人次') {
            delete item.project
            for (let keys in item) {
                dataArrs.push({
                    outTotal: item[keys],
                    dataName: test(keys).dataName,
                    enData: keys,
                    sort: test(keys).sort
                })
            }
        } else {
            daobulArr.map((info) =&gt; {
                if (item.project === info) {
                    for (let keys in item) {
                        dataArrs.map((fun) =&gt; {
                            fun[`${info}`] = item[fun.enData]
                        })
                    }
                }
            })
        }

    })

    function test(key) {
        let contObj = {
            dataName: '',
            sort: 0
        }
        switch (key) {
            case 'monday':
                contObj.dataName = '周一'
                contObj.sort = 1
                break;
            case 'tuesday':
                contObj.dataName = '周二'
                contObj.sort = 2
                break;
            case 'wednesday':
                contObj.dataName = '周三'
                contObj.sort = 3
                break;
            case 'thursday':
                contObj.dataName = '周四'
                contObj.sort = 4
                break;
            case 'friday':
                contObj.dataName = '周五'
                contObj.sort = 5
                break;
            case 'saturday':
                contObj.dataName = '周六'
                contObj.sort = 6
                break;
            case 'sunday':
                contObj.dataName = '周日'
                contObj.sort = 7
                break;
            case 'sum':
                contObj.dataName = '合计'
                contObj.sort = 8
                break;

            default:
                break;
        }
        return contObj
    }</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6cde0b304d9b17d265ad3126a0b77b61/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">初级架构入门（一）Java 项目入门命名规范</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/20717e2b2858155335a7136f42d1b135/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Apk体积检测 - ApkChecker的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>