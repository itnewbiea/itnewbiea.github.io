<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>本人的一些总结 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="本人的一些总结" />
<meta property="og:description" content="有关idea 1、maven仓库的问题
步骤:
1、先看看设置里面的仓库，是不是自己的仓库。如果不是的话，先换成自己的仓库。(必须注意的)
2、检查一下你本地库里面，是不是有未下载完的文件。类似与这样的文件，删一下，仓库可能没有下载完毕。
2、mvn package看看
百度mvn package的使用方法。
3、idea上就是爆出xxx.jar不存在，明明配置了自己的maven仓库。
mvn dependency:sources　// 命令jar包被下载下来
首选这种
有关flink 1、代码中容易忽略的地址问题。
只要没有new，就是同一个地址，也就是对同一个地址上的内容进行修改。
package com.atguigu.app.function; import com.alibaba.fastjson.JSONObject; public class test { public static void main(String[] args) { // {&#34;after&#34;:&#34;123456&#34;,&#34;tablename&#34;:&#34;table1&#34;,&#34;db&#34;:&#34;database&#34;,&#34;before2&#34;:&#34;xyz&#34;,&#34;before1&#34;:&#34;xyz&#34;} JSONObject value=new JSONObject(); value.put(&#34;db&#34;, &#34;database&#34;) ; value.put(&#34;tablename&#34;, &#34;table1&#34;); value.put(&#34;before1&#34;, &#34;xyz&#34;); value.put(&#34;before2&#34;, &#34;xyz&#34;); value.put(&#34;after&#34;, &#34;123456&#34;); System.out.println(value.toString()); // {&#34;value&#34;:{&#34;after&#34;:&#34;123456&#34;,&#34;tablename&#34;:&#34;table1&#34;,&#34;db&#34;:&#34;database&#34;,&#34;before2&#34;:&#34;xyz&#34;,&#34;before1&#34;:&#34;xyz&#34;}} JSONObject value1=new JSONObject(); value1.put(&#34;value&#34;,value) ; // {&#34;after&#34;:&#34;123456&#34;,&#34;tablename&#34;:&#34;table1&#34;,&#34;db&#34;:&#34;database&#34;,&#34;before2&#34;:&#34;xyz&#34;,&#34;before1&#34;:&#34;xyz&#34;} JSONObject data = value1.getJSONObject(&#34;value&#34;); String filterColumn = &#34;db&#34;&#43;&#34;,&#34;&#43;&#34;tablename&#34;&#43;&#34;,&#34;&#43;&#34;after&#34;; test2.filterColumn(data, filterColumn); System.out.println(value1.toString()); } } {&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/457078786572456ac863f097ce0befee/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-14T23:47:03+08:00" />
<meta property="article:modified_time" content="2022-03-14T23:47:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">本人的一些总结</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="idea_0"></a>有关idea</h2> 
<p>1、maven仓库的问题<br> <img src="https://images2.imgbox.com/ce/81/aYJesATr_o.png" alt="在这里插入图片描述"></p> 
<p>步骤:<br> 1、先看看设置里面的仓库，是不是自己的仓库。如果不是的话，先换成自己的仓库。(必须注意的)<br> 2、检查一下你本地库里面，是不是有未下载完的文件。类似与这样的文件，删一下，仓库可能没有下载完毕。<br> <img src="https://images2.imgbox.com/ed/61/pJolsRqD_o.png" alt="在这里插入图片描述"><br> 2、mvn package看看<br> 百度mvn package的使用方法。</p> 
<p>3、idea上就是爆出xxx.jar不存在，明明配置了自己的maven仓库。</p> 
<blockquote> 
 <p>mvn dependency:sources　 // 命令jar包被下载下来</p> 
</blockquote> 
<p>首选这种<br> <img src="https://images2.imgbox.com/b9/a6/KqS7RcHP_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b6/60/aZVwoMca_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="flink_22"></a>有关flink</h2> 
<p>1、代码中容易忽略的地址问题。</p> 
<blockquote> 
 <p>只要没有new，就是同一个地址，也就是对同一个地址上的内容进行修改。</p> 
</blockquote> 
<pre><code>package com.atguigu.app.function;

import com.alibaba.fastjson.JSONObject;

public class test {


    public static void main(String[] args) {



       // {"after":"123456","tablename":"table1","db":"database","before2":"xyz","before1":"xyz"}
        JSONObject value=new JSONObject();
        value.put("db", "database") ;
        value.put("tablename", "table1");
        value.put("before1", "xyz");
        value.put("before2", "xyz");
        value.put("after", "123456");
        System.out.println(value.toString());


       // {"value":{"after":"123456","tablename":"table1","db":"database","before2":"xyz","before1":"xyz"}}
        JSONObject value1=new JSONObject();
        value1.put("value",value) ;



      // {"after":"123456","tablename":"table1","db":"database","before2":"xyz","before1":"xyz"}
        JSONObject data = value1.getJSONObject("value");

        String filterColumn = "db"+","+"tablename"+","+"after";


        test2.filterColumn(data, filterColumn);

        System.out.println(value1.toString());

    }

}

</code></pre> 
<p><img src="https://images2.imgbox.com/1c/e2/hUe3l41C_o.png" alt="在这里插入图片描述"></p> 
<pre><code>{"after":"123456","tablename":"table1","db":"database","before2":"xyz","before1":"xyz"}
{"value":{"after":"123456","tablename":"table1","db":"database"}}
</code></pre> 
<p>用到的过滤方法</p> 
<pre><code>package com.atguigu.app.function;

import com.alibaba.fastjson.JSONObject;

import java.util.Arrays;
import java.util.List;

public class test2 {
    
    protected static void filterColumn(JSONObject data, String sinkColumns) {

        String[] fields = sinkColumns.split(",");
        List&lt;String&gt; columns = Arrays.asList(fields);

        data.entrySet().removeIf(next -&gt; !columns.contains(next.getKey()));

    }
}
</code></pre> 
<h2><a id="kafka_104"></a>有关kafka</h2> 
<p>1、启动不起来Kafka</p> 
<p><img src="https://images2.imgbox.com/9d/ec/vFLWRzZb_o.png" alt="在这里插入图片描述"></p> 
<p>在日志中找到<br> <img src="https://images2.imgbox.com/47/f6/YZV1WzmF_o.png" alt="在这里插入图片描述"></p> 
<p>在三台机器上面的/opt/module/kafka/datas路径下，分别:</p> 
<blockquote> 
 <p>/opt/module/kafka/datas下面的meta.properties的cluster.id改成iMgAX07PTsyBQnXIQZSfjA</p> 
</blockquote> 
<p>kafka启动不输出消息到控制台，输出到指定的文件名。这里输出到temp.log中。temp.log的路径是执行命令时候的当前路径。也就是在Kafka下面。<br> <img src="https://images2.imgbox.com/f3/62/Z59o9Fdo_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/04/c2/1FHK0Zj9_o.png" alt="在这里插入图片描述"></p> 
<p><a href="https://blog.csdn.net/m0_59252007/article/details/119533700">参考来源</a></p> 
<p>2、有的节点启动不起来</p> 
<p>打开日志(KafkaServer.out文件)，然后最后一行是这样的错误。</p> 
<blockquote> 
 <p>ERROR Shutdown broker because all log dirs in /opt/module/kafka/data<br> have failed (kafka.log.LogManager)</p> 
</blockquote> 
<p>注意：如果是重要数据，一定要备份！！！不能只删除。<br> <img src="https://images2.imgbox.com/bc/8c/EGDaYTSE_o.png" alt="在这里插入图片描述"><br> 之前可能是删除过topic，爆出了这样的错误。<br> 于是，试了一下，这样做是可以的，网上其他的做法试了不行。</p> 
<p><img src="https://images2.imgbox.com/fd/22/y7jYqrf5_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="hbasephoenix_140"></a>有关hbase、phoenix</h2> 
<p>1、一定要退出安全模式，在启动hbase之前，否则会有一些错误，比如phoenix无法连接。</p> 
<p><img src="https://images2.imgbox.com/bf/a5/B4HD18fa_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>hdfs dfsadmin -safemode leave</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/ca/e5/pr2r8mmb_o.png" alt="在这里插入图片描述"></p> 
<p>2、phoenix迟迟连不上，首先检查安全模式的有没有关，不行的话，然后试试下面的方法。</p> 
<p><img src="https://images2.imgbox.com/1f/70/ALx7meam_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/91/0c/QW9Z48CQ_o.png" alt="在这里插入图片描述"></p> 
<p>3、hbase中的rowkey设计</p> 
<blockquote> 
 <p>HBase的rowkey设计一直都是难点和痛点，不合适的rowkey设计会导致读写性能、吞吐不佳等诸多问题。</p> 
</blockquote> 
<p><a href="https://blog.csdn.net/sinat_36121406/article/details/82775318?utm_medium=distribute.wap_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecpm-1-82775318.wap_agg_so&amp;utm_term=hbase%20%E6%95%B0%E6%8D%AE%E5%88%86%E5%B8%83%E6%96%B9%E5%BC%8F">hbase中的rowkey设计的参考文章</a></p> 
<blockquote> 
 <p>有关副本</p> 
</blockquote> 
<pre><code>HBase的副本机制是通过通过底层的HDFS实现的。所以，HBase的副本与分片是解耦的，是存储计算分离的。这使得region可以在RS之间灵活的移动，而不需要进行数据迁移，这赋予了HBase秒级扩容的能力和极大的灵活性。
</code></pre> 
<blockquote> 
 <p>好的分布是怎么样的？</p> 
</blockquote> 
<pre><code>  对于单个表而言，一个“好”的数据分布，应该是:
       -- 每个region的数据量大小相近，请求量(吞吐)接近，每台机器调度的region数量大致相同。
  这样，这张表的数据和访问能够均匀的分布在整个集群中，从而得到最好的资源利用率和服务质量，即达到负载均衡。当集群进行扩容、缩容时，我们希望这种“均衡”能够自动保持。
  如果数据分布未能实现负载均衡，则 ---负载较高的机器---  很容易称为整个系统的瓶颈，这台机器的响应慢，可能导致客户端的大部分线程都在等待这台机器返回，从而影响整体吞吐。所以，负载均衡是region划分和调度的重要目标。
</code></pre> 
<blockquote> 
 <p>负载均衡问题：</p> 
</blockquote> 
<pre><code>数据的逻辑分布：即region划分/分布，是rowkey到region的映射问题
数据的物理分布：即region在RS上的调度问题
访问的分布：即系统吞吐(请求)在各个RS上的分布问题，涉及数据量和访问量之间的关系，访问热点等。
</code></pre> 
<blockquote> 
 <p>HBase能够实现灵活调度、秒级扩容的关键</p> 
</blockquote> 
<pre><code>可见，一行数据的分布(找到一行数据所在的RS)，存在2个层级的路由：
           一是rowkey到region的路由，
           二是region到RS的路由。
  这一点是HBase能够实现灵活调度、秒级扩容的关键。
</code></pre> 
<blockquote> 
 <p>逻辑分布 – 基于rowkey范围的region划分</p> 
</blockquote> 
<pre><code>就是：   一张表如何划分成多个region
</code></pre> 
<pre><code>region划分的粒度是行，region就是这个表中多个连续的行构成的集合。行的唯一标识符是rowkey，所以，可以将region理解为一段连续分布的rowkey的集合。所以，称这种方式为基于rowkey范围的划分。

一个region负责的rowkey范围是一个左闭右开区间，所以，后一个region的start key是前一个region的end key。注意，第一个region是没有start key的，最后一个region是没有end key的。这样，这个表的所有region加在一起就能覆盖任意的rowkey值域。
</code></pre> 
<pre><code>一般来说，region的生成有3种方式：

建表时进行预分区：通过对rowkey进行预估，预先划分好region
region分裂：手工分裂，或达到一定条件时自动分裂(如region大小超过一个阈值)
region合并：手工合并
</code></pre> 
<pre><code>所以，为了使表从一开始就具备良好的吞吐和性能，实际生产环境中建表通常都需要进行预分区。但也有一些例外，比如无法预先对rowkey范围进行预估，或者，不容易对rowkey范围进行均匀的拆分，此时，也可以创建只有一个region的表，由系统自己分裂，从而逐渐形成一个“均匀的”region分布。
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/bb/GafC7drO_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b9/ca/Hk0eClvz_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2de00d58808b53d55c655735ec5fa40b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ARM Cortex-M0系统简介</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8071efcfd35cab6da80dd22c9e6ecaec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OA系统--用户登录响应结果</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>