<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker基本操作之联网仓库仓库和本地仓库的搭建 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker基本操作之联网仓库仓库和本地仓库的搭建" />
<meta property="og:description" content="仓库（Repository）是集中存放镜像的地方。
一、Docker Hub Docker 官方维护了一个公共仓库 Docker Hub，其中已经包括了数量超过 15,000 的镜像。大部分需求都可以通过在 Docker Hub 中直接下载镜像来实现。
1、注册
你可以在Docker官网 https://cloud.docker.com 免费注册一个 Docker 账号。
2、 登录
注册完成后，我们就可以利用下面的命令进行登录登出
#入用户名及密码来完成在命令行界面登录 Docker Hub docker login #退出登录 docker logout 3、拉取镜像
你可以通过 docker search 命令来查找官方仓库中的镜像，并利用 docker pull 命令来将它下载到本地。
#查找镜像 docker search 镜像名 #拉取镜像 docker pull 镜像 4、上传镜像
用户也可以在登录后通过 docker push 命令来将自己的镜像推送到 Docker Hub。
以下命令中的 username 请替换为你的 Docker 账号用户名。
#打包镜像 docker tag 镜像 #列出镜像 docker image ls #上传镜像 docker push 文件名 #查看是否上传成功 docker search 文件名 5、自动创建" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/95e607123eb65569960a1b0e49d31325/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-29T19:45:01+08:00" />
<meta property="article:modified_time" content="2021-11-29T19:45:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker基本操作之联网仓库仓库和本地仓库的搭建</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>仓库（<code>Repository</code>）是集中存放镜像的地方。</p> 
<h3><a id="Docker_Hub_1"></a>一、Docker Hub</h3> 
<p>Docker 官方维护了一个公共仓库 <a href="https://hub.docker.com/" rel="nofollow">Docker Hub</a>，其中已经包括了数量超过 15,000 的镜像。大部分需求都可以通过在 Docker Hub 中直接下载镜像来实现。<br> <strong>1、注册</strong></p> 
<p>你可以在Docker官网 <a href="https://cloud.docker.com" rel="nofollow">https://cloud.docker.com</a> 免费注册一个 Docker 账号。</p> 
<p><img src="https://images2.imgbox.com/e3/08/svqeJuyu_o.png" alt="在这里插入图片描述"></p> 
<p><strong>2、 登录</strong><br> 注册完成后，我们就可以利用下面的命令进行登录登出</p> 
<pre><code class="prism language-powershell"><span class="token comment">#入用户名及密码来完成在命令行界面登录 Docker Hub</span>
docker login
<span class="token comment">#退出登录</span>
docker logout
</code></pre> 
<p><strong>3、拉取镜像</strong></p> 
<p>你可以通过 <code>docker search</code> 命令来查找官方仓库中的镜像，并利用 <code>docker pull</code> 命令来将它下载到本地。</p> 
<pre><code class="prism language-bash"><span class="token comment">#查找镜像</span>
docker search 镜像名
<span class="token comment">#拉取镜像</span>
docker pull 镜像
</code></pre> 
<p><strong>4、上传镜像</strong></p> 
<p>用户也可以在登录后通过 <code>docker push</code> 命令来将自己的镜像推送到 Docker Hub。</p> 
<p>以下命令中的 <code>username</code> 请替换为你的 Docker 账号用户名。</p> 
<pre><code class="prism language-bash"><span class="token comment">#打包镜像</span>
docker tag 镜像
<span class="token comment">#列出镜像</span>
docker image <span class="token function">ls</span>
<span class="token comment">#上传镜像</span>
docker push 文件名
<span class="token comment">#查看是否上传成功</span>
docker search 文件名
</code></pre> 
<p><strong>5、自动创建</strong><br> 配置自动创建的包括如下的步骤：<br> 1、 创建并登录 Docker Hub，以及目标网站；<br> 2、在目标网站中连接帐户到 Docker Hub；<br> 3、在 Docker Hub 中 <a href="https://registry.hub.docker.com/builds/add/" rel="nofollow">配置一个自动创建</a>；<br> 4、 选取一个目标网站中的项目（需要含 <code>Dockerfile</code>）和分支；<br> 5、指定 <code>Dockerfile</code> 的位置，并提交创建。<br> 之后就可以在 Docker Hub 的 <a href="https://registry.hub.docker.com/builds/" rel="nofollow">自动创建页面</a> 中跟踪每次创建的状态。</p> 
<h3><a id="_52"></a>二、私有仓库</h3> 
<p>有时候使用 Docker Hub 这样的公共仓库可能不方便，用户可以创建一个本地仓库供私人使用。<br> <a href="https://docs.docker.com/registry/" rel="nofollow"><code>docker-registry</code></a> 是官方提供的工具，可以用于构建私有的镜像仓库。本文内容基于 <a href="https://github.com/docker/distribution"><code>docker-registry</code></a> v2.x 版本。</p> 
<p><strong>1、安装运行 docker-registry</strong><br> 1、容器运行<br> 你可以通过获取官方 <code>registry</code> 镜像来运行，其执行脚本命令如下：</p> 
<pre><code class="prism language-bash">docker run -d -p <span class="token number">5000</span>:5000 --restart<span class="token operator">=</span>always --name 本地地址 registry
</code></pre> 
<p>这将使用官方的 <code>registry</code> 镜像来启动私有仓库。默认情况下，仓库会被创建在容器的 <code>/var/lib/registry</code> 目录下。你可以通过 <code>-v</code> 参数来将镜像文件存放在本地的指定路径。例如下面的例子将上传的镜像放到本地的 <code>/opt/data/registry</code> 目录。</p> 
<pre><code class="prism language-bash">docker run -d -p <span class="token number">5000</span>:5000 -v 本地地址 registry
</code></pre> 
<p>2、在私有仓库上传、搜索、下载镜像<br> 创建好私有仓库之后，就可以使用 <code>docker tag</code> 来标记一个镜像，然后推送它到仓库。例如私有仓库地址为 <code>127.0.0.1:5000</code>。</p> 
<pre><code class="prism language-bash"><span class="token comment">#查看本地镜像</span>
docker image <span class="token function">ls</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#使用 docker tag将 镜像:latest这个镜像标记为本地IP地址:端口号/镜像:latest。</span>
docker tag ubuntu:latest 端口号/镜像:latest
<span class="token comment">#查看所有镜像</span>
docker image <span class="token function">ls</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#使用 docker push上传标记的镜像。</span>
docker push IP地址:端口号/镜像名:latest
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#用curl查看仓库中的镜像。</span>
<span class="token function">curl</span> IP地址:端口号/版本信息/_catalog
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#删除镜像</span>
docker image <span class="token function">rm</span> IP地址:端口号/镜像名:latest
<span class="token comment">#拉取镜像</span>
docker pull <span class="token number">127.0</span>.0.1:5000/ubuntu:latest
<span class="token comment">#列出docker镜像信息</span>
$ docker image <span class="token function">ls</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f0ca8d3586c4fae0db38b5463df8a043/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">找工作前练手前端项目实战2</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c47c2a662011e4311c92e36d4613803f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">k8s、ServiceAccount权限详解、RBAC 详解(基于角色的访问控制)，常用操作指令</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>