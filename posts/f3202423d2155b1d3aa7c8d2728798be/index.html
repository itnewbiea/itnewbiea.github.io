<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Go语言字符串与其他数据类型的转换 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Go语言字符串与其他数据类型的转换" />
<meta property="og:description" content="字符串与其他数据类型的转换 整数 与 字符串
// 字符串与其他类型的转换 // str 转 int newStr1 := &#34;1&#34; intValue, _ := strconv.Atoi(newStr1) fmt.Printf(&#34;%T,%d\n&#34;, intValue, intValue) // int,1 // int 转 str intValue2 := 1 strValue := strconv.Itoa(intValue2) fmt.Printf(&#34;%T, %s\n&#34;, strValue, strValue) Golang 进阶：strconv – 字符串和基本数据类型之间转换
字符串转为整型
关于将字符串转为整型的问题上，strconv 包中提供了三种方法： func ParseInt(s string, base int, bitSize int) (i int64, err error) func ParseUint(s string, base int, bitSize int) (n uint64, err error) func Atoi(s string) (i int, err error) 我们最常用的应该就是 Atoi() 了，而这个函数时 ParseInt 的一个简易版。在 Atoi 函数的内部，我们可以看到:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f3202423d2155b1d3aa7c8d2728798be/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-24T15:46:14+08:00" />
<meta property="article:modified_time" content="2023-09-24T15:46:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Go语言字符串与其他数据类型的转换</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>字符串与其他数据类型的转换</h2> 
<ol><li> <p>整数 与 字符串</p> <pre><code class="prism language-go"><span class="token comment">// 字符串与其他类型的转换</span>
<span class="token comment">// str 转 int</span>
newStr1 <span class="token operator">:=</span> <span class="token string">"1"</span>
intValue<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>newStr1<span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T,%d\n"</span><span class="token punctuation">,</span> intValue<span class="token punctuation">,</span> intValue<span class="token punctuation">)</span>  <span class="token comment">// int,1</span>

<span class="token comment">// int 转 str</span>
intValue2 <span class="token operator">:=</span> <span class="token number">1</span>
strValue <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>intValue2<span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T, %s\n"</span><span class="token punctuation">,</span> strValue<span class="token punctuation">,</span> strValue<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<p><a href="https://blog.csdn.net/weixin_41036574/article/details/97785959?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168847207416800211531355%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168847207416800211531355&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-97785959-null-null.142%5Ev88%5Einsert_down38v5,239%5Ev2%5Einsert_chatgpt&amp;utm_term=strconv.ParseFloat&amp;spm=1018.2226.3001.4187">Golang 进阶：strconv – 字符串和基本数据类型之间转换</a></p> 
<ul><li><strong>字符串转为整型</strong><br> 关于将字符串转为整型的问题上，strconv 包中提供了三种方法：</li></ul> 
<pre><code>func ParseInt(s string, base int, bitSize int) (i int64, err error)
func ParseUint(s string, base int, bitSize int) (n uint64, err error)
func Atoi(s string) (i int, err error)

</code></pre> 
<p>我们最常用的应该就是 Atoi() 了，而这个函数时 ParseInt 的一个简易版。在 Atoi 函数的内部，我们可以看到:</p> 
<pre><code>// Atoi is equivalent to ParseInt(s, 10, 0), converted to type int.
func Atoi(s string) (int, error) {
    ...
    // Slow path for invalid or big integers.
	  i64, err := ParseInt(s, 10, 0)
}

</code></pre> 
<p>也就是说 Atoi 相当于是 ParseInt(s, 10, 0)。所以我们来着重看一下 ParseInt 函数。<br> ParseInt 函数中有两个参数，其中参数 base 代表字符串将按照给定的 进制 进行转化。<br> 一般的，base 的取值为 2~36，如果 base 的值为 0，则会根据字符串的前缀来确定 base 的值：<strong>0x 表示 16 进制； 0 表示 8 进制；否则就是 10 进制</strong>。<br> <strong>而第三个参数 bitSize 则表示的是整数的具体类型。取值 0、8、16、32 和 64 分别代表 int、int8、int16、int32 和 int64</strong>。<br> 在 bitSize=0 时，这是一种比较特殊的情况，而对于这种情况，在源码中，是对 0 进行了这样转换：</p> 
<pre><code>const intSize = 32 &lt;&lt; uint(^uint(0)&gt;&gt;63)
const IntSize = intSize // number of bits in int, uint (32 or 64)

</code></pre> 
<p>ParseInt 函数是有返回值的，而且返回值有两个，n 和 err，err 我们很好理解，而且返回的两种错误值我们在前面也已经提及，我们要说一下，n 返回的是什么内容，在这里，<strong>n 返回的是 bitSize 能够表示的最大或最小值</strong>。<br> 另外，ParseInt 返回的是 int64，这是为了能够容纳所有的整型，在实际使用中，可以根据传递的 bitSize，然后将结果转为实际需要的类型。</p> 
<ul><li><strong>整型转为字符串</strong></li></ul> 
<p>除了将字符串转化为整型的需求，将整型转换为字符串也是同样需要的。我们同样还是需要借助 strconv 这个包：</p> 
<pre><code>func FormatUint(i uint64, base int) string    // 无符号整型转字符串
func FormatInt(i int64, base int) string    // 有符号整型转字符串
func Itoa(i int) string

</code></pre> 
<p>其中，Itoa 内部直接调用 FormatInt(i, 10) 实现的。base 参数可以取 2~36（0-9，a-z）。<br> 而具体实现的方法则是将整数每一位数字对应到相应的字符，存入字符数组中，最后字符数组转为字符串即为结果。在具体实现时，当 base 是 2 的幂次方时，有优化处理（移位和掩码）；十进制也做了优化。<br> 除此之外，在库中还提供了两个函数：AppendInt 和 AppendUint。这两个函数不是将整数转为字符串，而是将整数转为字符数组 append 到目标字符数组中。</p> 
<ul><li><strong>字符串和布尔值之间的转换</strong></li></ul> 
<p>Go中字符串和布尔值之间的转换比较简单，主要有三个函数：</p> 
<pre><code>// 接受 1, t, T, TRUE, true, True, 0, f, F, FALSE, false, False 等字符串；
// 其他形式的字符串会返回错误
func ParseBool(str string) (value bool, err error)
// 直接返回 "true" 或 "false"
func FormatBool(b bool) string
// 将 "true" 或 "false" append 到 dst 中
// 这里用了一个 append 函数对于字符串的特殊形式：append(dst, "true"...)
func AppendBool(dst []byte, b bool)

</code></pre> 
<ol start="2"><li>浮点数 与字符串</li></ol> 
<p>这里同样涉及到三个函数：</p> 
<ul><li>字符串和浮点数之间的转换</li></ul> 
<pre><code>func ParseFloat(s string, bitSize int) (f float64, err error)
func FormatFloat(f float64, fmt byte, prec, bitSize int) string
func AppendFloat(dst []byte, f float64, fmt byte, prec int, bitSize int)

</code></pre> 
<p>函数的命名和作用跟上面讲解的其他类型一致。<br> 但由于浮点数有精度的问题，精度不一样，ParseFloat 和 FormatFloat 可能达不到互逆的效果。如：</p> 
<pre><code>s := strconv.FormatFloat(1234.5678, 'g', 6, 64)
strconv.ParseFloat(s, 64)

</code></pre> 
<p>特别地（不区分大小写），+inf/inf，+infinity/infinity，-inf/-infinity 和 nan 通过 ParseFloat 转换分别返回对应的值（在 math 包中定义）。</p> 
<blockquote> 
 <p>字符串转浮点数:func ParseFloat(s string, bitSize int) (f float64, err error)；<br> <strong>bitSize这个参数没什么用；ParseFloat这个函数无论如何都会返回float64</strong></p> 
</blockquote> 
<pre><code class="prism language-java">    <span class="token comment">// str 转  float</span>
    string3 <span class="token operator">:</span><span class="token operator">=</span> <span class="token string">"3.1415926"</span>
    f<span class="token punctuation">,</span>_ <span class="token operator">:</span><span class="token operator">=</span> <span class="token class-name"><span class="token namespace">strconv<span class="token punctuation">.</span></span>ParseFloat</span><span class="token punctuation">(</span>string3<span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span>
    <span class="token class-name"><span class="token namespace">fmt<span class="token punctuation">.</span></span>Printf</span><span class="token punctuation">(</span><span class="token string">"%T, %f\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">,</span> f<span class="token punctuation">)</span>  <span class="token comment">// float64, 3.141593</span>

    <span class="token comment">//float 转 string</span>
	floatValue <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">3.1416926</span>
	<span class="token comment">//4个参数，1：要转换的浮点数 2. 格式标记（b、e、E、f、g、G）</span>
	<span class="token comment">//3. 精度(保留的位数，会四舍五入) 4. 指定浮点类型（32:float32、64:float64）</span>
	<span class="token comment">// 格式标记：</span>
	<span class="token comment">// ‘b’ (-ddddp±ddd，二进制指数)</span>
	<span class="token comment">// ‘e’ (-d.dddde±dd，十进制指数)</span>
	<span class="token comment">// ‘E’ (-d.ddddE±dd，十进制指数)</span>
	<span class="token comment">// ‘f’ (-ddd.dddd，没有指数)</span>
	<span class="token comment">// ‘g’ (‘e’:大指数，‘f’:其它情况)</span>
	<span class="token comment">// ‘G’ (‘E’:大指数，‘f’:其它情况)</span>
	<span class="token comment">//</span>
	<span class="token comment">// 如果格式标记为 ‘e’，‘E’和’f’，则 第三个参数prec 表示小数点后的数字位数</span>
	<span class="token comment">// 如果格式标记为 ‘g’，‘G’，则 第三个参数prec 表示总的数字位数（整数部分+小数部分）</span>


 formatFloat <span class="token operator">:</span><span class="token operator">=</span> <span class="token class-name"><span class="token namespace">strconv<span class="token punctuation">.</span></span>FormatFloat</span><span class="token punctuation">(</span>floatValue<span class="token punctuation">,</span> <span class="token char">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
 <span class="token class-name"><span class="token namespace">fmt<span class="token punctuation">.</span></span>Printf</span><span class="token punctuation">(</span><span class="token string">"%T,%s \n"</span><span class="token punctuation">,</span> formatFloat<span class="token punctuation">,</span> formatFloat<span class="token punctuation">)</span> <span class="token comment">// string,7085496630423380p-51 </span>

 formatFloat <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">strconv<span class="token punctuation">.</span></span>FormatFloat</span><span class="token punctuation">(</span>floatValue<span class="token punctuation">,</span> <span class="token char">'e'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
 <span class="token class-name"><span class="token namespace">fmt<span class="token punctuation">.</span></span>Printf</span><span class="token punctuation">(</span><span class="token string">"%T,%s \n"</span><span class="token punctuation">,</span> formatFloat<span class="token punctuation">,</span> formatFloat<span class="token punctuation">)</span> <span class="token comment">// string,3.15e+00 </span>

 formatFloat <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">strconv<span class="token punctuation">.</span></span>FormatFloat</span><span class="token punctuation">(</span>floatValue<span class="token punctuation">,</span> <span class="token char">'E'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
 <span class="token class-name"><span class="token namespace">fmt<span class="token punctuation">.</span></span>Printf</span><span class="token punctuation">(</span><span class="token string">"%T,%s \n"</span><span class="token punctuation">,</span> formatFloat<span class="token punctuation">,</span> formatFloat<span class="token punctuation">)</span> <span class="token comment">// string,3.15E+00</span>

 formatFloat <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">strconv<span class="token punctuation">.</span></span>FormatFloat</span><span class="token punctuation">(</span>floatValue<span class="token punctuation">,</span> <span class="token char">'f'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
 <span class="token class-name"><span class="token namespace">fmt<span class="token punctuation">.</span></span>Printf</span><span class="token punctuation">(</span><span class="token string">"%T,%s \n"</span><span class="token punctuation">,</span> formatFloat<span class="token punctuation">,</span> formatFloat<span class="token punctuation">)</span> <span class="token comment">// string,3.15</span>

 formatFloat <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">strconv<span class="token punctuation">.</span></span>FormatFloat</span><span class="token punctuation">(</span>floatValue<span class="token punctuation">,</span> <span class="token char">'g'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
 <span class="token class-name"><span class="token namespace">fmt<span class="token punctuation">.</span></span>Printf</span><span class="token punctuation">(</span><span class="token string">"%T,%s \n"</span><span class="token punctuation">,</span> formatFloat<span class="token punctuation">,</span> formatFloat<span class="token punctuation">)</span><span class="token comment">// string,3.1</span>

 formatFloat <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">strconv<span class="token punctuation">.</span></span>FormatFloat</span><span class="token punctuation">(</span>floatValue<span class="token punctuation">,</span> <span class="token char">'G'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
 <span class="token class-name"><span class="token namespace">fmt<span class="token punctuation">.</span></span>Printf</span><span class="token punctuation">(</span><span class="token string">"%T,%s \n"</span><span class="token punctuation">,</span> formatFloat<span class="token punctuation">,</span> formatFloat<span class="token punctuation">)</span> <span class="token comment">// string,3.1</span>

</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/503088649403c97e4f85e7a2df6ea361/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【算法与数据结构】JavaScript实现十大排序算法（二）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/95e3b621f79b8df7e1cd09f6d9118a70/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【游戏引擎架构】6.2 资源管理器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>