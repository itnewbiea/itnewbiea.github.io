<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>秒杀项目之登录 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="秒杀项目之登录" />
<meta property="og:description" content="目录
一、技术点介绍
二、学习目标
三、如何设计一个秒杀系统
★ 四、项目环境搭建
1、 创建SpringBoot项目并配置POM
2、导入对应的pom依赖
3、导入数据库及表​
4、 配置application.yml
5、启动类中添加注解
6、使用Mybatis-plus反向生成代码
7、userMapper添加@Repository注解
五、前端构建
1、创建登录界面
3、在js目录下新建目录project
4、新建controller类
六、MD5加密
①、exception
②、response包
JsonResponseParse ：
JsonResponseResult ：
ResponseResult：
ResponseResultCode ：
RestThrowableAdvice ：
③、MD5Utils
ValidatorUtils :
2、新建vo类
3、登录方法：
IUserService层：
UserServiceImpl类：
UserController类：
七、 全局异常抓获
1、给实体类userVo加入注解
2、导入帮助包validate，异常抓获
IsMobile：
IsMobileValidator：
IsRequired：
IsRequiredValidator：
ThrowableAdvice：
3、在UserController类方法中加入注解
4、实现类抛出异常
一、技术点介绍 前端：Freemarker、LayUI、jQuery
后端：SpringBoot、MyBatisPlus、Lombok
中间件：RabbitMQ、Redis(redisson)
分布式协调框架：zookeeper
二、学习目标 1.安全优化：隐藏秒杀地址、验证码、接口限流
2.服务优化：RabbitMQ消息队列、接口优化、分布式锁
3.页面优化：缓存、静态化分离
4.分布式会话：用户登录、共享session
5.功能开发：商品列表、商品详情、秒杀、订单详情
6.系统压测：JMeter入门、自定义变量、压测
三、如何设计一个秒杀系统 秒杀，对我们来说，都不是一个陌生的东西。每年的双11,618以及时下流行的直播等等。
秒杀然而，这对于我们系统而言是一个巨大的考验。
那么，如何才能更好地理解秒杀呢？我觉得作为一个程序员，你首先要从高维度出发，从整体上思考问题。
在我看来，秒杀其实主要解决两个问题，一个是并发读，一个是并发写。并发读的核心优化理念是尽量减少用户
到服务端来“读”数据，或者让他们读更少的数据；并发写的处理原则也一样，他要求我们在数据库层面独立出来
一个库，做特殊的处理。另外，我们还要针对秒杀系统做一个保护，针对意料之外的情况设计兜底方案，以防止最坏" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b0519eaa091684905de744e2730c8916/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-19T11:26:13+08:00" />
<meta property="article:modified_time" content="2022-03-19T11:26:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">秒杀项目之登录</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E6%8A%80%E6%9C%AF%E7%82%B9%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E6%8A%80%E6%9C%AF%E7%82%B9%E4%BB%8B%E7%BB%8D" rel="nofollow">一、技术点介绍</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87" rel="nofollow">二、学习目标</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F" rel="nofollow">三、如何设计一个秒杀系统</a></p> 
<p id="%E2%98%85%20%E5%9B%9B%E3%80%81%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-toc" style="margin-left:0px;"><a href="#%E2%98%85%20%E5%9B%9B%E3%80%81%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA" rel="nofollow">★ 四、项目环境搭建</a></p> 
<p id="%C2%A01%E3%80%81%C2%A0%E5%88%9B%E5%BB%BASpringBoot%E9%A1%B9%E7%9B%AE%E5%B9%B6%E9%85%8D%E7%BD%AEPOM-toc" style="margin-left:80px;"><a href="#%C2%A01%E3%80%81%C2%A0%E5%88%9B%E5%BB%BASpringBoot%E9%A1%B9%E7%9B%AE%E5%B9%B6%E9%85%8D%E7%BD%AEPOM" rel="nofollow"> 1、 创建SpringBoot项目并配置POM</a></p> 
<p id="2%E3%80%81%E5%AF%BC%E5%85%A5%E5%AF%B9%E5%BA%94%E7%9A%84pom%E4%BE%9D%E8%B5%96-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E5%AF%BC%E5%85%A5%E5%AF%B9%E5%BA%94%E7%9A%84pom%E4%BE%9D%E8%B5%96" rel="nofollow">2、导入对应的pom依赖</a></p> 
<p id="%C2%A03%E3%80%81%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%8A%E8%A1%A8%E2%80%8B-toc" style="margin-left:80px;"><a href="#%C2%A03%E3%80%81%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%8A%E8%A1%A8%E2%80%8B" rel="nofollow"> 3、导入数据库及表​</a></p> 
<p id="%C2%A04%E3%80%81%C2%A0%E9%85%8D%E7%BD%AEapplication.yml-toc" style="margin-left:80px;"><a href="#%C2%A04%E3%80%81%C2%A0%E9%85%8D%E7%BD%AEapplication.yml" rel="nofollow"> 4、 配置application.yml</a></p> 
<p id="5%E3%80%81%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%B3%A8%E8%A7%A3-toc" style="margin-left:80px;"><a href="#5%E3%80%81%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%B3%A8%E8%A7%A3" rel="nofollow">5、启动类中添加注解</a></p> 
<p id="%C2%A06%E3%80%81%E4%BD%BF%E7%94%A8Mybatis-plus%E5%8F%8D%E5%90%91%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81-toc" style="margin-left:80px;"><a href="#%C2%A06%E3%80%81%E4%BD%BF%E7%94%A8Mybatis-plus%E5%8F%8D%E5%90%91%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81" rel="nofollow"> 6、使用Mybatis-plus反向生成代码</a></p> 
<p id="%C2%A07%E3%80%81userMapper%E6%B7%BB%E5%8A%A0%40Repository%E6%B3%A8%E8%A7%A3-toc" style="margin-left:80px;"><a href="#%C2%A07%E3%80%81userMapper%E6%B7%BB%E5%8A%A0%40Repository%E6%B3%A8%E8%A7%A3" rel="nofollow"> 7、userMapper添加@Repository注解</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%89%8D%E7%AB%AF%E6%9E%84%E5%BB%BA-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%89%8D%E7%AB%AF%E6%9E%84%E5%BB%BA" rel="nofollow">五、前端构建</a></p> 
<p id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2" rel="nofollow">1、创建登录界面</a></p> 
<p id="3%E3%80%81%E5%9C%A8js%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%B0%E5%BB%BA%E7%9B%AE%E5%BD%95project-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E5%9C%A8js%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%B0%E5%BB%BA%E7%9B%AE%E5%BD%95project" rel="nofollow">3、在js目录下新建目录project</a></p> 
<p id="4%E3%80%81%E6%96%B0%E5%BB%BAcontroller%E7%B1%BB-toc" style="margin-left:80px;"><a href="#4%E3%80%81%E6%96%B0%E5%BB%BAcontroller%E7%B1%BB" rel="nofollow">4、新建controller类</a></p> 
<p id="%C2%A0%E5%85%AD%E3%80%81MD5%E5%8A%A0%E5%AF%86-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%85%AD%E3%80%81MD5%E5%8A%A0%E5%AF%86" rel="nofollow"> 六、MD5加密</a></p> 
<p id="%E2%91%A0%E3%80%81exception-toc" style="margin-left:80px;"><a href="#%E2%91%A0%E3%80%81exception" rel="nofollow">①、exception</a></p> 
<p id="%C2%A0%E2%91%A1%E3%80%81response%E5%8C%85-toc" style="margin-left:80px;"><a href="#%C2%A0%E2%91%A1%E3%80%81response%E5%8C%85" rel="nofollow"> ②、response包</a></p> 
<p id="JsonResponseParse%20%EF%BC%9A-toc" style="margin-left:80px;"><a href="#JsonResponseParse%20%EF%BC%9A" rel="nofollow">JsonResponseParse ：</a></p> 
<p id="JsonResponseResult%20%EF%BC%9A-toc" style="margin-left:80px;"><a href="#JsonResponseResult%20%EF%BC%9A" rel="nofollow">JsonResponseResult ：</a></p> 
<p id="%C2%A0ResponseResult%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0ResponseResult%EF%BC%9A" rel="nofollow"> ResponseResult：</a></p> 
<p id="ResponseResultCode%20%EF%BC%9A-toc" style="margin-left:80px;"><a href="#ResponseResultCode%20%EF%BC%9A" rel="nofollow">ResponseResultCode ：</a></p> 
<p id="RestThrowableAdvice%20%EF%BC%9A-toc" style="margin-left:80px;"><a href="#RestThrowableAdvice%20%EF%BC%9A" rel="nofollow">RestThrowableAdvice ：</a></p> 
<p id="%E2%91%A2%E3%80%81MD5Utils-toc" style="margin-left:80px;"><a href="#%E2%91%A2%E3%80%81MD5Utils" rel="nofollow">③、MD5Utils</a></p> 
<p id="ValidatorUtils%20%3A-toc" style="margin-left:80px;"><a href="#ValidatorUtils%20%3A" rel="nofollow">ValidatorUtils :</a></p> 
<p id="2%E3%80%81%E6%96%B0%E5%BB%BAvo%E7%B1%BB-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E6%96%B0%E5%BB%BAvo%E7%B1%BB" rel="nofollow">2、新建vo类</a></p> 
<p id="3%E3%80%81%E7%99%BB%E5%BD%95%E6%96%B9%E6%B3%95%EF%BC%9A-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E7%99%BB%E5%BD%95%E6%96%B9%E6%B3%95%EF%BC%9A" rel="nofollow">3、登录方法：</a></p> 
<p id="IUserService%E5%B1%82%EF%BC%9A-toc" style="margin-left:80px;"><a href="#IUserService%E5%B1%82%EF%BC%9A" rel="nofollow">IUserService层：</a></p> 
<p id="UserServiceImpl%E7%B1%BB%EF%BC%9A-toc" style="margin-left:80px;"><a href="#UserServiceImpl%E7%B1%BB%EF%BC%9A" rel="nofollow">UserServiceImpl类：</a></p> 
<p id="UserController%E7%B1%BB%EF%BC%9A-toc" style="margin-left:80px;"><a href="#UserController%E7%B1%BB%EF%BC%9A" rel="nofollow">UserController类：</a></p> 
<p id="%E4%B8%83%E3%80%81%20%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E6%8A%93%E8%8E%B7-toc" style="margin-left:0px;"><a href="#%E4%B8%83%E3%80%81%20%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E6%8A%93%E8%8E%B7" rel="nofollow">七、 全局异常抓获</a></p> 
<p id="1%E3%80%81%E7%BB%99%E5%AE%9E%E4%BD%93%E7%B1%BBuserVo%E5%8A%A0%E5%85%A5%E6%B3%A8%E8%A7%A3-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E7%BB%99%E5%AE%9E%E4%BD%93%E7%B1%BBuserVo%E5%8A%A0%E5%85%A5%E6%B3%A8%E8%A7%A3" rel="nofollow">1、给实体类userVo加入注解</a></p> 
<p id="2%E3%80%81%E5%AF%BC%E5%85%A5%E5%B8%AE%E5%8A%A9%E5%8C%85validate%EF%BC%8C%E5%BC%82%E5%B8%B8%E6%8A%93%E8%8E%B7-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E5%AF%BC%E5%85%A5%E5%B8%AE%E5%8A%A9%E5%8C%85validate%EF%BC%8C%E5%BC%82%E5%B8%B8%E6%8A%93%E8%8E%B7" rel="nofollow">2、导入帮助包validate，异常抓获</a></p> 
<p id="IsMobile%EF%BC%9A-toc" style="margin-left:80px;"><a href="#IsMobile%EF%BC%9A" rel="nofollow">IsMobile：</a></p> 
<p id="IsMobileValidator%EF%BC%9A-toc" style="margin-left:80px;"><a href="#IsMobileValidator%EF%BC%9A" rel="nofollow">IsMobileValidator：</a></p> 
<p id="IsRequired%EF%BC%9A-toc" style="margin-left:80px;"><a href="#IsRequired%EF%BC%9A" rel="nofollow">IsRequired：</a></p> 
<p id="IsRequiredValidator%EF%BC%9A-toc" style="margin-left:80px;"><a href="#IsRequiredValidator%EF%BC%9A" rel="nofollow">IsRequiredValidator：</a></p> 
<p id="ThrowableAdvice%EF%BC%9A-toc" style="margin-left:80px;"><a href="#ThrowableAdvice%EF%BC%9A" rel="nofollow">ThrowableAdvice：</a></p> 
<p id="3%E3%80%81%E5%9C%A8UserController%E7%B1%BB%E6%96%B9%E6%B3%95%E4%B8%AD%E5%8A%A0%E5%85%A5%E6%B3%A8%E8%A7%A3-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E5%9C%A8UserController%E7%B1%BB%E6%96%B9%E6%B3%95%E4%B8%AD%E5%8A%A0%E5%85%A5%E6%B3%A8%E8%A7%A3" rel="nofollow">3、在UserController类方法中加入注解</a></p> 
<p id="4%E3%80%81%E5%AE%9E%E7%8E%B0%E7%B1%BB%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8-toc" style="margin-left:80px;"><a href="#4%E3%80%81%E5%AE%9E%E7%8E%B0%E7%B1%BB%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8" rel="nofollow">4、实现类抛出异常</a></p> 
<p style="margin-left:80px;"></p> 
<h2 id="%E4%B8%80%E3%80%81%E6%8A%80%E6%9C%AF%E7%82%B9%E4%BB%8B%E7%BB%8D">一、技术点介绍</h2> 
<blockquote> 
 <p>前端：Freemarker、LayUI、jQuery<br> 后端：SpringBoot、MyBatisPlus、Lombok<br> 中间件：RabbitMQ、Redis(redisson)<br> 分布式协调框架：zookeeper</p> 
</blockquote> 
<h2 id="%E4%BA%8C%E3%80%81%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87">二、学习目标</h2> 
<blockquote> 
 <p>1.安全优化：隐藏秒杀地址、验证码、接口限流<br> 2.服务优化：RabbitMQ消息队列、接口优化、分布式锁<br> 3.页面优化：缓存、静态化分离<br> 4.分布式会话：用户登录、共享session<br> 5.功能开发：商品列表、商品详情、秒杀、订单详情<br> 6.系统压测：JMeter入门、自定义变量、压测</p> 
</blockquote> 
<h2 id="%E4%B8%89%E3%80%81%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F">三、如何设计一个秒杀系统</h2> 
<blockquote> 
 <p>秒杀，对我们来说，都不是一个陌生的东西。每年的双11,618以及时下流行的直播等等。<br> 秒杀然而，这对于我们系统而言是一个巨大的考验。</p> 
 <p>那么，如何才能更好地理解秒杀呢？我觉得作为一个程序员，你首先要从高维度出发，从整体上思考问题。<br> 在我看来，秒杀其实主要解决两个问题，一个是并发读，一个是并发写。并发读的核心优化理念是尽量减少用户<br> 到服务端来“读”数据，或者让他们读更少的数据；并发写的处理原则也一样，他要求我们在数据库层面独立出来<br> 一个库，做特殊的处理。另外，我们还要针对秒杀系统做一个保护，针对意料之外的情况设计兜底方案，以防止最坏<br> 的情况发生。</p> 
 <p>其实，秒杀的整体架构可以概括为“稳、准、块”几个关键字<br><strong>稳</strong>：整个系统架构要满足高可用，流量符合预期时肯定要稳定，就是超出预期时也同样不能掉链子，你<br> 要保证秒杀活动顺利完成，即秒杀商品顺利地卖出去，这个是最基本的前提。<br><strong>准</strong>：秒杀10台小米手机，那就只能成交10件，多一台少一台都不行。一旦库存不对，那平台就要承担损失，<br> 所以准就是要求保证数据的一致性。<br><strong>快</strong>：系统的性能足够高，否则你怎么支撑这么大的流量呢？不光是服务端要做极致的性能优化，而且在整个<br> 请求链路上都要做协同的优化，每个地方快一点，整个系统就完美了。</p> 
 <p></p> 
</blockquote> 
<h2 id="%E2%98%85%20%E5%9B%9B%E3%80%81%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span style="color:#fe2c24;">★</span> 四、项目环境搭建</h2> 
<h4 id="%C2%A01%E3%80%81%C2%A0%E5%88%9B%E5%BB%BASpringBoot%E9%A1%B9%E7%9B%AE%E5%B9%B6%E9%85%8D%E7%BD%AEPOM"> 1、 创建SpringBoot项目并配置POM</h4> 
<p><img alt="" height="625" src="https://images2.imgbox.com/7a/b3/ehTRRWQf_o.png" width="811"></p> 
<p><img alt="" height="619" src="https://images2.imgbox.com/69/06/trWX4vex_o.png" width="800"></p> 
<h4 id="2%E3%80%81%E5%AF%BC%E5%85%A5%E5%AF%B9%E5%BA%94%E7%9A%84pom%E4%BE%9D%E8%B5%96">2、导入对应的pom依赖</h4> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.zxy&lt;/groupId&gt;
    &lt;artifactId&gt;seckill&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;seckill&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;

    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;spring-boot.version&gt;2.4.1&lt;/spring-boot.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;!-- mybatis plus依赖 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;3.5.1&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!--mybatis-plus生成器--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-plus-generator&lt;/artifactId&gt;
            &lt;version&gt;3.5.2&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!-- MD5依赖 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;commons-codec&lt;/groupId&gt;
            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
            &lt;version&gt;3.12.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!-- valid验证依赖 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!--redis--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!--hariki--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;
            &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;
                &lt;version&gt;${spring-boot.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.8.1&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;source&gt;1.8&lt;/source&gt;
                    &lt;target&gt;1.8&lt;/target&gt;
                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.4.1&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;mainClass&gt;com.zxy.seckill.SeckillApplication&lt;/mainClass&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;repackage&lt;/id&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;repackage&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;
</code></pre> 
<h4 id="%C2%A03%E3%80%81%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%8A%E8%A1%A8%E2%80%8B"> 3、导入数据库及表<br><img alt="" height="120" src="https://images2.imgbox.com/22/05/IBAA1v5B_o.png" width="523"></h4> 
<h4 id="%C2%A04%E3%80%81%C2%A0%E9%85%8D%E7%BD%AEapplication.yml"> 4、 配置application.yml</h4> 
<p>  （1）添加数据库及连接池配置<br>   （2）添加freemarker配置<br>   （3）添加mybatis-plus配置<br>   （4）添加logging日志配置</p> 
<pre><code>spring:
  application:
    name: seckill
  datasource:
    url: jdbc:mysql://localhost:3306/spa?useSSL=false&amp;useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=Asia/Shanghai&amp;characterEncoding=UTF8
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: 123456
    hikari:
      # 最小空闲连接数量
      minimum-idle: 5
      # 空闲连接存活最大时间，默认600000（10分钟）
      idle-timeout: 180000
      # 连接池最大连接数，默认是10
      maximum-pool-size: 10
      # 此属性控制从池返回的连接的默认自动提交行为,默认值：true
      auto-commit: true
      # 连接池名称
      pool-name: MyHikariCP
      # 此属性控制池中连接的最长生命周期，值0表示无限生命周期，默认1800000即30分钟
      max-lifetime: 1800000
      # 数据库连接超时时间,默认30秒，即30000
      connection-timeout: 30000
  freemarker:
    #设置编码格式
    charset: UTF-8
    #后缀
    suffix: .ftl
    #文档类型
    content-type: text/html
    #模板前端
    template-loader-path: classpath:/templates/
    #启用模板
    enabled: true
    #开启静态资源
  mvc:
    static-path-pattern: /static/**
mybatis-plus:
  mapper-locations: classpath*:/mapper/*Mapper.xml
  #要被访问到的类别名
  type-aliases-package: com.zxy.seckill.model
  configuration:
    #能否使用驼峰命名
    map-underscore-to-camel-case: true
    #开启日志
logging:
  level:
    com.zxy.seckill.mapper: debug
</code></pre> 
<h4 id="5%E3%80%81%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%B3%A8%E8%A7%A3">5、启动类中添加注解</h4> 
<pre><code>@SpringBootApplication
//打开切面
@EnableAspectJAutoProxy
//打开事务
@EnableTransactionManagement
@MapperScan("com.zxy.seckill.mapper")</code></pre> 
<p><img alt="" height="529" src="https://images2.imgbox.com/12/07/u5EvIwRK_o.png" width="1200"></p> 
<h4 id="%C2%A06%E3%80%81%E4%BD%BF%E7%94%A8Mybatis-plus%E5%8F%8D%E5%90%91%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81"> 6、使用Mybatis-plus反向生成代码</h4> 
<pre><strong>MybatisPlusGenerator：</strong>
</pre> 
<pre><code>package com.zxy.seckill.generator;

import com.baomidou.mybatisplus.annotation.FieldFill;
import com.baomidou.mybatisplus.generator.FastAutoGenerator;
import com.baomidou.mybatisplus.generator.config.DataSourceConfig;
import com.baomidou.mybatisplus.generator.config.OutputFile;
import com.baomidou.mybatisplus.generator.config.rules.DateType;
import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;
import com.baomidou.mybatisplus.generator.fill.Column;
import lombok.Data;
import lombok.extern.slf4j.Slf4j;

import java.util.Arrays;
import java.util.Collections;
import java.util.List;

@SuppressWarnings("all")
@Slf4j
@Data
public class MybatisPlusGenerator {

    protected static String URL = "jdbc:mysql://localhost/spa?useEncoding=utf8mb4&amp;serverTimezone=Asia/Shanghai&amp;useSSL=false";
    protected static String USERNAME = "root";
    protected static String PASSWORD = "123456";

    protected static DataSourceConfig.Builder DATA_SOURCE_CONFIG = new DataSourceConfig.Builder(URL, USERNAME, PASSWORD);

    public static void main(String[] args) {
        FastAutoGenerator.create(DATA_SOURCE_CONFIG)
                .globalConfig(
                        (scanner/*lamdba*/, builder/*变量*/) -&gt;
                                builder.author(scanner.apply("请输入作者名称？"))
                                        .enableSwagger()
                                        .fileOverride()
                                        .outputDir(System.getProperty("user.dir") + "\\src\\main\\java")
                                        .commentDate("yyyy-MM-dd")
                                        .dateType(DateType.TIME_PACK)
                )
                .packageConfig((builder) -&gt;
                        builder.parent("com.zxy.seckill")
                                .entity("pojo")
                                .service("service")
                                .serviceImpl("service.impl")
                                .mapper("mapper")
                                .xml("mapper.xml")
                                .pathInfo(Collections.singletonMap(OutputFile.xml, System.getProperty("user.dir") + "\\src\\main\\resources\\mapper"))
                )
                .injectionConfig((builder) -&gt;
                        builder.beforeOutputFile(
                                (a, b) -&gt; log.warn("tableInfo: " + a.getEntityName())
                        )
                )
                .strategyConfig((scanner, builder) -&gt;
                        builder.addInclude(getTables(scanner.apply("请输入表名，多个英文逗号分隔？所有输入 all")))
                                .addTablePrefix("tb_", "t_")
                                .entityBuilder()
                                .enableChainModel()
                                .enableLombok()
                                .enableTableFieldAnnotation()
                                .addTableFills(
                                        new Column("create_time", FieldFill.INSERT)
                                )
                                .controllerBuilder()
                                .enableRestStyle()
                                .enableHyphenStyle()
                                .build())
                .templateEngine(new FreemarkerTemplateEngine())
                .execute();
    }

    protected static List&lt;String&gt; getTables(String tables) {
        return "all".equals(tables) ? Collections.emptyList() : Arrays.asList(tables.split(","));
    }

}
</code></pre> 
<p> 生成完毕：</p> 
<p><img alt="" height="850" src="https://images2.imgbox.com/27/19/3zQzdxuR_o.png" width="1200"></p> 
<h4 id="%C2%A07%E3%80%81userMapper%E6%B7%BB%E5%8A%A0%40Repository%E6%B3%A8%E8%A7%A3"> 7、userMapper添加@Repository注解</h4> 
<pre><code>package com.zxy.seckill.mapper;

import com.zxy.seckill.pojo.User;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import org.springframework.stereotype.Repository;

/**
 * &lt;p&gt;
 * 用户信息表 Mapper 接口
 * &lt;/p&gt;
 *
 * @author zxy
 * @since 2022-03-15
 */
//不加此注解就不能加载到springbean里面去
@Repository
public interface UserMapper extends BaseMapper&lt;User&gt; {

}
</code></pre> 
<h2 id="%E4%BA%8C%E3%80%81%E5%89%8D%E7%AB%AF%E6%9E%84%E5%BB%BA">五、前端构建</h2> 
<h4 id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2">1、创建登录界面</h4> 
<p><img alt="" height="209" src="https://images2.imgbox.com/fa/7f/hwpqB9si_o.png" width="492"></p> 
<p><strong> head.ftl</strong></p> 
<pre><code>&lt;meta charset="UTF-8"&gt;
&lt;title&gt;秒杀项目&lt;/title&gt;
&lt;script src="/static/asset/js/layui/layui.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;link href="/static/asset/js/layui/css/layui.css" rel="stylesheet" type="text/css"/&gt;
&lt;meta http-equiv="Expires" content="0"&gt;
&lt;meta http-equiv="Pragma" content="no-cache"&gt;
&lt;meta http-equiv="Cache-control" content="no-cache"&gt;
&lt;meta http-equiv="Cache" content="no-cache"&gt;
&lt;#--自定义一个 ctx变量--&gt;
&lt;#assign ctx&gt;
&lt;#--   springboot在最初运行时的路径 --&gt;
    ${springMacroRequestContext.getContextPath()}

&lt;/#assign&gt;</code></pre> 
<p><strong>goodslist. ftl</strong></p> 
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;#include "../common/head.ftl"&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;这是商品展示界面&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p><strong>login.ftl</strong></p> 
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="zh"&gt;
&lt;head&gt;
    &lt;#include "common/head.ftl"/&gt;
    &lt;style&gt;
        .layui-panel {
            position: absolute;
            width: 400px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 15px 15px 0px 15px;
            border-radius: 20px;
        }

        .layui-form-label {
            padding: 9px 0px;
        }

        h3 {
            text-align: center;
            line-height: 45px;
            font-size: 40px;
            color: white;
            padding-bottom: 15px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div&gt;
    &lt;div class="layui-panel layui-bg-cyan"&gt;
        &lt;h3&gt;用户登录&lt;/h3&gt;
        &lt;div class="layui-form-item"&gt;
            &lt;label class="layui-form-label"&gt;用户账号&lt;/label&gt;
            &lt;div class="layui-input-block"&gt;
                &lt;input type="text" id="mobile" autocomplete="on" class="layui-input" value="18684671234"&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="layui-form-item"&gt;
            &lt;label class="layui-form-label"&gt;用户密码&lt;/label&gt;
            &lt;div class="layui-input-block"&gt;
                &lt;input type="password" id="password" autocomplete="on" class="layui-input" value="123456"&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="layui-form-item" style="text-align:center;"&gt;
            &lt;button class="layui-btn" id="login" style="width:46%"&gt;登录&lt;/button&gt;
            &lt;button class="layui-btn layui-btn-normal" id="register" style="width:46%"&gt;注册&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;script src="${ctx}/static/asset/js/project/md5.js"&gt;&lt;/script&gt;
&lt;script src="${ctx}/static/asset/js/project/login.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h4 id="3%E3%80%81%E5%9C%A8js%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%B0%E5%BB%BA%E7%9B%AE%E5%BD%95project">3、在js目录下新建目录project</h4> 
<p><strong>新建JavaScript文件login：</strong></p> 
<pre><code>layui.define(()=&gt;{
    // 得到layui中封装的jquery
    let $=layui.jquery
    // 给登录按钮设置事件
    $(login).click(()=&gt;{
     // 取到表单的值
    let mobile = $("#mobile").val();
    let password=$("#password").val();
    // 将数据给后台（前后端分离axios,普通开发ajax）
       $.ajax({
           url:"",//后台登录接口
           data:{
             // 需要携带的数据
               mobile,
               password
           },
           datatype: "json",//后端给你的数据类型
           success(e){
               // 成功的回调函数
 
           },
           error(e){
               // 报错的回调函数
 
           }
 
       })
    })
 
 
})</code></pre> 
<h4 id="4%E3%80%81%E6%96%B0%E5%BB%BAcontroller%E7%B1%BB"><strong>4、新建controller类</strong></h4> 
<p><strong>专门用于跳转路径：</strong><strong>PathController类</strong></p> 
<pre><code>package com.zxy.seckill.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class pathController {
 @RequestMapping("/")
    public String toPath(){
        return "login";
    }

    @RequestMapping("/{dir}/{path}")
    public String toPath(@PathVariable("dir") String dir,@PathVariable("path") String path){
        return dir+"/"+path;
    }

}
</code></pre> 
<p> 运行所得到界面：</p> 
<p><img alt="" height="721" src="https://images2.imgbox.com/97/16/6rctQRl7_o.png" width="1200"></p> 
<h2 id="%C2%A0%E5%85%AD%E3%80%81MD5%E5%8A%A0%E5%AF%86"> 六、MD5加密</h2> 
<p><strong>1、导入帮助包与exception包</strong></p> 
<h4 id="%E2%91%A0%E3%80%81exception"><a name="t14"></a>①、exception</h4> 
<p><img alt="" height="348" src="https://images2.imgbox.com/1c/6b/mWxuAYJN_o.png" width="1200"></p> 
<pre><code>package com.zxy.seckill.exception;

import com.zxy.seckill.util.response.ResponseResultCode;
import lombok.Data;

@SuppressWarnings("all")
@Data
public class BusinessException extends RuntimeException {

    private ResponseResultCode responseResultCode;

    public BusinessException(ResponseResultCode responseResultCode) {
        this.responseResultCode = responseResultCode;
    }

}
</code></pre> 
<h4 id="%C2%A0%E2%91%A1%E3%80%81response%E5%8C%85"> ②、response包</h4> 
<h4 id="JsonResponseParse%20%EF%BC%9A"><a name="t16"></a>JsonResponseParse ：</h4> 
<pre><code>package com.zxy.seckill.util.response;

import lombok.extern.slf4j.Slf4j;
import org.springframework.core.MethodParameter;
import org.springframework.http.MediaType;
import org.springframework.http.server.ServerHttpRequest;
import org.springframework.http.server.ServerHttpResponse;
import org.springframework.web.bind.annotation.RestControllerAdvice;
import org.springframework.web.servlet.mvc.method.annotation.ResponseBodyAdvice;

@SuppressWarnings("all")
@RestControllerAdvice
@Slf4j
public class JsonResponseParse implements ResponseBodyAdvice {

    @Override
    public boolean supports(MethodParameter methodParameter, Class aClass) {
        //返回值决定他是否需要进入beforeBodyWrite
        return methodParameter.getMethod().isAnnotationPresent(JsonResponseResult.class);
    }

    @Override
    public Object beforeBodyWrite(Object o, MethodParameter methodParameter, MediaType mediaType, Class aClass, ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse) {
        //更改返回值
        if (o == null) {
            return ResponseResult.success();
        }
        if (o instanceof Integer) {
            return ResponseResult.failure(ResponseResultCode.queryCode((Integer) o));
        }
        if (o instanceof ResponseResultCode) {
            return ResponseResult.failure((ResponseResultCode) o);
        }
        if (o instanceof ResponseResult) {
            return o;
        }
        return ResponseResult.success(o);
    }

}
</code></pre> 
<h4 id="JsonResponseResult%20%EF%BC%9A">JsonResponseResult ：</h4> 
<pre><code>package com.zxy.seckill.util.response;

import java.lang.annotation.*;

@SuppressWarnings("all")
@Retention(value = RetentionPolicy.RUNTIME)
@Documented
@Target({ElementType.METHOD})
public @interface JsonResponseResult {

}
</code></pre> 
<h4 id="%C2%A0ResponseResult%EF%BC%9A"> ResponseResult：</h4> 
<pre><code>package com.zxy.seckill.util.response;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.io.Serializable;

@SuppressWarnings("all")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class ResponseResult&lt;T&gt; implements Serializable {

    private int code;
    private String message;
    private T data;
    private Long total;

    /**
     * 私有构造, 只允许通过static调用构造
     *
     * @param resultCode 结果枚举
     * @param data       响应数据
     */
    private ResponseResult(ResponseResultCode resultCode, T data) {
        this.code = resultCode.getCode();
        this.message = resultCode.getMessage();
        this.data = data;
    }

    /**
     * 私有构造, 只允许通过static调用构造
     *
     * @param resultCode 结果枚举
     * @param data       响应数据
     */
    private ResponseResult(ResponseResultCode resultCode, Long total, T data) {
        this.code = resultCode.getCode();
        this.message = resultCode.getMessage();
        this.data = data;
        this.total = total;
    }

    /**
     * 成功调用返回的结果(无数据携带)
     */
    public static ResponseResult success() {
        return success(null);
    }

    /**
     * 成功调用返回的结果(数据携带)
     *
     * @param data 携带的数据
     */
    public static &lt;T&gt; ResponseResult success(T data) {
        return new ResponseResult(ResponseResultCode.SUCCESS, data);
    }

    /**
     * 成功调用返回的结果(分页使用)
     *
     * @param data  携带的数据
     * @param total 数据总条数
     */
    public static &lt;T&gt; ResponseResult success(T data, Long total) {
        return new ResponseResult(ResponseResultCode.SUCCESS, total, data);
    }

    /**
     * 失败调用返回的结果(数据携带)
     *
     * @param resultCode 状态枚举
     * @param data       携带的数据
     */
    public static &lt;T&gt; ResponseResult failure(ResponseResultCode resultCode, T data) {
        return new ResponseResult(resultCode, data);
    }

    /**
     * 失败调用返回的结果(无数据携带)
     *
     * @param resultCode 状态枚举
     */
    public static ResponseResult failure(ResponseResultCode resultCode) {
        return failure(resultCode, null);
    }

}
</code></pre> 
<h4 id="ResponseResultCode%20%EF%BC%9A">ResponseResultCode ：</h4> 
<pre><code>package com.zxy.seckill.util.response;

import java.io.Serializable;

@SuppressWarnings("all")
public enum ResponseResultCode implements Serializable {

    /* 正常状态 */
    SUCCESS(200, "成功"),
    FAILURE(300, "失败"),
    UNKNOWN(400, "未知错误"),
    /**
     * 用户code范围: 1000;
     */
    USER_ACCOUNT_NOT_FIND(1001, "用户名不存在"),
    USER_ACCOUNT_DISABLED(1002, "该用户已被禁用"),
    USER_PASSWORD_NOT_MATCH(1003, "该用户密码不一致"),
    USER_PERMISSION_ERROR(1004, "该用户不具备访问权限"),
    USER_STATE_OFF_LINE(1005, "该用户未登录"),
    USER_CREDENTIAL_NOT_BE_EMPTY(1006, "用户的登录信息不能为空值"),
    USER_ACCOUNT_NOT_MOBLIE(1007, "该用户登录信息格式不符合"),
    USER_LOGIN_ERROR(1008, "登录失败"),
    /**
     * 其它异常: 4000;
     */
    TICKET_ERROR(4001, "TICKET失效,请重新登录"),
    /**
     * 商品异常: 6000;
     */
    GOODS_ADD_ERROR(6001, "商品添加失败"),
    GOODS_EDIT_ERROR(6002, "商品修改失败"),
    GOODS_REMOVE_ERROR(6003, "商品删除失败"),
    /**
     * 秒杀商品异常: 8000
     */
    SECKILL_GOODS_ADD_ERROR(8001, "秒杀商品增加失败"),
    /**
     * 秒杀订单异常: 10000
     */
    SECKILL_ORDER_ERROR(10001, "秒杀订单增加失败"),
    SECKILL_ORDER_QUANTITY_ERROR(10002, "秒杀商品数量不足"),
    SECKILL_ORDER_EXISTS_ERROR(10002, "秒杀订单已经存在"),
    ;

    private final Integer code;
    private final String message;

    ResponseResultCode(Integer code, String message) {
        this.code = code;
        this.message = message;
    }

    public static ResponseResultCode queryCode(Integer code) {
        for (ResponseResultCode value : values()) {
            if (code.equals(value.code)) {
                return value;
            }
        }
        return UNKNOWN;
    }

    public Integer getCode() {
        return code;
    }

    public String getMessage() {
        return message;
    }

}
</code></pre> 
<h4 id="RestThrowableAdvice%20%EF%BC%9A">RestThrowableAdvice ：</h4> 
<pre><code>package com.zxy.seckill.util.response;

import com.zxy.seckill.exception.BusinessException;
import lombok.extern.slf4j.Slf4j;
import org.springframework.ui.Model;
import org.springframework.validation.BindException;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;

import java.util.Arrays;

@SuppressWarnings("all")
@RestControllerAdvice
@Slf4j
public class RestThrowableAdvice {

    @JsonResponseResult
    @ExceptionHandler(value = {BusinessException.class})
    public Object globalBusinessException(Model m, Exception e) {
        log.error(e.toString());
        return ((BusinessException) e).getResponseResultCode();
    }

    @JsonResponseResult
    @ExceptionHandler(value = {BindException.class})
    public Object globalBindException(Model m, Exception e) {
        log.error(e.toString());
        BindException error = (BindException) e;
        return Arrays
                .stream(error.getFieldError().getArguments())
                .filter(arg -&gt; arg instanceof ResponseResultCode)
                .findAny()
                .orElse(ResponseResultCode.UNKNOWN);
    }

    @JsonResponseResult
    @ExceptionHandler(value = {Throwable.class})
    public Object globalException(Model m, Exception e) {
        log.error(e.toString());
        return ResponseResultCode.UNKNOWN;
    }

}

</code></pre> 
<h4 id="%E2%91%A2%E3%80%81MD5Utils">③、MD5Utils</h4> 
<pre><code>package com.zxy.seckill.util;

import org.apache.commons.codec.digest.DigestUtils;
import org.springframework.stereotype.Component;

import java.util.UUID;

/**
 * MD5加密
 * 用户端：password=MD5(明文+固定Salt)
 * 服务端：password=MD5(用户输入+随机Salt)
 * 用户端MD5加密是为了防止用户密码在网络中明文传输，服务端MD5加密是为了提高密码安全性，双重保险。
 */
@Component
@SuppressWarnings("all")
public class MD5Utils {

    //加密盐，与前端一致
    private static String salt = "f1g2h3j4";

    /**
     * md5加密
     *
     * @param src
     * @return
     */
    public static String md5(String src) {
        return DigestUtils.md5Hex(src);
    }

    /**
     * 获取加密的盐
     *
     * @return
     */
    public static String createSalt() {
        return UUID.randomUUID().toString().replace("-", "");
    }

    /**
     * 将前端的明文密码通过MD5加密方式加密成后端服务所需密码
     * 注意：该步骤实际是在前端完成！！！
     *
     * @param inputPass 明文密码
     * @return
     */
    public static String inputPassToFormpass(String inputPass) {
        //混淆固定盐salt,安全性更可靠
        String str = salt.charAt(1) + "" + salt.charAt(5) + inputPass + salt.charAt(0) + "" + salt.charAt(3);
        return md5(str);
    }

    /**
     * 将后端密文密码+随机salt生成数据库的密码
     *
     * @param formPass
     * @param salt
     * @return
     */
    public static String formPassToDbPass(String formPass, String salt) {
        //混淆固定盐salt,安全性更可靠
        String str = salt.charAt(7) + "" + salt.charAt(9) + formPass + salt.charAt(1) + "" + salt.charAt(5);
        return md5(str);
    }

    /**
     * 将用户输入的密码转换成数据库的密码
     *
     * @param inputPass 明文密码
     * @param salt      盐
     * @return
     */
    public static String inputPassToDbPass(String inputPass, String salt) {
        String formPass = inputPassToFormpass(inputPass);
        String dbPass = formPassToDbPass(formPass, salt);
        return dbPass;
    }

    public static void main(String[] args) {
        String formPass = inputPassToFormpass("123456");
        System.out.println("前端加密密码：" + formPass);
        String salt = createSalt();
        System.out.println("后端加密随机盐：" + salt);
        String dbPass = formPassToDbPass(formPass, salt);
        System.out.println("后端加密密码：" + dbPass);
        String dbPass1 = inputPassToDbPass("123456", salt);
        System.out.println("最终加密密码：" + dbPass1);
    }
}
</code></pre> 
<h4 id="ValidatorUtils%20%3A">ValidatorUtils :</h4> 
<pre><code>package com.zxy.seckill.util;

import org.apache.commons.lang3.StringUtils;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

@SuppressWarnings("all")
public class ValidatorUtils {

    private static final Pattern mobile_pattern = Pattern.compile("[1]([0-9])[0-9]{9}$");

    public static boolean isMobile(String mobile) {
        if (StringUtils.isEmpty(mobile)) {
            return false;
        }
        Matcher matcher = mobile_pattern.matcher(mobile);
        return matcher.matches();
    }

}
</code></pre> 
<h3 id="2%E3%80%81%E6%96%B0%E5%BB%BAvo%E7%B1%BB">2、新建vo类</h3> 
<p><strong>用于前后端传值：</strong></p> 
<pre><code>package com.zxy.seckill.vo;

import lombok.Data;

@Data
public class UserVo {
    
//    手机号
    private  String mobine;
//    密码
    private  String password;


}
</code></pre> 
<h3 id="3%E3%80%81%E7%99%BB%E5%BD%95%E6%96%B9%E6%B3%95%EF%BC%9A">3、登录方法：</h3> 
<h4 id="IUserService%E5%B1%82%EF%BC%9A"><a name="t25"></a>IUserService层：</h4> 
<pre><code>package com.zxy.seckill.service;

import com.zxy.seckill.pojo.User;
import com.baomidou.mybatisplus.extension.service.IService;
import com.zxy.seckill.util.response.ResponseResult;
import com.zxy.seckill.vo.UserVo;

/**
 * &lt;p&gt;
 * 用户信息表 服务类
 * &lt;/p&gt;
 *
 * @author zxy
 * @since 2022-03-15
 */
public interface IUserService extends IService&lt;User&gt; {

    ResponseResult&lt;?&gt; findByAccount(UserVo uservo);
}
</code></pre> 
<h4 id="UserServiceImpl%E7%B1%BB%EF%BC%9A">UserServiceImpl类：</h4> 
<pre><code>package com.zxy.seckill.service.impl;

import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.zxy.seckill.pojo.User;
import com.zxy.seckill.mapper.UserMapper;
import com.zxy.seckill.service.IUserService;
import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import com.zxy.seckill.util.ValidatorUtils;
import com.zxy.seckill.util.response.ResponseResult;
import com.zxy.seckill.util.response.ResponseResultCode;
import com.zxy.seckill.vo.UserVo;
import org.apache.commons.lang3.StringUtils;
import org.springframework.stereotype.Service;

/**
 * &lt;p&gt;
 * 用户信息表 服务实现类
 * &lt;/p&gt;
 *
 * @author zxy
 * @since 2022-03-15
 */
@Service
public class UserServiceImpl extends ServiceImpl&lt;UserMapper, User&gt; implements IUserService {

    @Override
    public ResponseResult&lt;?&gt; findByAccount(UserVo userVo) {
//        先判断信息是否符合（账号是否是手机号码，密码是不是空）
//        .getMobine()拿到手机号
        if(!ValidatorUtils.isMobile(userVo.getMobine())){
            return ResponseResult.failure(ResponseResultCode.USER_ACCOUNT_NOT_MOBLIE);
        }
        if(!StringUtils.isBlank(userVo.getPassword())){
            return ResponseResult.failure(ResponseResultCode.USER_PASSWORD_NOT_MATCH);
        }
//         再去数据库查出对应的用户（mobile）
        User user=this.getOne(new QueryWrapper&lt;User&gt;().eq("id",userVo.getMobine()));
        if(user==null){
            return ResponseResult.failure(ResponseResultCode.USER_ACCOUNT_NOT_FIND);
        }
//        比较密码
        if(userVo.getPassword().equals(user.getPassword())){
            return ResponseResult.failure(ResponseResultCode.USER_PASSWORD_NOT_MATCH);
        }
        return ResponseResult.success();
    }
}</code></pre> 
<h4 id="UserController%E7%B1%BB%EF%BC%9A">UserController类：</h4> 
<pre><code>package com.zxy.seckill.controller;

import com.zxy.seckill.service.IUserService;
import com.zxy.seckill.util.response.ResponseResult;
import com.zxy.seckill.vo.UserVo;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * &lt;p&gt;
 * 用户信息表 前端控制器
 * &lt;/p&gt;
 *
 * @author zxy
 * @since 2022-03-15
 */
@RestController
@RequestMapping("/user")
public class UserController {

    @Autowired
    private IUserService userService;

    //    用户登录
    @RequestMapping("/login")
    public ResponseResult&lt;?&gt; login(UserVo userVo){
//     调用service的登录验证
        return userService.findByAccount(userVo);
    }

}</code></pre> 
<p><strong>得到密钥，登录成功： </strong><img alt="" height="612" src="https://images2.imgbox.com/ba/21/5EcmE0bU_o.png" width="1200"></p> 
<p><img alt="" height="638" src="https://images2.imgbox.com/10/5a/PSYcbxcn_o.png" width="1200"></p> 
<h2 id="%E4%B8%83%E3%80%81%20%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E6%8A%93%E8%8E%B7">七、 全局异常抓获</h2> 
<h4 id="1%E3%80%81%E7%BB%99%E5%AE%9E%E4%BD%93%E7%B1%BBuserVo%E5%8A%A0%E5%85%A5%E6%B3%A8%E8%A7%A3"><a name="t32"></a>1、给实体类userVo加入注解</h4> 
<pre><code>package com.zxy.seckill.vo;

import com.zxy.seckill.util.response.ResponseResultCode;
import com.zxy.seckill.util.validate.IsMobile;
import com.zxy.seckill.util.validate.IsRequired;
import lombok.Data;

import javax.validation.constraints.NotEmpty;

@Data
public class UserVo {

    //    手机号
    @IsMobile(code = ResponseResultCode.USER_ACCOUNT_NOT_FIND)
    private String mobile;
    //    密码
    @IsRequired(code = ResponseResultCode.USER_CREDENTIAL_NOT_BE_EMPTY)
    private String password;


}</code></pre> 
<h3 id="2%E3%80%81%E5%AF%BC%E5%85%A5%E5%B8%AE%E5%8A%A9%E5%8C%85validate%EF%BC%8C%E5%BC%82%E5%B8%B8%E6%8A%93%E8%8E%B7">2、导入帮助包validate，异常抓获</h3> 
<h4 id="IsMobile%EF%BC%9A"><a name="t34"></a>IsMobile：</h4> 
<pre><code>package com.zxy.seckill.util.validate;


import com.zxy.seckill.util.response.ResponseResultCode;

import javax.validation.Constraint;
import javax.validation.Payload;
import java.lang.annotation.*;

@SuppressWarnings("all")
@Documented
@Constraint(
        validatedBy = {IsMobileValidator.class}
)
@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
public @interface IsMobile {

    ResponseResultCode code() default ResponseResultCode.UNKNOWN;

    String message() default "";

    Class&lt;?&gt;[] groups() default {};

    Class&lt;? extends Payload&gt;[] payload() default {};

}
</code></pre> 
<h4 id="IsMobileValidator%EF%BC%9A">IsMobileValidator：</h4> 
<pre><code>package com.zxy.seckill.util.validate;


import com.zxy.seckill.util.ValidatorUtils;

import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

@SuppressWarnings("all")
public class IsMobileValidator implements ConstraintValidator&lt;IsMobile, String&gt; {

    @Override
    public boolean isValid(String mobile, ConstraintValidatorContext context) {
        return ValidatorUtils.isMobile(mobile);
    }

}
</code></pre> 
<h4 id="IsRequired%EF%BC%9A">IsRequired：</h4> 
<pre><code>package com.zxy.seckill.util.validate;


import com.zxy.seckill.util.response.ResponseResultCode;

import javax.validation.Constraint;
import javax.validation.Payload;
import java.lang.annotation.*;

@SuppressWarnings("all")
@Documented
@Constraint(
        validatedBy = {IsRequiredValidator.class}
)
@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
public @interface IsRequired {

    ResponseResultCode code() default ResponseResultCode.UNKNOWN;

    String message() default "";

    Class&lt;?&gt;[] groups() default {};

    Class&lt;? extends Payload&gt;[] payload() default {};

}
</code></pre> 
<h4 id="IsRequiredValidator%EF%BC%9A">IsRequiredValidator：</h4> 
<pre><code>package com.zxy.seckill.util.validate;

import lombok.extern.slf4j.Slf4j;
import org.apache.commons.lang3.StringUtils;

import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

@SuppressWarnings("all")
@Slf4j
public class IsRequiredValidator implements ConstraintValidator&lt;IsRequired, String&gt; {

    @Override
    public boolean isValid(String str, ConstraintValidatorContext context) {
        return StringUtils.isNotBlank(str);
    }

}
</code></pre> 
<h4 id="ThrowableAdvice%EF%BC%9A">ThrowableAdvice：</h4> 
<pre><code>package com.zxy.seckill.util.response;

import com.zxy.seckill.exception.BusinessException;
import lombok.extern.slf4j.Slf4j;
import org.springframework.ui.Model;
import org.springframework.validation.BindException;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;

@SuppressWarnings("all")
@RestControllerAdvice
@Slf4j
public class ThrowableAdvice {

    @JsonResponseResult
    @ExceptionHandler(value = {BusinessException.class})
    public ResponseResultCode globalBusinessException(Model m, Exception e) {
        log.error(e.toString());
        return ((BusinessException) e).getResponseResultCode();
    }

    @JsonResponseResult
    @ExceptionHandler(value = {BindException.class})
    public ResponseResultCode globalBindException(Model m, Exception e) {
        log.error(e.toString());
        BindException error = (BindException) e;
        return (ResponseResultCode) error.getFieldError().getArguments()[1];
    }

    @JsonResponseResult
    @ExceptionHandler(value = {Throwable.class})
    public ResponseResultCode globalException(Model m, Exception e) {
        log.error(e.toString());
        return ResponseResultCode.UNKNOWN;
    }

}

</code></pre> 
<h4 id="3%E3%80%81%E5%9C%A8UserController%E7%B1%BB%E6%96%B9%E6%B3%95%E4%B8%AD%E5%8A%A0%E5%85%A5%E6%B3%A8%E8%A7%A3">3、在UserController类方法中加入注解</h4> 
<p><strong>开启jsr303验证</strong></p> 
<pre><code>@Valid</code></pre> 
<p><img alt="" height="355" src="https://images2.imgbox.com/86/ba/4yjZkfzi_o.png" width="1003"></p> 
<h4 id="4%E3%80%81%E5%AE%9E%E7%8E%B0%E7%B1%BB%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"><strong>4、实现类抛出异常</strong></h4> 
<blockquote> 
 <pre>package com.zxy.seckill.service.impl;

import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper;
import com.zxy.seckill.exception.BusinessException;
import com.zxy.seckill.pojo.User;
import com.zxy.seckill.mapper.UserMapper;
import com.zxy.seckill.service.IUserService;
import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import com.zxy.seckill.util.MD5Utils;
import com.zxy.seckill.util.ValidatorUtils;
import com.zxy.seckill.util.response.ResponseResult;
import com.zxy.seckill.util.response.ResponseResultCode;
import com.zxy.seckill.vo.UserVo;
import org.apache.commons.lang3.StringUtils;
import org.springframework.stereotype.Service;

import java.util.Date;

/**
 * &lt;p&gt;
 * 用户信息表 服务实现类
 * &lt;/p&gt;
 *
 * @author zxy
 * @since 2022-03-15
 */
@Service
public class UserServiceImpl extends ServiceImpl&lt;UserMapper, User&gt; implements IUserService {

    @Override
    public ResponseResult&lt;?&gt; findByAccount(UserVo userVo) {
//        先判断信息是否符合（账号是否是手机号码，密码是不是空）
        if(!ValidatorUtils.isMobile(userVo.getMobile())){
            throw new BusinessException(ResponseResultCode.USER_ACCOUNT_NOT_MOBLIE);
        }
        if(StringUtils.isBlank(userVo.getPassword())){
            throw new BusinessException(ResponseResultCode.USER_PASSWORD_NOT_MATCH);
        }
//         再去数据库查出对应的用户（mobile）
        User user=this.getOne(new QueryWrapper&lt;User&gt;().eq("id",userVo.getMobile()));
        if(user==null){
            throw new BusinessException(ResponseResultCode.USER_ACCOUNT_NOT_FIND);
        }
//        比较密码
//        二重加密（前端-&gt;后端，后端-&gt;数据库）
        String salt=user.getSalt();
//        将前台的加密密码和后端的盐再次进行加密
        String newPassword=MD5Utils.formPassToDbPass(userVo.getPassword(),salt);
        if(!newPassword.equals(user.getPassword())){
            throw new BusinessException(ResponseResultCode.USER_PASSWORD_NOT_MATCH);
        }
<strong>//        修改最后的登录时间
        this.update(new UpdateWrapper&lt;User&gt;().eq("id",userVo.getMobile()).set("last_login_date",new Date()).setSql("login_count=login_count+1"));
        return ResponseResult.success();
    }</strong>
}
</pre> 
</blockquote> 
<p><strong>密码错误时不会报错：</strong></p> 
<p><img alt="" height="658" src="https://images2.imgbox.com/e2/32/sjWVpFXM_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<p></p> 
<p><br>  </p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5975ef1772338dbebcabc9c1231ed416/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【关于VMware安装后没有虚拟网卡VMnet1和VMnet8】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/852f34d3704928bde1770d2a16495690/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【计算机视觉】使用GrabCut算法進行前景檢測</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>