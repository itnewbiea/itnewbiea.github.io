<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43;死磕基础之指针篇(三)--对象指针的创建以及使用 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C&#43;&#43;死磕基础之指针篇(三)--对象指针的创建以及使用" />
<meta property="og:description" content="在上一篇文章中已经介绍了C&#43;&#43;对象指针的概念，本篇文章主要讲解对象指针的两种创建方式
C&#43;&#43;对象指针简介:C&#43;&#43;对象指针
一.定义对象的指针，对象指针指向类的实例化对象的地址 先来看一个示例:
Test1.h
#ifndef TEST1_H #define TEST1_H class Student{ public: Student(){} int getNum(); int getScore(); void print()const; int num; int score; }; #endif Test1.cpp
#include&lt;stdio.h&gt; #include&lt;iostream&gt; using namespace std; #include&#34;Test1.h&#34; int Student::getNum(){ return num; } int Student::getScore(){ return score; } void Student::print() const { cout&lt;&lt;&#34;学号:&#34;&lt;&lt;num&lt;&lt;&#34;,&#34;&lt;&lt;&#34;分数:&#34;&lt;&lt;score&lt;&lt;endl; } int main(){ Student std1; Student* ptrstu=&amp;std1; ptrstu-&gt;num=2; ptrstu-&gt;score=100; ptrstu-&gt;print(); return 0; } 结果:
分析:
首先在h文件中定义了Student类以及声明了类的成员函数，在cpp中定义成员函数。
1.在main函数中创建了Student类的对象std1
2.定义对象指针ptrstu //Student* ptrstu=&amp;std1;
3.对象指针指向类的对象的地址 //Student* ptrstu=&amp;std1;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e052dd3f5f79c82e1a58dadc5bfd0327/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-29T23:11:44+08:00" />
<meta property="article:modified_time" content="2020-11-29T23:11:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43;死磕基础之指针篇(三)--对象指针的创建以及使用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>在上一篇文章中已经介绍了C++对象指针的概念，本篇文章主要讲解对象指针的两种创建方式</p> 
<blockquote> 
 <p>C++对象指针简介:<a href="https://blog.csdn.net/baidu_41191295/article/details/110100223">C++对象指针</a></p> 
</blockquote> 
<h2><a id="_2"></a>一.定义对象的指针，对象指针指向类的实例化对象的地址</h2> 
<p>先来看一个示例:<br> Test1.h</p> 
<pre><code>#ifndef TEST1_H
#define TEST1_H
class Student{
public:
	Student(){}
	int getNum();
	int getScore();
	void print()const;
	int num;
	int score;
};


#endif
</code></pre> 
<p>Test1.cpp</p> 
<pre><code>#include&lt;stdio.h&gt;
#include&lt;iostream&gt;
using namespace std;
#include"Test1.h"

int Student::getNum(){
	return num;
}
int Student::getScore(){
	return score;
}


void Student::print() const
{
	cout&lt;&lt;"学号:"&lt;&lt;num&lt;&lt;","&lt;&lt;"分数:"&lt;&lt;score&lt;&lt;endl;
}

int main(){
	Student std1;
	Student* ptrstu=&amp;std1;
	ptrstu-&gt;num=2;
	ptrstu-&gt;score=100;
	ptrstu-&gt;print();
	return 0;
}
</code></pre> 
<p>结果:<img src="https://images2.imgbox.com/08/77/3kPmtG7J_o.png" alt="在这里插入图片描述"></p> 
<p>分析:<br> 首先在h文件中定义了Student类以及声明了类的成员函数，在cpp中定义成员函数。<br> 1.在main函数中创建了Student<strong>类的对象std1</strong><br> 2.定义<strong>对象指针ptrstu</strong> //Student* ptrstu=&amp;std1;<br> 3.对象指针指向类的对象的地址 //Student* ptrstu=&amp;std1;<br> 4.访问类的对象中的成员变量</p> 
<p>这是第一种方式，通过定义<strong>对象指针指向类的实例化对象的地址</strong></p> 
<h2><a id="new_63"></a>二.定义对象的指针，且指针对象是类的实例化，通过new关键字实现</h2> 
<p>将上面的例子修改main函数中的内容即可实现</p> 
<pre><code>int main(){
	Student* ptrstu=new Student;
	ptrstu-&gt;num=3;
	ptrstu-&gt;score=99;
	ptrstu-&gt;print();
	delete ptrstu;
	return 0;
}
</code></pre> 
<p>结果:<br> <img src="https://images2.imgbox.com/c3/e8/4ots1WUc_o.png" alt="在这里插入图片描述"><br> 分析:<br> 此方法直接定义<strong>类的实例化的指针对象</strong>，且这个实例化的指针对象可以访问类的所有数据成员。</p> 
<h2><a id="_80"></a>三.两种创建对象指针方式的区别</h2> 
<p>1.第一种创建指针对象是在<strong>栈</strong>上面分配内存，通过“<strong>&amp;</strong>”可以获取<strong>地址</strong>，对象使用完后会<strong>自动回收</strong>。</p> 
<p>2.第二种创建对象指针是在<strong>堆</strong>上面创建并分配内存空间的，用完<strong>不会自动回收</strong>，需要手动使用<strong>delete关键字</strong>回收。</p> 
<p>3.在栈上创建出来的对象都有一个名字，比如std1，使用指针并不一定要指向它。</p> 
<p>4.在堆上分配内存，使用new创建出来的对象，没有名字，只能得到一个指向它的指针，所以必须使用一个指针变量来接收这个指针，否则以后再也无法找到这个对象，即，使用new在堆上创建的对象是匿名的，没法直接使用，必须要有一个指针指向它，再借助指针来访问它的成员函数或成员变量。</p> 
<p>5.栈内存是程序自动管理，不能使用delete删除在栈上创建的对象，堆内存由程序员管理，对象使用完毕后可以通过delete删除，实际开发中，new和delete是成对出现的，保证及时删除不再使用的对象，防止无用内存堆积，我们一般可以在析构函数中使用delete删除对象指针。</p> 
<h2><a id="_92"></a>四.实例演示—在一个类中通过另一个类的对象指针，访问另一个类的成员函数</h2> 
<p>通过以上的讲解，大家都能够理解了对象指针的作用，那么，现在实例演示开发中常见的方法–在一个类中，通过对象指针访问另一个类的成员变量</p> 
<p>示例:<br> Test1.h</p> 
<pre><code>#ifndef TEST1_H
#define TEST1_H
#include "Test2.h"
class Student{
public:
	Student(){}
	Teacher* t;
	void getTeacher();
	~Student();
};


#endif
</code></pre> 
<p>Test2.h</p> 
<pre><code>#ifndef TEST2_H
#define TEST2_H
class Teacher{
public:
	Teacher(){}
	int getStudentNum( int count);
	~Teacher();
};


#endif
</code></pre> 
<p>Test2.cpp</p> 
<pre><code>#include&lt;stdio.h&gt;
#include&lt;iostream&gt;
using namespace std;
#include"Test2.h"
int Teacher::getStudentNum(int number){
	return number;
}
Teacher::~Teacher()
{
}
</code></pre> 
<p>Test1.cpp</p> 
<pre><code>#include&lt;stdio.h&gt;
#include&lt;iostream&gt;
using namespace std;
//#include"Test2.h"
#include"Test1.h"

Student::~Student(){
	delete t;
}
void Student::getTeacher(){
	t=new Teacher;
	t-&gt;getStudentNum(50);
	cout&lt;&lt;t-&gt;getStudentNum(50)&lt;&lt;endl;
}

int main(Student* pstr){
	pstr=new Student;
	pstr-&gt;getTeacher();
	delete pstr;
	return 0;
}
</code></pre> 
<p>结果:<br> <img src="https://images2.imgbox.com/cc/09/I3nUziBD_o.png" alt="在这里插入图片描述"></p> 
<p>要求:在Student类中通过getTeacher()方法访问Teacher类中的getStudentNum()方法。</p> 
<p>首先一步步讲解:<br> 1.在Test1.h中定义Student类，声明类中的方法以及变量的定义。//这里类中的方法为getTeacher()为了获取Teacher类中的方法所定义的函数，Teacher* t;为在Student类中声明Teacher类的指针。</p> 
<p>2.在Test2.h中定义Teacher类，声明类中的方法为getStudentNum()。</p> 
<p>3.在Test2.cpp中定义getStudentNum()方法为返回学生数量。</p> 
<p>4.在Test1.cpp中定义getTeacher()方法，其中创建了Teacher类的<strong>对象指针t</strong>，通过new创建，t=new Teacher;</p> 
<p>5.通过此对象指针可以获取Teacher类中的方法getStudentNum()。</p> 
<p>6.在Test1.cpp中定义Student类的析构函数~Student()，为了在对象使用完后删除Teacher类的<strong>对象指针</strong></p> 
<p>7.创建Student的对象指针pstr，可以使用以上两种方法，如果使用new创建，最后要使用delete删除对象指针。</p> 
<p><strong>综上:此实例实现了在Student类中使用Teacher类的对象指针，访问Teacher类的成员函数。</strong></p> 
<h4><a id="___187"></a>本篇文章 对象指针的创建以及使用 就演示到这里。</h4>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ccda76514e2b8a146071b012a5fa2144/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python判断是否为数字符_Python判断字符串是否为数字</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0672e8df593f43549167e21b985a04f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">踩坑指南！import cv2出错怎么办？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>