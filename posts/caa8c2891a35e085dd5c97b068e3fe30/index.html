<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux--用户、组、权限 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux--用户、组、权限" />
<meta property="og:description" content="目录
系统用户文件
1、创建用户
2、修改用户权限
3、设置密码
4、删除用户
5、文件内容详解
6、查看用户ID
系统组文件
1、创建组
2、修改组
3、删除组
4、管理组成员
系统文件权限
系统文件权限属组
1、修改文件的属组
2、修改文件归属者
3、修改文件权限
4、文件acl
系统文件特殊权限
1、SetUID
2、SetGID
3、SBIT
🍤：好好复习，不整花里胡哨的了。
说到用户组权限，可以想像成windows操作系统一样，同样都是基于用户身份来控制对资源的访问，每个用户账户都有唯一的用户名与密码，只是个别细节方面存在一些差异。
系统用户文件 系统文件路径：
/etc/passwd 用户信息文件
/etc/shadow 用户密码文件
1、创建用户 格式如下：
useradd [选项] 用户名 -u 指定用户的uid
-g 指定用户的基本组
-G 指定附属组，可以有多个， 但是这些附属组必须是系统内已经存在的
-c 指定描述
-d 指定家目录
-M 不建立家目录
-s 指定shell
-e 指定用户过期时间， 日期
-f 指定用户过期时间， 天数
2、修改用户权限 针对已有用户修改属性（和创建用户相同），格式如下：
usermod [选项] 用户名 -u 指定用户的uid
-g 指定用户的基本组
-G 指定附属组，可以有多个， 但是这些附属组必须是系统内已经存在的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/caa8c2891a35e085dd5c97b068e3fe30/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-23T08:08:50+08:00" />
<meta property="article:modified_time" content="2022-08-23T08:08:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux--用户、组、权限</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p id="main-toc"><strong>目录</strong></p> 
 <p id="%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E6%96%87%E4%BB%B6-toc" style="margin-left:0px;"><a href="#%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E6%96%87%E4%BB%B6" rel="nofollow">系统用户文件</a></p> 
 <p id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7" rel="nofollow">1、创建用户</a></p> 
 <p id="2%E3%80%81%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90" rel="nofollow">2、修改用户权限</a></p> 
 <p id="3%E3%80%81%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81" rel="nofollow">3、设置密码</a></p> 
 <p id="4%E3%80%81%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7" rel="nofollow">4、删除用户</a></p> 
 <p id="5%E3%80%81%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E8%AF%A6%E8%A7%A3-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E8%AF%A6%E8%A7%A3" rel="nofollow">5、文件内容详解</a></p> 
 <p id="6%E3%80%81%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7ID-toc" style="margin-left:40px;"><a href="#6%E3%80%81%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7ID" rel="nofollow">6、查看用户ID</a></p> 
 <p id="%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%96%87%E4%BB%B6-toc" style="margin-left:0px;"><a href="#%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%96%87%E4%BB%B6" rel="nofollow">系统组文件</a></p> 
 <p id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%BB%84-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E7%BB%84" rel="nofollow">1、创建组</a></p> 
 <p id="2%E3%80%81%E4%BF%AE%E6%94%B9%E7%BB%84-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E4%BF%AE%E6%94%B9%E7%BB%84" rel="nofollow">2、修改组</a></p> 
 <p id="3%E3%80%81%E5%88%A0%E9%99%A4%E7%BB%84-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E5%88%A0%E9%99%A4%E7%BB%84" rel="nofollow">3、删除组</a></p> 
 <p id="4%E3%80%81%E7%AE%A1%E7%90%86%E7%BB%84%E6%88%90%E5%91%98-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E7%AE%A1%E7%90%86%E7%BB%84%E6%88%90%E5%91%98" rel="nofollow">4、管理组成员</a></p> 
 <p id="%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90-toc" style="margin-left:0px;"><a href="#%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90" rel="nofollow">系统文件权限</a></p> 
 <p id="%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%B1%9E%E7%BB%84-toc" style="margin-left:0px;"><a href="#%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%B1%9E%E7%BB%84" rel="nofollow">系统文件权限属组</a></p> 
 <p id="1%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E7%9A%84%E5%B1%9E%E7%BB%84-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E7%9A%84%E5%B1%9E%E7%BB%84" rel="nofollow">1、修改文件的属组</a></p> 
 <p id="2%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%BD%92%E5%B1%9E%E8%80%85-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%BD%92%E5%B1%9E%E8%80%85" rel="nofollow">2、修改文件归属者</a></p> 
 <p id="3%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90" rel="nofollow">3、修改文件权限</a></p> 
 <p id="4%E3%80%81%E6%96%87%E4%BB%B6acl-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E6%96%87%E4%BB%B6acl" rel="nofollow">4、文件acl</a></p> 
 <p id="%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90-toc" style="margin-left:0px;"><a href="#%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90" rel="nofollow">系统文件特殊权限</a></p> 
 <p id="1%E3%80%81SetUID-toc" style="margin-left:40px;"><a href="#1%E3%80%81SetUID" rel="nofollow">1、SetUID</a></p> 
 <p id="2%E3%80%81SetGID-toc" style="margin-left:40px;"><a href="#2%E3%80%81SetGID" rel="nofollow">2、SetGID</a></p> 
 <p id="3%E3%80%81SBIT-toc" style="margin-left:40px;"><a href="#3%E3%80%81SBIT" rel="nofollow">3、SBIT</a></p> 
 <hr id="hr-toc"> 
 <p>        🍤：好好复习，不整花里胡哨的了。</p> 
</blockquote> 
<p>        说到用户组权限，可以想像成windows操作系统一样，同样都是基于用户身份来控制对资源的访问，每个用户账户都有唯一的用户名与密码，只是个别细节方面存在一些差异。</p> 
<h2 id="%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E6%96%87%E4%BB%B6">系统用户文件</h2> 
<p>系统文件路径：</p> 
<p>        /etc/passwd 用户信息文件</p> 
<p>        /etc/shadow 用户密码文件</p> 
<h3 id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7">1、创建用户</h3> 
<p>格式如下：</p> 
<pre><code>useradd        [选项]        用户名</code></pre> 
<blockquote> 
 <p>-u 指定用户的uid</p> 
 <p>-g 指定用户的基本组</p> 
 <p>-G 指定附属组，可以有多个， 但是这些附属组必须是系统内已经存在的</p> 
 <p>-c 指定描述</p> 
 <p>-d 指定家目录</p> 
 <p>-M 不建立家目录</p> 
 <p>-s 指定shell</p> 
 <p>-e 指定用户过期时间， 日期</p> 
 <p>-f 指定用户过期时间， 天数</p> 
</blockquote> 
<h3 id="2%E3%80%81%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90">2、修改用户权限</h3> 
<p>针对已有用户修改属性（和创建用户相同），格式如下：</p> 
<pre><code>usermod     [选项]     用户名</code></pre> 
<blockquote> 
 <p>-u 指定用户的uid</p> 
 <p>-g 指定用户的基本组</p> 
 <p>-G 指定附属组，可以有多个， 但是这些附属组必须是系统内已经存在的</p> 
 <p>-c 指定描述</p> 
 <p>-d 指定家目录</p> 
 <p>-M 不建立家目录</p> 
 <p>-s 指定shell</p> 
 <p>-e 指定用户过期时间， 日期</p> 
 <p>-f 指定用户过期时间， 天数</p> 
</blockquote> 
<h3 id="3%E3%80%81%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81">3、设置密码</h3> 
<p>格式如下：</p> 
<pre><code>passwd     [选项]     用户名</code></pre> 
<p>选项如下： </p> 
<blockquote> 
 <p>-l 锁定</p> 
 <p>-u 解锁</p> 
 <p>-d 清空</p> 
</blockquote> 
<p>例：无交互创建密码（适用于脚本）</p> 
<pre><code>echo "密码" | passwd --stdin 用户名</code></pre> 
<h3 id="4%E3%80%81%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7">4、删除用户</h3> 
<pre><code>userdel     [选项]     用户名</code></pre> 
<blockquote> 
 <p>-r 删除宿主目录 </p> 
</blockquote> 
<h3 id="5%E3%80%81%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E8%AF%A6%E8%A7%A3">5、文件内容详解</h3> 
<p>        以/etc/passwd用户信息文件、/etc/shadow用户密码文件为例，以“冒号”为分隔符。</p> 
<p>使用命令查看root用户</p> 
<pre><code>head -1 /etc/passwd
root：x:0:0:root:/root:/bin/bash 
用户名:密码占位符:UID:GID:描述信息:家目录:登录shell</code></pre> 
<p>使用命令查看zhangsan用户密码文件</p> 
<pre><code>tail -1 /etc/shadow 
zhangsan:1nPiR1mec91adasdasw222:18463:0:99999:7:::</code></pre> 
<blockquote> 
 <p>1）用户名</p> 
 <p>2）加密后的密码</p> 
 <p>3）上一次密码修改时间(单位是天，是距离1970年1月1日 多少天)</p> 
 <p>4）密码最小生存周期 单位：天 0表示随时可以修改密码；2表示两天内不能修改</p> 
 <p>5）密码最大生存周期 单位：天，密码使用的最长时间</p> 
 <p>6）密码到期前几天开始警告</p> 
 <p>7）密码过期之后到账户失效之前的时间限制 密码过期之后还可以用几天</p> 
 <p>8）账户过期时间</p> 
 <p>9）保留列</p> 
</blockquote> 
<h3 id="6%E3%80%81%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7ID">6、查看用户ID</h3> 
<pre><code>id  用户名</code></pre> 
<h2 id="%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%96%87%E4%BB%B6">系统组文件</h2> 
<p>与用户文件一样都是以冒号分隔。</p> 
<pre><code>head -1 /etc/group
root ：x：0：
组名:密码占位符:GID:用户列表</code></pre> 
<h3 id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%BB%84">1、创建组</h3> 
<p>格式如下：</p> 
<pre><code>groupadd    [选项]    组名
</code></pre> 
<p> 选项如下：</p> 
<blockquote> 
 <p>-g  指定gid</p> 
</blockquote> 
<h3 id="2%E3%80%81%E4%BF%AE%E6%94%B9%E7%BB%84">2、修改组</h3> 
<p>格式如下：</p> 
<pre><code>groupmod    [选项]    组名</code></pre> 
<h3 id="3%E3%80%81%E5%88%A0%E9%99%A4%E7%BB%84">3、删除组</h3> 
<p>格式如下：</p> 
<pre><code>groupdel    组名</code></pre> 
<h3 id="4%E3%80%81%E7%AE%A1%E7%90%86%E7%BB%84%E6%88%90%E5%91%98">4、管理组成员</h3> 
<p>添加成员到组</p> 
<pre><code>gpasswd -a  用户名 组名</code></pre> 
<p>删除组内成员</p> 
<pre><code>gpasswd -d  用户名 组名</code></pre> 
<p>批量添加成员到组</p> 
<pre><code>gpasswd -M  用户1,用户2 组名</code></pre> 
<h2 id="%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90">系统文件权限</h2> 
<p>文件权限可用数字表示</p> 
<table><thead><tr><th>可读</th><th>可写</th><th>可执行</th></tr></thead><tbody><tr><td>r</td><td>w</td><td>x</td></tr><tr><td>4</td><td>2</td><td>1</td></tr></tbody></table> 
<blockquote> 
 <p>[root@localhost ~]# ll test.txt</p> 
 <p>-rw-r--r--. 1 root root 0 8月 21 18:27 test.txt</p> 
 <p></p> 
 <p>第一栏代表这个文件的类型与权限 。</p> 
 <p>     第一个字符代表这个文件是“目录、文件或链接文件等等”：</p> 
 <p>        [ d ]则是目录，例如上表文件名为“.config”的那一行；</p> 
 <p>        [ - ]则是文件，例如上表文件名为“initial-setup-ks.cfg”那一行；</p> 
 <p>        [ l ]则表示为链接文件（link file）；</p> 
 <p>        [ b ]则表示为设备文件里面的可供储存的周边设备（可随机存取设备）；</p> 
 <p>        [ c ]则表示为设备文件里面的序列埠设备，例如键盘、鼠标（一次性读取设备） 。</p> 
 <p>     接下来的rwx权限字符，以三个为一组：</p> 
 <p>        第一组为“文件拥有者可具备的权限”；</p> 
 <p>        第二组为“加入此群组之帐号的权限”；</p> 
 <p>        第三组为“非本人且没有加入本群组之其他帐号的权限。</p> 
 <p>第二栏表示有多少文件名链接到此节点。</p> 
 <p>第三栏表示这个文件（或目录）的“拥有者账号”。</p> 
 <p>第四栏表示这个文件的所属群组。</p> 
 <p>第五栏表示这个文件的容量大小，默认单位是Bytes（字节）。</p> 
 <p>第六栏表示这个文件的创建日期或者是最近修改日期。</p> 
 <p>第七栏为这个文件的文件名。</p> 
</blockquote> 
<h2 id="%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%B1%9E%E7%BB%84">系统文件权限属组</h2> 
<h3 id="1%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E7%9A%84%E5%B1%9E%E7%BB%84">1、修改文件的属组</h3> 
<pre><code>chgrp   组名  文件或目录名</code></pre> 
<h3 id="2%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%BD%92%E5%B1%9E%E8%80%85">2、修改文件归属者</h3> 
<p>        下面命令可以只设置属主也可以同时设置属组。</p> 
<p>格式如下：</p> 
<pre><code>chown   属主[:[属组]]   文件或目录名</code></pre> 
<p>        例：如果只想设置属组可以执行下面命令（单独设置属主就不需要加冒号了）。</p> 
<pre><code>chown :属组   文件或目录名</code></pre> 
<h3 id="3%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90">3、修改文件权限</h3> 
<p>格式如下：</p> 
<pre><code>chmod   [ugoa][+-=][rwx]    文件或目录</code></pre> 
<p>        例1：设置文件属主拥有全部权限，属组可读，其他人没有任何权限。</p> 
<pre><code>[root@localhost ~]# chmod 740 test.txt 
[root@localhost ~]# ll -d test.txt
-rwxr-----. 1 root root 0 8月  21 18:27 test.txt</code></pre> 
<p>        例2：根据例1的权限，同组成员添加可执行权限。</p> 
<pre><code>[root@localhost ~]# chmod g+x test.txt
[root@localhost ~]# ll -d test.txt
-rwxr-x---. 1 root root 0 8月  21 18:27 test.txt</code></pre> 
<h3 id="4%E3%80%81%E6%96%87%E4%BB%B6acl">4、文件acl</h3> 
<p>（1）查看acl</p> 
<pre><code>getfacl     文件名</code></pre> 
<p>（2）设置acl</p> 
<p>格式如下：</p> 
<pre><code>setfacl     [选项]     文件名</code></pre> 
<p>选项如下：</p> 
<blockquote> 
 <p>-m u:用户名:rwx 文件名                 单独赋予zhangsan权限</p> 
 <p>-x u:用户名                                     删除acl条目</p> 
 <p>-b 清空acl</p> 
</blockquote> 
<p>（3）查看文件隐藏文件</p> 
<pre><code>lsattr     [文件名]</code></pre> 
<p>（4）更改文件隐藏权限</p> 
<p>格式如下：</p> 
<pre><code>chattr     [选项]     文件名</code></pre> 
<p>选项如下：</p> 
<blockquote> 
 <p>+i 锁定文件</p> 
 <p>+a 设置文件仅追加</p> 
</blockquote> 
<h2 id="%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90">系统文件特殊权限</h2> 
<h3 id="1%E3%80%81SetUID">1、SetUID</h3> 
<p>        当一个具有执行权限的文件设置SetUID权限后，用户执行这个文件时将以文件所有者的身份执行。</p> 
<p>        权限数字为4644——前面的4代表suid，后面表示用户组其他人权限。</p> 
<p>格式如下：</p> 
<pre><code>ls -l /usr/bin/passwd
chmod u-s /usr/bin/passwd   去除s权限
chmod u+s /usr/bin/passwd   添加s权限</code></pre> 
<h3 id="2%E3%80%81SetGID">2、SetGID</h3> 
<p>        基本与SetUID相同，GID为设置所属组的特殊权限，可针对目录设置。</p> 
<p>        权限数字为2644——前面的2代表guid，后面表示用户组其他人权限。</p> 
<p>格式如下：</p> 
<pre><code>ls -l /usr/bin/passwdls -l /usr/bin/locate
chmod g-s /usr/bin/locate   去除g权限
chmod g+s /usr/bin/locate   添加g权限</code></pre> 
<h3 id="3%E3%80%81SBIT">3、SBIT</h3> 
<p>        粘滞位：只对目录有效，用户不能删除不属于自己的文件。</p> 
<p>        权限数字为1755——前面的1代表sbit，后面表示用户组其他人权限。</p> 
<p>格式如下：</p> 
<pre><code>chmod   [ugo]+t /目录</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/aff569361fc6cf253b00b41507e41726/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CSS伪类选择器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/63e6dab4241371af4ad223e48781a373/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mysql存储过程批量修改数据库中的表</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>