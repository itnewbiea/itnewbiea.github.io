<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32的以太网外设&#43;PHY（LAN8720）使用详解（2）：硬件设计 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32的以太网外设&#43;PHY（LAN8720）使用详解（2）：硬件设计" />
<meta property="og:description" content="0 工具准备 1.野火 stm32f407霸天虎开发板 2.LAN8720数据手册 3.STM32F4xx中文参考手册 1 PHY（LAN8720）硬件配置 1.1 硬件配置引脚说明 在LAN8720上电或复位时会读取一些特定引脚的电平，根据电平来进行硬件配置。LAN8720的引脚分布如下：
注意，LAN8720有些引脚内部自带上/下拉，定义如下：
1.1.1 PHY地址配置 LAN8720的PHYAD[0]用来配置PHY地址的bit0，当接入了多个PHY时可以用来区分不同的PHY。该引脚自带内部下拉，同时我们也只用到了一片LAN8720，因此悬空即可。
1.1.2 模式配置 这里的模式指的是传输速度（10Mbps/100Mbps）以及全/半双工，通常我们将MODE引脚都设置为1，MODE引脚内部自带上拉，因此MODE[2:0]引脚无需外加上拉电阻。也就是让LAN8720启用自动协商，它会自动寻找最优的工作方式。关于模式配置引脚说明如下：
MODE[2:0]是复用引脚，复用功能如下:
1.1.3 1.2V内部电压源配置 REGOFF引脚决定LAN8720选择外部还是内部1.2V电源，内部自带下拉电阻。当输入电平为低时选择内部1.2V电源，当输入电平为高时选择外部1.2V电源。这里我们选择内部1.2V电源，无需外加下拉电阻。
1.1.4 nINT/REFCLKO配置 当nINTSEL引脚电平为低时nINT/REFCLKO被设置为50MHz时钟输出，当nINTSEL引脚电平为高时nINT/REFCLKO被设置为中断信号输出（低电平有效）。该引脚内部自带上拉，我们通常使用LAN8720提供50MHz时钟，因此该引脚需要外部下拉。
2 PHY（LAN8720）和MCU连接 由于LAN8720仅支持RMII和SMI接口，因此PHY和MCU的连接就通过RMII和SMI接口实现。原理图设计如下：
这里将REGOFF和nINTSEL引脚下拉，也就是使用内部1.2V电源、REF_CLK输出50MHz时钟。RMII和SMI接口连线按照标准进行连接即可。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/666e91de1bf4fb61d8e3d0caba300288/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-22T20:07:49+08:00" />
<meta property="article:modified_time" content="2023-12-22T20:07:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32的以太网外设&#43;PHY（LAN8720）使用详解（2）：硬件设计</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="0__0"></a>0 工具准备</h2> 
<pre><code class="prism language-c"><span class="token number">1.</span>野火 stm32f407霸天虎开发板
<span class="token number">2.L</span>AN8720数据手册
<span class="token number">3.</span>STM32F4xx中文参考手册
</code></pre> 
<h2><a id="1_PHYLAN8720_7"></a>1 PHY（LAN8720）硬件配置</h2> 
<h2><a id="11__8"></a>1.1 硬件配置引脚说明</h2> 
<p>在LAN8720上电或复位时会读取一些特定引脚的电平，根据电平来进行硬件配置。LAN8720的引脚分布如下：<br> <img src="https://images2.imgbox.com/51/8a/2HStlReC_o.png" alt="在这里插入图片描述"><br> 注意，LAN8720有些引脚内部自带上/下拉，定义如下：<br> <img src="https://images2.imgbox.com/db/fb/t9bQDWUh_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="111_PHY_13"></a>1.1.1 PHY地址配置</h3> 
<p>LAN8720的PHYAD[0]用来配置PHY地址的bit0，当接入了多个PHY时可以用来区分不同的PHY。该引脚自带内部下拉，同时我们也只用到了一片LAN8720，因此悬空即可。</p> 
<h3><a id="112__15"></a>1.1.2 模式配置</h3> 
<p>这里的模式指的是传输速度（10Mbps/100Mbps）以及全/半双工，通常我们将MODE引脚都设置为1，MODE引脚内部自带上拉，因此MODE[2:0]引脚无需外加上拉电阻。也就是让LAN8720启用自动协商，它会自动寻找最优的工作方式。关于模式配置引脚说明如下：<br> <img src="https://images2.imgbox.com/70/65/dzacd6jF_o.png" alt="在这里插入图片描述"><br> MODE[2:0]是复用引脚，复用功能如下:<br> <img src="https://images2.imgbox.com/28/ed/yftpJIQv_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="113_12V_20"></a>1.1.3 1.2V内部电压源配置</h3> 
<p>REGOFF引脚决定LAN8720选择外部还是内部1.2V电源，内部自带下拉电阻。当输入电平为低时选择内部1.2V电源，当输入电平为高时选择外部1.2V电源。这里我们选择内部1.2V电源，无需外加下拉电阻。</p> 
<h3><a id="114_nINTREFCLKO_22"></a>1.1.4 nINT/REFCLKO配置</h3> 
<p>当nINTSEL引脚电平为低时nINT/REFCLKO被设置为50MHz时钟输出，当nINTSEL引脚电平为高时nINT/REFCLKO被设置为中断信号输出（低电平有效）。该引脚内部自带上拉，我们通常使用LAN8720提供50MHz时钟，因此该引脚需要外部下拉。<br> <img src="https://images2.imgbox.com/a8/6f/177fpnaA_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2_PHYLAN8720MCU_25"></a>2 PHY（LAN8720）和MCU连接</h2> 
<p>由于LAN8720仅支持RMII和SMI接口，因此PHY和MCU的连接就通过RMII和SMI接口实现。原理图设计如下：<br> <img src="https://images2.imgbox.com/de/e3/XZrVIDn0_o.png" alt="在这里插入图片描述"><br> 这里将REGOFF和nINTSEL引脚下拉，也就是使用内部1.2V电源、REF_CLK输出50MHz时钟。RMII和SMI接口连线按照标准进行连接即可。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/12bf81b8ec4503504823fac58adb36db/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java中io流(文件流)的使用、资源加载笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e1b1b352a8e23055b3cea79315072d17/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">STM32的以太网外设&#43;PHY（LAN8720）使用详解（5）：MAC及DMA配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>