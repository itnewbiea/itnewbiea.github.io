<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>浏览器强缓存和协商缓存 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="浏览器强缓存和协商缓存" />
<meta property="og:description" content=" 强缓存是什么？
强缓存是利用 http 的返回头中的 Expires 或者 Cache-Control 两个字段来控制的，用来表示资源的缓存时间
Expires
缓存过期时间，用来指定资源到期的时间，是服务器端的具体的时间点。也就是说，Expires=max-age&#43;请求时间，需要和 Last modified 结合使用。但它的优先级比Cache-Control 低。
Expires 是Web服务器响应消息的头字段，在响应的HTTP请求时告诉浏览器在过期时间前，浏览器可以直接从浏览器缓存取数据，而无需再次请求 Cache-Control
Cache-Control 是一个相对时间，例如 Cache-Control:3600，代表着资源的有效期是 3600秒。由于是相对时间，并且都是与客户端时间比较,所以服务器与客户端时间偏差也不会导致问题。 Cache-Control 与Expires 可以在服务端配置同时启用或者启用任意一个，同时启用的时候Cache-Control优先级高。
浏览器的缓存主要是为了提高访问效率，强制缓存，第一次访问一个网站的时候，里面的静态资源如图片、CSS、JS 、icon这些资源实际上是从服务器上下载的，刷新网页这个资源是没有必要在服务器上重新去请求的，像这样的资源，浏览器会默认是一些强制缓存，强制缓存当用户第二次访问的时候，它不会再服务器上重新下载资源了，同样返回200状态码，但这个资源会从浏览器的本地缓存里面去取，这种第二次取的缓存的状态就是一种强制缓存。 协商缓存是什么？
HTTP请求的状态码为 304
和后台去协商资源，要不要对它进行缓存；如果是第一次请求,返回状态码200,在响应头中返回cache-Control，用来控制缓存使用的时间 / 方式(私有缓存和共享缓存)，还会返回一个唯一标识 etag（可以理解为内容资源的一个hash或者一个唯一的标识）在第二次发起请求时,先查看 max-age， 如果过期了，在请求头设置 If-None-Match 等于刚刚 Etag的值,去后台对比,如果 etag 值相同，（或者对比Last Modified的一个时间）证明后端没更新,所以返回 304状态，浏览器接收到304状态之后，判断这个资源无变化，只需从本地把缓存的资源继续使用(也是协商缓存)。 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a765ffd20345176c0176f2fac833f3f8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-29T13:23:43+08:00" />
<meta property="article:modified_time" content="2023-12-29T13:23:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">浏览器强缓存和协商缓存</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>强缓存是什么？</strong><br> 强缓存是利用 http 的返回头中的 Expires 或者 Cache-Control 两个字段来控制的，用来表示资源的缓存时间</p> 
<blockquote> 
 <p><strong>Expires</strong></p> 
 <ul><li>缓存过期时间，用来指定资源到期的时间，是服务器端的具体的时间点。也就是说，Expires=max-age+请求时间，需要和 Last modified 结合使用。但它的优先级比Cache-Control 低。<br> Expires 是Web服务器响应消息的头字段，在响应的HTTP请求时告诉浏览器在过期时间前，浏览器可以直接从浏览器缓存取数据，而无需再次请求</li></ul> 
 <p><strong>Cache-Control</strong></p> 
 <ul><li>Cache-Control 是一个相对时间，例如 Cache-Control:3600，代表着资源的有效期是 3600秒。由于是相对时间，并且都是与客户端时间比较,所以服务器与客户端时间偏差也不会导致问题。</li></ul> 
 <p>Cache-Control 与Expires 可以在服务端配置同时启用或者启用任意一个，同时启用的时候Cache-Control优先级高。</p> 
</blockquote> 
<ul><li>浏览器的缓存主要是为了提高访问效率，强制缓存，第一次访问一个网站的时候，里面的静态资源如图片、CSS、JS 、icon这些资源实际上是从服务器上下载的，刷新网页这个资源是没有必要在服务器上重新去请求的，像这样的资源，浏览器会默认是一些强制缓存，强制缓存当用户第二次访问的时候，它不会再服务器上重新下载资源了，同样返回200状态码，但这个资源会从浏览器的本地缓存里面去取，这种第二次取的缓存的状态就是一种强制缓存。</li></ul> 
<hr> 
<p><strong>协商缓存是什么？</strong><br> HTTP请求的状态码为 304</p> 
<ul><li>和后台去协商资源，要不要对它进行缓存；</li><li>如果是第一次请求,返回状态码200,在响应头中返回cache-Control，用来控制缓存使用的时间 / 方式(私有缓存和共享缓存)，还会返回一个唯一标识 etag（可以理解为内容资源的一个hash或者一个唯一的标识）</li><li>在第二次发起请求时,先查看 max-age， 如果过期了，在请求头设置 If-None-Match 等于刚刚 Etag的值,去后台对比,如果 etag 值相同，（或者对比Last Modified的一个时间）证明后端没更新,所以返回 304状态，浏览器接收到304状态之后，判断这个资源无变化，只需从本地把缓存的资源继续使用(也是协商缓存)。</li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/23239b37e2f807162512ed40716889a1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《深入理解JAVA虚拟机笔记》运行时栈帧、方法分派、动态类型</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a52eae013bd977f24d6edddc39439b44/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">docker学习笔记05-TCP远程连接与docker compose简介</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>