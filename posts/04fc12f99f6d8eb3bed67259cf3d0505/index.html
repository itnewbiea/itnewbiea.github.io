<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【KVM-4】硬件虚拟化技术（详） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【KVM-4】硬件虚拟化技术（详）" />
<meta property="og:description" content="前言 大家好，我是秋意零。
经过前面章节的介绍，已经知道KVM虚拟化必须依赖于硬件辅助的虚拟化技术，本节就来介绍一下硬件虚拟化技术。
👿 简介
🏠 个人主页： 秋意零🔥 账号：全平台同名， 秋意零 账号创作者、 云社区 创建者🧑 个人介绍：在校期间参与众多云计算相关比赛，如：🌟 “省赛”、“国赛”，并斩获多项奖项荣誉证书🎉 目前状况：24 届毕业生，拿到一家私有云（IAAS）公司 offer，目前已在实习💕欢迎大家：欢迎大家一起学习云计算，走向年薪 30 万💕推广：CSDN 主页左侧，是个人扣扣群推广。方便大家技术交流、技术博客互助。 一、硬件虚拟化技术 硬件虚拟机技术：它是对CPU、内存、I/O等硬件进行的虚拟化技术。
2005年年末lntel发布的VT-x硬件虚拟化技术，以及AMD于2006年发布的AMD-V。
注意：KVM必须需要CPU的虚拟化支持，也就是VT-x和AMD-V。
CPU 虚拟化技术：将一台物理服务器上的 CPU 功能虚拟化，使多台虚拟机可以在同一台物理服务器上运行；内存虚拟化技术：将物理服务器上的内存资源进行划分，使得每一台虚拟机都可以拥有自己的独立内存空间；I/O 虚拟化技术：可以让每台虚拟机独享物理设备，并通过模拟 I/O 设备来完成设备间的数据通信。 注意，I/O虚拟化有四种方式，如下：
设备模拟器：虚拟机监控器中模拟一个传统的I/O设备的特性，比如在QEMU中模拟一个Intel的千兆网卡或者一个IDE硬盘驱动器，在客户机中就暴露为对应的硬件设备。前后端驱动接口：在虚拟机监控器与客户机之间定义一种全新的适合于虚拟化环境的交互接口，比如常见的virtio协议就是在客户机中暴露为virtio-net、 virtio-blk等网络和磁盘设备，在QEMU中实现相应的virtio后端驱动。设备直接分配：将一个物理设备，如一个网卡或硬盘驱动器直接分配给客户机使用，这种情况下I/0请求的链路中很少需要或基本不需要虚拟机监控器的参与所以性能很好。设备共享分配：其实是设备直接分配方式的一个扩展。在这种模式下，一个（具有特定特性的）物理设备可以支持多个虚拟机功能接口，可以将虚拟功能接口独立地分配给不同的客户机使用。如SR-IOV就是这种方式的一个标准协议。 二、Inter硬件虚拟化技术发展 Inter硬件虚拟化技术可以分为3个类别：
VT-x技术：是指Intel处理器中进行的一些虚拟化技术支持，包括CPU中引入的最基础的VMX技术，使得KVM等硬件虚拟化基础的出现成为可能。同时也包括内存虚拟化的硬件支持EPT、VPID等技术。VT-d技术：是指Intel的芯片组的虚拟化技术支持，通过IntelIOMMU以实现对设备直接分配的支持。VT-c技术：是指Intel的I/O设备相关的虚拟化技术支持，主要包含两个技术：一个是借助虚拟机设备队列 (VMDg) 最大限度提高I/O吞吐率，VMDq由Intel网卡中的专用硬件来完成；另一个是借助虚拟机直接互连 (VMDc)大幅提升虚拟化性能，VMDc主要就是基于SR-IOV标准将单个Intel网卡产生多个VF设备，用来直接分配给客户机。 总结 本章中，我们了解到硬件虚拟化技术的支持和发展。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/04fc12f99f6d8eb3bed67259cf3d0505/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-13T11:37:37+08:00" />
<meta property="article:modified_time" content="2023-11-13T11:37:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【KVM-4】硬件虚拟化技术（详）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="l0Ye9">前言</h2> 
<p id="u1e3cbb23"><strong>大家好，我是秋意零。</strong></p> 
<p id="u761fd338">经过前面章节的介绍，已经知道KVM虚拟化必须依赖于硬件辅助的虚拟化技术，本节就来介绍一下硬件虚拟化技术。</p> 
<p id="u106f486c"><strong>👿 简介</strong></p> 
<ul><li id="uca0218a1">🏠 <strong>个人主页</strong>： <a href="https://blog.csdn.net/qq_48450494?spm=1000.2115.3001.5343" title="秋意零">秋意零</a></li><li id="u0e517cff">🔥 <strong>账号</strong>：全平台同名， <a href="https://blog.csdn.net/qq_48450494?spm=1000.2115.3001.5343" title="秋意零">秋意零</a> 账号创作者、 <a href="https://bbs.csdn.net/forums/CloudLog" title="云社区">云社区</a> 创建者</li><li id="u0930b6e9">🧑 <strong>个人介绍</strong>：在校期间参与众多云计算相关比赛，如：🌟 <strong>“省赛”、“国赛”</strong>，并斩获多项奖项荣誉证书</li><li id="u935ba6b4">🎉 <strong>目前状况</strong>：24 届毕业生，拿到一家私有云（IAAS）公司 offer，目前已在实习</li><li id="u5fb6d938">💕<strong>欢迎大家</strong>：欢迎大家一起学习云计算，走向年薪 30 万</li><li id="uda6920fb">💕<strong>推广</strong>：CSDN <strong>主页左侧，是个人扣扣群推广</strong>。方便大家<strong>技术交流、技术博客互助</strong>。</li></ul> 
<p></p> 
<h2 id="RyaMT">一、硬件虚拟化技术</h2> 
<p id="uafc0ec85">硬件虚拟机技术：它是对CPU、内存、I/O等硬件进行的虚拟化技术。</p> 
<p id="u7aca07f2">2005年年末lntel发布的VT-x硬件虚拟化技术，以及AMD于2006年发布的AMD-V。</p> 
<blockquote> 
 <p><strong>注意：KVM必须需要CPU的虚拟化支持，也就是VT-x和AMD-V</strong>。</p> 
</blockquote> 
<ul><li id="u3ea3bc45">CPU 虚拟化技术：将一台物理服务器上的 CPU 功能虚拟化，使多台虚拟机可以在同一台物理服务器上运行；</li><li id="u8f94836e">内存虚拟化技术：将物理服务器上的内存资源进行划分，使得每一台虚拟机都可以拥有自己的独立内存空间；</li><li id="ue89e13a8">I/O 虚拟化技术：可以让每台虚拟机独享物理设备，并通过模拟 I/O 设备来完成设备间的数据通信。</li></ul> 
<p id="u2386a35b">注意，I/O虚拟化有四种方式，如下：</p> 
<ul><li id="u8c8279e3"><strong>设备模拟器：</strong>虚拟机监控器中模拟一个传统的I/O设备的特性，比如在<strong>QEMU中模拟一个Intel的千兆网卡或者一个IDE硬盘驱动器</strong>，在客户机中就暴露为对应的硬件设备。</li><li id="u3b0dfbc1"><strong>前后端驱动接口：</strong>在<strong>虚拟机监控器与客户机之间</strong>定义一种全新的<strong>适合于虚拟化环境的交互接口</strong>，比如常见的virtio协议就是<strong>在客户机中暴露为virtio-net、 virtio-blk等网络和磁盘设备</strong>，在QEMU中实现相应的virtio后端驱动。</li><li id="uf23ab76a"><strong>设备直接分配：</strong>将一个物理设备，如一个网卡或硬盘驱动器<strong>直接分配给客户机使用</strong>，这种情况下I/0请求的链路中很少需要或基本不需要虚拟机监控器的参与所以<strong>性能很好</strong>。</li><li id="ubaa04899"><strong>设备共享分配</strong>：其实是<strong>设备直接分配方式的一个扩展</strong>。在这种模式下，一个（具有特定特性的）<strong>物理设备可以支持多个虚拟机功能接口，可以将虚拟功能接口独立地分配给不同的客户机使用。</strong>如SR-IOV就是这种方式的一个标准协议。</li></ul> 
<p id="u0b583a38"></p> 
<p class="img-center"><img alt="" height="438" id="uc87370f4" src="https://images2.imgbox.com/22/71/GN3km3ts_o.png" width="1147"></p> 
<h2></h2> 
<h2 id="f0dr1">二、Inter硬件虚拟化技术发展</h2> 
<p id="ubb3807ba">Inter硬件虚拟化技术可以分为3个类别：</p> 
<ul><li id="u7d045510"><strong>VT-x技术</strong>：是指<strong>Intel处理器中进行的一些虚拟化技术支持</strong>，包括CPU中引入的最基础的VMX技术，<strong>使得KVM等硬件虚拟化基础的出现成为可能</strong>。同时也包括内存虚拟化的硬件支持EPT、VPID等技术。</li><li id="u56146e45"><strong>VT-d技术</strong>：是指<strong>Intel的芯片组的虚拟化技术支持</strong>，通过IntelIOMMU以实现<strong>对设备直接分配的支持</strong>。</li><li id="uc4be39ed"><strong>VT-c技术</strong>：是指<strong>Intel的I/O设备相关的虚拟化技术支持</strong>，主要包含两个技术：一个是借助虚拟机设备队列 (VMDg) 最大限度提高I/O吞吐率，VMDq由Intel网卡中的专用硬件来完成；另一个是借助虚拟机直接互连 (VMDc)大幅提升虚拟化性能，VMDc主要就是基于SR-IOV标准将单个Intel网卡产生多个VF设备，用来直接分配给客户机。</li></ul> 
<h2 id="xx64w">总结</h2> 
<p id="u78144732">本章中，我们了解到硬件虚拟化技术的支持和发展。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7ba1a00d5ea382d35ceb2abbccb1af55/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【KVM-1】软件虚拟化和硬件虚拟化类型</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b22b9348ad02940633f319858a054cf2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【KVM-5】KVM架构</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>