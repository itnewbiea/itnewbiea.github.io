<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Shell循环语句详解--for循环 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Shell循环语句详解--for循环" />
<meta property="og:description" content="文章目录 一.for循环基本格式二.for循环脚本2.1测试主机状态2.2添加用户2.3乘法表 三.总结 引言：在shell编程中，除了选择判断之外，对一些特殊情况需要进行循环操作，比如遍历目录文件，批量添加用户等操作，都需要循环操作 一.for循环基本格式 语法格式：
for 变量名 in 取值列表 do 命令 done for循环执行次数，取决于取值列表中的变量个数
for i in {1..5};do echo $i;done {1..5}为取值范围1到5 echo $i 输出当前的取值 for((i=1;i&lt;=5;i&#43;&#43;));do echo $i;done 使用（（））双括号，可以支持C语言的一些命令 i=1;i&lt;=5;i&#43;&#43; #i初始值为1，如果i小于等于5时执行循环，每次循环后&#43;1 for i in `seq 5`;do echo $i;done seq 5 与{1..5}效果一样 for i in `seq 5`;do echo &#34;hello world&#34;;done 使用变量i 循环5次 每次执行echo &#34;hello world&#34;命令 使用for循环遍历当前目录
二.for循环脚本 利用for循环，实现的简单脚本
2.1测试主机状态 检测局域网内，主机存活状态
#!/bin/bash for IP in `cat /root/for/ip.txt` #ip文件为存放ip地址的 do ping -c 3 -i 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ad3a425f41304305a5ce63319e3f5677/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-29T17:34:07+08:00" />
<meta property="article:modified_time" content="2022-04-29T17:34:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Shell循环语句详解--for循环</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#for_2" rel="nofollow">一.for循环基本格式</a></li><li><a href="#for_44" rel="nofollow">二.for循环脚本</a></li><li><ul><li><a href="#21_46" rel="nofollow">2.1测试主机状态</a></li><li><a href="#22_65" rel="nofollow">2.2添加用户</a></li><li><a href="#23_86" rel="nofollow">2.3乘法表</a></li></ul> 
  </li><li><a href="#_101" rel="nofollow">三.总结</a></li></ul> 
</div> 
<br> 引言：在shell编程中，除了选择判断之外，对一些特殊情况需要进行循环操作，比如遍历目录文件，批量添加用户等操作，都需要循环操作 
<p></p> 
<h2><a id="for_2"></a>一.for循环基本格式</h2> 
<p>语法格式：</p> 
<pre><code class="prism language-c"><span class="token keyword">for</span> 变量名 in 取值列表
<span class="token keyword">do</span>
  命令
done</code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/0d/16/UNhn3S2F_o.png"><br> for循环执行次数，取决于取值列表中的变量个数</p> 
<pre><code class="prism language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span><span class="token keyword">done</span>
<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span>为取值范围1到5
<span class="token builtin class-name">echo</span> <span class="token variable">$i</span> 输出当前的取值</code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/6e/19/YuIkjnt3_o.png"></p> 
<pre><code class="prism language-bash"><span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span><span class="token keyword">done</span>
使用（（））双括号，可以支持C语言的一些命令
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i++ <span class="token comment">#i初始值为1，如果i小于等于5时执行循环，每次循环后+1</span></code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/be/c6/SeGDIYI6_o.png"></p> 
<pre><code class="prism language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">seq</span> <span class="token number">5</span><span class="token variable">`</span></span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span><span class="token keyword">done</span>
<span class="token function">seq</span> <span class="token number">5</span> 与<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span>效果一样</code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/dc/e7/Y9fg8CRS_o.png"></p> 
<pre><code class="prism language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">seq</span> <span class="token number">5</span><span class="token variable">`</span></span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span><span class="token keyword">done</span>
使用变量i 循环5次
每次执行echo <span class="token string">"hello world"</span>命令</code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/ad/db/e2d8sELP_o.png"><br> 使用for循环遍历当前目录<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/68/4b/ldLp26Ey_o.png"></p> 
<h2><a id="for_44"></a>二.for循环脚本</h2> 
<p>利用for循环，实现的简单脚本</p> 
<h3><a id="21_46"></a>2.1测试主机状态</h3> 
<p>检测局域网内，主机存活状态</p> 
<pre><code class="prism language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">IP</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /root/for/ip.txt<span class="token variable">`</span></span>    <span class="token comment">#ip文件为存放ip地址的</span>
<span class="token keyword">do</span>
  <span class="token function">ping</span> -c <span class="token number">3</span> -i <span class="token number">0.2</span> -w <span class="token number">3</span> <span class="token variable">$IP</span> <span class="token operator">&amp;&gt;</span>/dev/null <span class="token comment">#-c 3 ping3次主机 -i 0.2ping主机间隔 -w 3ping主机超时间隔</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"host <span class="token variable">$IP</span> is up"</span>
  <span class="token keyword">else</span> <span class="token builtin class-name">echo</span> <span class="token string">"host <span class="token variable">$IP</span> is down"</span>
  <span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/ed/81/GY47Eboy_o.png"></p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/a6/79/YFv16OnA_o.png"></p> 
<h3><a id="22_65"></a>2.2添加用户</h3> 
<p>利用for循环与if条件语句，进行批量添加用户</p> 
<pre><code class="prism language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">user</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /root/for/a.txt<span class="token variable">`</span></span>    <span class="token comment">#a.txt为存放用户名单文件</span>
<span class="token keyword">do</span>
  <span class="token keyword">if</span> <span class="token function">grep</span> <span class="token variable">$user</span> /etc/passwd <span class="token operator">&amp;&gt;</span>/dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>   <span class="token comment">#检查用户是否存在 </span>
     <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$user</span>用户已经存在"</span>
  <span class="token keyword">elif</span> <span class="token punctuation">[</span> -d /home/<span class="token variable">$user</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>          <span class="token comment">#检查home下是否存在和用户相同的目录 </span>
     <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$user</span>用户存在宿主目录"</span>    
  <span class="token keyword">else</span> <span class="token function">useradd</span> <span class="token variable">$user</span>                    <span class="token comment">#添加用户并设置初始密码 </span>
       <span class="token builtin class-name">echo</span> <span class="token string">"123456"</span> <span class="token operator">|</span><span class="token function">passwd</span> --stdin <span class="token variable">$user</span> <span class="token operator">&amp;&gt;</span>/dev/null  
       <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$user</span>用户已经创建，初始密码为：123456"</span>
  <span class="token keyword">fi</span>
<span class="token keyword">done</span></code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/9a/df/kLezOVmj_o.png"></p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/15/f8/i7VprnpT_o.png"><br> 用户状态存在或存在异常<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/f4/5c/8KEPWl7B_o.png"></p> 
<h3><a id="23_86"></a>2.3乘法表</h3> 
<p>利用for循环，打印99乘法表</p> 
<pre><code class="prism language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">9</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span>     <span class="token comment">#此处也可以写  for i in {1..9}</span>
  <span class="token keyword">do</span>
     <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">))</span></span>  <span class="token comment">#此处也可写 for j in `seq $i`</span>
       <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> -n -e <span class="token string">"<span class="token variable">$j</span>*<span class="token variable">$i</span>=$[j*i]<span title="\t" class="token entity">\t</span>"</span> <span class="token comment">#-n不换行输出；-e使用\转义符；\t横向制表；若不用-e，则\t为普通字符</span>
       <span class="token keyword">done</span>
  <span class="token builtin class-name">echo</span>
  <span class="token keyword">done</span></code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/48/0a/aqw45fx7_o.png"><br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/f2/b2/fD2IQbgh_o.png"></p> 
<h2><a id="_101"></a>三.总结</h2> 
<p>1.for循环在实际生成中应用非常多，避免人工重复的去操作某个事情<br> 2.for循环中的列表支持正则表达式<br> 3.for循环中使用(())，双括号内支持C语言的命令<br> 4.for循环中的变量，只是循环去取值列表中取值，然后进行do操作，所以取值列表中的参数个数，决定了循环的次数</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/674eedcfba4e4350adfe8aac33a5b825/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用wireshark抓取手机的rtmp推流包</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7efd86c629ea993930baa95d91866b31/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">＜img＞ 的 title 和 alt 有什么区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>