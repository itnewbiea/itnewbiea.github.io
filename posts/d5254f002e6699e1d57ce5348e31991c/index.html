<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用R中merge()函数合并数据 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用R中merge()函数合并数据" />
<meta property="og:description" content="使用R中merge()函数合并数据 在R中可以使用merge()函数去合并数据框，其强大之处在于在两个不同的数据框中标识共同的列或行。
如何使用merge()获取数据集中交叉部分 merge()最简单的形式为获取两个不同数据框中交叉部分。举例，获取cold.states和large.states完全匹配的数据。代码如下：
&gt; merge(cold.states, large.states) Name Frost Area 1 Alaska 152 566432 2 Colorado 166 103766 3 Montana 155 145587 4 Nevada 188 109889 如果你属性数据库语法SQL,你可能想merge()和数据库中JOIN功能很相似。确实如此，merge()函数的不同参数可以实现内join，left join,right join以及完整join。
merge()函数有很多参数，看起来非常吓人。但他们都几中类型参数有关：
x: 第一个数据框.
y: 第二个数据框.
by, by.x, by.y: 指定两个数据框中匹配列名称。缺省使用两个数据框中相同列名称。
all, all.x, all.y: 指定合并类型的逻辑值。缺省为false，all=FALSE (仅返回匹配的行).
最后一组参数all, all.x, all.y需要进一步解释，决定合并类型。
如何理解不同类型的合并 merge() 函数支持4种类型数据合并:
Natural join: 仅返回两数据框中匹配的数据框行，参数为：all=FALSE.
Full outer join: 返回两数据框中所有行， 参数为： all=TRUE.
Left outer join: 返回x数据框中所有行以及和y数据框中匹配的行，参数为： all.x=TRUE.
Right outer join: 返回y数据框中所有行以及和x数据框匹配的行，参数为： all.y=TRUE.
如何实现完整合并(full outer join) 返回示例数据中美国的州，执行完整合并cold和large state，使用参数all=TRUE." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/d5254f002e6699e1d57ce5348e31991c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-03-04T11:01:10+08:00" />
<meta property="article:modified_time" content="2018-03-04T11:01:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用R中merge()函数合并数据</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Rmerge_0"></a>使用R中merge()函数合并数据</h2> 
<p>在R中可以使用merge()函数去合并数据框，其强大之处在于在两个不同的数据框中标识共同的列或行。</p> 
<h3><a id="merge_4"></a>如何使用merge()获取数据集中交叉部分</h3> 
<p>merge()最简单的形式为获取两个不同数据框中交叉部分。举例，获取cold.states和large.states完全匹配的数据。代码如下：</p> 
<pre><code>&gt; merge(cold.states, large.states)
   Name Frost  Area
1  Alaska  152 566432
2 Colorado  166 103766
3 Montana  155 145587
4  Nevada  188 109889
</code></pre> 
<p>如果你属性数据库语法SQL,你可能想merge()和数据库中JOIN功能很相似。确实如此，merge()函数的不同参数可以实现内join，left join,right join以及完整join。</p> 
<p>merge()函数有很多参数，看起来非常吓人。但他们都几中类型参数有关：</p> 
<ul><li> <p>x: 第一个数据框.</p> </li><li> <p>y: 第二个数据框.</p> </li><li> <p>by, by.x, by.y: 指定两个数据框中匹配列名称。缺省使用两个数据框中相同列名称。</p> </li><li> <p>all, all.x, all.y: 指定合并类型的逻辑值。缺省为false，all=FALSE (仅返回匹配的行).</p> </li></ul> 
<p>最后一组参数all, all.x, all.y需要进一步解释，决定合并类型。</p> 
<p><img src="https://images2.imgbox.com/59/b8/CIwS4r4b_o.png" alt="这里写图片描述"></p> 
<h3><a id="_33"></a>如何理解不同类型的合并</h3> 
<p>merge() 函数支持4种类型数据合并:</p> 
<p>Natural join: 仅返回两数据框中匹配的数据框行，参数为：all=FALSE.</p> 
<p>Full outer join: 返回两数据框中所有行， 参数为： all=TRUE.</p> 
<p>Left outer join: 返回x数据框中所有行以及和y数据框中匹配的行，参数为： all.x=TRUE.</p> 
<p>Right outer join: 返回y数据框中所有行以及和x数据框匹配的行，参数为： all.y=TRUE.</p> 
<h3><a id="full_outer_join_45"></a>如何实现完整合并(full outer join)</h3> 
<p>返回示例数据中美国的州，执行完整合并cold和large state，使用参数all=TRUE.</p> 
<pre><code>&gt; merge(cold.states, large.states, all=TRUE)
      Name Frost  Area
1     Alaska  152 566432
2    Arizona  NA 113417
3   California  NA 156361
....
13     Texas  NA 262134
14    Vermont  168   NA
15    Wyoming  173   NA
</code></pre> 
<p>两个数据框有不同的名称，所以R基于两者state的name进行匹配。Frost来自cold.states数据框，Area来自large.states.</p> 
<p>上面代码执行了完整合并，填充未匹配列值为NA。</p> 
<h3><a id="_65"></a>总结</h3> 
<p>本文详细介绍R中merge()函数参数及合并数据类型。利用sql的表连接概念进行类比，简单易懂。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f2c84a4b26606d63b5af83d78d64e034/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Markdown 编辑器设置字体大小颜色</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e50413d110a5e709792e38206726d9f2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js判断用户refer,platform进行验证,防止作弊</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>