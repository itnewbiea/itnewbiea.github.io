<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>海康工业相机参数设置与获取 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="海康工业相机参数设置与获取" />
<meta property="og:description" content="海康工业相机参数设置与获取 通用接口介绍常见相机参数设置获取Int型参数-图像宽度、图像高度Enum型参数-图像格式、触发模式设置float 型参数-曝光、增益设置string型参数-用户名称Command型参数-软触发、参数保存命令 通用接口介绍 拿到海康工业相机之后，通过其官方提供的MVS客户端，我们可以设置相关相机参数，来调整图像，达到我们想要的效果，但是如此众多的相机参数，我们该如何集成进入我们软件呢
从查询SDK文档中，可以发现，他们提供了一套通用接口，来对相机进行参数获取与设置
通用接口把相机参数，分成六大类，除command参数外，每一类提供Set/Get接口来设置与获取相关节点
类型描述Int整数型参数Enum枚举型参数float浮点型参数bool布尔型参数string字符串型参数Command命令型参数以MV_CC_GeIntValue为例：代码示例，获取 Width： //获取int型参数 MVCC_INTVALUE struIntValue = {0}; nRet = MV_CC_GetIntValue(handle, &#34;Width&#34;, &amp;struIntValue); if (MV_OK != nRet) { printf(&#34;error: GetIntValue fail [%x]\n&#34;, nRet); return; } 这里的第二个参数“Width”，作为整个接口的关键参数，文档中，告知我们要去查找xml属性表，然后对着查表进行参数设置，xml表如下所示：
功能名称（GetNode: key参数）数据类型数值范围定义访问模式描述Image Format ControlWidthIInteger＞0R/(W)ROI的宽 注意：海康目前以不再维护更新表格，且表格不再对外提供
通过查表，我们可以知道key值该填什么，key值的属性是什么，但是，这样子太慢啦，我怎么知道我调的参数，在xml表的什么位置呢
通过观察MVS客户端，有一个更简单的方法能够知道相机参数的属性，类型等，可以快速方便的对参数进行操作
在MVS中找到自己想要的参数，鼠标选中它，在MVS右下角，参数描述中，能看看该参数的节点名、类型、取值范围、步进等信息
上图可知，图像宽度“Width”，其节点名为“Width”，类型是“int”，取值范围是32~2048,步进是16；
根据类型，我们就可以选用MV_CC_SetIntValue/MV_CC_GetIntValue来对该属性进行操作；
还需注意以下两点：不同的相机参数有不同的类型，取值范围与步进不同的相机，相同的参数，有不同的取值范围与步进 常见相机参数设置获取 Int型参数-图像宽度、图像高度 //获取int型参数-Width值 MVCC_INTVALUE struIntValue = {0}; nRet = MV_CC_GetIntValue(handle, &#34;Width&#34;, &amp;struIntValue); if (MV_OK != nRet) { printf(&#34;error: GetIntValue fail [%x]\n&#34;, nRet); } //打印当前宽度，宽带最大值，最小值，步进 printf(&#34;Width；%d,Width_Max:%d,Width_min:%d,Width_Inc:%d\n&#34;, struIntValue.nCurValue,struIntValue.nMax,struIntValue.nMin,struIntValue.nInc); //设置int型参数-Width值 unsigned int nValue = 752; //注意点1：value值需要是步进值的整数倍，否则会失败 //注意点2：宽度、高度等参数设置时，只有在MV_CC_Startgrab接口调用前才能设置,取流过程中，不能修改宽高 //注意点3：宽度、高度等参数设置时，若有Offset X、Y偏移，应当先调用相关接口，将偏移量置0 nRet = MV_CC_SetIntValue(handle, &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/991355533859c91f85a8bc9ebe47e3cb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-20T11:13:08+08:00" />
<meta property="article:modified_time" content="2022-04-20T11:13:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">海康工业相机参数设置与获取</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>海康工业相机参数设置与获取</h4> 
 <ul><li><a href="#_1" rel="nofollow">通用接口介绍</a></li><li><a href="#_47" rel="nofollow">常见相机参数设置获取</a></li><li><ul><li><a href="#Int_49" rel="nofollow">Int型参数-图像宽度、图像高度</a></li><li><a href="#Enum_74" rel="nofollow">Enum型参数-图像格式、触发模式设置</a></li><li><a href="#float__101" rel="nofollow">float 型参数-曝光、增益设置</a></li><li><a href="#string_145" rel="nofollow">string型参数-用户名称</a></li><li><a href="#Command_164" rel="nofollow">Command型参数-软触发、参数保存命令</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>通用接口介绍</h2> 
<p>拿到海康工业相机之后，通过其官方提供的MVS客户端，我们可以设置相关相机参数，来调整图像，达到我们想要的效果，但是如此众多的相机参数，我们该如何集成进入我们软件呢<br> <img src="https://images2.imgbox.com/fc/a2/MrcUOhlE_o.png" alt="在这里插入图片描述"><br> 从查询SDK文档中，可以发现，他们提供了一套通用接口，来对相机进行参数获取与设置<br> <img src="https://images2.imgbox.com/de/cc/KLcLtbwB_o.png" alt="在这里插入图片描述"><br> 通用接口把相机参数，分成六大类，除command参数外，每一类提供Set/Get接口来设置与获取相关节点</p> 
<table><thead><tr><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>Int</td><td>整数型参数</td></tr><tr><td>Enum</td><td>枚举型参数</td></tr><tr><td>float</td><td>浮点型参数</td></tr><tr><td>bool</td><td>布尔型参数</td></tr><tr><td>string</td><td>字符串型参数</td></tr><tr><td>Command</td><td>命令型参数</td></tr><tr><td>以MV_CC_GeIntValue为例：<img src="https://images2.imgbox.com/8b/ec/ZWf5t0bN_o.png" alt="在这里插入图片描述"></td><td></td></tr><tr><td>代码示例，获取 Width：</td><td></td></tr></tbody></table> 
<pre><code class="prism language-c"><span class="token comment">//获取int型参数</span>
     MVCC_INTVALUE struIntValue <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
    nRet <span class="token operator">=</span> <span class="token function">MV_CC_GetIntValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"Width"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>struIntValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: GetIntValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>这里的第二个参数“Width”，作为整个接口的关键参数，文档中，告知我们要去查找xml属性表，然后对着查表进行参数设置，xml表如下所示：<br> <img src="https://images2.imgbox.com/44/5a/8w1oe7Ou_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th align="center">功能</th><th align="center">名称（GetNode: key参数）</th><th align="center">数据类型</th><th align="center">数值范围定义</th><th align="center">访问模式</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">Image Format Control</td><td align="center">Width</td><td align="center">IInteger</td><td align="center">＞0</td><td align="center">R/(W)</td><td align="center">ROI的宽</td></tr></tbody></table> 
<p><strong>注意：海康目前以不再维护更新表格，且表格不再对外提供</strong></p> 
<p>通过查表，我们可以知道key值该填什么，key值的属性是什么，但是，这样子太慢啦，我怎么知道我调的参数，在xml表的什么位置呢<br> 通过观察MVS客户端，有一个更简单的方法能够知道相机参数的属性，类型等，可以快速方便的对参数进行操作</p> 
<ul><li>在MVS中找到自己想要的参数，鼠标选中它，在MVS右下角，参数描述中，能看看该参数的节点名、类型、取值范围、步进等信息<br> <img src="https://images2.imgbox.com/96/47/p13UAxEu_o.png" alt="在这里插入图片描述"><br> 上图可知，图像宽度“Width”，其节点名为“Width”，类型是“int”，取值范围是32~2048,步进是16；<br> 根据类型，我们就可以选用MV_CC_SetIntValue/MV_CC_GetIntValue来对该属性进行操作；<br> 还需注意以下两点：</li><li>不同的相机参数有不同的类型，取值范围与步进</li><li>不同的相机，相同的参数，有不同的取值范围与步进</li></ul> 
<h2><a id="_47"></a>常见相机参数设置获取</h2> 
<h3><a id="Int_49"></a>Int型参数-图像宽度、图像高度</h3> 
<pre><code class="prism language-c"><span class="token comment">//获取int型参数-Width值</span>
MVCC_INTVALUE struIntValue <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
nRet <span class="token operator">=</span> <span class="token function">MV_CC_GetIntValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"Width"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>struIntValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: GetIntValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//打印当前宽度，宽带最大值，最小值，步进</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Width；%d,Width_Max:%d,Width_min:%d,Width_Inc:%d\n"</span><span class="token punctuation">,</span> 
struIntValue<span class="token punctuation">.</span>nCurValue<span class="token punctuation">,</span>struIntValue<span class="token punctuation">.</span>nMax<span class="token punctuation">,</span>struIntValue<span class="token punctuation">.</span>nMin<span class="token punctuation">,</span>struIntValue<span class="token punctuation">.</span>nInc<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-c"><span class="token comment">//设置int型参数-Width值</span>
<span class="token keyword">unsigned</span> <span class="token keyword">int</span> nValue <span class="token operator">=</span> <span class="token number">752</span><span class="token punctuation">;</span>
<span class="token comment">//注意点1：value值需要是步进值的整数倍，否则会失败</span>
<span class="token comment">//注意点2：宽度、高度等参数设置时，只有在MV_CC_Startgrab接口调用前才能设置,取流过程中，不能修改宽高</span>
<span class="token comment">//注意点3：宽度、高度等参数设置时，若有Offset X、Y偏移，应当先调用相关接口，将偏移量置0</span>
nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetIntValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"Width"</span><span class="token punctuation">,</span> nValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: SetIntValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Enum_74"></a>Enum型参数-图像格式、触发模式设置</h3> 
<pre><code class="prism language-c"><span class="token comment">//获取Enum型参数-相机图像格式</span>
MVCC_ENUMVALUE struEnumValue <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
nRet <span class="token operator">=</span> <span class="token function">MV_CC_GetEnumValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"PixelFormat"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>struEnumValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: GetEnumValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-c"> <span class="token comment">//设置Enum型参数-相机图像格式</span>
 <span class="token comment">//注意点1：相机图像格式设置时，只有在MV_CC_Startgrab接口调用前才能设置,取流过程中，不能修改图像格式</span>
 nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetEnumValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"PixelFormat"</span><span class="token punctuation">,</span> PixelType_Gvsp_Mono12<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: SetEnumValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-c"><span class="token comment">//设置Enum型参数-设置触发模式为on </span>
nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetEnumValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"TriggerMode"</span><span class="token punctuation">,</span> MV_TRIGGER_MODE_ON<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Set Trigger Mode fail! nRet [0x%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="float__101"></a>float 型参数-曝光、增益设置</h3> 
<pre><code class="prism language-c"><span class="token comment">//获取float型参数-曝光参数获取</span>
MVCC_FLOATVALUE struFloatValue <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
nRet <span class="token operator">=</span> <span class="token function">MV_CC_GetFloatValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"ExposureTime"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>struFloatValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: GetFloatValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//打印曝光当前值，可设置的最大值、最小值</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Exp；%d,Exp_Max:%d,Exp_min:%d\n"</span><span class="token punctuation">,</span> struFloatValue<span class="token punctuation">.</span>fCurValue<span class="token punctuation">,</span>struFloatValue<span class="token punctuation">.</span>fMax<span class="token punctuation">,</span>struFloatValue<span class="token punctuation">.</span>fMin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-c"><span class="token comment">//获取float型参数-增益参数获取</span>
MVCC_FLOATVALUE struFloatValue <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
nRet <span class="token operator">=</span> <span class="token function">MV_CC_GetFloatValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"Gain"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>struFloatValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: GetFloatValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//打印增益当前值，可设置的最大值、最小值</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Gain；%d,Gain_Max:%d,Gain_min:%d\n"</span><span class="token punctuation">,</span> struFloatValue<span class="token punctuation">.</span>fCurValue<span class="token punctuation">,</span>struFloatValue<span class="token punctuation">.</span>fMax<span class="token punctuation">,</span>struFloatValue<span class="token punctuation">.</span>fMin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-c"><span class="token comment">//获取float型参数-曝光值</span>
<span class="token comment">//注意点1：曝光设置有前置条件需要注意，例如自动曝光、曝光模式等，前置条件是否调用，可以再MVS里面观察，设置曝光时，是否提前勾选了其他参数</span>
<span class="token keyword">float</span> fValue <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span> 
nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetFloatValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"ExposureTime"</span><span class="token punctuation">,</span> fValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: SetFloatValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-c"><span class="token comment">//获取float型参数-增益值</span>
<span class="token comment">//注意点1：增益设置有前置条件需要注意，例如自动增益，前置条件是否调用，可以再MVS里面观察，设置增益时，是否提前勾选了其他参数</span>
<span class="token comment">//注意点2：海康小部分相机增益节点不叫“Gain”，也不是用float节点进行设置，如果遇到了，就在MVS里面观察使用对应接口吧</span>
<span class="token keyword">float</span> fValue <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> 
nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetFloatValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"Gain"</span><span class="token punctuation">,</span> fValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: SetFloatValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="string_145"></a>string型参数-用户名称</h3> 
<pre><code class="prism language-c"><span class="token comment">//获取string型参数</span>
MVCC_STRINGVALUE struStringValue <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
nRet <span class="token operator">=</span> <span class="token function">MV_CC_GetStringValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"DeviceUserID"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>struStringValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: GetStringValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"DeviceUserID:[%s]\n"</span><span class="token punctuation">,</span> struStringValue<span class="token punctuation">.</span>chCurValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-c"><span class="token comment">//设置string型参数-自定义用户名称</span>
 nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetStringValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"DeviceUserID"</span><span class="token punctuation">,</span> <span class="token string">"HikCamera"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: SetStringValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Command_164"></a>Command型参数-软触发、参数保存命令</h3> 
<pre><code class="prism language-c"><span class="token comment">//设置Command型节点-发送软触发命令</span>
nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetCommandValue</span><span class="token punctuation">(</span>m_handle<span class="token punctuation">,</span> <span class="token string">"TriggerSoftware"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"error: SetCommandValue fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>参数保存，需要用到一些组合参数</p> 
<pre><code class="prism language-c"><span class="token comment">//设置Enum型参数-相机参数保存/默认加载项</span>
<span class="token comment">//仅需在opendevice之后，初始化执行一次 UserSetSelector/UserSetDefault即可</span>
nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetEnumValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"UserSetSelector"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Set UserSetSelector 1! nRet [0x%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetEnumValue</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token string">"UserSetDefault"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Set UserSetDefault 1! nRet [0x%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//设置Command型节点-发送参数保存命令-参数会保存到相机内部ROM里面</span>
<span class="token comment">//当修改参数完成后，可以调用该节点进行参数保存</span>
<span class="token comment">//执行成功后，掉电不会消失</span>
nRet <span class="token operator">=</span> <span class="token function">MV_CC_SetCommandValue</span><span class="token punctuation">(</span>m_handle<span class="token punctuation">,</span> <span class="token string">"UserSetSave"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>MV_OK <span class="token operator">!=</span> nRet<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Set UserSetSave fail [%x]\n"</span><span class="token punctuation">,</span> nRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>其他的参数与功能，查询MVS参数描述与功能<br> 不同的功能，需要组合不同的参数，注意MVS中的操作顺序，以便调整sdk接口的调用顺序与函数位置</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/893b1f2eda9d83d847eb6e9eae94bc3b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Arcgis api for JavaScript 4.X 学习——图层加载（要素图层、栅格图层、切片图层）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c66f2952a8f28fe73873bc33f5874bce/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java项目:图书管理系统(java&#43;SpringBoot&#43;html&#43;ThymeLeaf&#43;Bootstrap&#43;maven&#43;mysql)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>