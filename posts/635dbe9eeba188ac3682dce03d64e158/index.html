<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>nginx 相关命令 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="nginx 相关命令" />
<meta property="og:description" content="本地nginx 命令 sudo nginx 启动 sudo nginx -s stop 关闭 Nginx常用命令 1、检查配置文件是否配置成功，在启动服务之前执行； nginx -t 2、启动运行nginx服务； start nginx 3、等任务完成之后，关闭Nginx服务； nginx -s quit 4、强制关闭Nginx服务； nginx -s stop 5、重启Nginx服务，一般是修改了配置文件之后，使修改生效； nginx -s reload #修改文件|目录的拥有者 chown imis /opt/redis #递归修改文件|目录的组 chgrp -R isim:isim /opt/redis #递归修改文件权限 chmod -R 755 /opt/redis 查看端口是否开放：lsof -i:8080 查看所有开放端口：netstat -aptn 开放2181端口，使用以下命令： $ iptables -I INPUT -p tcp --dport 2181 -j ACCEPT 保存规则 $ iptables-save 持续化规则：使用 iptables-persistent 首先安装iptables-persistent： $ apt-get install iptables-persistent 永久保存规则 $ netfilter-persistent save $ netfilter-persistent reload Ubuntu nginx安装 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/635dbe9eeba188ac3682dce03d64e158/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-02T09:40:09+08:00" />
<meta property="article:modified_time" content="2021-08-02T09:40:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">nginx 相关命令</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <pre><code class="prism language-bash">本地nginx 命令
<span class="token function">sudo</span> nginx 启动
<span class="token function">sudo</span> nginx -s  stop 关闭




Nginx常用命令

<span class="token number">1</span>、检查配置文件是否配置成功，在启动服务之前执行；
nginx -t

<span class="token number">2</span>、启动运行nginx服务；
start nginx

<span class="token number">3</span>、等任务完成之后，关闭Nginx服务；
nginx -s quit

<span class="token number">4</span>、强制关闭Nginx服务；
nginx -s stop





<span class="token number">5</span>、重启Nginx服务，一般是修改了配置文件之后，使修改生效；
nginx -s reload


<span class="token comment">#修改文件|目录的拥有者</span>
<span class="token function">chown</span> imis /opt/redis

<span class="token comment">#递归修改文件|目录的组</span>
<span class="token function">chgrp</span> -R isim:isim /opt/redis

<span class="token comment">#递归修改文件权限</span>
<span class="token function">chmod</span> -R <span class="token number">755</span> /opt/redis

查看端口是否开放：lsof -i:8080
查看所有开放端口：netstat -aptn

开放2181端口，使用以下命令： 
$ iptables -I INPUT -p tcp --dport <span class="token number">2181</span> -j ACCEPT
保存规则
$ iptables-save
持续化规则：使用 iptables-persistent
首先安装iptables-persistent： 
$ <span class="token function">apt-get</span> <span class="token function">install</span> iptables-persistent
永久保存规则 
$ netfilter-persistent save
$ netfilter-persistent reload


Ubuntu nginx安装

<span class="token number">1</span>.首先查看linux系统
<span class="token function">cat</span> /proc/version

<span class="token number">2</span>.装nginx
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nginx

<span class="token number">3</span>.如果出现无法定位nginx包，进行如下操作：
<span class="token function">sudo</span> <span class="token function">apt-get</span> update

Ubuntu安装之后的文件结构大致为：
配置文件：/etc/nginx/nginx.conf
程序文件：/usr/sbin/nginx
日    志：/varlog/nginx
虚拟主机：/var/www/html
启动脚本：/etc/init.d/nginx

启动
<span class="token variable">$sudo</span> /etc/init.d/nginx start

停止
<span class="token variable">$sudo</span> /etc/init.d/nginx stop

重启
<span class="token variable">$sudo</span> /etc/init.d/nginx restart

状态
<span class="token variable">$sudo</span> /etc/init.d/nginx status

查看端口占用
<span class="token function">lsof</span> -i:80
/usr/sbin/nginx -t -c /etc/nginx/nginx.conf

 
源代码安装
<span class="token variable">$cd</span> /usr/local  //进入local目录
<span class="token variable">$wget</span> http://nginx.org/download/nginx-1.2.8.tar.gz  // 指定版本在线安装
<span class="token variable">$tar</span> -zxvf nginx-1.2.8.tar.gz //解压缩
<span class="token variable">$sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libpcre3 libpcre3-dev zlib1g-dev //安装依赖库
<span class="token variable">$cd</span> nginx-1.2.8
$./configure
<span class="token variable">$make</span>
<span class="token variable">$make</span> <span class="token function">install</span>

名称	      目录
配置文件	  /usr/local/nginx/conf/nginx.conf
程序文件	  /usr/local/nginx/sbin/nginx
日志	      /var/log/nginx
默认虚拟主机  /var/www/

启动
/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf

conf配置文件示例
server <span class="token punctuation">{<!-- --></span>
    listen      <span class="token number">80</span><span class="token punctuation">;</span>
    server_name localhost<span class="token punctuation">;</span>
    index index.html index.htm index.php<span class="token punctuation">;</span>
    root /var/www/html/statium<span class="token punctuation">;</span>
    location / <span class="token punctuation">{<!-- --></span>
        root /var/www/html/statium<span class="token punctuation">;</span>
        try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html last<span class="token punctuation">;</span>
        index index.html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
    location <span class="token operator">=</span> /50x.html <span class="token punctuation">{<!-- --></span>
        root html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 


gitlab-ctl status

<span class="token function">sudo</span> gitlab-ctl start

<span class="token function">sudo</span> gitlab-ctl restart

ubuntu 设定永久dns
<span class="token number">1</span>、输入sudo <span class="token function">vi</span> /etc/resolvconf/resolv.conf.d/base 回车
在里面输入 nameserver <span class="token number">192.168</span>.65.10（每个人的DNS域IP不同），之后按ESC键，shift+:    之后输入wq 保存退出

<span class="token number">2</span>、执行sudo resolvconf -u 
执行cat /etc/resolv.conf 
看看下面是否多了一行   nameserver <span class="token number">192.168</span>.65.10





</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/19955e967f05217e8bc5e54946dfd576/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">DateUtils</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb97f5c6c68fc19627c2d743ae141daa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Alphapose - 在Alphapose中使用yolov3-tiny检测器大幅提升检测性能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>