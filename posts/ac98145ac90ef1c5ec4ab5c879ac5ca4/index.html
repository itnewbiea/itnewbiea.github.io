<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaMail发送邮件 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JavaMail发送邮件" />
<meta property="og:description" content="通过指令自动化的发送邮件 提示：文章写完后，目录可以自动生成，如何生成可参考右边的帮助文档
文章目录 通过指令自动化的发送邮件 前言一、Mail（邮件）二、使用步骤1.引入库2.开启邮件服务商：POP3/SMTP服务发送QQ邮箱发送网易邮箱 总结 前言 JAVA作为BackEnd实现邮件的定时发送，批量发送对很多业务场景有这重要的意义。例如:给用户发送发票、订阅、广告、数据的报表推送、验证账号、验证码、定时回复等等业务场景均需要该功能。因此，简单总结了下自动化发送的注意点，及实现逻辑，望大家指正。原先的文章进行更新
javaMail发送邮件
正文内容
一、Mail（邮件） 电子邮件是—种用电子手段提供信息交换的通信方式，是互联网应用最广的服务。通过网络的电子邮件系统，用户可以以非常低廉的价格（不管发送到哪里，都只需负担网费）、非常快速的方式（几秒钟之内可以发送到世界上任何指定的目的地），与世界上任何一个角落的网络用户联系。
电子邮件可以是文字、图像、声音等多种形式。同时，用户可以得到大量免费的新闻、专题邮件，并轻松实现轻松的信息搜索。电子邮件的存在极大地方便了人与人之间的沟通与交流，促进了社会的发展。
邮件是基于SMTP协议的一种传输方式。
SMTP协议的工作过程可分为如下3个过程：
建立连接：在这一阶段，SMTP客户请求与服务器的25端口建立一个TCP连接。一旦连接建立，SMTP服务器和客户就开始相互通告自己的域名，同时确认对方的域名。邮件传送：利用命令，SMTP客户将邮件的源地址、目的地址和邮件的具体内容传递给SMTP服务器，SMTP服务器进行相应的响应并接收邮件。连接释放：SMTP客户发出退出命令，服务器在处理命令后进行响应，随后关闭TCP连接。 邮件可以包括主题，标题、内容、附件等，附件包括音视频等各种文件类型。
二、使用步骤 1.引入库 build.gradle（示例）：
// https://mvnrepository.com/artifact/com.sun.mail/javax.mail compile group: &#39;com.sun.mail&#39;, name: &#39;javax.mail&#39;, version: &#39;1.6.2&#39; Maven（示例）：
&lt;!-- https://mvnrepository.com/artifact/com.sun.mail/javax.mail --&gt; &lt;dependency&gt; &lt;groupId&gt;com.sun.mail&lt;/groupId&gt; &lt;artifactId&gt;javax.mail&lt;/artifactId&gt; &lt;version&gt;1.6.2&lt;/version&gt; &lt;/dependency&gt; 2.开启邮件服务商：POP3/SMTP服务 （以QQ邮箱为示例）：
发送QQ邮箱 进入QQ邮箱，选择设置–&gt;账户，找到 开启服务：POP3/SMTP服务，QQ会要求你发送XX短信到指定号码，发送成功后，QQ会返回一个授权码，用于第三方登录使用，授权码一定要记住，后面程序发送邮件要用，再次登录，他就不显示了。
package com.xxx.xxx.utils; import com.sun.mail.util.MailSSLSocketFactory; import org.apache.commons.lang.StringUtils; import javax.activation.DataHandler; import javax.activation.DataSource; import javax.activation.FileDataSource; import javax.mail.*; import javax.mail.internet.*; import java.io.UnsupportedEncodingException; import java.security.GeneralSecurityException; import java.util.Properties; /** * * Created by jambestwick1988@gmail." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ac98145ac90ef1c5ec4ab5c879ac5ca4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-08T12:40:46+08:00" />
<meta property="article:modified_time" content="2022-02-08T12:40:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaMail发送邮件</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>通过指令自动化的发送邮件</h3> 
<p><font color="#999AAA">提示：文章写完后，目录可以自动生成，如何生成可参考右边的帮助文档</font></p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_0" rel="nofollow">通过指令自动化的发送邮件</a></li></ul> 
  </li><li><a href="#_11" rel="nofollow">前言</a></li><li><a href="#Mail_20" rel="nofollow">一、Mail（邮件）</a></li><li><a href="#_37" rel="nofollow">二、使用步骤</a></li><li><ul><li><a href="#1_38" rel="nofollow">1.引入库</a></li><li><a href="#2POP3SMTP_60" rel="nofollow">2.开启邮件服务商：POP3/SMTP服务</a></li><li><ul><li><a href="#QQ_64" rel="nofollow">发送QQ邮箱</a></li><li><a href="#_353" rel="nofollow">发送网易邮箱</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_371" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr color="#000000" size='1"'> 
<h2><a id="_11"></a>前言</h2> 
<p><font color="#999AAA">JAVA作为BackEnd实现邮件的定时发送，批量发送对很多业务场景有这重要的意义。例如:给用户发送发票、订阅、广告、数据的报表推送、验证账号、验证码、定时回复等等业务场景均需要该功能。因此，简单总结了下自动化发送的注意点，及实现逻辑，望大家指正。原先的文章进行更新<br> <a href="https://blog.csdn.net/baidu_30084597/article/details/104917191">javaMail发送邮件</a></font></p> 
<hr color="#000000" size='1"'> 
<p><font color="#999AAA">正文内容</font></p> 
<h2><a id="Mail_20"></a>一、Mail（邮件）</h2> 
<p><font color="#999AAA">电子邮件是—种用电子手段提供信息交换的通信方式，是互联网应用最广的服务。通过网络的电子邮件系统，用户可以以非常低廉的价格（不管发送到哪里，都只需负担网费）、非常快速的方式（几秒钟之内可以发送到世界上任何指定的目的地），与世界上任何一个角落的网络用户联系。<br> 电子邮件可以是文字、图像、声音等多种形式。同时，用户可以得到大量免费的新闻、专题邮件，并轻松实现轻松的信息搜索。电子邮件的存在极大地方便了人与人之间的沟通与交流，促进了社会的发展。<br> 邮件是基于<a href="https://baike.baidu.com/item/SMTP" rel="nofollow">SMTP</a>协议的一种传输方式。<br> SMTP协议的工作过程可分为如下3个过程：</font></p> 
<ol><li>建立连接：在这一阶段，SMTP客户请求与服务器的25端口建立一个TCP连接。一旦连接建立，SMTP服务器和客户就开始相互通告自己的域名，同时确认对方的域名。</li><li>邮件传送：利用命令，SMTP客户将邮件的源地址、目的地址和邮件的具体内容传递给SMTP服务器，SMTP服务器进行相应的响应并接收邮件。</li><li>连接释放：SMTP客户发出退出命令，服务器在处理命令后进行响应，随后关闭TCP连接。</li></ol> 
<blockquote> 
 <p>邮件可以包括主题，标题、内容、附件等，附件包括音视频等各种文件类型。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/bc/f0/m4gIr8KO_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_37"></a>二、使用步骤</h2> 
<h3><a id="1_38"></a>1.引入库</h3> 
<p><font color="#999AAA">build.gradle（示例）：</font></p> 
<pre><code class="prism language-java">    <span class="token comment">// https://mvnrepository.com/artifact/com.sun.mail/javax.mail</span>
    compile group<span class="token operator">:</span> <span class="token string">'com.sun.mail'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'javax.mail'</span><span class="token punctuation">,</span> version<span class="token operator">:</span> <span class="token string">'1.6.2'</span>
</code></pre> 
<p><font color="#999AAA">Maven（示例）：</font></p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mvnrepository<span class="token punctuation">.</span>com<span class="token operator">/</span>artifact<span class="token operator">/</span>com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>mail<span class="token operator">/</span>javax<span class="token punctuation">.</span>mail <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>mail<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>javax<span class="token punctuation">.</span>mail<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.6</span><span class="token number">.2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

</code></pre> 
<h3><a id="2POP3SMTP_60"></a>2.开启邮件服务商：POP3/SMTP服务</h3> 
<p><font color="#999AAA">（以QQ邮箱为示例）：</font></p> 
<ol><li> <h4><a id="QQ_64"></a>发送QQ邮箱</h4> </li></ol> 
<p>进入QQ邮箱，选择设置–&gt;账户，找到 开启服务：POP3/SMTP服务，QQ会要求你发送XX短信到指定号码，发送成功后，QQ会返回一个授权码，用于第三方登录使用，<font color="red"><strong>授权码一定要记住，后面程序发送邮件要用</strong></font>，再次登录，他就不显示了。<br> <img src="https://images2.imgbox.com/1f/70/pMqxKBEO_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d3/c5/Y1A44akl_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>mail<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">MailSSLSocketFactory</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>activation<span class="token punctuation">.</span></span><span class="token class-name">DataHandler</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>activation<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>activation<span class="token punctuation">.</span></span><span class="token class-name">FileDataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>mail<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>mail<span class="token punctuation">.</span>internet<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">UnsupportedEncodingException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">GeneralSecurityException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * * Created by jambestwick1988@gmail.com
 * * github: jambestwick
 * * on 2020/3/11
 * 发送邮件工具
 * *
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SendMailAcceUtils</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 发送带附件的邮件
     *
     * @param receive  收件人
     * @param subject  邮件主题
     * @param msg      邮件内容
     * @param filename 附件地址，本地文件
     * @return boolean
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">sendQQMail</span><span class="token punctuation">(</span><span class="token class-name">String</span> receive<span class="token punctuation">,</span> <span class="token class-name">String</span> subject<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token class-name">String</span> filename<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>receive<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 发件人电子邮箱</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> from <span class="token operator">=</span> <span class="token string">"258702177@qq.com"</span><span class="token punctuation">;</span>
        <span class="token comment">// 发件人电子邮箱授权码</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> pass <span class="token operator">=</span> <span class="token string">"xxxxxxxxxuuxxxxx"</span><span class="token punctuation">;</span>

        <span class="token comment">// 指定发送邮件的主机为 smtp.qq.com</span>
        <span class="token class-name">String</span> host <span class="token operator">=</span> <span class="token string">"smtp.qq.com"</span><span class="token punctuation">;</span> <span class="token comment">// 邮件服务器</span>

        <span class="token comment">// 获取系统属性</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 设置邮件服务器</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.host"</span><span class="token punctuation">,</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.transport.protocol"</span><span class="token punctuation">,</span> <span class="token string">"smtp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 连接协议</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.host"</span><span class="token punctuation">,</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 主机名</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.port"</span><span class="token punctuation">,</span> <span class="token number">465</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 端口号</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.auth"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.ssl.enable"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置是否使用ssl安全连接 ---一般都使用</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.debug"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置是否显示debug信息 true 会在控制台显示相关信息</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 得到回话对象</span>
            <span class="token class-name">Session</span> session <span class="token operator">=</span> <span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 获取邮件对象</span>
            <span class="token class-name">Message</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessage</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置发件人邮箱地址</span>
            message<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InternetAddress</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置收件人邮箱地址</span>
            <span class="token comment">//message.setRecipients(Message.RecipientType.TO, new InternetAddress[]{new InternetAddress(receive), new InternetAddress(receive), new InternetAddress(receive)});</span>
            message<span class="token punctuation">.</span><span class="token function">setRecipient</span><span class="token punctuation">(</span><span class="token class-name">Message<span class="token punctuation">.</span>RecipientType</span><span class="token punctuation">.</span>TO<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InternetAddress</span><span class="token punctuation">(</span>receive<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一个收件人</span>
            <span class="token comment">// 设置邮件标题</span>
            message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 创建消息部分</span>
            <span class="token class-name">BodyPart</span> messageBodyPart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeBodyPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 消息</span>
            messageBodyPart<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 创建多重消息</span>
            <span class="token class-name">Multipart</span> multipart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMultipart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 设置文本消息部分</span>
            multipart<span class="token punctuation">.</span><span class="token function">addBodyPart</span><span class="token punctuation">(</span>messageBodyPart<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 附件部分</span>
            messageBodyPart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeBodyPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置要发送附件的文件路径</span>
            <span class="token class-name">DataSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileDataSource</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            messageBodyPart<span class="token punctuation">.</span><span class="token function">setDataHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DataHandler</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// messageBodyPart.setFileName(filename);</span>
            <span class="token comment">// 处理附件名称中文（附带文件路径）乱码问题</span>
            messageBodyPart<span class="token punctuation">.</span><span class="token function">setFileName</span><span class="token punctuation">(</span><span class="token class-name">MimeUtility</span><span class="token punctuation">.</span><span class="token function">encodeText</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            multipart<span class="token punctuation">.</span><span class="token function">addBodyPart</span><span class="token punctuation">(</span>messageBodyPart<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 发送完整消息</span>
            message<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>multipart<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 得到邮差对象</span>
            <span class="token class-name">Transport</span> transport <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getTransport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 连接自己的邮箱账户</span>
            transport<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> pass<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 密码为QQ邮箱开通的stmp服务后得到的客户端授权码</span>
            <span class="token comment">// 发送邮件</span>
            transport<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getAllRecipients</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            transport<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">MessagingException</span> <span class="token operator">|</span> <span class="token class-name">UnsupportedEncodingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/***
     * 不带有附件的方法
     * 可以将发送者封装提取出来，作为入参
     * **/</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">sendQQMailWithOutFile</span><span class="token punctuation">(</span><span class="token class-name">String</span> receive<span class="token punctuation">,</span> <span class="token class-name">String</span> subject<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>receive<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 发件人电子邮箱</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> from <span class="token operator">=</span> <span class="token string">"258702177@qq.com"</span><span class="token punctuation">;</span>
        <span class="token comment">// 发件人电子邮箱授权码</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> pass <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>

        <span class="token comment">// 指定发送邮件的主机为 smtp.qq.com</span>
        <span class="token class-name">String</span> host <span class="token operator">=</span> <span class="token string">"smtp.qq.com"</span><span class="token punctuation">;</span> <span class="token comment">// 邮件服务器</span>

        <span class="token comment">// 获取系统属性</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 设置邮件服务器</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.host"</span><span class="token punctuation">,</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.transport.protocol"</span><span class="token punctuation">,</span> <span class="token string">"smtp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 连接协议</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.host"</span><span class="token punctuation">,</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 主机名</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.port"</span><span class="token punctuation">,</span> <span class="token number">465</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 端口号</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.auth"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.ssl.enable"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置是否使用ssl安全连接 ---一般都使用</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.debug"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置是否显示debug信息 true 会在控制台显示相关信息</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 得到回话对象</span>
            <span class="token class-name">Session</span> session <span class="token operator">=</span> <span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 获取邮件对象</span>
            <span class="token class-name">Message</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessage</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置发件人邮箱地址</span>
            message<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InternetAddress</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置收件人邮箱地址</span>
            <span class="token comment">//message.setRecipients(Message.RecipientType.TO, new InternetAddress[]{new InternetAddress(receive), new InternetAddress(receive), new InternetAddress(receive)});</span>
            message<span class="token punctuation">.</span><span class="token function">setRecipient</span><span class="token punctuation">(</span><span class="token class-name">Message<span class="token punctuation">.</span>RecipientType</span><span class="token punctuation">.</span>TO<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InternetAddress</span><span class="token punctuation">(</span>receive<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一个收件人</span>
            <span class="token comment">// 设置邮件标题</span>
            message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 创建消息部分</span>
            <span class="token class-name">BodyPart</span> messageBodyPart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeBodyPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 消息</span>
            messageBodyPart<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 创建多重消息</span>
            <span class="token class-name">Multipart</span> multipart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMultipart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 设置文本消息部分</span>
            multipart<span class="token punctuation">.</span><span class="token function">addBodyPart</span><span class="token punctuation">(</span>messageBodyPart<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 发送完整消息</span>
            message<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>multipart<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 得到邮差对象</span>
            <span class="token class-name">Transport</span> transport <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getTransport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 连接自己的邮箱账户</span>
            transport<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> pass<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 密码为QQ邮箱开通的stmp服务后得到的客户端授权码</span>
            <span class="token comment">// 发送邮件</span>
            transport<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getAllRecipients</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            transport<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">MessagingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @param send 发送者邮箱
     * @param authCode 授权码
     * @param receive 接收者邮箱
     * @param subject 邮件主题
     * @param filename 本地附件
     * **/</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">send126Mail</span><span class="token punctuation">(</span><span class="token class-name">String</span> send<span class="token punctuation">,</span> <span class="token class-name">String</span> authCode<span class="token punctuation">,</span> <span class="token class-name">String</span> receive<span class="token punctuation">,</span> <span class="token class-name">String</span> subject<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token class-name">String</span> filename<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>receive<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 发件人电子邮箱</span>
        <span class="token class-name">PasswordAuthentication</span> passwordAuthentication <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PasswordAuthentication</span><span class="token punctuation">(</span>send<span class="token punctuation">,</span> authCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 指定发送邮件的主机为 smtp.126.com</span>
        <span class="token class-name">String</span> host <span class="token operator">=</span> <span class="token string">"smtp.126.com"</span><span class="token punctuation">;</span> <span class="token comment">// 邮件服务器</span>

        <span class="token comment">// 获取系统属性</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 创建参数配置, 用于连接邮件服务器的参数配置</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.transport.protocol"</span><span class="token punctuation">,</span> <span class="token string">"smtp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 连接协议</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.host"</span><span class="token punctuation">,</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设 置 邮 件服 务 器 主 机 名</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"mail.host"</span><span class="token punctuation">,</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.host"</span><span class="token punctuation">,</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 主机名</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.port"</span><span class="token punctuation">,</span> <span class="token number">465</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 端口号</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.auth"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.ssl.enable"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置是否使用ssl安全连接 ---一般都使用</span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.debug"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置是否显示debug信息 true 会在控制台显示相关信息</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//开 启 S S L 加 密，否 则 会 失 败</span>
            <span class="token class-name">MailSSLSocketFactory</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MailSSLSocketFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sf<span class="token punctuation">.</span><span class="token function">setTrustAllHosts</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.ssl.socketFactory"</span><span class="token punctuation">,</span> sf<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//解决附件文件名过长的问题</span>
            properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.mime.splitlongparameters"</span><span class="token punctuation">,</span> <span class="token string">"false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 2. 根据配置创建会话对象, 用于和邮件服务器交互</span>
            <span class="token class-name">Session</span> session <span class="token operator">=</span> <span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>properties<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Authenticator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">protected</span> <span class="token class-name">PasswordAuthentication</span> <span class="token function">getPasswordAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">return</span> passwordAuthentication<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            session<span class="token punctuation">.</span><span class="token function">setDebug</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                 <span class="token comment">// 设置为debug模式, 可以查看详细的发送 log</span>
            <span class="token comment">// 3. 创建一封邮件</span>
            <span class="token class-name">Message</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessage</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置发件人邮箱地址</span>
            message<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InternetAddress</span><span class="token punctuation">(</span>send<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置收件人邮箱地址</span>
            <span class="token comment">//message.setRecipients(Message.RecipientType.TO, new InternetAddress[]{new InternetAddress(receive), new InternetAddress(receive), new InternetAddress(receive)});</span>
            message<span class="token punctuation">.</span><span class="token function">setRecipient</span><span class="token punctuation">(</span><span class="token class-name">Message<span class="token punctuation">.</span>RecipientType</span><span class="token punctuation">.</span>TO<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InternetAddress</span><span class="token punctuation">(</span>receive<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一个收件人</span>
            <span class="token comment">// 设置邮件标题</span>
            message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 创建消息部分</span>
            <span class="token class-name">BodyPart</span> messageBodyPart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeBodyPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 消息</span>
            messageBodyPart<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 创建多重消息</span>
            <span class="token class-name">Multipart</span> multipart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMultipart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 设置文本消息部分</span>
            multipart<span class="token punctuation">.</span><span class="token function">addBodyPart</span><span class="token punctuation">(</span>messageBodyPart<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 附件部分</span>
            messageBodyPart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeBodyPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置要发送附件的文件路径</span>
            <span class="token class-name">DataSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileDataSource</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
            messageBodyPart<span class="token punctuation">.</span><span class="token function">setDataHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DataHandler</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// messageBodyPart.setFileName(filename);</span>
            <span class="token comment">// 处理附件名称中文（附带文件路径）乱码问题</span>
            messageBodyPart<span class="token punctuation">.</span><span class="token function">setFileName</span><span class="token punctuation">(</span><span class="token class-name">MimeUtility</span><span class="token punctuation">.</span><span class="token function">encodeText</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            multipart<span class="token punctuation">.</span><span class="token function">addBodyPart</span><span class="token punctuation">(</span>messageBodyPart<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 发送完整消息</span>
            message<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>multipart<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 4. 根据 Session 获取邮件传输对象</span>
            <span class="token class-name">Transport</span> transport <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getTransport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 5. 使用 邮箱账号 和 密码 连接邮件服务器, 这里认证的邮箱必须与 message 中的发件人邮箱一致, 否则报错</span>
            <span class="token comment">//</span>
            <span class="token comment">//    PS_01: 成败的判断关键在此一句, 如果连接服务器失败, 都会在控制台输出相应失败原因的 log,</span>
            <span class="token comment">//           仔细查看失败原因, 有些邮箱服务器会返回错误码或查看错误类型的链接, 根据给出的错误</span>
            <span class="token comment">//           类型到对应邮件服务器的帮助网站上查看具体失败原因。</span>
            <span class="token comment">//</span>
            <span class="token comment">//    PS_02: 连接失败的原因通常为以下几点, 仔细检查代码:</span>
            <span class="token comment">//           (1) 邮箱没有开启 SMTP 服务;</span>
            <span class="token comment">//           (2) 邮箱密码错误, 例如某些邮箱开启了独立密码;</span>
            <span class="token comment">//           (3) 邮箱服务器要求必须要使用 SSL 安全连接;</span>
            <span class="token comment">//           (4) 请求过于频繁或其他原因, 被邮件服务器拒绝服务;</span>
            <span class="token comment">//           (5) 如果以上几点都确定无误, 到邮件服务器网站查找帮助。</span>
            <span class="token comment">//</span>
            <span class="token comment">//    PS_03: 仔细看log, 认真看log, 看懂log, 错误原因都在log已说明。</span>
            transport<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>passwordAuthentication<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwordAuthentication<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 密码为126邮箱开通的stmp服务后得到的客户端授权码</span>
            <span class="token comment">// 6. 发送邮件, 发到所有的收件地址, message.getAllRecipients() 获取到的是在创建邮件对象时添加的所有收件人, 抄送人, 密送人</span>
            transport<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getAllRecipients</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 7. 关闭连接</span>
            transport<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">MessagingException</span> <span class="token operator">|</span> <span class="token class-name">UnsupportedEncodingException</span> <span class="token operator">|</span> <span class="token class-name">GeneralSecurityException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<ol start="2"><li> <h4><a id="_353"></a>发送网易邮箱</h4> </li></ol> 
<p>同理先进入邮箱，申请SMTP授权码，<font color="red"><strong>授权码一定要记住</strong></font> <img src="https://images2.imgbox.com/ed/0d/61PIrjBe_o.png" alt="在这里插入图片描述"><br> 测试代码：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>mail<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>mail<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">SendMailAcceUtils</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">SendMailAcceUtils</span><span class="token punctuation">.</span><span class="token function">sendQQMailWithOutFile</span><span class="token punctuation">(</span><span class="token string">"xxx@outlook.com"</span><span class="token punctuation">,</span><span class="token string">"testTemp"</span><span class="token punctuation">,</span><span class="token string">"web3j"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SendMailAcceUtils</span><span class="token punctuation">.</span><span class="token function">send126Mail</span><span class="token punctuation">(</span><span class="token string">"xxx@126.com"</span><span class="token punctuation">,</span><span class="token string">"xxxx"</span><span class="token punctuation">,</span><span class="token string">"xxx@gmail.com"</span><span class="token punctuation">,</span><span class="token string">"web3j"</span><span class="token punctuation">,</span><span class="token string">"wexxxx"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr color="#000000" size='1"'> 
<h2><a id="_371"></a>总结</h2> 
<p><font color="#999AAA">提示：亲测可用。<br> 项目放在github上，喜欢自取。地址:<a href="https://github.com/ETCPark/JavaMail">https://github.com/ETCPark/JavaMail</a></font></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/14b516fdcaf3a81295fbe09f121700a1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue项目中出现cannot get/的解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e373b701e2902b4a527bb1c5bf824903/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">百度地图的Referer白名单如何填写</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>