<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux 面试宝典 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux 面试宝典" />
<meta property="og:description" content="Linux 面试宝典 Linux面试宝典 **Linux 面试宝典**一、计算机基础部分网络部分后续再不断更新…… 二、Linux基础部分Linxu文本处理三剑客文本处理三剑客之grep文本处理三剑客之sed文本处理三剑客之awk Linxu脚本部分Linxu的各种服务后续不断更新中…… 一、计算机基础部分 1.第一台计算机诞生的时间为：1946年。
2.冯诺依曼体系体系结构。
数字计算机的数制采用二进制，bit位，byte字节 1byte=8bit计算机应该按照顺序执行计算机硬件由运算器、控制器、存储器、输入设备和输出设备五大部分组成。 3.二进制和十进制转换。
二进制和十进制之间转换可根据下表操作。
2^0=1=1b2^1=2=10b2^2=4=100b2^3=8=1000b2^4=16=10000b2^5=32=100000b2^6=64=1000000b2^7=128=10000000b2^8=256=100000000b2^9=512=1000000000b2^10=1024=10000000000b 4.Unix的哲学思想？
一切都是一个文件（包括硬件）小型，单一用途的程序链接程序，共同完成复杂的任务避免令人困惑的用户界面配置数据存储在文件中 5.硬盘存储术语CHS：
head：磁头 磁头数=盘面数track：磁道 磁道数=柱面数sector：扇区，512bytescylinder：柱面 1柱面=512sector数/trackhead数 大概8M 6.识别SSD和机械硬盘类型？
备注：1表示机械盘，0表示SSD盘
#lsblk -d -o name,rota NAME ROTA sda 1 sdb 1 sdc 1 7.MBR分区：使用32位表示扇区数，分区的磁盘不能超过2T。MBR分区中一块硬盘最多有4个主分区，也可以3主分区&#43;1个扩展分区，多个逻辑分区。主分区和扩展分区对应的1-4，逻辑分区从5开始。
8.GPT分区，支持128个分区，使用64位，支持8Z
UEFI统一可扩展固件接口，硬件支持GPT，是得操作系统可以使用。
9.管理磁盘常用命令：
lsblk --&gt;列出块设备
创建分区命令：
fdisk：管理MBR分区
gdisk：管理GPT分区
parted：高级分区，可以是交互式或非交互式
注意：parted的操作都是实时生效的，小心使用。
partprobe：更新内存中的磁盘分区表版本，适用于处CentOS6以为的其他版本5,7,8
10.mount挂载：
默认权限相当于rw, suid, dev, exec, auto, nouser, async
挂载规则:
一个挂载点同一时间只能挂载一个设备
一个挂载点同一时间挂载了多个设备，只能看到最后一个设备的数据，其它设备上的数据将被隐藏
一个设备可以同时挂载到多个挂载点
通常挂载点一般是已存在空的目录
将挂载保存到 /etc/fstab 中可以下次开机时，自动启用挂载
11.swap交换分区：
创建交换分区或者文件使用mkswap写入特殊签名在/etc/fstab文件中添加适当的条目使用swapon -a 激活交换空间 swapon 启用交换分区。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/86257a3c3b9f5d52ac98e5aac1b9b072/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-10T19:41:55+08:00" />
<meta property="article:modified_time" content="2022-02-10T19:41:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux 面试宝典</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Linux__0"></a><strong>Linux 面试宝典</strong></h2> 
<p></p> 
<div class="toc"> 
 <h4>Linux面试宝典</h4> 
 <ul><li><a href="#Linux__0" rel="nofollow">**Linux 面试宝典**</a></li><li><ul><li><ul><li><a href="#_3" rel="nofollow">一、计算机基础部分</a></li><li><ul><li><ul><li><a href="#_117" rel="nofollow">网络部分</a></li><li><a href="#_385" rel="nofollow">后续再不断更新……</a></li></ul> 
    </li></ul> 
    </li><li><a href="#Linux_386" rel="nofollow">二、Linux基础部分</a></li><li><ul><li><ul><li><a href="#Linxu_654" rel="nofollow">Linxu文本处理三剑客</a></li><li><ul><li><a href="#grep_655" rel="nofollow">文本处理三剑客之grep</a></li><li><a href="#sed_792" rel="nofollow">文本处理三剑客之sed</a></li><li><a href="#awk_1028" rel="nofollow">文本处理三剑客之awk</a></li></ul> 
      </li><li><a href="#Linxu_1049" rel="nofollow">Linxu脚本部分</a></li><li><a href="#Linxu_1218" rel="nofollow">Linxu的各种服务</a></li><li><a href="#_1223" rel="nofollow">后续不断更新中……</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_3"></a>一、计算机基础部分</h4> 
<p>1.第一台计算机诞生的时间为：1946年。<br> 2.冯诺依曼体系体系结构。</p> 
<ul><li>数字计算机的数制采用二进制，bit位，byte字节 1byte=8bit</li><li>计算机应该按照顺序执行</li><li>计算机硬件由运算器、控制器、存储器、输入设备和输出设备五大部分组成。</li></ul> 
<p>3.二进制和十进制转换。<br> 二进制和十进制之间转换可根据下表操作。</p> 
<ul><li>2^0=1=1b</li><li>2^1=2=10b</li><li>2^2=4=100b</li><li>2^3=8=1000b</li><li>2^4=16=10000b</li><li>2^5=32=100000b</li><li>2^6=64=1000000b</li><li>2^7=128=10000000b</li><li>2^8=256=100000000b</li><li>2^9=512=1000000000b</li><li>2^10=1024=10000000000b</li></ul> 
<p>4.Unix的哲学思想？</p> 
<ul><li>一切都是一个文件（包括硬件）</li><li>小型，单一用途的程序</li><li>链接程序，共同完成复杂的任务</li><li>避免令人困惑的用户界面</li><li>配置数据存储在文件中</li></ul> 
<p>5.硬盘存储术语CHS：</p> 
<ul><li>head：磁头 磁头数=盘面数</li><li>track：磁道 磁道数=柱面数</li><li>sector：扇区，512bytes</li><li>cylinder：柱面 1柱面=512<em>sector数/track</em>head数 大概8M</li></ul> 
<p>6.识别SSD和机械硬盘类型？<br> 备注：1表示机械盘，0表示SSD盘</p> 
<pre><code class="prism language-bash"><span class="token comment">#lsblk -d -o name,rota</span>
NAME ROTA
sda     <span class="token number">1</span>
sdb     <span class="token number">1</span>
sdc     <span class="token number">1</span>
</code></pre> 
<p>7.MBR分区：使用32位表示扇区数，分区的磁盘不能超过2T。MBR分区中一块硬盘最多有4个主分区，也可以3主分区+1个扩展分区，多个逻辑分区。主分区和扩展分区对应的1-4，逻辑分区从5开始。</p> 
<p>8.GPT分区，支持128个分区，使用64位，支持8Z<br> UEFI统一可扩展固件接口，硬件支持GPT，是得操作系统可以使用。</p> 
<p>9.管理磁盘常用命令：<br> lsblk --&gt;列出块设备<br> 创建分区命令：<br> fdisk：管理MBR分区<br> gdisk：管理GPT分区<br> parted：高级分区，可以是交互式或非交互式<br> 注意：parted的操作都是实时生效的，小心使用。<br> partprobe：更新内存中的磁盘分区表版本，适用于处CentOS6以为的其他版本5,7,8</p> 
<p>10.mount挂载：<br> 默认权限相当于rw, suid, dev, exec, auto, nouser, async<br> 挂载规则:<br> 一个挂载点同一时间只能挂载一个设备<br> 一个挂载点同一时间挂载了多个设备，只能看到最后一个设备的数据，其它设备上的数据将被隐藏<br> 一个设备可以同时挂载到多个挂载点<br> 通常挂载点一般是已存在空的目录</p> 
<p>将挂载保存到 /etc/fstab 中可以下次开机时，自动启用挂载</p> 
<p>11.swap交换分区：</p> 
<ol><li>创建交换分区或者文件</li><li>使用mkswap写入特殊签名</li><li>在/etc/fstab文件中添加适当的条目</li><li>使用swapon -a 激活交换空间</li></ol> 
<p>swapon 启用交换分区。<br> swapoff 关闭交换分区。</p> 
<pre><code class="prism language-java"><span class="token operator">-</span>a：激活所有的交换分区
<span class="token operator">-</span>p PRIORITY：指定优先级，也可在<span class="token operator">/</span>etc<span class="token operator">/</span>fstab 在第<span class="token number">4</span>列指定：pri<span class="token operator">=</span>value
</code></pre> 
<p>SWAP交换分区可以指定swap分区0到32767的优先级，值越大优先级越高<br> 系统默认从-1开始，每加一个新的交换分区，给该交换分区的优先级减一</p> 
<p>12.官方推荐系统swap空间：</p> 
<table><thead><tr><th>系统中的RAM量</th><th>推荐的swap空间</th><th>允许休眠的建议swap空间大小</th></tr></thead><tbody><tr><td>低于2GB</td><td>RAM量的2倍数</td><td>RAM容量的三倍</td></tr><tr><td>2GB-8GB</td><td>等于RAM量</td><td>RAM量的倍数</td></tr><tr><td>8GB-64GB</td><td>4GB到RAM容量的0.5倍</td><td>RAM容量的1.5倍</td></tr><tr><td>超过64GB</td><td>独立负载（至少4GB）</td><td>不建议使用休眠功能</td></tr></tbody></table> 
<p>后面搭建k8s时，需要禁用swap<br> 13. RAID0、RAID1、RAID5、RAID6、RAID10之间的区别：</p> 
<table><thead><tr><th>RAID等级</th><th>最少硬盘</th><th>最大容错</th><th>可用容量</th><th>读取性能</th><th>写入性能</th><th>安全性</th><th>目的</th><th>应用场景</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>0</td><td>n</td><td>n</td><td>n</td><td>一个硬盘异常，全部硬盘都会异常</td><td>追求最大容量、速度</td><td>影片剪接，缓存用途</td></tr><tr><td>1</td><td>2</td><td>n-1</td><td>1</td><td>n</td><td>1</td><td>高，一个正常即可</td><td>追求最大安全性</td><td>个人、企业备份</td></tr><tr><td>5</td><td>3</td><td>1</td><td>n-1</td><td>n-1</td><td>n-1</td><td>高</td><td>最求最大容量、最小预算</td><td>个人、企业备份</td></tr><tr><td>6</td><td>4</td><td>2</td><td>n-2</td><td>n-2</td><td>n-2</td><td>安全性较RAID5高</td><td>同RAID5，但教安全</td><td>个人、企业备份</td></tr><tr><td>10</td><td>4</td><td></td><td></td><td></td><td></td><td>高</td><td>综合RAID0/1优点，理论速度较快</td><td>大型数据库、服务器</td></tr></tbody></table> 
<p>14.df与du的区别？什么时间df&gt;du;什么时间df&lt;du<br> 区别：<br> 文件系统空间实际真正占用等信息的查看工具 df<br> 查看某目录总体空间实际占用状态 du，显示指定目录下面各个子目录的大小,单位为KB<br> 当删除文件但不释放空间时,有什么不同?(du 查看文件空间释放,df不释放)<br> du查看文件以删除，空间释放；df查看文件系统不释放。<br> du从文件的角度看，df从分区空间的使用角度看（df可用看到的时真实的）。</p> 
<p>df&gt;du是在分区刚挂好的时候，默认地df&gt;du<br> df&lt;du是在分区目录下挂了新的设备时</p> 
<h6><a id="_117"></a>网络部分</h6> 
<p>1.网络的功能和优点</p> 
<ul><li> <p>数据和应用程序</p> </li><li> <p>资源</p> </li><li> <p>网络存储</p> </li><li> <p>备份设备<br> 2.网络分类：</p> </li><li> <p>广域网</p> </li><li> <p>城域网</p> </li><li> <p>局域网</p> </li></ul> 
<p>3.开放系统互联OSI模型：</p> 
<table><thead><tr><th></th><th>分层名称</th><th>功能</th><th>每层功能概览</th><th>对应物理设备及对应的协议</th><th>单位</th></tr></thead><tbody><tr><td>7</td><td>应用层</td><td>针对特定应用的协议</td><td>电子邮件、远程登陆、文件传输</td><td>HPPT、FTP、SSH、MySQl等</td><td>消息 message</td></tr><tr><td>6</td><td>表示层</td><td>设备固有数据格式和网络标准数据格式的转换。</td><td>接收不同变现形式的信息，如文字、图像、声音等</td><td></td><td>消息 message</td></tr><tr><td>5</td><td>会话层</td><td>通信管理。负责建立和断开通信连接。管理传输层一下的分层</td><td>何时建立连接，何时断开连接以及保持多久的连接</td><td></td><td>消息 message</td></tr><tr><td>4</td><td>传承层</td><td>管理两个节点之间的数据传输。负责可靠传输</td><td>是否有数据丢失？</td><td>TCP</td><td>数据段 segment</td></tr><tr><td>3</td><td>网络层</td><td>地址管理与路由选择</td><td>经过那个路由传递到目标地址？</td><td>路由器 IP</td><td>数据包 packet</td></tr><tr><td>2</td><td>数据链路层</td><td>互连设备之间传递和识别数据帧</td><td>数据帧与比特流之间的转换（分段发送）</td><td>交换机、 MAC</td><td>数据帧 frame</td></tr><tr><td>1</td><td>物理层</td><td>以“0”、“1”代表电压的高低，灯光的闪灭。界定连接器和网线的规格。</td><td>比特流与电子信号之间的切换。连接器与网线的规格</td><td></td><td>数据位 bit</td></tr></tbody></table> 
<p>4.网络的三种通讯模式：</p> 
<ol><li>unicast：单播，目标设备是一个</li><li>broadcast：广播，目标设备时所有</li><li>multicast：多播，组播，目标设备时多个</li></ol> 
<p>5.冲突域和广播域<br> 冲突域：两个网络设备同时发送数据,如果发生了冲突,则两个设备处于同一个冲突域,反之,则各自处于不同的冲突域<br> 广播域：一个网络设备发送广播，另一个设备收到了,则两个设备处于同一个广播域,反之,则各自处于不同的广播域</p> 
<p>6.网络的三种通讯机制：</p> 
<ol><li>单工通信：只有一个方向的通信，比如：收音机</li><li>半双工通信：通信双方都可以发送和接收信息，但不能同时发送，也不能同时接收，比如：对讲机</li><li>全双工通信：通信双方可以同时发送和同时接收，比如：手机</li></ol> 
<p>7.局域网的特点、功能、优点：<br> 特点：网络为一个单位所拥有；地理范围和站点数目均有限<br> 主要功能：资源共享和数据通信<br> 优点：能方便地共享昂贵的外部设备，主机以及软件、数据。从一个站点可以访问权威；便于系统的扩展和逐渐演变，各设备的位置可灵活的调整和改变；提高系统的可靠性、可用性、易用性。</p> 
<p>8.超5类线的双绞线（Twisted-Pair）网线线序<br> T568B和T568A<br> T568B的线序为：橙白、橙、绿白、蓝、蓝白、绿、棕白、棕<br> T568A的线序为：白绿 绿 白橙 蓝 白蓝 橙 白棕 棕</p> 
<p>9.网线线缆和接口</p> 
<ul><li>Twisted-Pair 双绞线—&gt;RJ-45 Connector和Jack</li><li>Coaxial</li><li>Fiber-Optic 光纤</li></ul> 
<p>10.网桥和交换机：<br> 网桥bridge：也叫桥接器，是连接两个局域网的一种存储/转发设备，根据MAC地址表对数据帧进行转发，可隔离碰撞域。网桥将网络的多个网段在数据链路层连接起来，并对网络数据帧进行管理<br> 交换机：是工作在OSI参考模型数据链路层的设备，外表和集线器相似<br> 它通过判断数据帧的目的MAC地址，从而将数据帧从合适端口发送出去<br> 交换机是通过MAC地址的学习和维护更新机制来实现数据帧的转发。<br> <strong>交换机的工作原理：</strong><br> （1）交换机根据收到数据帧中的源MAC地址建立该地址同交换机端口的映射，并将其写入MAC地址表中<br> （2）交换机将数据帧中的目的MAC地址同已建立的MAC地址表进行比较，以决定由哪个端口进行转发<br> （3）如数据帧中的目的MAC地址不在MAC地址表中，则向所有端口转发。这一过程称为泛洪（flood）<br> （4）广播帧和组播帧向所有的端口转发</p> 
<p>11.路由器：<br> 路由：把一个数据包从一个设备发送到不同网络里的另一个设备上去。这些工作依靠路由器来完成。路由器只关心网络的状态和决定网络中的最佳路径。路由的实现依靠路由器中的路由表来完成<br> 路由器功能：</p> 
<ul><li>工作在网络层</li><li>分隔广播域和冲突域</li><li>选择路由表中到达目标最好的路径</li><li>维护和检查路由信息</li><li>连接广域网</li></ul> 
<p>12.虚拟局域网VLAN<br> VLAN工作原理：虚拟局域网 VLAN 是由一些局域网网段构成的与物理位置无关的逻辑组。这些网段具有某些共同的需求。每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的工作站是属于哪一个 VLAN。虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网。</p> 
<p>13.VALN的优点：</p> 
<ol><li>更有效地共享网络资源。如果用交换机构成较大的局域网，大量的广播报文就会使网络性能下降。VLAN能将广播报文限制在本VLAN范围内，从而提升了网络的效能。</li><li>简化网络管理。当结点物理位置发生变化时，如跨越多个局域网，通过逻辑上配置VLAN即可形成网络设备的逻辑组，无需重新布线和改变IP地址等。这些逻辑组可以跨越一个或多个二层交换机。</li><li>提高网络的数据安全性。一个VLAN中的结点接收不到另一个VLAN中其他结点的帧。</li></ol> 
<p>虚拟局域网的实现技术<br> （1）基于端口的VLAN<br> （2）基于MAC地址的VLAN<br> （3）基于协议的VLAN<br> （4）基于网络地址的VLAN</p> 
<p>14.TCP/IP<br> Transmission Control Protocol/Internet Protocol 传输控制协议/因特网互联协议<br> TCP/IP是一个Protocol Stack，包括TCP、IP、UDP、ICMP、RIP、TELNET、FTP、SMTP、ARP等许多协议</p> 
<p>15.TCP/IP分层<br> TCP/IP4层模型<br> 应用层----&gt;应用层、表示层、会话层<br> 传输层----&gt;传输层<br> 互联网层----&gt;网络层<br> 网络接口层----&gt;数据链路层、物理层</p> 
<p>16.TCP/IP和OSI模型的比较<br> 相同点：两者都是以协议栈的概念为基础；协议栈种的协议批次相互独立；下层对上层提供服务。<br> 不同点：OSI是先有模型；TCP/IP 是先有协议，后有模型<br> OSI是国际标准，适用于各种协议；TCP/IP实际标准，只适用于TCP/IP网络；<br> 层次数量不同</p> 
<p>17.TCP和UDP</p> 
<table><thead><tr><th></th><th>Reliable</th><th>Best-Effort</th></tr></thead><tbody><tr><td>Connection Type</td><td>Connection-oriented</td><td>Connectionless</td></tr><tr><td>Protocol</td><td>TCP</td><td>UDP</td></tr><tr><td>Sequencing</td><td>Yes</td><td>No</td></tr><tr><td>Uses</td><td>E-mail、File sharing、Downloading</td><td>Voice streaming、Video streaming</td></tr></tbody></table> 
<p>18.TCP头结构（理解）<br> 源端口、目标端口：源/目标端口用16位表示的，可得计算机端口个数位：2^16个，即65536个<br> 序列号：表本报文段所发送数据的第一个字节的编号。TCP连接中所传送的字节流的每一个字节都会按顺序编号。由于序列号由32位表示，所以每2^32个字节，就会出现序列号回绕，再次从0 开始。<br> 确认号：表示接收方期望收到发送方下一个报文段的第一个字节数据的编号。也就是告诉发送方：我希望你（指发送方）下次发送的数据的第一个字节数据的编号为此确认号。<br> 数据偏移：表示TCP报文段的首部长度，该字段的单位是32位(即4个字节为计算单位），4位二进制最大表示15，所以数据偏移也就是TCP首部最大60字节<br> URG：表示本报文段中发送的数据是否包含紧急数据。后面的紧急指针字段（urgent pointer）只有当URG=1时才有效。<br> ACK：表示是否前面确认号字段是否有效。只有当ACK=1时，前面的确认号字段才有效。TCP规定，连接建立后，ACK必须为1,带ACK标志的TCP报文段称为确认报文段。<br> PSH：提示接收端应用程序应该立即从TCP接收缓冲区中读走数据，为接收后续数据腾出空间。如果为1，则表示对方应当立即把数据提交给上层应用，而不是缓存起来，如果应用程序不将接收到的数据读走，就会一直停留在TCP接收缓冲区中。<br> RST：如果收到一个RST=1的报文，说明与主机的连接出现了严重错误（如主机崩溃），必须释放连接，然后再重新建立连接。或者说明上次发送给主机的数据有问题，主机拒绝响应，带RST标志的TCP报文段称为复位报文段。<br> SYN：在建立连接时使用，用来同步序号。当SYN=1，ACK=0时，表示这是一个请求建立连接的报文段；当SYN=1，ACK=1时，表示对方同意建立连接。SYN=1，说明这是一个请求建立连接或同意建立连接的报文。只有在前两次握手中SYN才置为1，带SYN标志的TCP报文段称为同步报文段。<br> FIN：表示通知对方本端要关闭连接了，标记数据是否发送完毕。如果FIN=1，即告诉对方：“我的数据已经发送完毕，你可以释放连接了”，带FIN标志的TCP报文段称为结束报文段。<br> 窗口大小：表示现在允许对方发送的数据量，也就是告诉对方，从本报文段的确认号开始允许对方发送的数据量，达到此值，需要ACK确认后才能再继续传送后面数据，由Window size value * Window size scaling factor（此值在三次握手阶段TCP选项Window scale协商得到）得出此值。<br> 校验和：提供额外的可靠性。<br> 紧急指针：标记紧急数据在数据字段中的位置。<br> 选项部分：其最大长度可根据TCP首部长度进行推算。TCP首部长度用4位表示，选项部分最长为：(2^4-1)*4-20=40字节</p> 
<p>19.三次握手和四次挥手<br> TCP三次握手：客户A与服务器B通信<br> A主动向B发起请求SYN=1，seq=x<br> B收到后，返回一个SYN=1，ACK=1，seq=y，ack=x+1<br> 然后，A在给B发送一个ACK=1，seq=x+1，ack=y+1 确认建立连接，开始传递数据。<br> TCP四次挥手：客户端A与服务器B<br> A主动发起关闭FIN=1，seq=u 这时A处于终止等待状态（FIN-WAIT1）<br> B收到后返回一个ACK=1，seq=v，ack=u+1 这时B处于关闭等待状态(CLOSE-WAIT)<br> 这个时候可能还会有数据传送。等待数据传送完后<br> B在给A发个关闭确认请求FIN=1，ACK=1，seq=w，ack=u+1 这时B处于最后确认状态（LAST-ACK）A处于终止等待状态2（FIN-WAIT2）<br> A等待2s后返回确认断开ACK=1，seq=u+1，ack=w+1 A处于时间等待状态（TIME-WAIT）</p> 
<p>20.UDP特性<br> 工作在传输层、提供不可靠的网络访问、非面向连接协议、有限的错误检查、传输性能高、无数据恢复特性</p> 
<p>21.Internet协议</p> 
<ul><li>运行在OSI网络层</li><li>面向无连接的协议</li><li>独立处理数据包</li><li>分层编址</li><li>尽力而为传输</li><li>无数据恢复功能</li></ul> 
<ol start="22"><li><li></ol> 
<p>24</p> 
<p>25.IP地址可唯一标识IP网络中的每台设备，每台主机（计算机、网络设备、外围设备）必须有唯一的地址。（IP地址是一个32位二进制数）<br> IP地址由两部分组成<br> 网络 ID：标识网络，每个网段分配一个网络ID，处于高位<br> 主机 ID：标识单个主机，由组织分配给各设备，处于低位<br> IPv4地址格式：点分十进制记法</p> 
<p>26.IP地址分类</p> 
<ul><li> <p>A类：0-127<br> 网络ID位是最高8位,主机ID是24位低位<br> 网络数：126=2^7(可变是的网络ID位数)-2<br> 每个网络中的主机数：2^24-2=16777214<br> 默认子网掩码：255.0.0.0<br> 私网地址：10.0.0.0</p> </li><li> <p>B类：128-191<br> 网络ID位是最高16位,主机ID是16位低位<br> 网络数：2^14=16384<br> 每个网络中的主机数：2^16-2=65534<br> 默认子网掩码：255.255.0.0<br> 私网地址：172.16.0.0-172.31.0.0</p> </li><li> <p>C类：192-223<br> 网络数：2^21=2097152<br> 每个网络中的主机数：2^8-2=254<br> 默认子网掩码：255.255.255.0<br> 私网地址：192.168.0.0-192.168.255.0</p> </li><li> <p>D类：组（多）播，1110 0000 - 1110 1111.X.Y.Z: 224-239.X.Y.Z</p> </li><li> <p>保留未使用，240-255</p> </li></ul> 
<p>27.CIDR：无类域间路由，目前的网络已不再按A，B，C类划分网段，可以任意指定网段的范围，网络ID位不固定,按需指定 。<br> CIDR 无类域间路由表示法：IP/网络ID位数，如：172.16.0.100/16<br> netmask: 子网掩码 32bit二进制,和IP成对使用,对应于IP中网络ID为1,对应于主机ID为0</p> 
<p>28.子网掩码<br> 子网掩码的8位：<br> 128 64 32 16 8 4 2 1<br> ——————————<br> 1 0 0 0 0 0 0 0 =128<br> 1 1 0 0 0 0 0 0 =192<br> 1 1 1 0 0 0 0 0 =224<br> 1 1 1 1 0 0 0 0 =240<br> 1 1 1 1 1 0 0 0 =248<br> 1 1 1 1 1 1 0 0 =252<br> 1 1 1 1 1 1 1 0 =254<br> 1 1 1 1 1 1 1 1 =255</p> 
<p>29.相关公式</p> 
<ul><li>一个网络的最多的主机数＝2^主机ID位数-2</li><li>网络（段）数=2^网络ID中可变的位数</li><li>网络ID=IP与netmask</li></ul> 
<p>用自已的子网掩码分别和自已的IP及对方的IP相与，比较结果，相同则同一网络，不同则不同网段</p> 
<p>30.203.101.123.163/28</p> 
<ol><li>netmask: 255.255.255.240</li><li>主机数:2^(32-28)-2=14</li><li>IP范围:最小IP? 203.101.123.161最大IP?203.101.123.174</li></ol> 
<p>31.划分子网: 将一个大网(主机数量多,主机ID位多)分割成多个小网(主机数量少,主机ID位少) ,网络ID向主机ID借N位,将划分成个2^N子网</p> 
<p>32.中国移动10.0.0.0/8 给32个各省公司划分对应的子网。<br> 1）每个省公司的子网的netmask？ 2^5&gt;=32 借5位网络ID<br> 8+5=13<br> 255.248.0.0</p> 
<p>2)每个省公司的子网的主机数有多少？<br> 2^(32-13)-2=524286</p> 
<p>3）河南省得到第10个子网，网络ID？<br> 10.00000 000.0.0/13<br> 10.01001 000.0.0/13<br> 10.72.0.0/13</p> 
<p>4）河南省得到第10个子网的最小IP和最大的IP？<br> 10.01001 000.0.1<br> 10.01001 111.11111111.11111110<br> 10.72.0.1—10.79.255.254</p> 
<p>5）所有子网中最大，最小的子网的netid？<br> 10.00000 000.0.0/13 10.0.0.0/13<br> 10.11111 000.0.0/13 10.248.0.0/13</p> 
<p>33.计算公式<br> 主机数=2^主机ID-2<br> 网络数=2^可变网络ID<br> 网络ID=IP与netmask</p> 
<p>34.路由<br> 网络路由: 表示一个网段的路由<br> 主机路由: 表示一个主机的路由<br> 默认路由: 所有未知网段的路由 0.0.0.0/0</p> 
<p>路由表组成: 四个组成部分<br> 1)目标网络: 目标主机所在网络ID 172.16.0.0<br> 2)netmask:<br> 3)接口: 当前网络设备的出口<br> 4)网关: 下一个路由器的临近当前路由器的接口的IP,下一跳 next hop</p> 
<p>metric: 费用,值越小,优先级越高</p> 
<ol start="35"><li></ol> 
<h6><a id="_385"></a>后续再不断更新……</h6> 
<h4><a id="Linux_386"></a>二、Linux基础部分</h4> 
<p>1.什么是shell？<br> Shell是Linux系统的用户界面，提供了用户与内核进行交互操作的一种接口。它接收用户输入的命令并把它送入内核去执行。<br> Shell也被称为Linux的命令解释器，Shell本身是一个程序。<br> 2.Linux下的文件类型有：</p> 
<ul><li>-普通文件</li><li>d目录文件directory</li><li>l符号链接文件link</li><li>b块设备block</li><li>c字符设备character</li><li>p管道文件pipe</li><li>s套接字文件socket</li></ul> 
<p>3.软连接与硬链接的区别：</p> 
<table><thead><tr><th>区别</th><th>硬链接</th><th>软连接</th></tr></thead><tbody><tr><td>本质</td><td>硬链接本质是同一个文件</td><td>软件链接的本质不是同一个问题件</td></tr><tr><td>跨设备</td><td>不支持</td><td>支持</td></tr><tr><td>incode</td><td>相同</td><td>不同</td></tr><tr><td>链接数</td><td>创建新的硬链接，链接数会增加，删除硬链接，链接数会减少</td><td>创建或删除，链接数不会变化</td></tr><tr><td>文件夹</td><td>不支持</td><td>支持</td></tr><tr><td>相对路径</td><td>原始文件相对路径是相对于当前工作目录</td><td>原始文件的相对路径是相对于链接文件的相对路径</td></tr><tr><td>删除源文件</td><td>只是链接数减一，但链接文件的访问不受影响</td><td>链接文件将无法访问</td></tr><tr><td>文件类型</td><td>和源文件相同</td><td>链接文件和源文件无关</td></tr><tr><td>文件大小</td><td>和源文件相同</td><td>源文件的路径的长度</td></tr></tbody></table> 
<p>4.下面那个些选项不是将标准输出和错误都重定向到同一个文件中的（E）。<br> A.[root@centos8 ~]#ls /data /xxx &gt; /data/all.log 2&gt;&amp;1<br> B.[root@centos8 ~]#ls /data /xxx 2&gt; /data/all.log 1&gt;&amp;2<br> C.[root@centos8 ~]#ls /data /xxx &amp;&gt; /data/all.log<br> D.[root@centos8 ~]#ls /data /xxx &gt;&amp; /data/all.log<br> E.[root@centos8 ~]#ls /data /xxx 2&gt;&amp;1 &gt; /data/all.log</p> 
<p>5.案例1：提示空间满No space left on device，但df可以看到空间很多，为什么？<br> 答：因为改分区的incode号使用完了，小文件太多，清理掉不用的小文件就可以了。</p> 
<p>6.案例2：提示空间快满了，使用rm删除了很大的无用文件后，df依然看到空间不足，为什么？如何解决?<br> 答：因为使用rm删除的文件，可能被删除的文件还在被程序占用的。需要用 # lsof | grep deleted 命令找到被删除的文件。然后在kill掉相应的进程就行了。<br> 删除大文件，正确的姿势：</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat /dev/null &gt; /var/log/huge.log</span>
或
<span class="token comment">#&gt; /data/file.log</span>
</code></pre> 
<p>7.Linux中的目录和文件的权限区别？(分别说明读，写和执行权限的区别）</p> 
<table><thead><tr><th>区别类型</th><th>目录</th><th>文件</th></tr></thead><tbody><tr><td>读 ( r )</td><td>使用ls命令查看目录文件</td><td>使用文件类查看工具，如cat查看文件内容</td></tr><tr><td>写 ( w )</td><td>可以在目录下创建/删除文件及目录</td><td>可以修改文件中的内容</td></tr><tr><td>执行（ x ）</td><td>可cd目录，执行ls -l查看目录元数据（需要配合r权限）</td><td>可将文件在系统中运行</td></tr></tbody></table> 
<p>8.执行 cp /etc/issue /data/dir/ 所需要的最小权限？(ABCDE)<br> A./bin/cp 需要x权限<br> B./etc/ 需要x权限<br> C./etc/issue 需要r权限<br> D./data 需要x权限<br> E./data/dir 需要w,x权限</p> 
<p>9.误将 /bin/chmod 文件的执行权限删除，如何恢复？<br> 解决：两种办法，一种是直接把root用户设置ACL权限，另外一种是将root组设置ACL权限。</p> 
<p>10.ACL生效的顺序是？<br> 所有者，自定义用户，所属组/自定义组，其他人</p> 
<p>11.误删除了用户git的家目录，如何重建并恢复该用户家目录及相应的权限属性？</p> 
<pre><code>cp -a /etc/skel/. /home/git
chown git:git /home/git
chmod 700 /home/git
</code></pre> 
<p>12.Linux中新建文件和目录的默认权限为？<br> 新建文件的默认权限: 666-umask，如果所得结果某位存在执行（奇数）权限，则将其权限+1,偶数不变<br> 新建目录的默认权限: 777-umask<br> 非特权用户umask默认是 002<br> root的umask 默认是 022</p> 
<p>13.Linux安全模型：<br> 资源分派：<br> Authentication：认证，验证用户身份<br> Authorization：授权，不同的用户设置不同权限<br> Accouting|Audition：审计</p> 
<p>14.CentOS7/8中生成12位数的随机密码：</p> 
<pre><code>#tr -dc '[:alnum:]' &lt; /dev/urandom | head -c 12 
</code></pre> 
<p>15.CentOS6/7/8中生成sha512加密密码的方法：</p> 
<pre><code class="prism language-bash">CentOS6：
<span class="token punctuation">[</span>root@CentOS6 ~<span class="token punctuation">]</span><span class="token comment">#grub-crypt --sha-512</span>
CentOS7：
<span class="token punctuation">[</span>root@centos7-8 ~<span class="token punctuation">]</span><span class="token comment">#python -c 'import crypt,getpass;pw="&lt;密码&gt;";print(crypt.crypt(pw))'</span>
CentOS8：
<span class="token punctuation">[</span><span class="token number">20</span>:08:05 root@centos8 ~<span class="token punctuation">]</span><span class="token comment">#openssl passwd -6 &lt;密码&gt;</span>
</code></pre> 
<p>16.判断一个账户是否为管理员，通过该用户的uid号是否为0来判断。</p> 
<p>17.Linux系统中文本查看工具的命令有：cat、nl、tac、rev、more、less、head、tail等</p> 
<p>18.统计文件中客户访问前10名的IP信息</p> 
<pre><code>#cut -d' ' -f1 文件名 |sort |uniq -c| sort -nr | head
</code></pre> 
<p>备注：该文件的第一列为客户IP</p> 
<p>19.找到file1和file2文件中重复的行和不重复的行</p> 
<pre><code>#cat file1 file2 | sort | uniq -d		#重复的行
#cat file1 file2 | sort | uniq -u		#不重复的行
</code></pre> 
<p>或</p> 
<pre><code>#grep -f file1 file2	#找到两个文件相同行，将第一个文件作为正则表达式
</code></pre> 
<p>20.用正则表达式表示QQ、邮箱、手机号码：</p> 
<pre><code>QQ：\&lt;[0-9]{6,12}\&gt;

邮箱：[[:alnum:]_]+@[[:alnum:]_]+\.[[:alnum:]_]+

手机号：\&lt;1[356789][0-9]{9}\&gt;
</code></pre> 
<p>21.如何查看当前进程的环境变量？<br> 通过进程号查看对应的环境变量。</p> 
<pre><code class="prism language-bash"><span class="token comment">#pstree -p | grep sshd  </span>
           <span class="token operator">|</span>-sshd<span class="token punctuation">(</span><span class="token number">37685</span><span class="token punctuation">)</span>---sshd<span class="token punctuation">(</span><span class="token number">46034</span><span class="token punctuation">)</span>---sshd<span class="token punctuation">(</span><span class="token number">46036</span><span class="token punctuation">)</span>-+-bash<span class="token punctuation">(</span><span class="token number">46037</span><span class="token punctuation">)</span>-+-grep<span class="token punctuation">(</span><span class="token number">49593</span><span class="token punctuation">)</span>
<span class="token comment">#cat /proc/46037/environ</span>
</code></pre> 
<p>22.变量的分类：<br> 内置变量和自定义变量<br> 自定义变量又分为普通变量、环境变量、只读变量<br> 特殊变量：位置变量、状态变量<br> 位置变量：</p> 
<pre><code class="prism language-bash"><span class="token variable">$1</span> <span class="token variable">$2</span> <span class="token variable">$3</span>……
<span class="token variable">$*</span><span class="token operator">=</span><span class="token variable">$@</span>
<span class="token variable">$0</span>
<span class="token variable">$#</span>
</code></pre> 
<p>状态变量：</p> 
<pre><code class="prism language-bash"><span class="token comment">#echo $?</span>
<span class="token number">0</span>
</code></pre> 
<p>状态变量是查看上一条命令执行的结果，是否成功。<br> 结果为0，则成功；结果为1-255为失败。</p> 
<p>23.判断磁盘使用率大于80发告警邮件的小脚本。<br> 后续可以加定时任务，让其自动发邮件。</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat disk_check.sh </span>
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">WARING</span><span class="token operator">=</span><span class="token number">80</span>
<span class="token assign-left variable">DISK</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">df</span> <span class="token operator">|</span> <span class="token function">grep</span>  <span class="token string">"^/dev/sd"</span> <span class="token operator">|</span><span class="token function">grep</span> -Eo <span class="token string">'[0-9]+%'</span> <span class="token operator">|</span><span class="token function">grep</span> -Eo <span class="token string">'[0-9]+'</span> <span class="token operator">|</span> <span class="token function">sort</span> -rn <span class="token operator">|</span> <span class="token function">head</span> -n1<span class="token variable">`</span></span>

<span class="token punctuation">[</span> <span class="token variable">$DISK</span> -ge <span class="token variable">$WARING</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> Disk will be full <span class="token operator">|</span> mail -s <span class="token string">'Disk Warning'</span> QQ号@qq.com
</code></pre> 
<ol start="32"><li><li><li><li><li></ol> 
<p>24.利用扩展正则表达式分别表示0-9、10-99、100-199、200-249、250-255</p> 
<pre><code class="prism language-bash"><span class="token number">0</span>-9:<span class="token comment">#echo {0..255} |tr ' ' '\n'|grep -E '^[0-9]{1}$'</span>
<span class="token number">10</span>-99:<span class="token comment">#seq 255 |grep -E '^[0-9]{2}$'</span>
<span class="token number">100</span>-199:<span class="token comment">#seq 1 255 |grep -E '[0-9]{3}$' |grep '^1[0-9].*'</span>
<span class="token number">200</span>-249:<span class="token comment">#seq 255 |grep -E '^2[0-4][0-9]$'</span>
<span class="token number">250</span>-255:<span class="token comment">#seq 255 |grep -E '^25[0-5]$' </span>
</code></pre> 
<p>25.异域实现变量互换：</p> 
<pre><code class="prism language-bash"><span class="token comment">#x=10;y=20;x=$[x^y];y=$[x^y];x=$[x^y];echo x=$x,y=$y</span>
<span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token number">20</span>,y<span class="token operator">=</span><span class="token number">10</span>
</code></pre> 
<p>26.xargs命令的默认功能是接收键盘的标准输入，把输入的结果用xargs传给后续的命令作为参数，默认会将换行换成空格。用xargs可以把一些命令的参数动态生成。</p> 
<pre><code class="prism language-bash"><span class="token comment">#echo {1..5} </span>
<span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
<span class="token comment">#echo {1..5} |xargs -n1</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">4</span>
<span class="token number">5</span>
<span class="token comment">#echo {1..5} |xargs -n2</span>
<span class="token number">1</span> <span class="token number">2</span>
<span class="token number">3</span> <span class="token number">4</span>
<span class="token number">5</span>
<span class="token comment">#批量创建用户</span>
<span class="token comment">#for i in {1..10};do useradd user$i;done</span>
<span class="token comment">#批量删除用户</span>
<span class="token comment">#echo user{1..10}|xargs -n1 userdel -r</span>
<span class="token comment">#getent passwd</span>

<span class="token comment">#find /bin/ -perm /7000 |xargs ls -Sl</span>
-rwxr-sr-x. <span class="token number">1</span> root <span class="token function">screen</span>  <span class="token number">494040</span> May  <span class="token number">5</span> <span class="token number">18</span>:04 /bin/screen
---s--x--x. <span class="token number">1</span> root root    <span class="token number">165608</span> May <span class="token number">19</span>  <span class="token number">2020</span> /bin/sudo
-rwsr-xr-x. <span class="token number">1</span> root root     <span class="token number">84296</span> Aug <span class="token number">13</span>  <span class="token number">2020</span> /bin/gpasswd
-rwsr-xr-x. <span class="token number">1</span> root root     <span class="token number">79648</span> Aug <span class="token number">13</span>  <span class="token number">2020</span> /bin/chage
-rwsr-xr-x. <span class="token number">1</span> root root     <span class="token number">65904</span> Nov  <span class="token number">9</span>  <span class="token number">2019</span> /bin/crontab
-rwsr-xr-x. <span class="token number">1</span> root root     <span class="token number">61688</span> May <span class="token number">11</span>  <span class="token number">2019</span> /bin/at
……
<span class="token comment">#指定字符nul分隔（ascii的0分隔），默认空格分隔</span>
<span class="token comment">#find -type f -name "*.txt" -print0 |xargs -0 rm</span>
</code></pre> 
<p>27.使用xargs批量下载视频：<br> -P3指3个同时下载</p> 
<pre><code class="prism language-bash"><span class="token comment">#yum install python3-pip -y</span>
<span class="token comment">#pip3 install you-get</span>
<span class="token comment">#seq 10 | xargs -i -P3 you-get https://www.bilibili.com/video/BV1HZ4y1p7Bf?p={}</span>
</code></pre> 
<p>28.统计Linux最新内核的C源码行数：</p> 
<pre><code class="prism language-bash"><span class="token comment">#cd linux-5.14.5/</span>
<span class="token comment">#for file in `find -name "*.c"`;do line=`cat $file |wc -l`;let sum+=line;done;echo $sum</span>
<span class="token number">20925307</span>
或
<span class="token comment">#cat `find -name '*.c'` |wc -l</span>
<span class="token number">20925307</span>
或
<span class="token comment">#find -name "*.c" |xargs cat |wc -l</span>
<span class="token number">20925307</span>
</code></pre> 
<p>29.统计光盘BaseOS库目录下的rpm的架构类型及相应的包数量：</p> 
<pre><code class="prism language-bash"><span class="token comment">#pwd</span>
/misc/cd/BaseOS/Packages
<span class="token comment">#ls *.rpm |grep -Eo '[^.]+\.rpm$'|grep -Eo '^[^.]+' |sort |uniq -c</span>
    <span class="token number">396</span> i686
    <span class="token number">224</span> noarch
   <span class="token number">1074</span> x86_64
或
<span class="token comment">#ls *.rpm |rev|cut -d. -f2|rev |sort |uniq -c</span>
    <span class="token number">396</span> i686
    <span class="token number">224</span> noarch
   <span class="token number">1074</span> x86_64
或
<span class="token comment">#ls *.rpm |sed -nr 's/.*\.([^.]+)\.rpm$/\1/p' |sort | uniq -c</span>
    <span class="token number">396</span> i686
    <span class="token number">224</span> noarch
   <span class="token number">1074</span> x86_64
</code></pre> 
<ol start="30"><li></ol> 
<h6><a id="Linxu_654"></a>Linxu文本处理三剑客</h6> 
<h6><a id="grep_655"></a>文本处理三剑客之grep</h6> 
<p>1.过滤掉文本中#开头或空行：</p> 
<pre><code class="prism language-bash"><span class="token comment">#grep -v '^[[:space:]]*#' /etc/httpd/conf/httpd.conf | grep -v '^$' `</span>
或
<span class="token comment">#grep -vE '^[[:space:]]*#|^$' /etc/httpd/conf/httpd.conf</span>
</code></pre> 
<p>2.统计#ss -nta命令的状态出现的次数</p> 
<pre><code class="prism language-bash"><span class="token comment">#grep -v '^State' ss2.log |grep -Eo '^[[:alpha:]-]+\&gt;' |sort | uniq -c</span>
或
<span class="token comment">#grep -v '^State' ss2.log | cut -d' ' -f1 | sort | uniq -c</span>
</code></pre> 
<p>3.获取ss -nt命令下的连接IP数量：</p> 
<pre><code class="prism language-bash"><span class="token comment">#`ss -nt | grep -v '^State' | grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}:[0-9]+ *$'| grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}' |uniq -c`</span>
</code></pre> 
<p>4.获取文档中的年龄和：</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat user.txt </span>
<span class="token assign-left variable">xiaoming</span><span class="token operator">=</span><span class="token number">18</span>
<span class="token assign-left variable">xiaohong</span><span class="token operator">=</span><span class="token number">33</span>
<span class="token assign-left variable">wangwu</span><span class="token operator">=</span><span class="token number">25</span>
<span class="token assign-left variable">lisi</span><span class="token operator">=</span><span class="token number">22</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#cut -d'=' -f2 user.txt | paste -d+ -s|bc</span>
或
<span class="token comment">#grep -Eo '[0-9]+' user.txt |paste -d+ -s |bc</span>
或
<span class="token comment">#grep -Eo '[0-9]+' user.txt |tr '\n' + |grep -o '^.*[^+]' | bc</span>
</code></pre> 
<p>5.显示CentOS7上所有UID小于1000以内的用户名和UID</p> 
<pre><code class="prism language-bash"><span class="token function">cut</span> -d: -f1,3 /etc/passwd<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'^.*\:[0-9]\{1,3\}$'</span>
</code></pre> 
<p>6.获取Linux系统中的IP地址：</p> 
<pre><code class="prism language-bash"><span class="token comment">#ifconfig ens33| grep -i mask | grep -o '[0-9]\{1,3\}.[0-9]\{1,3\}.[0-9]\{1,3\}.[0-9]\{1,3\}' | head -1</span>
或
<span class="token comment">#ifconfig ens33 | grep -i mask | grep -o '\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}' | head -1</span>
或
<span class="token comment">#ifconfig ens33 | grep -i mask | grep -oE '([0-9]{1,3}\.){3}[0-9]{1,3}' | head -1 </span>
</code></pre> 
<p>7.利用df和grep，取出磁盘各分区利用率，并从大到小排序。</p> 
<pre><code class="prism language-bash"><span class="token comment">#df |grep -Eo "[0-9]{1,3}%" |sort -nr</span>
<span class="token number">100</span>%
<span class="token number">24</span>%
<span class="token number">6</span>%
<span class="token number">3</span>%
<span class="token number">2</span>%
<span class="token number">2</span>%
<span class="token number">1</span>%
<span class="token number">0</span>%
</code></pre> 
<p>8.添加用户bash、testbash、basher、sh、nologin(其shell为/sbin/nologin),找出/etc/passwd用户名和shell同名的行.</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat /etc/passwd |grep '\(^[[:alnum:]]\+\b\).*/\1$'</span>
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
nologin:x:968:967::/home/nologin:/sbin/nologin
或 扩展正则表达式：
<span class="token comment">#cat /etc/passwd | grep -E "(^[[:alnum:]]+\b).*/\1$"</span>
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
nologin:x:968:967::/home/nologin:/sbin/nologin
</code></pre> 
<p>9.显示ifconfig命令结果中所有IPv4地址.</p> 
<pre><code class="prism language-bash"><span class="token comment">#ifconfig |grep -Ewo "(([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])" |head -n1</span>
</code></pre> 
<p>10.显示三个用户root、mage、wang的UID和默认shell</p> 
<pre><code class="prism language-bash"><span class="token comment">#cut -d: -f1,3,7 /etc/passwd |grep -e '^root' -e 'mage' -e 'wang' |cut -d: -f2,3</span>
<span class="token number">0</span>:/bin/bash
<span class="token number">1001</span>:/bin/bash
<span class="token number">1003</span>:/bin/bash
</code></pre> 
<p>11.找出/etc/rc.d/init.d/functions文件中行首为某单词(包括下划线)后面跟一个小括号的行。</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat /etc/rc.d/init.d/functions |grep -E '^[a-Z_]+\(.*'</span>
或
<span class="token comment">#cat /etc/rc.d/init.d/functions |grep -E '^[[:alpha:]_]+\(.*'</span>
<span class="token function-name function">checkpid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token function-name function">__kill_pids_term_kill_checkpids</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token function-name function">__kill_pids_term_kill</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token function-name function">__pids_var_run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token function-name function">__pids_pidof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token function-name function">daemon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token function-name function">killproc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
……
</code></pre> 
<p>12.使用egrep取出/etc/rc.d/init.d/functions中其基名。</p> 
<pre><code class="prism language-bash"><span class="token comment">#echo /etc/rc.d/init.d/functions |egrep -w '[a-z]{9}'</span>
/etc/rc.d/init.d/functions
</code></pre> 
<p>13.使用egrep取出上面路径的目录名。</p> 
<pre><code class="prism language-bash"><span class="token comment">#echo "/etc/rc.d/init.d/functions" |egrep "^/[a-z./]{15}"</span>
/etc/rc.d/init.d/functions
</code></pre> 
<p>14.统计last命令中以root登录的每个主机IP地址登录次数。</p> 
<pre><code class="prism language-bash"><span class="token comment">#last |grep "^root" |grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}' |sort |uniq -c</span>
     <span class="token number">62</span> <span class="token number">10.0</span>.0.1
</code></pre> 
<p>15.将此字符串：welcome to redhat linux 中的每个字符去重并排序，重复次数多的排到前面</p> 
<pre><code class="prism language-bash"><span class="token comment">#echo "welcome to redhat linux" | tr -d ' '| grep -o '[a-z]' |sort |uniq -c |sort -nr</span>
      <span class="token number">3</span> e
      <span class="token number">2</span> t
      <span class="token number">2</span> o
      <span class="token number">2</span> l
      <span class="token number">1</span> x
      <span class="token number">1</span> w
      <span class="token number">1</span> u
      <span class="token number">1</span> r
      <span class="token number">1</span> n
      <span class="token number">1</span> m
      <span class="token number">1</span> i
      <span class="token number">1</span> h
      <span class="token number">1</span> d
      <span class="token number">1</span> c
      <span class="token number">1</span> a
</code></pre> 
<ol start="16"><li></ol> 
<h6><a id="sed_792"></a>文本处理三剑客之sed</h6> 
<p>Sed是从文件或管道中读取一行，处理一行，输出一行；在读取一行，再处理一行，再输出一行，直到最后一行。sed被称为是行处理器。<br> 常用选项：-n：关闭自动打印 -e：多点编译 -r，-E：使用正则表达式 -i.bak：备份文件并编辑<br> #说明: -ir 不支持、-i -r 支持、-ri 支持、-ni 会清空文件<br> 1.获取文件的目录名和基名</p> 
<pre><code class="prism language-bash"><span class="token comment">#echo /etc/sysconfig/network-scripts/ifcfg-ens33 |sed -rn 's@(.*)/([^/]+)@\1@p'</span>
/etc/sysconfig/network-scripts
<span class="token comment">#echo /etc/sysconfig/network-scripts/ifcfg-ens33 |sed -rn 's@(.*)/([^/]+)@\2@p'</span>
ifcfg-ens33
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#echo "/etc/sysconfig/network-scripts/" |sed -r 's#(^/.*/)([^/]+)#\1#'  </span>
/etc/sysconfig/network-scripts/
<span class="token comment">#echo "/etc/sysconfig/network-scripts/" |sed -r 's#(^/.*/)([^/]+)/?#\2#' </span>
network-scripts
</code></pre> 
<p>2.使用sed初始化网卡名：</p> 
<pre><code class="prism language-bash"><span class="token comment">#初始化网卡名</span>
<span class="token comment">#cat /etc/default/grub </span>
<span class="token assign-left variable">GRUB_TIMEOUT</span><span class="token operator">=</span><span class="token number">5</span>
<span class="token assign-left variable">GRUB_DISTRIBUTOR</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">sed</span> <span class="token string">'s, release .*$,,g'</span> /etc/system-release<span class="token variable">)</span></span>"</span>
<span class="token assign-left variable">GRUB_DEFAULT</span><span class="token operator">=</span>saved
<span class="token assign-left variable">GRUB_DISABLE_SUBMENU</span><span class="token operator">=</span>true
<span class="token assign-left variable">GRUB_TERMINAL_OUTPUT</span><span class="token operator">=</span><span class="token string">"console"</span>
<span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">"crashkernel=auto resume=UUID=01a2c83f-8c53-4db4-94ce-294abd850f64 rhgb quiet net.ifnames=0"</span>
<span class="token assign-left variable">GRUB_DISABLE_RECOVERY</span><span class="token operator">=</span><span class="token string">"true"</span>
<span class="token assign-left variable">GRUB_ENABLE_BLSCFG</span><span class="token operator">=</span>true
方法一：
<span class="token comment">#sed -ri.bak '/^GRUB_CMDLINE_LINUX=/s#(.*)"$#\1 net.ifnames=0"#' /etc/default/grub </span>
方法二：
<span class="token comment">#sed -ri.bak '/^GRUB_CMDLINE_LINUX=/s@"$@ net.ifnames=0"@' /etc/default/grub</span>
<span class="token comment">#然后在执行</span>
<span class="token comment">#CentOS：</span>
<span class="token punctuation">[</span>root@centos8 ~<span class="token punctuation">]</span><span class="token comment">#grub2-mkconfig -o /boot/grub2/grub.cfg ;reboot</span>
<span class="token comment">#ubuntu：</span>
<span class="token punctuation">[</span>root@ubuntu ~<span class="token punctuation">]</span><span class="token comment">#grub-mkconfig -o /boot/grub/grub.cfg</span>
</code></pre> 
<p>3.使用sed获取IP地址的多少写法：</p> 
<pre><code class="prism language-bash"><span class="token comment">#ifconfig eth0 | sed -nr "2s/[^0-9]+([0-9.]+).*/\1/p"</span>
<span class="token number">10.0</span>.0.154
<span class="token comment">#ifconfig eth0|sed -En '2s/^[^0-9]+([0-9.]{7,15}).*/\1/p'</span>
<span class="token number">10.0</span>.0.154
<span class="token comment">#ifconfig eth0|sed -rn '2s/^[^0-9]+([0-9.]+) .*/\1/p'</span>
<span class="token number">10.0</span>.0.154
<span class="token comment">#ifconfig eth0 |sed -rn '2s/^.*inet //p'|sed -n 's/netmask.*//p'</span>
<span class="token number">10.0</span>.0.154  
<span class="token comment">#ifconfig eth0 |sed -n '2s/^.*inet //;s/ netmask.*//p'</span>
<span class="token number">10.0</span>.0.154 
<span class="token comment">#ifconfig eth0 |sed -rn '2s/(.*inet )([0-9].*)( netmask.*)/\2/p'</span>
<span class="token number">10.0</span>.0.154 
</code></pre> 
<p>4.使用sed取文件的前缀和后缀：</p> 
<pre><code class="prism language-bash"><span class="token comment">#echo a.b.c.gz | sed -En 's/(.*)\.([^.]+)$/\1/p'</span>
a.b.c
<span class="token comment">#echo a.b.c.gz | sed -En 's/(.*)\.([^.]+)$/\2/p'</span>
gz
<span class="token comment">#echo a.b.c.gz |grep -Eo '.*\.'</span>
a.b.c.
<span class="token comment">#echo a.b.c.gz |grep -Eo '[^.]+$'</span>
gz
<span class="token comment">#echo a.b.tar.gz | sed -rn 's@.*\.([^.]+)\.([^.]+)$@\1@p'</span>
<span class="token function">tar</span>
<span class="token comment">#echo a.b.tar.gz | sed -rn 's@.*\.([^.]+)\.([^.]+)$@\1.\2@p'</span>
tar.gz
</code></pre> 
<p>5.使用sed将非#开头的行加#</p> 
<pre><code class="prism language-bash"><span class="token comment">#sed -rn "s/^[^#]/#&amp;/p" fstab</span>
<span class="token comment">#sed -rn 's/^[^#](.*)/#\1/p' fstab </span>
<span class="token comment">#sed -rn '/^#/!s@^@#@p' fstab</span>
</code></pre> 
<p>6.使用sed将#开头的行删除#</p> 
<pre><code class="prism language-bash"><span class="token comment">#sed -ri.bak '/^#/s/^#//' fstab</span>
</code></pre> 
<p>7.使用sed获取分区利用率：</p> 
<pre><code class="prism language-bash"><span class="token comment">#df |sed -nr '/^\/dev\/sd/s# .* ([0-9]+)%.*# \1#p'</span>
/dev/sda2 <span class="token number">6</span>
/dev/sda5 <span class="token number">7</span>
/dev/sda1 <span class="token number">24</span>
<span class="token comment">#df |sed -rn '/^\/dev\/sd/ s#([^[:space:]]+[[:space:]]+){4}(.*)%.*#\2#p'</span>
<span class="token number">6</span>
<span class="token number">7</span>
<span class="token number">24</span>
<span class="token comment">#df |sed -rn "/^\/dev\/sd/ s#(\S+\s+){4}(.*)%.*#\2#p"</span>
<span class="token number">6</span>
<span class="token number">7</span>
<span class="token number">24</span>
</code></pre> 
<p>8.使用sed修改内核参数：</p> 
<pre><code class="prism language-bash"><span class="token comment">#sed -rn '/^GRUB_CMDLINE_LINUX=/s@(.*)"$@\1 net.ifnames=0@p' grub  </span>

<span class="token comment">#sed -rn '/^GRUB_CMDLINE_LINUX=/s@"$@ net.ifnames=0"@p' grub</span>
</code></pre> 
<p>9.使用sed过滤掉以#号和空行开头的行：</p> 
<pre><code class="prism language-bash"><span class="token comment">#sed -r '/^( *#|$)/d' /etc/httpd/conf/httpd.conf</span>
或
<span class="token comment">#sed -r '/^ *#|^$/d' /etc/httpd/conf/httpd.conf</span>
或
<span class="token comment">#下面两个表达式中的条件前后顺序互换，结果不一样</span>
<span class="token comment">#sed -n '/^$/d;/^[[:space:]]*#/!p' /etc/httpd/conf/httpd.conf		</span>
或
<span class="token comment">#sed -n -e '/^$/d' -e '/^[[:space:]]*#/!p' /etc/httpd/conf/httpd.conf</span>
</code></pre> 
<p>10.sed引用变量使用单引号时的注意事项：</p> 
<pre><code class="prism language-bash"><span class="token comment">#echo |sed "s/^/$RANDOM.rmvb/"</span>
<span class="token number">20394</span>.rmvb
<span class="token comment">#echo |sed 's/^/$RANDOM.rmvb/'</span>
<span class="token environment constant">$RANDOM</span>.rmvb
<span class="token comment">#echo |sed 's/^/'"$RANDOM".rmvb'/'</span>
<span class="token number">8263</span>.rmvb
<span class="token comment">#echo |sed 's/^/'''$RANDOM'''.rmvb/' </span>
<span class="token number">7767</span>.rmvb
</code></pre> 
<p>11.使用sed引用变量实现多点编辑，修改配置文件：</p> 
<pre><code class="prism language-bash"><span class="token comment">#port=8080</span>
<span class="token comment">#sed -ri.bak -e 's/^Listen 80/Listen '$port'/' -e "/^#ServerName/c ServerName `hostname`:$port" /etc/httpd/conf/httpd.conf</span>
</code></pre> 
<p>12.修改Linux操作系统密码长度和有效时间的操作：<br> 参数和值之间是用tab制表符，用[[:space:]]表示<br> 修改建议值：<br> a.PASS_MAX_DAYS 180<br> b.PASS_MIN_DAYS 1<br> c.PASS_MIN_LEN 8<br> d.PASS_WARN_AGE 28</p> 
<pre><code class="prism language-bash"><span class="token comment"># sed -ri.bak 's/(^PASS_MAX_DAYS[[:space:]]+)[0-9]+/\1180/' /etc/login.defs</span>
<span class="token comment"># sed -ri 's/(^PASS_MIN_DAYS[[:space:]]+)[0-9]+/\11/' /etc/login.defs</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment"># sed -ri 's/(^PASS_MIN_LEN\t)[0-9]+/\18/' /etc/login.defs</span>
或
<span class="token comment"># sed -i 's@^\(PASS_MIN_LEN[[:space:]]\+\)[0-9]+@\18@g' /etc/login.defs</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment"># sed -ri 's@(^PASS_WARN_AGE[[:space:]]+)[0-9]+@\128@' /etc/login.defs</span>
</code></pre> 
<p>13.sed的高级用法：</p> 
<pre><code class="prism language-bash"><span class="token function">sed</span> -n <span class="token string">'n;p'</span> FILE	<span class="token comment">#打印下一行（打印偶数行）</span>
<span class="token comment">#seq 10 |sed -n 'n;p'</span>
<span class="token number">2</span>
<span class="token number">4</span>
<span class="token number">6</span>
<span class="token number">8</span>
<span class="token number">10</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'N;s/<span class="token entity" title="\n">\n</span>//'</span>	<span class="token comment">#2行合并一起打印</span>
<span class="token comment">#seq 10 |sed 'N;s/\n//'</span>
<span class="token number">12</span>
<span class="token number">34</span>
<span class="token number">56</span>
<span class="token number">78</span>
<span class="token number">910</span>
<span class="token function">sed</span> <span class="token string">'1!G;h;<span class="token variable">$!</span>d'</span> FILE	<span class="token comment">#倒序打印</span>
<span class="token comment">#seq 10|sed '1!G;h;$!d'</span>
<span class="token number">10</span>
<span class="token number">9</span>
<span class="token number">8</span>
<span class="token number">7</span>
<span class="token number">6</span>
<span class="token number">5</span>
<span class="token number">4</span>
<span class="token number">3</span>
<span class="token number">2</span>
<span class="token number">1</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token function">sed</span> -n <span class="token string">'/3/{g;1!p;};h'</span>  <span class="token comment">#第3行前一行</span>
<span class="token comment">#seq 10  |sed -n '/3/{g;1!p;};h'</span>
<span class="token number">2</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token function">sed</span> -nr <span class="token string">'/3/{n;p}'</span>      <span class="token comment">#第3行后一行</span>
<span class="token comment">#seq 10  |sed -n '/3/{n;p}'</span>
<span class="token number">4</span>
<span class="token function">sed</span>  <span class="token string">'N;D'</span>FILE		<span class="token comment">#打印最后一行</span>
<span class="token comment">#seq 10 |sed 'N;D'</span>
<span class="token number">10</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span><span class="token function">sed</span>  <span class="token string">'3h;9G;9!d'</span>
<span class="token comment">#seq 10 |sed '3h;9G;9!d'</span>
<span class="token number">9</span>
<span class="token number">3</span>
<span class="token function">sed</span> <span class="token string">'<span class="token variable">$!</span>N;<span class="token variable">$!</span>D'</span> FILE
<span class="token comment">#seq 10 |sed '$!N;$!D'</span>
<span class="token number">9</span>
<span class="token number">10</span>
<span class="token function">sed</span> <span class="token string">'<span class="token variable">$!</span>d'</span> FILE
<span class="token comment">#seq 10 |sed '$!d'</span>
<span class="token number">10</span>
<span class="token function">sed</span> <span class="token string">'G'</span> FILE		<span class="token comment">#将每行后加个空行</span>
<span class="token comment">#seq 4 |sed 'G' </span>
<span class="token number">1</span>

<span class="token number">2</span>

<span class="token number">3</span>

<span class="token number">4</span>

<span class="token function">sed</span> <span class="token string">'g'</span> FILE
<span class="token comment">#seq 3 |sed 'g'</span>


<span class="token function">sed</span> <span class="token string">'/^$/d;G'</span> FILE		<span class="token comment">#将每行后加一空行</span>
<span class="token comment">#seq 3 |sed '/^$/d;G'  </span>
<span class="token number">1</span>

<span class="token number">2</span>

<span class="token number">3</span>

<span class="token function">sed</span> <span class="token string">'n;d'</span> FILE 	<span class="token comment">#打印奇数行</span>
<span class="token comment">#seq 10 |sed 'n;d'</span>
<span class="token number">1</span>
<span class="token number">3</span>
<span class="token number">5</span>
<span class="token number">7</span>
<span class="token number">9</span>
<span class="token function">sed</span> -n <span class="token string">'1!G;h;<span class="token variable">$p</span>'</span> FILE		<span class="token comment">#倒序打印</span>
<span class="token comment">#seq 5 |sed -n '1!G;h;$p'  </span>
<span class="token number">5</span>
<span class="token number">4</span>
<span class="token number">3</span>
<span class="token number">2</span>
<span class="token number">1</span>
</code></pre> 
<h6><a id="awk_1028"></a>文本处理三剑客之awk</h6> 
<p>1.gawk:模式扫描和处理语言，可以实现下面功能</p> 
<ul><li>文本处理</li><li>输出格式化的文本报表</li><li>执行算数运算</li><li>执行字符串操作</li></ul> 
<p>语法格式：<br> awk [options] ‘program’ var=value file…<br> awk [options] -f prografile var=value file…<br> 说明：program通常是放在单引号中，并可以由三种部分组成</p> 
<ul><li>BEGIN语句块</li><li>模式匹配的通用语句块</li><li>END语句块</li></ul> 
<p>常见选项：-F“分隔符”指明输入时用到的字段分隔符，默认的分隔符时若干个连续空白符；-v var=value变量赋值</p> 
<h6><a id="Linxu_1049"></a>Linxu脚本部分</h6> 
<p>shell脚本常见的三种错误类型：命令错误、语法错误、逻辑错误。<br> 命令错误的话，不影响后面命令的执行；语法错误会中断执行后面的命令，可通过bash -n *.sh排查；逻辑错误不影响执行，相对比较难找，可通过bash -x *.sh查找观察。</p> 
<p>重复性的工作可以先写好脚本放在自己的服务器上，然后通过命令执行你自己服务器上的脚本。</p> 
<pre><code class="prism language-bash"><span class="token comment">#curl -s http://你服务器地址/testdir/system_info.sh | bash</span>
</code></pre> 
<p>1.简单实现Linux系统磁盘告警脚本。</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat disk_check.sh </span>
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">WARING</span><span class="token operator">=</span><span class="token number">80</span>

<span class="token assign-left variable">DISK</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">df</span> <span class="token operator">|</span> <span class="token function">grep</span>  <span class="token string">"^/dev/sd"</span> <span class="token operator">|</span><span class="token function">grep</span> -Eo <span class="token string">'[0-9]+%'</span> <span class="token operator">|</span><span class="token function">grep</span> -Eo <span class="token string">'[0-9]+'</span> <span class="token operator">|</span> <span class="token function">sort</span> -rn <span class="token operator">|</span> <span class="token function">head</span> -n1<span class="token variable">`</span></span>

<span class="token punctuation">[</span> <span class="token variable">$DISK</span> -ge <span class="token variable">$WARING</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> Disk will be full <span class="token operator">|</span> mail -s <span class="token string">'Disk Warning'</span> 邮箱@qq.com
</code></pre> 
<p>2.今有雉兔同笼，上有三十五头，下有九十四足，问雉兔各几何？</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat chicken_rabbit.sh </span>
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">HEAD</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token assign-left variable">FOOT</span><span class="token operator">=</span><span class="token variable">$2</span>

<span class="token assign-left variable">RABBIT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span><span class="token punctuation">(</span>FOOT<span class="token operator">-</span>HEAD<span class="token operator">-</span>HEAD<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token variable">))</span></span>
<span class="token assign-left variable">CHICKEN</span><span class="token operator">=</span>$<span class="token punctuation">[</span>HEAD-RABBIT<span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> RABBIT:<span class="token variable">$RABBIT</span>
<span class="token builtin class-name">echo</span> CHICKEN:<span class="token variable">$CHICKEN</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#bash chicken_rabbit.sh 35 94</span>
RABBIT:12
CHICKEN:23
</code></pre> 
<p>3.判断指定主机网络状态：</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat check_host.sh </span>
<span class="token comment">#!/bin/bash</span>
<span class="token builtin class-name">read</span> -p <span class="token string">"Please input a IP:"</span> IP
<span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$IP</span> <span class="token operator">=</span>~ ^<span class="token punctuation">((</span><span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span>?<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">0</span>-4<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">25</span><span class="token punctuation">[</span><span class="token number">0</span>-5<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">\</span>.<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span>?<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">0</span>-4<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">25</span><span class="token punctuation">[</span><span class="token number">0</span>-5<span class="token punctuation">]</span><span class="token punctuation">)</span>$ <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{<!-- --></span> <span class="token builtin class-name">echo</span> <span class="token string">"IP is invalid"</span><span class="token punctuation">;</span><span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token function">ping</span> -c1 -w1 <span class="token variable">$IP</span> <span class="token operator">&amp;&gt;</span>/dev/null <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$IP</span> is up <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token variable">$IP</span> is down
</code></pre> 
<p>4.编写脚本 yesorno.sh，提示用户输入yes或no,并判断用户输入的是yes还是no,或是其它信息。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">read</span> -p <span class="token string">"Do you agree(yes/no)?"</span> INPUT
<span class="token keyword">case</span> <span class="token variable">$INPUT</span> <span class="token keyword">in</span>
<span class="token punctuation">[</span>Yy<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span>Yy<span class="token punctuation">]</span><span class="token punctuation">[</span>Ee<span class="token punctuation">]</span><span class="token punctuation">[</span>Ss<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"You input is YES"</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>Nn<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span>Nn<span class="token punctuation">]</span><span class="token punctuation">[</span>Oo<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"You input is NO"</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Input false,please input yes or no!"</span>
<span class="token keyword">esac</span>
</code></pre> 
<p>5.编写脚本 filetype.sh，判断用户输入文件路径，显示其文件类型（普通，目录，链接，其它文件类型）。</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat filetype.sh </span>
<span class="token comment">#!/bin/bash</span>
<span class="token comment">#</span>
<span class="token comment">#***********************************</span>
<span class="token comment">#author:                hjx</span>
<span class="token comment">#version:               0.0</span>
<span class="token comment">#date:                  2021-09-09</span>
<span class="token comment">#description:   hello world</span>
<span class="token comment">#**********************************</span>
<span class="token builtin class-name">read</span> -p <span class="token string">"请输入一个文件路径："</span> PATH1

<span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> -ld $PATH1 <span class="token operator">|</span><span class="token function">cut</span> -c <span class="token number">1</span><span class="token variable">`</span></span>

<span class="token keyword">case</span> <span class="token variable">$TYPE</span> <span class="token keyword">in</span>
-<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$PATH1</span>为普通文件"</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
d<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$PATH1</span>为目录文件"</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
l<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$PATH1</span>为连接文件"</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
b<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$PATH1</span>为块设备文件"</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$PATH1</span>为其他文件类型"</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre> 
<p>6.计算1+2+3+…+100 的结果。请写出多种实现方法：</p> 
<pre><code class="prism language-bash"><span class="token comment">#sum=0;for i in {1..100};do let sum+=i;done;echo sum=$sum</span>
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">5050</span>
或
<span class="token comment">#seq -s+ 100|bc</span>
<span class="token number">5050</span>
或
<span class="token comment">#echo {1..100}|tr ' ' + |bc</span>
<span class="token number">5050</span>
或
<span class="token comment">#seq 100 |paste -sd + |bc</span>
<span class="token number">5050</span>
</code></pre> 
<p>7.批量创建用户，并设置随机密码。</p> 
<pre><code class="prism language-bash"><span class="token comment">#cat user_for.sh </span>
<span class="token comment">#!/bin/bash</span>
<span class="token comment">#</span>
<span class="token comment">#***********************************</span>
<span class="token comment">#author:                hjx</span>
<span class="token comment">#version:               0.0</span>
<span class="token comment">#date:                  2021-09-10</span>
<span class="token comment">#description:   hello world</span>
<span class="token comment">#**********************************</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">do</span>
        <span class="token function">useradd</span> user<span class="token variable">$i</span>
        <span class="token assign-left variable">PASS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /dev/urandom <span class="token operator">|</span><span class="token function">tr</span> -dc <span class="token string">'[:alnum:]'</span><span class="token operator">|</span><span class="token function">head</span> -c12<span class="token variable">`</span></span>
        <span class="token builtin class-name">echo</span> <span class="token variable">$PASS</span> <span class="token operator">|</span><span class="token function">passwd</span> --stdin user<span class="token variable">$i</span> <span class="token operator">&amp;&gt;</span> /dev/null
        <span class="token builtin class-name">echo</span> user<span class="token variable">$i</span><span class="token builtin class-name">:</span><span class="token variable">$PASS</span> <span class="token operator">&gt;&gt;</span> /data/user.log
        <span class="token builtin class-name">echo</span> <span class="token string">"user<span class="token variable">$i</span> is created"</span>
<span class="token keyword">done</span>
</code></pre> 
<p>8.花式打印九九乘法口诀表。</p> 
<ol><li>随机颜色打印</li></ol> 
<pre><code class="prism language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">do</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">seq</span> $i<span class="token variable">`</span></span><span class="token punctuation">;</span><span class="token keyword">do</span>
                <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\E">\E</span>[1;$[RANDOM%7+31]m<span class="token variable">${j}</span>x<span class="token variable">${i}</span>=$[i*j]<span class="token entity" title="\E">\E</span>[0m<span class="token entity" title="\t">\t</span><span class="token entity" title="\c">\c</span>"</span>
        <span class="token keyword">done</span>
        <span class="token builtin class-name">echo</span>
<span class="token keyword">done</span>
</code></pre> 
<ol start="2"><li>使用printf格式输出</li></ol> 
<pre><code class="prism language-bash"><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">9</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">do</span>
        <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">do</span>
                <span class="token builtin class-name">printf</span> <span class="token string">"<span class="token entity" title="\033">\033</span>[1;$[RANDOM%7+31]m<span class="token variable">${i}</span>*<span class="token variable">${j}</span>=$[i*j]<span class="token entity" title="\033">\033</span>[0m<span class="token entity" title="\t">\t</span>"</span>
        <span class="token keyword">done</span>
        <span class="token builtin class-name">printf</span> <span class="token string">"<span class="token entity" title="\n">\n</span>"</span>
<span class="token keyword">done</span>
</code></pre> 
<ol start="3"><li>倒叙输出</li></ol> 
<pre><code class="prism language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">do</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> `echo $<span class="token punctuation">[</span><span class="token number">10</span>-$i<span class="token punctuation">]</span>`<span class="token variable">)</span></span><span class="token punctuation">;</span><span class="token keyword">do</span>
                <span class="token builtin class-name">echo</span> -en <span class="token string">"<span class="token variable">${j}</span>x<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span><span class="token number">10</span>-i<span class="token punctuation">]</span><span class="token variable">`</span></span>=$[(10-i)*j]<span class="token entity" title="\t">\t</span>"</span>
        <span class="token keyword">done</span>
        <span class="token builtin class-name">echo</span>
<span class="token keyword">done</span>
</code></pre> 
<p>9.PS(1,2,3)的含义：<br> PS1是用来控制控制终端上的命令提示符的颜色，内容的<br> PS2是控制多行重定向的提示符的，可以认为修改想要的类型。<br> PS3是用来定义select菜单的提示</p> 
<p>9.脚本初始化配置</p> 
<h6><a id="Linxu_1218"></a>Linxu的各种服务</h6> 
<ol><li></ol> 
<h6><a id="_1223"></a>后续不断更新中……</h6>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a7d5a249195564a204b0031fa02831e0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">apifox介绍及使用（1）。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e6c03b170dbf1cd4b8752da9eadf3291/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【ctfshow】文件包含练习2</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>