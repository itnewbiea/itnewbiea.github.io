<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>软件测试/测试开发丨Pytest 参数化用例 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="软件测试/测试开发丨Pytest 参数化用例" />
<meta property="og:description" content="参数化 通过参数的方式传递数据，从而实现数据和脚本分离。并且可以实现用例的重复生成与执行。 参数化应用场景 测试登录场景
测试登录成功，登录失败(账号错误，密码错误)创建多种账号: 中⽂文账号，英⽂文账号 普通测试用例方法
Copy 多份代码 or 读⼊入参数?一次性执⾏多个输⼊入参数 def test_param_login_ok(): # 登录成功 username = &#34;right&#34; password = &#34;right&#34; login(username,password) def test_param_login_fail(): # 登录失败 username = &#34;wrong&#34; password = &#34;wrong&#34; login(username,password) 参数化实现方案 pytest 参数化实现方法装饰器：@pytest.mark.parametrize @pytest.mark.parametrize(&#34;username,password&#34;,[[&#34;right&#34;,&#34;right&#34;], [&#34;wrong&#34;,&#34;wrong&#34;]]) def test_param(username,password): login(username,password) Mark：参数化测试函数使用 单参数多参数用例重命名笛卡尔积 参数化：单参数情况 单参数，可以将数据放在列表中 search_list = [&#39;appium&#39;,&#39;selenium&#39;,&#39;pytest&#39;] # 参数化实现测试用例的动态生成，每一条测试数据都会生成一条测试用例 @pytest.mark.parametrize(&#39;name&#39;,search_list) def test_search(name): assert name in search_list 参数化：多参数情况 将数据放在列表嵌套元组中将数据放在列表嵌套列表中 # 数据放在元组中 @pytest.mark.parametrize(&#34;test_input,expected&#34;,[ (&#34;3&#43;5&#34;,8),(&#34;2&#43;5&#34;,7),(&#34;7&#43;5&#34;,12) ]) def test_mark_more(test_input,expected): assert eval(test_input) == expected # 数据放在列表中 @pytest." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f5dc20715438644920f1cb5364f07033/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T20:00:00+08:00" />
<meta property="article:modified_time" content="2023-12-27T20:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">软件测试/测试开发丨Pytest 参数化用例</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>参数化</h3> 
<ul><li>通过参数的方式传递数据，从而实现数据和脚本分离。</li><li>并且可以实现用例的重复生成与执行。</li></ul> 
<h3>参数化应用场景</h3> 
<ul><li> <p>测试登录场景</p> 
  <ul><li>测试登录成功，登录失败(账号错误，密码错误)</li><li>创建多种账号: 中⽂文账号，英⽂文账号</li></ul></li><li> <p>普通测试用例方法</p> 
  <ul><li>Copy 多份代码 or 读⼊入参数?</li><li>一次性执⾏多个输⼊入参数</li></ul></li></ul> 
<pre><code class="language-python">def test_param_login_ok():
    # 登录成功
    username = "right"
    password = "right"
    login(username,password)

def test_param_login_fail():
    # 登录失败
    username = "wrong"
    password = "wrong"
    login(username,password)
</code></pre> 
<h3>参数化实现方案</h3> 
<ul><li>pytest 参数化实现方法</li><li>装饰器：<code>@pytest.mark.parametrize</code></li></ul> 
<pre><code class="language-python">@pytest.mark.parametrize("username,password",[["right","right"], ["wrong","wrong"]])
def test_param(username,password):
    login(username,password)
</code></pre> 
<p></p> 
<p></p> 
<p class="img-center"><a href="https://link.juejin.cn?target=https%3A%2F%2Fceshiren.com%2Fuploads%2Fdefault%2Foriginal%2F3X%2Fa%2Fb%2Fab742a1f4ae84b7f8f10deb22ea1b8bbd41d3fb3.jpeg" rel="nofollow"><img alt="image" height="392" src="https://images2.imgbox.com/95/7f/R8eiVsLg_o.png" width="800"></a></p> 
<h3>Mark：参数化测试函数使用</h3> 
<ul><li>单参数</li><li>多参数</li><li>用例重命名</li><li>笛卡尔积</li></ul> 
<h3>参数化：单参数情况</h3> 
<ul><li>单参数，可以将数据放在列表中</li></ul> 
<pre><code class="language-python">search_list = ['appium','selenium','pytest']
# 参数化实现测试用例的动态生成，每一条测试数据都会生成一条测试用例
@pytest.mark.parametrize('name',search_list)
def test_search(name):
    assert name in search_list
</code></pre> 
<h3>参数化：多参数情况</h3> 
<ul><li>将数据放在列表嵌套元组中</li><li>将数据放在列表嵌套列表中</li></ul> 
<pre><code class="language-python"># 数据放在元组中
@pytest.mark.parametrize("test_input,expected",[
    ("3+5",8),("2+5",7),("7+5",12)
])
def test_mark_more(test_input,expected):
    assert eval(test_input) == expected
# 数据放在列表中
@pytest.mark.parametrize("test_input,expected",[
    ["3+5",8],["2+5",7],["7+5",12]
])
def test_mark_more(test_input,expected):
    assert eval(test_input) == expected
</code></pre> 
<h3>参数化：用例重命名-添加 ids 参数</h3> 
<ul><li>通过ids参数，将别名放在列表中</li></ul> 
<pre><code class="language-python"># ids 为用例起个别名，ids 列表参数的个数要与参数值的个数一致
@pytest.mark.parametrize("test_input,expected",[
    ("3+5",8),("2+5",7),("7+5",12)
],ids=['add_3+5=8','add_2+5=7','add_3+5=12'])
def test_mark_more(test_input,expected):
    assert eval(test_input) == expected
</code></pre> 
<h3>参数化：用例重命名-添加 ids 参数（中文）</h3> 
<p>pytest 不支持中文格式</p> 
<p></p> 
<p class="img-center"><a href="https://link.juejin.cn?target=https%3A%2F%2Fceshiren.com%2Fuploads%2Fdefault%2Foriginal%2F3X%2F3%2Fb%2F3b196f7af431aefcdab1f368e6f034509ffcdf33.jpeg" rel="nofollow"><img alt="image" height="237" src="https://images2.imgbox.com/01/4d/pO68ZtCS_o.png" width="600"></a></p> 
<pre><code class="language-python">@pytest.mark.parametrize("test_input,expected",[
    ("3+5",8),("2+5",7),("7+5",12)
],ids=["3和5相加","2和5相加","7和5相加"])
def test_mark_more(test_input,expected):
    assert eval(test_input) == expected
</code></pre> 
<pre><code class="language-python"># 创建conftest.py 文件 ，将下面内容添加进去，运行脚本
def pytest_collection_modifyitems(items):
    """
    测试用例收集完成时，将收集到的用例名name和用例标识nodeid的中文信息显示在控制台上
    """
    for i in items:
        i.name=i.name.encode("utf-8").decode("unicode_escape")
        i._nodeid=i.nodeid.encode("utf-8").decode("unicode_escape")
</code></pre> 
<h3>参数化：笛卡尔积</h3> 
<ul><li> <p>两组数据</p> 
  <ul><li>a=[1,2,3]</li><li>b=[a,b,c]</li></ul></li><li> <p>对应有几种组合形势 ？</p> 
  <ul><li>(1,a),(1,b),(1,c)</li><li>(2,a),(2,b),(2,c)</li><li>(3,a),(3,b),(3,c)</li></ul></li></ul> 
<pre><code class="language-python"># 装饰器方法，由近及远执行，先取a再依次取b
@pytest.mark.parametrize("b",["a","b","c"])
@pytest.mark.parametrize("a",[1,2,3])
def test_param1(a,b):
    print(f"笛卡积形式的参数化中 a={a} , b={b}")
</code></pre> 
<p><strong>最后感谢每一个认真阅读我文章的人，礼尚往来总是要有的，虽然不是什么很值钱的东西，如果你用得到的话可以直接拿走：</strong></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%E3%80%90%E4%B8%8B%E9%9D%A2%E6%98%AF%E6%88%91%E6%95%B4%E7%90%86%E7%9A%842023%E5%B9%B4%E6%9C%80%E5%85%A8%E7%9A%84%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%AD%A6%E4%B9%A0%E7%9F%A5%E8%AF%86%E6%9E%B6%E6%9E%84%E4%BD%93%E7%B3%BB%E5%9B%BE%E3%80%91"><img alt="" height="707" src="https://images2.imgbox.com/18/d0/PgWNUwoD_o.png" width="929"></h4> 
<p>这些资料，对于【软件测试】的朋友来说应该是最全面最完整的备战仓库，这个仓库也陪伴上万个测试工程师们走过最艰难的路程，希望也能帮助到你！ </p> 
<p class="img-center"><img alt="" height="124" src="https://images2.imgbox.com/d6/b1/mY4MwEbS_o.png" width="627"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b0bb2f037fcd1ef4af56462c6172a62f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Linux驱动】内核定时器控制 LED 闪烁</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/35552839fec6b8652c0a89aba19e9864/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">软件测试/测试开发丨Pytest 测试框架学习笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>