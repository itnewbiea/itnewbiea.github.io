<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>BACnet网关如何采集Modbus RTU设备转BACnet IP协议 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="BACnet网关如何采集Modbus RTU设备转BACnet IP协议" />
<meta property="og:description" content="BACnet标准是针对采暖、通风、空调、制冷控制设备设计的，同时也是为其他楼宇控制系统(例如照明，安保，消防等系统)的集成提供一个基本原则。
本文主要讲述了BACnet网关采集Modbus RTU设备（M140T），将Modbus RTU协议转为BACnet IP协议的操作步骤：
首先将将BL103的RS485跟M140T的RS485对接上
打开BL103的配置软件 COM通过Modbus RTU采集M140T的数据，COM口配置如下：
（1）双击“COM1”，弹出COM属性配置框。（2）模式选择：采集。（3）因通过RS485 COM口采集M140T设备，使用Modbus RTU协议，设备品牌：Modbus，设备型号：Modbus RTU。按钮里面，轮询周期和通讯超时设置默认，根据需求设置。（4）波特率、停止位、数据位、校验根据M140T RS485口的参数进行配置，与其保持一致。（5）点击“确定”。
注：点击“写入配置”网关设备将自动重启，重启后COM口的配置才会生效。
添加COM口设备M140 （1）点击“COM1”，点击鼠标右键，点击“添加”，弹出设备配置框。（2）设备名称任意填写，如：填写M140T。（3）从站ID根据采集设备的Modbus ID填写，如：M140T的Modbus ID是“1”，因此，填写“1”。（4）根据要采集的数据选择数据类型，示例是采集M140T的DI和DO，都是布尔类型没有采集数值类型的寄存器，故默认即可。（5）写功能码：默认，M140T支持写多个寄存器。（6）点击“确定”，添加M140T设备。
注：点击确定后会在COM1下显示添加的设备见上图显示出来M140T，如果想添加多个设备，重复（1）--（6）步骤即可。
注：点击“写入配置”网关设备将自动重启，重启后添加COM口的M140T设备才添加成功。
添加M140T的数据点 （1）点击“M140T”，鼠标光标移动到方框内，鼠标右键，点击“添加”弹出数据点设置框。（2）变量名称：命名数据点的名字，如：DO1。（3）数据点的MQTT标识符，可以任意填写。标识符不能重复，如：DO1数据点的MQTT标识填写为DO1。（4）根据需求选择采集地址按什么数据格式填写输入网关，OCT/DEC/HEX分别是八进制/十进制/十六进制。采集Modbus协议地址按十进制输入，故示例选择十进制。（5）地址类型：根据采集的数据点支持的功能码选择，如采集M140T的DO是支持“01”功能码，故选择“01 Coil Status”，DI是支持“02”功能码，故选择“02 Input Status”。（6）地址：采集数据点的寄存器地址，如：数据点DO1在M140T里面是“0”寄存器地址，故填写“0”。（7）数据类型：根据数据点选择，如：M140T的DI和DO都是线圈类型故选择“bool”。（8）添加数量：如果是采集连续地址，同一功能码可以多个采集。（9）读写类型：根据“地址类型”的选项选择自动识别。（10）映射地址：填写采集到的数据点存储到BL103网关设备的地址，可以随意填写。映射地址不能重复。范围：0-2000。如：采集DO1的数据存储到BL103网关“0”寄存器地址。配置软件上映射地址外面表示Modbus地址，括号里面M.XXX表示PLC Modbus地址。（11）变量单位：根据需求任意填写。（12）点击“确定”。
BL103网关作为BACnet/IP服务器对外提供数据。因为各种协议的数据属性不同，统一以AV和BV两种对象属性为当前值对外提供数据。对象实例是配置软件上数据点页面映射地址项的Modbus地址。
BACnet/IP的配置
功能
说明
启用
是否启用BACnet/IP，默认关闭，点击按钮启用。灰色表示：不启用，绿色表示：启用。
网口选择
从“WAN”、“LAN”中选择。
端口
填写服务器端口，端口必须要填写。默认：47808。
生产商名称
默认“BeiLai”，可任意填写。
生产商ID
默认“555”，可任意填写。
设备名称
默认“BeiLai Gateway”，可任意填写。
设备ID
默认“555”，设备对象实例，如果下行也采有BACnet设备，注意不能冲突。
设备描述
默认“BACnet Server”，可任意填写。
位置
默认“CN”，可任意填写。
确定
确定BACnet/IP的配置
取消
取消BACnet/IP的配置
至此采集Modbus转BACnet协议操作结束" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/5d1928efccf913800b5b738b21750d6e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-30T19:21:06+08:00" />
<meta property="article:modified_time" content="2023-06-30T19:21:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">BACnet网关如何采集Modbus RTU设备转BACnet IP协议</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;">BACnet标准是针对采暖、通风、空调、制冷控制设备设计的，同时也是为其他楼宇控制系统(例如照明，安保，消防等系统)的集成提供一个基本原则。</p> 
<p style="margin-left:.0001pt;">本文主要讲述了BACnet网关采集Modbus RTU设备（M140T），将Modbus RTU协议转为BACnet IP协议的操作步骤：<img alt="" height="368" src="https://images2.imgbox.com/4a/dc/f1v7ybbb_o.png" width="554"></p> 
<p></p> 
<p style="margin-left:.0001pt;">首先将将BL103的RS485跟M140T的RS485对接上</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">打开BL103的配置软件 COM通过Modbus RTU采集M140T的数据，COM口配置如下：</p> 
<p class="img-center"><img alt="" height="315" src="https://images2.imgbox.com/9b/f5/D55EIbti_o.png" width="551"></p> 
<p></p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">（1）双击“COM1”，弹出COM属性配置框。（2）模式选择：采集。（3）因通过RS485 COM口采集M140T设备，使用Modbus RTU协议，设备品牌：Modbus，设备型号：Modbus RTU。按钮里面，轮询周期和通讯超时设置默认，根据需求设置。（4）波特率、停止位、数据位、校验根据M140T RS485口的参数进行配置，与其保持一致。（5）点击“确定”。</p> 
<p style="margin-left:.0001pt;"><span style="color:#ff0000;">注：点击“写入配置”网关设备将自动重启，重启后</span><span style="color:#ff0000;">COM</span><span style="color:#ff0000;">口的配置才会生效。</span></p> 
<ol><li> 
  <ol><li> 
    <ol><li> 
      <ol><li><strong><strong><strong>添加C</strong></strong><strong><strong>OM</strong></strong><strong><strong>口设备M</strong></strong><strong><strong>140</strong></strong></strong><img alt="" height="301" src="https://images2.imgbox.com/4c/18/Gi4cbRC9_o.png" width="528"> </li></ol><p></p> </li></ol></li></ol></li></ol> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">（1）点击“COM1”，点击鼠标右键，点击“添加”，弹出设备配置框。（2）设备名称任意填写，如：填写M140T。（3）从站ID根据采集设备的Modbus ID填写，如：M140T的Modbus ID是“1”，因此，填写“1”。（4）根据要采集的数据选择数据类型，示例是采集M140T的DI和DO，都是布尔类型没有采集数值类型的寄存器，故默认即可。（5）写功能码：默认，M140T支持写多个寄存器。（6）点击“确定”，添加M140T设备。</p> 
<p style="margin-left:.0001pt;">注：点击确定后会在COM1下显示添加的设备见上图显示出来M140T，如果想添加多个设备，重复（1）--（6）步骤即可。</p> 
<p style="margin-left:.0001pt;"><span style="color:#ff0000;">注：点击“写入配置”网关设备将自动重启，重启后添加C</span><span style="color:#ff0000;">OM</span><span style="color:#ff0000;">口的M</span><span style="color:#ff0000;">140T</span><span style="color:#ff0000;">设备才添加成功。</span></p> 
<ol><li> 
  <ol><li> 
    <ol><li> 
      <ol><li><strong><strong><strong>添加M</strong></strong><strong><strong>140T</strong></strong><strong><strong>的数据点</strong></strong></strong> <p class="img-center"><img alt="" height="313" src="https://images2.imgbox.com/e0/46/8P75E1DO_o.png" width="548"></p> </li></ol><p></p> </li></ol></li></ol></li></ol> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">（1）点击“M140T”，鼠标光标移动到方框内，鼠标右键，点击“添加”弹出数据点设置框。（2）变量名称：命名数据点的名字，如：DO1。（3）数据点的MQTT标识符，可以任意填写。标识符不能重复，如：DO1数据点的MQTT标识填写为DO1。（4）根据需求选择采集地址按什么数据格式填写输入网关，OCT/DEC/HEX分别是八进制/十进制/十六进制。采集Modbus协议地址按十进制输入，故示例选择十进制。（5）地址类型：根据采集的数据点支持的功能码选择，如采集M140T的DO是支持“01”功能码，故选择“01 Coil Status”，DI是支持“02”功能码，故选择“02 Input Status”。（6）地址：采集数据点的寄存器地址，如：数据点DO1在M140T里面是“0”寄存器地址，故填写“0”。（7）数据类型：根据数据点选择，如：M140T的DI和DO都是线圈类型故选择“bool”。（8）添加数量：如果是采集连续地址，同一功能码可以多个采集。（9）读写类型：根据“地址类型”的选项选择自动识别。（10）映射地址：填写采集到的数据点存储到BL103网关设备的地址，可以随意填写。映射地址不能重复。范围：0-2000。如：采集DO1的数据存储到BL103网关“0”寄存器地址。配置软件上映射地址外面表示Modbus地址，括号里面M.XXX表示PLC Modbus地址。（11）变量单位：根据需求任意填写。（12）点击“确定”。</p> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;">BL103网关作为BACnet/IP服务器对外提供数据。因为各种协议的数据属性不同，统一以AV和BV两种对象属性为当前值对外提供数据。对象实例是配置软件上数据点页面映射地址项的Modbus地址。</p> 
<p style="margin-left:.0001pt;"><img alt="" height="315" src="https://images2.imgbox.com/8d/99/KtNoj05U_o.png" width="551"></p> 
<p></p> 
<p></p> 
<p style="margin-left:.0001pt;"></p> 
<table align="center" border="1" cellspacing="0" style="width:417.95pt;"><tbody><tr><td colspan="2" style="background-color:#bebebe;width:417.95pt;"> <p style="margin-left:.0001pt;text-align:center;"><strong>BACnet</strong><strong>/</strong><strong>IP</strong><strong>的配置</strong></p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;text-align:center;"><strong>功能</strong></p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;text-align:center;"><strong>说明</strong></p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">启用</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">是否启用BACnet/IP，默认关闭，点击按钮启用。灰色表示：不启用，绿色表示：启用。</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">网口选择</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">从“WAN”、“LAN”中选择。</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">端口</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">填写服务器端口，端口必须要填写。默认：47808。</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">生产商名称</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">默认“BeiLai”，可任意填写。</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">生产商ID</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">默认“555”，可任意填写。</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">设备名称</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">默认“BeiLai Gateway”，可任意填写。</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">设备ID</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">默认“555”，设备对象实例，如果下行也采有BACnet设备，注意不能冲突。</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">设备描述</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">默认“BACnet Server”，可任意填写。</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">位置</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">默认“CN”，可任意填写。</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">确定</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">确定BACnet/IP的配置</p> </td></tr><tr><td style="width:84.8pt;"> <p style="margin-left:.0001pt;">取消</p> </td><td style="vertical-align:top;width:333.15pt;"> <p style="margin-left:.0001pt;">取消BACnet/IP的配置</p> </td></tr></tbody></table> 
<p></p> 
<p>至此采集Modbus转BACnet协议操作结束</p> 
<p style="margin-left:.0001pt;"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d4ade90a11dc376e73ba60913477081c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Django项目实战-课堂投票系统(附源码&#43;论文)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0cfffc381ae2bad7e70b6d266a5deaa2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[Android Studio] 第4节 Toast使用详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>