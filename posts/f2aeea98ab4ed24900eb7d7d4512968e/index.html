<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>开发工具篇第三讲：你连maven都不懂面试官怎么敢要你 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="开发工具篇第三讲：你连maven都不懂面试官怎么敢要你" />
<meta property="og:description" content="在Java开发中，常用构建工具ant、maven和gradle, 其中maven相对主流。本文是开发工具篇第三讲：Maven 从入门到实战
文章目录 1、什么是Maven？1.1、Maven的目录结构1.2、如何修改默认的目录配置 2、Maven能为我们解决什么问题？3、说说Maven有什么优缺点？4、什么是Maven的坐标？4.1、定义 GAV 遵从以下规则4.2、二方库版本号命名方式：主版本号.次版本号.修订号4.3、线上应用不要依赖 SNAPSHOT 版本（安全包除外） ；正式发布的类库必须先去中央仓库进行查证，使 RELEASE 版本号有延续性，且版本号不允许覆盖升级。 5、讲一下Maven的生命周期？5.1、Maven的默认构建生命周期：从我们的项目构建，一直到项目发布的这个过程5.2、maven对项目默认生命周期的抽象5.3、Maven各生命阶段行为绑定5.4、如何查看Maven各个生命周期阶段和插件的绑定情况 6、说说你熟悉哪些Maven命令？7、使用二方库的注意事项？8、说说Maven的依赖原则？8.1、依赖路径最短优先原则8.2、pom文件声明顺序优先原则8.3、覆写优先原则 问题1：如何解决依赖传递引起的版本冲突？9、说说Maven依赖的解析机制？10、如何部署第三方JAR包？11、说说Maven插件的解析机制11.1、如何自定义maven插件？11.2、项目中Run Package命令 12、修改maven版本号的常见方法（非常实用，推荐使用）13、工具详解 - Maven私有仓库Nexus13.1、Nexus是什么13.2、Nexus安装13.3、Nexus功能介绍13.4、Nexus配置和使用13.5、Nexus上传第三方jar包 问题1：禁止在子项目的 pom 依赖中出现相同的 GroupId，相同的 ArtifactId，但是不同的 Version。问题2：底层基础技术框架、核心数据管理平台、或近硬件端系统谨慎引入第三方实现。问题3：所有 pom 文件中的依赖声明放在`&lt;dependencies&gt;`语句块中，所有版本仲裁放在`&lt;dependencyManagement&gt;` 语句块中。问题4：maven报错，父级 &#39;Unknown:Unknown:Unknown&#39; 有问题问题5：maven下载资源时，选择的是错误的域名，导致下载超时问题6：maven报The POM for com. is invalid, transitive dependencies (if any) will not be available问题解决 1、什么是Maven？ Maven是一款服务于Java平台的自动化构建工具。
构建：以”Java源文件“、”框架配置文件“、”JSP“、”HTML“、”图片“等资源为”原材料“，去“生产”一个可以运行的项目的过程。演化过程：Make-&gt; Ant -&gt;Maven -&gt;Gradle编译：java源文件-&gt;编译-&gt;Class字节码文件-&gt;交给JVM去执行部署：一个项目最终运行的并不是动态Web工程本身，而是这个动态Web工程“编译的结果”搭建：
maven项目对象模型(POM)，可以通过一小段描述信息来管理项目的构建，报告和文档的项目管理工具软件。它包含了一个项目对象模型，一组标准集合，一个项目生命周期，一个依赖管理系统和用来运行定义在生命周期阶段中插件目标的逻辑。当使用Maven的时候，你用一个明确定义的项目对象模型来描述你的项目，然后Maven可以应用横切的逻辑，这些逻辑来自于一组共享的（或自定义的）插件。
1.1、Maven的目录结构 目录的划分是根据需要来的，每个目录有其特定的功能。目录本质上就是一个文件或文件夹路径而已
1.2、如何修改默认的目录配置 在maven项目工程对应project的 pom.xml中，在&lt;project&gt;--&gt;&lt;build&gt;节点下，你可以指定自己的目录路径信息：
&lt;build&gt; &lt;!-- 目录信息维护,用户可以指定自己的目录路径 --&gt; &lt;sourceDirectory&gt;E:\intellis\maven-principle\phase-echo\src\main\java&lt;/sourceDirectory&gt; &lt;scriptSourceDirectory&gt;E:\intellis\maven-principle\phase-echo\src\main\scripts&lt;/scriptSourceDirectory&gt; &lt;testSourceDirectory&gt;E:\intellis\maven-principle\phase-echo\src\test\java&lt;/testSourceDirectory&gt; &lt;outputDirectory&gt;E:\intellis\maven-principle\phase-echo\target\classes&lt;/outputDirectory&gt; &lt;testOutputDirectory&gt;E:\intellis\maven-principle\phase-echo\target\test-classes&lt;/testOutputDirectory&gt; &lt;!-- 注意，对resource而言，可以有很多个resource路径的配置，你只需要指定对应的路径是resource即可 --&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;E:\intellis\maven-principle\phase-echo\src\main\resources&lt;/directory&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f2aeea98ab4ed24900eb7d7d4512968e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-03T22:48:39+08:00" />
<meta property="article:modified_time" content="2023-12-03T22:48:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">开发工具篇第三讲：你连maven都不懂面试官怎么敢要你</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>在Java开发中，常用构建工具ant、maven和gradle, 其中maven相对主流。本文是开发工具篇第三讲：Maven 从入门到实战</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#1Maven_3" rel="nofollow">1、什么是Maven？</a></li><li><ul><li><a href="#11Maven_14" rel="nofollow">1.1、Maven的目录结构</a></li><li><a href="#12_20" rel="nofollow">1.2、如何修改默认的目录配置</a></li></ul> 
    </li><li><a href="#2Maven_51" rel="nofollow">2、Maven能为我们解决什么问题？</a></li><li><a href="#3Maven_65" rel="nofollow">3、说说Maven有什么优缺点？</a></li><li><a href="#4Maven_81" rel="nofollow">4、什么是Maven的坐标？</a></li><li><ul><li><a href="#41_GAV__82" rel="nofollow">4.1、定义 GAV 遵从以下规则</a></li><li><a href="#42_91" rel="nofollow">4.2、二方库版本号命名方式：主版本号.次版本号.修订号</a></li><li><a href="#43_SNAPSHOT___RELEASE__105" rel="nofollow">4.3、线上应用不要依赖 SNAPSHOT 版本（安全包除外） ；正式发布的类库必须先去中央仓库进行查证，使 RELEASE 版本号有延续性，且版本号不允许覆盖升级。</a></li></ul> 
    </li><li><a href="#5Maven_109" rel="nofollow">5、讲一下Maven的生命周期？</a></li><li><ul><li><a href="#51Maven_119" rel="nofollow">5.1、Maven的默认构建生命周期：从我们的项目构建，一直到项目发布的这个过程</a></li><li><a href="#52maven_124" rel="nofollow">5.2、maven对项目默认生命周期的抽象</a></li><li><a href="#53Maven_174" rel="nofollow">5.3、Maven各生命阶段行为绑定</a></li><li><a href="#54Maven_184" rel="nofollow">5.4、如何查看Maven各个生命周期阶段和插件的绑定情况</a></li></ul> 
    </li><li><a href="#6Maven_277" rel="nofollow">6、说说你熟悉哪些Maven命令？</a></li><li><a href="#7_293" rel="nofollow">7、使用二方库的注意事项？</a></li><li><a href="#8Maven_322" rel="nofollow">8、说说Maven的依赖原则？</a></li><li><ul><li><a href="#81_324" rel="nofollow">8.1、依赖路径最短优先原则</a></li><li><a href="#82pom_335" rel="nofollow">8.2、pom文件声明顺序优先原则</a></li><li><a href="#83_346" rel="nofollow">8.3、覆写优先原则</a></li></ul> 
   </li></ul> 
   </li><li><a href="#1_352" rel="nofollow">问题1：如何解决依赖传递引起的版本冲突？</a></li><li><ul><li><a href="#9Maven_360" rel="nofollow">9、说说Maven依赖的解析机制？</a></li><li><a href="#10JAR_367" rel="nofollow">10、如何部署第三方JAR包？</a></li><li><a href="#11Maven_474" rel="nofollow">11、说说Maven插件的解析机制</a></li><li><ul><li><a href="#111maven_478" rel="nofollow">11.1、如何自定义maven插件？</a></li><li><a href="#112Run_Package_484" rel="nofollow">11.2、项目中Run Package命令</a></li></ul> 
    </li><li><a href="#12maven_606" rel="nofollow">12、修改maven版本号的常见方法（非常实用，推荐使用）</a></li><li><a href="#13__MavenNexus_715" rel="nofollow">13、工具详解 - Maven私有仓库Nexus</a></li><li><ul><li><a href="#131Nexus_719" rel="nofollow">13.1、Nexus是什么</a></li><li><a href="#132Nexus_725" rel="nofollow">13.2、Nexus安装</a></li><li><a href="#133Nexus_729" rel="nofollow">13.3、Nexus功能介绍</a></li><li><a href="#134Nexus_733" rel="nofollow">13.4、Nexus配置和使用</a></li><li><a href="#135Nexusjar_737" rel="nofollow">13.5、Nexus上传第三方jar包</a></li></ul> 
   </li></ul> 
   </li><li><a href="#1_pom__GroupId_ArtifactId_Version_753" rel="nofollow">问题1：禁止在子项目的 pom 依赖中出现相同的 GroupId，相同的 ArtifactId，但是不同的 Version。</a></li><li><a href="#2_757" rel="nofollow">问题2：底层基础技术框架、核心数据管理平台、或近硬件端系统谨慎引入第三方实现。</a></li><li><a href="#3_pom_dependenciesdependencyManagement__759" rel="nofollow">问题3：所有 pom 文件中的依赖声明放在`&lt;dependencies&gt;`语句块中，所有版本仲裁放在`&lt;dependencyManagement&gt;` 语句块中。</a></li><li><a href="#4maven_UnknownUnknownUnknown__765" rel="nofollow">问题4：maven报错，父级 'Unknown:Unknown:Unknown' 有问题</a></li><li><a href="#5maven_773" rel="nofollow">问题5：maven下载资源时，选择的是错误的域名，导致下载超时</a></li><li><a href="#6mavenThe_POM_for_com_is_invalid_transitive_dependencies_if_any_will_not_be_available_779" rel="nofollow">问题6：maven报The POM for com. is invalid, transitive dependencies (if any) will not be available问题解决</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="1Maven_3"></a>1、什么是Maven？</h4> 
<p><strong>Maven是一款服务于Java平台的自动化构建工具。</strong></p> 
<ul><li>构建：以”Java源文件“、”框架配置文件“、”JSP“、”HTML“、”图片“等资源为”原材料“，去“生产”一个可以运行的项目的过程。</li><li>演化过程：Make-&gt; Ant -&gt;Maven -&gt;Gradle</li><li>编译：java源文件-&gt;编译-&gt;Class字节码文件-&gt;交给JVM去执行</li><li>部署：一个项目最终运行的并不是动态Web工程本身，而是这个动态Web工程“编译的结果”</li><li>搭建：<br> <img src="https://images2.imgbox.com/ee/0a/zjX3hRSK_o.png" alt="在这里插入图片描述" width="460" height="350"></li></ul> 
<p>maven项目对象模型(POM)，可以通过一小段描述信息来管理项目的构建，报告和文档的项目管理工具软件。它包含了<mark>一个项目对象模型，一组标准集合，一个项目生命周期，一个依赖管理系统和用来运行定义在生命周期阶段中插件目标的逻辑</mark>。当使用Maven的时候，你用一个明确定义的项目对象模型来描述你的项目，然后Maven可以应用横切的逻辑，这些逻辑来自于一组共享的（或自定义的）插件。</p> 
<h5><a id="11Maven_14"></a>1.1、Maven的目录结构</h5> 
<p>目录的划分是根据需要来的，每个目录有其特定的功能。目录本质上就是一个文件或文件夹路径而已</p> 
<p><img src="https://images2.imgbox.com/23/0b/iWVUK0R2_o.jpg" alt="img" width="460" height="450"></p> 
<h5><a id="12_20"></a>1.2、如何修改默认的目录配置</h5> 
<p>在maven项目工程对应project的 pom.xml中，在<code>&lt;project&gt;--&gt;&lt;build&gt;</code>节点下，你可以指定自己的目录路径信息：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 目录信息维护,用户可以指定自己的目录路径 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sourceDirectory</span><span class="token punctuation">&gt;</span></span>E:\intellis\maven-principle\phase-echo\src\main\java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sourceDirectory</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scriptSourceDirectory</span><span class="token punctuation">&gt;</span></span>E:\intellis\maven-principle\phase-echo\src\main\scripts<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scriptSourceDirectory</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testSourceDirectory</span><span class="token punctuation">&gt;</span></span>E:\intellis\maven-principle\phase-echo\src\test\java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testSourceDirectory</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>E:\intellis\maven-principle\phase-echo\target\classes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testOutputDirectory</span><span class="token punctuation">&gt;</span></span>E:\intellis\maven-principle\phase-echo\target\test-classes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testOutputDirectory</span><span class="token punctuation">&gt;</span></span>
  
    <span class="token comment">&lt;!-- 注意，对resource而言，可以有很多个resource路径的配置，你只需要指定对应的路径是resource即可 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>E:\intellis\maven-principle\phase-echo\src\main\resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
  
    <span class="token comment">&lt;!-- 注意，对resource而言，可以有很多个resource路径的配置，你只需要指定对应的路径是resource即可 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testResources</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testResource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>E:\intellis\maven-principle\phase-echo\src\test\resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testResource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testResources</span><span class="token punctuation">&gt;</span></span>
  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>E:\intellis\maven-principle\phase-echo\target<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="2Maven_51"></a>2、Maven能为我们解决什么问题？</h4> 
<p><strong>目前的技术在开发中存在的问题？</strong><br> <img src="https://images2.imgbox.com/2c/6f/sGi4rFLD_o.png" alt="在这里插入图片描述" width="460" height="330"></p> 
<ul><li><font color="red">1、一个项目就是一个工程</font> 
  <ul><li>如果项目非常庞大，就不适合继续使用package来划分模块。最好是一个模块对应一个工程，利于分工协作。</li><li><strong>借助Maven可以将一个项目拆分为多个工程。</strong></li></ul> </li><li><font color="red">2、项目中需要的jar包需要手动复制、粘贴到WEB_INF/lib目录下</font> 
  <ul><li>带来的问题是：同样的jar包文件重复出现在不同的项目工程中，浪费存储空间；</li><li><strong>借助maven，可以将jar包仅仅保存在仓库中，有需要使用的工程”引用“这个文件接口，并不需要真的把jar包复制过来</strong>。</li></ul> </li><li>3、jar包需要别人替我们准备好，或到官网下载 
  <ul><li><strong>Maven可以以一种规范的方式下载jar包</strong></li></ul> </li><li>4、一个jar包依赖的其他jar包需要自己手动加入到项目中 
  <ul><li><strong>Maven会自动将依赖的jar包导入进来。</strong></li></ul> </li></ul> 
<h4><a id="3Maven_65"></a>3、说说Maven有什么优缺点？</h4> 
<p><strong>优点</strong></p> 
<ul><li>简化了项目依赖管理；</li><li>易于上手，对于新手来说了解几个常用命令即可满足日常工作；</li><li>便于与持续集成工具（jenkins）整合；</li><li>便于项目升级，无论是项目本身还是项目使用的依赖；</li><li>maven有很多插件，便于功能扩展，比如生产站点，自动发布版本等。</li></ul> 
<p><strong>缺点</strong></p> 
<ul><li>Maven是一个庞大的构建系统，学习难度大。(很多都可以这样说，入门容易[优点]但是精通难[缺点])；</li><li>Maven采用<mark>约定约定优于配置</mark>的策略，虽然上手容易但是一旦出现问题，难于调试；</li><li>网络环境较差，很多repository无法访问。</li></ul> 
<h4><a id="4Maven_81"></a>4、什么是Maven的坐标？</h4> 
<h5><a id="41_GAV__82"></a>4.1、定义 GAV 遵从以下规则</h5> 
<ul><li>1） GroupId 格式： com.{公司/BU}.业务线.[子业务线]， 最多 4 级。 
  <ul><li>说明： {公司/BU}例如： alibaba / taobao / tmall / kaikeba 等 BU 一级； 子业务线可选。</li><li>正例： <code>com.taobao.jstorm</code> 或 <code>com.alibaba.dubbo.register</code></li></ul> </li><li>2） ArtifactId 格式：产品线名-模块名。语义不重复不遗漏， 先到中央仓库去查证一下。 
  <ul><li>正例： dubbo-client / fastjson-api / jstorm-tool</li></ul> </li><li>3） Version： 详细规定参考下方。</li></ul> 
<h5><a id="42_91"></a>4.2、二方库版本号命名方式：主版本号.次版本号.修订号</h5> 
<ul><li>1）主版本号：产品方向改变，或者大规模 API 不兼容，或者架构不兼容升级。</li><li>2）次版本号：保持相对兼容性，增加主要功能特性，影响范围极小的 API 不兼容修改。</li><li>3）修订号：保持完全兼容性，修复 BUG、新增次要功能特性等。</li></ul> 
<p>说明：注意起始版本号必须为：1.0.0，而不是 0.0.1。</p> 
<p>反例：仓库内某二方库版本号从 1.0.0.0 开始，一直默默“升级” 成 1.0.0.64，完全失去版本的语义信息。</p> 
<p>Maven其中一个核心的作用就是管理项目的依赖，引入我们所需的各种jar包等。为了能自动化的解析任何一个Java构件，Maven必须将这些Jar包或者其他资源进行唯一标识，这是管理项目的依赖的基础，也就是我们要说的坐标。包括我们自己开发的项目，也是要通过坐标进行唯一标识的，这样才能才其它项目中进行依赖引用。</p> 
<p>maven的坐标通过groupId，artifactId，version唯一标志一个构件。groupId通常为公司或组织名字，artifactId通常为项目名称，versionId为版本号。</p> 
<h5><a id="43_SNAPSHOT___RELEASE__105"></a>4.3、线上应用不要依赖 SNAPSHOT 版本（安全包除外） ；正式发布的类库必须先去中央仓库进行查证，使 RELEASE 版本号有延续性，且版本号不允许覆盖升级。</h5> 
<p>说明：不依赖 SNAPSHOT 版本是保证应用发布的幂等性。另外，也可以加快编译时的打包构建</p> 
<h4><a id="5Maven_109"></a>5、讲一下Maven的生命周期？</h4> 
<p>maven从项目的三个不同的角度，定义了三套生命周期，三套生命周期是相互独立的，它们之间不会相互影响。</p> 
<ul><li><strong>默认构建生命周期</strong> (Default Lifeclyle)：该生命周期表示这项目的构建过程，定义了一个项目的构建要经过的不同的阶段。</li><li><strong>清理生命周期</strong> (Clean Lifecycle)：该生命周期负责清理项目中的多余信息，保持项目资源和代码的整洁性。一般拿来清空directory(即一般的target) 目录下的文件。</li><li><strong>站点管理生命周期</strong> (Site Lifecycle)：向我们创建一个项目时，我们有时候需要提供一个站点，来介绍这个项目的信息，如项目介绍，项目进度状态、项目组成成员，版本控制信息，项目javadoc索引信息等等。站点管理生命周期定义了站点管理过程的各个阶段。</li></ul> 
<p><img src="https://images2.imgbox.com/a9/a3/6sTasesB_o.jpg" alt="img" width="460" height="520"></p> 
<h5><a id="51Maven_119"></a>5.1、Maven的默认构建生命周期：从我们的项目构建，一直到项目发布的这个过程</h5> 
<p><img src="https://images2.imgbox.com/53/33/2PRmoX08_o.png" alt="在这里插入图片描述" width="660" height="100"><br> <img src="https://images2.imgbox.com/73/7b/bQpLoAfE_o.png" alt="在这里插入图片描述" width="460" height="220"></p> 
<h5><a id="52maven_124"></a>5.2、maven对项目默认生命周期的抽象</h5> 
<p>Maven将其架构和结构的组织放置到了components.xml 配置文件中，该配置文件的路径是: <code>apache-maven-version\lib\maven−core−{version}\lib\maven-core-version\lib\maven−core−{version}.jar\META-INFO\plexus\conponents.xml</code>文件中。其中，我们可以看到关于default生命周期XML节点配置信息:</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span><span class="token punctuation">&gt;</span></span>org.apache.maven.lifecycle.Lifecycle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>role</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>implementation</span><span class="token punctuation">&gt;</span></span>org.apache.maven.lifecycle.Lifecycle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>implementation</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role-hint</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>role-hint</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phases</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>validate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>initialize<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>generate-sources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>process-sources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>generate-resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>process-resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>process-classes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>generate-test-sources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>process-test-sources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>generate-test-resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>process-test-resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>test-compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>process-test-classes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>prepare-package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>pre-integration-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>integration-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>post-integration-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>verify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>install<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>deploy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phases</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span> 
</code></pre> 
<p>Maven根据一个项目的生命周期的每个阶段，将一个项目的生命周期抽象成了如上图所示的23个阶段。而每一个阶段应该干什么事情由用户决定。换句话说，<strong>maven为每一个阶段设计了接口，你可以为每一阶段自己定义一个接口，进而实现对应阶段应该有的行为</strong>。</p> 
<p><img src="https://images2.imgbox.com/b5/10/Wkv3LBTN_o.jpg" alt="img" width="460" height="670"></p> 
<p>在经历这些生命周期的阶段中，每个阶段会理论上会有相应的处理操作。但是，在实际的项目开发过程中， 并不是所有的生命周期阶段都是必须的。 基于类似的约定，maven默认地为一些不同类型的maven项目生命周期的阶段实现了默认的行为。</p> 
<p>Maven 在设计上将生命周期阶段的抽象和对应阶段应该执行的行为实现分离开，maven这些实现放到了插件中，这些插件本质上是实现了maven留在各个生命周期阶段的接口。如下图所示，maven针对不同打包类型的maven项目的生命周期阶段绑定了对应的默认行为：</p> 
<p><img src="https://images2.imgbox.com/68/fd/AhESeHPl_o.jpg" alt="img" width="460" height="450"></p> 
<h5><a id="53Maven_174"></a>5.3、Maven各生命阶段行为绑定</h5> 
<p>maven会根据Mojo功能的划分，将具有相似功能的Mojo放到一个插件中。并且某一个特定的Mojo能实现的功能称为 goal，即目标，表明该Mojo能实现什么目标。</p> 
<p><img src="https://images2.imgbox.com/7c/37/XY9PBiax_o.jpg" alt="img" width="460" height="470"></p> 
<p>例如，我们项目生命周期有两个阶段: compile 和 test-compile,这两阶段都是需要将Java源代码编译成class文件中，相对应地，compile和test-compiler分别被绑定到了org.apache.maven.plugin.compiler.CompilerMojo 和org.apache.maven.plugin.compiler.TestCompilerMojo上:</p> 
<p><img src="https://images2.imgbox.com/f1/c6/cAFfD9hp_o.jpg" alt="img" width="460" height="420"></p> 
<h5><a id="54Maven_184"></a>5.4、如何查看Maven各个生命周期阶段和插件的绑定情况</h5> 
<p>maven默认实现上，会为各个常用的生命周期根据约定绑定特定的插件目标。maven将这些配置放置到了: apache-maven-version\lib\maven−core−{version}\lib\maven-core-version\lib\maven−core−{version}.jar\META-INFO\plexus\default-binds.xml文件中，针对不同打包类型的项目，其默认绑定情况也会不一样，我们先看一下常用的jar包类型和war包类型的项目默认绑定情况:</p> 
<pre><code class="prism language-xml">    <span class="token comment">&lt;!-- jar包格式的项目生命周期各个阶段默认绑定情况 --&gt;</span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span><span class="token punctuation">&gt;</span></span>org.apache.maven.lifecycle.mapping.LifecycleMapping<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>role</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role-hint</span><span class="token punctuation">&gt;</span></span>jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>role-hint</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>implementation</span><span class="token punctuation">&gt;</span></span>org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>implementation</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lifecycles</span><span class="token punctuation">&gt;</span></span>  
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lifecycle</span><span class="token punctuation">&gt;</span></span>  
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>  
                    <span class="token comment">&lt;!-- START SNIPPET: jar-lifecycle --&gt;</span>  
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phases</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token comment">&lt;!-- 插件绑定的格式:   &lt;plugin-groupid&gt;:&lt;plugin-artifactid&gt;:&lt;version&gt;:goal  --&gt;</span>   
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>process-resources</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-resources-plugin:2.6:resources  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>process-resources</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>compile</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-compiler-plugin:3.1:compile  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>compile</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>process-test-resources</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-resources-plugin:2.6:testResources  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>process-test-resources</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test-compile</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-compiler-plugin:3.1:testCompile  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test-compile</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-jar-plugin:2.4:jar  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>package</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>install</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-install-plugin:2.4:install  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>install</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>deploy</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>deploy</span><span class="token punctuation">&gt;</span></span>  
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phases</span><span class="token punctuation">&gt;</span></span>  
                    <span class="token comment">&lt;!-- END SNIPPET: jar-lifecycle --&gt;</span>  
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lifecycle</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lifecycles</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>  
      
    <span class="token comment">&lt;!-- war包格式的项目生命周期各个阶段默认绑定情况 --&gt;</span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role</span><span class="token punctuation">&gt;</span></span>org.apache.maven.lifecycle.mapping.LifecycleMapping<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>role</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role-hint</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>role-hint</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>implementation</span><span class="token punctuation">&gt;</span></span>org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>implementation</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lifecycles</span><span class="token punctuation">&gt;</span></span>  
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lifecycle</span><span class="token punctuation">&gt;</span></span>  
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>  
                    <span class="token comment">&lt;!-- START SNIPPET: war-lifecycle --&gt;</span>  
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phases</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>process-resources</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-resources-plugin:2.6:resources  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>process-resources</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>compile</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-compiler-plugin:3.1:compile  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>compile</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>process-test-resources</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-resources-plugin:2.6:testResources  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>process-test-resources</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test-compile</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-compiler-plugin:3.1:testCompile  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test-compile</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-war-plugin:2.2:war  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>package</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>install</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-install-plugin:2.4:install  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>install</span><span class="token punctuation">&gt;</span></span>  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>deploy</span><span class="token punctuation">&gt;</span></span>  
                    org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy  
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>deploy</span><span class="token punctuation">&gt;</span></span>  
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phases</span><span class="token punctuation">&gt;</span></span>  
                    <span class="token comment">&lt;!-- END SNIPPET: war-lifecycle --&gt;</span>  
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lifecycle</span><span class="token punctuation">&gt;</span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lifecycles</span><span class="token punctuation">&gt;</span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>  
</code></pre> 
<h4><a id="6Maven_277"></a>6、说说你熟悉哪些Maven命令？</h4> 
<p>mvn archetype:generate 创建Maven项目<br> mvn compile 编译源代码<br> mvn deploy 发布项目<br> mvn test-compile 编译测试源代码<br> mvn test 运行应用程序中的单元测试<br> mvn site 生成项目相关信息的网站<br> mvn clean 清除项目目录中的生成结果<br> mvn package 根据项目生成的jar<br> mvn install 在本地Repository中安装jar<br> mvn eclipse:eclipse 生成eclipse项目文件<br> mvnjetty:run 启动jetty服务<br> mvntomcat:run 启动tomcat服务<br> mvn clean package -Dmaven.test.skip=true:清除以前的包后重新打包，跳过测试类</p> 
<h4><a id="7_293"></a>7、使用二方库的注意事项？</h4> 
<p>1、二方库的新增或升级，保持除功能点之外的其它 jar 包仲裁结果不变。如果有改变，必须明确评估和验证。</p> 
<ul><li>说明：在升级时，进行 <code>dependency:resolve</code> 前后信息比对，如果仲裁结果完全不一致，那么通过 <code>dependency:tree</code> 命令，找出差异点，进行<code>&lt;exclude&gt;</code> 排除 jar 包。</li></ul> 
<p>2、二方库里可以定义枚举类型， 参数可以使用枚举类型， 但是接口返回值不允许使用枚举类型或者包含枚举类型的 POJO 对象。</p> 
<p>3、二方库定制包的命名方式，在规定的版本号之后加“-英文说明[序号]” ，英文说明可以是部门简称、 业务名称，序号直接紧跟在英文说明之后，表示此定制包的顺序号。</p> 
<ul><li>说明：fastjson 给 SCM 定制的版本号： 1.0.0-SCM1。注：请尽可能在应用端来解决类冲突和加载问题，避免随意发布此类定制包。</li></ul> 
<p>4、依赖于一个二方库群时，必须定义一个统一的版本变量，避免版本号不一致。</p> 
<ul><li>说明：依赖 <code>springframework-core， -context， -beans</code>，它们都是同一个版本，可以定义一个变量来保存版本：<code>${spring.version}</code>，定义依赖的时候，引用该版本。</li></ul> 
<p>5、二方库不要有配置项， 最低限度不要再增加配置项。</p> 
<p>6、不要使用不稳定的工具包或者 Utils 类。</p> 
<ul><li>说明： 不稳定指的是提供方无法做到向下兼容，在编译阶段正常，但在运行时产生异常，因此，尽量使用业界稳定的二方工具包</li></ul> 
<p>7、为避免应用二方库的依赖冲突问题，二方库发布者应当遵循以下原则：</p> 
<ul><li> <p>1）<strong>精简可控原则</strong>：<font color="red">移除一切不必要的 API 和依赖，只包含 Service API、必要的领域模型对象、Utils 类、常量、枚举<br> 等</font>。如果依赖其它二方库，尽量是 provided 引入，让二方库使用者去依赖具体版本号；无 log 具体实现，只依赖日志框架。</p> </li><li> <p>2）<strong>稳定可追溯原则</strong>：每个版本的变化应该被记录，二方库由谁维护，源码在哪里，都需要能方便查到。除非用户主动升级版本，否则公共二方库的行为不应该发生变化。</p> </li></ul> 
<h4><a id="8Maven_322"></a>8、说说Maven的依赖原则？</h4> 
<h5><a id="81_324"></a>8.1、依赖路径最短优先原则</h5> 
<ul><li> <p>依赖传递的路径越短越优先</p> </li><li> <pre><code class="prism language-html">A -&gt; B -&gt; C -&gt; X(1.0)
A -&gt; D -&gt; X(2.0)
</code></pre> </li><li> <p>由于 X(2.0) 路径最短，所以使用 X(2.0)。</p> </li></ul> 
<h5><a id="82pom_335"></a>8.2、pom文件声明顺序优先原则</h5> 
<ul><li> <p>路径长度一样，则先声明的优先</p> </li><li> <pre><code class="prism language-html">A -&gt; B -&gt; X(1.0)
A -&gt; C -&gt; X(2.0)
</code></pre> </li><li> <p>在 POM 中最先声明的优先，上面的两个依赖如果先声明 B，那么最后使用 X(1.0)。</p> </li></ul> 
<h5><a id="83_346"></a>8.3、覆写优先原则</h5> 
<ul><li> <p>子 POM 内声明的依赖优先于父 POM 中声明的依赖。</p> </li><li> <p>即当前pom文件里声明的直接覆盖父工程传过来的</p> </li></ul> 
<h3><a id="1_352"></a>问题1：如何解决依赖传递引起的版本冲突？</h3> 
<ul><li> <p>问题：A项目因为item-standard-api jar包deploy的姿势不正确，只deploy成功了一部分，导致B项目在部署时，由于item-standard-api依赖item-microservice-api，又传递依赖item-microservice-common，导致了此报错</p> </li><li> <p>报错：如下图所示<br> <img src="https://images2.imgbox.com/db/c8/arYaQ7OL_o.png" alt="在这里插入图片描述" width="460" height="170"></p> </li><li> <p>解决方案：<font color="red"><strong>找到 Maven 加载的 Jar 包版本，使用 <code>mvn dependency:tree</code> 查看依赖树，根据依赖原则来调整依赖在 POM 文件的声明顺序</strong></font>。首先重新升级item-standard项目jar包，然后im项目和ip项目依赖is最新的jar包，即可。</p> </li><li> <p>第二种解决方案：可通过dependency的exclusion元素排除掉依赖</p> 
  <ul><li>不推荐，可能已经存在对这个被剔除jar包的依赖</li></ul> </li></ul> 
<h4><a id="9Maven_360"></a>9、说说Maven依赖的解析机制？</h4> 
<p>当依赖的范围是 system 的时候，Maven 直接从本地文件系统中解析构件。</p> 
<ul><li>根据依赖坐标计算仓库路径，尝试直接从本地仓库寻找构件，如果发现对应的构件，就解析成功。<strong>如果在本地仓库不存在相应的构件，就遍历所有的远程仓库</strong>，发现后，下载并解析使用。<font color="red">如果依赖的版本是 RELEASE 或 LATEST，就基于更新策略读取所有远程仓库的元数据文件（groupId/artifactId/maven-metadata.xml），将其与本地仓库的对应元合并后，计算出RELEASE 或者 LATEST 真实的值，然后基于该值检查本地仓库，或者从远程仓库下载</font>。<font color="green"><strong>如果依赖的版本是 SNAPSHOT，就基于更新策略读取所有远程仓库的元数据文件</strong>，将它与本地仓库对应的元数据合并，得到最新快照版本的值，然后根据该值检查本地仓库，或从远程仓库下载</font>。</li><li>如果最后解析得到的构件版本包含有时间戳，先将该文件下载下来，再将文件名中时间戳信息删除，剩下 SNAPSHOT 并使用（以非时间戳的形式使用）。</li></ul> 
<h4><a id="10JAR_367"></a>10、如何部署第三方JAR包？</h4> 
<p><strong>背景</strong>：在项目中我们经常需要使用第三方的Jar，比如某些SDK，这些SDK没有直接发布到公开的maven仓库中，这种情况下如何使用这些三方JAR呢？</p> 
<p><strong>解决方法</strong>：如果有Maven私服，将第三方Jar包安装到我们的Maven仓库</p> 
<p>先配置Maven私服, server &amp; profile信息</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- server --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>xxx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>xxx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- profile --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>xxx.xxx.xxx.xxx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>然后使用如下命令，部署到Maven仓库</p> 
<pre><code class="prism language-shell"><span class="token comment"># -X：详细信息输出用于调试</span>
<span class="token comment"># -Dfile：本地jar路径</span>
<span class="token comment"># gav: group, artifactId, verson</span>
<span class="token comment"># -Durl：仓库地址</span>
<span class="token comment"># -DrepositoryId：settings文件中的ID </span>
mvn <span class="token parameter variable">-X</span> deploy:deploy-file <span class="token parameter variable">-DgroupId</span><span class="token operator">=</span><span class="token string">"com.huxun"</span> <span class="token parameter variable">-DartifactId</span><span class="token operator">=</span><span class="token string">"yop-java-sdk-biz"</span> <span class="token parameter variable">-Dversion</span><span class="token operator">=</span><span class="token string">"1.0.0"</span> <span class="token parameter variable">-Dpackaging</span><span class="token operator">=</span><span class="token string">"jar"</span> <span class="token parameter variable">-Dfile</span><span class="token operator">=</span><span class="token string">"/Users/xxx/Downloads/yop-java-sdk-biz/4.1.13/yop-java-sdk-biz-4.1.13.jar"</span> <span class="token parameter variable">-DrepositoryId</span><span class="token operator">=</span><span class="token string">"maven-public"</span> <span class="token parameter variable">-Durl</span><span class="token operator">=</span><span class="token string">"http://nexus.xxx.com/repository/maven-releases/"</span> <span class="token parameter variable">--settings</span>  /Users/xxx/.m2/settings.xml
</code></pre> 
<p>如果没有Maven私服，放在项目代码中，比如项目中libs文件夹中</p> 
<p>使用systemPath属性，<code>&lt;scope&gt;system&lt;/scope&gt;</code>, 其它gav三元组是可以随意填写的。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>taobao-sdk-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>system<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>systemPath</span><span class="token punctuation">&gt;</span></span>${project.basedir}/libs/taobao-sdk-java-auto_1479188381469-20180831.jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>systemPath</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li><strong>SpringBoot JAR打包</strong></li></ul> 
<p><strong>springboot在打包的时候，调用spring-boot-maven-plugin，执行repackage把tomcat和resource，lib等合成一个新的jar</strong>。想要将系统jar打进去，必须配置includeSystemScope。最终会将lib放入BOOT-INF\lib</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includeSystemScope</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includeSystemScope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>build-info<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>repackage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li><strong>SpringBoot War打包</strong></li></ul> 
<p>使用mvn clean package命令打包时需要在pom文件加入以下webResources配置，并设置jar包在WEB-INF/lib目录下</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-war-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>webResources</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources/libs/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>targetPath</span><span class="token punctuation">&gt;</span></span>WEB-INF/lib/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>targetPath</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>webResources</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="11Maven_474"></a>11、说说Maven插件的解析机制</h4> 
<p>与依赖的构件(artifactId)一样，插件(plugin)也是基于坐标保存在Maven仓库中。<font color="red"><strong>在用到插件的时候会先从本地仓库查找插件，如果本地仓库没有则从远程仓库查找插件并下载到本地仓库</strong></font>。与普通的依赖构件不同的是，Maven会区别对待普通依赖的远程仓库与插件的远程仓库。前面提到的配置远程仓库只会对普通的依赖有效果。<font color="red"><strong>当Maven需要的插件在本地仓库不存在时是不会去我们以前配置的远程仓库查找插件的，而是需要有专门的插件远程仓库</strong></font>。</p> 
<h5><a id="111maven_478"></a>11.1、如何自定义maven插件？</h5> 
<p>todo</p> 
<p>参考这篇文章：<a href="https://blog.csdn.net/CSDN_KONGlX/article/details/125484808">MAVEN专题之十、设计你自己的maven插件</a></p> 
<h5><a id="112Run_Package_484"></a>11.2、项目中Run Package命令</h5> 
<p>加入Jacoo测试统计的插件, 分为pre-test 和 post-test两个阶段:</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--检查代码覆盖率的插件配置--&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.jacoco<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jacoco-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${jacoco.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--指定生成.exec文件的存放位置--&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>destFile</span><span class="token punctuation">&gt;</span></span>target/coverage-reports/jacoco-unit.exec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>destFile</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--Jacoco是根据.exec文件生成最终的报告，所以需指定.exec的存放路径--&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataFile</span><span class="token punctuation">&gt;</span></span>target/coverage-reports/jacoco-unit.exec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataFile</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>**/config/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- rules里面指定覆盖规则 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rules</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rule</span> <span class="token attr-name">implementation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.jacoco.maven.RuleConfiguration<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>element</span><span class="token punctuation">&gt;</span></span>BUNDLE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>element</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>limits</span><span class="token punctuation">&gt;</span></span>　　
                <span class="token comment">&lt;!-- 指定方法覆盖到50% --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>limit</span> <span class="token attr-name">implementation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.jacoco.report.check.Limit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span><span class="token punctuation">&gt;</span></span>METHOD<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>COVEREDRATIO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>minimum</span><span class="token punctuation">&gt;</span></span>0.50<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>minimum</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>limit</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 指定分支覆盖到50% --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>limit</span> <span class="token attr-name">implementation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.jacoco.report.check.Limit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span><span class="token punctuation">&gt;</span></span>BRANCH<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>COVEREDRATIO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>minimum</span><span class="token punctuation">&gt;</span></span>0.50<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>minimum</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>limit</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 指定类覆盖到100%，不能遗失任何类 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>limit</span> <span class="token attr-name">implementation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.jacoco.report.check.Limit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span><span class="token punctuation">&gt;</span></span>CLASS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>MISSEDCOUNT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maximum</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maximum</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>limit</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>limits</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rule</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rules</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>pre-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>prepare-agent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>post-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>report<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defaultGoal</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>defaultGoal</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-sh"><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Scanning <span class="token keyword">for</span> projects<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>                                                                         
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building cdc-common-config <span class="token number">1.0</span>.1-RELEASE
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- jacoco-maven-plugin:0.7.7.201606060606:prepare-agent <span class="token punctuation">(</span>pre-test<span class="token punctuation">)</span> @ cdc-common-config ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> argLine <span class="token builtin class-name">set</span> to -javaagent:C:<span class="token punctuation">\</span><span class="token punctuation">\</span>Users<span class="token punctuation">\</span><span class="token punctuation">\</span>xxx<span class="token punctuation">\</span><span class="token punctuation">\</span>.m2<span class="token punctuation">\</span><span class="token punctuation">\</span>repository<span class="token punctuation">\</span><span class="token punctuation">\</span>org<span class="token punctuation">\</span><span class="token punctuation">\</span>jacoco<span class="token punctuation">\</span><span class="token punctuation">\</span>org.jacoco.agent<span class="token punctuation">\</span><span class="token punctuation">\</span><span class="token number">0.7</span>.7.201606060606<span class="token punctuation">\</span><span class="token punctuation">\</span>org.jacoco.agent-0.7.7.201606060606-runtime.jar<span class="token operator">=</span>destfile<span class="token operator">=</span>D:<span class="token punctuation">\</span><span class="token punctuation">\</span>git_cdc2<span class="token punctuation">\</span><span class="token punctuation">\</span>cdc-backend-services<span class="token punctuation">\</span><span class="token punctuation">\</span>cdc-common-config<span class="token punctuation">\</span><span class="token punctuation">\</span>target<span class="token punctuation">\</span><span class="token punctuation">\</span>jacoco.exec
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-resources-plugin:2.6:resources <span class="token punctuation">(</span>default-resources<span class="token punctuation">)</span> @ cdc-common-config ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Using <span class="token string">'UTF-8'</span> encoding to copy filtered resources.
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Copying <span class="token number">1</span> resource
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Copying <span class="token number">5</span> resources
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-compiler-plugin:3.5.1:compile <span class="token punctuation">(</span>default-compile<span class="token punctuation">)</span> @ cdc-common-config ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Nothing to compile - all classes are up to <span class="token function">date</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-resources-plugin:2.6:testResources <span class="token punctuation">(</span>default-testResources<span class="token punctuation">)</span> @ cdc-common-config ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Using <span class="token string">'UTF-8'</span> encoding to copy filtered resources.
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> skip non existing resourceDirectory D:<span class="token punctuation">\</span>git_cdc2<span class="token punctuation">\</span>cdc-backend-services<span class="token punctuation">\</span>cdc-common-config<span class="token punctuation">\</span>src<span class="token punctuation">\</span>test<span class="token punctuation">\</span>resources
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-compiler-plugin:3.5.1:testCompile <span class="token punctuation">(</span>default-testCompile<span class="token punctuation">)</span> @ cdc-common-config ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Nothing to compile - all classes are up to <span class="token function">date</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-surefire-plugin:2.19.1:test <span class="token punctuation">(</span>default-test<span class="token punctuation">)</span> @ cdc-common-config ---
<span class="token punctuation">..</span>.
Results <span class="token builtin class-name">:</span>

Tests run: <span class="token number">1</span>, Failures: <span class="token number">0</span>, Errors: <span class="token number">0</span>, Skipped: <span class="token number">0</span>

<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- jacoco-maven-plugin:0.7.7.201606060606:report <span class="token punctuation">(</span>post-test<span class="token punctuation">)</span> @ cdc-common-config ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Loading execution data <span class="token function">file</span> D:<span class="token punctuation">\</span>git_cdc2<span class="token punctuation">\</span>cdc-backend-services<span class="token punctuation">\</span>cdc-common-config<span class="token punctuation">\</span>target<span class="token punctuation">\</span>jacoco.exec
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Analyzed bundle <span class="token string">'cdc-common-config'</span> with <span class="token number">1</span> classes
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-jar-plugin:2.6:jar <span class="token punctuation">(</span>default-jar<span class="token punctuation">)</span> @ cdc-common-config ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building jar: D:<span class="token punctuation">\</span>git_cdc2<span class="token punctuation">\</span>cdc-backend-services<span class="token punctuation">\</span>cdc-common-config<span class="token punctuation">\</span>target<span class="token punctuation">\</span>cdc-common-config-1.0.1-RELEASE.jar
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- spring-boot-maven-plugin:1.4.1.RELEASE:repackage <span class="token punctuation">(</span>default<span class="token punctuation">)</span> @ cdc-common-config ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> BUILD SUCCESS
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Total time: <span class="token number">10.372</span> s
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Finished at: <span class="token number">2017</span>-03-02T15:43:05+08:00
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Final Memory: 34M/497M
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
</code></pre> 
<h4><a id="12maven_606"></a>12、修改maven版本号的常见方法（非常实用，推荐使用）</h4> 
<p>常见的做法：</p> 
<p>商品中心的做法：<br> 上传到测试环境：</p> 
<ul><li>mvn -Pdev clean deploy $deployParam -DskipTests=true -U<br> 上传到真线环境：</li><li>mvn -P !dev -Pprod clean deploy $deployParam -DskipTests=true -U</li></ul> 
<p>使用的shell脚本，如下所示：</p> 
<pre><code class="prism language-shell"><span class="token comment">#! bin/sh</span>
<span class="token builtin class-name">echo</span> <span class="token string">"********** SNAPSHOT打包上传操作开始 **********"</span>

<span class="token comment"># deploy的module列表，多个用逗号隔开，将会deploy以下module及其依赖module（含parent）</span>
<span class="token assign-left variable">deployModules</span><span class="token operator">=</span>batch-job-api,drds-transaction,item-microservice-agreement-api,item-microservice-api<span class="token punctuation">\</span>
,item-microservice-common,item-microservice-external-api

<span class="token assign-left variable">deployParam</span><span class="token operator">=</span><span class="token string">"-pl <span class="token variable">$deployModules</span> -am"</span>

<span class="token comment"># deployParam=</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$deployParam</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"********** 将会deploy的module及其依赖module（含parent）:"</span>

        <span class="token assign-left variable">arr</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">${deployModules<span class="token operator">/</span><span class="token operator">/</span><span class="token operator">,</span><span class="token operator">/</span> }</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">var</span> <span class="token keyword">in</span> <span class="token variable">${arr<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>
        <span class="token keyword">do</span>
            <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">${var}</span>"</span>
        <span class="token keyword">done</span>
<span class="token keyword">fi</span>



<span class="token comment"># 获取当前住pom里面的maven version</span>
<span class="token assign-left variable">currentMvnVersion</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">awk</span> <span class="token string">'/&lt;version&gt;[^&lt;]+&lt;\/version&gt;/{gsub(/&lt;version&gt;|&lt;\/version&gt;/,"",$1);print $1;exit;}'</span> pom.xml<span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">"********** 当前version为:【"</span> <span class="token variable">$currentMvnVersion</span> <span class="token string">"】"</span>

<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"********** 是否需要变更当前version？不需要请输入n，需要请输入指定version(格式*.*.*-SNAPSHOT): "</span> selectVersion


<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$selectVersion</span> <span class="token operator">==</span> <span class="token string">"n"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token keyword">then</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$currentMvnVersion</span> <span class="token operator">==</span> *<span class="token string">"-RELEASE"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span>
        <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">"********** 格式错误！当前为版本格式为-RELEASE，请输入以-SNAPSHOT结尾的版本号"</span>
        <span class="token keyword">else</span>
            <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"********** 是否需要把SNAPSHOT包【"</span><span class="token variable">$currentMvnVersion</span><span class="token string">"】上传到dev环境？【y/n】"</span> selectDev
            <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$selectDev</span> <span class="token operator">=</span> <span class="token string">"y"</span> <span class="token punctuation">]</span>
            <span class="token keyword">then</span>
              <span class="token builtin class-name">echo</span> <span class="token string">"********** 开始打包并deploy到dev"</span>
              mvn <span class="token parameter variable">-Pdev</span> clean deploy <span class="token variable">$deployParam</span> <span class="token parameter variable">-DskipTests</span><span class="token operator">=</span>true <span class="token parameter variable">-U</span>
            <span class="token keyword">else</span>
              <span class="token builtin class-name">echo</span> <span class="token string">"********** 你没有deploy到dev"</span>
            <span class="token keyword">fi</span>

                <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"********** 是否需要把SNAPSHOT包【"</span><span class="token variable">$selectVersion</span><span class="token string">"】上传到【真线】环境？【y/n】"</span> selectProd
                    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$selectProd</span> <span class="token operator">=</span> <span class="token string">"y"</span> <span class="token punctuation">]</span>
                        <span class="token keyword">then</span>
                          <span class="token builtin class-name">echo</span> <span class="token string">"********** 开始打包并deploy到prod"</span>
                          mvn <span class="token parameter variable">-P</span> <span class="token punctuation">\</span><span class="token operator">!</span>dev <span class="token parameter variable">-Pprod</span> clean deploy <span class="token parameter variable">-pl</span> <span class="token variable">$deployModules</span> <span class="token parameter variable">-am</span> <span class="token parameter variable">-DskipTests</span><span class="token operator">=</span>true <span class="token parameter variable">-U</span>
                        <span class="token keyword">else</span>
                          <span class="token builtin class-name">echo</span> <span class="token string">"********** 你没有deploy到prod"</span>
                    <span class="token keyword">fi</span>
        <span class="token keyword">fi</span>

<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$selectVersion</span> <span class="token operator">==</span> *<span class="token string">"-SNAPSHOT"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"********** 开始更新pom文件 ********** <span class="token entity" title="\n">\n</span>"</span>
    mvn versions:set <span class="token parameter variable">-DnewVersion</span><span class="token operator">=</span><span class="token variable">$selectVersion</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"********** 更新pom完成 ********** "</span>

    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"********** 是否需要把SNAPSHOT包【"</span><span class="token variable">$selectVersion</span><span class="token string">"】上传到dev环境？【y/n】"</span> selectDev
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$selectDev</span> <span class="token operator">=</span> <span class="token string">"y"</span> <span class="token punctuation">]</span>
        <span class="token keyword">then</span>
          <span class="token builtin class-name">echo</span> <span class="token string">"********** 开始打包并deploy到dev"</span>
          mvn <span class="token parameter variable">-Pdev</span> clean deploy <span class="token variable">$deployParam</span> <span class="token parameter variable">-DskipTests</span><span class="token operator">=</span>true <span class="token parameter variable">-U</span>
        <span class="token keyword">else</span>
          <span class="token builtin class-name">echo</span> <span class="token string">"********** 你没有deploy到dev"</span>
        <span class="token keyword">fi</span>

    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"********** 是否需要把SNAPSHOT包【"</span><span class="token variable">$selectVersion</span><span class="token string">"】上传到【真线】环境？【y/n】"</span> selectProd
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$selectProd</span> <span class="token operator">=</span> <span class="token string">"y"</span> <span class="token punctuation">]</span>
            <span class="token keyword">then</span>
              <span class="token builtin class-name">echo</span> <span class="token string">"********** 开始打包并deploy到prod"</span>
              mvn <span class="token parameter variable">-P</span> <span class="token punctuation">\</span><span class="token operator">!</span>dev <span class="token parameter variable">-Pprod</span> clean deploy <span class="token parameter variable">-pl</span> <span class="token variable">$deployModules</span> <span class="token parameter variable">-am</span> <span class="token parameter variable">-DskipTests</span><span class="token operator">=</span>true <span class="token parameter variable">-U</span>
            <span class="token keyword">else</span>
              <span class="token builtin class-name">echo</span> <span class="token string">"********** 你没有deploy到prod"</span>
            <span class="token keyword">fi</span>

    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"********** 是否保存更新后的version【"</span><span class="token variable">$selectVersion</span><span class="token string">"】在代码里？【y/n】建议选y  "</span> selectRevert
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$selectRevert</span> <span class="token operator">=</span> <span class="token string">"y"</span> <span class="token punctuation">]</span>
        <span class="token keyword">then</span>
           <span class="token builtin class-name">echo</span> <span class="token string">"********** 保存更新后的version【"</span><span class="token variable">$selectVersion</span><span class="token string">"】在代码里了"</span>
        <span class="token keyword">else</span>
           mvn versions:set <span class="token parameter variable">-DnewVersion</span><span class="token operator">=</span><span class="token variable">$currentMvnVersion</span>
        <span class="token keyword">fi</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"********** 格式错误！请输入以-SNAPSHOT结尾的版本号"</span>
    <span class="token keyword">fi</span>
<span class="token keyword">fi</span>


<span class="token builtin class-name">echo</span> <span class="token string">"********** SNAPSHOT打包上传操作结束 **********"</span>
</code></pre> 
<h4><a id="13__MavenNexus_715"></a>13、工具详解 - Maven私有仓库Nexus</h4> 
<p>Maven私有仓库Nexus介绍和使用，对工具的使用查查资料就可以</p> 
<h5><a id="131Nexus_719"></a>13.1、Nexus是什么</h5> 
<p>1、有些公司都不提供外网给项目组人员，因此就<strong>不能使用maven访问远程的仓库地址</strong>，所以很有必要在局域网里找一台有外网权限的机器，搭建nexus私服，然后开发人员连到这台私服上，这样的话就可以通过这台<strong>搭建了nexus私服的电脑访问maven的远程仓库</strong>。而且自己maven私服更容易维护，<font color="red"><strong>由于在内网，公司的开发人员从maven私服迁出jar到本地仓库更快</strong></font>。</p> 
<p>2、当需要上传第三方或者自己的jar到maven仓库时，就需要私服了。</p> 
<h5><a id="132Nexus_725"></a>13.2、Nexus安装</h5> 
<p><a href="https://blog.csdn.net/yjclsx/article/details/83992321">搭建Maven私服</a></p> 
<h5><a id="133Nexus_729"></a>13.3、Nexus功能介绍</h5> 
<p><a href="https://blog.csdn.net/yjclsx/article/details/83994535">Nexus3功能介绍</a></p> 
<h5><a id="134Nexus_733"></a>13.4、Nexus配置和使用</h5> 
<p><a href="https://blog.csdn.net/yjclsx/article/details/83996224">Maven+Nexus代理中央仓库</a></p> 
<h5><a id="135Nexusjar_737"></a>13.5、Nexus上传第三方jar包</h5> 
<p>上传含Maven依赖的jar包和源码包到Nexus并下载引入到其他项目中</p> 
<ul><li><a href="https://www.jianshu.com/p/b8ec688c388e" rel="nofollow">导入第三方Jar包到Nexus私服</a></li><li><a href="https://blog.csdn.net/yjclsx/article/details/84027055">上传含Maven依赖的jar包和源码包到Nexus并下载引入到其他项目中</a></li></ul> 
<p>参考文章：</p> 
<p>1、<a href="http://blog.csdn.net/luanlouis/article/details/50492163">《Maven进阶》1.maven 项目生命周期与构建原理</a></p> 
<p>2、<a href="http://maven.apache.org/pom.html#Dependency_Version_Requirement_Specification" rel="nofollow">POM Reference</a></p> 
<h3><a id="1_pom__GroupId_ArtifactId_Version_753"></a>问题1：禁止在子项目的 pom 依赖中出现相同的 GroupId，相同的 ArtifactId，但是不同的 Version。</h3> 
<p>说明：在本地调试时会使用各子项目指定的版本号，但是合并成一个 war，只能有一个版本号出现在最后的 lib 目录中。曾经出现过线下调试是正确的，发布到线上却出故障的先例。</p> 
<h3><a id="2_757"></a>问题2：底层基础技术框架、核心数据管理平台、或近硬件端系统谨慎引入第三方实现。</h3> 
<h3><a id="3_pom_dependenciesdependencyManagement__759"></a>问题3：所有 pom 文件中的依赖声明放在<code>&lt;dependencies&gt;</code>语句块中，所有版本仲裁放在<code>&lt;dependencyManagement&gt;</code> 语句块中。</h3> 
<p>说明： <code>&lt;dependencyManagement&gt;</code> 里只是声明版本，并不实现引入，因此子项目需要显式的声明依赖，version 和 scope 都读取自父 pom。而<code>&lt;dependencies&gt;</code> 所有声明在主 pom 的 <code>&lt;dependencies&gt;</code> 里的依赖都会自动引入， 并默认被所有的子项目继承。</p> 
<ul><li><strong>基于此改造我们的项目</strong></li></ul> 
<h3><a id="4maven_UnknownUnknownUnknown__765"></a>问题4：maven报错，父级 ‘Unknown:Unknown:Unknown’ 有问题</h3> 
<p><strong>原因</strong>：<a href="https://so.csdn.net/so/search?q=maven&amp;spm=1001.2101.3001.7020">maven</a>包下载错误，下载错误的原因是settings文件配置的有问题，导致下载的pom文件有问题</p> 
<p><strong>解决</strong>：到仓库中将原有的包删除，重新下载</p> 
<p><strong>参考</strong>：https://blog.csdn.net/weixin_52627566/article/details/125822086</p> 
<h3><a id="5maven_773"></a>问题5：maven下载资源时，选择的是错误的域名，导致下载超时</h3> 
<p><strong>原因</strong>：maven目录下的libexec/conf/settings.xml文件不是最新的，但为啥用户设置文件的settings文件没有覆盖libexec/conf/settings.xml文件，暂不知道是为什么</p> 
<p><strong>解决方法</strong>：将maven目录下的libexec/conf/settings.xml文件，替换为最新的数据</p> 
<h3><a id="6mavenThe_POM_for_com_is_invalid_transitive_dependencies_if_any_will_not_be_available_779"></a>问题6：maven报The POM for com. is invalid, transitive dependencies (if any) will not be available问题解决</h3> 
<p>https://blog.csdn.net/m0_73761022/article/details/128673121</p> 
<pre><code class="prism language-xml"> mvn -X -U clean package
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b82d5724f3ed82973ef3fb24ddf11bf7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">软件理论——演进式架构设计</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/148d9d53114c16243b191ceaa75f6eea/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">张正友相机标定（全流程，含畸变，matlab源代码解析）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>