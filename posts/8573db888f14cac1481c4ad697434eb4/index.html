<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React配置代理 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="React配置代理" />
<meta property="og:description" content="方式一： 在package.json中追加如下配置：
&#34;proxy&#34;:&#34;http://localhost:5000&#34;
方式二： 1.创建代理配置文件 （setupProxy.js） 在src下创建配置文件：src/setupProxy.js
2.编写setupProxy.js配置具体代理规则 setupProxy.js文件
// react脚手架自带这个库 const proxy = require(&#34;http-proxy-middleware&#34;); module.exports = function (app) { app.use( proxy(&#34;/api1&#34;, { // 遇见api1这个前缀就会触发该代理配置 target: &#34;http://localhost:5000&#34;, // 请求转发给谁 changeOrigin: true, // 控制服务器中的请求头中Host字段的值 pathRewrite: { &#34;^/api1&#34;: &#34;&#34; }, // 重写请求路径 }), proxy(&#34;/api2&#34;, { target: &#34;http://localhost:5001&#34;, changeOrigin: true, pathRewrite: { &#34;^/api2&#34;: &#34;http://localhost:3000/&#34; }, }) ); }; App.js文件
// 创建“外壳”组件App import React, { Component } from &#34;react&#34;; import axios from &#34;axios&#34;; // 创建并暴露App组件 export default class App extends Component { gethandleData = () =&gt; { axios." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/8573db888f14cac1481c4ad697434eb4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-16T13:12:34+08:00" />
<meta property="article:modified_time" content="2023-05-16T13:12:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">React配置代理</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>方式一：</h2> 
<p>在package.json中追加如下配置：</p> 
<p>"proxy":"http://localhost:5000"</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f0/20/S98dddQk_o.png"></p> 
<h2>方式二：</h2> 
<h4>1.创建代理配置文件 （setupProxy.js）</h4> 
<p>在src下创建配置文件：src/setupProxy.js</p> 
<h4>2.编写setupProxy.js配置具体代理规则</h4> 
<p>setupProxy.js文件</p> 
<pre><code class="language-javascript">// react脚手架自带这个库
const proxy = require("http-proxy-middleware");

module.exports = function (app) {
  app.use(
    proxy("/api1", {    // 遇见api1这个前缀就会触发该代理配置
      target: "http://localhost:5000",  // 请求转发给谁
      changeOrigin: true,   // 控制服务器中的请求头中Host字段的值
      pathRewrite: { "^/api1": "" },    // 重写请求路径
    }),
    proxy("/api2", {
      target: "http://localhost:5001",
      changeOrigin: true,
      pathRewrite: { "^/api2": "http://localhost:3000/" },
    })
  );
};
</code></pre> 
<p>App.js文件</p> 
<pre><code class="language-javascript">// 创建“外壳”组件App
import React, { Component } from "react";
import axios from "axios";

// 创建并暴露App组件
export default class App extends Component {
  gethandleData = () =&gt; {
    axios.get("http://localhost:3000/api1/students").then(
      (response) =&gt; {
        console.log("成功了！", response.data);
      },
      (error) =&gt; {
        console.log("失败了！", error.message);
      }
    );
  };
  getCarData = () =&gt; {
    axios.get("api2/students").then(
      (response) =&gt; {
        console.log("成功了！", response.data);
      },
      (error) =&gt; {
        console.log("失败了！", error.message);
      }
    );
  };
  render() {
    return (
      &lt;div&gt;
        &lt;button onClick={this.gethandleData}&gt;点我获取学生数据&lt;/button&gt;
        &lt;button onClick={this.getCarData}&gt;点我获取汽车数据&lt;/button&gt;
      &lt;/div&gt;
    );
  }
}
</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/45ad69067e7d6863d079850847034753/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">matlab使用udpport实现udp通信</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e06c0757603929d7fee39d801eb5387e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java连接MySQL改成连接SQL Server数据库</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>