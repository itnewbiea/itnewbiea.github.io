<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用Python批量拼接图片 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用Python批量拼接图片" />
<meta property="og:description" content="前言 当需要将多张图像拼接成一张更大的图像时，通常会用到图片拼接技术。这种技术在许多领域中都有广泛的应用，例如计算机视觉、图像处理、卫星图像、地理信息系统等等。在实际应用中，拼接图像可以用于创建全景图像、地图、海报、广告牌等等。
本文将使用以下四张图片为例，介绍使用Python中的PIL库进行图片拼接的方法。我们将使用PIL库中的Image模块来加载、调整大小和合并多张图像。
目录
前言
〇、准备工作，PIL库安装
一、简单程序实现
二、更复杂情况
〇、准备工作，PIL库安装 PIL（Python Imaging Library）是Python中一个强大的图像处理库，它可以实现图像的打开、保存、调整大小、裁剪、合并等多种操作。PIL库还提供了丰富的图像处理功能，例如色彩调整、滤镜效果、文字叠加等等，使得图像处理变得更加简单和高效。
安装PIL库的方法如下：
使用pip安装 在命令行中输入以下命令即可：
pip install pillow 此外，还可以通过Anaconda或Miniconda等科学计算发行版进行安装。如果你使用Anaconda，可以使用以下命令来安装Pillow库：
conda install pillow 一、简单程序实现 import os import glob from PIL import Image # 设置图像文件夹的路径 image_dir = &#39;images/&#39; # 获取文件夹中所有图像文件的列表 image_files = glob.glob(os.path.join(image_dir, &#39;*.png&#39;)) # 加载每个图像，并调整为200x200像素大小（如果需要） images = [] for image_file in image_files: image = Image.open(image_file) image = image.resize((200, 200)) images.append(image) # 创建一个新的400x400像素大小的白色背景图像 new_image = Image.new(&#39;RGB&#39;, (400, 400), &#39;white&#39;) # 将四个图像粘贴到新图像的正确位置 new_image." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1d2f47e808f8aa87ba96eca0e3bae0f0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-30T07:58:26+08:00" />
<meta property="article:modified_time" content="2023-04-30T07:58:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用Python批量拼接图片</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="%E5%89%8D%E8%A8%80">前言</h2> 
<p>当需要将多张图像拼接成一张更大的图像时，通常会用到图片拼接技术。这种技术在许多领域中都有广泛的应用，例如计算机视觉、图像处理、卫星图像、地理信息系统等等。在实际应用中，拼接图像可以用于创建全景图像、地图、海报、广告牌等等。</p> 
<p>本文将使用以下四张图片为例，介绍使用Python中的PIL库进行图片拼接的方法。我们将使用PIL库中的Image模块来加载、调整大小和合并多张图像。</p> 
<p class="img-center"><img alt="" height="106" src="https://images2.imgbox.com/f4/77/HmNfSKvj_o.png" width="451"></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E3%80%87%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C%EF%BC%8CPIL%E5%BA%93%E5%AE%89%E8%A3%85-toc" style="margin-left:0px;"><a href="#%E3%80%87%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C%EF%BC%8CPIL%E5%BA%93%E5%AE%89%E8%A3%85" rel="nofollow">〇、准备工作，PIL库安装</a></p> 
<p id="%E4%B8%80%E3%80%81%E7%AE%80%E5%8D%95%E7%A8%8B%E5%BA%8F%E5%AE%9E%E7%8E%B0-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E7%AE%80%E5%8D%95%E7%A8%8B%E5%BA%8F%E5%AE%9E%E7%8E%B0" rel="nofollow">一、简单程序实现</a></p> 
<p id="%E4%BA%8C%E3%80%81%E6%9B%B4%E5%A4%8D%E6%9D%82%E6%83%85%E5%86%B5-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E6%9B%B4%E5%A4%8D%E6%9D%82%E6%83%85%E5%86%B5" rel="nofollow">二、更复杂情况</a></p> 
<hr id="hr-toc"> 
<p></p> 
<hr> 
<h2 id="%E3%80%87%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C%EF%BC%8CPIL%E5%BA%93%E5%AE%89%E8%A3%85">〇、准备工作，PIL库安装</h2> 
<p>PIL（Python Imaging Library）是Python中一个强大的图像处理库，它可以实现图像的打开、保存、调整大小、裁剪、合并等多种操作。PIL库还提供了丰富的图像处理功能，例如色彩调整、滤镜效果、文字叠加等等，使得图像处理变得更加简单和高效。</p> 
<p>安装PIL库的方法如下：</p> 
<ol><li>使用pip安装</li></ol> 
<p>在命令行中输入以下命令即可：</p> 
<pre><code>pip install pillow</code></pre> 
<p> 此外，还可以通过Anaconda或Miniconda等科学计算发行版进行安装。如果你使用Anaconda，可以使用以下命令来安装Pillow库：</p> 
<pre><code>conda install pillow
</code></pre> 
<h2 id="%E4%B8%80%E3%80%81%E7%AE%80%E5%8D%95%E7%A8%8B%E5%BA%8F%E5%AE%9E%E7%8E%B0">一、简单程序实现</h2> 
<pre><code class="language-python">import os
import glob
from PIL import Image

# 设置图像文件夹的路径
image_dir = 'images/'

# 获取文件夹中所有图像文件的列表
image_files = glob.glob(os.path.join(image_dir, '*.png'))

# 加载每个图像，并调整为200x200像素大小（如果需要）
images = []
for image_file in image_files:
    image = Image.open(image_file)
    image = image.resize((200, 200))
    images.append(image)

# 创建一个新的400x400像素大小的白色背景图像
new_image = Image.new('RGB', (400, 400), 'white')

# 将四个图像粘贴到新图像的正确位置
new_image.paste(images[0], (0, 0))
new_image.paste(images[1], (200, 0))
new_image.paste(images[2], (0, 200))
new_image.paste(images[3], (200, 200))

# 将最终图像保存到磁盘上
new_image.save(image_dir + 'output.png')</code></pre> 
<p>效果如下</p> 
<p class="img-center"><img alt="" height="455" src="https://images2.imgbox.com/12/ea/qf8OcxpQ_o.png" width="469"></p> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%E6%9B%B4%E5%A4%8D%E6%9D%82%E6%83%85%E5%86%B5">二、更复杂情况</h2> 
<p>如果遇到更多图片的情况应该怎么办呢，我稍微更改了一下程序结构，让大家可以拼接任意数量的图形块。</p> 
<p>11/04/2023 version,  debuged this part.</p> 
<p>30/04/2023 version,  debuged this part again.</p> 
<pre><code class="language-python">import os
import math
from PIL import Image


def merge_images(image_folder, output_file, n, m):
    # 获取所有图像文件的列表
    image_files = [os.path.join(image_folder, f) for f in os.listdir(image_folder) if f.endswith('.png')]

    # 计算每个小图像的大小和大图像的大小
    image_count = len(image_files)
    if image_count == 0:
        print('No image files found in the directory:', image_folder)
        return

    # 计算小图像的大小以及大图像的大小
    img = Image.open(image_files[0])
    img_size0 = img.size[0]
    img_size1 = img.size[1]
    new_img_size0 = img_size0 * n
    new_img_size1 = img_size1 * m

    # 创建一个新的大图像
    new_img = Image.new('RGB', (new_img_size0, new_img_size1), 'white')

    # 将所有小图像粘贴到新图像的正确位置
    for i, f in enumerate(image_files):
        row = int(i / n)
        col = i % n
        img = Image.open(f)
        img = img.resize((img_size0, img_size1))
        new_img.paste(img, (col * img_size0, row * img_size1))

    # 保存大图像
    new_img.save(output_file)


# 用法示例
image_folder = 'C:/Users/someone/Desktop/img_denosing_test/paper_pics/set68/result'
output_file = 'C:/Users/someone/Desktop/img_denosing_test/paper_pics/set68/result/output.png'
n = 3  # 每行显示的图像数
m = 2  # 每列显示的图像数
merge_images(image_folder, output_file, n, m)
</code></pre> 
<p>在本文中，我们演示了如何使用Python中的PIL库进行图片拼接，让您可以轻松地处理各种图像拼接任务。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3d8ec030edbc7857e330b96da3deb5b7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">windows10 安装 Docker 集成到 WSL 2虚拟机以及Doceker下面安装Hyperf 系统 下面Go安装配置 下载Gin框架(保证安装成功 保证都会)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bbb7c75240ddaefd621b5608c1c623f2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VSCode 技巧</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>