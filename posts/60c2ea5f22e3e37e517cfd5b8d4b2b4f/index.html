<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据库操作】insertSelective 的使用和特性 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【数据库操作】insertSelective 的使用和特性" />
<meta property="og:description" content="insertSelective 是数据库操作中的一种插入记录的方法，通常与 MyBatis 或其他 ORM（对象关系映射）框架结合使用。
这个方法的作用是向数据库中插入一条记录，但与 insert 不同的是，insertSelective 只会插入那些指定了数值的字段，而忽略那些数值为 null 的字段。具体而言，如果一个字段在插入时没有指定数值，而数据库中定义了默认值，那么数据库会使用该字段的默认值。如果字段
为 null，并且数据库中没有默认值，那么 insertSelective 就不会插入该字段，让数据库使用默认值或者保持字段为 null。 insert 语句会插入所有字段，即使字段值为 null。
这个方法的目的是在插入记录时，只设置那些确实有值的字段，而对于没有值的字段则由数据库自行处理。
具体的语法和用法可能取决于所使用的 ORM 框架和数据库类型。以下是一个简单的例子，以 MyBatis 为例：
&lt;!-- MyBatis Mapper XML 文件中的例子 --&gt; &lt;insert id=&#34;insertSelective&#34; parameterType=&#34;YourEntity&#34;&gt; INSERT INTO your_table (column1, column2, column3) VALUES (#{property1}, #{property2}, #{property3}) &lt;/insert&gt; 在这个例子中，假设 YourEntity 是实体类，该实体类有对应的属性 property1、property2、property3 分别对应数据库表中的列 column1、column2、column3。在执行 insertSelective 操作时，只有那些有值的属性会被插入数据库。
insertSelective 语句只会插入那些字段值不为 null 的列。
&lt;!-- MyBatis Mapper XML 文件中的 insertSelective 语句 --&gt; &lt;insert id=&#34;insertSelective&#34; parameterType=&#34;YourEntity&#34;&gt; INSERT INTO your_table &lt;trim prefix=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/60c2ea5f22e3e37e517cfd5b8d4b2b4f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T17:50:55+08:00" />
<meta property="article:modified_time" content="2023-12-27T17:50:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据库操作】insertSelective 的使用和特性</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>insertSelective</strong> 是数据库操作中的一种插入记录的方法，通常与 MyBatis 或其他 ORM（对象关系映射）框架结合使用。</p> 
<p>这个方法的作用是向数据库中插入一条记录，但与 <code>insert</code> 不同的是，<code>insertSelective</code> 只会插入那些指定了数值的字段，而忽略那些数值为 null 的字段。具体而言，如果一个字段在插入时没有指定数值，而数据库中定义了默认值，那么数据库会使用该字段的默认值。如果字段<br> 为 <code>null</code>，并且数据库中没有默认值，那么 <code>insertSelective</code> 就不会插入该字段，让数据库使用默认值或者保持字段为 <code>null</code>。 <code>insert</code> 语句会插入所有字段，即使字段值为 <code>null</code>。</p> 
<p><strong>这个方法的目的是在插入记录时，只设置那些确实有值的字段，而对于没有值的字段则由数据库自行处理。</strong></p> 
<p>具体的语法和用法可能取决于所使用的 ORM 框架和数据库类型。以下是一个简单的例子，以 MyBatis 为例：</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- MyBatis Mapper XML 文件中的例子 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>insertSelective<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>YourEntity<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    INSERT INTO your_table (column1, column2, column3)
    VALUES (#{property1}, #{property2}, #{property3})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>在这个例子中，假设 <code>YourEntity</code> 是实体类，该实体类有对应的属性 <code>property1</code>、<code>property2</code>、<code>property3</code> 分别对应数据库表中的列 <code>column1</code>、<code>column2</code>、<code>column3</code>。在执行 <code>insertSelective</code> 操作时，只有那些有值的属性会被插入数据库。</p> 
<p><code>insertSelective</code> 语句只会插入那些字段值不为 null 的列。</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- MyBatis Mapper XML 文件中的 insertSelective 语句 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>insertSelective<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>YourEntity<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    INSERT INTO your_table
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(<span class="token punctuation">"</span></span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">suffixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property1 != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>column1,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property2 != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>column2,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property3 != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>column3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
    VALUES
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(<span class="token punctuation">"</span></span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">suffixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property1 != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>#{property1},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property2 != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>#{property2},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property3 != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>#{property3}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><code>insertSelective</code> 会动态生成插入的 SQL 语句，只插入那些属性值不为 null 的列。如果在 <code>YourEntity</code> 中有某个属性（比如 <code>property2</code>）的值为 <code>null</code>，执行这个 <code>insertSelective</code> 操作时，数据库中对应的列将被忽略。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1243bd3fdcacd21b9493a0ac50e94da7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">内存马初识与浅析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/af243ad4cced7c2a81631dfe3868dc30/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">XPATH和Selenium爬取外网，遇到的问题汇总</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>