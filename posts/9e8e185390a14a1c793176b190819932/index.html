<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【点云PCL入门】点云滤波 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【点云PCL入门】点云滤波" />
<meta property="og:description" content="索引 1.直通滤波器-PassThrough2.点云下采样-VoxelGrid3.删除离群值-StatisticsOutlierRemoval4.使用参数模型投影点云-ProjectInliers5.基于分段算法输出的索引提取点云中的子集-ExclIndices6.ConditionalRemoval和RadiusOutlierRemoval移除离群点7.CropHull任意多边形内部点云提取参考 1.直通滤波器-PassThrough 对指定的某一维度实现滤波，去掉在用户指定范围内部（或外部）的点。
#include&lt;pcl/point_types.h&gt; #include&lt;iostream&gt; #include&lt;pcl/filters/passthrough.h&gt; int main(int argc, char* argv[]) { pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud(new pcl::PointCloud&lt;pcl::PointXYZ&gt;); pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud_filtered(new pcl::PointCloud&lt;pcl::PointXYZ&gt;); //填充点云 cloud-&gt;width = 5; cloud-&gt;height = 1; cloud-&gt;points.resize(cloud-&gt;width*cloud-&gt;height); for(auto&amp; point:*cloud) { point.x = 1024 * rand() / (RAND_MAX &#43; 1.0f); point.y = 1024 * rand() / (RAND_MAX &#43; 1.0f); point.z = 1024 * rand() / (RAND_MAX &#43; 1.0f); } std::cerr &lt;&lt; &#34;Cloud before filtering: &#34; &lt;&lt; std::endl; for (const auto&amp; point : *cloud) std::cerr &lt;&lt; &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9e8e185390a14a1c793176b190819932/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-16T16:26:59+08:00" />
<meta property="article:modified_time" content="2020-12-16T16:26:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【点云PCL入门】点云滤波</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>索引</h4> 
 <ul><li><a href="#1PassThrough_1" rel="nofollow">1.直通滤波器-PassThrough</a></li><li><a href="#2VoxelGrid_42" rel="nofollow">2.点云下采样-VoxelGrid</a></li><li><a href="#3StatisticsOutlierRemoval_76" rel="nofollow">3.删除离群值-StatisticsOutlierRemoval</a></li><li><a href="#4ProjectInliers_121" rel="nofollow">4.使用参数模型投影点云-ProjectInliers</a></li><li><a href="#5ExclIndices_176" rel="nofollow">5.基于分段算法输出的索引提取点云中的子集-ExclIndices</a></li><li><a href="#6ConditionalRemovalRadiusOutlierRemoval_259" rel="nofollow">6.ConditionalRemoval和RadiusOutlierRemoval移除离群点</a></li><li><a href="#7CropHull_330" rel="nofollow">7.CropHull任意多边形内部点云提取</a></li><li><a href="#_411" rel="nofollow">参考</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1PassThrough_1"></a>1.直通滤波器-PassThrough</h2> 
<p>对指定的某一维度实现滤波，去掉在用户指定范围内部（或外部）的点。</p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/point_types.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/filters/passthrough.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud_filtered</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//填充点云</span>
	cloud<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
	cloud<span class="token operator">-</span><span class="token operator">&gt;</span>height <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	cloud<span class="token operator">-</span><span class="token operator">&gt;</span>points<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>cloud<span class="token operator">-</span><span class="token operator">&gt;</span>width<span class="token operator">*</span>cloud<span class="token operator">-</span><span class="token operator">&gt;</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> point<span class="token operator">:</span><span class="token operator">*</span>cloud<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		point<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		point<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		point<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Cloud before filtering: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> point <span class="token operator">:</span> <span class="token operator">*</span>cloud<span class="token punctuation">)</span>
		std<span class="token operator">::</span>cerr  <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> 
	    <span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>z <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token comment">// Create the filtering object</span>
	pcl<span class="token operator">::</span>PassThrough<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span> pass<span class="token punctuation">;</span>
	pass<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pass<span class="token punctuation">.</span><span class="token function">setFilterFieldName</span><span class="token punctuation">(</span><span class="token string">"z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置滤波字段z轴</span>
	pass<span class="token punctuation">.</span><span class="token function">setFilterLimits</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//过滤字段上可接受范围</span>
	pass<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Cloud after filtering:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> point <span class="token operator">:</span> <span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span>
		std<span class="token operator">::</span>cerr  <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>z <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="2VoxelGrid_42"></a>2.点云下采样-VoxelGrid</h2> 
<p>使用体素化网格方法实现下采样，减少点的数量，减少点云数据，并同时保证点云的形状特征。在输入点云数据上创建一个3D体素网格（将体素网格视为一组空间三维立方体）。然后，在每个体素（即3D立方体）中，所有存在的点都将以其质心进行近似（即降采样）。这种方法比以体素的中心逼近它们要慢一些，但是它可以更准确地表示下面的表面。</p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/io/pcd_io.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/point_types.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/filters/voxel_grid.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pcl<span class="token operator">::</span>PCLPointCloud2<span class="token operator">::</span>Ptr <span class="token function">cloud</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PCLPointCloud2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PCLPointCloud2<span class="token operator">::</span>Ptr <span class="token function">cloud_filtered</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PCLPointCloud2<span class="token punctuation">)</span><span class="token punctuation">;</span>

	pcl<span class="token operator">::</span>PCDReader reader<span class="token punctuation">;</span>
	reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"table_scene_lms400.pcd"</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"PointCloud before filtering: "</span> <span class="token operator">&lt;&lt;</span> cloud<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">*</span> cloud<span class="token operator">-</span><span class="token operator">&gt;</span>height
		<span class="token operator">&lt;&lt;</span> <span class="token string">" data points ("</span> <span class="token operator">&lt;&lt;</span> pcl<span class="token operator">::</span><span class="token function">getFieldsList</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">")."</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

	<span class="token comment">// Create the filtering object</span>
	pcl<span class="token operator">::</span>VoxelGrid<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PCLPointCloud2<span class="token operator">&gt;</span> sor<span class="token punctuation">;</span>
	sor<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>
	sor<span class="token punctuation">.</span><span class="token function">setLeafSize</span><span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置滤波时创建的体素大小为1cm立方体</span>
	sor<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"PointCloud after filtering: "</span> <span class="token operator">&lt;&lt;</span> cloud_filtered<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">*</span> cloud_filtered<span class="token operator">-</span><span class="token operator">&gt;</span>height
		<span class="token operator">&lt;&lt;</span> <span class="token string">" data points ("</span> <span class="token operator">&lt;&lt;</span> pcl<span class="token operator">::</span><span class="token function">getFieldsList</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">")."</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PCDWriter writer<span class="token punctuation">;</span>
	writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"table_scene_lms400_downsampled.pcd"</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud_filtered<span class="token punctuation">,</span>
		Eigen<span class="token operator">::</span>Vector4f<span class="token operator">::</span><span class="token function">Zero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Eigen<span class="token operator">::</span>Quaternionf<span class="token operator">::</span><span class="token function">Identity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="3StatisticsOutlierRemoval_76"></a>3.删除离群值-StatisticsOutlierRemoval</h2> 
<p>对每个点的邻域进行一个统计分析，并修剪掉那些不符合一定标准的点。我们的稀疏离群点移除方法基于在输入数据中对点到临近点的距离分布的计算。对每个点，我们计算它到它的所有临近点的平均距离。假设得到的结果是一个高斯分布，其形状由均值和标准差决定，平均距离在标准范围（由全局距离平均值和方差定义）之外的点，可被定义为离群点并可从数据集中去除掉。</p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/io/pcd_io.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/point_types.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/filters/statistical_outlier_removal.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud_filtered</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Fill in the cloud data</span>
	pcl<span class="token operator">::</span>PCDReader reader<span class="token punctuation">;</span>
	<span class="token comment">// Replace the path below with the path where you saved your file</span>
	reader<span class="token punctuation">.</span>read<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"table_scene_lms400.pcd"</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Cloud before filtering: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>cloud <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

	<span class="token comment">// Create the filtering object</span>
	pcl<span class="token operator">::</span>StatisticalOutlierRemoval<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span> sor<span class="token punctuation">;</span>
	sor<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>
	sor<span class="token punctuation">.</span><span class="token function">setMeanK</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//分析的临近点个数</span>
	sor<span class="token punctuation">.</span><span class="token function">setStddevMulThresh</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//标准差倍数，判断是否为离群点的阈值</span>
	sor<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Cloud after filtering: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>cloud_filtered <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

	pcl<span class="token operator">::</span>PCDWriter writer<span class="token punctuation">;</span>
	writer<span class="token punctuation">.</span>write<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"table_scene_lms400_inliers.pcd"</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud_filtered<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//再次滤波，获取离群点数据</span>
	sor<span class="token punctuation">.</span><span class="token function">setNegative</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	sor<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span><span class="token punctuation">;</span>
	writer<span class="token punctuation">.</span>write<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"table_scene_lms400_outliers.pcd"</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud_filtered<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="4ProjectInliers_121"></a>4.使用参数模型投影点云-ProjectInliers</h2> 
<p>将点投影到一个参数化模型上（例如平面或球等）。参数化模型通过一组参数来设定，对于平面来说，使用其等式形式ax+by+cz+d=0，在PCL中有特意存储常见模型系数的数据结构。</p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/io/pcd_io.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/ModelCoefficients.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/filters/project_inliers.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud_projected</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Fill in the cloud data</span>
	cloud<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
	cloud<span class="token operator">-</span><span class="token operator">&gt;</span>height <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	cloud<span class="token operator">-</span><span class="token operator">&gt;</span>points<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>cloud<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">*</span> cloud<span class="token operator">-</span><span class="token operator">&gt;</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> point <span class="token operator">:</span> <span class="token operator">*</span>cloud<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		point<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		point<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		point<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Cloud before projection: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> point <span class="token operator">:</span> <span class="token operator">*</span>cloud<span class="token punctuation">)</span>
		std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"    "</span> <span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>z <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

	<span class="token comment">// Create a set of planar coefficients with X=Y=0,Z=1</span>
	pcl<span class="token operator">::</span>ModelCoefficients<span class="token operator">::</span>Ptr <span class="token function">coefficients</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>ModelCoefficients<span class="token punctuation">)</span><span class="token punctuation">;</span>
	coefficients<span class="token operator">-</span><span class="token operator">&gt;</span>values<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	coefficients<span class="token operator">-</span><span class="token operator">&gt;</span>values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> coefficients<span class="token operator">-</span><span class="token operator">&gt;</span>values<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	coefficients<span class="token operator">-</span><span class="token operator">&gt;</span>values<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
	coefficients<span class="token operator">-</span><span class="token operator">&gt;</span>values<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token comment">// Create the filtering object</span>
	pcl<span class="token operator">::</span>ProjectInliers<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span>proj<span class="token punctuation">;</span>
	proj<span class="token punctuation">.</span><span class="token function">setModelType</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>SACMODEL_PLANE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//平面模型</span>
	proj<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>
	proj<span class="token punctuation">.</span><span class="token function">setModelCoefficients</span><span class="token punctuation">(</span>coefficients<span class="token punctuation">)</span><span class="token punctuation">;</span>
	proj<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_projected<span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Cloud after projection: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> point <span class="token operator">:</span> <span class="token operator">*</span>cloud_projected<span class="token punctuation">)</span>
		std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"    "</span> <span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>z <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="5ExclIndices_176"></a>5.基于分段算法输出的索引提取点云中的子集-ExclIndices</h2> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/ModelCoefficients.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/io/pcd_io.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/point_types.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/sample_consensus/method_types.h&gt;</span>   </span><span class="token comment">//随机参数估计方法头文件</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/sample_consensus/model_types.h&gt;</span>   </span><span class="token comment">//模型定义头文件</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/segmentation/sac_segmentation.h&gt;</span>   </span><span class="token comment">//基于采样一致性分割的类的头文件</span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/filters/voxel_grid.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/filters/extract_indices.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pcl<span class="token operator">::</span>PCLPointCloud2<span class="token operator">::</span>Ptr <span class="token function">cloud_blob</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PCLPointCloud2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cloud_filtered_blob</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PCLPointCloud2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud_filtered</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cloud_p</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cloud_f</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//fill in the cloud data</span>
	pcl<span class="token operator">::</span>PCDReader reader<span class="token punctuation">;</span>
	reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"table_scene_lms400.pcd"</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud_blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"PointCloud before filtering: "</span> <span class="token operator">&lt;&lt;</span> cloud_blob<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">*</span> cloud_blob<span class="token operator">-</span><span class="token operator">&gt;</span>height <span class="token operator">&lt;&lt;</span> <span class="token string">" data points."</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

	<span class="token comment">// Create the filtering object: downsample the dataset using a leaf size of 1cm</span>
	pcl<span class="token operator">::</span>VoxelGrid<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PCLPointCloud2<span class="token operator">&gt;</span> sor<span class="token punctuation">;</span>
	sor<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud_blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
	sor<span class="token punctuation">.</span><span class="token function">setLeafSize</span><span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	sor<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_filtered_blob<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Convert to the templated PointCloud</span>
	pcl<span class="token operator">::</span><span class="token function">fromPCLPointCloud2</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_filtered_blob<span class="token punctuation">,</span> <span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"PointCloud after filtering: "</span> <span class="token operator">&lt;&lt;</span> cloud_filtered<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">*</span> cloud_filtered<span class="token operator">-</span><span class="token operator">&gt;</span>height <span class="token operator">&lt;&lt;</span> <span class="token string">" data points."</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

	<span class="token comment">// Write the downsampled version to disk</span>
	pcl<span class="token operator">::</span>PCDWriter writer<span class="token punctuation">;</span>
	writer<span class="token punctuation">.</span>write<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"table_scene_lms400_downsampled.pcd"</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud_filtered<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	pcl<span class="token operator">::</span>ModelCoefficients<span class="token operator">::</span>Ptr <span class="token function">coefficients</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>ModelCoefficients<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PointIndices<span class="token operator">::</span>Ptr  <span class="token function">inliers</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointIndices<span class="token punctuation">)</span><span class="token punctuation">;</span>

	pcl<span class="token operator">::</span>SACSegmentation<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span> seg<span class="token punctuation">;</span><span class="token comment">// 采样一致性分割算法</span>
	seg<span class="token punctuation">.</span><span class="token function">setOptimizeCoefficients</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置对估计的模型参数进行优化处理</span>
	seg<span class="token punctuation">.</span><span class="token function">setModelType</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>SACMODEL_PLANE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置分割模型类别</span>
	seg<span class="token punctuation">.</span><span class="token function">setMethodType</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>SAC_RANSAC<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置用哪个随机参数估计方法</span>
	seg<span class="token punctuation">.</span><span class="token function">setMaxIterations</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	seg<span class="token punctuation">.</span><span class="token function">setDistanceThreshold</span><span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置判断是否为模型内点的距离阈值</span>

	pcl<span class="token operator">::</span>ExtractIndices<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span> extract<span class="token punctuation">;</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> nr_points <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>cloud_filtered<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// While 30% of the original cloud is still there</span>
	<span class="token comment">//循环运行该过程，并在提取每个模型之后，返回以获取剩余点并进行迭代</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cloud_filtered<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.3</span> <span class="token operator">*</span> nr_points<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		seg<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud_filtered<span class="token punctuation">)</span><span class="token punctuation">;</span>
		seg<span class="token punctuation">.</span><span class="token function">segment</span><span class="token punctuation">(</span><span class="token operator">*</span>inliers<span class="token punctuation">,</span> <span class="token operator">*</span>coefficients<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>inliers<span class="token operator">-</span><span class="token operator">&gt;</span>indices<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Could not estimate a planar model for the given dataset."</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		extract<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud_filtered<span class="token punctuation">)</span><span class="token punctuation">;</span>
		extract<span class="token punctuation">.</span><span class="token function">setIndices</span><span class="token punctuation">(</span>inliers<span class="token punctuation">)</span><span class="token punctuation">;</span>
		extract<span class="token punctuation">.</span><span class="token function">setNegative</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		extract<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_p<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"PointCloud representing the planar component: "</span> <span class="token operator">&lt;&lt;</span> cloud_p<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">*</span> cloud_p<span class="token operator">-</span><span class="token operator">&gt;</span>height <span class="token operator">&lt;&lt;</span> <span class="token string">" data points."</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

		std<span class="token operator">::</span>stringstream ss<span class="token punctuation">;</span>
		ss <span class="token operator">&lt;&lt;</span> <span class="token string">"table_scene_lms400_plane_"</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">".pcd"</span><span class="token punctuation">;</span>
		writer<span class="token punctuation">.</span>write<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">(</span>ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud_p<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Create the filtering object</span>
		extract<span class="token punctuation">.</span><span class="token function">setNegative</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		extract<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_f<span class="token punctuation">)</span><span class="token punctuation">;</span>
		cloud_filtered<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>cloud_f<span class="token punctuation">)</span><span class="token punctuation">;</span>
		i<span class="token operator">++</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


</code></pre> 
<h2><a id="6ConditionalRemovalRadiusOutlierRemoval_259"></a>6.ConditionalRemoval和RadiusOutlierRemoval移除离群点</h2> 
<p>RadiusOutlierRemoval滤波器类非常适合去除单个的离群点，ConditionalRemoval比较灵活，可以根据用户设置的条件灵活过滤。</p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/point_types.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/filters/radius_outlier_removal.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;pcl/filters/conditional_removal.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud_filtered</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Fill in the cloud data</span>
	cloud<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
	cloud<span class="token operator">-</span><span class="token operator">&gt;</span>height <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	cloud<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">resize</span><span class="token punctuation">(</span>cloud<span class="token operator">-</span><span class="token operator">&gt;</span>width <span class="token operator">*</span> cloud<span class="token operator">-</span><span class="token operator">&gt;</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> point <span class="token operator">:</span> <span class="token operator">*</span>cloud<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		point<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		point<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		point<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX <span class="token operator">+</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">int</span> args <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		pcl<span class="token operator">::</span>RadiusOutlierRemoval<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span> outrem<span class="token punctuation">;</span>
		outrem<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>
		outrem<span class="token punctuation">.</span><span class="token function">setRadiusSearch</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置在0.8半径的范围内找邻近点</span>
		outrem<span class="token punctuation">.</span><span class="token function">setMinNeighborsInRadius</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置查询点的邻近点集数小于2的删除</span>
		outrem<span class="token punctuation">.</span><span class="token function">setKeepOrganized</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置保持点云的结构</span>
		outrem<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		pcl<span class="token operator">::</span>ConditionAnd<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">range_cond</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>ConditionAnd<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//为条件定义对象添加比较算子</span>
		<span class="token comment">/*EQ 就是 EQUAL等于
		GT 就是 GREATER THAN大于
		LT 就是 LESS THAN小于
		GE 就是 GREATER THAN OR EQUAL 大于等于
		LE 就是 LESS THAN OR EQUAL 小于等于*/</span>
		<span class="token comment">//添加在z字段上大于0的比较算子</span>
		range_cond<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addComparison</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>FieldComparison<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span><span class="token function">ConstPtr</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>FieldComparison<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"z"</span><span class="token punctuation">,</span> pcl<span class="token operator">::</span>ComparisonOps<span class="token operator">::</span>GT<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//添加在z字段上小于0.8的比较算子</span>
		range_cond<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addComparison</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>FieldComparison<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span><span class="token function">ConstPtr</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>FieldComparison<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"z"</span><span class="token punctuation">,</span> pcl<span class="token operator">::</span>ComparisonOps<span class="token operator">::</span>LT<span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		pcl<span class="token operator">::</span>ConditionalRemoval<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span> condrem<span class="token punctuation">;</span>
		condrem<span class="token punctuation">.</span><span class="token function">setCondition</span><span class="token punctuation">(</span>range_cond<span class="token punctuation">)</span><span class="token punctuation">;</span>
		condrem<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>
		condrem<span class="token punctuation">.</span><span class="token function">setKeepOrganized</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		condrem<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Cloud before filtering: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> point <span class="token operator">:</span> <span class="token operator">*</span>cloud<span class="token punctuation">)</span>
		std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"    "</span> <span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>z <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token comment">// display pointcloud after filtering</span>
	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Cloud after filtering: "</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> point <span class="token operator">:</span> <span class="token operator">*</span>cloud_filtered<span class="token punctuation">)</span>
		std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"    "</span> <span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span>
		<span class="token operator">&lt;&lt;</span> point<span class="token punctuation">.</span>z <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

	std<span class="token operator">::</span>cerr <span class="token operator">&lt;&lt;</span> cloud_filtered<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="7CropHull_330"></a>7.CropHull任意多边形内部点云提取</h2> 
<p>通过输入空间点以构成一个平面多边形，对其中的点云进行提取（沿着该平面的法线方向，且第三个维度没有限制）</p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/visualization/cloud_viewer.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/io/io.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/io/pcd_io.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/point_cloud.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/point_types.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/io/pcd_io.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/filters/crop_hull.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pcl/surface/concave_hull.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">cloud</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PCDReader reader<span class="token punctuation">;</span>
	reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"./pig.pcd"</span><span class="token punctuation">,</span> <span class="token operator">*</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>

	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">boundingbox_ptr</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//用来存放边界</span>
	boundingbox_ptr<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span><span class="token function">PointXYZ</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	boundingbox_ptr<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span><span class="token function">PointXYZ</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	boundingbox_ptr<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span><span class="token function">PointXYZ</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	boundingbox_ptr<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span><span class="token function">PointXYZ</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	boundingbox_ptr<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span><span class="token function">PointXYZ</span><span class="token punctuation">(</span><span class="token number">0.15</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//构造2D凸包形状</span>
	pcl<span class="token operator">::</span>ConvexHull<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span> hull<span class="token punctuation">;</span>
	hull<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>boundingbox_ptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hull<span class="token punctuation">.</span><span class="token function">setDimension</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>Vertices<span class="token operator">&gt;</span> polygons<span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">surface_hull</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	hull<span class="token punctuation">.</span><span class="token function">reconstruct</span><span class="token punctuation">(</span><span class="token operator">*</span>surface_hull<span class="token punctuation">,</span> polygons<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//滤波</span>
	pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token operator">::</span>Ptr <span class="token function">objects</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcl<span class="token operator">::</span>CropHull<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span> bb_filter<span class="token punctuation">;</span>
	bb_filter<span class="token punctuation">.</span><span class="token function">setDim</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	bb_filter<span class="token punctuation">.</span><span class="token function">setInputCloud</span><span class="token punctuation">(</span>cloud<span class="token punctuation">)</span><span class="token punctuation">;</span>
	bb_filter<span class="token punctuation">.</span><span class="token function">setHullIndices</span><span class="token punctuation">(</span>polygons<span class="token punctuation">)</span><span class="token punctuation">;</span>
	bb_filter<span class="token punctuation">.</span><span class="token function">setHullCloud</span><span class="token punctuation">(</span>surface_hull<span class="token punctuation">)</span><span class="token punctuation">;</span>
	bb_filter<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token operator">*</span>objects<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> objects<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

	<span class="token comment">//visualize</span>
	boost<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>visualization<span class="token operator">::</span>PCLVisualizer<span class="token operator">&gt;</span> <span class="token function">for_visualizer_v</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token operator">::</span>visualization<span class="token operator">::</span><span class="token function">PCLVisualizer</span><span class="token punctuation">(</span><span class="token string">"crophull display"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> <span class="token function">v1</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">createViewPort</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.33</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> v1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> v1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addPointCloud</span><span class="token punctuation">(</span>cloud<span class="token punctuation">,</span> <span class="token string">"cloud"</span><span class="token punctuation">,</span> v1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setPointCloudRenderingProperties</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>visualization<span class="token operator">::</span>PCL_VISUALIZER_COLOR<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"cloud"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setPointCloudRenderingProperties</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>visualization<span class="token operator">::</span>PCL_VISUALIZER_POINT_SIZE<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"cloud"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span>addPolygon<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">(</span>surface_hull<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">.069</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0.2</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token string">"backview_hull_polyline1"</span><span class="token punctuation">,</span> v1<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> <span class="token function">v2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">createViewPort</span><span class="token punctuation">(</span><span class="token number">0.33</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.66</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addPointCloud</span><span class="token punctuation">(</span>surface_hull<span class="token punctuation">,</span> <span class="token string">"surface_hull"</span><span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setPointCloudRenderingProperties</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>visualization<span class="token operator">::</span>PCL_VISUALIZER_COLOR<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"surface_hull"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setPointCloudRenderingProperties</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>visualization<span class="token operator">::</span>PCL_VISUALIZER_POINT_SIZE<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">"surface_hull"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span>addPolygon<span class="token operator">&lt;</span>pcl<span class="token operator">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">(</span>surface_hull<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">.069</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0.2</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token string">"backview_hull_polyline"</span><span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">v3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">createViewPort</span><span class="token punctuation">(</span><span class="token number">0.66</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> v3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> v3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addPointCloud</span><span class="token punctuation">(</span>objects<span class="token punctuation">,</span> <span class="token string">"objects"</span><span class="token punctuation">,</span> v3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setPointCloudRenderingProperties</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>visualization<span class="token operator">::</span>PCL_VISUALIZER_COLOR<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"objects"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setPointCloudRenderingProperties</span><span class="token punctuation">(</span>pcl<span class="token operator">::</span>visualization<span class="token operator">::</span>PCL_VISUALIZER_POINT_SIZE<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"objects"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">wasStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		for_visualizer_v<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">spinOnce</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="_411"></a>参考</h2> 
<p>1.https://pcl.readthedocs.io/projects/tutorials/en/latest/#filtering<br> 2.</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9eefdb55565fc5d9bf00d22ab9fc9a49/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CSS3中  的  calc() 函数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f2c733d918b4b2455453fc34e07c9b9e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用Feign，模块之间调用传递参数HttpServletRequest request拿不到值问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>