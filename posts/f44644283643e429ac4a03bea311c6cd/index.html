<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JAVA调用windows下dll文件程序代码 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JAVA调用windows下dll文件程序代码" />
<meta property="og:description" content="JAVA调用windows下dll文件程序代码 java是一个很强大的程序了，它可以做很多操作，下面我来介绍在java中调用windows系统的dll文件的程序代码，各位朋友可参考参考。 JNA(Java Native Access)：建立在JNI之上的Java开源框架，SUN主导开发，用来调用C、C&#43;&#43;代码，尤其是底层库文件（windows中叫dll文件，linux下是so【shared object】文件）。
JNI是Java调用原生函数的唯一机制，JNA就是建立在JNI之上，JNA简化了Java调用原生函数的过程。JNA提供了一个动态的C语言编写的转发器（实际上也是一个动态链接库，在Linux-i386中文件名是：libjnidispatch.so）可以自动实现Java与C之间的数据类型映射。从性能上会比JNI技术调用动态链接库要低。
1.简单写个windows下的dll,文件命名为forjava.dll,其中一个add函数,采用stdcall调用约定
java是一个很强大的程序了，它可以做很多操作，下面我来介绍在java中调用windows系统的dll文件的程序代码，各位朋友可参考参考。 JNA(Java Native Access)：建立在JNI之上的Java开源框架，SUN主导开发，用来调用C、C&#43;&#43;代码，尤其是底层库文件（windows中叫dll文件，linux下是so【shared object】文件）。
JNI是Java调用原生函数的唯一机制，JNA就是建立在JNI之上，JNA简化了Java调用原生函数的过程。JNA提供了一个动态的C语言编写的转发器（实际上也是一个动态链接库，在Linux-i386中文件名是：libjnidispatch.so）可以自动实现Java与C之间的数据类型映射。从性能上会比JNI技术调用动态链接库要低。
1.简单写个windows下的dll,文件命名为forjava.dll,其中一个add函数,采用stdcall调用约定
main.h文件
#ifndef __MAIN_H__ #define __MAIN_H__ #include &lt;windows.h&gt; /* To use this exported function of dll, include this header * in your project. */
#ifdef BUILD_DLL #define DLL_EXPORT __declspec(dllexport) __stdcall #else #define DLL_EXPORT __declspec(dllimport) __stdcall #endif #ifdef __cplusplus extern &#34;C&#34;
{ #endif int DLL_EXPORT add(int a,int b); #ifdef __cplusplus } #endif #endif // __MAIN_H__
main.cpp" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f44644283643e429ac4a03bea311c6cd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-12-22T11:00:18+08:00" />
<meta property="article:modified_time" content="2015-12-22T11:00:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JAVA调用windows下dll文件程序代码</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="iteye-blog-content-contain" style="font-size:14px;"> 
 <h2>JAVA调用windows下dll文件程序代码</h2> 
 <p> </p> 
 <div class="keywords">
   java是一个很强大的程序了，它可以做很多操作，下面我来介绍在java中调用windows系统的dll文件的程序代码，各位朋友可参考参考。 
 </div> 
 <div class="cbody_ad">
     
 </div> 
 <p>JNA(Java Native<span class="Apple-converted-space"> </span><a style="color:#2d64b3;font-size:15px;text-decoration:underline;" href="http://www.111cn.net/list-108/" rel="nofollow">Access</a>)：建立在JNI之上的Java开源框架，SUN主导开发，用来调用C、C++代码，尤其是底层库文件（windows中叫dll文件，<a style="color:#2d64b3;font-size:15px;text-decoration:underline;" href="http://www.111cn.net/list-156/" rel="nofollow">linux</a>下是so【shared object】文件）。</p> 
 <p>JNI是Java调用原生函数的唯一机制，JNA就是建立在JNI之上，JNA简化了Java调用原生函数的过程。JNA提供了一个动态的<a style="color:#2d64b3;font-size:15px;text-decoration:underline;" href="http://www.111cn.net/list-34/" rel="nofollow">C语言</a>编写的转发器（实际上也是一个动态链接库，在Linux-i386中文件名是：libjnidispatch.so）可以自动实现Java与C之间的数据类型映射。从性能上会比JNI技术调用动态链接库要低。</p> 
 <p>1.简单写个windows下的dll,文件命名为forjava.dll,其中一个add函数,采用stdcall调用约定</p> 
 <div class="keywords">
   java是一个很强大的程序了，它可以做很多操作，下面我来介绍在java中调用windows系统的dll文件的程序代码，各位朋友可参考参考。 
 </div> 
 <div class="cbody_ad">
     
 </div> 
 <p>JNA(Java Native<span class="Apple-converted-space"> </span><a style="color:#2d64b3;font-size:15px;text-decoration:underline;" href="http://www.111cn.net/list-108/" rel="nofollow">Access</a>)：建立在JNI之上的Java开源框架，SUN主导开发，用来调用C、C++代码，尤其是底层库文件（windows中叫dll文件，<a style="color:#2d64b3;font-size:15px;text-decoration:underline;" href="http://www.111cn.net/list-156/" rel="nofollow">linux</a>下是so【shared object】文件）。</p> 
 <p>JNI是Java调用原生函数的唯一机制，JNA就是建立在JNI之上，JNA简化了Java调用原生函数的过程。JNA提供了一个动态的<a style="color:#2d64b3;font-size:15px;text-decoration:underline;" href="http://www.111cn.net/list-34/" rel="nofollow">C语言</a>编写的转发器（实际上也是一个动态链接库，在Linux-i386中文件名是：libjnidispatch.so）可以自动实现Java与C之间的数据类型映射。从性能上会比JNI技术调用动态链接库要低。</p> 
 <p>1.简单写个windows下的dll,文件命名为forjava.dll,其中一个add函数,采用stdcall调用约定</p> 
 <p> </p> 
 <p>main.h文件<br>#ifndef __MAIN_H__ <br>#define __MAIN_H__ <br>  <br>#include &lt;windows.h&gt; <br>  <br>/*  To use this exported function of dll, include this header <br> *  in your project. <br> */<br>  <br>#ifdef BUILD_DLL <br>    #define DLL_EXPORT __declspec(dllexport) __stdcall <br>#else <br>    #define DLL_EXPORT __declspec(dllimport) __stdcall <br>#endif <br>  <br>#ifdef __cplusplus <br>extern "C"<br>{ <br>#endif <br>  <br>int DLL_EXPORT add(int a,int b); <br>  <br>#ifdef __cplusplus <br>} <br>#endif <br>  <br>#endif // __MAIN_H__</p> 
 <p>main.cpp</p> 
 <p>#include "main.h" <br>  <br>// a sample exported function <br>int DLL_EXPORT add(int a ,int b) <br>{ <br>    return a+b; <br>} <br>  <br>extern "C" DLL_EXPORT BOOL APIENTRY DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved) <br>{ <br>    switch (fdwReason) <br>    { <br>        case DLL_PROCESS_ATTACH: <br>            // attach to process <br>            // return FALSE to fail DLL load <br>            break; <br>  <br>        case DLL_PROCESS_DETACH: <br>            // detach from process <br>            break; <br>  <br>        case DLL_THREAD_ATTACH: <br>            // attach to thread <br>            break; <br>  <br>        case DLL_THREAD_DETACH: <br>            // detach from thread <br>            break; <br>    } <br>    return TRUE; // succesful <br>}</p> 
 <p> </p> 
 <p> </p> 
 <p>2.将jna.jar导入ecli<a href="http://www.111cn.net/fw/photo.html" rel="nofollow">ps</a>e工程中,java代码如下</p> 
 <p> </p> 
 <p>//import com.sun.jna.Library; cdecl call调用约定<span class="Apple-converted-space"> </span><br>import com.sun.jna.Native;<span class="Apple-converted-space"> </span><br>import com.sun.jna.Platform;<span class="Apple-converted-space"> </span><br>import com.sun.jna.win32.StdCallLibrary;<span class="Apple-converted-space"> </span><br> <span class="Apple-converted-space"> </span><br>public class main {<!-- --><span class="Apple-converted-space"> </span><br> <span class="Apple-converted-space"> </span><br>    public interface CLibrary extends StdCallLibrary { //cdecl call调用约定时为Library<span class="Apple-converted-space"> </span><br>        CLibrary INSTANCE = (CLibrary)Native.loadLibrary("forjava",CLibrary.class);<span class="Apple-converted-space"> </span><br>        public int add(int a,int b);<span class="Apple-converted-space"> </span><br>    }<span class="Apple-converted-space"> </span><br> <span class="Apple-converted-space"> </span><br>    public static void main(String[] args) {<!-- --><span class="Apple-converted-space"> </span><br>        System.out.print(CLibrary.INSTANCE.add(2,3));<span class="Apple-converted-space"> </span><br>    }<span class="Apple-converted-space"> </span><br>}</p> 
 <p> </p> 
 <p> </p> 
 <p> </p> 
 <p> </p> 
 <p> </p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2f12ac57c287584407cf17f8c7dffc37/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spark Shuffle模块——Suffle Read过程分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4cd7269cadc745fda61486afb4b14883/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">bitnami 版 gitlab 修改端口</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>