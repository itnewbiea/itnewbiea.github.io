<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>manjaro踩坑记 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="manjaro踩坑记" />
<meta property="og:description" content="manjaro踩坑记 Y_Wolf（2020.04.13）
一、项目环境 系统版本：majaro kde 19.0.2电脑型号：机械革命 S1 二、正文 0、关于制作系统盘 这里我是在windows10上使用rufus 制作的系统盘，在网上的教程基本都会让你使用dd模式写入。但是这个模式在新的版本中是没有的，因此如果你在制作后没有办法正常的安装系统，个人建议**安装旧版本的rufus使用dd模式写入**。
1、应用更新 在安装好系统之后，除了要给包管理器pacman换源之外（换源的时候，要看一下系统的时间，如果时间穿越了的话，换的源是无法使用的），还需要更新系统的相关程序。如果你是第一次使用Linux的话，个人建议能使用命令行进行更新就不要使用图形化工具。
[注]：不知道为什么在软件管理器中更新应用总是会爆出“提交事务失败: 无效或已损坏的软件包:”
// manjaro 更新应用 sudo pacman -Syu [注]：而使用命令行进行运行则不会
majaro 其他常用更新命令
sudo pacman -Sc //清空并且下载新数据 sudo pacman-mirrors -gb testing -c China //更新源 sudo pacman-mirrors -c China -g //更新源 sudo pacman -Syu //更新 sudo pacman -Syy //更新源数据库 sudo pacman -Syyu //安装更新 [注]：建议在更新之前先去官网看一下，有个别程序需要单独特殊更新（不然可能会崩）
2、无法正常关机（冻屏） [注]：这个坑非常的奇怪，有时候有有时候没有。也不知道是哪里操作错误。
首先编辑/etc/default/grub文件，再该文件下查找GRUB_CMDLINE_LINUX=&#34;&#34;一行，修改为：
GRUB_CMDLINE_LINUX=&#34;reboot=efi&#34; //第一个就完美解决 然后执行如下命令：
sudo update-grub 来更新 /boot/grub/grub.cfg 文件。
[注]：更新完了之后，默认grub菜单的选择时间为10秒，可以按照自己的需求修改。
如果上边修改的/etc/default/grub文件，没有作用，可以继续尝试替换为下边的几种内容。
GRUB_CMDLINE_LINUX=&#34;reboot=bios&#34; //我的本子经过测试只有这个能用 GRUB_CMDLINE_LINUX=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a41a523fedce4ae2d2b3845fe83b5551/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-31T15:00:34+08:00" />
<meta property="article:modified_time" content="2023-05-31T15:00:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">manjaro踩坑记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="manjaro_1"></a>manjaro踩坑记</h2> 
<blockquote> 
 <p>Y_Wolf（2020.04.13）</p> 
</blockquote> 
<h3><a id="_3"></a>一、项目环境</h3> 
<ul><li>系统版本：majaro kde 19.0.2</li><li>电脑型号：机械革命 S1</li></ul> 
<h3><a id="_7"></a>二、正文</h3> 
<h4><a id="0_8"></a>0、关于制作系统盘</h4> 
<p>这里我是在windows10上使用<a href="https://link.zhihu.com/?target=https%3A//rufus.ie/" rel="nofollow">rufus</a> 制作的系统盘，在网上的教程基本都会让你使用dd模式写入。但是这个模式在新的版本中是没有的，因此如果你在制作后没有办法正常的安装系统，个人建议**<font color="red">安装旧版本的rufus使用dd模式写入</font>**。</p> 
<h4><a id="1_12"></a>1、应用更新</h4> 
<p>在安装好系统之后，除了要给包管理器<code>pacman</code>换源之外（换源的时候，要看一下系统的时间，如果时间穿越了的话，换的源是无法使用的），还需要更新系统的相关程序。如果你是第一次使用Linux的话，<strong><font color="red">个人建议能使用命令行进行更新就不要使用图形化工具</font></strong>。</p> 
<p><img src="https://images2.imgbox.com/b3/37/W765b6Yj_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>[注]：不知道为什么在软件管理器中更新应用总是会爆出“提交事务失败: 无效或已损坏的软件包:”</p> 
</blockquote> 
<pre><code class="prism language-bash">// manjaro 更新应用
<span class="token function">sudo</span> pacman -Syu
</code></pre> 
<blockquote> 
 <p>[注]：而使用命令行进行运行则不会</p> 
</blockquote> 
<p><strong>majaro 其他常用更新命令</strong></p> 
<pre><code class="prism language-bash">                                                                            
<span class="token function">sudo</span> pacman -Sc                                                    //清空并且下载新数据
<span class="token function">sudo</span> pacman-mirrors -gb testing -c China                           //更新源
<span class="token function">sudo</span> pacman-mirrors -c China -g                                    //更新源
<span class="token function">sudo</span> pacman -Syu                                                   //更新
<span class="token function">sudo</span> pacman -Syy                                                   //更新源数据库
<span class="token function">sudo</span> pacman -Syyu                                                  //安装更新
</code></pre> 
<blockquote> 
 <p>[注]：<font color="red">建议在更新之前先去官网看一下，有个别程序需要单独特殊更新（不然可能会崩）</font></p> 
</blockquote> 
<h4><a id="2_41"></a>2、无法正常关机（冻屏）</h4> 
<blockquote> 
 <p>[注]：这个坑非常的奇怪，有时候有有时候没有。也不知道是哪里操作错误。</p> 
</blockquote> 
<p>首先编辑<code>/etc/default/grub</code>文件，再该文件下查找<code>GRUB_CMDLINE_LINUX=""</code>一行，修改为：</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">"reboot=efi"</span> //第一个就完美解决
</code></pre> 
<p>然后执行如下命令：</p> 
<pre><code class="prism language-bash"> <span class="token function">sudo</span> <span class="token function">update-grub</span>
</code></pre> 
<p>来更新 /boot/grub/grub.cfg 文件。</p> 
<blockquote> 
 <p>[注]：更新完了之后，默认grub菜单的选择时间为10秒，可以按照自己的需求修改。<br> 如果上边修改的/etc/default/grub文件，没有作用，可以继续尝试替换为下边的几种内容。</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">"reboot=bios"</span>    //我的本子经过测试只有这个能用

<span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">"reboot=acpi"</span>

<span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">"reboot=pci"</span>
</code></pre> 
<blockquote> 
 <p>[注]：原作者文章：https://www.jianshu.com/p/6df4f8d30d29</p> 
</blockquote> 
<h4><a id="3TIM_72"></a>3、安装TIM和微信</h4> 
<pre><code class="prism language-bash">yay -Sy deepin-wine-tim deepin-wine-wechat
</code></pre> 
<blockquote> 
 <p>[注]：如过你不想闪退到怀疑人生的话，<font color="red">建议用默认路径安装</font></p> 
 <p>当然有的时候，这两个包不一定用的了，这个时候可以在archlinux的AUR看看还有没有其他的包可以下载</p> 
</blockquote> 
<h4><a id="4__82"></a>4、 使用独立显卡运行应用（玩游戏）</h4> 
<p>虽然一般情况下，在网上能查到的绝大多数文章都不推荐你使用Linux玩游戏。这里这里主要的原因是Linux在配置显卡驱动这件事上确实非常的麻烦，一不小心就容易把电脑弄崩溃。</p> 
<p>但这并不意味着他没有办法玩游戏，至少在manjaro上用独立显卡玩游戏并不是特别困难的事。</p> 
<p>首先，当你在安装manjaro的时候，系统会让你选择安装显卡的类型，这里<font color="red">切记一定要选择non-free</font>，这样系统才会帮你安装上合适的显卡驱动。</p> 
<p><img src="https://images2.imgbox.com/de/5e/yNIdEtxL_o.jpg" alt="在这里插入图片描述"></p> 
<p>如过你是单显卡的话，那么到这一步，你应该就可以直接下载<a href="https://lutris.net/" rel="nofollow">Lutris</a>或者<a href="https://store.steampowered.com/linux" rel="nofollow">Steam</a>进行游戏了。</p> 
<p>当然如果你和我一样是双显卡，那么这时你还需要一个切换显卡的程序。</p> 
<p>先说解决方法，事实上这一步你依旧什么都不需要操作，因为当显卡设置为non-free的时候，manjaro将显卡的切换工具也帮你配置好了，<font color="red">只需要运行<code>prime-run 程序名 </code>就可以使用独立显卡运行这个程序</font>。效果如下</p> 
<p><img src="https://images2.imgbox.com/45/45/BgFChKC4_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/8e/c3/KPu4Gnkf_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>[注]：网上的教程推荐了很多种方法，切换显卡。比如<a href="https://wiki.archlinux.org/index.php/Nvidia-xrun" rel="nofollow">nvidia-xrun</a>、<a href="https://www.archlinux.org/packages/?name=bumblebee" rel="nofollow">optimus-manager</a>和<a href="https://www.archlinux.org/packages/?name=bumblebee" rel="nofollow">bumblebee</a>。但目前测试除了官方自带的方法之外，只有optimus-manager实验成功。<font color="red">但个人建议能用官方配好的还是用官方配好的</font>。</p> 
</blockquote> 
<h4><a id="5ssr_102"></a>5、命令行使用ssr代理</h4> 
<p><strong>安装</strong></p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> pacman -S privoxy
</code></pre> 
<p><strong>配置</strong></p> 
<p>修改/etc/privoxy/config</p> 
<p>添加：<code>forward-socks5 / 127.0.0.1:1080 .</code> ss的代理</p> 
<pre><code># 修改为监听本地端口
listen-address localhost:8118
</code></pre> 
<p><strong>重启</strong></p> 
<pre><code>systemctl restart privoxy
</code></pre> 
<p><strong>PS 终端中使用代理</strong></p> 
<pre><code>export http_proxy=http://127.0.0.1:8118
export https_proxy=http://127.0.0.1:8118
</code></pre> 
<h4><a id="6homeDesktop_134"></a>6、home目录下，Desktop等目录消失不见</h4> 
<p><strong>第一步：创建相应的文件夹</strong></p> 
<p>首先当然是创建几个相应的英文文件夹喽，比如：Desktop、Downloads、 Documents、 Music、 Pictures、 Videos , Templates , Public……</p> 
<p><strong>第二步：编辑配置文件</strong></p> 
<pre><code class="prism language-bash">gedit ~/.config/user-dirs.dirs
</code></pre> 
<p>修改内容：</p> 
<pre><code class="prism language-shell"><span class="token assign-left variable">XDG_DESKTOP_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Desktop"</span>

<span class="token assign-left variable">XDG_DOWNLOAD_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Desktop"</span>

<span class="token assign-left variable">XDG_TEMPLATES_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Templates"</span>

<span class="token assign-left variable">XDG_PUBLICSHARE_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Public"</span>

<span class="token assign-left variable">XDG_DOCUMENTS_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Documents"</span>

<span class="token assign-left variable">XDG_MUSIC_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Music"</span>

<span class="token assign-left variable">XDG_PICTURES_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Pictures"</span>

<span class="token assign-left variable">XDG_VIDEOS_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/Videos"</span>
</code></pre> 
<p><strong>第三步：重启系统</strong></p> 
<h4><a id="7pip_168"></a>7、pip换源</h4> 
<p>如果在当前用户下创建了.pip文件夹并且把源地址写入后，只有当前用户生效 但未对root用户生效时，只需要把当前用户的.pip文件夹复制到/root/文件夹 下，这样root用户的pip也能使用更换后的源地址。</p> 
<blockquote> 
 <p>[注]：才能使用<code>sudo pip ...</code></p> 
</blockquote> 
<h4><a id="8python_174"></a>8、多python版本切换</h4> 
<p>第一步：在官网上下载需要的python版本源码 https://www.python.org/downloads/source/</p> 
<p>第二步：将源码移动到安装路径出，本文中是 /usr/local/ 然后解压到此处</p> 
<p>第三步：cd 到解压的文件处，编译安装</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> Python3.6
./configure --prefix<span class="token operator">=</span>/usr/local/python3make <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<p>第四步：建立链接</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">ln</span> -s /usr/local/python3.6/bin/python3.6 /usr/bin/python3
</code></pre> 
<p>第五步：建立pip链接</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">ln</span> -s /usr/local/python3.6/bin/pip3.6 /usr/bin/pip3.6
</code></pre> 
<p>第六步：这样就可以使用不同为不同版本的python下载响应的库了</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> pip3.6 <span class="token function">install</span> opencv-python
</code></pre> 
<h4><a id="9_205"></a>9、过程中看的一下文章比较好的文章和网站</h4> 
<p>官网：https://www.archlinux.org/</p> 
<p>优秀文章：https://zhuanlan.zhihu.com/p/114296129</p> 
<p>https://zhuanlan.zhihu.com/p/76608451</p> 
<p>https://yqsas.com/2019/03/03/manjaro-in-t480s/</p> 
<p>显卡：http://www.baidu.com/link?url=GSnS80BYRWJdb1dCYSKTtKJ99JvAr1WnYrODdzZkeQS</p> 
<p>https://wiki.archlinux.org/index.php/NVIDIA_Optimus#Using_optimus-manager</p> 
<p>https://www.xiao-hui.net/?p=611</p> 
<p>https://blog.csdn.net/sherpahu/article/details/103193009</p> 
<hr> 
<p>很长一段时间没有在csdn中写文章了，事实上后面自己学习过程中的大部分文档都是在语雀中完成的，基本都是自己写自己看。后续文章都会分享到自己的个人博客上，感兴趣的话可以关注一下。<a href="https://chenshaolang.gitee.io/personal-blog/" rel="nofollow">个人博客地址</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d99e3c6f6a47d4f5d89cd91e460de77b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">NetData 入门</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fdf1bcd13629f11d0c7fc52f76880eb6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">R语言中连接数据库——Mongodb</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>