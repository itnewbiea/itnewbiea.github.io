<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>实战讲解Spring定时任务：@Scheduled（图&#43;文&#43;源码） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="实战讲解Spring定时任务：@Scheduled（图&#43;文&#43;源码）" />
<meta property="og:description" content="1 缘起 最近看到有些定时任务的项目，
使用了Spring自带的定时任务系统，通过添加@Scheduled注解的方式实现，
并且，使用了不只cron表达式的方式实现定时执行，
恍然大悟，原来@Scheduled还有其他的方式实现定时任务，
于是，看了下@Scheduled的源码，发现有三类参数供开发者使用，cron、fixedDelay和fixedRate，同时，复习了一下cron表达式，
分享如下，帮助读者进一步了解@Scheduled的使用，轻松应对知识交流与知识考核。
版本：Spring-Context：5.2.7.RELEASE
2 注解：@Scheduled 2.1 是什么 先看下注解的注释，如下图所示。
位置：org.springframework.scheduling.annotation.Scheduled
由注释可知，
（1）注解@Scheduled标注在方法上实现定时功能；
（2）使用注解时必须指定任意一个参数（属性）：cron、fixedDelay或fixedRate；
（3）注解标识的方法必须时无参方法且无返回值。如果有返回值，返回值会被忽略；
（4）有两种方式生效该注解：XML中配置：task:annotaion-driven，或者使用注解：@EnableScheduling；
（5）定时任务的相关逻辑在：ScheduledAnnotationBeanPostProcessor（org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor）。
2.2 功能 （1）定时执行任务：指定执行的星期、月、天、时、分、秒，定时执行任务，cron参数；
（2）固定周期执行任务：间隔x毫秒周期性指定任务，fixRate参数；
（3）固定间隔延迟执行任务：延迟x毫秒执行指定任务，fixDelay参数。
2.3 参数分析 2.3.1 CRON_DISABLED 常量参数CRON_DISABLED，用于配置未生效定时任务，
值为：-，如果已经配置了定时任务，但是，不想启用定时任务，则配置cron为-。
在ScheduledAnnotationBeanPostProcessor中使用该参数，用于判断cron表达式是否生效。
具体的方法为processScheduled，处理逻辑如下图所示，
由图可知，检查cron表达式，如果cron表达式为-，则该定时任务，不会被添加到任务池。
位置：org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor#processScheduled
2.3.2 cron CRON类型的表达式，配置定时任务，共有6个时间粒度，
参数样式：a b c d e f
从左到右分别表示：
秒、分、小时、天、月、星期。
序号参数取值范围特殊字符1秒[0, 59]* , - /2分钟[0, 59]* , - /3小时[0, 23]* , - /4日期[1, 31]* , - / ? L W5月[1, 12]或[JAN, DEC]* , - /6星期[1,7]或[MON, SUN]* , - / ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/89c86a0b70ea648c0c65c39752a10797/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-11T10:19:41+08:00" />
<meta property="article:modified_time" content="2022-12-11T10:19:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">实战讲解Spring定时任务：@Scheduled（图&#43;文&#43;源码）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1__0"></a>1 缘起</h2> 
<p>最近看到有些定时任务的项目，<br> 使用了Spring自带的定时任务系统，通过添加@Scheduled注解的方式实现，<br> 并且，使用了不只cron表达式的方式实现定时执行，<br> 恍然大悟，原来@Scheduled还有其他的方式实现定时任务，<br> 于是，看了下@Scheduled的源码，发现有三类参数供开发者使用，cron、fixedDelay和fixedRate，同时，复习了一下cron表达式，<br> 分享如下，帮助读者进一步了解@Scheduled的使用，轻松应对知识交流与知识考核。<br> 版本：Spring-Context：5.2.7.RELEASE</p> 
<h2><a id="2_Scheduled_8"></a>2 注解：@Scheduled</h2> 
<h3><a id="21__9"></a>2.1 是什么</h3> 
<p>先看下注解的注释，如下图所示。<br> 位置：org.springframework.scheduling.annotation.Scheduled<br> 由注释可知，<br> （1）注解@Scheduled标注在方法上实现定时功能；<br> （2）使用注解时必须指定任意一个参数（属性）：cron、fixedDelay或fixedRate；<br> （3）注解标识的方法必须时无参方法且无返回值。如果有返回值，返回值会被忽略；<br> （4）有两种方式生效该注解：XML中配置：task:annotaion-driven，或者使用注解：@EnableScheduling；<br> （5）定时任务的相关逻辑在：ScheduledAnnotationBeanPostProcessor（org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor）。<br> <img src="https://images2.imgbox.com/d8/c7/Et1KHwbw_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22__19"></a>2.2 功能</h3> 
<p>（1）定时执行任务：指定执行的星期、月、天、时、分、秒，定时执行任务，cron参数；<br> （2）固定周期执行任务：间隔x毫秒周期性指定任务，fixRate参数；<br> （3）固定间隔延迟执行任务：延迟x毫秒执行指定任务，fixDelay参数。</p> 
<h3><a id="23__23"></a>2.3 参数分析</h3> 
<h4><a id="231_CRON_DISABLED_24"></a>2.3.1 CRON_DISABLED</h4> 
<p>常量参数CRON_DISABLED，用于配置未生效定时任务，<br> 值为：<code>-</code>，如果已经配置了定时任务，但是，不想启用定时任务，则配置cron为<code>-</code>。<br> <img src="https://images2.imgbox.com/d3/86/BsCbrgr2_o.png" alt="在这里插入图片描述"><br> 在ScheduledAnnotationBeanPostProcessor中使用该参数，用于判断cron表达式是否生效。<br> 具体的方法为processScheduled，处理逻辑如下图所示，<br> 由图可知，检查cron表达式，如果cron表达式为<code>-</code>，则该定时任务，不会被添加到任务池。<br> 位置：org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor#processScheduled</p> 
<p><img src="https://images2.imgbox.com/8b/d1/0OcB1IYQ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="232_cron_34"></a>2.3.2 cron</h4> 
<p>CRON类型的表达式，配置定时任务，共有6个时间粒度，<br> 参数样式：<code>a b c d e f</code><br> 从左到右分别表示：<br> 秒、分、小时、天、月、星期。</p> 
<table><thead><tr><th>序号</th><th>参数</th><th>取值范围</th><th>特殊字符</th></tr></thead><tbody><tr><td>1</td><td>秒</td><td>[0, 59]</td><td>* , - /</td></tr><tr><td>2</td><td>分钟</td><td>[0, 59]</td><td>* , - /</td></tr><tr><td>3</td><td>小时</td><td>[0, 23]</td><td>* , - /</td></tr><tr><td>4</td><td>日期</td><td>[1, 31]</td><td>* , - / ? L W</td></tr><tr><td>5</td><td>月</td><td>[1, 12]或[JAN, DEC]</td><td>* , - /</td></tr><tr><td>6</td><td>星期</td><td>[1,7]或[MON, SUN]</td><td>* , - / ? L #</td></tr></tbody></table> 
<p>特殊字符</p> 
<table><thead><tr><th>序号</th><th>特殊字符</th><th>描述</th><th align="left">样例</th></tr></thead><tbody><tr><td>1</td><td>*</td><td>所有可能的值</td><td align="left">如在分钟的位置配置*，表示每一分钟都生效</td></tr><tr><td>2</td><td>,</td><td>枚举值</td><td align="left">表示对应的数据，如分钟位置配置<code>10,20,30</code>，表示在某点的10分、20分和30分执行</td></tr><tr><td>3</td><td>-</td><td>范围</td><td align="left">间隔值1，左右的数据表示上界和下界，如分钟位置配置：10-20，表示某点10分和20分之间，每1分钟执行</td></tr><tr><td>4</td><td>/</td><td>增量</td><td align="left">左侧数据表示起始值，右侧数据表示增量，分钟位置配置：3/10，表示从第一个间隔3分钟后，每10分钟执行，秒位置：2/10，表示从第一个2秒后开始，每10秒执行</td></tr><tr><td>5</td><td>?</td><td>不指定</td><td align="left">在日期或星期中使用，为避免冲突，将另一个位置配置？</td></tr><tr><td>6</td><td>L</td><td>Last，最后一个</td><td align="left">日期位置使用L表示最后一天，星期位置使用L表示最后一个星期的最后一天</td></tr><tr><td>7</td><td>W</td><td>除周末以外的有效工作日</td><td align="left">日期位置就近原则，如果5W，5日在为星期六，则在4日执行，如果5日是星期日，则在星期一执行，如果5日在周一~周五，则在5日当天执行</td></tr><tr><td>8</td><td>#</td><td>确定每个月第几个星期几，仅支持星期</td><td align="left">星期位置，4#2表示某月的第二个星期四</td></tr></tbody></table> 
<p>如配置为：<code>0/5 * * * * ?</code>，表示每5秒执行一次。<br> 参数描述如下图所示，<br> 有一行描述为：如果配置为<code>-</code>则不会触发定时任务。<br> <img src="https://images2.imgbox.com/bd/01/SqsbDLRJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="233_fixDelay_65"></a>2.3.3 fixDelay</h4> 
<p>延迟固定时间执行：服务启动后，延迟固定的时间执行该任务，此后定期执行以此间隔作为执行周期。<br> 参数描述如下图所示，<br> 由图可知，有两种类型long和String，其中，long类型的单位为毫秒。<br> <img src="https://images2.imgbox.com/4e/6a/iarYyWGt_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="234_fixRate_70"></a>2.3.4 fixRate</h4> 
<p>固定周期执行：以固定的时间执行该任务。<br> 参数描述如下图所示，<br> 由图可知，有两种类型long和String，其中，long类型的单位为毫秒。<br> <img src="https://images2.imgbox.com/d1/52/ItD1eX9u_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="235_initialDelay_75"></a>2.3.5 initialDelay</h4> 
<p>首次执行fixRate和fixedDelay延迟的时间，时间单位：毫秒。<br> 参数源码如下图所示。<br> <img src="https://images2.imgbox.com/57/99/a48JQQnP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="24__79"></a>2.4 实际应用</h3> 
<h4><a id="241_cron_80"></a>2.4.1 cron样例</h4> 
<p>着重看下cron样例：</p> 
<table><thead><tr><th>序号</th><th>配置</th><th align="left">描述</th></tr></thead><tbody><tr><td>1</td><td>0/5 * * * * ?</td><td align="left">每5秒执行一次</td></tr><tr><td>2</td><td>0 0/2 * * * ?</td><td align="left">每两分钟执行一次</td></tr><tr><td>3</td><td>0 2 3 1 * ？</td><td align="left">每月1日3点2分执行一次</td></tr><tr><td>4</td><td>0 2 3 1 1-3 ？</td><td align="left">1月到3月的：1日3点2分执行一次</td></tr><tr><td>5</td><td>0 0 2,3,4,5 * * ?</td><td align="left">每天2点、3点、4点和5点执行一次</td></tr><tr><td>6</td><td>0 10 2 * * ?</td><td align="left">每天2:10分执行一次</td></tr><tr><td></td><td>0 0-5 14,16 * * ?</td><td align="left">每天14:00到14:55和16:00到16:55每5分钟执行一次</td></tr><tr><td></td><td>0 10 10 L * ?</td><td align="left">每月最后一天的10:10执行一次</td></tr><tr><td></td><td>0 10 10 5W * ?</td><td align="left">每月的工作日5日10:10分执行，如果5日为周六，则往前退一天（星期五），4日10:10执行，如果5日为星期日，则往后推一天（星期一），6日10:10日执行</td></tr><tr><td></td><td>0 10 10 ？* 4#2</td><td align="left">每月的第二个星期四10:10执行一次</td></tr></tbody></table> 
<h4><a id="242__95"></a>2.4.2 测试样例</h4> 
<ul><li>生效定时任务<br> 在启动类中添加@EnableScheduling。</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>monkey<span class="token punctuation">.</span>standalone</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableScheduling</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 启动类.
 *
 * @author xindaqi
 * @date 2021-04-30 18:22
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableScheduling</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StandaloneApplication</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">StandaloneApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">StandaloneApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
		logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Standalone启动成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>定时任务</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>monkey<span class="token punctuation">.</span>standalone<span class="token punctuation">.</span>common<span class="token punctuation">.</span>schedule</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Scheduled</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 定时任务样例.
 *
 * @author xindaqi
 * @since 2022-11-30 23:04
 */</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoSchedule</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">DemoSchedule</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * CRON周期性任务：如从第一个10秒后，每隔5秒执行
     * 参数顺序：
     * 秒-分-时-日-月-周
     */</span>
    <span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>cron<span class="token operator">=</span><span class="token string">"10/5 * * * * ?"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cronSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;Cron schedule:{}"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 延迟固定时间周期性执行（从服务启动后开始）
     * 服务启动时间：10:30，任务在10:33开始执行，
     * 此后以3秒为周期执行
     */</span>
    <span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>fixedDelay <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fixedDelaySchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;FixedDelay schedule:{}"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 固定周期执行
     * 固定每4秒执行一次
     */</span>
    <span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>fixedRate <span class="token operator">=</span> <span class="token number">4000</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fixedRateSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;FixedRate schedule:{}"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 首次延迟周期性执行，
     * 服务启动后，延迟2秒执行，
     * 此后，每3秒执行一次
     */</span>
    <span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>initialDelay <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span> fixedRate <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initialDelaySchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;InitialDelay and FixedRate schedule:{}"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>测试结果如下图所示，详见图中描述。</p> 
<p><img src="https://images2.imgbox.com/12/48/vHE8XJpk_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3__194"></a>3 小结</h2> 
<p>（1）注解@Scheduled标注在方法上实现定时功能；<br> （2）使用注解时必须指定任意一个参数（属性）：cron、fixedDelay或fixedRate；<br> （3）注解标识的方法必须时无参方法且无返回值。如果有返回值，返回值会被忽略；<br> （4）有两种方式生效该注解：XML中配置：task:annotaion-driven，或者使用注解：@EnableScheduling；<br> （5）定时任务的相关逻辑在：ScheduledAnnotationBeanPostProcessor。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cc8697fca336008ad74d0bf2a668e05c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">云原生事件驱动框架(KnativeEventing)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a9beca3d5bf1f295efd5c8cc6d0e9046/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">多组输入（C语言）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>