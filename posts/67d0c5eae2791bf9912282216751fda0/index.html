<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>超简单有趣的模拟算法：元胞自动机（CA）原理简介与 matlab 代码实现 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="超简单有趣的模拟算法：元胞自动机（CA）原理简介与 matlab 代码实现" />
<meta property="og:description" content="很久之前就就听说了元胞自动机（cellular automata，CA），但是一直没有尝试。得知2023年美赛春季赛只有两道赛题的时候，怕考到这个，所以出一篇元胞自动机的博客，权且当一篇学习笔记。
尝试过后才发现元胞自动机其实并没有那么难，非常好理解，算是万金油的模拟算法，可以作为保底的plan B。
文章目录 1 原理介绍1.1 概念1.2 原理 2 实例2.1 奇偶游戏2.2 生灭游戏2.3 森林火灾2.3.1 普通森林大火2.3.2 东风森林大火 3 小结 1 原理介绍 1.1 概念 元胞：模拟的时候就是一个有记忆存储状态功能的格子，是元胞自动机的最基本的组成部分。因此元胞具有以下3个特点：
元胞自动机最基本的单元。元胞有记忆贮存状态的功能。所有元胞状态都按照元胞规则不断更新。 状态：每个元胞都有自己的状态，随着时间的推移，状态也会改变。
元胞空间：元胞分布在空间中的格点，可以是1维、2维或n维。
邻居：能影响元胞下一时刻状态的周围元胞。一般来说有三种邻居模式（图是2维情况下的）：
当然还有其他的邻居模式，不赘述，主要看题目要求。
边界：整个元胞空间不是无穷大的，是需要一个边界范围的。边界也有好几种类型：固定型、周期型、绝热型、映射型……，个人感觉最后还是得看需要解决的问题，具体问题具体分析。
规则：根据元胞自身及邻居元胞的状态，决定下一时刻元胞状态的决定，可以是动力学函数或状态转移方程。
1.2 原理 这个没啥原理，这部分简单讲讲步骤：
Step1：建立假设、简化条件。
Step2：设置初始状态和边界。
Step3：推导状态转方程和条件。
Step4：根据时间迭代。
基于大量的实验，人们发现元胞自动机根据动力学行为能分为 4 类（Wolfram. S.，1986)：
平稳型：自任何初始状态开始，经过一定时间运行后，元胞空间趋于一个空间平稳的构形，这里空间平稳即指每一个元胞处于固定状态。不随时间变化而变化。周期型：经过一定时间运行后，元胞空间趋于一系列简单的固定结构（Stable Patterns）或周期结构（Perlodical Patterns)。由于这些结构可看作是一种滤波器（Filter），故可应用到图像处理的研究中。混沌型：自任何初始状态开始，经过一定时间运行后，元胞自动机表现出混沌的非周期行为，所生成的结构的统计特征不再变止，通常表现为分形分维特征。复杂型：出现复杂的局部结构，或者说是局部的混沌，其中有些会不断地传播。 我们不对每种类型的元胞做实验验证，只提供几种经典和常见的例子。
2 实例 2.1 奇偶游戏 条件：
邻居和为奇数时，中间的数字变成1；邻居和为偶数时，中间的数字变成2。 %%奇偶规则游戏 clear;clc; n = 1000;%指定边界长度 Se = zeros(n); z = zeros(n); Se(n/2-2:n/2&#43;2,n/2-2:n/2&#43;2)=1; %初始化中间的点 Ch = imagesc(Se); axis square; Sd = zeros(n&#43;2); %边界 while(true) %死循环 % 保存现有状态的右2：边界1，右边1 Sd(2:n&#43;1,2:n&#43;1) = Se; % 上下左右加一次 sumValue = Sd(1:n,2:n&#43;1)&#43;Sd(3:n&#43;2,2:n&#43;1)&#43;Sd(2:n&#43;1,1:n)&#43;Sd(2:n&#43;1,3:n&#43;2); % 摸一下 Se = mod(sumValue,2); set(Ch,&#39;cdata&#39;,Se); pause(0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/67d0c5eae2791bf9912282216751fda0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-27T11:43:15+08:00" />
<meta property="article:modified_time" content="2023-04-27T11:43:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">超简单有趣的模拟算法：元胞自动机（CA）原理简介与 matlab 代码实现</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>很久之前就就听说了元胞自动机（cellular automata，CA），但是一直没有尝试。得知2023年美赛春季赛只有两道赛题的时候，怕考到这个，所以出一篇元胞自动机的博客，权且当一篇学习笔记。</p> 
<p>尝试过后才发现元胞自动机其实并没有那么难，非常好理解，算是万金油的模拟算法，可以作为保底的plan B。</p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__6" rel="nofollow">1 原理介绍</a></li><li><ul><li><a href="#11__7" rel="nofollow">1.1 概念</a></li><li><a href="#12__31" rel="nofollow">1.2 原理</a></li></ul> 
  </li><li><a href="#2__50" rel="nofollow">2 实例</a></li><li><ul><li><a href="#21__51" rel="nofollow">2.1 奇偶游戏</a></li><li><a href="#22__86" rel="nofollow">2.2 生灭游戏</a></li><li><a href="#23__129" rel="nofollow">2.3 森林火灾</a></li><li><ul><li><a href="#231__137" rel="nofollow">2.3.1 普通森林大火</a></li><li><a href="#232__182" rel="nofollow">2.3.2 东风森林大火</a></li></ul> 
  </li></ul> 
  </li><li><a href="#3__231" rel="nofollow">3 小结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1__6"></a>1 原理介绍</h2> 
<h3><a id="11__7"></a>1.1 概念</h3> 
<p><img src="https://images2.imgbox.com/54/2e/zdUaICCd_o.jpg" alt="在这里插入图片描述"></p> 
<p><strong>元胞</strong>：模拟的时候就是一个有记忆存储状态功能的格子，是元胞自动机的最基本的组成部分。因此元胞具有以下3个特点：</p> 
<ol><li>元胞自动机最基本的单元。</li><li>元胞有记忆贮存状态的功能。</li><li>所有元胞状态都按照元胞规则不断更新。</li></ol> 
<p><strong>状态</strong>：每个元胞都有自己的状态，随着时间的推移，状态也会改变。</p> 
<p><strong>元胞空间</strong>：元胞分布在空间中的格点，可以是1维、2维或n维。</p> 
<p><strong>邻居</strong>：能影响元胞下一时刻状态的周围元胞。一般来说有三种邻居模式（图是2维情况下的）：</p> 
<p><img src="https://images2.imgbox.com/20/ab/douNmx0b_o.jpg" alt="在这里插入图片描述"></p> 
<p>当然还有其他的邻居模式，不赘述，主要看题目要求。</p> 
<p><strong>边界</strong>：整个元胞空间不是无穷大的，是需要一个边界范围的。边界也有好几种类型：固定型、周期型、绝热型、映射型……，个人感觉最后还是得看需要解决的问题，具体问题具体分析。</p> 
<p><strong>规则</strong>：根据元胞自身及邻居元胞的状态，决定下一时刻元胞状态的决定，可以是动力学函数或状态转移方程。</p> 
<h3><a id="12__31"></a>1.2 原理</h3> 
<p>这个没啥原理，这部分简单讲讲步骤：</p> 
<p><strong>Step1</strong>：建立假设、简化条件。</p> 
<p><strong>Step2</strong>：设置初始状态和边界。</p> 
<p><strong>Step3</strong>：推导状态转方程和条件。</p> 
<p><strong>Step4</strong>：根据时间迭代。</p> 
<p>基于大量的实验，人们发现元胞自动机根据动力学行为能分为 4 类（Wolfram. S.，1986)：</p> 
<ol><li><strong>平稳型</strong>：自任何初始状态开始，经过一定时间运行后，元胞空间趋于一个空间平稳的构形，这里空间平稳即指每一个元胞处于固定状态。不随时间变化而变化。</li><li><strong>周期型</strong>：经过一定时间运行后，元胞空间趋于一系列简单的固定结构（Stable Patterns）或周期结构（Perlodical Patterns)。由于这些结构可看作是一种滤波器（Filter），故可应用到图像处理的研究中。</li><li><strong>混沌型</strong>：自任何初始状态开始，经过一定时间运行后，元胞自动机表现出混沌的非周期行为，所生成的结构的统计特征不再变止，通常表现为分形分维特征。</li><li><strong>复杂型</strong>：出现复杂的局部结构，或者说是局部的混沌，其中有些会不断地传播。</li></ol> 
<p>我们不对每种类型的元胞做实验验证，只提供几种经典和常见的例子。</p> 
<h2><a id="2__50"></a>2 实例</h2> 
<h3><a id="21__51"></a>2.1 奇偶游戏</h3> 
<p>条件：</p> 
<ol><li>邻居和为奇数时，中间的数字变成1；</li><li>邻居和为偶数时，中间的数字变成2。</li></ol> 
<pre><code class="prism language-matlab"><span class="token comment">%%奇偶规则游戏</span>
clear<span class="token punctuation">;</span>clc<span class="token punctuation">;</span>
n <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span><span class="token comment">%指定边界长度</span>
Se <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
z <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Se</span><span class="token punctuation">(</span>n<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span>n<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">%初始化中间的点</span>
Ch <span class="token operator">=</span> <span class="token function">imagesc</span><span class="token punctuation">(</span>Se<span class="token punctuation">)</span><span class="token punctuation">;</span>
axis square<span class="token punctuation">;</span>
Sd <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">%边界</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span> <span class="token comment">%死循环</span>
    <span class="token comment">% 保存现有状态的右2：边界1，右边1</span>
    <span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> Se<span class="token punctuation">;</span>
    <span class="token comment">% 上下左右加一次</span>
    sumValue <span class="token operator">=</span> <span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">% 摸一下</span>
    Se <span class="token operator">=</span> <span class="token function">mod</span><span class="token punctuation">(</span>sumValue<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">set</span><span class="token punctuation">(</span>Ch<span class="token punctuation">,</span><span class="token string">'cdata'</span><span class="token punctuation">,</span>Se<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">pause</span><span class="token punctuation">(</span><span class="token number">0.0001</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

</code></pre> 
<p>9倍速效果如下</p> 
<p><img src="https://images2.imgbox.com/84/e9/S9AJayCV_o.gif" alt="在这里插入图片描述"></p> 
<p>还挺好看的</p> 
<p>不是个实际例子，但是可以看出元胞自动机的代码模板，反正就是这么一个流程。</p> 
<h3><a id="22__86"></a>2.2 生灭游戏</h3> 
<p>条件：</p> 
<ol><li>如果活细胞周围活细胞数小于2个或者大于3个，则转为死；</li><li>如果活细胞周围活细胞数为2个或者3个，则保持活；</li><li>如果死细胞周围有3个活细胞，则转为活。</li></ol> 
<p>对于活细胞，我们用1表示；对于死细胞，我们用0表示。</p> 
<pre><code class="prism language-matlab">n <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
p <span class="token operator">=</span> <span class="token number">0.4</span><span class="token punctuation">;</span>
z <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
Se <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">&lt;</span>p<span class="token punctuation">;</span>
Sd <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Ph <span class="token operator">=</span> <span class="token function">imagesc</span><span class="token punctuation">(</span>Se<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span>
    <span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span>Se<span class="token punctuation">;</span>
    sumValue <span class="token operator">=</span> <span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n
        <span class="token keyword">for</span> <span class="token number">j</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">sumValue</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">3</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token function">sumValue</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token operator">&amp;&amp;</span><span class="token function">Se</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token function">Se</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token function">Se</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    <span class="token function">set</span><span class="token punctuation">(</span>Ph<span class="token punctuation">,</span><span class="token string">'cdata'</span><span class="token punctuation">,</span>Se<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">pause</span><span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

</code></pre> 
<p>二倍速效果如下：</p> 
<p><img src="https://images2.imgbox.com/e4/02/1CA7taMt_o.gif" alt="在这里插入图片描述"></p> 
<p>丑丑的</p> 
<p>最后趋于平衡了</p> 
<h3><a id="23__129"></a>2.3 森林火灾</h3> 
<p>条件：</p> 
<ol><li>对于树木：它可能会被雷劈，导致树木着火变成火树；它可能会被附近的火树点着，变成火树；也可能保持现状</li><li>对于火树：它可能会烧成灰，变成空地；也可能会继续烧，保持现状</li><li>对于空地：它可能会长出树木，变成树；也可能保持现状</li><li>对于火树传播：火树附近1格的树有概率变成火树</li></ol> 
<p>各种概率简单起见我自己定了，如果是比赛，可能需要假设和计算概率方程。</p> 
<h4><a id="231__137"></a>2.3.1 普通森林大火</h4> 
<p>此时我们不考虑其他因素，简单地将火烧成空地的概率定位0.5，树被雷劈的概率定义为0.000001，空地长树的概率定为 0.01，树被旁边火烧到的概率定为0.7。</p> 
<pre><code class="prism language-matlab">clear<span class="token punctuation">;</span>clc<span class="token punctuation">;</span>
<span class="token comment">%火灾</span>
n <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>                           <span class="token comment">% 定义表示森林的矩阵大小</span>
k <span class="token operator">=</span> <span class="token number">30000</span><span class="token punctuation">;</span>                         <span class="token comment">% 迭代次数</span>
Pground <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>                     <span class="token comment">% 从着火变成空地的概率</span>
Plight <span class="token operator">=</span> <span class="token number">1e-6</span><span class="token punctuation">;</span> Pgrowth <span class="token operator">=</span> <span class="token number">2e-3</span><span class="token punctuation">;</span>      <span class="token comment">% 定义闪电和生长的概率  </span>
P2<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">;</span> <span class="token comment">%旁边有火，树着火的概率</span>
<span class="token comment">% UL = [n,1:n-1]; DR = [2:n,1];      % 定义上左，下右邻居</span>
veg<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>                    <span class="token comment">% 初始化表示森林的矩阵</span>
imh <span class="token operator">=</span> <span class="token function">image</span><span class="token punctuation">(</span><span class="token function">cat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>veg<span class="token punctuation">,</span>veg<span class="token punctuation">,</span>veg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">% 可视化表示森林的矩阵</span>
Sd <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">%边界</span>
<span class="token comment">% veg = 空地为0 着火为1 树木为2</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>k
    <span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> veg<span class="token punctuation">;</span>
    sumValue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> p<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n
        <span class="token keyword">for</span> q<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">sumValue</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>P2<span class="token punctuation">)</span><span class="token operator">||</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>Plight<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">%首先要是树，而且需要邻居有火，就会一定概率着火;或者被雷劈了,就会直接着火</span>
                <span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;&amp;</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>Pground<span class="token punctuation">)</span>
                <span class="token comment">%如果是火且满足概率，则变为空地</span>
                <span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">sumValue</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>Pgrowth<span class="token punctuation">)</span>
                <span class="token comment">%如果是空地，且周围没有火，那么以一定概率长成树</span>
                <span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    <span class="token function">set</span><span class="token punctuation">(</span>imh<span class="token punctuation">,</span> <span class="token string">'cdata'</span><span class="token punctuation">,</span> <span class="token function">cat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">(</span>veg<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>veg<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    drawnow  
<span class="token keyword">end</span>
</code></pre> 
<p>7倍速效果如下图</p> 
<p><img src="https://images2.imgbox.com/7d/f6/XWl0YyAb_o.gif" alt="在这里插入图片描述"></p> 
<p>还是能看出来森林大火和树生长维持动态平衡的。</p> 
<h4><a id="232__182"></a>2.3.2 东风森林大火</h4> 
<p><img src="https://images2.imgbox.com/ce/73/MCyNbZPd_o.jpg" alt="在这里插入图片描述"><br> 如上图所示，如果是北风，不同颜色的火树（圆圈）对风方向2格的树木的影响是这样的（X代表是否会被火树影响）。可以看出传播方向越边缘的树，越难被火树波及，在火树林正前方的树很容易被点着。</p> 
<p>其实没难多少，就是加了个判断和概率，计算的时候再算一下吹风的时候会按照风的方向影响2格的树木，这个已经写在代码注释中了~~</p> 
<pre><code class="prism language-matlab">clear<span class="token punctuation">;</span>clc<span class="token punctuation">;</span>
<span class="token comment">%火灾</span>
n <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>                           <span class="token comment">% 定义表示森林的矩阵大小</span>
k <span class="token operator">=</span> <span class="token number">30000</span><span class="token punctuation">;</span>                         <span class="token comment">% 迭代次数</span>
Pground <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>                     <span class="token comment">% 从着火变成空地的概率</span>
Plight <span class="token operator">=</span> <span class="token number">1e-6</span><span class="token punctuation">;</span> Pgrowth <span class="token operator">=</span> <span class="token number">2e-3</span><span class="token punctuation">;</span>      <span class="token comment">% 定义闪电和生长的概率  </span>
Windposb <span class="token operator">=</span> <span class="token number">2e-1</span><span class="token punctuation">;</span>                    <span class="token comment">% 定义风的效果</span>
P2<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">;</span>                             <span class="token comment">%旁边有火，树着火的概率</span>
veg<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>                    <span class="token comment">% 初始化表示森林的矩阵</span>
imh <span class="token operator">=</span> <span class="token function">image</span><span class="token punctuation">(</span><span class="token function">cat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>veg<span class="token punctuation">,</span>veg<span class="token punctuation">,</span>veg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">% 可视化表示森林的矩阵</span>
Sd <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">%边界</span>
<span class="token comment">% veg = 空地为0 着火为1 树木为2</span>
<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>k
    <span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> veg<span class="token punctuation">;</span>
    <span class="token comment">% 周围有火</span>
    sumValue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sumWindValue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>n<span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">Sd</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">:</span>n<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> p<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n
        <span class="token keyword">for</span> q<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">sumValue</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>P2<span class="token punctuation">)</span><span class="token operator">||</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>Plight<span class="token operator">||</span><span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>Windposb <span class="token operator">&amp;&amp;</span> <span class="token function">sumWindValue</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">%首先要是树，而且需要邻居有火，就会一定概率着火;或者被雷劈了,就会直接着火;或者是东风让东火烧到了</span>
                <span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;&amp;</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>Pground<span class="token punctuation">)</span>
                <span class="token comment">%如果是火且满足概率，则变为空地</span>
                <span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">sumValue</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>Pgrowth<span class="token punctuation">)</span>
                <span class="token comment">%如果是空地，且周围没有火，那么以一定概率长成树</span>
                <span class="token function">veg</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    <span class="token function">set</span><span class="token punctuation">(</span>imh<span class="token punctuation">,</span> <span class="token string">'cdata'</span><span class="token punctuation">,</span> <span class="token function">cat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">(</span>veg<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>veg<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    drawnow  
<span class="token keyword">end</span>
</code></pre> 
<p>5倍速效果如下</p> 
<p><img src="https://images2.imgbox.com/f1/d0/6NBDuMeu_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="3__231"></a>3 小结</h2> 
<p>感觉原理和实现方面，元胞自动机应该没什么难度，其实可能在知道元胞自动机这个概念之前有的读者就已经有意识无意识地去做类似的操作了，元胞自动机实际上就只是给这些操作外面套一个好听的名字罢了。</p> 
<p>个人感觉元胞自动机的难点和重点并不在于实现和模型可能以下两点相对更重要一点：</p> 
<ol><li><strong>假设</strong></li></ol> 
<p>以森林大火为例，难点在怎么根据题意建立元胞自动机模型吗？或许难度有那么一丢丢，但是显然不是重点。个人感觉说清楚各个参数的取值的原因，甚至为这些参数的设定建立一些系数公式（例如，风速x怎么影响火蔓延速度g(x)的），也非常重要。</p> 
<p>除此之外，假设也是需要考虑的一点。说到底元胞自动机还是比较简单的没怎么考虑其他现实条件的抽象数学模型，很多实际因素都被忽略了、被简化了，这个是需要说清楚的。事实上，模型的优化和题目的推进往往就是建立在让数学模型不断接近现实条件的基础上的，即一点一点加入被考虑的因素和条件，让模型变得更全面。</p> 
<ol start="2"><li><strong>模型优化</strong></li></ol> 
<p>简单的元胞自动机谁都会，作为一篇优秀的数模论文，在模型方面显然不能只用最简单的模型的拼凑和堆叠，如果可以，当然是优化后的模型更香。不过这种东西显然有点可遇不可求，如果前期没有相应的准备，赛中做这个的时候一定要保证时间充足。</p> 
<p>如果调研过，就会发现其实现在很多论文都已经提出了元胞自动机组合优化模型，比如神经网络 + 元胞自动机或者是元胞自动机 + 多智能体的模型。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/094db49968711b61a2129c469843f686/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">设备数据包解析带小数的字节流</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb9162af1833207dcf425c513aa56730/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue实现对数据进行升序降序排列</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>