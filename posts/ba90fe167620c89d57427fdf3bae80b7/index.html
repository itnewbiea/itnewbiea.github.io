<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何利用t-SNE可视化自己的数据集分布 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何利用t-SNE可视化自己的数据集分布" />
<meta property="og:description" content="【转载】利用t-SNE可视化自己的数据集分布_tsne数据集制作-CSDN博客
安装 1、在Linux机器上执行下面操作。
2、使用代码之前需要先安装一个t-SNE的库，地址是GitHub - CannyLab/tsne-cuda: GPU Accelerated t-SNE for CUDA with Python bindings。该库是github上一个高分的开源库，用了cuda加速实现起来比sklearn的t-SNE要快得多，从读取到画图我自己实验确实只需要10秒不到的时间。
3、github上下载TSNE-CUDA项目到本地后，在终端的虚拟环境中输入
pip install -e .
安装好后输入
import tsnecuda
tsnecuda.test()
没有报错说明安装成功
3、在TSNE-CUDA文件夹下创建数据集文件data_set,data_set里放自己的数据集(比如我的数据集叫radar_oldANDyoung,里边包含train和val两个文件夹,每个文件夹下边分别有5个子文件夹，命名为1-5)，其中1-5分别为类名，每个类下边是属于该类的图片
4、在examples文件夹下创建python文件，比如my_tSNE.py,把我下边的代码粘贴进去
5、几个需要修改的地方我的代码里基本都有注释，不懂的可以在本帖下边留言，不定期回复 6、结果图：
代码 import numpy as np from tsnecuda import TSNE import matplotlib.pyplot as plt import numpy as np import cv2 import os size = 224 #resize图片的大小，运行时如果爆显存的话把这里调小即可 # get_data(Input_path,Label) # 作用：读取Input_path里的图片，并给每张图打上自定义标签Label def get_data(Input_path,Label): Image_names=os.listdir(Input_path) #获取目录下所有图片名称列表 data=np.zeros((len(Image_names),size*size*3)) #初始化一个np.array数组用于存数据,自己图片是n维的就把3改成n即可 label=np.zeros((len(Image_names),1)) #初始化一个np.array数组用于存数据 #为当前文件下所有图片分配自定义标签Label for k in range(len(Image_names)): label[k][0]=Label for i in range(len(Image_names)): image_path=os." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ba90fe167620c89d57427fdf3bae80b7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-11T11:06:43+08:00" />
<meta property="article:modified_time" content="2023-12-11T11:06:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何利用t-SNE可视化自己的数据集分布</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>【转载】<a href="https://blog.csdn.net/ts1637605540/article/details/125766434" title="利用t-SNE可视化自己的数据集分布_tsne数据集制作-CSDN博客">利用t-SNE可视化自己的数据集分布_tsne数据集制作-CSDN博客</a></p> 
<h2><span style="color:#79c6cd;"><span style="background-color:#edf6e8;">安装</span></span></h2> 
<p>1、在Linux机器上执行下面操作。</p> 
<p>2、使用代码之前需要先安装一个t-SNE的库，地址是GitHub - CannyLab/tsne-cuda: GPU Accelerated t-SNE for CUDA with Python bindings。该库是github上一个高分的开源库，用了cuda加速实现起来比sklearn的t-SNE要快得多，从读取到画图我自己实验确实只需要10秒不到的时间。</p> 
<p>3、github上下载TSNE-CUDA项目到本地后，在终端的虚拟环境中输入</p> 
<p>pip install -e .<br> 安装好后输入</p> 
<p>import tsnecuda<br> tsnecuda.test()<br> 没有报错说明安装成功</p> 
<p>3、在TSNE-CUDA文件夹下创建数据集文件data_set,data_set里放自己的数据集(比如我的数据集叫radar_oldANDyoung,里边包含train和val两个文件夹,每个文件夹下边分别有5个子文件夹，命名为1-5)，其中1-5分别为类名，每个类下边是属于该类的图片</p> 
<p><img alt="" height="407" src="https://images2.imgbox.com/68/5d/BuwNky31_o.png" width="268"><img alt="" height="166" src="https://images2.imgbox.com/51/eb/03NYdFMD_o.png" width="566"></p> 
<p>4、在examples文件夹下创建python文件，比如my_tSNE.py,把我下边的代码粘贴进去</p> 
<p>5、几个需要修改的地方我的代码里基本都有注释，不懂的可以在本帖下边留言，不定期回复 </p> 
<p>6、结果图：</p> 
<p><img alt="" height="512" src="https://images2.imgbox.com/cf/7c/RmCBZVL9_o.png" width="558"></p> 
<p></p> 
<h2><span style="color:#79c6cd;"><span style="background-color:#edf6e8;">代码</span></span></h2> 
<pre><code class="language-python">import numpy as np
from tsnecuda import TSNE
import matplotlib.pyplot as plt
import numpy as np
import cv2
import os
 
size = 224 #resize图片的大小，运行时如果爆显存的话把这里调小即可
 
# get_data(Input_path,Label)
# 作用：读取Input_path里的图片，并给每张图打上自定义标签Label
def get_data(Input_path,Label): 
    Image_names=os.listdir(Input_path) #获取目录下所有图片名称列表
    data=np.zeros((len(Image_names),size*size*3)) #初始化一个np.array数组用于存数据,自己图片是n维的就把3改成n即可
    label=np.zeros((len(Image_names),1)) #初始化一个np.array数组用于存数据
 
    #为当前文件下所有图片分配自定义标签Label
    for k in range(len(Image_names)):
        label[k][0]=Label
        
    for i in range(len(Image_names)):
        image_path=os.path.join(Input_path,Image_names[i])
        img=cv2.imread(image_path)
        img=cv2.resize(img,(size,size)) #(size,size,3)
        img = img.flatten() #(3*size*size,)
        data[i]=img
    return data, label
 
#重点来了，这里是根据自己想查看的数据来自定义修改代码,得到自己的x_train和y_train
#x_train是待分析的数据
#y_train是待分析的自定义标签
#比如，我想分析训练集中5个类的分布情况
#先读取每一个类的数据，然后给他们自定义标签1-5
#然后把data拼在一起,label拼在一起，前者叫x_train,后者叫y_train
data1, label1 = get_data('../data_set/radar_oldANDyoung/train/1',1) #根据自己的路径合理更改
data2, label2 = get_data('../data_set/radar_oldANDyoung/train/2',2) 
data3, label3 = get_data('../data_set/radar_oldANDyoung/train/3',3) 
data4, label4 = get_data('../data_set/radar_oldANDyoung/train/4',4) 
data5, label5 = get_data('../data_set/radar_oldANDyoung/train/5',5) 
#得出数据后把他们拼起来
data = np.vstack((data1,data2,data3,data4,data5))
label = np.vstack((label1,label2,label3,label4,label5))
 
(x_train,y_train) = (data,label)
print(y_train.shape) #(n_samples,1)
print(x_train.shape) #(n_samples,size*size*3)
 
#t-SNE，输出结果是(n_samples,2)
#TSNE的参数和sklearn的T-SNE一样，不懂的自行查看即可
tsne = TSNE(n_iter=1000, verbose=1,num_neighbors=32,device=0)
tsne_results = tsne.fit_transform(x_train)
 
print(tsne_results.shape) #(n_samples,2)
 
# 画图
fig = plt.figure( figsize=(8,8) )
ax = fig.add_subplot(1, 1, 1, title='TSNE-radar' )
 
# Create the scatter
#ax.scatter()的用法自行百度
scatter  = ax.scatter(
    x=tsne_results[:,0],
    y=tsne_results[:,1],
    c=y_train,
    # cmap=plt.cm.get_cmap('Paired'),
    # alpha=0.4,
    s=10)
 
#ax.legend添加类标签
legend1 = ax.legend(*scatter.legend_elements(),loc="lower left", title="Classes")
ax.add_artist(legend1)
 
#显示图片
plt.show()
#保存图片
plt.savefig('./tSNE_radar.jpg')</code></pre> 
<p><br>  <br>  </p> 
<p>————————————————<br> 版权声明：本文为CSDN博主「Nudge636」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br> 原文链接：https://blog.csdn.net/ts1637605540/article/details/125766434</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2d4719e4cfdbd17b39a7616aa8e46c6b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Cython编译文件出错</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/75eccd73eea3c56fb3d7b904a959bacf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Win 11 使用H3C Cloud Lab无法启动交换机</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>