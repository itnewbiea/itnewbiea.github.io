<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>matlab--16进制转ASCII代码 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="matlab--16进制转ASCII代码" />
<meta property="og:description" content="matlab–16进制转ASCII代码 前言 由于对RTK设备输出转换的需要，撰写了一个matlab转换16进制到ASCII代码。
一、读文件 1.textscan C = textscan(fileID,formatSpec)
将已打开的文本文件中的数据读取到元胞数组 C。该文本文件由文件标识符 fileID 指示。使用 fopen 可打开文件并获取 fileID 值。完成文件读取后，请调用 fclose(fileID) 来关闭文件。
配合fopen使用！
2.cell数组 1.cell数组的创建
可以直接通过{}类似于矩阵的直接赋值：a={‘winter’,123,‘coming’,‘哈哈’};
2.cell数组的访问
与普通矩阵，数组的主要区别在于：通过（）访问cell数组时访问到的是cell单元,通过{}访问cell数组时访问到的是cell单元储存的内容，举例如下图所示，其他操作基本一样。
元胞数组操作类似但和其赋值一样有区别，区别就在于{}和()
a={1,2,3};
a{1}=[];%并不能删除第一个cell单元,只是变成空值
a(1)=[];%删除第一个单元
3.字符转换命令 hex2dec(data)
16进制转到十进制
char(hex2dec(data))
16进制转到char
4.num2str()与num2double的区别 两者都是能够将数字转为字符串
相同点： 当str为一个含数字的字符串时， str2num 函数与 str2double 函数一样。
不同点：当str为多个字符串构成的数组时， str2num 函数与 str2double 函数有区别。
如：
二、代码 path = &#39;D:\Rtk主机-2020-11-12-14-27-30.txt&#39;; fid = fopen(path, &#39;r&#43;&#39;); if fid == -1 disp(&#39;fopen failed&#39;); else ReadData = textscan(fid,&#39;%s&#39;); end fclose(fid); data_hex = ReadData{1}; % 取cell len = length(data_hex); % 16进制转为ASCII row_num = 0; % 行 line_num = 0; % 列 data_char = {}; flag_time_trans = 0; % 时间格式转换标志 flag = 0; % 十六进制转ASCII for i=1:len if(char(data_hex(i,1))==&#39;&lt;&#39;) row_num = row_num&#43;1; line_num = 1; flag_time_trans = 1; disp([&#39;开始转换第&#39;,num2str(row_num),&#39;行！&#39;]); continue; elseif(char(data_hex(i,1))==&#39;&gt;&#39;) flag = 0; % 完成一行的转换 continue; elseif(char(data_hex(i,1))==&#39;|&#39;) flag = 1; continue; elseif(flag == 1) data_char(row_num,line_num) = {hex2char(data_hex(i,1))}; % 16进制数据转换为char line_num = line_num &#43; 1; elseif(flag_time_trans == 1) seconds = seconds_trans(data_hex(i,1),data_hex(i&#43;1,1)); % 时间转换格式 data_char(row_num,line_num) = {seconds}; line_num = line_num &#43; 1; flag_time_trans = 0; end en function data = hex2char(data_hex) % 把0x去掉从十六进制转成10进制再转成char data = char(data_hex); data = data(1,3:4); data = char(hex2dec(data)); end function seconds = seconds_trans(years,hours) % 时间字符转为数字 years = char(years); hours = char(hours); seconds = num2str(str2double(hours(1,1:2))*3600000&#43;str2double(hours(1,4:5))*60000&#43;str2double(hours(1,7:8))*1000&#43;str2double(hours(1,10:12))); end 结果" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e13073d3523a8520989441c4154bf9fe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-13T16:47:58+08:00" />
<meta property="article:modified_time" content="2020-11-13T16:47:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">matlab--16进制转ASCII代码</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="matlab16ASCII_0"></a>matlab–16进制转ASCII代码</h3> 
<h2><a id="_1"></a>前言</h2> 
<p>由于对RTK设备输出转换的需要，撰写了一个matlab转换16进制到ASCII代码。</p> 
<h2><a id="_3"></a>一、读文件</h2> 
<h3><a id="1textscan_4"></a>1.textscan</h3> 
<p>C = textscan(fileID,formatSpec)<br> 将<strong>已打开的文本文件</strong>中的数据读取到元胞数组 C。该文本文件由文件标识符 fileID 指示。使用 fopen 可打开文件并获取 fileID 值。完成文件读取后，请调用 fclose(fileID) 来关闭文件。<br> 配合fopen使用！</p> 
<h3><a id="2cell_8"></a>2.cell数组</h3> 
<p>1.cell数组的创建</p> 
<p>可以直接通过{}类似于矩阵的直接赋值：a={‘winter’,123,‘coming’,‘哈哈’};<br> 2.cell数组的访问</p> 
<p>与普通矩阵，数组的主要区别在于：通过（）访问cell数组时访问到的是cell单元,通过{}访问cell数组时访问到的是cell单元储存的内容，举例如下图所示，其他操作基本一样。<br> <img src="https://images2.imgbox.com/b6/08/eS34697m_o.png" alt="在这里插入图片描述"></p> 
<p>元胞数组操作类似但和其赋值一样有区别，区别就在于{}和()</p> 
<p>a={1,2,3};</p> 
<p>a{1}=[];%并不能删除第一个cell单元,只是变成空值</p> 
<p>a(1)=[];%删除第一个单元</p> 
<h3><a id="3_25"></a>3.字符转换命令</h3> 
<p>hex2dec(data)<br> 16进制转到十进制<br> char(hex2dec(data))<br> 16进制转到char</p> 
<h3><a id="4num2strnum2double_31"></a>4.num2str()与num2double的区别</h3> 
<p>两者都是能够将数字转为字符串</p> 
<ol><li> <p>相同点： 当str为一个含数字的字符串时， str2num 函数与 str2double 函数一样。<br> <img src="https://images2.imgbox.com/bb/c3/MUhwslLh_o.png" alt="在这里插入图片描述"></p> </li><li> <p>不同点：当str为多个字符串构成的数组时， str2num 函数与 str2double 函数有区别。</p> <p>如：<br> <img src="https://images2.imgbox.com/85/2b/7tLNxH6M_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h2><a id="_41"></a>二、代码</h2> 
<pre><code class="prism language-matlab">path = 'D:\Rtk主机-2020-11-12-14-27-30.txt';
fid = fopen(path, 'r+');
if fid == -1
    disp('fopen failed');
else
    ReadData = textscan(fid,'%s');
end
fclose(fid);

data_hex = ReadData{1};   % 取cell
len = length(data_hex);

% 16进制转为ASCII
row_num = 0;         % 行
line_num = 0;        % 列
data_char = {};
flag_time_trans = 0; % 时间格式转换标志
flag = 0;            % 十六进制转ASCII

for i=1:len
    if(char(data_hex(i,1))=='&lt;')  
        row_num = row_num+1;
        line_num = 1;
        flag_time_trans = 1;
        disp(['开始转换第',num2str(row_num),'行！']);
        continue;
    elseif(char(data_hex(i,1))=='&gt;')
        flag = 0;    % 完成一行的转换
        continue;
    elseif(char(data_hex(i,1))=='|')
        flag = 1;
        continue;
    elseif(flag == 1) 
        data_char(row_num,line_num) = {hex2char(data_hex(i,1))};  % 16进制数据转换为char
        line_num = line_num + 1;
    elseif(flag_time_trans == 1)
        seconds = seconds_trans(data_hex(i,1),data_hex(i+1,1));  % 时间转换格式
        data_char(row_num,line_num) = {seconds};
        line_num = line_num + 1;
        flag_time_trans = 0;
    end
en

function data = hex2char(data_hex)
    % 把0x去掉从十六进制转成10进制再转成char
    data = char(data_hex);
    data = data(1,3:4);
    data = char(hex2dec(data));
end

function seconds = seconds_trans(years,hours)
    % 时间字符转为数字
    years = char(years);
    hours = char(hours);
    
    seconds = num2str(str2double(hours(1,1:2))*3600000+str2double(hours(1,4:5))*60000+str2double(hours(1,7:8))*1000+str2double(hours(1,10:12)));
end

</code></pre> 
<ul><li>结果<br> <img src="https://images2.imgbox.com/2e/81/X2Ln5qPG_o.png" alt="在这里插入图片描述"></li></ul> 
<p>输出data_char 为单个字符储存，根据RTK协议加入了部分代码能够整理符合协议的格式<br> % 整合单个字符为GGA格式</p> 
<pre><code class="prism language-matlab">[m,n] = size(data_char);
DATA_char(:,1) = data_char(:,1);
list = [];
line_num = 0;        % 列
for i=1:m
    list = [];
    line_num = 2;
    for j =2:n
        if (data_char{i,j} == ',')
            DATA_char{i,line_num} = list;
            DATA_char{i,line_num+1} = {','};
            line_num = line_num+2;
            list = [];
        elseif (data_char{i,j} == 13)
            DATA_char{i,line_num} = list;
            line_num = line_num+1;
            list = [];
        elseif (data_char{i,j} == 10)
            continue;
        elseif(data_char{i,j} == [])
            list = [];
            line_num =2;
            break;  % 结束一行
        elseif(data_char{i,j} == '$')
            list = [list,data_char{i,j}];
        else
            list = [list,data_char{i,j}];
        end
    end
end
</code></pre> 
<p><img src="https://images2.imgbox.com/ba/9e/ndxUI1wF_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/943832c7be1fa0e3a4d71bfae8ed982c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">线性回归，决策树，knn等6种机器学习回归方法总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b70bec561eb13e11aa3821fb72cc07f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">matlab中cumsum函数的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>