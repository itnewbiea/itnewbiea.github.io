<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Redis 常用 API - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Redis 常用 API" />
<meta property="og:description" content="1. 常用命令
1. 设置键的过期时间（单位：秒）
expire key second
2. 查看键的过期时间（单位：秒）
ttl key（其中，如果是， -1：说明没有设置过期时间，-2：说明不存在该键）
3. 查看键的类型
type key
4. 查看内部编码
object encoding key
5. 键自增
incr key
6. 切换数据库
select dbIndex
7. 迁移键到别的数据库
move key db
8. 清除当前数据库
flushdb
9. 清除所有数据库
flushall
2. 数据结构
1. 五种基本的数据结构
（1）string
内部编码 raw、int、embstr
（2）hash
内部编码 hashtable、ziplist
（3）list
内部编码 linkedlist、ziplist
（4）set
内部编码 hashtable、intset
（5）zset
内部编码 skiplist、ziplist
3. String
可以存储简单的字符串、也可以是复杂的字符串（例如：JSON、XML）、数字（整数、浮点数）、也可以是二进制（图片、音频、视频）；但是最大不能超过 512 MB。
常用命令
设置值
1. set key value [ex seconds] [px milliseconds] [nx|xx]" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f5f0d51da91055343f09e0b5fec67d6c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-20T23:43:58+08:00" />
<meta property="article:modified_time" content="2022-03-20T23:43:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Redis 常用 API</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1. 常用命令</p> 
<blockquote> 
 <p>1. 设置键的过期时间（单位：秒）</p> 
 <p>expire key second</p> 
 <p>2. 查看键的过期时间（单位：秒）</p> 
 <p>ttl key（其中，如果是， -1：说明没有设置过期时间，-2：说明不存在该键）</p> 
 <p>3. 查看键的类型</p> 
 <p>type key</p> 
 <p>4. 查看内部编码</p> 
 <p>object encoding key</p> 
 <p>5. 键自增</p> 
 <p>incr key</p> 
 <p>6. 切换数据库</p> 
 <p>select dbIndex</p> 
 <p>7. 迁移键到别的数据库</p> 
 <p>move key db</p> 
 <p>8. 清除当前数据库</p> 
 <p>flushdb</p> 
 <p>9. 清除所有数据库</p> 
 <p>flushall</p> 
</blockquote> 
<p>2. 数据结构</p> 
<blockquote> 
 <p>1. 五种基本的数据结构</p> 
 <p>（1）string</p> 
 <p>        内部编码 raw、int、embstr</p> 
 <p>（2）hash</p> 
 <p>        内部编码 hashtable、ziplist</p> 
 <p>（3）list</p> 
 <p>        内部编码 linkedlist、ziplist</p> 
 <p>（4）set</p> 
 <p>        内部编码 hashtable、intset</p> 
 <p>（5）zset</p> 
 <p>        内部编码 skiplist、ziplist</p> 
</blockquote> 
<p>3. String</p> 
<blockquote> 
 <p> 可以存储简单的字符串、也可以是复杂的字符串（例如：JSON、XML）、数字（整数、浮点数）、也可以是二进制（图片、音频、视频）；但是最大不能超过 512 MB。</p> 
 <p>常用命令</p> 
 <p>设置值</p> 
 <p>1. set key value [ex seconds] [px milliseconds] [nx|xx]</p> 
 <p>        ex seconds：为键设置秒级过期时间</p> 
 <p>        px milliseconds：为键设置毫秒级过期时间</p> 
 <p>        nx：键必须不存在，才可以设置成功，用于添加</p> 
 <p>        xx：与 nx 相反，键必须存在，才可以设置成功，用于更新</p> 
 <p>2. setnx key value</p> 
 <p>       setnx：可以作为分布式锁的一种实现方案</p> 
 <p>3. setex key seconds value</p> 
 <p>        setex：设置值顺便设置过期时间</p> 
 <p>4. mset k1 v1 k2 v2 k3 v3</p> 
 <p>        mset：批量设置值</p> 
 <p>5. mget k1 k2 k3</p> 
 <p>        mget：批量获取值</p> 
 <p>补充：为什么不使用单个插入，而要有批量插入，看下面时间复杂度</p> 
 <p>set = 一次网络时间 + 一次命令时间</p> 
 <p>mset = 一次网络时间 + n次命令时间</p> 
 <p>主要的是网络时间，命令时间几乎可以忽略不计，所以使用 mset 所需要的时间就是约等于一次网络时间</p> 
 <p>6. incr key</p> 
 <p>        incr：+1操作（不是整数返回错误，是整数则返回增加后的结果，键不存在，按值为0增加则返回1）</p> 
 <p>7. decr key</p> 
 <p>        decr：-1操作</p> 
 <p>8. incrby key number（按照 number 进行增加）</p> 
 <p>9. decrby key number（按照 number 进行减少）</p> 
 <p>10. incrbyfloat key number（按照 number 对 float 类型进行增加）</p> 
 <p>11. decrbyfloat key number（按照 number 对 float 类型进行减少）</p> 
 <p>12. append key value</p> 
 <p>        append：追加值</p> 
 <p>13. strlen key</p> 
 <p>        strlen：计算字符串长度</p> 
 <p>14. getset key value</p> 
 <p>        getset：返回原先的 key 对应的值，然后再进行设值</p> 
 <p>15. getrange key start end</p> 
 <p>        getrange：获取指定位置范围的值</p> 
 <p></p> 
 <p>内部编码：</p> 
 <p>1. int：8个字节的长整型</p> 
 <p>2. embstr：小于等于 39 个字节的字符串</p> 
 <p>3. raw：大于 39 个字节的字符串</p> 
</blockquote> 
<p>4. hash</p> 
<blockquote> 
 <p>1. hset key field value</p> 
 <p>        hset：设置 hash 成员变量，key：哈希的成员属性，field value：key value</p> 
 <p>2. hmset key f1 v1 f2 v2</p> 
 <p>        hmset：同上面为 哈希 设置值，但是是批量设置</p> 
 <p>3. hget key field</p> 
 <p>        hget：获取 hash 成员变量值</p> 
 <p>4. hmget key f1 f2</p> 
 <p>        hmget：同 hget 获取哈希表的值，但是为批量获取</p> 
 <p>5. hdel key field</p> 
 <p>        hdel：删除 哈希 成员</p> 
 <p>6. hlen key</p> 
 <p>        hlen：获取哈希中有多少个成员</p> 
 <p>7. hexists key field</p> 
 <p>        hexists：查看某个成员是否存在</p> 
 <p>8. hkeys key</p> 
 <p>        hkeys：获取某个哈希的所有键</p> 
 <p>9. hvals key</p> 
 <p>        hvals：获取某个哈希的所有值</p> 
 <p>10. hgetall key</p> 
 <p>        hgetall：获取某个哈希的键值</p> 
 <p>11. hincrby key field</p> 
 <p>        hincrby：对某个哈希的属性加 1</p> 
 <p>12. hincrbyfloat key field</p> 
 <p>        hincrbyfloat：对某个哈希的 float 属性加1</p> 
 <p>13. hstrlen key field</p> 
 <p>        hstrlen：计算某个哈希的成员长度</p> 
 <p></p> 
 <p>内部编码：</p> 
 <p>1. ziplist：当哈希类型元素个数小于 hash-max-ziplist-entries 配置（默认512个），同时所有值都小于 hash-max-ziplist-value 配置（默认64字节）时，Redis会使用 ziplist 作为哈希的内部实现，ziplist 使用更加紧凑的结构实现多个元素的连续存储，所以在节省内存方面比 hashtable 更加优秀</p> 
 <p>2. hashtable：当哈希类型无法满足 ziplist 的条件时，Redis 会使用 hashtable 作为哈希的内部实现，因为此时 ziplist 的读写效率会下降，而hashtable 的读写时间复杂度为 O(1)。</p> 
</blockquote> 
<p>5. list</p> 
<blockquote> 
 <p>1. rpush key v1 v2 v3 ...</p> 
 <p>        rpush：向列表右边添加元素</p> 
 <p>2. lrange key start end</p> 
 <p>        lrange：获取范围元素</p> 
 <p>3. lpush key v1 v2 v3 ...</p> 
 <p>        lpush：向列表左边添加元素</p> 
 <p>4. linsert key before|after  old_value value</p> 
 <p>        linsert：找到等于old_value的值在其前或者后添加元素</p> 
 <p>5. lindex key index</p> 
 <p>        lindex：通过索引获取元素</p> 
 <p>6. llen key</p> 
 <p>        llen：获取列表长度</p> 
 <p>7. lpop key</p> 
 <p>        lpop：从列表左侧弹出元素</p> 
 <p>8. rpop key</p> 
 <p>        rpop：从列表右侧弹出元素</p> 
 <p>9. lrem key count value</p> 
 <p>        说明：</p> 
 <p>        1. count &gt; 0，从左到右删除 count 个元素</p> 
 <p>        2. count &lt; 0 ，从右到左删除 -count 个元素</p> 
 <p>        3. count = 0，删除所有元素</p> 
 <p>10. ltrim key start end</p> 
 <p>        ltrim：删除范围元素</p> 
 <p>11. lset key index newValue</p> 
 <p>        lset：修改指定下标的值</p> 
 <p></p> 
 <p>内部编码：</p> 
 <p>1. ziplist：当列表的元素个数小于 list-max-ziplist-entries 配置（默认512个），同时所有值都小于 list-max-ziplist-value 配置（默认64字节）时，Redis会使用 ziplist 作为列表的内部实现</p> 
 <p>2. linkedlist：当列表类型无法满足 ziplist 的条件时，Redis 会使用 linkedlist 作为列表的内部实现</p> 
</blockquote> 
<p>6. 集合</p> 
<blockquote> 
 <p>1. sadd key e1 e2...</p> 
 <p>        sadd：添加不重复元素</p> 
 <p>2. srem key e1 e2</p> 
 <p>        srem：删除元素</p> 
 <p>3. scard key</p> 
 <p>        scard：计算元素个数</p> 
 <p>4. sismember key element</p> 
 <p>        sismember：计算元素是否在集合中</p> 
 <p>5. srandmember key count       </p> 
 <p>        srandmember：随机从集合从返回 count 个元素</p> 
 <p>6. spop key</p> 
 <p>        spop：从集合随机弹出元素</p> 
 <p>7. smembers myset</p> 
 <p>        smembers：获取 myset 集合中所有元素</p> 
 <p>8. sinter s1 s2</p> 
 <p>        sinter：求集合中存在的元素交集</p> 
 <p>9. suinon s1 s2</p> 
 <p>        suinon：求集合中元素的并集</p> 
 <p>10. sdiff s1 s2</p> 
 <p>        sdiff：求多个集合的差集</p> 
 <p></p> 
 <p>内部编码：</p> 
 <p>1. intset：当集合中的元素都是整数且元素个数小于 set-max-intset-entries 配置（默认512个）时，Redis会选用 intset 来作为集合的内部实现，从而减少内存的使用。</p> 
 <p>2. hashtable：当即和类型无法满足 intset 的条件时，Redis 会使用 hashtable 作为集合的内部实现</p> 
</blockquote> 
<p>7. 慢查询</p> 
<blockquote> 
 <p>1. 获取慢查询日志条数</p> 
 <p>slowlog get</p> 
 <p>2. 获取慢查询日志列表空间大小</p> 
 <p>slowlog len</p> 
 <p>3. 慢查询日志重置</p> 
 <p>slowlog reset</p> 
</blockquote> 
<p>8. 事务</p> 
<blockquote> 
 <p>1. 开启事务</p> 
 <p>multi</p> 
 <p>2. 执行事务（提交）</p> 
 <p>exec</p> 
 <p>3. 停止事务</p> 
 <p>discard</p> 
 <p></p> 
 <p>说明：</p> 
 <p>当命令错误时会导致事务失败，但是可以添加进队列</p> 
 <p>例如：</p> 
 <p>1. set age string</p> 
 <p>2. incr age</p> 
 <p>添加队列成功，但是执行失败（因为 age 为字符串）</p> 
</blockquote> 
<p>9. bitmaps</p> 
<blockquote> 
 <p>1. 设置值</p> 
 <p>setbit key offset value</p> 
 <p>setbit key 0 1</p> 
 <p>setbit key 1 1</p> 
 <p>2. 获取值</p> 
 <p>getbit key offset</p> 
 <p>3. 获取指定范围的值</p> 
 <p>bitcount start end</p> 
</blockquote>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/86becd794df1e0eb68511914a7b5a0b2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C语言】实现三子棋（详解）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7694701a437944fa2f1ef225d9669ca8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">联想Thinkpad E15插电源开机报错“The connected AC adapter has a lower wattage than the recommended AC“</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>