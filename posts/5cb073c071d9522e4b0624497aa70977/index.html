<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>BeanUtils.copyProperties的使用(深拷贝，浅拷贝) - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="BeanUtils.copyProperties的使用(深拷贝，浅拷贝)" />
<meta property="og:description" content="文章目录 场景BeanUtils是深拷贝，还是浅拷贝? 什么情况适合用BeanUtils有子对象就一定不能用BeanUtils么 代码例子dest ,src 还是 src,dest 这里说的是spring的BeanUtils.copyProperties。 场景 开发中经常遇到，把父类的属性拷贝到子类中。通常有2种方法：
1、一个一个set
2、用BeanUtils.copyProperties
很显然BeanUtils更加方便，也美观很多。
那么任何情况都能使用BeanUtils么，当然不是。要先了解他。
BeanUtils是深拷贝，还是浅拷贝? 是浅拷贝。
浅拷贝： 只是调用子对象的set方法，并没有将所有属性拷贝。(也就是说，引用的一个内存地址)
深拷贝： 将子对象的属性也拷贝过去。
什么情况适合用BeanUtils 如果都是单一的属性，那么不涉及到深拷贝的问题，适合用BeanUtils。
有子对象就一定不能用BeanUtils么 并不绝对，这个要区分考虑：
1、子对象还要改动。
2、子对象不怎么改动。
虽然有子对象，但是子对象并不怎么改动，那么用BeanUtils也是没问题的。
代码例子 下面用代码说明下。
翠山有个儿子无忌，儿子继承了他的face和height。
但是life应该是自己的。
后来翠山自刎而死，无忌也变成dead状态了。这就是浅拷贝，无忌用的life引用的翠山的life对象。
Father类：
@Data public class Father { private String face; // 长相 private String height; // 身高 private Life life; // 生命 } Life 类：
@Data public class Life { private String status; } Son类和main方法：
@Data public class Son extends Father{ private Life life; public static void main(String[] args) { Father cuishan = new Father(); cuishan." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/5cb073c071d9522e4b0624497aa70977/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-18T23:30:05+08:00" />
<meta property="article:modified_time" content="2020-03-18T23:30:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">BeanUtils.copyProperties的使用(深拷贝，浅拷贝)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_2" rel="nofollow">场景</a></li><li><ul><li><a href="#BeanUtils_8" rel="nofollow">BeanUtils是深拷贝，还是浅拷贝?</a></li></ul> 
   </li><li><a href="#BeanUtils_12" rel="nofollow">什么情况适合用BeanUtils</a></li><li><ul><li><a href="#BeanUtils_15" rel="nofollow">有子对象就一定不能用BeanUtils么</a></li></ul> 
   </li><li><a href="#_22" rel="nofollow">代码例子</a></li><li><ul><li><a href="#dest_src____srcdest_96" rel="nofollow">dest ,src 还是 src,dest</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<br> 这里说的是spring的BeanUtils.copyProperties。 
<p></p> 
<h3><a id="_2"></a>场景</h3> 
<p>开发中经常遇到，把父类的属性拷贝到子类中。通常有2种方法：<br> 1、一个一个set<br> 2、用BeanUtils.copyProperties<br> 很显然BeanUtils更加方便，也美观很多。<br> 那么任何情况都能使用BeanUtils么，当然不是。要先了解他。</p> 
<h4><a id="BeanUtils_8"></a>BeanUtils是深拷贝，还是浅拷贝?</h4> 
<p>是浅拷贝。<br> 浅拷贝： 只是调用子对象的set方法，并没有将所有属性拷贝。(也就是说，引用的一个内存地址)<br> 深拷贝： 将子对象的属性也拷贝过去。</p> 
<h3><a id="BeanUtils_12"></a>什么情况适合用BeanUtils</h3> 
<p>如果都是单一的属性，那么不涉及到深拷贝的问题，适合用BeanUtils。</p> 
<h4><a id="BeanUtils_15"></a>有子对象就一定不能用BeanUtils么</h4> 
<p>并不绝对，这个要区分考虑：<br> 1、子对象还要改动。<br> 2、子对象不怎么改动。<br> 虽然有子对象，但是子对象并不怎么改动，那么用BeanUtils也是没问题的。</p> 
<h3><a id="_22"></a>代码例子</h3> 
<p>下面用代码说明下。<br> 翠山有个儿子无忌，儿子继承了他的face和height。<br> 但是life应该是自己的。<br> 后来翠山自刎而死，无忌也变成dead状态了。这就是浅拷贝，无忌用的life引用的翠山的life对象。</p> 
<p>Father类：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> String face<span class="token punctuation">;</span> <span class="token comment">// 长相</span>
    <span class="token keyword">private</span> String height<span class="token punctuation">;</span> <span class="token comment">// 身高</span>
    <span class="token keyword">private</span> Life life<span class="token punctuation">;</span> <span class="token comment">// 生命</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Life 类：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Life</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> String status<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Son类和main方法：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> Life life<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Father cuishan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cuishan<span class="token punctuation">.</span><span class="token function">setFace</span><span class="token punctuation">(</span><span class="token string">"handsome"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cuishan<span class="token punctuation">.</span><span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token string">"180"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Life cuishanLife <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Life</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cuishanLife<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token string">"alive"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cuishan<span class="token punctuation">.</span><span class="token function">setLife</span><span class="token punctuation">(</span>cuishanLife<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Son wuji<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        BeanUtils<span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>cuishan<span class="token punctuation">,</span>wuji<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//        Life wujiLife = wuji.getLife();</span>
<span class="token comment">//        wujiLife.setStatus("alive");</span>
<span class="token comment">//        wuji.setLife(wujiLife);</span>
<span class="token comment">//        cuishanLife.setStatus("dead"); // 翠山后来自刎了</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>cuishan<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>wuji<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上面注释出的代码可以如下替换：<br> case1和case2还是受浅拷贝的影响，case3不受。<br> case1： 翠山自刎，无忌也挂了</p> 
<pre><code class="prism language-java"><span class="token comment">//        Life wujiLife = wuji.getLife();</span>
<span class="token comment">//        wujiLife.setStatus("alive");</span>
<span class="token comment">//        wuji.setLife(wujiLife);</span>
<span class="token comment">//        cuishanLife.setStatus("dead"); // 翠山后来自刎了</span>
</code></pre> 
<p>case2： 翠山自刎，无忌设置或者，翠山也活了</p> 
<pre><code class="prism language-java"><span class="token comment">//        cuishanLife.setStatus("dead"); // 翠山后来自刎了</span>
<span class="token comment">//        Life wujiLife = wuji.getLife();</span>
<span class="token comment">//        wujiLife.setStatus("alive");</span>
<span class="token comment">//        wuji.setLife(wujiLife);</span>
</code></pre> 
<p>case3： 翠山和无忌互不影响</p> 
<pre><code class="prism language-java">		cuishanLife<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token string">"dead"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 翠山自刎了  该行放在上下均可</span>
        <span class="token comment">// 无忌用个新对象 不受翠山影响了</span>
        Life wujiLife <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Life</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        wujiLife<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token string">"alive"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        wuji<span class="token punctuation">.</span><span class="token function">setLife</span><span class="token punctuation">(</span>wujiLife<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="dest_src____srcdest_96"></a>dest ,src 还是 src,dest</h4> 
<p>笔者在这个爬过坑。<br> 因为记得有beanutils这个工具，直接import了。<br> 发现有copyProperty和copyProperties。 看了下发现是 dest，src ，于是果断使用，结果发现参数没了。</p> 
<p>其实常见的BeanUtils有2个：<br> spring有BeanUtils<br> apache的commons也有BeanUtils。</p> 
<p>区别如下：</p> 
<table><thead><tr><th>–</th><th align="left">spring的BeanUtils</th><th align="left">commons的BeanUtils</th></tr></thead><tbody><tr><td>方法</td><td align="left">copyProperty和copyProperties</td><td align="left">copyProperties</td></tr><tr><td>参数</td><td align="left">src ，dest</td><td align="left">dest，src</td></tr></tbody></table> 
<p>这2个用哪个都行，但是要注意区别。 因为他们2个的src和dest是正好相反的，要特别留意。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9dfba53a4609ff1104dc3fd9c0ca043/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">显式切换，隐式切换</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/027f7d97551b3a92ee2bc5d456d2bd0c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">矩阵内积、外积（克罗内克积）和Hadamard积</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>