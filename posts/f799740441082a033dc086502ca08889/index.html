<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JVM第十七讲：调试排错 - Java 问题排查之Linux命令 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JVM第十七讲：调试排错 - Java 问题排查之Linux命令" />
<meta property="og:description" content="调试排错 - Java 问题排查之Linux命令 本文是JVM第十七讲， Java 问题调试排错。Java 在线问题排查主要分两篇：本文是第一篇，通过linux常用命令排查。
文章目录 调试排错 - Java 问题排查之Linux命令在项目中，日志操作的常用命令1、在终端中登录日志系统2、查看模块位置的指令3、查看错误日志 1、文本操作1.1、文本查找 - grep (常用)1.2、文本分析 - awk (不常用)1.3、文本处理 - sed (不常用) 2、文件操作2.1、文件监听 - tail (常用)2.2、文件查找 - find (常用)2.3、pgm (不常用) 3、查看网络和进程3.1、查看所有网络接口的属性 (常用)3.2、查看防火墙设置 (不常用)3.3、查看路由表 (不常用)3.4、netstat (不常用)3.5、查看所有进程 (常用)3.6、top (常用) 4、查看磁盘和内存相关4.1、查看内存使用 - free -m (常用)4.2、查看各分区使用情况 (常用)4.3、查看指定目录的大小 (常用)4.4、查看内存总量 (常用)4.5、查看空闲内存量 (常用)4.6、查看系统负载磁盘和分区 (常用)4.7、查看系统负载磁盘和分区 (常用)4.8、查看挂接的分区状态 (常用)4.9、查看所有分区 (常用)4.10、查看所有交换分区4.11、查看硬盘大小 5、查看用户和组相关5.1、查看活动用户5.2、查看指定用户信息5.3、查看用户登录日志5.4、查看系统所有用户5.5、查看系统所有组 6、查看服务，模块和包相关7、查看系统，设备，环境信息8、tsar 在项目中，日志操作的常用命令 1、在终端中登录日志系统 账号： ssh developer@172.16.101.123 密码： zcy 日志中心 2、查看模块位置的指令 find -name web-item* 或 find ./ -name item-mi* (模糊搜索以web-item开头的模块) 3、查看错误日志 方式1： tail -f filename（filename为前一个命令查到的路径）方式2：通过 vi filename 来查询 可以更加方便地搜索日志中的关键字 注意事项" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f799740441082a033dc086502ca08889/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-21T23:08:33+08:00" />
<meta property="article:modified_time" content="2023-10-21T23:08:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JVM第十七讲：调试排错 - Java 问题排查之Linux命令</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="__Java_Linux_0"></a>调试排错 - Java 问题排查之Linux命令</h2> 
<blockquote> 
 <p><strong>本文是JVM第十七讲， Java 问题调试排错</strong>。Java 在线问题排查主要分两篇：本文是第一篇，通过linux常用命令排查。</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#__Java_Linux_0" rel="nofollow">调试排错 - Java 问题排查之Linux命令</a></li><li><ul><li><a href="#_4" rel="nofollow">在项目中，日志操作的常用命令</a></li><li><ul><li><a href="#1_5" rel="nofollow">1、在终端中登录日志系统</a></li><li><a href="#2_9" rel="nofollow">2、查看模块位置的指令</a></li><li><a href="#3_13" rel="nofollow">3、查看错误日志</a></li></ul> 
   </li><li><a href="#1_28" rel="nofollow">1、文本操作</a></li><li><ul><li><a href="#11__grep___29" rel="nofollow">1.1、文本查找 - grep (常用)</a></li><li><a href="#12__awk__70" rel="nofollow">1.2、文本分析 - awk (不常用)</a></li><li><a href="#13__sed__102" rel="nofollow">1.3、文本处理 - sed (不常用)</a></li></ul> 
   </li><li><a href="#2_137" rel="nofollow">2、文件操作</a></li><li><ul><li><a href="#21__tail__139" rel="nofollow">2.1、文件监听 - tail (常用)</a></li><li><a href="#22__find__176" rel="nofollow">2.2、文件查找 - find (常用)</a></li><li><a href="#23pgm__194" rel="nofollow">2.3、pgm (不常用)</a></li></ul> 
   </li><li><a href="#3_202" rel="nofollow">3、查看网络和进程</a></li><li><ul><li><a href="#31__204" rel="nofollow">3.1、查看所有网络接口的属性 (常用)</a></li><li><a href="#32__225" rel="nofollow">3.2、查看防火墙设置 (不常用)</a></li><li><a href="#33__239" rel="nofollow">3.3、查看路由表 (不常用)</a></li><li><a href="#34netstat__250" rel="nofollow">3.4、netstat (不常用)</a></li><li><a href="#35__335" rel="nofollow">3.5、查看所有进程 (常用)</a></li><li><a href="#36top__343" rel="nofollow">3.6、top (常用)</a></li></ul> 
   </li><li><a href="#4_362" rel="nofollow">4、查看磁盘和内存相关</a></li><li><ul><li><a href="#41__free_m__364" rel="nofollow">4.1、查看内存使用 - free -m (常用)</a></li><li><a href="#42__373" rel="nofollow">4.2、查看各分区使用情况 (常用)</a></li><li><a href="#43__386" rel="nofollow">4.3、查看指定目录的大小 (常用)</a></li><li><a href="#44__393" rel="nofollow">4.4、查看内存总量 (常用)</a></li><li><a href="#45__400" rel="nofollow">4.5、查看空闲内存量 (常用)</a></li><li><a href="#46__407" rel="nofollow">4.6、查看系统负载磁盘和分区 (常用)</a></li><li><a href="#47__414" rel="nofollow">4.7、查看系统负载磁盘和分区 (常用)</a></li><li><a href="#48__421" rel="nofollow">4.8、查看挂接的分区状态 (常用)</a></li><li><a href="#49__432" rel="nofollow">4.9、查看所有分区 (常用)</a></li><li><a href="#410_448" rel="nofollow">4.10、查看所有交换分区</a></li><li><a href="#411_456" rel="nofollow">4.11、查看硬盘大小</a></li></ul> 
   </li><li><a href="#5_465" rel="nofollow">5、查看用户和组相关</a></li><li><ul><li><a href="#51_467" rel="nofollow">5.1、查看活动用户</a></li><li><a href="#52_476" rel="nofollow">5.2、查看指定用户信息</a></li><li><a href="#53_483" rel="nofollow">5.3、查看用户登录日志</a></li><li><a href="#54_495" rel="nofollow">5.4、查看系统所有用户</a></li><li><a href="#55_506" rel="nofollow">5.5、查看系统所有组</a></li></ul> 
   </li><li><a href="#6_512" rel="nofollow">6、查看服务，模块和包相关</a></li><li><a href="#7_531" rel="nofollow">7、查看系统，设备，环境信息</a></li><li><a href="#8tsar_554" rel="nofollow">8、tsar</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_4"></a>在项目中，日志操作的常用命令</h3> 
<h4><a id="1_5"></a>1、在终端中登录日志系统</h4> 
<ul><li>账号： ssh developer@172.16.101.123 密码： zcy 日志中心</li></ul> 
<h4><a id="2_9"></a>2、查看模块位置的指令</h4> 
<ul><li>find -name web-item* 或 find ./ -name item-mi* (模糊搜索以web-item开头的模块)</li></ul> 
<h4><a id="3_13"></a>3、查看错误日志</h4> 
<ul><li>方式1： tail -f filename（filename为前一个命令查到的路径）</li><li>方式2：通过 vi filename 来查询 可以更加方便地搜索日志中的关键字</li></ul> 
<p>注意事项</p> 
<ul><li>日志操作命令仅能查看线下环境(dev-debug/test)，staging和真线必须使用“日志平台”进行查看日志平台地址</li></ul> 
<p><strong>常用vi命令</strong></p> 
<ul><li><strong>shift+g 查看最新日志 ?关键字 结合 n /n 关键字搜索</strong></li></ul> 
<p>具体可以参考这篇文章：<a href="https://blog.csdn.net/qq_28959087/article/details/126538914">开发工具篇第九讲：菜鸟入坑指南</a></p> 
<h3><a id="1_28"></a>1、文本操作</h3> 
<h4><a id="11__grep___29"></a>1.1、文本查找 - grep (常用)</h4> 
<p>grep常用命令：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 基本使用</span>
<span class="token function">grep</span> yoursearchkeyword file.txt     <span class="token comment">#文件查找</span>
<span class="token function">grep</span> <span class="token string">'KeyWord otherKeyWord'</span> file.txt cpf.txt <span class="token comment">#多文件查找, 含空格加引号</span>
<span class="token function">grep</span> <span class="token string">'KeyWord'</span> /home/admin <span class="token parameter variable">-r</span> <span class="token parameter variable">-n</span> <span class="token comment">#目录下查找所有符合关键字的文件</span>
<span class="token function">grep</span> <span class="token string">'keyword'</span> /home/admin <span class="token parameter variable">-r</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-i</span> <span class="token comment"># -i 忽略大小写</span>
<span class="token function">grep</span> <span class="token string">'KeyWord'</span> /home/admin <span class="token parameter variable">-r</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">--include</span> *.<span class="token punctuation">{<!-- --></span>vm,java<span class="token punctuation">}</span> <span class="token comment">#指定文件后缀</span>
<span class="token function">grep</span> <span class="token string">'KeyWord'</span> /home/admin <span class="token parameter variable">-r</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">--exclude</span> *.<span class="token punctuation">{<!-- --></span>vm,java<span class="token punctuation">}</span> <span class="token comment">#反匹配</span>

<span class="token comment"># cat + grep</span>
<span class="token function">cat</span> file.txt <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> keyword <span class="token comment"># 查找所有keyword且不分大小写</span>
<span class="token function">cat</span> file.txt <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-c</span> <span class="token string">'KeyWord'</span> <span class="token comment"># 统计Keyword次数</span>

<span class="token comment"># seq + grep</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">5</span> <span class="token parameter variable">-A</span> <span class="token number">3</span>    <span class="token comment">#上匹配</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">5</span> <span class="token parameter variable">-B</span> <span class="token number">3</span>    <span class="token comment">#下匹配</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">5</span> <span class="token parameter variable">-C</span> <span class="token number">3</span>    <span class="token comment">#上下匹配，平时用这个就妥了</span>
</code></pre> 
<p>Grep的参数：</p> 
<pre><code class="prism language-bash"><span class="token parameter variable">--color</span><span class="token operator">=</span>auto：显示颜色<span class="token punctuation">;</span>
-i, --ignore-case：忽略字符大小写<span class="token punctuation">;</span>
-o, --only-matching：只显示匹配到的部分<span class="token punctuation">;</span>
-n, --line-number：显示行号<span class="token punctuation">;</span>
-v, --invert-match：反向显示,显示未匹配到的行<span class="token punctuation">;</span>
-E, --extended-regexp：支持使用扩展的正则表达式<span class="token punctuation">;</span>
-q, --quiet, --silent：静默模式,即不输出任何信息<span class="token punctuation">;</span>
-w, --word-regexp：整行匹配整个单词<span class="token punctuation">;</span>
-c, --count：统计匹配到的行数<span class="token punctuation">;</span> print a count of matching lines<span class="token punctuation">;</span>

-B, --before-context<span class="token operator">=</span>NUM：print NUM lines of leading context   后<span class="token comment">#行 </span>
-A, --after-context<span class="token operator">=</span>NUM：print NUM lines of trailing context   前<span class="token comment">#行 </span>
-C, <span class="token parameter variable">--context</span><span class="token operator">=</span>NUM：print NUM lines of output context           前后各<span class="token comment">#行 </span>
</code></pre> 
<h4><a id="12__awk__70"></a>1.2、文本分析 - awk (不常用)</h4> 
<p>awk基本命令：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 基本使用</span>
<span class="token function">awk</span> <span class="token string">'{print $4,$6}'</span> file.txt
<span class="token function">awk</span> <span class="token string">'{print NR,$0}'</span> file.txt cpf.txt
<span class="token function">awk</span> <span class="token string">'{print FNR,$0}'</span> file.txt cpf.txt
<span class="token function">awk</span> <span class="token string">'{print FNR,FILENAME,$0}'</span> file.txt cpf.txt
<span class="token function">awk</span> <span class="token string">'{print FILENAME,"NR="NR,"FNR="FNR,"$"NF"="$NF}'</span> file.txt cpf.txt
<span class="token builtin class-name">echo</span> <span class="token number">1</span>:2:3:4 <span class="token operator">|</span> <span class="token function">awk</span> -F: <span class="token string">'{print $1,$2,$3,$4}'</span>

<span class="token comment"># 匹配</span>
<span class="token function">awk</span> <span class="token string">'/ldb/ {print}'</span> file.txt   <span class="token comment">#匹配ldb</span>
<span class="token function">awk</span> <span class="token string">'!/ldb/ {print}'</span> file.txt  <span class="token comment">#不匹配ldb</span>
<span class="token function">awk</span> <span class="token string">'/ldb/ &amp;&amp; /LISTEN/ {print}'</span> file.txt   <span class="token comment">#匹配ldb和LISTEN</span>
<span class="token function">awk</span> <span class="token string">'$5 ~ /ldb/ {print}'</span> file.txt <span class="token comment">#第五列匹配ldb</span>
</code></pre> 
<p>内建变量</p> 
<pre><code class="prism language-bash"><span class="token variable"><span class="token variable">`</span>NR<span class="token variable">`</span></span><span class="token builtin class-name">:</span> NR表示从awk开始执行后，按照记录分隔符读取的数据次数，默认的记录分隔符为换行符，因此默认的就是读取的数据行数，NR可以理解为Number of Record的缩写。

<span class="token variable"><span class="token variable">`</span>FNR<span class="token variable">`</span></span><span class="token builtin class-name">:</span> 在awk处理多个输入文件的时候，在处理完第一个文件后，NR并不会从1开始，而是继续累加，因此就出现了FNR，每当处理一个新文件的时候，FNR就从1开始计数，FNR可以理解为File Number of Record。

<span class="token variable"><span class="token variable">`</span>NF<span class="token variable">`</span></span><span class="token builtin class-name">:</span> NF表示目前的记录被分割的字段的数目，NF可以理解为Number of Field。
</code></pre> 
<p>更多请参考：<a href="https://www.runoob.com/linux/linux-comm-awk.html" rel="nofollow">Linux awk 命令</a></p> 
<h4><a id="13__sed__102"></a>1.3、文本处理 - sed (不常用)</h4> 
<p>sed常用：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 文本打印</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'3p'</span> file.log <span class="token comment">#只打印第三行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'$p'</span> file.log <span class="token comment">#只打印最后一行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'3,9p'</span> file.log <span class="token comment">#只查看文件的第3行到第9行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-e</span> <span class="token string">'3,9p'</span> <span class="token parameter variable">-e</span> <span class="token string">'='</span> file.log <span class="token comment">#打印3-9行，并显示行号</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/root/p'</span> file.log <span class="token comment">#显示包含root的行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/hhh/,/omc/p'</span> file.log <span class="token comment"># 显示包含"hhh"的行到包含"omc"的行之间的行</span>

<span class="token comment"># 文本替换</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/root/world/g'</span> file.log <span class="token comment"># 用 world 替换file.log文件中的root; s==search  查找并替换, g==global  全部替换, -i: implace</span>

<span class="token comment"># 文本插入</span>
<span class="token function">sed</span> <span class="token string">'1,4i hahaha'</span> file.log <span class="token comment"># 在文件第一行和第四行的每行下面添加hahaha</span>
<span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'1i happy'</span> <span class="token parameter variable">-e</span> <span class="token string">'$a new year'</span> file.log  <span class="token comment">#【界面显示】在文件第一行添加happy,文件结尾添加new year</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-e</span> <span class="token string">'1i happy'</span> <span class="token parameter variable">-e</span> <span class="token string">'$a new year'</span> file.log <span class="token comment">#【真实写入文件】在文件第一行添加happy,文件结尾添加new year</span>

<span class="token comment"># 文本删除</span>
<span class="token function">sed</span>  <span class="token string">'3,9d'</span> file.log <span class="token comment"># 删除第3到第9行,只是不显示而已</span>
<span class="token function">sed</span> <span class="token string">'/hhh/,/omc/d'</span> file.log <span class="token comment"># 删除包含"hhh"的行到包含"omc"的行之间的行</span>
<span class="token function">sed</span> <span class="token string">'/omc/,10d'</span> file.log <span class="token comment"># 删除包含"omc"的行到第十行的内容</span>

<span class="token comment"># 与find结合</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span>  <span class="token string">"*.txt"</span> <span class="token operator">|</span><span class="token function">xargs</span>   <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/hhhh/\hHHh/g'</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span>  <span class="token string">"*.txt"</span> <span class="token operator">|</span><span class="token function">xargs</span>   <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s#hhhh#hHHh#g'</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span>  <span class="token string">"*.txt"</span> <span class="token parameter variable">-exec</span> <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/hhhh/\hHHh/g'</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span>  <span class="token string">"*.txt"</span> <span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">cat</span>
</code></pre> 
<p>更多请参考：<a href="https://www.runoob.com/linux/linux-comm-sed.html" rel="nofollow">Linux sed 命令</a> 或者 <a href="https://www.cnblogs.com/ftl1012/p/9250171.html" rel="nofollow">Linux sed命令详解</a></p> 
<h3><a id="2_137"></a>2、文件操作</h3> 
<h4><a id="21__tail__139"></a>2.1、文件监听 - tail (常用)</h4> 
<p>最常用的 <code>tail -f filename</code></p> 
<pre><code class="prism language-bash"><span class="token comment"># 基本使用</span>
<span class="token function">tail</span> <span class="token parameter variable">-f</span> file.log <span class="token comment"># 循环监听文件</span>
<span class="token function">tail</span> <span class="token parameter variable">-300f</span> file.log <span class="token comment"># 倒数300行并追踪文件</span>
<span class="token function">tail</span> +20 file.log <span class="token comment"># 从第20行至文件末尾显示文件内容</span>

<span class="token comment"># tail f使用</span>
<span class="token function">tail</span> f file.log <span class="token comment">#等同于tail -f -n 10 打印最后10行，然后追踪文件</span>
</code></pre> 
<p>tail -f 与tail F 与tailf三者区别</p> 
<pre><code class="prism language-bash"><span class="token variable"><span class="token variable">`</span><span class="token function">tail</span>  <span class="token parameter variable">-f</span><span class="token variable">`</span></span> 等于--follow<span class="token operator">=</span>descriptor，根据文件描述进行追踪，当文件改名或删除后，停止追踪。

<span class="token variable"><span class="token variable">`</span><span class="token function">tail</span> <span class="token parameter variable">-F</span><span class="token variable">`</span></span> 等于 <span class="token parameter variable">--follow</span><span class="token operator">=</span>name <span class="token operator">==</span>retry，根据文件名字进行追踪，当文件改名或删除后，保持重试，当有新的文件和他同名时，继续追踪

<span class="token variable"><span class="token variable">`</span><span class="token function">tail</span> f<span class="token variable">`</span></span> 等于tail <span class="token parameter variable">-f</span> <span class="token parameter variable">-n</span> <span class="token number">10</span>（tail -f或-F默认也是打印最后10行，然后追踪文件），与tail -f不同的是，如果文件不增长，它不会去访问磁盘文件，所以 tailf 特别适合那些便携机上跟踪日志文件，因为它减少了磁盘访问，可以省电。
</code></pre> 
<p>tail的参数</p> 
<pre><code class="prism language-bash"><span class="token parameter variable">-f</span> 循环读取
<span class="token parameter variable">-q</span> 不显示处理信息
<span class="token parameter variable">-v</span> 显示详细的处理信息
-c<span class="token operator">&lt;</span>数目<span class="token operator">&gt;</span> 显示的字节数
-n<span class="token operator">&lt;</span>行数<span class="token operator">&gt;</span> 显示文件的尾部 n 行内容
<span class="token parameter variable">--pid</span><span class="token operator">=</span>PID 与-f合用,表示在进程ID,PID死掉之后结束
-q, --quiet, <span class="token parameter variable">--silent</span> 从不输出给出文件名的首部
-s, --sleep-interval<span class="token operator">=</span>S 与-f合用,表示在每次反复的间隔休眠S秒
</code></pre> 
<h4><a id="22__find__176"></a>2.2、文件查找 - find (常用)</h4> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token parameter variable">-u</span> admin <span class="token function">find</span> /home/admin /tmp /usr <span class="token parameter variable">-name</span> <span class="token punctuation">\</span>*.log<span class="token punctuation">(</span>多个目录去找<span class="token punctuation">)</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-iname</span> <span class="token punctuation">\</span>*.txt<span class="token punctuation">(</span>大小写都匹配<span class="token punctuation">)</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-type</span> d<span class="token punctuation">(</span>当前目录下的所有子目录<span class="token punctuation">)</span>
<span class="token function">find</span> /usr <span class="token parameter variable">-type</span> l<span class="token punctuation">(</span>当前目录下所有的符号链接<span class="token punctuation">)</span>
<span class="token function">find</span> /usr <span class="token parameter variable">-type</span> l <span class="token parameter variable">-name</span> <span class="token string">"z*"</span> -ls<span class="token punctuation">(</span>符号链接的详细信息 eg:inode,目录<span class="token punctuation">)</span>
<span class="token function">find</span> /home/admin <span class="token parameter variable">-size</span> +250000k<span class="token punctuation">(</span>超过250000k的文件，当然+改成-就是小于了<span class="token punctuation">)</span>
<span class="token function">find</span> /home/admin f <span class="token parameter variable">-perm</span> <span class="token number">777</span> <span class="token parameter variable">-exec</span> <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>按照权限查询文件<span class="token punctuation">)</span>
<span class="token function">find</span> /home/admin <span class="token parameter variable">-atime</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>天内访问过的文件
<span class="token function">find</span> /home/admin <span class="token parameter variable">-ctime</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>天内状态改变过的文件    
<span class="token function">find</span> /home/admin <span class="token parameter variable">-mtime</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>天内修改过的文件
<span class="token function">find</span> /home/admin <span class="token parameter variable">-amin</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>分钟内访问过的文件
<span class="token function">find</span> /home/admin <span class="token parameter variable">-cmin</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>分钟内状态改变过的文件    
<span class="token function">find</span> /home/admin <span class="token parameter variable">-mmin</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>分钟内修改过的文件
</code></pre> 
<h4><a id="23pgm__194"></a>2.3、pgm (不常用)</h4> 
<p>批量查询 vm-shopbase 满足条件的日志</p> 
<pre><code class="prism language-bash">pgm <span class="token parameter variable">-A</span> <span class="token parameter variable">-f</span> vm-shopbase <span class="token string">'cat /home/admin/shopbase/logs/shopbase.log.2017-01-17|grep 2069861630'</span>
</code></pre> 
<h3><a id="3_202"></a>3、查看网络和进程</h3> 
<h4><a id="31__204"></a>3.1、查看所有网络接口的属性 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># ifconfig</span>
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.31</span>.165.194  netmask <span class="token number">255.255</span>.240.0  broadcast <span class="token number">172.31</span>.175.255
        ether 00:16:3e:08:c1:ea  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">21213152</span>  bytes <span class="token number">2812084823</span> <span class="token punctuation">(</span><span class="token number">2.6</span> GiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">25264438</span>  bytes <span class="token number">46566724676</span> <span class="token punctuation">(</span><span class="token number">43.3</span> GiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">&gt;</span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">502</span>  bytes <span class="token number">86350</span> <span class="token punctuation">(</span><span class="token number">84.3</span> KiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">502</span>  bytes <span class="token number">86350</span> <span class="token punctuation">(</span><span class="token number">84.3</span> KiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>
</code></pre> 
<h4><a id="32__225"></a>3.2、查看防火墙设置 (不常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># iptables -L</span>
Chain INPUT <span class="token punctuation">(</span>policy ACCEPT<span class="token punctuation">)</span>
target     prot opt <span class="token builtin class-name">source</span>               destination

Chain FORWARD <span class="token punctuation">(</span>policy ACCEPT<span class="token punctuation">)</span>
target     prot opt <span class="token builtin class-name">source</span>               destination

Chain OUTPUT <span class="token punctuation">(</span>policy ACCEPT<span class="token punctuation">)</span>
target     prot opt <span class="token builtin class-name">source</span>               destination
</code></pre> 
<h4><a id="33__239"></a>3.3、查看路由表 (不常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># route -n</span>
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
<span class="token number">0.0</span>.0.0         <span class="token number">172.31</span>.175.253  <span class="token number">0.0</span>.0.0         UG    <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> eth0
<span class="token number">169.254</span>.0.0     <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.0.0     U     <span class="token number">1002</span>   <span class="token number">0</span>        <span class="token number">0</span> eth0
<span class="token number">172.31</span>.160.0    <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.240.0   U     <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> eth0
</code></pre> 
<h4><a id="34netstat__250"></a>3.4、netstat (不常用)</h4> 
<p>查看所有监听端口</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># netstat -lntp</span>
Active Internet connections <span class="token punctuation">(</span>only servers<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:443             <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">970</span>/nginx: master p
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:9999            <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">1249</span>/java
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:80              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">970</span>/nginx: master p
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:22              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">1547</span>/sshd
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::3306                 :::*                    LISTEN      <span class="token number">1894</span>/mysqld
</code></pre> 
<p>查看所有已经建立的连接</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># netstat -antp</span>
Active Internet connections <span class="token punctuation">(</span>servers and established<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:443             <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">970</span>/nginx: master p
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:9999            <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">1249</span>/java
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:80              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">970</span>/nginx: master p
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:22              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">1547</span>/sshd
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">172.31</span>.165.194:53874    <span class="token number">100.100</span>.30.25:80        ESTABLISHED <span class="token number">18041</span>/AliYunDun
tcp        <span class="token number">0</span>     <span class="token number">64</span> <span class="token number">172.31</span>.165.194:22       xxx.194.1.200:2649      ESTABLISHED <span class="token number">32516</span>/sshd: root@pt
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::3306                 :::*                    LISTEN      <span class="token number">1894</span>/m
</code></pre> 
<p>查看当前连接</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># netstat -nat|awk  '{print $6}'|sort|uniq -c|sort -rn</span>
      <span class="token number">5</span> LISTEN
      <span class="token number">2</span> ESTABLISHED
      <span class="token number">1</span> Foreign
      <span class="token number">1</span> established<span class="token punctuation">)</span>
</code></pre> 
<p>查看网络统计信息进程</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># netstat -s</span>
Ip:
    <span class="token number">21017132</span> total packets received
    <span class="token number">0</span> forwarded
    <span class="token number">0</span> incoming packets discarded
    <span class="token number">21017131</span> incoming packets delivered
    <span class="token number">25114367</span> requests sent out
    <span class="token number">324</span> dropped because of missing route
Icmp:
    <span class="token number">18088</span> ICMP messages received
    <span class="token number">692</span> input ICMP message failed.
    ICMP input histogram:
        destination unreachable: <span class="token number">4241</span>
        <span class="token function">timeout</span> <span class="token keyword">in</span> transit: <span class="token number">19</span>
        <span class="token builtin class-name">echo</span> requests: <span class="token number">13791</span>
        <span class="token builtin class-name">echo</span> replies: <span class="token number">4</span>
        timestamp request: <span class="token number">33</span>
    <span class="token number">13825</span> ICMP messages sent
    <span class="token number">0</span> ICMP messages failed
    ICMP output histogram:
        destination unreachable: <span class="token number">1</span>
        <span class="token builtin class-name">echo</span> replies: <span class="token number">13791</span>
        timestamp replies: <span class="token number">33</span>
IcmpMsg:
        InType0: <span class="token number">4</span>
        InType3: <span class="token number">4241</span>
        InType8: <span class="token number">13791</span>
        InType11: <span class="token number">19</span>
        InType13: <span class="token number">33</span>
        OutType0: <span class="token number">13791</span>
        OutType3: <span class="token number">1</span>
        OutType14: <span class="token number">33</span>
Tcp:
    <span class="token number">12210</span> active connections openings
    <span class="token number">208820</span> passive connection openings
    <span class="token number">54198</span> failed connection attempts
    <span class="token number">9805</span> connection resets received
<span class="token punctuation">..</span>.
</code></pre> 
<p>netstat 请参考这篇文章: <a href="https://www.cnblogs.com/ftl1012/p/netstat.html" rel="nofollow">Linux netstat命令详解</a></p> 
<h4><a id="35__335"></a>3.5、查看所有进程 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep java</span>
root      <span class="token number">1249</span>     <span class="token number">1</span>  <span class="token number">0</span> Nov04 ?        00:58:05 <span class="token function">java</span> <span class="token parameter variable">-jar</span> /opt/tech_doc/bin/tech_arch-0.0.1-RELEASE.jar <span class="token parameter variable">--server.port</span><span class="token operator">=</span><span class="token number">9999</span>
root     <span class="token number">32718</span> <span class="token number">32518</span>  <span class="token number">0</span> 08:36 pts/0    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto <span class="token function">java</span>
</code></pre> 
<h4><a id="36top__343"></a>3.6、top (常用)</h4> 
<p>top除了看一些基本信息之外，剩下的就是配合来查询vm的各种问题了</p> 
<pre><code class="prism language-bash"><span class="token comment"># top -H -p pid</span>
<span class="token function">top</span> - 08:37:51 up <span class="token number">45</span> days, <span class="token number">18</span>:45,  <span class="token number">1</span> user,  load average: <span class="token number">0.01</span>, <span class="token number">0.03</span>, <span class="token number">0.05</span>
Threads:  <span class="token number">28</span> total,   <span class="token number">0</span> running,  <span class="token number">28</span> sleeping,   <span class="token number">0</span> stopped,   <span class="token number">0</span> zombie
%Cpu<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:  <span class="token number">0.7</span> us,  <span class="token number">0.7</span> sy,  <span class="token number">0.0</span> ni, <span class="token number">98.6</span> id,  <span class="token number">0.0</span> wa,  <span class="token number">0.0</span> hi,  <span class="token number">0.0</span> si,  <span class="token number">0.0</span> st
KiB Mem <span class="token builtin class-name">:</span>  <span class="token number">1882088</span> total,    <span class="token number">74608</span> free,   <span class="token number">202228</span> used,  <span class="token number">1605252</span> buff/cache
KiB Swap:  <span class="token number">2097148</span> total,  <span class="token number">1835392</span> free,   <span class="token number">261756</span> used.  <span class="token number">1502036</span> avail Mem

  PID <span class="token environment constant">USER</span>      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND
 <span class="token number">1347</span> root      <span class="token number">20</span>   <span class="token number">0</span> <span class="token number">2553808</span> <span class="token number">113752</span>   <span class="token number">1024</span> S  <span class="token number">0.3</span>  <span class="token number">6.0</span>  <span class="token number">48</span>:46.74 VM Periodic Tas
 <span class="token number">1249</span> root      <span class="token number">20</span>   <span class="token number">0</span> <span class="token number">2553808</span> <span class="token number">113752</span>   <span class="token number">1024</span> S  <span class="token number">0.0</span>  <span class="token number">6.0</span>   <span class="token number">0</span>:00.00 <span class="token function">java</span>
 <span class="token number">1289</span> root      <span class="token number">20</span>   <span class="token number">0</span> <span class="token number">2553808</span> <span class="token number">113752</span>   <span class="token number">1024</span> S  <span class="token number">0.0</span>  <span class="token number">6.0</span>   <span class="token number">0</span>:03.74 <span class="token function">java</span>
<span class="token punctuation">..</span>.
</code></pre> 
<h3><a id="4_362"></a>4、查看磁盘和内存相关</h3> 
<h4><a id="41__free_m__364"></a>4.1、查看内存使用 - free -m (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># free -m</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:           <span class="token number">1837</span>         <span class="token number">196</span>         <span class="token number">824</span>           <span class="token number">0</span>         <span class="token number">816</span>        <span class="token number">1469</span>
Swap:          <span class="token number">2047</span>         <span class="token number">255</span>        <span class="token number">1792</span>
</code></pre> 
<h4><a id="42__373"></a>4.2、查看各分区使用情况 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># df -h</span>
Filesystem      Size  Used Avail Use% Mounted on
devtmpfs        909M     <span class="token number">0</span>  909M   <span class="token number">0</span>% /dev
tmpfs           919M     <span class="token number">0</span>  919M   <span class="token number">0</span>% /dev/shm
tmpfs           919M  452K  919M   <span class="token number">1</span>% /run
tmpfs           919M     <span class="token number">0</span>  919M   <span class="token number">0</span>% /sys/fs/cgroup
/dev/vda1        40G   15G   23G  <span class="token number">40</span>% /
tmpfs           184M     <span class="token number">0</span>  184M   <span class="token number">0</span>% /run/user/0
</code></pre> 
<h4><a id="43__386"></a>4.3、查看指定目录的大小 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># du -sh</span>
803M
</code></pre> 
<h4><a id="44__393"></a>4.4、查看内存总量 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># grep MemTotal /proc/meminfo</span>
MemTotal:        <span class="token number">1882088</span> kB
</code></pre> 
<h4><a id="45__400"></a>4.5、查看空闲内存量 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># grep MemFree /proc/meminfo</span>
MemFree:           <span class="token number">74120</span> kB
</code></pre> 
<h4><a id="46__407"></a>4.6、查看系统负载磁盘和分区 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># grep MemFree /proc/meminfo</span>
MemFree:           <span class="token number">74120</span> kB
</code></pre> 
<h4><a id="47__414"></a>4.7、查看系统负载磁盘和分区 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/loadavg</span>
<span class="token number">0.01</span> <span class="token number">0.04</span> <span class="token number">0.05</span> <span class="token number">2</span>/174 <span class="token number">32751</span>
</code></pre> 
<h4><a id="48__421"></a>4.8、查看挂接的分区状态 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># mount | column -t</span>
sysfs       on  /sys                             <span class="token builtin class-name">type</span>  sysfs       <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
proc        on  /proc                            <span class="token builtin class-name">type</span>  proc        <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
devtmpfs    on  /dev                             <span class="token builtin class-name">type</span>  devtmpfs    <span class="token punctuation">(</span>rw,nosuid,size<span class="token operator">=</span>930732k,nr_inodes<span class="token operator">=</span><span class="token number">232683</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
securityfs  on  /sys/kernel/security             <span class="token builtin class-name">type</span>  securityfs  <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
<span class="token punctuation">..</span>.
</code></pre> 
<h4><a id="49__432"></a>4.9、查看所有分区 (常用)</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># fdisk -l</span>

Disk /dev/vda: <span class="token number">42.9</span> GB, <span class="token number">42949672960</span> bytes, <span class="token number">83886080</span> sectors
Units <span class="token operator">=</span> sectors of <span class="token number">1</span> * <span class="token number">512</span> <span class="token operator">=</span> <span class="token number">512</span> bytes
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: <span class="token number">512</span> bytes / <span class="token number">512</span> bytes
I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: <span class="token number">512</span> bytes / <span class="token number">512</span> bytes
Disk label type: dos
Disk identifier: 0x0008d73a

   Device Boot      Start         End      Blocks   Id  System
/dev/vda1   *        <span class="token number">2048</span>    <span class="token number">83884031</span>    <span class="token number">41940992</span>   <span class="token number">83</span>  Linux
</code></pre> 
<h4><a id="410_448"></a>4.10、查看所有交换分区</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># swapon -s</span>
Filename                                Type            Size    Used    Priority
/etc/swap                               <span class="token function">file</span>    <span class="token number">2097148</span> <span class="token number">261756</span>  <span class="token parameter variable">-2</span>
</code></pre> 
<h4><a id="411_456"></a>4.11、查看硬盘大小</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># fdisk -l |grep Disk</span>
Disk /dev/vda: <span class="token number">42.9</span> GB, <span class="token number">42949672960</span> bytes, <span class="token number">83886080</span> sectors
Disk label type: dos
Disk identifier: 0x0008d73a
</code></pre> 
<h3><a id="5_465"></a>5、查看用户和组相关</h3> 
<h4><a id="51_467"></a>5.1、查看活动用户</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># w</span>
 08:47:20 up <span class="token number">45</span> days, <span class="token number">18</span>:54,  <span class="token number">1</span> user,  load average: <span class="token number">0.01</span>, <span class="token number">0.03</span>, <span class="token number">0.05</span>
<span class="token environment constant">USER</span>     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     pts/0    xxx.194.1.200    08:32    <span class="token number">0</span>.00s  <span class="token number">0</span>.32s  <span class="token number">0</span>.32s <span class="token parameter variable">-bash</span>
</code></pre> 
<h4><a id="52_476"></a>5.2、查看指定用户信息</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="53_483"></a>5.3、查看用户登录日志</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># last</span>
root     pts/0        xxx.194.1.200    Fri Dec <span class="token number">20</span> 08:32   still logged <span class="token keyword">in</span>
root     pts/0        xxx.73.164.60     Thu Dec <span class="token number">19</span> <span class="token number">21</span>:47 - 00:28  <span class="token punctuation">(</span>02:41<span class="token punctuation">)</span>
root     pts/0        xxx.106.236.255  Thu Dec <span class="token number">19</span> <span class="token number">16</span>:00 - <span class="token number">18</span>:24  <span class="token punctuation">(</span>02:23<span class="token punctuation">)</span>
root     pts/1        xxx.194.3.173    Tue Dec <span class="token number">17</span> <span class="token number">13</span>:35 - <span class="token number">17</span>:37  <span class="token punctuation">(</span>04:01<span class="token punctuation">)</span>
root     pts/0        xxx.194.3.173    Tue Dec <span class="token number">17</span> <span class="token number">13</span>:35 - <span class="token number">17</span>:37  <span class="token punctuation">(</span>04:02<span class="token punctuation">)</span>
<span class="token punctuation">..</span>.
</code></pre> 
<h4><a id="54_495"></a>5.4、查看系统所有用户</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@qiwenjie ~<span class="token punctuation">]</span><span class="token comment"># cut -d: -f1 /etc/passwd</span>
root
bin
daemon
adm
<span class="token punctuation">..</span>.
</code></pre> 
<h4><a id="55_506"></a>5.5、查看系统所有组</h4> 
<pre><code class="prism language-bash"><span class="token function">cut</span> -d: <span class="token parameter variable">-f1</span> /etc/group
</code></pre> 
<h3><a id="6_512"></a>6、查看服务，模块和包相关</h3> 
<pre><code class="prism language-bash"><span class="token comment"># 查看当前用户的计划任务服务</span>
<span class="token function">crontab</span> <span class="token parameter variable">-l</span> 

<span class="token comment"># 列出所有系统服务</span>
<span class="token function">chkconfig</span> –list 

<span class="token comment"># 列出所有启动的系统服务程序</span>
<span class="token function">chkconfig</span> –list <span class="token operator">|</span> <span class="token function">grep</span> on 

<span class="token comment"># 查看所有安装的软件包</span>
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> 

<span class="token comment"># 列出加载的内核模块</span>
lsmod 
</code></pre> 
<h3><a id="7_531"></a>7、查看系统，设备，环境信息</h3> 
<pre><code class="prism language-bash"><span class="token comment"># 常用</span>
<span class="token function">env</span> <span class="token comment"># 查看环境变量资源</span>
<span class="token function">uptime</span> <span class="token comment"># 查看系统运行时间、用户数、负载</span>
lsusb <span class="token parameter variable">-tv</span> <span class="token comment"># 列出所有USB设备的linux系统信息命令</span>
lspci <span class="token parameter variable">-tv</span> <span class="token comment"># 列出所有PCI设备</span>
<span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> /etc/issue <span class="token comment"># 查看操作系统版本，是数字1不是字母L</span>
<span class="token function">uname</span> <span class="token parameter variable">-a</span> <span class="token comment"># 查看内核/操作系统/CPU信息的linux系统信息命令</span>

<span class="token comment"># /proc/</span>
<span class="token function">cat</span> /proc/cpuinfo ：查看CPU相关参数的linux系统命令
<span class="token function">cat</span> /proc/partitions ：查看linux硬盘和分区信息的系统信息命令
<span class="token function">cat</span> /proc/meminfo ：查看linux系统内存信息的linux系统命令
<span class="token function">cat</span> /proc/version ：查看版本，类似uname <span class="token parameter variable">-r</span>
<span class="token function">cat</span> /proc/ioports ：查看设备io端口
<span class="token function">cat</span> /proc/interrupts ：查看中断
<span class="token function">cat</span> /proc/pci ：查看pci设备的信息
<span class="token function">cat</span> /proc/swaps ：查看所有swap分区的信息
<span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">"model name"</span> <span class="token operator">&amp;&amp;</span> <span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">"physical id"</span>
</code></pre> 
<h3><a id="8tsar_554"></a>8、tsar</h3> 
<p>tsar是淘宝开源的的采集工具。很好用, <strong>将历史收集到的数据持久化在磁盘上，所以我们快速来查询历史的系统数据</strong>。当然实时的应用情况也是可以查询的啦。大部分机器上都有安装。</p> 
<pre><code class="prism language-bash">tsar  <span class="token comment">##可以查看最近一天的各项指标</span>
tsar <span class="token parameter variable">--live</span> <span class="token comment">##可以查看实时指标，默认五秒一刷</span>
tsar <span class="token parameter variable">-d</span> <span class="token number">20161218</span> <span class="token comment">##指定查看某天的数据，貌似最多只能看四个月的数据</span>
tsar <span class="token parameter variable">--mem</span>
tsar <span class="token parameter variable">--load</span>
tsar <span class="token parameter variable">--cpu</span> <span class="token comment">##当然这个也可以和-d参数配合来查询某天的单个指标的情况 </span>
</code></pre> 
<p>具体可以看这篇文章：<a href="https://www.jianshu.com/p/5562854ed901" rel="nofollow">linux 淘宝开源监控工具tsar</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d6898e1661a3bb72bf567493ac879820/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32驱动RGB LED彩灯模块闪烁GPIO_Write（）函数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c038f32bd0caa9c7087d7caab2f870fd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Es集群部署</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>