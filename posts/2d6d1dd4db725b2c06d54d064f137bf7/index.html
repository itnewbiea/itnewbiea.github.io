<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【用python将文件夹下面的文件夹里面的文件全部提取出来，并且放到一个新的文件夹】 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【用python将文件夹下面的文件夹里面的文件全部提取出来，并且放到一个新的文件夹】" />
<meta property="og:description" content="文件里面有多个文件，每个文件下面有很多jpg格式的照片，把所有照片提取出来并且放在一个新的文件夹下面。 可以使用Python的os和shutil库来完成这个任务。
比如说：我的faces95文件夹下面有95个文件，每个文件下面有十七到十八个照片不等。
把所有照片提取出来可以用以下python代码：
import os import shutil # 设置原始文件夹和目标文件夹 data_folder = &#39;C:\\Users\\ljx\\Desktop\\Images&#39; photo_folder = &#39;C:\\Users\\ljx\\Desktop\\new_images&#39; # 创建目标文件夹 if not os.path.exists(photo_folder): os.makedirs(photo_folder) # 遍历所有文件夹 for root, dirs, files in os.walk(data_folder): for file in files: # 如果文件是jpg文件 if file.endswith(&#39;.jpg&#39;): # 构造原始文件路径和目标文件路径 src_path = os.path.join(root, file) dst_path = os.path.join(photo_folder, file) # 复制文件到目标文件夹 shutil.copyfile(src_path, dst_path) 需要修改的地方：
data_folder = &#39;&#39;中的改为自己的需要提取的文件路径
photo_folder = &#39;&#39;中的改为自己的需要放置的文件路径，默认是新建文件，自己新建也可以
# 设置原始文件夹和目标文件夹 data_folder = &#39;C:\\Users\\ljx\\Desktop\\faces95&#39; photo_folder = &#39;C:\\Users\\ljx\\Desktop\\new_images&#39; 跑出来的结果在指定的文件路径中查看，比如我的在桌面上，就是
如果文件较大，需要的python运行时间会更长一点，需要耐心等待。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2d6d1dd4db725b2c06d54d064f137bf7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-14T15:14:22+08:00" />
<meta property="article:modified_time" content="2023-10-14T15:14:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【用python将文件夹下面的文件夹里面的文件全部提取出来，并且放到一个新的文件夹】</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="jpg_0"></a>文件里面有多个文件，每个文件下面有很多jpg格式的照片，把所有照片提取出来并且放在一个新的文件夹下面。</h3> 
<p>可以使用Python的os和shutil库来完成这个任务。<br> 比如说：我的faces95文件夹下面有95个文件，每个文件下面有十七到十八个照片不等。<br> <img src="https://images2.imgbox.com/c5/6e/5TjXQ8hu_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a2/c7/3OojmDu8_o.png" alt="在这里插入图片描述"><br> 把所有照片提取出来可以用以下python代码：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> shutil

<span class="token comment"># 设置原始文件夹和目标文件夹</span>
data_folder <span class="token operator">=</span> <span class="token string">'C:\\Users\\ljx\\Desktop\\Images'</span>
photo_folder <span class="token operator">=</span> <span class="token string">'C:\\Users\\ljx\\Desktop\\new_images'</span>

<span class="token comment"># 创建目标文件夹</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>photo_folder<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>photo_folder<span class="token punctuation">)</span>

<span class="token comment"># 遍历所有文件夹</span>
<span class="token keyword">for</span> root<span class="token punctuation">,</span> dirs<span class="token punctuation">,</span> files <span class="token keyword">in</span> os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span>data_folder<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> files<span class="token punctuation">:</span>
        <span class="token comment"># 如果文件是jpg文件</span>
        <span class="token keyword">if</span> <span class="token builtin">file</span><span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 构造原始文件路径和目标文件路径</span>
            src_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token punctuation">)</span>
            dst_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>photo_folder<span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token punctuation">)</span>
            <span class="token comment"># 复制文件到目标文件夹</span>
            shutil<span class="token punctuation">.</span>copyfile<span class="token punctuation">(</span>src_path<span class="token punctuation">,</span> dst_path<span class="token punctuation">)</span>
</code></pre> 
<p>需要修改的地方：<br> <img src="https://images2.imgbox.com/b7/71/vI3ZbZ0H_o.png" alt="在这里插入图片描述"><br> data_folder = '<em><strong>'中的</strong></em>改为自己的需要提取的文件路径<br> photo_folder = '<em><strong>'中的</strong></em>改为自己的需要放置的文件路径，默认是新建文件，自己新建也可以</p> 
<pre><code class="prism language-python"><span class="token comment"># 设置原始文件夹和目标文件夹</span>
data_folder <span class="token operator">=</span> <span class="token string">'C:\\Users\\ljx\\Desktop\\faces95'</span>
photo_folder <span class="token operator">=</span> <span class="token string">'C:\\Users\\ljx\\Desktop\\new_images'</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c9/26/KQxChZQ5_o.png" alt="在这里插入图片描述"><br> 跑出来的结果在指定的文件路径中查看，比如我的在桌面上，就是<br> <img src="https://images2.imgbox.com/f5/df/Q8P1Ed2T_o.png" alt="在这里插入图片描述"><br> 如果文件较大，需要的python运行时间会更长一点，需要耐心等待。<br> 如果你想复制其他类型的文件，你可以更改if file.endswith(‘.jpg’)这一行的条件，就可以了。</p> 
<p>如果是csv<br> 可以使用Python的pandas库来进行这个任务。首先，确保你已经安装了pandas库。如果还没有安装，可以使用以下命令安装：</p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> pandas

</code></pre> 
<p>接下来，你可以使用以下代码来批量提取文件夹下的CSV文件，根据列索引提取特定几列，并将提取后的数据保存到新建的一个文件夹。在代码中，input_folder是包含CSV文件的文件夹路径，output_folder是保存提取后数据的文件夹路径，columns_to_extract是一个包含你想要提取的列索引的列表。</p> 
<pre><code class="prism language-bash"><span class="token function">import</span> os
<span class="token function">import</span> pandas as pd

<span class="token comment"># 输入文件夹路径</span>
input_folder <span class="token operator">=</span> <span class="token string">'path/to/input/folder'</span>

<span class="token comment"># 输出文件夹路径</span>
output_folder <span class="token operator">=</span> <span class="token string">'path/to/output/folder'</span>

<span class="token comment"># 要提取的列索引</span>
columns_to_extract <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">2</span>, <span class="token number">4</span><span class="token punctuation">]</span>  <span class="token comment"># 例如，提取第0列，第2列，第4列</span>

<span class="token comment"># 确保输出文件夹存在，如果不存在则创建</span>
<span class="token keyword">if</span> not os.path.exists<span class="token punctuation">(</span>output_folder<span class="token punctuation">)</span>:
    os.makedirs<span class="token punctuation">(</span>output_folder<span class="token punctuation">)</span>

<span class="token comment"># 遍历输入文件夹下的所有文件</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">filename</span> <span class="token keyword">in</span> os.listdir<span class="token punctuation">(</span>input_folder<span class="token punctuation">)</span>:
    <span class="token keyword">if</span> filename.endswith<span class="token punctuation">(</span><span class="token string">'.csv'</span><span class="token punctuation">)</span>:
        <span class="token comment"># 构建输入文件的完整路径</span>
        input_file_path <span class="token operator">=</span> os.path.join<span class="token punctuation">(</span>input_folder, filename<span class="token punctuation">)</span>
        
        <span class="token comment"># 读取CSV文件</span>
        <span class="token function">df</span> <span class="token operator">=</span> pd.read_csv<span class="token punctuation">(</span>input_file_path<span class="token punctuation">)</span>
        
        <span class="token comment"># 提取特定列</span>
        extracted_data <span class="token operator">=</span> df.iloc<span class="token punctuation">[</span>:, columns_to_extract<span class="token punctuation">]</span>
        
        <span class="token comment"># 构建输出文件的完整路径</span>
        output_file_path <span class="token operator">=</span> os.path.join<span class="token punctuation">(</span>output_folder, f<span class="token string">'extracted_{filename}'</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 保存提取后的数据到新文件中</span>
        extracted_data.to_csv<span class="token punctuation">(</span>output_file_path, <span class="token assign-left variable">index</span><span class="token operator">=</span>False<span class="token punctuation">)</span>
        
        print<span class="token punctuation">(</span>f<span class="token string">'文件 {filename} 处理完成，提取后的数据已保存到 {output_file_path}'</span><span class="token punctuation">)</span>

</code></pre> 
<p>在这个代码中，os.listdir(input_folder)会列出输入文件夹下的所有文件，然后通过判断文件扩展名为.csv来确定是CSV文件。对于每个CSV文件，使用pd.read_csv()函数读取数据，然后使用.iloc[]方法根据列索引提取特定列。提取后的数据保存在新文件中，文件名前面加上extracted_前缀，以示区分。</p> 
<p>请替换input_folder和output_folder的值为你实际的文件夹路径，并根据需要修改columns_to_extract列表，以提取你想要的特定列。</p> 
<h2><a id="_100"></a>总结</h2> 
<p>在处理包含多个文件夹和大量jpg格式照片的任务时，我们可以使用Python的os和shutil库来实现。首先，我们需要设置原始文件夹路径和目标文件夹路径。在代码中，我们使用了os.walk()函数来遍历所有文件夹和文件。对于每个文件，我们检查其是否为jpg格式，如果是，则复制到目标文件夹中。</p> 
<p>首先，我们创建了一个目标文件夹，确保它存在。然后，我们使用os.walk()遍历了原始文件夹中的所有文件夹和文件。在每个文件中，我们检查文件的扩展名是否为.jpg，如果是，则构造原始文件路径和目标文件路径，并使用shutil.copyfile()函数将文件复制到目标文件夹中。</p> 
<p>在代码中，你需要修改data_folder和photo_folder的值，将它们分别设置为原始文件夹的路径和目标文件夹的路径。这样，代码就能够在指定的文件夹中提取所有jpg格式的照片，并将它们复制到新的文件夹中。</p> 
<p>如果你需要处理其他类型的文件，只需要修改if file.endswith(‘.jpg’)这一行的条件为你想要处理的文件类型即可。这个脚本提供了一个灵活且高效的方法，可以处理包含大量文件的文件夹，确保你的数据得以整理和备份。</p> 
<p>需要注意的是，如果文件较大，可能需要一些时间来处理，因此请耐心等待。通过这种方式，你可以方便地整理和处理大规模的文件，提高了工作效率。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/788dd8f9ee6f8814bf325aab2dcf0284/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python subprocess模块执行CMD命令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0557bba1ad97524abfc7bbb4465abc21/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android之 Zxing二维码详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>