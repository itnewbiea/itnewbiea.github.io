<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CL210çº¢å¸½OpenStackå¹³å°æ¶æ„--ä»‹ç»å®¹å™¨æœåŠ¡ - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CL210çº¢å¸½OpenStackå¹³å°æ¶æ„--ä»‹ç»å®¹å™¨æœåŠ¡" />
<meta property="og:description" content="ğŸ¹ ä¸ªäººç®€ä»‹ï¼šå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ é‡‘é±¼å“¥ï¼ŒCSDNè¿ç»´é¢†åŸŸæ–°æ˜Ÿåˆ›ä½œè€…ï¼Œåä¸ºäº‘Â·äº‘äº«ä¸“å®¶ï¼Œé˜¿é‡Œäº‘ç¤¾åŒºÂ·ä¸“å®¶åšä¸»
ğŸ“šä¸ªäººèµ„è´¨ï¼šCCNAã€HCNPã€CSNAï¼ˆç½‘ç»œåˆ†æå¸ˆï¼‰ï¼Œè½¯è€ƒåˆçº§ã€ä¸­çº§ç½‘ç»œå·¥ç¨‹å¸ˆã€RHCSAã€RHCEã€RHCAã€RHCIã€ITILğŸ˜œ
ğŸ’¬æ ¼è¨€ï¼šåŠªåŠ›ä¸ä¸€å®šæˆåŠŸï¼Œä½†è¦æƒ³æˆåŠŸå°±å¿…é¡»åŠªåŠ›ğŸ”¥
ğŸˆæ”¯æŒæˆ‘ï¼šå¯ç‚¹èµğŸ‘ã€å¯æ”¶è—â­ï¸ã€å¯ç•™è¨€ğŸ“
æ–‡ç« ç›®å½• ğŸ“œå®¹å™¨æœåŠ¡ä»‹ç»ğŸ“œå®¹å™¨é•œåƒå’Œæ³¨å†ŒğŸ“‘ç¨³å®šğŸ“‘å®‰å…¨ğŸ“‘ç”Ÿå‘½å‘¨æœŸç®¡ç†ğŸ“‘æœåŠ¡ä½ç½®ğŸ“‘å¯ä¼¸ç¼©æ€§ ğŸ“œå¡«å……æœ¬åœ°å®¹å™¨ä»“åº“ğŸ“œå®¹å™¨çš„å‘½ä»¤ğŸ“‘docker psğŸ“‘docker statsğŸ“‘docker imagesğŸ“‘docker inspectğŸ“‘docker logsğŸ“‘docker exec ğŸ“œæ—¥å¿—æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ğŸ“‘æ—¥å¿—æ–‡ä»¶ä½ç½®ğŸ“‘é…ç½®æ–‡ä»¶ä½ç½® ğŸ“œè¯¾æœ¬ç»ƒä¹  ğŸ’¡æ€»ç»“ ğŸ“œå®¹å™¨æœåŠ¡ä»‹ç» ä¸çº¢å¸½OpenStackå¹³å°çš„æ—©æœŸç‰ˆæœ¬ä¸åŒï¼ŒåæœŸç‰ˆæœ¬ä½¿ç”¨å®¹å™¨æ¥è¿è¡ŒæœåŠ¡ã€‚å®¹å™¨åŒ–çš„ä½“ç³»ç»“æ„ç¡®ä¿æ¯ä¸ªOpenStackæœåŠ¡ä¸ä¸»æœºéš”ç¦»ã€‚ä¸»è¦çš„OpenStackæœåŠ¡éƒ½ä½¿ç”¨å®¹å™¨ã€‚å®¹å™¨æ˜¯ä½¿ç”¨ä»Red Hatå®¢æˆ·é—¨æˆ·ä¸­æå–çš„é•œåƒæ„å»ºçš„ã€‚å®¹å™¨æœåŠ¡ç®¡ç†ç”±dockerå‘½ä»¤å¤„ç†ï¼Œæ›¿æ¢systemdå‘½ä»¤ã€‚åº•å±‚Linuxç³»ç»Ÿç»§ç»­ä½¿ç”¨systemdå‘½ä»¤ã€‚å®¹å™¨é€šè¿‡æ‹‰å–æ–°é•œåƒå¹¶æ›¿æ¢ç°æœ‰é•œåƒæ¥æ›´æ–°ï¼Œå¹¶ä¸”ä½¿ç”¨Kollaå·¥å…·é›†æ„å»ºè¿™äº›å®¹å™¨ã€‚
ğŸ“œå®¹å™¨é•œåƒå’Œæ³¨å†Œ Red Hat OpenStack Platform 12æ˜¯ç¬¬ä¸€ä¸ªå®ç°äº†å®¹å™¨åŒ–æ§åˆ¶å¹³é¢çš„å‘è¡Œç‰ˆã€‚æ¯ä¸ªæœåŠ¡å®¹å™¨è¿è¡Œä¸€ä¸ªç‹¬ç«‹çš„å †æ ˆï¼Œä¸ä¾èµ–äºå…¶ä»–å®¹å™¨ã€‚è¿è¡Œå®¹å™¨åŒ–OpenStackæœåŠ¡çš„ä¸€äº›ä¸»è¦å¥½å¤„å¦‚ä¸‹æ‰€è¿°ï¼š
ä½¿ç”¨å®¹å™¨åŒ–æ§åˆ¶å¹³é¢æœåŠ¡çš„å¥½å¤„
ğŸ“‘ç¨³å®š å› ä¸ºæ¯ä¸ªæœåŠ¡å®¹å™¨éƒ½æ˜¯éš”ç¦»çš„ï¼Œä¸ä¾èµ–äºå…¶ä»–å®¹å™¨ï¼Œæ‰€ä»¥å®ƒå‡å°‘äº†å•ä¸ªæœåŠ¡å¤±è´¥æ—¶çš„çº§è”å¤±è´¥ã€‚
ğŸ“‘å®‰å…¨ å®¹å™¨é•œåƒåœ¨è®¾è®¡ä¸Šæ˜¯ä¸å¯å˜çš„ã€‚é€šè¿‡ä»åŸå§‹é•œåƒé‡æ–°éƒ¨ç½²ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°é‡æ–°æ„å»ºæŸåæˆ–ä¿®æ”¹çš„å®¹å™¨ã€‚
ğŸ“‘ç”Ÿå‘½å‘¨æœŸç®¡ç† ç®¡ç†è¿™äº›æœåŠ¡å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå¾ˆå®¹æ˜“ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç‹¬ç«‹çš„å•å…ƒã€‚å› ä¸ºå¯ä»¥ç‹¬ç«‹åœ°å¯¹æ¯ä¸ªæœåŠ¡å®¹å™¨è¿›è¡Œå‡çº§å’Œå›æ»šï¼Œæ‰€ä»¥æ‚¨ä¸å¿…æ‹…å¿ƒåœ¨å‡çº§æˆ–å›æ»šæ—¶ç ´åä¾èµ–å…³ç³»ã€‚
ğŸ“‘æœåŠ¡ä½ç½® ç®¡ç†å‘˜å¯ä»¥æ ¹æ®éœ€è¦åœ¨ä¸»æœºä¹‹é—´ç§»åŠ¨æœåŠ¡å®¹å™¨ã€‚
ğŸ“‘å¯ä¼¸ç¼©æ€§ æ¯ä¸ªæœåŠ¡å®¹å™¨éƒ½å¯ä»¥å¿«é€Ÿè€Œè½»æ¾åœ°ä¼¸ç¼©ã€‚ç›®å‰ï¼Œç”±äºå¯¹ä¸»æœºæ–‡ä»¶ç³»ç»Ÿå’Œç½‘ç»œçš„æ½œåœ¨ä¾èµ–å…³ç³»ï¼Œåªèƒ½åœ¨å•ä¸ªèŠ‚ç‚¹ä¸Šæ”¾ç½®ä¸€ä¸ªæœåŠ¡å®¹å™¨å®ä¾‹ã€‚
æ¨èä½¿ç”¨åœ¨undercloudä¸Šç¡®è®¤çš„æœ¬åœ°ä»“åº“æ–¹æ³•ã€‚åœ¨å®‰è£…undercloudæ—¶ï¼Œé•œåƒä»“åº“åœ¨ç«¯å£8787ä¸Šè¢«ç¡®è®¤ã€‚è¯¥éƒ¨ç½²åŒæ­¥æ¥è‡ªè¿œç¨‹ä»“åº“çš„é•œåƒï¼Œå¹¶å°†å®ƒä»¬æ¨åˆ°docker-distributionæœåŠ¡ã€‚
(undercloud) [stack@director ~]$ systemctl status docker-distribution.service â— docker-distribution.service - v2 Registry server for Docker Loaded: loaded (/usr/lib/systemd/system/docker-distribution.service; enabled; vendor preset: disabled) Active: active (running) since Mon 2020-10-12 16:12:56 UTC; 1 day 10h ago Main PID: 1418 (registry) Tasks: 7 CGroup: /system." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/8af001cf2cbfe3e8758c6ceecb9eff1c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-15T09:00:00+08:00" />
<meta property="article:modified_time" content="2022-05-15T09:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CL210çº¢å¸½OpenStackå¹³å°æ¶æ„--ä»‹ç»å®¹å™¨æœåŠ¡</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>ğŸ¹ ä¸ªäººç®€ä»‹ï¼šå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ <strong>é‡‘é±¼å“¥ï¼ŒCSDNè¿ç»´é¢†åŸŸæ–°æ˜Ÿåˆ›ä½œè€…ï¼Œåä¸ºäº‘Â·äº‘äº«ä¸“å®¶ï¼Œé˜¿é‡Œäº‘ç¤¾åŒºÂ·ä¸“å®¶åšä¸»</strong><br> ğŸ“šä¸ªäººèµ„è´¨ï¼š<strong>CCNAã€HCNPã€CSNAï¼ˆç½‘ç»œåˆ†æå¸ˆï¼‰ï¼Œè½¯è€ƒåˆçº§ã€ä¸­çº§ç½‘ç»œå·¥ç¨‹å¸ˆã€RHCSAã€RHCEã€RHCAã€RHCIã€ITIL</strong>ğŸ˜œ<br> ğŸ’¬æ ¼è¨€ï¼šåŠªåŠ›ä¸ä¸€å®šæˆåŠŸï¼Œä½†è¦æƒ³æˆåŠŸå°±å¿…é¡»åŠªåŠ›ğŸ”¥</p> 
 <p>ğŸˆæ”¯æŒæˆ‘ï¼šå¯ç‚¹èµğŸ‘ã€å¯æ”¶è—â­ï¸ã€å¯ç•™è¨€ğŸ“</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>æ–‡ç« ç›®å½•</h4> 
 <ul><li><ul><li><ul><li><a href="#_7" rel="nofollow">ğŸ“œå®¹å™¨æœåŠ¡ä»‹ç»</a></li><li><a href="#_13" rel="nofollow">ğŸ“œå®¹å™¨é•œåƒå’Œæ³¨å†Œ</a></li><li><ul><li><a href="#_21" rel="nofollow">ğŸ“‘ç¨³å®š</a></li><li><a href="#_27" rel="nofollow">ğŸ“‘å®‰å…¨</a></li><li><a href="#_33" rel="nofollow">ğŸ“‘ç”Ÿå‘½å‘¨æœŸç®¡ç†</a></li><li><a href="#_39" rel="nofollow">ğŸ“‘æœåŠ¡ä½ç½®</a></li><li><a href="#_45" rel="nofollow">ğŸ“‘å¯ä¼¸ç¼©æ€§</a></li></ul> 
    </li><li><a href="#_70" rel="nofollow">ğŸ“œå¡«å……æœ¬åœ°å®¹å™¨ä»“åº“</a></li><li><a href="#_97" rel="nofollow">ğŸ“œå®¹å™¨çš„å‘½ä»¤</a></li><li><ul><li><a href="#docker_ps_128" rel="nofollow">ğŸ“‘docker ps</a></li><li><a href="#docker_stats_202" rel="nofollow">ğŸ“‘docker stats</a></li><li><a href="#docker_images_212" rel="nofollow">ğŸ“‘docker images</a></li><li><a href="#docker_inspect_233" rel="nofollow">ğŸ“‘docker inspect</a></li><li><a href="#docker_logs_278" rel="nofollow">ğŸ“‘docker logs</a></li><li><a href="#docker_exec_294" rel="nofollow">ğŸ“‘docker exec</a></li></ul> 
    </li><li><a href="#_322" rel="nofollow">ğŸ“œæ—¥å¿—æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶</a></li><li><ul><li><a href="#_324" rel="nofollow">ğŸ“‘æ—¥å¿—æ–‡ä»¶ä½ç½®</a></li><li><a href="#_332" rel="nofollow">ğŸ“‘é…ç½®æ–‡ä»¶ä½ç½®</a></li></ul> 
    </li><li><a href="#_340" rel="nofollow">ğŸ“œè¯¾æœ¬ç»ƒä¹ </a></li></ul> 
   </li><li><a href="#_354" rel="nofollow">ğŸ’¡æ€»ç»“</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_7"></a>ğŸ“œå®¹å™¨æœåŠ¡ä»‹ç»</h4> 
<p>ä¸çº¢å¸½OpenStackå¹³å°çš„æ—©æœŸç‰ˆæœ¬ä¸åŒï¼ŒåæœŸç‰ˆæœ¬ä½¿ç”¨å®¹å™¨æ¥è¿è¡ŒæœåŠ¡ã€‚å®¹å™¨åŒ–çš„ä½“ç³»ç»“æ„ç¡®ä¿æ¯ä¸ªOpenStackæœåŠ¡ä¸ä¸»æœºéš”ç¦»ã€‚ä¸»è¦çš„OpenStackæœåŠ¡éƒ½ä½¿ç”¨å®¹å™¨ã€‚å®¹å™¨æ˜¯ä½¿ç”¨ä»Red Hatå®¢æˆ·é—¨æˆ·ä¸­æå–çš„é•œåƒæ„å»ºçš„ã€‚å®¹å™¨æœåŠ¡ç®¡ç†ç”±dockerå‘½ä»¤å¤„ç†ï¼Œæ›¿æ¢systemdå‘½ä»¤ã€‚åº•å±‚Linuxç³»ç»Ÿç»§ç»­ä½¿ç”¨systemdå‘½ä»¤ã€‚å®¹å™¨é€šè¿‡æ‹‰å–æ–°é•œåƒå¹¶æ›¿æ¢ç°æœ‰é•œåƒæ¥æ›´æ–°ï¼Œå¹¶ä¸”ä½¿ç”¨Kollaå·¥å…·é›†æ„å»ºè¿™äº›å®¹å™¨ã€‚</p> 
<hr> 
<h4><a id="_13"></a>ğŸ“œå®¹å™¨é•œåƒå’Œæ³¨å†Œ</h4> 
<p>Red Hat OpenStack Platform 12æ˜¯ç¬¬ä¸€ä¸ªå®ç°äº†å®¹å™¨åŒ–æ§åˆ¶å¹³é¢çš„å‘è¡Œç‰ˆã€‚æ¯ä¸ªæœåŠ¡å®¹å™¨è¿è¡Œä¸€ä¸ªç‹¬ç«‹çš„å †æ ˆï¼Œä¸ä¾èµ–äºå…¶ä»–å®¹å™¨ã€‚è¿è¡Œå®¹å™¨åŒ–OpenStackæœåŠ¡çš„ä¸€äº›ä¸»è¦å¥½å¤„å¦‚ä¸‹æ‰€è¿°ï¼š</p> 
<p>ä½¿ç”¨å®¹å™¨åŒ–æ§åˆ¶å¹³é¢æœåŠ¡çš„å¥½å¤„</p> 
<hr> 
<h5><a id="_21"></a>ğŸ“‘ç¨³å®š</h5> 
<p>å› ä¸ºæ¯ä¸ªæœåŠ¡å®¹å™¨éƒ½æ˜¯éš”ç¦»çš„ï¼Œä¸ä¾èµ–äºå…¶ä»–å®¹å™¨ï¼Œæ‰€ä»¥å®ƒå‡å°‘äº†å•ä¸ªæœåŠ¡å¤±è´¥æ—¶çš„çº§è”å¤±è´¥ã€‚</p> 
<hr> 
<h5><a id="_27"></a>ğŸ“‘å®‰å…¨</h5> 
<p>å®¹å™¨é•œåƒåœ¨è®¾è®¡ä¸Šæ˜¯ä¸å¯å˜çš„ã€‚é€šè¿‡ä»åŸå§‹é•œåƒé‡æ–°éƒ¨ç½²ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°é‡æ–°æ„å»ºæŸåæˆ–ä¿®æ”¹çš„å®¹å™¨ã€‚</p> 
<hr> 
<h5><a id="_33"></a>ğŸ“‘ç”Ÿå‘½å‘¨æœŸç®¡ç†</h5> 
<p>ç®¡ç†è¿™äº›æœåŠ¡å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå¾ˆå®¹æ˜“ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç‹¬ç«‹çš„å•å…ƒã€‚å› ä¸ºå¯ä»¥ç‹¬ç«‹åœ°å¯¹æ¯ä¸ªæœåŠ¡å®¹å™¨è¿›è¡Œå‡çº§å’Œå›æ»šï¼Œæ‰€ä»¥æ‚¨ä¸å¿…æ‹…å¿ƒåœ¨å‡çº§æˆ–å›æ»šæ—¶ç ´åä¾èµ–å…³ç³»ã€‚</p> 
<hr> 
<h5><a id="_39"></a>ğŸ“‘æœåŠ¡ä½ç½®</h5> 
<p>ç®¡ç†å‘˜å¯ä»¥æ ¹æ®éœ€è¦åœ¨ä¸»æœºä¹‹é—´ç§»åŠ¨æœåŠ¡å®¹å™¨ã€‚</p> 
<hr> 
<h5><a id="_45"></a>ğŸ“‘å¯ä¼¸ç¼©æ€§</h5> 
<p>æ¯ä¸ªæœåŠ¡å®¹å™¨éƒ½å¯ä»¥å¿«é€Ÿè€Œè½»æ¾åœ°ä¼¸ç¼©ã€‚ç›®å‰ï¼Œç”±äºå¯¹ä¸»æœºæ–‡ä»¶ç³»ç»Ÿå’Œç½‘ç»œçš„æ½œåœ¨ä¾èµ–å…³ç³»ï¼Œåªèƒ½åœ¨å•ä¸ªèŠ‚ç‚¹ä¸Šæ”¾ç½®ä¸€ä¸ªæœåŠ¡å®¹å™¨å®ä¾‹ã€‚</p> 
<hr> 
<p>æ¨èä½¿ç”¨åœ¨undercloudä¸Šç¡®è®¤çš„æœ¬åœ°ä»“åº“æ–¹æ³•ã€‚åœ¨å®‰è£…undercloudæ—¶ï¼Œé•œåƒä»“åº“åœ¨ç«¯å£8787ä¸Šè¢«ç¡®è®¤ã€‚è¯¥éƒ¨ç½²åŒæ­¥æ¥è‡ªè¿œç¨‹ä»“åº“çš„é•œåƒï¼Œå¹¶å°†å®ƒä»¬æ¨åˆ°docker-distributionæœåŠ¡ã€‚</p> 
<pre><code class="prism language-shell"><span class="token punctuation">(</span>undercloud<span class="token punctuation">)</span> <span class="token punctuation">[</span>stack@director ~<span class="token punctuation">]</span>$ systemctl status docker-distribution.service 
â— docker-distribution.service - v2 Registry server <span class="token keyword">for</span> Docker
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/docker-distribution.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Mon <span class="token number">2020</span>-10-12 <span class="token number">16</span>:12:56 UTC<span class="token punctuation">;</span> <span class="token number">1</span> day 10h ago
 Main PID: <span class="token number">1418</span> <span class="token punctuation">(</span>registry<span class="token punctuation">)</span>
    Tasks: <span class="token number">7</span>
   CGroup: /system.slice/docker-distribution.service
           â””â”€1418 /usr/bin/registry serve /etc/docker-distribution/registry/config.yml

Warning: Journal has been rotated since unit was started. Log output is incomplete or unavailable.
</code></pre> 
<p>undercloud ä»“åº“ä¸­å¡«å……äº†overcloudä¸­åŒ…å«çš„æ¯ä¸ªæœåŠ¡æ‰€éœ€çš„é•œåƒã€‚åœ¨overcloudéƒ¨ç½²æœŸé—´ï¼Œå°†ä»è¿™ä¸ªæœ¬åœ°ä»“åº“ä¸­å¿ƒæå–é•œåƒã€‚ä½¿ç”¨æœ¬åœ°ä»“åº“ä¸­å¿ƒå¯ä»¥åŠ é€Ÿéƒ¨ç½²å¹¶ç¼“è§£ç½‘ç»œæ‹¥å¡ï¼Œä½†æ˜¯æä¾›äº†æœ‰é™çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚åœ¨æ²¡æœ‰äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹ï¼Œé•œåƒåœ¨éƒ¨ç½²çš„overcloudçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒä¸å˜ã€‚</p> 
<hr> 
<h4><a id="_70"></a>ğŸ“œå¡«å……æœ¬åœ°å®¹å™¨ä»“åº“</h4> 
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨/usr/share/openstack-tripleo-common-containers/containers-imaqes/overcloud_ containers.yamlæ–‡ä»¶ä¸­å®šä¹‰çš„è¿œç¨‹ä»“åº“æå–å®¹å™¨é•œåƒã€‚è¦ä½¿ç”¨undercloudä½œä¸ºæœ¬åœ°å®¹å™¨ä»“åº“ï¼Œéœ€è¦ç”Ÿæˆä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«overcloudéƒ¨ç½²æ‰€éœ€çš„æ‰€æœ‰å®¹å™¨é•œåƒï¼Œä»è€Œä»è¿œç¨‹ä»“åº“æå–é•œåƒã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆæ¨¡æ¿æ–‡ä»¶ï¼š</p> 
<pre><code class="prism language-shell"><span class="token punctuation">(</span>undercloud<span class="token punctuation">)</span> <span class="token punctuation">[</span>stack@director ~<span class="token punctuation">]</span>$ openstack overcloud container image prepare <span class="token punctuation">\</span>
-e /usr/share/openstack-tripleo-heat-templates/environments/ceph-ansible/ceph-ansible.yaml <span class="token punctuation">\</span>
--namespace<span class="token operator">=</span>registry.access.redhat.com/rhosp13 <span class="token punctuation">\</span>
--prefix<span class="token operator">=</span>openstack- <span class="token punctuation">\</span>
--tag-from-label <span class="token punctuation">{<!-- --></span>version<span class="token punctuation">}</span>-<span class="token punctuation">{<!-- --></span>release<span class="token punctuation">}</span> <span class="token punctuation">\</span>
--output-images-file /home/stack/local_registry_images.yaml
</code></pre> 
<p>local_registry_images.yamlæ–‡ä»¶ä¸Šä¼ å®¹å™¨é•œåƒåˆ°æœ¬åœ°å®¹å™¨ä»“åº“ã€‚ä½¿ç”¨openstack overcloud image uploadå‘½ä»¤æ¥ä¸Šä¼ å®¹å™¨é•œåƒã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºä¸Šä¼ åˆ°æœ¬åœ°ä»“åº“çš„å®¹å™¨é•œåƒï¼š</p> 
<pre><code class="prism language-shell"><span class="token punctuation">(</span>undercloud<span class="token punctuation">)</span> <span class="token punctuation">[</span>stack@director -<span class="token punctuation">]</span>$ <span class="token function">docker</span> images --format<span class="token operator">=</span><span class="token string">"{<!-- -->{.Repository}}"</span>
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-neutron-server-ovn
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-neutron-metadata-agent-ovn
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-rabbitmq
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-api
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-ceilometer-central
â€¦â€¦â€¦â€¦
</code></pre> 
<hr> 
<h4><a id="_97"></a>ğŸ“œå®¹å™¨çš„å‘½ä»¤</h4> 
<p>æ‰€æœ‰å®¹å™¨å‘½ä»¤éƒ½éœ€è¦rootæƒé™ã€‚ï¼ˆå› ä¸ºæ˜¯ç”¨rootæƒé™è¿è¡Œï¼‰</p> 
<p>ä½¿ç”¨docker versionå‘½ä»¤æŸ¥æ‰¾æ­£åœ¨ä½¿ç”¨çš„dockerç‰ˆæœ¬ã€‚åŒæ—¶æ˜¾ç¤ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç‰ˆæœ¬</p> 
<pre><code class="prism language-shell"><span class="token function">docker</span> version
<span class="token punctuation">(</span>undercloud<span class="token punctuation">)</span> <span class="token punctuation">[</span>stack@director ~<span class="token punctuation">]</span>$ <span class="token function">docker</span> version
Client:
 Version:         <span class="token number">1.13</span>.1
 API version:     <span class="token number">1.26</span>
 Package version: docker-1.13.1-68.gitdded712.el7.x86_64
 Go version:      go1.9.2
 Git commit:      dded712/1.13.1
 Built:           Tue Jun <span class="token number">12</span> <span class="token number">18</span>:30:09 <span class="token number">2018</span>
 OS/Arch:         linux/amd64

Server:
 Version:         <span class="token number">1.13</span>.1
 API version:     <span class="token number">1.26</span> <span class="token punctuation">(</span>minimum version <span class="token number">1.12</span><span class="token punctuation">)</span>
 Package version: docker-1.13.1-68.gitdded712.el7.x86_64
 Go version:      go1.9.2
 Git commit:      dded712/1.13.1
 Built:           Tue Jun <span class="token number">12</span> <span class="token number">18</span>:30:09 <span class="token number">2018</span>
 OS/Arch:         linux/amd64
 Experimental:    <span class="token boolean">false</span>
</code></pre> 
<hr> 
<h5><a id="docker_ps_128"></a>ğŸ“‘docker ps</h5> 
<p>docker pså‘½ä»¤åˆ—å‡ºäº†æ‰€æœ‰çš„å®¹å™¨ã€‚æ³¨æ„ï¼Œå®¹å™¨å¯èƒ½åŒæ—¶å­˜åœ¨äºæ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹ä¸Šã€‚æ‚¨å¯ä»¥ä½¿ç”¨grepå‘½ä»¤æ¥ä¼˜åŒ–æœç´¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨â€“formaté€‰é¡¹å’Œdocker pså‘½ä»¤æ¥ç”Ÿæˆå¯è¯»æ€§æ›´å¥½çš„è¾“å‡ºã€‚é€‰é¡¹-aåˆ—å‡ºäº†æ‰€æœ‰å®¹å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªåˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>heat-admin@controller0 ~<span class="token punctuation">]</span>$ <span class="token function">docker</span> <span class="token function">ps</span>
Got permission denied <span class="token keyword">while</span> trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.26/containers/json: dial unix /var/run/docker.sock: connect: permission denied
<span class="token punctuation">[</span>heat-admin@controller0 ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">ps</span>
CONTAINER ID        IMAGE                                                                  COMMAND                  CREATED             STATUS                    PORTS               NAMES
93d806a63af1        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-manila-share:pcmklatest          <span class="token string">"/bin/bash /usr/lo..."</span>   <span class="token number">35</span> hours ago        Up <span class="token number">35</span> hours                                   openstack-manila-share-docker-0
bb5228ae1d0a        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-volume:pcmklatest         <span class="token string">"/bin/bash /usr/lo..."</span>   <span class="token number">35</span> hours ago        Up <span class="token number">35</span> hours                                   openstack-cinder-volume-docker-0
9314ea858667        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-ovn-northd:latest                <span class="token string">"/bin/bash /usr/lo..."</span>   <span class="token number">35</span> hours ago        Up <span class="token number">35</span> hours                                   ovn-dbs-bundle-docker-0
b5b9a671dbbd        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-haproxy:pcmklatest               <span class="token string">"/bin/bash /usr/lo..."</span>   <span class="token number">35</span> hours ago        Up <span class="token number">35</span> hours                                   haproxy-bundle-docker-0
28bfeb90f1b5        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-redis:pcmklatest                 <span class="token string">"/bin/bash /usr/lo..."</span>   <span class="token number">35</span> hours ago        Up <span class="token number">35</span> hours                                   redis-bundle-docker-0
9b470324ad68        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-mariadb:pcmklatest               <span class="token string">"/bin/bash /usr/lo..."</span>   <span class="token number">35</span> hours ago        Up <span class="token number">35</span> hours                                   galera-bundle-docker-0
2c297a0596f3        <span class="token number">172.25</span>.249.200:8787/rhceph/rhceph-3-rhel7:latest                       <span class="token string">"/entrypoint.sh"</span>         <span class="token number">35</span> hours ago        Up <span class="token number">35</span> hours                                   ceph-mgr-controller0
40fd01c5c03e        <span class="token number">172.25</span>.249.200:8787/rhceph/rhceph-3-rhel7:latest                       <span class="token string">"/entrypoint.sh"</span>         <span class="token number">35</span> hours ago        Up <span class="token number">35</span> hours                                   ceph-mds-controller0
66a57bd58a9b        <span class="token number">172.25</span>.249.200:8787/rhceph/rhceph-3-rhel7:latest                       <span class="token string">"/entrypoint.sh"</span>         <span class="token number">35</span> hours ago        Up <span class="token number">35</span> hours                                   ceph-mon-controller0
â€¦â€¦â€¦â€¦

<span class="token punctuation">[</span>heat-admin@controller0 ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">ps</span> <span class="token operator">|</span> <span class="token function">grep</span> nova
5bfcf5bbf99b        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-nova-api:latest                  <span class="token string">"kolla_start"</span>            <span class="token number">24</span> months ago       Up <span class="token number">35</span> hours                                   nova_metadata
457d4ace92a0        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-nova-api:latest                  <span class="token string">"kolla_start"</span>            <span class="token number">24</span> months ago       Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>                       nova_api
3a98c43a04f7        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-nova-scheduler:latest            <span class="token string">"kolla_start"</span>            <span class="token number">24</span> months ago       Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>                       nova_scheduler
35f522ad5783        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-nova-novncproxy:latest           <span class="token string">"kolla_start"</span>            <span class="token number">24</span> months ago       Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>                       nova_vnc_proxy
eb5d4133cd70        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-nova-consoleauth:latest          <span class="token string">"kolla_start"</span>            <span class="token number">24</span> months ago       Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>                       nova_consoleauth
a39f81aa4a8b        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-nova-api:latest                  <span class="token string">"kolla_start"</span>            <span class="token number">24</span> months ago       Up <span class="token number">35</span> hours                                   nova_api_cron
8ffb511c9318        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-nova-conductor:latest            <span class="token string">"kolla_start"</span>            <span class="token number">24</span> months ago       Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>                       nova_conductor
53d487974cc1        <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-nova-placement-api:latest        <span class="token string">"kolla_start"</span>            <span class="token number">24</span> months ago       Up <span class="token number">35</span> hours

<span class="token punctuation">[</span>heat-admin@controller0 ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">ps</span> -a --format<span class="token operator">=</span><span class="token string">"{<!-- -->{.Names}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Status}}"</span> <span class="token operator">|</span> <span class="token function">grep</span> nova
nova_api_discover_hosts	Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">24</span> months ago
nova_metadata	Up <span class="token number">35</span> hours
nova_api	Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>
nova_scheduler	Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>
nova_vnc_proxy	Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>
nova_consoleauth	Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>
nova_api_cron	Up <span class="token number">35</span> hours
nova_conductor	Up <span class="token number">35</span> hours <span class="token punctuation">(</span>unhealthy<span class="token punctuation">)</span>
nova_db_sync	Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">24</span> months ago
nova_api_ensure_default_cell	Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">24</span> months ago
nova_api_map_cell0	Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">24</span> months ago
nova_placement	Up <span class="token number">35</span> hours
nova_api_db_sync	Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">24</span> months ago
nova_placement_init_log	Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">24</span> months ago
nova_metadata_init_log	Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">24</span> months ago
nova_api_init_logs	Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">24</span> months ago
</code></pre> 
<p><strong>æ³¨æ„ï¼šå½“ç‰¹å®šæœåŠ¡å¯åŠ¨ã€æ‰§è¡Œå…¶å¿…è¦çš„ä»»åŠ¡ï¼Œç„¶åé€€å‡ºæ—¶ï¼Œä¼šå‡ºç°é€€å‡ºExitedçŠ¶æ€ã€‚å®ƒä¸ä¼šæ¨æ–­è¯¥æœåŠ¡å­˜åœ¨ä»»ä½•ç±»å‹çš„é—®é¢˜ã€‚çŠ¶æ€ä¸ºExitedçš„å®¹å™¨ç•™åœ¨å†…å­˜ä¸­ï¼Œä»¥ä¾¿å¯ä»¥è®¿é—®å®ƒä»¬çš„æ—¥å¿—æ–‡ä»¶å’Œé…ç½®ã€‚</strong></p> 
<hr> 
<p>â€“filteré€‰é¡¹ç”¨äºå‡å°‘docker pså‘½ä»¤çš„è¾“å‡ºã€‚æœ‰è®¸å¤šå‚æ•°å¯ä»¥ä¸ç­›é€‰å™¨é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚ç¤ºä¾‹å‚æ•°åŒ…æ‹¬åç§°ã€è¿è¡ŒçŠ¶å†µå’ŒçŠ¶æ€ã€‚ä¸ºäº†æ›´å¥½åœ°ç®¡ç†è¾“å‡ºï¼Œå¯ä»¥ç»„åˆä½¿ç”¨â€“filterå’Œâ€“formaté€‰é¡¹ã€‚</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>heat-admin@controller0 ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">ps</span> --filter <span class="token assign-left variable">status</span><span class="token operator">=</span>running --format<span class="token operator">=</span><span class="token string">"{<!-- -->{.ID}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Names}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Status}}"</span>
93d806a63af1	openstack-manila-share-docker-0	Up <span class="token number">35</span> hours
bb5228ae1d0a	openstack-cinder-volume-docker-0	Up <span class="token number">35</span> hours
9314ea858667	ovn-dbs-bundle-docker-0	Up <span class="token number">35</span> hours
b5b9a671dbbd	haproxy-bundle-docker-0	Up <span class="token number">35</span> hours
28bfeb90f1b5	redis-bundle-docker-0	Up <span class="token number">35</span> hours
9b470324ad68	galera-bundle-docker-0	Up <span class="token number">35</span> hours
2c297a0596f3	ceph-mgr-controller0	Up <span class="token number">36</span> hours
40fd01c5c03e	ceph-mds-controller0	Up <span class="token number">36</span> hours
66a57bd58a9b	ceph-mon-controller0	Up <span class="token number">36</span> hours
â€¦â€¦â€¦

<span class="token punctuation">[</span>heat-admin@controller0 ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">ps</span> --filter <span class="token assign-left variable">status</span><span class="token operator">=</span>running --format<span class="token operator">=</span><span class="token string">"{<!-- -->{.ID}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Names}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Status}}"</span> <span class="token operator">|</span> <span class="token function">grep</span> horizon
0f4f1f8f772a	horizon	Up <span class="token number">36</span> hours
</code></pre> 
<hr> 
<h5><a id="docker_stats_202"></a>ğŸ“‘docker stats</h5> 
<p>docker statså‘½ä»¤æ˜¾ç¤ºç‰¹å®šå®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µçš„å®æ—¶ç»Ÿè®¡æ•°æ®ã€‚å¯ä»¥å°†statså‘½ä»¤ä¸Linuxå¹³å°ä¸Šçš„topå‘½ä»¤è¿›è¡Œæ¯”è¾ƒã€‚æ‚¨å¯ä»¥å°†ä¸€ä¸ªç©ºæ ¼åˆ†éš”çš„å®¹å™¨åˆ—è¡¨ä¼ é€’ç»™docker statså‘½ä»¤ï¼Œä»¥æŸ¥è¯¢å¤šä¸ªå®¹å™¨ã€‚å¯ä»¥æŸ¥è¯¢çŠ¶æ€ä¸ºå·²åœæ­¢å’Œå·²é€€å‡ºçš„å®¹å™¨ï¼Œä½†ä¸ä¼šè¿”å›æ•°æ®ã€‚</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@demo -<span class="token punctuation">]</span><span class="token comment"># docker stats nova_api keystone</span>
</code></pre> 
<hr> 
<h5><a id="docker_images_212"></a>ğŸ“‘docker images</h5> 
<p>ä½¿ç”¨docker imageså‘½ä»¤æ¥æ˜¾ç¤ºé•œåƒä»“åº“åç§°ã€‚æ‰€æœ‰å¯ç”¨é•œåƒçš„å¤§å°ã€tagsã€é•œåƒidå’Œåˆ›å»ºæ—¥æœŸã€‚æ·»åŠ image-nameé€‰é¡¹ï¼Œä»¥åªæ˜¾ç¤ºæ¥è‡ªæŒ‡å®šçš„ä»“åº“ã€‚è¿˜å¯ä»¥ä½¿ç”¨â€“formaté€‰é¡¹å®šåˆ¶è¾“å‡ºã€‚latest æ ‡è®°ä¼šè‡ªåŠ¨é™„åŠ åˆ°æ¯ä¸ªä»“åº“é•œåƒçš„æœ€é«˜ç‰ˆæœ¬ã€‚</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>heat-admin@controller0 ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">docker</span> images
REPOSITORY                                                      TAG                 IMAGE ID            CREATED             SIZE
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-api                latest              f7d7cbcfa600        <span class="token number">2</span> years ago         <span class="token number">991</span> MB
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-volume             latest              e7a690608f11        <span class="token number">2</span> years ago         <span class="token number">1.02</span> GB
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-volume             pcmklatest          e7a690608f11        <span class="token number">2</span> years ago         <span class="token number">1.02</span> GB
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-scheduler          latest              6d0b487a321a        <span class="token number">2</span> years ago         <span class="token number">908</span> MB
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-glance-api                latest              bc037202b6b2        <span class="token number">2</span> years ago         <span class="token number">887</span> MB
<span class="token punctuation">[</span>heat-admin@controller0 ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">docker</span> images <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-api
REPOSITORY                                         TAG                 IMAGE ID            CREATED             SIZE
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-api   latest              f7d7cbcfa600        <span class="token number">2</span> years ago         <span class="token number">991</span> MB
<span class="token punctuation">[</span>heat-admin@controller0 ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">docker</span> images <span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-api --format<span class="token operator">=</span><span class="token string">"{<!-- -->{.Repository}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Tag}}"</span> 
<span class="token number">172.25</span>.249.200:8787/rhosp13/openstack-cinder-api	latest
</code></pre> 
<hr> 
<h5><a id="docker_inspect_233"></a>ğŸ“‘docker inspect</h5> 
<p>docker inspectå‘½ä»¤æ£€æŸ¥å®¹å™¨çš„é…ç½®ã€‚ç»“æœä»¥JSONæ ¼å¼å‘ˆç°ã€‚å¯ä»¥ä»JSONè¾“å‡ºä¸­æå–ä»»ä½•å­—æ®µã€‚ä½¿ç”¨jqå‘½ä»¤è¿‡æ»¤JSONè¾“å‡ºã€‚</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller0 ~<span class="token punctuation">]</span><span class="token comment"># docker inspect horizon</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"Id"</span><span class="token builtin class-name">:</span> <span class="token string">"0f4f1f8f772aac108cb094f33d18d370947a1a25e271c23f82258da7cb7ccf30"</span>,
        <span class="token string">"Created"</span><span class="token builtin class-name">:</span> <span class="token string">"2018-10-23T15:06:03.128216544Z"</span>,
        <span class="token string">"Path"</span><span class="token builtin class-name">:</span> <span class="token string">"kolla_start"</span>,
        <span class="token string">"Args"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
        <span class="token string">"State"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">"Status"</span><span class="token builtin class-name">:</span> <span class="token string">"running"</span>,
            <span class="token string">"Running"</span><span class="token builtin class-name">:</span> true,
            <span class="token string">"Paused"</span><span class="token builtin class-name">:</span> false,
            <span class="token string">"Restarting"</span><span class="token builtin class-name">:</span> false,
            <span class="token string">"OOMKilled"</span><span class="token builtin class-name">:</span> false,
            <span class="token string">"Dead"</span><span class="token builtin class-name">:</span> false,
            <span class="token string">"Pid"</span><span class="token builtin class-name">:</span> <span class="token number">5075</span>,
            <span class="token string">"ExitCode"</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">"Error"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
            <span class="token string">"StartedAt"</span><span class="token builtin class-name">:</span> <span class="token string">"2020-10-12T16:20:38.841251452Z"</span>,
            <span class="token string">"FinishedAt"</span><span class="token builtin class-name">:</span> <span class="token string">"2020-10-12T16:19:27.369012909Z"</span>
        <span class="token punctuation">}</span>,
â€¦â€¦â€¦â€¦
<span class="token punctuation">[</span>root@controller0 ~<span class="token punctuation">]</span><span class="token comment"># docker inspect horizon | jq .[0].Mounts</span>
<span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token string">"Propagation"</span><span class="token builtin class-name">:</span> <span class="token string">"rprivate"</span>,
    <span class="token string">"RW"</span><span class="token builtin class-name">:</span> false,
    <span class="token string">"Mode"</span><span class="token builtin class-name">:</span> <span class="token string">"ro"</span>,
    <span class="token string">"Destination"</span><span class="token builtin class-name">:</span> <span class="token string">"/etc/ssh/ssh_known_hosts"</span>,
    <span class="token string">"Source"</span><span class="token builtin class-name">:</span> <span class="token string">"/etc/ssh/ssh_known_hosts"</span>,
    <span class="token string">"Type"</span><span class="token builtin class-name">:</span> <span class="token string">"bind"</span>
  <span class="token punctuation">}</span>,
â€¦â€¦â€¦â€¦

<span class="token comment"># è¦æ˜¾ç¤ºhosts pathå®ä¾‹å‚æ•°çš„å€¼ï¼Œè¯·ä½¿ç”¨--formaté€‰é¡¹ã€‚</span>
<span class="token punctuation">[</span>root@controller0 ~<span class="token punctuation">]</span><span class="token comment"># docker inspect --format="{<!-- -->{.HostsPath}}"  horizon</span>
/etc/hosts
</code></pre> 
<hr> 
<h5><a id="docker_logs_278"></a>ğŸ“‘docker logs</h5> 
<p>docker logså‘½ä»¤æ˜¾ç¤ºSTDOUTçš„å¯åŠ¨è¾“å‡ºã€‚æ­¤å‘½ä»¤ä»…é€‚ç”¨äºç”±æ—¥å¿—è®°å½•é©±åŠ¨ç¨‹åºå¯åŠ¨çš„å®¹å™¨ã€‚docker 1også‘½ä»¤æ”¯æŒä¸€ç³»åˆ—é€‰é¡¹ã€‚â€“sinceé€‰é¡¹æ˜¾ç¤ºåœ¨ç»™å®šæ—¥æœŸä¹‹åç”Ÿæˆçš„å®¹å™¨æ—¥å¿—ã€‚â€“tailé€‰é¡¹æ˜¾ç¤ºæ—¥å¿—æ–‡ä»¶æœ«å°¾æŒ‡å®šçš„è¡Œæ•°ã€‚</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller0 ~<span class="token punctuation">]</span><span class="token comment"># docker logs horizon</span>
<span class="token punctuation">[</span>Mon Oct <span class="token number">12</span> <span class="token number">16</span>:23:49.569171 <span class="token number">2020</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>so:warn<span class="token punctuation">]</span> <span class="token punctuation">[</span>pid <span class="token number">1</span><span class="token punctuation">]</span> AH01574: module systemd_module is already loaded, skipping
<span class="token punctuation">[</span>Mon Oct <span class="token number">12</span> <span class="token number">16</span>:23:49.570745 <span class="token number">2020</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>so:warn<span class="token punctuation">]</span> <span class="token punctuation">[</span>pid <span class="token number">1</span><span class="token punctuation">]</span> AH01574: module cgi_module is already loaded, skipping
<span class="token punctuation">[</span>Mon Oct <span class="token number">12</span> <span class="token number">16</span>:23:49.571331 <span class="token number">2020</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>so:warn<span class="token punctuation">]</span> <span class="token punctuation">[</span>pid <span class="token number">1</span><span class="token punctuation">]</span> AH01574: module wsgi_module is already loaded, skipping
<span class="token punctuation">[</span>Mon Oct <span class="token number">12</span> <span class="token number">16</span>:23:49.589953 <span class="token number">2020</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>alias:warn<span class="token punctuation">]</span> <span class="token punctuation">[</span>pid <span class="token number">1</span><span class="token punctuation">]</span> AH00671: The Alias directive <span class="token keyword">in</span> /etc/httpd/conf.d/autoindex.conf at line <span class="token number">21</span> will probably never match because it overlaps an earlier Alias.
</code></pre> 
<p><strong>æ³¨æ„ï¼šå½“å®¹å™¨è¢«åœæ­¢æ—¶ï¼Œå®ƒä»¬ä»ç„¶ç•™åœ¨å†…å­˜ä¸­ã€‚æ­¤è¡Œä¸ºå…è®¸ç®¡ç†å‘˜åœ¨å®¹å™¨åœæ­¢è¿è¡Œåå¯¹å®¹å™¨æ—¥å¿—è¿›è¡Œæ•…éšœæ’é™¤ã€‚</strong></p> 
<hr> 
<h5><a id="docker_exec_294"></a>ğŸ“‘docker exec</h5> 
<p>è¦è®¿é—®å®¹å™¨ï¼Œä½¿ç”¨docker execå‘½ä»¤å¯åŠ¨/bin/bashã€‚è¿™æä¾›äº†ä¸€ä¸ªbashæç¤ºç¬¦ï¼Œå¯ä»¥ä»è¯¥æç¤ºç¬¦ç›´æ¥åœ¨å®¹å™¨æœ¬èº«ä¸­è¿è¡Œå‘½ä»¤ã€‚å®¹å™¨å¿…é¡»å·²ç»å¯åŠ¨å¹¶è¿è¡Œï¼Œæ‰èƒ½åœ¨å…¶ä¸­æ‰§è¡Œè¿›ä¸€æ­¥çš„å‘½ä»¤ã€‚æš‚åœæˆ–åœæ­¢çš„å®¹å™¨å°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚è¯¥å‘½ä»¤åœ¨å®¹å™¨çš„é»˜è®¤ç›®å½•ä¸­æ‰§è¡Œã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥åœ¨å®¹å™¨ä¸­ä»¥éäº¤äº’æ–¹å¼è¿è¡Œå‘½ä»¤ã€‚</p> 
<p>docker execå‘½ä»¤éœ€è¦-iæˆ–äº¤äº’å¼é€‰é¡¹ã€‚â€“detaché€‰é¡¹åœ¨åå°è¿è¡Œè¯¥å‘½ä»¤ã€‚è¦è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè¯·ä½¿ç”¨â€“envé€‰é¡¹ã€‚ä¸€èµ·è¿è¡Œä¸€ä¸²å‘½ä»¤ï¼Œä½¿ç”¨shellæ„é€ ã€‚ä¾‹å¦‚docker-compose exec sh -c ' &amp;&amp; &amp;&amp; â€™</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller0 ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it keystone /bin/bash</span>
<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>root@controller0 /<span class="token punctuation">]</span><span class="token comment"># ls</span>
bin   dev  home  lib64  mnt        opt   root  run_command  srv  tmp  var
boot  etc  lib   media  openstack  proc  run   sbin         sys  usr

<span class="token punctuation">[</span>root@controller0 ~<span class="token punctuation">]</span><span class="token comment"># docker exec -t keystone /openstack/healthcheck</span>
<span class="token punctuation">{<!-- --></span><span class="token string">"versions"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">"values"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token builtin class-name">:</span> <span class="token string">"stable"</span>, <span class="token string">"updated"</span><span class="token builtin class-name">:</span> <span class="token string">"2018-02-28T00:00:00Z"</span>, <span class="token string">"media-types"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"base"</span><span class="token builtin class-name">:</span> <span class="token string">"application/json"</span>, <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"application/vnd.openstack.identity-v3+json"</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token string">"id"</span><span class="token builtin class-name">:</span> <span class="token string">"v3.10"</span>, <span class="token string">"links"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"href"</span><span class="token builtin class-name">:</span> <span class="token string">"http://controller0.internalapi.overcloud.example.com:5000/v3/"</span>, <span class="token string">"rel"</span><span class="token builtin class-name">:</span> <span class="token string">"self"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>, <span class="token punctuation">{<!-- --></span><span class="token string">"status"</span><span class="token builtin class-name">:</span> <span class="token string">"deprecated"</span>, <span class="token string">"updated"</span><span class="token builtin class-name">:</span> <span class="token string">"2016-08-04T00:00:00Z"</span>, <span class="token string">"media-types"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"base"</span><span class="token builtin class-name">:</span> <span class="token string">"application/json"</span>, <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"application/vnd.openstack.identity-v2.0+json"</span><span class="token punctuation">}</span><span class="token punctuation">]</span>, <span class="token string">"id"</span><span class="token builtin class-name">:</span> <span class="token string">"v2.0"</span>, <span class="token string">"links"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"href"</span><span class="token builtin class-name">:</span> <span class="token string">"http://controller0.internalapi.overcloud.example.com:5000/v2.0/"</span>, <span class="token string">"rel"</span><span class="token builtin class-name">:</span> <span class="token string">"self"</span><span class="token punctuation">}</span>, <span class="token punctuation">{<!-- --></span><span class="token string">"href"</span><span class="token builtin class-name">:</span> <span class="token string">"https://docs.openstack.org/"</span>, <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"text/html"</span>, <span class="token string">"rel"</span><span class="token builtin class-name">:</span> <span class="token string">"describedby"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token number">300</span> <span class="token number">172.24</span>.1.1:5000 <span class="token number">0.021</span> seconds
</code></pre> 
<p>ä½¿ç”¨dockerå‘½ä»¤stopã€startå’Œrestartæ¥æ§åˆ¶å®¹å™¨çš„è¿è¡Œã€‚ä½¿ç”¨docker pså‘½ä»¤æ¥éªŒè¯å®¹å™¨çš„çŠ¶æ€ã€‚</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@controller0 ~<span class="token punctuation">]</span><span class="token comment"># docker stop horizon</span>
<span class="token punctuation">[</span>root@controller0 ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a --format="{<!-- -->{.Names}}\t{<!-- -->{.Status}}" | grep horizon</span>
horizon	Up About an hour
horizon_fix_perms	Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">24</span> months ago
</code></pre> 
<hr> 
<h4><a id="_322"></a>ğŸ“œæ—¥å¿—æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶</h4> 
<h5><a id="_324"></a>ğŸ“‘æ—¥å¿—æ–‡ä»¶ä½ç½®</h5> 
<p>ä»¥å‰ç‰ˆæœ¬çš„Red Hat OpenStackå°†logæ–‡ä»¶å­˜å‚¨åœ¨/var/log/service-nameä¸­ï¼Œä¾‹å¦‚/var/log/cinderã€‚åœ¨å®¹å™¨åŒ–æ¶æ„ä¸­ï¼Œæ—¥å¿—æ–‡ä»¶å­˜å‚¨åœ¨/var/log/containers/service-nameä¸­ï¼Œä¾‹å¦‚/var/log/containers/ cinderã€‚</p> 
<p><strong>æ³¨æ„ï¼šåœ¨å®¹å™¨åŒ–æ¶æ„ä¸­ï¼Œ/var/log/serviceæ—¥å¿—ç›®å½•ä»ç„¶å­˜åœ¨ï¼Œä½†æ˜¯é™¤äº†åä¸ºreadme.txtçš„æ–‡ä»¶å¤–ï¼Œè¿™äº›ç›®å½•éƒ½æ˜¯ç©ºçš„ã€‚</strong></p> 
<hr> 
<h5><a id="_332"></a>ğŸ“‘é…ç½®æ–‡ä»¶ä½ç½®</h5> 
<p>ä¸æ—¥å¿—æ–‡ä»¶ä¸€æ ·ï¼Œé…ç½®æ–‡ä»¶ä¹Ÿæ”¹å˜äº†ä½ç½®ã€‚ä»¥å‰å®ƒä»¬å­˜å‚¨åœ¨/ etc/serviceä¸­ã€‚åœ¨å®¹å™¨åŒ–ä½“ç³»ç»“æ„ä¸­ï¼Œé…ç½®å­˜å‚¨åœ¨ /var/lib/config-data/puppet-generated/service-nameç›®å½•ä¸­ã€‚</p> 
<p><strong>æ³¨æ„ï¼š/etc/serviceç›®å½•ä»ç„¶å­˜åœ¨ï¼Œå¹¶ä¸”åŒ…å«è¯¥æœåŠ¡çš„é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œé‡è¦çš„æ˜¯è¦çŸ¥é“ï¼Œåœ¨è¿™äº›é…ç½®æ–‡ä»¶ä¸­æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¸ä¼šæ”¹å˜dockerå®¹å™¨çš„é…ç½®ã€‚æ‰€æœ‰å®¹å™¨é…ç½®æ›´æ”¹å¿…é¡»ä½¿ç”¨/ var/lib/config-data/puppet-generated/service/etc/serviceä¸­çš„é…ç½®æ–‡ä»¶è¿›è¡Œã€‚</strong></p> 
<hr> 
<h4><a id="_340"></a>ğŸ“œè¯¾æœ¬ç»ƒä¹ </h4> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>student@workstation ~<span class="token punctuation">]</span>$ lab architecture-containerization setup 
Setting up workstation <span class="token keyword">for</span> lab exercise work:

 <span class="token builtin class-name">.</span> Verifying <span class="token function">node</span> reachable: director<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>  SUCCESS
 <span class="token builtin class-name">.</span> Verifying <span class="token function">node</span> reachable: controller0<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.  SUCCESS
</code></pre> 
<p>ç« èŠ‚å†…å®¹å·²æœ‰ç›¸å…³æ¼”ç¤ºï¼Œå°±ä¸å†è¿›è¡Œæ“ä½œã€‚</p> 
<hr> 
<h3><a id="_354"></a>ğŸ’¡æ€»ç»“</h3> 
<p>RHCAè®¤è¯éœ€è¦ç»å†5é—¨çš„å­¦ä¹ ä¸è€ƒè¯•ï¼Œè¿˜æ˜¯éœ€è¦èŠ±ä¸å°‘æ—¶é—´å»å­¦ä¹ ä¸å¤‡è€ƒçš„ï¼Œå¥½å¥½åŠ æ²¹ï¼Œå¯ä»¥å™¶ğŸ¤ªã€‚</p> 
<p><img src="https://images2.imgbox.com/2f/6c/YKia0xOP_o.png" alt=""></p> 
<p>ä»¥ä¸Šå°±æ˜¯ã€é‡‘é±¼å“¥ã€‘å¯¹ <strong>ç¬¬ä¸€ç«  çº¢å¸½OpenStackå¹³å°æ¶æ„â€“ä»‹ç»å®¹å™¨æœåŠ¡</strong> çš„ç®€è¿°å’Œè®²è§£ã€‚å¸Œæœ›èƒ½å¯¹çœ‹åˆ°æ­¤æ–‡ç« çš„å°ä¼™ä¼´æœ‰æ‰€å¸®åŠ©ã€‚</p> 
<blockquote> 
 <p>ğŸ’¾<strong>çº¢å¸½è®¤è¯</strong>ä¸“æ ç³»åˆ—ï¼š<br> RHCSAä¸“æ ï¼š<a href="https://blog.csdn.net/qq_41765918/category_11687066.html">æˆè¯´ RHCSA è®¤è¯</a><br> RHCEä¸“æ ï¼š<a href="https://blog.csdn.net/qq_41765918/category_11687098.html">æˆè¯´ RHCE è®¤è¯</a><br> æ­¤æ–‡ç« æ”¶å½•åœ¨RHCAä¸“æ ï¼š<a href="https://blog.csdn.net/qq_41765918/category_11532281.html">RHCA å›å¿†å½•</a></p> 
</blockquote> 
<p>å¦‚æœè¿™ç¯‡ã€æ–‡ç« ã€‘æœ‰å¸®åŠ©åˆ°ä½ ï¼Œå¸Œæœ›å¯ä»¥ç»™ã€é‡‘é±¼å“¥ã€‘ç‚¹ä¸ªèµğŸ‘ï¼Œåˆ›ä½œä¸æ˜“ï¼Œç›¸æ¯”å®˜æ–¹çš„é™ˆè¿°ï¼Œæˆ‘æ›´å–œæ¬¢ç”¨ã€é€šä¿—æ˜“æ‡‚ã€‘çš„æ–‡ç¬”å»è®²è§£æ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚</p> 
<p>å¦‚æœæœ‰å¯¹ã€è¿ç»´æŠ€æœ¯ã€‘æ„Ÿå…´è¶£ï¼Œä¹Ÿæ¬¢è¿å…³æ³¨â¤ï¸â¤ï¸â¤ï¸ ã€é‡‘é±¼å“¥ã€‘â¤ï¸â¤ï¸â¤ï¸ï¼Œæˆ‘å°†ä¼šç»™ä½ å¸¦æ¥å·¨å¤§çš„ã€æ”¶è·ä¸æƒŠå–œã€‘ğŸ’•ğŸ’•ï¼</p> 
<p><img src="https://images2.imgbox.com/4c/41/2K5wAEBp_o.png" alt=""></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a3674eccf77e3b0c2ea80e8248a5731f/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">warn - Attempted to load @next/swc-darwin-x64, but it was not installed</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9cb4cf75ea51b795c6d83fbd14fef010/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">VMwareå®‰è£…Windows11ä¸“ä¸šç‰ˆè¯¦ç»†æ•™ç¨‹</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>