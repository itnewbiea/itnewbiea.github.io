<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于“Python”的核心知识点整理大全55 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于“Python”的核心知识点整理大全55" />
<meta property="og:description" content="目录
注意
3. 模板
topic.html
4. 将显示所有主题的页面中的每个主题都设置为链接
topics.html
18.5 小结
第 19 章
用户账户
19.1 让用户能够输入数据
19.1.1 添加新主题
1. 用于添加主题的表单
forms.py
2. URL模式new_topic
urls.py
3. 视图函数new_topic()
views.py
4. GET请求和POST请求
5. 模板new_topic
new_topic.html
往期快速传送门👆（在文章最后）：
感谢大家的支持！欢迎订阅收藏！专栏将持续更新！
--snip-- 1 def topic(request, topic_id): &#34;&#34;&#34;显示单个主题及其所有的条目&#34;&#34;&#34; 2 topic = Topic.objects.get(id=topic_id) 3 entries = topic.entry_set.order_by(&#39;-date_added&#39;) 4 context = {&#39;topic&#39;: topic, &#39;entries&#39;: entries} 5 return render(request, &#39;learning_logs/topic.html&#39;, context) 这是第一个除request对象外还包含另一个形参的视图函数。这个函数接受正则表达式 (?P\d&#43;)捕获的值，并将其存储到topic_id中（见1）。在2处，我们使用get()来获取 指定的主题，就像前面在Django shell中所做的那样。在3处，我们获取与该主题相关联的条目， 并将它们按date_added排序：date_added前面的减号指定按降序排列，即先显示最近的条目。我们将主题和条目都存储在字典context中（见4），再将这个字典发送给模板topic.html（见5）。
注意 2处和3处的代码被称为查询，因为它们向数据库查询特定的信息。在自己的项目中编 写这样的查询时，先在Django shell中进行尝试大有裨益。相比于编写视图和模板，再在 浏览器中检查结果，在shell中执行代码可更快地获得反馈。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/01348bfabccbee47eb4c5a00ff5c620f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-02T00:00:00+08:00" />
<meta property="article:modified_time" content="2024-01-02T00:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于“Python”的核心知识点整理大全55</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/23/30/57jlObPT_o.gif"></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E6%B3%A8%E6%84%8F-toc" style="margin-left:40px;"><a href="#%E6%B3%A8%E6%84%8F" rel="nofollow">注意</a></p> 
<p id="3.%20%E6%A8%A1%E6%9D%BF-toc" style="margin-left:80px;"><a href="#3.%20%E6%A8%A1%E6%9D%BF" rel="nofollow">3. 模板</a></p> 
<p id="topic.html-toc" style="margin-left:120px;"><a href="#topic.html" rel="nofollow">topic.html</a></p> 
<p id="4.%20%E5%B0%86%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E4%B8%BB%E9%A2%98%E7%9A%84%E9%A1%B5%E9%9D%A2%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%AA%E4%B8%BB%E9%A2%98%E9%83%BD%E8%AE%BE%E7%BD%AE%E4%B8%BA%E9%93%BE%E6%8E%A5-toc" style="margin-left:80px;"><a href="#4.%20%E5%B0%86%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E4%B8%BB%E9%A2%98%E7%9A%84%E9%A1%B5%E9%9D%A2%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%AA%E4%B8%BB%E9%A2%98%E9%83%BD%E8%AE%BE%E7%BD%AE%E4%B8%BA%E9%93%BE%E6%8E%A5" rel="nofollow">4. 将显示所有主题的页面中的每个主题都设置为链接</a></p> 
<p id="topics.html-toc" style="margin-left:120px;"><a href="#topics.html" rel="nofollow">topics.html</a></p> 
<p id="18.5%20%E5%B0%8F%E7%BB%93-toc" style="margin-left:40px;"><a href="#18.5%20%E5%B0%8F%E7%BB%93" rel="nofollow">18.5 小结</a></p> 
<p id="%E7%AC%AC%2019%20%E7%AB%A0-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%2019%20%E7%AB%A0" rel="nofollow">第 19 章</a></p> 
<p id="%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7-toc" style="margin-left:0px;"><a href="#%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7" rel="nofollow">用户账户</a></p> 
<p id="19.1%20%E8%AE%A9%E7%94%A8%E6%88%B7%E8%83%BD%E5%A4%9F%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#19.1%20%E8%AE%A9%E7%94%A8%E6%88%B7%E8%83%BD%E5%A4%9F%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE" rel="nofollow">19.1 让用户能够输入数据</a></p> 
<p id="19.1.1%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E4%B8%BB%E9%A2%98-toc" style="margin-left:80px;"><a href="#19.1.1%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E4%B8%BB%E9%A2%98" rel="nofollow">19.1.1 添加新主题</a></p> 
<p id="1.%20%E7%94%A8%E4%BA%8E%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%A2%98%E7%9A%84%E8%A1%A8%E5%8D%95-toc" style="margin-left:120px;"><a href="#1.%20%E7%94%A8%E4%BA%8E%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%A2%98%E7%9A%84%E8%A1%A8%E5%8D%95" rel="nofollow">1. 用于添加主题的表单</a></p> 
<p id="forms.py-toc" style="margin-left:160px;"><a href="#forms.py" rel="nofollow">forms.py</a></p> 
<p id="2.%20URL%E6%A8%A1%E5%BC%8Fnew_topic-toc" style="margin-left:120px;"><a href="#2.%20URL%E6%A8%A1%E5%BC%8Fnew_topic" rel="nofollow">2. URL模式new_topic</a></p> 
<p id="urls.py-toc" style="margin-left:160px;"><a href="#urls.py" rel="nofollow">urls.py</a></p> 
<p id="3.%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0new_topic()-toc" style="margin-left:120px;"><a href="#3.%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0new_topic%28%29" rel="nofollow">3. 视图函数new_topic()</a></p> 
<p id="views.py-toc" style="margin-left:160px;"><a href="#views.py" rel="nofollow">views.py</a></p> 
<p id="4.%20GET%E8%AF%B7%E6%B1%82%E5%92%8CPOST%E8%AF%B7%E6%B1%82-toc" style="margin-left:120px;"><a href="#4.%20GET%E8%AF%B7%E6%B1%82%E5%92%8CPOST%E8%AF%B7%E6%B1%82" rel="nofollow">4. GET请求和POST请求</a></p> 
<p id="5.%20%E6%A8%A1%E6%9D%BFnew_topic-toc" style="margin-left:120px;"><a href="#5.%20%E6%A8%A1%E6%9D%BFnew_topic" rel="nofollow">5. 模板new_topic</a></p> 
<p id="new_topic.html-toc" style="margin-left:160px;"><a href="#new_topic.html" rel="nofollow">new_topic.html</a></p> 
<p id="%E5%BE%80%E6%9C%9F%E5%BF%AB%E9%80%9F%E4%BC%A0%E9%80%81%E9%97%A8%F0%9F%91%86%EF%BC%88%E5%9C%A8%E6%96%87%E7%AB%A0%E6%9C%80%E5%90%8E%EF%BC%89%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E5%BE%80%E6%9C%9F%E5%BF%AB%E9%80%9F%E4%BC%A0%E9%80%81%E9%97%A8%F0%9F%91%86%EF%BC%88%E5%9C%A8%E6%96%87%E7%AB%A0%E6%9C%80%E5%90%8E%EF%BC%89%EF%BC%9A" rel="nofollow">往期快速传送门👆（在文章最后）：</a></p> 
<p id="%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%E6%AC%A2%E8%BF%8E%E8%AE%A2%E9%98%85%E6%94%B6%E8%97%8F%EF%BC%81%E4%B8%93%E6%A0%8F%E5%B0%86%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%81-toc" style="margin-left:0px;"><a href="#%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%E6%AC%A2%E8%BF%8E%E8%AE%A2%E9%98%85%E6%94%B6%E8%97%8F%EF%BC%81%E4%B8%93%E6%A0%8F%E5%B0%86%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%81" rel="nofollow">感谢大家的支持！欢迎订阅收藏！专栏将持续更新！</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p style="text-align:center;"><img alt="" height="234" src="https://images2.imgbox.com/1f/25/OY7M6unQ_o.png" width="373"> </p> 
<pre><code class="language-python">--snip--
1 def topic(request, topic_id):
 """显示单个主题及其所有的条目"""
2 topic = Topic.objects.get(id=topic_id)
3 entries = topic.entry_set.order_by('-date_added')
4 context = {'topic': topic, 'entries': entries}
5 return render(request, 'learning_logs/topic.html', context)</code></pre> 
<blockquote> 
 <p style="text-align:center;">这是第一个除request对象外还包含另一个形参的视图函数。这个函数接受正则表达式 (?P\d+)捕获的值，并将其存储到topic_id中（见1）。在2处，我们使用get()来获取 指定的主题，就像前面在Django shell中所做的那样。在3处，我们获取与该主题相关联的条目， 并将它们按date_added排序：date_added前面的减号指定按降序排列，即先显示最近的条目。我们将主题和条目都存储在字典context中（见4），再将这个字典发送给模板topic.html（见5）。</p> 
</blockquote> 
<hr> 
<h3 id="%E6%B3%A8%E6%84%8F" style="text-align:center;">注意</h3> 
<p style="text-align:center;">2处和3处的代码被称为查询，因为它们向数据库查询特定的信息。在自己的项目中编 写这样的查询时，先在Django shell中进行尝试大有裨益。相比于编写视图和模板，再在 浏览器中检查结果，在shell中执行代码可更快地获得反馈。</p> 
<hr> 
<blockquote> 
 <h4 id="3.%20%E6%A8%A1%E6%9D%BF" style="text-align:center;">3. 模板</h4> 
 <p style="text-align:center;">这个模板需要显示主题的名称和条目的内容；如果当前主题不包含任何条目，我们还需向用 户指出这一点：</p> 
 <p style="text-align:center;"></p> 
 <h5 id="topic.html" style="text-align:center;">topic.html</h5> 
</blockquote> 
<pre><code class="language-python">{% extends 'learning_logs/base.html' %}
{% block content %}
1 &lt;p&gt;Topic: {<!-- -->{ topic }}&lt;/p&gt;
 &lt;p&gt;Entries:&lt;/p&gt;
2 &lt;ul&gt;
3 {% for entry in entries %}
 &lt;li&gt;
4 &lt;p&gt;{<!-- -->{ entry.date_added|date:'M d, Y H:i' }}&lt;/p&gt;
5 &lt;p&gt;{<!-- -->{ entry.text|linebreaks }}&lt;/p&gt;
 &lt;/li&gt;
6 {% empty %}
 &lt;li&gt;
 There are no entries for this topic yet.
 &lt;/li&gt;
 {% endfor %}
 &lt;/ul&gt;
{% endblock content %}</code></pre> 
<blockquote> 
 <p style="text-align:center;">像这个项目的其他页面一样，这里也继承了base.html。接下来，我们显示当前的主题（见1）， 它存储在模板变量{<!-- -->{ topic }}中。为什么可以使用变量topic呢？因为它包含在字典context中。 接下来，我们开始定义一个显示每个条目的项目列表（见2），并像前面显示所有主题一样遍历 条目（见3）。</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">每个项目列表项都将列出两项信息：条目的时间戳和完整的文本。为列出时间戳（见4）， 我们显示属性date_added的值。在Django模板中，竖线（|）表示模板过滤器——对模板变量的值 进行修改的函数。过滤器date: 'M d, Y H:i'以这样的格式显示时间戳：January 1, 2015 23:00。 接下来的一行显示text的完整值，而不仅仅是entry的前50个字符。过滤器linebreaks（见5）将 包含换行符的长条目转换为浏览器能够理解的格式，以免显示为一个不间断的文本块。在6处， 我们使用模板标签{% empty %}打印一条消息，告诉用户当前主题还没有条目。</p> 
</blockquote> 
<blockquote> 
 <h4 id="4.%20%E5%B0%86%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E4%B8%BB%E9%A2%98%E7%9A%84%E9%A1%B5%E9%9D%A2%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%AA%E4%B8%BB%E9%A2%98%E9%83%BD%E8%AE%BE%E7%BD%AE%E4%B8%BA%E9%93%BE%E6%8E%A5" style="text-align:center;">4. 将显示所有主题的页面中的每个主题都设置为链接</h4> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">在浏览器中查看显示特定主题的页面前，我们需要修改模板topics.html，让每个主题都链接 到相应的网页，如下所示：</p> 
 <p style="text-align:center;"></p> 
 <h5 id="topics.html" style="text-align:center;">topics.html</h5> 
</blockquote> 
<pre><code class="language-python">--snip--
 {% for topic in topics %}
 &lt;li&gt;
 &lt;a href="{% url 'learning_logs:topic' topic.id %}"&gt;{<!-- -->{ topic }}&lt;/a&gt;
 &lt;/li&gt;
 {% empty %}
--snip-- </code></pre> 
<blockquote> 
 <p style="text-align:center;">我们使用模板标签url根据learning_logs中名为topic的URL模式来生成合适的链接。这个 URL模式要求提供实参topic_id，因此我们在模板标签url中添加了属性topic.id。现在，主题列 表中的每个主题都是一个链接，链接到显示相应主题的页面，如http://localhost:8000/topics/1/。 如果你刷新显示所有主题的页面，再单击其中的一个主题，将看到类似于图18-5所示的页面。</p> 
</blockquote> 
<p style="text-align:center;"><img alt="" height="492" src="https://images2.imgbox.com/ae/e6/SbrhLdDK_o.png" width="888"></p> 
<h3 id="18.5%20%E5%B0%8F%E7%BB%93" style="text-align:center;">18.5 小结</h3> 
<blockquote> 
 <p style="text-align:center;">在本章中，你首先学习了如何使用Django框架来创建Web应用程序。你制定了简要的项目规 范，在虚拟环境中安装了Django，创建了一个项目，并核实该项目已正确地创建。你学习了如何 创建应用程序，以及如何定义表示应用程序数据的模型。你学习了数据库，以及在你修改模型后， Django可为你迁移数据库提供什么样的帮助。你学习了如何创建可访问管理网站的超级用户，并 使用管理网站输入了一些初始数据。</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">你还探索了Django shell，它让你能够在终端会话中处理项目的数据。你学习了如何定义URL、 创建视图函数以及编写为网站创建网页的模板。最后，你使用了模板继承，它可简化各个模板的 结构，并使得修改网站更容易。</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">在第19章，我们将创建对用户友好而直观的网页，让用户无需通过管理网站就能添加新的主 题和条目，以及编辑既有的条目。我们还将添加一个用户注册系统，让用户能够创建账户和自己 的学习笔记。让任意数量的用户都能与之交互，是Web应用程序的核心所在。</p> 
</blockquote> 
<h2 id="%E7%AC%AC%2019%20%E7%AB%A0" style="text-align:center;">第 19 章</h2> 
<h2 id="%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7" style="text-align:center;">用户账户</h2> 
<h3 id="19.1%20%E8%AE%A9%E7%94%A8%E6%88%B7%E8%83%BD%E5%A4%9F%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE" style="text-align:center;">19.1 让用户能够输入数据</h3> 
<blockquote> 
 <p style="text-align:center;">建立用于创建用户账户的身份验证系统之前，我们先来添加几个页面，让用户能够输入数据。 我们将让用户能够添加新主题、添加新条目以及编辑既有条目。</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">当前，只有超级用户能够通过管理网站输入数据。我们不想让用户与管理网站交互，因此我 们将使用Django的表单创建工具来创建让用户能够输入数据的页面。</p> 
</blockquote> 
<h4 id="19.1.1%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E4%B8%BB%E9%A2%98" style="text-align:center;">19.1.1 添加新主题</h4> 
<blockquote> 
 <p style="text-align:center;">首先来让用户能够添加新主题。创建基于表单的页面的方法几乎与前面创建网页一样：定义 一个URL，编写一个视图函数并编写一个模板。一个主要差别是，需要导入包含表单的模块 forms.py。</p> 
 <p style="text-align:center;"></p> 
 <h5 id="1.%20%E7%94%A8%E4%BA%8E%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%A2%98%E7%9A%84%E8%A1%A8%E5%8D%95" style="text-align:center;">1. 用于添加主题的表单</h5> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">让用户输入并提交信息的页面都是表单，那怕它看起来不像表单。用户输入信息时，我们需 要进行验证，确认提供的信息是正确的数据类型，且不是恶意的信息，如中断服务器的代码。然 后，我们再对这些有效信息进行处理，并将其保存到数据库的合适地方。这些工作很多都是由 Django自动完成的。</p> 
 <p style="text-align:center;">在Django中，创建表单的最简单方式是使用ModelForm，它根据我们在第18章定义的模型中 的信息自动创建表单。创建一个名为forms.py的文件，将其存储到models.py所在的目录中，并在 其中编写你的第一个表单：</p> 
 <p style="text-align:center;"></p> 
 <h6 id="forms.py" style="text-align:center;">forms.py</h6> 
</blockquote> 
<pre><code class="language-python">from django import forms
from .models import Topic
1 class TopicForm(forms.ModelForm):
 class Meta:
2 model = Topic
3 fields = ['text']
4 labels = {'text': ''}</code></pre> 
<blockquote> 
 <p style="text-align:center;">我们首先导入了模块forms以及要使用的模型Topic。在1处，我们定义了一个名为TopicForm 的类，它继承了forms.ModelForm。</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">最简单的ModelForm版本只包含一个内嵌的Meta类，它告诉Django根据哪个模型创建表单，以 及在表单中包含哪些字段。在处，我们根据模型Topic创建一个表单，该表单只包含字段text （见）。处的代码让Django不要为字段text生成标签。</p> 
 <p style="text-align:center;"></p> 
 <h5 id="2.%20URL%E6%A8%A1%E5%BC%8Fnew_topic" style="text-align:center;">2. URL模式new_topic</h5> 
 <p style="text-align:center;">这个新网页的URL应简短而具有描述性，因此当用户要添加新主题时，我们将切换到 http://localhost:8000/new_topic/。下面是网页new_topic的URL模式，我们将其添加到learning_logs/ urls.py中：</p> 
 <p style="text-align:center;"></p> 
 <h6 id="urls.py" style="text-align:center;">urls.py</h6> 
</blockquote> 
<pre><code class="language-python">--snip--
urlpatterns = [
 --snip--
 # 用于添加新主题的网页
 url(r'^new_topic/$', views.new_topic, name='new_topic'),
] </code></pre> 
<blockquote> 
 <p style="text-align:center;">这个URL模式将请求交给视图函数new_topic()，接下来我们将编写这个函数。</p> 
 <p style="text-align:center;"></p> 
 <h5 id="3.%20%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0new_topic()" style="text-align:center;">3. 视图函数new_topic()</h5> 
 <p style="text-align:center;">函数new_topic()需要处理两种情形：刚进入new_topic网页（在这种情况下，它应显示一个 空表单）；对提交的表单数据进行处理，并将用户重定向到网页topics：</p> 
 <h6 id="views.py" style="text-align:center;">views.py</h6> 
</blockquote> 
<pre><code class="language-python">from django.shortcuts import render
from django.http import HttpResponseRedirect
from django.core.urlresolvers import reverse
from .models import Topic
from .forms import TopicForm
--snip--
def new_topic(request):
 """添加新主题"""
1 if request.method != 'POST':
 # 未提交数据：创建一个新表单
2 form = TopicForm()
 else:
 # POST提交的数据,对数据进行处理
3 form = TopicForm(request.POST)
4 if form.is_valid():
5 form.save()
6 return HttpResponseRedirect(reverse('learning_logs:topics'))
7 context = {'form': form}
 return render(request, 'learning_logs/new_topic.html', context)</code></pre> 
<blockquote> 
 <p style="text-align:center;">我们导入了HttpResponseRedirect类，用户提交主题后我们将使用这个类将用户重定向到网 页topics。函数reverse()根据指定的URL模型确定URL，这意味着Django将在页面被请求时生成 URL。我们还导入了刚才创建的表单TopicForm。</p> 
</blockquote> 
<h5 id="4.%20GET%E8%AF%B7%E6%B1%82%E5%92%8CPOST%E8%AF%B7%E6%B1%82" style="text-align:center;">4. GET请求和POST请求</h5> 
<blockquote> 
 <p style="text-align:center;">创建Web应用程序时，将用到的两种主要请求类型是GET请求和POST请求。对于只是从服务 器读取数据的页面，使用GET请求；在用户需要通过表单提交信息时，通常使用POST请求。处理 所有表单时，我们都将指定使用POST方法。还有一些其他类型的请求，但这个项目没有使用。</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">函数new_topic()将请求对象作为参数。用户初次请求该网页时，其浏览器将发送GET请求； 用户填写并提交表单时，其浏览器将发送POST请求。根据请求的类型，我们可以确定用户请求 的是空表单（GET请求）还是要求对填写好的表单进行处理（POST请求）。</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">1处的测试确定请求方法是GET还是POST。如果请求方法不是POST，请求就可能是GET， 因此我们需要返回一个空表单（即便请求是其他类型的，返回一个空表单也不会有任何问题）。 我们创建一个TopicForm实例（见2），将其存储在变量form中，再通过上下文字典将这个表单发 送给模板（见7）。由于实例化TopicForm时我们没有指定任何实参，Django将创建一个可供用户 填写的空表单。</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">如果请求方法为POST，将执行else代码块，对提交的表单数据进行处理。我们使用用户输 入的数据（它们存储在request.POST中）创建一个TopicForm实例（见3），这样对象form将包含 用户提交的信息。</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">要将提交的信息保存到数据库，必须先通过检查确定它们是有效的（见）。函数is_valid() 核实用户填写了所有必不可少的字段（表单字段默认都是必不可少的），且输入的数据与要求的 字段类型一致（例如，字段text少于200个字符，这是我们在第18章中的models.py中指定的）。这 种自动验证避免了我们去做大量的工作。如果所有字段都有效，我们就可调用save()（见）， 将表单中的数据写入数据库。保存数据后，就可离开这个页面了。我们使用reverse()获取页面topics的URL，并将其传递给HttpResponseRedirect()（见6），后者将用户的浏览器重定向到页 面topics。在页面topics中，用户将在主题列表中看到他刚输入的主题。</p> 
 <h5 id="5.%20%E6%A8%A1%E6%9D%BFnew_topic" style="text-align:center;">5. 模板new_topic</h5> 
 <p style="text-align:center;">下面来创建新模板new_topic.html，用于显示我们刚创建的表单：</p> 
 <p style="text-align:center;"></p> 
 <h6 id="new_topic.html" style="text-align:center;">new_topic.html</h6> 
</blockquote> 
<pre><code class="language-python">{% extends "learning_logs/base.html" %}
{% block content %}
 &lt;p&gt;Add a new topic:&lt;/p&gt;
1 &lt;form action="{% url 'learning_logs:new_topic' %}" method='post'&gt;
2 {% csrf_token %}
3 {<!-- -->{ form.as_p }}
4 &lt;button name="submit"&gt;add topic&lt;/button&gt;
 &lt;/form&gt;
{% endblock content %}</code></pre> 
<hr> 
<p> </p> 
<p style="text-align:center;"><a href="https://blog.csdn.net/lzy302810/article/details/135153641?spm=1001.2014.3001.5501" title="关于“Python”的核心知识点整理大全37-CSDN博客">关于“Python”的核心知识点整理大全37-CSDN博客</a></p> 
<p style="text-align:center;"><a href="https://blog.csdn.net/lzy302810/article/details/135043856?spm=1001.2014.3001.5501" title="关于“Python”的核心知识点整理大全25-CSDN博客">关于“Python”的核心知识点整理大全25-CSDN博客</a></p> 
<p style="text-align:center;"><a href="https://blog.csdn.net/lzy302810/article/details/134917938?spm=1001.2014.3001.5501" title="关于“Python”的核心知识点整理大全12-CSDN博客">关于“Python”的核心知识点整理大全12-CSDN博客</a></p> 
<h2 id="%E5%BE%80%E6%9C%9F%E5%BF%AB%E9%80%9F%E4%BC%A0%E9%80%81%E9%97%A8%F0%9F%91%86%EF%BC%88%E5%9C%A8%E6%96%87%E7%AB%A0%E6%9C%80%E5%90%8E%EF%BC%89%EF%BC%9A" style="text-align:center;"><strong>往期快速传送门👆（在文章最后）：</strong></h2> 
<h2 id="%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%E6%AC%A2%E8%BF%8E%E8%AE%A2%E9%98%85%E6%94%B6%E8%97%8F%EF%BC%81%E4%B8%93%E6%A0%8F%E5%B0%86%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%81" style="text-align:center;"><a name="t7"></a><a name="t14"></a><a name="t9"></a><a name="t10"></a><a name="t16"></a><strong><a name="t8"></a><a name="t13"></a><a name="t11"></a>感谢大家的支持！欢迎订阅收藏！专栏将持续更新！</strong></h2>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/931150edce2aef4046e4044ce351beac/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">k8s陈述式资源管理（命令行）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/98ac69dd564fb4465d036fe128b1433a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【机器学习】卷积神经网络（四）-实现细节（Caffe框架为例）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>