<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Node】Express模块set、engine、all、use等常用接口解析 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Node】Express模块set、engine、all、use等常用接口解析" />
<meta property="og:description" content="在Express用作node后端框架时，一般我们通过如下方式，在app.js中引入express模块
var app = express(); 引入完毕后，可以用app提供的各个接口引入各个中间件、路由配置、模板引擎等，在app上配置的参数都属于全局配置。接下来对常用的API做出介绍
一、app.all和app.use 1、app.use app.use可以为全局引入模块，比如app.use(cors())引入CORS模块允许跨域访问,app.use(cookieParser())引入cookie-parser模块后可以在请求响应中使用模块提供的便利的cookie处理、配置接口app.use为路径配置中间件或者处理程序，格式如app.use(path,[middleware/routerProcesser])。在app.js中，需要通过全局配置路径处理程序，来为接到的网络请求分配处理程序，处理程序一般使用express.router()模块，在routes文件夹下做出详细定义。app.use的执行顺序为书写顺序 2、app.all app.all属于路由处理器接口，它顾名思义，all是路由中指代所有的请求方式，如all(&#39;/a&#39;),能同时覆盖：get(&#39;/a&#39;) 、post(&#39;/a&#39;)、 put(&#39;/a&#39;) 等。
常用的场景：
路径的任意方式，配置统一的响应头：
app.all(&#39;/*&#39;, function (req, res, next) { res.header(&#34;Access-Control-Allow-Origin&#34;, &#39;http://localhost:3000&#39;); // 设置允许访问的域名 res.header(&#34;Access-Control-Allow-Headers&#34;, &#34;X-Requested-With, Content-Type, withCredentials &#34;); // 设置请求头格式和类型 res.header(&#34;Access-Control-Allow-Methods&#34;, &#34;PUT, POST, GET, DELETE, OPTIONS&#34;); // 允许支持的请求方式 res.header(&#34;Access-Control-Allow-Credentials&#34;, true); // 允许后端发送cookie next(); }); 3、两者的区别 功能定位不同：app.use偏中间件处理，app.all偏路径配置路径匹配方式不同：app.use实际匹配的路径（可接受的路径）是 use中定义的path&#43;middleware中配置的路径；而app.all中对路径的接受采用严格匹配的方式，如果要多匹配，则需要设置通配符* 以下为例子： 二、app.set app.set()函数用于将设置名称分配给value。您可以存储所需的任何值，但可以使用某些名称来配置服务器的行为。
app.set(name, value) 常用场景：设置模板文件夹以及其模板引擎
app.set(&#39;views&#39;, __dirname &#43; &#39;/views&#39;)； app.set(&#39;view engine&#39;, &#39;jade&#39;)； 上面两行是设置views文件夹，即模板文件夹，__dirname是node.js里面的全局变量，即取得执行的js所在的路径，另外__dirname是目前执行的js文件名。所以，app.set(‘views’, __dirname &#43; ‘/views’);是设置views的文件夹。
而app.set(‘view engine’, ‘jade’);是设置express." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1321dc38f42245a644724b2121c1b3bc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-14T16:31:42+08:00" />
<meta property="article:modified_time" content="2023-12-14T16:31:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Node】Express模块set、engine、all、use等常用接口解析</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在Express用作node后端框架时，一般我们通过如下方式，在app.js中引入express模块</p> 
<pre><code class="language-javascript">var app = express();</code></pre> 
<p>引入完毕后，可以用app提供的各个接口引入各个中间件、路由配置、模板引擎等，在app上配置的参数都属于<span style="color:#fe2c24;"><strong>全局配置</strong></span>。接下来对常用的API做出介绍</p> 
<h4>一、app.all和app.use</h4> 
<h5>1、app.use</h5> 
<ul><li><strong>app.use可以为全局引入模块</strong>，比如app.use(cors())引入CORS模块允许跨域访问,app.use(cookieParser())引入cookie-parser模块后可以在请求响应中使用模块提供的便利的cookie处理、配置接口</li><li><strong>app.use为路径配置中间件或者处理程序，</strong>格式如app.use(path,[middleware/routerProcesser])。在app.js中，需要通过全局配置路径处理程序，来为接到的网络请求分配处理程序，<strong>处理程序一般使用express.router()模块，在routes文件夹下做出详细定义</strong>。</li><li>app.use的执行顺序为书写顺序</li></ul> 
<h5>2、app.all</h5> 
<p>app.all属于路由处理器接口，它顾名思义，all是路由中指代所有的请求方式，如all('/a'),能同时覆盖：get('/a') 、post('/a')、 put('/a') 等。</p> 
<p><strong>常用的场景：</strong></p> 
<p>路径的任意方式，配置统一的响应头：</p> 
<pre><code class="language-javascript">app.all('/*', function (req, res, next) {
    res.header("Access-Control-Allow-Origin", 'http://localhost:3000'); // 设置允许访问的域名
    res.header("Access-Control-Allow-Headers", "X-Requested-With, Content-Type, withCredentials "); // 设置请求头格式和类型
    res.header("Access-Control-Allow-Methods", "PUT, POST, GET, DELETE, OPTIONS"); // 允许支持的请求方式
    res.header("Access-Control-Allow-Credentials", true); // 允许后端发送cookie
    next();
});</code></pre> 
<h5>3、两者的区别</h5> 
<ul><li>功能定位不同：app.use偏中间件处理，app.all偏路径配置</li><li>路径匹配方式不同：app.use实际匹配的路径（可接受的路径）是 <span style="color:#fe2c24;"><strong>use中定义的path+middleware中配置的路径</strong></span>；而app.all中对路径的接受采用严格匹配的方式，<span style="color:#fe2c24;"><strong>如果要多匹配，则需要设置通配符*</strong></span>  以下为例子：<img alt="" height="830" src="https://images2.imgbox.com/1c/26/WeNpVI2g_o.png" width="1114"></li></ul> 
<h4>二、app.set</h4> 
<p>app.set()函数用于将设置名称分配给value。您可以存储所需的任何值，但可以使用某些名称来配置服务器的行为。</p> 
<pre><code class="language-javascript">app.set(name, value)</code></pre> 
<p>常用场景：设置模板文件夹以及其模板引擎</p> 
<pre><code class="language-javascript">app.set('views', __dirname + '/views')；
app.set('view engine', 'jade')；</code></pre> 
<p>上面两行是设置views文件夹，即模板文件夹，__dirname是node.js里面的全局变量，即取得执行的js所在的路径，另外__dirname是目前执行的js文件名。所以，app.set(‘views’, __dirname + ‘/views’);是设置views的文件夹。<br> 而app.set(‘view engine’, ‘jade’);是设置express.js所使用的render engine。除了Jade之外express.js还支持EJS(embedded javascript)、Haml、CoffeScript和jQuerytemplate等js模板<br>  </p> 
<h4>三、app.engine</h4> 
<p>app.engine()函数用于将给定的模板引擎回调注册为ext。默认情况下，Express本身将基于文件扩展名require()引擎。</p> 
<pre><code class="language-javascript">app.engine(ext, callback)</code></pre> 
<p><strong>参数：</strong>ext参数指的是文件扩展类型，例如.html等，而callback是作为参数传递的引擎模块，常见的模板引擎有ejs、hbs等</p> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b21c78e28bc9f9798dce15311cd9f54b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringBoot运维中的高级配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f26bc30c2d4d95b983663093dd6a4576/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Windows下ping IP&#43;端口的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>