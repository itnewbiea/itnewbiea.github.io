<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€çˆ¬è™«é€†å‘æ¡ˆä¾‹ã€‘æŸæ˜“äº‘éŸ³ä¹ï¼ˆè¯„è®ºï¼‰jsé€†å‘â€”â€” paramsã€encSecKeyè§£å¯† - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ã€çˆ¬è™«é€†å‘æ¡ˆä¾‹ã€‘æŸæ˜“äº‘éŸ³ä¹ï¼ˆè¯„è®ºï¼‰jsé€†å‘â€”â€” paramsã€encSecKeyè§£å¯†" />
<meta property="og:description" content="å£°æ˜ï¼šæœ¬æ–‡åªä½œå­¦ä¹ ç ”ç©¶ï¼Œç¦æ­¢ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™åæœè‡ªè´Ÿï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·å‘ŠçŸ¥åˆ é™¤ï¼Œè°¢è°¢ï¼
ã€çˆ¬è™«é€†å‘æ¡ˆä¾‹ã€‘æŸæ˜“äº‘éŸ³ä¹ï¼ˆè¯„è®ºï¼‰jsé€†å‘â€”â€” paramsã€encSecKeyè§£å¯† 1ã€å‰è¨€2ã€è¡ŒåŠ¨3ã€æºç 4ã€å·å¤– 1ã€å‰è¨€ ä»Šå¤©é€†å‘çš„è¿™ä¸ªç½‘ç«™ æŸæ˜“äº‘éŸ³ä¹ æ­Œæ›²çš„è¯„è®ºåˆ—è¡¨
è€Œè¦æ‹¿åˆ°è¯„è®ºåˆ—è¡¨çˆ¬è™«å‘é€çš„è¡¨å•éœ€è¦ä¸¤ä¸ªå‚æ•° params å’Œ encSecKeyã€‚è¿™ä¸¤ä¸ªç©æ„æ˜¯åŠ å¯†çš„ï¼Œæ‰€ä»¥é‡ç‚¹å°±æ˜¯æ€ä¹ˆæå®šè¿™ä¸¤ä¸ªå‚æ•°ã€‚
2ã€è¡ŒåŠ¨ è¯ä¸å¤šè¯´ï¼Œç›´æ¥åˆ†æã€‚
é¦–å…ˆæˆ‘ä»¬è¿›å…¥åˆ°ç½‘æ˜“äº‘ï¼Œéšä¾¿è¿›å…¥æŸä¸€é¦–æ­Œè¯¦æƒ…é¡µã€‚é€šè¿‡æŠ“åŒ…åˆ†æï¼Œå¾ˆè½»æ¾çš„æ‰¾åˆ°äº†æ¯ä¸€é¦–éŸ³ä¹çš„è¯„è®ºçš„ä½ç½®ï¼Œç°åœ¨åªéœ€è¦è®¿é—® https://music.163.com/weapi/comment/resource/comments/get?csrf_token= å°±å¯ä»¥äº†ã€‚
å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªpostè¯·æ±‚ï¼Œè€Œä¸”æºå¸¦çš„è¿™ä¸¤ä¸ªå‚æ•°è¿™ä¹ˆå¤§ä¸€å¨ï¼Œä¸ç”¨å¤šæƒ³ï¼Œç»å¯¹æ˜¯ä¸ªåŠ å¯†å‚æ•°ã€‚ä½†æ˜¯å¤§å®¶ä¸è¦æ…Œï¼Œè®©æˆ‘ä»¬å…¨å±€æœç´¢ä¸€ä¸‹ï¼ˆè·Ÿæ ˆä¹Ÿå¯ä»¥ï¼Œä½†æˆ‘è§‰å¾—è¿™é‡Œç›´æ¥æœç´¢è¦å¿«ä¸€ç‚¹ï¼‰ï¼Œä»”ç»†åˆ†æä¸€æ³¢ã€‚
é€šè¿‡æœç´¢ä»»æ„ä¸€ä¸ªå‚æ•°å¯ä»¥å¿«é€Ÿæ‰¾åˆ°åŠ å¯†çš„ä½ç½®ï¼Œå¯ä»¥çœ‹åˆ°
æ¥ä¸‹æ¥å°±æ˜¯æ‰“æ–­ç‚¹åˆ†æã€‚
é¦–å…ˆå¯ä»¥ç¡®å®šçš„æ˜¯ params= bVe7X.encText,
encSecKey=bVe7X.encSecKey
è€Œ bVe7X åˆç­‰äº window.asrsea è¿™ä¸ªå‡½æ•°ï¼Œè§‚å¯Ÿå¯çŸ¥è¿™ä¸ªå‡½æ•°æ˜¯éœ€è¦å››ä¸ªå‚æ•°çš„ï¼Œ
åœ¨æ§åˆ¶å°ä¸­æ‰“å°ä¸€ä¸‹å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š
ç»è¿‡å¤šæ¬¡æµ‹è¯•ï¼Œå‘ç°åé¢ä¸‰ä¸ªå‚æ•°æ˜¯ä¸å˜çš„ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œè€Œç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿåªæœ‰ ridã€threadIdã€cursor ä¼šå˜ï¼Œrid å’Œ threadId è¿˜æ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”æ˜¯ R_SO_4_ åŠ ä¸Šæ­Œæ›²çš„ idï¼Œcursor æ˜¯æ¯«ç§’çš„æ—¶é—´æˆ³ï¼Œé‚£è¿™å°±ç®€å•äº†ã€‚
å¥½äº†ï¼Œå››ä¸ªå‚æ•°å·²ç»æå®šï¼Œæ¥ä¸‹æ¥å°±æ˜¯å…³é”®äº†ï¼Œè¿›å…¥ window.asrsea å‡½æ•°
å¯ä»¥çœ‹åˆ°ï¼Œd å°±æ˜¯ window.asrsea è¿™ä¸ªå‡½æ•°ã€‚è¦ä¼ å…¥çš„å››ä¸ªå‚æ•°æˆ‘ä»¬å·²ç»çŸ¥é“äº†ã€‚
ä¸ç®¡é‚£ä¹ˆå¤šï¼Œç›´æ¥å¤åˆ¶åˆ° js æ–‡ä»¶é‡Œçœ‹çœ‹ç»“æœã€‚
ä¸ºäº†é¿å…ä¸åé¢å…¶ä»–çš„å‚æ•°èµ·å†²çªï¼Œè¿™é‡Œæˆ‘å°±æ”¹äº†ä¸‹åå­—ï¼Œç„¶åè¿è¡Œã€‚
æ„æ–™ä¹‹ä¸­ï¼ŒæŠ¥é”™äº†ã€‚
è¯´ç®€å•ä¹Ÿç®€å•ï¼ŒæŠ¥é”™äº†ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç¼ºä»€ä¹ˆè¡¥ä»€ä¹ˆï¼Œè¿™é‡Œå°±å¤§å®¶å» js é¡µé¢æ‰¾è‡ªå·±æ…¢æ…¢å»è¡¥äº†å“ˆã€‚
å¦å¤–ï¼Œå½“è¡¥åˆ°bå‡½æ•°çš„æ—¶å€™ï¼Œä¼šè¯´ CryptoJS is not definedï¼Œä»”ç»†ä¸€çœ‹åŸæ¥ b å‡½æ•°é‡Œé¢æœ‰ä¸ª AES åŠ å¯†ï¼Œèƒ½è°ƒåº“å°±è°ƒåº“ï¼Œè¿™é‡Œå°±npm install crypto-jsï¼Œç„¶åå¯¼å…¥å°±å¯ä»¥äº†
åé¢çš„å°±æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜äº†ã€‚è¡¥å®Œå‡½æ•°åï¼ˆå¤§æ¦‚æœ‰34ä¸ªå‡½æ•°å·¦å³ï¼Œ400è¡Œå·¦å³çš„ js ä»£ç ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯é¡ºåˆ©çš„æ‹¿åˆ°äº†æƒ³è¦çš„ä¸œè¥¿ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/78b7c2fc9d49979650556bf5f195d6b4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-06T16:13:32+08:00" />
<meta property="article:modified_time" content="2023-08-06T16:13:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€çˆ¬è™«é€†å‘æ¡ˆä¾‹ã€‘æŸæ˜“äº‘éŸ³ä¹ï¼ˆè¯„è®ºï¼‰jsé€†å‘â€”â€” paramsã€encSecKeyè§£å¯†</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>å£°æ˜ï¼šæœ¬æ–‡åªä½œå­¦ä¹ ç ”ç©¶ï¼Œç¦æ­¢ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™åæœè‡ªè´Ÿï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·å‘ŠçŸ¥åˆ é™¤ï¼Œè°¢è°¢ï¼<br> </p> 
<div class="toc"> 
 <h4>ã€çˆ¬è™«é€†å‘æ¡ˆä¾‹ã€‘æŸæ˜“äº‘éŸ³ä¹ï¼ˆè¯„è®ºï¼‰jsé€†å‘â€”â€” paramsã€encSecKeyè§£å¯†</h4> 
 <ul><li><a href="#1_2" rel="nofollow">1ã€å‰è¨€</a></li><li><a href="#2_11" rel="nofollow">2ã€è¡ŒåŠ¨</a></li><li><a href="#3_142" rel="nofollow">3ã€æºç </a></li><li><a href="#4_146" rel="nofollow">4ã€å·å¤–</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1_2"></a>1ã€å‰è¨€</h2> 
<p>ä»Šå¤©é€†å‘çš„è¿™ä¸ªç½‘ç«™ <a href="https://music.163.com/#/msg/m/private?index=1" rel="nofollow">æŸæ˜“äº‘éŸ³ä¹</a> æ­Œæ›²çš„è¯„è®ºåˆ—è¡¨</p> 
<p><img src="https://images2.imgbox.com/09/89/KAipKcHe_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>è€Œè¦æ‹¿åˆ°è¯„è®ºåˆ—è¡¨çˆ¬è™«å‘é€çš„è¡¨å•éœ€è¦ä¸¤ä¸ªå‚æ•° params å’Œ encSecKeyã€‚è¿™ä¸¤ä¸ªç©æ„æ˜¯åŠ å¯†çš„ï¼Œæ‰€ä»¥é‡ç‚¹å°±æ˜¯æ€ä¹ˆæå®šè¿™ä¸¤ä¸ªå‚æ•°ã€‚</p> 
<p><img src="https://images2.imgbox.com/c2/31/CEO1nBY9_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="2_11"></a>2ã€è¡ŒåŠ¨</h2> 
<p>è¯ä¸å¤šè¯´ï¼Œç›´æ¥åˆ†æã€‚</p> 
<p>é¦–å…ˆæˆ‘ä»¬è¿›å…¥åˆ°ç½‘æ˜“äº‘ï¼Œéšä¾¿è¿›å…¥æŸä¸€é¦–æ­Œè¯¦æƒ…é¡µã€‚é€šè¿‡æŠ“åŒ…åˆ†æï¼Œå¾ˆè½»æ¾çš„æ‰¾åˆ°äº†æ¯ä¸€é¦–éŸ³ä¹çš„è¯„è®ºçš„ä½ç½®ï¼Œç°åœ¨åªéœ€è¦è®¿é—® https://music.163.com/weapi/comment/resource/comments/get?csrf_token= å°±å¯ä»¥äº†ã€‚</p> 
<p>å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªpostè¯·æ±‚ï¼Œè€Œä¸”æºå¸¦çš„è¿™ä¸¤ä¸ªå‚æ•°è¿™ä¹ˆå¤§ä¸€å¨ï¼Œä¸ç”¨å¤šæƒ³ï¼Œç»å¯¹æ˜¯ä¸ªåŠ å¯†å‚æ•°ã€‚ä½†æ˜¯å¤§å®¶ä¸è¦æ…Œï¼Œè®©æˆ‘ä»¬å…¨å±€æœç´¢ä¸€ä¸‹ï¼ˆè·Ÿæ ˆä¹Ÿå¯ä»¥ï¼Œä½†æˆ‘è§‰å¾—è¿™é‡Œç›´æ¥æœç´¢è¦å¿«ä¸€ç‚¹ï¼‰ï¼Œä»”ç»†åˆ†æä¸€æ³¢ã€‚</p> 
<p>é€šè¿‡æœç´¢ä»»æ„ä¸€ä¸ªå‚æ•°å¯ä»¥å¿«é€Ÿæ‰¾åˆ°åŠ å¯†çš„ä½ç½®ï¼Œå¯ä»¥çœ‹åˆ°</p> 
<p><img src="https://images2.imgbox.com/fa/a4/S7LzgvEn_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ¥ä¸‹æ¥å°±æ˜¯æ‰“æ–­ç‚¹åˆ†æã€‚</p> 
<p>é¦–å…ˆå¯ä»¥ç¡®å®šçš„æ˜¯ params= bVe7X.encText,</p> 
<p>encSecKey=bVe7X.encSecKey</p> 
<p>è€Œ bVe7X åˆç­‰äº window.asrsea è¿™ä¸ªå‡½æ•°ï¼Œè§‚å¯Ÿå¯çŸ¥è¿™ä¸ªå‡½æ•°æ˜¯éœ€è¦å››ä¸ªå‚æ•°çš„ï¼Œ</p> 
<p><img src="https://images2.imgbox.com/b0/e4/Kwnc7iUl_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åœ¨æ§åˆ¶å°ä¸­æ‰“å°ä¸€ä¸‹å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š</p> 
<p><img src="https://images2.imgbox.com/d8/f7/gp7Dl4lK_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç»è¿‡å¤šæ¬¡æµ‹è¯•ï¼Œå‘ç°åé¢ä¸‰ä¸ªå‚æ•°æ˜¯ä¸å˜çš„ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œè€Œç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿåªæœ‰ ridã€threadIdã€cursor ä¼šå˜ï¼Œrid å’Œ threadId è¿˜æ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”æ˜¯ <code>R_SO_4_</code> åŠ ä¸Šæ­Œæ›²çš„ <code>id</code>ï¼Œcursor æ˜¯æ¯«ç§’çš„æ—¶é—´æˆ³ï¼Œé‚£è¿™å°±ç®€å•äº†ã€‚</p> 
<p><img src="https://images2.imgbox.com/50/99/X02uA5H0_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å¥½äº†ï¼Œå››ä¸ªå‚æ•°å·²ç»æå®šï¼Œæ¥ä¸‹æ¥å°±æ˜¯å…³é”®äº†ï¼Œè¿›å…¥ window.asrsea å‡½æ•°</p> 
<p><img src="https://images2.imgbox.com/c9/76/L17AooU5_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å¯ä»¥çœ‹åˆ°ï¼Œd å°±æ˜¯ window.asrsea è¿™ä¸ªå‡½æ•°ã€‚è¦ä¼ å…¥çš„å››ä¸ªå‚æ•°æˆ‘ä»¬å·²ç»çŸ¥é“äº†ã€‚</p> 
<p>ä¸ç®¡é‚£ä¹ˆå¤šï¼Œç›´æ¥å¤åˆ¶åˆ° js æ–‡ä»¶é‡Œçœ‹çœ‹ç»“æœã€‚</p> 
<p>ä¸ºäº†é¿å…ä¸åé¢å…¶ä»–çš„å‚æ•°èµ·å†²çªï¼Œè¿™é‡Œæˆ‘å°±æ”¹äº†ä¸‹åå­—ï¼Œç„¶åè¿è¡Œã€‚</p> 
<p><img src="https://images2.imgbox.com/6a/67/4qQyK1d9_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ„æ–™ä¹‹ä¸­ï¼ŒæŠ¥é”™äº†ã€‚</p> 
<p><img src="https://images2.imgbox.com/39/71/OjpLnTdU_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>è¯´ç®€å•ä¹Ÿç®€å•ï¼ŒæŠ¥é”™äº†ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç¼ºä»€ä¹ˆè¡¥ä»€ä¹ˆï¼Œè¿™é‡Œå°±å¤§å®¶å» js é¡µé¢æ‰¾è‡ªå·±æ…¢æ…¢å»è¡¥äº†å“ˆã€‚</p> 
<p><img src="https://images2.imgbox.com/80/e8/V6oy8p0K_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å¦å¤–ï¼Œå½“è¡¥åˆ°bå‡½æ•°çš„æ—¶å€™ï¼Œä¼šè¯´ CryptoJS is not definedï¼Œä»”ç»†ä¸€çœ‹åŸæ¥ b å‡½æ•°é‡Œé¢æœ‰ä¸ª AES åŠ å¯†ï¼Œèƒ½è°ƒåº“å°±è°ƒåº“ï¼Œè¿™é‡Œå°±npm install crypto-jsï¼Œç„¶åå¯¼å…¥å°±å¯ä»¥äº†</p> 
<p><img src="https://images2.imgbox.com/f9/28/VAfPcjBu_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åé¢çš„å°±æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜äº†ã€‚è¡¥å®Œå‡½æ•°åï¼ˆå¤§æ¦‚æœ‰34ä¸ªå‡½æ•°å·¦å³ï¼Œ400è¡Œå·¦å³çš„ js ä»£ç ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯é¡ºåˆ©çš„æ‹¿åˆ°äº†æƒ³è¦çš„ä¸œè¥¿ã€‚</p> 
<p><img src="https://images2.imgbox.com/2f/e1/k7DZz2VR_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/ff/34/EmksKZRf_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>è™½ç„¶è¿‡ç¨‹è‰°è¾›ï¼Œå¾ˆç´¯çš„ï¼Œä¸€å‘³ä»¥ä¸ºæ‹¿é”™äº†ï¼Œä½†ç»“æœæ˜¯å¥½çš„ã€‚æ¥ä¸‹æ¥å°±æ˜¯å†™ä»£ç æ‹¿è¯„è®ºäº†ï¼Œè¿™é‡Œæˆ‘ç”¨çš„æ˜¯ execjs åº“æ¥æ‰§è¡Œ js ä»£ç ï¼Œå®Œæ•´ Python ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> time

<span class="token keyword">import</span> execjs
<span class="token keyword">import</span> requests
<span class="token keyword">from</span> fake_useragent <span class="token keyword">import</span> UserAgent


<span class="token keyword">def</span> <span class="token function">get_argument</span><span class="token punctuation">(</span>music_id<span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'./comments.js'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        time_now <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># ç¬¬ä¸€ä¸ª {} ç¬¦å·è¢«è¯¯è¯†åˆ«ä¸ºå ä½ç¬¦ï¼Œå¯¼è‡´åé¢çš„é”®å€¼å¯¹æ— æ³•æ­£ç¡®æ›¿æ¢ï¼Œå¯ä»¥ä½¿ç”¨åŒå¤§æ‹¬å· {<!-- -->{}} æ¥è¡¨ç¤ºå­—é¢æ„ä¹‰ä¸Šçš„å¤§æ‹¬å·</span>
        aa <span class="token operator">=</span> <span class="token string">'{<!-- -->{"rid":"R_SO_4_{}","threadId":"R_SO_4_{}","pageNo":"{}","pageSize":"20","cursor":"{}","offset":"0","orderType":"1","csrf_token":""}}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>
            music_id<span class="token punctuation">,</span> music_id<span class="token punctuation">,</span> page<span class="token punctuation">,</span> time_now<span class="token punctuation">)</span>
        bb <span class="token operator">=</span> <span class="token string">'010001'</span>
        cc <span class="token operator">=</span> <span class="token string">'00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7'</span>
        dd <span class="token operator">=</span> <span class="token string">'0CoJUm6Qyw8W8jud'</span>
        argument_data <span class="token operator">=</span> execjs<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>call<span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span> aa<span class="token punctuation">,</span> bb<span class="token punctuation">,</span> cc<span class="token punctuation">,</span> dd<span class="token punctuation">)</span>
        params <span class="token operator">=</span> argument_data<span class="token punctuation">[</span><span class="token string">'encText'</span><span class="token punctuation">]</span>
        encSecKey <span class="token operator">=</span> argument_data<span class="token punctuation">[</span><span class="token string">'encSecKey'</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> params<span class="token punctuation">,</span> encSecKey


<span class="token keyword">def</span> <span class="token function">get_comment</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> encSecKey<span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">'https://music.163.com/weapi/comment/resource/comments/get?csrf_token='</span>
    header <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"Origin"</span><span class="token punctuation">:</span> <span class="token string">"https://music.163.com"</span><span class="token punctuation">,</span>
        <span class="token string">"Pragma"</span><span class="token punctuation">:</span> <span class="token string">"no-cache"</span><span class="token punctuation">,</span>
        <span class="token string">"Referer"</span><span class="token punctuation">:</span> <span class="token string">"https://music.163.com/song?id=65766"</span><span class="token punctuation">,</span>
        <span class="token string">"Sec-Ch-Ua"</span><span class="token punctuation">:</span> <span class="token string">"\"Not/A)Brand\";v=\"99\", \"Google Chrome\";v=\"115\", \"Chromium\";v=\"115\""</span><span class="token punctuation">,</span>
        <span class="token string">"Sec-Ch-Ua-Mobile"</span><span class="token punctuation">:</span> <span class="token string">"?0"</span><span class="token punctuation">,</span>
        <span class="token string">"Sec-Ch-Ua-Platform"</span><span class="token punctuation">:</span> <span class="token string">"\"Windows\""</span><span class="token punctuation">,</span>
        <span class="token string">"Sec-Fetch-Dest"</span><span class="token punctuation">:</span> <span class="token string">"empty"</span><span class="token punctuation">,</span>
        <span class="token string">"Sec-Fetch-Mode"</span><span class="token punctuation">:</span> <span class="token string">"cors"</span><span class="token punctuation">,</span>
        <span class="token string">"Sec-Fetch-Site"</span><span class="token punctuation">:</span> <span class="token string">"same-origin"</span><span class="token punctuation">,</span>
        <span class="token string">"User-Agent"</span><span class="token punctuation">:</span> UserAgent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>random
    <span class="token punctuation">}</span>
    data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"params"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>params<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token string">"encSecKey"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>encSecKey<span class="token punctuation">}</span></span><span class="token string">"</span></span>
    <span class="token punctuation">}</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span>
    data <span class="token operator">=</span> response<span class="token punctuation">.</span>text
    <span class="token keyword">return</span> data


<span class="token keyword">def</span> <span class="token function">parse_data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    json_data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    comments <span class="token operator">=</span> json_data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'comments'</span><span class="token punctuation">]</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'é‡‡é›†è¯„è®ºæ•°æ®å¦‚ä¸‹ï¼š'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> comments<span class="token punctuation">:</span>
        comment <span class="token operator">=</span> i<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        music_id <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥æ­Œæ›²idï¼š'</span><span class="token punctuation">)</span>
        page <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥è¦é‡‡é›†ç¬¬å‡ é¡µè¯„è®ºï¼š'</span><span class="token punctuation">)</span>
        params<span class="token punctuation">,</span> encSecKey <span class="token operator">=</span> get_argument<span class="token punctuation">(</span>music_id<span class="token punctuation">,</span> page<span class="token punctuation">)</span>
        response_data <span class="token operator">=</span> get_comment<span class="token punctuation">(</span>params<span class="token punctuation">,</span> encSecKey<span class="token punctuation">)</span>
        parse_data<span class="token punctuation">(</span>response_data<span class="token punctuation">)</span>
        is_continue <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'æ˜¯å¦ç»§ç»­é‡‡é›†ï¼ˆy/nï¼‰ï¼š'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> is_continue <span class="token operator">==</span> <span class="token string">'n'</span><span class="token punctuation">:</span>
            <span class="token keyword">break</span>

</code></pre> 
<p>æˆ‘è¿™é‡Œæ˜¯å°è£…æˆä¸€æ¬¡é‡‡é›†ä¸€é¡µè¯„è®ºï¼Œå¦‚æœéœ€è¦é‡‡é›†å…¨éƒ¨è¯„è®ºçš„éœ€æ±‚ï¼Œè‡ªå·±ä¿®æ”¹ä¸€ä¸‹å°±å¯ä»¥äº†</p> 
<h2><a id="3_142"></a>3ã€æºç </h2> 
<p>Githubï¼š<a href="https://github.com/Dancing-Pierre/NetEase_cloud_music_review_reverse">ç½‘æ˜“äº‘éŸ³ä¹PCç«¯é€†å‘</a><br> CSDNï¼š<a href="https://download.csdn.net/download/a6661314/88135031">ç½‘æ˜“äº‘éŸ³ä¹PCç«¯ js é€†å‘èµ„æº</a></p> 
<h2><a id="4_146"></a>4ã€å·å¤–</h2> 
<p>å¦‚æœæˆ‘çš„åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ã€å¦‚æœä½ å–œæ¬¢æˆ‘çš„åšå®¢å†…å®¹ï¼Œè¯· â€œğŸ‘ç‚¹èµâ€ â€œâœï¸è¯„è®ºâ€ â€œğŸ’™æ”¶è—â€ ä¸€é”®ä¸‰è¿å“¦ï¼<br> ã€ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»å…³æ³¨æˆ‘| è·å–æ›´å¤šæºç  | å®šåˆ¶æºç ã€‘å¤§å­¦ç”Ÿæ¯•è®¾æ¨¡æ¿ã€æœŸæœ«å¤§ä½œä¸šæ¨¡æ¿ ã€Echartså¤§æ•°æ®å¯è§†åŒ–ã€çˆ¬è™«é€†å‘ç­‰! ã€Œä¸€èµ·æ¢è®¨ ï¼Œäº’ç›¸å­¦ä¹ ã€ï¼ï¼ˆvxï¼špython812146ï¼‰<br> ä»¥ä¸Šå†…å®¹æŠ€æœ¯ç›¸å…³é—®é¢˜ğŸ˜ˆæ¬¢è¿ä¸€èµ·äº¤æµå­¦ä¹ ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ”¥</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5e7dc464945e2ba5f8eec237fa10596f/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Centoså¼€æœºæ— æ³•æ­£å¸¸å¯åŠ¨?</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/516c862e50ff484a51c964236e1c1d6f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">è®­ç»ƒå¼ºåŒ–å­¦ä¹ çš„ç»éªŒå›æ”¾ç­–ç•¥ï¼šexperience replay</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>