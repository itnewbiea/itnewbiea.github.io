<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【鸿蒙】HarMonyOS的UI组件学习九之计算器 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【鸿蒙】HarMonyOS的UI组件学习九之计算器" />
<meta property="og:description" content="计算器是电脑和手机都必不可少的一款软件，今天分享在鸿蒙系统上开发计算器软件。
先看功能效果:
这里演示了一下加法，该计算器中实现了加减乘除求余，开根号，倒数等所有功能。其他功能的演示这里就不浪费篇幅了。
接下来看界面的设计，这里设计了两种边框主题，一个是显示计算过程和结果的两个Text组件的边框，在graphic文件夹下新建xml文件:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;shape xmlns:ohos=&#34;http://schemas.huawei.com/res/ohos&#34; ohos:shape=&#34;rectangle&#34;&gt; &lt;corners ohos:radius=&#34;20&#34; /&gt; &lt;solid ohos:color=&#34;#FFffff&#34;/&gt; &lt;stroke ohos:color=&#34;#0066FF&#34; ohos:width=&#34;10&#34;/&gt; &lt;/shape&gt; 再新建一个xml文件，设计按钮的背景样式。
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;shape xmlns:ohos=&#34;http://schemas.huawei.com/res/ohos&#34; ohos:shape=&#34;rectangle&#34;&gt; &lt;corners ohos:radius=&#34;20&#34; /&gt; &lt;solid ohos:color=&#34;#FF5151EC&#34;/&gt; &lt;/shape&gt; 接下来就是计算器的界面搭建的xml代码:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;DirectionalLayout xmlns:ohos=&#34;http://schemas.huawei.com/res/ohos&#34; ohos:height=&#34;match_parent&#34; ohos:width=&#34;match_parent&#34; ohos:orientation=&#34;vertical&#34;&gt; &lt;Text ohos:height=&#34;60fp&#34; ohos:width=&#34;match_parent&#34; ohos:background_element=&#34;#00f&#34; ohos:padding=&#34;10fp&#34; ohos:text=&#34;计算器&#34; ohos:text_alignment=&#34;center&#34; ohos:text_color=&#34;#fff&#34; ohos:text_size=&#34;30fp&#34;/&gt; &lt;TableLayout ohos:height=&#34;match_parent&#34; ohos:width=&#34;match_parent&#34; ohos:column_count=&#34;1&#34; ohos:orientation=&#34;vertical&#34; ohos:padding=&#34;10fp&#34; ohos:row_count=&#34;8&#34;&gt; &lt;DirectionalLayout ohos:height=&#34;match_content&#34; ohos:width=&#34;match_parent&#34; ohos:background_element=&#34;$graphic:background_textfield&#34; ohos:orientation=&#34;vertical&#34;&gt; &lt;Text ohos:id=&#34;$&#43;id:tv_jsq1&#34; ohos:height=&#34;40fp&#34; ohos:width=&#34;match_parent&#34; ohos:text_color=&#34;#000&#34; ohos:hint=&#34;请在按键上输入计算的数字&#34; ohos:hint_color=&#34;#aaa&#34; ohos:padding=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/947433f1e14556cd93b751accf1304b9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-02T16:36:56+08:00" />
<meta property="article:modified_time" content="2021-07-02T16:36:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【鸿蒙】HarMonyOS的UI组件学习九之计算器</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>计算器是电脑和手机都必不可少的一款软件，今天分享在鸿蒙系统上开发计算器软件。</p> 
<p>先看功能效果:</p> 
<p><img alt="" height="508" src="https://images2.imgbox.com/70/a2/1i74QRwE_o.png" width="248"><img alt="" height="502" src="https://images2.imgbox.com/e6/91/YcdyqKbG_o.png" width="247"><img alt="" height="502" src="https://images2.imgbox.com/64/17/bsSGuGME_o.png" width="245"><img alt="" height="500" src="https://images2.imgbox.com/59/fe/KjIL4KGq_o.png" width="247"></p> 
<p><img alt="" height="498" src="https://images2.imgbox.com/b0/18/xcbOROMV_o.png" width="250"><img alt="" height="494" src="https://images2.imgbox.com/71/64/2HIHQSUj_o.png" width="245"></p> 
<p>这里演示了一下加法，该计算器中实现了<span style="color:#fe2c24;">加减乘除求余，开根号，倒数</span>等所有功能。其他功能的演示这里就不浪费篇幅了。</p> 
<p>接下来看界面的设计，这里设计了两种边框主题，一个是显示计算过程和结果的两个Text组件的边框，在graphic文件夹下新建xml文件:</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape
    xmlns:ohos="http://schemas.huawei.com/res/ohos"
    ohos:shape="rectangle"&gt;
    &lt;corners
        ohos:radius="20"
        /&gt;
    &lt;solid
        ohos:color="#FFffff"/&gt;
    &lt;stroke
        ohos:color="#0066FF"
        ohos:width="10"/&gt;
&lt;/shape&gt;</code></pre> 
<p>再新建一个xml文件，设计按钮的背景样式。</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape
    xmlns:ohos="http://schemas.huawei.com/res/ohos"
    ohos:shape="rectangle"&gt;
    &lt;corners
        ohos:radius="20"
        /&gt;
    &lt;solid
        ohos:color="#FF5151EC"/&gt;
&lt;/shape&gt;</code></pre> 
<p>接下来就是<span style="color:#38d8f0;">计算器</span>的界面搭建的xml代码:</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;DirectionalLayout
    xmlns:ohos="http://schemas.huawei.com/res/ohos"
    ohos:height="match_parent"
    ohos:width="match_parent"
    ohos:orientation="vertical"&gt;

    &lt;Text
        ohos:height="60fp"
        ohos:width="match_parent"
        ohos:background_element="#00f"
        ohos:padding="10fp"
        ohos:text="计算器"
        ohos:text_alignment="center"
        ohos:text_color="#fff"
        ohos:text_size="30fp"/&gt;

    &lt;TableLayout
        ohos:height="match_parent"
        ohos:width="match_parent"
        ohos:column_count="1"
        ohos:orientation="vertical"
        ohos:padding="10fp"
        ohos:row_count="8"&gt;

        &lt;DirectionalLayout
            ohos:height="match_content"
            ohos:width="match_parent"
            ohos:background_element="$graphic:background_textfield"
            ohos:orientation="vertical"&gt;
            &lt;Text
                ohos:id="$+id:tv_jsq1"
                ohos:height="40fp"
                ohos:width="match_parent"
                ohos:text_color="#000"
                ohos:hint="请在按键上输入计算的数字"
                ohos:hint_color="#aaa"
                ohos:padding="5fp"
                ohos:text_alignment="vertical_center|right"
                ohos:text_size="20fp"/&gt;

            &lt;Text
                ohos:id="$+id:tv_jsq2"
                ohos:height="40fp"
                ohos:width="match_parent"
                ohos:text_color="#000"
                ohos:hint="请在按键上输入计算的数字"
                ohos:hint_color="#aaa"
                ohos:padding="5fp"
                ohos:text_alignment="vertical_center|right"
                ohos:text_size="25fp"/&gt;
        &lt;/DirectionalLayout&gt;

        &lt;DirectionalLayout
            ohos:height="match_content"
            ohos:width="match_parent"
            ohos:alignment="horizontal_center"
            ohos:orientation="horizontal"
            ohos:top_margin="10fp"&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_1"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="MC"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_2"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="MR"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_3"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="MS"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_4"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="M+"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_5"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="-"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;
        &lt;/DirectionalLayout&gt;

        &lt;DirectionalLayout
            ohos:height="match_content"
            ohos:width="match_parent"
            ohos:alignment="horizontal_center"
            ohos:orientation="horizontal"&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_6"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="←"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_7"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="CE"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_8"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="C"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_9"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="±"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_10"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="√"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;
        &lt;/DirectionalLayout&gt;

        &lt;DirectionalLayout
            ohos:height="match_content"
            ohos:width="match_parent"
            ohos:alignment="horizontal_center"
            ohos:orientation="horizontal"&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_11"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="7"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_12"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="8"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_13"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="9"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_14"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="/"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_15"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="%"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;
        &lt;/DirectionalLayout&gt;

        &lt;DirectionalLayout
            ohos:height="match_content"
            ohos:width="match_parent"
            ohos:alignment="horizontal_center"
            ohos:orientation="horizontal"&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_16"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="4"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_17"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="5"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_18"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="6"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_19"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="*"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_20"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="1/X"
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;
        &lt;/DirectionalLayout&gt;

        &lt;DirectionalLayout
            ohos:height="match_content"
            ohos:width="match_parent"
            ohos:alignment="center"
            ohos:orientation="horizontal"&gt;

            &lt;DirectionalLayout
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:orientation="vertical"
                ohos:weight="5"&gt;

                &lt;DirectionalLayout
                    ohos:height="match_content"
                    ohos:width="match_parent"
                    ohos:alignment="center"
                    ohos:orientation="horizontal"&gt;

                    &lt;Button
                        ohos:id="$+id:btn_jsq_21"
                        ohos:height="match_content"
                        ohos:width="match_content"
                        ohos:background_element="$graphic:background_button_jsq"
                        ohos:margin="5fp"
                        ohos:padding="10fp"
                        ohos:text="1"
                        ohos:text_color="#fff"
                        ohos:text_size="22fp"
                        ohos:weight="1"/&gt;

                    &lt;Button
                        ohos:id="$+id:btn_jsq_22"
                        ohos:height="match_content"
                        ohos:width="match_content"
                        ohos:background_element="$graphic:background_button_jsq"
                        ohos:margin="5fp"
                        ohos:padding="10fp"
                        ohos:text="2"
                        ohos:text_color="#fff"
                        ohos:text_size="22fp"
                        ohos:weight="1"/&gt;

                    &lt;Button
                        ohos:id="$+id:btn_jsq_23"
                        ohos:height="match_content"
                        ohos:width="match_content"
                        ohos:background_element="$graphic:background_button_jsq"
                        ohos:margin="5fp"
                        ohos:padding="10fp"
                        ohos:text="3"
                        ohos:text_color="#fff"
                        ohos:text_size="22fp"
                        ohos:weight="1"/&gt;

                    &lt;Button
                        ohos:id="$+id:btn_jsq_24"
                        ohos:height="match_content"
                        ohos:width="match_content"
                        ohos:background_element="$graphic:background_button_jsq"
                        ohos:margin="5fp"
                        ohos:padding="10fp"
                        ohos:text="-"
                        ohos:text_color="#fff"
                        ohos:text_size="22fp"
                        ohos:weight="1"/&gt;
                &lt;/DirectionalLayout&gt;

                &lt;DirectionalLayout
                    ohos:height="match_content"
                    ohos:width="match_parent"
                    ohos:alignment="center"
                    ohos:orientation="horizontal"&gt;

                    &lt;Button
                        ohos:id="$+id:btn_jsq_25"
                        ohos:height="match_content"
                        ohos:width="match_content"
                        ohos:background_element="$graphic:background_button_jsq"
                        ohos:margin="5fp"
                        ohos:padding="10fp"
                        ohos:text="0"
                        ohos:text_color="#fff"
                        ohos:text_size="22fp"
                        ohos:weight="2"/&gt;

                    &lt;Button
                        ohos:id="$+id:btn_jsq_26"
                        ohos:height="match_content"
                        ohos:width="match_content"
                        ohos:background_element="$graphic:background_button_jsq"
                        ohos:margin="5fp"
                        ohos:padding="10fp"
                        ohos:text="."
                        ohos:text_color="#fff"
                        ohos:text_size="22fp"
                        ohos:weight="1"/&gt;

                    &lt;Button
                        ohos:id="$+id:btn_jsq_27"
                        ohos:height="match_content"
                        ohos:width="match_content"
                        ohos:background_element="$graphic:background_button_jsq"
                        ohos:margin="5fp"
                        ohos:padding="10fp"
                        ohos:text="+"
                        ohos:text_color="#fff"
                        ohos:text_size="22fp"
                        ohos:weight="1"/&gt;
                &lt;/DirectionalLayout&gt;
            &lt;/DirectionalLayout&gt;

            &lt;Button
                ohos:id="$+id:btn_jsq_28"
                ohos:height="match_parent"
                ohos:width="match_content"
                ohos:background_element="$graphic:background_button_jsq"
                ohos:margin="5fp"
                ohos:padding="10fp"
                ohos:text="="
                ohos:text_color="#fff"
                ohos:text_size="22fp"
                ohos:weight="1"/&gt;
        &lt;/DirectionalLayout&gt;
    &lt;/TableLayout&gt;
&lt;/DirectionalLayout&gt;</code></pre> 
<p>整个布局页面中使用了DirectionalLayout(线性布局),TableLayout(表格布局)的综合使用，里面并嵌套使用了Text和Button组件。</p> 
<p>接下来就是实现计算功能的java代码了，</p> 
<pre><code>package com.example.hm_phone_java.slice;

import com.example.hm_phone_java.ResourceTable;
import ohos.aafwk.ability.AbilitySlice;
import ohos.aafwk.content.Intent;
import ohos.agp.components.Button;
import ohos.agp.components.Component;
import ohos.agp.components.Text;

public class JSQAbilitySlice extends AbilitySlice {
    private int[] ids={
            ResourceTable.Id_btn_jsq_1,ResourceTable.Id_btn_jsq_2,
            ResourceTable.Id_btn_jsq_3,ResourceTable.Id_btn_jsq_4,
            ResourceTable.Id_btn_jsq_5,ResourceTable.Id_btn_jsq_6,
            ResourceTable.Id_btn_jsq_7,ResourceTable.Id_btn_jsq_8,
            ResourceTable.Id_btn_jsq_9,ResourceTable.Id_btn_jsq_10,
            ResourceTable.Id_btn_jsq_11,ResourceTable.Id_btn_jsq_12,
            ResourceTable.Id_btn_jsq_13,ResourceTable.Id_btn_jsq_14,
            ResourceTable.Id_btn_jsq_15,ResourceTable.Id_btn_jsq_16,
            ResourceTable.Id_btn_jsq_17,ResourceTable.Id_btn_jsq_18,
            ResourceTable.Id_btn_jsq_19,ResourceTable.Id_btn_jsq_20,
            ResourceTable.Id_btn_jsq_21,ResourceTable.Id_btn_jsq_22,
            ResourceTable.Id_btn_jsq_23,ResourceTable.Id_btn_jsq_24,
            ResourceTable.Id_btn_jsq_25,ResourceTable.Id_btn_jsq_26,
            ResourceTable.Id_btn_jsq_27,ResourceTable.Id_btn_jsq_28
    };
    private Button[] btns=new Button[ids.length];
    private boolean firstKey=false;
    private Text label,label2;
    @Override
    protected void onStart(Intent intent) {
        super.onStart(intent);
        this.setUIContent(ResourceTable.Layout_ability_jsq);
        label= (Text) this.findComponentById(ResourceTable.Id_tv_jsq1);
        label2= (Text) this.findComponentById(ResourceTable.Id_tv_jsq2);
        for (int i = 0; i &lt; ids.length; i++) {
            btns[i]= (Button) this.findComponentById(ids[i]);
            btns[i].setClickedListener(new Component.ClickedListener() {
                @Override
                public void onClick(Component component) {
                    Button button= (Button) component;
                    String text=button.getText();
                    if (text.equals("CE")) {
                        // 用户按了"CE"键
                        label2.setText("0");
                        label.setText("0");
                        firstKey = true;
                        operator = "=";
                        issqrt = true;
                    } else if ("0123456789.".indexOf(text) &gt;= 0) {
                        // 用户按了数字键或者小数点键
                        handleNumber(text);
                        // handlezero(zero);
                    } else {
                        // 用户按了运算符键
                        handleOperator(text);
                    }
                }
            });
        }
    }
    /**
     * 处理数字键被按下的事件
     *
     * @param key
     */
    private void handleNumber(String key) {
        if (firstKey) {
            // 输入的第一个数字
            if ((key.equals(".")) &amp;&amp; (label2.getText().indexOf(".") &lt; 0)) {
                label2.setText(label2.getText() + ".");
            } else {
                if (key.equals(".")) {
                    label2.setText("0" + key);
                } else {
                    label2.setText(key);
                }
            }
        } else if ((key.equals(".")) &amp;&amp; (label2.getText().indexOf(".") &lt; 0)) {
            // 输入的是小数点，并且之前没有小数点，则将小数点附在结果文本框的后面
            label2.setText(label2.getText() + ".");
        } else if (!key.equals(".")) {
            // 如果输入的不是小数点，则将数字附在结果文本框的后面
            label2.setText(label2.getText() + key);
        }
        // 以后输入的肯定不是第一个数字了
        firstKey = false;
    }

    String operator = "=";
    // 是否合法
    boolean operateValidFlag = true;
    // 计算中间 1+3-2
    private double resultNum = 0.0;
    private boolean issqrt = true;

    /**
     * 处理运算符键被按下的事件
     *
     * @param key
     */
    private void handleOperator(String key) {
        if (operator.equals("/")) {
            // 除法运算
            // 如果当前结果文本框中的值等于0
            if (getNumberFromText() == 0.0) {
                // 操作不合法
                operateValidFlag = false;
                label2.setText("除数不能为零");
            } else {
                resultNum /= getNumberFromText();
            }
        } else if (operator.equals("1/X")) {
            // 倒数运算
            if (resultNum == 0.0) {
                // 操作不合法
                operateValidFlag = false;
                label2.setText("零没有倒数");
            } else {
                resultNum = 1 / resultNum;
            }
        } else if (operator.equals("+")) {
            // 加法运算
            resultNum += getNumberFromText();
        } else if (operator.equals("-")) {
            // 减法运算
            resultNum -= getNumberFromText();
        } else if (operator.equals("*")) {
            // 乘法运算
            resultNum *= getNumberFromText();
        } else if (operator.equals("√")) {
            // 平方根运算
            if (resultNum &lt; 0) {
                issqrt = false;
                label2.setText("无效输入");
                resultNum = 0;
            } else {
                resultNum = Math.sqrt(resultNum);
            }

        } else if (operator.equals("%")) {
            // 百分号运算，除以100
            resultNum = resultNum / 100;

        } else if (operator.equals("±")) {
            // 正数负数运算
            resultNum = resultNum * (-1);
        } else if (operator.equals("=")) {
            // 赋值运算
            resultNum = getNumberFromText();

        }
        if (operateValidFlag) {
            // 双精度浮点数的运算
            long t1;
            double t2;
            t1 = (long) resultNum;
            t2 = resultNum - t1;
            if (t2 == 0) {
                if (issqrt) {
                    label2.setText(String.valueOf(t1));
                }
                if (key.equals("=")) {
                    label.setText("0");
                } else {
                    label.setText(label2.getText() + key);
                }
            } else {
                label2.setText(String.valueOf(resultNum));
                if (key.equals("=")) {
                    label.setText("0");
                } else {
                    label.setText(label2.getText() + key);
                }
            }
        }
        // 运算符等于用户按的按钮
        operator = key;
        firstKey = true;
        operateValidFlag = true;
    }

    /**
     * 从结果文本框中获取数字
     *
     * @return
     */
    private double getNumberFromText() {
        double result = 0;
        try {
            result = Double.valueOf(label2.getText()).doubleValue();
        } catch (NumberFormatException e) {
        }
        return result;
    }
}
</code></pre> 
<p>在代码中可以看出实现的运算的功能。</p> 
<p>一个鸿蒙计算器分享到这里，谢谢大家的关注和阅读！！！</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0f79e967ede1ae848dc31971239eb9fa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue报错：[Vue warn]: Duplicate keys detected: ‘[object Object]‘. This may cause an update error.</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8434c4cf0b3e718ba560998bed104f59/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Hinton，Lecun和Bengio三巨头联手再发万字长文：深度学习的昨天、今天和明天</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>