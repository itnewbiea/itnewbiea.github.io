<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>äº’è”ç½‘åŠ ç«èµ› Yolovå®‰å…¨å¸½ä½©æˆ´æ£€æµ‹ å±é™©åŒºåŸŸè¿›å…¥æ£€æµ‹ - æ·±åº¦å­¦ä¹  opencv - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="äº’è”ç½‘åŠ ç«èµ› Yolovå®‰å…¨å¸½ä½©æˆ´æ£€æµ‹ å±é™©åŒºåŸŸè¿›å…¥æ£€æµ‹ - æ·±åº¦å­¦ä¹  opencv" />
<meta property="og:description" content="1 å‰è¨€ ğŸ”¥ ä¼˜è´¨ç«èµ›é¡¹ç›®ç³»åˆ—ï¼Œä»Šå¤©è¦åˆ†äº«çš„æ˜¯
ğŸš© Yolovå®‰å…¨å¸½ä½©æˆ´æ£€æµ‹ å±é™©åŒºåŸŸè¿›å…¥æ£€æµ‹
ğŸ¥‡å­¦é•¿è¿™é‡Œç»™ä¸€ä¸ªé¢˜ç›®ç»¼åˆè¯„åˆ†(æ¯é¡¹æ»¡åˆ†5åˆ†)
éš¾åº¦ç³»æ•°ï¼š3åˆ†å·¥ä½œé‡ï¼š3åˆ†åˆ›æ–°ç‚¹ï¼š4åˆ† è¯¥é¡¹ç›®è¾ƒä¸ºæ–°é¢–ï¼Œé€‚åˆä½œä¸ºç«èµ›è¯¾é¢˜æ–¹å‘ï¼Œå­¦é•¿éå¸¸æ¨èï¼
ğŸ§¿ æ›´å¤šèµ„æ–™, é¡¹ç›®åˆ†äº«ï¼š
https://gitee.com/dancheng-senior/postgraduate
1 è¯¾é¢˜èƒŒæ™¯ å»ºç­‘å·¥äººå¤´éƒ¨ä¼¤å®³æ˜¯é€ æˆå»ºç­‘ä¼¤äº¡äº‹æ•…çš„é‡è¦åŸå› ã€‚ä½©æˆ´å®‰å…¨å¸½æ˜¯é˜²æ­¢å»ºç­‘å·¥äººå‘ç”Ÿè„‘éƒ¨å¤–ä¼¤äº‹æ•…çš„æœ‰æ•ˆæªæ–½,è€Œåœ¨å®é™…å·¥ä½œä¸­å·¥äººæœªä½©æˆ´å®‰å…¨å¸½çš„ä¸å®‰å…¨è¡Œä¸ºæ—¶æœ‰å‘ç”Ÿã€‚å› æ­¤,å¯¹æ–½å·¥ç°åœºå»ºç­‘å·¥äººä½©æˆ´å®‰å…¨å¸½è‡ªåŠ¨å®æ—¶æ£€æµ‹è¿›è¡Œæ¢ç©¶,å°†ä¸ºæ·±å…¥è®¤çŸ¥å’Œä¸»åŠ¨é¢„é˜²å®‰å…¨äº‹æ•…æä¾›æ–°çš„è§†è§’ã€‚ç„¶è€Œ,ä¼ ç»Ÿçš„æ–½å·¥ç°åœºå…·æœ‰å®‰å…¨ç®¡ç†æ°´å¹³ä½ä¸‹ã€ç®¡ç†èŒƒå›´å°ã€ä¸»è¦ä¾é å®‰å…¨ç®¡ç†äººå‘˜çš„ä¸»è§‚ç›‘æµ‹å¹¶ä¸”æ—¶æ•ˆæ€§å·®ã€ä¸èƒ½å…¨ç¨‹ç›‘æ§ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚
æœ¬é¡¹ç›®åŸºäºyolov5å®ç°äº†å®‰å…¨å¸½å’Œå±é™©åŒºåŸŸæ£€æµ‹ã€‚
2 æ•ˆæœæ¼”ç¤º 3 Yolov5æ¡†æ¶ æˆ‘ä»¬é€‰æ‹©å½“ä¸‹YOLOæœ€æ–°çš„å·ç§¯ç¥ç»ç½‘ç»œYOLOv5æ¥è¿›è¡Œç«ç„°è¯†åˆ«æ£€æµ‹ã€‚6æœˆ9æ—¥ï¼ŒUltralyticså…¬å¸å¼€æºäº†YOLOv5ï¼Œç¦»ä¸Šä¸€æ¬¡YOLOv4å‘å¸ƒä¸åˆ°50å¤©ã€‚è€Œä¸”è¿™ä¸€æ¬¡çš„YOLOv5æ˜¯å®Œå…¨åŸºäºPyTorchå®ç°çš„ï¼åœ¨æˆ‘ä»¬è¿˜å¯¹YOLOv4çš„å„ç§é«˜ç«¯æ“ä½œã€ä¸°å¯Œçš„å®éªŒå¯¹æ¯”æƒŠå¹ä¸å·²æ—¶ï¼ŒYOLOv5åˆå¸¦æ¥äº†æ›´å¼ºå®æ—¶ç›®æ ‡æ£€æµ‹æŠ€æœ¯ã€‚æŒ‰ç…§å®˜æ–¹ç»™å‡ºçš„æ•°ç›®ï¼Œç°ç‰ˆæœ¬çš„YOLOv5æ¯ä¸ªå›¾åƒçš„æ¨ç†æ—¶é—´æœ€å¿«0.007ç§’ï¼Œå³æ¯ç§’140å¸§ï¼ˆFPSï¼‰ï¼Œä½†YOLOv5çš„æƒé‡æ–‡ä»¶å¤§å°åªæœ‰YOLOv4çš„1/9ã€‚
ç›®æ ‡æ£€æµ‹æ¶æ„åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯two-stageï¼Œä¸€ç§æ˜¯one-stageï¼ŒåŒºåˆ«å°±åœ¨äº two-stage æœ‰region
proposalè¿‡ç¨‹ï¼Œç±»ä¼¼äºä¸€ç§æµ·é€‰è¿‡ç¨‹,ç½‘ç»œä¼šæ ¹æ®å€™é€‰åŒºåŸŸç”Ÿæˆä½ç½®å’Œç±»åˆ«ï¼Œè€Œone-stageç›´æ¥ä»å›¾ç‰‡ç”Ÿæˆä½ç½®å’Œç±»åˆ«ã€‚ä»Šå¤©æåˆ°çš„ YOLOå°±æ˜¯ä¸€ç§
one-stageæ–¹æ³•ã€‚YOLOæ˜¯You Only Look Onceçš„ç¼©å†™,æ„æ€æ˜¯ç¥ç»ç½‘ç»œåªéœ€è¦çœ‹ä¸€æ¬¡å›¾ç‰‡ï¼Œå°±èƒ½è¾“å‡ºç»“æœã€‚YOLO
ä¸€å…±å‘å¸ƒäº†äº”ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­ YOLOv1 å¥ å®šäº†æ•´ä¸ªç³»åˆ—çš„åŸºç¡€ï¼Œåé¢çš„ç³»åˆ—å°±æ˜¯åœ¨ç¬¬ä¸€ç‰ˆåŸºç¡€ä¸Šçš„æ”¹è¿›ï¼Œä¸ºçš„æ˜¯æå‡æ€§èƒ½ã€‚
YOLOv5æœ‰4ä¸ªç‰ˆæœ¬æ€§èƒ½å¦‚å›¾æ‰€ç¤ºï¼š
ç½‘ç»œæ¶æ„å›¾
YOLOv5æ˜¯ä¸€ç§å•é˜¶æ®µç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œè¯¥ç®—æ³•åœ¨YOLOv4çš„åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€äº›æ–°çš„æ”¹è¿›æ€è·¯ï¼Œä½¿å…¶é€Ÿåº¦ä¸ç²¾åº¦éƒ½å¾—åˆ°äº†æå¤§çš„æ€§èƒ½æå‡ã€‚ä¸»è¦çš„æ”¹è¿›æ€è·¯å¦‚ä¸‹æ‰€ç¤ºï¼š
è¾“å…¥ç«¯
åœ¨æ¨¡å‹è®­ç»ƒé˜¶æ®µï¼Œæå‡ºäº†ä¸€äº›æ”¹è¿›æ€è·¯ï¼Œä¸»è¦åŒ…æ‹¬Mosaicæ•°æ®å¢å¼ºã€è‡ªé€‚åº”é”šæ¡†è®¡ç®—ã€è‡ªé€‚åº”å›¾ç‰‡ç¼©æ”¾ï¼›
Mosaicæ•°æ®å¢å¼º
ï¼šMosaicæ•°æ®å¢å¼ºçš„ä½œè€…ä¹Ÿæ˜¯æ¥è‡ªYOLOv5å›¢é˜Ÿçš„æˆå‘˜ï¼Œé€šè¿‡éšæœºç¼©æ”¾ã€éšæœºè£å‰ªã€éšæœºæ’å¸ƒçš„æ–¹å¼è¿›è¡Œæ‹¼æ¥ï¼Œå¯¹å°ç›®æ ‡çš„æ£€æµ‹æ•ˆæœå¾ˆä¸é”™
åŸºå‡†ç½‘ç»œ
èåˆå…¶å®ƒæ£€æµ‹ç®—æ³•ä¸­çš„ä¸€äº›æ–°æ€è·¯ï¼Œä¸»è¦åŒ…æ‹¬ï¼šFocusç»“æ„ä¸CSPç»“æ„ï¼›
Neckç½‘ç»œ
åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸï¼Œä¸ºäº†æ›´å¥½çš„æå–èåˆç‰¹å¾ï¼Œé€šå¸¸åœ¨Backboneå’Œè¾“å‡ºå±‚ï¼Œä¼šæ’å…¥ä¸€äº›å±‚ï¼Œè¿™ä¸ªéƒ¨åˆ†ç§°ä¸ºNeckã€‚Yolov5ä¸­æ·»åŠ äº†FPN&#43;PANç»“æ„ï¼Œç›¸å½“äºç›®æ ‡æ£€æµ‹ç½‘ç»œçš„é¢ˆéƒ¨ï¼Œä¹Ÿæ˜¯éå¸¸å…³é”®çš„ã€‚
FPN&#43;PANçš„ç»“æ„
è¿™æ ·ç»“åˆæ“ä½œï¼ŒFPNå±‚è‡ªé¡¶å‘ä¸‹ä¼ è¾¾å¼ºè¯­ä¹‰ç‰¹å¾ï¼ˆHigh-Levelç‰¹å¾ï¼‰ï¼Œè€Œç‰¹å¾é‡‘å­—å¡”åˆ™è‡ªåº•å‘ä¸Šä¼ è¾¾å¼ºå®šä½ç‰¹å¾ï¼ˆLow-
Levelç‰¹å¾)ï¼Œä¸¤ä¸¤è”æ‰‹ï¼Œä»ä¸åŒçš„ä¸»å¹²å±‚å¯¹ä¸åŒçš„æ£€æµ‹å±‚è¿›è¡Œç‰¹å¾èšåˆã€‚
FPN&#43;PANå€Ÿé‰´çš„æ˜¯18å¹´CVPRçš„PANetï¼Œå½“æ—¶ä¸»è¦åº”ç”¨äºå›¾åƒåˆ†å‰²é¢†åŸŸï¼Œä½†Alexeyå°†å…¶æ‹†åˆ†åº”ç”¨åˆ°Yolov4ä¸­ï¼Œè¿›ä¸€æ­¥æé«˜ç‰¹å¾æå–çš„èƒ½åŠ›ã€‚
Headè¾“å‡ºå±‚
è¾“å‡ºå±‚çš„é”šæ¡†æœºåˆ¶ä¸YOLOv4ç›¸åŒï¼Œä¸»è¦æ”¹è¿›çš„æ˜¯è®­ç»ƒæ—¶çš„æŸå¤±å‡½æ•°GIOU_Lossï¼Œä»¥åŠé¢„æµ‹æ¡†ç­›é€‰çš„DIOU_nmsã€‚
å¯¹äºHeadéƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ°ä¸‰ä¸ªç´«è‰²ç®­å¤´å¤„çš„ç‰¹å¾å›¾æ˜¯40Ã—40ã€20Ã—20ã€10Ã—10ã€‚ä»¥åŠæœ€åPredictionä¸­ç”¨äºé¢„æµ‹çš„3ä¸ªç‰¹å¾å›¾ï¼š
â€‹
â‘ ==&gt;40Ã—40Ã—255 â‘¡==&gt;20Ã—20Ã—255 â‘¢==&gt;10Ã—10Ã—255 â€‹ ç›¸å…³ä»£ç 
class Detect(nn.Module): stride = None # strides computed during build onnx_dynamic = False # ONNX export parameter def __init__(self, nc=80, anchors=(), ch=(), inplace=True): # detection layer super()." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/33a69abf346fa0afb81ae11ec8a6a28c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T15:09:02+08:00" />
<meta property="article:modified_time" content="2023-12-27T15:09:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">äº’è”ç½‘åŠ ç«èµ› Yolovå®‰å…¨å¸½ä½©æˆ´æ£€æµ‹ å±é™©åŒºåŸŸè¿›å…¥æ£€æµ‹ - æ·±åº¦å­¦ä¹  opencv</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1__1"></a>1 å‰è¨€</h2> 
<p>ğŸ”¥ ä¼˜è´¨ç«èµ›é¡¹ç›®ç³»åˆ—ï¼Œä»Šå¤©è¦åˆ†äº«çš„æ˜¯</p> 
<p>ğŸš© <strong>Yolovå®‰å…¨å¸½ä½©æˆ´æ£€æµ‹ å±é™©åŒºåŸŸè¿›å…¥æ£€æµ‹</strong></p> 
<p>ğŸ¥‡å­¦é•¿è¿™é‡Œç»™ä¸€ä¸ªé¢˜ç›®ç»¼åˆè¯„åˆ†(æ¯é¡¹æ»¡åˆ†5åˆ†)</p> 
<ul><li>éš¾åº¦ç³»æ•°ï¼š3åˆ†</li><li>å·¥ä½œé‡ï¼š3åˆ†</li><li>åˆ›æ–°ç‚¹ï¼š4åˆ†</li></ul> 
<p>è¯¥é¡¹ç›®è¾ƒä¸ºæ–°é¢–ï¼Œé€‚åˆä½œä¸ºç«èµ›è¯¾é¢˜æ–¹å‘ï¼Œå­¦é•¿éå¸¸æ¨èï¼</p> 
<p>ğŸ§¿ <strong>æ›´å¤šèµ„æ–™, é¡¹ç›®åˆ†äº«ï¼š</strong></p> 
<p><a href="https://gitee.com/dancheng-senior/postgraduate" rel="nofollow">https://gitee.com/dancheng-senior/postgraduate</a></p> 
<h2><a id="1__21"></a>1 è¯¾é¢˜èƒŒæ™¯</h2> 
<p>å»ºç­‘å·¥äººå¤´éƒ¨ä¼¤å®³æ˜¯é€ æˆå»ºç­‘ä¼¤äº¡äº‹æ•…çš„é‡è¦åŸå› ã€‚ä½©æˆ´å®‰å…¨å¸½æ˜¯é˜²æ­¢å»ºç­‘å·¥äººå‘ç”Ÿè„‘éƒ¨å¤–ä¼¤äº‹æ•…çš„æœ‰æ•ˆæªæ–½,è€Œåœ¨å®é™…å·¥ä½œä¸­å·¥äººæœªä½©æˆ´å®‰å…¨å¸½çš„ä¸å®‰å…¨è¡Œä¸ºæ—¶æœ‰å‘ç”Ÿã€‚å› æ­¤,å¯¹æ–½å·¥ç°åœºå»ºç­‘å·¥äººä½©æˆ´å®‰å…¨å¸½è‡ªåŠ¨å®æ—¶æ£€æµ‹è¿›è¡Œæ¢ç©¶,å°†ä¸ºæ·±å…¥è®¤çŸ¥å’Œä¸»åŠ¨é¢„é˜²å®‰å…¨äº‹æ•…æä¾›æ–°çš„è§†è§’ã€‚ç„¶è€Œ,ä¼ ç»Ÿçš„æ–½å·¥ç°åœºå…·æœ‰å®‰å…¨ç®¡ç†æ°´å¹³ä½ä¸‹ã€ç®¡ç†èŒƒå›´å°ã€ä¸»è¦ä¾é å®‰å…¨ç®¡ç†äººå‘˜çš„ä¸»è§‚ç›‘æµ‹å¹¶ä¸”æ—¶æ•ˆæ€§å·®ã€ä¸èƒ½å…¨ç¨‹ç›‘æ§ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚<br> æœ¬é¡¹ç›®åŸºäºyolov5å®ç°äº†å®‰å…¨å¸½å’Œå±é™©åŒºåŸŸæ£€æµ‹ã€‚</p> 
<h2><a id="2__26"></a>2 æ•ˆæœæ¼”ç¤º</h2> 
<p><img src="https://images2.imgbox.com/4c/ed/PeHT1FCM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/fb/1e/Kpjm3Qeq_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/42/4f/GwoUE6jd_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="3_Yolov5_32"></a>3 Yolov5æ¡†æ¶</h2> 
<p>æˆ‘ä»¬é€‰æ‹©å½“ä¸‹YOLOæœ€æ–°çš„å·ç§¯ç¥ç»ç½‘ç»œYOLOv5æ¥è¿›è¡Œç«ç„°è¯†åˆ«æ£€æµ‹ã€‚6æœˆ9æ—¥ï¼ŒUltralyticså…¬å¸å¼€æºäº†YOLOv5ï¼Œç¦»ä¸Šä¸€æ¬¡YOLOv4å‘å¸ƒä¸åˆ°50å¤©ã€‚è€Œä¸”è¿™ä¸€æ¬¡çš„YOLOv5æ˜¯å®Œå…¨åŸºäºPyTorchå®ç°çš„ï¼åœ¨æˆ‘ä»¬è¿˜å¯¹YOLOv4çš„å„ç§é«˜ç«¯æ“ä½œã€ä¸°å¯Œçš„å®éªŒå¯¹æ¯”æƒŠå¹ä¸å·²æ—¶ï¼ŒYOLOv5åˆå¸¦æ¥äº†æ›´å¼ºå®æ—¶ç›®æ ‡æ£€æµ‹æŠ€æœ¯ã€‚æŒ‰ç…§å®˜æ–¹ç»™å‡ºçš„æ•°ç›®ï¼Œç°ç‰ˆæœ¬çš„YOLOv5æ¯ä¸ªå›¾åƒçš„æ¨ç†æ—¶é—´æœ€å¿«0.007ç§’ï¼Œå³æ¯ç§’140å¸§ï¼ˆFPSï¼‰ï¼Œä½†YOLOv5çš„æƒé‡æ–‡ä»¶å¤§å°åªæœ‰YOLOv4çš„1/9ã€‚</p> 
<p>ç›®æ ‡æ£€æµ‹æ¶æ„åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯two-stageï¼Œä¸€ç§æ˜¯one-stageï¼ŒåŒºåˆ«å°±åœ¨äº two-stage æœ‰region<br> proposalè¿‡ç¨‹ï¼Œç±»ä¼¼äºä¸€ç§æµ·é€‰è¿‡ç¨‹,ç½‘ç»œä¼šæ ¹æ®å€™é€‰åŒºåŸŸç”Ÿæˆä½ç½®å’Œç±»åˆ«ï¼Œè€Œone-stageç›´æ¥ä»å›¾ç‰‡ç”Ÿæˆä½ç½®å’Œç±»åˆ«ã€‚ä»Šå¤©æåˆ°çš„ YOLOå°±æ˜¯ä¸€ç§<br> one-stageæ–¹æ³•ã€‚YOLOæ˜¯You Only Look Onceçš„ç¼©å†™,æ„æ€æ˜¯ç¥ç»ç½‘ç»œåªéœ€è¦çœ‹ä¸€æ¬¡å›¾ç‰‡ï¼Œå°±èƒ½è¾“å‡ºç»“æœã€‚YOLO<br> ä¸€å…±å‘å¸ƒäº†äº”ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­ YOLOv1 å¥ å®šäº†æ•´ä¸ªç³»åˆ—çš„åŸºç¡€ï¼Œåé¢çš„ç³»åˆ—å°±æ˜¯åœ¨ç¬¬ä¸€ç‰ˆåŸºç¡€ä¸Šçš„æ”¹è¿›ï¼Œä¸ºçš„æ˜¯æå‡æ€§èƒ½ã€‚</p> 
<p>YOLOv5æœ‰4ä¸ªç‰ˆæœ¬æ€§èƒ½å¦‚å›¾æ‰€ç¤ºï¼š<br> <img src="https://images2.imgbox.com/c4/6c/RFRXKpET_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç½‘ç»œæ¶æ„å›¾</p> 
<p><img src="https://images2.imgbox.com/c8/51/kK0YLUtg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>YOLOv5æ˜¯ä¸€ç§å•é˜¶æ®µç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œè¯¥ç®—æ³•åœ¨YOLOv4çš„åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€äº›æ–°çš„æ”¹è¿›æ€è·¯ï¼Œä½¿å…¶é€Ÿåº¦ä¸ç²¾åº¦éƒ½å¾—åˆ°äº†æå¤§çš„æ€§èƒ½æå‡ã€‚ä¸»è¦çš„æ”¹è¿›æ€è·¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p> 
<p><strong>è¾“å…¥ç«¯</strong></p> 
<p>åœ¨æ¨¡å‹è®­ç»ƒé˜¶æ®µï¼Œæå‡ºäº†ä¸€äº›æ”¹è¿›æ€è·¯ï¼Œä¸»è¦åŒ…æ‹¬Mosaicæ•°æ®å¢å¼ºã€è‡ªé€‚åº”é”šæ¡†è®¡ç®—ã€è‡ªé€‚åº”å›¾ç‰‡ç¼©æ”¾ï¼›</p> 
<p><strong>Mosaicæ•°æ®å¢å¼º</strong><br> ï¼šMosaicæ•°æ®å¢å¼ºçš„ä½œè€…ä¹Ÿæ˜¯æ¥è‡ªYOLOv5å›¢é˜Ÿçš„æˆå‘˜ï¼Œé€šè¿‡éšæœºç¼©æ”¾ã€éšæœºè£å‰ªã€éšæœºæ’å¸ƒçš„æ–¹å¼è¿›è¡Œæ‹¼æ¥ï¼Œå¯¹å°ç›®æ ‡çš„æ£€æµ‹æ•ˆæœå¾ˆä¸é”™<br> <img src="https://images2.imgbox.com/26/20/cvKST9W6_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>åŸºå‡†ç½‘ç»œ</strong></p> 
<p>èåˆå…¶å®ƒæ£€æµ‹ç®—æ³•ä¸­çš„ä¸€äº›æ–°æ€è·¯ï¼Œä¸»è¦åŒ…æ‹¬ï¼šFocusç»“æ„ä¸CSPç»“æ„ï¼›</p> 
<p><strong>Neckç½‘ç»œ</strong></p> 
<p>åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸï¼Œä¸ºäº†æ›´å¥½çš„æå–èåˆç‰¹å¾ï¼Œé€šå¸¸åœ¨Backboneå’Œè¾“å‡ºå±‚ï¼Œä¼šæ’å…¥ä¸€äº›å±‚ï¼Œè¿™ä¸ªéƒ¨åˆ†ç§°ä¸ºNeckã€‚Yolov5ä¸­æ·»åŠ äº†FPN+PANç»“æ„ï¼Œç›¸å½“äºç›®æ ‡æ£€æµ‹ç½‘ç»œçš„é¢ˆéƒ¨ï¼Œä¹Ÿæ˜¯éå¸¸å…³é”®çš„ã€‚</p> 
<p><img src="https://images2.imgbox.com/2b/10/eqmQ8DSO_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/01/3b/S6hbqChe_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>FPN+PANçš„ç»“æ„<br> <img src="https://images2.imgbox.com/ec/95/ayrVwFNk_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> è¿™æ ·ç»“åˆæ“ä½œï¼ŒFPNå±‚è‡ªé¡¶å‘ä¸‹ä¼ è¾¾å¼ºè¯­ä¹‰ç‰¹å¾ï¼ˆHigh-Levelç‰¹å¾ï¼‰ï¼Œè€Œç‰¹å¾é‡‘å­—å¡”åˆ™è‡ªåº•å‘ä¸Šä¼ è¾¾å¼ºå®šä½ç‰¹å¾ï¼ˆLow-<br> Levelç‰¹å¾)ï¼Œä¸¤ä¸¤è”æ‰‹ï¼Œä»ä¸åŒçš„ä¸»å¹²å±‚å¯¹ä¸åŒçš„æ£€æµ‹å±‚è¿›è¡Œç‰¹å¾èšåˆã€‚</p> 
<p>FPN+PANå€Ÿé‰´çš„æ˜¯18å¹´CVPRçš„PANetï¼Œå½“æ—¶ä¸»è¦åº”ç”¨äºå›¾åƒåˆ†å‰²é¢†åŸŸï¼Œä½†Alexeyå°†å…¶æ‹†åˆ†åº”ç”¨åˆ°Yolov4ä¸­ï¼Œè¿›ä¸€æ­¥æé«˜ç‰¹å¾æå–çš„èƒ½åŠ›ã€‚</p> 
<p><strong>Headè¾“å‡ºå±‚</strong></p> 
<p>è¾“å‡ºå±‚çš„é”šæ¡†æœºåˆ¶ä¸YOLOv4ç›¸åŒï¼Œä¸»è¦æ”¹è¿›çš„æ˜¯è®­ç»ƒæ—¶çš„æŸå¤±å‡½æ•°GIOU_Lossï¼Œä»¥åŠé¢„æµ‹æ¡†ç­›é€‰çš„DIOU_nmsã€‚</p> 
<p>å¯¹äºHeadéƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ°ä¸‰ä¸ªç´«è‰²ç®­å¤´å¤„çš„ç‰¹å¾å›¾æ˜¯40Ã—40ã€20Ã—20ã€10Ã—10ã€‚ä»¥åŠæœ€åPredictionä¸­ç”¨äºé¢„æµ‹çš„3ä¸ªç‰¹å¾å›¾ï¼š</p> 
<p>â€‹</p> 
<pre><code>  â‘ ==&gt;40Ã—40Ã—255
    

    â‘¡==&gt;20Ã—20Ã—255
    
    â‘¢==&gt;10Ã—10Ã—255


â€‹    
</code></pre> 
<p><img src="https://images2.imgbox.com/89/67/t0LhyZ5S_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ul><li> <p>ç›¸å…³ä»£ç </p> <pre><code class="prism language-python">  <span class="token keyword">class</span> <span class="token class-name">Detect</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>
  stride <span class="token operator">=</span> <span class="token boolean">None</span>  <span class="token comment"># strides computed during build</span>
  onnx_dynamic <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># ONNX export parameter</span>

  <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nc<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> anchors<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ch<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># detection layer</span>
      <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
      self<span class="token punctuation">.</span>nc <span class="token operator">=</span> nc  <span class="token comment"># number of classes</span>
      self<span class="token punctuation">.</span>no <span class="token operator">=</span> nc <span class="token operator">+</span> <span class="token number">5</span>  <span class="token comment"># number of outputs per anchor</span>
      self<span class="token punctuation">.</span>nl <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>anchors<span class="token punctuation">)</span>  <span class="token comment"># number of detection layers</span>
      self<span class="token punctuation">.</span>na <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>anchors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>  <span class="token comment"># number of anchors</span>
      self<span class="token punctuation">.</span>grid <span class="token operator">=</span> <span class="token punctuation">[</span>torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>nl  <span class="token comment"># init grid</span>
      self<span class="token punctuation">.</span>anchor_grid <span class="token operator">=</span> <span class="token punctuation">[</span>torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>nl  <span class="token comment"># init anchor grid</span>
      self<span class="token punctuation">.</span>register_buffer<span class="token punctuation">(</span><span class="token string">'anchors'</span><span class="token punctuation">,</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>anchors<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>self<span class="token punctuation">.</span>nl<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># shape(nl,na,2)</span>
      self<span class="token punctuation">.</span>m <span class="token operator">=</span> nn<span class="token punctuation">.</span>ModuleList<span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>no <span class="token operator">*</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> ch<span class="token punctuation">)</span>  <span class="token comment"># output conv</span>
      self<span class="token punctuation">.</span>inplace <span class="token operator">=</span> inplace  <span class="token comment"># use in-place ops (e.g. slice assignment)</span>

  <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>
      z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># inference output</span>
      <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>nl<span class="token punctuation">)</span><span class="token punctuation">:</span>
          x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># conv</span>
          bs<span class="token punctuation">,</span> _<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> nx <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>shape  <span class="token comment"># x(bs,255,20,20) to x(bs,3,20,20,85)</span>
          x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>bs<span class="token punctuation">,</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> self<span class="token punctuation">.</span>no<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> nx<span class="token punctuation">)</span><span class="token punctuation">.</span>permute<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contiguous<span class="token punctuation">(</span><span class="token punctuation">)</span>

          <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>training<span class="token punctuation">:</span>  <span class="token comment"># inference</span>
              <span class="token keyword">if</span> self<span class="token punctuation">.</span>onnx_dynamic <span class="token keyword">or</span> self<span class="token punctuation">.</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">!=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                  self<span class="token punctuation">.</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>anchor_grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>_make_grid<span class="token punctuation">(</span>nx<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
      
              y <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token keyword">if</span> self<span class="token punctuation">.</span>inplace<span class="token punctuation">:</span>
                  y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>stride<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># xy</span>
                  y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>anchor_grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># wh</span>
              <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># for YOLOv5 on AWS Inferentia https://github.com/ultralytics/yolov5/pull/2953</span>
                  xy <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>stride<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># xy</span>
                  wh <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>anchor_grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># wh</span>
                  y <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">(</span>xy<span class="token punctuation">,</span> wh<span class="token punctuation">,</span> y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
              z<span class="token punctuation">.</span>append<span class="token punctuation">(</span>y<span class="token punctuation">.</span>view<span class="token punctuation">(</span>bs<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>no<span class="token punctuation">)</span><span class="token punctuation">)</span>
      
    <span class="token keyword">return</span> x <span class="token keyword">if</span> self<span class="token punctuation">.</span>training <span class="token keyword">else</span> <span class="token punctuation">(</span>torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>

  <span class="token keyword">def</span> <span class="token function">_make_grid</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nx<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> ny<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      d <span class="token operator">=</span> self<span class="token punctuation">.</span>anchors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>device
      <span class="token keyword">if</span> check_version<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>__version__<span class="token punctuation">,</span> <span class="token string">'1.10.0'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># torch&gt;=1.10.0 meshgrid workaround for torch&gt;=0.7 compatibility</span>
          yv<span class="token punctuation">,</span> xv <span class="token operator">=</span> torch<span class="token punctuation">.</span>meshgrid<span class="token punctuation">(</span><span class="token punctuation">[</span>torch<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>ny<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">,</span> torch<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>nx<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> indexing<span class="token operator">=</span><span class="token string">'ij'</span><span class="token punctuation">)</span>
      <span class="token keyword">else</span><span class="token punctuation">:</span>
          yv<span class="token punctuation">,</span> xv <span class="token operator">=</span> torch<span class="token punctuation">.</span>meshgrid<span class="token punctuation">(</span><span class="token punctuation">[</span>torch<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>ny<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">,</span> torch<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>nx<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      grid <span class="token operator">=</span> torch<span class="token punctuation">.</span>stack<span class="token punctuation">(</span><span class="token punctuation">(</span>xv<span class="token punctuation">,</span> yv<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>expand<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> nx<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      anchor_grid <span class="token operator">=</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>anchors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>clone<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>stride<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> \
          <span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>expand<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> nx<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> grid<span class="token punctuation">,</span> anchor_grid
</code></pre> </li></ul> 
<h2><a id="4__155"></a>4 æ•°æ®å¤„ç†å’Œè®­ç»ƒ</h2> 
<h3><a id="41__157"></a>4.1 å®‰å…¨å¸½æ£€æµ‹</h3> 
<p>è¿™é‡Œåªæ˜¯åˆ¤æ–­ ã€äººæ²¡æœ‰å¸¦å®‰å…¨å¸½ã€‘ã€ã€äººæœ‰å¸¦å®‰å…¨å¸½ã€‘ã€ã€äººä½“ã€‘ 3ä¸ªç±»åˆ« ï¼ŒåŸºäº data/coco128.yaml æ–‡ä»¶ï¼Œåˆ›å»ºè‡ªå·±çš„æ•°æ®é›†é…ç½®æ–‡ä»¶<br> custom_data.yamlã€‚<br> <strong>åˆ›å»ºè‡ªå·±çš„æ•°æ®é›†é…ç½®æ–‡ä»¶</strong></p> 
<p>â€‹</p> 
<pre><code>    # è®­ç»ƒé›†å’ŒéªŒè¯é›†çš„ labels å’Œ image æ–‡ä»¶çš„ä½ç½®
â€‹    train: ./score/images/train
â€‹    val: ./score/images/val
â€‹    

    # number of classes
    nc: 3
    
    # class names
    names: ['person', 'head', 'helmet']



</code></pre> 
<p><strong>åˆ›å»ºæ¯ä¸ªå›¾ç‰‡å¯¹åº”çš„æ ‡ç­¾æ–‡ä»¶</strong><br> ä½¿ç”¨ data/gen_data/gen_head_helmet.py æ¥å°† VOC çš„æ•°æ®é›†è½¬æ¢æˆ YOLOv5 è®­ç»ƒéœ€è¦ç”¨åˆ°çš„æ ¼å¼ã€‚<br> ä½¿ç”¨æ ‡æ³¨å·¥å…·ç±»ä¼¼äº Labelbox ã€CVAT ã€ç²¾çµæ ‡æ³¨åŠ©æ‰‹ æ ‡æ³¨ä¹‹åï¼Œéœ€è¦ç”Ÿæˆæ¯ä¸ªå›¾ç‰‡å¯¹åº”çš„ .txt æ–‡ä»¶ï¼Œå…¶è§„èŒƒå¦‚ä¸‹ï¼š</p> 
<ul><li>æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªç›®æ ‡</li><li>ç±»åˆ«åºå·æ˜¯é›¶ç´¢å¼•å¼€å§‹çš„ï¼ˆä»0å¼€å§‹ï¼‰</li><li>æ¯ä¸€è¡Œçš„åæ ‡ class x_center y_center width height æ ¼å¼</li><li>æ¡†åæ ‡å¿…é¡»é‡‡ç”¨å½’ä¸€åŒ–çš„ xywhæ ¼å¼ï¼ˆä»0åˆ°1ï¼‰ã€‚å¦‚æœæ‚¨çš„æ¡†ä»¥åƒç´ ä¸ºå•ä½ï¼Œåˆ™å°†x_centerå’Œwidthé™¤ä»¥å›¾åƒå®½åº¦ï¼Œå°†y_centerå’Œheighté™¤ä»¥å›¾åƒé«˜åº¦ã€‚</li></ul> 
<p>ä»£ç å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-python">    
â€‹    <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
â€‹    <span class="token keyword">def</span> <span class="token function">convert</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">:</span>
â€‹        <span class="token triple-quoted-string string">"""
â€‹        å°†æ ‡æ³¨çš„ xml æ–‡ä»¶ç”Ÿæˆçš„ã€å·¦ä¸Šè§’x,å·¦ä¸Šè§’y,å³ä¸‹è§’xï¼Œå³ä¸‹è§’yã€‘æ ‡æ³¨è½¬æ¢ä¸ºyolov5è®­ç»ƒçš„åæ ‡
â€‹        :param size: å›¾ç‰‡çš„å°ºå¯¸ï¼š [w,h]
â€‹        :param box: anchor box çš„åæ ‡ [å·¦ä¸Šè§’x,å·¦ä¸Šè§’y,å³ä¸‹è§’x,å³ä¸‹è§’y,]
â€‹        :return: è½¬æ¢åçš„ [x,y,w,h]
â€‹        """</span>
â€‹    

        x1 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>box<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        y1 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>box<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        x2 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>box<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        y2 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>box<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    
        dw <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token number">1.</span> <span class="token operator">/</span> <span class="token builtin">int</span><span class="token punctuation">(</span>size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        dh <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token number">1.</span> <span class="token operator">/</span> <span class="token builtin">int</span><span class="token punctuation">(</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
        w <span class="token operator">=</span> x2 <span class="token operator">-</span> x1
        h <span class="token operator">=</span> y2 <span class="token operator">-</span> y1
        x <span class="token operator">=</span> x1 <span class="token operator">+</span> <span class="token punctuation">(</span>w <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
        y <span class="token operator">=</span> y1 <span class="token operator">+</span> <span class="token punctuation">(</span>h <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
    
        x <span class="token operator">=</span> x <span class="token operator">*</span> dw
        w <span class="token operator">=</span> w <span class="token operator">*</span> dw
        y <span class="token operator">=</span> y <span class="token operator">*</span> dh
        h <span class="token operator">=</span> h <span class="token operator">*</span> dh
        <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">]</span>



</code></pre> 
<p>ç”Ÿæˆçš„ .txt ä¾‹å­ï¼š</p> 
<p>â€‹<br> â€‹ 1 0.1830000086920336 0.1396396430209279 0.13400000636465847 0.15915916301310062<br> â€‹ 1 0.5240000248886645 0.29129129834473133 0.0800000037997961 0.16816817224025726<br> â€‹ 1 0.6060000287834555 0.29579580295830965 0.08400000398978591 0.1771771814674139<br> â€‹ 1 0.6760000321082771 0.25375375989824533 0.10000000474974513 0.21321321837604046<br> â€‹ 0 0.39300001866649836 0.2552552614361048 0.17800000845454633 0.2822822891175747<br> â€‹ 0 0.7200000341981649 0.5570570705458522 0.25200001196935773 0.4294294398277998<br> â€‹ 0 0.7720000366680324 0.2567567629739642 0.1520000072196126 0.23123123683035374</p> 
<p><strong>é€‰æ‹©æ¨¡å‹</strong><br> åœ¨æ–‡ä»¶å¤¹ ./models ä¸‹é€‰æ‹©ä¸€ä¸ªä½ éœ€è¦çš„æ¨¡å‹ç„¶åå¤åˆ¶ä¸€ä»½å‡ºæ¥ï¼Œå°†æ–‡ä»¶å¼€å¤´çš„ nc = ä¿®æ”¹ä¸ºæ•°æ®é›†çš„åˆ†ç±»æ•°ï¼Œä¸‹é¢æ˜¯å€Ÿé‰´<br> ./models/yolov5s.yamlæ¥ä¿®æ”¹çš„</p> 
<pre><code class="prism language-python">    
â€‹    <span class="token comment"># parameters</span>
â€‹    nc<span class="token punctuation">:</span> <span class="token number">3</span>  <span class="token comment"># number of classes     &lt;============ ä¿®æ”¹è¿™é‡Œä¸ºæ•°æ®é›†çš„åˆ†ç±»æ•°</span>
â€‹    depth_multiple<span class="token punctuation">:</span> <span class="token number">0.33</span>  <span class="token comment"># model depth multiple</span>
â€‹    width_multiple<span class="token punctuation">:</span> <span class="token number">0.50</span>  <span class="token comment"># layer channel multiple</span>
â€‹    

    <span class="token comment"># anchors</span>
    anchors<span class="token punctuation">:</span>
      <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">]</span>  <span class="token comment"># P3/8</span>
      <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span><span class="token number">119</span><span class="token punctuation">]</span>  <span class="token comment"># P4/16</span>
      <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">116</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">156</span><span class="token punctuation">,</span><span class="token number">198</span><span class="token punctuation">,</span> <span class="token number">373</span><span class="token punctuation">,</span><span class="token number">326</span><span class="token punctuation">]</span>  <span class="token comment"># P5/32</span>
    
    <span class="token comment"># YOLOv5 backbone</span>
    backbone<span class="token punctuation">:</span>
      <span class="token comment"># [from, number, module, args]</span>
      <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Focus<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 0-P1/2</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 1-P2/4</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> BottleneckCSP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 3-P3/8</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> BottleneckCSP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 5-P4/16</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> BottleneckCSP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 7-P5/32</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> SPP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> BottleneckCSP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 9</span>
      <span class="token punctuation">]</span>
    
    <span class="token comment"># YOLOv5 head</span>
    head<span class="token punctuation">:</span>
      <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn<span class="token punctuation">.</span>Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat backbone P4</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> BottleneckCSP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 13</span>
    
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> nn<span class="token punctuation">.</span>Upsample<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'nearest'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat backbone P3</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> BottleneckCSP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 17</span>
    
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat head P4</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> BottleneckCSP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 20</span>
    
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Conv<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Concat<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># cat head P5</span>
       <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> BottleneckCSP<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 23</span>
    
       <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> Detect<span class="token punctuation">,</span> <span class="token punctuation">[</span>nc<span class="token punctuation">,</span> anchors<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># Detect(P3, P4, P5)</span>
      <span class="token punctuation">]</span>


â€‹    
</code></pre> 
<p><strong>å¼€å§‹è®­ç»ƒ</strong><br> è¿™é‡Œé€‰æ‹©äº† yolov5s æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œæƒé‡ä¹Ÿæ˜¯åŸºäº yolov5s.pt æ¥è®­ç»ƒ</p> 
<pre><code>    
    python train.py --img 640 \
                    --batch 16 --epochs 10 --data ./data/custom_data.yaml \
                    --cfg ./models/custom_yolov5.yaml --weights ./weights/yolov5s.pt
</code></pre> 
<h3><a id="42__315"></a>4.2 æ£€æµ‹å±é™©åŒºåŸŸå†…æ˜¯å¦æœ‰äºº</h3> 
<p><strong>å±é™©åŒºåŸŸæ ‡æ³¨æ–¹å¼</strong></p> 
<p>ä½¿ç”¨çš„æ˜¯ ç²¾çµæ ‡æ³¨åŠ©æ‰‹ æ ‡æ³¨ï¼Œç”Ÿæˆäº†å¯¹åº”å›¾ç‰‡çš„ json æ–‡ä»¶</p> 
<p><strong>æ‰§è¡Œä¾¦æµ‹</strong></p> 
<p>â€‹</p> 
<pre><code>    python area_detect.py --source ./area_dangerous --weights ./weights/helmet_head_person_s.pt
</code></pre> 
<p><strong>æ•ˆæœ</strong><br> å±é™©åŒºåŸŸä¼šä½¿ç”¨ çº¢è‰²æ¡† æ ‡å‡ºæ¥ï¼ŒåŒæ—¶ï¼Œå±é™©åŒºåŸŸé‡Œé¢çš„äººä½“ä¹Ÿä¼šè¢«æ¡†å‡ºæ¥ï¼Œå±é™©åŒºåŸŸå¤–çš„äººä½“ä¸ä¼šè¢«æ¡†é€‰å‡ºæ¥ã€‚<br> <img src="https://images2.imgbox.com/69/82/TzYpqXzj_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="5__334"></a>5 æœ€å</h2> 
<p>ğŸ§¿ <strong>æ›´å¤šèµ„æ–™, é¡¹ç›®åˆ†äº«ï¼š</strong></p> 
<p><a href="https://gitee.com/dancheng-senior/postgraduate" rel="nofollow">https://gitee.com/dancheng-senior/postgraduate</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8e2ad0fd0310e7bfbb4f0b4cb8e5c74e/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">åº“å­˜ç®¡ç†æ€ä¹ˆåšï¼Ÿ6å¤§åˆ†ææ¨¡æ¿å’Œåº“å­˜ç®¡ç†è½¯ä»¶ä¸€èµ·åˆ†äº«ç»™ä½ ï¼</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1ff142d6900ac3617c488c42840aa986/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">çŸ¥è¯†ä»˜è´¹å¹³å°çš„çº¿ä¸Šæ¨å¹¿æ–¹æ¡ˆæ€»ç»“ï¼Œèµ¶ç´§æ”¶è—äº†ï¼</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>