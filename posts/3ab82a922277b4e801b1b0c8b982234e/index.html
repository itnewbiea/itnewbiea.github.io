<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>纯JS打造多选下拉框select&#43;模糊查询功能 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="纯JS打造多选下拉框select&#43;模糊查询功能" />
<meta property="og:description" content="多选下拉框功能，html本身就提供，multiple就可以了。但是这个multiple有个缺点，那就是高度和宽度是固定的，无法改变，很占用页面空间。
下面两张图，右边的是html原生的multiple，左边的是纯js完成的。
左图：缺点是麻烦，优点是节约页面空间，且附带模糊查询功能。
右图：缺点是浪费空间，优点是简单。
当然，现在很多前端框架都包含了左图的功能，简单易用。之所以会用纯js完成左图的功能，是因为同事负责的一个项目，框架很老，而且大公司对系统框架控制比较严格，不能引用新的前端框架，所以才用纯js写的。
代码不多，很简单，必要的注释都有，相信都能看得懂。有什么疑问的话可以留言哈，一起讨论。
&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&#34;Content-Type&#34; content=&#34;text/html; charset=ANSI&#34;&gt; &lt;title&gt;Insert title here&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div style=&#34;width:200px;height:20px;overflow:hidden;&#34;&gt; &lt;input type=&#34;text&#34; id=&#34;selectButton&#34; onclick=&#34;myclick();&#34; readonly=&#34;true&#34; style=&#34;width:200px;height:20px;&#34;&gt; &lt;/div&gt; &lt;div id=&#34;fuzzysearchdiv&#34; style=&#34;display:none;width:200px;z-index:3;position:absolute;height:20px;&#34; onMouseOver=&#34;mousein()&#34; onMouseOut=&#34;mouseout()&#34;&gt; &lt;input type=&#34;text&#34; id=&#34;fuzzysearch&#34; onkeyup=&#34;myfuzzysearch()&#34; style=&#34;width:185px;&#34;/&gt; &lt;/div&gt; &lt;div id=&#34;selectdiv&#34; style=&#34;display:none;border:1px solid #A9A9A9;width:200px;z-index:2;position:absolute;overflow-y :scroll;height:100px;background-color:white;&#34; onMouseOver=&#34;mousein()&#34; onMouseOut=&#34;mouseout()&#34;&gt; &lt;br&gt; &lt;/div&gt; &lt;br&gt; &lt;input type=&#34;button&#34; value=&#34;提交&#34; onclick=&#34;mysubmit();&#34;/&gt; &lt;/body&gt; &lt;script type=&#34;text/javascript&#34;&gt; //下拉框的数据，股票代码/股票名称 var initlist = [&#39;3001/股票1&#39;,&#39;3002/股票2&#39;,&#39;3003/股票3&#39;,&#39;3004/很长的很长的股票4&#39;,&#39;3005/最长最长最长最长最长最长的股票5&#39;,&#39;3006/test6&#39;,&#39;3007/一号#7&#39;,&#39;3008/最后一个股票-&#39;];// //多选下拉框所在的div var selecteddiv = document.getElementById(&#34;selectdiv&#34;); //鼠标是否在【多选下拉框div】上面（如果在div上面，需要控制鼠标的点击事件，不让div隐藏；否则要让该div隐藏） var indiv = false; //模糊查询input var fuzzysearchinput = document." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/3ab82a922277b4e801b1b0c8b982234e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-28T10:10:17+08:00" />
<meta property="article:modified_time" content="2018-07-28T10:10:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">纯JS打造多选下拉框select&#43;模糊查询功能</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-indent:50px;">多选下拉框功能，html本身就提供，multiple就可以了。但是这个multiple有个缺点，那就是高度和宽度是固定的，无法改变，很占用页面空间。</p> 
<p style="text-indent:50px;">下面两张图，右边的是html原生的multiple，左边的是纯js完成的。</p> 
<p style="text-indent:50px;">左图：缺点是麻烦，优点是节约页面空间，且附带模糊查询功能。</p> 
<p style="text-indent:50px;">右图：缺点是浪费空间，优点是简单。</p> 
<p style="text-indent:50px;"> </p> 
<p style="text-indent:50px;"><img alt="" class="has" src="https://images2.imgbox.com/10/2b/gHEs5pVX_o.gif"><img alt="" class="has" src="https://images2.imgbox.com/c8/86/fSOTqEyM_o.gif"></p> 
<p style="text-indent:50px;"> </p> 
<p style="text-indent:50px;">当然，现在很多前端框架都包含了左图的功能，简单易用。之所以会用纯js完成左图的功能，是因为同事负责的一个项目，框架很老，而且大公司对系统框架控制比较严格，不能引用新的前端框架，所以才用纯js写的。</p> 
<p style="text-indent:50px;">代码不多，很简单，必要的注释都有，相信都能看得懂。有什么疑问的话可以留言哈，一起讨论。</p> 
<p style="text-indent:50px;"> </p> 
<pre class="has"><code class="language-html">&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=ANSI"&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div style="width:200px;height:20px;overflow:hidden;"&gt;
	&lt;input type="text" id="selectButton" onclick="myclick();" readonly="true" style="width:200px;height:20px;"&gt;
&lt;/div&gt;
&lt;div id="fuzzysearchdiv" style="display:none;width:200px;z-index:3;position:absolute;height:20px;"
		onMouseOver="mousein()" onMouseOut="mouseout()"&gt;
	&lt;input type="text" id="fuzzysearch" onkeyup="myfuzzysearch()" style="width:185px;"/&gt;
&lt;/div&gt;
&lt;div id="selectdiv" style="display:none;border:1px solid #A9A9A9;width:200px;z-index:2;position:absolute;overflow-y :scroll;height:100px;background-color:white;"
		onMouseOver="mousein()" onMouseOut="mouseout()"&gt;
	&lt;br&gt;

&lt;/div&gt;
&lt;br&gt;
&lt;input type="button" value="提交" onclick="mysubmit();"/&gt;
&lt;/body&gt;
&lt;script type="text/javascript"&gt;
	
	//下拉框的数据，股票代码/股票名称
	var initlist = ['3001/股票1','3002/股票2','3003/股票3','3004/很长的很长的股票4','3005/最长最长最长最长最长最长的股票5','3006/test6','3007/一号#7','3008/最后一个股票-'];//
	
	//多选下拉框所在的div
	var selecteddiv = document.getElementById("selectdiv");
	
	//鼠标是否在【多选下拉框div】上面（如果在div上面，需要控制鼠标的点击事件，不让div隐藏；否则要让该div隐藏）
	var indiv = false;
	
	//模糊查询input
	var fuzzysearchinput = document.getElementById("fuzzysearch");
	
	//选中的股票代码（需要传到后台的参数）
	var selectedlist = [];
	//选中的股票名称（展示在前台给业务员看的）
	var selectednamelist = [];
	
	window.onload = function(){
		
		//动态创建所有的checkbox元素
		for(var i = 0; i &lt; initlist.length; i++){
			var tmpdiv = document.createElement("div");
			var tmpinput = document.createElement("input");
			tmpinput.setAttribute("name","mycheckbox");
			tmpinput.setAttribute("type","checkbox");
			tmpinput.setAttribute("onclick","mycheck(this)");
			tmpinput.setAttribute("value",initlist[i].substr(0,initlist[i].indexOf("/")));
			
			var tmptext = document.createTextNode(initlist[i].substr(initlist[i].indexOf("/")+1,initlist[i].length));
			tmpdiv.appendChild(tmpinput);
			tmpdiv.appendChild(tmptext);
			selecteddiv.appendChild(tmpdiv);
		}
		
		//鼠标点击事件，如果点击在 selectedbutton，或者是在多选框div中的点击事件，不作处理。其他情况的点击事件，将多选空div隐藏
		document.onclick=function(event){
			if(event.target.id=="selectButton" || indiv){
				return;
			}
			selecteddiv.style.display="none";
			document.getElementById("fuzzysearchdiv").style.display="none";
		};
	};
	
	//点击selectButton，展示多选框
	function myclick (){
		document.getElementById("fuzzysearchdiv").style.display="block";
		selecteddiv.style.display="block";
	}
	
	//鼠标进入多选框的div【selectdiv】
	function mousein(){
		indiv = true;
	}
	
	//鼠标离开多选框的div【selectdiv】
	function  mouseout(){
		indiv = false;
	}
	
	//checkbox的点击事件
	function mycheck(obj){
		if(obj.checked){
			selectedlist.push(obj.value);
			selectednamelist.push(obj.nextSibling.nodeValue);
		}else{
			for(var i = 0; i &lt; selectedlist.length; i++){
				if(selectedlist[i] == obj.value){
					selectedlist.splice(i,1);
					selectednamelist.splice(i,1);
				}
			}
		}
		document.getElementById("selectButton").value=selectednamelist;
	}
	
	//模糊查询
	function myfuzzysearch(){
		var checkboxlist = document.getElementsByName("mycheckbox");
		for(var i = 0; i &lt; checkboxlist.length; i++){
			if(checkboxlist[i].nextSibling.nodeValue.indexOf(fuzzysearchinput.value) == -1){
				checkboxlist[i].parentNode.style.display = "none";
			}else{
				checkboxlist[i].parentNode.style.display = "block";
			}
		}
	}
	
	function mysubmit(){
		alert(selectedlist);
	}
&lt;/script&gt;

&lt;/html&gt;</code></pre> 
<p style="text-indent:50px;"> </p> 
<p style="text-indent:50px;">下面附上模糊查询的功能示意图：</p> 
<p style="text-align:center;"><img alt="" class="has" src="https://images2.imgbox.com/53/7c/nyJ1UcG1_o.gif"></p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1985bdd51c4c19ced18a34bb81e6b414/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">打包Maven项目时出现Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:testCompile</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c754846e259553aadaeedd7c5a995f77/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一种快速的自适应二值化算法-wallner</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>