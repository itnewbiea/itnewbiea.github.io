<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>特训营第二天项目实战案例 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="特训营第二天项目实战案例" />
<meta property="og:description" content="防火墙理论知识（一定要记得） 防火墙的分类 包过滤防火墙 就是在路由器上写ACL
代理防火墙 相当于租房中介
缺点：速度慢
状态检测防火墙 一个数据包到达防火墙以后，如果策略允许通过，则放行。并建立状态化表项。
优点：处理后续的包速度快、安全性高
防火墙的模式 路由模式透明模式混合模式 区域划分 防火墙区域类型
优先级
所连区域
UNTRUST
5
外网接口
TRUST
85
内网接口
DMZ
50
服务器
LOCAL
100
访问我防火墙本身的流量
Inbound 由低到高
Outbound 由高到低
注意：优先级范围为1-100
实验拓扑 实验需求 实验配置 定义防火墙的区域类型 &lt;SRG&gt;system-view //进入到系统视图
[SRG]undo info-center enable //关闭中心输出命令
[SRG]sysname FW //名字叫FW
[FW]firewall zone trust // 定义信任区域
[FW-zone-trust]add interface g0/0/1 //把接口g0/0/1加入进去
[FW-zone-trust]quit
[FW]firewall zone dmz //定义DMZ区域
[FW-zone-dmz]add interface g0/0/3 //把接口g0/0/3加入进去
[FW-zone-dmz]quit
[FW]firewall zone untrust //定义非信任区域" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9ca5f6cd56fe00873cbc6fd872d0494c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-18T14:28:12+08:00" />
<meta property="article:modified_time" content="2023-08-18T14:28:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">特训营第二天项目实战案例</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;text-align:justify;">        </p> 
<ul><li style="text-align:justify;"><strong>防火墙理论知识（一定要记得）</strong></li></ul> 
<ol><li style="text-align:justify;"><strong>防火墙的分类</strong></li></ol> 
<ol><li style="text-align:justify;">包过滤防火墙</li></ol> 
<p style="margin-left:0;text-align:justify;">   就是在路由器上写ACL</p> 
<ol><li style="text-align:justify;">代理防火墙</li></ol> 
<p style="margin-left:0;text-align:justify;">   相当于租房中介</p> 
<p style="margin-left:0;text-align:justify;">   缺点：速度慢</p> 
<ol><li style="text-align:justify;">状态检测防火墙</li></ol> 
<p style="margin-left:0;text-align:justify;">  一个数据包到达防火墙以后，如果策略允许通过，则放行。并建立状态化表项。</p> 
<p style="margin-left:0;text-align:justify;">优点：处理后续的包速度快、安全性高</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<ol><li style="text-align:justify;"><strong>防火墙的模式</strong></li></ol> 
<p style="margin-left:0;text-align:justify;"></p> 
<ol><li style="text-align:justify;">路由模式</li><li style="text-align:justify;">透明模式</li><li style="text-align:justify;">混合模式</li></ol> 
<p style="margin-left:0;text-align:justify;"></p> 
<ol><li style="text-align:justify;"><strong>区域划分 </strong></li></ol> 
<p style="margin-left:0;text-align:justify;"></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:138.95pt;"> <p style="margin-left:0;text-align:justify;"><strong>防火墙区域类型</strong></p> </td><td style="border-color:#000000;vertical-align:top;width:138.05pt;"> <p style="margin-left:0;text-align:justify;"><strong>优先级</strong></p> </td><td style="border-color:#000000;vertical-align:top;width:137.8pt;"> <p style="margin-left:0;text-align:justify;"><strong>所连区域</strong></p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:138.95pt;"> <p style="margin-left:0;text-align:justify;">UNTRUST</p> </td><td style="vertical-align:top;width:138.05pt;"> <p style="margin-left:0;text-align:justify;">5</p> </td><td style="vertical-align:top;width:137.8pt;"> <p style="margin-left:0;text-align:justify;">外网接口</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:138.95pt;"> <p style="margin-left:0;text-align:justify;">TRUST</p> </td><td style="vertical-align:top;width:138.05pt;"> <p style="margin-left:0;text-align:justify;">85</p> </td><td style="vertical-align:top;width:137.8pt;"> <p style="margin-left:0;text-align:justify;">内网接口</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:138.95pt;"> <p style="margin-left:0;text-align:justify;">DMZ</p> </td><td style="vertical-align:top;width:138.05pt;"> <p style="margin-left:0;text-align:justify;">50</p> </td><td style="vertical-align:top;width:137.8pt;"> <p style="margin-left:0;text-align:justify;">服务器</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:138.95pt;"> <p style="margin-left:0;text-align:justify;">LOCAL</p> </td><td style="vertical-align:top;width:138.05pt;"> <p style="margin-left:0;text-align:justify;">100</p> </td><td style="vertical-align:top;width:137.8pt;"> <p style="margin-left:0;text-align:justify;">访问我防火墙本身的流量</p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:justify;">Inbound  由低到高</p> 
<p style="margin-left:0;text-align:justify;">Outbound 由高到低</p> 
<p style="margin-left:0;text-align:justify;">注意：优先级范围为1-100</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<ul><li style="text-align:justify;"><strong>实验拓扑</strong></li></ul> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="423" src="https://images2.imgbox.com/87/34/9IoQO3oW_o.png" width="1127"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<ul><li style="text-align:justify;">实验需求</li></ul> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<ul><li style="text-align:justify;"><strong>实验配置</strong></li></ul> 
<ol><li style="text-align:justify;">定义防火墙的区域类型</li></ol> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">&lt;SRG&gt;system-view   //</span><span style="color:#000000;">进入到系统视图</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[SRG]undo info-center enable   //</span><span style="color:#000000;">关闭中心输出命令</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[SRG]sysname FW  //</span><span style="color:#000000;">名字叫FW</span></span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW]firewall zone trust  // </span><span style="color:#000000;">定义信任区域</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-zone-trust]add interface g0/0/1  //</span><span style="color:#000000;">把接口g0/0/1加入进去</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-zone-trust]quit</span></span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW]firewall zone dmz //</span><span style="color:#000000;">定义DMZ区域</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-zone-dmz]add interface g0/0/3  //</span><span style="color:#000000;">把接口g0/0/3加入进去</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-zone-dmz]quit</span></span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW]firewall zone untrust //</span><span style="color:#000000;">定义非信任区域</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-zone-untrust]add interface g0/0/2  //</span><span style="color:#000000;">把接口g0/0/2加入进去</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-zone-untrust]quit</span></span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<ol><li style="text-align:justify;">配置防火墙的IP地址</li></ol> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW]interface g0/0/1</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-GigabitEthernet0/0/1]ip address 172.16.2.1 24</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-GigabitEthernet0/0/1]quit</span></span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW]interface g0/0/3</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-GigabitEthernet0/0/3]ip address 172.16.1.1 24</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-GigabitEthernet0/0/3]quit</span></span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW]interface g0/0/2</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-GigabitEthernet0/0/2]ip address 100.1.1.1 24</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-GigabitEthernet0/0/2]quit</span></span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<ol><li style="text-align:justify;">配置终端的IP地址</li></ol> 
<p style="margin-left:0;text-align:justify;">酒店客房电脑的配置</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="533" src="https://images2.imgbox.com/95/64/XCF7fXVb_o.png" width="781"></p> 
<p style="margin-left:0;text-align:justify;">酒店网页服务器的配置</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="509" src="https://images2.imgbox.com/e2/3b/uEwnR9Zc_o.png" width="734"></p> 
<p style="margin-left:0;text-align:justify;">外网设备的配置</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="509" src="https://images2.imgbox.com/2d/30/XxLKvaUZ_o.png" width="734"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<ol><li style="text-align:justify;">测试网络连通性</li></ol> 
<p style="margin-left:0;text-align:justify;">第一步：172.16.2.2是否可以访问172.16.1.2</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="533" src="https://images2.imgbox.com/85/03/O3XnHIo9_o.png" width="781"></p> 
<p style="margin-left:0;text-align:justify;">通过以上输出可以看到不通，通过以下的命令放行</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW]firewall packet-filter default permit interzone trust untrust direction outbound </span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">// trust</span><span style="color:#000000;">的优先级为 85  untrust优先级为5 由高到低叫outbound 所以放行的是从trust到untrust的数据</span></span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW]firewall packet-filter  default permit interzone trust dmz direction outbound </span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">// trust</span><span style="color:#000000;">的优先级为 85  DMZ优先级为50 由高到低叫outbound 所以放行的是从trust到DMZ的数据</span></span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">第二步：再测试一下</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="533" src="https://images2.imgbox.com/08/fc/4gYhNtKa_o.png" width="781"></p> 
<p style="margin-left:0;text-align:justify;">我们可以看到可以访问了</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<ol><li style="text-align:justify;">NAT</li></ol> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW]nat-policy interzone trust untrust outbound  //NAT</span><span style="color:#000000;">策略是从信任区域到非信任区域</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-nat-policy-interzone-trust-untrust-outbound]policy 1  //</span><span style="color:#000000;">策略1</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-nat-policy-interzone-trust-untrust-outbound-1]policy source any   //</span><span style="color:#000000;">下面所有的用户</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-nat-policy-interzone-trust-untrust-outbound-1]policy destination any   //</span><span style="color:#000000;">访问所有的网络</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-nat-policy-interzone-trust-untrust-outbound-1]action source-nat   //</span><span style="color:#000000;">作NAT </span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-nat-policy-interzone-trust-untrust-outbound-1]easy-ip GigabitEthernet 0/0/2  //</span><span style="color:#000000;">用esay IP</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-nat-policy-interzone-trust-untrust-outbound-1]quit</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">[FW-nat-policy-interzone-trust-untrust-outbound]quit</span></span></p> 
<p style="margin-left:0;text-align:justify;">想要参加刘老师训练营的同学请加文章下方的VX,</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/de0770049ca4c482ff69f6cebe656662/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">对接聚水潭-胜算接口</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/43bfd3f8cf92e5f92f481f61b6f076ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">新手入门Pinia状态管理库，看完这篇文章你就懂了！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>