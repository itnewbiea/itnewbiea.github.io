<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringCloudAlibaba 集成Dubbo、Nacos 以及Hoxton.SR12版本问题解决 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringCloudAlibaba 集成Dubbo、Nacos 以及Hoxton.SR12版本问题解决" />
<meta property="og:description" content="目录
一、SpringCloudAlibaba集成Dubbo、Nacos
二、版本问题解决
一、SpringCloudAlibaba集成Dubbo、Nacos 集成常规操作这个博主已经写的很详细了：
Spring Cloud Alibaba学习（九）：Dubbo集成_IcyDate的博客-CSDN博客_dubbo集成
不过个人推荐将扫描包的配置放到配置文件：
如：
服务提供者：
server: port: 8881 spring: cloud: nacos: server-addr: localhost:8848 # nacos的服务配置 discovery: cluster-name: Service_cluster_1 #集群 group: Service_group_1 # 分组名 username: nacos # 用户名 password: nacos # 密码 namespace: public # 环境分类 application: name: dubbo-provider dubbo: protocol: name: dubbo port: -1 registry: address: spring-cloud://localhost:8848 scan: #dubbo的服务路径 base-packages: com.wxl.service 服务消费者：多添加一个订阅提供者名称会更规范
server: port: 8882 spring: cloud: nacos: server-addr: localhost:8848 # nacos的服务配置 discovery: cluster-name: Service_cluster_1 #集群 group: Service_group_1 # 分组名 username: nacos # 用户名 password: nacos # 密码 namespace: public # 环境分类 application: name: dubbo-consumer dubbo: protocol: name: dubbo port: -1 registry: address: spring-cloud://localhost:8848 cloud: subscribed-services: dubbo-provider #订阅的提供者名称 注意：先启动服务提供者，再启动服务消费者" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/5f133564ff0a5c6c333f24a2b3204a53/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-23T14:28:58+08:00" />
<meta property="article:modified_time" content="2022-04-23T14:28:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringCloudAlibaba 集成Dubbo、Nacos 以及Hoxton.SR12版本问题解决</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81SpringCloudAlibaba%E9%9B%86%E6%88%90Dubbo%E3%80%81Nacos-toc" style="margin-left:80px;"><a href="#%E4%B8%80%E3%80%81SpringCloudAlibaba%E9%9B%86%E6%88%90Dubbo%E3%80%81Nacos" rel="nofollow">一、SpringCloudAlibaba集成Dubbo、Nacos</a></p> 
<p id="%E4%BA%8C%E3%80%81%E7%89%88%E6%9C%AC%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3-toc" style="margin-left:80px;"><a href="#%E4%BA%8C%E3%80%81%E7%89%88%E6%9C%AC%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3" rel="nofollow">二、版本问题解决</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h4 id="%E4%B8%80%E3%80%81SpringCloudAlibaba%E9%9B%86%E6%88%90Dubbo%E3%80%81Nacos">一、SpringCloudAlibaba集成Dubbo、Nacos</h4> 
<p>集成常规操作这个博主已经写的很详细了：</p> 
<p><a href="https://blog.csdn.net/IcyDate/article/details/123708453" title="Spring Cloud Alibaba学习（九）：Dubbo集成_IcyDate的博客-CSDN博客_dubbo集成">Spring Cloud Alibaba学习（九）：Dubbo集成_IcyDate的博客-CSDN博客_dubbo集成</a></p> 
<p>不过个人推荐将扫描包的配置放到配置文件：</p> 
<p>如：</p> 
<p>服务提供者：</p> 
<pre><code>server:
  port: 8881
spring:
  cloud:
    nacos:
      server-addr: localhost:8848 # nacos的服务配置
      discovery:
        cluster-name: Service_cluster_1  #集群
        group: Service_group_1  # 分组名
        username: nacos # 用户名
        password: nacos # 密码
        namespace: public  # 环境分类
  application:
    name: dubbo-provider
dubbo:
  protocol:
    name: dubbo
    port: -1
  registry:
    address: spring-cloud://localhost:8848
  scan: #dubbo的服务路径
    base-packages: com.wxl.service</code></pre> 
<p>服务消费者：多添加一个订阅提供者名称会更规范</p> 
<pre><code>server:
  port: 8882
spring:
  cloud:
    nacos:
      server-addr: localhost:8848 # nacos的服务配置
      discovery:
        cluster-name: Service_cluster_1  #集群
        group: Service_group_1  # 分组名
        username: nacos # 用户名
        password: nacos # 密码
        namespace: public  # 环境分类
  application:
    name: dubbo-consumer
dubbo:
  protocol:
    name: dubbo
    port: -1
  registry:
    address: spring-cloud://localhost:8848
  cloud:
    subscribed-services: dubbo-provider  #订阅的提供者名称</code></pre> 
<p>注意：先启动服务提供者，再启动服务消费者</p> 
<h4 id="%E4%BA%8C%E3%80%81%E7%89%88%E6%9C%AC%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3">二、版本问题解决</h4> 
<p>我用的是比较新的版本：Hoxton.SR12系列</p> 
<p>按照该博主的操作，理论是没有问题的，但事实是新版本还是有一定的坑的，启动即报错如下：</p> 
<pre><code>***************************
APPLICATION FAILED TO START
***************************

Description:

An attempt was made to call a method that does not exist. The attempt was made from the following location:

    org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor.&lt;init&gt;(ReferenceAnnotationBeanPostProcessor.java:106)

The following method did not exist:

    org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor.setClassValuesAsString(Z)V

The method's class, org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor, is available from the following locations:

    jar:file:/D:/apache-maven-3.8.1/maven-repository/org/apache/dubbo/dubbo/2.7.13/dubbo-2.7.13.jar!/org/apache/dubbo/config/spring/beans/factory/annotation/ReferenceAnnotationBeanPostProcessor.class

The class hierarchy was loaded from the following locations:

    org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor: file:/D:/apache-maven-3.8.1/maven-repository/org/apache/dubbo/dubbo/2.7.13/dubbo-2.7.13.jar
    com.alibaba.spring.beans.factory.annotation.AbstractAnnotationBeanPostProcessor: file:/D:/apache-maven-3.8.1/maven-repository/com/alibaba/spring/spring-context-support/1.0.10/spring-context-support-1.0.10.jar
    org.springframework.beans.factory.config.InstantiationAwareBeanPostProcessorAdapter: file:/D:/apache-maven-3.8.1/maven-repository/org/springframework/spring-beans/5.2.15.RELEASE/spring-beans-5.2.15.RELEASE.jar


Action:

Correct the classpath of your application so that it contains a single, compatible version of org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor

</code></pre> 
<p>这很明显是jar包冲突问题！！！但调了一天我也没解决该问题，人都麻了，后来终于找到了一篇官方回应该问题的文章顺利解决：</p> 
<p><a href="https://github.com/alibaba/spring-cloud-alibaba/issues/2310" title="升级 2.2.7 报错 · Issue #2310 · alibaba/spring-cloud-alibaba · GitHub">升级 2.2.7 报错 · Issue #2310 · alibaba/spring-cloud-alibaba · GitHub</a></p> 
<p>这是官方的回应，解决方法很简单，就是添加一个配置：</p> 
<pre><code class="language-XML">         &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba.spring&lt;/groupId&gt;
            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;
            &lt;version&gt;1.0.11&lt;/version&gt;
        &lt;/dependency&gt;</code></pre> 
<p>原本系列的是1.0.10但这里要顺利集成dubbo需要升级为1.0.11。</p> 
<p>解决后运行，发现rpc调用正常：</p> 
<p><img alt="" height="268" src="https://images2.imgbox.com/6c/5c/OG2sOm7X_o.png" width="623"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/979ca43eac51c9f2f70c09704bce0108/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">京东AI：用于视觉识别的上下文Transformer网络-Contextual Transformer Networks for Visual Recognition</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0a2a8034cfe5274b30397972189f29b6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue打印echarts</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>