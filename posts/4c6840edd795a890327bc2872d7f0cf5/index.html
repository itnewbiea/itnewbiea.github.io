<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ping指令详解 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ping指令详解" />
<meta property="og:description" content="ping命令分析 1）概念 ICMP协议是*“Internet Control Message Ptotocol”（因特网控制消息协议）的缩写。它是TCP/IP协议族的一个子协议，用于在IP*主机、路由器之间传递控制消息。
ping (Packet Internet Groper)：因特网包探索器，用于测试网络连接量的程序。Ping发送一个ICMP；回声请求消息给目的地并报告是否收到所希望的ICMP echo （ICMP回声应答）。它是用来检查网络是否通畅或者网络连接速度的命令
ping命令通常用来作为网络可用性的检查。ping命令可以对一个网络地址发送测试数据包，看该网络地址是否有响应并统计响应时间，以此测试网络。
ping和ICMP的关系：ping命令发送数据使用的是ICMP协议。
ping的原理：向指定的网络地址发送一定长度的数据包，按照约定，若指定网络地址存在的话，会返回同样大小的数据包，当然，若在特定时间内没有返回，就是“超时”，会被认为指定的网络地址不存在。
ICMP协议通过IP协议发送的，IP协议是一种无连接的，不可靠的数据包协议
2）使用Ping这命令来测试网络连通 连通问题是由许多原因引起的，如本地配置错误远程主机协议失效等，当然还包括设备等造成的故障。使用Ping检查连通性有五个步骤：
A. 使用ipconfig /all观察本地网络设置是否正确
B.Ping 127.0.0.1，127.0.0.1 回送地址Ping回送地址是为了检查本地的TCP/IP协议有没有设置好,如果本地址无法Ping通，则表明本地机TCP/IP协议不能正常工作
C. Ping本机IP地址，这样是为了检查本机的IP地址是否设置有误；
D. Ping本网网关或本网IP地址，这样的是为了检查硬件设备是否有问题，也可以检查本机与本地网络连接是否正常（在非局域网中这一步骤可以忽略）
E. Ping远程IP地址，这主要是检查本网或本机与外部的连接是否正常。
3)用Ping命令来判断一条链路好坏 Ping除了可以检查网络的连通和检测故障以外，还可以利用它的一些返回数据，来估算你跟某台主机之间的速度是多少字节每秒。
&#34;字节=32&#34;表示ICMP报文中有32个字节的测试数据；=&#34;时间=6ms&#34;是往返时间。 &#34;已发送=4&#34;发送多个秒包、&#34;已接收=4&#34;收到多个回应包、&#34;丢失=0&#34;丢弃了多少个；所在图上来看，来回只用了6MS 时间，lost =0 即是丢包数为0，网络状态相当良好；
4) 故障分析 ① Request timed out A. 对方已关机，或者网络上根本没有这个地址
B. 对方与自己不在同一网段内，通过路由也无法找到对方，但有时对方确实是存在的，当然不存在也是返回超时的信息。
C. 对方确实存在，但设置了ICMP数据包过滤（比如防火墙设置），此时可以用带参数 -a(将地址解析为计算机名) 的Ping命令探测对方，如果能得到对方的NETBIOS名称，则说明对方是存在的
D. 错误设置IP地址
正常情况下，一台主机应该有一个网卡，一个IP地址，或多个网卡，多个IP地址（这些地址一定要处于不同的IP子网）但如果一台电脑的“拨号网络适配器”（相当于一块软网卡）的TCP/IP设置中，设置了一个与网卡IP地址处于同一子网的IP地址，这样，在IP层协议看来，这台主机就有两个不同的接口处于同一网段内。当从这台主机Ping其他的机器时，会存在这样的问题：
1 主机不知道将数据包发到哪个网络接口，因为有两个网络接口都连接在同一网段。2 主机不知道用哪个地址作为数据包的源地址。因此，从这台主机去Ping其他机器，IP层协议会无法处理，超时后，Ping 就会给出一个“超时无应答”的错误信息提示。但从其他主机Ping这台主机时，请求包从特定的网卡来，ICMP只须简单地将目的、源地址互换，并更改一些标志即可，ICMP应答包能顺利发出，其他主机也就能成功Ping通这台机器了。
②Destination host Unreachable A. 对方与自己不在同一网段内，而自己又未设置默认的路由，比如上例中A机中不设定默认的路由，运行Ping 192.168.0.1.4就会出现“Destination host Unreachable”。
B. 网线出了故障，这里要说明一下“destination host unreachable”和 “time out”的区别，如果所经过的路由器的路由表中具有到达目标的路由，而目标因为其他原因不可到达，这时候会出现“time out”，如果路由表中连到达目标的路由都没有，那就会出现“destination host unreachable”。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4c6840edd795a890327bc2872d7f0cf5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-17T17:08:07+08:00" />
<meta property="article:modified_time" content="2021-01-17T17:08:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ping指令详解</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="ping_0"></a>ping命令分析</h3> 
<h4><a id="1_2"></a>1）概念</h4> 
<p><em>ICMP</em>协议是*“Internet Control Message Ptotocol”<em>（<em>因特网</em>控制消息协议）的缩写。它是</em>TCP/IP<em>协议族的一个子协议，用于在</em>IP*主机、路由器之间传递控制消息。</p> 
<p>ping (Packet Internet Groper)：因特网包探索器，用于测试网络连接量的程序。Ping发送一个ICMP；回声请求消息给目的地并报告是否收到所希望的ICMP echo （ICMP回声应答）。它是用来检查网络是否通畅或者网络连接速度的命令</p> 
<p>ping命令通常用来作为网络可用性的检查。ping命令可以对一个网络地址发送测试数据包，看该网络地址是否有响应并统计响应时间，以此测试网络。</p> 
<p>ping和ICMP的关系：ping命令发送数据使用的是ICMP协议。</p> 
<p>ping的原理：向指定的网络地址发送一定长度的数据包，按照约定，若指定网络地址存在的话，会返回同样大小的数据包，当然，若在特定时间内没有返回，就是“超时”，会被认为指定的网络地址不存在。</p> 
<p>ICMP协议通过IP协议发送的，IP协议是一种无连接的，不可靠的数据包协议</p> 
<h4><a id="2Ping_16"></a>2）使用Ping这命令来测试网络连通</h4> 
<p>连通问题是由许多原因引起的，如本地配置错误远程主机协议失效等，当然还包括设备等造成的故障。使用Ping检查连通性有五个步骤：</p> 
<p>A. 使用ipconfig /all观察本地网络设置是否正确</p> 
<p>B.Ping 127.0.0.1，127.0.0.1 回送地址Ping回送地址是为了检查本地的TCP/IP协议有没有设置好,如果本地址无法Ping通，则表明本地机TCP/IP协议不能正常工作</p> 
<p>C. Ping本机IP地址，这样是为了检查本机的IP地址是否设置有误；</p> 
<p>D. Ping本网网关或本网IP地址，这样的是为了检查硬件设备是否有问题，也可以检查本机与本地网络连接是否正常（在非局域网中这一步骤可以忽略）</p> 
<p>E. Ping远程IP地址，这主要是检查本网或本机与外部的连接是否正常。</p> 
<h4><a id="3Ping_32"></a>3)用Ping命令来判断一条链路好坏</h4> 
<p>Ping除了可以检查网络的连通和检测故障以外，还可以利用它的一些返回数据，来估算你跟某台主机之间的速度是多少字节每秒。</p> 
<p><img src="https://images2.imgbox.com/bb/e9/8BfdIuYE_o.png" alt="img"></p> 
<p>"字节=32"表示ICMP报文中有32个字节的测试数据；="时间=6ms"是往返时间。 "已发送=4"发送多个秒包、"已接收=4"收到多个回应包、"丢失=0"丢弃了多少个；所在图上来看，来回只用了6MS 时间，lost =0 即是丢包数为0，网络状态相当良好；</p> 
<h4><a id="4__42"></a>4) 故障分析</h4> 
<p><img src="https://images2.imgbox.com/fc/07/nIAhSTRp_o.png" alt="img"></p> 
<h5><a id="_Request_timed_out_46"></a>① Request timed out</h5> 
<p>A. 对方已关机，或者网络上根本没有这个地址</p> 
<p>B. 对方与自己不在同一网段内，通过路由也无法找到对方，但有时对方确实是存在的，当然不存在也是返回超时的信息。</p> 
<p>C. 对方确实存在，但设置了ICMP数据包过滤（比如防火墙设置），此时可以用带参数 -a(将地址解析为计算机名) 的Ping命令探测对方，如果能得到对方的NETBIOS名称，则说明对方是存在的</p> 
<p>D. 错误设置IP地址</p> 
<p>正常情况下，一台主机应该有一个网卡，一个IP地址，或多个网卡，多个IP地址（这些地址一定要处于不同的IP子网）但如果一台电脑的“拨号网络适配器”（相当于一块软网卡）的TCP/IP设置中，设置了一个与网卡IP地址处于同一子网的IP地址，这样，在IP层协议看来，这台主机就有两个不同的接口处于同一网段内。当从这台主机Ping其他的机器时，会存在这样的问题：</p> 
<p>1 主机不知道将数据包发到哪个网络接口，因为有两个网络接口都连接在同一网段。2 主机不知道用哪个地址作为数据包的源地址。因此，从这台主机去Ping其他机器，IP层协议会无法处理，超时后，Ping 就会给出一个“超时无应答”的错误信息提示。但从其他主机Ping这台主机时，请求包从特定的网卡来，ICMP只须简单地将目的、源地址互换，并更改一些标志即可，ICMP应答包能顺利发出，其他主机也就能成功Ping通这台机器了。</p> 
<h5><a id="Destination_host_Unreachable_60"></a>②Destination host Unreachable</h5> 
<p>A. 对方与自己不在同一网段内，而自己又未设置默认的路由，比如上例中A机中不设定默认的路由，运行Ping 192.168.0.1.4就会出现“Destination host Unreachable”。</p> 
<p>B. 网线出了故障，这里要说明一下“destination host unreachable”和 “time out”的区别，如果所经过的路由器的路由表中具有到达目标的路由，而目标因为其他原因不可到达，这时候会出现“time out”，如果路由表中连到达目标的路由都没有，那就会出现“destination host unreachable”。</p> 
<h5><a id="Bad_IP_address_66"></a>③Bad IP address</h5> 
<p>这个信息表示您可能没有连接到DNS服务器，所以无法解析这个IP地址，也可能是IP地址不存在。</p> 
<h5><a id="_Unknown_host_70"></a>④ Unknown host</h5> 
<p>这种出错信息的意思是，该远程主机的名字不能被域名服务器（DNS）转换成IP地址。故障原因可能是域名服务器有故障，或者其名字不正确，或者网络管理员的系统与远程主机之间的通信线路有故障。</p> 
<h5><a id="No_Answer_74"></a>⑤No Answer</h5> 
<p>这种故障说明本地系统有一条通向中心主机的路由，但却接收不到它发给该中心主机的任何信息。故障原因可能是下列之一：中心主机没有工作；本地或中心主机网络配置不正确；本地或中心的路由器没有工作；通信线路有故障；中心主机存在路由选择问题。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e361da1787f91644237c669c713d468a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">什么镜头最适合拍风景_单反相机拍风景选什么样的镜头好？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3d33416d9be94af9e5e24b7311dba66a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">时间复杂度和空间复杂度分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>