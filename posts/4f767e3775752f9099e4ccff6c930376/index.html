<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java--Apache里面的BeanUtils组件使用 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java--Apache里面的BeanUtils组件使用" />
<meta property="og:description" content="BeanUtils BeanUtils是Apache commens组件里面的成员，由Apache提供的一套开源api，用于简化对javaBean的操作，能够对基本类型自动转换。
JavaBean BeanUtils组件是用于简化javaBean的操作，那么什么是javaBean呢？简单来说，javaBean实质就是java类，只不过是遵循了某种规范的java类。
javaBean的特点：
必须具有一个无参的构造方法属性必须私有化私有化的属性必须通过public类型的方法来暴露，也就是说要出现setXXX()、getXXX()或者isXXX()的方法 下载BeanUtils http://commons.apache.org/proper/commons-beanutils/download_beanutils.cgi，下载好组件，再到项目里面引入jar文件。
导入核心包 commons-beanutils-1.9.3.jarcommons-logging-1.2.jar 注意：当缺少日志jar包，会出现如下的报错情况。java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
logging组件的下载地址：http://commons.apache.org/proper/commons-logging/download_logging.cgi javaBean实例 public class Student { private String name; private String id; private int age; private String sex; private Date d; public Student() { super(); } public Date getD() { return d; } public void setD(Date d) { this.d = d; } public String getName() { return name; } public void setName(String name) { this.name = name; } public String getId() { return id; } public void setId(String id) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4f767e3775752f9099e4ccff6c930376/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-10-11T13:50:59+08:00" />
<meta property="article:modified_time" content="2018-10-11T13:50:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java--Apache里面的BeanUtils组件使用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>BeanUtils</h3> 
<p>BeanUtils是Apache commens组件里面的成员，由Apache提供的一套开源api，用于简化对javaBean的操作，能够对基本类型自动转换。</p> 
<h3>JavaBean</h3> 
<p>BeanUtils组件是用于简化javaBean的操作，那么什么是javaBean呢？简单来说，javaBean实质就是java类，只不过是遵循了某种规范的java类。</p> 
<p>javaBean的特点：</p> 
<ol><li>必须具有一个无参的构造方法</li><li>属性必须私有化</li><li>私有化的属性必须通过public类型的方法来暴露，也就是说要出现setXXX()、getXXX()或者isXXX()的方法</li></ol> 
<h3>下载BeanUtils</h3> 
<p><a href="http://commons.apache.org/proper/commons-beanutils/download_beanutils.cgi" rel="nofollow">http://commons.apache.org/proper/commons-beanutils/download_beanutils.cgi</a>，下载好组件，再到项目里面引入jar文件。</p> 
<h3>导入核心包</h3> 
<ol><li>commons-beanutils-1.9.3.jar</li><li>commons-logging-1.2.jar</li></ol> 
<p><span style="color:#f33b45;">注意：当缺少日志jar包，会出现如下的报错情况。java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory</span></p> 
<p>logging组件的下载地址：<a href="http://commons.apache.org/proper/commons-logging/download_logging.cgi" rel="nofollow">http://commons.apache.org/proper/commons-logging/download_logging.cgi</a> </p> 
<h3>javaBean实例</h3> 
<pre class="has"><code>public class Student {
	private String name;
	private String id;
	private int age;
	private String sex;
	private Date d;
	public Student() {
		super();
	}
	public Date getD() {
		return d;
	}
	public void setD(Date d) {
		this.d = d;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	public String getId() {
		return id;
	}
	public void setId(String id) {
		this.id = id;
	}
	public int getAge() {
		return age;
	}
	public void setAge(int age) {
		this.age = age;
	}
	public String getSex() {
		return sex;
	}
	public void setSex(String sex) {
		this.sex = sex;
	}
	@Override
	public String toString() {
		return "Student [name=" + name + ", id=" + id + ", age=" + age
				+ ", sex=" + sex + ", d=" + d + "]";
	}
}
</code></pre> 
<h3>BeanUtils用法</h3> 
<ol><li>对象的拷贝，BeanUtils.copyProperties(Object dest,Object orig)</li><li>对象属性的拷贝，BeanUtils.copyProperties(Object bean,String name,Object value)或者BeanUtils.setProperty(Object bean,String name,Object value)</li><li>map数据封装到Javabean，<span style="color:#000000;"><span style="color:#000000;">populate</span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" rel="nofollow"><span style="color:#000000;">Object</span></a> bean, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" rel="nofollow"><span style="color:#000000;">Map</span></a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" rel="nofollow"><span style="color:#000000;">String</span></a>,? extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" rel="nofollow"><span style="color:#000000;">Object</span></a>&gt; properties)</span></li></ol> 
<h4>实例</h4> 
<p>对象的拷贝</p> 
<pre class="has"><code class="language-java">    @Test
	public void test() throws Exception {
		//创建对象
		Student s=new Student();
		/**
		 * 组件对JavaBean的操作
		 * bean:javaBean对象
		 * name:对象的属性名称
		 * value:对象的属性值
		 */
		//1.实现对象的属性拷贝， 对于基本数据类型，会自动进行类型转换
		BeanUtils.copyProperty(s, "id","2018100712");
		
		//2.实现对象之间的拷贝:Object dest&lt;---Object orig
		Student s2=new Student();
		BeanUtils.copyProperties(s2, s);
		System.out.println(s2);
    }</code></pre> 
<p>对象属性的拷贝</p> 
<pre class="has"><code class="language-java">@Test
	public void test() throws Exception {
		//创建对象
		Student s=new Student();
		/*一般的操作
		s.setId("1221212");
		s.setName("老王");
		System.out.println(s);
		*/
		//1.实现对象的属性拷贝， 对于基本数据类型，会自动进行类型转换
		BeanUtils.copyProperty(s, "id","2018100712");
        System.out.println(s)
}</code></pre> 
<p>map数据封装到javaBean</p> 
<p><span style="color:#f33b45;">注意：要map中的数据封装到JavaBean中去，需要map中的key与JavaBean里面的私有化的属性要相匹配</span></p> 
<pre class="has"><code class="language-java">@Test
	public void test() throws Exception {
		//创建对象
		Student s2=new Student();
		//1.map的数据拷贝到对象中去
		Map&lt;String,Object&gt; map = new HashMap&lt;String,Object&gt;();
		map.put("id","12233");
		map.put("name","老王");
		map.put("sex","男");
		BeanUtils.populate(s2, map);
		System.out.println(s2);
	}</code></pre> 
<h4>类型转换器</h4> 
<p>当javaBean中出现非基本类型数据的私有化属性，并且需要对该数据进行封装时，就要去注册该数据类型的类型转换器了，不如就会出现错误，比如该Student对象中的日期类型。</p> 
<p>日期类型转换出错：org.apache.commons.beanutils.converters.DateConverter toDate 警告:  DateConverter does not support default String to 'Date' conversion，可以看出工具类converters在转换的时候出现了错误，为此我们可以去查看该类，以便我们接下来去实现类型转换。</p> 
<h4>converter</h4> 
<p>在解压出来的BeanUtils文件下的apidoc目录中的index.html里面可以找到该类的说明，会发现它是一个接口，有很多的实现类，我们可以使用里面的实现类来做日期类型的转换或者说我们可以自己去注册个类型转换器。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/80/4b/TLq1sZcI_o.png"></p> 
<h4>自定义类型转换器</h4> 
<p>去复写ConvertUtils里面的register(Converter converter, Class&lt;?&gt; clazz)方法</p> 
<pre class="has"><code class="language-java">@Test
	public void test2() throws Exception {
		//假设网页表单提交过来的数据
		String name="老王";
		String id="121212";
		String date="2018-10-11";
		Student s=new Student();
		//1.自定义：注册日期类型转换器去复写ConvertUtils里面的register(Converter converter, Class&lt;?&gt; clazz)方法
		ConvertUtils.register(new Converter() {
			//修改第三方jar引入方法的参数时候，可以关联源码，ctrl选择该类，点进去，选择Attach source---&gt;external file
			@Override
			public Object convert(Class type, Object value) {
				//判断
				if (value ==null ||"".equals(value.toString().trim())){
					return null;	
				}
				if (type !=Date.class){
					return null;
				}
				try {
					//字符串转换为日期
					SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd");
					return sdf.parse(value.toString());
				} catch (Exception e) {
					throw new RuntimeException(e);
				}
			}
		},Date.class);
		//把表单的数据封装到对象中去
		BeanUtils.copyProperty(s, "name",name);
		BeanUtils.copyProperty(s, "id",id);
		BeanUtils.copyProperty(s, "d",date);
		System.out.println(s);
	}</code></pre> 
<h4>使用工具类提供的类型转换器</h4> 
<pre class="has"><code class="language-java">@Test
	public void test3() throws Exception {
		//利用组件提供的日期类型转换器，提供一个实现类
		//假设表单的数据
		String name="老王";
		String id="121212";
		//当日期字符串出现空字符串或者出现空格的情况，会报错org.apache.commons.beanutils.ConversionException
		String date="2018-09-12";
		Student s=new Student();
		ConvertUtils.register(new DateLocaleConverter(), Date.class);
		//把表单的数据封装到对象中去
		BeanUtils.copyProperty(s, "name",name);
		BeanUtils.copyProperty(s, "id",id);
		BeanUtils.copyProperty(s, "d",date);
		System.out.println(s);
	}</code></pre> 
<p><span style="color:#f33b45;">注意：当日期字符串是空字符串或者存在空格的时候，会报错！</span></p> 
<h4>BeanUtils在servlet的使用</h4> 
<p>获取表单提交的数据并封装到javabean中去，request.getParameterMap()获取所有的参数并存储到Map中去，并利用BeanUtils里面的<span style="color:#000000;"><span style="color:#000000;">populate</span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" rel="nofollow"><span style="color:#000000;">Object</span></a> bean, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" rel="nofollow"><span style="color:#000000;">Map</span></a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" rel="nofollow"><span style="color:#000000;">String</span></a>,? extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" rel="nofollow"><span style="color:#000000;">Object</span></a>&gt; properties)，封装到对象中去，简化了很多的操作！</span></p> 
<p><strong>1.jsp</strong></p> 
<pre class="has"><code class="language-java">&lt;%@ page language="java" import="java.util.*" pageEncoding="utf-8"%&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;注册&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  	&lt;form action="registe.do" method="post"&gt;
  		用户名称：&lt;input type="text" name="name"&gt;&lt;br&gt;
  		密&amp;nbsp;&amp;nbsp;码：&lt;input type="password" name="password"&gt;&lt;br&gt;
  		联系方式：&lt;input type="text" name="phone"&gt;&lt;br&gt;
  		&lt;input type="submit" value="提交"&gt;
  	&lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p><strong>jsp显示的结果： </strong></p> 
<div style="text-align:center;"> 
 <figure class="image has"> 
  <img alt="" src="https://images2.imgbox.com/f3/08/WSEHvqyt_o.png"> 
  <figcaption>
    jsp显示注册页面 
  </figcaption> 
 </figure> 
</div> 
<p> </p> 
<p><strong>2.servlet</strong></p> 
<pre class="has"><code class="language-java">package cn.tan.servlet;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.util.Map;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.commons.beanutils.BeanUtils;
import cn.tan.entry.Student;

public class GetDataServlet extends HttpServlet {
	public void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		doPost(request, response);
	}
	public void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		request.setCharacterEncoding("utf-8");
		//获取所有参数
		Map&lt;String, String[]&gt; map = request.getParameterMap();
		Student s=new Student();
		try {
			BeanUtils.populate(s, map);
			//测试,输出封装的结果
			System.out.println(s);
		} catch (Exception e) {
			throw new RuntimeException(e);
		}
	}

}
</code></pre> 
<p><span style="color:#e579b6;">输出结果：Student [name=老王, age=0, password=11111, phone=13232174361]</span></p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/703c903f17a548f6aec8ce76c6035b6d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43;】VS2017 不能将const char * 分配给 char *实体</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/df67466f8028f363e74dca8fa60e6ffa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DevExpress_常用控件24_GridControl_上</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>