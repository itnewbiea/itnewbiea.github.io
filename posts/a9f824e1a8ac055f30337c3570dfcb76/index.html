<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Unity - 各向异性 - 丝绸材质 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Unity - 各向异性 - 丝绸材质" />
<meta property="og:description" content="文章目录 目的环境主观美术效果的[假]丝绸基于物理的方式参考 谷歌的 pbr filament 的文档（代码&#43;文档）实验结果1 - blinn phong 修改 specular 为 anisotropy model实验结果2 - unity BRP standard (metallic flow) shader 修改 sepcular 为 anisotropy model第一步是 directly light 的 specular 高光部分第二步是 IBL 的 reflect 的 normal最终查看效果 实验结果3 - anisotropy model 微调 glossy、normal tilling实验结果4 - 增加 detail albedo, mix, normal 的功能 A站参考ProjectPBR filament web captureReferences 目的 拾遗，备份
环境 Unity : 2020.3.37f1
Pipeline : Builtin Rendering Pipeline
主观美术效果的[假]丝绸 非常简单 :
half specualr = pow(1 - NdotV, _Edge_Pow) * _Edge_Scale &#43; pow(NdotV, _Enter_Pow) * _Center_Scale; specular *= _Tint; 这个效果不是物理的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a9f824e1a8ac055f30337c3570dfcb76/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-13T10:20:36+08:00" />
<meta property="article:modified_time" content="2023-12-13T10:20:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Unity - 各向异性 - 丝绸材质</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_3" rel="nofollow">目的</a></li><li><a href="#_8" rel="nofollow">环境</a></li><li><a href="#_13" rel="nofollow">主观美术效果的[假]丝绸</a></li><li><a href="#_32" rel="nofollow">基于物理的方式</a></li><li><ul><li><a href="#__pbr_filament__35" rel="nofollow">参考 谷歌的 pbr filament 的文档（代码+文档）</a></li><li><a href="#1__blinn_phong__specular__anisotropy_model_44" rel="nofollow">实验结果1 - blinn phong 修改 specular 为 anisotropy model</a></li><li><a href="#2__unity_BRP_standard_metallic_flow_shader__sepcular__anisotropy_model_62" rel="nofollow">实验结果2 - unity BRP standard (metallic flow) shader 修改 sepcular 为 anisotropy model</a></li><li><ul><li><a href="#_directly_light__specular__66" rel="nofollow">第一步是 directly light 的 specular 高光部分</a></li><li><a href="#_IBL__reflect__normal_73" rel="nofollow">第二步是 IBL 的 reflect 的 normal</a></li><li><a href="#_80" rel="nofollow">最终查看效果</a></li></ul> 
   </li><li><a href="#3__anisotropy_model__glossynormal_tilling_89" rel="nofollow">实验结果3 - anisotropy model 微调 glossy、normal tilling</a></li><li><a href="#4___detail_albedo_mix_normal__121" rel="nofollow">实验结果4 - 增加 detail albedo, mix, normal 的功能</a></li></ul> 
  </li><li><a href="#A_128" rel="nofollow">A站参考</a></li><li><a href="#Project_178" rel="nofollow">Project</a></li><li><a href="#PBR_filament_web_capture_185" rel="nofollow">PBR filament web capture</a></li><li><a href="#References_192" rel="nofollow">References</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_3"></a>目的</h2> 
<p>拾遗，备份</p> 
<hr> 
<h2><a id="_8"></a>环境</h2> 
<p>Unity : 2020.3.37f1<br> Pipeline : Builtin Rendering Pipeline</p> 
<hr> 
<h2><a id="_13"></a>主观美术效果的[假]丝绸</h2> 
<p>非常简单 :</p> 
<pre><code class="prism language-c">half specualr <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> NdotV<span class="token punctuation">,</span> _Edge_Pow<span class="token punctuation">)</span> <span class="token operator">*</span> _Edge_Scale <span class="token operator">+</span> <span class="token function">pow</span><span class="token punctuation">(</span>NdotV<span class="token punctuation">,</span> _Enter_Pow<span class="token punctuation">)</span> <span class="token operator">*</span> _Center_Scale<span class="token punctuation">;</span>
specular <span class="token operator">*=</span> _Tint<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/25/04/fPoUORtW_o.png" alt="在这里插入图片描述"></p> 
<p>这个效果不是物理的<br> 而且在规律平面上效果比较弱</p> 
<p>下面参考： <a href="https://www.bilibili.com/video/BV1Hp4y1q7Sa" rel="nofollow">Cilory-UE4-丝绸材质</a> 里面可以看到在丝绸布料动起来的时候，稍微可观一些<br> <img src="https://images2.imgbox.com/58/89/ujRG7iw2_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/96/ed/8ByCl8kS_o.gif" alt="请添加图片描述"></p> 
<hr> 
<h2><a id="_32"></a>基于物理的方式</h2> 
<hr> 
<h3><a id="__pbr_filament__35"></a>参考 谷歌的 pbr filament 的文档（代码+文档）</h3> 
<p><img src="https://images2.imgbox.com/f8/4d/ffcSsARv_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/15/0a/RIDxCZCo_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fb/b8/Sn31cnUF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c4/99/Xq1u4mL4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/59/ab/I80neIXK_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="1__blinn_phong__specular__anisotropy_model_44"></a>实验结果1 - blinn phong 修改 specular 为 anisotropy model</h3> 
<p>这个是普通的衣服光泽，如下图：<br> <img src="https://images2.imgbox.com/d3/8f/5PTOKnPa_o.gif" alt="请添加图片描述"></p> 
<p>使用了 anisotropy model 光照，如下图：<br> <img src="https://images2.imgbox.com/3f/c9/huLNseRR_o.gif" alt="请添加图片描述"><br> 这个是丝绸衣服光泽，这个简单的试验DEMO如下 (非PBR)</p> 
<p><img src="https://images2.imgbox.com/fd/c1/wJ2eoNW4_o.gif" alt="请添加图片描述"></p> 
<ul><li>优化 各向异性材质 的 T （切线） 的法线应用变化</li><li>完善其他 fresnel, reflection, ambient 的补充</li></ul> 
<p>上面的效果我都是在 blinn phong 模型上，给 高光整上 PBR Anisotropy 的效果</p> 
<p>那么下面是将 unity builtin rendering pipeline (内置管线) 的 standard 金属流中，添加 PBR Anisotropy 的效果</p> 
<hr> 
<h3><a id="2__unity_BRP_standard_metallic_flow_shader__sepcular__anisotropy_model_62"></a>实验结果2 - unity BRP standard (metallic flow) shader 修改 sepcular 为 anisotropy model</h3> 
<p>参考的是： PBR Filament 里面的 anisotropy 效果:</p> 
<hr> 
<h4><a id="_directly_light__specular__66"></a>第一步是 directly light 的 specular 高光部分</h4> 
<p>https://google.github.io/filament/Filament.html#materialsystem/anisotropicmodel</p> 
<p><img src="https://images2.imgbox.com/5e/1b/mDDqpgM7_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h4><a id="_IBL__reflect__normal_73"></a>第二步是 IBL 的 reflect 的 normal</h4> 
<p>第二步是 cubemap reflect dir 的扭曲调整 (也就是 IBL 的 Anisotropy，就是修改 reflect dir，<strong>其实我这里直接修改 normal，这样 reflect(-v,n)就修改了 reflect 结果</strong>)</p> 
<p>https://google.github.io/filament/Filament.html#lighting/imagebasedlights/anisotropy<br> <img src="https://images2.imgbox.com/d7/bf/m6Qc5Bt4_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h4><a id="_80"></a>最终查看效果</h4> 
<p>代入到 standard 中的 PBR Aniso 效果，如下图：</p> 
<ul><li>左边 blinn phong 修改 specular 为 anisotropy specular</li><li>中间 standard 金属流修改为 anisotropy specular</li><li>右边 是普通 standard 金属流</li></ul> 
<p><img src="https://images2.imgbox.com/df/bc/HkB5cwZl_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="3__anisotropy_model__glossynormal_tilling_89"></a>实验结果3 - anisotropy model 微调 glossy、normal tilling</h3> 
<p>PBR Filament 上的模型，测试 Standard 修改为 Anisotropy Specular 的效果</p> 
<p>显示 standard 金属流<br> <img src="https://images2.imgbox.com/44/4b/D2lYK0RY_o.png" alt="在这里插入图片描述"></p> 
<p>开启 anisotropy<br> <img src="https://images2.imgbox.com/e7/c3/XnQg5OE1_o.png" alt="在这里插入图片描述"></p> 
<p>然后我们再增加一个张细节法线<br> <img src="https://images2.imgbox.com/9c/b3/WyAKSGmF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2d/02/lMccqWVX_o.png" alt="在这里插入图片描述"></p> 
<p>基理太粗，调整一下 scale offset<br> <img src="https://images2.imgbox.com/f7/55/u2VMDwcZ_o.png" alt="在这里插入图片描述"><br> 最后的效果<br> <img src="https://images2.imgbox.com/b6/88/7xJXoXvO_o.gif" alt="请添加图片描述"></p> 
<p>加上 Bloom, Color Grading (tonemapping) 后效<br> <img src="https://images2.imgbox.com/50/1d/DOq3ZQXo_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p>在网上，找了一张 贴图，我就暂时当做 MGA （metallic, glossy, ao） 和 法线来使用，效果也挺不错的<br> <img src="https://images2.imgbox.com/54/c1/FOWMIqmE_o.png" alt="在这里插入图片描述"></p> 
<p>然后 photosohp 整了几张不同 tilling 的<br> <img src="https://images2.imgbox.com/b4/bd/bMGkoPE9_o.png" alt="在这里插入图片描述"></p> 
<p>法线效果更加的细腻<br> <img src="https://images2.imgbox.com/02/bf/LREn8y9e_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="4___detail_albedo_mix_normal__121"></a>实验结果4 - 增加 detail albedo, mix, normal 的功能</h3> 
<p><img src="https://images2.imgbox.com/bb/ff/0gzEi41M_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/ae/34/DTU4UpWQ_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="A_128"></a>A站参考</h2> 
<p>然后在 A站 搜索 “布料” 法线也有国人在那上传了自己的练习作品也是很OK的<br> https://www.artstation.com/search?sort_by=relevance&amp;query=%E5%B8%83%E6%96%99</p> 
<p>有一些还备注了使用的 DCC软件 （基本都是 DS/SD : Substance Designer和 mamoset 八猴）<br> https://www.artstation.com/artwork/lxdkzo</p> 
<p>比如这个材质<br> <img src="https://images2.imgbox.com/ba/15/t6Pgtybb_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3a/ad/jSSnQ7Zz_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e8/53/cRrQVClz_o.png" alt="在这里插入图片描述"></p> 
<p>使用的贴图如下图<br> <img src="https://images2.imgbox.com/2b/d2/svfJmzob_o.png" alt="在这里插入图片描述"></p> 
<p>使用的贴图通道有：</p> 
<ul><li>AO</li><li>BaseColor</li><li>Height Map</li><li>Roughness</li><li>Normal</li></ul> 
<p>基本都是我们 PBR 材质的通道图</p> 
<p>A站里面的参考：</p> 
<ul><li> <p>https://www.artstation.com/artwork/lxdkzo</p> </li><li> <p>https://www.artstation.com/artwork/B1KG8r</p> </li><li> <p>https://www.artstation.com/artwork/B1KG8r</p> </li><li> <p>https://www.artstation.com/artwork/kDrVZy</p> </li><li> <p>https://www.artstation.com/artwork/L3XWNP</p> </li><li> <p>https://www.artstation.com/artwork/48KDYl</p> </li><li> <p>https://www.artstation.com/artwork/Zeq9P8，这个非常好看，使用的是 Substance 3D Designer 做贴图, Marvelous Designer布料结算烘焙, Marmoset Toolbag 渲染</p> </li><li> <p>https://www.artstation.com/artwork/KOJk19</p> </li><li> <p>https://www.artstation.com/artwork/d0vLYW</p> </li><li> <p>https://www.artstation.com/artwork/4Xzea8</p> </li><li> <p>https://www.artstation.com/artwork/VyY92R</p> </li><li> <p>https://www.artstation.com/artwork/2qOzgA</p> </li><li> <p>https://www.artstation.com/artwork/2qOzgA<br> <img src="https://images2.imgbox.com/21/38/Favh9TsL_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/98/65/o3Kkesms_o.png" alt="在这里插入图片描述"></p> </li><li> <p>https://www.artstation.com/artwork/rAr3xm，这个也是非常好看，也是 SD + 八猴<br> <img src="https://images2.imgbox.com/fe/50/oYTvzLo3_o.png" alt="在这里插入图片描述"></p> </li><li> <p>https://www.artstation.com/artwork/OmblEb</p> </li></ul> 
<hr> 
<h2><a id="Project_178"></a>Project</h2> 
<ul><li><a href="https://pan.baidu.com/s/1sFZaouQ-X9gMkpsU6BHGYg" rel="nofollow">Testing_Fake_Silk_Shader_2020.3.37f1_URP.rar</a></li><li><a href="https://pan.baidu.com/s/1WyBe6YEhGwQ-E-KUFEtNQw" rel="nofollow">Testing_PBR_Anisotropic_2020.3.37f1_BRP_v1.rar</a></li><li><a href="https://pan.baidu.com/s/1VpYO0s9U4mz3GMN8dvdFSw" rel="nofollow">Testing_PBR_Anisotropic_2020.3.37f1_BRP_v2.rar</a> - 场景： _10_My_Silk_Anisotropic_Lighting，增加了 standard，fwdbase, fwdadd 的处理</li><li><a href="https://pan.baidu.com/s/1amKvrSITHfVIzGhil1IQCw" rel="nofollow">Testing_PBR_Anisotropy_2023.3.37f1_BRP_detail_albedo_mix_normal_V3.rar</a> - 增加了 detail albedo mix normal</li></ul> 
<hr> 
<h2><a id="PBR_filament_web_capture_185"></a>PBR filament web capture</h2> 
<p><a href="https://pan.baidu.com/s/1nKAhCbnTzKjoilQXUgauGw" rel="nofollow">PBR_filament_web_capture.jpeg</a><br> 提取码：ceio</p> 
<hr> 
<h2><a id="References_192"></a>References</h2> 
<ul><li>里面的各向异性材质： 丝绸材质可以参考：</li><li><a href="https://zhuanlan.zhihu.com/p/272553650" rel="nofollow">光照模型 PBR</a></li><li><a href="https://google.github.io/filament/Filament.html#materialsystem/anisotropicmodel/anisotropicspecularbrdf" rel="nofollow">Anisotropic specular BRDF</a> - 公式、代码都有，非常有用的国外 PBR filament 教程</li><li><a href="https://github.com/ipud2/Unity-Basic-Shader/blob/master/%E5%9F%BA%E4%BA%8E%E7%89%A9%E7%90%86%E7%9A%84%E9%AB%98%E5%85%89Brdf/PBRAnistropicSpecular.shader">丝绸、头发 各向异性：</a></li><li><a href="https://zhuanlan.zhihu.com/p/343324319" rel="nofollow">Unity Shader 布料渲染（二）具体实现</a></li><li><a href="https://zhuanlan.zhihu.com/p/84313625" rel="nofollow">丝绸效果的实现</a></li><li><a href="https://zhuanlan.zhihu.com/p/65945680" rel="nofollow">FlowMap的使用</a></li><li><a href="https://blog.csdn.net/jianfei_zhou/article/details/123339076">URP绸缎材质近似</a></li><li>可以参考： UE4 或是 unity HDRP 里面的 丝绸材质</li><li><a href="https://zhuanlan.zhihu.com/p/160804623" rel="nofollow">PBR光照 Part1：BRDF（Cook-Torrance 模型）</a></li><li><a href="https://zhuanlan.zhihu.com/p/364932774" rel="nofollow">Shader学习 （18）PBR光照模型效果分析手动复现</a> - 写的非常易懂</li><li><a href="https://www.cnblogs.com/jietian331/p/17059147.html" rel="nofollow">Unity PBR Shader之衣服渲染之丝绸</a> - 这个 cnblog 博主也是参考了，PBR Filament 和 UE 里面的 shader，效果很不错</li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/34614b8620bf4a62c33f915447a99835/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">华为OD机试真题-抢7游戏-2023年OD统一考试（C卷）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d46731ee9a39169de9deb735e3f12df3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">uniapp使用webview嵌入vue页面及通信</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>