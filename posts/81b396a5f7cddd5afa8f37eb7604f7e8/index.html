<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于Linux下安装MATLAB Compiler Runtime(MCR) 所遇到的问题以及解决方法（以Ubuntu 16.04 为例） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于Linux下安装MATLAB Compiler Runtime(MCR) 所遇到的问题以及解决方法（以Ubuntu 16.04 为例）" />
<meta property="og:description" content="关于Linux下安装MATLAB Compiler Runtime(MCR) 所遇到的问题以及解决方法（以Ubuntu 16.04 为例） 要解决的问题 通过MATLAB deploytool 将matlab的源文件打包成 jar 包并在Java Web 项目中使用解决在Linux服务器上安装MATLAB Compiler Runtime(MCR)并配置环境变量的问题 遇到的问题 在修改了/etc/profile之后出现错误，导致系统出现异常无法正常进入图像界面不同版本的MCR目录下的文件不一样，配置方式可能不同，在配置MCR9.1无果并且没有MATLAB R2017a的Linux编译器 所以改装了一个MCR8.1 （MATLAB R2013a）(遇到的第三个问题会解释原因)百度到的答案都是各种复制，千篇一律都是MATLAB 2012对应的MCR，而且举例都一样，具体过程也语焉不详。。。 - 实现的过程以及做过的尝试 首先尝试的是安装MCR9.2 因为本地MATLAB R2017a，按以下步骤安装： 1. 在matlab官网下载对应的压缩包之后解压后再当前解压到的目录进行安装
sudo ./install -mode silent -agreeToLicense yes
第一个问题来了 matlab的安装程序，给出的提示是再LD_LIBRARY_PATH 变量下追加给出的路径信息(会在终端打印出来)，讲道理官方给得提示应该不会有问题，然而按照这个步骤做之后java调用编译好的jar包出现了以下问题（StackOverflow上搜索到了相同的问题）
Exception in thread &#34;main&#34; java.lang.UnsatisfiedLinkError: Failed to find the required library libmwmclmcrrt.so.9.0 on java.library.path. 此处是原文 java.library.path, classpath Netbeans 8.0.2 在搜索相关内容之后，发现是找不到相应的动态连接库，找了一圈(对linux不熟悉)后发现就是要在LD_LIBRARY_PATH所配置的路径，然后检查了以下/etc/profile文件发现确实已经按照官方给的路径配置了，然而并没有什么用，考虑是环境变量没有生效，遂重启系统。 然而第二个问题出来了 开机之后正确输入密码，进不了系统一直在登录界面，查了一些资料之后发现应该是环境变量配置有问题，所以通过Xshell登录查看profile文件，和官方给的提示以及网上各种大佬的简明扼要的教程是一样的，在删除新添加的LD_LIBRARY_PATH 后恢复正常，
此处是什么原因，还不清楚坐等大佬来解答
2.姑且认为是系统抽风了进不去图形界面就用命令行吧，抱有一丝幻想做个demo来测试一下
function test() x = 1:100; y = 1:100; plot(x,1:y); end %画一条斜线" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/81b396a5f7cddd5afa8f37eb7604f7e8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-28T23:36:31+08:00" />
<meta property="article:modified_time" content="2018-04-28T23:36:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于Linux下安装MATLAB Compiler Runtime(MCR) 所遇到的问题以及解决方法（以Ubuntu 16.04 为例）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="关于linux下安装matlab-compiler-runtimemcr-所遇到的问题以及解决方法以ubuntu-1604-为例">关于Linux下安装MATLAB Compiler Runtime(MCR) 所遇到的问题以及解决方法（以Ubuntu 16.04 为例）</h2> 
<hr> 
<h3 id="要解决的问题">要解决的问题</h3> 
<ul><li>通过MATLAB deploytool 将matlab的源文件打包成 jar 包并在Java Web 项目中使用</li><li>解决在Linux服务器上安装MATLAB Compiler Runtime(MCR)并配置环境变量的问题</li></ul> 
<h3 id="遇到的问题">遇到的问题</h3> 
<ul><li>在修改了/etc/profile之后出现错误，导致系统出现异常无法正常进入图像界面</li><li>不同版本的MCR目录下的文件不一样，配置方式可能不同，在配置MCR9.1无果并且没有MATLAB R2017a的Linux编译器 所以改装了一个MCR8.1 （MATLAB R2013a）(遇到的第三个问题会解释原因)</li><li>百度到的答案都是各种复制，千篇一律都是MATLAB 2012对应的MCR，而且举例都一样，具体过程也语焉不详。。。</li><li> - 
</li></ul> 
<hr> 
<h3 id="实现的过程以及做过的尝试">实现的过程以及做过的尝试</h3> 
<p>首先尝试的是安装MCR9.2 因为本地MATLAB R2017a，按以下步骤安装： <br> <strong>1. 在matlab官网下载对应的压缩包之后解压后再当前解压到的目录进行安装</strong></p> 
<blockquote> 
 <p><code>sudo ./install -mode silent -agreeToLicense yes</code></p> 
</blockquote> 
<p><strong><em>第一个问题来了</em></strong> <br> <em>matlab的安装程序，给出的提示是再LD_LIBRARY_PATH 变量下追加给出的路径信息(会在终端打印出来)，讲道理官方给得提示应该不会有问题，然而按照这个步骤做之后java调用编译好的jar包出现了以下问题（StackOverflow上搜索到了相同的问题）</em></p> 
<pre class="prettyprint"><code class=" hljs avrasm"> Exception <span class="hljs-keyword">in</span> thread <span class="hljs-string">"main"</span> java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.UnsatisfiedLinkError</span>: Failed to find the required library libmwmclmcrrt<span class="hljs-preprocessor">.so</span><span class="hljs-number">.9</span><span class="hljs-number">.0</span> on java<span class="hljs-preprocessor">.library</span><span class="hljs-preprocessor">.path</span>.</code></pre> 
<p>此处是原文 <a href="https://stackoverflow.com/questions/35352523/java-library-path-classpath-netbeans-8-0-2" rel="nofollow">java.library.path, classpath Netbeans 8.0.2</a> <br> 在搜索相关内容之后，发现是找不到相应的动态连接库，找了一圈(对linux不熟悉)后发现就是要在LD_LIBRARY_PATH所配置的路径，然后检查了以下/etc/profile文件发现确实已经按照官方给的路径配置了，然而并没有什么用，考虑是环境变量没有生效，遂重启系统。 <br> <strong>然而第二个问题出来了</strong> <br> 开机之后正确输入密码，进不了系统一直在登录界面，查了一些资料之后发现应该是环境变量配置有问题，所以通过Xshell登录查看profile文件，和官方给的提示以及网上各种大佬的简明扼要的教程是一样的，在删除新添加的LD_LIBRARY_PATH 后恢复正常，</p> 
<blockquote> 
 <p><em>此处是什么原因，还不清楚坐等大佬来解答</em></p> 
</blockquote> 
<p><strong>2.姑且认为是系统抽风了进不去图形界面就用命令行吧，抱有一丝幻想做个demo来测试一下</strong></p> 
<blockquote> 
 <p>function test() <br> x = 1:100; <br> y = 1:100; <br> plot(x,1:y); <br> end <br> %画一条斜线</p> 
</blockquote> 
<p>在参考了网上相关的教程后，用mcc -mv test.m <br> <strong>第三个问题来了</strong> <br> 用windows下的matlab 编译器编译之后生成的是exe文件，不是.sh文件所以换一个linux下的matlab编译器来编译吧，使用matlab R2013a 对应的编译器编译之后把生成的两个文件 run_test.sh 和test.sh 拷贝过来运行</p> 
<blockquote> 
 <p>sudo ./test </p> 
</blockquote> 
<p>运行时候提示缺少各种.so的文件，在网上一通狂搜之后发现还是上面提到的动态连接库的问题，因为LD_LIBRARY_PATH变量和在/etc/ld.so.conf文件内添加路径的效果相同，因此将缺少的相应的库的路径加到这个文件中憨厚运行ldconfig命令使之生效。</p> 
<p>再次运行之后出现如下错误： <br> <img src="https://images2.imgbox.com/9f/31/K2JwpKm6_o.png" alt="这里写图片描述" title=""></p> 
<p>没有找到对应版本的MCR，暂时也不知到为什么，所以打开之前编译生成的run_test.sh文件看了代码</p> 
<blockquote> 
 <p><code># the specified command. <br> # <br> exe_name=$0 <br> exe_dir=</code>dirname “$0”<code> <br> echo "" <br> if [ "x$1" = "x" ]; then <br> echo Usage: <br> echo $0 \&lt;deployedMCRroot\&gt; args <br> else <br> echo Setting up environment variables <br> MCRROOT="$1" <br> echo --- <br> LD_LIBRARY_PATH=.:${MCRROOT}/runtime/glnxa64 ; <br> LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRROOT}/bin/glnxa64 ; <br> LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRROOT}/sys/os/glnxa64; <br> MCRJRE=${MCRROOT}/sys/java/jre/glnxa64/jre/lib/amd64 ; <br> LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRJRE}/native_threads ; <br> LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRJRE}/server ; <br> LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRJRE}/client ; <br> LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${MCRJRE} ; <br> XAPPLRESDIR=${MCRROOT}/X11/app-defaults ; <br> export LD_LIBRARY_PATH; <br> export XAPPLRESDIR; <br> echo LD_LIBRARY_PATH is ${LD_LIBRARY_PATH}; <br> shift 1 <br> args= <br> while [ $# -gt 0 ]; do <br> token=$1 <br> args="${args} \"${token}\"" <br> shift <br> done <br> eval "\"${exe_dir}/test\"" $args <br> fi <br> exit</code></p> 
</blockquote> 
<p>感觉发现了新大陆，可以通过输入参数给出MCR的路径，就可以得到所有的库的路径，尝试一波 <br> <img src="https://images2.imgbox.com/b9/fe/FaJMXhYa_o.png" alt="这里写图片描述" title=""></p> 
<p>然后就成功了 <br> <img src="https://images2.imgbox.com/67/96/ar4k53CZ_o.png" alt="这里写图片描述" title=""> <br> 画出了图，在去掉之前在ld.so.conf 文件中添加的so文件路径之后运行，仍然可以，所有证明其实可以不用添加各种环境变量，可以在运行程序时手动给出MCR的路径</p> 
<hr> 
<p>至于我最终要实现的java 调用的功能，还没有实验，待续！！！ <br> 对于linux不熟练，只是记录下来遇到的问题，希望欢迎大佬们批评指正！！！！</p> 
<hr> 
<h2 id="后续">后续</h2> 
<h6 id="解决的几个问题">解决的几个问题</h6> 
<blockquote> 
 <p>1.之前提到的MATLAB给出的环境变量的问题，MATLAB给出的环境变量应该是没有问题的，但是不知道什么原因导致添加了LD_LIBRARY_PATH 后Ubuntu会进不了图形界面。 <br> 2. 要实现的功能已经通过其他的方式完成，通过将Matlab的代码打包为Shell脚本，直接调用再处理控制台的输出字符串取出结果。相比之下这种方式比编译成jar包的方式效率更简单不存在Java版本以及依赖冲突的问题。</p> 
</blockquote> 
<h6 id="待解决的问题">待解决的问题</h6> 
<blockquote> 
 <ol><li>Matlab打包的脚本运行时占用内存过多，会被系统杀掉进程。</li><li>Ubuntu中添加了动态连接库的环境变量之后，无法进入图形界面。</li></ol> 
</blockquote>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d3914bfe342b35b96537de023333efbf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL 基本用法(二)多表查询</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e0dc2f2e8d12ed904ffa19bde553c43/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Integer类源码解析之toString方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>