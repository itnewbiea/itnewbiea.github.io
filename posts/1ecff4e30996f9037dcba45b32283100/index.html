<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【K8S】docker打过tag标签后向镜像仓库推送镜像(push) - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【K8S】docker打过tag标签后向镜像仓库推送镜像(push)" />
<meta property="og:description" content="资料1 首先，确保你已经登录到 Docker 仓库。可以使用以下命令登录到 Docker 仓库： docker login 2.然后，使用以下命令将本地的 Docker 镜像标记为指定的仓库和标签：
docker tag &lt;本地镜像名称&gt;:&lt;标签&gt; &lt;仓库地址&gt;/&lt;镜像名称&gt;:&lt;标签&gt; 例如，如果你的本地镜像名称是 my-image，仓库地址是 my-registry.com，镜像名称是 my-image，标签是 latest，则命令如下：
docker tag my-image my-registry.com/my-image:latest //本地镜像是latest，可以不带tag，会自动带上latest 想给本地镜像打tag，可以不带仓库地址；如果要想推送到仓库，就必须带仓库地址，因为后面的docker push 命令，会默认把 第一个斜线 前面的内容当做仓库，如果没有仓库地址，会带上默认的仓库地址，类似 “https://index.docker.io/v1” ，后果是这个地址要么不通，要么你上传到错误地方了
3.最后，使用以下命令将标记的镜像推送到指定的仓库：
docker push &lt;仓库地址&gt;/&lt;镜像名称&gt;:&lt;标签&gt; 例如，如果你的仓库地址是 my-registry.com，镜像名称是 my-image，标签是 latest，则命令如下：
docker push my-registry.com/my-image:latest 2. 资料2 推送镜像 在推送前，必须给镜像打标签，否则推送失败，其实打标签就是定义一个版本标识
我们看下未打标签推送的提示信息，其中swr:6666指向镜像仓库：
$ docker push swr:6666/ems/mytest:v2 The push refers to a repository [swr:6666/ems/mytest] An image does not exist locally with the tag: swr:6666/ems/mytest An image does not exist locally with the tag，此时不存在v2这个版本号" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1ecff4e30996f9037dcba45b32283100/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-14T20:50:15+08:00" />
<meta property="article:modified_time" content="2023-12-14T20:50:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【K8S】docker打过tag标签后向镜像仓库推送镜像(push)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1_0"></a>资料1</h2> 
<ol><li>首先，确保你已经登录到 Docker 仓库。可以使用以下命令登录到 Docker 仓库：</li></ol> 
<pre><code class="prism language-bash"><span class="token function">docker</span> login
</code></pre> 
<p>2.然后，使用以下命令将本地的 Docker 镜像标记为指定的仓库和标签：</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> tag <span class="token operator">&lt;</span>本地镜像名称<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>标签<span class="token operator">&gt;</span>   <span class="token operator">&lt;</span>仓库地址<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>镜像名称<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>标签<span class="token operator">&gt;</span>
</code></pre> 
<p>例如，如果你的本地镜像名称是 my-image，仓库地址是 my-registry.com，镜像名称是 my-image，标签是 latest，则命令如下：</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> tag my-image my-registry.com/my-image:latest   //本地镜像是latest，可以不带tag，会自动带上latest
</code></pre> 
<p><font color="blue">想给本地镜像打tag，可以不带仓库地址；如果要想推送到仓库，就必须带仓库地址，因为后面的docker push 命令，会默认把 第一个斜线 前面的内容当做仓库，如果没有仓库地址，会带上默认的仓库地址，类似 “https://index.docker.io/v1” ，后果是这个地址要么不通，要么你上传到错误地方了</font></p> 
<p>3.最后，使用以下命令将标记的镜像推送到指定的仓库：</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> push <span class="token operator">&lt;</span>仓库地址<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>镜像名称<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>标签<span class="token operator">&gt;</span>
</code></pre> 
<p>例如，如果你的仓库地址是 my-registry.com，镜像名称是 my-image，标签是 latest，则命令如下：</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> push my-registry.com/my-image:latest
</code></pre> 
<h2><a id="2_2_32"></a>2. 资料2</h2> 
<h3><a id="_33"></a>推送镜像</h3> 
<p>在推送前，<code>必须给镜像打标签</code>，否则推送失败，其实打标签就是定义一个版本标识</p> 
<p>我们看下未打标签推送的提示信息，其中swr:6666指向镜像仓库：</p> 
<pre><code class="prism language-bash">$ <span class="token function">docker</span> push swr:6666/ems/mytest:v2
The push refers to a repository <span class="token punctuation">[</span>swr:6666/ems/mytest<span class="token punctuation">]</span>
An image does not exist locally with the tag: swr:6666/ems/mytest

</code></pre> 
<p><code>An image does not exist locally with the tag</code>，此时不存在v2这个版本号</p> 
<p>看下完整的流程：</p> 
<pre><code class="prism language-bash">$ <span class="token function">docker</span> images<span class="token operator">|</span><span class="token function">grep</span> mytest
ems/mytest               latest              fa80b1ed50a0        About an hour ago   <span class="token number">759.8</span> MB   
$ <span class="token function">docker</span> tag fa80b1ed50a0 swr:6666/ems/mytest:v2
$ <span class="token function">docker</span> push swr:6666/ems/mytest:v2
The push refers to a repository <span class="token punctuation">[</span>swr:6666/ems/mytest<span class="token punctuation">]</span>
ef36103e327a: Mounted from zenap/cn-naf
d4a509b758e2: Mounted from zenap/cn-naf
2135a014abb0: Mounted from zenap/cn-naf
4d1de02cb818: Pushed
<span class="token punctuation">..</span><span class="token punctuation">..</span>.
v2: digest: sha256:17d3934291b3d48dd3c219ba23de9412c2edd6df1a27d1d1ca23be5b1f4bd9ca size: <span class="token number">8479</span>
</code></pre> 
<p>可以看到默认的版本号是latest ，你可以新增一个v2版本</p> 
<h3><a id="docker_tag_63"></a>docker tag详解</h3> 
<p>在此之前，先学习一下名称概念：</p> 
<pre><code class="prism language-bash">runoob@runoob:~$ <span class="token function">docker</span> images 
REPOSITORY          TAG                 IMAGE ID            CREATED              SIZE
runoob/centos       <span class="token number">6.7</span>                 860c279d2fec        About a minute ago   <span class="token number">190.6</span> MB
runoob/ubuntu       v2                  70bf1840fd7c        <span class="token number">17</span> hours ago         <span class="token number">158.5</span> MB
runoob/ubuntu       v3                  80bf1t40fn7d        <span class="token number">17</span> hours ago         <span class="token number">158.5</span> MB
ubuntu              <span class="token number">15.10</span>              90d5884b1ee0        <span class="token number">6</span> days ago           <span class="token number">188</span> MB         ‘本地原始的镜像’
</code></pre> 
<ul><li>tag 就是版本号</li><li>IMAGE ID 就是镜像id，是个字符串</li><li>REPOSITORY 是镜像的仓库</li></ul> 
<p>docker tag命令语法：</p> 
<p>语法一：</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> tag <span class="token punctuation">[</span>镜像ID<span class="token punctuation">]</span> <span class="token punctuation">[</span>镜像名称<span class="token punctuation">]</span>
</code></pre> 
<ul><li> <p>镜像名称格式为 <code>[REGISTRYHOST/][USERNAME/]NAME[:TAG]</code></p> <p>例 docker tag90d5884b1ee0 runoob/ubuntu:v3</p> </li></ul> 
<p>语法二：<br> 或通过REPOSITORY替换镜像id：<br> <code>docker tag IMAGE[:TAG] [镜像名称]</code></p> 
<p>[:TAG]是镜像的版本，如果不指定版本，默认是lastest，如果不存在laster版本，那么必须制定一个。因为多个镜像的REPOSITORY可以相同，版本不同，因此为了分辨，需要指定！</p> 
<p>例 docker tag ubuntu:15.10 runoob/ubuntu:v3</p> 
<h2><a id="_103"></a>参考</h2> 
<p><a href="https://blog.csdn.net/sinat_36528886/article/details/134575054">【Docker】从零开始：9.Docker命令:Push推送仓库（Docker Hub，阿里云）</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/12c79f7ffb43dab1e4a5917d330067de/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux系统进入单用户模式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e1cab2616ab3861395b9c82d029191cd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Wddm内存段翻译</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>