<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>YOLOV5è¶…å‚æ•°è®¾ç½®ä¸æ•°æ®å¢å¼ºè§£æ - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="YOLOV5è¶…å‚æ•°è®¾ç½®ä¸æ•°æ®å¢å¼ºè§£æ" />
<meta property="og:description" content="1ã€YOLOV5çš„è¶…å‚æ•°é…ç½®æ–‡ä»¶ä»‹ç» YOLOv5æœ‰å¤§çº¦30ä¸ªè¶…å‚æ•°ç”¨äºå„ç§è®­ç»ƒè®¾ç½®ã€‚å®ƒä»¬åœ¨*xmlä¸­å®šä¹‰ã€‚/dataç›®å½•ä¸‹çš„Yamlæ–‡ä»¶ã€‚æ›´å¥½çš„åˆå§‹çŒœæµ‹å°†äº§ç”Ÿæ›´å¥½çš„æœ€ç»ˆç»“æœï¼Œå› æ­¤åœ¨è¿›åŒ–ä¹‹å‰æ­£ç¡®åœ°åˆå§‹åŒ–è¿™äº›å€¼æ˜¯å¾ˆé‡è¦çš„ã€‚å¦‚æœæœ‰ç–‘é—®ï¼Œåªéœ€ä½¿ç”¨ç¼ºçœå€¼ï¼Œè¿™äº›ç¼ºçœå€¼æ˜¯ä¸ºYOLOv5 COCOè®­ç»ƒä»å¤´ä¼˜åŒ–çš„ã€‚
YOLOv5çš„è¶…å‚æ–‡ä»¶è§data/hyp.finetune.yamlï¼ˆé€‚ç”¨VOCæ•°æ®é›†ï¼‰æˆ–è€…hyo.scrach.yamlï¼ˆé€‚ç”¨COCOæ•°æ®é›†ï¼‰æ–‡ä»¶
1ã€yolov5/data/hyps/hyp.scratch-low.yaml(YOLOv5 COCOè®­ç»ƒä»å¤´ä¼˜åŒ–ï¼Œæ•°æ®å¢å¼ºä½) # Hyperparameters for low-augmentation COCO training from scratch # python train.py --batch 64 --cfg yolov5n6.yaml --weights &#39;&#39; --data coco.yaml --img 640 --epochs 300 --linear # See tutorials for hyperparameter evolution https://github.com/ultralytics/yolov5#tutorials lr0: 0.01 # initial learning rate (SGD=1E-2, Adam=1E-3) åˆå§‹å­¦ä¹ é€Ÿç‡ lrf: 0.01 # final OneCycleLR learning rate (lr0 * lrf) ï¼Œæœ€ç»ˆOneCycleLRå­¦ä¹ ç‡ momentum: 0.937 # SGD momentum/Adam beta1 weight_decay: 0.0005 # optimizer weight decay 5e-4 ,æƒé‡è¡°å˜ warmup_epochs: 3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b5c8607c8d03f1a562cc47136808069f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-30T15:14:42+08:00" />
<meta property="article:modified_time" content="2022-06-30T15:14:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">YOLOV5è¶…å‚æ•°è®¾ç½®ä¸æ•°æ®å¢å¼ºè§£æ</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1YOLOV5_0"></a>1ã€YOLOV5çš„è¶…å‚æ•°é…ç½®æ–‡ä»¶ä»‹ç»</h3> 
<p>YOLOv5æœ‰å¤§çº¦30ä¸ªè¶…å‚æ•°ç”¨äºå„ç§è®­ç»ƒè®¾ç½®ã€‚å®ƒä»¬åœ¨*xmlä¸­å®šä¹‰ã€‚/dataç›®å½•ä¸‹çš„Yamlæ–‡ä»¶ã€‚æ›´å¥½çš„åˆå§‹çŒœæµ‹å°†äº§ç”Ÿæ›´å¥½çš„æœ€ç»ˆç»“æœï¼Œå› æ­¤åœ¨è¿›åŒ–ä¹‹å‰æ­£ç¡®åœ°åˆå§‹åŒ–è¿™äº›å€¼æ˜¯å¾ˆé‡è¦çš„ã€‚å¦‚æœæœ‰ç–‘é—®ï¼Œåªéœ€ä½¿ç”¨ç¼ºçœå€¼ï¼Œè¿™äº›ç¼ºçœå€¼æ˜¯ä¸ºYOLOv5 COCOè®­ç»ƒä»å¤´ä¼˜åŒ–çš„ã€‚</p> 
<blockquote> 
 <p>YOLOv5çš„è¶…å‚æ–‡ä»¶è§data/hyp.finetune.yamlï¼ˆé€‚ç”¨VOCæ•°æ®é›†ï¼‰æˆ–è€…hyo.scrach.yamlï¼ˆé€‚ç”¨COCOæ•°æ®é›†ï¼‰æ–‡ä»¶</p> 
</blockquote> 
<h4><a id="1yolov5datahypshypscratchlowyamlYOLOv5_COCO_5"></a>1ã€yolov5/data/hyps/hyp.scratch-low.yaml(YOLOv5 COCOè®­ç»ƒä»å¤´ä¼˜åŒ–ï¼Œæ•°æ®å¢å¼ºä½)</h4> 
<pre><code class="prism language-bash"><span class="token comment"># Hyperparameters for low-augmentation COCO training from scratch </span>
 <span class="token comment"># python train.py --batch 64 --cfg yolov5n6.yaml --weights '' --data coco.yaml --img 640 --epochs 300 --linear </span>
 <span class="token comment"># See tutorials for hyperparameter evolution https://github.com/ultralytics/yolov5#tutorials </span>
  
 lr0: <span class="token number">0.01</span>  <span class="token comment"># initial learning rate (SGD=1E-2, Adam=1E-3) åˆå§‹å­¦ä¹ é€Ÿç‡</span>
 lrf: <span class="token number">0.01</span>  <span class="token comment"># final OneCycleLR learning rate (lr0 * lrf) ï¼Œæœ€ç»ˆOneCycleLRå­¦ä¹ ç‡</span>
 momentum: <span class="token number">0.937</span>  <span class="token comment"># SGD momentum/Adam beta1 </span>
 weight_decay: <span class="token number">0.0005</span>  <span class="token comment"># optimizer weight decay 5e-4 ,æƒé‡è¡°å˜</span>
 warmup_epochs: <span class="token number">3.0</span>  <span class="token comment"># warmup epochs (fractions ok) å­¦ä¹ ç‡çƒ­èº«epoch</span>
 warmup_momentum: <span class="token number">0.8</span>  <span class="token comment"># warmup initial momentum å­¦ä¹ ç‡çƒ­èº«åˆå§‹åŠ¨é‡</span>
 warmup_bias_lr: <span class="token number">0.1</span>  <span class="token comment"># warmup initial bias lr å­¦ä¹ ç‡çƒ­èº«åæ‰§å­¦ä¹ ç‡</span>
 box: <span class="token number">0.05</span>  <span class="token comment"># box loss gain </span>
 cls: <span class="token number">0.5</span>  <span class="token comment"># cls loss gain </span>
 cls_pw: <span class="token number">1.0</span>  <span class="token comment"># cls BCELoss positive_weight </span>
 obj: <span class="token number">1.0</span>  <span class="token comment"># obj loss gain (scale with pixels) </span>
 obj_pw: <span class="token number">1.0</span>  <span class="token comment"># obj BCELoss positive_weight </span>
 iou_t: <span class="token number">0.20</span>  <span class="token comment"># IoU training threshold </span>
 anchor_t: <span class="token number">4.0</span>  <span class="token comment"># anchor-multiple threshold </span>
 <span class="token comment"># anchors: 3  # anchors per output layer (0 to ignore) </span>
 fl_gamma: <span class="token number">0.0</span>  <span class="token comment"># focal loss gamma (efficientDet default gamma=1.5) </span>
 <span class="token comment">#é¢œè‰²äº®åº¦,è‰²è°ƒ(Hue)ã€é¥±å’Œåº¦(Saturation)</span>
 hsv_h: <span class="token number">0.015</span>  <span class="token comment"># image HSV-Hue augmentation (fraction) </span>
 hsv_s: <span class="token number">0.7</span>  <span class="token comment"># image HSV-Saturation augmentation (fraction) </span>
 hsv_v: <span class="token number">0.4</span>  <span class="token comment"># image HSV-Value augmentation (fraction) </span>
 <span class="token comment">#å›¾åƒæ—‹è½¬</span>
 degrees: <span class="token number">0.0</span>  <span class="token comment"># image rotation (+/- deg) </span>
 <span class="token comment">#å›¾åƒå¹³ç§»</span>
 translate: <span class="token number">0.1</span>  <span class="token comment"># image translation (+/- fraction) </span>
 <span class="token comment">##å›¾åƒä»¿å°„å˜æ¢çš„ç¼©æ”¾æ¯”ä¾‹</span>
 scale: <span class="token number">0.5</span>  <span class="token comment"># image scale (+/- gain) </span>
 <span class="token comment">#è®¾ç½®è£å‰ªçš„ä»¿å°„çŸ©é˜µç³»æ•°</span>
 shear: <span class="token number">0.0</span>  <span class="token comment"># image shear (+/- deg) </span>
 <span class="token comment">#é€è§†å˜æ¢</span>
 perspective: <span class="token number">0.0</span>  <span class="token comment"># image perspective (+/- fraction), range 0-0.001 ,range 0-0.001 0.0ï¼šä»¿å°„å˜æ¢ï¼Œ&gt;0ä¸ºé€è§†å˜æ¢</span>
 flipud: <span class="token number">0.0</span>  <span class="token comment"># image flip up-down (probability) </span>
 fliplr: <span class="token number">0.5</span>  <span class="token comment"># image flip left-right (probability) </span>
 mosaic: <span class="token number">1.0</span>  <span class="token comment"># image mosaic (probability) </span>
 mixup: <span class="token number">0.0</span>  <span class="token comment"># image mixup (probability) #åœ¨mosaicå¯ç”¨æ—¶ï¼Œæ‰å¯ä»¥å¯ç”¨</span>
 copy_paste: <span class="token number">0.0</span>  <span class="token comment"># segment copy-paste (probability),åœ¨mosaicå¯ç”¨æ—¶ï¼Œæ‰å¯ä»¥å¯ç”¨ </span>
</code></pre> 
<h4><a id="2yolov5datahypshypscratchmdeiayaml_47"></a>2ã€yolov5/data/hyps/hyp.scratch-mdeia.yamlï¼ˆæ•°æ®å¢å¼ºä¸­ï¼‰</h4> 
<pre><code class="prism language-bash"><span class="token comment"># YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license</span>
<span class="token comment"># Hyperparameters for medium-augmentation COCO training from scratch</span>
<span class="token comment"># python train.py --batch 32 --cfg yolov5m6.yaml --weights '' --data coco.yaml --img 1280 --epochs 300</span>
<span class="token comment"># See tutorials for hyperparameter evolution https://github.com/ultralytics/yolov5#tutorials</span>

lr0: <span class="token number">0.01</span>  <span class="token comment"># initial learning rate (SGD=1E-2, Adam=1E-3)</span>
lrf: <span class="token number">0.1</span>  <span class="token comment"># final OneCycleLR learning rate (lr0 * lrf)</span>
momentum: <span class="token number">0.937</span>  <span class="token comment"># SGD momentum/Adam beta1</span>
weight_decay: <span class="token number">0.0005</span>  <span class="token comment"># optimizer weight decay 5e-4</span>
warmup_epochs: <span class="token number">3.0</span>  <span class="token comment"># warmup epochs (fractions ok)</span>
warmup_momentum: <span class="token number">0.8</span>  <span class="token comment"># warmup initial momentum</span>
warmup_bias_lr: <span class="token number">0.1</span>  <span class="token comment"># warmup initial bias lr</span>
box: <span class="token number">0.05</span>  <span class="token comment"># box loss gain</span>
cls: <span class="token number">0.3</span>  <span class="token comment"># cls loss gain</span>
cls_pw: <span class="token number">1.0</span>  <span class="token comment"># cls BCELoss positive_weight</span>
obj: <span class="token number">0.7</span>  <span class="token comment"># obj loss gain (scale with pixels)</span>
obj_pw: <span class="token number">1.0</span>  <span class="token comment"># obj BCELoss positive_weight</span>
iou_t: <span class="token number">0.20</span>  <span class="token comment"># IoU training threshold</span>
anchor_t: <span class="token number">4.0</span>  <span class="token comment"># anchor-multiple threshold</span>
<span class="token comment"># anchors: 3  # anchors per output layer (0 to ignore)</span>
fl_gamma: <span class="token number">0.0</span>  <span class="token comment"># focal loss gamma (efficientDet default gamma=1.5)</span>
hsv_h: <span class="token number">0.015</span>  <span class="token comment"># image HSV-Hue augmentation (fraction)</span>
hsv_s: <span class="token number">0.7</span>  <span class="token comment"># image HSV-Saturation augmentation (fraction)</span>
hsv_v: <span class="token number">0.4</span>  <span class="token comment"># image HSV-Value augmentation (fraction)</span>
degrees: <span class="token number">0.0</span>  <span class="token comment"># image rotation (+/- deg)</span>
translate: <span class="token number">0.1</span>  <span class="token comment"># image translation (+/- fraction)</span>
scale: <span class="token number">0.9</span>  <span class="token comment"># image scale (+/- gain)</span>
shear: <span class="token number">0.0</span>  <span class="token comment"># image shear (+/- deg)</span>
perspective: <span class="token number">0.0</span>  <span class="token comment"># image perspective (+/- fraction), range 0-0.001</span>
flipud: <span class="token number">0.0</span>  <span class="token comment"># image flip up-down (probability)</span>
fliplr: <span class="token number">0.5</span>  <span class="token comment"># image flip left-right (probability)</span>
mosaic: <span class="token number">1.0</span>  <span class="token comment"># image mosaic (probability)</span>
mixup: <span class="token number">0.1</span>  <span class="token comment"># image mixup (probability)</span>
copy_paste: <span class="token number">0.0</span>  <span class="token comment"># segment copy-paste (probability)</span>
</code></pre> 
<h4><a id="3hypscratchhighyaml_84"></a>3ã€hyp.scratch-high.yamlï¼ˆæ•°æ®å¢å¼ºé«˜ï¼‰</h4> 
<pre><code class="prism language-bash"><span class="token comment"># YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license</span>
<span class="token comment"># Hyperparameters for high-augmentation COCO training from scratch</span>
<span class="token comment"># python train.py --batch 32 --cfg yolov5m6.yaml --weights '' --data coco.yaml --img 1280 --epochs 300</span>
<span class="token comment"># See tutorials for hyperparameter evolution https://github.com/ultralytics/yolov5#tutorials</span>

lr0: <span class="token number">0.01</span>  <span class="token comment"># initial learning rate (SGD=1E-2, Adam=1E-3)</span>
lrf: <span class="token number">0.1</span>  <span class="token comment"># final OneCycleLR learning rate (lr0 * lrf)</span>
momentum: <span class="token number">0.937</span>  <span class="token comment"># SGD momentum/Adam beta1</span>
weight_decay: <span class="token number">0.0005</span>  <span class="token comment"># optimizer weight decay 5e-4</span>
warmup_epochs: <span class="token number">3.0</span>  <span class="token comment"># warmup epochs (fractions ok)</span>
warmup_momentum: <span class="token number">0.8</span>  <span class="token comment"># warmup initial momentum</span>
warmup_bias_lr: <span class="token number">0.1</span>  <span class="token comment"># warmup initial bias lr</span>
box: <span class="token number">0.05</span>  <span class="token comment"># box loss gain</span>
cls: <span class="token number">0.3</span>  <span class="token comment"># cls loss gain</span>
cls_pw: <span class="token number">1.0</span>  <span class="token comment"># cls BCELoss positive_weight</span>
obj: <span class="token number">0.7</span>  <span class="token comment"># obj loss gain (scale with pixels)</span>
obj_pw: <span class="token number">1.0</span>  <span class="token comment"># obj BCELoss positive_weight</span>
iou_t: <span class="token number">0.20</span>  <span class="token comment"># IoU training threshold</span>
anchor_t: <span class="token number">4.0</span>  <span class="token comment"># anchor-multiple threshold</span>
<span class="token comment"># anchors: 3  # anchors per output layer (0 to ignore)</span>
fl_gamma: <span class="token number">0.0</span>  <span class="token comment"># focal loss gamma (efficientDet default gamma=1.5)</span>
hsv_h: <span class="token number">0.015</span>  <span class="token comment"># image HSV-Hue augmentation (fraction)</span>
hsv_s: <span class="token number">0.7</span>  <span class="token comment"># image HSV-Saturation augmentation (fraction)</span>
hsv_v: <span class="token number">0.4</span>  <span class="token comment"># image HSV-Value augmentation (fraction)</span>
degrees: <span class="token number">0.0</span>  <span class="token comment"># image rotation (+/- deg)</span>
translate: <span class="token number">0.1</span>  <span class="token comment"># image translation (+/- fraction)</span>
scale: <span class="token number">0.9</span>  <span class="token comment"># image scale (+/- gain)</span>
shear: <span class="token number">0.0</span>  <span class="token comment"># image shear (+/- deg)</span>
perspective: <span class="token number">0.0</span>  <span class="token comment"># image perspective (+/- fraction), range 0-0.001</span>
flipud: <span class="token number">0.0</span>  <span class="token comment"># image flip up-down (probability)</span>
fliplr: <span class="token number">0.5</span>  <span class="token comment"># image flip left-right (probability)</span>
mosaic: <span class="token number">1.0</span>  <span class="token comment"># image mosaic (probability)</span>
mixup: <span class="token number">0.1</span>  <span class="token comment"># image mixup (probability)</span>
copy_paste: <span class="token number">0.1</span>  <span class="token comment"># segment copy-paste (probability)</span>
</code></pre> 
<h3><a id="2OneCycleLR_121"></a>2ã€OneCycleLRå­¦ä¹ ç‡</h3> 
<p>æ ¹æ®â€œOneCycleLRå­¦ä¹ ç‡â€ç­–ç•¥ï¼Œè®¾ç½®å„å‚æ•°ç»„çš„å­¦ä¹ ç‡ã€‚1cycleç­–ç•¥å°†å­¦ä¹ ç‡ä»åˆå§‹å­¦ä¹ ç‡é€€ç«åˆ°æœ€å¤§å­¦ä¹ ç‡ï¼Œç„¶åä»æœ€å¤§å­¦ä¹ ç‡é€€ç«åˆ°è¿œä½äºåˆå§‹å­¦ä¹ ç‡çš„æœ€å°å­¦ä¹ ç‡ã€‚<a href="https://click.endnote.com/viewer?doi=10.48550/arxiv.1708.07120&amp;token=WzIyOTQ5NjcsIjEwLjQ4NTUwL2FyeGl2LjE3MDguMDcxMjAiXQ.TRjqjx-UC_VFt1UnLxwEA0OMTYA" rel="nofollow">è®ºæ–‡åœ°å€</a></p> 
<h3><a id="3Warmup_123"></a>3ã€Warmup</h3> 
<p>warmupæ˜¯ä¸€ç§å­¦ä¹ ç‡ä¼˜åŒ–æ–¹æ³•ï¼Œæœ€æ—©å‡ºç°åœ¨resnetè®ºæ–‡ä¸­ï¼Œåœ¨æ¨¡å‹è®­ç»ƒåˆæœŸé€‰ç”¨è¾ƒå°çš„å­¦ä¹ ç‡ï¼Œè®­ç»ƒä¸€æ®µæ—¶é—´ä¹‹åï¼ˆ10epoch æˆ–è€… 10000stepsï¼‰ä½¿ç”¨é¢„è®¾çš„å­¦ä¹ ç‡è¿›è¡Œè®­ç»ƒ</p> 
<p>ä¸ºä»€ä¹ˆä½¿ç”¨</p> 
<blockquote> 
 <p>æ¨¡å‹è®­ç»ƒåˆæœŸï¼Œæƒé‡éšæœºåŒ–ï¼Œå¯¹æ•°æ®çš„ç†è§£ä¸º0ï¼Œåœ¨ç¬¬ä¸€ä¸ªepochä¸­ï¼Œæ¨¡å‹ä¼šæ ¹æ®è¾“å…¥çš„æ•°æ®è¿›è¡Œå¿«é€Ÿçš„è°ƒå‚ï¼Œæ­¤æ—¶å¦‚æœé‡‡ç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡ï¼Œæœ‰å¾ˆå¤§çš„å¯èƒ½ä½¿æ¨¡å‹å­¦åï¼Œåç»­éœ€è¦æ›´å¤šçš„è½®æ¬¡æ‰èƒ½æ‹‰å›æ¥</p> 
</blockquote> 
<blockquote> 
 <p>å½“æ¨¡å‹è®­ç»ƒä¸€æ®µæ—¶é—´ä¹‹åï¼Œå¯¹æ•°æ®æœ‰ä¸€å®šçš„å…ˆéªŒçŸ¥è¯†ï¼Œæ­¤æ—¶ä½¿ç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡æ¨¡å‹ä¸å®¹æ˜“å­¦åï¼Œå¯ä»¥ä½¿ç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡åŠ é€Ÿè®­ç»ƒã€‚</p> 
</blockquote> 
<blockquote> 
 <p>å½“æ¨¡å‹ä½¿ç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡è®­ç»ƒä¸€æ®µæ—¶é—´ä¹‹åï¼Œæ¨¡å‹çš„åˆ†å¸ƒç›¸å¯¹æ¯”è¾ƒç¨³å®šï¼Œæ­¤æ—¶ä¸å®œä»æ•°æ®ä¸­å†å­¦åˆ°æ–°çš„ç‰¹ç‚¹ï¼Œå¦‚æœç»§ç»­ä½¿ç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡ä¼šç ´åæ¨¡å‹çš„ç¨³å®šæ€§ï¼Œè€Œä½¿ç”¨è¾ƒå°çš„å­¦ä¹ ç‡æ›´è·å¾—æœ€ä¼˜ã€‚</p> 
</blockquote> 
<p>Pytorchå†…éƒ¨å¹¶æ²¡æœ‰warmupçš„æ¥å£ï¼Œä¸ºæ­¤éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…<a href="https://github.com/Tony-Y/pytorch_warmup">pytorch_warmup </a>ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤pip install pytorch_warmupè¿›è¡Œå®‰è£…</p> 
<h4><a id="1_136"></a>1ã€å½“å­¦ä¹ ç‡è®¡åˆ’ä½¿ç”¨å…¨å±€è¿­ä»£æ•°æ—¶ï¼Œæœªè°ƒä¼˜çš„çº¿æ€§é¢„çƒ­å¯ä»¥è¿™æ ·ä½¿ç”¨:</h4> 
<pre><code class="prism language-bash"><span class="token function">import</span> torch
<span class="token function">import</span> pytorch_warmup as warmup

optimizer <span class="token operator">=</span> torch.optim.AdamW<span class="token punctuation">(</span>params, <span class="token assign-left variable">lr</span><span class="token operator">=</span><span class="token number">0.001</span>, <span class="token assign-left variable">betas</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.9</span>, <span class="token number">0.999</span><span class="token punctuation">)</span>, <span class="token assign-left variable">weight_decay</span><span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">)</span>
num_steps <span class="token operator">=</span> len<span class="token punctuation">(</span>dataloader<span class="token punctuation">)</span> * num_epochs
lr_scheduler <span class="token operator">=</span> torch.optim.lr_scheduler.CosineAnnealingLR<span class="token punctuation">(</span>optimizer, <span class="token assign-left variable">T_max</span><span class="token operator">=</span>num_steps<span class="token punctuation">)</span>
warmup_scheduler <span class="token operator">=</span> warmup.UntunedLinearWarmup<span class="token punctuation">(</span>optimizer<span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">epoch</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span>,num_epochs+1<span class="token punctuation">)</span>:
    <span class="token keyword">for</span> <span class="token for-or-select variable">batch</span> <span class="token keyword">in</span> dataloader:
        optimizer.zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>
        loss <span class="token operator">=</span> <span class="token punctuation">..</span>.
        loss.backward<span class="token punctuation">(</span><span class="token punctuation">)</span>
        optimizer.step<span class="token punctuation">(</span><span class="token punctuation">)</span>
        with warmup_scheduler.dampening<span class="token punctuation">(</span><span class="token punctuation">)</span>:
            lr_scheduler.step<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="2PyTorch_140with_155"></a>2ã€å¦‚æœä½ æƒ³ä½¿ç”¨PyTorch 1.4.0æˆ–æ›´é«˜ç‰ˆæœ¬æ”¯æŒçš„å­¦ä¹ ç‡è°ƒåº¦â€œé“¾æ¥â€ï¼Œä½ å¯ä»¥ç®€å•åœ°ç»™å‡ºä¸€ç»„withè¯­å¥çš„å­¦ä¹ ç‡è°ƒåº¦ç¨‹åºä»£ç :</h4> 
<pre><code class="prism language-bash">lr_scheduler1 <span class="token operator">=</span> torch.optim.lr_scheduler.ExponentialLR<span class="token punctuation">(</span>optimizer, <span class="token assign-left variable">gamma</span><span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">)</span>
lr_scheduler2 <span class="token operator">=</span> torch.optim.lr_scheduler.StepLR<span class="token punctuation">(</span>optimizer, <span class="token assign-left variable">step_size</span><span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">gamma</span><span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span>
warmup_scheduler <span class="token operator">=</span> warmup.UntunedLinearWarmup<span class="token punctuation">(</span>optimizer<span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">epoch</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span>,num_epochs+1<span class="token punctuation">)</span>:
    <span class="token keyword">for</span> <span class="token for-or-select variable">batch</span> <span class="token keyword">in</span> dataloader:
        <span class="token punctuation">..</span>.
        optimizer.step<span class="token punctuation">(</span><span class="token punctuation">)</span>
        with warmup_scheduler.dampening<span class="token punctuation">(</span><span class="token punctuation">)</span>:
            lr_scheduler1.step<span class="token punctuation">(</span><span class="token punctuation">)</span>
            lr_scheduler2.step<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="3epoch_169"></a>3ã€å½“å­¦ä¹ ç‡è®¡åˆ’ä½¿ç”¨epochå·æ—¶ï¼Œé¢„çƒ­è®¡åˆ’å¯ä»¥è¿™æ ·ä½¿ç”¨:</h4> 
<pre><code class="prism language-bash">lr_scheduler <span class="token operator">=</span> torch.optim.lr_scheduler.MultiStepLR<span class="token punctuation">(</span>optimizer, <span class="token assign-left variable">milestones</span><span class="token operator">=</span><span class="token punctuation">[</span>num_epochs//3<span class="token punctuation">]</span>, <span class="token assign-left variable">gamma</span><span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span>
warmup_scheduler <span class="token operator">=</span> warmup.UntunedLinearWarmup<span class="token punctuation">(</span>optimizer<span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">epoch</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span>,num_epochs+1<span class="token punctuation">)</span>:
    <span class="token keyword">for</span> iter, batch <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>dataloader<span class="token punctuation">)</span>:
        optimizer.zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>
        loss <span class="token operator">=</span> <span class="token punctuation">..</span>.
        loss.backward<span class="token punctuation">(</span><span class="token punctuation">)</span>
        optimizer.step<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> iter <span class="token operator">&lt;</span> len<span class="token punctuation">(</span>dataloader<span class="token punctuation">)</span>-1:
            with warmup_scheduler.dampening<span class="token punctuation">(</span><span class="token punctuation">)</span>:
                pass
    with warmup_scheduler.dampening<span class="token punctuation">(</span><span class="token punctuation">)</span>:
        lr_scheduler.step<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="4Warmup_Schedules_186"></a>4ã€Warmup Schedules</h4> 
<h5><a id="1Manual_Warmup_187"></a>1ã€Manual Warmup</h5> 
<p>é¢„çƒ­å› å­w(t)å–å†³äºé¢„çƒ­æœŸï¼Œå¿…é¡»æ‰‹åŠ¨æŒ‡å®šçº¿æ€§é¢„çƒ­å’ŒæŒ‡æ•°é¢„çƒ­ã€‚</p> 
<h6><a id="1_Linear_189"></a>1ã€ Linear</h6> 
<pre><code class="prism language-bash">w<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">=</span> min<span class="token punctuation">(</span><span class="token number">1</span>, t / warmup_period<span class="token punctuation">)</span>
warmup_scheduler <span class="token operator">=</span> warmup.LinearWarmup<span class="token punctuation">(</span>optimizer, <span class="token assign-left variable">warmup_period</span><span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="2_Exponential_195"></a>2ã€ Exponential</h6> 
<pre><code class="prism language-bash">warmup_period <span class="token operator">=</span> <span class="token number">1</span> / <span class="token punctuation">(</span><span class="token number">1</span> - beta2<span class="token punctuation">)</span>

warmup_scheduler <span class="token operator">=</span> warmup.UntunedExponentialWarmup<span class="token punctuation">(</span>optimizer<span class="token punctuation">)</span>
</code></pre> 
<h6><a id="3_RAdam_Warmup_203"></a>3ã€ RAdam Warmup</h6> 
<p>The warmup factor depends on Adamâ€™s beta2 parameter for RAdamWarmup. Please see the original paper for the details.</p> 
<pre><code class="prism language-bash">warmup_scheduler <span class="token operator">=</span> warmup.RAdamWarmup<span class="token punctuation">(</span>optimizer<span class="token punctuation">)</span>
</code></pre> 
<h6><a id="4_Apexs_Adam_209"></a>4ã€ Apexâ€™s Adam</h6> 
<p>The Apex library provides an Adam optimizer tuned for CUDA devices, <a href="https://nvidia.github.io/apex/optimizers.html#apex.optimizers.FusedAdam" rel="nofollow">FusedAdam</a>. The FusedAdam optimizer can be used with the warmup schedulers. For example:</p> 
<pre><code class="prism language-bash">optimizer <span class="token operator">=</span> apex.optimizers.FusedAdam<span class="token punctuation">(</span>params, <span class="token assign-left variable">lr</span><span class="token operator">=</span><span class="token number">0.001</span>, <span class="token assign-left variable">betas</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.9</span>, <span class="token number">0.999</span><span class="token punctuation">)</span>, <span class="token assign-left variable">weight_decay</span><span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">)</span>
lr_scheduler <span class="token operator">=</span> torch.optim.lr_scheduler.CosineAnnealingLR<span class="token punctuation">(</span>optimizer, <span class="token assign-left variable">T_max</span><span class="token operator">=</span>num_steps<span class="token punctuation">)</span>
warmup_scheduler <span class="token operator">=</span> warmup.UntunedLinearWarmup<span class="token punctuation">(</span>optimizer<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="4YOLOV5yolov5v6utilsdatasetspy_217"></a>4ã€YOLOV5æ•°æ®å¢å¼ºï¼ˆyolov5-v6\utils\datasets.pyï¼‰</h3> 
<p><a href="https://click.endnote.com/viewer?doi=10.48550/arxiv.1708.07120&amp;token=WzIyOTQ5NjcsIjEwLjQ4NTUwL2FyeGl2LjE3MDguMDcxMjAiXQ.TRjqjx-UC_VFt1UnLxwEA0OMTYA" rel="nofollow">ç›®æ ‡æ£€æµ‹ YOLOv5 - æ•°æ®å¢å¼º</a><br> <a href="https://blog.csdn.net/weixin_43694096/article/details/124741952">Yolov5(v6.1)æ•°æ®å¢å¼ºæ–¹å¼è§£æ</a><br> ä¸€æ—¦è®­ç»ƒå¼€å§‹ï¼Œæ‚¨å¯ä»¥åœ¨train_batch*.jpgå›¾åƒä¸­æŸ¥çœ‹å¢å¼ºç­–ç•¥çš„æ•ˆæœã€‚è¿™äº›å›¾åƒå°†åœ¨ä½ çš„ç«è½¦æ—¥å¿—ç›®å½•ä¸­ï¼Œé€šå¸¸æ˜¯yolov5/runs/train/exp:<br> train_batch0.jpg shows train batch 0 mosaics and labels:<br> <img src="https://images2.imgbox.com/02/f4/LYt1mR0I_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/b5/63/ZGKPRUg0_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/98/ce/QOsnmNmx_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="5_YOLOv5Albumentations_226"></a>5ã€ YOLOv5é›†æˆAlbumentationsï¼Œæ·»åŠ æ–°çš„æ•°æ®å¢å¼ºæ–¹æ³•</h3> 
<blockquote> 
 <p>To use albumentations simply pip install -U albumentations and then update the augmentation pipeline as you see fit in the new Albumentations class in yolov5/utils/augmentations.py. Note these Albumentations operations run in addition to the YOLOv5 hyperparameter augmentations, i.e. defined in hyp.scratch.yaml.</p> 
</blockquote> 
<p>Hereâ€™s an example that <strong>applies Blur, MedianBlur and ToGray albumentations in addition to the YOLOv5 hyperparameter augmentations normally applied to your training mosaics</strong> ğŸ˜ƒ</p> 
<pre><code class="prism language-bash">class Albumentations:
    <span class="token comment"># YOLOv5 Albumentations class (optional, used if package is installed)</span>
    def __init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>:
        self.transform <span class="token operator">=</span> None
        try:
            <span class="token function">import</span> albumentations as A
            check_version<span class="token punctuation">(</span>A.__version__, <span class="token string">'1.0.3'</span><span class="token punctuation">)</span>  <span class="token comment"># version requirement</span>

            self.transform <span class="token operator">=</span> A.Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>
                A.Blur<span class="token punctuation">(</span>blur_limit<span class="token operator">=</span><span class="token number">50</span>, <span class="token assign-left variable">p</span><span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span>,
                A.MedianBlur<span class="token punctuation">(</span>blur_limit<span class="token operator">=</span><span class="token number">51</span>, <span class="token assign-left variable">p</span><span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span>,
                A.ToGray<span class="token punctuation">(</span>p<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">]</span>,
                <span class="token assign-left variable">bbox_params</span><span class="token operator">=</span>A.BboxParams<span class="token punctuation">(</span>format<span class="token operator">=</span><span class="token string">'yolo'</span>, <span class="token assign-left variable">label_fields</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'class_labels'</span><span class="token punctuation">]</span><span class="token punctuation">))</span>

            logging.info<span class="token punctuation">(</span>colorstr<span class="token punctuation">(</span><span class="token string">'albumentations: '</span><span class="token punctuation">)</span> + <span class="token string">', '</span>.join<span class="token punctuation">(</span>f<span class="token string">'{x}'</span> <span class="token keyword">for</span> <span class="token for-or-select variable">x</span> <span class="token keyword">in</span> self.transform.transforms<span class="token punctuation">))</span>
        except ImportError:  <span class="token comment"># package not installed, skip</span>
            pass
        except Exception as e:
            logging.info<span class="token punctuation">(</span>colorstr<span class="token punctuation">(</span><span class="token string">'albumentations: '</span><span class="token punctuation">)</span> + f<span class="token string">'{e}'</span><span class="token punctuation">)</span>

    def __call__<span class="token punctuation">(</span>self, im, labels, <span class="token assign-left variable">p</span><span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">)</span>:
        <span class="token keyword">if</span> self.transform and random.random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> p:
            new <span class="token operator">=</span> self.transform<span class="token punctuation">(</span>image<span class="token operator">=</span>im, <span class="token assign-left variable">bboxes</span><span class="token operator">=</span>labels<span class="token punctuation">[</span>:, <span class="token number">1</span>:<span class="token punctuation">]</span>, <span class="token assign-left variable">class_labels</span><span class="token operator">=</span>labels<span class="token punctuation">[</span>:, <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># transformed</span>
            im, labels <span class="token operator">=</span> new<span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span>, np.array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>c, *b<span class="token punctuation">]</span> <span class="token keyword">for</span> c, b <span class="token keyword">in</span> zip<span class="token punctuation">(</span>new<span class="token punctuation">[</span><span class="token string">'class_labels'</span><span class="token punctuation">]</span>, new<span class="token punctuation">[</span><span class="token string">'bboxes'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token builtin class-name">return</span> im, labels
</code></pre> 
<p><img src="https://images2.imgbox.com/89/f0/aDHJI0x9_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ##æ‚¨å¯ä»¥åœ¨YOLOv5æ•°æ®åŠ è½½å™¨ä¸­é›†æˆé¢å¤–çš„Albumentationså¢å¼ºåŠŸèƒ½:<br> åœ¨YOLOv5æ•°æ®åŠ è½½å™¨ä¸­æ’å…¥albumentaugmentåŠŸèƒ½çš„æœ€ä½³ä½ç½®æ˜¯è¿™é‡Œ:</p> 
<pre><code class="prism language-bash"><span class="token keyword">if</span> self.augment: 
     <span class="token comment"># Augment imagespace </span>
     <span class="token keyword">if</span> not mosaic: 
         img, labels <span class="token operator">=</span> random_perspective<span class="token punctuation">(</span>img, labels, 
                                          <span class="token assign-left variable">degrees</span><span class="token operator">=</span>hyp<span class="token punctuation">[</span><span class="token string">'degrees'</span><span class="token punctuation">]</span>, 
                                          <span class="token assign-left variable">translate</span><span class="token operator">=</span>hyp<span class="token punctuation">[</span><span class="token string">'translate'</span><span class="token punctuation">]</span>, 
                                          <span class="token assign-left variable">scale</span><span class="token operator">=</span>hyp<span class="token punctuation">[</span><span class="token string">'scale'</span><span class="token punctuation">]</span>, 
                                          <span class="token assign-left variable">shear</span><span class="token operator">=</span>hyp<span class="token punctuation">[</span><span class="token string">'shear'</span><span class="token punctuation">]</span>, 
                                          <span class="token assign-left variable">perspective</span><span class="token operator">=</span>hyp<span class="token punctuation">[</span><span class="token string">'perspective'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
  
     <span class="token comment"># Augment colorspace </span>
     augment_hsv<span class="token punctuation">(</span>img, <span class="token assign-left variable">hgain</span><span class="token operator">=</span>hyp<span class="token punctuation">[</span><span class="token string">'hsv_h'</span><span class="token punctuation">]</span>, <span class="token assign-left variable">sgain</span><span class="token operator">=</span>hyp<span class="token punctuation">[</span><span class="token string">'hsv_s'</span><span class="token punctuation">]</span>, <span class="token assign-left variable">vgain</span><span class="token operator">=</span>hyp<span class="token punctuation">[</span><span class="token string">'hsv_v'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
  
     <span class="token comment"># Apply cutouts </span>
     <span class="token comment"># if random.random() &lt; 0.9: </span>
     <span class="token comment">#     labels = cutout(img, labels) </span>
</code></pre> 
<p>å…¶ä¸­imgä¸ºå›¾åƒï¼Œlabelä¸ºè¾¹æ¡†æ ‡ç­¾ã€‚è¯·æ³¨æ„ï¼Œæ‚¨æ·»åŠ çš„ä»»ä½•albumentså¢å¼ºéƒ½å°†æ˜¯å¯¹è¶…å‚æ•°æ–‡ä»¶ä¸­å®šä¹‰çš„ç°æœ‰è‡ªåŠ¨YOLOv5å¢å¼ºçš„è¡¥å……:</p> 
<h3><a id="6_282"></a>6ã€å®šä¹‰è¯„ä¼°æŒ‡æ ‡</h3> 
<p>å¥åº·æ˜¯æˆ‘ä»¬è¿½æ±‚çš„ä»·å€¼æœ€å¤§åŒ–ã€‚åœ¨YOLOv5ä¸­ï¼Œæˆ‘ä»¬å°†é»˜è®¤é€‚åº”åº¦å‡½æ•°å®šä¹‰ä¸ºæŒ‡æ ‡çš„åŠ æƒç»„åˆ:mAP@0.5å æƒé‡çš„10%ï¼ŒmAP@0.5:0.95å å‰©ä½™çš„90%ï¼Œæ²¡æœ‰Precision På’ŒRecall Rã€‚æ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œæˆ–è€…ä½¿ç”¨é»˜è®¤çš„é€‚åˆåº¦å®šä¹‰(æ¨è)ã€‚</p> 
<pre><code class="prism language-bash">yolov5/utils/metrics.py

Lines <span class="token number">12</span> to <span class="token number">16</span> <span class="token keyword">in</span> 4103ce9

 def fitness<span class="token punctuation">(</span>x<span class="token punctuation">)</span>: 
     <span class="token comment"># Model fitness as a weighted combination of metrics </span>
     w <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.0</span>, <span class="token number">0.0</span>, <span class="token number">0.1</span>, <span class="token number">0.9</span><span class="token punctuation">]</span>  <span class="token comment"># weights for [P, R, mAP@0.5, mAP@0.5:0.95] </span>
     <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>:, :4<span class="token punctuation">]</span> * w<span class="token punctuation">)</span>.sum<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
</code></pre> 
<h3><a id="7_Evolve_295"></a>7ã€ Evolveï¼ˆæ¨¡å‹å‚æ•°æ›´æ–°è¿›åŒ–ï¼‰</h3> 
<pre><code class="prism language-bash"><span class="token comment"># Single-GPU</span>
python train.py --epochs <span class="token number">10</span> --data coco128.yaml --weights yolov5s.pt --cache --evolve

<span class="token comment"># Multi-GPU</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token function">sleep</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">expr</span> <span class="token number">30</span> <span class="token punctuation">\</span>* $i<span class="token variable">)</span></span> <span class="token operator">&amp;&amp;</span>  <span class="token comment"># 30-second delay (optional)</span>
  <span class="token builtin class-name">echo</span> <span class="token string">'Starting GPU '</span><span class="token variable">$i</span><span class="token string">'...'</span> <span class="token operator">&amp;&amp;</span>
  <span class="token function">nohup</span> python train.py --epochs <span class="token number">10</span> --data coco128.yaml --weights yolov5s.pt --cache --device <span class="token variable">$i</span> --evolve <span class="token operator">&gt;</span> evolve_gpu_<span class="token variable">$i</span>.log <span class="token operator">&amp;</span>
<span class="token keyword">done</span>

<span class="token comment"># Multi-GPU bash-while (not recommended)</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token function">sleep</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">expr</span> <span class="token number">30</span> <span class="token punctuation">\</span>* $i<span class="token variable">)</span></span> <span class="token operator">&amp;&amp;</span>  <span class="token comment"># 30-second delay (optional)</span>
  <span class="token builtin class-name">echo</span> <span class="token string">'Starting GPU '</span><span class="token variable">$i</span><span class="token string">'...'</span> <span class="token operator">&amp;&amp;</span>
  <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">nohup</span> python train.py<span class="token punctuation">..</span>. --device $i --evolve <span class="token number">1</span> <span class="token operator">&gt;</span> evolve_gpu_$i.log<span class="token punctuation">;</span> <span class="token keyword">done</span><span class="token variable">)</span></span>"</span> <span class="token operator">&amp;</span>
<span class="token keyword">done</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment"># YOLOv5 Hyperparameter Evolution Results</span>
<span class="token comment"># Best generation: 287</span>
<span class="token comment"># Last generation: 300</span>
<span class="token comment">#    metrics/precision,       metrics/recall,      metrics/mAP_0.5, metrics/mAP_0.5:0.95,         val/box_loss,         val/obj_loss,         val/cls_loss</span>
<span class="token comment">#              0.54634,              0.55625,              0.58201,              0.33665,             0.056451,             0.042892,             0.013441</span>

lr0: <span class="token number">0.01</span>  <span class="token comment"># initial learning rate (SGD=1E-2, Adam=1E-3)</span>
lrf: <span class="token number">0.2</span>  <span class="token comment"># final OneCycleLR learning rate (lr0 * lrf)</span>
momentum: <span class="token number">0.937</span>  <span class="token comment"># SGD momentum/Adam beta1</span>
weight_decay: <span class="token number">0.0005</span>  <span class="token comment"># optimizer weight decay 5e-4</span>
warmup_epochs: <span class="token number">3.0</span>  <span class="token comment"># warmup epochs (fractions ok)</span>
warmup_momentum: <span class="token number">0.8</span>  <span class="token comment"># warmup initial momentum</span>
warmup_bias_lr: <span class="token number">0.1</span>  <span class="token comment"># warmup initial bias lr</span>
box: <span class="token number">0.05</span>  <span class="token comment"># box loss gain</span>
cls: <span class="token number">0.5</span>  <span class="token comment"># cls loss gain</span>
cls_pw: <span class="token number">1.0</span>  <span class="token comment"># cls BCELoss positive_weight</span>
obj: <span class="token number">1.0</span>  <span class="token comment"># obj loss gain (scale with pixels)</span>
obj_pw: <span class="token number">1.0</span>  <span class="token comment"># obj BCELoss positive_weight</span>
iou_t: <span class="token number">0.20</span>  <span class="token comment"># IoU training threshold</span>
anchor_t: <span class="token number">4.0</span>  <span class="token comment"># anchor-multiple threshold</span>
<span class="token comment"># anchors: 3  # anchors per output layer (0 to ignore)</span>
fl_gamma: <span class="token number">0.0</span>  <span class="token comment"># focal loss gamma (efficientDet default gamma=1.5)</span>
hsv_h: <span class="token number">0.015</span>  <span class="token comment"># image HSV-Hue augmentation (fraction)</span>
hsv_s: <span class="token number">0.7</span>  <span class="token comment"># image HSV-Saturation augmentation (fraction)</span>
hsv_v: <span class="token number">0.4</span>  <span class="token comment"># image HSV-Value augmentation (fraction)</span>
degrees: <span class="token number">0.0</span>  <span class="token comment"># image rotation (+/- deg)</span>
translate: <span class="token number">0.1</span>  <span class="token comment"># image translation (+/- fraction)</span>
scale: <span class="token number">0.5</span>  <span class="token comment"># image scale (+/- gain)</span>
shear: <span class="token number">0.0</span>  <span class="token comment"># image shear (+/- deg)</span>
perspective: <span class="token number">0.0</span>  <span class="token comment"># image perspective (+/- fraction), range 0-0.001</span>
flipud: <span class="token number">0.0</span>  <span class="token comment"># image flip up-down (probability)</span>
fliplr: <span class="token number">0.5</span>  <span class="token comment"># image flip left-right (probability)</span>
mosaic: <span class="token number">1.0</span>  <span class="token comment"># image mosaic (probability)</span>
mixup: <span class="token number">0.0</span>  <span class="token comment"># image mixup (probability)</span>
copy_paste: <span class="token number">0.0</span>  <span class="token comment"># segment copy-paste (probability)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9a/fe/Xbk6ftUy_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æˆ‘ä»¬å»ºè®®è‡³å°‘300ä»£çš„è¿›åŒ–æ‰èƒ½è·å¾—æœ€å¥½çš„ç»“æœã€‚è¯·æ³¨æ„ï¼Œè¿›åŒ–é€šå¸¸æ˜¯æ˜‚è´µå’Œè€—æ—¶çš„ï¼Œå› ä¸ºåŸºæœ¬åœºæ™¯è¦è®­ç»ƒæ•°ç™¾æ¬¡ï¼Œå¯èƒ½éœ€è¦æ•°ç™¾æˆ–æ•°åƒä¸ªGPUå°æ—¶ã€‚</p> 
<h3><a id="8__357"></a>8ã€ è¶…å‚æ•°å¯è§†åŒ–</h3> 
<p>evolve.csv is plotted as evolve.png by utils.plots.plot_evolve() after evolution finishes with one subplot per hyperparameter showing fitness (y axis) vs hyperparameter values (x axis). Yellow indicates higher concentrations. Vertical distributions indicate that a parameter has been disabled and does not mutate. This is user selectable in the meta dictionary in train.py, and is useful for fixing parameters and preventing them from evolving.<br> <img src="https://images2.imgbox.com/a8/5c/Usk6XVZZ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/908992362ff0a11683123a860579aec6/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ArcGIS api for JavaScript - å‘å¸ƒä¸€ä¸ªGISçº¿ä¸Šå›¾å±‚</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f91ab643665b34c27d2cb016de728401/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">video æ ‡ç­¾ autoplay å®ç°è‡ªåŠ¨æ’­æ”¾</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>