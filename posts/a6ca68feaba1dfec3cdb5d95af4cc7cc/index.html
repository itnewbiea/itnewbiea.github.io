<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT SQL链接 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT SQL链接" />
<meta property="og:description" content="1、新建工程： 打开Qt Creator，File -&gt; New File or Project，左边选择 Qt Widget Project,右边选择Qt Gui Application
单击Choose；填写工程名称（这里是1）及选择目录
-&gt; Next -&gt; Next -&gt; Next -&gt; Finish，工程顺利生成并自动回到了主界面，单击一下左边的绿色小三角，就会编译运行这个空白的程序。 2、连接数据库： 要连接数据库，就要手工向工程里面的相关文件添加代码，具体如下：
1.pro：添加一行 QT &#43;= sql
main.cpp：添加引用 #include &lt;QtGui/QApplication&gt; #include &#34;mainwindow.h&#34; //以下是手工添加的引用 #include &lt;QSqlDatabase&gt; #include &lt;QSqlError&gt; #include &lt;QMessageBox&gt; //这个是手工添加的函数 void OpenDatabase() { QSqlDatabase db=QSqlDatabase::addDatabase(&#34;QODBC&#34;); db.setDatabaseName(QString(&#34;DRIVER={SQL SERVER};&#34; &#34;SERVER=%1;&#34; //服务器名称 &#34;DATABASE=%2;&#34;//数据库名 &#34;UID=%3;&#34; //登录名 &#34;PWD=%4;&#34; //密码 ).arg(&#34;192.168.1.252&#34;) .arg(&#34;数据库名&#34;) .arg(&#34;登录名&#34;) .arg(&#34;密码&#34;) ); if (!db.open()) { QMessageBox::critical(0, qApp-&gt;tr(&#34;Cannot open database&#34;), db.lastError().databaseText(), QMessageBox::Cancel); } } int main(int argc, char *argv[]) { QApplication a(argc, argv); MainWindow w; w." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a6ca68feaba1dfec3cdb5d95af4cc7cc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-09-18T08:08:30+08:00" />
<meta property="article:modified_time" content="2012-09-18T08:08:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT SQL链接</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">1、新建工程：</span> </p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">打开Qt Creator，File -&gt; New File or Project，左边选择 Qt Widget Project,右边选择Qt Gui Application</span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px"></span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <a target="_blank" href="http://img1.51cto.com/attachment/201206/124758710.png" rel="nofollow noopener noreferrer" style="padding:0px; margin:0px; color:rgb(1,95,145); text-decoration:none"><img border="0" alt="" src="https://images2.imgbox.com/91/b8/icwoRKe2_o.png" style="padding:0px; margin:0px; vertical-align:top; border:none"></a></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px"></span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">单击Choose；填写工程名称（这里是1）及选择目录</span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px"></span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <a target="_blank" href="http://img1.51cto.com/attachment/201206/124819561.png" rel="nofollow noopener noreferrer" style="padding:0px; margin:0px; color:rgb(1,95,145); text-decoration:none"><img border="0" alt="" src="https://images2.imgbox.com/7f/58/zDLFRIBQ_o.png" width="650" style="padding:0px; margin:0px; vertical-align:top; border:none"></a></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px"></span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">-&gt; Next -&gt; Next -&gt; Next -&gt; Finish，工程顺利生成并自动回到了主界面，单击一下左边的绿色小三角，就会编译运行这个空白的程序。 </span> </p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px"></span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">2、连接数据库：</span> </p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">要连接数据库，就要手工向工程里面的相关文件添加代码，具体如下：</span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">1.pro：添加一行 QT += sql</span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">main.cpp：添加引用 </span> </p> 
<pre style="padding:0px; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); font-family:'Courier New',monospace; overflow:auto; width:712px; color:rgb(85,85,85)"> 
 <ol class="dp-cpp" style="padding:5px 0px; margin:0px 0px 1px 3em!important; border-left-width:3px; border-style:none none none solid; border-left-color:rgb(20,107,0); color:rgb(92,92,92); list-style-position:initial"><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="preprocessor" style="padding:0px; margin:0px; border:none; color:gray; background-color:inherit">#include &lt;QtGui/QApplication&gt;</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="preprocessor" style="padding:0px; margin:0px; border:none; color:gray; background-color:inherit">#include "mainwindow.h"</span> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//以下是手工添加的引用</span> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="preprocessor" style="padding:0px; margin:0px; border:none; color:gray; background-color:inherit">#include &lt;QSqlDatabase&gt;</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="preprocessor" style="padding:0px; margin:0px; border:none; color:gray; background-color:inherit">#include &lt;QSqlError&gt;</span> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="preprocessor" style="padding:0px; margin:0px; border:none; color:gray; background-color:inherit">#include &lt;QMessageBox&gt;</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//这个是手工添加的函数</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">void</span> OpenDatabase() </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">{ </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    QSqlDatabase db=QSqlDatabase::addDatabase(<span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"QODBC"</span>); </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    db.setDatabaseName(QString(<span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"DRIVER={SQL SERVER};"</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                               <span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"SERVER=%1;"</span> <span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//服务器名称</span> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                               <span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"DATABASE=%2;"</span><span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//数据库名</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                               <span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"UID=%3;"</span>           <span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//登录名</span> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                               <span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"PWD=%4;"</span>        <span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//密码</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                               ).arg(<span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"192.168.1.252"</span>) </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                       .arg(<span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"数据库名"</span>) </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                       .arg(<span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"登录名"</span>) </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                       .arg(<span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"密码"</span>) </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                       ); </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    <span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">if</span> (!db.open()) </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    { <br style="padding:0px; margin:0px"></span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">        QMessageBox::critical(0, qApp-&gt;tr(<span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"Cannot open database"</span>), </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">                              db.lastError().databaseText(), QMessageBox::Cancel); </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    } </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">} </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="datatypes" style="padding:0px; margin:0px; border:none; color:rgb(46,139,87); background-color:inherit; font-weight:bold">int</span> main(<span class="datatypes" style="padding:0px; margin:0px; border:none; color:rgb(46,139,87); background-color:inherit; font-weight:bold">int</span> argc, <span class="datatypes" style="padding:0px; margin:0px; border:none; color:rgb(46,139,87); background-color:inherit; font-weight:bold">char</span> *argv[]) </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">{ </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    QApplication a(argc, argv); </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    MainWindow w; </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    w.show(); </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">     </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    <span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//打开数据库</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    OpenDatabase(); </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">     </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    <span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">return</span> a.exec(); </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">} </span></li></ol></pre> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">双击 mainwindow.ui 拖一个TableView和一个PushButton到界面上，然后在PushButton上右键 -&gt; Go to slot -&gt; OK</span><span style="padding:0px; margin:0px"> </span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <a target="_blank" href="http://img1.51cto.com/attachment/201206/125122971.png" rel="nofollow noopener noreferrer" style="padding:0px; margin:0px; color:rgb(1,95,145); text-decoration:none"><img border="0" alt="" src="https://images2.imgbox.com/6a/54/6aVRMNTJ_o.png" style="padding:0px; margin:0px; vertical-align:top; border:none"></a></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px"> </span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <a target="_blank" href="http://img1.51cto.com/attachment/201206/125206488.png" rel="nofollow noopener noreferrer" style="padding:0px; margin:0px; color:rgb(1,95,145); text-decoration:none"><img border="0" alt="" src="https://images2.imgbox.com/1e/83/SyOKLNSh_o.png" style="padding:0px; margin:0px; vertical-align:top; border:none"></a></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">mainwindow.cpp文件代码如下</span><span style="padding:0px; margin:0px"> </span></p> 
<pre style="padding:0px; margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); font-family:'Courier New',monospace; overflow:auto; width:712px; color:rgb(85,85,85)"> 
 <ol class="dp-cpp" style="padding:5px 0px; margin:0px 0px 1px 3em!important; border-left-width:3px; border-style:none none none solid; border-left-color:rgb(20,107,0); color:rgb(92,92,92); list-style-position:initial"><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="preprocessor" style="padding:0px; margin:0px; border:none; color:gray; background-color:inherit">#include "mainwindow.h"</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="preprocessor" style="padding:0px; margin:0px; border:none; color:gray; background-color:inherit">#include "ui_mainwindow.h"</span> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//手工添加以下引用</span> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="preprocessor" style="padding:0px; margin:0px; border:none; color:gray; background-color:inherit">#include &lt;QSqlQueryModel&gt;</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">MainWindow::MainWindow(QWidget *parent) : </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    QMainWindow(parent), </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    ui(<span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">new</span> Ui::MainWindow) </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">{ </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    ui-&gt;setupUi(<span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">this</span>); </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">} </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">MainWindow::~MainWindow() </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">{ </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    <span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">delete</span> ui; </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">} </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"><span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">void</span> MainWindow::on_pushButton_clicked() </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">{ </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    QSqlQueryModel *model = <span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">new</span> QSqlQueryModel; </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    model-&gt;setQuery(<span class="string" style="padding:0px; margin:0px; border:none; color:blue; background-color:inherit">"select * from product"</span>);<span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//这里直接设置SQL语句，忽略最后一个参数</span> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    ui-&gt;tableView-&gt;setModel(model); </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    <span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//以下是视觉方面的效果，不加也没影响</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    <span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//隔行变色</span> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    ui-&gt;tableView-&gt;setAlternatingRowColors(<span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">true</span>); </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px"> </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    <span class="comment" style="padding:0px; margin:0px; border:none; color:rgb(0,130,0); background-color:inherit">//设置行高</span> </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    <span class="datatypes" style="padding:0px; margin:0px; border:none; color:rgb(46,139,87); background-color:inherit; font-weight:bold">int</span> row_count = model-&gt;rowCount(); </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    <span class="keyword" style="padding:0px; margin:0px; border:none; color:rgb(0,102,153); background-color:inherit; font-weight:bold">for</span>(<span class="datatypes" style="padding:0px; margin:0px; border:none; color:rgb(46,139,87); background-color:inherit; font-weight:bold">int</span> i =0; i &lt; row_count; i++) </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    { </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">        ui-&gt;tableView-&gt;setRowHeight(i, 20); </span></li><li class="alt" style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; color:inherit; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">    } </span></li><li style="padding:0px 3px 0px 10px!important; margin-top:0px!important; margin-right:0px!important; margin-bottom:0px!important; margin-left:20px; list-style:decimal-leading-zero outside; line-height:1.3em; border:none"><span style="padding:0px; margin:0px; border:none; color:black; background-color:inherit; font-size:14px">} </span></li></ol></pre> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">3、保存并运行：</span> </p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">保存所有代码，单击左边绿色三角形编译运行</span><span style="padding:0px; margin:0px"> </span></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <a target="_blank" href="http://img1.51cto.com/attachment/201206/125846424.png" rel="nofollow noopener noreferrer" style="padding:0px; margin:0px; color:rgb(1,95,145); text-decoration:none"><img border="0" alt="" src="https://images2.imgbox.com/69/b7/pG3frGle_o.png" style="padding:0px; margin:0px; vertical-align:top; border:none"></a></p> 
<p style="padding-top:0px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; color:rgb(85,85,85); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px">单击顺利运行弹出的窗体上的按钮，顺利查询出数据库记录！</span></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9f7a5c896aaf589bce92abc578d5a115/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">亚洲文字编码范围</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4f1ab1a2a49300fd0a2021a0757309be/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一个简单的加载模块弹出ProgressBar 加载进度条</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>