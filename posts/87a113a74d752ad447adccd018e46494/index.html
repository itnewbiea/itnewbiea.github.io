<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STP的原理和配置（配置详细） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STP的原理和配置（配置详细）" />
<meta property="og:description" content="STP 以太网交换网络中为了进行链路备份，提高网络可靠性，通常会使用冗余链路。但是使用冗余链路会在交换网络上产生环路，引发广播风暴以及MAC地址表不稳定等故障现象，从而导致用户通信质量较差，甚至通信中断。为解决交换网络中的环路问题，提出了生成树协议STP（Spanning Tree Protocol）。与众多协议的发展过程一样，生成树协议也是随着网络的发展而不断更新的，从最初的IEEE 802.1D中定义的STP到IEEE 802.1W中定义的快速生成树协议RSTP（Rapid Spanning Tree Protocol），再到最新的IEEE 802.1S中定义的多生成树协议MSTP（Multiple Spanning Tree Protocol）。
stp概述 为什么要有STP 解决二层环路以下问题：
广播风暴MAC地址表不稳定多帧复制 交换机的角色 根网桥：非根网桥 端口角色 根端口指定端口阻塞端口 端口状态 端口状态
说明
Disabled
端口状态为Down，不处理BPDU报文，也不转发用户流量。
Listening
过渡状态，开始生成树计算，端口可以接收和发送BPDU，但不转发用户流量。
Learning
过渡状态，建立无环的MAC地址转发表，不转发用户流量。
Forwarding
端口可以接收和发送BPDU，也转发用户流量。只有根端口或指定端口才能进入Forwarding状态。
Blocking
端口仅仅接收并处理BPDU，不转发用户流量。
实验一：STP的基本配置 实验目的 在交换机中开启STP协议并通过网桥优先级修改STP的根网桥。
实验拓扑 图7-1 STP的配置
实验步骤 步骤1 开启STP 配置LSW1
&lt;Huawei&gt;system-view [Huawei]undo info-center enable [Huawei]sysname LSW1
[LSW1]stp mode stp // STP的模式为STP，默认是MSTP。
配置LSW2
&lt;Huawei&gt;system-view [Huawei]undo info-center enable [Huawei]sysname LSW2
[LSW2]stp mode stp
配置LSW3
&lt;Huawei&gt;system-view [Huawei]undo info-center enable [Huawei]sysname LSW3" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/87a113a74d752ad447adccd018e46494/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-06T10:38:47+08:00" />
<meta property="article:modified_time" content="2022-12-06T10:38:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STP的原理和配置（配置详细）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="margin-left:10pt;text-align:justify;"><a name="_Toc121126923"><strong><em> STP</em></strong></a></h2> 
<p style="margin-left:10pt;text-align:justify;">      以太网交换网络中为了进行链路备份，提高网络可靠性，通常会使用冗余链路。但是使用冗余链路会在交换网络上产生环路，引发广播风暴以及MAC地址表不稳定等故障现象，从而导致用户通信质量较差，甚至通信中断。为解决交换网络中的环路问题，提出了生成树协议STP（Spanning Tree Protocol）。与众多协议的发展过程一样，生成树协议也是随着网络的发展而不断更新的，从最初的IEEE 802.1D中定义的STP到IEEE 802.1W中定义的快速生成树协议RSTP（Rapid Spanning Tree Protocol），再到最新的IEEE 802.1S中定义的多生成树协议MSTP（Multiple Spanning Tree Protocol）。</p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<h3 style="margin-left:10pt;text-align:justify;"><a name="_Toc121126924"> stp概述</a></h3> 
<ol><li style="text-align:justify;">为什么要有STP</li></ol> 
<p style="margin-left:10pt;text-align:justify;">解决二层环路以下问题：</p> 
<ul><li style="text-align:justify;">广播风暴</li><li style="text-align:justify;">MAC地址表不稳定</li><li style="text-align:justify;">多帧复制</li></ul> 
<ol><li style="text-align:justify;">交换机的角色</li></ol> 
<ul><li style="text-align:justify;">根网桥：</li><li style="text-align:justify;">非根网桥</li></ul> 
<ol><li style="text-align:justify;">端口角色</li></ol> 
<ul><li style="text-align:justify;">根端口</li><li style="text-align:justify;">指定端口</li><li style="text-align:justify;">阻塞端口</li></ul> 
<ol><li style="text-align:justify;">端口状态</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:89.9pt;"> <p style="margin-left:10pt;text-align:center;"><strong>端口状态</strong></p> </td><td style="border-color:#000000;vertical-align:top;width:301.65pt;"> <p style="margin-left:10pt;text-align:center;"><strong>说明</strong></p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:89.9pt;"> <p style="margin-left:10pt;text-align:justify;">Disabled</p> </td><td style="vertical-align:top;width:301.65pt;"> <p style="margin-left:10pt;text-align:justify;">端口状态为Down，不处理BPDU报文，也不转发用户流量。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:89.9pt;"> <p style="margin-left:10pt;text-align:justify;">Listening</p> </td><td style="vertical-align:top;width:301.65pt;"> <p style="margin-left:10pt;text-align:justify;">过渡状态，开始生成树计算，端口可以接收和发送BPDU，但不转发用户流量。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:89.9pt;"> <p style="margin-left:10pt;text-align:justify;">Learning</p> </td><td style="vertical-align:top;width:301.65pt;"> <p style="margin-left:10pt;text-align:justify;">过渡状态，建立无环的MAC地址转发表，不转发用户流量。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:89.9pt;"> <p style="margin-left:10pt;text-align:justify;">Forwarding</p> </td><td style="vertical-align:top;width:301.65pt;"> <p style="margin-left:10pt;text-align:justify;">端口可以接收和发送BPDU，也转发用户流量。只有根端口或指定端口才能进入Forwarding状态。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:89.9pt;"> <p style="margin-left:10pt;text-align:justify;">Blocking</p> </td><td style="vertical-align:top;width:301.65pt;"> <p style="margin-left:10pt;text-align:justify;">端口仅仅接收并处理BPDU，不转发用户流量。</p> </td></tr></tbody></table> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<h3 style="margin-left:10pt;text-align:justify;"><a name="_Toc121126925">实验一：STP的基本配置</a></h3> 
<ol><li style="text-align:justify;">实验目的</li></ol> 
<p style="margin-left:10pt;text-align:justify;">在交换机中开启STP协议并通过网桥优先级修改STP的根网桥。</p> 
<ol><li style="text-align:justify;">实验拓扑</li></ol> 
<p style="margin-left:10pt;text-align:justify;"><img alt="" height="840" src="https://images2.imgbox.com/19/30/BZat87Dx_o.png" width="1200"></p> 
<p style="margin-left:10pt;text-align:center;">图7-1 STP的配置</p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">实验步骤</li></ol> 
<ol><li style="text-align:justify;">步骤1 开启STP</li></ol> 
<p style="margin-left:10pt;text-align:justify;">配置LSW1</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">&lt;Huawei&gt;system-view </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]undo info-center enable </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]sysname LSW1</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW1]stp mode stp  // STP</span><span style="color:#000000;">的模式为STP，默认是MSTP。</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;">配置LSW2</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">&lt;Huawei&gt;system-view </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]undo info-center enable </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]sysname LSW2</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW2]stp mode stp</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">配置LSW3</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">&lt;Huawei&gt;system-view </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]undo info-center enable </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]sysname LSW3</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW3]stp mode stp</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">步骤2 查看STP</li></ol> 
<p style="margin-left:10pt;text-align:justify;">查看生成树的状态，以LSW1为例</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW1]display stp </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">-------[CIST Global Info][Mode STP]-------</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">CIST Bridge         :32768.4c1f-ccea-2663       //</span><span style="color:#000000;">自身的桥ID</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">Config Times        :Hello 2s MaxAge 20s FwDly 15s MaxHop 20</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">Active Times        :Hello 2s MaxAge 20s FwDly 15s MaxHop 20</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">CIST Root/ERPC      :32768.4c1f-cc06-69ba / 20000   //</span><span style="color:#000000;">当前的根桥ID，与根路径开销</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">CIST RegRoot/IRPC   :32768.4c1f-ccea-2663 / 0</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">CIST RootPortId     :128.1</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">BPDU-Protection     :Disabled</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">TC or TCN received  :110</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">TC count per hello  :0</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">STP Converge Mode   :Normal </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">Time since last TC  :0 days 0h:2m:41s</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">Number of TC        :12</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">Last TC occurred    :GigabitEthernet0/0/1</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">【技术要点】显示信息还包括各个接口的状态，在上述输出中已经按ctrl+c结束显示。</p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;">查看各交换机上生成树的状态信息摘要</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW1]display stp brief </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;"> MSTID  Port                        Role  STP State     Protection</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/1        ROOT  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;">  <span style="color:#FF0000;"> 0    GigabitEthernet0/0/6        ALTE  DISCARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW2]display stp brief </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;"> MSTID  Port                        Role  STP State     Protection</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/2        DESI  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/3        DESI  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW3]display stp brief </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;"> MSTID  Port                        Role  STP State     Protection</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/4        ROOT  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/5        DESI  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">综合根桥ID信息以及各个交换机上的端口信息，可得当前拓扑如下：</p> 
<p style="margin-left:10pt;text-align:justify;"><img alt="" height="808" src="https://images2.imgbox.com/9d/ec/RWW32PBk_o.png" width="1200"></p> 
<p style="margin-left:10pt;text-align:justify;">4、实验调试</p> 
<p style="margin-left:10pt;text-align:justify;">把LSW1的优先级改成0，把LSW3的优先级改成4096，看LSW2的g0/0/3口是否阻塞</p> 
<p style="margin-left:10pt;text-align:justify;">LSW1的配置</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW1]stp root primary   //</span><span style="color:#000000;">把LSW1变成主根网桥</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">相当于命令：</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW1]stp priority 0</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;">LSW3的配置</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW3]stp root secondary  //</span><span style="color:#000000;">把SW1变成备用根网桥</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">相当于命令：</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW3]stp priority 4096</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;">查看交换机LSW2上生成树的状态信息摘要</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW2]display stp brief </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;"> MSTID  Port                        Role  STP State     Protection</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/2        ROOT  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#FF0000;">   0    GigabitEthernet0/0/3        ALTE  DISCARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">综合根桥ID信息以及各个交换机上的端口信息，可得当前拓扑如下</p> 
<p style="margin-left:10pt;text-align:justify;"><img alt="" height="806" src="https://images2.imgbox.com/dd/e1/9quLFjQN_o.png" width="1200"></p> 
<h3 style="margin-left:10pt;text-align:justify;"><a name="_Toc121126926">8.3 实验二：修改STP的COST</a></h3> 
<ol><li style="text-align:justify;">实验目的</li></ol> 
<p style="margin-left:10pt;text-align:justify;">通过网桥COST来修改网桥优先级</p> 
<ol><li style="text-align:justify;">实验拓扑</li></ol> 
<p style="margin-left:10pt;text-align:justify;"><img alt="" height="1039" src="https://images2.imgbox.com/3e/f2/dxaIlHSa_o.png" width="1076"></p> 
<p style="margin-left:10pt;text-align:justify;">图7-2 修改STP的COST</p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">实验步骤</li></ol> 
<ol><li style="text-align:justify;">所有的交换机开启STP</li></ol> 
<p style="margin-left:10pt;text-align:justify;">LSW1的配置</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">&lt;Huawei&gt;system-view </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]undo info-center enable </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]sysname LSW1</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW1]stp mode stp</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW1]stp priority 0    //</span><span style="color:#000000;">让LSW1成为根桥</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">LSW2的配置</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">&lt;Huawei&gt;system-view </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]undo info-center enable </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">Info: Information center is disabled.</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]sysname LSW2</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW2]stp mode stp</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">LSW3的配置</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">&lt;Huawei&gt;system-view </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]undo info-center enable </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]sysname LSW3</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW3]stp mode stp</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">LSW4的配置</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">&lt;Huawei&gt;system-view </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]undo info-center en</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]undo info-center enable </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[Huawei]sysname LSW4</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW4]stp mode stp</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">查看交换机LSW2上生成树的状态信息摘要</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW1]display stp brief </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;"> MSTID  Port                        Role  STP State     Protection</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/1        DESI  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/8        DESI  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW2]display stp brief </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;"> MSTID  Port                        Role  STP State     Protection</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/2        ROOT  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/3        DESI  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW3]display stp brief </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;"> MSTID  Port                        Role  STP State     Protection</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/6        DESI  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/7        ROOT  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW4]display stp brief </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;"> MSTID  Port                        Role  STP State     Protection</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/4        ROOT  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/5        ALTE  DISCARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<p style="margin-left:10pt;text-align:justify;">综合根桥ID信息以及各个交换机上的端口信息，可得当前拓扑如下</p> 
<p style="margin-left:10pt;text-align:justify;"><img alt="" height="1032" src="https://images2.imgbox.com/e9/c8/ZBEa4InT_o.png" width="1117"></p> 
<p style="margin-left:10pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">实验调试</li></ol> 
<p style="margin-left:10pt;text-align:justify;">修改LSW4的g0/0/5的开销为1</p> 
<p style="margin-left:10pt;text-align:justify;">[LSW4]interface g0/0/5</p> 
<p style="margin-left:10pt;text-align:justify;">[LSW4-GigabitEthernet0/0/5]stp cost 1</p> 
<p style="margin-left:10pt;text-align:justify;">查看交换机LSW4上生成树的状态信息摘要</p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">[LSW4]display stp brief </span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;"> MSTID  Port                        Role  STP State     Protection</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/4        ALTE  DISCARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;"><span style="background-color:#808080;"><span style="color:#000000;">   0    GigabitEthernet0/0/5        ROOT  FORWARDING      NONE</span></span></p> 
<p style="margin-left:10pt;text-align:justify;">发现G0/0/4的接口阻塞掉了</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ef1d89bc845bbbb9ffcf7c32cbd75b82/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android密码输入框内容的显示或隐藏</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3a882124a03d26e16ef7d87eb015f6f6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于Position:fixed固定定位后遇到问题解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>