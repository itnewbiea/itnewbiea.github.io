<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenPCDet环境配置&amp;&amp;HVPR代码复现 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenPCDet环境配置&amp;&amp;HVPR代码复现" />
<meta property="og:description" content="环境 **
显卡 3090
nvidia-smi 11.4
Ubuntu 18.04
CUDA 11.3
python 3.8
pytorch 1.7.0
cmake 3.25.0
gcc 7.5.0
spconv 2.1.25
1 HVPR环境配置 1.1 克隆仓库 进入存放HVPR的上级目录，使用如下命令
$ git clone https://github.com/cvlab-yonsei/HVPR.git $ cd HVPR 1.2 创建虚拟环境 $ conda create -n hvpr python=3.8 -y 1.3 安装pytorch 根据参考博客中的PyTorch、torchvision和python对应关系以及PyTorch和CUDA关系组合选择合适的PyTorch版本
#更新pip $ python -m pip install --upgrade pip #使用pip 安装pytorch1.8.0,建议用pip，conda容易失败 # CUDA 11.0 $ conda install pytorch==1.7.0 torchvision==0.8.0 torchaudio==0.7.0 cudatoolkit=11.0 -c pytorch 测试pytorch是否安装成功
$ python &gt;&gt;&gt; import torch &gt;&gt;&gt; torch." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/7a9e6d5f5c312b59c922f8c8048eb856/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-17T15:39:50+08:00" />
<meta property="article:modified_time" content="2022-11-17T15:39:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenPCDet环境配置&amp;&amp;HVPR代码复现</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>环境</h2> 
<p>**<br> 显卡 3090<br> nvidia-smi 11.4<br> Ubuntu 18.04<br> CUDA 11.3<br> python 3.8<br> pytorch 1.7.0<br> cmake 3.25.0<br> gcc 7.5.0<br> spconv 2.1.25</p> 
<h2><a id="1_HVPR_11"></a>1 HVPR环境配置</h2> 
<h3><a id="11__12"></a>1.1 克隆仓库</h3> 
<p>进入存放HVPR的上级目录，使用如下命令</p> 
<pre><code class="prism language-powershell">$ git clone https:<span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com/cvlab-yonsei/HVPR<span class="token punctuation">.</span>git
$ cd HVPR
</code></pre> 
<h3><a id="12__18"></a>1.2 创建虚拟环境</h3> 
<pre><code class="prism language-powershell">$ conda create <span class="token operator">-</span>n hvpr python=3<span class="token punctuation">.</span>8 <span class="token operator">-</span>y
</code></pre> 
<hr> 
<h3><a id="13_pytorch_23"></a>1.3 安装pytorch</h3> 
<p>根据参考博客中的<a href="https://blog.csdn.net/weixin_44112313/article/details/124442104?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165400145716780366596701%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=165400145716780366596701&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-124442104-null-null.142%5Ev11%5Epc_search_result_control_group,157%5Ev12%5Econtrol&amp;utm_term=Pytoch%E5%92%8Ctorchvision&amp;spm=1018.2226.3001.4187">PyTorch、torchvision和python对应关系</a>以及<a href="https://mmcv.readthedocs.io/zh_CN/latest/get_started/installation.html" rel="nofollow">PyTorch和CUDA关系组合</a>选择合适的<a href="https://pytorch.org/" rel="nofollow">PyTorch版本</a></p> 
<pre><code class="prism language-powershell"><span class="token comment">#更新pip</span>
$ python <span class="token operator">-</span>m pip install <span class="token operator">--</span>upgrade pip
<span class="token comment">#使用pip 安装pytorch1.8.0,建议用pip，conda容易失败</span>
<span class="token comment"># CUDA 11.0</span>
$ conda install pytorch==1<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0 torchvision==0<span class="token punctuation">.</span>8<span class="token punctuation">.</span>0 torchaudio==0<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0 cudatoolkit=11<span class="token punctuation">.</span>0 <span class="token operator">-</span>c pytorch
</code></pre> 
<hr> 
<p><strong>测试pytorch是否安装成功</strong></p> 
<pre><code class="prism language-bash">$ python
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> torch
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> torch.cuda.is_available<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># True</span>
</code></pre> 
<hr> 
<h3><a id="14__43"></a>1.4 安装依赖包</h3> 
<p>先把requirments.txt里的torch&gt;=1.1删掉</p> 
<pre><code class="prism language-powershell">$ cd HVPR
$ pip install <span class="token operator">-</span>r requirements<span class="token punctuation">.</span>txt
</code></pre> 
<h3><a id="15_spconv_2125_49"></a>1.5 安装spconv 2.1.25</h3> 
<pre><code class="prism language-bash"><span class="token comment">#cuda11.3</span>
$ pip <span class="token function">install</span> spconv-cu113<span class="token operator">==</span><span class="token number">2.1</span>.25

<span class="token comment">#验证</span>
$ python
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> spconv.pytorch
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> spconv
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre> 
<p>版本安装参考链接<br> <a href="https://github.com/traveller59/spconv">https://github.com/traveller59/spconv</a></p> 
<h3><a id="16__63"></a>1.6 代码修改</h3> 
<p>因为HVPR的setup.py代码中说明使用的OpenPCDet版本为v0.3.0。<br> 但OpenPCDetv0.5.0才开始支持spconv 2x。<br> 修改HVPR中的OpenPCDet相关代码以适应spconv 2x。<br> 参考修改对应部分：https://github.com/open-mmlab/OpenPCDet/commit/70857b83ca8689732af9c1e1efc84c99041ac467</p> 
<h3><a id="17_ops_68"></a>1.7 添加ops</h3> 
<p>由于下一步安装openpcdet时，会报缺少ops下的一些东西，这里将刚刚参考openpcdet版本下的ops复制到HVPR/pcdet中。<br> <img src="https://images2.imgbox.com/2f/43/eA5pwx6j_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="18_pcdet_71"></a>1.8 安装pcdet</h3> 
<pre><code class="prism language-powershell">$ cd HVPR
$ python setup<span class="token punctuation">.</span>py develop
</code></pre> 
<pre><code class="prism language-bash">$ python
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> pcdet
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/91/b5/QP63WvTQ_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2__84"></a>2 数据集整理</h2> 
<h2><a id="_85"></a>参考</h2> 
<p>[1] <a href="https://blog.csdn.net/weixin_44112313/article/details/124442104?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165400145716780366596701%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=165400145716780366596701&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-124442104-null-null.142%5Ev11%5Epc_search_result_control_group,157%5Ev12%5Econtrol&amp;utm_term=Pytoch%E5%92%8Ctorchvision&amp;spm=1018.2226.3001.4187">PyTorch、torchvision和python对应关系</a><br> [2] <a href="https://mmcv.readthedocs.io/zh_CN/latest/get_started/installation.html" rel="nofollow">PyTorch和CUDA关系组合</a><br> [3] <a href="https://pytorch.org/" rel="nofollow">PyTorch版本</a><br> [4] <a href="https://blog.csdn.net/qq_45228845/article/details/125583891?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166701493416800186542018%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=166701493416800186542018&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~hot_rank-1-125583891-null-null.nonecase&amp;utm_term=openpcdet%E5%AE%89%E8%A3%85&amp;spm=1018.2226.3001.4450">Openpcdet 安装过程</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fd96ec677dee2c9fe1f6312f656e0547/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">环形进度条</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e9ca465113694ecb65452ec3aa4c89f7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言的简单运用——扫雷(基础篇)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>