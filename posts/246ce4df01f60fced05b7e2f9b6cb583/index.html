<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3 组件之间传值 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue3 组件之间传值" />
<meta property="og:description" content="vue3 组件之间传值 非常好，为啥突然开这样一篇博文，首先是因为 vue3 是未来发展的趋势。其次，vue 官方已经确认，将于2023年最后一天停止对 vue2 项目的维护，这个是官方发出的通知，并且呢，尤雨溪团队也已经将 vue3 作为了 vue 的默认版本了，同时呢，无论是 elementUI 和 ant-d 组件库团队，也已经很早之前就发布了针对于 vue3 的组件库。接下来，我们要真正的开始内卷 vue3 了家人们！
前言 vue2.7 是现在，也是最后一个 vue2 版本的更新，官方已经发布通告，vue2 版本将于 2023年12月31日 停止维护，但是停止维护不代表不能使用哈，我们可以继续使用 vue2 版本开发我们的项目，只不过，官方团队已经不会在对 vue2 版本进行更新，这个更新包括了安全性和兼容性的更新修复问题。如果我们继续使用 vue2 版本开发项目的话，我们可能就需要面对一个问题，就是如何向用户解释：你买了我们的电脑，但我们给你配的是 window xp 系统。
使用过 vue2 的兄弟们，在开发项目里面最常用的东西是啥子嘞？首先组件通信排第一吧！牛的嘞，这一节，就说一下 vue3 的组件通信方式哈。
好的，首先要注意一点，学习这一部分的话需要用到一些其他的知识点：第一个是 vue3 的基础语法，可以看我之前的博文；再一个就是 TypeScript，当然也可以看我之前的博文。都没有问题了，下面的东西就很简单了。
props 传值 在 vue2 里面可以使用 props 传值，在 vue3 里面依旧可以使用，但是改了个名字，叫 defineProps 获取父组件传递的数据，且在组件内部不需要引入 defineProps 方法就可以直接使用。
下面案例稍微讲一下哈，首先我们创建一个 vue3 的项目，我们编写两个组件：
编写父组件 首先编写一个父组件
&lt;!-- 模板语法 --&gt; &lt;template&gt; &lt;p class=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/246ce4df01f60fced05b7e2f9b6cb583/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T09:41:28+08:00" />
<meta property="article:modified_time" content="2024-01-03T09:41:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3 组件之间传值</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="vue3__0"></a>vue3 组件之间传值</h2> 
<blockquote> 
 <p>非常好，为啥突然开这样一篇博文，首先是因为 vue3 是未来发展的趋势。其次，vue 官方已经确认，将于2023年最后一天停止对 vue2 项目的维护，这个是官方发出的通知，并且呢，尤雨溪团队也已经将 vue3 作为了 vue 的默认版本了，同时呢，无论是 elementUI 和 ant-d 组件库团队，也已经很早之前就发布了针对于 vue3 的组件库。接下来，我们要真正的开始内卷 vue3 了家人们！</p> 
</blockquote> 
<h3><a id="_4"></a>前言</h3> 
<p>vue2.7 是现在，也是最后一个 vue2 版本的更新，官方已经发布通告，vue2 版本将于 2023年12月31日 停止维护，但是停止维护不代表不能使用哈，我们可以继续使用 vue2 版本开发我们的项目，只不过，官方团队已经不会在对 vue2 版本进行更新，这个更新包括了安全性和兼容性的更新修复问题。如果我们继续使用 vue2 版本开发项目的话，我们可能就需要面对一个问题，就是如何向用户解释：你买了我们的电脑，但我们给你配的是 window xp 系统。</p> 
<p><img src="https://images2.imgbox.com/18/8b/e9930OIu_o.png" alt="在这里插入图片描述"></p> 
<p>使用过 vue2 的兄弟们，在开发项目里面最常用的东西是啥子嘞？首先组件通信排第一吧！牛的嘞，这一节，就说一下 vue3 的组件通信方式哈。</p> 
<p>好的，首先要注意一点，学习这一部分的话需要用到一些其他的知识点：第一个是 vue3 的基础语法，可以看我之前的博文；再一个就是 TypeScript，当然也可以看我之前的博文。都没有问题了，下面的东西就很简单了。</p> 
<h3><a id="props__15"></a>props 传值</h3> 
<p>在 vue2 里面可以使用 <code>props</code> 传值，在 vue3 里面依旧可以使用，但是改了个名字，叫 <code>defineProps</code> 获取父组件传递的数据，且在组件内部不需要引入 <code>defineProps</code> 方法就可以直接使用。</p> 
<p>下面案例稍微讲一下哈，首先我们创建一个 vue3 的项目，我们编写两个组件：</p> 
<h4><a id="_20"></a>编写父组件</h4> 
<p>首先编写一个父组件</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 模板语法 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-father-title"</span><span class="token operator">&gt;</span>父组件<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-father-con"</span><span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>ed<span class="token operator">-</span>father<span class="token operator">-</span>title <span class="token punctuation">{<!-- --></span>
  margin<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
  font<span class="token operator">-</span>size<span class="token operator">:</span> 25px<span class="token punctuation">;</span>
  color<span class="token operator">:</span> hotpink<span class="token punctuation">;</span>
  font<span class="token operator">-</span>weight<span class="token operator">:</span> <span class="token number">550</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>ed<span class="token operator">-</span>father<span class="token operator">-</span>con <span class="token punctuation">{<!-- --></span>
  height<span class="token operator">:</span> 400px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> beige<span class="token punctuation">;</span>
  padding<span class="token operator">:</span> 15px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<p>执行效果就是下面的样子：</p> 
<p><img src="https://images2.imgbox.com/2a/49/3ilIOry1_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_57"></a>编写子组件</h4> 
<p>接下来继续开发一个组件作为子组件：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-son-title"</span><span class="token operator">&gt;</span>子组件<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-son-con"</span><span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>ed<span class="token operator">-</span>son<span class="token operator">-</span>title <span class="token punctuation">{<!-- --></span>
  margin<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
  font<span class="token operator">-</span>size<span class="token operator">:</span> 20px<span class="token punctuation">;</span>
  color<span class="token operator">:</span> red<span class="token punctuation">;</span>
  font<span class="token operator">-</span>weight<span class="token operator">:</span> <span class="token number">550</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>ed<span class="token operator">-</span>son<span class="token operator">-</span>con <span class="token punctuation">{<!-- --></span>
  height<span class="token operator">:</span> 300px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> cadetblue<span class="token punctuation">;</span>
  padding<span class="token operator">:</span> 15px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<p>编写完成之后呢，我们在父组件里面引入这个子组件。</p> 
<h4><a id="_92"></a>父组件引入子组件</h4> 
<p>引入子组件呢，就需要两个步骤就可以了，首先引入子组件文件，然后在 dom 上使用子组件就可以了。</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 模板语法 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-father-title"</span><span class="token operator">&gt;</span>父组件<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-father-con"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 使用子组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>sonModel<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>
<span class="token comment">// 引入子组件</span>
<span class="token keyword">import</span> sonModel <span class="token keyword">from</span> <span class="token string">'./sonModel.vue'</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>ed<span class="token operator">-</span>father<span class="token operator">-</span>title <span class="token punctuation">{<!-- --></span>
  margin<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
  font<span class="token operator">-</span>size<span class="token operator">:</span> 25px<span class="token punctuation">;</span>
  color<span class="token operator">:</span> hotpink<span class="token punctuation">;</span>
  font<span class="token operator">-</span>weight<span class="token operator">:</span> <span class="token number">550</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>ed<span class="token operator">-</span>father<span class="token operator">-</span>con <span class="token punctuation">{<!-- --></span>
  height<span class="token operator">:</span> 400px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> beige<span class="token punctuation">;</span>
  padding<span class="token operator">:</span> 15px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> 
<p>然后我们看一下效果：</p> 
<p><img src="https://images2.imgbox.com/41/cf/q8I1RC2Y_o.png" alt="在这里插入图片描述"></p> 
<p>非常棒，效果已经引入进来了。</p> 
<h4><a id="_136"></a>父组件向子组件传递参数</h4> 
<p>首先我们在父组件创建一个变量，然后把这个变量传递给子组件，让子组件接收这个变量。</p> 
<p><strong>父组件创建变量</strong></p> 
<p>父组件创建一个 num，设置他的值为 10：</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 创建变量</span>
<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>父组件把值传递给子组件</strong></p> 
<p>然后呢，我们把这个变量传递给子组件，和 vue2 的方式是一样的：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 使用子组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>sonModel <span class="token operator">:</span>num<span class="token operator">=</span><span class="token string">"num"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
</code></pre> 
<p>这样我们就把父组件的变量传递给子组件了，这里我们传递的是变量，当然我们也可以直接写死传递一个常量进去：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 使用子组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>sonModel <span class="token operator">:</span>num<span class="token operator">=</span><span class="token string">"num"</span> msg<span class="token operator">=</span><span class="token string">"我是ed."</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
</code></pre> 
<p>好，到这里应该都明白就不再赘述了。</p> 
<p>接下来就是子组件通过 <code>defineProps</code> 方法获取父组件传递进来的数据，同样也是很简单，注意一点，<code>defineProps</code> 方法是不需要引入的，直接使用即可。</p> 
<p><strong>子组件接收数据：方式一</strong></p> 
<pre><code class="prism language-typescript"><span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  num<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    type<span class="token operator">:</span> Number<span class="token punctuation">,</span>  <span class="token comment">// 接收数据的类型</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">0</span>   <span class="token comment">// 默认值</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  msg<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    type<span class="token operator">:</span> String<span class="token punctuation">,</span>  <span class="token comment">// 接收数据的类型</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'hello'</span>   <span class="token comment">// 默认值</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>OK，结束了。我们看一下：</p> 
<p><img src="https://images2.imgbox.com/7f/93/YyiXJ1fP_o.png" alt="在这里插入图片描述"></p> 
<p>没问题，子组件已经有这两个数据了，我们可以直接在页面上显示一下子：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-son-title"</span><span class="token operator">&gt;</span>子组件<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-son-con"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-txt"</span><span class="token operator">&gt;</span>父组件传递的num：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> num <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ed-txt"</span><span class="token operator">&gt;</span>父组件传递的msg：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> msg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<p>看一下效果：</p> 
<p><img src="https://images2.imgbox.com/c0/6f/AJejyxM7_o.png" alt="在这里插入图片描述"></p> 
<p>没问题，可以正常使用！这是子组件接受参数的第一种方式。</p> 
<p><strong>子组件接收数据：方式二</strong></p> 
<p>第二种方式和第一种一样，只不过不需要那么繁琐的配置，简单配置也是可以的了。</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 子组件接收父组件传参方式二</span>
<span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'num'</span><span class="token punctuation">,</span> <span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>这样是也是可以的，效果是一模一样的，只不过取消了对数据类型的限制，和 vue2 其实是一样的哈！</p> 
<p><img src="https://images2.imgbox.com/64/8f/NWUYikVW_o.png" alt="在这里插入图片描述"></p> 
<p>页面效果也是一样的。</p> 
<h3><a id="_219"></a>自定义事件</h3> 
<p>首先呢，自定义事件也是可以进行组件间传值的，先说一下哈，在 vue 里面嘞，有两种事件，一种是<code>原生DOM事件</code>，一种是<code>自定义事件</code>。</p> 
<h4><a id="_223"></a>原生事件</h4> 
<p>原生事件都知道的，像是 click、dbclick、change、mouseenter 这些都是原生事件。</p> 
<p>比如下面的代码：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>divClickFun<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>给 div 标签绑定了一个原生事件 <code>click</code>，他默认会给事件回调注入 <code>enent</code> 事件对象，当然点击事件想注入多个参数也是可以的，但是切记，注入的事件对象必须叫做 <code>$event</code> ：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>divClickFun(10,'我是ed.', $event)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>点击<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>我们看一下打印的结果：</p> 
<p><img src="https://images2.imgbox.com/3d/06/gmgwHLBW_o.png" alt="在这里插入图片描述"></p> 
<p>如果我们传递的不是以 <code>$event</code> 命名的话，我们看一下：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>divClickFun(10,'我是ed.', event)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>点击<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>看一下打印的数据：</p> 
<p><img src="https://images2.imgbox.com/38/84/DG0HzrYq_o.png" alt="在这里插入图片描述"></p> 
<p>就是 undefined 了，所以注意：<code>注入的事件对象务必叫做 $event。</code></p> 
<p>在 vue3 框架里面呢，click、dbclick、change 这类原生DOM事件，无论是在标签还是组件上面都算是原生DOM事件；但是在 vue2 中不是这样的，在 vue2 中组件标签上面，需要通过 <code>native</code> 修饰符才能变成原生DOM事件，这个知道就可以哈！</p> 
<h4><a id="_256"></a>自定义事件</h4> 
<p>自定义事件，可以实现子组件给父组件传递数据，在项目中是非常非常重要的，也是经常使用到的。</p> 
<p>比如最开始的案例，我们在父组件引入的子组件标签上追加一个自定义事件：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>sonModel <span class="token decorator"><span class="token at operator">@</span><span class="token function">getData</span></span><span class="token operator">=</span><span class="token string">"getDataFun"</span> <span class="token operator">:</span>num<span class="token operator">=</span><span class="token string">"num"</span> msg<span class="token operator">=</span><span class="token string">"我是ed."</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
</code></pre> 
<p>上面这个代码写 vue2 的应该都知道哈，就不赘述了，就是自己写一个自定义事件 <code>getData</code> ，触发之后调用 <code>getDataFun</code> 方法。</p> 
<p>那么怎么触发这个自定义事件 <code>getData</code> 呢？</p> 
<p>我们需要在子组件内部触发，比如说我们在子组件内部编写一个按钮，点击按钮的时候，触发这个自定义事件，并且传值。</p> 
<p><strong>子组件内部编写按钮</strong></p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">"toFatherData()"</span><span class="token operator">&gt;</span>向父组件传递数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> 
<p>编写一个按钮，有一个点击事件，点击执行 <code>toFatherData()</code> 方法。</p> 
<p><strong>使用 defineEmits 方法</strong></p> 
<p>接下来我们需要了解一个新的方法，叫做 <code>defineEmits</code> ，这是 vue3 提供的一个方法，不需要引入，直接使用即可。这个方法需要传递一个数组进去，数组的元素就是将来数组需要触发的自定义事件类型，这个方法会返回一个 <code>$emit</code> 方法来触发自定义事件。</p> 
<p>说的比较多，看下面的代码就可以了：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">let</span> $emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"getData"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>因为子组件想出发父组件的 <code>getData</code> 传递参数，所以传递列表的数组元素就得包含这个将来可能会触发的自定义事件方法。</p> 
<p><strong>触发自定义方法</strong></p> 
<p>上面我们已经编写了一个按钮，按钮带有点击事件，$emit 也已经有了，接下来就是触发父组件的自定义事件了，接下来我们完善按钮的点击事件：</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 按钮点击事件</span>
<span class="token keyword">let</span> <span class="token function-variable function">toFatherData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"getData"</span><span class="token punctuation">,</span> <span class="token string">"我是子组件传递的数据"</span><span class="token punctuation">,</span> <span class="token string">"大家好，我是ed."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>当我们点击按钮的时候，事件回调内部调用 <code>$emit</code> 方法去触发自定义事件，第一个参数为触发事件类型，第二个、三个、N个参数即为传递给父组件的数据。</p> 
<p><strong>父组件打印子组件传递的数据</strong></p> 
<p>上面一个步骤呢，子组件成功触发了父组件的自定义事件，然后父组件自定义事件触发之后，他会走一个函数，我们在这个函数里面就可以获取到子组件传递回来的数据，我们打印一下：</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 父组件接收打印子组件传递回来的数据</span>
<span class="token keyword">const</span> <span class="token function-variable function">getDataFun</span> <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data2<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们看一下打印的结果：</p> 
<p><img src="https://images2.imgbox.com/9c/88/3XS7udwu_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到，当子组件的按钮被点击，父组件可以正常打印出子组件传递回来的数据了。</p> 
<p><strong>注意事项</strong></p> 
<p>但是注意一点哈，跟上面案例没关系了，看下面的代码：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>sonModel <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">"clickFun"</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">getData</span></span><span class="token operator">=</span><span class="token string">"getDataFun"</span> <span class="token operator">:</span>num<span class="token operator">=</span><span class="token string">"num"</span> msg<span class="token operator">=</span><span class="token string">"我是ed."</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
</code></pre> 
<p><code>getData</code> 方法是一个自定义事件对吧，<code>click</code> 方法是一个原生事件，但是，如果我们在子组件的 <code>defineEmits</code> 中定义了 <code>click</code> ，那么，<code>click</code> 就被定义成为自定义事件了：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">let</span> $emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"getData"</span><span class="token punctuation">,</span> <span class="token string">"click"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>好的，到这里 自定义事件 传递数据就结束了。</p> 
<h3><a id="_335"></a>全局事件总线传值</h3> 
<p>上面我们说了使用 <code>props</code> 与 <code>emit</code> 实现父子组件之间的传值，那就有一个问题，如果是兄弟组件之间通信呢？当然了，使用 props 链也是可以的：<code>子组件1把数据传递到父组件，父组件在把数据传递给子组件2。</code>这是完全没有问题的，除了复杂一些。</p> 
<p>其实还有一种方式能够更快的实现兄弟组件之间传值，那就是<code>全局事件总线</code>，全局事件总线可以实现任意组件间的通信。</p> 
<p>在 vue2 里面，可以根据 VM 和 VC 关系推理出全局事件总线，但是 vue3 里面没有 vue 构造函数，也就没有 <code>Vue.prototype.</code> 以及组合式API没有 <code>this</code> ，那在 vue3 里面想要实现全局事件总线功能就有些许的不现实，其实，在 vue3 中如果想使用全局事件总线可以采用 <code>mitt</code> 插件。</p> 
<h4><a id="mitt_343"></a>mitt</h4> 
<p>mitt npm 地址：<a href="https://www.npmjs.com/package/mitt" rel="nofollow">https://www.npmjs.com/package/mitt</a></p> 
<p>这里呢，就单纯的说一下怎么简单的使用哈，详细的大家去上面的网站看哈。</p> 
<p>Mitt 有啥优点呢，稍微说一下，就一下：</p> 
<ul><li>零依赖，体积小，压缩后就200b。</li><li>提供了完整的 TypeScript 的支持，能自动推断参数类型。</li><li>基于闭包实现，没有 this 困扰。</li><li>为浏览器编写，但也支持其他 JavaScript 。</li><li>与框架无关，可以与任何框架搭配使用。</li></ul> 
<h4><a id="mitt__356"></a>mitt 安装</h4> 
<p>安装其实也比较简单，直接一行命令就可以安装完成：</p> 
<pre><code class="prism language-typescript">npm i mitt
</code></pre> 
<p>等待命令执行完成就可以了。</p> 
<h4><a id="_mitt_365"></a>使用 mitt</h4> 
<p>使用的话和 vue2 的 bus 差不多，我们先创建一个 <code>EventBus.ts</code> 文件。</p> 
<p><img src="https://images2.imgbox.com/20/82/v0V4k0OP_o.png" alt="在这里插入图片描述"></p> 
<p>在文件中创建事件总线对象并对外暴露，然后就可以在使用事件总线的地方导入了。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> mitt <span class="token keyword">from</span> <span class="token string">"mitt"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">mitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>很简单，就两行代码：</p> 
<p><img src="https://images2.imgbox.com/a3/8e/nO18dG2K_o.png" alt="在这里插入图片描述"></p> 
<p>接下来就是在需要的组件中使用了。</p> 
<p>使用的方式比较简单，还是上面案例，我们子组件直接通过 <code>mitt</code> 给父组件通信，不用 <code>emit</code> 了。</p> 
<h4><a id="_384"></a>子组件发送数据</h4> 
<p>首先在子组件内部，引入我们上面创建的文件：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> EventBus <span class="token keyword">from</span> <span class="token string">'../utils/EventBus'</span><span class="token punctuation">;</span>
</code></pre> 
<p>然后我们重写按钮点击事件，通过 mitt 给父组件传值：</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 按钮点击事件</span>
<span class="token keyword">let</span> <span class="token function-variable function">toFatherData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// $emit("getData", "我是子组件传递的数据", "大家好，我是ed.");</span>
  EventBus<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'sendData'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>name<span class="token operator">:</span> <span class="token string">'我是ed.'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>看上面代码，<code>EventBus.emit( type , evt )</code> 方法呢，就是用 mitt 发送数据，这个方法有两个参数，一个是 <code>type</code>：要调用的事件类型；一个是 <code>evt</code>：可以理解为传递的参数，建议是对象。</p> 
<p>好了，这样的话，子组件就向父组件传递了数据，接下来就是父组件接受子组件传递的数据。</p> 
<h4><a id="_405"></a>父组件接收数据</h4> 
<p>同样父组件需要先引入 EventBus 这个文件，任何组件用到就需要引入。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> EventBus <span class="token keyword">from</span> <span class="token string">'../utils/EventBus'</span><span class="token punctuation">;</span>
</code></pre> 
<p>引入完成，父组件接收 mitt 传递的数据，需要使用一个方法，叫做 <code>EventBus.on( type, handler )</code>，这个方法也需要两个参数：<code>type</code> 是要调用的事件类型，比如上面子组件发送数据的时候使用的是 <code>sendData</code>，那么父组件如果想接收子组件发送的这个数据，此处也要设置为 <code>sendData</code>；第二个 <code>handler</code> 是回调函数，意思是获取到数据执行什么操作，该函数会有一个回调参数，参数就是传递的数据：</p> 
<pre><code class="prism language-typescript">EventBus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'sendData'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mitt接收到的数据：'</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>OK，上面代码就可以获取组件通过 mitt 传递的数据了，但是有一点需要注意一下，上面这段代码直接写在 <code>setup</code> 里面就行，不需要通过任何操作触发，当收到 <code>sendData</code> 类型的数据就会直接走回调。</p> 
<p><img src="https://images2.imgbox.com/64/1d/V0dVnrGM_o.png" alt="在这里插入图片描述"></p> 
<p>这是子组件给父组件通过 mitt 发送数据，我们只是举了一个例子来实现通过 mitt 通信，其实使用 mitt 按照这个步骤可以实现任何两个组件通信，比如父子组件通信，兄弟组件通信，祖孙组件通信，都可以。</p> 
<h4><a id="_425"></a>其他注意事项</h4> 
<p>上面说的只是 mitt 最基本的功能哈，更多消息的功能参考我上面给出的网站。</p> 
<p>比如说，我们再在子组件写一个按钮，也是给父组件发送数据，但是我们的类型不是 <code>sendData</code> 了，我们换成一个别的，比如 <code>sendData2</code>，我不细说了直接看代码：</p> 
<p>编写 html 代码：</p> 
<pre><code class="prism language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toFatherData2()<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>向父组件传递数据2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>编写 ts 代码：</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 按钮点击事件</span>
<span class="token keyword">let</span> <span class="token function-variable function">toFatherData2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  EventBus<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'sendData2'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> name<span class="token operator">:</span> <span class="token string">'我是ed.同学'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>然后我们也是在父组件在追加一个监听 <code>sendData2</code> 类型的 <code>mitt</code> 接受数据：</p> 
<pre><code class="prism language-typescript">EventBus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'sendData2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mitt接收到的数据2：'</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>我们看一下效果：</p> 
<p><img src="https://images2.imgbox.com/37/c9/YAMXFzpX_o.png" alt="在这里插入图片描述"></p> 
<p>点击第一个按钮，打印最开始的数据，点击第二个按钮，打印我们新写的，没有问题。</p> 
<p>所以说哈，只要我们这个 <code>type 调用的事件类型</code>匹配起来，我们可以在一个组件里面写好多个，都不影响的。</p> 
<p>发现没，我们父组件其实写了两个监听：</p> 
<p><img src="https://images2.imgbox.com/9d/9c/vaCjXQM9_o.png" alt="在这里插入图片描述"></p> 
<p>其实 mitt 有一个可以同时监听全部调用事件类型：</p> 
<pre><code class="prism language-typescript">EventBus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>type<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'* mitt接收到的数据：'</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>其实和普通监听是一样的，只不过 <code>调用事件类型的type</code> 变成了 <code>*</code> 号，代表监听全部。同时，回调函数现在回调了两个参数 <code>(type, params)</code> ，其中 type 代表<code>接受到数据的调用事件类型</code>，第二个才是<code>接受的参数</code>，我们可以看一下效果：</p> 
<p><img src="https://images2.imgbox.com/14/8f/Q9B4Nz02_o.png" alt="在这里插入图片描述"></p> 
<p>都能打印出来，很好，奈斯，我们写的单独监听的和全部监听的都不会有影响。</p> 
<p>好的，还有其他的方法其实，那些去看文档吧，一般也用不到。</p> 
<p>好了， mitt 先说这些吧，什么全局挂载全局使用这些，就先不说了， 需要的时候在自行百度吧。</p> 
<h3><a id="vmodel_484"></a>v-model</h3> 
<p>使用 <code>v-model</code> 可以实现数据双向绑定，除此之外呢，它也可以实现父子组件之间的数据同步。</p> 
<p><code>v-model</code> 实指利用 <code>props[modelValue]</code> 与自定义事件 <code>[update:modelValue]</code> 实现的。</p> 
<p>一个案例说明白哈，其实很简单，vue2 里面也有类似的实现方式，vue3 只不过是把写法变了一下，看下面代码：</p> 
<p>我先在父组件创建一个变量 <code>pageNo</code> ：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> pageNo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> 
<p>没问题哈，然后把这个变量双向绑定到子组件：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>sonModel v<span class="token operator">-</span>model<span class="token operator">:</span>pageNo<span class="token operator">=</span><span class="token string">"pageNo"</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">getData</span></span><span class="token operator">=</span><span class="token string">"getDataFun"</span> <span class="token operator">:</span>num<span class="token operator">=</span><span class="token string">"num"</span> msg<span class="token operator">=</span><span class="token string">"我是ed."</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
</code></pre> 
<p>我使用 v-model 绑定到了子组件， 主要是 <code>v-model:pageNo="pageNo"</code> 这段代码，大体意思可以理解为我把父组件的 pageNo 传递到子组件 props 中的 pageNo 里面去。</p> 
<p>那么子组件就可以接收父组件传进来的 <code>pageNo</code> 数据：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'num'</span><span class="token punctuation">,</span> <span class="token string">'msg'</span><span class="token punctuation">,</span> <span class="token string">'pageNo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>然后我们可以看一下子组件 props 里面有没有这个 <code>pageNo</code>。</p> 
<p><img src="https://images2.imgbox.com/52/a6/YfO4IuSH_o.png" alt="在这里插入图片描述"></p> 
<p>诶，子组件接受到了，我们可以直接在页面渲染一下子。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ed-txt<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>父组件传递的pageNo：{<!-- -->{ pageNo }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>我们看一下，可以正常使用：</p> 
<p><img src="https://images2.imgbox.com/f6/18/0QyPg6cp_o.png" alt="在这里插入图片描述"></p> 
<p>然后我们修改一下父组件这个数据，使用 <code>update:pageNo</code>，子组件中不能直接处理父组件传进来的数据，我们这个其实是通过emit返回给父组件让他来处理：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">"updataPageNoFun()"</span><span class="token operator">&gt;</span>更新pageNo： <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> pageNo <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> 
<p>我们在子组件编写一个按钮，按钮有点击事件，点击事件，我们和 emit 一样，触发父组件的自定义事件：</p> 
<p>首先，我们要想调用父组件的自定义事件，那么我们必须在 <code>defineEmits</code> 中先把类型添加进来吧？</p> 
<pre><code class="prism language-typescript"><span class="token keyword">let</span> $emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"getData"</span><span class="token punctuation">,</span> <span class="token string">"update:pageNo"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>我们添加了一个 <code>update:pageNo</code> 进来，这个是啥意思呢？可以简单理解，我是用<code>update:</code>前缀后，表示我们需要更新<code>pageNo</code>这个数据，因为是 v-model 绑定的数据，父组件直接获取要更新的值给我们更新了，不用在自己编写自定义事件了。</p> 
<p>其实 <code>v-model</code> 的本质是属性绑定和事件绑定的结合那语法糖包一下。</p> 
<p>然后我们完善按钮点击事件：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">updataPageNoFun</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"update:pageNo"</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>pageNo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们看一下效果：</p> 
<p><img src="https://images2.imgbox.com/40/36/JpFEr1yh_o.gif" alt="在这里插入图片描述"><br> 好的，完成了！就这么简单，当然你一个组件绑定多个 <code>v-model</code> 都是可以的，只需要传递的参数不一样就可以了。</p> 
<h3><a id="useAttrs_554"></a>useAttrs</h3> 
<p>vue3 当中，可以使用 <code>useAttrs</code> 来进行父组件向子组件传值。他可以获取组件的属性和方法，当然这包含了原生的DOM事件或者是自定义事件，这个函数类似于 vue2 里面的 <code>$attrs</code> 属性与<code>$listeners</code> 方法。</p> 
<p>下面一个案例稍微说一下哈，还是之前的案例，父组件引入子组件，上面向子组件传递了好多数据，包括自定义方法：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>sonModel v<span class="token operator">-</span>model<span class="token operator">:</span>pageNo<span class="token operator">=</span><span class="token string">"pageNo"</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">getData</span></span><span class="token operator">=</span><span class="token string">"getDataFun"</span> <span class="token operator">:</span>num<span class="token operator">=</span><span class="token string">"num"</span> msg<span class="token operator">=</span><span class="token string">"我是ed."</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
</code></pre> 
<p>然后在子组件呢，我们可以使用 <code>useAttrs</code> 来获取子组件上被添加的这些数据和方法，我们先编写一个按钮，点击按钮，打印通过 <code>useAttr</code> 拿到的数据：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">"getDataByUseAttrs()"</span><span class="token operator">&gt;</span>通过useAttrs获取数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> 
<p>接下来，我们要引入一下 <code>useAttrs</code> ：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useAttrs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
</code></pre> 
<p>然后初始化一下：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> $attrs <span class="token operator">=</span> <span class="token function">useAttrs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>然后我们通过点击按钮，打印一下 <code>$attrs</code> 里面的数据：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">getDataByUseAttrs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$attrs<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们看一下效果：</p> 
<p><img src="https://images2.imgbox.com/fa/9f/jEGbv7jD_o.png" alt="在这里插入图片描述"></p> 
<p>我去，什么也没有打印出来啊！</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>sonModel v<span class="token operator">-</span>model<span class="token operator">:</span>pageNo<span class="token operator">=</span><span class="token string">"pageNo"</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">getData</span></span><span class="token operator">=</span><span class="token string">"getDataFun"</span> <span class="token operator">:</span>num<span class="token operator">=</span><span class="token string">"num"</span> msg<span class="token operator">=</span><span class="token string">"我是ed."</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
</code></pre> 
<p>我们不是往子组件绑定了<code>pageNo</code>、<code>num</code>、<code>msg</code> 这些数据了吗？怎么都没有？</p> 
<p>OK， 需要注意如果<code>defineProps</code>接受了某一个属性，<code>useAttrs</code>方法返回的对象身上就没有相应属性与属性值。 因为这些传进来的数据都被 <code>defineProps</code> 接收了，所以这里 <code>$attrs</code> 已经没有了。<code>defineProps</code> 的优先级高于 <code>$attrs</code> 。</p> 
<p>那我们在子组件在传几个数据：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>sonModel ed<span class="token operator">=</span><span class="token string">"我是ed.同学"</span> v<span class="token operator">-</span>model<span class="token operator">:</span>pageNo<span class="token operator">=</span><span class="token string">"pageNo"</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">getData</span></span><span class="token operator">=</span><span class="token string">"getDataFun"</span> <span class="token operator">:</span>num<span class="token operator">=</span><span class="token string">"num"</span> msg<span class="token operator">=</span><span class="token string">"我是ed."</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
</code></pre> 
<p>然后我们在打印一下：</p> 
<p><img src="https://images2.imgbox.com/12/85/bfApy5Ll_o.png" alt="在这里插入图片描述"></p> 
<p>诶，现在就打印出来了。我们可以使用 <code>console.log($attrs.ed)</code> 直接打印出数据值。</p> 
<p>同样，如果挂载了方法的话，也是可以获取到的：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>sonModel <span class="token decorator"><span class="token at operator">@</span><span class="token function">change</span></span><span class="token operator">=</span><span class="token string">"sonChangeFun()"</span> ed<span class="token operator">=</span><span class="token string">"我是ed.同学"</span> v<span class="token operator">-</span>model<span class="token operator">:</span>pageNo<span class="token operator">=</span><span class="token string">"pageNo"</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">getData</span></span><span class="token operator">=</span><span class="token string">"getDataFun"</span> <span class="token operator">:</span>num<span class="token operator">=</span><span class="token string">"num"</span> msg<span class="token operator">=</span><span class="token string">"我是ed."</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>sonModel<span class="token operator">&gt;</span>
</code></pre> 
<p>看一下结果：</p> 
<p><img src="https://images2.imgbox.com/c9/20/5mdF6UPZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="ref__parent_621"></a>ref 与 $parent</h3> 
<h4><a id="ref_623"></a>ref</h4> 
<p>提到 <code>ref</code> 可能会想到它可以获取元素的DOM或者获取子组件实例的VC。既然可以在父组件内部通过<code>ref</code>获取子组件实例VC，那么子组件内部的方法与响应式数据父组件可以使用的。</p> 
<p>这个就比较简单了，一个案例结束。</p> 
<p>我先把之前案例代码全删掉，从新写哈。</p> 
<p>还是父组件调用子组件，然后呢，我在子组件创建几个变量，几个方法。</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'我是ed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"我是子组件的方法"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>很简单，我想让父组件能够直接访问子组件的数据和方法，光通过上面的代码不行！</p> 
<p>如果让父组件获取子组件的数据或者方法需要通过 <code>defineExpose</code> 对外暴露,因为 vue3 中组件内部的数据对外【关闭的】，外部不能访问。</p> 
<p>所以使用 <code>defineExpose</code> 暴露一下：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'我是ed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"我是子组件的方法"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> name<span class="token punctuation">,</span> changeName <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>我就暴露了两个哈，age 没有暴露，然后我们在父组件写一个按钮，调用一下看能不能获取到 <code>name</code> 和 <code>changeName</code> 方法。</p> 
<p>首先在父组件，我们先要获取到子组件：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sonModel</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sonFrom<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sonModel</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> sonFrom <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>然后在父组件写一个按钮，点击按钮的时候，我们打印一下子组件的 <code>name</code> 数据：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>conData()<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>打印子组件数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>然后编写点击事件，打印一下子组件的 <code>name</code> ：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">conData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sonFrom<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们看一下效果：</p> 
<p><img src="https://images2.imgbox.com/d2/ee/aN7XuIRb_o.png" alt="在这里插入图片描述"></p> 
<p>获取成功 ！</p> 
<p>调用一下子组件的方法：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">conData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sonFrom<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  sonFrom<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>看一下结果：</p> 
<p><img src="https://images2.imgbox.com/30/cd/o7wmdroZ_o.png" alt="在这里插入图片描述"></p> 
<p>方法也调用打印出来了。</p> 
<p><code>age</code> 没有在子组件用 <code>defineExpose</code> 抛出来，可以获取到吗？试一下哈：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">conData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sonFrom<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  sonFrom<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sonFrom<span class="token punctuation">.</span>value<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>看一下结果：</p> 
<p><img src="https://images2.imgbox.com/13/27/080NKltx_o.png" alt="在这里插入图片描述"></p> 
<p>好了，关于 <code>ref</code> 就到这里了。</p> 
<h4><a id="parent_731"></a>$parent</h4> 
<p><code>$parent</code> 可以获取某一个组件的父组件实例VC，因此可以使用父组件内部的数据与方法。必须子组件内部拥有一个按钮点击时候获取父组件实例，当然父组件的数据与方法需要通过<code>defineExpose</code>方法对外暴露。</p> 
<p>哎哟，他和 <code>ref</code> 差不多，我不想写了，到这里这篇博文已经写了一万三的字了，好累啊！</p> 
<p>不解释了，直接贴代码了哈，和 <code>ref</code> 一样的。</p> 
<p>父组件定义一个变量：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>

<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> msg <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>主要是子组件，写一个按钮，点击按钮的时候打印父组件的数据：</p> 
<pre><code class="prism language-typescript"><span class="token operator">&lt;</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">"getMsg($parent)"</span><span class="token operator">&gt;</span>获取父组件的 msg 数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> 
<p>然后编写点击事件：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">getMsg</span> <span class="token operator">=</span> <span class="token punctuation">(</span>$parent<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$parent<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>查看一下效果：</p> 
<p><img src="https://images2.imgbox.com/ed/a7/8n1XGG36_o.png" alt="在这里插入图片描述"></p> 
<p>成功！好了，到这结束了这一小节，抓紧下一个。</p> 
<h3><a id="provide__inject_767"></a>provide 与 inject</h3> 
<p>vue3提供两个方法<code>provide</code>与<code>inject</code>，可以实现隔辈组件传递参数。</p> 
<p>这两个其实在 vue2 就是可以使用的，简单点一笔带过哈！</p> 
<p><code>provide</code>方法用于提供数据，此方法执需要传递两个参数,分别提供数据的<code>key</code>与提供数据<code>value</code>。</p> 
<p>比如父组件向下级组件传递数据：</p> 
<p>需要先引入<code>provide</code>。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> provide<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
</code></pre> 
<p>然后传递数据：</p> 
<pre><code class="prism language-typescript"><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'play'</span><span class="token punctuation">,</span> <span class="token string">"我喜欢打篮球"</span><span class="token punctuation">)</span>
</code></pre> 
<p>完成！</p> 
<p>然后是在下级组件接收上级组件传递的数据：</p> 
<p>同样也是先引入 <code>inject</code>：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> inject<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
</code></pre> 
<p>然后接收数据：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">let</span> play <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">"play"</span><span class="token punctuation">)</span>
</code></pre> 
<p>我们看一下有没有：</p> 
<p><img src="https://images2.imgbox.com/5f/b4/eIm8UkIY_o.png" alt="在这里插入图片描述"></p> 
<p>哇。没问题，OK，结束了这小节，就这样用。</p> 
<h3><a id="pinia_810"></a>pinia</h3> 
<p>这个是集中式管理状态容器，类似于<code>vuex</code>。但是核心概念没有<code>mutation</code>、<code>modules</code>，使用方式参照官网，这里就不说了，之前博客提过这个小菠萝。</p> 
<blockquote> 
 <p>这是我之前写的博文，介绍小菠萝的： <a href="https://wjw1014.blog.csdn.net/article/details/126008933" rel="nofollow">https://wjw1014.blog.csdn.net/article/details/126008933</a><br> 这是小菠萝官网：<a href="https://pinia.vuejs.org/zh/" rel="nofollow">https://pinia.vuejs.org/zh/</a></p> 
</blockquote> 
<h3><a id="_817"></a>插槽</h3> 
<p>这玩意儿不想写了，尽管可以传值，但是和我想象的传值不是一个意思，有时间单独开一个插槽的博文吧。</p> 
<p>好了今天先到这里吧！我要去玩元梦之星了。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/59da44d7f317b60f66c030dbc94db289/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用GO开发的IDE简介</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e839a2f023343f65c2e5c64b6c0fc238/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据仓库与联机分析处理】数据仓库</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>