<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【鼠标在不点击的情况下，直接移动到QT控件上不显示提示信息】 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【鼠标在不点击的情况下，直接移动到QT控件上不显示提示信息】" />
<meta property="og:description" content="鼠标在不点击的情况下，直接移动到QT控件上不显示提示信息 当你想用图标作为按钮时，为了让用户知道按钮的功能，这时候就会在QT控件上加上提示信息，在初始化时，使用QT自带的setToolTip方法即可：
setMouseTracking(true); setToolTips(&#34;Descriptive information&#34;); 但有时明明已经调用了setToolTips方法，鼠标移动到QT控件上仍然不会有提示信息，这时候就需要具体分析下setToolTips方法是如何实现的，官方说明如下：
This property holds the widget’s tooltip
Note that by default tooltips are only shown for widgets that are children of the active window. You can change this behavior by setting the attribute Qt::WA_AlwaysShowToolTips on the window, not on the widget with the tooltip.
If you want to control a tooltip’s behavior, you can intercept the event() function and catch the QEvent::ToolTip event (e.g., if you want to customize the area for which the tooltip should be shown)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/5b0a11457bb0d5f601c44fb1acbd3682/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-25T19:46:53+08:00" />
<meta property="article:modified_time" content="2023-10-25T19:46:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【鼠标在不点击的情况下，直接移动到QT控件上不显示提示信息】</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="QT_0"></a>鼠标在不点击的情况下，直接移动到QT控件上不显示提示信息</h2> 
<p>  当你想用图标作为按钮时，为了让用户知道按钮的功能，这时候就会在QT控件上加上提示信息，在初始化时，使用QT自带的<code>setToolTip</code>方法即可：</p> 
<pre><code class="prism language-cpp"><span class="token function">setMouseTracking</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setToolTips</span><span class="token punctuation">(</span><span class="token string">"Descriptive information"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>但有时明明已经调用了<code>setToolTips</code>方法，鼠标移动到QT控件上仍然不会有提示信息，这时候就需要具体分析下<code>setToolTips</code>方法是如何实现的，官方说明如下：</p> 
<blockquote> 
 <p><font face="Consolas">This property holds the widget’s tooltip<br> Note that by default tooltips are <mark><strong><font color="#FF0000" size="4">only shown for widgets that are children of the active window.</font></strong></mark> You can change this behavior by setting the attribute Qt::WA_AlwaysShowToolTips on the window, not on the widget with the tooltip.<br> If you want to control a tooltip’s behavior, you can intercept the event() function and catch the QEvent::ToolTip event (e.g., if you want to customize the area for which the tooltip should be shown).<br> By default, this property contains an empty string.</font></p> 
</blockquote> 
<p>  重点就是标红的这段话，大概意思就是 <mark><strong>工具提示显示仅对活动窗口才有效</strong></mark>。因此，可以增加鼠标移动事件，在鼠标移动事件中设置当前窗口为活动状态，代码如下：</p> 
<p>.h文件中加入鼠标移动事件的定义</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span>QMouseEvent<span class="token operator">*</span> event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>
</code></pre> 
<p>.cpp文件中实现该事件</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">MyClass</span><span class="token double-colon punctuation">::</span><span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span>QMouseEvent<span class="token operator">*</span> event<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">setWindowState</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>WindowActive<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  <strong>主要就是设置当前窗口为活动窗口，不一定需要在鼠标移动事件中添加<code>setWindowState(Qt::WindowActive)</code>。</strong></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fef56ecbeb0e5a999175d68608fc3454/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Qt5.15使用QWebEngine加载网页非常慢，直到提示timeout问题】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8a90cf9dd988e15d6ae61b62ac6fa9b0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Markdown常用语法总结】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>