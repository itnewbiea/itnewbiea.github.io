<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>前缀和算法 -- [模版]一维前缀和 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="前缀和算法 -- [模版]一维前缀和" />
<meta property="og:description" content="个人主页：Lei宝啊 愿所有美好如期而遇
目录
本题链接
输入描述
输出描述
算法分析
算法一：暴力求解
算法二：前缀和
预处理前缀和dp表
使用前缀和dp表
解题源码
我们以一道题目为例详解一维前缀和原理。 本题链接 【模板】前缀和_牛客题霸_牛客网 输入描述 首先第一行输入两个整数，n和q，n是要输入的数组的元素个数，q是要查询的次数，查询时输入l和r，代表着要查询的数组区间
比如:我们的示例:
n = 3，我们输入的数组元素就有三个:1 2 4q = 2，我们就需要查找两次，l和r也就会更新两次，要查询的数组区间也就是[1,2] [2,3] 值得注意的是n和q都大于等于1，至于为什么要这么给，我们后面讲算法会说到。 输出描述 返回要查询的数组区间内所有元素值的和。
算法分析 算法一：暴力求解 直接遍历数组，从给定区间开始遍历q次，我们分析一下时间复杂度：首先有q次的遍历，并且我们考虑最坏的情况，就是每次数组都是从头遍历到尾，时间复杂度就为O(q*N)，按我们本题最大的q和n来看，这么干绝对是超时的。
算法二：前缀和 预处理前缀和dp表 类似于动态规划的dp表，这里的dp表每个元素都表示一个状态，由于我们的n是从1开始的，那我们的dp[1]就用来表示区间[1,1]的和，dp[1]表示区间[1,2]的和，看图更直观些：
我们可以用一个变量sum来表示和，然后通过遍历数组给dp表赋值。 使用前缀和dp表 那么我们如何使用dp表来求取数组区间的元素和呢？
我们dp表第i个位置就表示从下标0到下标i所有元素的和，比如我们要算[2,3]区间，也就是求这个区间的元素和，就是dp[3]-dp[1]，我们也就能推知一个公式：
区间和 = dp[r] - dp[l-1];
解题源码 #include &lt;iostream&gt; #include &lt;vector&gt; using namespace std; int main() { int n = 0, q = 0; cin &gt;&gt; n &gt;&gt; q; vector&lt;int&gt; v(n&#43;1,0); for(int i=1; i&lt;v." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/466bc5c39e9eb988a2401882452390f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-01T17:46:42+08:00" />
<meta property="article:modified_time" content="2024-01-01T17:46:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">前缀和算法 -- [模版]一维前缀和</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p class="img-center"><img alt="" height="80" src="https://images2.imgbox.com/46/d5/Hmxqhz6C_o.gif" width="640"></p> 
<p style="text-align:center;"><span style="color:#956fe7;"> 个人主页：<a href="https://blog.csdn.net/m0_74824254?spm=1011.2266.3001.5343" title="Lei宝啊">Lei宝啊</a> </span></p> 
<p style="text-align:center;"><span style="color:#faa572;">愿所有美好如期而遇</span></p> 
<hr> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E6%9C%AC%E9%A2%98%E9%93%BE%E6%8E%A5-toc" style="margin-left:80px;"><a href="#%E6%9C%AC%E9%A2%98%E9%93%BE%E6%8E%A5" rel="nofollow">本题链接</a></p> 
<p id="%E8%BE%93%E5%85%A5%E6%8F%8F%E8%BF%B0-toc" style="margin-left:80px;"><a href="#%E8%BE%93%E5%85%A5%E6%8F%8F%E8%BF%B0" rel="nofollow">输入描述</a></p> 
<p id="%E8%BE%93%E5%87%BA%E6%8F%8F%E8%BF%B0-toc" style="margin-left:80px;"><a href="#%E8%BE%93%E5%87%BA%E6%8F%8F%E8%BF%B0" rel="nofollow">输出描述</a></p> 
<p id="%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90-toc" style="margin-left:80px;"><a href="#%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90" rel="nofollow">算法分析</a></p> 
<p id="%E7%AE%97%E6%B3%95%E4%B8%80%EF%BC%9A%E6%9A%B4%E5%8A%9B%E6%B1%82%E8%A7%A3-toc" style="margin-left:120px;"><a href="#%E7%AE%97%E6%B3%95%E4%B8%80%EF%BC%9A%E6%9A%B4%E5%8A%9B%E6%B1%82%E8%A7%A3" rel="nofollow">算法一：暴力求解</a></p> 
<p id="%E7%AE%97%E6%B3%95%E4%BA%8C%EF%BC%9A%E5%89%8D%E7%BC%80%E5%92%8C-toc" style="margin-left:120px;"><a href="#%E7%AE%97%E6%B3%95%E4%BA%8C%EF%BC%9A%E5%89%8D%E7%BC%80%E5%92%8C" rel="nofollow">算法二：前缀和</a></p> 
<p id="%E9%A2%84%E5%A4%84%E7%90%86%E5%89%8D%E7%BC%80%E5%92%8Cdp%E8%A1%A8-toc" style="margin-left:160px;"><a href="#%E9%A2%84%E5%A4%84%E7%90%86%E5%89%8D%E7%BC%80%E5%92%8Cdp%E8%A1%A8" rel="nofollow">预处理前缀和dp表</a></p> 
<p id="%E4%BD%BF%E7%94%A8%E5%89%8D%E7%BC%80%E5%92%8Cdp%E8%A1%A8-toc" style="margin-left:160px;"><a href="#%E4%BD%BF%E7%94%A8%E5%89%8D%E7%BC%80%E5%92%8Cdp%E8%A1%A8" rel="nofollow">使用前缀和dp表</a></p> 
<p id="%E8%A7%A3%E9%A2%98%E6%BA%90%E7%A0%81-toc" style="margin-left:80px;"><a href="#%E8%A7%A3%E9%A2%98%E6%BA%90%E7%A0%81" rel="nofollow">解题源码</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>我们以一道题目为例详解一维前缀和原理。 </p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/65/15/8tr5aDsz_o.png" width="1200"> </p> 
<h4 id="%E6%9C%AC%E9%A2%98%E9%93%BE%E6%8E%A5">本题链接</h4> 
<p><a href="https://www.nowcoder.com/practice/acead2f4c28c401889915da98ecdc6bf?tpId=230&amp;tqId=2021480&amp;ru=/exam/oj&amp;qru=/ta/dynamic-programming/question-ranking&amp;sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D196" rel="nofollow" title="【模板】前缀和_牛客题霸_牛客网">【模板】前缀和_牛客题霸_牛客网</a> </p> 
<h4 id="%E8%BE%93%E5%85%A5%E6%8F%8F%E8%BF%B0">输入描述</h4> 
<p>首先第一行输入两个整数，n和q，n是要输入的数组的元素个数，q是要查询的次数，查询时输入l和r，代表着要查询的数组区间</p> 
<p>比如:我们的示例:</p> 
<ul><li>n = 3，我们输入的数组元素就有三个:1 2 4</li><li>q = 2，我们就需要查找两次，l和r也就会更新两次，要查询的数组区间也就是[1,2] [2,3]</li></ul> 
<p>值得<span style="color:#fe2c24;">注意</span>的是n和q都大于等于1，至于为什么要这么给，我们后面讲算法会说到。 </p> 
<h4 id="%E8%BE%93%E5%87%BA%E6%8F%8F%E8%BF%B0">输出描述</h4> 
<p>返回要查询的数组区间内所有元素值的和。</p> 
<h4 id="%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90">算法分析</h4> 
<h5 id="%E7%AE%97%E6%B3%95%E4%B8%80%EF%BC%9A%E6%9A%B4%E5%8A%9B%E6%B1%82%E8%A7%A3">算法一：暴力求解</h5> 
<p>直接遍历数组，从给定区间开始遍历q次，我们分析一下时间复杂度：首先有q次的遍历，并且我们考虑最坏的情况，就是每次数组都是从头遍历到尾，时间复杂度就为O(q*N)，按我们本题最大的q和n来看，这么干绝对是超时的。</p> 
<h5 id="%E7%AE%97%E6%B3%95%E4%BA%8C%EF%BC%9A%E5%89%8D%E7%BC%80%E5%92%8C">算法二：前缀和</h5> 
<h6 id="%E9%A2%84%E5%A4%84%E7%90%86%E5%89%8D%E7%BC%80%E5%92%8Cdp%E8%A1%A8">预处理前缀和dp表</h6> 
<p>类似于<a class="link-info" href="https://blog.csdn.net/m0_74824254/article/details/135088893" title="动态规划">动态规划</a>的dp表，这里的dp表每个元素都表示一个状态，由于我们的n是从1开始的，那我们的dp[1]就用来表示区间[1,1]的和，dp[1]表示区间[1,2]的和，看图更直观些：</p> 
<p><img alt="" height="271" src="https://images2.imgbox.com/46/e4/nVJjantZ_o.png" width="1200"></p> 
<p>我们可以用一个变量sum来表示和，然后通过遍历数组给dp表赋值。 </p> 
<h6 id="%E4%BD%BF%E7%94%A8%E5%89%8D%E7%BC%80%E5%92%8Cdp%E8%A1%A8">使用前缀和dp表</h6> 
<p>那么我们如何使用dp表来求取数组区间的元素和呢？</p> 
<p>我们dp表第i个位置就表示从下标0到下标i所有元素的和，比如我们要算[2,3]区间，也就是求这个区间的元素和，就是dp[3]-dp[1]，我们也就能推知一个公式：</p> 
<p><span style="color:#fe2c24;">区间和 = dp[r] - dp[l-1];</span></p> 
<h4 id="%E8%A7%A3%E9%A2%98%E6%BA%90%E7%A0%81">解题源码</h4> 
<pre><code class="hljs">#include &lt;iostream&gt;
#include &lt;vector&gt;
using namespace std;

int main() 
{
    int n = 0, q = 0;
    cin &gt;&gt; n &gt;&gt; q;

    vector&lt;int&gt; v(n+1,0);
    for(int i=1; i&lt;v.size(); i++) cin &gt;&gt; v[i];

    //创建dp表，并填值
    vector&lt;long long&gt; dp(n+1,0);
    long long sum = 0;
    for(int i=1; i&lt;v.size(); i++)
    {
        sum += v[i];
        dp[i] = sum;
    }

    //查询
    while(q--)
    {
        int l, r;
        cin &gt;&gt; l &gt;&gt; r;

        cout &lt;&lt; dp[r] - dp[l-1] &lt;&lt;endl;           
    }
}
// 64 位输出请用 printf("%lld")</code></pre> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a4029f355ac753fafe8c668e643345df/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用flutter开发一个简单的轮播图带指示器的组件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/817ea1bf4cc8dfdfb917ea77c81af91f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【STM32】STM32学习笔记-TIM输入捕获(17)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>