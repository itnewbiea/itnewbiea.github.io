<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android studio--Activity - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android studio--Activity" />
<meta property="og:description" content="附录：练习源码https://download.csdn.net/download/m0_51152186/83607964
Activity使用 什么是Activity Activity是一个Android的应用组件，它提供屏幕进行交互。每个Activity都会获得一个用于绘制其用户界面的窗口，窗口可以充满哦屏幕也可以小于屏幕并浮动在其他窗口之上。
一个应用通常是由多个彼此松散联系的Activity组成，一般会指定应用中的某个Activity为主活动，也就是说首次启动应用时给用户呈现的Activity。
将Activity设为主活动的方法，如下面代码所示需要在AndroidManifest文件中添加以下内容
&lt;application&gt;
....
&lt;activity android:name=&#34;.MainActivity&#34;&gt;
&lt;intent-filter&gt;
&lt;action android:name=&#34;android.intent.action.MAIN&#34; /&gt;
&lt;category android:name=&#34;android.intent.category.LAUNCHER&#34; /&gt;
&lt;/intent-filter&gt;
&lt;/activity&gt;
....
&lt;/application&gt;
在 android 中，Activity 拥有四种基本状态：
1.Active/Runing 一个新 Activity 启动入栈后，它在屏幕最前端，处于栈的最顶端，此时它处于可见并可和用户交互的激活状态。
2.Paused 当 Activity 被另一个透明或者 Dialog 样式的 Activity 覆盖时的状态。此时它依然与窗口管理器保持连接，系统继续维护其内部状态，所以它仍然可见，但它已经失去了焦点故不可与用户交互。
3.Stoped 当 Activity 被另外一个 Activity 覆盖、失去焦点并不可见时处于 Stop ed 状态。
4.Killed Activity 被系统杀死回收或者没有被启动时处于 Killed 状态。
如果一个活动在处于停止或者暂停的状态下，系统内存缺乏时会将其结束（finish）或者杀死（kill）。这种非正常情况下，系统在杀死或者结束之前会调用onSaveInstance()方法来保存信息，同时，当Activity被移动到前台时，重新启动该Activity并调用onRestoreInstance()方法加载保留的信息，以保持原有的状态。
当一个 Activity 实例被创建、销毁或者启动另外一个 Activity 时，它在这四种状态之间进行转换，这种转换的发生依赖于用户程序的动作。下图说明了 Activity 在不同状态间转换的时机和条件：
生命周期 在上面的四中常有的状态之间，还有着其他的生命周期来作为不同状态之间的过度，用于在不同的状态之间进行转换，生命周期的具体说明见下
函数
是否可终止
说明
onCreate()
否
Activity启动后第一个被调用的函数，常用来进行Activity的初始化，例如创建View、绑定数据或恢复信息等。
onStart()
否" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9c89f45bee2fa95f1e7fb6c68c755c3e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-02T23:05:25+08:00" />
<meta property="article:modified_time" content="2022-05-02T23:05:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android studio--Activity</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>附录：练习源码<a class="link-info" href="https://download.csdn.net/download/m0_51152186/83607964" title="https://download.csdn.net/download/m0_51152186/83607964">https://download.csdn.net/download/m0_51152186/83607964</a></p> 
<h2 style="margin-left:0;text-align:justify;"><strong>Activity使用</strong></h2> 
<h3 style="margin-left:0cm;"><strong>什么是Activity</strong></h3> 
<p style="margin-left:0;text-align:justify;">Activity是一个Android的应用组件，它提供屏幕进行交互。每个Activity都会获得一个用于绘制其用户界面的窗口，窗口可以充满哦屏幕也可以小于屏幕并浮动在其他窗口之上。</p> 
<p style="margin-left:0;text-align:justify;">一个应用通常是由多个彼此松散联系的Activity组成，一般会指定应用中的某个Activity为主活动，也就是说首次启动应用时给用户呈现的Activity。</p> 
<p style="margin-left:0;text-align:justify;">将Activity设为主活动的方法，如下面代码所示需要在AndroidManifest文件中添加以下内容</p> 
<p style="margin-left:0;text-align:justify;">&lt;application&gt;<br>      ....<br> &lt;activity android:name=".MainActivity"&gt;<br><span style="color:#ff0000;">&lt;intent-filter&gt;<br> &lt;action android:name="android.intent.action.MAIN" /&gt;<br> &lt;category android:name="android.intent.category.LAUNCHER" /&gt;<br> &lt;/intent-filter&gt;</span><br> &lt;/activity&gt;<br>         ....<br> &lt;/application&gt;</p> 
<p style="margin-left:0;text-align:justify;">在 android 中，Activity 拥有四种基本状态：</p> 
<p style="margin-left:0;text-align:justify;">1.Active/Runing 一个新 Activity 启动入栈后，它在屏幕最前端，处于栈的最顶端，此时它处于可见并可和用户交互的激活状态。</p> 
<p style="margin-left:0;text-align:justify;">2.Paused 当 Activity 被另一个透明或者 Dialog 样式的 Activity 覆盖时的状态。此时它依然与窗口管理器保持连接，系统继续维护其内部状态，所以它仍然可见，但它已经失去了焦点故不可与用户交互。</p> 
<p style="margin-left:0;text-align:justify;">3.Stoped 当 Activity 被另外一个 Activity 覆盖、失去焦点并不可见时处于 Stop ed 状态。</p> 
<p style="margin-left:0;text-align:justify;">4.Killed Activity 被系统杀死回收或者没有被启动时处于 Killed 状态。</p> 
<p style="margin-left:0;text-align:justify;">如果一个活动在处于停止或者暂停的状态下，系统内存缺乏时会将其结束（finish）或者杀死（kill）。这种非正常情况下，系统在杀死或者结束之前会调用onSaveInstance()方法来保存信息，同时，当Activity被移动到前台时，重新启动该Activity并调用onRestoreInstance()方法加载保留的信息，以保持原有的状态。</p> 
<p style="margin-left:0;text-align:justify;">当一个 Activity 实例被创建、销毁或者启动另外一个 Activity 时，它在这四种状态之间进行转换，这种转换的发生依赖<span style="background-color:#ffffff;"><span style="color:#171717;">于用户程序的动作。下图说明了 Activity 在不同状态间转换的时机和条件：</span></span></p> 
<p style="text-align:center;"><img alt="" height="274" src="https://images2.imgbox.com/fc/dc/zqtz2KVM_o.png" width="294"></p> 
<p></p> 
<p></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h3 style="margin-left:0cm;"><strong>生命周期</strong></h3> 
<p style="margin-left:0;text-align:justify;">在上面的四中常有的状态之间，还有着其他的生命周期来作为不同状态之间的过度，用于在不同的状态之间进行转换，生命周期的具体说明见下</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<table border="1" style="margin-left:.75pt;width:634px;"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:69.8pt;"> <p style="margin-left:0cm;">函数</p> </td><td style="border-color:#000000;vertical-align:top;width:68.65pt;"> <p style="margin-left:0cm;">是否可终止</p> </td><td style="border-color:#000000;vertical-align:top;width:337.3pt;"> <p style="margin-left:0cm;">说明</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:69.8pt;"> <p style="margin-left:0cm;">onCreate()</p> </td><td style="border-color:#000000;vertical-align:top;width:68.65pt;"> <p style="margin-left:0cm;">否</p> </td><td style="border-color:#000000;vertical-align:top;width:337.3pt;"> <p style="margin-left:0cm;">Activity启动后第一个被调用的函数，常用来进行Activity的初始化，例如创建View、绑定数据或恢复信息等。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:69.8pt;"> <p style="margin-left:0cm;">onStart()</p> </td><td style="border-color:#000000;vertical-align:top;width:68.65pt;"> <p style="margin-left:0cm;">否</p> </td><td style="border-color:#000000;vertical-align:top;width:337.3pt;"> <p style="margin-left:0cm;">当Activity显示在屏幕上时，该函数被调用。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:69.8pt;"> <p style="margin-left:0cm;">onRestart()</p> </td><td style="border-color:#000000;vertical-align:top;width:68.65pt;"> <p style="margin-left:0cm;">否</p> </td><td style="border-color:#000000;vertical-align:top;width:337.3pt;"> <p style="margin-left:0cm;">当Activity从停止状态进入活动状态前，调用该函数。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:69.8pt;"> <p style="margin-left:0cm;">onResume()</p> </td><td style="border-color:#000000;vertical-align:top;width:68.65pt;"> <p style="margin-left:0cm;">否</p> </td><td style="border-color:#000000;vertical-align:top;width:337.3pt;"> <p style="margin-left:0cm;">当Activity可以接受用户输入时，该函数被调用。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:69.8pt;"> <p style="margin-left:0cm;">onPause()</p> </td><td style="border-color:#000000;vertical-align:top;width:68.65pt;"> <p style="margin-left:0cm;">否</p> </td><td style="border-color:#000000;vertical-align:top;width:337.3pt;"> <p style="margin-left:0cm;">当Activity进入暂停状态时，该函数被调用。主要用来保存持久数据、关闭动画、释放CPU资源等。该函数中的代码必须简短，因为另一个Activity必须等待该函数执行完毕后才能显示在界面上。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:69.8pt;"> <p style="margin-left:0cm;">onStop()</p> </td><td style="border-color:#000000;vertical-align:top;width:68.65pt;"> <p style="margin-left:0cm;">是</p> </td><td style="border-color:#000000;vertical-align:top;width:337.3pt;"> <p style="margin-left:0cm;">当Activity不对用户可见后，该函数被调用，Activity进入停止状态。</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:69.8pt;"> <p style="margin-left:0cm;">onDestroy()</p> </td><td style="border-color:#000000;vertical-align:top;width:68.65pt;"> <p style="margin-left:0cm;">是</p> </td><td style="border-color:#000000;vertical-align:top;width:337.3pt;"> <p style="margin-left:0cm;">在Activity被终止前，即进入非活动状态前，该函数被调用。有两种情况该函数会被调用：(1)当程序主动调用finish()函数；(2)程序被Android系统终结。</p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:justify;"></p> 
<ol><li style="text-align:justify;">Activity 的整个生命周期发生在 onCreate() 调用与 onDestroy() 调用之间。您的 Activity 应在 onCreate()中执行“全局”状态设置（例如定义布局），并释放 onDestroy()中的所有其余资源。例如，如果您的 Activity 有一个在后台运行的线程，用于从网络上下载数据，它可能会在onCreate() 中创建该线程，然后在onDestroy() 中停止该线程。</li><li style="text-align:justify;">Activity 的可见生命周期发生在 onStart() 调用与 onStop() 调用之间。在这段时间，用户可以在屏幕上看到 Activity 并与其交互。例如，当一个新 Activity 启动，并且此 Activity 不再可见时，系统会调用onStop()。您可以在调用这两个方法之间保留向用户显示 Activity 所需的资源。例如，您可以在onStart() 中注册一个 BroadcastReceiver 以监控影响 UI的变化，并在用户无法再看到您显示的内容时在 onStop()中将其取消注册。在 Activity 的整个生命周期，当 Activity 在对用户可见和隐藏两种状态中交替变化时，系统可能会多次调用 onStart() 和 onStop()。</li><li style="text-align:justify;">Activity 的前台生命周期发生在 onResume() 调用与 onPause() 调用之间。在这段时间，Activity 位于屏幕上的所有其他 Activity 之前，并具有用户输入焦点。Activity 可频繁转入和转出前台 — 例如，当设备转入休眠状态或出现对话框时，系统会调用 onPause()。由于此状态可能经常发生转变，因此这两个方法中应采用适度轻量级的代码，以避免因转变速度慢而让用户等待。</li></ol> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">调用演示：</p> 
<p style="margin-left:0;text-align:justify;">创建项目，代码如下：</p> 
<pre style="margin-left:.0001pt;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#000080;">public class </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">MainActivity </span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">extends </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">AppCompatActivity {



</span></span><span style="background-color:#ffffff;"><span style="color:#808000;">@Override

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">protected void </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">onCreate(Bundle savedInstanceState) {

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">super</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">.onCreate(savedInstanceState);

        setContentView(R.layout.</span></span><strong><em><span style="background-color:#ffffff;"><span style="color:#660e7a;">activity_main</span></span></em></strong><span style="background-color:#ffffff;"><span style="color:#000000;">);

        Log.<em>e</em>(</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"Activity-----&gt;&gt;&gt;"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">,</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"onCreate"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">);



    }



</span></span><em><span style="background-color:#ffffff;"><span style="color:#808080;">/**

     * Activity</span></span></em><em><span style="background-color:#ffffff;"><span style="color:#808080;">从后台重新回到前台时被调用

     */

</span></span></em><span style="background-color:#ffffff;"><span style="color:#808000;">@Override

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">protected void </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">onRestart() {

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">super</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">.onRestart();

        Log.<em>e</em>(</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"Activity-----&gt;&gt;&gt;"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">,</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"onRestart"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">);

    }



</span></span><em><span style="background-color:#ffffff;"><span style="color:#808080;">/**

     *Activity</span></span></em><em><span style="background-color:#ffffff;"><span style="color:#808080;">创建或者从后台重新回到前台时被调用

     */

</span></span></em><span style="background-color:#ffffff;"><span style="color:#808000;">@Override

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">protected void </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">onStart() {

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">super</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">.onStart();

        Log.<em>e</em>(</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"Activity-----&gt;&gt;&gt;"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">,</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"onStart"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">);

    }



</span></span><em><span style="background-color:#ffffff;"><span style="color:#808080;">/**

     *Activity</span></span></em><em><span style="background-color:#ffffff;"><span style="color:#808080;">创建或者从被覆盖、后台重新回到前台时被调用

     */

</span></span></em><span style="background-color:#ffffff;"><span style="color:#808000;">@Override

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">protected void </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">onResume() {

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">super</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">.onResume();

        Log.<em>e</em>(</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"Activity-----&gt;&gt;&gt;"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">,</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"onResume"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">);

    }

</span></span><em><span style="background-color:#ffffff;"><span style="color:#808080;">/**

     *  Activity</span></span></em><em><span style="background-color:#ffffff;"><span style="color:#808080;">被覆盖到下面或者锁屏时被调用

     */

</span></span></em><span style="background-color:#ffffff;"><span style="color:#808000;">@Override

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">protected void </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">onPause() {

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">super</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">.onPause();

        Log.<em>e</em>(</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"Activity-----&gt;&gt;&gt;"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">,</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"onPause"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">);

    }

</span></span><em><span style="background-color:#ffffff;"><span style="color:#808080;">/**

     *</span></span></em><em><span style="background-color:#ffffff;"><span style="color:#808080;">退出当前Activity或者跳转到新Activity时被调用

     */

</span></span></em><span style="background-color:#ffffff;"><span style="color:#808000;">@Override

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">protected void </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">onStop() {

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">super</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">.onStop();

        Log.<em>e</em>(</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"Activity-----&gt;&gt;&gt;"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">,</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"onStop"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">);;

    }

</span></span><em><span style="background-color:#ffffff;"><span style="color:#808080;">/**

     *</span></span></em><em><span style="background-color:#ffffff;"><span style="color:#808080;">退出当前Activity时被调用,调用之后Activity就结束了

     */

</span></span></em><span style="background-color:#ffffff;"><span style="color:#808000;">@Override

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">protected void </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">onDestroy() {

</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">super</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">.onDestroy();

        Log.<em>e</em>(</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"Activity-----&gt;&gt;&gt;"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">,</span></span><strong><span style="background-color:#ffffff;"><span style="color:#008000;">"onDestroy"</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">);

    }



}</span></span></span></pre> 
<p style="margin-left:0;text-align:justify;">运行项目，查看日志：</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="153" src="https://images2.imgbox.com/03/d8/fkO1WZsH_o.png" width="882"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:justify;">点回退按钮，结束程序</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="286" src="https://images2.imgbox.com/6c/6e/rPq5yOSF_o.png" width="865"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">重新运行，模拟电话呼入，接听时，查看日志</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="131" src="https://images2.imgbox.com/49/54/crgktB8B_o.png" width="924"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:justify;">接完电话，回到页面</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="144" src="https://images2.imgbox.com/a8/76/gioXVUp6_o.png" width="962"></p> 
<p></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:justify;">点home键</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="208" src="https://images2.imgbox.com/a0/f6/ZHi40gHy_o.png" width="838"></p> 
<p></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:justify;">切换回来</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="260" src="https://images2.imgbox.com/d0/9f/bpSYSMbm_o.png" width="846"></p> 
<p></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:justify;">调用另一个Activity</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="195" src="https://images2.imgbox.com/2a/63/YmcUr1ep_o.png" width="1000"></p> 
<p></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:justify;">回退</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="260" src="https://images2.imgbox.com/26/95/36cyUiCy_o.png" width="957"></p> 
<p></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p><span style="background-color:#ffffff;"><strong><span style="color:#4f4f4f;">横竖屏切换时候Activity的生命周期。</span></strong></span></p> 
<p style="margin-left:0;text-align:justify;">1、不设置Activity的android:configChanges时，切屏会重新调用各个生命周期，切横屏时会执行一次，切竖屏时会执行两次</p> 
<p style="margin-left:0;text-align:justify;">2、设置Activity的android:configChanges=”orientation”时，切屏还是会重新调用各个生命周期，切横、竖屏时只会执行一次</p> 
<p style="margin-left:0;text-align:justify;">3、设置Activity的android:configChanges=”orientation|keyboardHidden”时，切屏不会重新调用各个生命周期，只会执行onConfigurationChanged方法</p> 
<p style="margin-left:0;text-align:left;"></p> 
<h3 style="margin-left:0cm;"><strong>配置Activity</strong></h3> 
<p style="margin-left:0;text-align:justify;">在manifest文件必须声明activity,为了它可以被系统访问。要声明activity，打开manifest文件，添加一个&lt;activity&gt;元素作为&lt;application&gt;元素的子元素。</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">一条&lt;intent-filter&gt;元素至少应该包含一个&lt;action&gt;，否则任何Intent请求都不能和该&lt;intent-filter&gt;匹配。如果Intent请求的Action和&lt;intent-filter&gt;中个某一条&lt;action&gt;匹配，那么该Intent就通过了这条&lt;intent-filter&gt;的动作测试。</p> 
<p style="margin-left:0;text-align:justify;">&lt;activity android:name=".AnotherActivity"<br>     android:label="AnotherActivity"<br>     android:theme="@style/AppTheme"&gt;<br> &lt;intent-filter &gt;<br><span style="color:#ff0000;">&lt;action android:name="com.li.another"/&gt;<br> &lt;category android:name="android.intent.category.DEFAULT"/&gt;</span><br> &lt;/intent-filter&gt;<br> &lt;/activity&gt;</p> 
<h3 style="margin-left:0cm;"><strong>启动Activity</strong></h3> 
<pre style="margin-left:.0001pt;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#000000;">Intent intent=</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">new </span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">Intent(MainActivity.</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">this</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">,AnotherActivity.</span></span><strong><span style="background-color:#ffffff;"><span style="color:#000080;">class</span></span></strong><span style="background-color:#ffffff;"><span style="color:#000000;">);

startActivity(intent);</span></span></span></pre> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">通过隐式启动activity</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<table align="left"><tbody><tr><td></td></tr><tr><td></td><td style="background-color:#ffffff;vertical-align:top;"> 
    <table><tbody><tr><td> 
        <div> 
         <ol><li style="text-align:left;"><span style="color:#000000;">Intent intent=</span><span style="color:#000000;">Intent();<br>  intent.setAction(</span><strong><span style="color:#008000;">"com.li.another"</span></strong><span style="color:#000000;">);<br>  startActivity(intent);</span></li></ol> 
        </div> </td></tr></tbody></table></td></tr></tbody></table> 
<p style="margin-left:0;text-align:justify;"></p> 
<p></p> 
<p style="margin-left:0;text-align:justify;">回退栈</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">启动系统的Activity</p> 
<p style="margin-left:0;text-align:justify;">浏览网页</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<table align="left"><tbody><tr><td></td></tr><tr><td></td><td style="background-color:#ffffff;vertical-align:top;"> 
    <table><tbody><tr><td> 
        <div> 
         <ul><li style="text-align:left;"><em><span style="color:#808080;">打开浏览器，请问http://www.baidu.com</span></em><br><span style="color:#000000;">Uri uri = Uri.<em>parse</em>(</span><strong><span style="color:#008000;">"http://www.baidu.com"</span></strong><span style="color:#000000;">);<br>         Intent it= </span><strong><span style="color:#000080;">new </span></strong><span style="color:#000000;">Intent(Intent.</span><strong><em><span style="color:#660e7a;">ACTION_VIEW</span></em></strong><span style="color:#000000;">,uri);<br>         startActivity(it);</span></li></ul> 
        </div> </td></tr></tbody></table></td></tr></tbody></table> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p></p> 
<p style="margin-left:0;text-align:justify;">调用发短信的程序<br>        Intent it = new Intent(Intent.ACTION_VIEW);<br>        it.putExtra("sms_body", "The SMS text");<br>        it.setType("vnd.android-dir/mms-sms");<br>        startActivity(it);</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"> 发送短信<br>       Uri uri = Uri.parse("smsto:0800000123");<br>       Intent it = new Intent(Intent.ACTION_SENDTO, uri);<br>       it.putExtra("sms_body", "The SMS text");<br>       startActivity(it);</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h3 style="margin-left:0cm;"><strong>Activity之间传递参数</strong></h3> 
<p style="margin-left:0;text-align:justify;">程序中可能有多个Activity，那么这些Activity是如何传递数据的呢？答案是使用Intent。</p> 
<p style="margin-left:0;text-align:justify;">考虑有两个Activity的程序，一个是MainActivity，另一个是AnotherActivity。传递数据有两种情况：</p> 
<p style="margin-left:0;text-align:justify;">MainActivity仅仅向AnotherActivity传递数据，但是不需要AnotherAcitivty向MainActivity回传数据</p> 
<p style="margin-left:0;text-align:justify;">MainActivity不仅向AnotherActivity传递数据，还要求后者向前者回传数据。</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">使用Intent来帮助我们传递数据，Intent提供了多个方法来“携带”数据。</p> 
<p style="margin-left:0;text-align:justify;">putExtras(Bundle data)</p> 
<p style="margin-left:0;text-align:justify;">putExtra(String name,Xxx value) ，其中Xxx为类型</p> 
<p style="margin-left:0;text-align:justify;">Intent也提供了相应的get方法来获得传递的数据。</p> 
<p style="margin-left:0;text-align:justify;">Bundle getExtras()</p> 
<p style="margin-left:0;text-align:justify;">Xxx getXxxExtra(String name)，其中Xxx为类型</p> 
<p style="margin-left:0;text-align:justify;">如在：</p> 
<p style="margin-left:0;text-align:justify;">@Override<br> protected void onCreate(Bundle savedInstanceState) {<!-- --><br>     super.onCreate(savedInstanceState);<br>     setContentView(R.layout.activity_main);<br>     Button button=(Button)findViewById(R.id.buttonTest);<br>     button.setOnClickListener(new View.OnClickListener() {<!-- --><br>         @Override<br>         public void onClick(View v) {<!-- --><br><span style="color:#ff0000;"> Intent intent=new Intent(MainActivity.this,AnotherActivity.class);<br>             intent.putExtra("name","Zhangsan");<br>             intent.putExtra("age",20);<br>             startActivity(intent);</span><br>         }<br>     });<br> }</p> 
<p style="margin-left:0;text-align:justify;">接收方：</p> 
<p style="margin-left:0;text-align:justify;">@Override<br> protected void onCreate(Bundle savedInstanceState) {<!-- --><br>     super.onCreate(savedInstanceState);<br>     setContentView(R.layout.activity_another);<br><br><span style="color:#ff0000;"> Intent intent=getIntent();<br>     String name=intent.getStringExtra("name");<br>     Integer age=intent.getIntExtra("age", 20);<br>     Toast.makeText(this,name+age,Toast.LENGTH_LONG).show();</span><br><br> }</p> 
<h3 style="margin-left:0cm;"><strong>回传数据</strong></h3> 
<p style="margin-left:0;text-align:justify;">有的时候MainActivity不但需要向其它Activity传递数据，当其它Activity处理完数据后还需要将处理结果返回给MainActivity。这怎么办呢？尤其是如果MainActivity中有多个按钮，每个按钮请求一个Activity，如下图所示，MainActivity又是如何区分是哪个Activity返回的结果呢？</p> 
<p style="margin-left:0;text-align:justify;">首先MainActivity启动其它Activity应该使用startActivityForResult()方法。</p> 
<p style="margin-left:0;text-align:justify;">该方法包括两个参数，第一个参数是Intent类型，第二个参数是请求码requestCode。例如单击Button0按钮启动ActivityOne，请求码是0，单击Button1按钮时某些情况下启动启动ActivityOne，请求码是1，某些情况下启动ActivityTwo，请求码是2等等</p> 
<p style="margin-left:0;text-align:justify;">其次MainActivity应该重写onActivityResult()方法，当其它Activity返回结果后，系统会自动回调该方法。onActivityResult有三个参数</p> 
<p style="margin-left:0cm;"><strong><span style="color:#000080;">void </span></strong><span style="color:#000000;">onActivityResult(</span><strong><span style="color:#000080;">int </span></strong><span style="color:#000000;">requestCode, </span><strong><span style="color:#000080;">int </span></strong><span style="color:#000000;">resultCode, Intent data)</span></p> 
<p style="margin-left:0;text-align:justify;">最后在AnotherActivity中需要将结果码和数据等通过setResult方法设置</p> 
<p style="margin-left:0;text-align:justify;">Intent intent=getIntent();<br> String name=intent.getStringExtra("name");<br> Integer age=intent.getIntExtra("age", 20);<br><span style="color:#ff0000;">intent.putExtra("result","</span><span style="color:#ff0000;">姓名</span><span style="color:#ff0000;">:"+name+" </span><span style="color:#ff0000;">年龄</span><span style="color:#ff0000;">"+age);<br> setResult(0,intent);<br> finish();</span></p> 
<p style="margin-left:0;text-align:justify;">MainActivity中的代码</p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#808000;">@Override</span><br><strong><span style="color:#000080;">protected void </span></strong><span style="color:#000000;">onCreate(Bundle savedInstanceState) {<!-- --></span><br><strong><span style="color:#000080;">super</span></strong><span style="color:#000000;">.onCreate(savedInstanceState);<br>     setContentView(R.layout.</span><strong><em><span style="color:#660e7a;">activity_main</span></em></strong><span style="color:#000000;">);<br>     Button button=(Button)findViewById(R.id.</span><strong><em><span style="color:#660e7a;">buttonTest</span></em></strong><span style="color:#000000;">);<br>     button.setOnClickListener(</span><strong><span style="color:#000080;">new </span></strong><span style="color:#000000;">View.OnClickListener() {<!-- --></span><br><span style="color:#808000;">@Override</span><br><strong><span style="color:#000080;">public void </span></strong><span style="color:#000000;">onClick(View v) {<!-- --><br>             Intent intent=</span><strong><span style="color:#000080;">new </span></strong><span style="color:#000000;">Intent(MainActivity.</span><strong><span style="color:#000080;">this</span></strong><span style="color:#000000;">,AnotherActivity.</span><strong><span style="color:#000080;">class</span></strong><span style="color:#000000;">);<br>             intent.putExtra(</span><strong><span style="color:#008000;">"name"</span></strong><span style="color:#000000;">,</span><strong><span style="color:#008000;">"Zhangsan"</span></strong><span style="color:#000000;">);<br>             intent.putExtra(</span><strong><span style="color:#008000;">"age"</span></strong><span style="color:#000000;">,</span><span style="color:#0000ff;">20</span><span style="color:#000000;">);<br>             startActivityForResult(intent,</span><span style="color:#0000ff;">0</span><span style="color:#000000;">);<br>         }<br>     });</span></p> 
<p style="margin-left:0cm;"><span style="color:#808000;">@Override</span><br><strong><span style="color:#000080;">protected void </span></strong><span style="color:#000000;">onActivityResult(</span><strong><span style="color:#000080;">int </span></strong><span style="color:#000000;">requestCode, </span><strong><span style="color:#000080;">int </span></strong><span style="color:#000000;">resultCode, Intent data) {<!-- --></span><br><strong><span style="color:#000080;">super</span></strong><span style="color:#000000;">.onActivityResult(requestCode, resultCode, data);</span><br><br><strong><span style="color:#000080;">if</span></strong><span style="color:#000000;">(requestCode==</span><span style="color:#0000ff;">0 </span><span style="color:#000000;">&amp;&amp; resultCode==</span><span style="color:#0000ff;">0</span><span style="color:#000000;">){<!-- --><br>         String str=data.getStringExtra(</span><strong><span style="color:#008000;">"result"</span></strong><span style="color:#000000;">);<br>         Toast.<em>makeText</em>(</span><strong><span style="color:#000080;">this</span></strong><span style="color:#000000;">,str,Toast.</span><strong><em><span style="color:#660e7a;">LENGTH_LONG</span></em></strong><span style="color:#000000;">).show();<br>     }<br><br> }</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">在</span><span style="color:#000000;">AnotherActivity</span><span style="color:#000000;">中，需要回传数据的位置写入代码，如</span></p> 
<p style="margin-left:0;text-align:justify;">@Override<br> protected void onCreate(Bundle savedInstanceState) {<!-- --><br>     super.onCreate(savedInstanceState);<br>     setContentView(R.layout.activity_another);<br><br>     Button button=(Button)findViewById(R.id.buttonReturn);<br>     button.setOnClickListener(new View.OnClickListener() {<!-- --><br>         @Override<br>         public void onClick(View v) {<!-- --><br>             I<span style="color:#ff0000;">ntent intent=getIntent();<br>             String name=intent.getStringExtra("name");<br>             Integer age=intent.getIntExtra("age", 20);<br>             intent.putExtra("result","</span><span style="color:#ff0000;">姓名</span><span style="color:#ff0000;">:"+name+" </span><span style="color:#ff0000;">年龄</span><span style="color:#ff0000;">"+age);<br>             setResult(0,intent);<br>             finish();</span><br>         }<br>     });<br> }</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h3 style="margin-left:0cm;"><strong>任务栈</strong></h3> 
<p style="margin-left:0;text-align:justify;">一个应用程序通常由多个activities组成，他们通常是松耦合关系。通常，一个应用程序中的activity被指定为"main"activity，当第一次启动应用程序的时候呈现给用户的那个activity。每一个activity然后可以启动另一个activity为了完成不同的动作。每一次一个activity启动，前一个activity就停止了，但是系统保留activity在一个栈上（“back stack”）。当一个新activity启动，它被推送到栈顶，取得用户焦点。Back Stack符合简单“后进先出”原则，所以，当用户完成当前activity然后点击back按钮，它被弹出栈（并且被摧毁），然后之前的activity恢复。</p> 
<p style="margin-left:0;text-align:justify;">任务是指在执行特定作业时与用户交互的一系列 Activity。 这些 Activity 按照各自的打开顺序排列在堆栈（即返回栈）中。</p> 
<p style="margin-left:0;text-align:justify;">任务是一个有机整体，当用户开始新任务或通过“主页”按钮转到主屏幕时，可以移动到“后台”。 尽管在后台时，该任务中的所有 Activity 全部停止，但是任务的返回栈仍旧不变，也就是说，当另一个任务发生时，该任务仅仅失去焦点而已。</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="210" src="https://images2.imgbox.com/03/54/H4SsdBEz_o.png" width="864"></p> 
<p></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">启动模式（launchMode）在多个Activity跳转的过程中扮演着重要的角色，它可以决定是否生成新的Activity实例，是否重用已存在的Activity实例，是否和其他Activity实例公用一个task里。task是一个具有栈结构的对象，一个task可以管理多个Activity，启动一个应用，也就创建一个与之对应的task。</p> 
<p style="margin-left:0;text-align:justify;">Activity一共有以下四种launchMode：</p> 
<p style="margin-left:0;text-align:justify;">Standard默认选项</p> 
<p style="margin-left:0;text-align:justify;">系统在启动 Activity 的任务中创建 Activity 的新实例并向其传送 Intent。Activity 可以多次实例化，而每个实例均可属于不同的任务，并且一个任务可以拥有多个实例。</p> 
<p style="margin-left:0;text-align:justify;">singleTop</p> 
<p style="margin-left:0;text-align:justify;">如果当前任务的顶部已存在 Activity 的一个实例，则系统会通过调用该实例的 onNewIntent() 方法向其传送 Intent，而不是创建 Activity 的新实例。Activity 可以多次实例化，而每个实例均可属于不同的任务，并且一个任务可以拥有多个实例（但前提是位于返回栈顶部的 Activity 并不是 Activity 的现有实例）。</p> 
<p style="margin-left:0;text-align:justify;">singleTask</p> 
<p style="margin-left:0;text-align:justify;">系统创建新任务并实例化位于新任务底部的 Activity。但是，如果该 Activity 的一个实例已存在于一个单独的任务中，则系统会通过调用现有实例的onNewIntent() 方法向其传送 Intent，而不是创建新实例。一次只能存在 Activity 的一个实例。</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">singleInstance</p> 
<p style="margin-left:0;text-align:justify;">与 "singleTask" 相同，只是系统不会将任何其他 Activity 启动到包含实例的任务中。该 Activity 始终是其任务唯一仅有的成员；由此 Activity 启动的任何 Activity 均在单独的任务中打开。</p> 
<p style="margin-left:0;text-align:justify;">定义TaskStackActivity和FirstActivity.</p> 
<p style="margin-left:0;text-align:justify;"><em><span style="color:#000000;">&lt;?</span></em><strong><span style="color:#0000ff;">xml version=</span></strong><strong><span style="color:#008000;">"1.0"</span></strong><strong><span style="color:#0000ff;">encoding=</span></strong><strong><span style="color:#008000;">"utf-8"</span></strong><em><span style="color:#000000;">?&gt;</span></em><br><span style="color:#000000;">&lt;</span><strong><span style="color:#000080;">LinearLayout </span></strong><strong><span style="color:#0000ff;">xmlns:</span></strong><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">=</span></strong><strong><span style="color:#008000;">"http://schemas.android.com/apk/res/android"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:id=</span></strong><strong><span style="color:#008000;">"@+id/activity_task_stack"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:layout_width=</span></strong><strong><span style="color:#008000;">"match_parent"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:layout_height=</span></strong><strong><span style="color:#008000;">"match_parent"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:orientation=</span></strong><strong><span style="color:#008000;">"vertical"</span></strong><span style="color:#000000;">&gt;<br> &lt;</span><strong><span style="color:#000080;">TextView</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:layout_width=</span></strong><strong><span style="color:#008000;">"match_parent"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:layout_height=</span></strong><strong><span style="color:#008000;">"wrap_content"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:text=</span></strong><strong><span style="color:#008000;">"</span></strong><strong><span style="color:#008000;">我是主activity"</span></strong><span style="color:#000000;">/&gt;<br> &lt;</span><strong><span style="color:#000080;">Button</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:id=</span></strong><strong><span style="color:#008000;">"@+id/button"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:layout_width=</span></strong><strong><span style="color:#008000;">"wrap_content"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:layout_height=</span></strong><strong><span style="color:#008000;">"wrap_content"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:onClick=</span></strong><strong><span style="color:#008000;">"onClick1"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:text=</span></strong><strong><span style="color:#008000;">"</span></strong><strong><span style="color:#008000;">打开主activity"</span></strong><span style="color:#000000;">/&gt;<br> &lt;</span><strong><span style="color:#000080;">Button</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:id=</span></strong><strong><span style="color:#008000;">"@+id/button1"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:layout_width=</span></strong><strong><span style="color:#008000;">"wrap_content"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:layout_height=</span></strong><strong><span style="color:#008000;">"wrap_content"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:onClick=</span></strong><strong><span style="color:#008000;">"onClick2"</span></strong><br><strong><span style="color:#660e7a;">android</span></strong><strong><span style="color:#0000ff;">:text=</span></strong><strong><span style="color:#008000;">"</span></strong><strong><span style="color:#008000;">打开FirstActivity"</span></strong><span style="color:#000000;">/&gt;<br> &lt;/</span><strong><span style="color:#000080;">LinearLayout</span></strong><span style="color:#000000;">&gt;</span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0cm;"><strong><span style="color:#000080;">TaskStack</span></strong></p> 
<p style="margin-left:0cm;"><strong><span style="color:#000080;">public  void </span></strong><span style="color:#000000;">onClick1(View view){<!-- --><br>     Intent intent=</span><strong><span style="color:#000080;">new </span></strong><span style="color:#000000;">Intent(TaskStack.</span><strong><span style="color:#000080;">this</span></strong><span style="color:#000000;">,TaskStack.</span><strong><span style="color:#000080;">class</span></strong><span style="color:#000000;">);<br>     startActivity(intent);<br><br> }</span><br><strong><span style="color:#000080;">public  void </span></strong><span style="color:#000000;">onClick2(View view){<!-- --><br>     Intent intent=</span><strong><span style="color:#000080;">new </span></strong><span style="color:#000000;">Intent(TaskStack.</span><strong><span style="color:#000080;">this</span></strong><span style="color:#000000;">,FirstActivity.</span><strong><span style="color:#000080;">class</span></strong><span style="color:#000000;">);<br>     startActivity(intent);<br><br> }</span></p> 
<p style="margin-left:0cm;"><strong><span style="color:#000080;">FirstActivity</span></strong></p> 
<p style="margin-left:0cm;"><strong><span style="color:#000080;">public  void </span></strong><span style="color:#000000;">onClick1(View view){<!-- --><br>     Intent intent=</span><strong><span style="color:#000080;">new </span></strong><span style="color:#000000;">Intent(FirstActivity.</span><strong><span style="color:#000080;">this</span></strong><span style="color:#000000;">,TaskStack.</span><strong><span style="color:#000080;">class</span></strong><span style="color:#000000;">);<br>     startActivity(intent);<br><br> }</span><br><strong><span style="color:#000080;">public  void </span></strong><span style="color:#000000;">onClick2(View view){<!-- --><br>     Intent intent=</span><strong><span style="color:#000080;">new </span></strong><span style="color:#000000;">Intent(FirstActivity.</span><strong><span style="color:#000080;">this</span></strong><span style="color:#000000;">,FirstActivity.</span><strong><span style="color:#000080;">class</span></strong><span style="color:#000000;">);<br>     startActivity(intent);<br><br> }</span></p> 
<p style="margin-left:0;text-align:justify;">启动应用程序，点击打开FirstActivity-&gt;打开主activity-&gt;打开FirstActivity.点击返回键，观察页面变化。分析任务栈的内容。</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">在androidManifest.xml中将FirstActivity的android:launchMode="singleTop“</p> 
<p style="margin-left:0;text-align:justify;">启动应用程序，点击打开FirstActivity-&gt;打开主activity-&gt;打开FirstActivity.多点几次打开FirstActivity,点击返回键，观察页面变化。分析任务栈的内容</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">在androidManifest.xml中将FirstActivity的android:launchMode="singleTask“</p> 
<p style="margin-left:0;text-align:justify;">启动应用程序，点击打开FirstActivity-&gt;打开主activity, 点击返回键，观察页面变化。分析任务栈的内容</p> 
<p style="margin-left:0;text-align:justify;">在androidManifest.xml中将FirstActivity的android:launchMode="singleInstance“</p> 
<p style="margin-left:0;text-align:justify;">启动应用程序，点击打开FirstActivity-&gt;打开FirstActivity-&gt;打开主activity, 点击返回键，观察页面变化。分析任务栈的内容</p> 
<pre>MainActivity.java</pre> 
<pre><code class="language-java">package com.example.stone;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.widget.ImageView;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.appcompat.app.AppCompatActivity;

public class MainActivity extends AppCompatActivity {
    int []images = new int[]{
            R.drawable.hand_cut,R.drawable.hand_stone,R.drawable.hand_bu
    };
    ImageView image,person;
    Handler handler;
    TextView computer_win,player_win,peace,result2;
    boolean flag=false;
    int temp=0;
    int j=0;
    int w=0,p=0;
    int total2=0;
    TextView result,total;
    @SuppressLint("HandlerLeak")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        image=findViewById(R.id.computer);
        person=findViewById(R.id.person);
        person=findViewById(R.id.person);
        result=findViewById(R.id.result);
        total=findViewById(R.id.total);
        result2=findViewById(R.id.result2);
        computer_win=findViewById(R.id.computer_win);
        player_win=findViewById(R.id.player_win);
        peace=findViewById(R.id.peace);
        handler= new Handler(){
            @Override
            public void handleMessage(@NonNull Message msg) {
                super.handleMessage(msg);
                switch (msg.what){
                    case 0x01:
                        image.setImageDrawable(getResources().getDrawable(images[msg.arg1]));
                        break;
                }
            }
        };
    }
    public void click(View view){
        switch (view.getId()){
            case R.id.start:
                flag=true;
                computer();
                break;
            case R.id.Restart:
                flag=true;
                j=0;
                w=0;
                p=0;
                computer_win.setText("计算机胜利次数："+ j);
                player_win.setText("玩家胜利次数："+ w);
                peace.setText("平局次数："+ p);
                result2.setText("");
                break;
            case R.id.bu:
                flag=false;
                person.setImageDrawable(getResources().getDrawable(R.drawable.hand_bu));
                image.setImageDrawable(getResources().getDrawable(images[temp]));
                if(temp==0){
                    result.setText("不好意思，您输了!");
                    computer_win.setText("计算机胜利次数："+ ++j);
                }
                else if(temp==1)
                {
                    result.setText("恭喜您，取得了胜利!");
                    player_win.setText("玩家胜利次数："+ ++w);
                }

                else {
                    result.setText("平局!");
                    peace.setText("平局次数："+ ++p);
                }
                total2=j+w+p;
                if(total2==10){
                    if(j&gt;w)
                        result2.setText("计算机胜！结果是：" + j+ ":"+w);
                    else if(j&lt;w)
                        result2.setText("玩家胜！结果是：" + j+ ":"+w);
                    else result2.setText("平局！结果是：" + 5+ ":"+5);
                }

                break;
            case R.id.cut:
                flag=false;
                image.setImageDrawable(getResources().getDrawable(images[temp]));
                person.setImageDrawable(getResources().getDrawable(R.drawable.hand_cut));
                if(temp==0){
                    result.setText("平局!");
                    peace.setText("平局次数："+ ++p);
                }
                else if(temp==1)
                {
                    result.setText("不好意思，您输了!");
                    computer_win.setText("计算机胜利次数："+ ++j);
                }
                else
                {
                    result.setText("恭喜您，取得了胜利!");
                    player_win.setText("玩家胜利次数："+ ++w);
                }
                total2=j+w+p;
                if(total2==10){
                    if(j&gt;w)
                        result2.setText("计算机胜！结果是：" + j+ ":"+w);
                    else if(j&lt;w)
                        result2.setText("玩家胜！结果是：" + j+ ":"+w);
                    else result2.setText("平局！结果是：" + 5+ ":"+5);
                }
                break;
            case R.id.stone:
                flag=false;
                image.setImageDrawable(getResources().getDrawable(images[temp]));
                person.setImageDrawable(getResources().getDrawable(R.drawable.hand_stone));
                if(temp==0){
                    result.setText("恭喜您，取得了胜利!");
                    player_win.setText("玩家胜利次数："+ ++w);
                }
                else if(temp==1)
                {
                    result.setText("平局!");
                    peace.setText("平局次数："+ ++p);
                }
                else
                {
                    result.setText("不好意思，您输了!");
                    computer_win.setText("计算机胜利次数："+ ++j);
                }
                total2=j+w+p;
                if(total2==10){
                    if(j&gt;w)
                        result2.setText("计算机胜！结果是：" + j+ ":"+w);
                    else if(j&lt;w)
                        result2.setText("玩家胜！结果是：" + j+ ":"+w);
                    else result2.setText("平局！结果是：" + 5+ ":"+5);
                }
                break;

        }
    }



    private void computer() {
        new Thread(){
            @Override
            public void run() {
                int i=0;
                while (flag){
                    temp=i;
//                    image.setImageDrawable(getResources().getDrawable(images[i]));
                    Message message =handler.obtainMessage();
                    message.what=0x01; //相当于消息的id，用来区别其他的消息
                    message.arg1=i;
                    message.sendToTarget();//发送消息
                    i++;
                    if(i==images.length)
                        i=0;
                    try {
                        sleep(500);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }


            }
        }.start();
    }
}




</code></pre> 
<p>xml文件</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:orientation="vertical"
    &gt;


    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="石头，剪刀，布，看谁赢！"
        android:textSize="30sp"
        android:layout_gravity="center_horizontal"

        /&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        &gt;
        &lt;ImageView
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:layout_marginLeft="20dp"
            android:id="@+id/computer"
            /&gt;
        &lt;TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:gravity="center"
            android:id="@+id/result"
            android:textSize="30dp"
            android:textColor="#00f"
            android:layout_weight="1"
            /&gt;

        &lt;ImageView
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:id="@+id/person"
            android:layout_marginRight="10dp"
            /&gt;
    &lt;/LinearLayout&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center"
        &gt;
        &lt;Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/start"
            android:text="开始"
            android:onClick="click"

            /&gt;

        &lt;Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/Restart"
            android:text="重新开始"
            android:onClick="click"
            /&gt;


    &lt;/LinearLayout&gt;
    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="选择出拳"
        android:layout_gravity="center"
        android:textSize="30dp"
        /&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center"
        &gt;
        &lt;ImageView
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:layout_marginLeft="20dp"
            android:src="@drawable/hand_bu"
            android:onClick="click"
            android:id="@+id/bu"
            /&gt;
        &lt;ImageView
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:layout_marginLeft="20dp"
            android:src="@drawable/hand_stone"
            android:onClick="click"
            android:id="@+id/stone"
            /&gt;
        &lt;ImageView
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:layout_marginLeft="20dp"
            android:src="@drawable/hand_cut"
            android:onClick="click"
            android:id="@+id/cut"
            /&gt;

    &lt;/LinearLayout&gt;

    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="战果统计(一共进行10局比赛):"
        android:id="@+id/total"
        /&gt;
    &lt;LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"&gt;
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="计算机胜利次数："
            android:id="@+id/computer_win"
            android:layout_marginRight="35dp"
            android:textSize="15dp"
            android:textColor="#00FF00"
            /&gt;
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            /&gt;
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="玩家胜利次数："
            android:textSize="15dp"
            android:layout_marginRight="35dp"
            android:id="@+id/player_win"
            android:textColor="#00FF00"
            /&gt;
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="平局次数："
            android:textSize="15dp"
            android:id="@+id/peace"
            android:textColor="#00FF00"
            /&gt;
    &lt;/LinearLayout&gt;
    &lt;LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"&gt;
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:textSize="20dp"
            android:layout_marginLeft="100dp"
            android:textColor="#FF0000"
            android:id="@+id/result2"
            /&gt;
    &lt;/LinearLayout&gt;
    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="剪刀石头布游戏"
        android:textSize="35dp"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="30dp"
        /&gt;
&lt;/LinearLayout&gt;


</code></pre> 
<p></p> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/27/08/SKAYxFYI_o.png" width="1200"></p> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/9d/98/3tMfGlMD_o.png" width="1200"></p> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/d9/f6/g6Gohpxr_o.png" width="1200"></p> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/e3/05/aJHwk09Y_o.png" width="1200"></p> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0616f3820978f68f6031e1db13c6bdf3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【论文摘要】ImageNet：A Large-Scale Hierarchical Image Database</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8887606be6d748945a2ea5bc66093ca0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">潮鞋购物网站，html5&#43;css3&#43;js，实现基本的添加购物车，自动计算金额等功能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>