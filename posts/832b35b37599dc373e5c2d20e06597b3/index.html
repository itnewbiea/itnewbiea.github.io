<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>requestium这个Python库更强大 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="requestium这个Python库更强大" />
<meta property="og:description" content="Requestium是一个Python库，它结合了Selenium（用于浏览器自动化）和Requests（用于HTTP请求）的功能。这个库的目标是简化在网页抓取和自动化过程中同时处理静态内容和动态加载内容的过程。
使用Requestium，你可以先用Requests获取网页的静态内容，然后在需要时切换到Selenium来处理JavaScript生成的内容或者进行用户交互。这使得在处理混合型网页（既有静态内容又有动态加载内容）时更加高效和灵活。
Requestium使用示例
from requestium import Session # 创建一个Session实例 s = Session(webdriver_path=&#39;path/to/your/webdriver&#39;) # 使用Requests方式访问一个网页 s.get(&#39;http://example.com&#39;) # 现在你可以使用Selenium的方法，比如找到一个元素 element = s.driver.find_element_by_id(&#39;my-element&#39;) # 或者执行JavaScript代码 result = s.driver.execute_script(&#34;return document.title;&#34;) # 当你完成操作后，记得关闭WebDriver s.driver.quit() 在这个例子中，我们首先创建了一个Session实例，指定WebDriver的路径。然后，我们可以像使用Requests一样使用s.get()方法来获取网页。接下来，我们可以使用Selenium的方法，如find_element_by_id()或execute_script()来处理动态内容。最后，当我们完成所有操作后，我们需要调用s.driver.quit()来关闭WebDriver。
请注意，要使用Requestium，你需要预先安装Selenium和对应的WebDriver（例如ChromeDriver或GeckoDriver，取决于你使用的浏览器）。你也需要安装Requestium库，可以通过pip来安装：
pip install requestium 由于Requestium是基于Selenium和Requests的，所以在使用前确保已经安装了这两个库：
pip install selenium requests 并且根据你的操作系统和浏览器类型，下载并配置相应的WebDriver。
requestium的高阶使用方法及实例代码
Requestium的高阶使用方法通常涉及到更复杂的网页自动化和交互，包括处理动态加载内容、模拟用户操作、处理Cookies和Headers等。以下是一些高阶使用方法的示例代码：
处理动态加载内容：使用Selenium的implicitly_wait方法来设置一个等待时间，让WebDriver在查找元素时自动等待页面加载完成。
from requestium import Session s = Session(webdriver_path=&#39;path/to/your/webdriver&#39;) s.driver.implicitly_wait(10) # 设置最大等待时间为10秒 s.get(&#39;http://example.com&#39;) # 等待页面加载完成后查找元素 element = s.driver.find_element_by_id(&#39;my-dynamic-element&#39;) 模拟用户操作：使用Selenium的方法来模拟用户点击、输入和滑动等操作。
from requestium import Session s = Session(webdriver_path=&#39;path/to/your/webdriver&#39;) s.get(&#39;http://example.com&#39;) # 模拟点击元素 element = s." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/832b35b37599dc373e5c2d20e06597b3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-26T15:48:32+08:00" />
<meta property="article:modified_time" content="2023-12-26T15:48:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">requestium这个Python库更强大</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>Requestium是一个Python库，它结合了Selenium（用于浏览器自动化）和Requests（用于HTTP请求）的功能。这个库的目标是简化在网页抓取和自动化过程中同时处理静态内容和动态加载内容的过程。</p> 
<p>使用Requestium，你可以先用Requests获取网页的静态内容，然后在需要时切换到Selenium来处理JavaScript生成的内容或者进行用户交互。这使得在处理混合型网页（既有静态内容又有动态加载内容）时更加高效和灵活。</p> 
<p><img src="https://images2.imgbox.com/cb/18/Jtg6DKcL_o.png" alt=""></p> 
<p>Requestium使用示例</p> 
<pre><code class="prism language-bash">from requestium <span class="token function">import</span> Session
<span class="token comment"># 创建一个Session实例</span>
s <span class="token operator">=</span> Session<span class="token punctuation">(</span>webdriver_path<span class="token operator">=</span><span class="token string">'path/to/your/webdriver'</span><span class="token punctuation">)</span>
<span class="token comment"># 使用Requests方式访问一个网页</span>
s.get<span class="token punctuation">(</span><span class="token string">'http://example.com'</span><span class="token punctuation">)</span>
<span class="token comment"># 现在你可以使用Selenium的方法，比如找到一个元素</span>
element <span class="token operator">=</span> s.driver.find_element_by_id<span class="token punctuation">(</span><span class="token string">'my-element'</span><span class="token punctuation">)</span>
<span class="token comment"># 或者执行JavaScript代码</span>
result <span class="token operator">=</span> s.driver.execute_script<span class="token punctuation">(</span><span class="token string">"return document.title;"</span><span class="token punctuation">)</span>
<span class="token comment"># 当你完成操作后，记得关闭WebDriver</span>
s.driver.quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>在这个例子中，我们首先创建了一个Session实例，指定WebDriver的路径。然后，我们可以像使用Requests一样使用s.get()方法来获取网页。接下来，我们可以使用Selenium的方法，如find_element_by_id()或execute_script()来处理动态内容。最后，当我们完成所有操作后，我们需要调用s.driver.quit()来关闭WebDriver。</p> 
<p>请注意，要使用Requestium，你需要预先安装Selenium和对应的WebDriver（例如ChromeDriver或GeckoDriver，取决于你使用的浏览器）。你也需要安装Requestium库，可以通过pip来安装：</p> 
<pre><code>pip install requestium
</code></pre> 
<p>由于Requestium是基于Selenium和Requests的，所以在使用前确保已经安装了这两个库：</p> 
<pre><code>pip install selenium requests
</code></pre> 
<p>并且根据你的操作系统和浏览器类型，下载并配置相应的WebDriver。</p> 
<p>requestium的高阶使用方法及实例代码</p> 
<p>Requestium的高阶使用方法通常涉及到更复杂的网页自动化和交互，包括处理动态加载内容、模拟用户操作、处理Cookies和Headers等。以下是一些高阶使用方法的示例代码：</p> 
<p>处理动态加载内容：使用Selenium的implicitly_wait方法来设置一个等待时间，让WebDriver在查找元素时自动等待页面加载完成。</p> 
<pre><code class="prism language-bash">from requestium <span class="token function">import</span> Session
s <span class="token operator">=</span> Session<span class="token punctuation">(</span>webdriver_path<span class="token operator">=</span><span class="token string">'path/to/your/webdriver'</span><span class="token punctuation">)</span>
s.driver.implicitly_wait<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment"># 设置最大等待时间为10秒</span>
s.get<span class="token punctuation">(</span><span class="token string">'http://example.com'</span><span class="token punctuation">)</span>
<span class="token comment"># 等待页面加载完成后查找元素</span>
element <span class="token operator">=</span> s.driver.find_element_by_id<span class="token punctuation">(</span><span class="token string">'my-dynamic-element'</span><span class="token punctuation">)</span>
</code></pre> 
<p>模拟用户操作：使用Selenium的方法来模拟用户点击、输入和滑动等操作。</p> 
<pre><code class="prism language-bash">from requestium <span class="token function">import</span> Session
s <span class="token operator">=</span> Session<span class="token punctuation">(</span>webdriver_path<span class="token operator">=</span><span class="token string">'path/to/your/webdriver'</span><span class="token punctuation">)</span>
s.get<span class="token punctuation">(</span><span class="token string">'http://example.com'</span><span class="token punctuation">)</span>
<span class="token comment"># 模拟点击元素</span>
element <span class="token operator">=</span> s.driver.find_element_by_id<span class="token punctuation">(</span><span class="token string">'my-button'</span><span class="token punctuation">)</span>
element.click<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 模拟输入文本</span>
input_field <span class="token operator">=</span> s.driver.find_element_by_name<span class="token punctuation">(</span><span class="token string">'my-input'</span><span class="token punctuation">)</span>
input_field.send_keys<span class="token punctuation">(</span><span class="token string">'Hello, World!'</span><span class="token punctuation">)</span>
<span class="token comment"># 模拟滑动操作</span>
s.driver.execute_script<span class="token punctuation">(</span><span class="token string">"window.scrollTo(0, document.body.scrollHeight);"</span><span class="token punctuation">)</span>
</code></pre> 
<p>处理Cookies和Headers：使用Requests的方式设置和管理Cookies和Headers。</p> 
<pre><code class="prism language-bash">from requestium <span class="token function">import</span> Session
s <span class="token operator">=</span> Session<span class="token punctuation">(</span>webdriver_path<span class="token operator">=</span><span class="token string">'path/to/your/webdriver'</span><span class="token punctuation">)</span>
<span class="token comment"># 设置请求头</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'User-Agent'</span><span class="token builtin class-name">:</span> <span class="token string">'My User Agent'</span><span class="token punctuation">}</span>
s.headers.update<span class="token punctuation">(</span>headers<span class="token punctuation">)</span>
<span class="token comment"># 发送带Header的GET请求</span>
s.get<span class="token punctuation">(</span><span class="token string">'http://example.com'</span>, <span class="token assign-left variable">headers</span><span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token comment"># 获取并保存Cookies</span>
cookies <span class="token operator">=</span> s.cookies
<span class="token comment"># 在后续请求中使用已保存的Cookies</span>
s.get<span class="token punctuation">(</span><span class="token string">'http://another-example.com'</span>, <span class="token assign-left variable">cookies</span><span class="token operator">=</span>cookies<span class="token punctuation">)</span>
</code></pre> 
<p>异步请求和多线程处理：虽然Requestium本身不直接支持异步请求或多线程处理，但你可以结合其他库（如asyncio或concurrent.futures）来实现这些功能。</p> 
<pre><code class="prism language-bash"><span class="token function">import</span> asyncio
from requestium <span class="token function">import</span> Session
async def fetch_page<span class="token punctuation">(</span>session, url<span class="token punctuation">)</span>:
    await session.get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token builtin class-name">return</span> session.driver.page_source
async def main<span class="token punctuation">(</span><span class="token punctuation">)</span>:
    s <span class="token operator">=</span> Session<span class="token punctuation">(</span>webdriver_path<span class="token operator">=</span><span class="token string">'path/to/your/webdriver'</span><span class="token punctuation">)</span>
    tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http://example1.com'</span>, <span class="token string">'http://example2.com'</span>, <span class="token string">'http://example3.com'</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">url</span> <span class="token keyword">in</span> urls:
        tasks.append<span class="token punctuation">(</span>fetch_page<span class="token punctuation">(</span>s, url<span class="token punctuation">))</span>
    results <span class="token operator">=</span> await asyncio.gather<span class="token punctuation">(</span>*tasks<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">result</span> <span class="token keyword">in</span> results:
        print<span class="token punctuation">(</span>result<span class="token punctuation">)</span>
asyncio.run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">))</span>
</code></pre> 
<p>在这个例子中，我们使用了asyncio库来并发地获取多个页面的源码。</p> 
<p>处理iframe：在某些情况下，网页中的元素可能嵌套在iframe中。Requestium允许你切换到iframe并进行操作。</p> 
<pre><code class="prism language-bash">from requestium <span class="token function">import</span> Session
s <span class="token operator">=</span> Session<span class="token punctuation">(</span>webdriver_path<span class="token operator">=</span><span class="token string">'path/to/your/webdriver'</span><span class="token punctuation">)</span>
s.get<span class="token punctuation">(</span><span class="token string">'http://example.com'</span><span class="token punctuation">)</span>
<span class="token comment"># 切换到iframe</span>
iframe <span class="token operator">=</span> s.driver.find_element_by_id<span class="token punctuation">(</span><span class="token string">'my-iframe'</span><span class="token punctuation">)</span>
s.driver.switch_to.frame<span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>
<span class="token comment"># 在iframe中查找和操作元素</span>
element <span class="token operator">=</span> s.driver.find_element_by_id<span class="token punctuation">(</span><span class="token string">'my-iframe-element'</span><span class="token punctuation">)</span>
element.click<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 切换回主文档</span>
s.driver.switch_to.default_content<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>处理弹出窗口和警告：使用Selenium的方法来处理网页中的弹出窗口和警告。</p> 
<pre><code class="prism language-bash">from requestium <span class="token function">import</span> Session
s <span class="token operator">=</span> Session<span class="token punctuation">(</span>webdriver_path<span class="token operator">=</span><span class="token string">'path/to/your/webdriver'</span><span class="token punctuation">)</span>
s.get<span class="token punctuation">(</span><span class="token string">'http://example.com'</span><span class="token punctuation">)</span>
<span class="token comment"># 点击会导致弹出窗口的按钮</span>
s.driver.find_element_by_id<span class="token punctuation">(</span><span class="token string">'my-button'</span><span class="token punctuation">)</span>.click<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 接受弹出的确认对话框</span>
alert <span class="token operator">=</span> s.driver.switch_to.alert
alert.accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 或者，如果要取消对话框</span>
<span class="token comment"># alert.dismiss()</span>
<span class="token comment"># 处理警告消息</span>
s.get<span class="token punctuation">(</span><span class="token string">'http://example.com'</span><span class="token punctuation">)</span>
<span class="token comment"># 执行会导致警告的JavaScript代码</span>
s.driver.execute_script<span class="token punctuation">(</span><span class="token string">"window.alert('Hello, World!');"</span><span class="token punctuation">)</span>
<span class="token comment"># 获取并接受警告</span>
alert <span class="token operator">=</span> s.driver.switch_to.alert
alert.accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>截图和录像：使用Selenium的方法来截取网页的屏幕截图或录制视频。</p> 
<pre><code class="prism language-bash">from requestium <span class="token function">import</span> Session
<span class="token function">import</span> <span class="token function">time</span>
s <span class="token operator">=</span> Session<span class="token punctuation">(</span>webdriver_path<span class="token operator">=</span><span class="token string">'path/to/your/webdriver'</span><span class="token punctuation">)</span>
s.get<span class="token punctuation">(</span><span class="token string">'http://example.com'</span><span class="token punctuation">)</span>
<span class="token comment"># 截取屏幕截图并保存为图片文件</span>
s.driver.get_screenshot_as_file<span class="token punctuation">(</span><span class="token string">'screenshot.png'</span><span class="token punctuation">)</span>
<span class="token comment"># 或者，获取截图的Base64编码</span>
screenshot_base64 <span class="token operator">=</span> s.driver.get_screenshot_as_base64<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 录制网页操作的视频（需要安装额外的库如ffmpeg）</span>
s.driver.start_recording_screen<span class="token punctuation">(</span>video_name<span class="token operator">=</span><span class="token string">'recording.mp4'</span><span class="token punctuation">)</span>
<span class="token comment"># 进行一些操作...</span>
time.sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment"># 操作持续5秒</span>
s.driver.stop_recording_screen<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>请注意，录制视频功能可能需要额外的库（如ffmpeg）和配置。在实际使用时，请确保已经正确安装和配置了这些依赖项。</p> 
<p>以上是一些Requestium的高阶使用方法及其示例代码。根据你的具体需求，可以结合这些方法来实现更复杂和灵活的网页自动化和抓取任务。同时，不要忘记在使用前安装所有必要的库并正确配置WebDriver。</p> 
<p><font face="幼圆" size="4" color="red">感兴趣的小伙伴，赠送全套Python学习资料，包含面试题、简历资料等具体看下方。<br> </font><br> <img src="https://images2.imgbox.com/86/a5/bKOoSdAy_o.png"></p> 
<p><strong>一、Python所有方向的学习路线</strong></p> 
<p>Python所有方向的技术点做的整理，形成各个领域的知识点汇总，它的用处就在于，你可以按照下面的知识点去找对应的学习资源，保证自己学得较为全面。</p> 
<p><img src="https://images2.imgbox.com/35/f5/VjOrGGBP_o.png" alt="img"><br> <img src="https://images2.imgbox.com/d3/1e/tqKmlI1F_o.png" alt="img"></p> 
<p><strong>二、Python必备开发工具</strong></p> 
<p>工具都帮大家整理好了，安装就可直接上手！<img src="https://images2.imgbox.com/28/81/ZkbwhZuU_o.gif" alt="img"></p> 
<p><strong>三、最新Python学习笔记</strong></p> 
<p>当我学到一定基础，有自己的理解能力的时候，会去阅读一些前辈整理的书籍或者手写的笔记资料，这些笔记详细记载了他们对一些技术点的理解，这些理解是比较独到，可以学到不一样的思路。</p> 
<p><img src="https://images2.imgbox.com/37/86/qvxfuHIJ_o.png" alt="img"></p> 
<p><strong>四、Python视频合集</strong></p> 
<p>观看全面零基础学习视频，看视频学习是最快捷也是最有效果的方式，跟着视频中老师的思路，从基础到深入，还是很容易入门的。</p> 
<p><img src="https://images2.imgbox.com/b3/1f/H8WWqDvx_o.png" alt="img"></p> 
<p><strong>五、实战案例</strong></p> 
<p>纸上得来终觉浅，要学会跟着视频一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。</p> 
<p><img src="https://images2.imgbox.com/f5/20/jWDUhvFV_o.png" alt="img"></p> 
<p><strong>六、面试宝典</strong></p> 
<p><img src="https://images2.imgbox.com/65/92/wBGgdVfY_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/ba/7a/MkDmadjj_o.png" alt="在这里插入图片描述"></p> 
<p><strong>简历模板</strong><img src="https://images2.imgbox.com/3f/c7/x8o48zc5_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ad/04/694cxvRG_o.png"><br> 若有侵权，请联系删除</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/80c4af79bfdaea737dd9b9c004eeece7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">4款简单Python代码，彻底掌握try语句的用法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ae89ac01a722513625981b3c6b1f0a6b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">财务分析进阶篇：终于有人把利润分析怎么做给讲清了！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>