<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【OpenCV学习】初识OpenCV - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【OpenCV学习】初识OpenCV" />
<meta property="og:description" content="🌈据说，看我文章时 关注、点赞、收藏 的 帅哥美女们 心情都会不自觉的好起来。
前言：
🧡作者简介：大家好我是 user_from_future ，意思是 “ 来自未来的用户 ” ，寓意着未来的自己一定很棒~
✨个人主页：点我直达，在这里肯定能找到你想要的~
👍专栏介绍：OpenCV从入门到放弃 ，一个学习OpenCV的专栏~
初识OpenCV 安装 OpenCV启动 Jupyter创建和销毁窗口图片在 OpenCV 中的表现 安装 OpenCV 博主学习的是通过虚拟环境来学习 OpenCV ，使用 3.4.1.15 这个版本。因为在 3.4.2 版本之后有些算法申请了专利，就用不了。
但 3.4.1.15 这个版本目前最高只支持到 Python3.6 ，博主就另外又安装了 Python3.6.8 作为学习 OpenCV 使用。
在 opencv-python 模块的下载页面查找，可以明显发现其 3.4.1.15 版本只支持 Python2.7 、 Python3.4 、 Python3.5 、 Python3.6 这些版本，我们能挑到的最高版本是 Python3.6.8 。
在官网 Python官网下载 中找到 Python3.6.8 版本。
先创建并进入虚拟环境：先要使用 Python3.6.8 安装 pip install virtualenv ，才能创建虚拟环境，然后进入环境的 Scripts 目录，输入 activate 激活当前环境，出现 (OpenCV) 就代表成功进入当前环境了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1a0fcf3194a912fedcef2bc862669468/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-12T00:00:00+08:00" />
<meta property="article:modified_time" content="2022-05-12T00:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【OpenCV学习】初识OpenCV</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>🌈据说，看我文章时 <strong>关注、点赞、收藏</strong> 的 <strong>帅哥美女们</strong> 心情都会不自觉的好起来。</p> 
</blockquote> 
<blockquote> 
 <p><strong>前言：</strong><br> 🧡作者简介：大家好我是 <strong>user_from_future</strong> ，意思是 <strong>“ 来自未来的用户 ”</strong> ，寓意着未来的自己一定很棒~<br> ✨个人主页：<a href="https://blog.csdn.net/user_from_future">点我直达</a>，在这里肯定能找到你想要的~<br> 👍专栏介绍：<a href="https://blog.csdn.net/user_from_future/category_11808598.html">OpenCV从入门到放弃</a> ，一个学习OpenCV的专栏~</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/09/d3/ahYYDugg_o.png" alt="人生苦短，我用python"></p> 
<p></p> 
<div class="toc"> 
 <h4>初识OpenCV</h4> 
 <ul><li><a href="#_OpenCV_10" rel="nofollow">安装 OpenCV</a></li><li><a href="#_Jupyter_30" rel="nofollow">启动 Jupyter</a></li><li><a href="#_40" rel="nofollow">创建和销毁窗口</a></li><li><a href="#_OpenCV__90" rel="nofollow">图片在 OpenCV 中的表现</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_OpenCV_10"></a>安装 OpenCV</h2> 
<p>博主学习的是通过虚拟环境来学习 <strong>OpenCV</strong> ，使用 <strong>3.4.1.15</strong> 这个版本。因为在 <strong>3.4.2</strong> 版本之后有些算法申请了专利，就用不了。<br> 但 <strong>3.4.1.15</strong> 这个版本目前最高只支持到 <strong>Python3.6</strong> ，博主就另外又安装了 <strong>Python3.6.8</strong> 作为学习 <strong>OpenCV</strong> 使用。</p> 
<p>在 <strong>opencv-python</strong> 模块的下载页面查找，可以明显发现其 <strong>3.4.1.15</strong> 版本只支持 <strong>Python2.7</strong> 、 <strong>Python3.4</strong> 、 <strong>Python3.5</strong> 、 <strong>Python3.6</strong> 这些版本，我们能挑到的最高版本是 <strong>Python3.6.8</strong> 。<br> <img src="https://images2.imgbox.com/15/32/bMUDscrt_o.png" alt="在这里插入图片描述"></p> 
<p>在官网 <a href="https://www.python.org/downloads/windows/" rel="nofollow">Python官网下载</a> 中找到 <strong>Python3.6.8</strong> 版本。<br> <img src="https://images2.imgbox.com/1c/d2/hB7FqPX9_o.png" alt="在这里插入图片描述"></p> 
<p>先创建并进入虚拟环境：先要使用 <strong>Python3.6.8</strong> 安装 <code>pip install virtualenv</code> ，才能创建虚拟环境，然后进入环境的 <strong>Scripts</strong> 目录，输入 <code>activate</code> 激活当前环境，出现 <strong>(OpenCV)</strong> 就代表成功进入当前环境了。<br> 然后安装需要的一些模块：<code>pip install opencv-python==3.4.1.15 opencv--contrib-python==3.4.1.15 jupyter matplotlib -i https://pypi.douban.com/simple</code>。<br> 其中 <strong>opencv-python</strong> 是 <strong>OpenCV</strong> 的核心库，另外的 <strong>opencv–contrib-python</strong> 是拓展库，前期可以先不安装拓展库，然后 <strong>jupyter</strong> 是网页编辑器，方便可视化， <strong>matplotlib</strong> 就是可视化库了，图像处理好后可以使用它可视化到 <strong>jupyter</strong> 的网页上。<br> 安装成功显示：<br> <img src="https://images2.imgbox.com/d3/12/S0OPcvB0_o.png" alt="在这里插入图片描述"></p> 
<p>安装成功后，<code>pip list</code> 显示的模块。<br> <img src="https://images2.imgbox.com/a7/fb/zGGdccxp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d3/75/xwnwvsgP_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_Jupyter_30"></a>启动 Jupyter</h2> 
<p>确保我们现在仍然在 <strong>Scripts</strong> 文件夹内，然后输入 <code>jupyter notebook --notebook-dir='G:/opencvStudy/note'</code> 以指定目录打开 jupyter 网页编辑器，出现类似图下的网页就属于启动成功了（文件列表可能不一样）：<br> <img src="https://images2.imgbox.com/96/48/OadFxJCB_o.png" alt="在这里插入图片描述"></p> 
<p><strong>Jupyter</strong> 有一些常用的快捷方式：</p> 
<ul><li>直接 <kbd>Enter</kbd> 只会回车。</li><li><kbd>Ctrl</kbd> + <kbd>Enter</kbd> 将会执行当前单元格。</li><li><kbd>Shift</kbd> / <kbd>Alt</kbd> + <kbd>Enter</kbd> 将会执行当前单元格，并在下方新建一个单元格。</li><li>在函数处按 <kbd>Shift</kbd> + <kbd>Tab</kbd> 可以显示简易帮助说明，按两下 <kbd>Tab</kbd> 可以显示详细帮助。</li></ul> 
<h2><a id="_40"></a>创建和销毁窗口</h2> 
<p>每次使用前，需要导入：</p> 
<ul><li><code>import cv2</code> ：可以直接使用，但其 <strong>3.4.1.15</strong> 版本在 <strong>PyCharm</strong> 中将不会提示语法：<img src="https://images2.imgbox.com/29/8a/tiQCODdz_o.png" alt="在这里插入图片描述"></li><li>但如果使用 <code>from cv2 import cv2</code> ：这种导入方法，在 <strong>PyCharm</strong> 中是可以显示代码提示的（<strong>纯手敲大佬请无视此区别</strong>）：<img src="https://images2.imgbox.com/ed/55/fx00PIbr_o.png" alt="在这里插入图片描述"></li></ul> 
<p>具体情况还是得看你使用的是哪款编辑器，以及你是否是大佬~</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> cv2 <span class="token keyword">import</span> cv2
<span class="token comment"># 创建窗口。</span>
cv2<span class="token punctuation">.</span>namedWindow<span class="token punctuation">(</span><span class="token string">'window'</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>WINDOW_NORMAL<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a4/fb/FPSy6nkg_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/a2/fc/jyB5uK0s_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/18/a2/bvqEvXhy_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到有三组共六钟参数，被分同一组的是由0和其他数字组成的 <strong>flags</strong> 。<br> 其中 <code>WINDOW_AUTOSIZE</code> 和 <code>WINDOW_NORMAL</code> 表示是自动调整大小（手动不可调）或是手动调整窗口；<br> <code>WINDOW_FREERATIO</code> 和 <code>WINDOW_KEEPRATIO</code> 表示在调整的时候不考虑图像比例（铺满窗口）或是保持图像比例，<code>ratio</code> 就是比例的意思；<br> <code>WINDOW_GUI_NORMAL</code> 和 <code>WINDOW_GUI_EXPANDED</code> 表示绘制窗口是就方法（没有状态栏和工具栏）或是增强型GUI。（目前我还没看出来新方法哪里增强了）</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> cv2 <span class="token keyword">import</span> cv2
<span class="token comment"># 创建窗口。</span>
cv2<span class="token punctuation">.</span>namedWindow<span class="token punctuation">(</span><span class="token string">'window'</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>WINDOW_NORMAL<span class="token punctuation">)</span>
<span class="token comment"># 更改窗口的大小。</span>
cv2<span class="token punctuation">.</span>resizeWindow<span class="token punctuation">(</span><span class="token string">'window'</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span>
</code></pre> 
<p>更改窗口大小是先宽后高。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> cv2 <span class="token keyword">import</span> cv2
<span class="token comment"># 创建窗口。</span>
cv2<span class="token punctuation">.</span>namedWindow<span class="token punctuation">(</span><span class="token string">'window'</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>WINDOW_NORMAL<span class="token punctuation">)</span>
<span class="token comment"># 更改窗口的大小。</span>
cv2<span class="token punctuation">.</span>resizeWindow<span class="token punctuation">(</span><span class="token string">'window'</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span>
key <span class="token operator">=</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> key <span class="token operator">==</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'销毁窗口'</span><span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><code>waitKey</code> 接受一个毫秒参数，如果参数为非正整数，就一直等下去，如果指定了正整数（只能接受整数，浮点数会报错），则会等待这么长时间，如果没有等待到按键，则退出等待并返回 -1 。<br> 如果等待到了按键，则会返回按键的 ascii 码值（一个整数值），<code>ord('')</code> 就是返回字符的 ascii 码值：<br> <img src="https://images2.imgbox.com/dc/34/BPnw0Rqy_o.png" alt="在这里插入图片描述"><br> 也只会接受 ascii 码表里的按键，像 <kbd>Ctrl</kbd> 、 <kbd>Shift</kbd> 、 <kbd>Alt</kbd> 这些就不会接收了，而且这些都是功能键，单独接收没有意义。</p> 
<h2><a id="_OpenCV__90"></a>图片在 OpenCV 中的表现</h2> 
<p>首先读取的图片类型支持下图中的这些：</p> 
<p><img src="https://images2.imgbox.com/d0/16/EV1LxFsW_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> cv2 <span class="token keyword">import</span> cv2
<span class="token comment"># 默认是按照彩色图片来读取的。</span>
cat <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'./cat.jpeg'</span><span class="token punctuation">)</span>
<span class="token comment"># numpy的ndarray。</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span>
</code></pre> 
<p>读取出来是一个三维数组：</p> 
<p><img src="https://images2.imgbox.com/7f/90/jpnT4QrR_o.png" alt="在这里插入图片描述"><br> 这里正好说明一下 <code>numpy</code> 的数组形状和 <code>cv2</code> 的有什么不同：<br> <code>cv2</code> 的参数都是先给宽，再给高；<br> <code>numpy</code> 的参数都是先给高，再给宽，因为三维数组的格式化打印，<br> 是最外层数组是由多行组成，相当于是图片的高；<br> 中间层数组每个是由多列组成，相当于是图片的宽。<br> 然后颜色 R 、G 、B 都是由 0 - 255 的数组成的，换算成无符号位的二进制是 00000000 - 11111111，所以 <code>opencv</code> 读取出来的彩色图片会被处理成类型是uint8（8位二进制整数）的三维数组。</p> 
<p>再来看看 <code>matplotlib</code> 对它的显示效果：</p> 
<p><img src="https://images2.imgbox.com/db/b4/Xa6MRN6s_o.png" alt="在这里插入图片描述"><br> 再看看原图：</p> 
<p><img src="https://images2.imgbox.com/d5/2b/fbMCjDDF_o.jpg" alt="在这里插入图片描述"><br> 是不是发现这个猫有明显的颜色变化？<br> 这是因为 <strong>opencv</strong> 读进来的图片数据的通道不是默认的<strong>RGB</strong>，而是<strong>BGR</strong>，完全相反的颜色数组，要想正常显示，可以对数组的最内层施加反向操作：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> cv2 <span class="token keyword">import</span> cv2
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token comment"># 默认是按照彩色图片来读取的。</span>
cat <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'./cat.jpeg'</span><span class="token punctuation">)</span>
<span class="token comment"># numpy的ndarray。</span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
     <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>cat<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
         cat<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> cat<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cat<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>经过这样处理后的颜色就正常了，可爱的猫咪又出现了~：<br> <img src="https://images2.imgbox.com/5a/1c/1H9z7kv3_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a74f70a468ee6e233c539a297b44cad8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">判断一个数是否为2的幂次方(位运算)C&#43;&#43;</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1ac60286310b3f2a481c3ac47a20ada8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue电商后台管理系统功能展示</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>