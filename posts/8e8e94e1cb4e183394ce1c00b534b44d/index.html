<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言函数fopen，fclose的用法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C语言函数fopen，fclose的用法" />
<meta property="og:description" content="转自http://blog.sina.com.cn/s/blog_60059a210101277j.html 函数简介 函数功能： 打开一个文件
函数原型：FILE * fopen(const char * path,const char * mode);
相关函数：open，fclose，fopen_s[1]﻿ ，_wfopen
所需库： &lt;stdio.h&gt;
返回值： 文件顺利打开后，指向该流的文件指针就会被返回。若果文件打开失败则返回NULL，并把错误代码存在errno 中。
一般而言，打开文件后会作一些文件读取或写入的动作，若打开文件失败，接下来的读写动作也无法顺利进行，所以在fopen()后请作错误判断及处理。
参数说明：
参数path字符串包含欲打开的文件路径及文件名，参数mode字符串则代表着流形态。
mode有下列几种形态字符串:
r 打开只读文件，该文件必须存在。
r&#43; 打开可读写的文件，该文件必须存在。
rb&#43; 读写打开一个二进制文件，只允许读写数据。
rt&#43; 读写打开一个文本文件，允许读和写。
w 打开只写文件，若文件存在则文件长度清为0，即该文件内容会消失。若文件不存在则建立该文件。
w&#43; 打开可读写文件，若文件存在则文件长度清为零，即该文件内容会消失。若文件不存在则建立该文件。
a 以附加的方式打开只写文件。若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾，即文件原先的内容会被保留。（EOF符保留）
a&#43; 以附加方式打开可读写的文件。若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾后，即文件原先的内容会被保留。 （原来的EOF符不保留）
wb 只写打开或新建一个二进制文件；只允许写数据。
wb&#43; 读写打开或建立一个二进制文件，允许读和写。
wt&#43; 读写打开或着建立一个文本文件；允许读写。
at&#43; 读写打开一个文本文件，允许读或在文本末追加数据。
ab&#43; 读写打开一个二进制文件，允许读或在文件末追加数据。
上述的形态字符串都可以再加一个b字符，如rb、w&#43;b或ab＋等组合，加入b 字符用来告诉函数库打开的文件为二进制文件，而非纯文字文件。不过在POSIX系统，包含Linux都会忽略该字符。由fopen()所建立的新文件会具有S_IRUSR|S_IWUSR|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH(0666)权限，此文件权限也会参考umask 值。
有些C编译系统可能不完全提供所有这些功能，有的C版本不用&#34;r&#43;&#34;,&#34;w&#43;&#34;,&#34;a&#43;&#34;,而用&#34;rw&#34;,&#34;wr&#34;,&#34;ar&#34;等，读者注意所用系统的规定。
表格 1. fopen() 中的 mode 的可能值列表
mode
说明
&#39;r&#39;
只读方式打开，将文件指针指向文件头。
&#39;r&#43;&#39;
读写方式打开，将文件指针指向文件头。
&#39;w&#39;
写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/8e8e94e1cb4e183394ce1c00b534b44d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-08-04T17:12:54+08:00" />
<meta property="article:modified_time" content="2014-08-04T17:12:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言函数fopen，fclose的用法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="articalTitle" style="clear:both; line-height:20px; padding-bottom:10px; color:rgb(70,70,70); font-family:Verdana,宋体,sans-serif; font-size:13.333333969116211px; background-color:rgb(248,236,216)"> 
 <span style="line-height:21.111112594604492px; font-family:simsun; font-size:14px"><strong>转自<a target="_blank" href="http://blog.sina.com.cn/s/blog_60059a210101277j.html" rel="nofollow noopener noreferrer">http://blog.sina.com.cn/s/blog_60059a210101277j.html</a></strong></span> 
</div> 
<div class="articalTitle" style="clear:both; line-height:20px; padding-bottom:10px; color:rgb(70,70,70); font-family:Verdana,宋体,sans-serif; font-size:13.333333969116211px; background-color:rgb(248,236,216)"> 
 <span style="line-height:21.111112594604492px; font-family:simsun; font-size:14px"><strong>函数简介</strong></span> 
</div> 
<div id="sina_keyword_ad_area2" class="articalContent   " style="width:690px; clear:both; padding-top:18px; font-size:14px; line-height:21.111112594604492px; padding-bottom:30px; word-wrap:normal; word-break:normal; overflow:hidden; font-family:simsun; background-color:rgb(248,236,216)"> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　<strong>函数功能：</strong> 打开一个文件</p> 
 <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> <span style="color:#464646">　　</span><span style="color:rgb(70,70,70)"><strong>函数原型：</strong></span><span style="color:#464646">FILE * fopen(</span><span style="color:#ff0000">const char * path,const char * mode</span><span style="color:#464646">);</span></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　<strong>相关函数：</strong><a target="_blank" href="http://baike.baidu.com/view/26337.htm" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(118,95,71)">open</a>，<a target="_blank" href="http://baike.baidu.com/view/656642.htm" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(118,95,71)">fclose</a>，fopen_s<sup>[1]</sup><a target="_blank" name="ref_%5B1%5D" style="text-decoration:underline; color:rgb(118,95,71)"></a>﻿ ，_wfopen</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　<strong>所需库：</strong> &lt;<a target="_blank" href="http://baike.baidu.com/view/538727.htm" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(118,95,71)">stdio.h</a>&gt;</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　<strong>返回值：</strong> 文件顺利打开后，指向该流的文件指针就会被返回。若果文件打开失败则返回NULL，并把错误代码存在errno 中。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　一般而言，打开文件后会作一些文件读取或写入的动作，若打开文件失败，接下来的读写动作也无法顺利进行，所以在fopen()后请作错误判断及处理。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　<strong>参数说明：</strong></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　参数path字符串包含欲打开的文件路径及文件名，参数mode字符串则代表着流形态。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　mode有下列几种形态字符串:</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　r 打开<a target="_blank" href="http://baike.baidu.com/view/359224.htm" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(118,95,71)">只读文件</a>，该文件必须存在。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　r+ 打开可读写的文件，该文件必须存在。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　rb+ 读写打开一个二进制文件，只允许读写数据。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　rt+ 读写打开一个文本文件，允许读和写。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　w 打开只写文件，若文件存在则文件长度清为0，即该文件内容会消失。若文件不存在则建立该文件。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　w+ 打开可读写文件，若文件存在则文件长度清为零，即该文件内容会消失。若文件不存在则建立该文件。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　a 以附加的方式打开只写文件。若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾，即文件原先的内容会被保留。（EOF符保留）</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　a+ 以附加方式打开可读写的文件。若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾后，即文件原先的内容会被保留。 （原来的EOF符不保留）</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　wb 只写打开或新建一个二进制文件；只允许写数据。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　wb+ 读写打开或建立一个二进制文件，允许读和写。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　wt+ 读写打开或着建立一个文本文件；允许读写。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　at+ 读写打开一个文本文件，允许读或在文本末追加数据。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　ab+ 读写打开一个二进制文件，允许读或在文件末追加数据。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　上述的形态字符串都可以再加一个b字符，如rb、w+b或ab＋等组合，加入b 字符用来告诉函数库打开的文件为二进制文件，而非纯文字文件。不过在POSIX系统，包含Linux都会忽略该字符。由fopen()所建立的新文件会具有S_IRUSR|S_IWUSR|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH(0666)权限，此文件权限也会参考umask 值。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　有些C编译系统可能不完全提供所有这些功能，有的C版本不用"r+","w+","a+",而用"rw","wr","ar"等，读者注意所用系统的规定。</p> 
 <br> 
 <p style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> <a target="_blank" name="AEN43060" style="text-decoration:underline; color:rgb(118,95,71)"></a><strong>表格 1. fopen() 中的 <var>mode</var> 的可能值列表</strong></p> 
 <table border="1" cellpadding="0" style="color:rgb(70,70,70); margin:0px; padding:0px"><thead><tr><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <var><strong>mode</strong></var></p> </td><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <strong>说明</strong></p> </td></tr></thead><tbody><tr><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <var>'r'</var></p> </td><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> 只读方式打开，将文件指针指向文件头。</p> </td></tr><tr><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <var>'r+'</var></p> </td><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> 读写方式打开，将文件指针指向文件头。</p> </td></tr><tr><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <var>'w'</var></p> </td><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> 写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</p> </td></tr><tr><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <var>'w+'</var></p> </td><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> 读写方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</p> </td></tr><tr><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <var>'a'</var></p> </td><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> 写入方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。</p> </td></tr><tr><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <var>'a+'</var></p> </td><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> 读写方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。</p> </td></tr><tr><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <var>'x'</var></p> </td><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> 创建并以写入方式打开，将文件指针指向文件头。如果文件已存在，则 <strong>fopen()</strong> 调用失败并返回 <tt><strong>FALSE</strong></tt>，并生成一条 <tt><strong>E_WARNING</strong></tt> 级别的错误信息。如果文件不存在则尝试创建之。这和给 底层的 <var>open(2)</var> 系统调用指定 <var>O_EXCL|O_CREAT</var> 标记是等价的。此选项被 PHP 4.3.2 以及以后的版本所支持，仅能用于本地文件。</p> </td></tr><tr><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> <var>'x+'</var></p> </td><td style="margin:0px; padding:0px; font-family:Verdana,宋体,sans-serif; line-height:20px"> <p align="left" style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal"> 创建并以读写方式打开，将文件指针指向文件头。如果文件已存在，则 <strong>fopen()</strong> 调用失败并返回 <tt><strong>FALSE</strong></tt>，并生成一条 <tt><strong>E_WARNING</strong></tt> 级别的错误信息。如果文件不存在则尝试创建之。这和给 底层的 <var>open(2)</var> 系统调用指定 <var>O_EXCL|O_CREAT</var> 标记是等价的。此选项被 PHP 4.3.2 以及以后的版本所支持，仅能用于本地文件。</p> </td></tr></tbody></table> 
 <p style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> <strong>注:</strong> 不同的操作系统家族具有不同的行结束习惯。当你写入一个文本文件并想插入一个新行时，你需要使用符合你操作系统的行结束符号。基于 Unix 的系统使用 <var>\n</var> 作为行结束字符，基于 Windows 的系统使用<var>\r\n</var> 作为行结束字符，基于 Macintosh 的系统使用 <var>\r</var> 作为行结束字符。</p> 
 <p style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 如果写入文件时使用了错误的行结束符号，则其它应用程序打开这些文件时可能会表现得很怪异。</p> 
 <p style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> Windows 下提供了一个文本转换标记（<var>'t'</var>）可以透明地将 <var>\n</var> 转换为 <var>\r\n</var>。与此对应你还可以使用 <var>'b'</var>来强制使用二进制模式，这样就不会转换你的数据。要使用这些标记，要么用 <var>'b'</var> 或者用 <var>'t'</var> 作为 <var>mode</var>参数的最后一个字符。</p> 
 <p style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 默认的转换模式依赖于 SAPI 和你使用的 PHP 版本，因此为了便于移植鼓励你总是指定恰当的标记。当操作以 <var>\n</var> 作为行结束定界符的纯文本文件时，如果你还期望这些文件可以用于其它应用程序例如 Notepad，则应该在脚本中使用 <var>'t'</var> 模式。在所有其它情况下使用 <var>'b'</var>。</p> 
 <p style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 在操作二进制文件时如果没有指定 <var>'b'</var> 标记，可能会碰到一些奇怪的问题，包括坏掉的图片文件以及关于<var>\r\n</var> 字符的奇怪问题。</p> 
 <p style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> <strong>注:</strong> 为移植性考虑，强烈建议在用 <strong>fopen()</strong> 打开文件时总是使用 <var>'b'</var> 标记。</p> 
 <p style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> <strong>注:</strong> 再一次，为移植性考虑，强烈建议你重写那些依赖于 <var>'t'</var> 模式的代码使其使用正确的行结束符并改成<var>'b'</var> 模式。</p> 
 <p style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 如果也需要在 <a target="_blank" href="http://www.kuqin.com/php5_doc/ini.core.html#ini.include-path" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(118,95,71)">include_path</a> 中搜寻文件的话，可以将可选的第三个参数 <var>use_include_path</var> 设为 '1' 或 <tt><strong>TRUE</strong></tt>。 如果打开失败，本函数返回 <tt><strong>FALSE</strong></tt>。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px">  <wbr></wbr><a target="_blank" name="1_2" style="text-decoration:underline; color:rgb(118,95,71)"></a><strong>程序示例</strong></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　<strong>程序示例1</strong></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　#include &lt;stdio.h&gt;</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　#include &lt;stdlib.h&gt; //为了使用exit()</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　int main()</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　{<!-- --></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　int ch;</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　FILE* fp;</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　char fname[50]; //用于存放文件名</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　printf("输入文件名：");</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　scanf("%s",fname);</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　fp=fopen(fname,"r"); //只供读取</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　if(fp==NULL) //如果失败了</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　{<!-- --></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　printf("错误！");</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　exit(1); //中止程序</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　}</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　//getc()用于在打开文件中获取一个字符</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　while((ch=getc(fp))!=EOF)</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　putchar(ch);</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　fclose(fp); //关闭文件</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　return 0;</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　}</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　注意！初学者往往会犯一个错误，即在输入文件名时不加后缀名，请注意加上！</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　<strong>程序示例2<sup>[2]</sup></strong><a target="_blank" name="ref_%5B2%5D" style="text-decoration:underline; color:rgb(118,95,71)"></a><strong>﻿</strong></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　#include &lt;stdio.h&gt;</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　FILE *stream, *stream2;</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　int main( void )</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　{<!-- --></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　int numclosed;</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　// Open for read (will fail if file "crt_fopen.c" does not exist)</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　if( (stream = fopen( "crt_fopen.c", "r" )) == NULL ) // C4996</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　// Note: fopen is deprecated; consider using fopen_s instead</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　printf( "The file 'crt_fopen.c' was not opened\n" );</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　else</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　printf( "The file 'crt_fopen.c' was opened\n" );</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　// Open for write</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　if( (stream2 = fopen( "data2", "w+" )) == NULL ) // C4996</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　printf( "The file 'data2' was not opened\n" );</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　else</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　printf( "The file 'data2' was opened\n" );</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　// Close stream if it is not NULL</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　if( stream)</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　{<!-- --></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　if ( fclose( stream ) )</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　{<!-- --></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　printf( "The file 'crt_fopen.c' was not closed\n" );</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　}</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　}</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　// All other files are closed:</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　numclosed = _fcloseall( );</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　printf( "Number of files closed by _fcloseall: %u\n", numclosed );</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　}</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　<strong>说明</strong></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> <strong>　　</strong>resource <strong>fopen</strong> ( string filename, string mode [, bool use_include_path [, resource zcontext]] )</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　<strong>fopen()</strong> 将 filename 指定的名字资源绑定到一个流上。如果 filename 是 "scheme://..." 的格式，则被当成一个 URL，PHP 将搜索协议处理器（也被称为封装协议）来处理此模式。如果该协议尚未注册封装协议，PHP 将发出一条消息来帮助检查<a target="_blank" href="http://baike.baidu.com/view/54.htm" rel="nofollow noopener noreferrer" style="text-decoration:none; color:rgb(118,95,71)">脚本</a>中潜在的问题并将 filename 当成一个普通的文件名继续执行下去。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 如果 PHP 认为 filename 指定的是一个本地文件，将尝试在该文件上打开一个流。该文件必须是 PHP 可以访问的，因此需要确认文件访问权限允许该访问。如果激活了 安全模式 或者 open_basedir 则会应用进一步的限制。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px">  <wbr></wbr></p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 2 函数名: fclose</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　功 能: 关闭一个流。注意：使用fclose函数就可以把缓冲区内最后剩余的数据输出到磁盘文件中，并释放文件指针和有关的缓冲区。</p> 
 <p align="left" style="color:rgb(70,70,70); margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21.111112594604492px"> 　　用 法: int fclose(FILE *stream);</p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7a332b54013e01389f8a6acc40f0aa65/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ajax请求获取响应的StatusCode</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4d8062dcc6d3604b4d2b988ae9519049/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">hadoop Shell命令详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>