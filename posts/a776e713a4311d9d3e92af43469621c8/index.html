<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL学习：50道经典题目（含参考答案）(更新中） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL学习：50道经典题目（含参考答案）(更新中）" />
<meta property="og:description" content="50道经典MySQL练习题，参考博客：
SQL经典50题练习_sql习题_不高冷面包人的博客-CSDN博客c
1 创建数据表 学生表
CREATE TABLE IF NOT EXISTS `student`( `student_id` INT(10) NOT NULL AUTO_INCREMENT COMMENT &#39;学号&#39;, `student_name` VARCHAR(10) NOT NULL DEFAULT &#39;匿名&#39; COMMENT &#39;姓名&#39;, `birthday` DATETIME NOT NULL COMMENT &#39;出生日期&#39;, `gender` VARCHAR(10) NOT NULL DEFAULT &#39;男&#39; COMMENT &#39;性别&#39;, PRIMARY KEY(`student_id`) )ENGINE=INNODB CHARSET=utf8; INSERT INTO `student` VALUES (1 , &#39;赵雷&#39; , &#39;1990-01-01&#39; , &#39;男&#39;), (2 , &#39;钱电&#39; , &#39;1990-12-21&#39; , &#39;男&#39;), (3 , &#39;孙风&#39; , &#39;1990-12-20&#39; , &#39;男&#39;), (4 , &#39;李云&#39; , &#39;1990-12-06&#39; , &#39;男&#39;), (5 , &#39;周梅&#39; , &#39;1991-12-01&#39; , &#39;女&#39;), (6 , &#39;吴兰&#39; , &#39;1992-01-01&#39; , &#39;女&#39;), (7 , &#39;郑竹&#39; , &#39;1989-01-01&#39; , &#39;女&#39;), (8 , &#39;张三&#39; , &#39;2017-12-20&#39; , &#39;女&#39;), (9 , &#39;李四&#39; , &#39;2017-12-25&#39; , &#39;女&#39;), (10 , &#39;李四&#39; , &#39;2012-06-06&#39; , &#39;女&#39;), (11 , &#39;赵六&#39; , &#39;2013-06-13&#39; , &#39;女&#39;), (12 , &#39;孙七&#39; , &#39;2014-06-01&#39; , &#39;女&#39;); 课程表" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a776e713a4311d9d3e92af43469621c8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-24T18:09:26+08:00" />
<meta property="article:modified_time" content="2023-05-24T18:09:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL学习：50道经典题目（含参考答案）(更新中）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:justify;">50道经典MySQL练习题，参考博客：</p> 
<p style="text-align:justify;"><a href="https://blog.csdn.net/weixin_43348955/article/details/120481733?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-120481733-blog-125492544.235%5Ev29%5Epc_relevant_default_base3&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=4" title="SQL经典50题练习_sql习题_不高冷面包人的博客-CSDN博客c">SQL经典50题练习_sql习题_不高冷面包人的博客-CSDN博客c</a></p> 
<hr> 
<h2 id="1%20%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8" style="text-align:justify;"><span style="color:#1c7331;"><strong>1 创建数据表</strong></span></h2> 
<hr> 
<p style="text-align:justify;">学生表</p> 
<pre><code class="language-sql">CREATE TABLE IF NOT EXISTS `student`(
    `student_id` INT(10) NOT NULL AUTO_INCREMENT COMMENT '学号',
    `student_name` VARCHAR(10) NOT NULL DEFAULT '匿名' COMMENT '姓名',
    `birthday` DATETIME NOT NULL COMMENT '出生日期',
    `gender` VARCHAR(10) NOT NULL DEFAULT '男' COMMENT '性别',
    PRIMARY KEY(`student_id`)
)ENGINE=INNODB CHARSET=utf8;

INSERT INTO `student` VALUES
(1 , '赵雷' , '1990-01-01' , '男'),
(2 , '钱电' , '1990-12-21' , '男'),
(3 , '孙风' , '1990-12-20' , '男'),
(4 , '李云' , '1990-12-06' , '男'),
(5 , '周梅' , '1991-12-01' , '女'),
(6 , '吴兰' , '1992-01-01' , '女'),
(7 , '郑竹' , '1989-01-01' , '女'),
(8 , '张三' , '2017-12-20' , '女'),
(9 , '李四' , '2017-12-25' , '女'),
(10 , '李四' , '2012-06-06' , '女'),
(11 , '赵六' , '2013-06-13' , '女'),
(12 , '孙七' , '2014-06-01' , '女');</code></pre> 
<div> 
 <p style="text-align:justify;">课程表</p> 
 <pre><code class="language-sql">CREATE TABLE IF NOT EXISTS `course`(
    `course_id` INT(4) NOT NULL AUTO_INCREMENT COMMENT '课程编号',
    `course_name` VARCHAR(10) NOT NULL COMMENT '课程名',
    `teacher_id` INT(10) NOT NULL COMMENT '任课教师工号',
    PRIMARY KEY(`course_id`)
)ENGINE=INNODB CHARSET=utf8;

INSERT INTO `course` VALUES
(1, '语文', 2),
(2, '数学', 1),
(3, '英语', 3);</code></pre> 
 <p style="text-align:justify;">教师表</p> 
 <pre><code class="language-sql">CREATE TABLE IF NOT EXISTS `teacher`(
    `teacher_id` INT(10) NOT NULL AUTO_INCREMENT COMMENT '教师工号',
    `teacher_name` VARCHAR(10) NOT NULL DEFAULT '匿名' COMMENT '教师姓名',
    PRIMARY KEY(`teacher_id`)
)ENGINE=INNODB CHARSET=utf8;

INSERT INTO `teacher` VALUES
(1, '高斯'),
(2, '李白'),
(3, 'Trump');</code></pre> 
 <p style="text-align:justify;">成绩表</p> 
 <pre><code class="language-sql">CREATE TABLE IF NOT EXISTS `score`(
    `student_id` INT(10) NOT NULL COMMENT '学号',
    `course_id` INT(4) NOT NULL COMMENT '课程编号',
    `score` DECIMAL(18,1) COMMENT '成绩',
    KEY(`course_id`)
)ENGINE=INNODB CHARSET=utf8;

INSERT INTO `score` VALUES
(1 , 1 , 80),
(1 , 2 , 90),
(1 , 3 , 99),
(2 , 1 , 70),
(2 , 2 , 60),
(2 , 3 , 80),
(3 , 1 , 80),
(3 , 2 , 80),
(3 , 3 , 80),
(4 , 1 , 50),
(4 , 2 , 30),
(4 , 3 , 20),
(5 , 1 , 76),
(5 , 2 , 87),
(6 , 1 , 31),
(6 , 3 , 34),
(7 , 2 , 89),
(7 , 3 , 98);</code></pre> 
 <hr> 
 <h2 id="2%20%E9%A2%98%E7%9B%AE" style="text-align:justify;"><span style="color:#1c7331;">2 题目</span></h2> 
 <hr> 
 <p id="main-toc"><a href="#1.%20%E6%9F%A5%E8%AF%A2%22%201%20%22%E8%AF%BE%E7%A8%8B%E6%AF%94%22%202%20%22%E8%AF%BE%E7%A8%8B%E6%88%90%E7%BB%A9%E9%AB%98%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%88%E5%AD%A6%E5%8F%B7%E3%80%81%E5%A7%93%E5%90%8D%E3%80%81%E6%80%A7%E5%88%AB%E3%80%81%E5%87%BA%E7%94%9F%E6%97%A5%E6%9C%9F%EF%BC%89%E5%8F%8A%E8%AF%BE%E7%A8%8B%E5%88%86%E6%95%B0" rel="nofollow">1. 查询" 1 "课程比" 2 "课程成绩高的学生的信息（学号、姓名、性别、出生日期）及课程分数</a></p> 
 <p><a href="#%C2%A02.%20%E6%9F%A5%E8%AF%A2%E5%90%8C%E6%97%B6%E5%8F%82%E4%B8%8E%22%201%20%22%E8%AF%BE%E7%A8%8B%E5%92%8C%22%202%20%22%E8%AF%BE%E7%A8%8B%E8%80%83%E8%AF%95%E7%9A%84%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF" rel="nofollow">2. 查询同时参与" 1 "课程和" 2 "课程考试的学生信息</a></p> 
 <p><a href="#3.%20%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%9C%A8%22%201%20%22%E8%AF%BE%E7%A8%8B%E4%BD%86%E5%8F%AF%E8%83%BD%E4%B8%8D%E5%AD%98%E5%9C%A8%22%202%20%22%E8%AF%BE%E7%A8%8B%E7%9A%84%E6%83%85%E5%86%B5%28%E4%B8%8D%E5%AD%98%E5%9C%A8%E6%97%B6%E6%98%BE%E7%A4%BA%E4%B8%BA%20null%20%29" rel="nofollow">3. 查询存在" 1 "课程但可能不存在" 2 "课程的情况(不存在时显示为 null )</a></p> 
 <p><a href="#4.%C2%A0%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%AD%98%E5%9C%A8%22%201%20%22%E8%AF%BE%E7%A8%8B%E4%BD%86%E5%AD%98%E5%9C%A8%22%202%20%22%E8%AF%BE%E7%A8%8B%E7%9A%84%E6%83%85%E5%86%B5" rel="nofollow">4. 查询不存在" 1 "课程但存在" 2 "课程的情况</a></p> 
 <hr id="hr-toc"> 
 <p></p> 
 <ol><li style="text-align:justify;">查询" 1 "课程比" 2 "课程成绩高的学生的信息（学号、姓名、性别、出生日期）及课程分数</li><li style="text-align:justify;">查询同时参与" 1 "课程和" 2 "课程考试的学生信息</li><li style="text-align:justify;">查询存在" 1 "课程但可能不存在" 2 "课程的情况(不存在时显示为 null )</li><li style="text-align:justify;">查询不存在" 1 "课程但存在" 2 "课程的情况</li><li style="text-align:justify;">查询平均成绩大于等于 60 分的同学的学生编号、姓名和平均成绩</li><li style="text-align:justify;">查询在成绩表存在成绩的学生信息</li><li style="text-align:justify;">查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩(没成绩的显示为 null )</li><li style="text-align:justify;">查询「李」姓老师的数量</li><li style="text-align:justify;">查询学过「李白」老师授课的同学的信息</li><li style="text-align:justify;">查询没有学全所有课程的同学的信息</li><li style="text-align:justify;">查询至少有一门课与学号为" 1 "的同学所学相同的同学的信息</li><li style="text-align:justify;">查询和" 1 "号的同学学习的课程完全相同的其他同学的信息</li><li style="text-align:justify;">查询没学过「李白」老师讲授的任一门课程的学生姓名</li><li style="text-align:justify;">查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩</li><li style="text-align:justify;">检索" 1 "课程分数小于 60，按分数降序排列的学生信息</li><li style="text-align:justify;">按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩</li><li style="text-align:justify;">查询各科成绩最高分、最低分和平均分</li><li style="text-align:justify;">以如下形式显示：课程 ID，课程 name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率（及格为&gt;=60，中等为：70-80，优良为：80-90，优秀为：&gt;=90），要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列</li><li style="text-align:justify;">按各科成绩进行排序，并显示排名，Score 重复时保留名次空缺</li><li style="text-align:justify;">按各科成绩进行排序，并显示排名，Score 重复时合并名次</li><li style="text-align:justify;">查询学生的总成绩，并进行排名，总分重复时保留名次空缺</li><li style="text-align:justify;">查询学生的总成绩，并进行排名，总分重复时不保留名次空缺</li><li style="text-align:justify;">统计各科成绩各分数段人数：课程编号，课程名称，[100-85]，[85-70]，[70-60]，[60-0] 及所占百分比</li><li style="text-align:justify;">查询各科成绩前三名的记录</li><li style="text-align:justify;">查询每门课程被选修的学生数</li><li style="text-align:justify;">查询出只选修两门课程的学生学号和姓名</li><li style="text-align:justify;">查询男生、女生人数</li><li style="text-align:justify;">查询名字中含有「风」字的学生信息</li><li style="text-align:justify;">查询同名同性学生名单，并统计同名人数</li><li style="text-align:justify;">查询 1990 年出生的学生名单</li><li style="text-align:justify;">查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列</li><li style="text-align:justify;">查询平均成绩大于等于 85 的所有学生的学号、姓名和平均成绩</li><li style="text-align:justify;">查询课程名称为「数学」，且分数低于 60 的学生姓名和分数</li><li style="text-align:justify;">查询所有学生的课程及分数情况（存在学生没成绩，没选课的情况）</li><li style="text-align:justify;">查询任何一门课程成绩在 70 分以上的姓名、课程名称和分数</li><li style="text-align:justify;">查询不及格的课程</li><li style="text-align:justify;">查询课程编号为 1 且课程成绩在 80 分以上的学生的学号和姓名</li><li style="text-align:justify;">求每门课程的学生人数</li><li style="text-align:justify;">成绩不重复，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩</li><li style="text-align:justify;">成绩有重复的情况下，查询选修「张三」老师所授课程的学生中，成绩最高的学生信息及其成绩</li><li style="text-align:justify;">查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩</li><li style="text-align:justify;">查询每门功成绩最好的前两名</li><li style="text-align:justify;">统计每门课程的学生选修人数（超过 5 人的课程才统计）。</li><li style="text-align:justify;">检索至少选修两门课程的学生学号</li><li style="text-align:justify;">查询选修了全部课程的学生信息</li><li style="text-align:justify;">查询各学生的年龄，只按年份来算</li><li style="text-align:justify;">按照出生日期来算，当前月日 &lt; 出生年月的月日则，年龄减一</li><li style="text-align:justify;">查询本周过生日的学生</li><li style="text-align:justify;">查询下周过生日的学生</li><li style="text-align:justify;">查询本月过生日的学生</li><li style="text-align:justify;">查询下月过生日的学生</li></ol> 
 <hr> 
 <h2 id="3%20%E7%AD%94%E6%A1%88" style="text-align:justify;"><span style="color:#1c7331;">3 答案</span></h2> 
 <hr> 
 <h4 id="1.%20%E6%9F%A5%E8%AF%A2%22%201%20%22%E8%AF%BE%E7%A8%8B%E6%AF%94%22%202%20%22%E8%AF%BE%E7%A8%8B%E6%88%90%E7%BB%A9%E9%AB%98%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%88%E5%AD%A6%E5%8F%B7%E3%80%81%E5%A7%93%E5%90%8D%E3%80%81%E6%80%A7%E5%88%AB%E3%80%81%E5%87%BA%E7%94%9F%E6%97%A5%E6%9C%9F%EF%BC%89%E5%8F%8A%E8%AF%BE%E7%A8%8B%E5%88%86%E6%95%B0" style="text-align:justify;"><strong><span style="color:#fe2c24;">1. 查询" 1 "课程比" 2 "课程成绩高的学生的信息（学号、姓名、性别、出生日期）及课程分数</span></strong></h4> 
 <blockquote> 
  <p style="text-align:justify;">       首先根据course_id将成绩表分为两张表，筛选出" 1 "课程比" 2 "课程成绩高的学生，再与学生表关联。</p> 
 </blockquote> 
 <pre><code class="language-sql">-- 1. 查询" 1 "课程比" 2 "课程成绩高的学生的信息（学号、姓名、性别、出生日期）及课程分数
-- 思路1：
SELECT sc.`student_id` 学号, `student_name` 姓名, `birthday` 出生日期, `gender` 性别
FROM ( 
    SELECT sc1.`student_id`
    FROM (SELECT * FROM `score` WHERE `course_id` = 1) AS sc1
    INNER JOIN (SELECT * FROM `score` WHERE `course_id` = 2) AS sc2
    ON sc1.`student_id` = sc2.`student_id`
    WHERE sc1.`score` &gt; sc2.`score`) AS sc
LEFT JOIN `student` AS stu
ON sc.`student_id` = stu.`student_id`;

-- 思路2：
SELECT `student_id`, `student_name`, `gender`, `birthday`
FROM `student`
WHERE `student_id` IN (
	SELECT s1.`student_id`
	FROM (SELECT * FROM `score` WHERE `course_id` = 1) AS s1
	INNER JOIN (SELECT * FROM `score` WHERE `course_id` = 2) AS s2
	ON s1.`student_id` = s2.`student_id`
	WHERE s1.`score` &gt; s2.`score`);</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="575" src="https://images2.imgbox.com/d0/52/hGkYPG8S_o.png" width="1200"></p> 
 <h4 id="%C2%A02.%20%E6%9F%A5%E8%AF%A2%E5%90%8C%E6%97%B6%E5%8F%82%E4%B8%8E%22%201%20%22%E8%AF%BE%E7%A8%8B%E5%92%8C%22%202%20%22%E8%AF%BE%E7%A8%8B%E8%80%83%E8%AF%95%E7%9A%84%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF" style="text-align:justify;"><strong> 2. 查询同时参与" 1 "课程和" 2 "课程考试的学生信息</strong></h4> 
 <pre><code class="language-sql">-- 2. 查询同时参与" 01 "课程和" 02 "课程考试的学生信息
SELECT sc.`student_id`, `student_name`, `birthday`, `gender`
FROM (
    SELECT sc1.`student_id`
    FROM (SELECT * FROM `score` WHERE `course_id` = 1) AS sc1
    INNER JOIN (SELECT * FROM `score` WHERE `course_id` = 2) AS sc2
    ON sc1.`student_id` = sc2.`student_id`) AS sc
LEFT JOIN `student` AS stu
ON sc.`student_id` = stu.`student_id`;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="575" src="https://images2.imgbox.com/d9/13/FD0THnp6_o.png" width="1200"></p> 
 <h4 id="3.%20%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%9C%A8%22%201%20%22%E8%AF%BE%E7%A8%8B%E4%BD%86%E5%8F%AF%E8%83%BD%E4%B8%8D%E5%AD%98%E5%9C%A8%22%202%20%22%E8%AF%BE%E7%A8%8B%E7%9A%84%E6%83%85%E5%86%B5(%E4%B8%8D%E5%AD%98%E5%9C%A8%E6%97%B6%E6%98%BE%E7%A4%BA%E4%B8%BA%20null%20)" style="text-align:justify;"><strong>3. 查询存在" 1 "课程但可能不存在" 2 "课程的情况(不存在时显示为 null )</strong></h4> 
 <pre><code class="language-sql">-- 3. 查询存在" 01 "课程但可能不存在" 02 "课程的情况(不存在时显示为 null )
SELECT *
FROM (SELECT * FROM `score` WHERE `course_id` = 1) AS sc1
LEFT JOIN (SELECT * FROM `score` WHERE `course_id` = 2) AS sc2
ON sc1.`student_id` = sc2.`student_id`;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="580" src="https://images2.imgbox.com/99/e4/cuf4FtDL_o.png" width="1200"></p> 
 <h4 id="4.%C2%A0%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%AD%98%E5%9C%A8%22%201%20%22%E8%AF%BE%E7%A8%8B%E4%BD%86%E5%AD%98%E5%9C%A8%22%202%20%22%E8%AF%BE%E7%A8%8B%E7%9A%84%E6%83%85%E5%86%B5" style="text-align:justify;"><strong>4. 查询不存在" 1 "课程但存在" 2 "课程的情况</strong></h4> 
 <pre><code class="language-sql">-- 4. 查询不存在" 01 "课程但存在" 02 "课程的情况
SELECT * 
FROM (SELECT * FROM `score` WHERE `course_id` = 1) AS sc1
RIGHT JOIN (SELECT * FROM `score` WHERE `course_id` = 2) AS sc2
ON sc1.`student_id` = sc2.`student_id`
WHERE sc1.`score` IS NULL;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="574" src="https://images2.imgbox.com/7d/0c/KVLtak5h_o.png" width="1200"></p> 
 <h4 style="text-align:justify;"><strong> 5. 查询平均成绩大于等于 60 分的同学的学生编号、姓名和平均成绩</strong></h4> 
 <pre><code class="language-sql">-- 5. 查询平均成绩大于等于 60 分的同学的学生编号、姓名和平均成绩
SELECT stu.`student_id` 学号, `student_name` 姓名, AVG(`score`) 平均成绩
FROM `student` AS stu
INNER JOIN `score` AS sc
ON stu.`student_id` = sc.`student_id`
GROUP BY stu.`student_id`
HAVING AVG(`score`) &gt;= 60;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="577" src="https://images2.imgbox.com/2a/be/Fy1r05A4_o.png" width="1200"></p> 
 <h4 style="text-align:justify;"><strong>6. 查询在成绩表存在成绩的学生信息 </strong></h4> 
 <pre><code class="language-sql">-- 6. 查询在成绩表存在成绩的学生信息
SELECT * 
FROM `student`
WHERE `student_id` IN (
    SELECT DISTINCT `student_id`
    FROM `score`);</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="577" src="https://images2.imgbox.com/cc/78/E22X4mNc_o.png" width="1200"></p> 
 <p style="text-align:justify;"><strong>7. 查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩(没成绩的显示为 null ) </strong></p> 
 <pre><code class="language-sql">-- 7. 查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩(没成绩的显示为 null ) 
SELECT stu.`student_id`, `student_name`, SUM(`course_id`) 选课总数, SUM(`score`) 总成绩
FROM `student` AS stu
LEFT JOIN `score` AS sc
ON stu.`student_id` = sc.`student_id`
GROUP BY stu.`student_id`;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="688" src="https://images2.imgbox.com/c4/46/zPi7bLin_o.png" width="1200"></p> 
 <p style="text-align:justify;"><strong>8. 查询「李」姓老师的数量</strong></p> 
 <pre><code class="language-sql">-- 8. 查询「李」姓老师的数量
SELECT COUNT(`teacher_id`) 姓李的老师数量
FROM `teacher`
WHERE `teacher_name` LIKE '李%';</code></pre> 
 <p style="text-align:justify;"><strong>9. 查询学过「李白」老师授课的同学的信息</strong></p> 
 <pre><code class="language-sql">-- 9. 查询学过「李白」老师授课的同学的信息
SELECT `student_id`, `student_name`, `birthday`, `gender`
FROM `student` AS stu
WHERE `student_id` IN (
    SELECT `student_id`
    FROM `score` AS sc
    WHERE `course_id` IN (
        SELECT `course_id`
        FROM `course` AS c
        LEFT JOIN `teacher` AS t
        ON c.`teacher_id` = t.`teacher_id`
        WHERE `teacher_name` = '李白'));

SELECT stu.`student_id`, `student_name`, `birthday`, `gender`
FROM `student` AS stu
INNER JOIN `score` AS sc
ON stu.`student_id` = sc.`student_id`
WHERE `course_id` IN (
    SELECT `course_id`
    FROM `course` 
    WHERE `teacher_id` IN (
        SELECT `teacher_id` FROM `teacher` WHERE `teacher_name` = '李白'));</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="515" src="https://images2.imgbox.com/36/60/HLVggS3o_o.png" width="1200"></p> 
 <p style="text-align:justify;"><strong><span style="color:#fe2c24;">10. 查询没有学全所有课程的同学的信息 </span></strong></p> 
 <blockquote> 
  <p style="text-align:justify;"><span style="color:#0d0016;">       利用课程数量，计算出所有课程数和每个学生的选课数量。</span></p> 
 </blockquote> 
 <pre><code class="language-sql">-- 10. 查询没有学全所有课程的同学的信息 
-- 未选全课的同学（不包括没选课的同学）
SELECT `student_id`, `student_name`, `birthday`, `gender`
FROM `student` 
WHERE `student_id` IN (
    SELECT `student_id`
    FROM `score`
    GROUP BY `student_id`
    HAVING COUNT(`course_id`) &lt; (SELECT COUNT(`course_id`) FROM`course`));

-- 未选全课+没选课的同学
SELECT stu.`student_id`, `student_name`, `birthday`, `gender`
FROM `student` AS stu
LEFT JOIN `score` AS sc
ON stu.`student_id` = sc.`student_id`
GROUP BY stu.`student_id`
HAVING COUNT(`course_id`) &lt; (SELECT COUNT(`course_id`) FROM`course`);</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="516" src="https://images2.imgbox.com/88/fe/gY7IO2rI_o.png" width="1200"></p> 
 <p style="text-align:justify;"><img alt="" height="519" src="https://images2.imgbox.com/9e/1f/XvAsbBrH_o.png" width="1200"></p> 
 <p style="text-align:justify;"><strong>11. 查询至少有一门课与学号为" 1 "的同学所学相同的同学的信息</strong></p> 
 <pre><code class="language-sql">-- 11. 查询至少有一门课与学号为" 1 "的同学所学相同的同学的信息
SELECT DISTINCT stu.`student_id`, `student_name`, `birthday`, `gender`
FROM `student` AS stu
INNER JOIN `score` AS sc
ON stu.`student_id` = sc.`student_id`
WHERE `course_id` IN (
    SELECT `course_id`
    FROM `score`
    WHERE `student_id` = 1) AND stu.`student_id` != 1;</code></pre> 
 <p style="text-align:justify;"><span style="color:#fe2c24;"><strong>12. 查询和" 1 "号的同学学习的课程完全相同的其他同学的信息</strong></span></p> 
 <blockquote> 
  <p style="text-align:justify;"><span style="color:#0d0016;">       </span><span style="color:#0d0016;">先筛选与" 1 "号同学选课数量相同的同学，再剔除</span>选了" 1 "号同学没选的课的同学。</p> 
 </blockquote> 
 <pre><code class="language-sql">-- 12. 查询和" 1 "号同学学习的课程完全相同的其他同学的信息
SELECT * 
FROM `student`
WHERE `student_id` IN (
    SELECT `student_id`
    FROM `score`
    GROUP BY `student_id`
    -- 筛选与" 1 "号同学选课数量相同的同学
    HAVING COUNT(`course_id`) = (SELECT COUNT(`course_id`) FROM `score` WHERE `student_id` = 1)
    ) AND `student_id` NOT IN (
        SELECT DISTINCT `student_id`
        FROM `score`
        -- 筛选选了" 1 "号同学没选的课的同学
        WHERE `course_id` NOT IN (SELECT `course_id` FROM `score` WHERE `student_id` = 1)
    ) AND `student_id` != 1;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="517" src="https://images2.imgbox.com/fa/9f/ipfqftVM_o.png" width="1200"></p> 
 <p style="text-align:justify;"><strong>13. 查询没学过「李白」老师讲授的任一门课程的学生姓名</strong></p> 
 <pre><code class="language-sql">-- 13. 查询没学过「李白」老师讲授的任一门课程的学生姓名
SELECT DISTINCT `student_name`
FROM `student` AS stu
LEFT JOIN `score` AS sc
ON stu.`student_id` = sc.`student_id`
WHERE `course_id` NOT IN (
    SELECT `course_id`
    FROM `course` AS c
    INNER JOIN `teacher` AS t
    ON c.`teacher_id` = t.`teacher_id`
    WHERE `teacher_name` = '李白');</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="517" src="https://images2.imgbox.com/97/65/txFzvaw6_o.png" width="1200"></p> 
 <p style="text-align:justify;"> <strong>14. 查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩</strong></p> 
 <pre><code class="language-sql">-- 14. 查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩
SELECT stu.`student_id`, `student_name`, AVG(`score`) 平均成绩
FROM `student` AS stu
RIGHT JOIN `score` AS sc
ON stu.`student_id` = sc.`student_id`
WHERE stu.`student_id` IN (
    -- 查询出两门以上不及格同学的学号
    SELECT `student_id`
    FROM `score` 
    WHERE `score` &lt; 60
    GROUP BY `student_id`
    HAVING COUNT(`course_id`) &gt;= 2)
GROUP BY stu.`student_id`;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="520" src="https://images2.imgbox.com/f6/d4/fnBW5pPu_o.png" width="1200"></p> 
 <p style="text-align:justify;"><strong>15. 检索" 1 "课程分数小于 60，按分数降序排列的学生信息</strong> </p> 
 <pre><code class="language-sql">-- 15. 检索" 1 "课程分数小于 60，按分数降序排列的学生信息
SELECT stu.`student_id`, `student_name`, `birthday`, `gender`, `score`
FROM `student` AS stu
RIGHT JOIN (
    SELECT *
    FROM `score`
    WHERE `course_id` = 1 AND `score` &lt; 60) AS sc
ON stu.`student_id` = sc.`student_id`
ORDER BY `score` DESC;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="516" src="https://images2.imgbox.com/b4/5a/WbsPJ4Yi_o.png" width="1200"></p> 
 <p style="text-align:justify;"><strong>16. 按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩</strong></p> 
 <pre><code class="language-sql">-- 16. 按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩
SELECT `student_name`, `score`, 平均成绩
FROM `student` AS stu
RIGHT JOIN `score` AS sc
ON stu.`student_id` = sc.`student_id`
LEFT JOIN (
    SELECT `student_id`, AVG(`score`) 平均成绩
    FROM `score`
    GROUP BY `student_id`) AS avg_sc
ON stu.`student_id` = avg_sc.`student_id`
ORDER BY 平均成绩 DESC;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="838" src="https://images2.imgbox.com/fc/ca/HhrVXiq4_o.png" width="1200"></p> 
 <p style="text-align:justify;"><strong>17. 查询各科成绩最高分、最低分和平均分 </strong></p> 
 <pre><code class="language-sql">-- 17. 查询各科成绩最高分、最低分和平均分
SELECT `course_id`, MAX(`score`) 最高分, MIN(`score`) 最低分, AVG(`score`) 平均分
FROM `score`
GROUP BY `course_id`;</code></pre> 
 <p style="text-align:justify;"><span style="color:#fe2c24;"><strong>18. 以如下形式显示：课程 ID，课程 name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率（及格为&gt;=60，中等为：70-80，优良为：80-90，优秀为：&gt;=90），要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列</strong></span></p> 
 <blockquote> 
  <p style="text-align:justify;">       使用case when语句，多个排序条件时用逗号分隔。</p> 
 </blockquote> 
 <pre><code class="language-sql">SELECT sc.`course_id` 课程ID, `course_name` 课程名, COUNT(*) 选修人数,
       MAX(`score`) 最高分, MIN(`score`) 最低分, AVG(`score`) 平均分,
       SUM(CASE WHEN `score` &gt;= 60 THEN 1 ELSE 0 END)/COUNT(*) 及格率,
       SUM(CASE WHEN `score` &gt;= 70 AND `score` &lt; 80 THEN 1 ELSE 0 END)/COUNT(*) 中等率,
       SUM(CASE WHEN `score` &gt;= 80 AND `score` &lt; 90 THEN 1 ELSE 0 END)/COUNT(*) 优良率,
       SUM(CASE WHEN `score` &gt;= 90 THEN 1 ELSE 0 END)/COUNT(*) 优秀率
FROM `score` AS sc
LEFT JOIN `course` AS c
ON sc.`course_id` = c.`course_id`
GROUP BY sc.`course_id`
ORDER BY 选修人数 DESC, sc.`course_id` ASC;</code></pre> 
 <p style="text-align:justify;">       结果：</p> 
 <p style="text-align:justify;"><img alt="" height="670" src="https://images2.imgbox.com/9c/01/z3TByU68_o.png" width="1200"></p> 
 <p style="text-align:justify;"><span style="color:#fe2c24;"><strong>19. 按各科成绩进行排序，并显示排名，Score 重复时保留名次空缺</strong></span></p> 
 <blockquote> 
  <p style="text-align:justify;">       利用自连接，统计比当前分数高的分数有几个，排名就是几加1。</p> 
 </blockquote> 
 <p style="text-align:justify;"></p> 
 <p style="text-align:justify;"></p> 
 <p style="text-align:justify;"></p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f8463c442399a8365fab0a5ecd178736/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">百万级数据量导出excel</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cb039fa734f679b0a785fdd3eb0856f4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">三维欧几里德空间中两个向量叉积的问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>