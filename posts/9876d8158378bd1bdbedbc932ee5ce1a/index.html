<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>npm（yarn）安装及问题小记 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="npm（yarn）安装及问题小记" />
<meta property="og:description" content="文章目录 前言一、安装node1.下载node.js 二、配置npm1.更改npm包默认存储位置2.配置代理（*）3.配置环境变量 三、yarn安装配置四、安装问题小记 前言 安装npm、yarn之前要先安装node：node —&gt; npm —&gt; yarn
一、安装node 1.下载node.js 1）下载执行安装即可：https://nodejs.org/en/
2）记住node的安装目录，最好别放C盘- -。等下有用。例如我的nodejs的安装目录是：E:\nodejs
3）查看安装是否成功：
node -v 成功会显示版本号：
二、配置npm 1.更改npm包默认存储位置 可以不更改，默认全局仓库就是存在C盘：C:\Users\Administrator\AppData\Roaming\npm 但是，随着npm下载模块的增多，挤占C盘空间啊喂0.0，所以如果C盘空间不充足，建议修改。
假设我的nodejs的安装目录是：E:\nodejs
首先在 E:\nodejs 下新建两个文件夹
node_global
node_cache更改全局仓库、依赖包缓存位置为我们设置的文件夹
命令行执行：
a. 设置全局仓库位置： npm config set prefix &#34;E:\nodejs\node_global&#34; b. 设置默认缓存位置：
npm config set cache &#34;E:\nodejs\node_cache&#34; 查看设置是否成功 a. 命令行输入，查看全局仓库位置：
npm list -global 设置正确，则会显示你更改过后的目录下，且下面列表为 empty
b. 然后命令行继续操作，全局安装随便一个包
npm install express -g c.再命令行输入，查看全局仓库位置，及缓存的包：
npm list -global 设置正确，则会显示你更改过后的目录下，且下面列表中有 express 这个包
2.配置代理（*） 如果你上网不需要代理proxy，请略过此处 = =。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9876d8158378bd1bdbedbc932ee5ce1a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-13T09:12:13+08:00" />
<meta property="article:modified_time" content="2022-05-13T09:12:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">npm（yarn）安装及问题小记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_7" rel="nofollow">前言</a></li><li><a href="#node_12" rel="nofollow">一、安装node</a></li><li><ul><li><a href="#1nodejs_13" rel="nofollow">1.下载node.js</a></li></ul> 
  </li><li><a href="#npm_22" rel="nofollow">二、配置npm</a></li><li><ul><li><a href="#1npm_23" rel="nofollow">1.更改npm包默认存储位置</a></li><li><a href="#2_57" rel="nofollow">2.配置代理（*）</a></li><li><a href="#3_74" rel="nofollow">3.配置环境变量</a></li></ul> 
  </li><li><a href="#yarn_89" rel="nofollow">三、yarn安装配置</a></li><li><a href="#_95" rel="nofollow">四、安装问题小记</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_7"></a>前言</h2> 
<p>安装npm、yarn之前要先安装node：node —&gt; npm —&gt; yarn</p> 
<hr> 
<h2><a id="node_12"></a>一、安装node</h2> 
<h3><a id="1nodejs_13"></a>1.下载node.js</h3> 
<p>1）下载执行安装即可：https://nodejs.org/en/<br> 2）记住node的安装目录，最好别放C盘- -。等下有用。例如我的nodejs的安装目录是：<strong>E:\nodejs</strong><br> 3）查看安装是否成功：</p> 
<pre><code class="prism language-powershell">node <span class="token operator">-</span>v
</code></pre> 
<p>成功会显示版本号：<br> <img src="https://images2.imgbox.com/24/12/DgIP3Z1n_o.png" alt="命令行"></p> 
<h2><a id="npm_22"></a>二、配置npm</h2> 
<h3><a id="1npm_23"></a>1.更改npm包默认存储位置</h3> 
<p><code>可以不更改，默认全局仓库就是存在C盘：C:\Users\Administrator\AppData\Roaming\npm 但是，随着npm下载模块的增多，挤占C盘空间啊喂0.0，所以如果C盘空间不充足，建议修改。</code><br> 假设我的nodejs的安装目录是：<strong>E:\nodejs</strong></p> 
<ol><li>首先在 <strong>E:\nodejs</strong> 下新建两个文件夹<br> node_global<br> node_cache</li><li>更改全局仓库、依赖包缓存位置为我们设置的文件夹<br> 命令行执行：<br> <strong>a. 设置全局仓库位置：</strong></li></ol> 
<pre><code class="prism language-powershell">npm config <span class="token function">set</span> prefix <span class="token string">"E:\nodejs\node_global"</span>
</code></pre> 
<p><strong>b. 设置默认缓存位置：</strong></p> 
<pre><code class="prism language-powershell">npm config <span class="token function">set</span> cache <span class="token string">"E:\nodejs\node_cache"</span>
</code></pre> 
<ol start="3"><li>查看设置是否成功</li></ol> 
<p>a. 命令行输入，查看全局仓库位置：</p> 
<pre><code class="prism language-powershell">npm list <span class="token operator">-</span>global
</code></pre> 
<p><code>设置正确，则会显示你更改过后的目录下，且下面列表为 empty</code><br> b. 然后命令行继续操作，全局安装随便一个包</p> 
<pre><code class="prism language-powershell">npm install express <span class="token operator">-</span>g
</code></pre> 
<p>c.再命令行输入，查看全局仓库位置，及缓存的包：</p> 
<pre><code class="prism language-powershell">npm list <span class="token operator">-</span>global
</code></pre> 
<p><code>设置正确，则会显示你更改过后的目录下，且下面列表中有 express 这个包</code></p> 
<h3><a id="2_57"></a>2.配置代理（*）</h3> 
<p>如果你上网不需要代理proxy，请略过此处 = =。<br> 如果你上网需要配置代理，则继续npm的设置：</p> 
<pre><code class="prism language-powershell">npm config <span class="token function">set</span> proxy http:<span class="token operator">/</span><span class="token operator">/</span>proxy<span class="token punctuation">.</span>company<span class="token punctuation">.</span>com:8080
npm config <span class="token function">set</span> https-proxy http:<span class="token operator">/</span><span class="token operator">/</span>proxy<span class="token punctuation">.</span>company<span class="token punctuation">.</span>com:8080
</code></pre> 
<p>如果代理<strong>需要账号密码</strong>登录，则使用：</p> 
<pre><code class="prism language-javascript">npm config <span class="token keyword">set</span> proxy http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>username<span class="token operator">:</span>password@yourproxy<span class="token punctuation">.</span>com<span class="token operator">:</span>port
npm config <span class="token keyword">set</span> https<span class="token operator">-</span>proxy http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>username<span class="token operator">:</span>password@yourproxy<span class="token punctuation">.</span>com<span class="token operator">:</span>port
</code></pre> 
<p>username：用户名<br> password：密码<br> yourproxy：代理网址<br> port：代理端口</p> 
<h3><a id="3_74"></a>3.配置环境变量</h3> 
<p>我们需要配置npm和nodejs的环境变量。</p> 
<p>在计算机图标上，右键——&gt;属性——&gt;高级系统配置——环境路径，就能看到环境路径的配置界面。</p> 
<p>系统变量：<br> 新建，变量名：NODE_PATH，变量值： E:\nodejs\node_modules\<br> <code>此时配置好系统变量中就多了NODE_PATH这一栏。</code></p> 
<p>用户变量：<br> 我们需要修改nodejs默认的模块调用路径，即我们配置的全局仓库地址，（我们从原来的C盘改成了我们的安装位置）。<br> 选择Path，编辑，然后选择npm那个，将其修改为：E:\nodejs\node_global\</p> 
<p><strong>然后点确定，保存这个配置。</strong></p> 
<h2><a id="yarn_89"></a>三、yarn安装配置</h2> 
<p>命令行执行，即可安装；</p> 
<pre><code class="prism language-powershell">npm install <span class="token operator">-</span>g yarn
</code></pre> 
<p>此时在编辑器中使用没问题，如果要在cmd中使用，要配置环境变量；</p> 
<h2><a id="_95"></a>四、安装问题小记</h2> 
<ol><li>vscode中使用yarn命令，报错未知命令：<br> <strong>原因：</strong> vscode中的集成终端使用的是powershell，所以我们要设置一下powershell的执行权限。<br> <strong>解决方法：</strong> 进入C:\Windows\System32\WindowsPowerShell\v1.0目录，找到powershell.exe文件。<br> 右键该文件，以管理员权限执行。执行<code>set-ExecutionPolicy RemoteSigned</code>命令，选y，重启生效。</li><li>407错误，authority<br> 没有权限，检查proxy配置。</li><li>报错npm ERR! cb() never called!：<br> <strong>原因：</strong> npm自己的缓存机制问题；<br> <strong>解决方法：</strong> 1） 删除项目中的 package-lock.json 文件 和 node_modules 文件夹，然后再重新npm install。（重装大法好）<br> 2）或者 强制清空缓存 <code>npm cache clean -f</code></li><li>很多问题，例如卡住，下载失败，可以切换下载源尝试。<br> 我们使用npm可能有很多种方式：<br> 1）本机，使用代理，连接淘宝镜像源<br> 2）本机，使用代理，连接npm源<br> 3）本机，连接淘宝镜像源<br> 4）本机，连接npm源<br> 你可以根据你连接的方式去验证每个步骤是否有问题；</li></ol>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bf8e133dbbf250dd8885b1b2fef2f1eb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">servlet请求的转发</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/612d03c6444ca1be301c3d73f223ecfa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【C# 窗体 超市购物买单系统】简单版和进阶版</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>