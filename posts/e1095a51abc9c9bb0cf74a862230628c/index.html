<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>uniapp动态获取验证码 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="uniapp动态获取验证码" />
<meta property="og:description" content="&lt;template&gt; &lt;view class=&#34;code&#34;&gt; &lt;u-navbar title=&#34;找回&#34; :autoBack=&#34;true&#34; :fixed=&#39;true&#39; :placeholder=&#34;true&#34;&gt;&lt;/u-navbar&gt; &lt;view class=&#34;wrodtext&#34;&gt; 输入验证码 &lt;/view&gt; &lt;view class=&#34;code-tip-one&#34;&gt; &lt;view class=&#34;code-tip&#34;&gt;已发送至&lt;text&gt;&#43;86 {{phone.substring(0, 3)}}****{{phone.substr(phone.length-4)}}&lt;/text&gt; &lt;/view&gt; &lt;view class=&#34;code-errow&#34; v-if=&#34;codeclolor == &#39;#ff0000&#39;&#34;&gt;验证码输入错误&lt;/view&gt; &lt;/view&gt; &lt;input class=&#34;cinput&#34; adjust-position=&#34;false&#34; auto-blur=&#34;true&#34; @blur=&#34;blur&#34; @input=&#34;codenum&#34; :focus=&#34;focus&#34; value=&#34;code&#34; v-model=&#34;code&#34; type=&#34;number&#34; maxlength=&#34;6&#34; /&gt; &lt;view class=&#34;code-input&#34;&gt; &lt;view v-for=&#34;(item,index) in 4&#34; :key=&#34;index&#34; @click=&#34;codefocus(index)&#34; :style=&#39;(index == code.length? &#34;border: 5rpx solid #242832;width: 122rpx;height: 122rpx;line-height: 122rpx;&#34;:&#34;color: &#34; &#43; codeclolor &#43; &#34;;&#34; &#43;&#34;border: 2rpx solid&#34; &#43; codeclolor)&#39;&gt; {{code[index] &amp;&amp; code[index] || &#39;&#39;}} &lt;/view&gt; &lt;/view&gt; &lt;view class=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e1095a51abc9c9bb0cf74a862230628c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-03T17:24:39+08:00" />
<meta property="article:modified_time" content="2023-04-03T17:24:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">uniapp动态获取验证码</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> <img alt="" height="1200" src="https://images2.imgbox.com/d1/14/zvnCfvmM_o.png" width="1079"></p> 
<p></p> 
<p></p> 
<pre><code class="language-javascript">&lt;template&gt;
	&lt;view class="code"&gt;
		&lt;u-navbar title="找回" :autoBack="true" :fixed='true' :placeholder="true"&gt;&lt;/u-navbar&gt;
		&lt;view class="wrodtext"&gt;
			输入验证码
		&lt;/view&gt;
		&lt;view class="code-tip-one"&gt;
			&lt;view class="code-tip"&gt;已发送至&lt;text&gt;+86 {<!-- -->{phone.substring(0, 3)}}****{<!-- -->{phone.substr(phone.length-4)}}&lt;/text&gt;
			&lt;/view&gt;
			&lt;view class="code-errow" v-if="codeclolor == '#ff0000'"&gt;验证码输入错误&lt;/view&gt;
		&lt;/view&gt;
		&lt;input class="cinput" adjust-position="false" auto-blur="true" @blur="blur" @input="codenum" :focus="focus"
			value="code" v-model="code" type="number" maxlength="6" /&gt;
		&lt;view class="code-input"&gt;
			&lt;view v-for="(item,index) in 4" :key="index" @click="codefocus(index)"
				:style='(index == code.length? "border: 5rpx solid #242832;width: 122rpx;height: 122rpx;line-height: 122rpx;":"color: " + codeclolor + ";" +"border: 2rpx solid" + codeclolor)'&gt;
				{<!-- -->{code[index] &amp;&amp; code[index] || ''}}
			&lt;/view&gt;
		&lt;/view&gt;
		&lt;view class="code-get"&gt;
			&lt;view class="noreceived" @click="nogetCode()"&gt;收不到验证码？&lt;/view&gt;
			&lt;view class="recode" @click="getCode()"&gt;重新获取({<!-- -->{sec}}s)&lt;/view&gt;
		&lt;/view&gt;
		&lt;!-- &lt;button class="verifylogin" @click="getCode()" :disabled="verifyShow"&gt;验证并登录&lt;/button&gt; --&gt;
		&lt;button class="verifylogin"  @click="gonext()"&gt;下一步&lt;/button&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script&gt;
	export default {
		data() {
			return {
				phone: '12345678910',
				// 验证码输入聚焦
				focus: true, //input焦点，用于键盘隐藏后重新唤起
				// 验证码框颜色
				codeclolor: "#313131", //自定义光标的颜色
				// 验证码获取秒数
				sec: '20', //这是重新获取验证码的倒计时(可根据需求修改)
				code: '', //这是用户输入的验证码
				codeCorrect: '', //正确的验证码
				verifyShow: false, //是否禁用按钮
			}
		},
		methods: {
			// 输入验证码
			codenum: function(event) {
				// console.log('输入的值',event.target.value)
				var that = this
				var code = event.target.value
				that.code = code
				if (code.length == 4) {
					if (code == that.codeCorrect) {
						//输入4位验证码后自动进行验证并执行验证成功的函数
						console.log('验证码正确：', that.code)
					} else {
						console.log('验证码错误!!!：', that.code)
						that.codeclolor = "#ff0000"
						setTimeout(function() {
							that.code = []
							event.target.value = ""
							that.codeclolor = "#313131"
						}, 1500)
					}
				}
			},
			// 键盘隐藏后设置失去焦点
			blur: function() {
				var that = this
				that.focus = false
			},
			// 点击自定义光标显示键盘
			codefocus: function(e) {
				var that = this
				if (e == that.code.length) {
					that.focus = true
				}
			},
			// 收不到验证码
			nogetCode(){
				uni.navigateTo({
					url: "/pages/my/nocode/nocode",
				});
			},
			getCode() { //获取验证码
				const that = this
				that.codeCorrect = that.getVerificationCode(4) //可以不传值，默认为4位随机码
				console.log('生成的随机码为：' + that.codeCorrect)
				that.timedown(that.sec) // 倒计时
			},
			gonext(){
				uni.navigateTo({
					url: "/pages/my/setword/setword",

				});
			},
			//随机生成几位数
			getVerificationCode(codeLength) { //传入需要的字符串长度，不传默认为4
				// 准备一个用来抽取码的字符串，或者字典
				// let verification_code_str = "abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";  //数字和字母
				let verification_code_str = "0123456789"; //纯数字
				// 获取某个范围的随机整数，封装的函数，在上面抽取字典的时候进行了调用
				function getRandom(min, max) { //意思是获取min-max数字之间的某个随机数，直接调用即可
					return Math.round(Math.random() * (max - min) + min);
				}
				let newStr = ''; //创建一个空字符串，用来拼接四位随机码
				for (var i = 0; i &lt; codeLength; i++) { //for循环四次，则拼接四次随机码
					newStr += verification_code_str[getRandom(0, verification_code_str.length -
					1)]; //从字典中随机选一个下标，并拼接到空字符串中
				}
				return newStr
			},
			//倒计时
			timedown: function(num) {
				let that = this;
				if (num == 0) {
					that.verifyShow = false; // 不禁用获取验证码按钮
					that.sec = 20
					return clearTimeout();
				} else {
					that.verifyShow = true; // 禁用获取验证码按钮
					setTimeout(function() {
						that.sec = num - 1
						that.timedown(num - 1);
					}, 1000); //定时每秒减一  
				}
			},
		}
	}
&lt;/script&gt;

&lt;style scoped lang="less"&gt;
	.code {
		margin: auto;
		margin-top: 50rpx;
		width: 100vw;
		height: 100vh;
		background-color: #FFFFFF !important;
		color: #000000 !important;
		padding: 0 20rpx;
	}

	.wrodtext {
		color: #242832;
		font-size: 48rpx;
		font-family: PingFangSC-Semibold, PingFang SC;
		font-weight: 600;
		margin: 80rpx 0 80rpx 14rpx;
		padding: 20rpx 0;
	}


	.code-tip-one {
		width: 650rpx;
		height: 250rpx;
		line-height: 100rpx;
		font-size: 60rpx;
		font-weight: bold;
		color: #313131;
	}

	.code-tip {
		font-size: 28rpx;
		font-family: PingFangSC-Regular, PingFang SC;
		font-weight: 400;
		color: #8F8F9A;
		position: relative;
		top: -180rpx;
		left: 330rpx;
	}

	.code-errow {
		width: 650rpx;
		height: 50rpx;
		line-height: 25rpx;
		font-size: 28rpx;
		font-weight: normal;
		color: #ff0000;
		margin: 20rpx 60% 0 40%;
	}

	.code-tip&gt;text {
		padding: 0 20rpx;
		// width: 650rpx;
		font-size: 28rpx;
		font-family: PingFangSC-Regular, PingFang SC;
		font-weight: 400;
		color: #242832;

	}

	.code-input {
		position: absolute;
		top: 420rpx;
		left: 40rpx;
		// width: 650rpx;
		height: 100rpx;
		display: flex;
	}

	.code-input&gt;view {
		margin-right: 54rpx;
		// margin-left: 15rpx;
		width: 128rpx;
		height: 128rpx;
		line-height: 128rpx;
		// font-size: 60rpx;
		// font-weight: bold;
		// color: #DDDEE0;
		text-align: center;
		// opacity: 0.7;
		// border: 1px solid #DDDEE0;
		// border-radius: 10rpx;

	}

	.code-input&gt;view:nth-child(1) {
		margin-left: 0rpx;
	}

	.cinput {
		position: fixed;
		left: -100rpx;
		width: 50rpx;
		height: 50rpx;
	}
	.code-get{
		transform: translatey(-80rpx);
		width: 90vw;
		display: flex;
		justify-content: space-between;
	}
	.noreceived{
		font-size: 26rpx;
		font-family: PingFangSC-Regular, PingFang SC;
		font-weight: 400;
		color: #242832;
		margin-left: 20rpx;
	}

	.recode {
		
		font-size: 26rpx;
		font-family: PingFangSC-Regular, PingFang SC;
		font-weight: 400;
		color: #F03056;
	}

	.verifylogin {
		width: 92vw;
		height: 88rpx;
		line-height: 88rpx;
		background: #F03056;
		margin-top: 200rpx;
		font-size: 32rpx;
		font-family: PingFangSC-Medium, PingFang SC;
		font-weight: 500;
		color: #FFFFFF;
	}
&lt;/style&gt;
</code></pre> 
<blockquote> 
 <h3><span style="color:#ed7976;">备注：uview框架也有类似代码</span></h3> 
 <p><span style="color:#ed7976;">链接：</span><a class="has-card" href="https://www.uviewui.com/components/codeInput.html" rel="nofollow" title="CodeInput 验证码输入 | uView 2.0 - 全面兼容nvue的uni-app生态框架 - uni-app UI框架 (uviewui.com)"><span class="link-card-box"><span class="link-title">CodeInput 验证码输入 | uView 2.0 - 全面兼容nvue的uni-app生态框架 - uni-app UI框架 (uviewui.com)</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/53/4d/2UMWnvUZ_o.png">https://www.uviewui.com/components/codeInput.html</span></span></a></p> 
</blockquote> 
<p><img alt="" height="970" src="https://images2.imgbox.com/8e/f7/xWIXPeSB_o.png" width="1200"></p> 
<p> 自己记录一下：二维码扫描功能<a class="has-card" href="https://uniapp.dcloud.net.cn/api/system/barcode.html#scancode" rel="nofollow" title="uni.scanCode(OBJECT) | uni-app官网"><span class="link-card-box"><span class="link-title">uni.scanCode(OBJECT) | uni-app官网</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/49/36/4xLzF1h3_o.png">https://uniapp.dcloud.net.cn/api/system/barcode.html#scancode</span></span></a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e6b9f9442c75f83880e75625aa33743f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">常见的 https http 请求资源问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/97b2496c8885fb0da5c8c236bc360116/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js中call,apply,bind方法的简单总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>