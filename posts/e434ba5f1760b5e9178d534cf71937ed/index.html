<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>framework添加res资源并打包进新的Android.jar - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="framework添加res资源并打包进新的Android.jar" />
<meta property="og:description" content="编译带有资源的jar包，需要更改frameworks层，方法如下：　一.增加png类型的图片资源　1.将appupdate模块所有用到的png格式图片拷贝到framework/base/core/res/res/drawable-mdpi里。但是要确保没有与原生的没有重名文件。　2.在framework/base/core/res/res/values/public.xml文件里增加对这些图片的声明。(例: ,此id要保证唯一，以drawable类型的最后一个id为基数增加)　3.framework/base/core/res/res/ 下mm编译　4. \Honeycomb下 make update-api　二.增加string资源　1.将appupdate模块定义的string.xml里面的所以string拷贝到framework/base/core/res/res/values/string.xml里。但是确保没有重名的。　2.在framework/base/core/res/res/values/public.xml文件里增加对这些string的声明。(例：此id要保证唯一，以string类型的最后一个id为基数增加)　3.framework/base/core/res/res/ 下mm编译　4. \Honeycomb下 make update-api　三.增加layout资源　1.将appupdate模块的layout文件里定义的5个xml文件拷贝到在framework/base/core/res/res/layout里。但是要确保没有重名文件被覆盖。　2.在framework/base/core/res/res/values/public.xml文件里增加对这些layout的声明。(例：此id要保证唯一，以layout类型的最后一个id为基数增加)　3.framework/base/core/res/res/ 下mm编译　4. \Honeycomb下 make update-api　说明：若layout中包含xml,直接把xml拷贝到framework相应目录下。
例如(1)button的selector。将appupdate模块的drawable/common_btn_selector.xml文件拷贝到framework/base/core/res/res/drawable里，确保没有重名文件。　(2)将appupdate模块的anim/loading.xml文件拷贝到framework/base/core/res/res/anim里，确保没有重名文件。　四.增加style资源　1.将appupdate模块的style文件里定义的所有style拷贝到framework/base/core/res/res/values/style.xml里。确保没有覆盖原生的style.　2.在framework/base/core/res/res/values/public.xml文件里增加对这些style的声明。　3.framework/base/core/res/res/ 下mm编译　4. \Honeycomb下 make update-api　五.增加color资源　1.将appupdate模块的style文件里定义的所有style拷贝到framework/base/core/res/res/values/color.xml里。确保没有覆盖原生的color.　2.在framework/base/core/res/res/values/public.xml文件里增加对这些color的声明。　3.framework/base/core/res/res/ 下mm编译　4. \Honeycomb下 make update-api　六.增加资源id　1.在framework/base/core/res/res/values/ids.xml里定义你jar中所用的id(R.id)*)。确保没有覆盖原生的.　2.在framework/base/core/res/res/values/public.xml文件里增加对这些id的声明。　3.framework/base/core/res/res/ 下mm编译　4. \Honeycomb下 make update-api　最后，eclipse源码中要修改以下：　1. 把R.*.*全部替换成android.R.*.*例如R.layout.appupg_tip_dialog 要更换为android.R.layout.appupg_tip_dialog　2. 资源文件中对资源的调用需要添加android：如&lt;textview p=&#34;&#34; &lt;=&#34;&#34; 要改成　3. Import *." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e434ba5f1760b5e9178d534cf71937ed/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-10-11T09:47:40+08:00" />
<meta property="article:modified_time" content="2017-10-11T09:47:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">framework添加res资源并打包进新的Android.jar</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 编译带有资源的jar包，需要更改frameworks层，方法如下：　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 一.增加png类型的图片资源　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 1.将appupdate模块所有用到的png格式图片拷贝到framework/base/core/res/res/drawable-mdpi里。但是要确保没有与原生的没有重名文件。　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 2.在framework/base/core/res/res/values/public.xml文件里增加对这些图片的声明。(例: ,此id要保证唯一，以drawable类型的最后一个id为基数增加)　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 3.framework/base/core/res/res/ 下mm编译　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 4. \Honeycomb下 make update-api　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 二.增加string资源　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 1.将appupdate模块定义的string.xml里面的所以string拷贝到framework/base/core/res/res/values/string.xml里。但是确保没有重名的。　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 2.在framework/base/core/res/res/values/public.xml文件里增加对这些string的声明。(例：此id要保证唯一，以string类型的最后一个id为基数增加)　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 3.framework/base/core/res/res/ 下mm编译　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 4. \Honeycomb下 make update-api　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 三.增加layout资源　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 1.将appupdate模块的layout文件里定义的5个xml文件拷贝到在framework/base/core/res/res/layout里。但是要确保没有重名文件被覆盖。　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 2.在framework/base/core/res/res/values/public.xml文件里增加对这些layout的声明。(例：此id要保证唯一，以layout类型的最后一个id为基数增加)　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 3.framework/base/core/res/res/ 下mm编译　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 4. \Honeycomb下 make update-api　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 说明：若layout中包含xml,直接把xml拷贝到framework相应目录下。</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 例如(1)button的selector。将appupdate模块的drawable/common_btn_selector.xml文件拷贝到framework/base/core/res/res/drawable里，确保没有重名文件。　　(2)将appupdate模块的anim/loading.xml文件拷贝到framework/base/core/res/res/anim里，确保没有重名文件。　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 四.增加style资源　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 1.将appupdate模块的style文件里定义的所有style拷贝到framework/base/core/res/res/values/style.xml里。确保没有覆盖原生的style.　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 2.在framework/base/core/res/res/values/public.xml文件里增加对这些style的声明。　　3.framework/base/core/res/res/ 下mm编译　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 4. \Honeycomb下 make update-api　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 五.增加color资源　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 1.将appupdate模块的style文件里定义的所有style拷贝到framework/base/core/res/res/values/color.xml里。确保没有覆盖原生的color.　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 2.在framework/base/core/res/res/values/public.xml文件里增加对这些color的声明。　　3.framework/base/core/res/res/ 下mm编译　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 4. \Honeycomb下 make update-api　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 六.增加资源id　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 1.在framework/base/core/res/res/values/ids.xml里定义你jar中所用的id(R.id)*)。确保没有覆盖原生的.　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 2.在framework/base/core/res/res/values/public.xml文件里增加对这些id的声明。　　3.framework/base/core/res/res/ 下mm编译　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 4. \Honeycomb下 make update-api　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 最后，eclipse源码中要修改以下：　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 1. 把R.*.*全部替换成<a target="_blank" href="http://lib.csdn.net/base/15" rel="nofollow noopener noreferrer" style="margin:0px; padding:0px; color:rgb(0,0,0)">android</a>.R.*.*例如R.layout.appupg_tip_dialog 要更换为android.R.layout.appupg_tip_dialog　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 2. 资源文件中对资源的调用需要添加android：如&lt;textview p="" &lt;="" 要改成　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 3. Import *.*.*.R删除。　　linux下jar包路径　　Honeycomb\out\target\common\obj\JAVA_LIBRARIES\hisenseAppUpgrade_sdk_intermediates　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 另,要想在eclipse环境下编译修改后的应用自升级jar。　　</p> 
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> 1， 从编译的源码中拷贝framework.jar及framework-res.apk两个文件，解压缩后。从framework.jar中拷贝出android文件夹，从framework-res.apk拷贝出res文件夹，然后添加到android.jar包中。替换自升级工程的android.jar。然后把res文件夹下出现X的文件删除即可。　　应用自升级修改方法　　资源修改要通过frameworks层，修改后要在源码中编译。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0f27504781ab83bd352e7dc6085d8143/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在framework下新建系统api</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2255ada369889232a8cbd45e93408b8f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">拟合函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>