<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Type-C笔记本电脑全功能TCPC接口方案 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Type-C笔记本电脑全功能TCPC接口方案" />
<meta property="og:description" content=" 随着科技的进步，笔记本电脑的发展越来越快，相对之前总担心散热和价格问题，人们可能更倾向于选择台式电脑，笔者之前在电脑城自行组装一台电脑，大概四五千就可以达到相当不错的配置，但是便携性跟笔记本电脑没法比，如今笔记本电脑的市场竞争激烈，价格也低了不少，对消费者非常有利，四五千的笔记本电脑配置也是不错的了。
如今笔记本电脑基本是往两个方向发展，一是游戏笔记本，主打高端配置，比较笨重，二是轻薄本，主打便携性，比较轻盈。
接下来我主要针对轻薄笔记本的接口展开论述，轻薄本因为考虑到便携性，采用相当薄的机身，因此去掉了传统的RJ45网线接口，原来占位置的网线接口融入到了Type-C接口里，让整体机身可以做到相当薄的厚度。
全功能的Type-C接口，不仅可以实现快充，还可以连拓展坞，转接网卡，投屏等等功能，Type-C接口不用占太多位置，而且功能强大，对于轻薄本来说真是如虎添翼。
那么Type-C接口如何实现诸多功能呢？我们了解到需要一颗TCPC芯片。TCPC全称是USB Type-C Port Controller，即USB Type-C 端口控制器。TCPC是一个功能控制模块，包括VBUS和VCONN电源控制、USB Type-C CC逻辑以及USB PD通信 BMC物理层和部分协议层等。
由于USB-C端口、USB PD等快充协议是近几年才推出的，所以在之前推出的SOC或MCU必然没有集成USB PD、QC等协议，也不支持USB Type-C的逻辑识别功能，也就无法实现USB Type-C端口快充和高清音视频传输的功能，因为快充和高清音视频传输的实现都需要依靠USB Type-C的识别和相关协议的沟通。
那么这些SOC或MCU将面临市场的淘汰和资源的浪费。而且研发新的集成USB PD、QC等的SOC或MCU，开发周期长，成本高，足以让不少芯片原厂止步，而且有的设备需要多个USB -C口（比如苹果公司推出的Macbook Pro笔记本就有4个USB-C口），更是加大了研发难度。那么有没有简单的方法解决以上的困境？答案是有，就是采用TCPC芯片。
可以看到TCPC重点在“控制”，是USB Type-C控制器，负责控制底层通信的实施，包括出错重发机制。TCPM重点在“管理”，是USB Type-C管理器，负责管理一个或多个USB Type-C端口的上层策略。TCPM和TCPC之间的连接的接口叫做TCPCI，是两者之间的桥梁，可采用I2C（或SMbus）方式进行沟通。
CC逻辑层：CC握手，识别设备
物理层：编码和解码信息，控制失败重发，添加校验码和根据检验码判断通信是否正确
协议层：生成USB PD通信协议
策略层：决定通信过程中的策略
设备策略管理层： 决定整个通信的策略
嵌入式控制器(EC)管理电池充电器控制器(BCC)，相当于的管家，对电池报警、电源插入、温度传感器报告和笔记本盖子的状态等级进行管理。可用于通信出需要的功率，然后启动SOC。 PMU(电源管理单元)控制电池的充电和放电。EC，PMU或SOC都可以作为USB Type-C端口管理器(USB Type-C Port Manager，TCPM)，通过I2C/SMbus的方式与LDR6280(USB Type-C Port Controller，TCPC)通信，实现功率的配置，以及通过VDM信息的协商等，控制USB芯片组 、DisplayPort芯片组分别输出USB信号和DisplayPort信号。
以笔记本为例，LDR6280设置为DRP扫描，通过I2C中断引脚输出低电平来通知TCPM，底层状态发生了改变。TCPM读取TCPCI中规定的ALERT寄存器来获取当前的状态信息。快充的实现参照前面的多USB Type-C端口的移动电源的介绍，这里介绍高清音视频部分。 功率配置完成后，主机的嵌入式控制器(TCPM)控制LDR6280进行VDM信息的协商，包括DP Alt Mode的配置等，LDR6280如果收到Attention信息，报告给TCPM。TCPM通知DisplayPort芯片组进行AUX通路的通信，读取显示设备的EDID信息，确认支持后，输出DisplayPort高清视频信号给显示设备。其中DisplayPort信号中还包含音频信号。TCPM还通知USB芯片组输出USB数据。 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c518bd0aabe4d0e76c0049127563e36a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-07T10:50:19+08:00" />
<meta property="article:modified_time" content="2022-02-07T10:50:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Type-C笔记本电脑全功能TCPC接口方案</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>随着科技的进步，笔记本电脑的发展越来越快，相对之前总担心散热和价格问题，人们可能更倾向于选择台式电脑，笔者之前在电脑城自行组装一台电脑，大概四五千就可以达到相当不错的配置，但是便携性跟笔记本电脑没法比，如今笔记本电脑的市场竞争激烈，价格也低了不少，对消费者非常有利，四五千的笔记本电脑配置也是不错的了。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b3/6a/Mp8qE2S8_o.png"></p> 
<p></p> 
<p>如今笔记本电脑基本是往两个方向发展，一是游戏笔记本，主打高端配置，比较笨重，二是轻薄本，主打便携性，比较轻盈。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0c/e6/kAZPtdRI_o.png"></p> 
<p></p> 
<p>接下来我主要针对轻薄笔记本的接口展开论述，轻薄本因为考虑到便携性，采用相当薄的机身，因此去掉了传统的RJ45网线接口，原来占位置的网线接口融入到了Type-C接口里，让整体机身可以做到相当薄的厚度。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/25/71/SYteONXx_o.png"></p> 
<p> 全功能的Type-C接口，不仅可以实现快充，还可以连拓展坞，转接网卡，投屏等等功能，Type-C接口不用占太多位置，而且功能强大，对于轻薄本来说真是如虎添翼。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/fa/07/mlJKhr7m_o.png"></p> 
<p>那么Type-C接口如何实现诸多功能呢？我们了解到需要一颗TCPC芯片。TCPC全称是USB Type-C Port Controller，即USB Type-C 端口控制器。TCPC是一个功能控制模块，包括VBUS和VCONN电源控制、USB Type-C CC逻辑以及USB PD通信 BMC物理层和部分协议层等。</p> 
<p><img alt="" src="https://images2.imgbox.com/bf/9a/Ie8on4IB_o.png"></p> 
<p>由于USB-C端口、USB PD等快充协议是近几年才推出的，所以在之前推出的SOC或MCU必然没有集成USB PD、QC等协议，也不支持USB Type-C的逻辑识别功能，也就无法实现USB Type-C端口快充和高清音视频传输的功能，因为快充和高清音视频传输的实现都需要依靠USB Type-C的识别和相关协议的沟通。</p> 
<p>那么这些SOC或MCU将面临市场的淘汰和资源的浪费。而且研发新的集成USB PD、QC等的SOC或MCU，开发周期长，成本高，足以让不少芯片原厂止步，而且有的设备需要多个USB -C口（比如苹果公司推出的Macbook Pro笔记本就有4个USB-C口），更是加大了研发难度。那么有没有简单的方法解决以上的困境？答案是有，就是采用TCPC芯片。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/18/0d/4T2zHtkN_o.png"></p> 
<p>可以看到TCPC重点在“控制”，是USB Type-C控制器，负责控制底层通信的实施，包括出错重发机制。TCPM重点在“管理”，是USB Type-C管理器，负责管理一个或多个USB Type-C端口的上层策略。TCPM和TCPC之间的连接的接口叫做TCPCI，是两者之间的桥梁，可采用I2C（或SMbus）方式进行沟通。</p> 
<p>CC逻辑层：CC握手，识别设备</p> 
<p>物理层：编码和解码信息，控制失败重发，添加校验码和根据检验码判断通信是否正确</p> 
<p>协议层：生成USB PD通信协议</p> 
<p>策略层：决定通信过程中的策略</p> 
<p>设备策略管理层： 决定整个通信的策略</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c1/7b/E5Xs1kmZ_o.png"></p> 
<p> </p> 
<p>嵌入式控制器(EC)管理电池充电器控制器(BCC)，相当于的管家，对电池报警、电源插入、温度传感器报告和笔记本盖子的状态等级进行管理。可用于通信出需要的功率，然后启动SOC。 PMU(电源管理单元)控制电池的充电和放电。EC，PMU或SOC都可以作为USB Type-C端口管理器(USB Type-C Port Manager，TCPM)，通过I2C/SMbus的方式与LDR6280(USB Type-C Port Controller，TCPC)通信，实现功率的配置，以及通过VDM信息的协商等，控制USB芯片组 、DisplayPort芯片组分别输出USB信号和DisplayPort信号。</p> 
<p>以笔记本为例，LDR6280设置为DRP扫描，通过I2C中断引脚输出低电平来通知TCPM，底层状态发生了改变。TCPM读取TCPCI中规定的ALERT寄存器来获取当前的状态信息。快充的实现参照前面的多USB Type-C端口的移动电源的介绍，这里介绍高清音视频部分。 功率配置完成后，主机的嵌入式控制器(TCPM)控制LDR6280进行VDM信息的协商，包括DP Alt Mode的配置等，LDR6280如果收到Attention信息，报告给TCPM。TCPM通知DisplayPort芯片组进行AUX通路的通信，读取显示设备的EDID信息，确认支持后，输出DisplayPort高清视频信号给显示设备。其中DisplayPort信号中还包含音频信号。TCPM还通知USB芯片组输出USB数据。 </p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/d5/96/K1Wzmg88_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/df/e8/CNOQPbVE_o.png"> </p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c13b59229761c4d918ede8c92174c5c2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Installed Build Tools revision 31.0.0 is corrupted. Remove and install again using the SDK Manager.</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5e1fa4dc96fe11dfe63f56ac28d01a81/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【强化学习】实现Atari游戏的自动化学习（仅供参考）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>