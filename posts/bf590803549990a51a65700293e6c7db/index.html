<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JDBC基础超详细（一）（连接数据库，实现增删改查四项主要功能） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JDBC基础超详细（一）（连接数据库，实现增删改查四项主要功能）" />
<meta property="og:description" content="JDBC基础超详细（二）（PreparedStatement与Statement的区别，避免mysql注入）
源码奉上，大家和我一起操作，印象更加深刻
import java.sql.*; public class Javatell { public static void main(String []args){ Connection connection=null; Statement statement=null; ResultSet resultSet=null; //注册驱动 try { try { Class.forName(&#34;com.mysql.jdbc.Driver&#34;); } catch (ClassNotFoundException e) { e.printStackTrace(); } //获取链接 String url=&#34;jdbc:mysql://localhost:3306/user&#34;; String user=&#34;root&#34;; String password=&#34;200101&#34;; connection=DriverManager.getConnection(url,user,password); //获取数据库操作对象 statement=connection.createStatement(); //定义插入语句 String insertSql=&#34;insert into user_information values (4,&#39;你好&#39;,&#39;123456&#39;)&#34;; //定义更新语句 String updateSql=&#34;update user_information set user_name=&#39;王五&#39; where user_name=&#39;李四&#39;&#34;; //定义删除语句 String deleteSql=&#34;delete from user_information where user_name=&#39;张三&#39; &#34;; //定义查询语句 String selectSql=&#34;select * from user_information &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/bf590803549990a51a65700293e6c7db/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-12T13:51:07+08:00" />
<meta property="article:modified_time" content="2021-12-12T13:51:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JDBC基础超详细（一）（连接数据库，实现增删改查四项主要功能）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><a class="link-info" href="https://blog.csdn.net/qq_58510930/article/details/121889948" title="JDBC基础超详细（二）（PreparedStatement与Statement的区别，避免mysql注入）">JDBC基础超详细（二）（PreparedStatement与Statement的区别，避免mysql注入）</a></p> 
<p>源码奉上，大家和我一起操作，印象更加深刻</p> 
<pre><code class="language-java">import java.sql.*;


public class Javatell {
    public static void main(String []args){
        Connection connection=null;
        Statement statement=null;
        ResultSet resultSet=null;
        //注册驱动
        try {
            try {
                Class.forName("com.mysql.jdbc.Driver");
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }
            //获取链接
            String url="jdbc:mysql://localhost:3306/user";
            String user="root";
            String password="200101";
            connection=DriverManager.getConnection(url,user,password);
            //获取数据库操作对象
            statement=connection.createStatement();
            //定义插入语句
            String insertSql="insert into user_information values (4,'你好','123456')";
            //定义更新语句
            String updateSql="update user_information set user_name='王五' where user_name='李四'";
            //定义删除语句
            String deleteSql="delete from user_information where user_name='张三' ";
            //定义查询语句
            String selectSql="select * from user_information ";
            //首先定义count表示结果展示的行数
            int count=0;
            //专门执行dml语句（insert，delete，update）
            count =  statement.executeUpdate(insertSql);
            //判断结果，如果输出一行，表示该语句影响到了一行，表示成功
            System.out.println(count==1?"插入成功":"插入失败");
            count=statement.executeUpdate(updateSql);
            System.out.println(count==1?"更新成功":"更新失败");
            count=statement.executeUpdate(deleteSql);
            System.out.println(count==1?"删除成功":"删除失败");
            resultSet=statement.executeQuery(selectSql);
            while (resultSet.next()) {
                //不管数据库中是什么类型，都是取出string
                String userId= resultSet.getString("user_id");
                String userName= resultSet.getString("user_name");
                String userPassword= resultSet.getString("user_password");
                System.out.println(userId+userName+userPassword);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        finally {
            if (resultSet!=null){try{
                resultSet.close();

            }
            catch (SQLException e) {
                e.printStackTrace();}}
            try {
                if (statement!=null) {
                    statement.close();
                }
            } catch (SQLException e) {
                e.printStackTrace();
            }
            try{
                if (connection!=null){
                    connection.close();
                }
            }catch (SQLException e){
                e.printStackTrace();
            }
        }

    }
}
</code></pre> 
<h2>一、注册驱动（第一步）</h2> 
<h4>驱动</h4> 
<p>驱动，即我们从官网下载的jar包，如果没有jar包，我们可以编译程序，但是程序无法运行，将官网下载的jar包添加到依赖。如下图：</p> 
<p><img alt="" height="175" src="https://images2.imgbox.com/f8/13/DGjnGsMc_o.png" width="435"></p> 
<h4>驱动注册的两种方式</h4> 
<ul><li>多层注册（为了保证代码的整洁，这里将抛出异常的语句删除，<span style="color:#38d8f0;"><strong>com.mysql.jdbc.Driver()这一条语句是来源于刚刚导入的jar包，并不是idea自带的</strong></span>）</li></ul> 
<pre><code class="language-java">Driver driver=new com.mysql.jdbc.Driver();DriverManager.registerDriver(driver);</code></pre> 
<ul><li><strong><span style="color:#fe2c24;">利用反射机制注册（最常用，直接导入Driver这个类</span></strong><strong><span style="color:#fe2c24;">）</span></strong></li></ul> 
<pre><code class="language-java">Class.forName("com.mysql.jdbc.Driver");</code></pre> 
<h2>二、获取链接与获取数据库操作对象（第二、三步）</h2> 
<ul><li>代码示例</li></ul> 
<pre><code class="language-java">//获取链接
Connection connection=DriverManager.getConnection(url,user,password);
//获取数据库操作对象
Statement  statement=connection.createStatement();</code></pre> 
<ul><li>url(这里以MySql数据库为例子)：url=jdbc:mysql://ip地址:端口/数据库名称</li></ul> 
<pre><code class="language-java">//本地数据库，user为数据库名称
String url="jdbc:mysql://localhost:3306/user";
//数据库的用户为root
String user="root";
//进入数据库的密码，一定要更改成自己的
String password="123456";</code></pre> 
<h2>三、定义sql语句以及结果判断</h2> 
<h3>定义sql语句（查询单独讲解）</h3> 
<pre><code class="language-java">//定义插入语句
String insertSql="insert into user_information values (4,'你好','123456')";
//定义更新语句
String updateSql="update user_information set user_name='王五' where user_name='李四'";
//定义删除语句
String deleteSql="delete from user_information where user_name='张三' ";</code></pre> 
<h3>结果判断statement.<span style="color:#1a439c;">executeUpdate</span>（插入，更新，删除） </h3> 
<ul><li>这是我的初始表</li></ul> 
<p><img alt="" height="137" src="https://images2.imgbox.com/6e/09/r86v9oQM_o.png" width="608"></p> 
<ul><li> 判断语句</li></ul> 
<pre><code class="language-java">int count=0;
//专门执行dml语句（insert，delete，update）
count =  statement.executeUpdate(insertSql);
//判断结果，如果输出一行，表示该语句影响到了一行，表示成功
System.out.println(count==1?"插入成功":"插入失败");
count=statement.executeUpdate(updateSql);
System.out.println(count==1?"更新成功":"更新失败");
count=statement.executeUpdate(deleteSql);
System.out.println(count==1?"删除成功":"删除失败");</code></pre> 
<ul><li>结果展示</li></ul> 
<p><img alt="" height="154" src="https://images2.imgbox.com/9e/5e/YImVWSa0_o.png" width="1200"></p> 
<p><img alt="" height="185" src="https://images2.imgbox.com/20/2b/FFNrtqqs_o.png" width="642"></p> 
<h3><span style="color:#fe2c24;"> 结果判断</span>statement.<span style="color:#1a439c;"><strong>executeQuery</strong></span><span style="color:#fe2c24;">（查询）</span></h3> 
<p>在Java中，有一个<span style="color:#956fe7;">ResultSet</span>的数据类型，专门用于存储select的语句的结果，而其还拥有一个</p> 
<p>resultSet.next()类似与C语言中指针类型的操作,关系如下图：</p> 
<p><img alt="" height="604" src="https://images2.imgbox.com/8f/b5/ZNIsPgFt_o.png" width="1200"></p> 
<p> 所以我们既然可以定位到每一个行，就可以在行中定位到每一列，最后输出行列中的值</p> 
<ul><li>判断语句与输出语句</li></ul> 
<pre><code class="language-java">Statement resultSet=statement.executeQuery(selectSql);
            while (resultSet.next()) {
                //不管数据库中是什么类型，都是取出string,取出相应的列数
                String userId= resultSet.getString("user_id");
                String userName= resultSet.getString("user_name");
                String userPassword= resultSet.getString("user_password");
                //另外一种方式 ，不建议，列数对应一旦改变就无法精准输出
                /*String userId= resultSet.getString(1);
                String userName= resultSet.getString(2);
                String userPassword= resultSet.getString(3);*/
                System.out.println(userId+userName+userPassword);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }</code></pre> 
<ul><li>结果展示</li></ul> 
<p><img alt="" height="98" src="https://images2.imgbox.com/20/9d/ycGVkynU_o.png" width="192"></p> 
<h2>四、关闭通道（重要）</h2> 
<ul><li>当我们执行jdbc时，这个时候是多个线程在同时运行，如果我们结束时候没有结束这些线程，他们会一直保存着，这个连接是与数据库服务器的一个连接，虽然你的方法结束了，但是这个资源依然存在数据库连接并没有释放，如果不设置close，长时间使用，你会发现自己的电脑卡的飞起。👻</li><li>线程结束的顺序（就像栈那样，先进行链接，在获取对象，最后看结果，而关闭时，先进后出）：</li></ul> 
<p>打开时：Connection -&gt; PreparedStatement -&gt; ResultSet<br> 关闭时：ResultSet-&gt; PreparedStatement -&gt; Connection</p> 
<ul><li>代码演示(要在finally语句中进行，保证结束后不会在进行其他操作)</li></ul> 
<pre><code>finally {
            if (resultSet!=null){try{
                resultSet.close();

            }
            catch (SQLException e) {
                e.printStackTrace();}}
            try {
                if (statement!=null) {
                    statement.close();
                }
            } catch (SQLException e) {
                e.printStackTrace();
            }
            try{
                if (connection!=null){
                    connection.close();
                }
            }catch (SQLException e){
                e.printStackTrace();
            }
        }</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6884782ed9aa61fd5452396dd6d9bf39/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">OpenSSL 1.0.2q交叉编译树莓派4B</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0adfbd39e9c539a670b4134c4b738044/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c/c&#43;&#43;和lua的交互使用分享</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>