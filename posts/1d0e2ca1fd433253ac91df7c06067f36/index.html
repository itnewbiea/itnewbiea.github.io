<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>oracle Constraint - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="oracle Constraint" />
<meta property="og:description" content="约束简介
约束用于确保数据库数据满足特定的商业逻辑或者企业规则，如果定义了约束，并且数据不符
合约束，那么DML操作（INSERT、UPDATE、DELETE）将不能成功执行。约束包括NOT NULL、UNIQUE、PRIMARY KEY、FOREING KEY 以及CHECK等五种类型
定义约束
列级约束：
column [CONSTRAINT constraint_name] constraint_type
表级约束：
column ,...,
[CONSTRAINT constraint_name] constraint_type (column,...)
1.定义NOT NULL约束
NOT NULL 约束只能在列级定义，不能在表级定义
例：
CREATE TABLE emp01(
eno INT NOT NULL,
name VARCHAR2(10) CONSTRAINT nn_name2 NOT NULL,
salary NUMBER(6,2)
);
上例中，eno列与name列上定义了NOT NULL约束，其中eno列的NOT NULL约束没有指定约束名，而
name列则指定了约束名nn_name。
可以通过查询user_constraints字典来查看所定义的约束，如：
SQL&gt; select constraint_name,constraint_type from user_constraints
2 where table_name=&#39;EMP01&#39;;
CONSTRAINT_NAME CO
------------------------------------------------------------ --
SYS_C0010618 C
NN_NAME C
可见，没有给约束名的，系统将会自动的定义一个约束名称，其中约束类型中，P:表示主键，R:
表示外键，C表示NOT NULL或CHECK，U表示UNIQUE。且系统中同一方案下的的约束名不能重复
2.定义UNIQUE约束
定义了惟一约束之后，惟一约束列的列值不能重复，但可以为NULL。UNIQUE约束既可以在列级
定义，也可以在表级定义" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1d0e2ca1fd433253ac91df7c06067f36/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-08-06T09:20:14+08:00" />
<meta property="article:modified_time" content="2014-08-06T09:20:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">oracle Constraint</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="iteye-blog-content-contain" style="font-size:14px;"> 
 <p> </p> 
 <p><strong>约束简介</strong><br>约束用于确保数据库数据满足特定的商业逻辑或者企业规则，如果定义了约束，并且数据不符</p> 
 <p>合约束，那么DML操作（INSERT、UPDATE、DELETE）将不能成功执行。约束包括NOT NULL、UNIQUE、PRIMARY KEY、FOREING KEY 以及CHECK等五种类型</p> 
 <p><strong>定义约束</strong><br><strong><span style="line-height:18px;color:#ff0000;">列级约束：</span></strong><br>column [CONSTRAINT constraint_name] constraint_type<br><strong><span style="line-height:18px;color:#ff0000;">表级约束：</span></strong><br>column ,...,<br>[CONSTRAINT constraint_name] constraint_type (column,...)</p> 
 <p><strong>1.定义NOT NULL约束</strong><br>NOT NULL 约束只能在列级定义，不能在表级定义<br>例：<br>CREATE TABLE emp01(<br>eno INT  NOT NULL,<br>name VARCHAR2(10) CONSTRAINT nn_name2 NOT NULL,<br>salary NUMBER(6,2)<br>);<br>上例中，eno列与name列上定义了NOT NULL约束，其中eno列的NOT NULL约束没有指定约束名，而</p> 
 <p>name列则指定了约束名nn_name。<br>可以通过查询user_constraints字典来查看所定义的约束，如：<br>SQL&gt; select constraint_name,constraint_type from user_constraints<br>2  where table_name='EMP01';</p> 
 <p>CONSTRAINT_NAME                                              CO<br>------------------------------------------------------------ --<br>SYS_C0010618                                                 C<br>NN_NAME                                                      C<br>可见，没有给约束名的，系统将会自动的定义一个约束名称，其中约束类型中，P:表示主键，R:</p> 
 <p>表示外键，C表示NOT NULL或CHECK，U表示UNIQUE。且系统中同一方案下的的约束名不能重复</p> 
 <p> </p> 
 <p><strong>2.定义UNIQUE约束</strong><br>定义了惟一约束之后，惟一约束列的列值不能重复，但可以为NULL。UNIQUE约束既可以在列级</p> 
 <p>定义，也可以在表级定义<br>例：<br>CREATE TABLE emp02(<br>eno INT UNIQUE,name VARCHAR2(10) CONSTRAINT u_name UNIQUE,<br>salary NUMBER(6,2)<br>);<br>同样，如果没有给出约束名，系统会自动定义一个名称，可从查询结果得出<br>SQL&gt; select constraint_name,constraint_type from user_constraints<br>2  where table_name='EMP02';</p> 
 <p>CONSTRAINT_NAME                                              CO<br>------------------------------------------------------------ --<br>SYS_C0010623                                                 U<br>U_NAME<br>U</p> 
 <p><strong>3.定义PRIMARY KEY 约束</strong><br>当定义主键约束后，主键约束列的列值不仅不能重复，而且也不能为NULL。主键约束既可以在</p> 
 <p>列级定义，也可以在表级定义。一张表最多只能具有一个主键约束，当一个表中的多个列都要为</p> 
 <p>主键是，可以在表级定义。<br>例1：列级定义主键<br>CREATE TABLE depto04(<br>dno INT PRIMARY KEY,<br>dname VARCHAR2(10),loc VARCHAR2(20)<br>);<br>通过查询user_constraints可得出<br>SQL&gt;  select constraint_name ,constraint_type from user_constraints<br>2  where table_name='DEPT04';</p> 
 <p>CONSTRAINT_NAME                                              CO<br>------------------------------------------------------------ --<br>SYS_C0010625                                                 P<br>通过查询user_cons_columns可得出<br>SQL&gt; select constraint_name,column_name from user_cons_columns<br>2  where table_name='DEPT04';</p> 
 <p>CONSTRAINT_NAME                                              COLUMN_NAME<br>------------------------------------------------------------ ------------</p> 
 <p>SYS_C0010625                                                 DNO<br>例2：表级定义主键<br>CREATE TABLE dept05(<br>dno INT,<br>dname VARCHAR2(10),loc VARCHAR2(20),<br>PRIMARY KEY(dno,dname)<br>);<br>通过查询user_constraints可以得出<br>SQL&gt; select constraint_name,constraint_type from user_constraints<br>2  where table_name='DEPT05';</p> 
 <p>CONSTRAINT_NAME                                              CO<br>------------------------------------------------------------ --<br>SYS_C0010626                                                 P<br>通过查询user_cons_columns可得出<br>SQL&gt; select constraint_name,column_name from user_cons_columns<br>2  where table_name='DEPT05';</p> 
 <p>CONSTRAINT_NAME                                              COLUMN_NAME<br>------------------------------------------------------------ -------------</p> 
 <p>SYS_C0010626                                                 DNO<br>SYS_C0010626                                                 DNAME<br>可见，当在表级定义时，约束名称将会相同，而在user_cons_columns查询是，每一列将对应约束</p> 
 <p>名称相同的两条记录</p> 
 <p> </p> 
 <p><strong>4.定义FOREING KEY约束</strong><br>当定义了外部键约束之后，要求外部键列的数据必须在主表的主键列（或惟一列）中存在，或</p> 
 <p>者为NULL,FOREING KEY约束既可以在列级定义，也可以在表级定义。<br>关键字说明：<br>FOREING KEY:该选项用于指定在表级定义外部键约束。当在表级定义外部键约束时必须指定该选</p> 
 <p>项，在列级定义外部键约束不需要指定该选项<br>REFERENCES:该选项用于指定主表名及其主键列。当定义外部键约束时，该选项必须指定。<br>ON DELETE CASCAED:该选项用于指定级联删除选项。如果在定义外部键约束时指定了该选项，那</p> 
 <p>么当删除主表数据时会级联删除从表的相关数据。<br>ON DELECT SET NULL:该选项用于指定转换相关的外部键值为NULL，如果在定义外部键约束时指定</p> 
 <p>了该选项，那么当删除主表数据时会将从表外部键列的数据设置为NULL。<br>例1：列级定义外键约束<br>CREATE TABLE emp04(<br>eno INT,name VARCHAR2(10),salary NUMBER(6,2),<br>dno INT CONSTRAINT fk_dno REFERENCES dept04(dno)<br>);<br>SQL&gt; select constraint_name,constraint_type from user_constraints<br>2  where table_name='EMP04';</p> 
 <p>CONSTRAINT_NAME                                              CO<br>------------------------------------------------------------ --<br>FK_DNO                                                       R<br>SQL&gt; select constraint_name,column_name from user_cons_columns<br>2  where table_name='EMP04';</p> 
 <p>CONSTRAINT_NAME                                              COLUMN_NAME<br>------------------------------------------------------------ -----------</p> 
 <p>FK_DNO                                                       DNO<br>例2：表级定义外键约束<br>CREATE TABLE emp05(<br>eno INT,name VARCHAR2(10),salary NUMBER(6,2),<br>dno INT,<br>CONSTRAINT fk_dno_name FOREIGN KEY(dno,name) REFERENCES dept05(dno,dname)<br>);<br>SQL&gt; select constraint_name,constraint_type from user_constraints<br>2  where table_name='EMP05'<br>3  ;</p> 
 <p>CONSTRAINT_NAME                                              CO<br>------------------------------------------------------------ --<br>FK_DNO_NAME                                                  R<br>SQL&gt; select constraint_name,column_name from user_cons_columns<br>2  where table_name='EMP05';</p> 
 <p>CONSTRAINT_NAME                                              COLUMN_NAME<br>------------------------------------------------------------ -----------</p> 
 <p>FK_DNO_NAME                                                  DNO<br>FK_DNO_NAME                                                  NAME</p> 
 <p><strong>5.定义CHECK约束</strong><br>CHECK约束既可以在列级定义，也可以在表级定义。CHECK约束允许列为NULL。<br>例：<br>CREATE TABLE emp06(<br>eno INT,name VARCHAR2(10),salary NUMBER(6,2),<br>CHECK (salary BETWEEN 1000 AND 5000)<br>);<br>SQL&gt;  select constraint_name,constraint_type from user_constraints<br>2   where table_name='EMP06';</p> 
 <p>CONSTRAINT_NAME                                              CO<br>------------------------------------------------------------ --<br>SYS_C0010629                                                 C<br>SQL&gt; select constraint_name,column_name from user_cons_columns<br>2  where table_name='EMP06';</p> 
 <p>CONSTRAINT_NAME                                              COLUMN_NAME<br>------------------------------------------------------------ -----------</p> 
 <p>SYS_C0010629                                                 SALARY</p> 
 <p><strong>6.定义复合约束</strong><br>复合约束即在表级定义，基于多列的复合约束，如：<br>CREATE TABLE dept05(<br>dno INT,<br>dname VARCHAR2(10),loc VARCHAR2(20),<br>PRIMARY KEY(dno,dname)<br>);或<br>CREATE TABLE emp05(<br>eno INT,name VARCHAR2(10),salary NUMBER(6,2),<br>dno INT,<br>CONSTRAINT fk_dno_name FOREIGN KEY(dno,name) REFERENCES dept05(dno,dname)<br>);</p> 
 <p> </p> 
 <p><strong>9.3维护约束</strong><br><strong><span style="line-height:18px;color:#ff0000;">9.3.1增加约束</span></strong><br>如果增加UNIQUE、PRIMARY KEY、FOREIGN KEY 和CKECK 必须使用ALTER TABLE语句的ADD子句;</p> 
 <p>如果增加NOT NULL约束，那么必须使用ALTER TABLE语句的MODIFY子句，如：<br>ALTER TABLE table_name ADD [CONSTRAINT constraint_name]<br>constraint_type (column,...)<br>ALTER TABLE table_name MODIFY column<br>[CONSTRAINT constraint_name] NOT NULL;<br><strong><span style="line-height:18px;color:#ff0000;">9.3.2修改约束名</span></strong><br>在同一个方案中，约束名必须惟一,并且约束名也不能与其他对象同名。当鱫IMPDP工具或者IMP</p> 
 <p>工具导入其他对象时，如发现有同名的对象，将会出错<br>语法：<br>ALTER TABLE table_name RENAME CONSTRAINT old_constraint_name<br>TO new_constraint_name;<br>例：<br>ALTER TABLE emp01 RENAME CONSTRAINT SYS_C005028<br>TO ck_emp01_salary;<br><strong><span style="line-height:18px;color:#ff0000;">9.3.3 删除约束</span></strong><br>当删除特定表的主键约束时，如果该表具有相关的从表，那么在删除主键约束</p> 
 <p>时必须带有CASCAED选项<br>语法：<br>ALTER TABLE table_name DROP<br>CONSTRAINT constraint_name |PRIMARY KEY<br>例1<br>ALTER TABLE emp01 DROP CONSTRAINT ck_emp01_salary;<br>例2<br>ALTER TABLE dept01 DROP PRIMARY KEY CASCAED<br><strong><span style="line-height:18px;color:#ff0000;">9.3.4禁止约束</span></strong><br>禁止约束指使约束临时失效。当禁止了约束之后，约束规则将不再生效。在使用SQL*LOADER或</p> 
 <p>INSERT装载数据之前，为了加快数据装载速度，应该首先禁止约束，然后装载数据。<br>语法：<br>ALTER TABLE table_name<br>DISABLE CONSTRAINT constaint_name [CASCAED];--CASCAED用于指定级联禁止从表的外部键</p> 
 <p>约束<br>例：<br>ALTER TABLE emp05 DISABLE CONSTAINT SYS_C00502;<br><strong><span style="line-height:18px;color:#ff0000;">9.3.5 激活约束</span></strong><br>语法：<br>ALTER TABLE table_name ENABLE CONSTRAINT constraint_name;<br>例：<br>ALTER TABLE emp05 ENABLE CONSTRAINT SYS_C005022;<br><span style="line-height:18px;color:#ff0000;"><strong>9.4 显示约束信息</strong></span><br>1.USER_CONSTRAINTS<br>2.USER_CONS_COLUMNS</p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4d8062dcc6d3604b4d2b988ae9519049/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">hadoop Shell命令详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/989769d43e4a182649842b1de58d3f66/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">遥感技术</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>