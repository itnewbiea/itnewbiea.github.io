<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python：结构化模式匹配 match case - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python：结构化模式匹配 match case" />
<meta property="og:description" content="背景 一直以来，Python 没有其他语言的 switch 方法来实现多条件分支，要求支持的呼声很高，Python 3.10.0 支持了它，而且是超级版的，实现的思路与它们大有不同。match 与 case 配合，由 case 从上到下将目标与语句中的每个模式进行比较，直到确认匹配，执行相应的模式下的语句。如果未确认完全匹配，则最终用通配符 _（如提供）将用作匹配情况。如所有的都不匹配且没有通配符，则相当于空操作。
模式由序列、映射、基本数据类型以及类实例构成。 模式匹配使得程序能够从复杂的数据类型中提取信息、根据数据结构实现分支，并基于不同的数据形式应用特定的动作。
Python 3.10 实现的 match 功能是其他开发语言中传统的 switch 的超集，它不仅仅是 switch，可以实现更为复杂的功能。模式匹配大大增加了控制流的清晰度和表达能力。
语法 match subject: case &lt;pattern_1&gt;: &lt;action_1&gt; case &lt;pattern_2&gt;: &lt;action_2&gt; case &lt;pattern_3&gt;: &lt;action_3&gt; case _: &lt;action_wildcard&gt; match 语句接受一个表达式并将其值与以一个或多个 case 语句块形式给出的一系列模式进行比较。 具体来说，模式匹配的操作如下：
给定具有特定类型和结构的数据 (subject)针对 subject 在 match 语句中求值从上到下对 subject 与 case 语句中的每个模式进行比较： 直到确认匹配到一个模式，执行与被确认匹配的模式相关联的动作如果没有确认到一个完全的匹配： 如果提供了使用通配符 _ 的最后一个 case 语句，则它将被用作已匹配模式不存在使用通配符的 case 语句，则整个 match 代码块不执行任何操作 用法 匹配一个字面值
grade = 3 match grade: case 1: print(&#39;一年级&#39;) case 2: print(&#39;二年级&#39;) case 3: print(&#39;三年级&#39;) case _: print(&#39;未知年级&#39;) # 三年级 匹配后，将执行与该 case 相关的动作：变量名 _ 作为 通配符 并确保目标将总是被匹配，是可选的, 如果之前没有匹配到,那么会执行这个语句 还可以用 | （表示或者）在一个模式中组合几个字面值:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/d6cd6effa999cfff05c2a03cbae00b7d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-09T17:36:31+08:00" />
<meta property="article:modified_time" content="2023-01-09T17:36:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python：结构化模式匹配 match case</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_1"></a>背景</h2> 
<ul><li> <p>一直以来，Python 没有其他语言的 switch 方法来实现多条件分支，要求支持的呼声很高，Python 3.10.0 支持了它，而且是超级版的，实现的思路与它们大有不同。match 与 case 配合，由 case 从上到下将目标与语句中的每个模式进行比较，直到确认匹配，执行相应的模式下的语句。如果未确认完全匹配，则最终用通配符 _（如提供）将用作匹配情况。如所有的都不匹配且没有通配符，则相当于空操作。</p> </li><li> <p>模式由序列、映射、基本数据类型以及类实例构成。 模式匹配使得程序能够从复杂的数据类型中提取信息、根据数据结构实现分支，并基于不同的数据形式应用特定的动作。</p> </li><li> <p>Python 3.10 实现的 match 功能是其他开发语言中传统的 switch 的超集，它不仅仅是 switch，可以实现更为复杂的功能。模式匹配大大增加了控制流的清晰度和表达能力。</p> </li></ul> 
<h2><a id="_8"></a>语法</h2> 
<pre><code class="prism language-py"><span class="token keyword">match</span> subject<span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;</span>pattern_1<span class="token operator">&gt;</span><span class="token punctuation">:</span>
        <span class="token operator">&lt;</span>action_1<span class="token operator">&gt;</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;</span>pattern_2<span class="token operator">&gt;</span><span class="token punctuation">:</span>
        <span class="token operator">&lt;</span>action_2<span class="token operator">&gt;</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;</span>pattern_3<span class="token operator">&gt;</span><span class="token punctuation">:</span>
        <span class="token operator">&lt;</span>action_3<span class="token operator">&gt;</span>
    <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
        <span class="token operator">&lt;</span>action_wildcard<span class="token operator">&gt;</span>
</code></pre> 
<p>match 语句接受一个表达式并将其值与以一个或多个 case 语句块形式给出的一系列模式进行比较。 具体来说，模式匹配的操作如下：</p> 
<ul><li>给定具有特定类型和结构的数据 (subject)</li><li>针对 subject 在 match 语句中求值</li><li>从上到下对 subject 与 case 语句中的每个模式进行比较： 
  <ul><li>直到确认匹配到一个模式，执行与被确认匹配的模式相关联的动作</li><li>如果没有确认到一个完全的匹配： 
    <ul><li>如果提供了使用通配符 _ 的最后一个 case 语句，则它将被用作已匹配模式</li><li>不存在使用通配符的 case 语句，则整个 match 代码块不执行任何操作</li></ul> </li></ul> </li></ul> 
<h2><a id="_30"></a>用法</h2> 
<blockquote> 
 <p>匹配一个字面值</p> 
</blockquote> 
<pre><code class="prism language-py">grade <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">match</span> grade<span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'一年级'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'二年级'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'三年级'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'未知年级'</span><span class="token punctuation">)</span>

<span class="token comment"># 三年级</span>

</code></pre> 
<ul><li>匹配后，将执行与该 case 相关的动作：</li><li>变量名 _ 作为 通配符 并确保目标将总是被匹配，是可选的, 如果之前没有匹配到,那么会执行这个语句</li></ul> 
<p>还可以用 | （表示或者）在一个模式中组合几个字面值:</p> 
<pre><code class="prism language-py">grade <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">match</span> grade<span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'一年级'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'二年级'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'三年级'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">6</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'高年级'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'未知年级'</span><span class="token punctuation">)</span>

<span class="token comment"># 高年级</span>
</code></pre> 
<p>下边是一利用一个类状态实现的开关功能：</p> 
<pre><code class="prism language-py"><span class="token keyword">class</span> <span class="token class-name">switch</span><span class="token punctuation">:</span>
    on <span class="token operator">=</span> <span class="token number">1</span>
    off <span class="token operator">=</span> <span class="token number">0</span>

status <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">match</span> status<span class="token punctuation">:</span>
    <span class="token keyword">case</span> switch<span class="token punctuation">.</span>on <span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Switch is on'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> switch<span class="token punctuation">.</span>off <span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Switch is off'</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>守卫 Guard</p> 
</blockquote> 
<p>可以在 case 中编写 if 条件语句，实现与 if 语句类似的功能：</p> 
<pre><code class="prism language-py">score <span class="token operator">=</span> <span class="token number">81</span>
<span class="token keyword">match</span> score<span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token number">100</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'满分！'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> score <span class="token keyword">if</span> score <span class="token operator">&gt;=</span> <span class="token number">80</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'高分啊～ </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>score<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> score <span class="token keyword">if</span> score <span class="token operator">&gt;=</span> <span class="token number">60</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'及格万岁！'</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'不知道说什么。'</span><span class="token punctuation">)</span>

<span class="token comment"># 高分啊～ 81</span>
</code></pre> 
<p>在 case 后面可以加入一个 if 判断作为守卫，如匹成功但守卫为假，则继续尝试下一个 case 案例块，值捕获发生在评估守卫之前。再来一个例子：</p> 
<pre><code class="prism language-py"><span class="token keyword">def</span> <span class="token function">fun</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> score<span class="token punctuation">:</span>
        <span class="token keyword">case</span> <span class="token number">100</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'满分！'</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> score <span class="token keyword">if</span> score <span class="token operator">&gt;=</span> <span class="token number">80</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'高分啊～ </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>score<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> score <span class="token keyword">if</span> score <span class="token operator">&gt;=</span> <span class="token number">60</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'及格万岁！'</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> score <span class="token keyword">if</span> score <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'这成绩也是没谁了 ··!'</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'不知道说什么。'</span><span class="token punctuation">)</span>

fun<span class="token punctuation">(</span><span class="token number">59</span><span class="token punctuation">)</span>
<span class="token comment"># 这成绩也是没谁了 ··!</span>
</code></pre> 
<blockquote> 
 <p>带有字面值和变量的模式</p> 
</blockquote> 
<p>模式可以看起来像解包形式，而且模式可以用来绑定变量。在这个例子中，一个数据点可以被解包为它的 x 坐标和 y 坐标：</p> 
<pre><code class="prism language-py"><span class="token comment"># point is an (x, y) tuple</span>
<span class="token keyword">match</span> point<span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"坐标原点"</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Y=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"X=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"X=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">, Y=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"未法的坐标数据"</span><span class="token punctuation">)</span>
</code></pre> 
<p>这种情况也可以增加守卫：</p> 
<pre><code class="prism language-py">point <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">match</span> point<span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"坐标原点"</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Y=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">if</span> x <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"X=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">，点在 x 轴的远处"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"X=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"X=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">, Y=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"未法的坐标数据"</span><span class="token punctuation">)</span>

<span class="token comment"># X=60，点在 x 轴的远处</span>
</code></pre> 
<blockquote> 
 <p>枚举</p> 
</blockquote> 
<pre><code class="prism language-py"><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum
<span class="token keyword">class</span> <span class="token class-name">Color</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>
    RED <span class="token operator">=</span> <span class="token number">0</span>
    GREEN <span class="token operator">=</span> <span class="token number">1</span>
    BLUE <span class="token operator">=</span> <span class="token number">2</span>

<span class="token keyword">match</span> color<span class="token punctuation">:</span>
    <span class="token keyword">case</span> Color<span class="token punctuation">.</span>RED<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"I see red!"</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> Color<span class="token punctuation">.</span>GREEN<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Grass is green"</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"I'm feeling the blues :("</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>模式和类</p> 
</blockquote> 
<p>通过类对象可以结构化你的数据，通过使用类名字后面跟一个类似构造函数的参数列表，作为一种模式。这种模式可以将类的属性捕捉到变量中：</p> 
<pre><code class="prism language-py"><span class="token keyword">class</span> <span class="token class-name">Point</span><span class="token punctuation">:</span>
    x<span class="token punctuation">:</span> <span class="token builtin">int</span>
    y<span class="token punctuation">:</span> <span class="token builtin">int</span>

<span class="token keyword">def</span> <span class="token function">location</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> point<span class="token punctuation">:</span>
        <span class="token keyword">case</span> Point<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"坐标原点"</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> Point<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">=</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Y=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> Point<span class="token punctuation">(</span>x<span class="token operator">=</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"X=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> Point<span class="token punctuation">(</span>x<span class="token operator">=</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"X=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">, Y=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> Point<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"这个点不在轴上"</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"未法的坐标数据"</span><span class="token punctuation">)</span>
</code></pre> 
<p>还可以匹配取值：</p> 
<pre><code class="prism language-py"><span class="token keyword">match</span> media_object<span class="token punctuation">:</span>
    <span class="token keyword">case</span> Image<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token operator">=</span>media_type<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Image of type </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>media_type<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-py"><span class="token keyword">class</span> <span class="token class-name">Direction</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> horizontal<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> vertical<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>horizontal <span class="token operator">=</span> horizontal
        self<span class="token punctuation">.</span>vertical <span class="token operator">=</span> vertical

<span class="token keyword">def</span> <span class="token function">direction</span><span class="token punctuation">(</span>loc<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> loc<span class="token punctuation">:</span>
        <span class="token keyword">case</span> Direction<span class="token punctuation">(</span>horizontal<span class="token operator">=</span><span class="token string">'east'</span><span class="token punctuation">,</span> vertical<span class="token operator">=</span><span class="token string">'north'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'You towards northeast'</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> Direction<span class="token punctuation">(</span>horizontal<span class="token operator">=</span><span class="token string">'east'</span><span class="token punctuation">,</span> vertical<span class="token operator">=</span><span class="token string">'south'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'You towards southeast'</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> Direction<span class="token punctuation">(</span>horizontal<span class="token operator">=</span><span class="token string">'west'</span><span class="token punctuation">,</span> vertical<span class="token operator">=</span><span class="token string">'north'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'You towards northwest'</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> Direction<span class="token punctuation">(</span>horizontal<span class="token operator">=</span><span class="token string">'west'</span><span class="token punctuation">,</span> vertical<span class="token operator">=</span><span class="token string">'south'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'You towards southwest'</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> Direction<span class="token punctuation">(</span>horizontal<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'You towards </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>loc<span class="token punctuation">.</span>vertical<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> Direction<span class="token punctuation">(</span>vertical<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'You towards </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>loc<span class="token punctuation">.</span>horizontal<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Invalid Direction'</span><span class="token punctuation">)</span>


d1 <span class="token operator">=</span> Direction<span class="token punctuation">(</span><span class="token string">'east'</span><span class="token punctuation">,</span> <span class="token string">'south'</span><span class="token punctuation">)</span>
d2 <span class="token operator">=</span> Direction<span class="token punctuation">(</span>vertical<span class="token operator">=</span><span class="token string">'north'</span><span class="token punctuation">)</span>
d3 <span class="token operator">=</span> Direction<span class="token punctuation">(</span><span class="token string">'centre'</span><span class="token punctuation">,</span> <span class="token string">'centre'</span><span class="token punctuation">)</span>

<span class="token comment"># 应用</span>
direction<span class="token punctuation">(</span>d1<span class="token punctuation">)</span>
direction<span class="token punctuation">(</span>d2<span class="token punctuation">)</span>
direction<span class="token punctuation">(</span>d3<span class="token punctuation">)</span>
</code></pre> 
<p>还可以利用星号表达式进行解包操作：</p> 
<pre><code class="prism language-py"><span class="token comment"># 解析出列表</span>
<span class="token keyword">for</span> thing <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"this won't be matched"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> thing<span class="token punctuation">:</span>
        <span class="token keyword">case</span> <span class="token punctuation">[</span><span class="token operator">*</span>y<span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"unknown"</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
[1, 2, 3]
['a', 'b', 'c']
unknown
'''</span>
</code></pre> 
<p>匹配数据类型：</p> 
<pre><code class="prism language-py"><span class="token keyword">for</span> thing <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"this won't be matched"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> thing<span class="token punctuation">:</span>
        <span class="token keyword">case</span> <span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>second<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">as</span> y<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f'第二个是</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>second<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"unknown"</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
[1, 2, 3] 第二个是2
unknown
unknown
'''</span>
</code></pre> 
<blockquote> 
 <p>带有位置参数的模式</p> 
</blockquote> 
<p>你可以在某些为其属性提供了排序的内置类（例如 dataclass）中使用位置参数。 你也可以通过在你的类中设置 <strong>match_args</strong> 特殊属性来为模式中的属性定义一个专门的位置。 如果它被设为 (“x”, “y”)，则以下模式均为等价的（并且都是将 y 属性绑定到 var 变量）:</p> 
<pre><code class="prism language-py">Point<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> var<span class="token punctuation">)</span>
Point<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">=</span>var<span class="token punctuation">)</span>
Point<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">=</span>var<span class="token punctuation">)</span>
Point<span class="token punctuation">(</span>y<span class="token operator">=</span>var<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> 
<p>类中设置 __match_args__ 特殊属性为：</p> 
<pre><code class="prism language-py"><span class="token keyword">class</span> <span class="token class-name">Point</span><span class="token punctuation">:</span>
    __match_args__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<blockquote> 
 <p>嵌套模式</p> 
</blockquote> 
<p>模式可以任意地嵌套。 例如，如果我们的数据是由点组成的短列表（类似 [Point(x1, y1), Point(x2, y2)] 形式），则它可以这样被匹配：</p> 
<pre><code class="prism language-py"><span class="token keyword">match</span> points<span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"列表中没有点"</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">[</span>Point<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"原点是列表中唯一的点"</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">[</span>Point<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"列表中有一个点</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">，</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">[</span>Point<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> y1<span class="token punctuation">)</span><span class="token punctuation">,</span> Point<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> y2<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Y轴上 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y1<span class="token punctuation">}</span></span><span class="token string">，</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y2<span class="token punctuation">}</span></span><span class="token string"> 处的两点在列表中"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"列表中还有其他内容"</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>复杂模式和通配符</p> 
</blockquote> 
<p>通配符可以被用在更复杂的模式中，例如 (‘error’, code, _)。 举例来说：</p> 
<pre><code class="prism language-py"><span class="token keyword">match</span> test_variable<span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token string">'warning'</span><span class="token punctuation">,</span> code<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"A warning has been received."</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> code<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"An error </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>code<span class="token punctuation">}</span></span><span class="token string"> occurred."</span></span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>匹配字典</p> 
</blockquote> 
<p>为了匹配字典，我们对每种情况使用 key:value 模式。在这里，我们检查消息是“成功”还是“失败”，并打印相应的消息：</p> 
<pre><code class="prism language-py"><span class="token keyword">def</span> <span class="token function">check_message</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> message<span class="token punctuation">:</span>
        <span class="token keyword">case</span> <span class="token punctuation">{<!-- --></span><span class="token string">'success'</span><span class="token punctuation">:</span> message<span class="token punctuation">}</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Success: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>message<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token punctuation">{<!-- --></span><span class="token string">'failure'</span><span class="token punctuation">:</span> message<span class="token punctuation">}</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Something wrong: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>message<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Unknown'</span><span class="token punctuation">)</span>

message_success <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'success'</span><span class="token punctuation">:</span> <span class="token string">'OK!'</span><span class="token punctuation">}</span>
message_failure <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'failure'</span><span class="token punctuation">:</span> <span class="token string">'ERROR!'</span><span class="token punctuation">}</span>

check_message<span class="token punctuation">(</span>message_success<span class="token punctuation">)</span>
check_message<span class="token punctuation">(</span>message_failure<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
Success: OK!
Something wrong: ERROR!
'''</span>
</code></pre> 
<blockquote> 
 <p>子模式支持 as</p> 
</blockquote> 
<p>子模式可使用 as 关键字来捕获，如 case (Point(x1, y1), Point(x2, y2) as p2): …。下例：</p> 
<pre><code class="prism language-py"><span class="token keyword">def</span> <span class="token function">alarm</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> item<span class="token punctuation">:</span>
        <span class="token keyword">case</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'早上'</span> <span class="token operator">|</span> <span class="token string">'中午'</span> <span class="token operator">|</span> <span class="token string">'晚上'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> time<span class="token punctuation">,</span> action<span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>time<span class="token punctuation">}</span></span><span class="token string">好! 是</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>action<span class="token punctuation">}</span></span><span class="token string">的时间了!'</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'不是时间！'</span><span class="token punctuation">)</span>

alarm<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'早上'</span><span class="token punctuation">,</span> <span class="token string">'吃早餐'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 早上好! 是吃早餐的时间了!</span>
</code></pre> 
<h2><a id="_360"></a>使用形式</h2> 
<p>可以作为独立语句使用：</p> 
<pre><code class="prism language-py">thing <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">match</span> thing<span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"thing is 1"</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"thing is 2"</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"thing is other"</span><span class="token punctuation">)</span>
</code></pre> 
<p>可以用用在 for 循环中：</p> 
<pre><code class="prism language-py"><span class="token keyword">for</span> thing <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> thing<span class="token punctuation">:</span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"thing is 1"</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"thing is 2"</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"thing is other"</span><span class="token punctuation">)</span>
</code></pre> 
<p>可以用在函数方法中：</p> 
<pre><code class="prism language-py"><span class="token keyword">def</span> <span class="token function">whats_that</span><span class="token punctuation">(</span>thing<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> thing<span class="token punctuation">:</span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"thing is 1"</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"thing is 2"</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token keyword">_</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"thing is other"</span><span class="token punctuation">)</span>
</code></pre> 
<p>可以嵌套：</p> 
<pre><code class="prism language-py"><span class="token keyword">def</span> <span class="token function">alarm</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">match</span> item<span class="token punctuation">:</span>
        <span class="token keyword">case</span> <span class="token punctuation">[</span>time<span class="token punctuation">,</span> action<span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Good </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>time<span class="token punctuation">}</span></span><span class="token string">! It is time to </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>action<span class="token punctuation">}</span></span><span class="token string">!'</span></span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token punctuation">[</span>time<span class="token punctuation">,</span> <span class="token operator">*</span>actions<span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Good morning!'</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> action <span class="token keyword">in</span> actions<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'It is time to </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>action<span class="token punctuation">}</span></span><span class="token string">!'</span></span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_407"></a>总结</h2> 
<p>match 语句将 subject 表达式 与 case 语句中的每个模式（pattern）从上到下进行比较，直到找到匹配的模式。若找不到匹配的表达式，则匹配 _ 通配符（wildcard）（如有），实际上它就是其它语言中的 default 关键字。</p> 
<p>支持的有：</p> 
<ul><li>字面常数（literal）：如 int、float、string、bool 和 None，不支持 f-string 不是字面常数</li><li>捕获模式：用匹配表达式赋值目标，一个名称最多只能绑定一次</li><li>通配符模式：_ 不作为变量名，是一种特殊的模式，它始终匹配但从不绑定值</li><li>常量值模式：属性（color.RED）和枚举类（enum.Enum）</li><li>序列模式</li><li>映射模式</li><li>类模式</li></ul> 
<p>其他：</p> 
<ul><li>| 表示或</li><li>加 if 条件再判断（守卫）</li><li>子模式可加 as 绑定值</li><li>list、tuple、dict 等都能作为模式，并且能配合 * 或 ** 和通配符使用</li><li>[*_] 匹配任意长度的 list;</li><li>(_, <em>, *</em>) 匹配长度至少为 2 的 tuple。</li><li>类模式：Sandwich(cheese=_) 检查匹配的对象是否具有属性 cheese ???</li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/735eed76e07d3bd2e1ff52266fbd5e30/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Set集合</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ed6ef0fe29da980485138b7e354e58ee/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43;作业 实验7继承与派生</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>