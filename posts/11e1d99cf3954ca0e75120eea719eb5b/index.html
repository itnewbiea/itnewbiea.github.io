<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【鸿蒙】HarMonyOS的UI组件学习六之订单列表 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【鸿蒙】HarMonyOS的UI组件学习六之订单列表" />
<meta property="og:description" content="在所有移动互联端的应用软件中，都少不了列表的展示，例如手机通讯录，QQ好友列表，微信好友列表，朋友圈列表，微博列表，邮箱里的邮件列表，王者荣耀的游戏好友列表等等，那在鸿蒙系统中使用什么组件可以展示列表信息，就是它了ListContainer，想要展示出各种不同样子的列表信息页面，那么需要我们自己搭建子布局框架。
今天就分享一下鸿蒙开发中使用列表组件，先看效果图吧!
滑动屏幕可以进行上下滚动列表
并设置回弹效果，类似于微信朋友圈的向下拖动进行回弹
松手后会自动回弹。
那么接下来上代码，先看主布局代码:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;DirectionalLayout xmlns:ohos=&#34;http://schemas.huawei.com/res/ohos&#34; ohos:height=&#34;match_parent&#34; ohos:width=&#34;match_parent&#34; ohos:orientation=&#34;vertical&#34;&gt; &lt;Text ohos:height=&#34;match_content&#34; ohos:width=&#34;match_parent&#34; ohos:text=&#34;预定记录&#34; ohos:text_size=&#34;25vp&#34; ohos:text_alignment=&#34;center&#34; ohos:background_element=&#34;#FF4141F3&#34; ohos:text_color=&#34;#fff&#34; ohos:padding=&#34;5vp&#34; /&gt; &lt;ListContainer ohos:background_element=&#34;#FFEEECEC&#34; ohos:id=&#34;$&#43;id:lc_order&#34; ohos:height=&#34;match_parent&#34; ohos:width=&#34;match_parent&#34; ohos:rebound_effect=&#34;true&#34;/&gt; &lt;/DirectionalLayout&gt; 主布局中整个屏幕其实就分为两部分，一个是标题栏，剩下的都是列表的部分，通过ohos:rebound_effect=&#34;true&#34;这个属性设置列表回弹功能
接下来创建子布局文件，其实整个列表的展示我们可以理解为是由多个子布局拼在一起形成列表，我们再来仔细研究一下列表中每一项的框架结构
很明显，每一行都是这种结构，左边一张图片，中间显示文字信息，右边一个箭头，所以我们只要把子布局的框架结构设计出来再通过java代码循环创建就可以了，思路上可以这样理解，那么接下来上子布局的代码
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;DirectionalLayout xmlns:ohos=&#34;http://schemas.huawei.com/res/ohos&#34; ohos:height=&#34;match_content&#34; ohos:width=&#34;match_parent&#34; ohos:alignment=&#34;center&#34; ohos:top_margin=&#34;1fp&#34; ohos:bottom_margin=&#34;1fp&#34; ohos:padding=&#34;5fp&#34; ohos:background_element=&#34;#fff&#34; ohos:orientation=&#34;horizontal&#34;&gt; &lt;Image ohos:id=&#34;$&#43;id:image_order&#34; ohos:height=&#34;70fp&#34; ohos:width=&#34;70fp&#34; ohos:right_margin=&#34;10vp&#34; ohos:image_src=&#34;$media:lanqiu_small&#34; ohos:scale_mode=&#34;stretch&#34;/&gt; &lt;DirectionalLayout ohos:height=&#34;match_content&#34; ohos:width=&#34;match_parent&#34; ohos:weight=&#34;1&#34; ohos:orientation=&#34;vertical&#34;&gt; &lt;DirectionalLayout ohos:height=&#34;match_content&#34; ohos:width=&#34;match_parent&#34; ohos:orientation=&#34;horizontal&#34;&gt; &lt;Text ohos:id=&#34;$&#43;id:tv_name&#34; ohos:height=&#34;match_content&#34; ohos:width=&#34;match_content&#34; ohos:weight=&#34;1&#34; ohos:text_alignment=&#34;left&#34; ohos:text=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/11e1d99cf3954ca0e75120eea719eb5b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-25T20:38:18+08:00" />
<meta property="article:modified_time" content="2021-06-25T20:38:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【鸿蒙】HarMonyOS的UI组件学习六之订单列表</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        在所有移动互联端的应用软件中，都少不了列表的展示，例如手机通讯录，QQ好友列表，微信好友列表，朋友圈列表，微博列表，邮箱里的邮件列表，王者荣耀的游戏好友列表等等，那在鸿蒙系统中使用什么组件可以展示列表信息，就是它了<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ui-java-component-listcontainer-0000001060007847" rel="nofollow">ListContainer</a>，想要展示出各种不同样子的列表信息页面，那么需要我们自己搭建子布局框架。</p> 
<p>        今天就分享一下鸿蒙开发中使用列表组件，先看效果图吧!</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/36/88/dPqPKD22_o.png"></p> 
<p>滑动屏幕可以进行上下滚动列表</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/10/80/w8PCA4r4_o.png"></p> 
<p>并设置回弹效果，类似于微信朋友圈的向下拖动进行回弹</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b1/34/Z7ut0apw_o.png"></p> 
<p>松手后会自动回弹。</p> 
<p>那么接下来上代码，先看主布局代码:</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;DirectionalLayout
    xmlns:ohos="http://schemas.huawei.com/res/ohos"
    ohos:height="match_parent"
    ohos:width="match_parent"
    ohos:orientation="vertical"&gt;
    &lt;Text
        ohos:height="match_content"
        ohos:width="match_parent"
        ohos:text="预定记录"
        ohos:text_size="25vp"
        ohos:text_alignment="center"
        ohos:background_element="#FF4141F3"
        ohos:text_color="#fff"
        ohos:padding="5vp"
        /&gt;
    &lt;ListContainer
        ohos:background_element="#FFEEECEC"
        ohos:id="$+id:lc_order"
        ohos:height="match_parent"
        ohos:width="match_parent"
        ohos:rebound_effect="true"/&gt;

&lt;/DirectionalLayout&gt;</code></pre> 
<p>主布局中整个屏幕其实就分为两部分，一个是标题栏，剩下的都是列表的部分，通过ohos:rebound_effect="true"这个属性设置列表回弹功能</p> 
<p>接下来创建子布局文件，其实整个列表的展示我们可以理解为是由多个子布局拼在一起形成列表，我们再来仔细研究一下列表中每一项的框架结构</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6d/88/oovnlPQg_o.png"></p> 
<p></p> 
<p>很明显，每一行都是这种结构，左边一张图片，中间显示文字信息，右边一个箭头，所以我们只要把子布局的框架结构设计出来再通过java代码循环创建就可以了，思路上可以这样理解，那么接下来上子布局的代码</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;DirectionalLayout
    xmlns:ohos="http://schemas.huawei.com/res/ohos"
    ohos:height="match_content"
    ohos:width="match_parent"
    ohos:alignment="center"
    ohos:top_margin="1fp"
    ohos:bottom_margin="1fp"
    ohos:padding="5fp"
    ohos:background_element="#fff"
    ohos:orientation="horizontal"&gt;

    &lt;Image
        ohos:id="$+id:image_order"
        ohos:height="70fp"
        ohos:width="70fp"
        ohos:right_margin="10vp"
        ohos:image_src="$media:lanqiu_small"
        ohos:scale_mode="stretch"/&gt;

    &lt;DirectionalLayout
        ohos:height="match_content"
        ohos:width="match_parent"
        ohos:weight="1"
        ohos:orientation="vertical"&gt;

        &lt;DirectionalLayout
            ohos:height="match_content"
            ohos:width="match_parent"
            ohos:orientation="horizontal"&gt;
            &lt;Text
                ohos:id="$+id:tv_name"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:weight="1"
                ohos:text_alignment="left"
                ohos:text="11111"
                ohos:text_color="#00f"
                ohos:text_size="25fp"/&gt;
            &lt;Text
                ohos:id="$+id:tv_money"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:weight="1"
                ohos:text_alignment="left"
                ohos:text="2222"
                ohos:text_color="#f00"
                ohos:text_size="22fp"/&gt;
        &lt;/DirectionalLayout&gt;
        &lt;DirectionalLayout
            ohos:height="match_content"
            ohos:width="match_parent"
            ohos:orientation="horizontal"&gt;
            &lt;Text
                ohos:id="$+id:tv_type"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:weight="1"
                ohos:text_alignment="left"
                ohos:text="11111"
                ohos:text_size="20fp"/&gt;
            &lt;Text
                ohos:id="$+id:tv_time"
                ohos:height="match_content"
                ohos:width="match_content"
                ohos:weight="1"
                ohos:text_alignment="left"
                ohos:text="2222"
                ohos:text_size="20fp"/&gt;
        &lt;/DirectionalLayout&gt;


    &lt;/DirectionalLayout&gt;

    &lt;Image
        ohos:height="20fp"
        ohos:width="20fp"
        ohos:scale_mode="stretch"
        ohos:image_src="$media:ling_right"/&gt;

&lt;/DirectionalLayout&gt;</code></pre> 
<p>好了，那么我们现在只要考虑一项数据的显示，因为每一项总都包含一个图片，四个文本信息，一个箭头图片，所有我们定义一个实体类，将每一项所需要的数据进行封装在一个实体类对象中，ok，如果可以理解了，那么接下来上实体类封装的代码</p> 
<pre><code>package com.example.hm_phone_java.entity;

public class Order {
    private int image;//图片id
    private String name;//项目名称
    private String money;//价格
    private String type;//类型
    private String time;//时间

    public Order() {
    }

    @Override
    public String toString() {
        return "Order{" +
                "image=" + image +
                ", name='" + name + '\'' +
                ", money='" + money + '\'' +
                ", type='" + type + '\'' +
                ", time='" + time + '\'' +
                '}';
    }

    public Order(int image, String name, String money, String type, String time) {
        this.image = image;
        this.name = name;
        this.money = money;
        this.type = type;
        this.time = time;
    }

    public int getImage() {
        return image;
    }

    public void setImage(int image) {
        this.image = image;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getMoney() {
        return money;
    }

    public void setMoney(String money) {
        this.money = money;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    public String getTime() {
        return time;
    }

    public void setTime(String time) {
        this.time = time;
    }
}
</code></pre> 
<p>接下来我们随机生成100项数据</p> 
<pre><code> private void initDate() {
        for (int i = 0; i &lt; 100; i++) {
            int j=new Random().nextInt(images.length);
            Order order=new Order(images[j],
                    names[j],
                    new Random().nextInt(100)+"元",
                    types[new Random().nextInt(types.length)],
                    getNow());
            orders.add(order);
        }
    }
    private String getNow(){
        Date date=new Date();
        SimpleDateFormat sdf=new SimpleDateFormat("yyyy/MM/dd");
        return sdf.format(date);
    }</code></pre> 
<p>提前准备一些使用的数据</p> 
<pre><code> private int[] images = {
            ResourceTable.Media_lanqiu_yue,
            ResourceTable.Media_pingpangqiu_yue,
            ResourceTable.Media_yumaoqiu_yue,
    };
    private String[] names = {
            "篮球",
            "乒乓球",
            "羽毛球",
    };
    private String[] types={"个人预定","团体预定"};
    private List&lt;Order&gt; orders=new ArrayList&lt;&gt;();
    private OrderItemAdapter adapter;</code></pre> 
<p>将随机生成的100项数据存储在List集合中，那么接下来就是最重要的代码，创建列表适配器，根据数据的项数自动创建组件对象</p> 
<pre><code>package com.example.hm_phone_java.adapter;

import com.example.hm_phone_java.ResourceTable;
import com.example.hm_phone_java.entity.Order;
import ohos.aafwk.ability.AbilitySlice;
import ohos.agp.components.*;

import java.util.List;

public class OrderItemAdapter  extends BaseItemProvider {
    private List&lt;Order&gt; orders;
    private AbilitySlice context;

    public OrderItemAdapter(List&lt;Order&gt; orders, AbilitySlice context) {
        this.orders = orders;
        this.context = context;
    }

    @Override
    public int getCount() {
        return orders.size();
    }

    @Override
    public Object getItem(int i) {
        return orders.get(i);
    }

    @Override
    public long getItemId(int i) {
        return i;
    }
    //创建缓存对象，避免重复创建大量组件而造成内存浪费导致运行卡顿
    class Holder{
        Image image;
        Text tv_name;
        Text tv_money;
        Text tv_type;
        Text tv_time;

        public Holder(Component component) {
            image= (Image) component.findComponentById(ResourceTable.Id_image_order);
            tv_money= (Text) component.findComponentById(ResourceTable.Id_tv_money);
            tv_name= (Text) component.findComponentById(ResourceTable.Id_tv_name);
            tv_time= (Text) component.findComponentById(ResourceTable.Id_tv_time);
            tv_type= (Text) component.findComponentById(ResourceTable.Id_tv_type);
        }
    }

    @Override
    public Component getComponent(int i, Component component, ComponentContainer componentContainer) {
        Component pc;
        Holder holder;
        if (component==null){
            pc=LayoutScatter.getInstance(context).parse(ResourceTable.Layout_ability_order_item,null,false);
            holder=new Holder(pc);
            pc.setTag(holder);
        }else {
            pc=component;
            holder= (Holder) pc.getTag();
        }
        holder.tv_type.setText(orders.get(i).getType());
        holder.tv_time.setText(orders.get(i).getTime());
        holder.tv_name.setText(orders.get(i).getName());
        holder.tv_money.setText(orders.get(i).getMoney());
        holder.image.setPixelMap(orders.get(i).getImage());
        return pc;
    }
}
</code></pre> 
<p>将该适配器对象加载至列表组件上</p> 
<pre><code>@Override
    protected void onStart(Intent intent) {
        super.onStart(intent);
        this.setUIContent(ResourceTable.Layout_ability_order_list);
        ListContainer lc= (ListContainer) this.findComponentById(ResourceTable.Id_lc_order);
        initDate();
        adapter=new OrderItemAdapter(orders,this);
        lc.setItemProvider(adapter);
    }</code></pre> 
<p></p> 
<p>文章分享到这里，所用到的图片如下，有需要的朋友可以使用:</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/73/21/wkmCbNaE_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b4/76/Zt5T2aGn_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ca/9a/zGCm5rVz_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/71/e0/3AWK8n02_o.png"></p> 
<p>感谢大家的关注和阅读，一起探讨技术，谢谢!!!</p> 
<p>下一篇 <a href="https://blog.csdn.net/u010321564/article/details/118275825">【鸿蒙】HarMonyOS的UI组件学习七之图片轮播</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ef9185f9ccc134e09fb9f9158c2e7c93/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">面试官：说说对 State 和 Props的理解，有什么区别？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e1cad76b048763326b34bbd118359965/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">您没有足够的权限为该计算机所有用户,没有足够的权限卸载请与系统管理员联系怎么解决...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>