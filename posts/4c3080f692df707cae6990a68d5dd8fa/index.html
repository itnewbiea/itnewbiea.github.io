<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决 qt.qpa.xcb: could not connect to display 问题 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="解决 qt.qpa.xcb: could not connect to display 问题" />
<meta property="og:description" content="2022/07/21更新 现在WSL2已经可以直接运行 Linux GUI 了！！！不再需要安装Xserver（XLaunch）之类的！！！
参考微软的官方教程：在适用于 Linux 的 Windows 子系统上运行 Linux GUI 应用
不过值得注意的是：
如果之前在.bashrc中设置了用于在Xserver的显示命令，需要取消掉！即：
#export DISPLAY=xxx.xx.x.xx:0.0 #export LIBGL_ALWAYS_INDIRECT= #export LIBGL_ALWASY_SOFTWARE=1 否则按照微软官方教程走下来，会发现运行gedit等程序会没有反应！！！
问题背景 系统：微软子系统WSL中的Ubuntu20.04
安装了Ros系统，为了在WSL上运行图形化程序，安装了Xserver，在测试ROS时发生了报错
主要是参考这篇文章
问题描述 在参考前面那篇文章运行rosrun turtlesim turtlesim_node命令时，出现错误：
qt.qpa.xcb: could not connect to display qt.qpa.plugin: Could not load the Qt platform plugin &#34;xcb&#34; in &#34;&#34; even though it was found. This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4c3080f692df707cae6990a68d5dd8fa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-21T22:29:37+08:00" />
<meta property="article:modified_time" content="2022-07-21T22:29:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决 qt.qpa.xcb: could not connect to display 问题</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="20220721_1"></a>2022/07/21更新</h3> 
<p><strong>现在WSL2已经可以直接运行 Linux GUI 了！！！不再需要安装Xserver（XLaunch）之类的！！！</strong><br> 参考微软的官方教程：<a href="https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/gui-apps" rel="nofollow">在适用于 Linux 的 Windows 子系统上运行 Linux GUI 应用</a></p> 
<p>不过<strong>值得注意的是</strong>：<br> 如果之前在<code>.bashrc</code>中设置了用于在Xserver的显示命令，需要取消掉！即：</p> 
<pre><code class="prism language-bash"><span class="token comment">#export DISPLAY=xxx.xx.x.xx:0.0</span>
<span class="token comment">#export LIBGL_ALWAYS_INDIRECT=</span>
<span class="token comment">#export LIBGL_ALWASY_SOFTWARE=1</span>
</code></pre> 
<p>否则按照微软官方教程走下来，会发现运行<code>gedit</code>等程序会没有反应！！！</p> 
<hr> 
<h3><a id="_17"></a>问题背景</h3> 
<p>系统：微软子系统WSL中的Ubuntu20.04<br> 安装了Ros系统，为了在WSL上运行图形化程序，安装了Xserver，在测试ROS时发生了报错<br> 主要是参考<a href="https://blog.csdn.net/Undefinedefity/article/details/106187430">这篇文章</a></p> 
<h3><a id="_21"></a>问题描述</h3> 
<p>在参考前面那篇文章运行<code>rosrun turtlesim turtlesim_node</code>命令时，出现错误：</p> 
<pre><code>qt.qpa.xcb: could not connect to display 
qt.qpa.plugin: Could not load the Qt platform plugin "xcb" in "" even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are:...
</code></pre> 
<h3><a id="_30"></a>解决方案</h3> 
<p>这个问题出现的原因是ROS的程序无法连接到图形化界面，问题在于这块代码：</p> 
<pre><code>export DISPLAY=:0.0
export LIBGL_ALWAYS_INDIRECT=
export LIBGL_ALWASY_SOFTWARE=1
</code></pre> 
<p>其中<code>export DISPLAY=:0.0</code>这一句有问题（也许作者运行时没问题，但我在自己电脑上运行时会报错），这里需要加上自己的WSL的IP地址，查看WSL的IP的方法是打开命令行(<code>cmd</code>)，输入<code>ipconfig</code><br> 会显示<img src="https://images2.imgbox.com/7d/c2/htT3EMkH_o.png" alt="在这里插入图片描述"><br> 也就是说，需要写成<code>export DISPLAY=xxx.xx.xx.xx(IP):0.0</code><br> 此外，<code>:0.0</code>这里跟XLaunch设置的显示器编号(Display Number)需要保持一致，默认为-1，等同于0.<br> 如果这里设置为了其他数字，比如1，则上面的设置需要改为<code>export DISPLAY=xxx.xx.xx.xx(IP):1.0</code><br> <img src="https://images2.imgbox.com/ea/13/xSMlCJhJ_o.png" alt="在这里插入图片描述"><br> 另外，下图中的第三个需要勾选<br> <img src="https://images2.imgbox.com/09/e6/2LdbD2vn_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_47"></a>参考</h3> 
<p>[1] <a href="https://blog.csdn.net/Undefinedefity/article/details/106187430">WSL (Ubuntu 18.04 LTS) 安装ROS，可运行Rviz和Gazebo</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f5a6e91dd691e3a6861f2e05c48b6b8b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux环境下，查看Tomcat是否启动成功</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ddb4091263476e500943c67441ed729e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">strlen函数剖析和模拟实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>