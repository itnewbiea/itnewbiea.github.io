<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>array.sort()方法及原理 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="array.sort()方法及原理" />
<meta property="og:description" content="sort()方法在适当的位置对数组进行排序，并且返回数组。
对于sort()方法，W3school给的定义是
arrayObject.sort(sortby) 说明 如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序，说得更精确点，是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。
如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：
若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。若 a 等于 b，则返回 0。若 a 大于 b，则返回一个大于 0 的值。 arrayObject.sort(sortby)：参数可选。规定排序顺序。必须是函数。
可知参数是可选的，也就是有两种情况，一是不加参数，另外一种是加函数参数，参数必须是函数。函数就是比较函数。
先看第一种不加参数的情况：
var arr=[1,3,10,4,2]; arr.sort(); alert(arr); //1,10,2,3,4 默认排序顺序是升序，在上面的例子当中，我们感觉排序的结果是：1，2，3，4，10。怎么出来10反而在前面呢？那是因为sort()排序是按照字符串的Unicode码，10的比后面的小，则他在前面，但是这个结果不是我们想要的，那怎么办？此时我们就要用到第二种情况：加函数参数。
第二种加函数参数的情况：
var arr=[1,3,10,4,2]; function compare(value1,value2) { if(value1&lt;value2){return -1;} else if(value1&gt;value2){return 1;} else {return 0} } arr.sort(compare); alert(arr) //1,2,3,4,10 按照我的理解是，在对于一个数组使用sort()方法时，会逐项的将数组中的元素传入到compare函数中作为参数，也就是说在上面 var arr=[1,3,10,4,2]使用sort()方法时，按照顺序先把1，3分别传给value1和value2，再比较1和3的大小，显然1&lt;3，那么根据判断函数返回-1；sort()方法在接受到函数返回的-1时，就做出按照升序的原理不换位置，现在虽然数组位置没有变，但是数组是刷新过一边的，sort()返回了一个新的数组，所以在第二次传入参数的时候，是传入的第二项3和第三项10（第一次换位置的话，那么第二项就是换过后的第二项）按着同样的原理进行比较返回-1；后面的步骤就一样了，在第三次比较的时候要注意，如果前面的返回值为-1，那么新数组的第一项和第二项不用再比较（升序，-1就不比较，因为-1表示大数本来就在后面 ），如上面所示：1&lt;3,3&lt;10,那么1&lt;10;如果为1，比如，2&lt;5,5&gt;1第二个返回值是1，则排完的新数是：2，1，5；所以接下来就是2和1比较，最终的1，2，5……所以上面的结果是1,2,3,4,10
接下来我用一个例子来说明这个过程：
var arr=[1,3,10,4,2,5]; function compare(value1,value2) { console.log(value1,value2,arr); if(value1&lt;value2){return -1;} else if(value1&gt;value2){return 1;} else {return 0} } arr." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/0ab41795b1f66c349e95af81b2ef8303/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-29T11:32:53+08:00" />
<meta property="article:modified_time" content="2019-09-29T11:32:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">array.sort()方法及原理</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>sort()方法在适当的位置对数组进行排序，并且返回数组。</p> 
<p>对于sort()方法，W3school给的定义是</p> 
<pre class="has"><code class="language-javascript">arrayObject.sort(sortby)</code></pre> 
<p><img alt="" class="has" height="110" src="https://images2.imgbox.com/b4/03/oxNq8jSL_o.png" width="499"></p> 
<h4>说明</h4> 
<p>如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序，说得更精确点，是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。</p> 
<p>如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：</p> 
<ul><li>若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。</li><li>若 a 等于 b，则返回 0。</li><li>若 a 大于 b，则返回一个大于 0 的值。</li></ul> 
<p>arrayObject.sort(sortby)：参数可选。规定排序顺序。必须是函数。</p> 
<p>可知参数是可选的，也就是有两种情况，一是不加参数，另外一种是加<strong>函数</strong>参数，参数必须是函数。函数就是比较函数。</p> 
<p>先看第一种不加参数的情况：</p> 
<pre class="has"><code class="language-javascript">        var arr=[1,3,10,4,2];
        arr.sort();
        alert(arr);   //1,10,2,3,4</code></pre> 
<p>默认排序顺序是升序，在上面的例子当中，我们感觉排序的结果是：1，2，3，4，10。怎么出来10反而在前面呢？那是因为sort()排序是按照字符串的Unicode码，10的比后面的小，则他在前面，但是这个结果不是我们想要的，那怎么办？此时我们就要用到第二种情况：加函数参数。</p> 
<p>第二种加函数参数的情况：</p> 
<pre class="has"><code class="language-javascript">        var arr=[1,3,10,4,2];
        function compare(value1,value2) {
            if(value1&lt;value2){return -1;}
            else if(value1&gt;value2){return 1;}
            else {return 0}
        }
        arr.sort(compare);
        alert(arr)   //1,2,3,4,10</code></pre> 
<p>按照我的理解是，在对于一个数组使用sort()方法时，会逐项的将数组中的元素传入到compare函数中作为参数，也就是说在上面 var arr=[1,3,10,4,2]使用sort()方法时，按照顺序先把1，3分别传给value1和value2，再比较1和3的大小，显然1&lt;3，那么根据判断函数返回-1；sort()方法在接受到函数返回的-1时，就做出按照升序的原理不换位置，现在虽然数组位置没有变，但是数组是刷新过一边的，sort()返回了一个新的数组，所以在第二次传入参数的时候，是传入的第二项3和第三项10（第一次换位置的话，那么第二项就是换过后的第二项）按着同样的原理进行比较返回-1；后面的步骤就一样了，在第三次比较的时候要注意，如果前面的返回值为-1，那么新数组的第一项和第二项不用再比较（升序，-1就不比较，因为-1表示大数本来就在后面 ），如上面所示：1&lt;3,3&lt;10,那么1&lt;10;如果为1，比如，2&lt;5,5&gt;1第二个返回值是1，则排完的新数是：2，1，5；所以接下来就是2和1比较，最终的1，2，5……所以上面的结果是1,2,3,4,10</p> 
<p>接下来我用一个例子来说明这个过程：<br>  </p> 
<pre class="has"><code class="language-javascript">      var arr=[1,3,10,4,2,5];
      function compare(value1,value2) {
            console.log(value1,value2,arr);
            if(value1&lt;value2){return -1;}
            else if(value1&gt;value2){return 1;}
            else {return 0}
        }
        arr.sort(compare);
        alert(arr);   //1,2,3,4,5,10</code></pre> 
<p>这段代码在第三行加了<code>console.log(value1,value2,arr);</code>为了更好理解参数传入和比较的过程，下面图是输出结果，可能上面讲的那段话，有的人觉得繁琐，那么接下来我用段代码逐行分析。</p> 
<p><img alt="" class="has" height="232" src="https://images2.imgbox.com/06/14/ACEfXKGc_o.png" width="271"></p> 
<p>(我本来是想在控制台输出数组，结果出现这种重复以及丢失的排序，目前还没有解决，提出来让大家知道，以下排序过程是对的，只是控制台输出有误。)</p> 
<p>我们定义的数组是这样的 arr=[1,3,10,4,2,5]<br> 第一行：传入的是value1=1，value2=3，比较大小返回-1，数组的位置不变。<br> 第二行：传入的是value1=3，value2=10，比较大小返回-1，数组的位置不变。<br> 第三行：传入的是value1=10，value2=4，比较大小返回1，两项交换位置，现在的数组是arr=[1,3,4,10,2,5]<br> 第四行：现在不是继续往后面比较，由于返回值为1（这是升序，1的时候往前面比较），则在第三行操作交换位置后，这传入的参数是value1=3，value2=4，比较大小，返回-1，位置不变，数组还是arr=[1,3,4,10,2,5]<br> 第五行：这才继续向后比较，传入value1=10，value2=2，比较大小，返回1，交换位置，数组为arr=[1,3,4,2,10,5]<br> 第六行：前面的返回值又是1，则又比较前面的，value1=4，value2=2，比较大小，返回1，数组变为arr=[1,3,2,4,10,5]<br> 第七行：第六行结果返回值是1，所以这个地方也不能往后面比较，value1=3，value2=2；比较大小，返回1，数组为arr=[1,2,3,4,10,5]<br> 第八行：同理，value1=1，value2=2，比较大小返回-1，数组不变。<br> 第九行：继续往后面比较，value1=10，value2=5，比较大小，返回1，改变位置，数组是arr=[1,2,3,4,5,10]<br> 最后一行：前面返回值是1，则向前比较，value1=4，value2=5，比较大小，返回-1，数组不变，（因为前面4前面的数是排好序的，只要5&gt;4，就会比前面都大，则前面不用比较。）</p> 
<p>传参的详细过程就是这样，所以最后得到的数组是：arr=[1,2,3,4,5,10]，上面是谷歌测试。</p> 
<p>这是火狐的，结果是一样的，传参是一样的，但是控制台输出的数组没有变过</p> 
<p><img alt="" class="has" height="265" src="https://images2.imgbox.com/e3/cf/i9HQhpNN_o.png" width="395"></p> 
<p>这是IE的，IE给value1，value2传值的顺序和谷歌，火狐是相反的，并且它的控制台不输出arr数组，但是它的结果还是一样的。</p> 
<p><img alt="" class="has" height="279" src="https://images2.imgbox.com/80/89/imSKur5a_o.png" width="481"></p> 
<p>我又把上述代码里的数组改了：<code>var arr=['a','C','b','D','d'];</code></p> 
<p><img alt="" class="has" height="231" src="https://images2.imgbox.com/dc/ca/daGSFxEm_o.png" width="266"></p> 
<p>再改成：var arr = ['réservé', 'premier', 'cliché', 'communiqué', 'café', 'adieu'];</p> 
<p>谷歌这个结果是对的，但是控制台在输出步骤当中出了一点错误（我圈出来的重复出现，还有一个不在了，但是结果是对的，目前还没有解决）<br><img alt="" class="has" height="616" src="https://images2.imgbox.com/39/6c/MccrN6fA_o.png" width="915"></p> 
<p>火狐的控制台输出数组没变，但是结果是一样的</p> 
<p><img alt="" class="has" height="382" src="https://images2.imgbox.com/7f/0a/UwTdV8tx_o.png" width="780"></p> 
<p><img alt="" class="has" height="145" src="https://images2.imgbox.com/0e/d3/5GNIogt1_o.png" width="306"></p> 
<p>IE的结果也是一样的。<br> 这个例子说明<strong>字符串也是可以用这个方法来排序的</strong>，<br><strong>《JavaScript高级程序设计》上面说，compare函数适合大多数数据类型。</strong></p> 
<p> </p> 
<p><br> ————————————————<br> 版权声明：本文为CSDN博主「erdaidai」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br> 原文链接：https://blog.csdn.net/erdaidai/article/details/78054447</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6f9dab14bd9ff35bd02d54dbd4baba7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GASP动画和ScrollMagic</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7dfa69c22110c85c97162f322a78ffa5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【物联网】MQTT协议</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>