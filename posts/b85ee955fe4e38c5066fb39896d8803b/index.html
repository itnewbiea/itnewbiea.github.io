<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>双系统ubuntu20.04(neotic版本)从0实现Gazebo仿真slam建图 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="双系统ubuntu20.04(neotic版本)从0实现Gazebo仿真slam建图" />
<meta property="og:description" content="双系统ubuntu20.04(neotic版本)从0实现Gazebo仿真slam建图 昨晚完成了ROS的多机通讯，还没来得及整理相关操作步骤，在进行实际小车的实验之前，还是先打算在仿真环境中进行测试，熟悉相关的操作步骤，计划通过虚拟机（笔记本）来操纵双系统（台式机）完成在仿真环境中的地图构建，导航等功能。
ps:别问为什么不直接通过向日葵远程操控，后面要进行实际环境中多机器人编队的测试，多机器人编队功能已经被写好了，但是需要安装在远程PC的工作空间中进行多机器人的控制
1、安装ROS（neotic）版本依赖
sudo apt-get install ros-noetic-joy ros-noetic-teleop-twist-joy \ ros-noetic-teleop-twist-keyboard ros-noetic-laser-proc \ ros-noetic-rgbd-launch ros-noetic-rosserial-arduino \ ros-noetic-rosserial-python ros-noetic-rosserial-client \ ros-noetic-rosserial-msgs ros-noetic-amcl ros-noetic-map-server \ ros-noetic-move-base ros-noetic-urdf ros-noetic-xacro \ ros-noetic-compressed-image-transport ros-noetic-rqt* ros-noetic-rviz \ ros-noetic-gmapping ros-noetic-navigation ros-noetic-interactive-markers ROS1和ROS2其他版本安装相关依赖参考网址（ROS1&amp;ROS2依赖包）注意☝的是一行指令，分行输入会报错的。
2、安装turtlebot3软件包
Install TurtleBot3 via Debian Packages.
sudo apt install ros-noetic-dynamixel-sdk sudo apt install ros-noetic-turtlebot3-msgs sudo apt install ros-noetic-turtlebot3 3、设置环境变量
source ~/.bashrc 4、创建工作空间安装TB3功能包
mkdir -p ~/catkin_ws/src cd ~/catkin_ws/src/ git clone -b noetic-devel http://ghproxy.com/https://github.com/ROBOTIS-GIT/DynamixelSDK.git git clone -b noetic-devel http://ghproxy." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b85ee955fe4e38c5066fb39896d8803b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-12T11:32:15+08:00" />
<meta property="article:modified_time" content="2023-09-12T11:32:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">双系统ubuntu20.04(neotic版本)从0实现Gazebo仿真slam建图</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="ubuntu2004neotic0Gazeboslam_0"></a>双系统ubuntu20.04(neotic版本)从0实现Gazebo仿真slam建图</h2> 
<p>昨晚完成了ROS的多机通讯，还没来得及整理相关操作步骤，在进行实际小车的实验之前，还是先打算在仿真环境中进行测试，熟悉相关的操作步骤，计划通过虚拟机（笔记本）来操纵双系统（台式机）完成在仿真环境中的地图构建，导航等功能。<br> ps:别问为什么不直接通过向日葵远程操控，后面要进行实际环境中多机器人编队的测试，多机器人编队功能已经被写好了，但是需要安装在远程PC的工作空间中进行多机器人的控制<br> 1、安装ROS（neotic）版本依赖</p> 
<pre><code class="prism language-cpp">  sudo apt<span class="token operator">-</span>get install ros<span class="token operator">-</span>noetic<span class="token operator">-</span>joy ros<span class="token operator">-</span>noetic<span class="token operator">-</span>teleop<span class="token operator">-</span>twist<span class="token operator">-</span>joy \
  ros<span class="token operator">-</span>noetic<span class="token operator">-</span>teleop<span class="token operator">-</span>twist<span class="token operator">-</span>keyboard ros<span class="token operator">-</span>noetic<span class="token operator">-</span>laser<span class="token operator">-</span>proc \
  ros<span class="token operator">-</span>noetic<span class="token operator">-</span>rgbd<span class="token operator">-</span>launch ros<span class="token operator">-</span>noetic<span class="token operator">-</span>rosserial<span class="token operator">-</span>arduino \
  ros<span class="token operator">-</span>noetic<span class="token operator">-</span>rosserial<span class="token operator">-</span>python ros<span class="token operator">-</span>noetic<span class="token operator">-</span>rosserial<span class="token operator">-</span>client \
  ros<span class="token operator">-</span>noetic<span class="token operator">-</span>rosserial<span class="token operator">-</span>msgs ros<span class="token operator">-</span>noetic<span class="token operator">-</span>amcl ros<span class="token operator">-</span>noetic<span class="token operator">-</span>map<span class="token operator">-</span>server \
  ros<span class="token operator">-</span>noetic<span class="token operator">-</span>move<span class="token operator">-</span>base ros<span class="token operator">-</span>noetic<span class="token operator">-</span>urdf ros<span class="token operator">-</span>noetic<span class="token operator">-</span>xacro \
  ros<span class="token operator">-</span>noetic<span class="token operator">-</span>compressed<span class="token operator">-</span>image<span class="token operator">-</span>transport ros<span class="token operator">-</span>noetic<span class="token operator">-</span>rqt<span class="token operator">*</span> ros<span class="token operator">-</span>noetic<span class="token operator">-</span>rviz \
  ros<span class="token operator">-</span>noetic<span class="token operator">-</span>gmapping ros<span class="token operator">-</span>noetic<span class="token operator">-</span>navigation ros<span class="token operator">-</span>noetic<span class="token operator">-</span>interactive<span class="token operator">-</span>markers
</code></pre> 
<p>ROS1和ROS2其他版本安装相关依赖参考网址（<a href="https://emanual.robotis.com/docs/en/platform/turtlebot3/quick-start/" rel="nofollow">ROS1&amp;ROS2依赖包</a>）注意☝的是一行指令，分行输入会报错的。</p> 
<p>2、安装turtlebot3软件包<br> Install TurtleBot3 via Debian Packages.</p> 
<pre><code class="prism language-cpp"> sudo apt install ros<span class="token operator">-</span>noetic<span class="token operator">-</span>dynamixel<span class="token operator">-</span>sdk
 sudo apt install ros<span class="token operator">-</span>noetic<span class="token operator">-</span>turtlebot3<span class="token operator">-</span>msgs
 sudo apt install ros<span class="token operator">-</span>noetic<span class="token operator">-</span>turtlebot3
</code></pre> 
<p>3、设置环境变量</p> 
<pre><code class="prism language-cpp"> source <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc
</code></pre> 
<p>4、创建工作空间安装TB3功能包</p> 
<pre><code class="prism language-cpp">mkdir <span class="token operator">-</span>p <span class="token operator">~</span><span class="token operator">/</span>catkin_ws<span class="token operator">/</span>src
cd <span class="token operator">~</span><span class="token operator">/</span>catkin_ws<span class="token operator">/</span>src<span class="token operator">/</span>
git clone <span class="token operator">-</span>b noetic<span class="token operator">-</span>devel http<span class="token operator">:</span><span class="token comment">//ghproxy.com/https://github.com/ROBOTIS-GIT/DynamixelSDK.git</span>
git clone <span class="token operator">-</span>b noetic<span class="token operator">-</span>devel http<span class="token operator">:</span><span class="token comment">//ghproxy.com/https://github.com/ROBOTIS-GIT/turtlebot3_msgs.git</span>
git clone <span class="token operator">-</span>b noetic<span class="token operator">-</span>devel http<span class="token operator">:</span><span class="token comment">//ghproxy.com/https://github.com/ROBOTIS-GIT/turtlebot3.git</span>
git clone <span class="token operator">-</span>b noetic<span class="token operator">-</span>devel http<span class="token operator">:</span><span class="token comment">//ghproxy.com/https://github.com/ROBOTIS-GIT/turtlebot3_simulations.git</span>
cd <span class="token operator">~</span><span class="token operator">/</span>catkin_ws <span class="token operator">&amp;&amp;</span> catkin_make
</code></pre> 
<p>ROS1其他版本的TB3功能包参考<a href="http://www.rosrobot.cn/?id=153" rel="nofollow">ROS1功能包</a><br> ROS2（foxy）版本功能包参考<a href="http://www.rosrobot.cn/?id=93" rel="nofollow">ROS2功能包</a><br> 注意ROS1&amp;ROS2的其他版本连接中改对应版本名称<br> 编译成功<br> <img src="https://images2.imgbox.com/5e/31/hRaHrN4w_o.png" alt="在这里插入图片描述">5、Gazebo仿真<br> （1）选择启动的机器人模型</p> 
<pre><code class="prism language-cpp"><span class="token keyword">export</span> TURTLEBOT3_MODEL<span class="token operator">=</span>waffle_pi
</code></pre> 
<pre><code class="prism language-cpp"><span class="token keyword">export</span> TURTLEBOT3_MODEL<span class="token operator">=</span>burger
</code></pre> 
<p>（2）启动gazebo仿真环境</p> 
<pre><code class="prism language-cpp">roslaunch turtlebot3_gazebo turtlebot3_world<span class="token punctuation">.</span>launch
</code></pre> 
<p>可能会出现以下报错：<br> <img src="https://images2.imgbox.com/c0/2e/05DEYHWP_o.png" alt="在这里插入图片描述"><br> 找到错误原因“环境变量设置有问题”<br> 错误原因为环境变量设置有问题（后面进行优化）<br> 运行下方代码后再执行roslaunch</p> 
<pre><code class="prism language-cpp">source <span class="token operator">~</span><span class="token operator">/</span>catkin_ws<span class="token operator">/</span>devel<span class="token operator">/</span>setup<span class="token punctuation">.</span>bash
</code></pre> 
<pre><code class="prism language-cpp"> roslaunch turtlebot3_slam turtlebot3_slam<span class="token punctuation">.</span>launch
</code></pre> 
<p>turtlebot3_world.launch<br> <img src="https://images2.imgbox.com/d4/2f/elTqpB2A_o.png" alt="在这里插入图片描述"><br> （3）启动rviz进行建图<br> 打开新的终端，还要在输入一边机器人选择模型的指令，在输入以下指令（后面进行优化）</p> 
<pre><code class="prism language-cpp">roslaunch turtlebot3_slam turtlebot3_slam<span class="token punctuation">.</span>launch
</code></pre> 
<p>（4）控制小车移动实现建图<br> 打开新的终端，还要在输入一边机器人选择模型的指令</p> 
<pre><code class="prism language-cpp">roslaunch turtlebot3_teleop turtlebot3_teleop_key<span class="token punctuation">.</span>launch
</code></pre> 
<p><img src="https://images2.imgbox.com/1f/60/wRckk6I9_o.png" alt="在这里插入图片描述"><br> （5）保存地图：</p> 
<pre><code class="prism language-cpp">rosrun map_server map_saver <span class="token operator">-</span>f <span class="token operator">~</span><span class="token operator">/</span>map_world
</code></pre> 
<p><img src="https://images2.imgbox.com/b3/7d/WDHlIF5l_o.png" alt="在这里插入图片描述"></p> 
<p>地图自动保存在~/home/map目录下，名为map_world.yaml和map_world.pgm<br> <img src="https://images2.imgbox.com/f8/b6/zgdoHL9M_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_97"></a>优化</h2> 
<p>目前在启动机器人小车在仿真环境中的建图非常麻烦，每次启动新的节点都要输入指令选择一遍机器人的模型，且在启动turtlebot3_world.launch文件前还要进行以便环境的配置，总之是非常麻烦的！<br> 下面把这些指令提前配置到source ~/.bashrc文件中<br> （1）手动配置<br> 输入：</p> 
<pre><code class="prism language-cpp">sudo gedit <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc 
</code></pre> 
<p>在文本的最后加入以下这些指令：</p> 
<pre><code class="prism language-cpp">source <span class="token operator">~</span><span class="token operator">/</span>catkin_ws<span class="token operator">/</span>devel<span class="token operator">/</span>setup<span class="token punctuation">.</span>bash
<span class="token keyword">export</span> TURTLEBOT3_MODEL<span class="token operator">=</span>waffle_pi<span class="token comment">//如果你要选择burger型机器人输入export TURTLEBOT3_MODEL=burger</span>
<span class="token keyword">export</span> ROS_DOMAIN_ID<span class="token operator">=</span><span class="token number">30</span> #TURTLEBOT3
<span class="token keyword">export</span> GAZEBO_MODEL_PATH<span class="token operator">=</span>$GAZEBO_MODEL_PATH<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>catkin_ws<span class="token operator">/</span>src<span class="token operator">/</span>turtlebot3<span class="token operator">/</span>turtlebot3_simulations<span class="token operator">/</span>turtlebot3_gazebo<span class="token operator">/</span>models
</code></pre> 
<p>然后保存后关闭文件，打开终端输入<code>source ~/.bashrc</code>更新环境即可完成。<br> （2）输入指令配置<br> 我参考其他配置环境指令，输入后可达到相同效果。</p> 
<pre><code class="prism language-cpp">echo 'source <span class="token operator">~</span><span class="token operator">/</span>catkin_ws<span class="token operator">/</span>devel<span class="token operator">/</span>setup<span class="token punctuation">.</span>bash<span class="token number">'</span> <span class="token operator">&gt;&gt;</span> <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc
echo '<span class="token keyword">export</span> TURTLEBOT3_MODEL<span class="token operator">=</span>waffle_pi<span class="token number">'</span> <span class="token operator">&gt;&gt;</span> <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc
echo '<span class="token keyword">export</span> ROS_DOMAIN_ID<span class="token operator">=</span><span class="token number">30</span> #TURTLEBOT3<span class="token number">'</span> <span class="token operator">&gt;&gt;</span> <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc
echo '<span class="token keyword">export</span> GAZEBO_MODEL_PATH<span class="token operator">=</span>$GAZEBO_MODEL_PATH<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>catkin_ws<span class="token operator">/</span>src<span class="token operator">/</span>turtlebot3<span class="token operator">/</span>turtlebot3_simulations<span class="token operator">/</span>turtlebot3_gazebo<span class="token operator">/</span>models<span class="token number">'</span> <span class="token operator">&gt;&gt;</span> <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc
</code></pre> 
<p>输入完成后打开新终端输入：</p> 
<pre><code class="prism language-cpp">source <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc
</code></pre> 
<p>设置完成后，现在启动建图，仅需要输入：<br> （1）启动gazebo仿真环境</p> 
<pre><code class="prism language-cpp">roslaunch turtlebot3_gazebo turtlebot3_world<span class="token punctuation">.</span>launch
</code></pre> 
<p>（2）启动RVIZ</p> 
<pre><code class="prism language-cpp">roslaunch turtlebot3_slam turtlebot3_slam<span class="token punctuation">.</span>launch
</code></pre> 
<p>（3）启动键盘控制节点即可</p> 
<pre><code class="prism language-cpp">roslaunch turtlebot3_teleop turtlebot3_teleop_key<span class="token punctuation">.</span>launch
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0d2a88b7e2ac53279f88ea160057b7ee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">React 之 Hooks解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3c45903e778646d800a6653a3521c444/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Idea启动报错start failed闪退， RestfulToolkit-fix插件问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>