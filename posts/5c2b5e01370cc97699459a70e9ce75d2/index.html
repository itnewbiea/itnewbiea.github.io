<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pinia 入门及使用 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pinia 入门及使用" />
<meta property="og:description" content="自上月从上海结束工作回来 在家闲来无事 想写点东西打发时间 也顺便学习学习新的技术。偶然发现了 pinia 据说比vuex好用些 所以便搭了个demo尝试着用了下 感觉确实不错，于是便有了这篇随笔。
那么废话不多说 直接开始吧。（附pinia官网地址：https://pinia.web3doc.top/）
1.安装
yarn add pinia # 或者使用 npm npm install pinia 2.项目中引入
vue2引入方法（直接复制官网的）
import { createPinia, PiniaVuePlugin } from &#39;pinia&#39; Vue.use(PiniaVuePlugin) const pinia = createPinia() new Vue({ el: &#39;#app&#39;, // 其他选项... // ... // 注意同一个 `pinia` 实例可以在多个 Vue 应用程序中使用 // 同一个页面 pinia, }) vue3引入方法 （引入createPinia函数后实例化下 然后直接挂载到vue的use函数即可）
import { createPinia } from &#39;pinia&#39; const pinia = createPinia() createApp(App).use(pinia).mount(&#39;#app&#39;) 3.定义一个 Store
在src目录下新建 store 目录 然后新建一个js或者ts文件 然后导入pinia的 defineStore 函数 函数的第一个参数是当前store的 id 相当于key 第二个是一个对象 里面就是我们存放数据的地方了 export default 默认导出是为了方便我们其他页面引用这个store 这样 一个store就定义好了 export default defineStore(&#39;defaultStore&#39;,{ state:()=&gt;{ return { count:1 } }, getters:{ }, actions:{ setCount(){ this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/5c2b5e01370cc97699459a70e9ce75d2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-26T18:57:21+08:00" />
<meta property="article:modified_time" content="2022-07-26T18:57:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pinia 入门及使用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>自上月从上海结束工作回来 在家闲来无事 想写点东西打发时间 也顺便学习学习新的技术。偶然发现了 pinia 据说比vuex好用些 所以便搭了个demo尝试着用了下 感觉确实不错，于是便有了这篇随笔。</p> 
<p>那么废话不多说 直接开始吧。（附pinia官网地址：https://pinia.web3doc.top/）</p> 
<p><strong>1.安装</strong></p> 
<pre><code>yarn add pinia
# 或者使用 npm
npm install pinia</code></pre> 
<p><strong>2.项目中引入</strong></p> 
<p><strong>　　vue2引入方法（直接复制官网的）</strong></p> 
<pre><code>import { createPinia, PiniaVuePlugin } from 'pinia'
 
Vue.use(PiniaVuePlugin)
const pinia = createPinia()
 
new Vue({
  el: '#app',
  // 其他选项...
  // ...
  // 注意同一个 `pinia` 实例可以在多个 Vue 应用程序中使用
  // 同一个页面
  pinia,
})</code></pre> 
<p><strong>vue3引入方法 （引入createPinia函数后实例化下 然后直接挂载到vue的use函数即可）</strong></p> 
<pre><code>import { createPinia } from 'pinia'
const pinia = createPinia()
createApp(App).use(pinia).mount('#app')</code></pre> 
<p><strong>3.定义一个 Store</strong></p> 
<p><strong>　　</strong>在src目录下新建 store 目录 然后新建一个js或者ts文件 然后导入pinia的 defineStore 函数  函数的第一个参数是当前store的 id 相当于key 第二个是一个对象 里面就是我们存放数据的地方了  </p> 
<pre>　export default 默认导出是为了方便我们其他页面引用这个store 这样 一个store就定义好了</pre> 
<pre><code>export default defineStore('defaultStore',{
    state:()=&gt;{
        return {
            count:1
        }
    },
    getters:{

    },
    actions:{
        setCount(){
            this.count++
        }
    }

})</code></pre> 
<p><strong>4.使用store</strong></p> 
<p><strong>定义好了之后 那就是怎么使用我们的store了</strong></p> 
<pre><code>&lt;template&gt;
  &lt;div class="root-box"&gt;
    count == {<!-- -->{store.count}} //3.然后就可以直接使用了
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import defaultStore from "./../../store"; //1.引入我们刚刚定义的store
import {onMounted} from 'vue'
const store = defaultStore()//2.实例化一下
onMounted(()=&gt;{
　　store.count++ //修改store的值
})

&lt;/script&gt;</code></pre> 
<p>可能有人想问 能不能不用store.count呢 可不可以直接解构赋值。答案是可以的</p> 
<p>但是不能直接解构赋值 不然会失去数据的响应性的 我们应该使用pinia提供的 storeToRefs 函数来进行解构</p> 
<pre><code>&lt;script setup lang="ts"&gt;
import defaultStore from "./../../store";
import { storeToRefs } from "pinia";
const store = defaultStore()
const { count } = storeToRefs(store) 
&lt;/script&gt;</code></pre> 
<p><strong>5.getters&amp;actions</strong></p> 
<p><strong>　</strong>和vuex一样 pinia里 getters是用于获取store的数据的 actions是用来操作store的数据的</p> 
<pre><code>getters:{
        getCount(state){
            return state.count
        }
    },
    actions:{
        setCount(){
            this.count++
        }
    }</code></pre> 
<p>与上文中直接 store.count 不同。使用getters获取数据时 你可以在获取到数据前对数据进行一些操作。 例：一个数组或一个对象 你想在获取前剔除掉某些不符合要求的数据之类的。</p> 
<p>actions同理。</p> 
<p>使用过vuex的朋友一定看出了 pinia 其实很多地方和vuex很相似。有使用过vuex经验的人能够非常轻松的上手这个全新的vue存储库，并且写法上比vuex更加简便快捷 更加的容易理解</p> 
<p><strong>6.使用上的拓展</strong></p> 
<p><strong>　　</strong>除了上述的 store.count的直接修改 和 actions以外 官方还提供了其他几种修改数据的方法</p> 
<pre><code>//通过$patch 传入对象 可以一次性修改多个数据
store.$patch({
  count: store.count + 1,
})
// 传入函数 这个可以让你在修改数据前进行一些其他的操作 类似于一个单独的actions
store.$patch((state) =&gt; {
　　store.count = store.count + 1
})
// 也可以直接替换掉整个store
store.$state = { name: 'pinia' }</code></pre> 
<p>原创文章，如有哪里错误 欢迎指出 一定虚心接受。最后 大家一起进步吧</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e71ba0dce005fa5bb943a79d75b7d9f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【JavaScript】期约与异步函数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fdaec62f7a8b0a06529ca4598b5d0c59/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SPI配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>