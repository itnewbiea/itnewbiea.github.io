<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue 项目打包之后进行修改配置后端 IP 地址、端口等信息方法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue 项目打包之后进行修改配置后端 IP 地址、端口等信息方法" />
<meta property="og:description" content="前言 用 vue-cli 构建的项目通常是采用前后端分离的开发模式，也就是前端与后台完全分离，此时就需要将后台接口地址打包进项目中，但是，我们只是改个接口地址也要重新打包那就太麻烦了。怎么解决呢？方法如下，本文推荐俩种方式。
方式1：通过创建 js 文件进行实现 优点: 简单易懂, 方便上手
缺点: 配置文件容易被抓取【其实也不必太过于担心】
1、在 public 文件夹下创建 webconfig.js 文件
window.webConfig = { &#34;webApiBaseUrl&#34;: &#34;http://127.0.0.1:8001&#34;, &#34;webSystemTitle&#34;:&#34;标题&#34; } 2、在 index.html 页面应用 js 文件 3、应用完成之后，就可以在任何地方使用 window.webConfig
4、接口地址变化后直接修改 dist 下对应的 webconfig.js 文件即可，修改完成重新打开项目查看 ip 端口已经改变, 无需重新打包 vue 工程
方式二： 通过创建 json 文件，配合使用 axios 来实现 1、同样在 public 文件夹下创建 webconfig.json 文件
{ &#34;webApiBaseUrl&#34;: &#34;http://api.xxxx.com/api&#34;, &#34;webSystemTitle&#34;:&#34;后台管理系统&#34; } 2、在 base.js 文件中读取【主要是放在 axios 请求处，因为是把后端接口域名提取出来了，所以当道了 base.js 文件】
/** * 接口域名的管理 */ import axios from &#39;axios&#39; const base = { web: getWebApiBaseUrl(), signalRApiHost: process." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9dfc5e5ba506b08448b4cd05cb44d1df/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-11T11:13:17+08:00" />
<meta property="article:modified_time" content="2023-05-11T11:13:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue 项目打包之后进行修改配置后端 IP 地址、端口等信息方法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>前言</h3> 
<p>        用<a href="https://so.csdn.net/so/search?q=vue-cli&amp;spm=1001.2101.3001.7020" title=" vue-cli "> vue-cli </a>构建的项目通常是采用前后端分离的开发模式，也就是前端与后台完全分离，此时就需要将后台接口地址打包进项目中，但是，我们只是改个接口地址也要重新打包那就太麻烦了。怎么解决呢？方法如下，本文推荐俩种方式。</p> 
<h4>方式1：通过创建 js 文件进行实现</h4> 
<p>        优点: 简单易懂, 方便上手</p> 
<p>        <span style="color:#fe2c24;">缺点: 配置文件容易被抓取【其实也不必太过于担心】</span></p> 
<p> 1、在 public 文件夹下创建 webconfig.js 文件</p> 
<pre><code class="language-javascript">window.webConfig = {
  "webApiBaseUrl": "http://127.0.0.1:8001",
  "webSystemTitle":"标题"
}</code></pre> 
<p>2、在 index.html 页面应用 js 文件 </p> 
<p><img alt="" height="582" src="https://images2.imgbox.com/d1/fb/rWUBnMZx_o.png" width="1152"></p> 
<p> 3、应用完成之后，就可以在任何地方使用 window.webConfig</p> 
<p><img alt="" height="371" src="https://images2.imgbox.com/e2/fe/rSi1aeqc_o.png" width="1200"></p> 
<p> 4、接口地址变化后直接修改 dist 下对应的 webconfig.js 文件即可，修改完成重新打开项目查看 ip 端口已经改变, 无需重新打包 vue 工程</p> 
<hr> 
<h4>方式二： 通过创建 json 文件，配合使用 axios 来实现</h4> 
<p>1、同样在 public 文件夹下创建 webconfig.json 文件</p> 
<pre><code class="language-javascript">{
    "webApiBaseUrl": "http://api.xxxx.com/api",
    "webSystemTitle":"后台管理系统"
}</code></pre> 
<p>2、在 base.js 文件中读取【主要是放在 <a href="https://so.csdn.net/so/search?q=axios%E8%AF%B7%E6%B1%82&amp;spm=1001.2101.3001.7020" title="axios 请求">axios 请求</a>处，因为是把后端接口域名提取出来了，所以当道了 base.js 文件】</p> 
<pre><code class="language-javascript">
/**
 * 接口域名的管理
 */
import axios from 'axios'
const base = {
  web: getWebApiBaseUrl(),
  signalRApiHost: process.env.VUE_APP_SignalR_APIHOST,
}
 
function  getWebApiBaseUrl(){
  let WebApiBaseUrl = process.env.VUE_APP_BASE_APIHOST
  axios.get('../webconfig.json').then(res =&gt; {  // 请求上面描述的本地配置文件
    // 当 env=prod 时请求地址为生产环境
    const node_env = process.env.NODE_ENV 
    if(node_env == 'production'){
      WebApiBaseUrl = res.data.webApiBaseUrl
    } else {
      WebApiBaseUrl = process.env.VUE_APP_BASE_APIHOST
    }
  })
  return WebApiBaseUrl // Vue.prototype.WebApiBaseUrl;
}
 
export default base</code></pre> 
<p>3、步骤2主要是解释如何通过 axios 发起 get 请求，读取 json 配置文件，具体写在哪个地方，要根据自己的实际情况而定</p> 
<p><span style="color:#fe2c24;">注意：config.json 的路径，路径中没有 public!</span></p> 
<p>开发的过程中其实不太理解这是为什么，但从 npm run build 编译后生成的 dist/ 才能更好的理解为什么会这样。如下图，打包后的 vue 工程，config.json 是在根目录下的，没有 public 目录。</p> 
<p><img alt="" height="278" src="https://images2.imgbox.com/2f/12/XS6mDz5U_o.png" width="339"></p> 
<p> 接口地址变化后直接修改 dist/config.json 文件即可，无需重新打包 vue 工程</p> 
<hr> 
<p>以上俩种方式，均可以实现 vue 工程打包之后修改后端接口以及其他配置的诉求，结合实际情况运用，个人推荐使用方式 1</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3ea4cd7a58f3580581e3269719bf3d4b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ECharts折线图堆叠和不堆叠的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1d0256f940d8850cd8dd79eb40e01ffc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在滴滴和字节跳动划水4年，过于真实了...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>