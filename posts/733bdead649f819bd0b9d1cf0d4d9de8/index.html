<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>List组件和Grid组件的使用 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="List组件和Grid组件的使用" />
<meta property="og:description" content="简介 在我们常用的手机应用中，经常会见到一些数据列表，如设置页面、通讯录、商品列表等。下图中两个页面都包含列表，“首页”页面中包含两个网格布局，“商城”页面中包含一个商品列表。
上图中的列表中都包含一系列相同宽度的列表项，连续、多行呈现同类数据，例如图片和文本。常见的列表有线性列表（List列表）和网格布局（Grid列表）：
为了帮助开发者构建包含列表的应用，ArkUI提供了List组件和Grid组件，开发者使用List和Grid组件能够很轻松的完成一些列表页面。
List组件的使用 List组件简介 List是很常用的滚动类容器组件，一般和子组件ListItem一起使用，List列表中的每一个列表项对应一个ListItem组件。
使用ForEeach渲染列表 列表往往由多个列表项组成，所以我们需要在List组件中使用多个ListItem组件来构建列表，这就会导致代码的冗余。使用循环渲染（ForEach）遍历数组的方式构建列表，可以减少重复代码，示例代码如下：
@Entry @Component struct ListDemo { private arr: number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] build() { Column() { List({ space: 10 }) { ForEach(this.arr, (item: number) =&gt; { ListItem() { Text(`${item}`) .width(&#39;100%&#39;) .height(100) .fontSize(20) .fontColor(Color.White) .textAlign(TextAlign.Center) .borderRadius(10) .backgroundColor(0x007DFF) } }, item =&gt; item) } } .padding(12) .height(&#39;100%&#39;) .backgroundColor(0xF1F3F5) } } 效果图如下：
设置列表分割线 List组件子组件ListItem之间默认是没有分割线的，部分场景子组件ListItem间需要设置分割线，这时候您可以使用List组件的divider属性。divider属性包含四个参数：
strokeWidth: 分割线的线宽。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/733bdead649f819bd0b9d1cf0d4d9de8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-02T00:41:15+08:00" />
<meta property="article:modified_time" content="2024-01-02T00:41:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">List组件和Grid组件的使用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>简介</h3> 
<p>在我们常用的手机应用中，经常会见到一些数据列表，如设置页面、通讯录、商品列表等。下图中两个页面都包含列表，“首页”页面中包含两个网格布局，“商城”页面中包含一个商品列表。</p> 
<p><img src="https://images2.imgbox.com/3f/28/FNmhBs1U_o.png" alt="点击放大"></p> 
<p>上图中的列表中都包含一系列相同宽度的列表项，连续、多行呈现同类数据，例如图片和文本。常见的列表有线性列表（List列表）和网格布局（Grid列表）：</p> 
<p><img src="https://images2.imgbox.com/8a/fd/CIE67ZcD_o.png" alt="点击放大"></p> 
<p>为了帮助开发者构建包含列表的应用，ArkUI提供了List组件和Grid组件，开发者使用List和Grid组件能够很轻松的完成一些列表页面。</p> 
<h3><a id="List_14"></a>List组件的使用</h3> 
<h4><a id="List_18"></a>List组件简介</h4> 
<p>List是很常用的滚动类容器组件，一般和子组件ListItem一起使用，List列表中的每一个列表项对应一个ListItem组件。</p> 
<p><img src="https://images2.imgbox.com/6d/17/vRpU1nJE_o.png" alt="点击放大"></p> 
<h4><a id="ForEeach_26"></a>使用ForEeach渲染列表</h4> 
<p>列表往往由多个列表项组成，所以我们需要在List组件中使用多个ListItem组件来构建列表，这就会导致代码的冗余。使用循环渲染（ForEach）遍历数组的方式构建列表，可以减少重复代码，示例代码如下：</p> 
<pre><code>@Entry
@Component
struct ListDemo {
  private arr: number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

  build() {
    Column() {
      List({ space: 10 }) {
        ForEach(this.arr, (item: number) =&gt; {
          ListItem() {
            Text(`${item}`)
              .width('100%')
              .height(100)
              .fontSize(20)
              .fontColor(Color.White)
              .textAlign(TextAlign.Center)
              .borderRadius(10)
              .backgroundColor(0x007DFF)
          }
        }, item =&gt; item)
      }
    }
    .padding(12)
    .height('100%')
    .backgroundColor(0xF1F3F5)
  }
}
</code></pre> 
<p>效果图如下：</p> 
<p><img src="https://images2.imgbox.com/ee/22/jZ9knKey_o.png" alt="点击放大"></p> 
<h4><a id="_66"></a>设置列表分割线</h4> 
<p>List组件子组件ListItem之间默认是没有分割线的，部分场景子组件ListItem间需要设置分割线，这时候您可以使用List组件的divider属性。divider属性包含四个参数：</p> 
<ul><li> <p>strokeWidth: 分割线的线宽。</p> </li><li> <p>color: 分割线的颜色。</p> </li><li> <p>startMargin：分割线距离列表侧边起始端的距离。</p> </li><li> <p>endMargin: 分割线距离列表侧边结束端的距离。</p> <p><img src="https://images2.imgbox.com/7a/5a/5tHjb3kO_o.png" alt="点击放大"></p> </li></ul> 
<h4><a id="List_82"></a>List列表滚动事件监听</h4> 
<p>List组件提供了一系列事件方法用来监听列表的滚动，您可以根据需要，监听这些事件来做一些操作：</p> 
<ul><li>onScroll：列表滑动时触发，返回值scrollOffset为滑动偏移量，scrollState为当前滑动状态。</li><li>onScrollIndex：列表滑动时触发，返回值分别为滑动起始位置索引值与滑动结束位置索引值。</li><li>onReachStart：列表到达起始位置时触发。</li><li>onReachEnd：列表到底末尾位置时触发。</li><li>onScrollStop：列表滑动停止时触发。</li></ul> 
<p>使用示例代码如下：</p> 
<pre><code>List({ space: 10 }) {
  ForEach(this.arr, (item) =&gt; {
    ListItem() {
      Text(`${item}`)
        ...
    }
  }, item =&gt; item)
}
.onScrollIndex((firstIndex: number, lastIndex: number) =&gt; {
  console.info('first' + firstIndex)
  console.info('last' + lastIndex)
})
.onScroll((scrollOffset: number, scrollState: ScrollState) =&gt; {
  console.info('scrollOffset' + scrollOffset)
  console.info('scrollState' + scrollState)
})
.onReachStart(() =&gt; {
  console.info('onReachStart')
})
.onReachEnd(() =&gt; {
  console.info('onReachEnd')
})
.onScrollStop(() =&gt; {
  console.info('onScrollStop')
})
</code></pre> 
<h4><a id="List_124"></a>设置List排列方向</h4> 
<p>List组件里面的列表项默认是按垂直方向排列的，如果您想让列表沿水平方向排列，您可以将List组件的listDirection属性设置为Axis.Horizontal。</p> 
<p>listDirection参数类型是<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/ts-appendix-enums-0000001478061741-V3?catalogVersion=V3#ZH-CN_TOPIC_0000001478061741__axis" rel="nofollow">Axis</a>，定义了以下两种类型：</p> 
<ul><li> <p>Vertical（默认值）：子组件ListItem在List容器组件中呈纵向排列。</p> <p><img src="https://images2.imgbox.com/ea/9b/zEAz5IbZ_o.png" alt="img"></p> </li><li> <p>Horizontal：子组件ListItem在List容器组件中呈横向排列。</p> <p><img src="https://images2.imgbox.com/09/fe/eZCJOXWK_o.png" alt="点击放大"></p> </li></ul> 
<h3><a id="Grid_140"></a>Grid组件的使用</h3> 
<h4><a id="Grid_144"></a>Grid组件简介</h4> 
<p>Grid组件为网格容器，是一种网格列表，由“行”和“列”分割的单元格所组成，通过指定“项目”所在的单元格做出各种各样的布局。Grid组件一般和子组件GridItem一起使用，Grid列表中的每一个条目对应一个GridItem组件。</p> 
<p><img src="https://images2.imgbox.com/f5/b4/ux6QC12N_o.png" alt="img"></p> 
<h4><a id="ForEach_152"></a>使用ForEach渲染网格布局</h4> 
<p>和List组件一样，Grid组件也可以使用ForEach来渲染多个列表项GridItem，我们通过下面的这段示例代码来介绍Grid组件的使用。</p> 
<pre><code>@Entry
@Component
struct GridExample {
  // 定义一个长度为16的数组
  private arr: string[] = new Array(16).fill('').map((_, index) =&gt; `item ${index}`);

  build() {
    Column() {
      Grid() {
        ForEach(this.arr, (item: string) =&gt; {
          GridItem() {
            Text(item)
              .fontSize(16)
              .fontColor(Color.White)
              .backgroundColor(0x007DFF)
              .width('100%')
              .height('100%')
              .textAlign(TextAlign.Center)
          }
        }, item =&gt; item)
      }
      .columnsTemplate('1fr 1fr 1fr 1fr')
      .rowsTemplate('1fr 1fr 1fr 1fr')
      .columnsGap(10)
      .rowsGap(10)
      .height(300)
    }
    .width('100%')
    .padding(12)
    .backgroundColor(0xF1F3F5)
  }
}
</code></pre> 
<p>示例代码中创建了16个GridItem列表项。同时设置columnsTemplate的值为’1fr 1fr 1fr 1fr’，表示这个网格为4列，将Grid允许的宽分为4等分，每列占1份；rowsTemplate的值为’1fr 1fr 1fr 1fr’，表示这个网格为4行，将Grid允许的高分为4等分，每行占1份。这样就构成了一个4行4列的网格列表，然后使用columnsGap设置列间距为10vp，使用rowsGap设置行间距也为10vp。示例代码效果图如下：</p> 
<p><img src="https://images2.imgbox.com/40/8d/Zg44G39y_o.png" alt="img"></p> 
<p>上面构建的网格布局使用了固定的行数和列数，所以构建出的网格是不可滚动的。然而有时候因为内容较多，我们通过滚动的方式来显示更多的内容，就需要一个可以滚动的网格布局。我们只需要设置rowsTemplate和columnsTemplate中的一个即可。</p> 
<p>将示例代码中GridItem的高度设置为固定值，例如100；仅设置columnsTemplate属性，不设置rowsTemplate属性，就可以实现Grid列表的滚动：</p> 
<pre><code>Grid() {
  ForEach(this.arr, (item: string) =&gt; {
    GridItem() {
      Text(item)
        .height(100)
        ...
    }
  }, item =&gt; item)
}
.columnsTemplate('1fr 1fr 1fr 1fr')
.columnsGap(10)
.rowsGap(10)
.height(300)
</code></pre> 
<p>此外，Grid像List一样也可以使用onScrollIndex来监听列表的滚动。</p> 
<h3><a id="_219"></a>列表性能优化</h3> 
<p>开发者在使用长列表时，如果直接采用循环渲染方式，会一次性加载所有的列表元素，从而导致页面启动时间过长，影响用户体验，推荐通过以下方式来进行列表性能优化：</p> 
<p><a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/ui-ts-performance-improvement-recommendation-0000001477981001-V3#ZH-CN_TOPIC_0000001477981001__%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E6%87%92%E5%8A%A0%E8%BD%BD" rel="nofollow">使用数据懒加载</a></p> 
<p><a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/ui-ts-performance-improvement-recommendation-0000001477981001-V3#ZH-CN_TOPIC_0000001477981001__%E8%AE%BE%E7%BD%AElist%E7%BB%84%E4%BB%B6%E7%9A%84%E5%AE%BD%E9%AB%98" rel="nofollow">设置list组件的宽高</a></p> 
<h3><a id="_229"></a>参考链接</h3> 
<ol><li>List组件的相关API参考：<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/ts-container-list-0000001477981213-V3?catalogVersion=V3" rel="nofollow">List组件</a>。</li><li>Grid组件的相关API参考：<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/ts-container-grid-0000001478341161-V3?catalogVersion=V3" rel="nofollow">Grid组件</a>。</li><li>循环渲染（ForEach）：<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/arkts-rendering-control-0000001427744548-V3?catalogVersion=V3#ZH-CN_TOPIC_0000001427744548__%E5%BE%AA%E7%8E%AF%E6%B8%B2%E6%9F%93" rel="nofollow">循环渲染</a>。</li></ol>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/89b4df727d8760c37ccf006ac3847e59/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python多环境管理工具——pyenv-win安装与使用教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/05228dc5a829f05a98e2e80c0bebefc2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android查缺补漏（IPC篇）-- 进程间通讯基础知识热身</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>