<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL 基本用法(二)多表查询 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL 基本用法(二)多表查询" />
<meta property="og:description" content="数据库 1. 数据完整性 作用：保证用户输入的数据保存到数据库中是正确的。
确保数据的完整性 = 在创建表时给表中添加约束
完整性的分类：
实体完整性域完整性引用完整性 1.1 实体完整性 实体: 即表中的一行(一条记录)代表一个实体(entity)
实体完整性的作用：标识每一行数据不重复
约束类型： 主键约束（primary key） 唯一约束(unique) 自动增长列(auto_increment)
1.1.1 主键约束 注：每个表中要有一个主键。
特点：数据唯一，且不能为null
例子:
第一种添加方式:
CREATE TABLE student( id int primary key, name varchar(50) ); 第二种添加方式:
CREATE TABLE student( id int, name varchar(50), primary key(id) ); CREATE TABLE student( classid int, stuid int, name varchar(50), primary key(classid，stuid) ); 此种方式优势在于，可以创建联合主键
第三种方式:
CREATE TABLE student( id int, name varchar(50) ); ALTER TABLE student ADD PRIMARY KEY (id); 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/d3914bfe342b35b96537de023333efbf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-27T22:32:32+08:00" />
<meta property="article:modified_time" content="2018-04-27T22:32:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL 基本用法(二)多表查询</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>数据库</h2> 
<h3><a id="1__2"></a>1. 数据完整性</h3> 
<p>作用：保证用户输入的数据保存到数据库中是正确的。<br> 确保数据的完整性 = 在创建表时给表中添加约束<br> 完整性的分类：</p> 
<ul><li>实体完整性</li><li>域完整性</li><li>引用完整性</li></ul> 
<h4><a id="11__12"></a>1.1 实体完整性</h4> 
<p>实体: 即表中的一行(一条记录)代表一个实体(entity)<br> 实体完整性的作用：标识每一行数据不重复<br> 约束类型： 主键约束（primary key） 唯一约束(unique) 自动增长列(auto_increment)</p> 
<h5><a id="111__18"></a>1.1.1 主键约束</h5> 
<p>注：每个表中要有一个主键。<br> 特点：数据唯一，且不能为null</p> 
<p>例子:<br> 第一种添加方式:</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>第二种添加方式:</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
id <span class="token keyword">int</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
classid <span class="token keyword">int</span><span class="token punctuation">,</span>
stuid <span class="token keyword">int</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>classid，stuid<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>此种方式优势在于，可以创建联合主键</p> 
<p>第三种方式:</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
id <span class="token keyword">int</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student  <span class="token keyword">ADD</span>  <span class="token keyword">PRIMARY</span>  <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="112_unique_61"></a>1.1.2 唯一约束(unique):</h5> 
<p>特点: 数据不能重复</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
Id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
Name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">unique</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="113_72"></a>1.1.3</h5> 
<p>自动增长列(auto_increment)</p> 
<blockquote> 
 <p>这种用法只限于mysql,其他数据库略有不同</p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
Id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
Name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>‘tom’<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="12__85"></a>1.2 域完整性</h4> 
<p>域完整性的作用：限制此单元格的数据正确，不对照此列的其它单元格比较</p> 
<p>域代表当前单元格<br> 域完整性约束：数据类型 非空约束（not null） 默认值约束(default)<br> check约束（mysql不支持）check(sex=‘男’ or sex=‘女’)</p> 
<h5><a id="121__not_null_92"></a>1.2.1 非空约束: not null</h5> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
Id <span class="token keyword">int</span> pirmary <span class="token keyword">key</span><span class="token punctuation">,</span>
Name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
Sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>’tom’<span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="122__default_104"></a>1.2.2 默认值约束 default</h5> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
Id <span class="token keyword">int</span> pirmary <span class="token keyword">key</span><span class="token punctuation">,</span>
Name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
Sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">default</span> ‘男’
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> student1 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student1 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'jerry'</span><span class="token punctuation">,</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<h4><a id="13__118"></a>1.3 引用完整性</h4> 
<p>外键约束(实际开发中基本上不会使用)</p> 
<p>例:</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
sid <span class="token keyword">int</span> pirmary <span class="token keyword">key</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">default</span> ‘男’
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> score<span class="token punctuation">(</span>
	id <span class="token keyword">int</span><span class="token punctuation">,</span>
	score <span class="token keyword">int</span><span class="token punctuation">,</span>
	sid <span class="token keyword">int</span> <span class="token punctuation">,</span> <span class="token comment">-- 外键列的数据类型一定要与主键的类型一致</span>
	<span class="token keyword">CONSTRAINT</span> fk_score_sid <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>sid<span class="token punctuation">)</span> <span class="token keyword">references</span> student<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>第二种添加方式</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> score <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fk_stu_score <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>sid<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> stu<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>外键会保证score中的数据是student表中sid这一列已经存在的值</p> 
<h5><a id="_147"></a>表与表之间的关系</h5> 
<ul><li>一对一：例如t_person表和t_card表，即人和身份证。这种情况需要找出主从关系，即谁是主表，谁是从表。人可以没有身份证，但身份证必须要有人才行，所以人是主表，而身份证是从表。设计从表可以有两种方案： 
  <ul><li>在t_card表中添加外键列（相对t_user表），并且给外键添加唯一约束；</li><li>给t_card表的主键添加外键约束（相对t_user表），即t_card表的主键也是外键。</li></ul> </li><li>一对多（多对一）：最为常见的就是一对多！一对多和多对一，这是从哪个角度去看得出来的。t_user和t_section的关系，从t_user来看就是一对多，而从t_section的角度来看就是多对一！这种情况都是在多方创建外键！</li><li>多对多：例如t_stu和t_teacher表，即一个学生可以有多个老师，而一个老师也可以有多个学生。这种情况通常需要创建中间表来处理多对多关系。例如再创建一张表t_stu_tea表，给出两个外键，一个相对t_stu表的外键，另一个相对t_teacher表的外键。</li></ul> 
<p><img src="https://images2.imgbox.com/10/c5/nGmZXuFt_o.png" alt=""></p> 
<h3><a id="2__157"></a>2. 多表查询</h3> 
<p>多表查询有如下几种:</p> 
<ul><li>合并结果集 UNION, UNION ALL</li><li>链接查询 
  <ul><li>内连接 [INNER] JOIN ON</li><li>外连接 OUTER JOIN ON 
    <ul><li>左外连接 LEFT [OUTER] JOIN</li><li>右外连接 RIGHT [OUTER] JOIN</li><li>全外连接（MySQL不支持）FULL JOIN</li></ul> </li><li>自然连接 NATURAL JOIN</li></ul> </li><li>子查询</li></ul> 
<h4><a id="21__171"></a>2.1 合并结果集(很少很少使用)</h4> 
<ol><li>作用：合并结果集就是把两个select语句的查询结果合并到一起！</li><li>合并结果集有两种方式： 
  <ul><li>UNION：去除重复记录，例如：<code>SELECT * FROM t1 UNION SELECT * FROM t2；</code></li><li>UNION ALL：不去除重复记录，例如：<code>SELECT * FROM t1 UNION ALL SELECT * FROM t2。</code></li></ul> </li></ol> 
<p><img src="https://images2.imgbox.com/37/10/wmdjBwgq_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/7f/2a/fJMhelIa_o.png" alt=""></p> 
<ol start="3"><li>要求:被合并的两个结果：列数、列类型必须相同。</li></ol> 
<h4><a id="22__184"></a>2.2 连接查询</h4> 
<h5><a id="220__186"></a>2.2.0 交叉连接</h5> 
<p>既然是多表查询，那么我们先来看看两张非常简单的表，我们就以这两张表为例，进行演示。<br> student表</p> 
<p><img src="https://images2.imgbox.com/26/44/lHOrH2BB_o.png" alt=""></p> 
<p>班级表</p> 
<p><img src="https://images2.imgbox.com/15/18/PjIUGPSE_o.png" alt=""></p> 
<p>同时查询这两张表</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">,</span>class<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ca/76/T1fDXb3x_o.png" alt=""><br> 仔细观察查询出的数据，可以发现，当使用上图中的语句时，student表中的每一行记录，都与class表中的任意一条记录相关联，同样，class表中的每一行记录，都与student表中的任意一条记录相关联。即当我们有2张表时,交叉连接的效果如下:</p> 
<p><img src="https://images2.imgbox.com/d1/96/075symus_o.png" alt=""><br> 我们把上述"没有任何限制条件的连接方式"称之为"交叉连接"，"交叉连接"后得到的结果跟线性代数中的"笛卡尔乘积"一样。</p> 
<blockquote> 
 <p>笛卡尔积: 假设集合A={a,b}，集合B={0,1,2}，则两个集合的笛卡尔积为{(a,0),(a,1),(a,2),(b,0),(b,1),(b,2)}。可以扩展到多个集合的情况</p> 
</blockquote> 
<p>“交叉连接"的英文原文为"cross join”,被咱们翻译为交叉连接，其实，上述示例中的语句我们可以换一种写法，两种写法能够获取到相同的结果，示例如下</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> class<span class="token punctuation">;</span>
</code></pre> 
<p>只不过在mysql中 我们可以简化为上述的写法</p> 
<p>多表查询产生这样的结果并不是我们想要的，那么怎么去除重复的，不想要的记录呢，当然是通过条件过滤。通常要查询的多个表之间都存在关联关系，那么就通过关联关系去除笛卡尔积</p> 
<h5><a id="221__inner_join_220"></a>2.2.1 内连接 inner join</h5> 
<p>既然"交叉连接"不常用，那么肯定有其他的常用的"多表查询方式"。我们来看看另一种常用的多表查询的方式：内连接<br> 扔用刚才的两张表student和class为例,首先回顾一下两张表的内容:</p> 
<p><img src="https://images2.imgbox.com/53/32/fyx1W6XW_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/b9/85/eJhoIzp9_o.png" alt=""></p> 
<p>那么什么是"内连接"呢？我们可以把"内连接"理解成"两张表中同时符合某种条件的数据记录的组合"，例如在查出的数据中同时展现学生信息和他们所在的编号,示例如下:</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token punctuation">,</span> class <span class="token keyword">where</span> student<span class="token punctuation">.</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6a/e4/Mi9DjFoW_o.png" alt=""><br> 上述的sql语句就使用了"内连接",对比交叉连接发现,其实内连接就是交叉连接有更多的限制条件,内连接的英文原文为inner join,所以sql还可以写成</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> class <span class="token keyword">ON</span> student<span class="token punctuation">.</span>sid <span class="token operator">=</span> class<span class="token punctuation">.</span>cid<span class="token punctuation">;</span>
</code></pre> 
<p>上述的是等值内连接,还可以有不等值内连接</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> class <span class="token keyword">ON</span> student<span class="token punctuation">.</span>sid <span class="token operator">&gt;</span> class<span class="token punctuation">.</span>cid<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fd/17/xkahyd8j_o.png" alt=""></p> 
<p>这样内连接可以用图来表示:</p> 
<p><img src="https://images2.imgbox.com/a2/a8/gS9X7j04_o.png" alt=""></p> 
<p>使用"内连接"语句查询出的结果集是两个集合中"同时满足条件的数据"的"组合",所以我们并不能单纯的用"交集"去表示这个组合，就以上图为例，按照"交集"的定义，属于集合A且同时属于集合B的元素所组成的集合被称为交集，但是上图中，id号为1的元素只属于t1表，在t2表中并不存在id号为1的元素，但是，上图中"中间"的结果集就是"内连接"查询出的结果，所以，我们不能单纯的用"交集"表示"内连接"，但是，我们可以从另一个角度定义"交集"，我们定义，“交集"为"两个集合中同时满足条件的数据的组合”</p> 
<h6><a id="_256"></a>自连接</h6> 
<p>“内连接"除了"等值连接"与"不等连接”，还有一种分类，被称作"自连接"，自连接可以理解为比较特殊的"内连接",刚才说到的"等值连接"与"不等连接"所连接的表为两张不同的表，而"自连接"连接的表为一张表，也就是自己连接自己，所以被称为"自连接"</p> 
<p>我们再创建一张员工表,:</p> 
<p><img src="https://images2.imgbox.com/29/cd/1o1Hw3Kp_o.png" alt=""></p> 
<p>如图 员工表有上级属性,上级指向的是员工的ID,如果我们想把每个人的上级都显示出来可以使用语句:</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp <span class="token keyword">AS</span> e1 <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> emp <span class="token keyword">AS</span> e2 <span class="token keyword">ON</span> e1<span class="token punctuation">.</span>superior <span class="token operator">=</span> e2<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6e/dc/YG2GtlVa_o.png" alt=""></p> 
<p>这就属于自连接,在自连接的时候,由于表名是相同的,需要给表名起一个别名</p> 
<h5><a id="222__273"></a>2.2.2 外连接</h5> 
<p>外连接分为两种,左外连接,和右外连接,外连接的特点,结果集中有不满足情况的</p> 
<h6><a id="_276"></a>左外连接</h6> 
<p>首先还是学生和班级表,不过我们学生表中插入了一个新学生,他还没有确定班级</p> 
<p><img src="https://images2.imgbox.com/55/ac/lyGRvQnI_o.png" alt=""></p> 
<p>使用左外连接,查询学生信息和它对应的班级</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">temp</span><span class="token punctuation">.</span>student <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> <span class="token keyword">temp</span><span class="token punctuation">.</span>class <span class="token keyword">ON</span> sid <span class="token operator">=</span> cid<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/85/df/7s5zVeUP_o.png" alt=""></p> 
<p>左外连接不仅会查询出两表中同时符合条件的记录的组合，同时还会将"left join"左侧的表中的不符合条件的记录同时展示出来，由于左侧表中的这一部分记录并不符合连接条件，所以这一部分记录使用"空记录"进行连接。即左表的数据会完全的加载出来,即使右表中没有符合条件的数据</p> 
<p><img src="https://images2.imgbox.com/6d/3a/3KPDS8Dl_o.png" alt=""></p> 
<h6><a id="_293"></a>右连接</h6> 
<p>右连接与之类似</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">temp</span><span class="token punctuation">.</span>class  <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> <span class="token keyword">temp</span><span class="token punctuation">.</span>student <span class="token keyword">ON</span> sid <span class="token operator">=</span> cid<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d8/8d/qlrTA0VR_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/42/1e/5BuvFeX3_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="223__305"></a>2.2.3 子查询</h5> 
<p>一个select语句中包含另一个完整的select语句。<br> 子查询就是嵌套查询，即SELECT中包含SELECT，如果一条语句中存在两个，或两个以上SELECT，那么就是子查询语句了。</p> 
<ul><li>子查询出现的位置 
  <ul><li>where后，作为条为被查询的一条件的一部分</li><li>from后，作表</li></ul> </li><li>当子查询出现在where后作为条件时，还可以使用如下关键字 
  <ul><li>any</li><li>all</li></ul> </li><li>子查询结果集的形式 
  <ul><li>单行单列（用于条件）</li><li>单行多列（用于条件）</li><li>多行单列（用于条件）</li><li>多行多列（用于表）</li></ul> </li></ul> 
<h6><a id="_321"></a>示例</h6> 
<p>原始数据表</p> 
<p><img src="https://images2.imgbox.com/32/11/hSXvM65L_o.png" alt="在这里插入图片描述"></p> 
<p>工资高于JONES的员工</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> sal <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> ename<span class="token operator">=</span><span class="token string">'JONES'</span><span class="token punctuation">)</span>
<span class="token comment">-- 一行一列</span>
</code></pre> 
<p>查询与SCOTT同一个部门的员工</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> lan_ou<span class="token punctuation">.</span>emp
<span class="token keyword">WHERE</span> deptno <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> deptno
                <span class="token keyword">FROM</span> lan_ou<span class="token punctuation">.</span>emp
                <span class="token keyword">WHERE</span> ename <span class="token operator">=</span> <span class="token string">'SCOTT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>工资高于30号部门所有人的员工信息</p> 
<pre><code class="prism language-sql">    <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> sal<span class="token operator">&gt;</span><span class="token punctuation">(</span>
<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> deptno<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>查询工作和工资与MARTIN完全相同的员工信息</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> <span class="token punctuation">(</span>job<span class="token punctuation">,</span>sal<span class="token punctuation">)</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> job<span class="token punctuation">,</span>sal <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> ename<span class="token operator">=</span><span class="token string">'MARTIN'</span><span class="token punctuation">)</span>
</code></pre> 
<p>查询有2个以上直接下属的员工信息</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> empno <span class="token operator">IN</span> <span class="token punctuation">(</span>
  <span class="token keyword">SELECT</span> mgr
  <span class="token keyword">FROM</span> emp
  <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> mgr
  <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>mgr<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="3__370"></a>3. 常用函数</h3> 
<h4><a id="1__372"></a>1. 数学函数</h4> 
<ul><li>ABS(x) 返回x的绝对值</li><li>BIN(x) 返回x的二进制（OCT返回八进制，HEX返回十六进制）</li><li>CEILING(x) 返回大于x的最小整数值</li><li>EXP(x) 返回值e（自然对数的底）的x次方</li><li>FLOOR(x) 返回小于x的最大整数值</li><li>GREATEST(x1,x2,…,xn)返回集合中最大的值</li><li>LEAST(x1,x2,…,xn) 返回集合中最小的值</li><li>LN(x) 返回x的自然对数</li><li>LOG(x,y)返回x的以y为底的对数</li><li>MOD(x,y) 返回x/y的模（余数）</li><li>PI()返回pi的值（圆周率）</li><li>RAND()返回０到１内的随机值,可以通过提供一个参数(种子)使RAND()随机数生成器生成一个指定的值。</li><li>ROUND(x,y)返回参数x的四舍五入的有y位小数的值</li><li>SIGN(x) 返回代表数字x的符号的值</li><li>SQRT(x) 返回一个数的平方根</li><li>TRUNCATE(x,y) 返回数字x截短为y位小数的结果</li></ul> 
<h4><a id="2__391"></a>2. 日期函数</h4> 
<ul><li>CURDATE()或CURRENT_DATE() 返回当前的日期</li><li>CURTIME()或CURRENT_TIME() 返回当前的时间</li><li>DATE_ADD(date,INTERVAL int keyword)返回日期date加上间隔时间int的结果(int必须按照关键字进行格式化),如：SELECTDATE_ADD- (CURRENT_DATE,INTERVAL 6 MONTH);</li><li>DATE_FORMAT(date,fmt) 依照指定的fmt格式格式化日期date值</li><li>DATE_SUB(date,INTERVAL int keyword)返回日期date加上间隔时间int的结果(int必须按照关键字进行格式化),如：SELECTDATE_SUB- (CURRENT_DATE,INTERVAL 6 MONTH);</li><li>DAYOFWEEK(date) 返回date所代表的一星期中的第几天(1~7)</li><li>DAYOFMONTH(date) 返回date是一个月的第几天(1~31)</li><li>DAYOFYEAR(date) 返回date是一年的第几天(1~366)</li><li>DAYNAME(date) 返回date的星期名，如：SELECT DAYNAME(CURRENT_DATE);</li><li>FROM_UNIXTIME(ts,fmt) 根据指定的fmt格式，格式化UNIX时间戳ts</li><li>HOUR(time) 返回time的小时值(0~23)</li><li>MINUTE(time) 返回time的分钟值(0~59)</li><li>MONTH(date) 返回date的月份值(1~12)</li><li>MONTHNAME(date) 返回date的月份名，如：SELECT MONTHNAME(CURRENT_DATE);</li><li>NOW() 返回当前的日期和时间</li><li>QUARTER(date) 返回date在一年中的季度(1~4)，如SELECT QUARTER(CURRENT_DATE);</li><li>WEEK(date) 返回日期date为一年中第几周(0~53)</li><li>YEAR(date) 返回日期date的年份(1000~9999)</li><li>LAST_DAY(date) 需要一个日期或日期时间值，并返回该月的最后一天对应的值。 如果该参数是无效的，则返回NULL。</li></ul> 
<h4><a id="3__412"></a>3. 字符串类</h4> 
<ul><li>ASCII(char)返回字符的ASCII码值</li><li>BIT_LENGTH(str)返回字符串的比特长度</li><li>CONCAT(s1,s2…,sn)将s1,s2…,sn连接成字符串</li><li>CONCAT_WS(sep,s1,s2…,sn)将s1,s2…,sn连接成字符串，并用sep字符间隔</li><li>INSERT(str,x,y,instr) 将字符串str从第x位置开始，y个字符长的子串替换为字符串instr，返回结果</li><li>FIND_IN_SET(str,list)分析逗号分隔的list列表，如果发现str，返回str在list中的位置</li><li>LCASE(str)或LOWER(str) 返回将字符串str中所有字符改变为小写后的结果</li><li>LEFT(str,x)返回字符串str中最左边的x个字符</li><li>LENGTH(s)返回字符串str中的字符数</li><li>LTRIM(str) 从字符串str中切掉开头的空格</li><li>POSITION(substr,str) 返回子串substr在字符串str中第一次出现的位置</li><li>QUOTE(str) 用反斜杠转义str中的单引号</li><li>REPEAT(str,srchstr,rplcstr)返回字符串str重复x次的结果</li><li>REVERSE(str) 返回颠倒字符串str的结果</li><li>RIGHT(str,x) 返回字符串str中最右边的x个字符</li><li>RTRIM(str) 返回字符串str尾部的空格</li><li>STRCMP(s1,s2)比较字符串s1和s2</li><li>TRIM(str)去除字符串首部和尾部的所有空格</li><li>UCASE(str)或UPPER(str) 返回将字符串str中所有字符转变为大写后的结果</li></ul> 
<h3><a id="4__434"></a>4. 导出数据</h3> 
<p>mysqldump –hlocalhost –uroot –p databaseName &gt;d:\dump.sql (window)</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8896ee66c77a154086732e7ad0b4c2a9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JAVA代码实现身份证18位校验码合法性校验</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/81b396a5f7cddd5afa8f37eb7604f7e8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于Linux下安装MATLAB Compiler Runtime(MCR) 所遇到的问题以及解决方法（以Ubuntu 16.04 为例）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>