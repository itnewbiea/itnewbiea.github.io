<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>UE4官方文档毛发部分整合笔记 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="UE4官方文档毛发部分整合笔记" />
<meta property="og:description" content="UE Groom Unreal engine Groom hair1、毛发渲染与模拟2、在项目中启用毛发项目设置插件浏览器 3、基本流程3.5、Alembic for Grooms规范目标曲线宽度 命名规则范围和优先权常规属性几何体参数 4、毛发材质4.25、生成Groom纹理流程1、在内容浏览器中右键单击Groom资产2、选择要创建的纹理类型：创建毛囊纹理（Create Follicle Texture） 和 创建发束纹理（Create Strands Texture） 毛囊纹理发束纹理 4.5、毛发资产编辑器显示(Show)细节面板1、细节层次2、插值3、发束面板4、发片面板5、程序化生成设置（实验性）6、网格体面板7、材质8、物理 4.75、毛发创建Xgen指南转换旧有XGen说明将导线转换为Numbs曲线将Groom转换为XGen交互式Groom 将样条说明导出到NURBS曲线创建属性创建组ID属性创建导线属性 将纹理应用于毛发UV 5、绑定毛发6、毛发物理与nigara7、毛发控制台命令8、已知限制 Unreal engine Groom hair 1、毛发渲染与模拟 groom毛发并不存在标准格式，在UE4.26中使用Alembic作为从DCC到UE的中转文件格式
Alembic是一个开源的计算机图形交换框架。Alembic将复杂的动画场景提炼成一套非程序化的、独立于应用程序的烘焙的几何结果。这种将场景提炼成烘焙的几何图形的做法，完全类似于将照明和渲染场景提炼成渲染的图像数据的做法。
Alembic专注于有效地存储复杂程序性几何结构的计算结果。他的重点不在于存储用于创建计算结果的程序性工具的复杂依赖图。例如，Alembic将有效地存储由任意复杂的动画和模拟过程产生的动画顶点位置和动画变换，这些过程可能涉及包络、修正形状、体积保留模拟、布和肉体模拟等等。
来源http://www.alembic.io/index.html
2、在项目中启用毛发 项目设置 启用支持皮肤计算缓存 (Support Compute Skin Cache)
插件浏览器 在插件浏览器中启用
Alembic Groom ImporterGroom
3、基本流程 3.5、Alembic for Grooms规范 目标 1、定义梳理专有的非正式Alembic元数据模式，以便将毛发导入虚幻引擎。
2、检查UE4支持的毛发相关属性，并将这些属性映射到Alembic。
曲线 从标准Alembic曲线模式中读取毛发的常规形状：
Alembic::AbcGeom::ICurves 宽度 根据此规范导出的Groom属性让导入程序在构建Groom时能够检索和使用这些属性。但是，宽度属性没有特殊行为。例如，在Maya等DCC应用程序中，宽度数值直接导出到曲线行，因此不需要导出自定义的 groom_width 属性；导入程序将会把Maya的宽度数值转换成 groom_width 属性。值得注意的是，如果你的Groom中存在 groom_width 属性，那么在导入期间不会被覆盖。如果未指定 groom_width 属性，或者无法从宽度数值转换为该属性，虚幻引擎中的构建器将会后退，使用1厘米来作为宽度值。
使用以下命令可为每个ICurve存储曲线宽度：
(GeometryScope::kConstantScope) 使用以下命令可为每个曲线存储曲线宽度：
(GeometryScope::kUniformScope) 使用以下命令可为每个cv存储曲线宽度：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e0343a600b80b92a7663466a58b41987/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-21T12:26:57+08:00" />
<meta property="article:modified_time" content="2022-07-21T12:26:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">UE4官方文档毛发部分整合笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>UE Groom</h4> 
 <ul><li><a href="#Unreal_engine_Groom_hair_1" rel="nofollow">Unreal engine Groom hair</a></li><li><ul><li><a href="#1_2" rel="nofollow">1、毛发渲染与模拟</a></li><li><a href="#2_8" rel="nofollow">2、在项目中启用毛发</a></li><li><ul><li><a href="#_9" rel="nofollow">项目设置</a></li><li><a href="#_12" rel="nofollow">插件浏览器</a></li></ul> 
   </li><li><a href="#3_18" rel="nofollow">3、基本流程</a></li><li><a href="#35Alembic_for_Grooms_20" rel="nofollow">3.5、Alembic for Grooms规范</a></li><li><ul><li><a href="#_21" rel="nofollow">目标</a></li><li><ul><li><a href="#_24" rel="nofollow">曲线</a></li><li><a href="#_29" rel="nofollow">宽度</a></li></ul> 
    </li><li><a href="#_44" rel="nofollow">命名规则</a></li><li><a href="#_52" rel="nofollow">范围和优先权</a></li><li><ul><li><a href="#_60" rel="nofollow">常规属性</a></li><li><a href="#_68" rel="nofollow">几何体参数</a></li></ul> 
   </li></ul> 
   </li><li><a href="#4_81" rel="nofollow">4、毛发材质</a></li><li><a href="#425Groom_85" rel="nofollow">4.25、生成Groom纹理</a></li><li><ul><li><a href="#_87" rel="nofollow">流程</a></li><li><ul><li><a href="#1Groom_88" rel="nofollow">1、在内容浏览器中右键单击Groom资产</a></li><li><a href="#2Create_Follicle_Texture__Create_Strands_Texture_90" rel="nofollow">2、选择要创建的纹理类型：创建毛囊纹理（Create Follicle Texture） 和 创建发束纹理（Create Strands Texture）</a></li></ul> 
    </li><li><a href="#_91" rel="nofollow">毛囊纹理</a></li><li><a href="#_105" rel="nofollow">发束纹理</a></li></ul> 
   </li><li><a href="#45_131" rel="nofollow">4.5、毛发资产编辑器</a></li><li><ul><li><a href="#Show_134" rel="nofollow">显示(Show)</a></li><li><a href="#_151" rel="nofollow">细节面板</a></li><li><ul><li><a href="#1_152" rel="nofollow">1、细节层次</a></li><li><a href="#2_169" rel="nofollow">2、插值</a></li><li><a href="#3_194" rel="nofollow">3、发束面板</a></li><li><a href="#4_208" rel="nofollow">4、发片面板</a></li><li><a href="#5_227" rel="nofollow">5、程序化生成设置（实验性）</a></li><li><a href="#6_247" rel="nofollow">6、网格体面板</a></li><li><a href="#7_270" rel="nofollow">7、材质</a></li><li><a href="#8_278" rel="nofollow">8、物理</a></li></ul> 
   </li></ul> 
   </li><li><a href="#475Xgen_332" rel="nofollow">4.75、毛发创建Xgen指南</a></li><li><ul><li><a href="#XGen_333" rel="nofollow">转换旧有XGen说明</a></li><li><ul><li><a href="#Numbs_334" rel="nofollow">将导线转换为Numbs曲线</a></li><li><a href="#GroomXGenGroom_342" rel="nofollow">将Groom转换为XGen交互式Groom</a></li></ul> 
    </li><li><a href="#NURBS_347" rel="nofollow">将样条说明导出到NURBS曲线</a></li><li><a href="#_355" rel="nofollow">创建属性</a></li><li><ul><li><a href="#ID_356" rel="nofollow">创建组ID属性</a></li><li><a href="#_381" rel="nofollow">创建导线属性</a></li></ul> 
    </li><li><a href="#UV_416" rel="nofollow">将纹理应用于毛发UV</a></li></ul> 
   </li><li><a href="#5_556" rel="nofollow">5、绑定毛发</a></li><li><a href="#6nigara_560" rel="nofollow">6、毛发物理与nigara</a></li><li><a href="#7_563" rel="nofollow">7、毛发控制台命令</a></li><li><a href="#8_595" rel="nofollow">8、已知限制</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Unreal_engine_Groom_hair_1"></a>Unreal engine Groom hair</h2> 
<h3><a id="1_2"></a>1、毛发渲染与模拟</h3> 
<p>groom毛发并不存在标准格式，在UE4.26中使用Alembic作为从DCC到UE的中转文件格式</p> 
<blockquote> 
 <p>Alembic是一个开源的计算机图形交换框架。Alembic将复杂的动画场景提炼成一套非程序化的、独立于应用程序的烘焙的几何结果。这种将场景提炼成烘焙的几何图形的做法，完全类似于将照明和渲染场景提炼成渲染的图像数据的做法。<br> Alembic专注于有效地存储复杂程序性几何结构的计算结果。他的重点不在于存储用于创建计算结果的程序性工具的复杂依赖图。例如，Alembic将有效地存储由任意复杂的动画和模拟过程产生的动画顶点位置和动画变换，这些过程可能涉及包络、修正形状、体积保留模拟、布和肉体模拟等等。<br> 来源http://www.alembic.io/index.html</p> 
</blockquote> 
<h3><a id="2_8"></a>2、在项目中启用毛发</h3> 
<h4><a id="_9"></a>项目设置</h4> 
<p>启用支持皮肤计算缓存 (Support Compute Skin Cache)<br> <img src="https://images2.imgbox.com/b1/27/AR5gqxar_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_12"></a>插件浏览器</h4> 
<p>在插件浏览器中启用</p> 
<ul><li>Alembic Groom Importer</li><li>Groom<br> <img src="https://images2.imgbox.com/e5/37/MtZEW0bl_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="3_18"></a>3、基本流程</h3> 
<p><img src="https://images2.imgbox.com/e3/5b/o6dmPVzk_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="35Alembic_for_Grooms_20"></a>3.5、Alembic for Grooms规范</h3> 
<h4><a id="_21"></a>目标</h4> 
<p>1、定义梳理专有的非正式Alembic元数据模式，以便将毛发导入虚幻引擎。<br> 2、检查UE4支持的毛发相关属性，并将这些属性映射到Alembic。</p> 
<h5><a id="_24"></a>曲线</h5> 
<p>从标准Alembic曲线模式中读取毛发的常规形状：</p> 
<pre><code>Alembic::AbcGeom::ICurves
</code></pre> 
<h5><a id="_29"></a>宽度</h5> 
<blockquote> 
 <p>根据此规范导出的Groom属性让导入程序在构建Groom时能够检索和使用这些属性。但是，宽度属性没有特殊行为。例如，在Maya等DCC应用程序中，宽度数值直接导出到曲线行，因此不需要导出自定义的 groom_width 属性；导入程序将会把Maya的宽度数值转换成 groom_width 属性。值得注意的是，如果你的Groom中存在 groom_width 属性，那么在导入期间不会被覆盖。如果未指定 groom_width 属性，或者无法从宽度数值转换为该属性，虚幻引擎中的构建器将会后退，使用1厘米来作为宽度值。</p> 
</blockquote> 
<p>使用以下命令可为每个ICurve存储曲线宽度：</p> 
<pre><code>(GeometryScope::kConstantScope)
</code></pre> 
<p>使用以下命令可为每个曲线存储曲线宽度：</p> 
<pre><code>(GeometryScope::kUniformScope)
</code></pre> 
<p>使用以下命令可为每个cv存储曲线宽度：</p> 
<pre><code>(GeometryScope::kVertexScope)
</code></pre> 
<h4><a id="_44"></a>命名规则</h4> 
<p>属性名必须小写，不含空格或特殊字符。</p> 
<p>所有属性必须使用以下前缀：</p> 
<pre><code>groom_&lt;attr&gt;
</code></pre> 
<p>举例而言，groom_id、groom_color或groom_width都符合命名规则。</p> 
<h4><a id="_52"></a>范围和优先权</h4> 
<p>本文档中的属性都有指定范围,该范围控制可在哪个Groom的 <em>级别</em> 上对属性进行定义。<br> 可用范围包括：</p> 
<table><thead><tr><th align="left">范围</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">Constant</td><td align="left">针对带 AbcGeom::ICurves 对象的所有曲线，这些参数都拥有单一值。</td></tr><tr><td align="left">Uniform</td><td align="left">针对 AbcGeom::ICurves 对象中的每个曲线，这些参数都拥有一个值。</td></tr><tr><td align="left">Vertex</td><td align="left">针对每个cv每条曲线，这些参数都拥有一个值。</td></tr></tbody></table> 
<h5><a id="_60"></a>常规属性</h5> 
<p>本节介绍整体应用于梳理的属性。这些属性应添加到最顶部的节点：IXForm或ICurves。</p> 
<table><thead><tr><th align="left">名称</th><th align="left">类型</th><th align="left">可选</th><th align="left">说明</th><th align="left">值</th></tr></thead><tbody><tr><td align="left">groom_version_major</td><td align="left">int16</td><td align="left">否</td><td align="left">用于识别此文件符合梳理方案的哪个 <strong>主要</strong> 版本</td><td align="left">1</td></tr><tr><td align="left">groom_version_minor</td><td align="left">int16</td><td align="left">否</td><td align="left">用于识别此文件符合方案的哪个 <strong>次要</strong> 版本</td><td align="left">4</td></tr><tr><td align="left">groom_tool</td><td align="left">字符串</td><td align="left">是</td><td align="left">生成此文件的工具的名称和版本。用于调试和跟踪问题</td><td align="left"></td></tr><tr><td align="left">groom_properties</td><td align="left">字符串</td><td align="left">是</td><td align="left">该字符串描述用于生成此梳理的参数。这些是工具专属的选项，用于调试</td><td align="left"></td></tr></tbody></table> 
<h5><a id="_68"></a>几何体参数</h5> 
<blockquote> 
 <p>所有几何体参数都是可选的，但如果导出的Groom中没有这些参数，则会使用内置参数。</p> 
</blockquote> 
<table><thead><tr><th align="left">名称</th><th align="left">类型</th><th align="left">范围(Scope)</th><th align="left">可选</th><th align="left">说明</th><th align="left">范围(Range)</th><th align="left">备注</th></tr></thead><tbody><tr><td align="left">groom_ guide</td><td align="left">int8/16/32</td><td align="left">常量/统一</td><td align="left">是</td><td align="left">根据导入的发束和抽取设置生成导线。</td><td align="left">0 = 无导线 / 1 = 导线</td><td align="left"></td></tr><tr><td align="left">groom_group_id</td><td align="left">float32/64[2]</td><td align="left">统一</td><td align="left">是</td><td align="left">所有发束将组合到一起。</td><td align="left">[0, INT_MAX]</td><td align="left"></td></tr><tr><td align="left">groom_root_uv</td><td align="left">int8/16/32</td><td align="left">常量/统一</td><td align="left">是</td><td align="left">通过将发束的根投射到球体上来计算根UV。</td><td align="left">[-FLOAT_MAX, FLOAT_MAX]</td><td align="left">此属性是可选的。如果未指定，将使用球体映射在引擎中自动生成根UV。</td></tr><tr><td align="left">groom_id</td><td align="left">int32</td><td align="left">统一</td><td align="left">是</td><td align="left">发束不会具有ID。此属性应在调试中使用，与 groom_closest_guides 属性搭配。</td><td align="left">[0, INT_MAX]</td><td align="left"></td></tr><tr><td align="left">groom_color</td><td align="left">float32/64[3]</td><td align="left">顶点</td><td align="left">是</td><td align="left">缺省是黑色</td><td align="left">[0, INT_MAX]</td><td align="left"></td></tr><tr><td align="left">groom_closest_guides</td><td align="left">int32[3]</td><td align="left">统一</td><td align="left">是</td><td align="left">计划专门用于在虚幻引擎外计算的插值数据。</td><td align="left">[0, INT_MAX]</td><td align="left"></td></tr><tr><td align="left">groom_guide_weights</td><td align="left">float32[3]</td><td align="left">统一</td><td align="left">是</td><td align="left">计划专门用于在虚幻引擎外计算的插值数据。</td><td align="left">[0, FLOAT_MAX]</td><td align="left"></td></tr></tbody></table> 
<h3><a id="4_81"></a>4、毛发材质</h3> 
<p>首先需要将将着色模型设置为毛发，然后在用途中启用使用发束(Use with Hair Strands)<br> <img src="https://images2.imgbox.com/4e/78/idp9lXQ0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="425Groom_85"></a>4.25、生成Groom纹理</h3> 
<p>利用 Groom 资产，你可以根据导入的groom中的发束数据创建纹理。你可以为骨架网格体生成毛囊遮罩，以将毛发与其网格体表面更好地混合起来。你还可以创建多种发束纹理，以使用这些纹理创建毛发网格体或毛发方块。</p> 
<h4><a id="_87"></a>流程</h4> 
<h5><a id="1Groom_88"></a>1、在内容浏览器中右键单击Groom资产</h5> 
<p><img src="https://images2.imgbox.com/dd/62/PFih33YY_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2Create_Follicle_Texture__Create_Strands_Texture_90"></a>2、选择要创建的纹理类型：创建毛囊纹理（Create Follicle Texture） 和 创建发束纹理（Create Strands Texture）</h5> 
<h4><a id="_91"></a>毛囊纹理</h4> 
<p><strong>毛囊（Follicle）</strong> 纹理包含根部的小型距离场，利用此距离场，可以从骨架网格体中捕获底层表面材质的着色器中的某些效果。生成的纹理中包含用于存储纹理信息的多个通道。你可以同时选择多个groom来填充生成的纹理中的这些通道。</p> 
<p>选择 <strong>创建毛囊纹理（Create Follicle Texture）</strong> 时，将会打开 <strong>Groom毛囊遮罩选项（Groom Follicle Mask Options）</strong> 窗口。选择你的选项，然后单击 创建（Create） 来生成你的毛囊纹理遮罩。这些纹理将保存在与Groom资产相同的位置。<br> <img src="https://images2.imgbox.com/28/d7/2kB65ZYH_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">分辨率（Resolution）</td><td align="left">毛囊遮罩的纹理分辨率。分辨率四舍五入到最接近的2的n次方大小，例如256、512和1024</td></tr><tr><td align="left">根半径（Root Radius）</td><td align="left">生成的毛囊遮罩中的发束根大小，用像素来衡量</td></tr><tr><td align="left"><strong>Groom</strong></td><td align="left"></td></tr><tr><td align="left">属性</td><td align="left">说明</td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">Groom</td><td align="left">用于生成毛囊纹理遮罩的Groom资产</td></tr><tr><td align="left">通道（Channel）</td><td align="left">用于将此groom的毛囊纹理遮罩存储在其中的纹理遮罩的色彩通道</td></tr></tbody></table> 
<h4><a id="_105"></a>发束纹理</h4> 
<p><strong>发束（Strands）</strong> 纹理包括根据你的groom生成的多个纹理，将应用到指定的毛发网格体。</p> 
<p>选择 <strong>创建发束纹理（Create Strands Texture）</strong> 时，将会打开 <strong>Groom发束纹理选项（Groom Strands Textures Options） 窗口</strong>。选择你的选项，然后单击 创建（Create） 来生成你的发束纹理。这些纹理将保存在与Groom资产相同的位置。<br> <img src="https://images2.imgbox.com/dc/0f/QaBzgsDh_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">分辨率（Resolution）</td><td align="left">所生成的发束纹理（切线、不透明度、深度和属性）的纹理分辨率。分辨率四舍五入到最接近的2的n次方大小，例如256、512和1024。</td></tr><tr><td align="left">追踪类型（Trace Type）</td><td align="left">选择在生成发束纹理时要为投影执行的追踪方向。</td></tr></tbody></table> 
<ul><li>向外追踪（Trace Outside） 从网格体的表面向外部执行追踪。这对于面部毛发非常有效。</li><li>向内追踪（Trace Inside） 从网格体的表面向内部执行追踪。这对于毛发groom非常有效。</li><li>双向追踪（Trace Bidirectional） 在两个方向上（内部和外部）执行追踪。</li></ul> 
<table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left">追踪距离（Trace Distance）</td><td align="left">与网格体表面之间的距离，超过此距离后，会将发束投影到网格体上。</td></tr><tr><td align="left">网格体类型（Mesh Type）</td><td align="left">选择用于追踪的输入网格体类型：静态网格体（Static Mesh） 或 骨架网格体（Skeletal Mesh）。</td></tr><tr><td align="left">静态网格体（Static Mesh）</td><td align="left">groom发束将投影至该静态网格体资产，以生成纹理。这要求你将 网格体类型（Mesh Type） 设置为 静态网格体（Static Mesh）</td></tr><tr><td align="left">骨架网格体（Skeletal Mesh）</td><td align="left">groom发束将投影至该静态网格体资产，以生成纹理。这要求你将 网格体类型（Mesh Type） 设置为 骨架网格体（Skeletal Mesh）。</td></tr><tr><td align="left">LOD索引（LOD Index）</td><td align="left">将在其上执行纹理投影的细节层次网格体索引。</td></tr><tr><td align="left">分段索引（Section Index ）</td><td align="left">将在其上执行纹理投影的网格体分段。</td></tr><tr><td align="left">UV通道索引（UV Channel Index）</td><td align="left">用于纹理投影的UV通道索引。</td></tr><tr><td align="left">组索引（Group Index）</td><td align="left">应烘焙到纹理中的groom索引。数组变空之后，默认包括所有组。</td></tr></tbody></table> 
<p>结果可以产生多种纹理资产，包括深度、特性、不透明度和切线，这些资产可以应用至毛发网格体。以下是从groom贴到毛发网格体的两个示例纹理输出。<br> <img src="https://images2.imgbox.com/3c/e1/FhmNZeHq_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="45_131"></a>4.5、毛发资产编辑器</h3> 
<p>Groom毛发主要用于处理Alembic文件中的毛发发束，但同时也支持发片网格体等形式<br> 毛发资产编辑器管理毛发的内容，修改毛发的不同部分，确定渲染和物理模拟方式，管理创建LOD</p> 
<h4><a id="Show_134"></a>显示(Show)</h4> 
<p>在毛发资产编辑器的视口中，与其他资产编辑器不同的主要是Show选项<br> <img src="https://images2.imgbox.com/b0/e4/sjfuPZYt_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">导线（Guide）</td><td align="left">显示用于模拟的导线。</td></tr><tr><td align="left">导线影响（Guide Influence）</td><td align="left">以彩色显示模拟中的毛发聚丛（所有受某根导线影响的发束）。</td></tr><tr><td align="left">UV</td><td align="left">显示每个发束的UV。</td></tr><tr><td align="left">根UV（Root UV）</td><td align="left">显示每个发束根部的UV。</td></tr><tr><td align="left">根UDIM（Root UDIM）</td><td align="left">在每个发束的根部显示UDIM。</td></tr><tr><td align="left">尺寸（Dimension）</td><td align="left">显示用于模拟的导线。</td></tr><tr><td align="left">种子（Seed）</td><td align="left">（用彩色）显示每个发束使用的随机种子。</td></tr><tr><td align="left">半径差异（Radius Variation）</td><td align="left">（用彩色）显示发束的大小。蓝色表示较细的发束。黄色表示较粗的发束。</td></tr><tr><td align="left">底色（Base Color）</td><td align="left">显示每个顶点存储的底色。如果建模应用导出的毛发不包含底色，发束将显示为黑色。</td></tr><tr><td align="left">粗糙度（Roughness）</td><td align="left">显示每个顶点存储的粗糙度。如果建模应用导出的毛发不包含粗糙度，发束将显示为黑色。</td></tr><tr><td align="left">Vis群集（Vis Cluster）</td><td align="left">显示用于剔除和细节层次用途的毛发群集。</td></tr><tr><td align="left">发片导线（Cards Guide）</td><td align="left"></td></tr></tbody></table> 
<h4><a id="_151"></a>细节面板</h4> 
<h5><a id="1_152"></a>1、细节层次</h5> 
<p>控制毛发在各个细节层级上的删减，控制LOD在何种屏幕尺寸更改，以及使用哪种类型的几何体结构来表示<br> <img src="https://images2.imgbox.com/a2/ef/Pjqgdwja_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">曲线删减（Curve Decimation）</td><td align="left">通过减少发束数量来删减毛发。移除的发束是从导入的毛发发束中随机选择的。</td></tr><tr><td align="left">顶点删减（Vertex Decimation）</td><td align="left">通过移除发束上的顶点来删减毛发。</td></tr><tr><td align="left">角阈值（Angular Threshold）</td><td align="left">定义了删除顶点时，两个连续发束片段之间的最大角度值。数值越大，删减就越多。</td></tr><tr><td align="left">屏幕尺寸（Screen Size）</td><td align="left">LOD在低于该屏幕尺寸后将会被启用。</td></tr><tr><td align="left">厚度缩放（Thickness Scale）</td><td align="left">你可以增加发束的厚度，以弥补被删除的发束曲线。厚度缩放值负责控制计算补偿时所用的自动缩放值。</td></tr><tr><td align="left">可视性（Visible）</td><td align="left">切换此LOD的可视性。</td></tr><tr><td align="left">几何体类型（Geometry Type）</td><td align="left">设置将使用哪种类型的几何体来呈现此细节层次。在以下选项中进行选择：发束（Strands）发片（Cards）网格体（Meshes)</td></tr><tr><td align="left">发簇世界尺寸（Cluster World Size）</td><td align="left">定义发簇的平均大小（在世界空间中）。毛发会被划分成多个发簇，以便LOD的选择和剔除更加精细。</td></tr><tr><td align="left">发簇屏幕尺寸缩放（Cluster Screen Size Scale）</td><td align="left">缩放发簇的投影屏幕（projected screen），以便微调其细节层次选择。</td></tr><tr><td align="left"><strong>LOD选择类型（LOD Selection Type）</strong>:CPU较为粗糙GPU较为精细</td><td align="left"></td></tr><tr><td align="left"><strong>最低LOD（Minimum LOD）</strong>：指定烘焙的最低LOD，或者用增加设置各平台的最低LOD</td><td align="left"></td></tr><tr><td align="left"><strong>禁用低于最低LOD时删除（Disable Below Min LOD Stripping）</strong>：设置一个标记，覆盖在LOD低于 最低 LOD（Minimum LOD） 时删除LOD的操作，影响范围是全平台。或用 增加（Plus） 按钮来指定平台设置。</td><td align="left"></td></tr></tbody></table> 
<h5><a id="2_169"></a>2、插值</h5> 
<p>修改毛发导入时的属性设置<br> <img src="https://images2.imgbox.com/9f/96/bo2agDkJ_o.png" alt="在这里插入图片描述"><br> <strong>毛发组(Hair Group)</strong></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">曲线删减（Curve Decimation）</td><td align="left">通过减少发束数量来删减毛发。移除的发束是从导入的毛发发束中随机选择的。</td></tr><tr><td align="left">顶点删减（Vertex Decimation）</td><td align="left">通过移除发束上的顶点来删减毛发。</td></tr><tr><td align="left">覆盖导线（Override Guides）</td><td align="left">启用后会覆盖导入的导线，并选择发束的一个子集作为导线。</td></tr><tr><td align="left">毛发导线密度（Hair to Guide Density）</td><td align="left">定义用作导线的发束的比率。</td></tr><tr><td align="left">插值质量（Interpolation Quality）</td><td align="left">定义将导线动作插值到发束上时，插值的质量。</td></tr><tr><td align="left">插值距离（Interpolation Distance）</td><td align="left">定义用于将导线和发束配对在一起时的距离。</td></tr><tr><td align="left">随机化导线（Randomize Guide）</td><td align="left">启用后，用于插值的导线将会轻度随机化，以避免可能发生的毛发聚丛。</td></tr><tr><td align="left">顶点删减（Vertex Decimation）</td><td align="left">通过移除发束上的顶点来删减毛发。</td></tr><tr><td align="left">用户唯一导线（User Unique Guide）</td><td align="left">启用后，可以使用单一导线来执行动作插值。</td></tr><tr><td align="left"><strong>差值</strong></td><td align="left"></td></tr><tr><td align="left"><strong>启用全局插值（Enable Global Interpolation）</strong></td><td align="left"></td></tr><tr><td align="left">启用后，使用径向基函数进行插值，而不是使用本地蒙皮刚体变换（ local skin rigid transform）。</td><td align="left"></td></tr><tr><td align="left"><strong>毛发插值类型（Hair Interpolation Type）</strong></td><td align="left"></td></tr><tr><td align="left">选择将毛发绑定到骨架网格体时，要使用的插值类型：</td><td align="left"></td></tr></tbody></table> 
<ul><li> <p><strong>刚体变换</strong>（Rigid Transform）：插值过程中，仅会平移最接近根部的皮肤三角形。</p> </li><li> <p><strong>偏移变换</strong>（Offset Transform）：插值过程中，仅会平移最接近根部的皮肤三角形。</p> </li><li> <p><strong>平滑变换</strong>（Smooth Transform）：插值过程中，会平移最接近根部的皮肤三角形，同时会基于导线计算出平滑旋转。</p> </li></ul> 
<h5><a id="3_194"></a>3、发束面板</h5> 
<p><img src="https://images2.imgbox.com/49/57/K19GYPYM_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">材质（Material）</td><td align="left">用于展现发片使用不同LOD时的材质。</td></tr><tr><td align="left">毛发宽度（Hair Width）</td><td align="left">更改发束大小。此数值对应发束的最大宽度。默认数值来自于导入的毛发。</td></tr><tr><td align="left">毛发根部缩放（Hair Root Scale）</td><td align="left">控制毛发根部的缩放从底端到顶端</td></tr><tr><td align="left">毛发顶部缩放(Hair Tip Scale)</td><td align="left">控制毛发顶部的缩放从顶端到底端</td></tr><tr><td align="left">毛发剪断缩放（Hair Clip Scale）</td><td align="left">在距发束根部一定距离处剪断毛发。</td></tr><tr><td align="left">毛发阴影密度（Hair Shadow Density）</td><td align="left">缩放毛发密度，使毛发上的阴影和透射效果均匀地变弱或变强。</td></tr><tr><td align="left">毛发光线追踪半径缩放（Hair Raytracing Radius Scale）</td><td align="left">在使用光线追踪阴影时缩放发束的宽度。</td></tr><tr><td align="left">体素化（Voxelize）</td><td align="left">启用后，对毛发束进行体素化处理，从而提供更加准确的光照计算。</td></tr><tr><td align="left">使用稳定光栅化（Use Stable Rasterization）</td><td align="left">启用后，发束的噪点更少，但可能显得有点厚。</td></tr><tr><td align="left">散射场景光照（Scatter Scene Lighting）</td><td align="left">启用后，发束会使用下方的场景光照作为光源。此属性适用于非常短的毛发，例如人体毫毛。</td></tr></tbody></table> 
<h5><a id="4_208"></a>4、发片面板</h5> 
<p>设置发片使用的几何体和纹理，并选择使用引擎生成的的发片或是使用导入的发片<br> <img src="https://images2.imgbox.com/f3/c8/5FZlTCQm_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">材质（Material）</td><td align="left">用于发片呈现LOD的指定材质</td></tr><tr><td align="left">源类型（Source Type）</td><td align="left">选择要使用的发片类型 <strong>基于程序化生成（实验性）（Procedural （Experimental））基于导入（Imported）</strong></td></tr><tr><td align="left">程序性网格体（Procedural Mesh）</td><td align="left">程序化发片几何体引用的网格</td></tr><tr><td align="left">导入的网格（Imported Mesh）</td><td align="left">导入的发片几何体引用的网格</td></tr><tr><td align="left"><strong>Textures</strong></td><td align="left"></td></tr><tr><td align="left"></td><td align="left"></td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">深度纹理（Depth Texture）</td><td align="left">用于发片资产的深度纹理。此纹理是可选的，但一旦设置，其值会转发到材质编辑器中的Hair Attributes节点。</td></tr><tr><td align="left">覆盖纹理（Coverage Texture）</td><td align="left">用于发片资产的覆盖纹理。此纹理是可选的，但一旦设置，其值会转发到材质编辑器中的Hair Attributes节点。</td></tr><tr><td align="left">切线纹理（Tangent Texture）</td><td align="left">用于发片资产的切线纹理。此纹理是可选的，但一旦设置，其值会转发到材质编辑器中的Attributes node节点。</td></tr><tr><td align="left">属性纹理（Attribute Texture）</td><td align="left">用于发片资产的特性纹理。此纹理是可选的，但一旦设置，其值会转发到材质编辑器中的Hair Attributes节点。</td></tr><tr><td align="left">辅助数据纹理（Auxiliary Data Texture）</td><td align="left">此辅助纹理允许为发片资产传输用户数据。这是可选的纹理，一旦设置，其值会转发到材质编辑器中的 Hair Attributes 节点。</td></tr><tr><td align="left">组索引（Group Index）</td><td align="left">将此发片的几何体映射到的组索引</td></tr><tr><td align="left">LOD索引（LOD Index）</td><td align="left">应使用此发片资产的LOD索引</td></tr></tbody></table> 
<h5><a id="5_227"></a>5、程序化生成设置（实验性）</h5> 
<p><img src="https://images2.imgbox.com/3a/43/sTslhIpC_o.png" alt="在这里插入图片描述"><br> <strong>几何体设置（Geometry Settings）</strong></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">生成类型（Generation Type）</td><td align="left">选择是使用导线还是发束来生成发片，选择发束时，将使用随机选择方式来生成发片</td></tr><tr><td align="left">发片计数（Cards Count）</td><td align="left">在生成类型（Generation Type）中设置为发片计数（Cards Count）时，生成发片的数量</td></tr><tr><td align="left">发簇类型（Cluster Type）</td><td align="left">定义如何组合块来生成发片，“高”将创建更加完善的块，但速度更慢</td></tr><tr><td align="left">最小片段长度（Min Segment Length）</td><td align="left">控制毛发顶部的缩放从顶端到底端</td></tr><tr><td align="left">角阈值（Angular Threshold）</td><td align="left">定义两个连续发片片段之间的最大角度值。较高的数值可以减少发片删减的几何复杂程度。</td></tr><tr><td align="left">最小发片长度（Min Cards Length）</td><td align="left">将移除长度小于此阈值的发片</td></tr><tr><td align="left">最大发片长度（Max Cards Length）</td><td align="left">将移除长度大于此阈值的发片</td></tr><tr><td align="left"><strong>纹理设置</strong></td><td align="left"></td></tr></tbody></table> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">图集最大分辨率（Atlas Max Resolution）</td><td align="left">生成的发片图集的最大分辨率，此数值仅是发片生成器的建议值，并非强制要求</td></tr><tr><td align="left">每厘米像素（Pixel Per Centimeters）</td><td align="left">设置用于生成发片图谱的像素密度（或精度）</td></tr><tr><td align="left">长度纹理计数（Length Texture Count）</td><td align="left">要生成的聚丛变体数量</td></tr></tbody></table> 
<h5><a id="6_247"></a>6、网格体面板</h5> 
<p>网格体面板负责管理毛发资产中各个LOD使用的网格体几何体。此面板会列出所有网格体几何体，但并非所有列出的几何体都是必须使用的。<br> <img src="https://images2.imgbox.com/c3/91/D5vUBrk5_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">材质（Material）</td><td align="left">用于发片呈现LOD的指定材质</td></tr><tr><td align="left">导入网格体（Imported Mesh）</td><td align="left">要引用的指定网格体几何体</td></tr><tr><td align="left"><strong>纹理</strong></td><td align="left"></td></tr><tr><td align="left">属性</td><td align="left">说明</td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">深度纹理（Depth Texture）</td><td align="left">用于发片资产的深度纹理。此纹理是可选的，但一旦设置，其值会转发到材质编辑器中的Hair Attributes节点</td></tr><tr><td align="left">覆盖纹理（Coverage Texture）</td><td align="left">用于发片资产的覆盖纹理。此纹理是可选的，但一旦设置，其值会转发到材质编辑器中的Hair Attributes节点</td></tr><tr><td align="left">切线纹理（Tangent Texture）</td><td align="left">用于发片资产的切线纹理。此纹理是可选的，但一旦设置，其值会转发到材质编辑器中的Hair Attributes节点</td></tr><tr><td align="left">特性纹理（Attribute Texture）</td><td align="left">用于发片资产的特性纹理。此纹理是可选的，但一旦设置，其值会转发到材质编辑器中的Hair Attributes节点</td></tr><tr><td align="left">辅助数据纹理（Auxiliary Data Texture）</td><td align="left">此辅助纹理允许为发片资产传输用户数据。这是可选的纹理，一旦设置，其值会转发到材质编辑器中的 Hair Attributes 节点</td></tr><tr><td align="left">组索引（Group Index）</td><td align="left">要引用的指定网格体几何体</td></tr><tr><td align="left">导入网格体（Imported Mesh）</td><td align="left">将此发片的几何体映射到的组索引</td></tr><tr><td align="left">LOD索引（LOD Index）</td><td align="left">应使用此发片资产的LOD索引</td></tr><tr><td align="left"><strong>LOD</strong></td><td align="left"></td></tr><tr><td align="left">属性</td><td align="left">说明</td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">最低LOD（Minimum LOD）</td><td align="left"></td></tr><tr><td align="left">指定要为所有平台调配的最低细节LOD，或通过使用 增加（Plus） 按钮来增加LOD，为各个平台指定具体最小值</td><td align="left"></td></tr></tbody></table> 
<h5><a id="7_270"></a>7、材质</h5> 
<p>材质（Materials） 面板定义了毛发资产可以使用的材质。</p> 
<p>使用 添加（Add） （+）按钮添加新材质引用。在"插槽名称（Slot Name）"中输入材质的名称，否则将使用指定的默认材质名称。<br> <img src="https://images2.imgbox.com/71/b2/IAinK2fv_o.png" alt="在这里插入图片描述"><br> 发束（Strands）、网格体（Meshes）和发片（Cards） 面板中的 材质（Material） 插槽允许你从引用的材质中进行选择。<br> <img src="https://images2.imgbox.com/ce/e3/DaHtoMHU_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="8_278"></a>8、物理</h5> 
<p>物理（Physics） 面板提供了多种设置，可用于启用物理模拟以及修改毛发的运动行为。<br> <img src="https://images2.imgbox.com/1d/2f/I1SGWvTR_o.png" alt="在这里插入图片描述"><br> <strong>解算器设置</strong></p> 
<table><thead><tr><th align="left">属性</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">启用模拟（Enable Simulation）</td><td align="left">为毛发资产启用物理模拟</td></tr><tr><td align="left">Niagara解算器（Niagara Solver）</td><td align="left">选择要用于模拟的Niagara解算器。从 Cosserate Rods、角弹簧（Angular Springs） 和 自定义解算器（Custom Solver） 中选择</td></tr><tr><td align="left">自定义系统（Custom System）</td><td align="left">若Niagara解算器设置为自定义解算器，则添加要使用的自定义Niagara系统</td></tr><tr><td align="left">子步骤（Sub Steps）</td><td align="left">每帧要完成的子步骤数。实际的解算器调用以每秒24帧的速度完成</td></tr><tr><td align="left">迭代计数（Iteration Count）</td><td align="left">用xpbd解算器解算约束的迭代数。</td></tr><tr><td align="left">组索引（Group Index）</td><td align="left">要引用的指定网格体几何体</td></tr><tr><td align="left"><strong>外力</strong></td><td align="left"></td></tr><tr><td align="left">属性</td><td align="left">说明</td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">重力矢量（Gravity Vector）</td><td align="left">用于重力的加速度矢量，测量单位为cm/s2</td></tr><tr><td align="left">空气阻力（Air Drag）</td><td align="left">0到1之间的系数，用于空气阻力</td></tr><tr><td align="left">空气速度（Air Velocity）</td><td align="left">周围空气的速度，单位为cm/s</td></tr><tr><td align="left"><strong>材质约束：弯曲约束</strong></td><td align="left"></td></tr><tr><td align="left">属性</td><td align="left">说明</td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">解算弯曲（Solve Bend）</td><td align="left">在xpbd循环期间启用弯曲约束的解算</td></tr><tr><td align="left">投影弯曲（Solve Bend）</td><td align="left">在xpbd循环后启用弯曲约束的投影</td></tr><tr><td align="left">弯曲阻尼（Bend Damping）</td><td align="left">对弯曲约束施加的介于0到1之间的阻尼</td></tr><tr><td align="left">弯曲刚度（Bend Stiffness）</td><td align="left">弯曲约束的刚度，单位为GPa</td></tr><tr><td align="left">刚度范围（Stiffness Scale）</td><td align="left">该曲线可确定每个束的弯曲刚度。X轴范围是0,1。0映射到根部，1映射到梢部</td></tr><tr><td align="left"><strong>材质约束：拉伸约束</strong></td><td align="left"></td></tr><tr><td align="left">属性</td><td align="left">说明</td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">解算拉伸（Solve Stretch）</td><td align="left">在xpbd循环期间启用拉伸约束的解算</td></tr><tr><td align="left">投影拉伸（Project Stretch）</td><td align="left">在xpbd循环后启用拉伸约束的投影</td></tr><tr><td align="left">拉伸阻尼（Stretch Damping）</td><td align="left">约束介于0到1之间的阻尼</td></tr><tr><td align="left">拉伸刚度（Stretch Stiffness）</td><td align="left">拉伸约束的刚度，单位为GPa</td></tr><tr><td align="left">刚度范围（Stiffness Scale）</td><td align="left">该曲线可确定每个发束的拉伸刚度。X轴范围是0,1。0映射到根部，1映射到梢部</td></tr><tr><td align="left"><strong>材质约束：碰撞约束</strong></td><td align="left"></td></tr><tr><td align="left">属性</td><td align="left">说明</td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">解算碰撞（Solve Collision）</td><td align="left">在xpbd循环期间启用碰撞约束的解算</td></tr><tr><td align="left">投影碰撞（Project Collision）</td><td align="left">在xpbd循环后启用碰撞约束的投影</td></tr><tr><td align="left">静态摩擦（Static Friction）</td><td align="left">用于物理资产碰撞的静态摩擦</td></tr><tr><td align="left">动态摩擦（Kinectic Friction）</td><td align="left">用于物理资产碰撞的动态摩擦</td></tr><tr><td align="left">束粘度（Strands Viscosity）</td><td align="left">用于自碰撞的介于0和1之间的粘度</td></tr><tr><td align="left">网格有效维度（Grid Dimensions）</td><td align="left">用于计算粘度力的网格有效维度</td></tr><tr><td align="left">碰撞半径（Collision Radius）</td><td align="left">用于物理资产碰撞检测的半径</td></tr><tr><td align="left">半径范围（Radius Scale）</td><td align="left">该曲线可确定每个发束的碰撞半径。X轴范围是0,1。0映射到根部，1映射到梢部</td></tr><tr><td align="left"><strong>发束参数</strong></td><td align="left"></td></tr><tr><td align="left">属性</td><td align="left">说明</td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">发束大小（Strands Size）</td><td align="left">用于模拟的每根导线上的粒子数</td></tr><tr><td align="left">发束密度（Strands Density）</td><td align="left">束密度，测量单位为g/cm3</td></tr><tr><td align="left">发束平滑（Strands Smoothing）</td><td align="left">传入导线曲线介于0至1之间的平滑度，旨在提升稳定性</td></tr><tr><td align="left">发束厚度（Strands Thickness）</td><td align="left">束厚度（单位为厘米），用于计算质量和惯性</td></tr><tr><td align="left">厚度范围（Thickness Scale）</td><td align="left">该曲线可确定每个束的束厚度。X轴范围是0,1。0映射到根部，1映射到梢部</td></tr></tbody></table> 
<h3><a id="475Xgen_332"></a>4.75、毛发创建Xgen指南</h3> 
<h4><a id="XGen_333"></a>转换旧有XGen说明</h4> 
<h5><a id="Numbs_334"></a>将导线转换为Numbs曲线</h5> 
<p>请参考下列步骤将Groom的导线转化为曲线，以便保存一组曲线并匹配你要转换的导线。<br> 1、从主菜单中，点击 生成（Generate） 下拉列表并选择 XGen编辑器（XGen Editor）。<br> 2、在 XGen 窗口中，使用 工具（Utilities） 选项卡选择 曲线的导线（Guides to Curves）。<br> <img src="https://images2.imgbox.com/3e/56/pkG7pqs7_o.png" alt="在这里插入图片描述"><br> 3、点击创建曲线。<br> 完成后，groom的输出将类似下图：<br> <img src="https://images2.imgbox.com/72/f1/dnH2FI03_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="GroomXGenGroom_342"></a>将Groom转换为XGen交互式Groom</h5> 
<p>若使用旧版XGen说明，需将groom转换为 XGen交互式Groom（XGen Interactive Groom）。步骤如下：<br> 1、选择XGen Description节点。<br> <img src="https://images2.imgbox.com/de/d9/H4LL7QOX_o.png" alt="在这里插入图片描述"><br> 2、在 建模（Modeling） 菜单集中使用主菜单点击 生成（Generate） 下拉列表，然后选择 转换为交互式Groom（Convert to Interactive Groom）</p> 
<h4><a id="NURBS_347"></a>将样条说明导出到NURBS曲线</h4> 
<p>1、选中你的XGen Spline Description节点。在 建模（Modeling） 菜单集中使用主菜单点击 生成（Generate） 下拉列表。然后在列表中选择 缓存（Cache）&gt; 导出缓存（Export Cache）<br> 请遵循以下步骤，将你选中的样条说明导出成Alembic文件，该文件可以与插入的头发一起导入为NURBS曲线。<br> 2、在 导出缓存（Export Cache） 窗口中进行以下设置：</p> 
<ul><li>缓存时间帧（Cache Time Frame）： 设置成 当前帧（Current Frame）</li><li>多个变换（Multiple Transforms）： 禁用</li><li>写入最终宽度（Write Final Width）： 启用<br> -<img src="https://images2.imgbox.com/4c/48/lfchABhp_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="_355"></a>创建属性</h4> 
<h5><a id="ID_356"></a>创建组ID属性</h5> 
<p>可在一个或多个组中导出内插毛发。虚幻引擎中可识别此类组，用于唯一材质指定。</p> 
<p>创建组ID属性时使用以下脚本：</p> 
<pre><code class="prism language-py"><span class="token keyword">from</span> maya <span class="token keyword">import</span> cmds

attr_name <span class="token operator">=</span> <span class="token string">'groom_group_id'</span>

<span class="token comment"># 注意：更改以下命名以反映节点场景。</span>
groups <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'hair_brows_splineDescription1|SplineGrp0'</span><span class="token punctuation">,</span> <span class="token string">'hair_lashes_splineDescription1|SplineGrp0'</span><span class="token punctuation">,</span> <span class="token string">'hair_head_splineDescription1|SplineGrp0'</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> groom_group_id<span class="token punctuation">,</span> group_name <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>groups<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># 获取xgGroom下的曲线</span>
    curves <span class="token operator">=</span> cmds<span class="token punctuation">.</span>listRelatives<span class="token punctuation">(</span>group_name<span class="token punctuation">,</span> ad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'nurbsCurve'</span><span class="token punctuation">)</span>

    <span class="token comment"># 用组id标记组</span>
    cmds<span class="token punctuation">.</span>addAttr<span class="token punctuation">(</span>group_name<span class="token punctuation">,</span> longName<span class="token operator">=</span>attr_name<span class="token punctuation">,</span> attributeType<span class="token operator">=</span><span class="token string">'short'</span><span class="token punctuation">,</span> defaultValue<span class="token operator">=</span>groom_group_id<span class="token punctuation">,</span> keyable<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token comment"># 添加属性范围</span>
    <span class="token comment"># 强制Maya的alembic将数据导出为GeometryScope::kConstantScope</span>
    cmds<span class="token punctuation">.</span>addAttr<span class="token punctuation">(</span>group_name<span class="token punctuation">,</span> longName<span class="token operator">=</span><span class="token string">'{}_AbcGeomScope'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>attr_name<span class="token punctuation">)</span><span class="token punctuation">,</span> dataType<span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">,</span> keyable<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    cmds<span class="token punctuation">.</span>setAttr<span class="token punctuation">(</span><span class="token string">'{}.{}_AbcGeomScope'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>group_name<span class="token punctuation">,</span> attr_name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'con'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_381"></a>创建导线属性</h5> 
<p>当你为groom创建导线属性时，只有标记为 导线（guide） 的曲线才会被用于虚幻引擎中的模拟。若未在Alembic文件中指定导线，在导入UE4的过程中，一定比例的内插毛发将被内部标记为导线。</p> 
<p>创建导线属性时使用以下脚本：</p> 
<pre><code class="prism language-py"><span class="token keyword">from</span> maya <span class="token keyword">import</span> cmds

attr_name <span class="token operator">=</span> <span class="token string">'groom_guide'</span>

<span class="token comment"># 获取xgGroom下的曲线</span>
curves <span class="token operator">=</span> cmds<span class="token punctuation">.</span>listRelatives<span class="token punctuation">(</span><span class="token string">'xgGroom'</span><span class="token punctuation">,</span> ad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'nurbsCurve'</span><span class="token punctuation">)</span>

<span class="token comment"># 新建组</span>
guides_group <span class="token operator">=</span> cmds<span class="token punctuation">.</span>createNode<span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'guides'</span><span class="token punctuation">)</span>

<span class="token comment"># 将组标记为groom_guide</span>
cmds<span class="token punctuation">.</span>addAttr<span class="token punctuation">(</span>guides_group<span class="token punctuation">,</span> longName<span class="token operator">=</span>attr_name<span class="token punctuation">,</span> attributeType<span class="token operator">=</span><span class="token string">'short'</span><span class="token punctuation">,</span> defaultValue<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> keyable<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># 强制Maya的alembic将曲线导出为一个组。</span>
cmds<span class="token punctuation">.</span>addAttr<span class="token punctuation">(</span>guides_group<span class="token punctuation">,</span> longName<span class="token operator">=</span><span class="token string">'riCurves'</span><span class="token punctuation">,</span> attributeType<span class="token operator">=</span><span class="token string">'bool'</span><span class="token punctuation">,</span> defaultValue<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> keyable<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># 添加属性范围</span>
<span class="token comment"># 强制Maya的alembic将数据导出为GeometryScope::kConstantScope</span>
cmds<span class="token punctuation">.</span>addAttr<span class="token punctuation">(</span>guides_group<span class="token punctuation">,</span> longName<span class="token operator">=</span><span class="token string">'{}_AbcGeomScope'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>attr_name<span class="token punctuation">)</span><span class="token punctuation">,</span> dataType<span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">,</span> keyable<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
cmds<span class="token punctuation">.</span>setAttr<span class="token punctuation">(</span><span class="token string">'{}.{}_AbcGeomScope'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>guides_group<span class="token punctuation">,</span> attr_name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'con'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span>

<span class="token comment"># 导线组下方的父曲线</span>
<span class="token keyword">for</span> curve <span class="token keyword">in</span> curves：
    cmds<span class="token punctuation">.</span>parent<span class="token punctuation">(</span>curve<span class="token punctuation">,</span> guides_group<span class="token punctuation">,</span> shape<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> relative<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>Groom_Width属性</strong><br> 在Maya中，宽度值有一个特殊的行为，与其他DCC应用不同的是，它可以遵循Alembic以及Grooms规格中的内容，来获取它们并使用它们来构建groom。</p> 
<p>Maya可以直接在曲线上导出宽度值，因此不需要导出自定义的 groom_width 属性；导入器会自动将这些值转换为该属性。如果 groom_wdith 属性在导入虚幻引擎时与groom一起存在，则它不会被覆盖。如果 groom_wdith 没有被指定，或者不能从宽度值转换，那么生成器将默认使用1厘米。</p> 
<h4><a id="UV_416"></a>将纹理应用于毛发UV</h4> 
<p>以下步骤和包含脚本可以帮助你设置自己的XGen毛发，该毛发可以导出到虚幻引擎，并且各个发束上呈现已应用的纹理。<br> 1、在Maya的建模菜单中，选择 生成（Generate） &gt; 创建交互式Groom样条（Create Interactive Groom Splines）。<br> <img src="https://images2.imgbox.com/05/7f/60MOO7lB_o.png" alt="在这里插入图片描述"><br> 2、你可以根据自己的偏好为项目创建导线并涂刷毛发。准备就绪后，选择 生成（Generate）&gt; 缓存（Cache）&gt; 创建新缓存（Create New Cache） 将曲线导出为 Alembic缓存（Alembic Cache）。<br> 3、通过隐藏或删除XGen头发以将其移除。然后，在Maya场景中，使用源网格体重新导入之前导出的毛发曲线。<br> <img src="https://images2.imgbox.com/f4/38/RcYInoWd_o.png" alt="在这里插入图片描述"><br> 4、根据你的场景，顶部曲线下将有数千条样条曲线，本例中为 SplineGrp0。编辑以下Python脚本，并将以下值替换为项目中的值：</p> 
<ul><li>export_directory</li><li>hair_file</li><li>curve_top_group</li><li>uv_mesh</li></ul> 
<pre><code class="prism language-py"><span class="token keyword">from</span> maya <span class="token keyword">import</span> cmds
<span class="token keyword">from</span> maya <span class="token keyword">import</span> OpenMaya
<span class="token keyword">import</span> os

<span class="token keyword">def</span> <span class="token function">create_root_uv_attribute</span><span class="token punctuation">(</span>curves_group<span class="token punctuation">,</span> mesh_node<span class="token punctuation">,</span> uv_set<span class="token operator">=</span><span class="token string">'map1'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    Create "groom_root_uv" attribute on group of curves.
    '''</span>

    <span class="token comment"># check curves group</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> cmds<span class="token punctuation">.</span>objExists<span class="token punctuation">(</span>curves_group<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> RuntimeError<span class="token punctuation">(</span><span class="token string">'Group not found: "{}"'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>curves_group<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># get curves in group</span>
    curve_shapes <span class="token operator">=</span> cmds<span class="token punctuation">.</span>listRelatives<span class="token punctuation">(</span>curves_group<span class="token punctuation">,</span> shapes<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> noIntermediate<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    curve_shapes <span class="token operator">=</span> cmds<span class="token punctuation">.</span>ls<span class="token punctuation">(</span>curve_shapes<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'nurbsCurve'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> curve_shapes<span class="token punctuation">:</span>
        <span class="token keyword">raise</span> RuntimeError<span class="token punctuation">(</span><span class="token string">'Invalid curves group. No nurbs-curves found in group.'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">"found curves"</span>
        <span class="token keyword">print</span> curve_shapes

    <span class="token comment"># get curve roots</span>
    points <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> curve_shape <span class="token keyword">in</span> curve_shapes<span class="token punctuation">:</span>
        point <span class="token operator">=</span> cmds<span class="token punctuation">.</span>pointPosition<span class="token punctuation">(</span><span class="token string">'{}.cv[0]'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>curve_shape<span class="token punctuation">)</span><span class="token punctuation">,</span> world<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        points<span class="token punctuation">.</span>append<span class="token punctuation">(</span>point<span class="token punctuation">)</span>

    <span class="token comment"># get uvs</span>
    values <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    uvs <span class="token operator">=</span> find_closest_uv_point<span class="token punctuation">(</span>points<span class="token punctuation">,</span> mesh_node<span class="token punctuation">,</span> uv_set<span class="token operator">=</span>uv_set<span class="token punctuation">)</span>
    <span class="token keyword">for</span> u<span class="token punctuation">,</span> v <span class="token keyword">in</span> uvs<span class="token punctuation">:</span>
        values<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>u<span class="token punctuation">,</span> v<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment">#print (str(u) + " , " + str(v)  )</span>

    <span class="token comment"># create attribute</span>
    name <span class="token operator">=</span> <span class="token string">'groom_root_uv'</span>
    cmds<span class="token punctuation">.</span>addAttr<span class="token punctuation">(</span>curves_group<span class="token punctuation">,</span> ln<span class="token operator">=</span>name<span class="token punctuation">,</span> dt<span class="token operator">=</span><span class="token string">'vectorArray'</span><span class="token punctuation">)</span>
    cmds<span class="token punctuation">.</span>addAttr<span class="token punctuation">(</span>curves_group<span class="token punctuation">,</span> ln<span class="token operator">=</span><span class="token string">'{}_AbcGeomScope'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> dt<span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span>
    cmds<span class="token punctuation">.</span>addAttr<span class="token punctuation">(</span>curves_group<span class="token punctuation">,</span> ln<span class="token operator">=</span><span class="token string">'{}_AbcType'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> dt<span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span>

    cmds<span class="token punctuation">.</span>setAttr<span class="token punctuation">(</span><span class="token string">'{}.{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>curves_group<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span>values<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'vectorArray'</span><span class="token punctuation">)</span>
    cmds<span class="token punctuation">.</span>setAttr<span class="token punctuation">(</span><span class="token string">'{}.{}_AbcGeomScope'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>curves_group<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'uni'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span>
    cmds<span class="token punctuation">.</span>setAttr<span class="token punctuation">(</span><span class="token string">'{}.{}_AbcType'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>curves_group<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'vector2'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'string'</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> uvs

<span class="token keyword">def</span> <span class="token function">find_closest_uv_point</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span> mesh_node<span class="token punctuation">,</span> uv_set<span class="token operator">=</span><span class="token string">'map1'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    Find mesh UV-coordinates at given points.
    '''</span>

    <span class="token comment"># check mesh</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> cmds<span class="token punctuation">.</span>objExists<span class="token punctuation">(</span>mesh_node<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> RuntimeError<span class="token punctuation">(</span><span class="token string">'Node not found: "{}"'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>mesh_node<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># check uv_set</span>
    uv_sets <span class="token operator">=</span> cmds<span class="token punctuation">.</span>polyUVSet<span class="token punctuation">(</span>mesh_node<span class="token punctuation">,</span> q<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> allUVSets<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> uv_set <span class="token keyword">not</span> <span class="token keyword">in</span> uv_sets<span class="token punctuation">:</span>
        <span class="token keyword">raise</span> RuntimeError<span class="token punctuation">(</span><span class="token string">'Invalid uv_set provided: "{}"'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>uv_set<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># get mesh as dag-path</span>
    selection_list <span class="token operator">=</span> OpenMaya<span class="token punctuation">.</span>MSelectionList<span class="token punctuation">(</span><span class="token punctuation">)</span>
    selection_list<span class="token punctuation">.</span>add<span class="token punctuation">(</span>mesh_node<span class="token punctuation">)</span>

    mesh_dagpath <span class="token operator">=</span> OpenMaya<span class="token punctuation">.</span>MDagPath<span class="token punctuation">(</span><span class="token punctuation">)</span>
    selection_list<span class="token punctuation">.</span>getDagPath<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> mesh_dagpath<span class="token punctuation">)</span>
    mesh_dagpath<span class="token punctuation">.</span>extendToShape<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># get mesh function set</span>
    fn_mesh <span class="token operator">=</span> OpenMaya<span class="token punctuation">.</span>MFnMesh<span class="token punctuation">(</span>mesh_dagpath<span class="token punctuation">)</span>

    uvs <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

        script_util <span class="token operator">=</span> OpenMaya<span class="token punctuation">.</span>MScriptUtil<span class="token punctuation">(</span><span class="token punctuation">)</span>
        script_util<span class="token punctuation">.</span>createFromDouble<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span>
        uv_point <span class="token operator">=</span> script_util<span class="token punctuation">.</span>asFloat2Ptr<span class="token punctuation">(</span><span class="token punctuation">)</span>

        point <span class="token operator">=</span> OpenMaya<span class="token punctuation">.</span>MPoint<span class="token punctuation">(</span><span class="token operator">*</span>points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        fn_mesh<span class="token punctuation">.</span>getUVAtPoint<span class="token punctuation">(</span>point<span class="token punctuation">,</span> uv_point<span class="token punctuation">,</span> OpenMaya<span class="token punctuation">.</span>MSpace<span class="token punctuation">.</span>kWorld<span class="token punctuation">,</span> uv_set<span class="token punctuation">)</span>

        u <span class="token operator">=</span> OpenMaya<span class="token punctuation">.</span>MScriptUtil<span class="token punctuation">.</span>getFloat2ArrayItem<span class="token punctuation">(</span>uv_point<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        v <span class="token operator">=</span> OpenMaya<span class="token punctuation">.</span>MScriptUtil<span class="token punctuation">.</span>getFloat2ArrayItem<span class="token punctuation">(</span>uv_point<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

        uvs<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> uvs

<span class="token keyword">def</span> <span class="token function">abc_export</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> node<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> start_frame<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> end_frame<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> data_format<span class="token operator">=</span><span class="token string">'otawa'</span><span class="token punctuation">,</span> uv_write<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    job_command <span class="token operator">=</span> <span class="token string">'-frameRange {} {} '</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>start_frame<span class="token punctuation">,</span> end_frame<span class="token punctuation">)</span>
    job_command <span class="token operator">+=</span> <span class="token string">'-dataFormat {} '</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>data_format<span class="token punctuation">)</span>

    job_command <span class="token operator">+=</span> <span class="token string">'-attr groom_root_uv '</span>

    <span class="token keyword">if</span> uv_write<span class="token punctuation">:</span>
        job_command <span class="token operator">+=</span> <span class="token string">'-uvWrite '</span>

    job_command <span class="token operator">+=</span> <span class="token string">'-root {} '</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>   

    job_command <span class="token operator">+=</span> <span class="token string">'-file {} '</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span> 

    cmds<span class="token punctuation">.</span>AbcExport<span class="token punctuation">(</span>verbose<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> j<span class="token operator">=</span>job_command<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    export_directory <span class="token operator">=</span> <span class="token string">'D:/Dev/Ref'</span>
    hair_file <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>export_directory<span class="token punctuation">,</span> <span class="token string">'hair_export.abc'</span><span class="token punctuation">)</span>
    curve_top_group<span class="token operator">=</span> <span class="token string">'description1|SplineGrp0'</span>
    uv_mesh<span class="token operator">=</span><span class="token string">'pPlane1'</span>

    create_root_uv_attribute<span class="token punctuation">(</span> curve_top_group <span class="token punctuation">,</span> uv_mesh<span class="token punctuation">)</span>
    abc_export<span class="token punctuation">(</span>hair_file<span class="token punctuation">,</span> curve_top_group<span class="token punctuation">)</span>

main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>5、在Maya中，使用更改后的数值运行脚本。这 将 生成一个新的Alembic（‘.abc’）文件，该文件可以导入到虚幻引擎中。<br> 6、在虚幻引擎中，使用 毛发 着色模型创建新材质。在材质图表中，添加 毛发属性（Hair Attributes） 表达式，然后将 根UV（Root UV） 插入纹理样本的 UV 输入中。</p> 
<blockquote> 
 <p>groom_root_uv 属性为每个毛发指定了它所连接的底层网格UV。这个属性是可选项，如果没有指定，引擎会使用球面贴图自动生成一个根UV。</p> 
</blockquote> 
<p>7、将导入的毛发Alembic文件从内容浏览器拖到关卡中，然后向其指定毛发材质。你应该以如下形式结束：</p> 
<blockquote> 
 <p>确保关卡中的毛发Alembic文件的宽度大于0。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/c5/78/wF3NBMf1_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5_556"></a>5、绑定毛发</h3> 
<p>绑定资产用于将Groom组件添加并蒙皮到骨骼网格体上。通过这种方法，Groom可以指定给需要用到它的骨骼网格体，还能指定给享有相同拓扑的骨骼网格体，也可以不预先绑定到网格体上，但会在使用时实时投射造成较高的GPU消耗。</p> 
<p>要创建绑定需要在内容浏览器中右键点击 Groom资产（Groom Asset） 并在快捷菜单中选择 创建绑定（Create Binding）。在创建绑定时，请使用 Groom绑定选项（Groom Binding Options） 窗口指定 目标骨骼网格体（Target Skeletal Mesh） 和 源骨骼网格体（Source Skeletal Mesh）。</p> 
<h3><a id="6nigara_560"></a>6、毛发物理与nigara</h3> 
<p>要对角色毛发应用物理效果，可打开Groom资产，并在 毛发物理效果（Hair Physics） 分类下的解算器设置（Solver Settings）中勾选 启用模拟（Enable Simulation）。<br> <img src="https://images2.imgbox.com/8a/f3/b6P1OJxe_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="7_563"></a>7、毛发控制台命令</h3> 
<p><strong>r.HairStrands.DebugMode</strong></p> 
<table><thead><tr><th align="left">号码</th><th align="left">效果</th></tr></thead><tbody><tr><td align="left">0</td><td align="left">关闭</td></tr><tr><td align="left">1</td><td align="left">群集信息</td></tr><tr><td align="left">2</td><td align="left">所有DOM光源边界</td></tr><tr><td align="left">3</td><td align="left">屏幕投影群集</td></tr><tr><td align="left">4</td><td align="left">深度不透明贴图</td></tr><tr><td align="left">5</td><td align="left">亚像素样本计数</td></tr><tr><td align="left">6</td><td align="left">TAA解析类型（常规/响应）</td></tr><tr><td align="left">7</td><td align="left">毛发覆盖类型</td></tr><tr><td align="left">8</td><td align="left">毛发密度体积</td></tr><tr><td align="left">9</td><td align="left">毛发切线体积</td></tr><tr><td align="left">10</td><td align="left">毛发底色体积</td></tr><tr><td align="left">11</td><td align="left">毛发粗糙度体积</td></tr><tr><td align="left">12</td><td align="left">毛发网格体投影</td></tr><tr><td align="left">13</td><td align="left">毛发覆盖</td></tr><tr><td align="left"><strong>r.HairStrands.StrandMode</strong></td><td align="left"></td></tr><tr><td align="left">号码</td><td align="left">效果</td></tr><tr><td align="left">:--------</td><td align="left">:-------------</td></tr><tr><td align="left">0</td><td align="left">关闭</td></tr><tr><td align="left">1</td><td align="left">模拟发束</td></tr><tr><td align="left">2</td><td align="left">渲染发束影响</td></tr><tr><td align="left">3</td><td align="left">根UV</td></tr><tr><td align="left">4</td><td align="left">根UV UDIM纹理索引</td></tr><tr><td align="left">5</td><td align="left">毛发UV</td></tr><tr><td align="left">6</td><td align="left">毛发种子</td></tr><tr><td align="left">7</td><td align="left">毛发尺寸</td></tr><tr><td align="left">8</td><td align="left">毛发半径变体</td></tr><tr><td align="left">9</td><td align="left">毛发顶点颜色</td></tr><tr><td align="left">10</td><td align="left">毛发顶点粗糙度</td></tr></tbody></table> 
<h3><a id="8_595"></a>8、已知限制</h3> 
<ol><li>帧率取决于groom大小、分辨率，以及采用的底层硬件。例如，对于1080p的人类groom，底层硬件应为2080Ti，帧率30Hz或更高。</li><li>视图模式尚不支持毛发。</li><li>多视图（毛发在多个开放窗口上可见）尚不受支持，或会导致出现瑕疵。</li></ol>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bc8751faf8bba62c79662b744db48bf9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Type-C边充边听PD协议芯片</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/20c1014b9ea6153d26f007802c6fcf88/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Bug】[Vue warn]: Error in render: “RangeError: Maximum call stack size exceeded“的解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>