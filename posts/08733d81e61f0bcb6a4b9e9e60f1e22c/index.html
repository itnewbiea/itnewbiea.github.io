<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>php 错误级别日志 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="php 错误级别日志" />
<meta property="og:description" content="1、error_reporting(“E_ALL”) 设置错误显示等级 下面列举一些错误报告级别：
值 常量 说明
1 E_ERROR 报告导致脚本终止运行的致命错误
2 E_WARNING 报告运行时的警告类错误（脚本不会终止运行）
4 E_PARSE 报告编译时的语法解析错误
8 E_NOTICE 报告通知类错误，脚本可能会产生错误
32767 E_ALL 报告所有的可能出现的错误（不同的PHP版本，常量E_ALL的值也可能不同）
&lt;?php //禁用错误报告 error_reporting(0); //报告运行时错误 error_reporting(E_ERROR | E_WARNING | E_PARSE); //报告所有错误 error_reporting(E_ALL); ?&gt; 2、ini_set(“display_errors”, “on”) 设置让php显示错误，在关于错误显示控制中,其优先级最高 注意：配置文件php.ini中display_errors的默认值为On，代表显示错误提示，如果设置为Off，就会关闭所有的错误提示。 使用 error_reporting(0) 或者在函数前面加 @，可以抑制错误输出，以防止错误消息泄露敏感信息。
3、ini_set(&#39;error_log&#39;, dirname(__FILE__) . &#39;/error_log.txt&#39;);
设置错误日志文件
4、注册错误日志文件
//注册错误日志处理函数 /** * 错误处理函数 * @param int $errno * @param string $errstr * @param string $errfile * @param int $errline */ function errHandler($errno,$errstr,$errfile,$errline){ $msg = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/08733d81e61f0bcb6a4b9e9e60f1e22c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-10-15T10:17:19+08:00" />
<meta property="article:modified_time" content="2017-10-15T10:17:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">php 错误级别日志</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    1、error_reporting(“E_ALL”) 
<br> 设置错误显示等级 
<br> 
<br> 
<br> 
<p>下面列举一些错误报告级别：</p> 
<p>值          <span style="white-space:pre"> </span>常量                     <span style="white-space:pre"> </span>说明<br> 1           <span style="white-space:pre"></span>E_ERROR             <span style="white-space:pre"> </span>报告导致脚本终止运行的致命错误<br> 2           <span style="white-space:pre"></span>E_WARNING       <span style="white-space:pre"> </span>报告运行时的警告类错误（脚本不会终止运行）<br> 4           <span style="white-space:pre"></span>E_PARSE            <span style="white-space:pre"></span>报告编译时的语法解析错误<br> 8           <span style="white-space:pre"></span>E_NOTICE           <span style="white-space:pre"> </span>报告通知类错误，脚本可能会产生错误<br> 32767   <span style="white-space:pre"></span>E_ALL               <span style="white-space:pre"> </span>报告所有的可能出现的错误（不同的PHP版本，常量E_ALL的值也可能不同）<br> </p> 
<p><br> </p> 
<pre><code class="language-php">&lt;?php 
//禁用错误报告 
error_reporting(0); 
//报告运行时错误 
error_reporting(E_ERROR | E_WARNING | E_PARSE); 
//报告所有错误 
error_reporting(E_ALL); 
?&gt; </code></pre> 
<br> 
<br> 
<br> 2、ini_set(“display_errors”, “on”) 
<br> 设置让php显示错误，在关于错误显示控制中,其优先级最高 
<br> 
<br> 
<br> 
<br> 注意：配置文件php.ini中display_errors的默认值为On，代表显示错误提示，如果设置为Off，就会关闭所有的错误提示。 
<br> 
<br> 
<br> 
<p>使用 error_reporting(0) 或者在函数前面加 @，可以抑制错误输出，以防止错误消息泄露敏感信息。</p> 
<p><br> </p> 
<p>3、ini_set('error_log', dirname(__FILE__) . '/error_log.txt');</p> 
<p>设置错误日志文件</p> 
<p><br> </p> 
<p>4、注册错误日志文件</p> 
<p></p> 
<pre><code class="language-php">//注册错误日志处理函数
/**
 * 错误处理函数
 * @param int $errno
 * @param string $errstr
 * @param string $errfile
 * @param int $errline
 */
function errHandler($errno,$errstr,$errfile,$errline){
    $msg = "错误代码：[{$errno}] {$errstr}\r\n";
    $msg .= "错误位置：{$errline} 文件 {$errfile}\r\n";
    $msg .= "PHP版本 ".PHP_VERSION."(".PHP_OS.")\r\n";
    LogCat::writeFileLog('errHandler.log', '错误日志', $msg);
}
set_error_handler("errHandler",E_ALL|E_STRICT);</code></pre> 
<p><br> </p> 
<p>5、针对第3点设置的error_log的路径，可以使用函数 error_log操作记录日志或者发送日志邮件</p> 
<p></p> 
<div class="refnamediv" style='position:relative; color:rgb(51,51,51); font-family:"Fira Sans","Source Sans Pro",Helvetica,Arial,sans-serif; font-size:16px; background-color:rgb(242,242,242)'> 
 <h2 class="refname" style="line-height:3rem; margin:0px 0px 1.5rem; overflow:hidden; font-size:1.75rem; font-weight:500; color:rgb(121,56,98)"> error_log</h2> 
 <p class="verinfo" style="margin-top:0px; margin-bottom:0px; font-size:0.875rem"> (PHP 4, PHP 5, PHP 7)</p> 
 <p class="refpurpose" style="margin-top:0px; margin-bottom:1.5rem"><span class="refname">error_log</span> — <span class="dc-title">发送错误信息到某个地方</span></p> 
</div> 
<div class="refsect1 description" id="refsect1-function.error-log-description" style='margin-bottom:3rem; color:rgb(51,51,51); font-family:"Fira Sans","Source Sans Pro",Helvetica,Arial,sans-serif; font-size:16px; background-color:rgb(242,242,242)'> 
 <h4 class="title" style="line-height:3rem; margin:0px 0px 1.5rem; overflow:hidden; font-size:1.25rem; font-weight:500; color:rgb(121,56,98); position:relative; clear:both"> 说明</h4> 
 <div class="methodsynopsis dc-description" style='color:rgb(115,115,115); font-size:1rem; font-family:"Fira Mono","Source Code Pro",monospace; letter-spacing:-0.0625rem; word-spacing:-0.125rem; margin:0px 0px 1.5rem; padding:0.75rem; background:rgb(255,255,255); border-color:rgb(217,217,217)'> 
  <span class="type" style="color:rgb(102,153,51)">bool</span>  
  <span class="methodname"><span style="color:rgb(51,102,153)">error_log</span></span> (  
  <span class="methodparam"><span class="type" style="color:rgb(102,153,51)">string</span> <code class="parameter" style='font-size:1rem; line-height:1.5rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153); letter-spacing:-0.0625rem; word-spacing:-0.125rem; margin:0px'>$message</code></span> [,  
  <span class="methodparam"><span class="type" style="color:rgb(102,153,51)">int</span> <code class="parameter" style='font-size:1rem; line-height:1.5rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153); letter-spacing:-0.0625rem; word-spacing:-0.125rem; margin:0px'>$message_type</code><span class="initializer" style="color:rgb(153,51,102)"> = 0</span></span> [,  
  <span class="methodparam"><span class="type" style="color:rgb(102,153,51)">string</span> <code class="parameter" style='font-size:1rem; line-height:1.5rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153); letter-spacing:-0.0625rem; word-spacing:-0.125rem; margin:0px'>$destination</code></span> [,  
  <span class="methodparam"><span class="type" style="color:rgb(102,153,51)">string</span> <code class="parameter" style='font-size:1rem; line-height:1.5rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153); letter-spacing:-0.0625rem; word-spacing:-0.125rem; margin:0px'>$extra_headers</code></span> ]]] ) 
 </div> 
 <p class="para rdfs-comment" style="margin-top:0px; margin-bottom:1.5rem">把错误信息发送到 web 服务器的错误日志，或者到一个文件里。</p> 
</div> 
<div class="refsect1 parameters" id="refsect1-function.error-log-parameters" style='margin-bottom:3rem; color:rgb(51,51,51); font-family:"Fira Sans","Source Sans Pro",Helvetica,Arial,sans-serif; font-size:16px; background-color:rgb(242,242,242)'> 
 <h4 class="title" style="line-height:3rem; margin:0px 0px 1.5rem; overflow:hidden; font-size:1.25rem; font-weight:500; color:rgb(121,56,98); position:relative; clear:both"> 参数</h4> 
 <p class="para" style="margin-top:0px; margin-bottom:1.5rem"></p> 
 <dl style="margin-bottom:0px"> 
   
   <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>message</code> 
   
  <dd style="margin:0px 0px 1.5rem; padding:0px 1.5rem"> 
   <p class="para" style="margin-top:0px; margin-bottom:1.5rem">应该被记录的错误信息。</p> 
  </dd> 
   
   <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>message_type</code> 
   
  <dd style="margin:0px 0px 1.5rem; padding:0px 1.5rem"> 
   <p class="para" style="margin-top:0px; margin-bottom:1.5rem">设置错误应该发送到何处。可能的信息类型有以下几个：</p> 
   <p class="para" style="margin-top:0px; margin-bottom:1.5rem"></p> 
   <table class="doctable table " style="border-collapse:collapse; border-spacing:0px; margin:0px 0px 1.5rem; width:979px; border-color:rgb(204,204,204)"><caption> 
     <span style="font-weight:bolder"><span class="function"><span style="font-weight:bolder">error_log()</span></span> 日志类型</span> 
    </caption><tbody class="tbody"><tr style="border:1px solid rgb(204,204,204); background-color:rgb(255,255,255)"><td style="vertical-align:top; padding:0.25rem 0.5rem">0</td><td style="vertical-align:top; padding:0.25rem 0.5rem"><code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>message</code> 发送到 PHP 的系统日志，使用 操作系统的日志机制或者一个文件，取决于 <a target="_blank" href="http://php.net/manual/zh/errorfunc.configuration.php#ini.error-log" rel="nofollow noopener noreferrer" class="link" style="border-bottom:1px solid; color:rgb(51,102,153)">error_log</a> 指令设置了什么。 这是个默认的选项。</td></tr><tr style="border:1px solid rgb(204,204,204); background-color:rgb(230,230,230)"><td style="vertical-align:top; padding:0.25rem 0.5rem">1</td><td style="vertical-align:top; padding:0.25rem 0.5rem"><code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>message</code> 发送到参数 <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>destination</code> 设置的邮件地址。 第四个参数 <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>extra_headers</code> 只有在这个类型里才会被用到。</td></tr><tr style="border:1px solid rgb(204,204,204); background-color:rgb(255,255,255)"><td style="vertical-align:top; padding:0.25rem 0.5rem">2</td><td style="vertical-align:top; padding:0.25rem 0.5rem">不再是一个选项。</td></tr><tr style="border:1px solid rgb(204,204,204); background-color:rgb(230,230,230)"><td style="vertical-align:top; padding:0.25rem 0.5rem">3</td><td style="vertical-align:top; padding:0.25rem 0.5rem"><code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>message</code> 被发送到位置为 <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>destination</code> 的文件里。 字符 <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>message</code> 不会默认被当做新的一行。</td></tr><tr style="border:1px solid rgb(204,204,204); background-color:rgb(255,255,255)"><td style="vertical-align:top; padding:0.25rem 0.5rem">4</td><td style="vertical-align:top; padding:0.25rem 0.5rem"><code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>message</code> 直接发送到 SAPI 的日志处理程序中。</td></tr></tbody></table> 
  </dd> 
   
   <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>destination</code> 
   
  <dd style="margin:0px 0px 1.5rem; padding:0px 1.5rem"> 
   <p class="para" style="margin-top:0px; margin-bottom:1.5rem">目标。它的含义描述于以上，由 <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>message_type</code> 参数所决定。</p> 
  </dd> 
   
   <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>extra_headers</code> 
   
  <dd style="margin:0px 0px 1.5rem; padding:0px 1.5rem"> 
   <p class="para" style="margin-top:0px; margin-bottom:1.5rem">额外的头。当 <code class="parameter" style='font-weight:700; font-size:1rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word; color:rgb(51,102,153)'>message_type</code> 设置为 <span style="">1</span> 的时候使用。 该信息类型使用了 <span class="function"><a target="_blank" href="http://php.net/manual/zh/function.mail.php" rel="nofollow noopener noreferrer" class="function" style="border-bottom:1px solid; color:rgb(51,102,153)">mail()</a></span> 的同一个内置函数。</p> 
  </dd> 
 </dl> 
</div> 
<div class="refsect1 returnvalues" id="refsect1-function.error-log-returnvalues" style='margin-bottom:3rem; color:rgb(51,51,51); font-family:"Fira Sans","Source Sans Pro",Helvetica,Arial,sans-serif; font-size:16px; background-color:rgb(242,242,242)'> 
 <h4 class="title" style="line-height:3rem; margin:0px 0px 1.5rem; overflow:hidden; font-size:1.25rem; font-weight:500; color:rgb(121,56,98); position:relative; clear:both"> 返回值</h4> 
 <p class="para" style="margin-top:0px; margin-bottom:1.5rem">成功时返回 <span style=""><code style='font-weight:700; font-size:0.875rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word'>TRUE</code></span>， 或者在失败时返回 <span style=""><code style='font-weight:700; font-size:0.875rem; line-height:1.375rem; font-family:"Fira Mono","Source Code Pro",monospace; word-wrap:break-word'>FALSE</code></span>。</p> 
</div> 
<br> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fb15aa88e939aa40b5d5f5c4705d327d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">五种使用python储存数据的方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/79b65dcf8d378832b77899419fb0841d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Nodejs学习（六）--异步流控制</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>