<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>自制ST-LINK V2 ，ST-LINK 固件 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="自制ST-LINK V2 ，ST-LINK 固件" />
<meta property="og:description" content="目的：
1.自己制作一个ST-LINK V2
2.学会使用 flash_loader_demo_v2.8.0 通过MCU的UART口烧录程序。
目录
一.步骤：
二.材料：
三.操作步骤
3.1 : ST LINK V2 原理图，接口部分
3.2 ：升级ST LINK V2 的固件
四：连接编译器下载程序
参考资料：ST-LINK 接口定义
相关固件和原理图可以到以下链接下载：
https://download.csdn.net/download/yutian0606/87713350
一.步骤： 1：改现成的 STM32F103C8T6 最小系统核心板，核心板 PB12 与 PB14之间用 100R电阻连接。
2：给核心板烧录 固件 V2.J16.S4.hex ，这个版本较老，需要再升级。
3：升级 ST LINK V2 的固件。
4：工具，需要电烙铁，USB 转 TTL 工具。
二.材料： 硬件：STM32F103C8T6 最小系统板一个,用来改 ST LINK V2 ,省去自己打PCB，焊接的麻烦，某宝12RMB左右买一个包邮。
软件：flash_loader_demo_v2.8.0，用来烧录核心板的第一版 固件，通过uart串口烧录。
2：STM32 ST-LINK Utility ,用来升级ST LINK V2 的固件
软件包：STM32 ST-LINK Utility v4.2.0 setup
ST LINK V2 资料：包含" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/8f4cf04cd3dd1bd63e975b38c8955c4c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-21T21:28:35+08:00" />
<meta property="article:modified_time" content="2023-04-21T21:28:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">自制ST-LINK V2 ，ST-LINK 固件</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>目的：</p> 
<p>1.自己制作一个ST-LINK V2</p> 
<p>2.学会使用 flash_loader_demo_v2.8.0 通过MCU的UART口烧录程序。</p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80.%E6%AD%A5%E9%AA%A4%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%B8%80.%E6%AD%A5%E9%AA%A4%EF%BC%9A" rel="nofollow">一.步骤：</a></p> 
<p id="%E4%BA%8C.%E6%9D%90%E6%96%99%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C.%E6%9D%90%E6%96%99%EF%BC%9A" rel="nofollow">二.材料：</a></p> 
<p id="%E4%B8%89.%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4-toc" style="margin-left:0px;"><a href="#%E4%B8%89.%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4" rel="nofollow">三.操作步骤</a></p> 
<p id="3.1%20%3A%20ST%20LINK%20V2%20%E5%8E%9F%E7%90%86%E5%9B%BE%EF%BC%8C%E6%8E%A5%E5%8F%A3%E9%83%A8%E5%88%86-toc" style="margin-left:40px;"><a href="#3.1%20%3A%20ST%20LINK%20V2%20%E5%8E%9F%E7%90%86%E5%9B%BE%EF%BC%8C%E6%8E%A5%E5%8F%A3%E9%83%A8%E5%88%86" rel="nofollow">3.1 : ST LINK V2 原理图，接口部分</a></p> 
<p id="%C2%A03.2%20%EF%BC%9A%E5%8D%87%E7%BA%A7ST%20LINK%20V2%20%E7%9A%84%E5%9B%BA%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%C2%A03.2%20%EF%BC%9A%E5%8D%87%E7%BA%A7ST%20LINK%20V2%20%E7%9A%84%E5%9B%BA%E4%BB%B6" rel="nofollow"> 3.2 ：升级ST LINK V2 的固件</a></p> 
<p id="%E5%9B%9B%EF%BC%9A%E8%BF%9E%E6%8E%A5%E7%BC%96%E8%AF%91%E5%99%A8%E4%B8%8B%E8%BD%BD%E7%A8%8B%E5%BA%8F-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%EF%BC%9A%E8%BF%9E%E6%8E%A5%E7%BC%96%E8%AF%91%E5%99%A8%E4%B8%8B%E8%BD%BD%E7%A8%8B%E5%BA%8F" rel="nofollow">四：连接编译器下载程序</a></p> 
<p id="%C2%A0%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99%EF%BC%9AST-LINK%20%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99%EF%BC%9AST-LINK%20%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89" rel="nofollow"> 参考资料：ST-LINK 接口定义</a></p> 
<hr id="hr-toc"> 
<p>相关固件和原理图可以到以下链接下载：</p> 
<p><a href="https://download.csdn.net/download/yutian0606/87713350" title="https://download.csdn.net/download/yutian0606/87713350">https://download.csdn.net/download/yutian0606/87713350</a></p> 
<h2 id="%E4%B8%80.%E6%AD%A5%E9%AA%A4%EF%BC%9A">一.步骤：</h2> 
<p>1：改现成的 STM32F103C8T6 最小系统核心板，核心板 PB12 与 PB14之间用 100R电阻连接。</p> 
<p>2：给核心板烧录 固件 V2.J16.S4.hex ，这个版本较老，需要再升级。</p> 
<p>3：升级 ST LINK V2 的固件。</p> 
<p>4：工具，需要电烙铁，USB 转 TTL 工具。</p> 
<h2 id="%E4%BA%8C.%E6%9D%90%E6%96%99%EF%BC%9A">二.材料：</h2> 
<p>硬件：STM32F103C8T6 最小系统板一个,用来改 ST LINK V2 ,省去自己打PCB，焊接的麻烦，某宝12RMB左右买一个包邮。</p> 
<p><img alt="" height="286" src="https://images2.imgbox.com/62/c7/d65HLueI_o.png" width="415"></p> 
<p> 软件：flash_loader_demo_v2.8.0，用来烧录核心板的第一版 固件，通过uart串口烧录。</p> 
<p><img alt="" height="620" src="https://images2.imgbox.com/9a/c7/RIMrZexH_o.png" width="402"></p> 
<p> 2：STM32 ST-LINK Utility ,用来升级ST LINK V2 的固件</p> 
<p>软件包：STM32 ST-LINK Utility v4.2.0 setup</p> 
<p><img alt="" height="704" src="https://images2.imgbox.com/07/18/esKRESkg_o.png" width="823"></p> 
<p>ST LINK V2 资料：包含</p> 
<p>1：ST LINK V2 原理图</p> 
<p>2：ST-Link固件V2.J16.S4.hex 固件，注意：这个固件版本比较老，测试时编译器不支持，需要先烧录这个版本固件，再升级固件。</p> 
<p>资料包：</p> 
<p>ST-Link原理图和固件-ST-Link固件V2.J16.S4..zip</p> 
<p>ST-Link V2.1官方图纸.pdf</p> 
<p>STLinkV2.J28.M18_固件.zip</p> 
<h2 id="%E4%B8%89.%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4">三.操作步骤</h2> 
<h3 id="3.1%20%3A%20ST%20LINK%20V2%20%E5%8E%9F%E7%90%86%E5%9B%BE%EF%BC%8C%E6%8E%A5%E5%8F%A3%E9%83%A8%E5%88%86">3.1 : ST LINK V2 原理图，接口部分</h3> 
<p>1: 按图纸把核心板 PB12 与 PB14之间用 100R电阻连接。</p> 
<p><img alt="" height="734" src="https://images2.imgbox.com/dc/1c/otgumLOk_o.png" width="924"></p> 
<p></p> 
<p>2:给核心板烧录第一版 ST LINK 固件</p> 
<p>把 PA9--RX,PA10--TX 接到 USB TO UART 转接板的 RX TX 上 （连接不上就交换一下试试），BOOT0 上拉，BOOT1下拉。</p> 
<p>接好后按一下核心板的复位键，再使用如下软件烧录,</p> 
<p>选择对应串口</p> 
<p><img alt="" height="641" src="https://images2.imgbox.com/57/71/wrHKpqx1_o.png" width="532"></p> 
<p> <img alt="" height="641" src="https://images2.imgbox.com/33/cc/NEIymA7y_o.png" width="532"></p> 
<p> 选择固件</p> 
<p><img alt="" height="641" src="https://images2.imgbox.com/5e/6d/OVszzjsX_o.png" width="532"></p> 
<p> 绿色，烧录完成</p> 
<p><img alt="" height="641" src="https://images2.imgbox.com/58/21/OfUVARwx_o.png" width="532"></p> 
<h3 id="%C2%A03.2%20%EF%BC%9A%E5%8D%87%E7%BA%A7ST%20LINK%20V2%20%E7%9A%84%E5%9B%BA%E4%BB%B6"> 3.2 ：升级ST LINK V2 的固件</h3> 
<p>用USB线连接核心板的USB接口到 电脑。</p> 
<p>打开软件：STM32 ST-LINK Utility</p> 
<p><img alt="" height="136" src="https://images2.imgbox.com/f7/28/nhwUqOzW_o.png" width="109"></p> 
<p><img alt="" height="238" src="https://images2.imgbox.com/ff/79/JM5kPqxR_o.png" width="764"></p> 
<p>注意：</p> 
<p>1：去掉核心板的BOOT0的上拉，再按几次复位。</p> 
<p>2：点线图的 ① 连接，连接上后会出现 待升级的固件版本和②位置的yes。连接不上就插拔几次USB试试。</p> 
<p><img alt="" height="430" src="https://images2.imgbox.com/dc/b3/sBwVAlrn_o.png" width="608"></p> 
<p> 升级成功</p> 
<p><img alt="" height="486" src="https://images2.imgbox.com/09/82/Z8BRGhl7_o.png" width="610"></p> 
<h2 id="%E5%9B%9B%EF%BC%9A%E8%BF%9E%E6%8E%A5%E7%BC%96%E8%AF%91%E5%99%A8%E4%B8%8B%E8%BD%BD%E7%A8%8B%E5%BA%8F">四：连接编译器下载程序</h2> 
<p>4.1 需要把 待烧录的STM32F103 的 PA13(SWDIO), PA14(SWCLK) ,GND,分别接到</p> 
<p>这里,我是用开发板做的测试，按如下对应关系连接.</p> 
<table><tbody><tr><td> <p>开发板</p> </td><td> <p>ST LINK V2</p> </td></tr><tr><td> <p>PA13(SWDIO)</p> </td><td> <p>PB14</p> </td></tr><tr><td> <p>PA14(SWCLK)</p> </td><td> <p>PB13</p> </td></tr><tr><td> <p>GND</p> </td><td> <p>GND</p> </td></tr></tbody></table> 
<p> 用 RT-Thread Studio 下载程序测试。</p> 
<p><img alt="" height="873" src="https://images2.imgbox.com/d8/fb/1DjoZYNC_o.png" width="632"></p> 
<h2 id="%C2%A0%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99%EF%BC%9AST-LINK%20%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"> 参考资料：ST-LINK 接口定义</h2> 
<p><img alt="" height="788" src="https://images2.imgbox.com/f2/ed/ODJ2faJ7_o.png" width="701"></p> 
<p> <img alt="" height="455" src="https://images2.imgbox.com/cd/ed/HcOq3YSJ_o.png" width="912"></p> 
<p></p> 
<p><img alt="" height="421" src="https://images2.imgbox.com/11/81/XDFe9kdP_o.png" width="772"></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9ae96b279bb36f6dc0219e66b98ffa4c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ROS-kinetic中Gazebo中的机械臂仿真报错解决</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1b62ec1b03b62b548c1accd54d50f47d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux笔记（二）重定向详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>