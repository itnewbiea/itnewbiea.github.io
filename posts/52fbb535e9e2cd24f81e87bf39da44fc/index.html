<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Node.js Express框架 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Node.js Express框架" />
<meta property="og:description" content="一、Express 介绍
Express是一个最小的，灵活的Node.js Web应用程序框架，它提供了一套强大的功能来开发Web和移动应用程序。 它有助于基于Node Web应用程序的快速开发。Express框架的核心功能是：
允许设立中间件响应HTTP请求定义了用于执行基于HTTP方法和URL不同动作的路由表允许动态渲染基于参数传递给模板HTML页面 二、安装Express
安装Express 框架全局使用NPM，以便它可以被用来使用Node终端创建Web应用程序。
$ npm install -g express-generator
上面的命令在本地node_modules目录保存安装，并创建一个目录express在node_modules里边。还有，应该使用express安装以下几个重要的模块：
body-parser ：这是一个Node.js中间件处理JSON，Raw，文本和URL编码的表单数据multer ：这是一个Node.js的中间件处理multipart/form-datacookie-parser ： 解析Cookie头和填充req.cookies通过cookie名字键控对象 $ npm install body-parser --save $ npm install cookie-parser --save $ npm install multer --save
三、Express创建项目
一个非常基本的Express应用程序，它会启动服务器，并侦听端口3000等待连接。这个应用程序使用&#34;Hello World! &#34;回应！为请求网页。 对于所有其他路径，这将响应一个404表示未找到。
1、进入工作目录（自定义）
2、执行创建命令，创建一个名为hello的Express项目
express hello
表示安装成功
3、进入hello目录安装依赖包：
F:\hello&gt; npm install
4、安装完成后，执行命令启动应用：
F:\hello&gt;npm start
5、在浏览器中输入http://localhost:3000/
四、Express项目结构分析
1、bin：启动配置文件，在www 里修改运行端口号
2、node_modules：存放所有的项目依赖库，就像java存放架包
3、public：用于存放静态资源文件 图片，CSS，JAVASCRIPT文件..
4、routers：路由文件相当于springmvc中的Controller，ssh中的action
5、views：存放页面的地方
6、package.json：项目依赖配置及开发者信息。
7、app.js：应用核心配置文件，项目入口
五、app.js配置详解
app.js文件相当于项目启动的主入口文件，包含以下公共方法和服务器配置信息等
var createError = require(&#39;http-errors&#39;);//http错误处理模块 var express = require(&#39;express&#39;);//引入Express var path = require(&#39;path&#39;);//引入path var cookieParser = require(&#39;cookie-parser&#39;);//引入cookie处理对象 var logger = require(&#39;morgan&#39;);//引入日志模块 //引入路由目录中的index." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/52fbb535e9e2cd24f81e87bf39da44fc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-10T13:50:54+08:00" />
<meta property="article:modified_time" content="2023-11-10T13:50:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Node.js Express框架</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:left;"><strong><strong>一、</strong></strong><strong><strong>Express 介绍</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>       </strong>Express是一个最小的，灵活的Node.js Web应用程序框架，它提供了一套强大的功能来开发Web和移动应用程序。 它有助于基于Node Web应用程序的快速开发。Express框架的核心功能是：</p> 
<ul><li style="text-align:left;">允许设立中间件响应HTTP请求</li><li style="text-align:left;">定义了用于执行基于HTTP方法和URL不同动作的路由表</li><li style="text-align:left;">允许动态渲染基于参数传递给模板HTML页面</li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>二、安装Express</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">        安装Express 框架全局使用NPM，以便它可以被用来使用Node终端创建Web应用程序。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#0000ff;"><strong>               $ npm install </strong></span></strong><strong><span style="color:#0000ff;"><strong>-g </strong></span></strong><strong><span style="color:#0000ff;"><strong>express</strong></span></strong><strong><span style="color:#0000ff;"><strong>-generator</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">       上面的命令在本地node_modules目录保存安装，并创建一个目录express在node_modules里边。还有，应该使用express安装以下几个重要的模块：</p> 
<ol><li>body-parser ：这是一个Node.js中间件处理JSON，Raw，文本和URL编码的表单数据</li><li>multer ：这是一个Node.js的中间件处理multipart/form-data</li><li>cookie-parser ： 解析Cookie头和填充req.cookies通过cookie名字键控对象</li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#0000ff;"><strong>               $ npm install body-parser --save </strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#0000ff;"><strong>               $ npm install cookie-parser --save </strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#0000ff;"><strong>               $ npm install multer --save</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>三、Express创建项目</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>       </strong>一个非常基本的Express应用程序，它会启动服务器，并侦听端口3000等待连接。这个应用程序使用"Hello World! "回应！为请求网页。 对于所有其他路径，这将响应一个404表示未找到。</p> 
<p style="margin-left:.0001pt;text-align:left;">       1、进入工作目录（自定义）</p> 
<p style="margin-left:.0001pt;text-align:left;">       2、执行创建命令，创建一个名为hello的Express项目</p> 
<p style="margin-left:.0001pt;text-align:left;">              <strong><span style="color:#fe2c24;">express hello</span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/5d/b2/udmhpvYn_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;">       表示安装成功</p> 
<p style="margin-left:.0001pt;text-align:left;">       3、进入hello目录安装依赖包：</p> 
<p style="margin-left:.0001pt;text-align:left;">             <strong><span style="color:#fe2c24;">F:\hello&gt; npm  install</span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">       4、安装完成后，执行命令启动应用：</p> 
<p style="margin-left:.0001pt;text-align:left;">             <strong><span style="color:#fe2c24;">F:\hello&gt;npm  start</span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">       5、在浏览器中输入http://localhost:3000/</p> 
<p class="img-center"><img alt="" height="318" src="https://images2.imgbox.com/e3/ff/7Tf0l20O_o.png" width="521"></p> 
<p> <strong><strong>四、Express项目结构分析</strong></strong></p> 
<p><img alt="" height="996" src="https://images2.imgbox.com/26/02/Y1aBJsB0_o.png" width="1048"></p> 
<p style="margin-left:.0001pt;text-align:left;">           1、bin：启动配置文件，在www 里修改运行端口号<br>            2、node_modules：存放所有的项目依赖库，就像java存放架包<br>            3、public：用于存放静态资源文件 图片，CSS，JAVASCRIPT文件..<br>            4、routers：路由文件相当于springmvc中的Controller，ssh中的action<br>            5、views：存放页面的地方<br>            6、package.json：项目依赖配置及开发者信息。<br>            7、app.js：应用核心配置文件，项目入口</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>五、app.js配置详解</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>       app.js文件相当于项目启动的主入口文件，包含以下公共方法和服务器配置信息等</strong></strong></p> 
<pre><code>var createError = require('http-errors');//http错误处理模块
var express = require('express');//引入Express
var path = require('path');//引入path
var cookieParser = require('cookie-parser');//引入cookie处理对象
var logger = require('morgan');//引入日志模块

//引入路由目录中的index.js文件
var indexRouter = require('./routes/index');
//引入路由目录中的users.js文件
var usersRouter = require('./routes/users');
var app = express(); //创建express应用
// view engine setup
app.set('views', path.join(__dirname, 'views')); //定义页面目录
app.set('view engine', 'jade');//定义页面模板引擎
app.use(logger('dev'));//定义日志打印级别
app.use(express.json());//定义json格式处理数据
//定义使用urlencode处理数据及querystring模块解析数据
app.use(express.urlencoded({ extended: false }));
app.use(cookieParser());//定义使用cookie处理对象
app.use(express.static(path.join(__dirname, 'public')));//定义静态资源目录public
app.use('/', indexRouter);//定义指向index.js的路由
app.use('/users', usersRouter);//定义指向users.js的路由
// 定义404错误处理
app.use(function(req, res, next) {
  next(createError(404));
});
// 定义其他错误处理
app.use(function(err, req, res, next) {
  // 设置 locals, 只在开发环境生效
  res.locals.message = err.message;
  res.locals.error = req.app.get('env') === 'development' ? err : {};
  // 返回错误http状态码
  res.status(err.status || 500);
  res.render('error');//渲染错误页面
});
module.exports = app; //导出app</code></pre> 
<p style="margin-left:.0001pt;text-align:left;">一个页面的运行过程和逻辑大致分为三步，路由中间件(index.js)的书写同时中间件的模板(index.ejs)要写好、最后由app.js配置和调用路由中间件。</p> 
<p style="margin-left:.0001pt;text-align:left;">      1、app.js配置</p> 
<p style="margin-left:.0001pt;text-align:left;">      2、routes 调用路由级中间件</p> 
<p style="margin-left:.0001pt;text-align:left;">      3、views 模板渲染</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>六、Express路由：</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>       </strong>路由用于确定应用程序如何响应对特定端点的客户机请求，包含一个 URI（或路径）和一个特定的 HTTP 请求方法（GET、POST 等）。</p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;">    每个路由可以具有一个或多个处理程序函数，这些函数在路由匹配时执行。它的使用形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:center;"><span style="background-color:#fbebd4;"><strong><span style="background-color:#fbebd4;"><span style="color:#000000;"><strong>app.</strong></span></span></strong><strong><span style="background-color:#fbebd4;"><span style="color:#000000;"><strong>method</strong></span></span></strong><strong><span style="background-color:#fbebd4;"><span style="color:#000000;"><strong>(</strong></span></span></strong><strong><span style="background-color:#fbebd4;"><span style="color:#000000;"><strong>path</strong></span></span></strong><strong><span style="background-color:#fbebd4;"><span style="color:#000000;"><strong>, </strong></span></span></strong><strong><span style="background-color:#fbebd4;"><span style="color:#000000;"><strong>handler</strong></span></span></strong><strong><span style="background-color:#fbebd4;"><span style="color:#000000;"><strong>)</strong></span></span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>          app：</strong></strong>是 express 的实例。<br><strong><strong>    method：</strong></strong>是 HTTP 请求方法。<br><strong><strong>         path：</strong></strong>是服务器上的路径。<br><strong><strong>    handler：</strong></strong>是在路由匹配时执行的函数。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>注意</strong></span></strong><strong><span style="color:#ff0000;"><strong>：</strong></span></strong>如果有多个路由处理程序，那么不是最后一个路由的情况下，其参数要有next：</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="281" src="https://images2.imgbox.com/f4/0c/eghVwbZP_o.png" width="416"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;">       next() 函数不是 Node.js 或 Express API 的一部分，而是传递给中间件函数的第三自变量。next() 函数可以命名为任何名称，但是按约定，始终命名为“next”。为了避免混淆，请始终使用此约定。</p> 
<p style="margin-left:.0001pt;text-align:justify;">       next函数主要负责将控制权交给下一个中间件，如果当前中间件没有终结请求，并且next没有被调用，那么请求将被挂起，后边定义的中间件将得不到被执行的机会。</p> 
<h3 style="text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#4f4f4f;">七、</span></span></strong><strong><strong>Express的页面</strong></strong></span></h3> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>      1、更换模板引擎</strong></strong></p> 
<p style="margin-left:0;text-align:left;">          Express默认的模板引擎是jade，为了方便用户开发，可以把它替换成更简洁、更高效的art-template</p> 
<p style="margin-left:0;text-align:left;">         (1)安装art-template依赖包</p> 
<p style="margin-left:0;text-align:left;">              <span style="color:#ff0000;">npm  install  -S  art-template</span></p> 
<p style="margin-left:0;text-align:left;">              <span style="color:#ff0000;">npm  install  -S   express-art-template</span></p> 
<p style="margin-left:0;text-align:left;">        (2)修改app.js文件</p> 
<p style="margin-left:0;text-align:left;">              <span style="color:#ff0000;">app.engine(‘.html’,requare(‘express-art-template’)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#ff0000;">              app.set(‘view engine’,’html’)</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>2、渲染数据到页面 </strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>       </strong>在开发网页的时候，网页上的内容往往不是一成不变的，而是根据服务端内容变换的，这就需要将数据渲染到页面上。即调用response的render方法向页面传递数据，在页面中使用<strong><span style="color:#ff0000;"><strong>{<!-- -->{ 变量名 }}</strong></span></strong>接收服务端的数据</p> 
<pre><code>router.get('/post',function(req,res){
  res.render('post',{
    title:'孔子学院',
    name:'张三',
    age:31,
   happy:true
  })
})</code></pre> 
<p> 前端页面：</p> 
<pre><code>     &lt;p&gt;
         姓名：{<!-- -->{name}}
         &lt;br&gt;&lt;br&gt;
         年龄：{<!-- -->{age}}
     &lt;/p&gt;</code></pre> 
<p>        <span style="background-color:#ffffff;"><strong><strong>(1)条件渲染：根据不同的情况展示不同的页面</strong></strong></span></p> 
<pre><code>&lt;h2&gt;{<!-- -->{title}}&lt;/h2&gt;
   &lt;!-- 判断年龄小于30--&gt;
   {<!-- -->{ if age&lt;30 }}
       &lt;p&gt;大家好，我是{<!-- -->{name}},我今年{<!-- -->{age}}岁，很高兴认识大家!&lt;/p&gt;
   {<!-- -->{ /if }}
   &lt;!-- 判断年龄大于等于30 --&gt;
   {<!-- -->{ if age&gt;30 }}
       &lt;p&gt;大家好，我是{<!-- -->{name}},很高兴认识大家!&lt;/p&gt;
   {<!-- -->{ /if }}</code></pre> 
<p>         <strong><strong>(2)嵌套条件渲染</strong></strong></p> 
<pre><code>   &lt;h2&gt;{<!-- -->{title}}&lt;/h2&gt;
   &lt;!-- 判断年龄小于30--&gt;
   {<!-- -->{ if age&lt;30 }}
      &lt;p&gt;大家好，我是{<!-- -->{name}},我今年{<!-- -->{age}}岁，很高兴认识大家!&lt;/p&gt;
   {<!-- -->{ /if }}

   &lt;!-- 判断年龄大于等于30 --&gt;
   {<!-- -->{ if age&gt;30 }}
      &lt;p&gt;大家好，我是{<!-- -->{name}}
          &lt;!-- 判断happy字段是否为真--&gt;
          {<!-- -->{ if happy }}
            &lt;span&gt;很高兴认识大家!&lt;/span&gt;
          {<!-- -->{ /if }}
      &lt;/p&gt;
   {<!-- -->{ /if }}</code></pre> 
<p>         <strong><strong>(3)循环渲染：</strong></strong></p> 
<pre><code>router.get('/post',function(req,res){
  res.render('post',{
    title:'德云IT学院',
    list:[{
      id:1,
      content:'今天天气不错'
    },{
      id:2,
      content:'昨天几点睡觉的?'
    },{
      id:3,
      content:'工作好累'
}],
  });
});</code></pre> 
<p>页面：</p> 
<pre><code>   &lt;h2&gt;{<!-- -->{title}}&lt;/h2&gt;
   {<!-- -->{ each list as item}}
      &lt;p&gt;id:{<!-- -->{item.id}},内容:{<!-- -->{item.content}}&lt;/p&gt;
   {<!-- -->{ /each }}</code></pre> 
<p>         <strong><strong>(4)循环渲染结合条件渲染：</strong></strong></p> 
<pre><code>router.get('/post',function(req,res){
  res.render('post',{
    title:'德云IT学院',
    list:[{
      id:1,
      content:'今天天气不错'
    },{
      id:2,
      content:'昨天几点睡觉的?'
    },{
      id:3,
      content:'工作好累'
    }],
    targetId:2
  });
});</code></pre> 
<p>页面：</p> 
<pre><code>   &lt;h2&gt;{<!-- -->{title}}&lt;/h2&gt;
   {<!-- -->{ each list as item}}
     {<!-- -->{ if item.id === targetId}}
       &lt;p style="color:#f00"&gt;id:{<!-- -->{item.id}},内容:{<!-- -->{item.content}}&lt;/p&gt;
     {<!-- -->{ else }}
       &lt;p&gt;id:{<!-- -->{item.id}},内容:{<!-- -->{item.content}}&lt;/p&gt;
     {<!-- -->{ /if }}
   {<!-- -->{ /each }}</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>三、请求对象Request</strong></strong></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>       req.params</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">一个数组，包含命过名的路由参数</span></span></span></p> 
<pre><code>&lt;a href="http://localhost:8089/test/12/15"&gt;params&lt;/a&gt;</code></pre> 
<p>后台：</p> 
<pre><code>router.get('/post/:id/:userid',function(req,res){
  res.send(req.params)
});</code></pre> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>     req.query</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">get请求的查询字符串参数</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>     req.body</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">post的请求体内容</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>     req.cookies</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">一个对象，包含从客户端传递来的cookie信息</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>     req.headers</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">一个对象，从客户端接到的请求抱头</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>     req.path</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">请求路径，不包含协议，端口，查询字符串</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>     req.host</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">主机名</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>     req.xhr</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">bool</span></span><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">ean</span></span><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">值，判断请求是否是ajax请求</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>     req.protocol</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">用于标示协议http，https</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>     req.url</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">path+查询字符串</span></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>四、响应对象Response</strong></strong></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>       res.status(code)</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">设置http状态码，express默认是200。可利用此函数返回404或者500页面，重定向的话用redirect()</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>       res.send(options)：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">向客户端发送响应数据，可以是一个对象(key-value)</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>       res.render(视图名,数据)：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">页面的文件名(不带扩展名),“数据”是向页面发送的数据</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>       res.cookie(name,value,[options])</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">：</span></span><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">设置cookie值</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>       res.clearCookie(name,[options])</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">：</span></span><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">清除cookie值</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>       res.redirect([status],url)</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">重定向浏览器，默认状态</span></span><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">码</span></span><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">：302</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">       url是路由里面的路径而不是视图里面的路径</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>       res.json([status],json)</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">向客户端发送json数据及其可选的状态</span></span><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">码</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>       res.jsonp([status],jsonp)</strong></span></span></strong></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>       res.send([status],body)</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">向客户端发送响应及其状态吗</span></span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>       res.type(type)</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;"><strong>：</strong></span></span></strong><span style="background-color:#ffffff;"><span style="color:#3f3f3f;">相当于res.set(‘Content-Type‘,‘type‘)</span></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>五、get请求：</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">一般在网站开发中，get都用作数据获取和查询，类似于数据库中的查询操作，当服务器解析前台资源后即传输相应内容；而查询字符串是在URL上进行的，形如：<br>            <a href="http://localhost:8080/login?goods1=0001&amp;goods2=0002" rel="nofollow" title="http://localhost:8080/login?goods1=0001&amp;goods2=0002">http://localhost:8080/login?goods1=0001&amp;goods2=0002</a></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><span style="color:#4d4d4d;"><strong>  （1）GET 请求的特点：</strong></span></span></strong></p> 
<ul><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">GET 请求可被缓存</span></span></li><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">GET 请求保留在浏览器历史记录中</span></span></li><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">GET 请求可被收藏为书签</span></span></li><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">GET 请求不应在处理敏感数据时使用</span></span></li><li style="text-align:left;"><strong><span style="background-color:#ffffff;"><span style="color:#4d4d4d;"><strong>GET 请求有长度限制</strong></span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#4d4d4d;"><strong>：</strong></span></span></strong></li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">          IE：对URL的最大限制为2083个字符，若超出这个数字，提交按钮没有任何反应。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">         Firefox：对Firefox浏览器URL的长度限制为：65536个字符。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">          Safari：URL最大长度限制为80000个字符。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">         Opera：URL最大长度限制为190000个字符。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">          Google(chrome)：URL最大长度限制为8182个字符。</span></span></p> 
<ul><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#4d4d4d;">GET 请求只应当用于取回数据</span></span></li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><span style="color:#4d4d4d;"><strong>   (2)示例</strong></span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>        在views下创建login.html文件</strong></span></span></strong></p> 
<pre><code>&lt;form action="http://localhost:8082/login" method="get"&gt;
    用户：
    &lt;input type="text" name="user" id="user" placeholder="用户名"/&gt;
    &lt;br&gt;
    密码：
    &lt;input type="password" name="password" id="password" placeholder="密码"/&gt;
    &lt;br&gt;
    &lt;input type="submit" value="提交"/&gt;
&lt;/form&gt;</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>        更改router下的index.js文件（路由文件）</strong></span></span></strong></p> 
<pre><code>var express = require('express');
var router = express.Router();

/* GET login page. */
router.get('/', function(req, res, next) {
  res.render('login');
});
/* 获取登录页面的参数 */
router.get('/login',function(req,res){
  console.log(req.query);
  res.send("登录路由，user为："+req.query.user+"==&gt;   password为："+req.query.password)
})
module.exports = router;</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>六、post请求：</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>      示例：</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>       </strong><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>在views下创建post.html文件</strong></span></span></strong></p> 
<pre><code>&lt;form action = "http://localhost:8082/add" method="POST"&gt;
        用户：&lt;input type="text" name = "userName"&gt; 
        &lt;br&gt;&lt;br&gt;
        密码：&lt;input type="password" name = "userPwd"&gt; 
        &lt;br&gt;&lt;br&gt;
        &lt;button type="submit"&gt;提交&lt;/button&gt;
&lt;/form&gt;</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>      配置router下的index.js文件（路由文件）</strong></span></span></strong></p> 
<pre><code>//获取post页面
router.get('/post',function(req,res,next){
  res.render('post')
})
//获取post方式的请求参数
router.post('/add',(req,res)=&gt;{
  res.send("登录路由，user为："+req.body.userName+"==&gt; password为："+req.body.userPwd)
})</code></pre> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;"><strong>附：</strong></span></span></strong><span style="background-color:#ffffff;">每次更改路由文件都要重新启动项目才能生效，这样开发效率不高。可以安装nodemon工具，在更改路由后就不用重新启动项目了</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><strong>1、安装nodemon工具</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;">      <strong><span style="color:#fe2c24;"> npm  install  -g  nodemon</span></strong></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><strong>2、修改项目根目录中的package.json文件</strong></span></strong></p> 
<pre><code>"scripts": {
    "start": "node ./bin/www"
  }</code></pre> 
<p>改为：</p> 
<pre><code>"scripts": {
    "start": "nodemon ./bin/www"
  }</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dbe171bad4b385e3c9d17af335c37c0f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java 算法篇-深入理解递归（递归实现：青蛙爬楼梯）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6bc014342c6e4fe8727a25c03986ed68/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在Python中读写csv文件时出现了乱码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>