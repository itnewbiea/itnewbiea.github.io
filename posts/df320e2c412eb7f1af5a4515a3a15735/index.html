<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>引导过程的解析以及如何利用systemd去管理nginx - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="引导过程的解析以及如何利用systemd去管理nginx" />
<meta property="og:description" content="bios加电自检------mbr--------grub-------加载内核文件------启动第一个进程
bios的主要作用：检测硬件是否正常，然后根据bios中的启动项设置，去找内核文件
boot开机启动项顺序，你可以把内核文件放在何处？
1.硬盘 2.移动设备（u盘、移动硬盘、光驱）3.网络启动
统一启动加载器(mbr grub)
mbr的前446个字节不是文件，而是二进制，去引导操作系统寻找内核文件，因为grub程序太大，第一扇区存不下所有的grub程序，所以分为2部分，知道硬件找到内核文件
grub 根据grub配置文件中记录的位置，去找到内核文件
加载内核：把内核运行在内存中
启动进程：启动第一个祖宗进程 pstree-p =====&gt;systemd
centos 6 ：init 普通用户为500以后
centos7：systemd 普通用户为1000以后
区别：init是串行启动后续的程序，一个一个按顺序启动
systemd 是并行启动的程序，全部一起启动
文字描述：加电后bios程序会自检硬件，硬件无故障后，会根据第一启动项去找内核，一般来说第一启动项是硬盘，找到硬盘后悔根据mbr的指引，找到完整的grub程序，再根据grub的配置文件找到内核文件的具体位置，然后将内核文件加载到内存中运行，内存加载好后会启动第一个程序。
按shit&#43; 移到boot里的顺序 systemd 是系统级的程序，代为管理系统上的服务程序，如果要用 就要手写
rpcbind 1.启动时，会监听111端口
2.没有启动
systemd 保姆级程序 代为管理服务程序
如是yum、rpm安装的软件可以直接使用systemctl去启动关闭、重启、开机自启等功能
如是编译安装，不可以使用systemctl命令去管理程序，需要手写配置文件
systemd unit（单元）systemd方便管理程序，将程序按照特定的功能，分成了很多单元，（服务单元、文件路径单元、挂载单元、、、、）
linux操作系统有运行级别
例如：init 0 关机 systemctl get -default 查看默认的运行级别
systemctl set-default 设置默认级别
去字符界面
runlevel 3 5 =====》 3是上一级别，5是当前级别 实验操作：
1.模拟破坏mbr 和分区表 然后修复
新建一块磁盘 将备份文件拷贝到新盘里
3 2 1 修复grub文件及程序
先模拟破坏grub.cfg配置文件
按住重新启动 并且立即按住esc 选择2 hard brive" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/df320e2c412eb7f1af5a4515a3a15735/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T18:29:15+08:00" />
<meta property="article:modified_time" content="2024-01-03T18:29:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">引导过程的解析以及如何利用systemd去管理nginx</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>bios加电自检------mbr--------grub-------加载内核文件------启动第一个进程</p> 
<p>bios的主要作用：检测硬件是否正常，然后根据bios中的启动项设置，去找内核文件</p> 
<p>boot开机启动项顺序，你可以把内核文件放在何处？</p> 
<p>1.硬盘  2.移动设备（u盘、移动硬盘、光驱）3.网络启动</p> 
<p>统一启动加载器(mbr   grub)</p> 
<p>mbr的前446个字节不是文件，而是二进制，去引导操作系统寻找内核文件，因为grub程序太大，第一扇区存不下所有的grub程序，所以分为2部分，知道硬件找到内核文件</p> 
<p>grub  根据grub配置文件中记录的位置，去找到内核文件</p> 
<p><img alt="" height="311" src="https://images2.imgbox.com/4f/4e/35jKOYoP_o.png" width="1200"></p> 
<p>加载内核：把内核运行在内存中</p> 
<p>启动进程：启动第一个祖宗进程  pstree-p =====&gt;systemd</p> 
<blockquote> 
 <p>centos 6 ：init  普通用户为500以后</p> 
 <p>centos7：systemd   普通用户为1000以后</p> 
 <p>区别：init是串行启动后续的程序，一个一个按顺序启动</p> 
 <p>systemd 是并行启动的程序，全部一起启动</p> 
</blockquote> 
<p>文字描述：加电后bios程序会自检硬件，硬件无故障后，会根据第一启动项去找内核，一般来说第一启动项是硬盘，找到硬盘后悔根据mbr的指引，找到完整的grub程序，再根据grub的配置文件找到内核文件的具体位置，然后将内核文件加载到内存中运行，内存加载好后会启动第一个程序。</p> 
<p>按shit+  移到boot里的顺序  </p> 
<p></p> 
<p>systemd  是系统级的程序，代为管理系统上的服务程序，如果要用 就要手写</p> 
<p>rpcbind  1.启动时，会监听111端口</p> 
<p>               2.没有启动</p> 
<p></p> 
<p>systemd  保姆级程序   代为管理服务程序</p> 
<p>如是yum、rpm安装的软件可以直接使用systemctl去启动关闭、重启、开机自启等功能</p> 
<p>如是编译安装，不可以使用systemctl命令去管理程序，需要手写配置文件</p> 
<p>systemd unit（单元）systemd方便管理程序，将程序按照特定的功能，分成了很多单元，（服务单元、文件路径单元、挂载单元、、、、）</p> 
<p></p> 
<p>linux操作系统有运行级别</p> 
<p><img alt="" height="594" src="https://images2.imgbox.com/2e/70/4HtgbBmg_o.png" width="745"></p> 
<p>例如：init 0   关机  systemctl get -default  查看默认的运行级别</p> 
<p>systemctl set-default  设置默认级别</p> 
<p></p> 
<p></p> 
<p> 去字符界面</p> 
<p><img alt="" height="657" src="https://images2.imgbox.com/5a/94/GKUrthwB_o.png" width="956"></p> 
<p>runlevel  3  5  =====》  3是上一级别，5是当前级别 </p> 
<p><img alt="" height="638" src="https://images2.imgbox.com/10/14/sMplFTZQ_o.png" width="1013"></p> 
<p> 实验操作：</p> 
<p>1.模拟破坏mbr 和分区表 然后修复</p> 
<p>新建一块磁盘 将备份文件拷贝到新盘里</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/1b/a7/xooKqkld_o.png" width="1200"></p> 
<p><img alt="" height="794" src="https://images2.imgbox.com/fb/09/MDXTuzk9_o.png" width="1200"> <img alt="" height="933" src="https://images2.imgbox.com/69/94/AU7B6lrd_o.png" width="1200"></p> 
<p><img alt="" height="1159" src="https://images2.imgbox.com/39/ae/fZoR6ca4_o.png" width="1200"></p> 
<p><img alt="" height="562" src="https://images2.imgbox.com/6c/1d/LakX9Qss_o.png" width="1200"></p> 
<p><img alt="" height="84" src="https://images2.imgbox.com/09/dc/ZYvLNjNy_o.png" width="680"></p> 
<p>3  2  1 </p> 
<p><img alt="" height="274" src="https://images2.imgbox.com/15/07/xsqrZgF2_o.png" width="1010"></p> 
<p><img alt="" height="502" src="https://images2.imgbox.com/29/7f/23dK3j6N_o.png" width="846"> <img alt="" height="600" src="https://images2.imgbox.com/7f/7a/KrdY6ruT_o.png" width="744"></p> 
<p>修复grub文件及程序</p> 
<p>先模拟破坏grub.cfg配置文件</p> 
<p><img alt="" height="192" src="https://images2.imgbox.com/89/79/XSX2oyc7_o.png" width="1017"></p> 
<p>按住重新启动  并且立即按住esc 选择2 hard brive</p> 
<p><img alt="" height="372" src="https://images2.imgbox.com/c6/c0/BEuTi4xX_o.png" width="495"></p> 
<p> <img alt="" height="575" src="https://images2.imgbox.com/4b/07/HxlWzMVr_o.png" width="635"></p> 
<p></p> 
<p> 破解密码</p> 
<p>1.有光驱时</p> 
<p> 先进入到急救模式，先切换根，从光盘的跟切换到自己系统的根</p> 
<p>chroot  /mnt/sysimage</p> 
<p>修改密码 passwd</p> 
<p>exit </p> 
<p>reboot</p> 
<p><img alt="" height="440" src="https://images2.imgbox.com/aa/27/WAZ8W5cr_o.png" width="584"></p> 
<p>无光驱时</p> 
<p>     1.进入系统在选择 内核界面  选择带一个选项  按e<br>         2.将光标移动到Linux开头行的最后，添加  rd.break<br>         3.ctrl+x  运行<br>         4.进入单用户<br>                 重新挂载，添加读写权限<br>                 mount -o remount,  rw  /sysroot<br>                 切换到真正的根     chroot /sysroot<br>                 修改密码     passwd<br>                 如果你开启了selinux要重新打上标记<br>                 touch /.autorerelabe</p> 
<p><img alt="" src="https://images2.imgbox.com/ba/02/wASDf9Hf_o.jpg"><img alt="" src="https://images2.imgbox.com/25/e0/fSWLTaSG_o.jpg"> </p> 
<p>编译安装nginx，然后可以用systemctl去管理nginx  操作步骤如下</p> 
<p><img alt="" height="272" src="https://images2.imgbox.com/48/2f/9mEQEWzX_o.png" width="1200"> <img alt="" height="475" src="https://images2.imgbox.com/ab/41/TJGt5LRH_o.png" width="1200"></p> 
<p><img alt="" height="445" src="https://images2.imgbox.com/14/76/I8lBPTYk_o.png" width="1200"> </p> 
<p><img alt="" height="183" src="https://images2.imgbox.com/b3/a2/zqKldZ78_o.png" width="1200"> </p> 
<p><img alt="" height="129" src="https://images2.imgbox.com/c3/90/vOzgQwi9_o.png" width="1200"> </p> 
<p><img alt="" height="839" src="https://images2.imgbox.com/e2/a1/yYyCnx2K_o.png" width="1157"> <img alt="" height="795" src="https://images2.imgbox.com/66/c4/bQA6xD9L_o.png" width="1200"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9563155b07eba55b605b60358aedf01c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ByteTrack算法流程的简单示例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cfd33c4cb29e4163a07f82f9dae0dd3b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">中国专利公布公告 网站</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>