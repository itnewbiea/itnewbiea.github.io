<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mybatis的mapper xml文件中的常用标签。 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mybatis的mapper xml文件中的常用标签。" />
<meta property="og:description" content="Mybatis的mapper xml文件中的常用标签
一、SQL语句标签：
1、&lt;!--查询语句--&gt; &lt;select id=&#34;selectByPrimaryKey&#34; resultMap=&#34;BaseResultMap&#34; parameterType=&#34;java.lang.String&#34; &gt;
select &lt;/select&gt; 2、&lt;!--插入语句--&gt; &lt;insert id=&#34;insert&#34; parameterType=&#34;pojo.OrderTable&#34; &gt; insert into ordertable (order_id, cid, address, create_date, orderitem_id) values (#{orderId,jdbcType=VARCHAR},#{cid,jdbcType=VARCHAR}, #{address,jdbcType=VARCHAR}, #{createDate,jdbcType=TIMESTAMP}, #{orderitemId,jdbcType=VARCHAR})
&lt;/insert&gt; 3、&lt;!--删除语句--&gt; &lt;delete id=&#34;deleteByPrimaryKey&#34; parameterType=&#34;java.lang.String&#34; &gt;
delete from ordertable where order_id = #{orderId,jdbcType=VARCHAR} &lt;/delete&gt; 4、&lt;!--修改语句--&gt; &lt;update id=&#34;updateByPrimaryKey&#34; parameterType=&#34;pojo.OrderTable&#34; &gt; update ordertable set cid = #{cid,jdbcType=VARCHAR}, address = #{address,jdbcType=VARCHAR}, create_date = #{createDate,jdbcType=TIMESTAMP}, orderitem_id = #{orderitemId,jdbcType=VARCHAR} where order_id = #{orderId,jdbcType=VARCHAR} &lt;/update&gt; 1》需要配置的属性：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1196d43a1f5ffa5bb1bddf009ff526ff/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-03-23T10:00:09+08:00" />
<meta property="article:modified_time" content="2018-03-23T10:00:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mybatis的mapper xml文件中的常用标签。</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p align="center"><u><span style="color:rgb(192,0,0);">Mybatis</span></u><span style="color:rgb(192,0,0);">的</span><u><span style="color:rgb(192,0,0);">mapper</span></u><span style="color:rgb(192,0,0);"> </span><u><span style="color:rgb(192,0,0);">xml</span></u><span style="color:rgb(192,0,0);">文件中的常用标签</span></p> 
<p><span style="color:rgb(227,108,9);"><span style="font-family:'微软雅黑';">一、</span>SQL语句标签：</span></p> 
<p>1、&lt;!--查询语句--&gt;  </p> 
<p><strong><span style="color:rgb(63,127,95);">&lt;select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" &gt;</span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">   select   </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">  &lt;/select&gt;</span><span style="color:rgb(63,127,95);"> </span></strong></p> 
<p>2、&lt;!--插入语句--&gt;  </p> 
<p><strong><span style="color:rgb(63,127,95);">&lt;insert id="insert" parameterType="pojo.OrderTable" &gt;  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);"> insert into </span><u><span style="color:rgb(63,127,95);">ordertable</span></u><span style="color:rgb(63,127,95);"> (order_id, </span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">, address,   </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">      create_date, orderitem_id)  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">    values (#{orderId,jdbcType=VARCHAR},#{<!-- --></span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">,jdbcType=VARCHAR}, #{address,jdbcType=VARCHAR},   </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">     #{createDate,jdbcType=TIMESTAMP}, #{orderitemId,jdbcType=VARCHAR})</span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">  &lt;/insert&gt; </span></strong></p> 
<p>3、&lt;!--删除语句--&gt;  </p> 
<p><strong><span style="color:rgb(63,127,95);">&lt;delete id="deleteByPrimaryKey" parameterType="java.lang.String" &gt;</span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">delete from </span><u><span style="color:rgb(63,127,95);">ordertable</span></u><span style="color:rgb(63,127,95);">  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">    where order_id = #{orderId,jdbcType=VARCHAR}  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">&lt;/delete&gt;  </span></strong></p> 
<p>4、&lt;!--修改语句--&gt;  </p> 
<p><strong><span style="color:rgb(63,127,95);"> &lt;update id="updateByPrimaryKey" parameterType="pojo.OrderTable" &gt;  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">  update </span><u><span style="color:rgb(63,127,95);">ordertable</span></u><span style="color:rgb(63,127,95);">  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">    set </span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);"> = #{<!-- --></span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">,jdbcType=VARCHAR},  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">      address = #{address,jdbcType=VARCHAR},  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">      create_date = #{createDate,jdbcType=TIMESTAMP},  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">      orderitem_id = #{orderitemId,jdbcType=VARCHAR}  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">    where order_id = #{orderId,jdbcType=VARCHAR}  </span></strong></p> 
<p><strong><span style="color:rgb(63,127,95);">  &lt;/update&gt; </span></strong></p> 
<p><span style="color:rgb(192,0,0);">1》</span><span style="color:rgb(0,0,0);">需要配置的属性：</span></p> 
<p><span style="color:rgb(0,0,0);">★</span><span style="color:rgb(0,0,0);">id="</span><u><span style="color:rgb(0,0,0);">xxxx</span></u><span style="color:rgb(0,0,0);">" ——表示此段</span><u><span style="color:rgb(0,0,0);">sql</span></u><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">执行语句的唯一标识，也是接口的方法名称【必须一致才能找到】</span> </span></p> 
<p><span style="color:rgb(0,0,0);">★</span><span style="color:rgb(0,0,0);">parameterType="</span><u><span style="color:rgb(0,0,0);">xxxx</span></u><span style="color:rgb(0,0,0);">" ——表示该</span><u><span style="color:rgb(0,0,0);">sql</span></u><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">语句中需要传入的参数，</span> <span style="font-family:'楷体';">类型要与对应的接口方法的类型一致【可选】</span></span></p> 
<p><span style="color:rgb(0,0,0);">★</span><span style="color:rgb(0,0,0);">resultMap="</span><u><span style="color:rgb(0,0,0);">xxx</span></u><span style="color:rgb(0,0,0);">"—— 定义出参，调用已定义的&lt;resultMap&gt;映射管理器的id值</span></p> 
<p><span style="color:rgb(0,0,0);">★</span><span style="color:rgb(0,0,0);">resultType="</span><u><span style="color:rgb(0,0,0);">xxxx</span></u><span style="color:rgb(0,0,0);">"——定义出参，匹配普通Java类型或自定义的</span><u><span style="color:rgb(0,0,0);">pojo</span></u><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">【出参类型若不指定，将为语句类型默认类型，如</span>&lt;insert&gt;语句返回值为</span><u><span style="color:rgb(0,0,0);">int</span></u><span style="color:rgb(0,0,0);">】</span></p> 
<p><span style="color:rgb(192,0,0);">2》</span><span style="color:rgb(192,0,0);">注意</span><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">：</span> <span style="font-family:'楷体';">至于为何</span>&lt;insert&gt;&lt;delete&gt;&lt;update&gt; 语句的返回值类型为什么是</span><u><span style="color:rgb(0,0,0);">int</span></u><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">，有过</span>JDBC操作经验的朋友可能会有印象，增删改操作实际上返回的是操作的条数。而</span><u><span style="color:rgb(0,0,0);">Mybatis</span></u><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">框架本身是基于</span>JDBC的，所以此处也沿袭这种返回值类型。</span></p> 
<p><span style="color:rgb(192,0,0);">3》</span><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">传参和取值：</span>mapper.xml 的灵活性还体现在SQL执行语句可以传参，参数类型通过parameterType= "" 定义</span></p> 
<p><span style="color:rgb(0,0,0);">★</span><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">取值方式</span>1：#{value jdbcType = </span><u><span style="color:rgb(0,0,0);">valuetype</span></u><span style="color:rgb(0,0,0);">}：jdbcType 表示该属性的数据类型在数据库中对应的类型，如 #{user jdbcType=</span><u><span style="color:rgb(0,0,0);">varchar</span></u><span style="color:rgb(0,0,0);">} 等价于 String </span><u><span style="color:rgb(0,0,0);">username</span></u><span style="color:rgb(0,0,0);">；</span></p> 
<p><span style="color:rgb(0,0,0);">★</span><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">取值方式</span>2：${value } : 这种方式不建议大量使用，可能会发送</span><u><span style="color:rgb(0,0,0);">sql</span></u><span style="color:rgb(0,0,0);">注入而导致安全性问题。一般该取值方式可用在非经常变化的值上，如</span><u><span style="color:rgb(0,0,0);">orderby</span></u><span style="color:rgb(0,0,0);"> ${columnName}；</span></p> 
<p><strong><span style="color:rgb(227,108,9);">二、</span><u><span style="color:rgb(227,108,9);">sql</span></u><span style="color:rgb(227,108,9);">片段标签</span><u><span style="color:rgb(227,108,9);">&lt;sql&gt;</span></u></strong><span style="color:rgb(0,0,0);">：通过该标签可定义能复用的</span><u><span style="color:rgb(0,0,0);">sql</span></u><span style="color:rgb(0,0,0);">语句片段，在执行</span><u><span style="color:rgb(0,0,0);">sql</span></u><span style="color:rgb(0,0,0);">语句标签中直接引用即可。这样既可以提高编码效率，还能有效简化代码，提高可读性</span></p> 
<p><span style="color:rgb(192,0,0);">    </span><span style="color:rgb(192,0,0);">1》</span><span style="color:rgb(0,0,0);"> 需要配置的属性：id="" ———表示需要改</span><u><span style="color:rgb(0,0,0);">sql</span></u><span style="color:rgb(0,0,0);">语句片段的唯一标识</span></p> 
<p><span style="color:rgb(0,0,0);">  </span><span style="color:rgb(192,0,0);">   </span><span style="color:rgb(192,0,0);">2》</span><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">引用：通过</span>&lt;include </span><u><span style="color:rgb(0,0,0);">refid</span></u><span style="color:rgb(0,0,0);">="" /&gt;标签引用，</span><u><span style="color:rgb(0,0,0);">refid</span></u><span style="color:rgb(0,0,0);">="" 中的值指向需要引用的</span><u><span style="color:rgb(0,0,0);">&lt;sql&gt;</span></u><span style="color:rgb(0,0,0);"><span style="font-family:'楷体';">中的</span>id=""属性</span></p> 
<p>1、&lt;!--定义<u>sql</u><span style="font-family:'微软雅黑';">片段</span>--&gt;  </p> 
<p><span style="color:rgb(63,127,95);">&lt;sql id="orderAndItem"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    o.order_id,o.cid,o.address,o.create_date,o.orderitem_id,i.orderitem_id,i.product_id,i.count  </span></p> 
<p><span style="color:rgb(63,127,95);">  </span><u><span style="color:rgb(63,127,95);">&lt;/sql&gt;</span></u><span style="color:rgb(63,127,95);">  </span></p> 
<p><span style="color:rgb(63,127,95);"> &lt;select id="findOrderAndItemsByOid" parameterType="java.lang.String" resultMap="BaseResultMap"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    select  </span></p> 
<p>2、&lt;!--引用<u>sql</u><span style="font-family:'微软雅黑';">片段</span>--&gt;  </p> 
<p><span style="color:rgb(63,127,95);">    &lt;include</span><span style="color:rgb(63,127,95);"> </span><u><span style="color:rgb(63,127,95);">refid</span></u><span style="color:rgb(63,127,95);">="orderAndItem" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    from </span><u><span style="color:rgb(63,127,95);">ordertable</span></u><span style="color:rgb(63,127,95);"> o  </span></p> 
<p><span style="color:rgb(63,127,95);">    join </span><u><span style="color:rgb(63,127,95);">orderitem</span></u><span style="color:rgb(63,127,95);"> i on o.orderitem_id = i.orderitem_id  </span></p> 
<p><span style="color:rgb(63,127,95);">    where o.order_id = #{orderId}  </span></p> 
<p><span style="color:rgb(63,127,95);">  &lt;/select&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);"> </span></p> 
<p><span style="color:rgb(227,108,9);">三、</span><strong><span style="color:rgb(227,108,9);"><span style="font-family:'微软雅黑';">映射管理器</span>resultMap</span></strong>：映射管理器，是<u>Mybatis</u><span style="font-family:'微软雅黑';">中最强大的工具，使用其可以进行实体类之间的关系，并管理结果和实体类间的映射关系</span> </p> 
<p><span style="color:rgb(192,0,0);">1》</span><span style="font-family:'微软雅黑';">需要配置的属性：</span>&lt;resultMap id="" type=""&gt;&lt;/resutlMap&gt; </p> 
<p>  id=""——表示这个映射管理器的唯一标识，外部通过该值引用；</p> 
<p>type ="" ——表示需要映射的实体类；</p> 
<p><span style="color:rgb(192,0,0);">2》</span> 需要配置的参数：&lt;id column = "" property= "" /&gt; </p> 
<p>  &lt;id&gt;标签指的是：结果集中结果唯一的列【column】 和 实体属性【property】的映射关系，</p> 
<p><span style="color:rgb(192,0,0);">3》</span><span style="color:rgb(192,0,0);">注意</span><span style="font-family:'微软雅黑';">：</span>&lt;id&gt;标签管理的列未必是主键列，需要根据具体需求指定；</p> 
<p>    &lt;result column= " " property=" " /&gt;  &lt;result&gt;标签指的是：结果集中普通列【column】 和 实体属性【property】的映射关系；</p> 
<p><span style="color:rgb(192,0,0);"> </span><span style="color:rgb(192,0,0);">4》</span> 需要维护的关系：所谓关系维护是值在主表查询时将其关联子表的结果也查询出来</p> 
<p>1）一对一关系</p> 
<p>&lt;assocation property = " " javaType=" "&gt;  </p> 
<p>property = “ ”→ <span style="font-family:'微软雅黑';">被维护实体在宿主实体中的属性名，</span></p> 
<p>javaType = " "→ <span style="font-family:'微软雅黑';">被维护实体的类型</span></p> 
<p><span style="color:rgb(63,127,95);">Orderitem.java</span></p> 
<p><span style="color:rgb(63,127,95);">package </span><u><span style="color:rgb(63,127,95);">pojo</span></u><span style="color:rgb(63,127,95);">;   </span></p> 
<p><span style="color:rgb(63,127,95);">public class </span><u><span style="color:rgb(63,127,95);">Orderitem</span></u><span style="color:rgb(63,127,95);"> {  </span></p> 
<p><span style="color:rgb(63,127,95);">    private String orderitemId;  </span></p> 
<p><span style="color:rgb(63,127,95);">    private String productId;  </span></p> 
<p><span style="color:rgb(63,127,95);">    private Integer count;    </span></p> 
<p><span style="color:rgb(63,127,95);">    private Product product;     </span></p> 
<p><span style="font-family:'微软雅黑';">从上方代码段可以看出：</span>Product 对象在 <u>Orderitem</u> <span style="font-family:'微软雅黑';">实体中以</span> product 属性存在 </p> 
<p><span style="color:rgb(63,127,95);">Orderitemmapper.xml </span></p> 
<p><span style="color:rgb(63,127,95);">&lt;resultMap id="BaseResultMap" type="pojo.Orderitem" &gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;id column="orderitem_id" property="orderitemId" jdbcType="VARCHAR" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;result column="product_id" property="productId" jdbcType="VARCHAR" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;result column="count" property="count" jdbcType="INTEGER" /&gt;  </span></p> 
<p>  ★ &lt;!-- 通过association 维护 一对一关系 --&gt;  </p> 
<p><span style="color:rgb(63,127,95);">   &lt;association property="product" javaType="pojo.Product"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;id column="product_id" property="productId"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;result column="product_factroy" property="productFactroy"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;result column="product_store" property="productStore"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;result column="product_descript" property="productDescript"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;/association&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);"> &lt;/resultMap&gt;  </span></p> 
<p>通过<u>xml</u><span style="font-family:'微软雅黑';">的配置可以看出，在</span>resultMap映射管理器中，通过&lt;association&gt; 进行了维护，也就是在查询<u>Orderitem</u><span style="font-family:'微软雅黑';">对象时，可以把关联的</span>Product对象的信息也查询出来 </p> 
<p>2）一对多关系的维护</p> 
<p>&lt;collection property=" " ofType=" "&gt; </p> 
<p>property = “”→ <span style="font-family:'微软雅黑';">被维护实体在宿主实体中的属性名</span> </p> 
<p>ofType=“ ”→是被维护方在宿主类中集合泛型限定类型</p> 
<p><span style="font-family:'微软雅黑';">【由于在一对多关系中，多的一放是以</span>List形式存在，因此ofType的值取用<u>Lsit</u>&lt;?&gt; 的泛型对象类型】</p> 
<p><span style="color:rgb(63,127,95);">OrderTable.java</span></p> 
<p><span style="color:rgb(63,127,95);">public class OrderTable {  </span></p> 
<p><span style="color:rgb(63,127,95);">    private String orderId;  </span></p> 
<p><span style="color:rgb(63,127,95);">    private String </span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">;  </span></p> 
<p><span style="color:rgb(63,127,95);">    private String address;  </span></p> 
<p><span style="color:rgb(63,127,95);">    private Date createDate;  </span></p> 
<p><span style="color:rgb(63,127,95);">    private String orderitemId;   </span></p> 
<p><span style="color:rgb(63,127,95);">    private List&lt;Orderitem&gt; orderitemList ;  </span></p> 
<p><span style="color:rgb(63,127,95);">}  </span></p> 
<p><span style="color:rgb(63,127,95);">OrderTableMapper.xml;</span></p> 
<p><span style="color:rgb(63,127,95);">&lt;resultMap id="BaseResultMap" type="pojo.OrderTable" &gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;!--  </span></p> 
<p><span style="color:rgb(63,127,95);">     WARNING - </span><u><span style="color:rgb(63,127,95);">@mbggenerated</span></u><span style="color:rgb(63,127,95);">  </span></p> 
<p><span style="color:rgb(63,127,95);">     This element is automatically generated by MyBatis Generator, do not modify.  </span></p> 
<p><span style="color:rgb(63,127,95);">    This element was generated on Fri May 06 15:49:42 CST 2016.</span></p> 
<p><span style="color:rgb(63,127,95);">   --&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;id column="order_id" property="orderId" jdbcType="VARCHAR" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;result column="</span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">" property="</span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">" jdbcType="VARCHAR" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;result column="address" property="address" jdbcType="VARCHAR" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;result column="create_date" property="createDate" jdbcType="TIMESTAMP" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;result column="orderitem_id" property="orderitemId" jdbcType="VARCHAR" /&gt;  </span></p> 
<p>  ★ &lt;!--维护一对多的关系  --&gt;  </p> 
<p><span style="color:rgb(63,127,95);">    &lt;collection property="orderitemList" ofType="pojo.Orderitem"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">        &lt;id column="orderitem_id" property="orderitemId"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">        &lt;result column="product_id" property="productId"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">        &lt;result column="count" property="count"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;/collection&gt;   </span></p> 
<p><span style="color:rgb(63,127,95);"> &lt;/resultMap&gt;  </span></p> 
<p><span style="color:rgb(192,0,0);">5》</span><span style="font-family:'微软雅黑';">在</span>resultMap 中需要注意两点： </p> 
<p>关联关系的维护可以根据实体类之间的实际情况进行嵌套维护</p> 
<p><span style="color:rgb(63,127,95);">&lt;resultMap id="BaseResultMap" type="pojo.OrderTable" &gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;id column="order_id" property="orderId" jdbcType="VARCHAR" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;result column="</span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">" property="</span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">" jdbcType="VARCHAR" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;result column="address" property="address" jdbcType="VARCHAR" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;result column="create_date" property="createDate" jdbcType="TIMESTAMP" /&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;result column="orderitem_id" property="orderitemId" jdbcType="VARCHAR" /&gt;  </span></p> 
<p>   ★&lt;!--维护一对多的关系  --&gt;  </p> 
<p><span style="color:rgb(63,127,95);">        &lt;collection property="orderitemList" ofType="pojo.Orderitem"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;id column="orderitem_id" property="orderitemId"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;result column="product_id" property="productId"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;result column="count" property="count"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">&lt;span style="white-space:pre"&gt;        &lt;/span&gt;&lt;!--嵌套一对一关系--&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;association property="customer" javaType="pojo.Customer"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">                &lt;id column="</span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">" property="</span><u><span style="color:rgb(63,127,95);">cid</span></u><span style="color:rgb(63,127,95);">"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">                &lt;result column="</span><u><span style="color:rgb(63,127,95);">cname</span></u><span style="color:rgb(63,127,95);">" property="</span><u><span style="color:rgb(63,127,95);">cname</span></u><span style="color:rgb(63,127,95);">"/&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;/association&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">        &lt;/collection&gt;   </span></p> 
<p><span style="color:rgb(63,127,95);">  &lt;/resultMap&gt;  </span></p> 
<p>关于出现重复列名的处理：在实际操作过程中，查询到的结果可能会出现相同的列名，这样会对映射到实体属性带来影响甚至出现报错，那么对待这个问题可以通过对列取别名的方式处理</p> 
<p> </p> 
<p><strong><span style="color:rgb(227,108,9);">四：常用的动态语句标签：</span></strong>通过动态<u>sql</u>标签可以进行条件判断，条件遍历等操作从而满足结果的需要</p> 
<p><span style="color:rgb(192,0,0);"> </span><span style="color:rgb(192,0,0);">1》</span>&lt;where&gt; ： 使用其可以代替<u>sql</u><span style="font-family:'微软雅黑';">语句中的</span>where关键字，一般防止在条件查询的最外层</p> 
<p><span style="color:rgb(192,0,0);"> </span><span style="color:rgb(192,0,0);">2》</span>&lt;if &gt;：条件判断标签，配置属性test=" 条件字符串 "，判断是否满足条件，满足则执行，不满足则跳过</p> 
<p><span style="color:rgb(63,127,95);">&lt;select id="findOrderItemDetail" parameterType="pojo.Orderitem" resultMap="BaseResultMap"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">        select orderitem.orderitem_id,product.*   </span></p> 
<p><span style="color:rgb(63,127,95);">        from </span><u><span style="color:rgb(63,127,95);">orderitem</span></u><span style="color:rgb(63,127,95);">,product  </span></p> 
<p><span style="color:rgb(63,127,95);">        &lt;where&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;if test="orderitemId!=null and orderitemId!=''"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">                and orderitem.orderitem_id = #{orderitemId}  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;/if&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;if test="productId!=null and productId!=''"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">                and orderitem.product_id = #{productId}  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;/if&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;if test="count!=null"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">                and orderitem.count = #{count}  </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;/if&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">        &lt;/where&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">  &lt;/select&gt;  </span></p> 
<p><span style="color:rgb(192,0,0);">3》</span>&lt;set&gt;：常用于&lt;update&gt;更新语句中，替代 <u>sql</u><span style="font-family:'微软雅黑';">中的</span>“set”关键字，特别是在联合&lt;if&gt;进行判断是，可以有效方式当某个参数为空或者不合法是错误的更新到数据库中</p> 
<p><span style="color:rgb(63,127,95);">&lt;update id="updateByPrimaryKeySelective" parameterType="pojo.Orderitem" &gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   update </span><u><span style="color:rgb(63,127,95);">orderitem</span></u><span style="color:rgb(63,127,95);">  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;set &gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">     &lt;if test="productId != null" &gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">       product_id = #{productId,jdbcType=VARCHAR},  </span></p> 
<p><span style="color:rgb(63,127,95);">     &lt;/if&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">     &lt;if test="count != null" &gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">       count = #{count,jdbcType=INTEGER},  </span></p> 
<p><span style="color:rgb(63,127,95);">     &lt;/if&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   &lt;/set&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">   where orderitem_id = #{orderitemId,jdbcType=VARCHAR}  </span></p> 
<p><span style="color:rgb(63,127,95);"> &lt;/update&gt;  </span></p> 
<p><span style="color:rgb(192,0,0);">4》</span>&lt;choose&gt;&lt;when&gt;&lt;/when&gt;&lt;otherwise&gt;&lt;/otherwise&gt;</p> 
<p>&lt;/choose&gt; 标签组：也是一个用于条件判断的标签组，和&lt;if&gt;的不同之处在于条件从&lt;choose&gt;进入，去匹配&lt;when&gt;中的添加，一旦匹配马上结束；若到找不到匹配项，将执行&lt;other&gt;中的语句；可以理解为&lt;if&gt;是 &amp;&amp; 关系 &lt;choose&gt;是 || 关系</p> 
<p><span style="color:rgb(192,0,0);">&lt;!-- 查询学生list，like姓名、或=性别、或=生日、或=班级，使用choose --&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">&lt;select id="getStudentListChooseEntity" parameterType="StudentEntity" resultMap="studentResultMap"&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">    SELECT * from STUDENT_TBL ST        </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;where&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">        &lt;choose&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;when test="studentName!=null and studentName!='' "&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">                    ST.STUDENT_NAME LIKE CONCAT(CONCAT('%', #{studentName}),'%')        </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;/when&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;when test="studentSex!= null and studentSex!= '' "&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">                    AND ST.STUDENT_SEX = #{studentSex}        </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;/when&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;when test="studentBirthday!=null"&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">                AND ST.STUDENT_BIRTHDAY = #{studentBirthday}      </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;/when&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">            &lt;when test="classEntity!=null and classEntity.classID !=null and classEntity.classID!='' "&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">                AND ST.CLASS_ID = #{classEntity.classID}        </span></p> 
<p><span style="color:rgb(63,127,95);">           &lt;/when&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">           &lt;otherwise&gt;                      </span></p> 
<p><span style="color:rgb(63,127,95);">           &lt;/otherwise&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">        &lt;/choose&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">    &lt;/where&gt;       </span></p> 
<p><span style="color:rgb(63,127,95);">&lt;/select&gt;     </span></p> 
<p><u><span style="color:rgb(192,0,0);">5》</span><span style="color:rgb(0,0,0);">&lt;foreach&gt;</span></u><span style="color:rgb(0,0,0);"><span style="font-family:'微软雅黑';">标签：该标签的作用是遍历集合类型的条件</span> </span></p> 
<p><span style="color:rgb(0,0,0);">  </span><u><span style="color:rgb(0,0,0);">foreach</span></u><span style="color:rgb(0,0,0);"><span style="font-family:Consolas;">元素的属性主要有</span> item，index，collection，open，separator，close。</span></p> 
<p><span style="color:rgb(0,0,0);">        item表示集合中每一个元素进行迭代时的别名.</span></p> 
<p><span style="color:rgb(0,0,0);">        index指 定一个名字，用于表示在迭代过程中，每次迭代到的位置.</span></p> 
<p><span style="color:rgb(0,0,0);">        open表示该语句以什么开始，separator表示在每次进行迭代之间以什么符号作为分隔 符.</span></p> 
<p><span style="color:rgb(0,0,0);">        close表示以什么结束</span></p> 
<p><span style="color:rgb(0,0,0);"><span style="font-family:Consolas;">用来循环</span> collection : 用来指定循环的数据的类型 可以填的值有：array,list,map item </span><span style="color:rgb(63,95,191);">  </span></p> 
<p><span style="color:rgb(63,127,95);">&lt;delete id="deleteByPriKeys" parameterType="java.lang.String"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">     delete from product where product_Id in  </span></p> 
<p><span style="color:rgb(63,127,95);">     &lt;foreach collection="list" item="productId" open="(" separator="," close=")"&gt;  </span></p> 
<p><span style="color:rgb(63,127,95);">         #{productId,jdbcType = VARCHAR}  </span></p> 
<p><span style="color:rgb(63,127,95);">     </span><u><span style="color:rgb(63,127,95);">&lt;/foreach&gt;</span></u><span style="color:rgb(63,127,95);">  </span></p> 
<p><span style="color:rgb(63,127,95);"> &lt;/delete&gt;   </span></p> 
<p> </p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/721624710439726f3b72ad7f4d30810a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">判断一个变量是数组还是对象</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3dffaf7b6324f56d355f3b1e7bff7283/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MATLAB在连续时间系统的时域分析中的应用（信号与系统）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>