<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>electron&#43;vue3&#43;vite&#43;antdesign - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="electron&#43;vue3&#43;vite&#43;antdesign" />
<meta property="og:description" content="首先在我的项目vue3&#43;vite&#43;antdesign 基础上使用electron，两者并不冲突，只需要在我原先项目基础上安装electron就行，需要安装一些包以及配置就可以了，本次记录一下怎么使用，以及当时遇到的问题
前提是vue3&#43;vite&#43;antdesign 没问题哈！
1.安装包
cnpm i -D concurrently cross-env electron electron-builder electron-packager wait-on
2.配置package.json
注意electron时，&#34;type&#34;: &#34;commonjs&#34;，用vite项目的时候是&#34;type&#34;: &#34;module&#34;,(当时这个地方没注意，报错了)
&#34;type&#34;: &#34;commonjs&#34;,
&#34;scripts&#34;: {
&#34;serve&#34;: &#34;vite&#34;,
&#34;build&#34;: &#34;vite build&#34;,
&#34;preview&#34;: &#34;vite preview&#34;,
&#34;start&#34;: &#34;electron .&#34;,
&#34;packager&#34;: &#34;electron-packager ./dist/ --platform=win32 --arch=x64 --overwrite&#34;,
&#34;electron&#34;: &#34;wait-on tcp:3000 &amp;&amp; cross-env IS_DEV=true electron .&#34;,
&#34;electron:dev&#34;: &#34;concurrently -k \&#34;cross-env BROWSER=none npm run dev\&#34; \&#34;npm run electron\&#34;&#34;,
&#34;electron:build.win&#34;: &#34;npm run build &amp;&amp; electron-builder --win --dir&#34;,
&#34;electron:build.linux&#34;: &#34;npm run build &amp;&amp; electron-builder --linux appImage&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/00ecdb7e42896eb9fbbe3d4b14ae5e38/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-07T22:31:27+08:00" />
<meta property="article:modified_time" content="2023-05-07T22:31:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">electron&#43;vue3&#43;vite&#43;antdesign</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>首先在我的项目vue3+vite+antdesign 基础上使用electron，两者并不冲突，只需要在我原先项目基础上安装electron就行，需要安装一些包以及配置就可以了，本次记录一下怎么使用，以及当时遇到的问题</p> 
<p>前提是vue3+vite+antdesign 没问题哈！</p> 
<p>1.安装包</p> 
<blockquote> 
 <p>cnpm i -D concurrently cross-env electron electron-builder electron-packager wait-on</p> 
</blockquote> 
<p>2.配置package.json</p> 
<p>注意electron时，"type": "commonjs"，用vite项目的时候是"type": "module",(当时这个地方没注意，报错了)</p> 
<blockquote> 
 <p>  "type": "commonjs",</p> 
 <p>"scripts": {<!-- --></p> 
 <p>    "serve": "vite",</p> 
 <p>    "build": "vite build",</p> 
 <p>    "preview": "vite preview",</p> 
 <p>    "start": "electron .",</p> 
 <p>    "packager": "electron-packager ./dist/ --platform=win32 --arch=x64 --overwrite",</p> 
 <p>    "electron": "wait-on tcp:3000 &amp;&amp; cross-env IS_DEV=true electron .",</p> 
 <p>    "electron:dev": "concurrently -k \"cross-env BROWSER=none npm run dev\" \"npm run electron\"",</p> 
 <p>    "electron:build.win": "npm run build &amp;&amp; electron-builder --win --dir",</p> 
 <p>    "electron:build.linux": "npm run build &amp;&amp; electron-builder --linux appImage",</p> 
 <p>    "electron:build.test": "npm run build &amp;&amp; electron-builder --dir",</p> 
 <p>    "electron:build.exe": "npm run build &amp;&amp; electron-builder --win"</p> 
 <p>  },</p> 
</blockquote> 
<p>添加：</p> 
<blockquote> 
 <p> "main": "electron/electron.js",</p> 
 <p> "build": {<!-- --></p> 
 <p>    "appId": "com.my-website.my-app",</p> 
 <p>    "productName": "MyApp",</p> 
 <p>    "copyright": "Copyright © 2022 ${author}",</p> 
 <p>    "mac": {<!-- --></p> 
 <p>      "category": "public.app-category.utilities"</p> 
 <p>    },</p> 
 <p>    "nsis": {<!-- --></p> 
 <p>      "oneClick": false,</p> 
 <p>      "allowToChangeInstallationDirectory": true</p> 
 <p>    },</p> 
 <p>    "files": [</p> 
 <p>      "dist/**/*",</p> 
 <p>      "electron/**/*"</p> 
 <p>    ],</p> 
 <p>    "directories": {<!-- --></p> 
 <p>      "buildResources": "assets",</p> 
 <p>      "output": "dist_electron"</p> 
 <p>    },</p> 
 <p>    "electronDownload": {<!-- --></p> 
 <p>      "mirror": "https://npm.taobao.org/mirrors/electron/"</p> 
 <p>    }</p> 
 <p>  }</p> 
</blockquote> 
<p> 3，vite.config.js</p> 
<p>修改base</p> 
<p>import { defineConfig } from 'vite'<br> import vue from '@vitejs/plugin-vue'<br> export default defineConfig({<!-- --></p> 
<p> // base: env.VITE_BASE_URL,<br>   base: process.env.ELECTRON=="true" ? './' : "",<br>   plugins: [vue()]<br> })</p> 
<p>4.入口文件</p> 
<p>在项目根目录新建electron文件夹，再里面再新建electron.js</p> 
<blockquote> 
 <p>// electron/electron.js<br> const path = require('path');<br> const { app, BrowserWindow } = require('electron');</p> 
 <p>const isDev = process.env.IS_DEV == "true" ? true : false;</p> 
 <p>function createWindow() {<!-- --><br>   // Create the browser window.<br>   const mainWindow = new BrowserWindow({<!-- --><br>     width: 800,<br>     height: 600,<br>     webPreferences: {<!-- --><br>       //preload: path.join(__dirname, 'preload.js'),<br>       nodeIntegration: true,<br>     },<br>   });</p> 
 <p>  // and load the index.html of the app.<br>   // win.loadFile("index.html");<br>   mainWindow.loadURL(<br>     isDev<br>       ? 'http://localhost:3000'<br>       : `file://${path.join(__dirname, '../dist/index.html')}`<br>   );<br>   // Open the DevTools.<br>   if (isDev) {<!-- --><br>     mainWindow.webContents.openDevTools();<br>   }<br> }</p> 
 <p>// This method will be called when Electron has finished<br> // initialization and is ready to create browser windows.<br> // Some APIs can only be used after this event occurs.<br> app.whenReady().then(() =&gt; {<!-- --><br>   createWindow()<br>   app.on('activate', function () {<!-- --><br>     // On macOS it's common to re-create a window in the app when the<br>     // dock icon is clicked and there are no other windows open.<br>     if (BrowserWindow.getAllWindows().length === 0) createWindow()<br>   })<br> });</p> 
 <p>// Quit when all windows are closed, except on macOS. There, it's common<br> // for applications and their menu bar to stay active until the user quits<br> // explicitly with Cmd + Q.<br> app.on('window-all-closed', () =&gt; {<!-- --><br>   if (process.platform !== 'darwin') {<!-- --><br>     app.quit();<br>   }<br> });<br>  </p> 
</blockquote>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/904627b101595591bc6071547d5937da/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">c&#43;&#43;初期笔记（超详细超完整）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4088fa1c90e68d31cbda2dd6d0a12c06/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java--大数字</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>