<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>selenium查找网页如何处理网站资源一直加载非常卡或者失败的情况 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="selenium查找网页如何处理网站资源一直加载非常卡或者失败的情况" />
<meta property="og:description" content="selenium查找网页如何处理网站资源一直加载失败的情况 selenium获取一个网页，某个网页的资源卡了很久还没有加载成功，如何放弃这个卡的数据，继续往下走
有2钟方式。通常可以采用下面的方式一来处理这种情况
方式一、WebDriverWait 这种方式对于资源比较多比较复杂的网页比较合适，比如有些图片在国外，一直加载不出来。mail.com就是这样
当网页15秒还没有加载完成，此时代码不管有没有找到元素都会继续往下走，：
如果没有找到元素就会抛异常。如果找到元素，就会点击 这个时候，如果抛异常。可以多尝试即便，直到不抛异常即可继续往下走
def ClickElementByXpath(self, brower, xPath): try: brower.implicitly_wait(5) self.insert_text_to_last_line(self.log_pass_file, xPath) result = WebDriverWait(brower, 15).until(EC.presence_of_element_located((By.XPATH, xPath))) result.click() return True except Exception as e: print(&#39;exception timeout!!!&#39;) return False 方式二、find_element 这种方式适合资源能快速加载完成的网站。
find_element会等到网站所有的资源全部加载完成后，再继续往下执行，这样的话更稳定，但对于有些网站资源本身很卡，就会一直卡住了，导致卡非常久，最后脚本运行失败。
def ClickElementByXpath(self, brower, xPath): try: brower.implicitly_wait(55) self.insert_text_to_last_line(self.log_pass_file, xPath) #element_input = brower.find_element_by_xpath(xPath) element_input = brower.find_element(By.XPATH, xPath) element_input.click() return True except Exception as e: print(&#39;exception timeout!!!&#39;) return False 是否可以设置超时时间 当元素的点击后 ，不等页面加载完成，接着往下走 在Selenium中，可以使用WebDriver的set_page_load_timeout方法来设置页面加载的超时时间，但是这个设置通常是应用于整个页面的加载，而不是单个元素的点击操作。如果你希望在点击元素后不等待页面加载完成，而是继续执行后续操作，可以采取以下方法：
使用set_page_load_timeout：你可以设置一个较短的页面加载超时时间，以便在点击元素后等待较短的时间。然后，可以在捕获超时异常后，继续执行后续操作。
from selenium import webdriver from selenium." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/fdfd941cdbcd2038a3dc5b57808d8830/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-04T16:18:16+08:00" />
<meta property="article:modified_time" content="2023-10-04T16:18:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">selenium查找网页如何处理网站资源一直加载非常卡或者失败的情况</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="selenium_0"></a>selenium查找网页如何处理网站资源一直加载失败的情况</h2> 
<p><img src="https://images2.imgbox.com/5c/ca/HjM2nGFZ_o.png" alt="在这里插入图片描述"></p> 
<p>selenium获取一个网页，某个网页的资源卡了很久还没有加载成功，如何放弃这个卡的数据，继续往下走</p> 
<p>有2钟方式。通常可以采用下面的方式一来处理这种情况</p> 
<h3><a id="WebDriverWait_9"></a>方式一、WebDriverWait</h3> 
<p>这种方式对于资源比较多比较复杂的网页比较合适，比如有些图片在国外，一直加载不出来。mail.com就是这样</p> 
<p>当网页15秒还没有加载完成，此时代码不管有没有找到元素都<code>会继续往下走</code>，：</p> 
<ul><li>如果没有找到元素就会抛异常。</li><li>如果找到元素，就会点击</li></ul> 
<p>这个时候，如果抛异常。可以多尝试即便，直到不抛异常即可继续往下走</p> 
<pre><code>    def ClickElementByXpath(self, brower, xPath):
        try:
            brower.implicitly_wait(5)
            self.insert_text_to_last_line(self.log_pass_file, xPath)
            result = WebDriverWait(brower, 15).until(EC.presence_of_element_located((By.XPATH, xPath)))
            result.click()
            return True
        except Exception as e:
            print('exception timeout!!!')
            return False
</code></pre> 
<h3><a id="find_element_34"></a>方式二、find_element</h3> 
<p>这种方式适合资源能快速加载完成的网站。</p> 
<p>find_element会等到网站所有的资源全部加载完成后，再继续往下执行，这样的话更稳定，但对于有些网站资源本身很卡，就会一直卡住了，导致卡非常久，最后脚本运行失败。</p> 
<pre><code>def ClickElementByXpath(self, brower, xPath):
    try:
        brower.implicitly_wait(55)
        self.insert_text_to_last_line(self.log_pass_file, xPath)
        #element_input = brower.find_element_by_xpath(xPath)
        element_input = brower.find_element(By.XPATH, xPath)
        element_input.click()
        return True
    except Exception as e:
        print('exception timeout!!!')
        return False
</code></pre> 
<h3><a id="___56"></a>是否可以设置超时时间 当元素的点击后 ，不等页面加载完成，接着往下走</h3> 
<p>在Selenium中，可以使用<code>WebDriver</code>的<code>set_page_load_timeout</code>方法来设置页面加载的超时时间，但是这个设置通常是应用于整个页面的加载，而不是单个元素的点击操作。如果你希望在点击元素后不等待页面加载完成，而是继续执行后续操作，可以采取以下方法：</p> 
<p><strong>使用<code>set_page_load_timeout</code></strong>：你可以设置一个较短的页面加载超时时间，以便在点击元素后等待较短的时间。然后，可以在捕获超时异常后，继续执行后续操作。</p> 
<pre><code>from selenium import webdriver
from selenium.common.exceptions import TimeoutException

# 创建 WebDriver 实例
driver = webdriver.Chrome()

# 设置页面加载超时时间为5秒
driver.set_page_load_timeout(5)

try:
    # 打开网页
    driver.get("https://example.com")
    
    # 找到要点击的元素
    element = driver.find_element_by_id("my_element_id")
    
    # 点击元素
    element.click()
    
except TimeoutException:
    print("页面加载超时")

# 在这里可以继续执行后续操作，而不用等待页面加载完成

# 关闭 WebDriver
driver.quit()
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3bdd981ca0a669b47694e1b34c71fbc7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C#停车场管理系统</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8cc143c994fea9a4afc908cddb507d95/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux学习之悟空派上实现OLED的无线网IP及CPU温度显示【守护进程】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>