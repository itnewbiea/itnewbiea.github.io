<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Electron.NET开发入门（Linux &amp;&amp; Windows） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Electron.NET开发入门（Linux &amp;&amp; Windows）" />
<meta property="og:description" content="先决条件 使用Electron.NET进行开发，不论是在Windows系统下，还是在Linux系统下，确保计算机已安装：
Node.jsNPMdotnet CLI Electron.NET 全局工具： ElectronNET.CLI.NET 5.0以上的SDK Windows系统下环境搭建 操作系统及IDE Windows 7及以上，X86/X64架构的即可。
IDE使用的是 Visual Studio 2019
安装步骤 Node.js及npm的安装 下载地址 选择与自己电脑对应的(32位/64位)Windows安装包(.msi)下载即可，一般默认选择的是最新版本。下载完成之后 双击 .msi 文件，运行，一路next下去，直到安装完成。
检测是否安装成功 win&#43;r 输入cmd 打开命令行，输入node -v查看是否安装成功，输入npm -v查看集成的 npm是否正确安装。如果命令都输出对应的版本号，如下图，表示安装成功了。如果提示系统未识别的指令，则将node.exe文件所在路径添加到系统的环境变量中。
基本设置 下载npm的原因是通过他去下载功能丰富的各种组件，npm的全局模块和缓存模块默认是在C盘，为了便于管理，我们需要新建两个文件夹 ：node_global(全局模块)和node_cache(缓存模块)。 这里注意两个文件夹的名字必须是这个，否则后期可能会报错。同样是在命令行窗口中设置npm的全局模块和缓存模块。
C:\Users\Administrator&gt;npm config set prefix &#34;创建的node_global文件夹所在路径&#34; #设置全局模块 ​ C:\Users\Administrator&gt;npm config set cache &#34;创建的node_cache文件夹所在路径&#34; #设置缓存模块 ​ C:\Users\Administrator&gt;npm config get prefix #查看全局模块所在路径 ​ C:\Users\Administrator&gt;npm config get cache #查看缓存模块所在路径 npm镜像源设置 npm的下载源默认是一个国外的网站，下载速度比较慢.为了提高下载速度。解决方案之一是 将下载源设置成淘宝源。另一种方式使用cnpm下载。设置npm源的几种方式
# the original source https://registry.npmjs.org/ ​ npm config set registry https://registry." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/70e6f537f8c997d5a2a229dab22dbd99/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-25T13:53:13+08:00" />
<meta property="article:modified_time" content="2022-05-25T13:53:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Electron.NET开发入门（Linux &amp;&amp; Windows）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>先决条件</h2> 
<p>使用Electron.NET进行开发，不论是在Windows系统下，还是在Linux系统下，确保计算机已安装：</p> 
<ol start="0"><li>Node.js</li><li>NPM</li><li>dotnet CLI Electron.NET 全局工具： ElectronNET.CLI</li><li>.NET 5.0以上的SDK</li></ol> 
<h2><a id="Windows_10"></a>Windows系统下环境搭建</h2> 
<h3><a id="IDE_13"></a>操作系统及IDE</h3> 
<p>Windows 7及以上，X86/X64架构的即可。</p> 
<p>IDE使用的是 <code>Visual Studio 2019</code></p> 
<h3><a id="_20"></a>安装步骤</h3> 
<h4><a id="Nodejsnpm_23"></a>Node.js及npm的安装</h4> 
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fnodejs.cn%2Fdownload%2F" rel="nofollow" title="http://nodejs.cn/download/">下载地址</a> 选择与自己电脑对应的(32位/64位)Windows安装包(.msi)下载即可，一般默认选择的是最新版本。下载完成之后 双击 .msi 文件，运行，一路next下去，直到安装完成。</p> 
<h5><a id="_27"></a>检测是否安装成功</h5> 
<p><code>win+r</code> 输入<code>cmd</code> 打开命令行，输入<code>node -v</code>查看是否安装成功，输入<code>npm -v</code>查看集成的 <code>npm</code>是否正确安装。如果命令都输出对应的版本号，如下图，表示安装成功了。如果提示系统未识别的指令，则将node.exe文件<strong>所在路径</strong>添加到系统的环境变量中。</p> 
<p><img src="https://images2.imgbox.com/95/19/mmjibRqR_o.png" alt="1649904063121.png"></p> 
<h5><a id="_33"></a>基本设置</h5> 
<p>下载<code>npm</code>的原因是通过他去下载功能丰富的各种组件，<code>npm</code>的全局模块和缓存模块默认是在C盘，为了便于管理，我们需要新建两个文件夹 ：node_global(全局模块)和node_cache(缓存模块)。 这里注意两个文件夹的名字必须是这个，否则后期可能会报错。同样是在命令行窗口中设置<code>npm</code>的全局模块和缓存模块。</p> 
<pre><code>C:\Users\Administrator&gt;npm config set prefix "创建的node_global文件夹所在路径"      #设置全局模块 
​
C:\Users\Administrator&gt;npm config set cache "创建的node_cache文件夹所在路径"          #设置缓存模块
​
C:\Users\Administrator&gt;npm config get prefix   #查看全局模块所在路径
​
C:\Users\Administrator&gt;npm config get cache   #查看缓存模块所在路径 
</code></pre> 
<h5><a id="npm_47"></a>npm镜像源设置</h5> 
<p><code>npm</code>的下载源默认是一个国外的网站，下载速度比较慢.为了提高下载速度。解决方案之一是 将下载源设置成淘宝源。另一种方式使用<code>cnpm</code>下载。<a href="https://link.juejin.cn/?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F1588050" rel="nofollow" title="https://cloud.tencent.com/developer/article/1588050">设置npm源的几种方式</a></p> 
<pre><code># the original source
https://registry.npmjs.org/
​
npm config set registry https://registry.npm.taobao.org  #设置成淘宝源
​
npm config get registry  #查看结果
​
#安装cnpm 其中-g表示全局安装
npm install -g cnpm  
​
cnpm -v        # 输出版本号表示cnpm安装成功,以后就可以用cnpm替代npm进行下载了 
</code></pre> 
<h4><a id="NET_SDK_65"></a>.NET SDK安装</h4> 
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdotnet.microsoft.com%2Fzh-cn%2Fdownload%2Fdotnet%2F5.0" rel="nofollow" title="https://dotnet.microsoft.com/zh-cn/download/dotnet/5.0">下载地址</a> 选择与自己电脑对应的(32位/64位)Windows安装程序下载即可，5.0以上即可。下载完成之后 双击运行安装程序，一路next下去，直到安装完成。<code>win+r</code> 输入<code>cmd</code> 打开命令行，输入<code>dotnet --info</code>查看是否安装成功,显示以下结果表示安装成功。</p> 
<p><img src="https://images2.imgbox.com/aa/86/vX53Jyxj_o.png" alt="1649906548492.png"></p> 
<h4><a id="ElectronNETCLI_71"></a>ElectronNET.CLI的安装</h4> 
<p>在cmd控制台中，通过运行以下指令安装，使用的是13.5.1版本</p> 
<pre><code>C:\Users\wjt&gt;dotnet tool install ElectronNET.CLI -g --version 13.5.1 
</code></pre> 
<h2><a id="Linux_79"></a>Linux系统下环境搭建</h2> 
<h3><a id="IDE_82"></a>操作系统及IDE</h3> 
<p><strong>操作系统</strong>：海光CPU+Deepin 20.3，其他的发行版如<code>Debian</code>，<code>CentOS</code>，<code>Ubuntu</code>均可，安装过程中除了部分指令不同，其他的的大同小异。</p> 
<p><strong>IDE</strong>：JetBrains Rider 2021.2版本</p> 
<h3><a id="_89"></a>安装步骤</h3> 
<h4><a id="Nodejsnpm_92"></a>Node.js及npm的安装</h4> 
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fnodejs.cn%2Fdownload%2F" rel="nofollow" title="http://nodejs.cn/download/">下载地址</a>　选择系统对应的的Linux二进制文件下载。为了方便管理，先在本地创建一个文件夹，下载的二进制文件放到这个文件夹下（以下指令都在在MATE终端中输入的）</p> 
<pre><code>mkdir Nodejs     #创建文件夹 Nodejs
cd Nodejs        #进入文件夹 Nodejs
＃在该目录下解压下载的文件，该文件
tar -xvf node-v14.16.0-linux-x64.tar 
</code></pre> 
<h5><a id="_103"></a>配置环境变量</h5> 
<p>打开profile文件，这里编辑器使用的是vim(如果对vim不熟悉，见<a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.csdn.net%2Fzhang_yu_ling%2Farticle%2Fdetails%2F103777714" rel="nofollow" title="https://blog.csdn.net/zhang_yu_ling/article/details/103777714">vim常见使用</a>)</p> 
<pre><code>sudo vi /etc/profile 
</code></pre> 
<p>复制这两行到profile文件最底部（注意node的安装地址是<code>/Nodejs/node-v14.16.0-linux-x64</code>,注意换成自己的安装地址）</p> 
<pre><code>export NODE_HOME=/Nodejs/node-v14.16.0-linux-x64
export PATH=$PATH:$NODE_HOME/bin 
</code></pre> 
<p>保存后退出，再执行下面命令将环境变量生效</p> 
<pre><code>source /etc/profile 
</code></pre> 
<p>执行上面的指令之后没有输出表示已生效。如果出现报错信息，表示环境变量未设置成功。</p> 
<h5><a id="_126"></a>建立安装目录软链接</h5> 
<p>将目录软链接到全局环境下，相当于是全局安装了，在终端输入 <code>node</code>开头的指令，不会显示找不到指令。</p> 
<pre><code>#软链接指令  ln -s 要链接的文件a所在目录/文件a 目标目录/文件a   表示将文件a链接到目标目录
ln -s /Nodejs/node-v14.16.0-linux-x64/bin/node /usr/local/bin/node
ln -s /Nodejs/node-v14.16.0-linux-x64/bin/npm /usr/local/bin/npm 
</code></pre> 
<p>如果没有权限则在<code>ln</code> 前面加上<code>sudo</code>运行，注意：<code>/bin/node</code>和<code>/usr/local</code>是两个地址 ,中间有空格且需要一起执行完 。</p> 
<p>在终端分别输入 <code>node -v</code> 和<code>npm -v</code>，如果可以输出版本号，表示Node.js和npm已安装成功，如下图所示</p> 
<p><img src="https://images2.imgbox.com/c9/f6/U93yVB7x_o.png" alt="1650091735453.png"></p> 
<p>之后设置缓存模块，全局模块，<code>npm</code>镜像源和使用<code>npm</code>安装<code>electron</code>的方式和在<code>Windows</code>系统下的方法一样，只不过这里是在<code>MATE</code>终端中运行，<a title="####2.%20%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE">详见此处</a>。</p> 
<p>这样安装好了之后，使用<code>npm</code>来安装各种包（如electron），使用包的命令时可能会提示找不到命令，这时，在用户目录下终端执行下面的命令即可（固定写法）</p> 
<pre><code>echo -e "export PATH=$(npm prefix -g)/bin:$PATH" &gt;&gt; ~/.bashrc &amp;&amp; source ~/.bashrc 
</code></pre> 
<p>这样，在所有用户下，都可以使用<code>npm</code>，也可以使用<code>npm</code>安装包的命令。</p> 
<h5><a id="_152"></a><strong>补充</strong></h5> 
<p>/etc/profile是整个Linux系统存储环境变量的文件（<strong>很重要</strong>），如果错误修改的话，可能会导致正常情况下的指令，像<code>sudo, vi, pwd</code>等无法使用，甚至在正确输入账号密码的时候无法进入Linux系统。如果是碰到无法进入系统的情况，解决方案如下：</p> 
<ol start="0"><li> <p>在登陆界面，按 <code>ctrl+Alt+(F1~F6)</code>其中一个。不同电脑可能不同，我在这里就被坑了好久，好多地方都说是<code>ctrl+Alt+F1</code>，然而这台电脑是<code>ctrl+Alt+F2</code>，终于进入了<code>MATE</code>终端，接下来就是修改文件。</p> </li><li> <p>之前由于环境变量错误修改，导致很多指令不能使用，需要使用该指令的绝对路径。在这里 <code>sudo=/usr/bin/sudo</code> <code>vi=/usr/bin/vi</code></p> <pre><code> /usr/bin/sudo /usr/bin/vi /etc/profile   #相当于之前的 “sudo vi /etc/profile” 
</code></pre> </li><li> <p>然后会提示输入账号密码（这里输入密码时在屏幕上是看不到的，*也没有，所以注意一下正确输入即可），然后进入到profile文件，按<code>a</code>再回车进入编辑模式，将之前加的错误的语句修改，按<code>ESC</code>退出编辑模式，再输入 <code>:w</code> 保存文件，最后输入 <code>:q</code> 回到命令行，然后重启就可以正常登陆了。（遇到无法系统无法登陆的问题还可以参考<a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.csdn.net%2Fwjeson%2Farticle%2Fdetails%2F9029995" rel="nofollow" title="https://blog.csdn.net/wjeson/article/details/9029995">Linux系统账户无法登录怎么办</a>）</p> </li></ol> 
<p>之前将<code>node,npm</code>软链接到全局环境下，为什么连接到<code>/usr/local/bin</code>目录下，<code>/usr/local</code>表示当前用户的本地文件目录，Linux系统中每一个用户都有一个这样的文件夹，用户存放用户相关的数据，<code>bin</code> 是 <code>Binaries</code> (二进制文件) 的缩写, 这个目录存放着最经常使用的命令。</p> 
<h4><a id="NET_SDK_169"></a>.NET SDK安装</h4> 
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdotnet.microsoft.com%2Fzh-cn%2Fdownload%2Fdotnet%2F5.0" rel="nofollow" title="https://dotnet.microsoft.com/zh-cn/download/dotnet/5.0">下载地址</a> 选择与自己电脑对应的(32位/64位)Linux程序包下载，5.0以上版本即可。程序包名为 dotnet-sdk-5.0.407-linux-x64.tar.gz</p> 
<p>在程序包所在目录下，打开终端，依次运行以下指令</p> 
<pre><code>mkdir -p $HOME/dotnet &amp;&amp; tar zxf dotnet-sdk-5.0.407-linux-x64.tar.gz -C $HOME/dotnet
export DOTNET_ROOT=$HOME/dotnet
export PATH=$PATH:$HOME/dotnet 
</code></pre> 
<p>任意打开一个终端输入<code>dotnet --info</code>,如果输出相关版本信息，如下图所示，表示.NET SDK 安装成功，若还是显示系统未识别的指令，尝试将dotnet 的可执行文件所在软链接到usr/local/bin目录下</p> 
<p><img src="https://images2.imgbox.com/8f/09/Gui0WzAf_o.png" alt="1650091907906.png"></p> 
<h4><a id="ElectronNETCLI_185"></a>ElectronNET.CLI的安装</h4> 
<p>在终端中，通过运行以下指令安装，使用的是13.5.1版本</p> 
<pre><code>dotnet tool install ElectronNET.CLI -g --version 13.5.1 
</code></pre> 
<p>这一步会下载名为 electronize的可执行文件，注意这里下载完成之后要建立 electronize的可执行文件所在目录的软链接或者将 electronize的可执行文件所在目录添加到系统环境变量中，否则后面执行 electronize指令时系统可能无法识别，Windows系统则不存在这样的问题</p> 
<pre><code># 建立软链接
sudo ln -s  electronize所在目录/electronize  /usr/bin/electronize 
</code></pre> 
<h2><a id="ElectronNET_200"></a>Electron.NET工程创建</h2> 
<h3><a id="_203"></a>创建工程</h3> 
<p>Electron.NET工程项目使用的是ASP.NET Core Web应用(MVC)模板(Windows系统下的Visual Studio和Linux系统下的Rider均选用此项目模板来创建工程)，如下图</p> 
<p><img src="https://images2.imgbox.com/d3/c7/Invk7eLA_o.png" alt="1650006080284.png"> 创建完成之后，基本工程目录如下图所示(Services目录，package.json和package-lock.json是后面自己添加的，可忽略)</p> 
<p><img src="https://images2.imgbox.com/5d/18/G8vd8zDr_o.png" alt="1650007680066.png"></p> 
<h3><a id="_212"></a>添加依赖</h3> 
<p>工程创建完成之后，需要给项目添加ElectronNET.API的NuGet包(这里选择的是13.5.1版本)，具体步骤如下：</p> 
<blockquote> 
 <p>Rider中</p> 
</blockquote> 
<p>依次点击顶部菜单栏的Tools—&gt;NuGet----&gt;Manage NuGet Packages …</p> 
<p><img src="https://images2.imgbox.com/3f/8f/o0yFFgQq_o.png" alt="1650008412626.png"> 然后在打开的窗口中搜索 ElectronNET.API，再选择ElectronNET.API包及其对应的合适的版本号，最后给对应项目添加依赖，如下图所示</p> 
<p><img src="https://images2.imgbox.com/79/29/sJ7iziMD_o.png" alt="1650008873448.png"></p> 
<p><img src="https://images2.imgbox.com/dd/64/WmuhuFlA_o.png" alt="1650008919934.png"></p> 
<blockquote> 
 <p>Visual Studio 2019中</p> 
</blockquote> 
<p>依次点击顶部菜单栏的工具—&gt;NuGet包管理器----&gt;管理解决方案的NuGet 程序包</p> 
<p><img src="https://images2.imgbox.com/09/86/NPBlJ47P_o.png" alt="1650009216297.png"></p> 
<p>然后类似的在打开的窗口中搜索 ElectronNET.API，再选择ElectronNET.API包及其对应的合适的版本号，最后给对应项目添加依赖，如下图所示</p> 
<p><img src="https://images2.imgbox.com/b4/98/jy3agbo8_o.png" alt="1650009802829.png"></p> 
<h3><a id="_237"></a>项目配置</h3> 
<blockquote> 
 <p>更改Program.cs</p> 
</blockquote> 
<p>更改<code>CreateHostBuilder</code>方法，所作更改表示将Electron作为整个web应用程序的宿主，同时注意在文件头部引入对应的命名空间。</p> 
<pre><code>public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
       Host.CreateDefaultBuilder(args)
          .ConfigureWebHostDefaults(webBuilder =&gt;
          {
              webBuilder.UseElectron(args); //添加的部分
              webBuilder.UseStartup&lt;Startup&gt;();
           }); 
</code></pre> 
<blockquote> 
 <p>更改Startup.cs</p> 
</blockquote> 
<p>首先在文件中添加以下方法</p> 
<pre><code>public async void ElectronBootstrap()
{
    var size = await Electron.Screen.GetPrimaryDisplayAsync();
    BrowserWindow browserWindow = await Electron.WindowManager.CreateWindowAsync
                          (new BrowserWindowOptions
                          {
                              //窗口属性配置项,长度，宽度等
                              ...
                           });
     browserWindow.OnReadyToShow += () =&gt; browserWindow.Show();
} 
</code></pre> 
<p>然后在<code>Configure(IApplicationBuilder app, IWebHostEnvironment env)</code>方法的末尾添加如下代码段</p> 
<pre><code>if (HybridSupport.IsElectronActive)
{
    ElectronBootstrap();
} 
</code></pre> 
<h3><a id="_281"></a>项目初始化</h3> 
<p>在第一次运行Electron.NET项目之前，需要对整个项目进行初始化，在工程的根目录下(即Program.cs文件所在目录下)，打开终端或者cmd控制台，执行 <code>electronize init</code>，执行完成之后，工程的根目录下会增加一个electron.manifest.json文件</p> 
<h3><a id="_286"></a>运行项目</h3> 
<p>至此，环境已基本配置完，可以通过指令启动项目，也可通过配置启动项的方式，在IDE中点击运行按钮来运行项目</p> 
<blockquote> 
 <p>指令启动</p> 
</blockquote> 
<p>在工程的根目录下打开终端或者cmd控制台，执行 <code>electronize start</code>，即可启动项目，第一次启动时会下载所需的npm包，所以会稍微慢一些，后面运行的话会快很多。</p> 
<blockquote> 
 <p>直接通过IDE启动</p> 
</blockquote> 
<p>工程的启动项配置文件为 工程根目录/Properties/launchSettings.json，执行 <code>electronize init</code>之后该文件会自动添加 Electron.NET项目的启动项配置信息，Visual Studio 2019中无需作任何更改，将启动项改为Electron.NET项目的启动项，然后点击运行按钮即可启动Electron.NET项目。</p> 
<p>而在Linux系统下的Rider中，需将Electron.NET项目启动项中的 <code>"workingDirectory"</code>属性设置为.sln文件所在目录（可用 <code>$(SolutionDir)</code> 表示，这样在不同电脑上移动时无需更改），然后将启动项改为Electron.NET项目的启动项，然后点击运行按钮即可启动Electron.NET项目。</p> 
<pre><code>"Electron.NET App": {
      "commandName": "Executable",
      "executablePath": "electronize",
      "commandLineArgs": "start",
      "workingDirectory": "F:/NBA/Electron/GraduationProject/Electron-Oscilloscope",
      "nativeDebugging": true,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development",
        "ASPNETCORE_HOSTINGSTARTUPASSEMBLIES": "Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation"
      }
    }, 
</code></pre> 
<p>要添加启动配置参数时，只需在<code>"commandLineArgs"</code>属性对应的start后面 添加对应的启动配置参数名 和值</p> 
<pre><code>{
    "commandLineArgs": "start /PublishSingleFile false" 
} 
</code></pre> 
<p>由之前的介绍可知，第一次运行项目时，会执行 <code>npm install</code> 的操作，此操作会下载package.json(在工程根目录/obj/Host目录下)文件注明的所有dependency依赖，包括最重要的Electron的npm包，项目运行时可能会卡在 electron的依赖包下载这一步，比如卡在这一步</p> 
<pre><code>&gt; electron@13.6.3 postinstall /home/huyang/Desktop/wjt/Electron_Oscilloscope_latest/Electron_Oscilloscope_latest/obj/Hostde_modules/electron
&gt; node install.js 
</code></pre> 
<p>甚至时间过长最后报错 <code>RequestError: read ETIMEDOUT</code>，这是因为npm的软件源是国外网站，导致下载速度过慢导致的，但是之前已经把npm的软件源设置为淘宝镜像源，下载速度还是很慢，可能是未全局设置，这里可以通过nrm来管理可用的npm 包的源地址，而不需要手动去输入npm的源地址，命令行模式下</p> 
<pre><code># 全局安装nrm
npm install nrm -g
#查看可用源地址
nrm ls
#切换源地址
nrm use taobao

#然后通过npm install xxx 的方式就可以快速下载包了 
</code></pre> 
<p>详见 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fkylebing.blog.csdn.net%2Farticle%2Fdetails%2F119064767%3Fspm%3D1001.2101.3001.6650.14%26utm_medium%3Ddistribute.pc_relevant.none-task-blog-2%257Edefault%257Eessearch%257Evector-14.fixedcolumn%26depth_1-utm_source%3Ddistribute.pc_relevant.none-task-blog-2%257Edefault%257Eessearch%257Evector-14.fixedcolumn" rel="nofollow" title="https://kylebing.blog.csdn.net/article/details/119064767?spm=1001.2101.3001.6650.14&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7Eessearch%7Evector-14.fixedcolumn&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7Eessearch%7Evector-14.fixedcolumn">安装 electon 的时候报错 RequestError: read ETIMEDOUT</a></p> 
<p>如果这么操作还是不行的话，进入<code>obj/Host/node_modules/electron</code>文件夹下（<strong>注意</strong>：这个文件夹可能不存在，但是在执行<code>node install.js</code>的过程中却能找到该文件夹，项目运行意外终止后该文件夹却没有了。<strong>解决办法</strong>：项目运行过程中，注意看控制台窗口或终端，当执行到<code>node install.js</code>这一步，按<code>Ctrl+C</code>终止运行，此时该文件夹是存在的），编辑install.js，修改downloadArtifact这段代码</p> 
<pre><code>downloadArtifact({
  version,
  artifactName: 'electron',
  force: process.env.force_no_cache === 'true',
  cacheRoot: process.env.electron_config_cache,
  platform: process.env.npm_config_platform || process.platform,
  arch: process.env.npm_config_arch || process.arch,
    //添加的部分
    mirrorOptions: {
        mirror: 'https://npm.taobao.org/mirrors/electron'
    }
}).then(extractFile).catch(err =&gt; {
  console.error(err.stack);
  process.exit(1);
}); 
</code></pre> 
<p>然后在<code>obj/Host/node_modules/electron</code>的cmd中执行</p> 
<pre><code>node install.js 
</code></pre> 
<p>再继续使用 <code>electronize start</code>启动工程</p> 
<h3><a id="_373"></a>项目调试</h3> 
<blockquote> 
 <p>环境介绍</p> 
</blockquote> 
<p>IDE：Rider 2021.2 / visual studio 2019</p> 
<p>操作系统：deepin（Linux x64） / Windows(x64)</p> 
<p>Electron.NET应用分为两大进程：主进程和渲染进程，各自调试的方式有一定区别。<strong>本项目中，主进程即整个后端(基于C#语言)，前端中主窗口和所有子窗口分别代表一个渲染进程，主要基于JavaScript语言。</strong></p> 
<h4><a id="_384"></a>主进程调试</h4> 
<p>主进程调试和普通应用的调试有很大的不同，先在需要调试的代码处打断点，具体步骤如下</p> 
<ol start="0"><li>启动electron.net应用</li><li>点击顶部选项栏中的 “Run”----&gt;“Attach to Process”，在弹出的窗口中选择electron应用窗口启动的那个进程</li><li>打开electron应用的开发者工具（<strong>快捷键 “Ctrl+Shift+I”</strong> ），然后按 <code>ctrl+R</code>重新加载应用，即可在IDE中调试后端C#代码</li></ol> 
<blockquote> 
 <p><strong>rider中</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/fc/b2/CUzyRm82_o.png" alt="1650015030324.png"></p> 
<p>选择Electron.NET应用启动的进程</p> 
<p><img src="https://images2.imgbox.com/74/ba/JprlyPGB_o.png" alt="1650088460537.png"></p> 
<p>在应用的开发者工具下按 <code>ctrl+R</code>重新加载应用，即可调试主进程</p> 
<p><img src="https://images2.imgbox.com/6c/bd/X380cQQG_o.png" alt="1650092266829.png"></p> 
<blockquote> 
 <p><strong>visual Studio 2019中</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/ac/94/FbZSrBiW_o.png" alt="1650015226690.png"></p> 
<p>选择Electron.NET应用启动的进程（项目名为Electron-Oscilloscope）</p> 
<p><img src="https://images2.imgbox.com/be/48/eo5PQQ0P_o.png" alt="1650090330590.png"></p> 
<p>在应用的开发者工具下按 <code>ctrl+R</code>重新加载应用，即可调试主进程</p> 
<p><img src="https://images2.imgbox.com/e6/b8/ARJHJ3Og_o.png" alt="1650090479004.png"></p> 
<h4><a id="_416"></a>渲染进程调试</h4> 
<p>选择了Electron应用的启动配置项之后，</p> 
<ol start="0"><li>rider/Visual Studio中点击启动按钮（绿色三角形）正常启动Electron.NET应用，</li><li>打开Electron应用窗口的开发者工具（<strong>快捷键 “Ctrl+Shift+I”</strong> ），</li><li>点击source标签，然后在需要调试的代码中打断点，</li><li><code>ctrl+R</code>重新加载即可调试渲染进程。</li></ol>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9bcf5034b62d74798e92afc38862ba2a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">理解Nodejs的单线程实现高并发原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/792d9aa456b485f76e87e88260c8d6d9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Hive行列转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>