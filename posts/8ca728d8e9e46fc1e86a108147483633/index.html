<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言学习笔记 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C语言学习笔记" />
<meta property="og:description" content="C基础 1. 概述 1.1开发环境 C程序生成过程 编辑器————&gt;源代码文件
编译器————&gt;二进制文件
链接器————&gt;（加上库二进制文件）可执行程序
集成开发环境 VS2010安装
新建项目
先新建解决方案再建项目
已安装的模板-其他项目类型-Visual Stdio 解决方案解决方案资源管理器-添加新建项目 解决方案和项目一起新建
编译链接
生成或生成解决方案运行或调试可执行程序 mingw 下载地址
$ gcc test1.c test2.c -o main.out
$ ./main.out
2. 数据类型 2.1 基本数据类型 1. 整形 精度为1 整形 int 四字节长度（windows操作系统，64位机）
有符号整型 int
表示范围 (-2)^(31)到 2^31 - 1 无符号整型 unsigned int
表示范围 0到2^32 -1 短整型 short 二字节长度
有符号短整型 short
表示范围 (-2)^(15)到 2^15 - 1 和无符号短整型 unsigned short
表示范围 0到 2^16 - 1 长整型 long **四字节长度 **（long占据的字节数还和编译器的数据模型相关）VC&#43;&#43; 以后版本还有long long 类型" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/8ca728d8e9e46fc1e86a108147483633/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-03T21:59:50+08:00" />
<meta property="article:modified_time" content="2022-07-03T21:59:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言学习笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="C_0"></a>C基础</h2> 
<h3><a id="1__2"></a>1. 概述</h3> 
<h4><a id="11_4"></a>1.1开发环境</h4> 
<ul><li><strong>C程序生成过程</strong></li></ul> 
<p>编辑器————&gt;源代码文件</p> 
<p>编译器————&gt;二进制文件</p> 
<p>链接器————&gt;（加上库二进制文件）可执行程序</p> 
<ul><li><strong>集成开发环境</strong></li></ul> 
<p>VS2010安装</p> 
<p>新建项目</p> 
<blockquote> 
 <p>先新建解决方案再建项目</p> 
 <ol><li>已安装的模板-其他项目类型-Visual Stdio 解决方案</li><li>解决方案资源管理器-添加新建项目</li></ol> 
 <p>解决方案和项目一起新建</p> 
</blockquote> 
<p>编译链接</p> 
<blockquote> 
 <ol><li>生成或生成解决方案</li><li>运行或调试可执行程序</li></ol> 
</blockquote> 
<ul><li>mingw</li></ul> 
<blockquote> 
 <p><a href="https://sourceforge.net/projects/mingw-w64/" rel="nofollow">下载地址</a></p> 
 <p>$ gcc test1.c test2.c -o main.out<br> $ ./main.out</p> 
</blockquote> 
<br> 
<hr> 
<h3><a id="2__43"></a>2. 数据类型</h3> 
<h4><a id="21__45"></a>2.1 基本数据类型</h4> 
<h5><a id="1___1_47"></a>1. 整形 <strong>精度为1</strong></h5> 
<ul><li> <p>整形 int <strong>四字节长度</strong>（windows操作系统，64位机）</p> <p>有符号整型 int</p> <pre><code>表示范围 (-2)^(31)到 2^31 - 1
</code></pre> <p>无符号整型 unsigned int</p> <pre><code>表示范围 0到2^32 -1
</code></pre> </li><li> <p>短整型 short <strong>二字节长度</strong></p> <p>有符号短整型 short</p> <pre><code>  表示范围     (-2)^(15)到 2^15 - 1
</code></pre> <p>和无符号短整型 unsigned short</p> <pre><code>  表示范围     0到 2^16 - 1
</code></pre> </li><li> <p>长整型 long **四字节长度 **（long占据的字节数还和编译器的数据模型相关）VC++ 以后版本还有long long 类型</p> <p>有符号长整型 long</p> <p>表示范围 (-2)^(31)到 2^31 - 1</p> <p>无符号长整形 unsigned long</p> <p>表示范围 (-2)^(31)到 2^31 - 1</p> <br> </li></ul> 
<h5><a id="2__89"></a>2. 浮点型</h5> 
<p>浮点数都是有符号的</p> 
<ul><li>单精度 flaot <strong>四个字节</strong></li><li>双精度 double <strong>八个字节</strong></li></ul> 
<blockquote> 
 <p><strong>使用sizeof运算符可以得到类型所占字节数</strong></p> 
 <p><strong>%E 为以指数形式输出单、双精度实数</strong></p> 
</blockquote> 
<pre><code class="prism language-java">#include <span class="token generics"><span class="token punctuation">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token punctuation">&gt;</span></span>
#include <span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">float</span><span class="token punctuation">.</span>h<span class="token punctuation">&gt;</span></span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"float 存储最大字节数 : %lu \n"</span><span class="token punctuation">,</span> <span class="token function">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"float 最小值: %E\n"</span><span class="token punctuation">,</span> FLT_MIN <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"float 最大值: %E\n"</span><span class="token punctuation">,</span> FLT_MAX <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"精度值: %d\n"</span><span class="token punctuation">,</span> FLT_DIG <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
linux显示以下结果：
<span class="token keyword">float</span> 存储最大字节数 <span class="token operator">:</span> <span class="token number">4</span>
<span class="token keyword">float</span> 最小值<span class="token operator">:</span> <span class="token number">1.175494E-38</span>
<span class="token keyword">float</span> 最大值<span class="token operator">:</span> <span class="token number">3.402823E+38</span>
精度值<span class="token operator">:</span> <span class="token number">6</span>
</code></pre> 
<h5><a id="3___122"></a>3. 字符型 <strong>一个字节</strong></h5> 
<p>使用‘’单引号表示</p> 
<ul><li>有符号字符 char 
  <ul><li>表示范围 -128 到127</li></ul> </li><li>有符号字符型 unsigned char</li><li>表示范围 0到255</li></ul> 
<br> 
<h5><a id="4__134"></a>4. 类型转换</h5> 
<ol><li> <p>隐式转换</p> <p>表达式中出现不同类型间的混合运算，较低类型将自动向较高类型转换。</p> <p>整型类型级别从低到高依次为：</p> <p><strong>signed char-&gt;unsigned char-&gt;short-&gt;unsigned short-&gt;int-&gt;unsigned int-&gt;long-&gt;unsigned long</strong></p> <p>浮点型级别从低到高依次为：</p> <p><strong>float-&gt;double</strong></p> </li><li> <p>强制类型转换</p> <pre><code class="prism language-c">  <span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>
  a<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
  b<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">double</span> dd<span class="token punctuation">;</span>
  dd<span class="token operator">=</span>a<span class="token operator">/</span>b<span class="token punctuation">;</span>            <span class="token comment">// dd的结果将是1。</span>
  dd<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">/</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// dd的结果是1.000000。</span>
  dd<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>a<span class="token operator">/</span>b<span class="token punctuation">;</span>   <span class="token comment">// dd的结果是1.333333</span>
<span class="token comment">//运算过程是：</span>

（<span class="token number">1</span>）先运算a<span class="token operator">/</span>b，得到的结果是整数的<span class="token number">1</span>；

（<span class="token number">2</span>）把整数的<span class="token number">1</span>转换成<span class="token keyword">double</span>，是<span class="token number">1.000000</span>。

dd<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>a<span class="token operator">/</span>b，dd的结果是<span class="token number">1.333333</span>，这个也不好理解，它的运算过程是：

（<span class="token number">1</span>）先执行<span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>a，把a转换为<span class="token keyword">double</span>，即<span class="token number">4.000000</span>；

（<span class="token number">2</span>）把<span class="token number">4.00000</span>除以<span class="token number">3</span>，得到<span class="token number">1.333333</span>，符合自动类型转换的规则。
</code></pre> </li></ol> 
<hr> 
<h4><a id="22__177"></a>2.2 枚举类型</h4> 
<p>使用enum关键字</p> 
<p>例如：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">enum</span> <span class="token class-name">DAY</span>
<span class="token punctuation">{<!-- --></span>
      MON<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> TUE<span class="token punctuation">,</span> WED<span class="token punctuation">,</span> THU<span class="token punctuation">,</span> FRI<span class="token punctuation">,</span> SAT<span class="token punctuation">,</span> SUN<span class="token comment">//括号中间的为枚举常量，只能在定义时刻赋值</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">enum</span> <span class="token class-name">DAY</span> day<span class="token punctuation">;</span><span class="token comment">//定义枚举变量</span>
    day <span class="token operator">=</span> WED<span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>枚举值默认从 0 开始，往后逐个加 1（递增）,</p> 
<p>如果只给第一个名字指定值1，这样枚举就1开始递增。</p> 
<ul><li> <p>枚举数组：<code>enum DAY days[5]= {MON,TUE,WED,THU,FRI }</code></p> </li><li> <p>枚举指针:<code> enum DAY * p_day;p_day=days;</code></p> </li></ul> 
<h4><a id="23__void_208"></a>2.3 void类型</h4> 
<p>void 类型指定没有可用的值。</p> 
<table><thead><tr><th>序号</th><th align="left">类型描述</th></tr></thead><tbody><tr><td>1</td><td align="left">函数返回为空 C 中有各种函数都不返回值，或者您可以说它们返回空。不返回值的函数的返回类型为空。例如 void exit (int status);</td></tr><tr><td>2</td><td align="left">函数参数为空 C 中有各种函数不接受任何参数。不带参数的函数可以接受一个 void。例如 int rand(void);</td></tr><tr><td>3</td><td align="left">指针指向 void 类型为 void * 的指针代表对象的地址，而不是类型。例如，内存分配函数 void *malloc( size_t size ); 返回指向 void 的指针，可以转换为任何数据类型。</td></tr></tbody></table> 
<h4><a id="24__218"></a>2.4 派生类型</h4> 
<p>包括：指针类型、数组类型、结构体类型、共用体类型和函数类型。</p> 
<h4><a id="25__typedef__222"></a>2.5 typedef 类型定义符</h4> 
<p>给类型重命名</p> 
<p><code>typedef struct student student</code>将结构体student代替 struct student</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Books</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">char</span>  title<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  author<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  subject<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>   book_id<span class="token punctuation">;</span>
<span class="token punctuation">}</span> Book<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   Book book<span class="token punctuation">;</span>

   <span class="token function">strcpy</span><span class="token punctuation">(</span> book<span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token string">"C 教程"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> book<span class="token punctuation">.</span>author<span class="token punctuation">,</span> <span class="token string">"Nowcoder"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token function">strcpy</span><span class="token punctuation">(</span> book<span class="token punctuation">.</span>subject<span class="token punctuation">,</span> <span class="token string">"编程语言"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   book<span class="token punctuation">.</span>book_id <span class="token operator">=</span> <span class="token number">12345</span><span class="token punctuation">;</span>

   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"书标题 : %s\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"书作者 : %s\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"书类目 : %s\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"书 ID : %d\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>book_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong>typedef vs #define</strong></p> 
 <ol><li><strong>typedef</strong> 仅限于为类型定义符号名称，<strong>#define</strong> 不仅可以为类型定义别名，也能为数值定义别名，比如您可以定义 1 为 ONE。</li><li><strong>typedef</strong> 是由编译器执行解释的，<strong>#define</strong> 语句是由预编译器进行处理的。</li></ol> 
</blockquote> 
<hr> 
<h3><a id="3__267"></a>3. 变量和常量（区分大小写）</h3> 
<h4><a id="31__269"></a>3.1 变量</h4> 
<p>变量的的定义和声明</p> 
<p>除非有extern关键字，否则都是变量的定义</p> 
<p><strong>变量作用域：</strong></p> 
<ul><li>变量声明在各语句之前</li><li>局部变量作用域在其语句块</li><li>嵌套语句的同名变量：就近原则</li></ul> 
<h4><a id="32__281"></a>3.2 常量</h4> 
<h5><a id="_283"></a>类型</h5> 
<ul><li>整数</li><li>浮点</li><li>字符</li><li>字符串</li></ul> 
<h5><a id="_290"></a>定义(大写)</h5> 
<ol><li>使用 #define 预处理器。</li><li>使用 const 关键字。</li></ol> 
<blockquote> 
 <p>区别在于：</p> 
 <ol><li>const带类型</li><li>define在编译的预处理阶段起作用，const在编译运行时起作用</li><li>define只是简单的字符串替换，没有类型检查，不能调试，但是可以防止头文件重复引用</li></ol> 
</blockquote> 
<p>**sizeof关键字：**不是函数。用来求一个变量、类型的大小。 返回一个 无符号整数。 使用 %u 接收返回值。<code>int a = 20； sizeof(a)</code></p> 
<hr> 
<h3><a id="4__305"></a>4. 存储类</h3> 
<ul><li> <p>auto</p> 
  <ul><li>所有局部变量默认存储类</li><li>只能用在函数内</li></ul> </li><li> <p>register</p> 
  <ul><li>用于定义存储在寄存器而非ram中的局部变量</li><li>变量最大尺寸为寄存器大小，且并且对其不能用‘&amp;’取值运算</li></ul> </li><li> <p>static</p> 
  <ul><li>指示编译器在程序生命周期保持局部变量的存在，static修饰的局部变量可以在函数调用之间保持局部变量的值，增加局部变量的生命周期，只被初始化一次。</li><li>static它也可以修饰全局变量，使变量作用域限制在其声明的文件中，其他文件即使声明也无效。只能赋值一次，即可以被任何函数或方法调用</li></ul> </li><li> <p>extern</p> 
  <ul><li>提供一个全局变量的引用，即在一个文件声明另一个文件中的全局变量或函数</li></ul> </li><li> <p>volatile</p> 
  <ul><li> <p>防止编译器优化代码。</p> <pre><code>volatile int flg = 0; 
</code></pre> </li></ul> </li></ul> 
<p>还有其他变量修饰符restrict volatile const</p> 
<hr> 
<h3><a id="5__336"></a>5. 运算符</h3> 
<ul><li>算数</li><li>关系</li><li>逻辑</li><li>位运算</li><li>赋值运算</li><li>杂项<br> 优先级</li></ul> 
<hr> 
<h3><a id="6__350"></a>6. 程序结构</h3> 
<h5><a id="_352"></a>判断</h5> 
<table><thead><tr><th>语句</th><th>描述</th></tr></thead><tbody><tr><td>if 语句</td><td>一个 if 语句 由一个布尔表达式后跟一个或多个语句组成。</td></tr><tr><td>if…else 语句</td><td>一个 if 语句 后可跟一个可选的 else 语句，else 语句在布尔表达式为假时执行。</td></tr><tr><td>嵌套 if 语句</td><td>您可以在一个 if 或 else if 语句内使用另一个 if 或 else if 语句。</td></tr><tr><td>switch 语句</td><td>一个 switch 语句允许测试一个变量等于多个值时的情况。</td></tr><tr><td>嵌套 switch 语句</td><td>您可以在一个 switch 语句内使用另一个 switch 语句。</td></tr><tr><td>? : 运算符</td><td>(三元运算符)</td></tr></tbody></table> 
<h5><a id="_363"></a>循环</h5> 
<ul><li>类型</li></ul> 
<table><thead><tr><th>循环类型</th><th>描述</th></tr></thead><tbody><tr><td>while 循环</td><td>当给定条件为真时，重复语句或语句组。它会在执行循环主体之前测试条件。</td></tr><tr><td>for 循环</td><td>多次执行一个语句序列，简化管理循环变量的代码。</td></tr><tr><td>do…while 循环</td><td>除了它是在循环主体结尾测试条件外，其他与 while 语句类似。</td></tr><tr><td>嵌套循环</td><td>您可以在 while、for 或 do…while 循环内使用一个或多个循环。</td></tr></tbody></table> 
<blockquote> 
 <p>for 循环执行过程</p> 
 <p>for(表达式1；条件；表达式2){…}</p> 
 <ol><li>进行表达式1运算</li><li>判断条件是否为真，真则进行3，否则结束</li><li>执行{…}中的语句</li><li>进行表达式2的运算，并转入第2步</li></ol> 
 <p>表达式1和2可以使用逗号,表达式</p> 
</blockquote> 
<blockquote> 
 <p>break和continue</p> 
 <ul><li>都可以使其后语句停止</li><li>break跳出循环，continue转向条件判断</li></ul> 
</blockquote> 
<ul><li>控制语句</li></ul> 
<table><thead><tr><th>控制语句</th><th>描述</th></tr></thead><tbody><tr><td>break 语句</td><td>终止循环或 switch 语句，程序流将继续执行紧接着循环或 switch 的下一条语句。</td></tr><tr><td>continue 语句</td><td>告诉一个循环体立刻停止本次循环迭代，重新开始下次循环迭代。</td></tr><tr><td>goto 语句</td><td>将控制转移到被标记的语句。但是不建议在程序中使用 goto 语句。</td></tr></tbody></table> 
<hr> 
<h3><a id="7__402"></a>7. 输入输出</h3> 
<h5><a id="_404"></a>输入</h5> 
<ul><li> <p>getchar：输入单个字符，保存到字符变量中。<strong>int getchar(void)</strong> 函数从屏幕读取下一个可用的字符，并把它返回为一个整数。这个函数在同一个时间内只会读取一个单一的字符。您可以在循环内使用这个方法，以便从屏幕上读取多个字符。</p> </li><li> <p>gets：输入一行数据，保存到字符串变量中。<strong>char *gets(char *s)</strong> 函数从 <strong>stdin</strong> 读取一行到 <strong>s</strong> 所指向的缓冲区，直到一个终止符或 EOF。</p> </li><li> <p>scanf：格式化输入函数，一次可以输入多个数据，保存到多个变量中。<strong>int scanf(const char *format, …)</strong> 函数从标准输入流 <strong>stdin</strong> 读取输入，并根据提供的 <strong>format</strong> 来浏览输入。</p> </li></ul> 
<h5><a id="_412"></a>输出</h5> 
<ul><li> <p>putchar：输出单个字符。<strong>int putchar(int c)</strong> 函数把字符输出到屏幕上，并返回相同的字符。这个函数在同一个时间内只会输出一个单一的字符。您可以在循环内使用这个方法，以便在屏幕上输出多个字符。</p> </li><li> <p>puts：输出字符串。<strong>int puts(const char *s)</strong> 函数把字符串 s 和一个尾随的换行符写入到 <strong>stdout</strong>。</p> </li><li> <p>printf：格式化输出函数，可输出常量、变量等。<strong>int printf(const char *format, …)</strong> 函数把输出写入到标准输出流 <strong>stdout</strong> ，并根据提供的格式产生输出。</p> <p>%s：打印字符串， 挨着从字符串的第一个字符开始打印，打印到’\0’结束。</p> <p>%d：打印整数</p> <p>%c：打印字符</p> <p>%x：打印16进制数</p> <p>%u：打印无符号</p> <p>%m.n: 打印实型时用到，一共有 m 位(整数、小数、小数点)，n位小数。</p> <p>%0m.nf: 其中 f：表示打印实型，一共有 m 位(整数、小数、小数点)，n位小数。 0：表示不足 m 位时，用0凑够m位。</p> <p>%%： 显示一个%。 转义字符’’ 对 % 转义无效。</p> <p>%Ns：显示N个字符的字符串。不足N用空格向左填充。</p> <p>%0Ns：显示N个字符的字符串。不足N用0向左填充。</p> <p>%-Ns：显示N个字符的字符串。不足N用空格向右填充。</p> </li><li> <p>sprintf 是将一个格式化的字符串输出到一个目的字符串中；</p> </li><li> <p>printf 是将一个格式化的字符串输出到屏幕；</p> </li><li> <p>fprintf 是将一个格式化的字符串写入文件中；</p> </li></ul> 
<hr> 
<h3><a id="8__450"></a>8. 函数</h3> 
<p>栈 ：<br> 当函数调用时，系统会在 stack 空间上申请一块内存区域，用来供函数调用，主要存放 形参 和 局部变量（定义在函数内部）。<br> 当函数调用结束，这块内存区域自动被释放（消失）。</p> 
<h4><a id="81__456"></a>8.1 定义</h4> 
<ul><li>返回类型</li><li>函数名称</li><li>参数 
  <ul><li>形参</li><li>实参</li></ul> </li><li>函数体</li></ul> 
<h4><a id="82__465"></a>8.2 声明</h4> 
<p>声明部分必须在实现部分和返回值语句之前</p> 
<h4><a id="83__469"></a>8.3 调用</h4> 
<ul><li> <p>c传值调用：该方法把参数的实际值复制给函数的形式参数。在这种情况下，修改函数内的形式参数不会影响实际参数。实参将自己的值，拷贝一份给形参。</p> 
  <ul><li> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">Exchg1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Exchg1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a=%d,b=%d"</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">gets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Exchg1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> tmp<span class="token punctuation">;</span><span class="token comment">//调用之前，隐含两个赋值操作int x=a;int y=b;</span>
	tmp <span class="token operator">=</span> x<span class="token punctuation">;</span>
	x <span class="token operator">=</span> y<span class="token punctuation">;</span>
	y <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x=%d,y=%d\n"</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
x<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">4</span>
a<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token number">6</span>
</code></pre> </li></ul> </li></ul> 
<blockquote> 
 <p>参和形参是两个不同的地址空间，参数传递的实质是将原函数中变量的值，复制到被调用函数形参所在的存储空间中，这个形参的地址空间在函数执行完毕后，会被回收掉。整个被调用函数对形参的操作，只影响形参对应的地址空间，不影响原函数中变量的值，因为这两个不是同一个存储空间。</p> 
</blockquote> 
<ul><li> <p>(c++)传引用调用：通过指针传递方式，形参为指向实参地址的指针，当对形参的指向操作时，就相当于对实参本身进行的操作。</p> 
  <ul><li> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token function">Exchg3</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token comment">//注意定义处的形式参数的格式与值传递不同</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> tmp <span class="token operator">=</span> x<span class="token punctuation">;</span>
	x <span class="token operator">=</span> y<span class="token punctuation">;</span>
	y <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x=%d,y=%d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
	<span class="token function">Exchg3</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用Exchg3时函数会将a,b 分别代替了x,y了,这样函数里头操作的其实就是实参a,b本身</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a=%d,b=%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul> </li></ul> 
<blockquote> 
 <p>形参是引用类型变量，其实就是实参的一个别名，在被调用函数中，对引用变量的所有操作等价于对实参的操作。这样，整个函数执行完毕后，原先的实参的值将会发生改变。</p> 
 <p>被调函数对形参做的任何操作都影响了主调函数中的实参变量。</p> 
 <p>内置类型当中三种传递方式的效率上都差不多；</p> 
 <p>在自定义类型当中，传引用方式效率的更高效一些，因为它没有对形参进行一次拷贝</p> 
</blockquote> 
<ul><li> <p>c传地址调用 ,实参将地址值，拷贝一份给形参.</p> 
  <ul><li> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">Exchg1</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Exchg1</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a=%d,b=%d"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">gets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Exchg2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>px<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>py<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> tmp<span class="token punctuation">;</span><span class="token comment">//将a的地址（&amp;a）代入到px，b的地址(&amp;b)代入到py。</span>
	tmp <span class="token operator">=</span> <span class="token operator">*</span>px<span class="token punctuation">;</span><span class="token comment">//同上面的值传递一样，函数调用时作了两个隐含的操作：将&amp;a，&amp;b的值赋值给了px,py。</span>
	<span class="token operator">*</span>px <span class="token operator">=</span> <span class="token operator">*</span>py<span class="token punctuation">;</span><span class="token comment">//px=&amp;a;</span>
	<span class="token operator">*</span>py <span class="token operator">=</span> tmp<span class="token punctuation">;</span><span class="token comment">//py=&amp;b;隐含操作</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*px=%d,*py=%d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>px<span class="token punctuation">,</span><span class="token operator">*</span>py<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//这里是将a,b的地址值传递给了px,py，而不是传递的a,b的内容</span>
</code></pre> </li></ul> </li></ul> 
<blockquote> 
 <p>实参是变量的地址，形参是指针类型的变量，在函数中对指针变量的操作，就是对实参(变量地址)所对应的变量的操作，函数调用结束后，原函数中的变量的值将会发生改变。</p> 
</blockquote> 
<h4><a id="84__556"></a>8.4 作用域规则</h4> 
<p><strong>局部变量被定义时，系统不会对其初始化，您必须自行对其初始化。定义全局变量时，系统会自动对其初始化</strong></p> 
<ul><li>局部变量：函数体中定义声明的变量 
  <ul><li>某个函数或代码块的内部声明，局部变量保存在栈中，只有在所在函数被调用时才动态地为变量分配存储单元。</li><li>作用域在其定义的那对花括号之内</li><li>局部变量的声明周期：从大括号的第一个语句到最后一条语句结束有效</li></ul> </li><li>全局变量：函数体之外 
  <ul><li>全局变量保存在内存的全局存储区中，占用静态的存储单元；</li><li>全局变量作用域在声明定义它的那个源文件</li><li>从程序执行开始一直到程序执行结束</li></ul> </li><li>形式参数 
  <ul><li>就近原则：局部变量对全局变量具有覆盖作用</li><li>与全局变量同名它们会优先使用。</li></ul> </li><li>当局部变量被定义时，系统不会对其初始化，您必须自行对其初始化。定义全局变量时，系统会自动对其初始化</li><li></ul> 
<h4><a id="85__574"></a>8.5 复杂参数函数</h4> 
<h5><a id="_576"></a>可变参数</h5> 
<p>根据具体的需求接受可变数量的参数</p> 
<p>使用 <strong>stdarg.h</strong> 头文件，该文件提供了实现可变参数功能的函数和宏。具体步骤如下：</p> 
<ul><li>定义一个函数，最后一个参数为省略号，省略号前面可以设置自定义参数。</li><li>在函数定义中创建一个<code>va_list</code>类型变量，该类型是在 stdarg.h 头文件中定义的。</li><li>使用 <strong>int</strong> 参数和 <code>va_start </code>宏来初始化 <strong>va_list</strong> 变量为一个参数列表。宏 va_start 是在 stdarg.h 头文件中定义的。</li><li>使用<code>va_arg</code>宏和 <code>va_list </code>变量来访问参数列表中的每个项。</li><li>使用宏 <code>va_end</code>来清理赋予 <code>va_list </code>变量的内存。</li></ul> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdarg.h&gt;</span></span>

<span class="token keyword">double</span> <span class="token function">average</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

    va_list valist<span class="token punctuation">;</span>
    <span class="token keyword">double</span> sum <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token comment">/* 为 num 个参数初始化 valist */</span>
    <span class="token function">va_start</span><span class="token punctuation">(</span>valist<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* 访问所有赋给 valist 的参数 */</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
       sum <span class="token operator">+=</span> <span class="token function">va_arg</span><span class="token punctuation">(</span>valist<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* 清理为 valist 保留的内存 */</span>
    <span class="token function">va_end</span><span class="token punctuation">(</span>valist<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> sum<span class="token operator">/</span>num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Average of 2, 3, 4, 5 = %f\n"</span><span class="token punctuation">,</span> <span class="token function">average</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Average of 5, 10, 15 = %f\n"</span><span class="token punctuation">,</span> <span class="token function">average</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
 Average of <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token operator">=</span> <span class="token number">3.500000</span>
Average of <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span> <span class="token operator">=</span> <span class="token number">10.000000</span>
</code></pre> 
<h5><a id="_623"></a>数组参数的函数</h5> 
<p><img src="https://images2.imgbox.com/62/4f/HGiQTN4L_o.png" alt="image-20220116151301496"></p> 
<p><code>void BubbleSort(int arr[10]) == void BubbleSort(int arr[]) == void BubbleSort(int *arr) </code><br> 传递不再是整个数组，而是数组的首地址（一个指针）。<br> 所以，当整型数组做函数参数时，我们通常在函数定义中，封装2个参数。一个表数组首地址，一个表元素个数。</p> 
<h5><a id="_631"></a>指针参数的函数</h5> 
<p><img src="https://images2.imgbox.com/2d/6d/sYJZkQ9j_o.png" alt="image-20220116152138803"></p> 
<h5><a id="_635"></a>结构体、共同体、枚举参数</h5> 
<h5><a id="main_637"></a>main()函数</h5> 
<ul><li>函数定义</li></ul> 
<pre><code class="prism language-c">C99 标准中，只有以下两种定义方式是正确的：

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token punctuation">)</span>  <span class="token comment">/* 无参数形式 */</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token comment">/* 带参数形式 */</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li> <p>函数参数</p> 
  <ul><li><code>int argc</code> : 用命令行运行程序时，输入命令包含的字符串个数</li><li><code>char* argv[]</code>：一维字符串数组，存储每个字符串的地址</li></ul> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i<span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"argc = %d\n"</span><span class="token punctuation">,</span>argc<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>argc<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"argv[%d] = %s\n"</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>argv<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>main()函数的返回值：</p> <p>一般main()函数能够正常完后曾需要的功能则返回值0，否则返回其他值。</p> </li></ul> 
<hr> 
<h3><a id="9__681"></a>9. 数组</h3> 
<ul><li>存储固定大小的相同元素的顺序集合</li><li>由连续的内存位置组成。最低的地址对应第一个元素，最高的地址对应最后一个元素。</li></ul> 
<h4><a id="91__686"></a>9.1 数组定义</h4> 
<p>int radius[10];</p> 
<ul><li>类型</li><li>数组名</li><li>表达式：常量或常量表达式</li></ul> 
<h4><a id="92__694"></a>9.2 数组初始化和赋值以及引用</h4> 
<p>数组初始化：</p> 
<pre><code>int arr[12] = { 1, 2 ,4, 6, 76, 8, 90 ,4, 3, 6 , 6, 8 }; 【重点】

int arr[10] = { 1, 2 ,4, 6, 76, 8, 9 };  剩余未初始化的元素，默认 0 值。 【重点】

int arr[10] = { 0 }; 初始化一个全为 0 的数组。【重点】

int arr[] = {1, 2, 4, 6, 8}; 	编译器自动求取元素个数  【重点】

int arr[] = {0};  只有一个元素，值为0



数组大小: sizeof(arr);

一行大小: sizeof(arr[0])： 二维数组的一行，就是一个一维数组。

一个元素大小:sizeof(arr[0][0])		单位：字节

行数：row = sizeof(arr)/ sizeof(arr[0])

列数：col = sizeof(arr[0])/ sizeof(arr[0][0])
</code></pre> 
<p>printf(“%p\n”, arr); == printf(“%p\n”, &amp;arr[0][0]); == printf(“%p\n”, arr[0]);</p> 
<pre><code>数组的首地址 == 数组的首元素地址 == 数组的首行地址。
</code></pre> 
<hr> 
<h4><a id="93__727"></a>9.3 二维或多维数组</h4> 
<p>二维数组的初始化：</p> 
<ol><li> <p>常规初始化：</p> <pre><code>int arr[3][5] = {<!-- -->{2, 3, 54, 56, 7 }, {2, 67, 4, 35, 9}, {1, 4, 16, 3, 78}};
</code></pre> </li><li> <p>不完全初始化：</p> <pre><code>int arr[3][5] = {<!-- -->{2, 3}, {2, 67, 4, }, {1, 4, 16, 78}};  未被初始化的数值为 0 
	
int arr[3][5] = {0};	初始化一个 初值全为0的二维数组
	
int arr[3][5] = {2, 3, 2, 67, 4, 1, 4, 16, 78};   【少见】 系统自动分配行列
</code></pre> </li><li> <p>不完全指定行列初始化：</p> <pre><code>int arr[][] = {1, 3, 4, 6, 7};  二维数组定义必须指定列值。
	
int arr[][2] = { 1, 3, 4, 6, 7 };  可以不指定行值。
</code></pre> </li></ol> 
<hr> 
<h4><a id="94__765"></a>9.4 字符数组–字符串</h4> 
<p>字符串实际上是使用 <strong>null</strong> 字符 ‘\0’ 终止的一维字符数组，没有这个 null 的话不能使用 %s 格式控制符打印。</p> 
<p><code>char str1[] = {'h', 'i', '\0'};</code> 变量，可读可写</p> 
<p><code>char name[10]="xiao ming"; </code> 变量，可读可写</p> 
<p><code>char* p = "123"; //字符串使用双引号 </code> 常量，只读,存储首个字符‘h’的地址</p> 
<p>字符串以字符‘\0’为结尾，编译器默认加上</p> 
<blockquote> 
 <p>str3[1] = ‘H’; // 错误！！<br> char *str4 = {‘h’, ‘i’, ‘\0’}; // 错误！！！</p> 
</blockquote> 
<h5><a id="_780"></a>字符串输入输出</h5> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//字符串初始化</span>
 <span class="token function">memset</span><span class="token punctuation">(</span>strname<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>strname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 把全部的元素置为0</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"=%10s=\n"</span><span class="token punctuation">,</span><span class="token string">"abcd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出10个字符宽度，右对齐，执行结果是=      abcd=</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"=%-10s=\n"</span><span class="token punctuation">,</span><span class="token string">"abcd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出10个字符宽度，左对齐，执行结果是=abcd      =</span>
</code></pre> 
<p>字符串格式化输入、输出：<br> sprintf():原来写到屏幕的“格式化字符串”，写到 参数1 str中。</p> 
<pre><code>char str[100];
sprintf(str, "%d+%d=%d\n", 10, 24, 10+24);  格式串写入str数组中。
</code></pre> 
<p>sscanf(): 将原来从屏幕获取的“格式化字符串”， 从 参数1 str中 获取。</p> 
<pre><code>char str[]= "10+24=45";
sscanf(str, "%d+%d=%d", &amp;a, &amp;b, &amp;c);  a --&gt; 10, b --&gt; 24, c --&gt; 45
</code></pre> 
<h5><a id="_816"></a>字符串操作函数</h5> 
<table><thead><tr><th>序号</th><th>函数 &amp; 目的</th></tr></thead><tbody><tr><td>1</td><td><strong>strcpy(s1, s2);</strong><br>复制字符串 s2 到字符串 s1。字符串赋值</td></tr><tr><td>2</td><td><strong>strcat(s1, s2);</strong><br>连接字符串 s2 到字符串 s1 的末尾。</td></tr><tr><td>3</td><td><strong>strlen(s1);</strong><br>扫描整个字符串，直到碰到第一个字符串结束符<code>'\0'</code>为止，然后返回计数器值(长度不包含<code>'\0'</code>)；。</td></tr><tr><td>4</td><td><strong>strcmp(s1, s2);</strong><br>如果 s1 和 s2 是相同的，则返回 0；如果 s1&lt;s2 则返回小于 0；如果 s1&gt;s2 则返回大于 0。</td></tr><tr><td>5</td><td><strong>strchr(s1, ch);</strong><br>返回一个指针，指向字符串 s1 中字符 ch 的第一次出现的位置。</td></tr><tr><td>6</td><td><strong>strstr(s1, s2);</strong><br>返回一个指针，指向字符串 s1 中字符串 s2 的第一次出现的位置。</td></tr><tr><td>7</td><td><strong>strtok()</strong><br>字符串分割<br>参1： 待拆分字符串,参2： 分割符组成的“分割串”,返回：字符串拆分后的首地址。 “拆分”:将分割字符用 '\0’替换。</td></tr></tbody></table> 
<ul><li>char *buf = “hello”; //定义一个字符串,系统自动为它加上了一个 ‘\0’</li><li>int size = sizeof(“hello”); // 6 真实容量，加上结束符号</li><li>int len = strlen(buf); // 5 实际长度，不含结束符号</li><li>int size = sizeof(buf);//8 64位计算机指针长度</li><li>int buff[] = “hello” ;int size = sizeof(buf);//6这样返回</li></ul> 
<blockquote> 
 <ol><li>strtok拆分字符串是直接在 原串 上操作，所以要求参1必须，可读可写,（<code>char *str = "www.baidu.com" </code>不行！！！）</li><li>第一次拆分，参1 传待拆分的原串。 第1+ 次拆分时，参1传 NULL.</li></ol> 
</blockquote> 
<pre><code>atoi：字符串 转 整数。
int atoi(const char *nptr);
atof：字符串 转 浮点数
atol：字符串 转 长整数
</code></pre> 
<hr> 
<h3><a id="10__848"></a>10. 指针</h3> 
<h4><a id="101__850"></a>10.1 地址</h4> 
<p>即内存中的某个位置</p> 
<ul><li>取地址运算 
  <ul><li>使用&amp;取址运算符</li><li>&amp;变量名</li></ul> </li></ul> 
<h4><a id="102__858"></a>10.2 指针和指针变量</h4> 
<p>指针指向某个内存地址<br> 地址表示一个位置</p> 
<h5><a id="_863"></a>指针变量</h5> 
<p>值为另一个变量的地址，即指针指向的地址</p> 
<ul><li> <p>类型 *</p> </li><li> <p>int* address；</p> </li><li> <p>都是一个代表内存地址长的十六进制数</p> </li><li> <p>为指针变量赋一个 NULL 值是一个良好的编程习惯。赋为 NULL 值的指针被称为空指针。</p> </li><li> <p>如需检查一个空指针，您可以使用 if 语句，如下所示：</p> 
  <ul><li> <pre><code>if(ptr)     /* 如果 p 非空，则完成 */
if(!ptr)    /* 如果 p 为空，则完成 */```
</code></pre> </li></ul> </li></ul> 
<h5><a id="void_882"></a>void指针</h5> 
<p>无类型指针<br> <code>void* address</code>定义一个空指针变量address</p> 
<p>可以接收任意一种变量地址。但是，在使用【必须】借助“强转”具体化数据类型。</p> 
<pre><code>char ch = 'R';
void *p;  // 万能指针、泛型指针
p = &amp;ch;
printf("%c\n", *(char *)p);
</code></pre> 
<p><strong>野指针：</strong></p> 
<pre><code>1) 没有一个有效的地址空间的指针。

int *p;
*p = 1000;
</code></pre> 
<ol start="2"><li> <p>p变量有一个值，但该值不是可访问的内存区域。</p> <p>int *p = 10;<br> *p = 2000;</p> </li></ol> 
<p><strong>const关键字：</strong></p> 
<ul><li> <p>修饰变量</p> <pre><code>const int a = 20;
int *p = &amp;a;
*p = 650;
printf("%d\n", a);
</code></pre> </li><li> <p>修饰指针</p> <pre><code>const int *p;
可以修改 p
不可以修改 *p。

int const *p;
同上。

int * const p;
可以修改 *p
不可以修改 p。

const int *const p;
不可以修改 p。
不可以修改 *p。

总结：const 向右修饰，被修饰的部分即为只读。
</code></pre> 
  <blockquote> 
   <p>在函数形参内，用来限制指针所对应的内存空间为只读。</p> 
  </blockquote> </li></ul> 
<h4><a id="103__946"></a>10.3 指针运算</h4> 
<ol><li>取指针元素<br> <code>*指针变量</code>：使用指针取得指针所指内存地址处的数据</li></ol> 
<blockquote> 
 <p>对有初始化的变量取地址和取元素进行赋值</p> 
</blockquote> 
<ol start="2"><li>指针的自增自减</li></ol> 
<blockquote> 
 <p>指针的自增自减1表示指针所指数据在内存中所占字节数<br> 整型指针变量自增1 表是加4<br> void指针不能进项自增自减运算</p> 
</blockquote> 
<ol start="3"><li> <p>指针的比较</p> </li><li> <p>数据类型对指针的作用： <br> 1）间接引用：<br> 决定了从指针存储的地址开始，向后读取的字节数。 （与指针本身存储空间无关。）<br> 2）加减运算：<br> 决定了指针进行 +1/-1 操作向后加过的 字节数。</p> </li><li> <p>指针 * / % ： error!!!</p> </li><li> <p>指针 ± 整数：</p> <p>1）普通指针变量±整数</p> <pre><code>char *p; 打印 p 、 p+1  偏过 1 字节。
short*p; 打印 p 、 p+1  偏过 2 字节。
int  *p; 打印 p 、 p+1  偏过 4 字节。	
</code></pre> <p>2）在数组中± 整数</p> <pre><code>short arr[] = {1, 3, 5, 8};
int *p = arr;
p+3;			// 向右(后)偏过 3 个元素
p-2;			// 向前(左)偏过 2 个元素
</code></pre> </li><li> <p>指针 ± 指针：</p> <p>指针 + 指针： error！！！</p> <p>指针 - 指针：</p> <p>​ 1） 普通变量来说， 语法允许。无实际意义。【了解】<br> ​ 2） 数组来说：偏移过的元素个数。</p> </li><li> <p>指针实现 strlen 函数：</p> <pre><code>char str[] = "hello";
char *p = str;
while (*p != '\0')
{
p++;
}
p-str; 即为 数组有效元素的个数。
</code></pre> </li><li> <p>指针数组：</p> <pre><code>一个存储地址的数组。数组内部所有元素都是地址。
1) 
int a = 10;
int b = 20;
int c = 30;
int *arr[] = {&amp;a, &amp;b, &amp;c}; // 数组元素为 整型变量 地址
2) 
int a[] = { 10 };
int b[] = { 20 };
int c[] = { 30 };
int *arr[] = { a, b, c }; // 数组元素为 数组 地址。	
指针数组本质，是一个二级指针。
二维数组， 也是一个二级指针。
</code></pre> </li></ol> 
<h5><a id="_1029"></a>指针类型转换</h5> 
<ol><li>强制类型转换</li></ol> 
<pre><code>void* addr;
((int*)addr)++
</code></pre> 
<ol start="2"><li>隐式类型转换</li></ol> 
<pre><code>printf("%x\n",addr);
//指针类型隐式转换为十六进制整型
</code></pre> 
<h4><a id="104__1045"></a>10.4 数组和指针</h4> 
<ol><li>数组名也是指针 
  <ul><li>数组名即数组第一个元素地址</li><li><strong>数组名是指针常量</strong>，不能做变量使用</li></ul> </li><li>使用数组名访问数组元素</li></ol> 
<pre><code class="prism language-c"><span class="token keyword">int</span> radius<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token operator">*</span> addr<span class="token punctuation">;</span>
addr<span class="token operator">=</span>radius<span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"radius[0] = %d\n"</span><span class="token punctuation">,</span><span class="token operator">*</span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="_1060"></a>三种访问数组元素的方法</h5> 
<ol><li> <p>使用数组下标</p> <p><code>element = radius[i]</code>使用下标</p> </li><li> <p>使用数组名<br> <code>*(数组名+i)</code> <code>element =*(radius + i)</code></p> </li><li> <p>使用指针变量<br> 将数组名赋值给指针变量</p> </li></ol> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token operator">*</span>addr<span class="token punctuation">;</span>
addr <span class="token operator">=</span>radius<span class="token punctuation">;</span>
element <span class="token operator">=</span><span class="token operator">*</span>addr<span class="token punctuation">;</span>
addr<span class="token operator">++</span><span class="token punctuation">;</span>
</code></pre> 
<p>​ <strong><code>\*p++</code>/<code>\*(p)++/</code>*(p++)<code>/</code>*p++运算规律:</strong></p> 
<ul><li>​ <strong>1.如果 <code>\*</code>和<code>++</code>/<code>--</code>都在指针变量的左边，结合方向为从右到左；</strong></li><li>​ <strong>2.如果 <code>\*</code>和<code>++</code>/<code>--</code>分别在指针变量的左边/右边，结合方向为从左到右；</strong></li><li>​ <strong>3.有括号的先执行括号的表达式，然后在执行规律1或者规律2；</strong></li></ul> 
<table><thead><tr><th align="center">A =</th><th align="center">第一步</th><th align="center">第二步</th><th align="center">得到计算结果</th></tr></thead><tbody><tr><td align="center">*p++</td><td align="center">*p</td><td align="center">p++</td><td align="center">先取值，后指针++，A = *p；</td></tr><tr><td align="center">*++p</td><td align="center">++p</td><td align="center">*(++p)</td><td align="center">先指针++，后取值， A = *(++p)；</td></tr><tr><td align="center">++*p</td><td align="center">*p</td><td align="center">(*p)+1</td><td align="center">先取值，后值++ ，A = (*p)+1；</td></tr><tr><td align="center">(*p)++</td><td align="center">*p</td><td align="center">(*p)+1</td><td align="center">先取值，后值++ ，A = (*p)+1；</td></tr></tbody></table> 
<h5><a id="_1092"></a>数组指针和指针数组</h5> 
<ul><li>数组指针即为数组的地址</li><li>指针数组保存指针类型的数组<code>int*addr[5]</code></li><li>多为数组中，最后一维保存数据，其他都是指针</li></ul> 
<p><strong>用一个指向字符的指针数组来存储一个字符串列表</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">const</span> <span class="token keyword">int</span> MAX <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>names<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                   <span class="token string">"Zara Ali"</span><span class="token punctuation">,</span>
                   <span class="token string">"Hina Ali"</span><span class="token punctuation">,</span>
                   <span class="token string">"Nuha Ali"</span><span class="token punctuation">,</span>
                   <span class="token string">"Sara Ali"</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of names[%d] = %s\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> names<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_1123"></a>多维指针和多维数组</h5> 
<ul><li> <p>指向指针的指针</p> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span>  var<span class="token punctuation">;</span>
   <span class="token keyword">int</span>  <span class="token operator">*</span>ptr<span class="token punctuation">;</span>
   <span class="token keyword">int</span>  <span class="token operator">*</span><span class="token operator">*</span>pptr<span class="token punctuation">;</span>

   var <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>

   <span class="token comment">/* 获取 var 的地址 */</span>
   ptr <span class="token operator">=</span> <span class="token operator">&amp;</span>var<span class="token punctuation">;</span>

   <span class="token comment">/* 使用运算符 &amp; 获取 ptr 的地址 */</span>
   pptr <span class="token operator">=</span> <span class="token operator">&amp;</span>ptr<span class="token punctuation">;</span>

   <span class="token comment">/* 使用 pptr 获取值 */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of var = %d\n"</span><span class="token punctuation">,</span> var <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value available at *ptr = %d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>ptr <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value available at **pptr = %d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>pptr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取多重指针元素</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
代码被执行产生以下结果
Value of var <span class="token operator">=</span> <span class="token number">3000</span>
Value available at <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token number">3000</span>
Value available at <span class="token operator">*</span><span class="token operator">*</span>pptr <span class="token operator">=</span> <span class="token number">300</span>    
</code></pre> </li><li> <p>使用数组名访问多维数组</p> <p><img src="https://images2.imgbox.com/e5/a5/PAJJBHpf_o.png" alt=""></p> </li><li> <p>使用多维数组指针变量访问数组中的每个元素</p> </li></ul> 
<p><img src="https://images2.imgbox.com/eb/00/0EsAavnZ_o.png" alt=""></p> 
<blockquote> 
 <p>​ *p_addr 相当与num[0],num[1],num[2]</p> 
</blockquote> 
<h4><a id="105__1168"></a>10.5 字符指针</h4> 
<p>定义一个字符指针变量<code>char * p_str</code></p> 
<p><strong>scanf()和printf()函数和字符指针</strong></p> 
<p>使用%s可以直接输入输出字符串，因为其输入输出需要字符指针</p> 
<p><code>char* name = "xiao ming"；</code>使用字符指针保存字符串；</p> 
<p><img src="https://images2.imgbox.com/71/d0/5psKERhu_o.png" alt="image-20220112155713228"></p> 
<h4><a id="106__1182"></a>10.6 指针和函数</h4> 
<h5><a id="c_1184"></a>c传递指针给函数</h5> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token operator">*</span>par<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">unsigned</span> <span class="token keyword">long</span> sec<span class="token punctuation">;</span>


   <span class="token function">getSeconds</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>sec <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/* 输出实际值 */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Number of seconds: %ld\n"</span><span class="token punctuation">,</span> sec <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token operator">*</span>par<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token comment">/* 获取当前的秒数 */</span>
   <span class="token operator">*</span>par <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span> <span class="token constant">NULL</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//产生下列结果：</span>
<span class="token comment">//Number of seconds :1294450468</span>
</code></pre> 
<blockquote> 
 <p>能接受指针作为参数的函数，也能接受数组作为参数</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token comment">/* 函数声明 */</span>
<span class="token keyword">double</span> <span class="token function">getAverage</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token comment">/* 带有 5 个元素的整型数组  */</span>
   <span class="token keyword">int</span> balance<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">double</span> avg<span class="token punctuation">;</span>

   <span class="token comment">/* 传递一个指向数组的指针作为参数 */</span>
   avg <span class="token operator">=</span> <span class="token function">getAverage</span><span class="token punctuation">(</span> balance<span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>

   <span class="token comment">/* 输出返回值  */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Average value is: %f\n"</span><span class="token punctuation">,</span> avg <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">double</span> <span class="token function">getAverage</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">int</span>    i<span class="token punctuation">,</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       
  <span class="token keyword">double</span> avg<span class="token punctuation">;</span>          

  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    sum <span class="token operator">+=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  avg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>sum <span class="token operator">/</span> size<span class="token punctuation">;</span>

  <span class="token keyword">return</span> avg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//产生下列结果：</span>
<span class="token comment">//Average value is: 214.40000</span>
</code></pre> 
<h5><a id="C_1259"></a>C从函数返回指针</h5> 
<blockquote> 
 <p>C 允许您从函数返回指针。必须先声明一个返回指针的函数,即指针函数</p> 
 <p>C 语言不支持在调用函数时返回局部变量的地址，除非定义局部变量为 <strong>static</strong> 变量。</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span> </span>

<span class="token comment">/* 要生成和返回随机数的函数 */</span>
<span class="token keyword">int</span> <span class="token operator">*</span> <span class="token function">getRandom</span><span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">static</span> <span class="token keyword">int</span>  r<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span>

   <span class="token comment">/* 设置种子 */</span>
   <span class="token function">srand</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span><span class="token function">time</span><span class="token punctuation">(</span> <span class="token constant">NULL</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
      r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">return</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 要调用上面定义函数的主函数 */</span>
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token comment">/* 一个指向整数的指针 */</span>
   <span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span>

   p <span class="token operator">=</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
       <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*(p + [%d]) : %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//产生下列结果</span>
<span class="token number">1523198053</span>
<span class="token number">1187214107</span>
<span class="token number">1108300978</span>
<span class="token number">430494959</span>
<span class="token number">1421301276</span>
<span class="token number">930971084</span>
<span class="token number">123250484</span>
<span class="token number">106932140</span>
<span class="token number">1604461820</span>
<span class="token number">149169022</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1523198053</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1187214107</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1108300978</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">430494959</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1421301276</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">930971084</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">123250484</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">106932140</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1604461820</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">149169022</span>
</code></pre> 
<h5><a id="_1325"></a>函数指针</h5> 
<ul><li> <p>函数指针是指向函数的指针变量。</p> </li><li> <p>函数指针可以像一般函数一样，用于调用函数、传递参数。</p> </li><li> <p><strong>本质是一个指针，指向的是一个函数的地址。</strong></p> </li><li> <p>函数指针变量的声明：<code>typedef int (*fun_ptr)(int,int); // 声明一个指向同样参数、返回值的函数指针类型</code></p> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">&gt;</span> y <span class="token operator">?</span> x <span class="token operator">:</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">/* p 是函数指针 */</span>
    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span> p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span> max<span class="token punctuation">;</span> <span class="token comment">// &amp;可以省略</span>
    <span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入三个数字:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token operator">&amp;</span> b<span class="token punctuation">,</span> <span class="token operator">&amp;</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* 与直接调用函数等价，d = max(max(a, b), c) */</span>
    d <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token function">p</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"最大的数字是: %d\n"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//输出结果如下：</span>
请输入三个数字<span class="token operator">:</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
最大的数字是<span class="token operator">:</span> <span class="token number">3</span>
</code></pre> </li></ul> 
<h5><a id="_1364"></a>指针函数</h5> 
<p>指针函数，即返回指针的函数，其本质是一个函数，而该函数的返回值是一个指针。</p> 
<h5><a id="_1368"></a>回调函数</h5> 
<p><strong>函数指针作为某个函数的参数</strong>,回调函数是由别人的函数执行时调用你实现的函数。</p> 
<blockquote> 
 <p>将一个函数作为另一个函数参数</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span>  </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token comment">// 回调函数</span>
<span class="token keyword">void</span> <span class="token function">populate_array</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>array<span class="token punctuation">,</span> <span class="token class-name">size_t</span> arraySize<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>getNextValue<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>arraySize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getNextValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取随机值</span>
<span class="token keyword">int</span> <span class="token function">getNextRandomValue</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> myarray<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">populate_array</span><span class="token punctuation">(</span>myarray<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> getNextRandomValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> myarray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//输出结果如下：</span>
<span class="token number">16807</span> <span class="token number">282475249</span> <span class="token number">1622650073</span> <span class="token number">984943658</span> <span class="token number">1144108930</span> <span class="token number">470211272</span> <span class="token number">101027544</span> <span class="token number">1457850878</span> <span class="token number">1458777923</span> <span class="token number">2007237709</span>
</code></pre> 
<hr> 
<h3><a id="11__1407"></a>11. 结构体</h3> 
<p>存储不同类型的数据项。</p> 
<h4><a id="111__1411"></a>11.1 定义</h4> 
<pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">Books</span><span class="token comment">//结构体标签</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">char</span>  title<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//结构体成员格式</span>
   <span class="token keyword">char</span>  author<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  subject<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>   book_id<span class="token punctuation">;</span>
<span class="token punctuation">}</span> book<span class="token punctuation">;</span><span class="token comment">//结构体变量</span>
<span class="token comment">//三部分至少出现两个</span>
##################################################################
<span class="token comment">//此声明声明了拥有3个成员的结构体，分别为整型的a，字符型的b和双精度的c</span>
<span class="token comment">//同时又声明了结构体变量s1</span>
<span class="token comment">//这个结构体并没有标明其标签</span>
<span class="token keyword">struct</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a<span class="token punctuation">;</span>
    <span class="token keyword">char</span> b<span class="token punctuation">;</span>
    <span class="token keyword">double</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span> s1<span class="token punctuation">;</span>

<span class="token comment">//此声明声明了拥有3个成员的结构体，分别为整型的a，字符型的b和双精度的c</span>
<span class="token comment">//结构体的标签被命名为SIMPLE,没有声明变量</span>
<span class="token keyword">struct</span> <span class="token class-name">SIMPLE</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a<span class="token punctuation">;</span>
    <span class="token keyword">char</span> b<span class="token punctuation">;</span>
    <span class="token keyword">double</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//用SIMPLE标签的结构体，另外声明了变量t1、t2、t3</span>
<span class="token keyword">struct</span> <span class="token class-name">SIMPLE</span> t1<span class="token punctuation">,</span> t2<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>t3<span class="token punctuation">;</span>

<span class="token comment">//也可以用typedef创建新类型</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a<span class="token punctuation">;</span>
    <span class="token keyword">char</span> b<span class="token punctuation">;</span>
    <span class="token keyword">double</span> c<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> Simple2<span class="token punctuation">;</span>
<span class="token comment">//现在可以用Simple2作为类型声明新的结构体变量</span>
Simple2 u1<span class="token punctuation">,</span> u2<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>u3<span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>结构体的成员可以包含其他结构体，也可以包含指向自己结构体类型的指针，而通常这种指针的应用是为了实现一些更高级的数据结构如链表和树等。</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token comment">//此结构体的声明包含了其他的结构体</span>
<span class="token keyword">struct</span> <span class="token class-name">COMPLEX</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> string<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">SIMPLE</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//此结构体的声明包含了指向自己类型的指针</span>
<span class="token keyword">struct</span> <span class="token class-name">NODE</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> string<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">NODE</span> <span class="token operator">*</span>next_node<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//</span>
<span class="token keyword">struct</span> <span class="token class-name">B</span><span class="token punctuation">;</span>    <span class="token comment">//对结构体B进行不完整声明</span>

<span class="token comment">//结构体A中包含指向结构体B的指针</span>
<span class="token keyword">struct</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">B</span> <span class="token operator">*</span>partner<span class="token punctuation">;</span>
    <span class="token comment">//other members;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//结构体B中包含指向结构体A的指针，在A声明完后，B也随之进行声明</span>
<span class="token keyword">struct</span> <span class="token class-name">B</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">A</span> <span class="token operator">*</span>partner<span class="token punctuation">;</span>
    <span class="token comment">//other members;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="112__1489"></a>11.2 结构体变量初始化</h4> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">Books</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">char</span>  title<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  author<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  subject<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>   book_id<span class="token punctuation">;</span>
<span class="token punctuation">}</span> book <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"C 语言"</span><span class="token punctuation">,</span> <span class="token string">"NOWCODER"</span><span class="token punctuation">,</span> <span class="token string">"编程语言"</span><span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//或者</span>
<span class="token keyword">struct</span> <span class="token class-name">Books</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">char</span>  title<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  author<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  subject<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>   book_id<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">books</span> book<span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"C 语言"</span><span class="token punctuation">,</span> <span class="token string">"NOWCODER"</span><span class="token punctuation">,</span> <span class="token string">"编程语言"</span><span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment"></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"title : %s\nauthor: %s\nsubject: %s\nbook_id: %d\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>title<span class="token punctuation">,</span> book<span class="token punctuation">.</span>author<span class="token punctuation">,</span> book<span class="token punctuation">.</span>subject<span class="token punctuation">,</span> book<span class="token punctuation">.</span>book_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//执行输出结果</span>
title <span class="token operator">:</span> C 语言
author<span class="token operator">:</span> NOWCODER
subject<span class="token operator">:</span> 编程语言
book_id<span class="token operator">:</span> <span class="token number">123456</span>
</code></pre> 
<p>访问结构体成员</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">Books</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">char</span>  title<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  author<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  subject<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>   book_id<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/* 函数声明 */</span>
<span class="token keyword">void</span> <span class="token function">printBook</span><span class="token punctuation">(</span> <span class="token keyword">struct</span> <span class="token class-name">Books</span> book <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">struct</span> <span class="token class-name">Books</span> Book1<span class="token punctuation">;</span>        <span class="token comment">/* 声明 Book1，类型为 Books */</span>
   <span class="token keyword">struct</span> <span class="token class-name">Books</span> Book2<span class="token punctuation">;</span>        <span class="token comment">/* 声明 Book2，类型为 Books */</span>

   <span class="token comment">/* Book1 详述 */</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book1<span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token string">"C Programming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book1<span class="token punctuation">.</span>author<span class="token punctuation">,</span> <span class="token string">"Nuha Ali"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book1<span class="token punctuation">.</span>subject<span class="token punctuation">,</span> <span class="token string">"C Programming Tutorial"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   Book1<span class="token punctuation">.</span>book_id <span class="token operator">=</span> <span class="token number">6495407</span><span class="token punctuation">;</span>

   <span class="token comment">/* Book2 详述 */</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book2<span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token string">"Telecom Billing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book2<span class="token punctuation">.</span>author<span class="token punctuation">,</span> <span class="token string">"Zara Ali"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book2<span class="token punctuation">.</span>subject<span class="token punctuation">,</span> <span class="token string">"Telecom Billing Tutorial"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   Book2<span class="token punctuation">.</span>book_id <span class="token operator">=</span> <span class="token number">6495700</span><span class="token punctuation">;</span>

   <span class="token comment">/* 输出 Book1 信息 */</span>
   <span class="token function">printBook</span><span class="token punctuation">(</span> Book1 <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/* 输出 Book2 信息 */</span>
   <span class="token function">printBook</span><span class="token punctuation">(</span> Book2 <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">printBook</span><span class="token punctuation">(</span> <span class="token keyword">struct</span> <span class="token class-name">Books</span> book <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book title : %s\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book author : %s\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book subject : %s\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book book_id : %d\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>book_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="113__1572"></a>11.3 结构作为函数参数</h4> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">Books</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">char</span>  title<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  author<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  subject<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>   book_id<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/* 函数声明 */</span>
<span class="token keyword">void</span> <span class="token function">printBook</span><span class="token punctuation">(</span> <span class="token keyword">struct</span> <span class="token class-name">Books</span> book <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">struct</span> <span class="token class-name">Books</span> Book1<span class="token punctuation">;</span>        <span class="token comment">/* 声明 Book1，类型为 Books */</span>
   <span class="token keyword">struct</span> <span class="token class-name">Books</span> Book2<span class="token punctuation">;</span>        <span class="token comment">/* 声明 Book2，类型为 Books */</span>

   <span class="token comment">/* Book1 详述 */</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book1<span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token string">"C Programming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book1<span class="token punctuation">.</span>author<span class="token punctuation">,</span> <span class="token string">"Nuha Ali"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book1<span class="token punctuation">.</span>subject<span class="token punctuation">,</span> <span class="token string">"C Programming Tutorial"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   Book1<span class="token punctuation">.</span>book_id <span class="token operator">=</span> <span class="token number">6495407</span><span class="token punctuation">;</span>

   <span class="token comment">/* Book2 详述 */</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book2<span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token string">"Telecom Billing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book2<span class="token punctuation">.</span>author<span class="token punctuation">,</span> <span class="token string">"Zara Ali"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book2<span class="token punctuation">.</span>subject<span class="token punctuation">,</span> <span class="token string">"Telecom Billing Tutorial"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   Book2<span class="token punctuation">.</span>book_id <span class="token operator">=</span> <span class="token number">6495700</span><span class="token punctuation">;</span>

   <span class="token comment">/* 输出 Book1 信息 */</span>
   <span class="token function">printBook</span><span class="token punctuation">(</span> Book1 <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/* 输出 Book2 信息 */</span>
   <span class="token function">printBook</span><span class="token punctuation">(</span> Book2 <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">printBook</span><span class="token punctuation">(</span> <span class="token keyword">struct</span> <span class="token class-name">Books</span> book <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book title : %s\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book author : %s\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book subject : %s\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book book_id : %d\n"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span>book_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="114__1622"></a>11.4 指向结构体的指针</h4> 
<ul><li>定义指向结构的指针：<code>struct Books *struct_pointer;</code></li><li>指针变量中存储结构变量的地址:<code>struct_pointer = &amp;Book1;</code></li><li>使用指向该结构的指针访问结构的成员，您必须使用 -&gt; 运算符:<code>struct_pointer-&gt;title;</code></li></ul> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">Books</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">char</span>  title<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  author<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span>  subject<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>   book_id<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/* 函数声明 */</span>
<span class="token keyword">void</span> <span class="token function">printBook</span><span class="token punctuation">(</span> <span class="token keyword">struct</span> <span class="token class-name">Books</span> <span class="token operator">*</span>book <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">struct</span> <span class="token class-name">Books</span> Book1<span class="token punctuation">;</span>        <span class="token comment">/* 声明 Book1，类型为 Books */</span>
   <span class="token keyword">struct</span> <span class="token class-name">Books</span> Book2<span class="token punctuation">;</span>        <span class="token comment">/* 声明 Book2，类型为 Books */</span>

   <span class="token comment">/* Book1 详述 */</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book1<span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token string">"C Programming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book1<span class="token punctuation">.</span>author<span class="token punctuation">,</span> <span class="token string">"Nuha Ali"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book1<span class="token punctuation">.</span>subject<span class="token punctuation">,</span> <span class="token string">"C Programming Tutorial"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   Book1<span class="token punctuation">.</span>book_id <span class="token operator">=</span> <span class="token number">6495407</span><span class="token punctuation">;</span>

   <span class="token comment">/* Book2 详述 */</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book2<span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token string">"Telecom Billing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book2<span class="token punctuation">.</span>author<span class="token punctuation">,</span> <span class="token string">"Zara Ali"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">strcpy</span><span class="token punctuation">(</span> Book2<span class="token punctuation">.</span>subject<span class="token punctuation">,</span> <span class="token string">"Telecom Billing Tutorial"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   Book2<span class="token punctuation">.</span>book_id <span class="token operator">=</span> <span class="token number">6495700</span><span class="token punctuation">;</span>

   <span class="token comment">/* 通过传 Book1 的地址来输出 Book1 信息 */</span>
   <span class="token function">printBook</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>Book1 <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/* 通过传 Book2 的地址来输出 Book2 信息 */</span>
   <span class="token function">printBook</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>Book2 <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">printBook</span><span class="token punctuation">(</span> <span class="token keyword">struct</span> <span class="token class-name">Books</span> <span class="token operator">*</span>book <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book title : %s\n"</span><span class="token punctuation">,</span> book<span class="token operator">-&gt;</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book author : %s\n"</span><span class="token punctuation">,</span> book<span class="token operator">-&gt;</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book subject : %s\n"</span><span class="token punctuation">,</span> book<span class="token operator">-&gt;</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Book book_id : %d\n"</span><span class="token punctuation">,</span> book<span class="token operator">-&gt;</span>book_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="115__1676"></a>11.5 位域</h4> 
<pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">bs</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> b<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>data<span class="token punctuation">;</span>
<span class="token comment">//位域定义</span>
<span class="token comment">//说明 data 为 bs 变量，共占两个字节。其中位域 a 占 8 位，位域 b 占 2 位，位域 c 占 6 位。</span>
</code></pre> 
<p>一个位域存储在同一个字节中，如一个字节所剩空间不够存放另一位域时，则会从下一单元起存放该位域。也可以有意使某位域从下一单元开始。例如：</p> 
<pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">bs</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">unsigned</span> a<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token keyword">unsigned</span>  <span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">/* 空域 */</span>
    <span class="token keyword">unsigned</span> b<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">/* 从下一单元开始存放 */</span>
    <span class="token keyword">unsigned</span> c<span class="token operator">:</span><span class="token number">4</span>
<span class="token punctuation">}</span><span class="token comment">//位域可以是无名位域，这时它只用来作填充或调整位置。无名的位域是不能使用的。例如：</span>
</code></pre> 
<p>由于位域不允许跨两个字节，因此位域的长度不能大于一个字节的长度，也就是说不能超过8位二进位。如果最大长度大于计算机的整数字长，一些编译器可能会允许域的内存重叠，另外一些编译器可能会把大于一个域的部分存储在下一个字中。</p> 
<pre><code class="prism language-c"><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">bs</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">unsigned</span> a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">unsigned</span> b<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">unsigned</span> c<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> bit<span class="token punctuation">,</span><span class="token operator">*</span>pbit<span class="token punctuation">;</span>
    bit<span class="token punctuation">.</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">/* 给位域赋值（应注意赋值不能超过该位域的允许范围） */</span>
    bit<span class="token punctuation">.</span>b<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">;</span>    <span class="token comment">/* 给位域赋值（应注意赋值不能超过该位域的允许范围） */</span>
    bit<span class="token punctuation">.</span>c<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">;</span>    <span class="token comment">/* 给位域赋值（应注意赋值不能超过该位域的允许范围） */</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d,%d,%d\n"</span><span class="token punctuation">,</span>bit<span class="token punctuation">.</span>a<span class="token punctuation">,</span>bit<span class="token punctuation">.</span>b<span class="token punctuation">,</span>bit<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* 以整型量格式输出三个域的内容 */</span>
    pbit<span class="token operator">=</span><span class="token operator">&amp;</span>bit<span class="token punctuation">;</span>    <span class="token comment">/* 把位域变量 bit 的地址送给指针变量 pbit */</span>
    pbit<span class="token operator">-&gt;</span>a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">/* 用指针方式给位域 a 重新赋值，赋为 0 */</span>
    pbit<span class="token operator">-&gt;</span>b<span class="token operator">&amp;=</span><span class="token number">3</span><span class="token punctuation">;</span>    <span class="token comment">/* 使用了复合的位运算符 "&amp;="，相当于：pbit-&gt;b=pbit-&gt;b&amp;3，位域 b 中原有值为 7，与 3 作按位与运算的结果为 3（111&amp;011=011，十进制值为 3） */</span>
    pbit<span class="token operator">-&gt;</span>c<span class="token operator">|=</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">/* 使用了复合位运算符"|="，相当于：pbit-&gt;c=pbit-&gt;c|1，其结果为 15 */</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d,%d,%d\n"</span><span class="token punctuation">,</span>pbit<span class="token operator">-&gt;</span>a<span class="token punctuation">,</span>pbit<span class="token operator">-&gt;</span>b<span class="token punctuation">,</span>pbit<span class="token operator">-&gt;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* 用指针方式输出了这三个域的值 */</span>
<span class="token punctuation">}</span><span class="token comment">//位域使用</span>
</code></pre> 
<h4><a id="116__1720"></a>11.6 结构体数组</h4> 
<h4><a id="117__1722"></a>11.7 结构体占用内存大小</h4> 
<p>​ 结构体的占用内存的总大小不一定等于全部成员变量占用内存大小之和。在编译器的具体实现中，为了提高内存寻址的效率，各个成员之间可能会存在缝隙。用sizeof可以得到结构体占用内存在总大小，sizeof(结构体名)或 sizeof(结构体变量名)都可以。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">pack</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span></span>
<span class="token comment">//增加代码可以使结构体成员变量之间的内存没有空隙。</span>
</code></pre> 
<h4><a id="118__1731"></a>11.8 结构体复制</h4> 
<pre><code>结构体变量名不是结构体变量的地址
void *memcpy(void *dest, const void *src, size_t n);
</code></pre> 
<ul><li>复制的内容不同，strcpy只能复制字符串，而memcpy可以复制任意内容，例如字符数组、整型、结构体、类等。</li><li>用途不同，通常在复制字符串时用strcpy，而需要复制其他类型数据时则一般用memcpy。</li><li>复制的方法不同，strcpy不需要指定长度，它遇到被复制字符的串结尾符0才结束，memcpy则是根据其第3个参数决定复制的长度。</li></ul> 
<h4><a id="119__1742"></a>11.9 内存空间复制和清零</h4> 
<h5><a id="memset_1744"></a>memset函数:</h5> 
<p><code>void *memset(void *s, int v, size_t n);</code>s为内存空间的地址，一般是数组名或结构体的地址。v为要填充的值，填0就是初始化。n为要填充的字节数。</p> 
<h5><a id="bzero_1748"></a>bzero函数</h5> 
<p><code>void bzero(void *s, size_t n);</code>s为内存空间的地址，一般是数组名或结构体的地址。n为要清零的字节数。</p> 
<hr> 
<h3><a id="12___1754"></a>12. 共同（用）体</h3> 
<ul><li>结构体：将所有数据结合组成</li><li>共同体：所有数组存在一起</li></ul> 
<h4><a id="121_1759"></a>12.1定义</h4> 
<p><strong>共用体</strong>是一种特殊的数据类型，允许您在相同的内存位置存储不同的数据类型,内部所有成员变量地址一致。等同于整个联合体的地址。。您可以定义一个带有多成员的共用体，但是任何时候只能有一个成员带有值。共用体提供了一种使用相同的内存位置的有效方式。联合体的大小，是内部成员变量中，最大的那个成员变量的大小。修改其中任意一个成员变量的值，其他成员变量会随之修改。</p> 
<pre><code class="prism language-c"><span class="token keyword">union</span> Data
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span>
   <span class="token keyword">float</span> f<span class="token punctuation">;</span>
   <span class="token keyword">char</span>  str<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> data<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="122__1772"></a>12.2 共同体变量</h4> 
<pre><code class="prism language-c"><span class="token keyword">union</span> Data
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span>
   <span class="token keyword">float</span> f<span class="token punctuation">;</span>
   <span class="token keyword">char</span>  str<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> data<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">union</span> Data
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span>
   <span class="token keyword">float</span> f<span class="token punctuation">;</span>
   <span class="token keyword">char</span>  str<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">union</span> Data data<span class="token punctuation">;</span>        

   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"Memory size occupied by data : %d\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>共用体大小计算，不一定就等于最大成员</p> 
<pre><code class="prism language-c"><span class="token keyword">union</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> a
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span> A <span class="token punctuation">;</span>  <span class="token comment">// sizeof(A) = 3</span>

<span class="token keyword">union</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> a
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">short</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span> B <span class="token punctuation">;</span>  <span class="token comment">// sizeof(B) = 4</span>

<span class="token keyword">union</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> a
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span>  b<span class="token punctuation">;</span>
<span class="token punctuation">}</span> C <span class="token punctuation">;</span>  <span class="token comment">// sizeof(C) = 8</span>
<span class="token comment">//结构体或共用体的内存大小必须为类型体内最大数据类型字节数的整数倍，即地址对齐（这样做的目的是为了更快速高效地访问内存，以空间换时间）。代码中第一个共用体中的最大数据类型为char-1个字节，所以该共用体直接就是3个字节的大小。第二个共用体最大类型为short-2个字节，而char数组a占用3个字节，3不为2的整数倍，所以补齐1个字节，该共用体就是4个字节的大小。第三个共用体最大类型为int-4个字节，char数组a占用5个字节，5不为4的整数倍，所以补齐3个字节，该共用体就是8个字节的大小。</span>
</code></pre> 
<h4><a id="123__1827"></a>12.3 共同体数组</h4> 
<p>不可以同时初始化不同类型数据，只能使用赋值的方式在共同体数组保存不同类型数值</p> 
<h4><a id="124__1831"></a>12.4 共同体指针</h4> 
<p>共同体指针变量</p> 
<p>用法相当于结构体</p> 
<hr> 
<h3><a id="13_1839"></a>13.预处理，文件包含</h3> 
<h4><a id="131__1841"></a>13.1 程序预处理</h4> 
<p>控制编译器在编译链接之前，对代码进行的一些前期处理，也叫预编译</p> 
<p><img src="https://images2.imgbox.com/2c/6b/mhetDggD_o.png" alt="image-20220116164948898"></p> 
<p>预处理原因：</p> 
<ol><li>修改代码</li><li>确定程序中没能去欸当年的个东西</li><li>重复使用某些代码</li></ol> 
<hr> 
<table><thead><tr><th>指令</th><th>描述</th></tr></thead><tbody><tr><td>#define</td><td>定义宏</td></tr><tr><td>#include</td><td>包含一个源代码文件</td></tr><tr><td>#undef</td><td>取消已定义的宏</td></tr><tr><td>#ifdef</td><td>如果宏已经定义，则返回真</td></tr><tr><td>#ifndef</td><td>如果宏没有定义，则返回真</td></tr><tr><td>#if</td><td>如果给定条件为真，则编译下面代码</td></tr><tr><td>#else</td><td>#if 的替代方案</td></tr><tr><td>#elif</td><td>如果前面的 #if 给定条件不为真，当前条件为真，则编译下面代码</td></tr><tr><td>#endif</td><td>结束一个 #if……#else 条件编译块</td></tr><tr><td>#error</td><td>当遇到标准错误时，输出错误消息</td></tr><tr><td>#pragma</td><td>使用标准化方法，向编译器发布特殊的命令到编译器中</td></tr></tbody></table> 
<hr> 
<h4><a id="132__1873"></a>13.2 宏定义</h4> 
<p>格式：<code>#define 被替换内容 替换为的内容</code></p> 
<ul><li>不带参数 <code>#define a b </code></li><li>带参数 <code>#define add(a,b) a+b</code>： 
  <ul><li>类似与函数定义，但是宏定义在预处理阶段进行，函数定义在编译阶段实现，函数调用在函数运行时完成的</li><li>宏定义直接的替换，函数调用是有参数传递和返回值过程</li><li>宏定义无数据类型</li></ul> </li><li>宏定义跨行，需要在宏定义语句后加一个反斜杠 <code>\</code>，最后一行不需要，宏延续运算符（\）</li></ul> 
<p><img src="https://images2.imgbox.com/b7/ae/2a6jJQes_o.png" alt="image-20220116170843828"></p> 
<ul><li> <p>字符串常量化运算符（#）</p> <p>在宏定义中，当需要把一个宏的参数转换为字符串常量时，则使用字符串常量化运算符（#）。在宏中使用的该运算符有一个特定的参数或参数列表。例如：</p> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>  <span class="token macro-name function">message_for</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>  </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token function">printf</span><span class="token punctuation">(</span>#a </span><span class="token string">" and "</span> <span class="token expression"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">b</span> </span></span><span class="token string">": We love you!\n"</span><span class="token expression"><span class="token punctuation">)</span></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token function">message_for</span><span class="token punctuation">(</span>Carole<span class="token punctuation">,</span> Debra<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
产生结果如下：
    Carole and Debra<span class="token operator">:</span> We love you<span class="token operator">!</span>
</code></pre> </li><li> <p>标记粘贴运算符（##）</p> <p>宏定义内的标记粘贴运算符（##）会合并两个参数。它允许在宏定义中两个独立的标记被合并为一个标记。例如：<code>token##34就是等于token34，A##B就是把B放在A后面连起来即为AB</code></p> <pre><code>#include &lt;stdio.h&gt;

#define tokenpaster(n)   printf ("token" #n " = %d", token##n)

int main(void)
{
   int token34 = 40;

   tokenpaster(34);
   return 0;
}
产生如下结果：
token34 = 40
s
printf ("token34 = %d", token34);
</code></pre> </li><li> <p>defined() 运算符</p> <p>预处理器 <strong>defined</strong> 运算符是用在常量表达式中的，用来确定一个标识符是否已经使用 #define 定义过。如果指定的标识符已定义，则值为真（非零）。如果指定的标识符未定义，则值为假（零）。下面的实例演示了 defined() 运算符的用法</p> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token operator">!</span><span class="token function">defined</span> <span class="token punctuation">(</span>MESSAGE<span class="token punctuation">)</span></span></span>
   <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MESSAGE</span> <span class="token string">"You wish!"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Here is the message: %s\n"</span><span class="token punctuation">,</span> MESSAGE<span class="token punctuation">)</span><span class="token punctuation">;</span>  
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <p>ANSI <a href="https://www.codersrc.com/c%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80" rel="nofollow">C </a>定义了许多宏。在编程中您可以使用这些宏，但是不能直接修改这些预定义的宏。</p> <pre><code>__DATE__    当前日期，一个以 “MMM DD YYYY” 格式表示的字符串常量。

__TIME__    当前时间，一个以 “HH:MM:SS” 格式表示的字符串常量。

__FILE__    这会包含当前文件名，一个字符串常量。

__LINE__    这会包含当前行号，一个十进制常量。

__STDC__    当编译器以 ANSI 标准编译时，则定义为 1；判断该文件是不是标准C程序。

__FUNCTION__ 程序预编译时预编译器将用所在的函数名，返回值是字符串;
</code></pre> </li></ul> 
<h4><a id="133__1963"></a>13.3 预编译控制</h4> 
<ul><li><code>if</code>：其后表达式为真则保留之后的语句块</li><li><code>ifdef</code>：其后的标识符是<code>#define</code>中被替换的内容，那么之后的语句块保留，否则删除</li><li><code>ifndef</code>：与上一个相反</li><li><code>elif</code>：</li><li><code>else</code></li><li><code>endif</code>结束<code>if控制</code></li></ul> 
<p><img src="https://images2.imgbox.com/42/f0/WFsLmPg5_o.png" alt="image-20220116171529141"></p> 
<ul><li> <p>预定义宏</p> <p>ANSI C 定义了许多宏。在编程中您可以使用这些宏，但是不能直接修改这些预定义的宏。</p> 
  <table><thead><tr><th>宏</th><th>描述</th></tr></thead><tbody><tr><td><strong>DATE</strong></td><td>当前日期，一个以 “MMM DD YYYY” 格式表示的字符常量。</td></tr><tr><td><strong>TIME</strong></td><td>当前时间，一个以 “HH:MM:SS” 格式表示的字符常量。</td></tr><tr><td><strong>FILE</strong></td><td>这会包含当前文件名，一个字符串常量。</td></tr><tr><td><strong>LINE</strong></td><td>这会包含当前行号，一个十进制常量。</td></tr><tr><td><strong>STDC</strong></td><td>当编译器以 ANSI 标准编译时，则定义为 1。</td></tr></tbody></table><pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"File :%s\n"</span><span class="token punctuation">,</span> <span class="token constant">__FILE__</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Date :%s\n"</span><span class="token punctuation">,</span> <span class="token constant">__DATE__</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Time :%s\n"</span><span class="token punctuation">,</span> <span class="token constant">__TIME__</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Line :%d\n"</span><span class="token punctuation">,</span> <span class="token constant">__LINE__</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ANSI :%d\n"</span><span class="token punctuation">,</span> __STDC__ <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
将产生以下结果：
File <span class="token operator">:</span>test<span class="token punctuation">.</span>c
Date <span class="token operator">:</span>Jun <span class="token number">2</span> <span class="token number">2012</span>
Time <span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">24</span>
Line <span class="token operator">:</span><span class="token number">8</span>
ANSI <span class="token operator">:</span><span class="token number">1</span>
</code></pre> </li></ul> 
<h4><a id="134__2007"></a>13.4 文件包含</h4> 
<ul><li> <p>头文件：公共代码，即头文件，<code>.h</code>结尾，常用的函数声明，宏定义，公共结构体类型，共同体，枚举类型等，放在头文件中</p> </li><li> <p>源文件：非公共的宏定义，结构体类型，以及函数定义，都放在源文件中</p> </li><li> <p><code>include 头文件包含</code>：</p> 
  <ul><li>系统头文件：<code>#include &lt;头文件名&gt;</code>，从系统设定和用户设定的包含路径查找头文件，没找到直接报错。</li><li>自定义头文件：<code>#include “头文件名”</code>，从源文件放置的路径开始查找，没找到再从系统设定和用户设定的包含路径查找头文件，没找到报错。</li></ul> </li><li> <p>有条件包含：有时需要从多个不同的头文件中选择一个引用到程序中。例如，需要指定在不同的操作系统上使用的配置参数。您可以通过一系列条件来实现这点，如下：</p> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">SYSTEM_1</span></span>
   <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">"system_1.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">SYSTEM_2</span></span>
   <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">"system_2.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">SYSTEM_3</span></span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre> </li><li> <p>只引用一次：如果一个头文件被引用两次，编译器会处理两次头文件的内容，这将产生错误。为了防止这种情况，标准的做法是把文件的整个内容放在条件编译语句中，如下：</p> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">HEADER_FILE</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEADER_FILE</span></span>

the entire header file file

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre> </li><li> <p>c语言标准头文件：</p> <p><img src="https://images2.imgbox.com/39/e7/oFO65xQP_o.png" alt="image-20220117143840076"></p> </li></ul> 
<h3><a id="14__2045"></a>14. 文件操作</h3> 
<h4><a id="141__2047"></a>14.1 文件指针</h4> 
<p>标识确定文件，保存文件信息所在的内存地址</p> 
<ul><li>定义一个文件指针变量：<code>FILE * 文件指针变量名</code></li></ul> 
<h4><a id="142__2053"></a>14.2 文件打开</h4> 
<ul><li> <p>文件打开函数,函数返回一个文件指针</p> <p><code>FILE * fopen(const char *fname, const char *mode);</code></p> </li><li> <p>fname : 字符指针变量，指向文件路径以及文件名</p> 
  <ul><li>绝对路径：路径使用双斜杠，</li><li>相对路径：程序运行目录开始算</li></ul> </li><li> <p>mode： 文件打开方式</p> <p><img src="https://images2.imgbox.com/ec/e0/3Lxla93H_o.png" alt="image-20220117144908672"></p> </li><li> <pre><code class="prism language-c">FILE <span class="token operator">*</span>pfile<span class="token punctuation">;</span>
pfile <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li></ul> 
<h4><a id="143__2073"></a>14.3 文件关闭</h4> 
<ul><li> <p>文件关闭函数:关闭成功返回0,否则返回EOF</p> <p>这个函数实际上，会清空缓冲区中的数据，关闭文件，并释放用于该文件的所有内存。EOF 是一个定义在头文件 <strong>stdio.h</strong> 中的常量。</p> <p>C 标准库提供了各种函数来按字符或者以固定长度字符串的形式读写文件。</p> <p><code>int fclose( FILE *stream)</code></p> </li><li> <pre><code class="prism language-c"><span class="token function">fclose</span><span class="token punctuation">(</span>pfile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li></ul> 
<h4><a id="144__2089"></a>14.4 文件读</h4> 
<ul><li> <p>读写一个字符<code>fgetc()</code></p> 
  <ul><li>文件读取单个字符函数：<code>int fgetc( FILE * fp );</code></li><li><strong>fgetc()</strong> 函数从 fp 所指向的输入文件的开头读取一个字符。返回值是读取的字符，如果发生错误则返回 <strong>EOF</strong>。</li></ul> </li><li> <p>读取一个字符串 <code>fgets() </code></p> 
  <ul><li>读取字符串函数： <code>char *fgets( char *buf, int n, FILE *fp );</code></li><li>函数 <strong>fgets()</strong> 从 fp 所指向的输入流中读取 n - 1 个字符。它会把读取的字符串复制到缓冲区 <strong>buf</strong>，并在最后追加一个 <strong>null</strong> 字符来终止字符串。</li><li>如果这个函数在读取最后一个字符之前就遇到一个换行符 ‘\n’ 或文件的末尾 EOF，则只会返回读取到的字符，包括换行符。</li><li>也可以使用 <code>int fscanf(FILE *fp, const char *format, ...)</code> 函数来从文件中读取字符串，但是在遇到第一个空格字符时，它会停止读取</li></ul> </li><li> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   FILE <span class="token operator">*</span>fp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span> buff<span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

   fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"../test.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">fscanf</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span> <span class="token string">"%s"</span><span class="token punctuation">,</span> buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"1: %s\n"</span><span class="token punctuation">,</span> buff <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">fgets</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>FILE<span class="token operator">*</span><span class="token punctuation">)</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"2: %s\n"</span><span class="token punctuation">,</span> buff <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">fgets</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>FILE<span class="token operator">*</span><span class="token punctuation">)</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"3: %s\n"</span><span class="token punctuation">,</span> buff <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
结果如下：
<span class="token number">1</span><span class="token operator">:</span> This
<span class="token number">2</span><span class="token operator">:</span> is testing <span class="token keyword">for</span> fprintf<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">3</span><span class="token operator">:</span> This is testing <span class="token keyword">for</span> fputs<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> </li></ul> 
<h4><a id="145__2131"></a>14.5 文件写</h4> 
<ul><li> <p>写入字符<code>fputc()</code></p> 
  <ul><li>写字符函数：<code>int fputc( int c, FILE *fp );</code></li><li>函数 <strong>fputc()</strong> 把参数 c 的字符值写入到 fp 所指向的输出流中。如果写入成功，它会返回写入的字符，如果发生错误，则会返回 <strong>EOF</strong>。</li></ul> </li><li> <p>写入字符串 <code>fputs()</code></p> 
  <ul><li>写字符串函数： <code>int fputs( const char *s, FILE *fp );</code></li><li>函数 <strong>fputs()</strong> 把字符串 <strong>s</strong> 写入到 fp 所指向的输出流中。如果写入成功，它会返回一个非负值，如果发生错误，则会返回 <strong>EOF</strong>。</li><li>也可以使用 <code>int fprintf(FILE *fp,const char *format, ...)</code>函数来写把一个字符串写入到文件中。</li></ul> </li><li> <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	FILE<span class="token operator">*</span> fp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"../test.txt"</span><span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fprintf</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span> <span class="token string">"%s %s %s %d\n"</span><span class="token punctuation">,</span> <span class="token string">"We"</span><span class="token punctuation">,</span> <span class="token string">"are"</span><span class="token punctuation">,</span> <span class="token string">"in"</span><span class="token punctuation">,</span> <span class="token number">2022</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fputs</span><span class="token punctuation">(</span><span class="token string">"This is testing for fputs...\n"</span><span class="token punctuation">,</span> fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//当上面的代码被编译和执行时，它会在 /tmp 目录中创建一个新的文件 test.txt，并使用两个不同的函数写入两行</span>
</code></pre> </li></ul> 
<h4><a id="146__2160"></a>14.6 读一个数据块</h4> 
<p>二进制读，通常是数组或结构体</p> 
<ul><li> <p>读一个数据块 <code>fread()</code></p> 
  <ul><li> <p>读数据块函数 ，从一个打开的文件中读取数据，每次调用都读出紧跟已读块之后的一个数据块。</p> <p><code>size_t fread(void *buffer, size_t size, size_t number, FILE *file);</code></p> </li><li> <p>buffer:即读出内容放到buffer指针所指地方</p> </li><li> <p>size：读出数据块以size字节为单位</p> </li><li> <p>number： 要读出的数据块为number个size单位，即整个块大小为size*num个字节。</p> </li><li> <p>file:k即文件指针变量</p> </li><li> <p>函数返回值为一个整型数据，表示的是读出的数据块的大小，如果数值小于size*num，，表示出错或者已经读取到文件尾部了。这个时候可以用feof()和ferror()函数来检查错误。</p> </li></ul> </li><li> <p>写一个数据块 <code>fwrite()</code></p> 
  <ul><li> <p>写数据块函数:</p> <p><code>size_t fwrite(const void *buffer, size_t size, size_t number, FILE *file);</code></p> </li><li> <p><img src="https://images2.imgbox.com/0d/95/MxMieodQ_o.png" alt="image-20220117155019704"></p> </li></ul> </li></ul> 
<h4><a id="147__2188"></a>14.7 文件其他操作</h4> 
<ol><li> <p>随机读写文件</p> 
  <ul><li> <p><code>int fseek(FILE *stream, long int offset, int whence)</code></p> </li><li> <p><strong>stream</strong> – 这是指向 FILE 对象的指针，该 FILE 对象标识了流。</p> </li><li> <p><strong>offset</strong> – 这是相对 whence 的偏移量，以字节为单位。</p> </li><li> <p><strong>whence</strong> – 这是表示开始添加偏移 offset 的位置。它一般指定为下列常量之一：</p> </li><li> 
    <table><thead><tr><th align="left">常量</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">SEEK_SET</td><td align="left">文件的开头</td></tr><tr><td align="left">SEEK_CUR</td><td align="left">文件指针的当前位置</td></tr><tr><td align="left">SEEK_END</td><td align="left">文件的末尾</td></tr></tbody></table></li><li> <p>如果成功，则该函数返回零，否则返回非零值。</p> </li><li> <pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   FILE <span class="token operator">*</span>fp<span class="token punctuation">;</span>

   fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"file.txt"</span><span class="token punctuation">,</span><span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">fputs</span><span class="token punctuation">(</span><span class="token string">"This is runoob.com"</span><span class="token punctuation">,</span> fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
   <span class="token function">fseek</span><span class="token punctuation">(</span> fp<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token constant">SEEK_SET</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">fputs</span><span class="token punctuation">(</span><span class="token string">" C Programming Langauge"</span><span class="token punctuation">,</span> fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
   <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//This is C Programming Langauge</span>
</code></pre> </li></ul> </li><li> <p>回到文件头 <code>rewind()</code></p> 
  <ul><li><code>void rewind(FILE *stream)</code>设置文件位置为给定流 <strong>stream</strong> 的文件的开头。</li><li><strong>stream</strong> – 这是指向 FILE 对象的指针，该 FILE 对象标识了流。</li><li>fseek(pfile,0,SEEK_SET);</li><li>rewind(pfile);</li></ul> </li><li> <p>检查上一个文件操作是否有操作错误<code>ferror(FILE *stream)</code></p> </li><li> <p>检查是否到达文件尾<code>feof(FILE * stream)</code></p> <pre><code>//生成1GB空文件
FILE *file；
file=fopen("test.txt","w");
fseek(file,1024*1024*1024,SEEK_SET);
fputc('\0',file);
fclose(file);
</code></pre> </li><li> <p>获取文件读写指针位置。<code>long ftell(FILE *stream);</code></p> <p>返回：从文件当前读写位置到起始位置的偏移量。<br> 借助 ftell(fp) + fseek(fp, 0, SEEK_END); 来获取文件大小。</p> </li><li> <p>获取文件状态：<code>int stat(const char *path, struct stat *buf);</code></p> <p>参1： 访问文件的路径<br> 参2： 文件属性结构体<br> 返回值： 成功： 0， 失败： -1；</p> <p>打开文件，对于系统而言，系统资源消耗较大。</p> </li><li> <p>删除、重命名文件：</p> 
  <ol><li><code>int remove(const char *pathname);</code> 删除文件。</li><li><code>int rename(const char *oldpath, const char *newpath);</code> 重名文件</li></ol> </li><li> <p>手动刷新缓冲区： 实时刷新。<code>int fflush(FILE *stream);</code>成功：0失败：-1</p> <pre><code>缓冲区刷新：
标准输出-- stdout -- 标准输出缓冲区。   写给屏幕的数据，都是先存缓冲区中，由缓冲区一次性刷新到物理设备（屏幕）
标准输入 -- stdin -- 标准输入缓冲区。	从键盘读取的数据，直接读到 缓冲区中， 由缓冲区给程序提供数据。
预读入、缓输出。
行缓冲：printf(); 遇到\n就会将缓冲区中的数据刷新到物理设备上。
全缓冲：文件。 缓冲区存满， 数据刷新到物理设备上。
无缓冲：perror。 缓冲区中只要有数据，就立即刷新到物理设备。
文件关闭时， 缓冲区会被自动刷新。  隐式回收：关闭文件、刷新缓冲区、释放malloc
</code></pre> </li></ol> 
<h3><a id="15__2280"></a>15. 匈牙利命名法则</h3> 
<h4><a id="1__2282"></a>1. 属性部分</h4> 
<pre><code>g_   全局变量
c_ 　常量
m_ 　c++类成员变量
s_ 　静态变量
</code></pre> 
<h4><a id="2__2291"></a>2. 类型部分</h4> 
<pre><code>数组     a
指针     p
长指针   Long Pointer 
函数     fn
无效     v
句柄     h
长整型   l
布尔     b
浮点型（有时也指文件）　f
双字     dw
字符串　 sz
短整型　 n
双精度浮点　d
计数　   c（通常用cnt）
字符　   ch（通常用c）
整型　   i（通常用n）
字节　   by
字　     w
实型　   r
无符号　 u
</code></pre> 
<h4><a id="3__2316"></a>3. 描述部分</h4> 
<pre><code>最大　    Max
最小　    Min
初始化　  Init
临时变量　T（或Temp）
源对象　  Src
目的对象　Dest
</code></pre> 
<h4><a id="4_MFC_2327"></a>4. MFC、句柄、控件及结构的命名规范</h4> 
<pre><code>Windows类型 样本变量 MFC类 样本变量
HWND hWnd CWnd* pWnd
HDLG hDlg CDialog* pDlg
HDC hDC CDC* pDC
HGDIOBJ hGdiObj CGdiObject* pGdiObj
HPEN hPen CPen* pPen
HBRUSH hBrush CBrush* pBrush
HFONT hFont CFont* pFont
HBITMAP hBitmap CBitmap* pBitmap
HPALETTE hPaltte CPalette* pPalette
HRGN hRgn CRgn* pRgn
HMENU hMenu CMenu* pMenu
HWND hCtl CState* pState
HWND hCtl CButton* pButton
HWND hCtl CEdit* pEdit
HWND hCtl CListBox* pListBox
HWND hCtl CComboBox* pComboBox
HWND hCtl CScrollBar* pScrollBar
HSZ hszStr CString pStr
POINT pt CPoint pt
SIZE size CSize size
RECT rect CRect rect
</code></pre> 
<h4><a id="5__2354"></a>5. 变量命名规范</h4> 
<pre><code>ch char 8位字符 chGrade
ch TCHAR 如果_UNICODE定义，则为16位字符 chName
b BOOL 布尔值 bEnable
n int 整型（其大小依赖于操作系统） nLengt
n UINT 无符号值（其大小依赖于操作系统） nHeight
w WORD 16位无符号值 wPos
l LONG 32位有符号整型 lOffset
dw DWORD 32位无符号整型 dwRange
p * 指针 pDoc
lp FAR* 远指针 lpszName
lpsz LPSTR 32位字符串指针 lpszName
lpsz LPCSTR 32位常量字符串指针 lpszName
lpsz LPCTSTR 如果_UNICODE定义，则为32位常量字符串指针 lpszName
h handle Windows对象句柄 hWnd
lpfn callback 指向CALLBACK函数的远指针
前缀 符号类型 实例 范围
IDR_ 不同类型的多个资源共享标识 IDR_MAIINFRAME 1～0x6FFF
IDD_ 对话框资源 IDD_SPELL_CHECK 1～0x6FFF
HIDD_ 对话框资源的Help上下文 HIDD_SPELL_CHECK 0x20001～0x26FF
IDB_ 位图资源 IDB_COMPANY_LOGO 1～0x6FFF
IDC_ 光标资源 IDC_PENCIL 1～0x6FFF
IDI_ 图标资源 IDI_NOTEPAD 1～0x6FFF
ID_ 来自菜单项或工具栏的命令 ID_TOOLS_SPELLING 0x8000～0xDFFF
HID_ 命令Help上下文 HID_TOOLS_SPELLING 0x18000～0x1DFFF
IDP_ 消息框提示 IDP_INVALID_PARTNO 8～0xDEEF
HIDP_ 消息框Help上下文 HIDP_INVALID_PARTNO 0x30008～0x3DEFF
IDS_ 串资源 IDS_COPYRIGHT 1～0x7EEF
IDC_ 对话框内的控件 IDC_RECALC 8～0xDEEF
应用程序符号命名规范

Microsoft MFC宏命名规范:

名称 类型
_AFXDLL 唯一的动态连接库（Dynamic Link Library，DLL）版本
_ALPHA 仅编译DEC Alpha处理器
_DEBUG 包括诊断的调试版本
_MBCS 编译多字节字符集
_UNICODE 在一个应用程序中打开Unicode
AFXAPI MFC提供的函数
CALLBACK 通过指针回调的函数
</code></pre> 
<h4><a id="6__2399"></a>6. 库标识符命名法</h4> 
<pre><code>标识符 值和含义
u ANSI（N）或Unicode（U）
d 调试或发行：D = 调试，忽略标识符为发行。
静态库版本命名规范:

库 描述
NAFXCWD.LIB 调试版本：MFC静态连接库
NAFXCW.LIB 发行版本：MFC静态连接库
UAFXCWD.LIB 调试版本：具有Unicode支持的MFC静态连接库
UAFXCW.LIB 发行版本：具有Unicode支持的MFC静态连接库
动态连接库命名规范:

名称 类型
_AFXDLL 唯一的动态连接库（DLL）版本
WINAPI Windows所提供的函数
Windows.h中新的命名规范:

类型 定义描述
WINAPI 使用在API声明中的FAR PASCAL位置，如果正在编写一个具有导出API人口点的DLL，则可以在自己的API中使用该类型
CALLBACK 使用在应用程序回叫例程，如窗口和对话框过程中的FAR PASCAL的位置
LPCSTR 与LPSTR相同，只是LPCSTR用于只读串指针，其定义类似（const char FAR*）
UINT 可移植的无符号整型类型，其大小由主机环境决定（对于Windows NT和Windows 9x为32位）；它是unsigned int的同义词
LRESULT 窗口程序返回值的类型
LPARAM 声明lParam所使用的类型，lParam是窗口程序的第四个参数
WPARAM 声明wParam所使用的类型，wParam是窗口程序的第三个参数
LPVOID 一般指针类型，与（void *）相同，可以用来代替LPSTR
</code></pre> 
<h4><a id="7__2430"></a>7. 举例</h4> 
<pre><code>hwnd ：        h 是类型描述，表示句柄， wnd 是变量对象描述，表示窗口，所以 hwnd 表示窗口句柄；
pfnEatApple ： pfn 是类型描述，表示指向函数的指针， EatApple 是变量对象描述，所以它表示指向 EatApple 函数的函数指针变量。
g_cch ：       g_ 是属性描述，表示全局变量，c 和 ch 分别是计数类型和字符类型，一起表示变量类型，这里忽略了对象描述，所以它表示一个对字符进行计数的全局变量。

MFC、句柄、控件及结构的命名规范：
Windows类型 样本变量；MFC类 样本变量
HWND hWnd； 
CWnd* pWnd；
HDLG hDlg； 
CDialog* pDlg；
HDC hDC； 
CDC* pDC；
HGDIOBJ hGdiObj； 
CGdiObject* pGdiObj；
HPEN hPen； 
CPen* pPen；
HBRUSH hBrush； 
CBrush* pBrush；
HFONT hFont； 
CFont* pFont；
HBITMAP hBitmap； 
CBitmap* pBitmap；
HPALETTE hPaltte； 
CPalette* pPalette；
HRGN hRgn； 
CRgn* pRgn；
HMENU hMenu； 
CMenu* pMenu；
HWND hCtl； 
CState* pState；
HWND hCtl； 
CButton* pButton；
HWND hCtl； 
CEdit* pEdit；
HWND hCtl； 
CListBox* pListBox；
HWND hCtl； 
CComboBox* pComboBox；
HWND hCtl； 
CScrollBar* pScrollBar；
HSZ hszStr； 
CString pStr；
POINT pt； 
CPoint pt；
SIZE size； 
CSize size；
RECT rect； 
CRect rect；
</code></pre> 
<h3><a id="16_linux_2483"></a>16. 目录操作（linux）</h3> 
<h4><a id="1__2485"></a>1. 获取目录</h4> 
<p><code>char *getcwd(char * buf,size_t size);</code>getcwd函数把当前工作目录存入buf中，如果目录名超出了参数size长度，函数返回NULL，如果成功，返回buf。</p> 
<pre><code>  char strpwd[301];
  memset(strpwd,0,sizeof(strpwd));
  getcwd(strpwd,300);
  printf("当前目录是：%s\n",strpwd);
</code></pre> 
<h4><a id="2__2496"></a>2. 切换工作目录</h4> 
<p><code>int chdir(const char *path);</code>返回值：0-切换成功；非0-失败。</p> 
<h4><a id="3__2500"></a>3. 目录的创建与删除</h4> 
<p><code>int mkdir(const char *pathname, mode_t mode);</code>mode的含义将按open系统调用的O_CREAT选项中的有关定义设置，当然，它还要服从umask的设置况，是不是看不明白？那先固定填0755，注意，0不要省略哦，它表示八进制。</p> 
<pre><code>mkdir("/tmp/aaa",0755);   // 创建/tmp/aaa目录
</code></pre> 
<p>删除目录函数的声明：<code>int rmdir(const char *pathname);</code></p> 
<h4><a id="4__2510"></a>4. 获取目录中的文件列表</h4> 
<p><strong>包含头文件</strong>：<code>#include &lt;dirent.h&gt;</code></p> 
<p><strong>相关库函数：</strong></p> 
<p>打开目录的函数opendir的声明：<code>DIR *opendir(const char *pathname);</code></p> 
<p>读取目录的函数readdir的声明：<code>struct dirent *readdir(DIR *dirp);</code></p> 
<p>关闭目录的函数closedir的声明：<code>int closedir(DIR *dirp);</code></p> 
<p><strong>数据结构：</strong></p> 
<p>目录指针DIR：<code>DIR *目录指针名;</code></p> 
<p>struct dirent结构体:每调用一次readdir函数会返回一个struct dirent的地址，存放了本次读取到的内容，它的原理与fgets函数读取文件相同。</p> 
<pre><code>struct dirent
{
   long d_ino;                    // inode number 索引节点号
   off_t d_off;                   // offset to this dirent 在目录文件中的偏移
   unsigned short d_reclen;     // length of this d_name 文件名长
   unsigned char d_type;         // the type of d_name 文件类型
   char d_name [NAME_MAX+1];    // file name文件名，最长255字符
};

d_name文件名或目录名。

d_type描述了文件的类型，有多种取值，最重要的是8和4，8-常规文件（A regular file）；4-目录（A directory），其它的暂时不关心。
</code></pre> 
<p>实例：</p> 
<pre><code>/*
 * 程序名：book123.c，此程序用于演示读取目录下的文件名信息
 * 作者：C语言技术网(www.freecplus.net) 日期：20190525
*/
#include &lt;stdio.h&gt;
#include &lt;dirent.h&gt;
 
int main(int argc,char *argv[])
{
  if (argc != 2)  { printf("请指定目录名。\n"); return -1; }
 
  DIR *dir;   // 定义目录指针
 
  // 打开目录
  if ( (dir=opendir(argv[1])) == 0 ) return -1;
 
  // 用于存放从目录中读取到的文件和目录信息
  struct dirent *stdinfo;
 
  while (1)
  {
    // 读取一条记录并显示到屏幕
    if ((stdinfo=readdir(dir)) == 0) break;
 
    printf("name=%s,type=%d\n",stdinfo-&gt;d_name,stdinfo-&gt;d_type);
  }
 
  closedir(dir);   // 关闭目录指针
}
</code></pre> 
<pre><code>#include &lt;stdio.h&gt;
#include &lt;dirent.h&gt;
 
// 列出目录及子目录下的文件
int ReadDir(const char *strpathname);
 
int main(int argc,char *argv[])
{
  if (argc != 2)  { printf("请指定目录名。\n"); return -1; }
 
  // 列出目录及子目录下的文件
  ReadDir(argv[1]);
}
 
// 列出目录及子目录下的文件
int ReadDir(const char *strpathname)
{
  DIR *dir;   // 定义目录指针
  char strchdpath[256];  // 子目录的全路径
 
  if ( (dir=opendir(strpathname)) == 0 ) return -1; // 打开目录
 
  struct dirent *stdinfo; // 用于存放从目录读取到的文件和目录信息
 
  while (1)
  {
    if ((stdinfo=readdir(dir)) == 0) break;   // 读取一记录
 
    if (strncmp(stdinfo-&gt;d_name,".",1)==0) continue;  // 以.开始的文件不读
 
    if (stdinfo-&gt;d_type==8)    // 如果是文件，显示出来
      printf("name=%s/%s\n",strpathname,stdinfo-&gt;d_name);
 
    if (stdinfo-&gt;d_type==4)   // 如果是目录，再调用一次ReadDir
    {
      sprintf(strchdpath,"%s/%s",strpathname,stdinfo-&gt;d_name);
      ReadDir(strchdpath);
    }
  }
 
  closedir(dir);   // 关闭目录指针
}
</code></pre> 
<p><img src="https://images2.imgbox.com/6c/0b/mDFa4pIq_o.png" alt="image-20220317214502962"></p> 
<h4><a id="5_2624"></a>5.文件目录操作扩展</h4> 
<h5><a id="access_2626"></a><strong>access库函数</strong></h5> 
<p>access函数用于判断当前操作系统用户对文件或目录的存取权限。</p> 
<p><strong>包含头文件</strong></p> 
<pre><code>#include &lt;unistd.h&gt;
</code></pre> 
<p>函数声明：</p> 
<pre><code>int access(const char *pathname, int mode);
</code></pre> 
<p>pathname文件名或目录名，可以是当前目录的文件或目录，也可以列出全路径。</p> 
<p>mode 需要判断的存取权限。在头文件unistd.h中的预定义如下：</p> 
<pre><code>#define R_OK 4     // R_OK 只判断是否有读权限
#define W_OK 2    // W_OK 只判断是否有写权限
#define X_OK 1     // X_OK 判断是否有执行权限
#define F_OK 0     // F_OK 只判断是否存在
</code></pre> 
<p>返回值：</p> 
<p>当pathname满足mode的条件时候返回0，不满足返回-1。</p> 
<p>在实际开发中，access函数主要用于判断文件或目录是否是存在。</p> 
<h5><a id="stat_2659"></a>stat库函数</h5> 
<p><strong>stat结构体</strong></p> 
<p>struct stat结构体用于存放文件和目录的状态信息，如下：</p> 
<pre><code>struct stat
{
  dev_t st_dev;   // device 文件的设备编号
  ino_t st_ino;   // inode 文件的i-node
  mode_t st_mode;   // protection 文件的类型和存取的权限
  nlink_t st_nlink;   // number of hard links 连到该文件的硬连接数目, 刚建立的文件值为1.
  uid_t st_uid;   // user ID of owner 文件所有者的用户识别码
  gid_t st_gid;   // group ID of owner 文件所有者的组识别码
  dev_t st_rdev;  // device type 若此文件为设备文件, 则为其设备编号
  off_t st_size;  // total size, in bytes 文件大小, 以字节计算
  unsigned long st_blksize;  // blocksize for filesystem I/O 文件系统的I/O 缓冲区大小.
  unsigned long st_blocks;  // number of blocks allocated 占用文件区块的个数, 每一区块大小为512 个字节.
  time_t st_atime;  // time of lastaccess 文件最近一次被存取或被执行的时间, 一般只有在用mknod、 utime、read、write 与tructate 时改变.
  time_t st_mtime;  // time of last modification 文件最后一次被修改的时间, 一般只有在用mknod、 utime 和write 时才会改变
  time_t st_ctime;  // time of last change i-node 最近一次被更改的时间, 此参数会在文件所有者、组、 权限被更改时更新
};
</code></pre> 
<p>struct stat结构体的成员变量比较多，对程序员来说，重点关注st_mode、st_size和st_mtime成员就可以了。注意st_mtime是一个整数表达的时间，需要程序员自己写代码转换格式。</p> 
<p>st_mode成员的取值很多，或者使用如下两个宏来判断。</p> 
<pre><code>  S_ISREG(st_mode)  // 是否为一般文件 
  S_ISDIR(st_mode)  // 是否为目录
</code></pre> 
<p><strong>stat库函数</strong>包含头文件：</p> 
<pre><code>#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;
</code></pre> 
<p>函数声明：</p> 
<pre><code>int stat(const char *path, struct stat *buf);
</code></pre> 
<p>stat函数获取path指定文件或目录的信息，并将信息保存到结构体buf中，执行成功返回0，失败返回-1。</p> 
<pre><code>//实例
#include &lt;stdio.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;
 
// 本程序运行要带一个参数，即文件或目录名
int main(int argc,char *argv[])
{
  if (argc != 2)  { printf("请指定目录或文件名。\n"); return -1; }
 
  if (access(argv[1],F_OK) != 0) { printf("文件或目录%s不存在。\n",argv[1]); return -1; }
 
  struct stat ststat;
 
  // 获取文件的状态信息
  if (stat(argv[1],&amp;ststat) != 0) return -1;
 
  if (S_ISREG(ststat.st_mode)) printf("%s是一个文件。\n",argv[1]);
  if (S_ISDIR(ststat.st_mode)) printf("%s是一个目录。\n",argv[1]);
}
</code></pre> 
<h5><a id="utime_2732"></a>utime库函数</h5> 
<p>utime函数用于修改文件的存取时间和更改时间。</p> 
<p><strong>包含头文件：</strong></p> 
<pre><code>#include &lt;utime.h&gt;
</code></pre> 
<p>函数声明：</p> 
<pre><code>int utime(const char *filename, const struct utimbuf *times);
</code></pre> 
<p>函数说明：utime()用来修改参数filename 文件所属的inode 存取时间。如果参数times为空指针(NULL), 则该文件的存取时间和更改时间全部会设为目前时间。结构utimbuf 定义如下：</p> 
<pre><code>struct utimbuf
{
  time_t actime;
  time_t modtime;
};
</code></pre> 
<p>返回值：执行成功则返回0，失败返回-1。</p> 
<h5><a id="rename_2760"></a>rename库函数</h5> 
<p>rename函数用于重命名文件或目录，相当于操作系统的mv命令，对程序员来说，在程序中极少重命名目录，但重命名文件是经常用到的功能。</p> 
<p>包含头文件：<code>#include &lt;stdio.h&gt;</code></p> 
<p>函数声明：</p> 
<pre><code>int rename(const char *oldpath, const char *newpath);
</code></pre> 
<p>参数说明：</p> 
<p>oldpath 文件或目录的原名。</p> 
<p>newpath 文件或目录的新的名称。</p> 
<p>返回值：0-成功，-1-失败。</p> 
<h5><a id="remove_2780"></a>remove库函数</h5> 
<p>remove函数用于删除文件或目录，相当于操作系统的rm命令。</p> 
<p>包含头文件：</p> 
<pre><code>#include &lt;stdio.h&gt;
</code></pre> 
<p>函数声明：</p> 
<pre><code>int remove(const char *pathname);
</code></pre> 
<p>参数说明：</p> 
<p>pathname 待删除的文件或目录名。</p> 
<p>返回值：0-成功，-1-失败。</p> 
<hr> 
<h3><a id="17_linux_2806"></a>17. 时间操作（linux）</h3> 
<p>采用1970年1月1日作为UNIX的纪元时间，1970年1月1日0点作为计算机表示时间的是中间点，将从1970年1月1日开始经过的秒数用一个整数存放，这种高效简洁的时间表示方法被称为“Unix时间纪元”，向左和向右偏移都可以得到更早或者更后的时间。</p> 
<h4><a id="1_time_t_2810"></a>1. time_t别名</h4> 
<p>用time_t来表示时间数据类型，它是一个long（长整数）类型的别名，在time.h文件中定义，表示一个日历时间，是从1970年1月1日0时0分0秒到现在的秒数。</p> 
<pre><code>typedef long time_t;
</code></pre> 
<h4><a id="2_time_2818"></a>2. time库函数</h4> 
<p>time函数的用途是返回一个值，也就是从1970年1月1日0时0分0秒到现在的秒数。</p> 
<pre><code>time_t time(time_t *t);
</code></pre> 
<p>time函数有两种调用方法：</p> 
<pre><code>time_t tnow;
tnow =time(0);     // 将空地址传递给time函数，并将time返回值赋给变量tnow

=============或
time(&amp;tnow);       // 将变量tnow的地址作为参数传递给time函数
</code></pre> 
<h4><a id="3_tm_2836"></a>3. tm结构体</h4> 
<p>ime_t只是一个长整型，不符合我们的使用习惯，需要转换成可以方便表示时间的结构体，即tm结构体，tm结构体在time.h中声明，如下：</p> 
<pre><code>struct tm
{
  int tm_sec;     // 秒：取值区间为[0,59]
  int tm_min;     // 分：取值区间为[0,59]
  int tm_hour;    // 时：取值区间为[0,23]
  int tm_mday;    // 日期：一个月中的日期：取值区间为[1,31]
  int tm_mon;     // 月份：（从一月开始，0代表一月），取值区间为[0,11]
  int tm_year;    // 年份：其值等于实际年份减去1900
  int tm_wday;    // 星期：取值区间为[0,6]，其中0代表星期天，1代表星期一，以此类推
  int tm_yday;    // 从每年的1月1日开始的天数：取值区间为[0,365]，其中0代表1月1日，1代表1月2日，以此类推
  int tm_isdst;   // 夏令时标识符，该字段意义不大，我们不用夏令时。
};
</code></pre> 
<h4><a id="4_localtime_2855"></a>4. localtime库函数</h4> 
<p>localtime函数用于把time_t表示的时间转换为struct tm结构体表示的时间，函数返回struct tm结构体的地址。</p> 
<pre><code>struct tm * localtime(const time_t *);
</code></pre> 
<p>struct tm结构体包含了时间的各要素，但还不是我们习惯的时间表达方式，我们可以用格式化输出printf、sprintf或fprintf等函数，把struct tm结构体转换为我们想要的结果。</p> 
<pre><code>#include &lt;stdio.h&gt;
#include &lt;time.h&gt;
 
int main(int argc,char *argv[])
{
  time_t tnow;
  tnow=time(0);      // 获取当前时间
  printf("tnow=%lu\n",tnow);   // 输出整数表示的时间
 
  struct tm *sttm; 
  sttm=localtime(&amp;tnow);  // 把整数的时间转换为struct tm结构体的时间
 
  // yyyy-mm-dd hh24:mi:ss格式输出，此格式用得最多
  printf("%04u-%02u-%02u %02u:%02u:%02u\n",sttm-&gt;tm_year+1900,sttm-&gt;tm_mon+1,\
          sttm-&gt;tm_mday,sttm-&gt;tm_hour,sttm-&gt;tm_min,sttm-&gt;tm_sec);
 
  printf("%04u年%02u月%02u日%02u时%02u分%02u秒\n",sttm-&gt;tm_year+1900,\
          sttm-&gt;tm_mon+1,sttm-&gt;tm_mday,sttm-&gt;tm_hour,sttm-&gt;tm_min,sttm-&gt;tm_sec);
 
  // 只输出年月日
  printf("%04u-%02u-%02u\n",sttm-&gt;tm_year+1900,sttm-&gt;tm_mon+1,sttm-&gt;tm_mday);
}
</code></pre> 
<h4><a id="5_mktime_2890"></a>5. mktime库函数</h4> 
<p>mktime函数的功能与localtime函数相反。</p> 
<p>localtime函数用于把time_t表示的时间转换为struct tm表示的时间。</p> 
<p>mktime 函数用于把struct tm表示的时间转换为time_t表示的时间。</p> 
<pre><code>#include &lt;stdio.h&gt;
#include &lt;time.h&gt;
#include &lt;string.h&gt;
 
int main(int argc,char *argv[])
{
  // 2019-12-25 15:05:03整数表示是1577257503
  struct tm sttm; 
  memset(&amp;sttm,0,sizeof(sttm));
 
  sttm.tm_year=2019-1900; // 注意，要减1900
  sttm.tm_mon=12-1;        // 注意，要减1
  sttm.tm_mday=25;
  sttm.tm_hour=15;
  sttm.tm_min=5;
  sttm.tm_sec=3;
  sttm.tm_isdst = 0;
  printf("2019-12-25 15:05:03 is %lu\n",mktime(&amp;sttm));
}
</code></pre> 
<h4><a id="6__2920"></a>6. 程序睡眠</h4> 
<p>在实际开发中，我们经常需要把程序挂起一段时间，可以使用sleep和usleep两个库函数，需要包含unistd.h头文件中。函数的声明如下：</p> 
<pre><code>unsigned int sleep(unsigned int seconds);
int usleep(useconds_t usec);
</code></pre> 
<p>sleep函数的参数是秒，usleep函数的参数是微秒，1秒=1000000微秒。</p> 
<pre><code> sleep(1);           // 程序睡眠1秒。
  sleep(10);          // 程序睡眠10秒。
  usleep(100000);    // 程序睡眠十分之一秒。
  usleep(1000000);   // 程序睡眠一秒。
</code></pre> 
<h4><a id="7_2938"></a>7.精确到微秒的计时器</h4> 
<p><strong>精确到微秒的timeval结构体</strong></p> 
<p>timeval结构体在sys/time.h文件中定义，声明为：</p> 
<pre><code>struct timeval
{
  long  tv_sec;  // 1970年1月1日到现在的秒。
  long  tv_usec; // 当前秒的微妙，即百万分之一秒。
};
</code></pre> 
<p><strong>时区timezone 结构体</strong></p> 
<p>imezone 结构体在sys/time.h文件中定义，声明为：</p> 
<pre><code>struct timezone
{
  int tz_minuteswest;  // 和UTC（格林威治时间）差了多少分钟。
  int tz_dsttime;      // type of DST correction，修正参数据，忽略
};
</code></pre> 
<p><strong>gettimeofday库函数</strong></p> 
<p>gettimeofday是获得当前的秒和微秒的时间，其中的秒是指1970年1月1日到现在的秒，微秒是指当前秒已逝去的微秒数，可以用于程序的计时。调用gettimeofday函数需要包含sys/time.h头文件。</p> 
<pre><code>int gettimeofday(struct  timeval *tv, struct  timezone *tz )
</code></pre> 
<p>当前的时间存放在tv 结构体中，当地时区的信息则放到tz所指的结构体中，tz可以为空。</p> 
<p>函数执行成功后返回0，失败后返回-1。</p> 
<p>在使用gettimeofday()函数时，第二个参数一般都为空，我们一般都只是为了获得当前时间，不关心时区的信息。</p> 
<pre><code>#include &lt;stdio.h&gt;
#include &lt;sys/time.h&gt;   // 注意，不是time.h
 
int main()
{
  struct timeval begin,end;  // 定义用于存放开始和结束的时间
 
  gettimeofday(&amp;begin,0);    // 计时器开始
  printf("begin time(0)=%d,tv_sec=%d,tv_usec=%d\n",time(0),begin.tv_sec,begin.tv_usec);
 
  sleep(2);
  usleep(100000);     // 程序睡眠十分之一秒。
 
  gettimeofday(&amp;end,0);      // 计时器结束
  printf("end   time(0)=%d,tv_sec=%d,tv_usec=%d\n",time(0),end.tv_sec,end.tv_usec);
 
  printf("计时过去了%d微秒。\n",\
         (end.tv_sec-begin.tv_sec)*1000000+(end.tv_usec-begin.tv_usec));
}
</code></pre> 
<hr> 
<h3><a id="18gdb_3002"></a>18.调试工具gdb</h3> 
<p>执行以下命令安装或升级。</p> 
<pre><code>yum -y install gdb
</code></pre> 
<p>用gcc编译源程序的时候，编译后的可执行文件不会包含源程序代码，如果您打算编译后的程序可以被调试，编译的时候要加-g的参数，例如：</p> 
<pre><code> gcc -g -o book113 book113.c
</code></pre> 
<p>在命令提示符下输入gdb book113就可以调试book113程序了。</p> 
<pre><code> gdb book113
</code></pre> 
<h5><a id="_3022"></a>基本调试命令</h5> 
<table><thead><tr><th><strong>命令</strong></th><th><strong>命令****缩写</strong></th><th><strong>命令说明</strong></th></tr></thead><tbody><tr><td>set args</td><td></td><td>设置主程序的参数。例如：./book119 /oracle/c/book1.c /tmp/book1.c设置参数的方法是：gdb book119(gdb) set args /oracle/c/book1.c /tmp/book1.c</td></tr><tr><td>break</td><td>b</td><td>设置断点，b 20 表示在第20行设置断点，可以设置多个断点。</td></tr><tr><td>run</td><td>r</td><td>开始运行程序, 程序运行到断点的位置会停下来，如果没有遇到断点，程序一直运行下去。</td></tr><tr><td>next</td><td>n</td><td>执行当前行语句，如果该语句为函数调用，不会进入函数内部执行。</td></tr><tr><td>step</td><td>s</td><td>执行当前行语句，如果该语句为函数调用，则进入函数执行其中的第一条语句。注意了，如果函数是库函数或第三方提供的函数，用s也是进不去的，因为没有源代码，如果是您自定义的函数，只要有源码就可以进去。</td></tr><tr><td>print</td><td>p</td><td>显示变量值，例如：p name表示显示变量name的值。</td></tr><tr><td>continue</td><td>c</td><td>继续程序的运行，直到遇到下一个断点。</td></tr><tr><td>set var name=value</td><td></td><td>设置变量的值，假设程序有两个变量：int ii; char name[21];set var ii=10 把ii的值设置为10；set var name=“西施” 把name的值设置为"西施"，注意，不是strcpy。</td></tr><tr><td>quit</td><td>q</td><td>退出gdb环境。</td></tr></tbody></table> 
<hr> 
<h3><a id="19makefile_3038"></a>19.makefile</h3> 
<p>make，可以用它来管理多模块程序的编译和链接，直至生成可执行文件。</p> 
<p>make程序需要一个编译规则说明文件，称为makefile，makefile文件中描述了整个软件工程的编译规则和各个文件之间的依赖关系。</p> 
<p>make是一个命令工具，是一个解释makefile中指令的命令工具，一般来说大多数编译器都有这个命令，使用make可以是重新编译的次数达到最小化。</p> 
<pre><code>all:book1 book46
 
book1:book1.c
        gcc -o book1 book1.c
 
book46:book46.c _public.h _public.c
        gcc -o book46 book46.c _public.c
 
clean:
        rm -f book1 book46
</code></pre> 
<p><strong>第一行</strong></p> 
<pre><code>all:book book46
</code></pre> 
<p>all: 这是固定的写法。</p> 
<p>book1 book46表示需要编译目标程序的清单，中间用空格分隔开，如果清单很长，可以用\换行。</p> 
<p><strong>第二行</strong></p> 
<p>makefile文件中的空行就像C程序中的空行一样，只是为了书写整洁，没有什么意义。</p> 
<p><strong>第三行</strong></p> 
<pre><code>book1:book1.c
</code></pre> 
<p>book1:表示需要编译的目标程序。</p> 
<p>如果要编译目标程序book1，需要依赖源程序book1.c，当book1.c的内容发生了变化，执行make的时候就会重新编译book1。</p> 
<p><strong>第四行</strong></p> 
<pre><code>        gcc -o book1 book1.c
</code></pre> 
<p>这是一个编译命令，和在操作系统命令行输入的命令一样，但是要注意一个问题，在gcc之前要用tab键，看上去像8个空格，实际不是，一定要用tab，空格不行。</p> 
<p><strong>第六行</strong></p> 
<pre><code>book46:book46.c _public.h _public.c
</code></pre> 
<p>与第三行的含义相同。</p> 
<p>book46:表示编译的目标程序。</p> 
<p>如果要编译目标程序book46，需要依赖源程序book46.c、_public.h和_public.c三个文件，只要任何一个的内容发生了变化，执行make的时候就会重新编译book46。</p> 
<p><strong>第七行</strong></p> 
<pre><code>        gcc -o book46 book46.c _public.c
</code></pre> 
<p>与第四行的含义相同。</p> 
<p><strong>第九行</strong></p> 
<pre><code>clean:
</code></pre> 
<p>清除目标文件，清除的命令由第十行之后的脚本来执行。</p> 
<p><strong>第十行</strong></p> 
<pre><code>        rm  -f  book1 book46
</code></pre> 
<p>清除目标文件的脚本命令，注意了，rm之前也是一个tab键，不是空格。</p> 
<h3><a id="20__3127"></a>20. 内存管理</h3> 
<p><strong>&lt;stdlib.h&gt;</strong> 头文件</p> 
<table><thead><tr><th>序号</th><th>函数和描述</th></tr></thead><tbody><tr><td>1</td><td><strong>void *calloc(int num, int size);</strong> 在内存中动态地分配 num 个长度为 size 的连续空间，并将每一个字节都初始化为 0。所以它的结果是分配了 num*size 个字节长度的内存空间，并且每个字节的值都是0。</td></tr><tr><td>2</td><td><strong>void free(void *address);</strong> 该函数释放 address 所指向的内存块,释放的是动态分配的内存空间。</td></tr><tr><td>3</td><td><strong>void *malloc(int num);</strong> 在堆区分配一块指定大小的内存空间，用来存放数据。这块内存空间在函数执行完成后不会被初始化，它们的值是未知的。</td></tr><tr><td>4</td><td><strong>void *realloc(void *address, int newsize);</strong> 该函数重新分配内存，把内存扩展到 <strong>newsize</strong>。</td></tr></tbody></table> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">char</span> <span class="token operator">*</span>description<span class="token punctuation">;</span>

   <span class="token function">strcpy</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">"Zara Ali"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/* 动态分配内存 */</span>
   description <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span> description <span class="token operator">==</span> <span class="token constant">NULL</span> <span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">"Error - unable to allocate required memory\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span>
   <span class="token punctuation">{<!-- --></span>
      <span class="token function">strcpy</span><span class="token punctuation">(</span> description<span class="token punctuation">,</span> <span class="token string">"Zara ali a DPS student."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token comment">/* 假设您想要存储更大的描述信息 */</span>
   description <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">realloc</span><span class="token punctuation">(</span> description<span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span> description <span class="token operator">==</span> <span class="token constant">NULL</span> <span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">"Error - unable to allocate required memory\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span>
   <span class="token punctuation">{<!-- --></span>
      <span class="token function">strcat</span><span class="token punctuation">(</span> description<span class="token punctuation">,</span> <span class="token string">"She is in class 10th"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Name = %s\n"</span><span class="token punctuation">,</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Description: %s\n"</span><span class="token punctuation">,</span> description <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/* 使用 free() 函数释放内存 */</span>
   <span class="token function">free</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
Name <span class="token operator">=</span> Zara Ali
Description<span class="token operator">:</span> Zara ali a DPS student in class <span class="token number">10</span>th
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/67042c2f548fedf375417e683d250a70/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第五单元 用python学习微积分（三十五）幂级数和泰勒级数下</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/011f042e177a51a4d569bdaa7887809f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ActiveMQ安装(含安装包)Unable to locate the class org.apache.activemq.console.Main: java.lang.UnsupportedCl</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>