<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>面试官：说说 typeof 与 instanceof 区别? - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="面试官：说说 typeof 与 instanceof 区别?" />
<meta property="og:description" content="一、typeof typeof 操作符返回一个字符串，表示未经计算的操作数的类型
使用方法如下：
typeof operand typeof(operand) operand表示对象或原始值的表达式，其类型将被返回
举个例子
typeof 1 // &#39;number&#39; typeof &#39;1&#39; // &#39;string&#39; typeof undefined // &#39;undefined&#39; typeof true // &#39;boolean&#39; typeof Symbol() // &#39;symbol&#39; typeof null // &#39;object&#39; typeof [] // &#39;object&#39; typeof {} // &#39;object&#39; typeof console // &#39;object&#39; typeof console.log // &#39;function&#39; 从上面例子，前6个都是基础数据类型。虽然typeof null为object，但这只是JavaScript 存在的一个悠久 Bug，不代表null就是引用数据类型，并且null本身也不是对象
所以，null在 typeof之后返回的是有问题的结果，不能作为判断null的方法。如果你需要在 if 语句中判断是否为 null，直接通过===null来判断就好
同时，可以发现引用类型数据，用typeof来判断的话，除了function会被识别出来之外，其余的都输出object
如果我们想要判断一个变量是否存在，可以使用typeof：(不能使用if(a)， 若a未声明，则报错)
if(typeof a != &#39;undefined&#39;){ //变量存在 } 二、instanceof instanceof 运算符用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f4d14521d5de4a264f3e948ad9f0329f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-26T08:49:00+08:00" />
<meta property="article:modified_time" content="2021-02-26T08:49:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">面试官：说说 typeof 与 instanceof 区别?</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align: left"><img src="https://images2.imgbox.com/4c/da/6qRykjaH_o.png"></p> 
 <h3>一、typeof</h3> 
 <p><code>typeof</code> 操作符返回一个字符串，表示未经计算的操作数的类型</p> 
 <p>使用方法如下：</p> 
 <pre class="has"><code class="language-go">typeof operand
typeof(operand)
</code></pre> 
 <p><code>operand</code>表示对象或原始值的表达式，其类型将被返回</p> 
 <p>举个例子</p> 
 <pre class="has"><code class="language-go">typeof 1 // 'number'
typeof '1' // 'string'
typeof undefined // 'undefined'
typeof true // 'boolean'
typeof Symbol() // 'symbol'
typeof null // 'object'
typeof [] // 'object'
typeof {} // 'object'
typeof console // 'object'
typeof console.log // 'function'
</code></pre> 
 <p>从上面例子，前6个都是基础数据类型。虽然<code>typeof null</code>为<code>object</code>，但这只是<code>JavaScript</code> 存在的一个悠久 <code>Bug</code>，不代表<code>null</code>就是引用数据类型，并且<code>null</code>本身也不是对象</p> 
 <p>所以，<code>null</code>在 <code>typeof</code>之后返回的是有问题的结果，不能作为判断<code>null</code>的方法。如果你需要在 <code>if</code> 语句中判断是否为 <code>null</code>，直接通过<code>===null</code>来判断就好</p> 
 <p>同时，可以发现引用类型数据，用<code>typeof</code>来判断的话，除了<code>function</code>会被识别出来之外，其余的都输出<code>object</code></p> 
 <p>如果我们想要判断一个变量是否存在，可以使用<code>typeof</code>：(不能使用<code>if(a)</code>， 若<code>a</code>未声明，则报错)</p> 
 <pre class="has"><code class="language-go">if(typeof a != 'undefined'){
    //变量存在
}
</code></pre> 
 <h3>二、instanceof</h3> 
 <p><code>instanceof</code> 运算符用于检测构造函数的 <code>prototype</code> 属性是否出现在某个实例对象的原型链上</p> 
 <p>使用如下：</p> 
 <pre class="has"><code class="language-go">object instanceof constructor
</code></pre> 
 <p><code>object</code>为实例对象，<code>constructor</code>为构造函数</p> 
 <p>构造函数通过<code>new</code>可以实例对象，<code>instanceof</code>能判断这个对象是否是之前那个构造函数生成的对象</p> 
 <pre class="has"><code class="language-go">// 定义构建函数
let Car = function() {}
let benz = new Car()
benz instanceof Car // true
let car = new String('xxx')
car instanceof String // true
let str = 'xxx'
str instanceof String // false
</code></pre> 
 <p>关于<code>instanceof</code>的实现原理，可以参考下面：</p> 
 <pre class="has"><code class="language-go">function myInstanceof(left, right) {
    // 这里先用typeof来判断基础数据类型，如果是，直接返回false
    if(typeof left !== 'object' || left === null) return false;
    // getProtypeOf是Object对象自带的API，能够拿到参数的原型对象
    let proto = Object.getPrototypeOf(left);
    while(true) {                  
        if(proto === null) return false;
        if(proto === right.prototype) return true;//找到相同原型对象，返回true
        proto = Object.getPrototypeof(proto);
    }
}
</code></pre> 
 <p>也就是顺着原型链去找，直到找到相同的原型对象，返回<code>true</code>，否则为<code>false</code></p> 
 <h3>三、区别</h3> 
 <p><code>typeof</code>与<code>instanceof</code>都是判断数据类型的方法，区别如下：</p> 
 <ul><li><p><code>typeof</code>会返回一个变量的基本类型，<code>instanceof</code>返回的是一个布尔值</p></li><li><p><code>instanceof</code> 可以准确地判断复杂引用数据类型，但是不能正确判断基础数据类型</p></li><li><p>而<code>typeof</code> 也存在弊端，它虽然可以判断基础数据类型（<code>null</code> 除外），但是引用数据类型中，除了<code>function</code> 类型以外，其他的也无法判断</p></li></ul> 
 <p>可以看到，上述两种方法都有弊端，并不能满足所有场景的需求</p> 
 <p>如果需要通用检测数据类型，可以采用<code>Object.prototype.toString</code>，调用该方法，统一返回格式<code>“[object Xxx]”</code>的字符串</p> 
 <p>如下</p> 
 <pre class="has"><code class="language-go">Object.prototype.toString({})       // "[object Object]"
Object.prototype.toString.call({})  // 同上结果，加上call也ok
Object.prototype.toString.call(1)    // "[object Number]"
Object.prototype.toString.call('1')  // "[object String]"
Object.prototype.toString.call(true)  // "[object Boolean]"
Object.prototype.toString.call(function(){})  // "[object Function]"
Object.prototype.toString.call(null)   //"[object Null]"
Object.prototype.toString.call(undefined) //"[object Undefined]"
Object.prototype.toString.call(/123/g)    //"[object RegExp]"
Object.prototype.toString.call(new Date()) //"[object Date]"
Object.prototype.toString.call([])       //"[object Array]"
Object.prototype.toString.call(document)  //"[object HTMLDocument]"
Object.prototype.toString.call(window)   //"[object Window]"
</code></pre> 
 <p>了解了<code>toString</code>的基本用法，下面就实现一个全局通用的数据类型判断方法</p> 
 <pre class="has"><code class="language-go">function getType(obj){
  let type  = typeof obj;
  if (type !== "object") {    // 先进行typeof判断，如果是基础数据类型，直接返回
    return type;
  }
  // 对于typeof返回结果是object的，再进行如下的判断，正则返回结果
  return Object.prototype.toString.call(obj).replace(/^\[object (\S+)\]$/, '$1'); 
}
</code></pre> 
 <p>使用如下</p> 
 <pre class="has"><code class="language-go">getType([])     // "Array" typeof []是object，因此toString返回
getType('123')  // "string" typeof 直接返回
getType(window) // "Window" toString返回
getType(null)   // "Null"首字母大写，typeof null是object，需toString来判断
getType(undefined)   // "undefined" typeof 直接返回
getType()            // "undefined" typeof 直接返回
getType(function(){}) // "function" typeof能判断，因此首字母小写
getType(/123/g)      //"RegExp" toString返回
</code></pre> 
 <p style="text-align: left">面试官JavaScript系列正在更新：13/33</p> 
 <p style="text-align: left"><a href="http://mp.weixin.qq.com/s?__biz=MzU1OTgxNDQ1Nw%3D%3D&amp;chksm=fc10caadcb6743bba52b054baa67b782ec057522d87204fc5fb02050e3a01fcc32a2de949f62&amp;idx=2&amp;mid=2247485691&amp;scene=21&amp;sn=17ceeb1eebf1ca79991a44487fae3b06#wechat_redirect" rel="nofollow"></a><a href="http://mp.weixin.qq.com/s?__biz=MzU1OTgxNDQ1Nw%3D%3D&amp;chksm=fc10caadcb6743bba52b054baa67b782ec057522d87204fc5fb02050e3a01fcc32a2de949f62&amp;idx=2&amp;mid=2247485691&amp;scene=21&amp;sn=17ceeb1eebf1ca79991a44487fae3b06#wechat_redirect" rel="nofollow">面试官：说说你对Javascript中作用域的理解?</a><br></p> 
 <p style="text-align: left"><a href="http://mp.weixin.qq.com/s?__biz=MzU1OTgxNDQ1Nw%3D%3D&amp;chksm=fc10cb5dcb67424bf470fe32ebe876597f66a9fed17bb9ef18c53eb33e39504dbcec7c2b4a98&amp;idx=1&amp;mid=2247485707&amp;scene=21&amp;sn=56b670c1587570276d1f2dda04c804a4#wechat_redirect" rel="nofollow">面试官：JavaScript原型，原型链 ? 有什么特点？</a><br></p> 
 <p style="text-align: left"><a href="http://mp.weixin.qq.com/s?__biz=MzU1OTgxNDQ1Nw%3D%3D&amp;chksm=fc10cb77cb6742619b2a76aa0d882d4e94d7021d8813f6ea09667b16146040faed9806203523&amp;idx=2&amp;mid=2247485729&amp;scene=21&amp;sn=e3d6148c0f4ab3617bcdf8f8501c7eb2#wechat_redirect" rel="nofollow">面试官：说说Javascript中的继承？如何实现继承？</a><br></p> 
 <p style="text-align: left"><a href="http://mp.weixin.qq.com/s?__biz=MzU1OTgxNDQ1Nw%3D%3D&amp;chksm=fc10cb6dcb67427b39ac8102099de814bfe368726aa25cb78967f8ca7c1107c59fc5ac29ba92&amp;idx=2&amp;mid=2247485755&amp;scene=21&amp;sn=8df3e7c0ada42fc112f2fa4c8bf0448c#wechat_redirect" rel="nofollow">面试官：说说你对Javascript中this对象的理解</a><br></p> 
 <p style="text-align: left"><a href="http://mp.weixin.qq.com/s?__biz=MzU1OTgxNDQ1Nw%3D%3D&amp;chksm=fc10cb1dcb67420bfb31f6560570b9b1dbcb3b46ad83bee8ec240ae1bfa8fbe9edfb18521576&amp;idx=1&amp;mid=2247485771&amp;scene=21&amp;sn=cb4eccd7996c95ca260c4a8d85e92113#wechat_redirect" rel="nofollow">面试官：JavaScript中执行上下文和执行栈是什么？</a><br></p> 
 <p style="text-align: left"><a href="http://mp.weixin.qq.com/s?__biz=MzU1OTgxNDQ1Nw%3D%3D&amp;chksm=fc10cbc1cb6742d7d877332259c1563d2dcc8b114c5b1d1ed8c08b71b47502053ae5cb341c8e&amp;idx=1&amp;mid=2247485847&amp;scene=21&amp;sn=6214e1eda9a0205c143e6c26ac4426ca#wechat_redirect" rel="nofollow">面试官：JavaScript中的事件模型如何理解?</a><br></p> 
 <p style="text-align: left">篇副有限，扫下方二维码查看往期</p> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/1c/c0/nncpHYjV_o.png"></p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6334be92c11ebd5f445607f841e224b3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java通过poi进行导出_java操作Excel之POI（5）利用POI实现使用模板批量导出数据</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1872d664aafef40fa5d4642cfa8fc0a0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">安卓开发软件培训！腾讯3轮面试都问了Android事件分发，面试必问</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>