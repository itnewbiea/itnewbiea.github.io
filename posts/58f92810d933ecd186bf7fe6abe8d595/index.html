<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android 小部件播放视频 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android 小部件播放视频" />
<meta property="og:description" content="最近在对小组件进行迭代, 之前已经解决过一些问题, 例如:
图片的圆角怎么在小组件上展示并兼容多个系统版本小组件后台怎么更新,如何将小组件拆分成单独模块 对于小组件播放视频, 找不到直接可以调用的api, 因为android对于小组件又很多限制,比如:
RemoteViews 对象（因而应用微件）可以支持以下布局类：
FrameLayoutLinearLayoutRelativeLayoutGridLayout 以及以下微件类：
AnalogClockButtonChronometerImageButtonImageViewProgressBarTextViewViewFlipperListViewGridViewStackViewAdapterViewFlipper 不支持这些类的后代。
RemoteViews 还支持 ViewStub，它是一个大小为零的不可见视图，您可以使用它在运行时以懒散的方式扩充布局资源。
详细参考:
https://developer.android.com/guide/topics/appwidgets?hl=zh-cn
简单来说就是, 只支持特定的几种布局,不支持ConstraintLayout等, 不支持自定义view; 如果你使用了, 那么显示小组件时候就会出现类似 “载入小部件出错”的信息;
陌陌的一款贴贴实现了小组件播放视频, 经过一番吐血调研和研究, 我实现了类似的效果, 包括显示视频并缓存,显示图片, 小组件后台实时更新整理成了一套Demo;
demo示例效果 ​​​​​​​
方案已在线上验证，欢迎大佬们来找我探讨" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/58f92810d933ecd186bf7fe6abe8d595/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-21T10:00:45+08:00" />
<meta property="article:modified_time" content="2022-10-21T10:00:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android 小部件播放视频</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近在对小组件进行迭代, 之前已经解决过一些问题, 例如:</p> 
<ul><li>图片的圆角怎么在小组件上展示并兼容多个系统版本</li><li>小组件后台怎么更新,如何将小组件拆分成单独模块</li></ul> 
<p>对于小组件播放视频, 找不到直接可以调用的api, 因为android对于小组件又很多限制,比如:</p> 
<blockquote> 
 <p>RemoteViews 对象（因而应用微件）可以支持以下布局类：</p> 
 <ul><li><code><a href="https://developer.android.com/reference/android/widget/FrameLayout?hl=zh-cn" rel="nofollow" title="FrameLayout">FrameLayout</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/LinearLayout?hl=zh-cn" rel="nofollow" title="LinearLayout">LinearLayout</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/RelativeLayout?hl=zh-cn" rel="nofollow" title="RelativeLayout">RelativeLayout</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/GridLayout?hl=zh-cn" rel="nofollow" title="GridLayout">GridLayout</a></code></li></ul> 
 <p>以及以下微件类：</p> 
 <ul><li><code><a href="https://developer.android.com/reference/android/widget/AnalogClock?hl=zh-cn" rel="nofollow" title="AnalogClock">AnalogClock</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/Button?hl=zh-cn" rel="nofollow" title="Button">Button</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/Chronometer?hl=zh-cn" rel="nofollow" title="Chronometer">Chronometer</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/ImageButton?hl=zh-cn" rel="nofollow" title="ImageButton">ImageButton</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/ImageView?hl=zh-cn" rel="nofollow" title="ImageView">ImageView</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/ProgressBar?hl=zh-cn" rel="nofollow" title="ProgressBar">ProgressBar</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/TextView?hl=zh-cn" rel="nofollow" title="TextView">TextView</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/ViewFlipper?hl=zh-cn" rel="nofollow" title="ViewFlipper">ViewFlipper</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/ListView?hl=zh-cn" rel="nofollow" title="ListView">ListView</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/GridView?hl=zh-cn" rel="nofollow" title="GridView">GridView</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/StackView?hl=zh-cn" rel="nofollow" title="StackView">StackView</a></code></li><li><code><a href="https://developer.android.com/reference/android/widget/AdapterViewFlipper?hl=zh-cn" rel="nofollow" title="AdapterViewFlipper">AdapterViewFlipper</a></code></li></ul> 
 <p>不支持这些类的后代。</p> 
 <p>RemoteViews 还支持 <code><a href="https://developer.android.com/reference/android/view/ViewStub?hl=zh-cn" rel="nofollow" title="ViewStub">ViewStub</a></code>，它是一个大小为零的不可见视图，您可以使用它在运行时以懒散的方式扩充布局资源。</p> 
</blockquote> 
<p>详细参考:</p> 
<p><a href="https://developer.android.com/guide/topics/appwidgets?hl=zh-cn" rel="nofollow" title="https://developer.android.com/guide/topics/appwidgets?hl=zh-cn">https://developer.android.com/guide/topics/appwidgets?hl=zh-cn</a></p> 
<p>简单来说就是, 只支持特定的几种布局,不支持ConstraintLayout等, 不支持自定义view; 如果你使用了, 那么显示小组件时候就会出现类似 “载入小部件出错”的信息;</p> 
<p></p> 
<p>陌陌的一款贴贴实现了小组件播放视频, 经过一番吐血调研和研究, 我实现了类似的效果, 包括显示视频并缓存,显示图片, 小组件后台实时更新整理成了一套Demo;</p> 
<p><img alt="" height="893" src="https://images2.imgbox.com/ac/c9/aAfKreOS_o.png" width="1200"></p> 
<p></p> 
<p>demo示例效果 </p> 
<p></p> 
<p><img alt="" src="https://images2.imgbox.com/c7/fa/vpaLEQSR_o.gif">​​​​​​​</p> 
<p> </p> 
<p>方案已在线上验证，欢迎大佬们来找我探讨</p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7462e06b0df62ff5f5edea1e98c6c9ea/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言基本语法——循环篇（三种常见的循环）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c49baf647ee7eb1f4dc2543f6aee6947/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">bash: line 5: bgzip: command not found</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>