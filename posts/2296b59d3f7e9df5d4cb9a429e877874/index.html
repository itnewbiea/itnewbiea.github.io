<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ffmpeg常用命令（获取视频缩略图等） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ffmpeg常用命令（获取视频缩略图等）" />
<meta property="og:description" content="截取视频生成gif缩略图：
ffmpeg -i test.avi -ss 1 -t 5 -ac 2 -ab 128k -s 90*80 -y -f gif out.gif 截取视频生成jpg缩略图：
ffmpeg -i test.avi -ss 0.5 -vframes 1 -r 1 -ac 2 -ab 128k -s 90x80 -y -f mjpeg out2.jpg -ss：截取视频，开始时间，单位秒；-t：截取时长，单位秒；-vframes：等价于frames:v，输出选项，用于指定输出的视频帧数；-r：帧率，输入和输出均具有该参数，即具体形式为： ffmpeg -r [输入帧率] -i [输入文件路径] -r [输出帧率] [输出文件路径] # 输出视频时长= 图片数量/输入帧率
# 当输入文件为视频时，输入帧率自动识别。
# 当输入文件为图片时，输入帧率默认为25，可指定具体值。
-ac：输出文件中音频的声道数；-ab：输出文件中音频的比特率（常见的音频比特率有 96k, 112k, 128k, 160k, 192k, 256k, 320k）；-ar：输出文件中音频的采样率（采样率: 11025Hz、22050Hz、24000Hz、44100Hz、48000Hz）；-an：从视频文件中去除音频，即视频静音，如： ffmpeg -i test.mp4 -vcodec copy -an output." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2296b59d3f7e9df5d4cb9a429e877874/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-26T15:08:28+08:00" />
<meta property="article:modified_time" content="2023-10-26T15:08:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ffmpeg常用命令（获取视频缩略图等）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>截取视频生成gif缩略图：</p> 
<pre><code class="language-cs">ffmpeg -i test.avi -ss 1 -t 5 -ac 2 -ab 128k -s 90*80 -y -f gif out.gif</code></pre> 
<p>截取视频生成jpg缩略图：</p> 
<pre><code class="language-cs">ffmpeg -i test.avi -ss 0.5 -vframes 1 -r 1 -ac 2 -ab 128k  -s 90x80 -y -f mjpeg out2.jpg</code></pre> 
<ul><li>-ss：截取视频，开始时间，单位秒；</li><li>-t：截取时长，单位秒；</li><li>-vframes：等价于frames:v，输出选项，用于指定输出的视频帧数；</li><li>-r：帧率，输入和输出均具有该参数，即具体形式为：</li></ul> 
<p><strong>         </strong><em><strong>ffmpeg -r [输入帧率] -i [输入文件路径] -r [输出帧率] [输出文件路径] </strong></em><br>         # 输出视频时长= 图片数量/输入帧率<br>         # 当输入文件为视频时，输入帧率自动识别。<br>         # 当输入文件为图片时，输入帧率默认为25，可指定具体值。</p> 
<ul><li>-ac：输出文件中音频的声道数；</li><li>-ab：输出文件中音频的比特率（常见的音频比特率有 96k, 112k, 128k, 160k, 192k, 256k, 320k）；</li><li>-ar：输出文件中音频的采样率（采样率: 11025Hz、22050Hz、24000Hz、44100Hz、48000Hz）；</li><li>-an：从视频文件中去除音频，即视频静音，如：</li></ul> 
<p><em><strong>        ffmpeg -i test.mp4 -vcodec copy -an output.mp4</strong></em><br>         # -vcodec copy拷贝源数据的视频流到输出文件里面</p> 
<ul><li>-vn：从视频文件中去除视频，即提取音频，如：</li></ul> 
<p><em><strong>        ffmpeg -i test.mp4 -acodec copy -vn output.aac</strong></em><br>         # 默认mp4的audio codec是aac,如果不是，可以都转为最常见的aac；<br>         # -acodec copy拷贝源数据的音频流到输出文件里面</p> 
<ul><li>-s：设置视频分辨率，参数值wxh，w宽度单位是像素，h高度单位是像素；</li><li>-vf：等价于filter:v，用于设定一个图像的后处理过滤链，其参数为一个描述图像后处理链的字符串。</li></ul> 
<p>        # 下面两条命令有相同效果</p> 
<pre><code class="language-cs">    ffmpeg -i input.mpg -s 320x240 output.mp4 
    ffmpeg -i input.mpg -vf scale=320:240 output.mp4</code></pre> 
<p>        # 对输入视频成比例缩放</p> 
<pre><code class="language-cs"># 改变为源视频一半大小：
    ffmpeg -i input.mpg -vf scale=iw/2:ih/2 output.mp4

# 改变为原视频的90%大小：
    ffmpeg -i input.mpg -vf scale=iw*0.9:ih*0.9 output.mp4</code></pre> 
<p>        # 保持源视频的横纵比</p> 
<pre><code class="language-cs"># 宽度固定400，高度成比例：
    ffmpeg -i input.avi -vf scale=400:-1

# 相反地，高度固定300，宽度成比例：
    ffmpeg -i input.avi -vf scale=-1:300</code></pre> 
<ul><li>-b:v：输出视频的码率即比特率，比特率越大，视频文件越大，和分辨率成正相关。</li></ul> 
<p>        # 常见分辨率和推荐的比特率值：<br>         分辨率        比特率<br>         480p        1500 Kbps左右<br>         720p        3000-5000 Kbps<br>         1080p        5000-8000 Kbps<br>         4K        18000-30000 Kbps</p> 
<ul><li>-map：指定输出文件的流映射关系。例如 “-map 1:0 -map 1:1”要求将第二个输入文件的第一个流和第二个流写入到输出文件。如果没有-map选项，ffmpeg采用缺省的映射关系。</li><li>-y：存在重名文件时覆盖；</li><li>-f：输入、输出文件的格式，小写字母，如：</li></ul> 
<pre><code class="language-cs">ffmpeg -f mp4 test.mp4 -f avi out.avi
# 不确定格式名称时，可以直接使用文件扩展名。</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/05f57f158a29a0e39e2ab7c3bace6eb3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Hadoop集群打包测试步骤（hadoop jar与yarn jar 运行）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cc41df8edd0f64c8687feaf3f8d28867/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">算法复杂度</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>