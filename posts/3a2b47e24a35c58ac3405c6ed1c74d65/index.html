<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>面试之-mybatis中$和#的区别* - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="面试之-mybatis中$和#的区别*" />
<meta property="og:description" content="mybatis中$和#的区别
mybatis中KaTeX parse error: Expected &#39;EOF&#39;, got &#39;#&#39; at position 2: 和#̲的区别 今天面试遇到这个面试题…，但是具体的区别还真的不清楚，今天总结一下分享给大家。
#{}是预编译处理，KaTeX parse error: Expected &#39;EOF&#39;, got &#39;#&#39; at position 20: …符串替换。mybatis在处理#̲{}时，会将sql中的#{}替…{}时，就是把${}替换成变量的值。使用#{}可以有效的防止SQL注入，提高系统安全性。
总结一
1 #是将传入的值当做字符串的形式，eg:select id,name,age from student where id =#{id},当前端把id值1，传入到后台的时候，就相当于 select id,name,age from student where id =‘1’.
2 是 将 传 入 的 数 据 直 接 显 示 生 成 s q l 语 句 ， e g : s e l e c t i d , n a m e , a g e f r o m s t u d e n t w h e r e i d = 是将传入的数据直接显示生成sql语句，eg:select id,name,age from student where id = 是将传入的数据直接显示生成sql语句，eg:selectid,name,agefromstudentwhereid={id},当前端把id值1，传入到后台的时候，就相当于 select id,name,age from student where id = 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/3a2b47e24a35c58ac3405c6ed1c74d65/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-02T13:24:16+08:00" />
<meta property="article:modified_time" content="2019-03-02T13:24:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">面试之-mybatis中$和#的区别*</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>mybatis中$和#的区别</strong></p> 
<p>mybatis中<span class="katex--inline">KaTeX parse error: Expected 'EOF', got '#' at position 2: 和#̲的区别 今天面试遇到这个面试题…</span>，但是具体的区别还真的不清楚，今天总结一下分享给大家。<br> #{}是预编译处理，<span class="katex--inline">KaTeX parse error: Expected 'EOF', got '#' at position 20: …符串替换。mybatis在处理#̲{}时，会将sql中的#{}替…</span>{}时，就是把${}替换成变量的值。使用#{}可以有效的防止SQL注入，提高系统安全性。<br> 总结一<br> 1 #是将传入的值当做字符串的形式，eg:select id,name,age from student where id =#{id},当前端把id值1，传入到后台的时候，就相当于 select id,name,age from student where id =‘1’.</p> 
<p>2 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         是 
        
       
         将 
        
       
         传 
        
       
         入 
        
       
         的 
        
       
         数 
        
       
         据 
        
       
         直 
        
       
         接 
        
       
         显 
        
       
         示 
        
       
         生 
        
       
         成 
        
       
         s 
        
       
         q 
        
       
         l 
        
       
         语 
        
       
         句 
        
       
         ， 
        
       
         e 
        
       
         g 
        
       
         : 
        
       
         s 
        
       
         e 
        
       
         l 
        
       
         e 
        
       
         c 
        
       
         t 
        
       
         i 
        
       
         d 
        
       
         , 
        
       
         n 
        
       
         a 
        
       
         m 
        
       
         e 
        
       
         , 
        
       
         a 
        
       
         g 
        
       
         e 
        
       
         f 
        
       
         r 
        
       
         o 
        
       
         m 
        
       
         s 
        
       
         t 
        
       
         u 
        
       
         d 
        
       
         e 
        
       
         n 
        
       
         t 
        
       
         w 
        
       
         h 
        
       
         e 
        
       
         r 
        
       
         e 
        
       
         i 
        
       
         d 
        
       
         = 
        
       
      
        是将传入的数据直接显示生成sql语句，eg:select id,name,age from student where id = 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">将</span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">入</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">据</span><span class="mord cjk_fallback">直</span><span class="mord cjk_fallback">接</span><span class="mord cjk_fallback">显</span><span class="mord cjk_fallback">示</span><span class="mord cjk_fallback">生</span><span class="mord cjk_fallback">成</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right: 0.03588em;">q</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord cjk_fallback">语</span><span class="mord cjk_fallback">句</span><span class="mord cjk_fallback">，</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">c</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">n</span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit">m</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">u</span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right: 0.02691em;">w</span><span class="mord mathit">h</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span></span></span></span>{id},当前端把id值1，传入到后台的时候，就相当于 select id,name,age from student where id = 1.</p> 
<p>3 使用#可以很大程度上防止sql注入。(语句的拼接)</p> 
<p>4 但是如果使用在order by 中就需要使用 $.</p> 
<p>5 在大多数情况下还是经常使用#，但在不同情况下必须使用$.<br> 一 : 理解mybatis中 $与#</p> 
<pre><code>在mybatis中的$与#都是在sql中动态的传入参数。

eg:select id,name,age from student where name=#{name}  这个name是动态的，可变的。当你传入什么样的值，就会根据你传入的值执行sql语句。
</code></pre> 
<p>二:使用$与#</p> 
<p>#{}: 解析为一个 JDBC 预编译语句（prepared statement）的参数标记符，一个 #{ } 被解析为一个参数占位符 。</p> 
<p>${}: 仅仅为一个纯碎的 string 替换，在动态 SQL 解析阶段将会进行变量替换。</p> 
<p>name–&gt;cy</p> 
<p>eg: select id,name,age from student where name=#{name} – name=‘cy’</p> 
<pre><code>   select id,name,age from student where name=${name}    -- name=cy
</code></pre> 
<p>原文<br> <a href="https://www.cnblogs.com/hellokitty1/p/6007801.html" rel="nofollow">https://www.cnblogs.com/hellokitty1/p/6007801.html</a></p> 
<p>总结二<br> 今天在工作中有个点击排序的功能调试了许久，终寻因，总结之。<br> 　　需求是这样的，页面有个table，有一列的上下箭头可点击并排序。对于这种需求，我的mybatis.xml的sql配置写成了如下：</p> 　　ORDER BY columnName #{map.ColumnNameSort} 
<p>ColumnNameSort即前端传的排序方式，asc或者desc。</p> 
<p>然后，预计它的输出应该是类似于下面这样的</p> 
<p>ORDER BY columnName desc</p> 
<p>但是，真正跑起来时，排序的效果一直没出现，经常一番查找，发现是mybatis 的’#{}’传值的问题，它将sql语句编译成了如下</p> 
<p>ORDER BY columnName ‘desc’ 或者 ORDER BY columnName ‘asc’</p> 
<p>这样，desc或者asc就成了字符串而不是关键字，sql语句的意思是columnName的别名是desc或者asc，没加排序关键字时默认是正序排序，成了如下</p> 
<p>ORDER BY columnName “desc” asc 或者 ORDER BY columnName “asc” asc</p> 
<p>排序没效果的问题找到原因了，解决之，mybatis提供了另一种绑定参数的方式–${param}，将sql配置改为</p> 
<p>ORDER BY columnName ${map.ColumnNameSort}</p> 
<p>这样一来，mybatis会直接将ColumnNameSort的值加入sql中，不会转义。正确结果：</p> 
<p>ORDER BY columnName desc</p> 
<p>最后，对于mybatis中#和$绑定参数的区别做个总结，避免以后类似的问题发生。</p> 
<p>＃{}将传入的数据都当成一个字符串，会对自动传入的数据加一个双引号。如：order by #{id}，如果传入的值是111,那么解析成sql时的值为order by “111”, 如果传入的值是id，则解析成的sql为order by “id”。</p> 
<p>${}将传入的数据直接显示生成在sql中。如：order by<br> ${id}，如果传入的值是111,那么解析成sql时的值为order by 111, 如果传入的值是id，则解析成的sql为order<br> by id。</p> 
<p>#方式能够很大程度防止sql注入。</p> 
<p>$方式无法防止Sql注入。</p> 
<p>$方式一般用于传入数据库对象，例如传入表名.</p> 
<p>一般能用#的就别用$.</p> 
<p>ps:在使用mybatis中还遇到&lt;![CDATA[]]&gt;的用法，在该符号内的语句，将不会被当成字符串来处理，而是直接当成sql语句，比如要执行一个存储过程。<br> -原文：<a href="https://blog.csdn.net/u011519624/article/details/54674670/">https://blog.csdn.net/u011519624/article/details/54674670/</a></p> 
<p>个人总结<br> 我觉得#与的区别最大在于：#{} 传入值时，sql解析时，参数是带引号的，而的区别最大在于：#{} 传入值时，sql解析时，参数是带引号的，而{}穿入值，sql解析时，参数是不带引号的。<br> 区别<br> #是将传入的值当做字符串的形式拼接到sql语句中，而<span class="katex--inline">KaTeX parse error: Expected 'EOF', got '#' at position 25: …显示生成sql语句。也可以认为#̲使用了一个占位符=‘？’，而</span>是直接将数据拼接到sql语句中即=？。<br> 注解：动态sql是mybatis的主要特性之一，在mspper中定义的参数传到xml中后，在查询之前mybatis会对其进行动态解析。mybatis 为我们提供了两种支持动态 sql 的语法：#{} 以及 <span class="katex--inline">KaTeX parse error: Expected 'EOF', got '#' at position 16: {}。 在具体使用时，一般使用#̲{}，当然在遇到一些必须是</span>{}的情况时，就应该灵活应用，主要看那个可以达到效果，又可以防止注入攻击为准。</p> 
<p>欢迎讨论勘正！</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6cc737942abf66dc96e1ced6ad6f25d8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">双字节乘法执行过程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2a392b9a66f7ca0eccfda58eb99d5fbb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">论文复现之医学图像应用：视网膜血管分割</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>