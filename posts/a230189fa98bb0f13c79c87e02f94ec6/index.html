<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>job_queue_processes参数讲解 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="job_queue_processes参数讲解" />
<meta property="og:description" content="原文地址：job_queue_processes参数讲解作者：rainbow_尧 本文转自【乐沙弥的世界】，在此感谢原作者！
Oracle jobs为Oracle开发人员和数据库管理员提供了数据库层面维护的极大便利性。对于Oracle jobs在Oracle 9i之前，是由dbms_jobs来实现，而到了10g之后，多出了dbms_scheduler方式。两者同样可以添加Oracle job，只不过dbms_scheduler的功能更为强大。在使用Oracle jobs时，我们不得不关注job_queue_processes参数，用于设定job队列可以启动的进程数。本文即是围绕此展开。查看该参数命令：
show parameter job;
1、job_queue_processes参数
alter system set job_queue_processes= 0,,,1000
下面是11g reference的描述：
JOB_QUEUE_PROCESSES specifies the maximum number of job slaves per instance that can be created for the execution of DBMS_JOB jobs and Oracle Scheduler (DBMS_SCHEDULER) jobs. DBMS_JOB and Oracle Scheduler share the same job coordinator and job slaves, and they are both controlled by the JOB_QUEUE_PROCESSES parameter.
If the value of JOB_QUEUE_PROCESSES is set to 0, then DBMS_JOB jobs and Oracle Scheduler jobs will not run on the instance." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a230189fa98bb0f13c79c87e02f94ec6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-04T19:52:38+08:00" />
<meta property="article:modified_time" content="2023-12-04T19:52:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">job_queue_processes参数讲解</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="margin-left:0;text-align:left;"> 
 <span style="color:#000000;"><span style="background-color:#ffffff;"><strong>原文地址：</strong><a href="http://blog.sina.com.cn/s/blog_62defbef0101opv0.html" rel="nofollow" title="job_queue_processes参数讲解">job_queue_processes参数讲解</a><strong>作者：</strong><a href="http://blog.sina.com.cn/u/1658780655" rel="nofollow" title="rainbow_尧">rainbow_尧</a></span></span> 
</div> 
<div style="margin-left:0;text-align:left;"> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"> 本文转自【乐沙弥的世界】，在此感谢原作者！</span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;">Oracle jobs为Oracle开发人员和数据库管理员提供了数据库层面维护的极大便利性。对于Oracle jobs在Oracle 9i之前，是由dbms_jobs来实现，而到了10g之后，多出了dbms_scheduler方式。两者同样可以添加Oracle job，只不过dbms_scheduler的功能更为强大。在使用Oracle jobs时，我们不得不关注job_queue_processes参数，用于设定job队列可以启动的进程数。本文即是围绕此展开。查看该参数命令：</span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;">show parameter job;</span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"> </span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000066;">1、job_queue_processes参数</span></span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;">     alter system set job_queue_processes= 0,,,1000</span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;">下面是11g reference的描述：<br>       JOB_QUEUE_PROCESSES specifies the maximum number of job slaves per instance that can be created for the execution of DBMS_JOB jobs and Oracle Scheduler (DBMS_SCHEDULER) jobs. DBMS_JOB and Oracle Scheduler share the same job coordinator and job slaves, and they are both controlled by the JOB_QUEUE_PROCESSES parameter.</span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;">      If the value of JOB_QUEUE_PROCESSES is set to 0, then DBMS_JOB jobs and Oracle Scheduler jobs will not run on the instance.If JOB_QUEUE_PROCESSES is set to a value in the range of 1 to 1000, then DBMS_JOB jobs and Oracle Scheduler jobs will run. The actual number of job slaves created for Oracle Scheduler jobs is auto-tuned by the Scheduler depending on several factors, including available resources, Resource Manager settings, and currently running jobs. However, the combined total number of job slaves running DBMS_JOB jobs and Oracle Scheduler jobs on an instance can never exceed the value of JOB_QUEUE_PROCESSES for that instance. The number of job slaves running Oracle Scheduler jobs is additionally limited to the value of the MAX_JOB_SLAVE_PROCESSES Scheduler attribute.</span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;">      Advanced replication uses Oracle Scheduler for data refreshes. Oracle Streams Advanced Queuing uses Oracle Scheduler for message propagation. Materialized views use Oracle Scheduler for automatic refreshes. Setting JOB_QUEUE_PROCESS to 0 will disable these features as well as any other features that use Oracle Scheduler or DBMS_JOB.</span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"> </span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;">a、从上面的描述可知，对于Oracle job进程，包含协调进程(主进程)以及奴隶进程(子进程)。<br> b、job_queue_processes取值范围为0到1000，总共可创建多少个job进程由job_queue_processes参数来决定。<br> c、当job_queue_processes大于1时，且并行执行job时，至少一个为协调进程。其总数不会超出job_queue_processes的值。<br> d、job_queue_processes参数的值为且DBMS_JOB与DBMS_SCHEDULER共享。<br> e、job_queue_processes参数，当设定该值为0的时候则任意方式创建的job都不会运行。<br> f、非零值的job_queue_processes，其job子进程数依赖于可用资源，资源配置方式以及当前运行的job数来自行调整。<br> g、此外对于Scheduler jobs方式还受限制于scheduler属性MAX_JOB_SLAVE_PROCESSES的设置。<br> h、可以通过DBMS_SCHEDULER.SET_SCHEDULER_ATTRIBUTE来设置max_job_slave_processes</span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"> </span></span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000066;">2、测试参数job_queue_processes为1的情形</span></span></span></span></span></p> 
 <div style="margin-left:0;text-align:left;"> 
  <div style="margin-left:0;"> 
   <div style="margin-left:0;"> 
    <span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#c0c0c0;"><span style="background-color:#ffffff;"><strong>[sql]</strong> <a href="http://blog.csdn.net/leshami/article/details/8694772#" title="view plain">view plain</a><a href="http://blog.csdn.net/leshami/article/details/8694772#" title="copy">copy</a><a href="http://blog.csdn.net/leshami/article/details/8694772#" title="print">print</a><a href="http://blog.csdn.net/leshami/article/details/8694772#" title="?">?</a></span></span></span></span></span></span> 
    <div style="margin-left:0;"></div> 
   </div> 
  </div> 
  <ol style="margin-left:45px;"><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;演示环境</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; <strong><span style="color:#006699;">select</span></strong><span style="color:#000000;"> * </span><strong><span style="color:#006699;">from</span></strong><span style="color:#000000;"> v$version </span><strong><span style="color:#006699;">where</span></strong><span style="color:#000000;"> rownum&lt;2;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">BANNER  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--------------------------------------------------------------------------------</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">Oracle <strong><span style="color:#006699;">Database</span></strong><span style="color:#000000;"> 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;创建测试用表</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">CREATE</span></strong><span style="color:#000000;"> </span><strong><span style="color:#006699;">TABLE</span></strong><span style="color:#000000;"> tb_job  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">(  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   job_name    VARCHAR2 (5),  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   update_dt   VARCHAR2 (20)  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">);  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;添加多个Oracle job来并发执行</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; ho more add_job.sql  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">DECLARE</span></strong><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   job_name   VARCHAR2 (20);  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">BEGIN</span></strong><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   DBMS_OUTPUT.put_line (<span style="color:#0000ff;">'Current sysdate is '</span><span style="color:#000000;"> || TO_CHAR (SYSDATE, </span><span style="color:#0000ff;">'yyyymmdd hh24:mi:ss'</span><span style="color:#000000;">));  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   <strong><span style="color:#006699;">FOR</span></strong><span style="color:#000000;"> i </span><span style="color:#808080;">IN</span><span style="color:#000000;"> 1 .. 5  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   LOOP  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">      job_name := <span style="color:#0000ff;">'JOB_'</span><span style="color:#000000;"> || TO_CHAR (i);  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">      sys.DBMS_SCHEDULER.create_job (  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">         job_name          =&gt; job_name,  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">         start_date        =&gt; sysdate+1/1440,  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">         repeat_interval   =&gt; <span style="color:#0000ff;">'freq = minutely; interval=1'</span><span style="color:#000000;">,  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">         end_date          =&gt; <span style="color:#808080;">NULL</span><span style="color:#000000;">,  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">         job_class         =&gt; <span style="color:#0000ff;">'DEFAULT_JOB_CLASS'</span><span style="color:#000000;">,  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">         job_type          =&gt; <span style="color:#0000ff;">'PLSQL_BLOCK'</span><span style="color:#000000;">,  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">         job_action        =&gt;   '    </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">begin</span></strong><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">INSERT</span></strong><span style="color:#000000;"> </span><strong><span style="color:#006699;">INTO</span></strong><span style="color:#000000;"> tb_job  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">      <strong><span style="color:#006699;">SELECT</span></strong><span style="color:#000000;"> </span><span style="color:#0000ff;">''</span><span style="color:#000000;">'  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">                             || job_name  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">                             || <span style="color:#0000ff;">''</span><span style="color:#0000ff;">', TO_CHAR (SYSDATE, '</span><span style="color:#0000ff;">'yyyymmdd hh24:mi:ss'</span><span style="color:#000000;">') </span><strong><span style="color:#006699;">FROM</span></strong><span style="color:#000000;"> DUAL;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">dbms_lock.sleep(60);  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">commit</span></strong><span style="color:#000000;">;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">end</span></strong><span style="color:#000000;">;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">',  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">         enabled           =&gt; <strong><span style="color:#006699;">true</span></strong><span style="color:#000000;">,  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">         comments          =&gt; <span style="color:#0000ff;">'my test job'</span><span style="color:#000000;">);  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   <strong><span style="color:#006699;">END</span></strong><span style="color:#000000;"> LOOP;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">END</span></strong><span style="color:#000000;">;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">/  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; @add_job  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">PL/SQL <strong><span style="color:#006699;">procedure</span></strong><span style="color:#000000;"> successfully completed.  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;查看job_queue_processes参数的值</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; show parameter job  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">NAME</span></strong><span style="color:#000000;">                                 TYPE        VALUE  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">------------------------------------ ----------- ------------------------------</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">job_queue_processes                  <strong><span style="color:#006699;">integer</span></strong><span style="color:#000000;">     1  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;此时和Job相关的进程一个，为ora_j000</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; ho ps -ef | grep rac11g | grep ora_j | grep -v grep  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">oracle    9692     1  4 12:03 ?        00:00:01 ora_j000_rac11g1  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;查看刚刚添加的job</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;下面的NEXT_RUN_DATE在秒级别上稍有差异，其实在定义job时，这个是由于前面的for循环造成的延迟</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;在此忽略这个细微的差异</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; @jobs  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">OWNER        JOB_NAME       ENABL JOB_CLASS                      NEXT_RUN_DATE  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">------------ -------------- ----- ------------------------------ -----------------------------------</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT        JOB_1          <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS              19-MAR-13 12.21.33.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT        JOB_2          <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS              19-MAR-13 12.21.33.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT        JOB_3          <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS              19-MAR-13 12.21.33.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT        JOB_4          <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS              19-MAR-13 12.21.34.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT        JOB_5          <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS              19-MAR-13 12.21.34.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;job执行的情况，可以看到5个job被逐一执行</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;尽管我们定义时的NEXT_RUN_DATE相差1秒，而此时job的执行后则每一个相差1分钟</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;job_1与job_5相差4分多钟，这是由于我们定义了dbms_lock.sleep(60)为1分钟</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;其次可以看出由于只有一个job进程，因此每一个job是一个一个被执行</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; <strong><span style="color:#006699;">select</span></strong><span style="color:#000000;"> * </span><strong><span style="color:#006699;">from</span></strong><span style="color:#000000;"> tb_job;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_N UPDATE_DT  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">----- --------------------</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_1 20130319 12:21:33  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_2 20130319 12:22:35  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_3 20130319 12:23:37  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_4 20130319 12:24:39  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_5 20130319 12:25:41  </span></span></span></span></span></li></ol> 
 </div> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000066;">3、测试参数job_queue_processes大于1的情形</span></span></span></span></span></p> 
 <div style="margin-left:0;text-align:left;"> 
  <div style="margin-left:0;"> 
   <div style="margin-left:0;"> 
    <span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#c0c0c0;"><span style="background-color:#ffffff;"><strong>[sql]</strong> <a href="http://blog.csdn.net/leshami/article/details/8694772#" title="view plain">view plain</a><a href="http://blog.csdn.net/leshami/article/details/8694772#" title="copy">copy</a><a href="http://blog.csdn.net/leshami/article/details/8694772#" title="print">print</a><a href="http://blog.csdn.net/leshami/article/details/8694772#" title="?">?</a></span></span></span></span></span></span> 
    <div style="margin-left:0;"></div> 
   </div> 
  </div> 
  <ol style="margin-left:45px;"><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;首先移除之前的job</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; ho more remove_job.sql  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">DECLARE</span></strong><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   job_name   VARCHAR2 (10);  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">BEGIN</span></strong><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   <strong><span style="color:#006699;">FOR</span></strong><span style="color:#000000;"> i </span><span style="color:#808080;">IN</span><span style="color:#000000;"> 1 .. 5  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   LOOP  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">      job_name := <span style="color:#0000ff;">'JOB_'</span><span style="color:#000000;"> || TO_CHAR (i);  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">      sys.DBMS_SCHEDULER.drop_job (job_name, <strong><span style="color:#006699;">force</span></strong><span style="color:#000000;"> =&gt; </span><strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">);  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">   <strong><span style="color:#006699;">END</span></strong><span style="color:#000000;"> LOOP;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">END</span></strong><span style="color:#000000;">;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">/  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; @remove_job  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">PL/SQL <strong><span style="color:#006699;">procedure</span></strong><span style="color:#000000;"> successfully completed.  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;此时设置job_queue_processes的值为6</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; <strong><span style="color:#006699;">alter</span></strong><span style="color:#000000;"> system </span><strong><span style="color:#006699;">set</span></strong><span style="color:#000000;"> job_queue_processes=6;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">System altered.  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;清空测试用表</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; <strong><span style="color:#006699;">truncate</span></strong><span style="color:#000000;"> </span><strong><span style="color:#006699;">table</span></strong><span style="color:#000000;"> tb_job;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">Table</span></strong><span style="color:#000000;"> truncated.  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;此时Oracle为job启动了2个进程</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; ho ps -ef | grep rac11g | grep ora_j | grep -v grep  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">oracle    3477     1  9 12:29 ?        00:00:01 ora_j000_rac11g1  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">oracle    3491     1  4 12:29 ?        00:00:00 ora_j001_rac11g1  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;添加多个job</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; @add_job  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">PL/SQL <strong><span style="color:#006699;">procedure</span></strong><span style="color:#000000;"> successfully completed.  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt; Author : Robinson</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt; Blog   : http://blog.csdn.net/robinson_0612</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; @jobs  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">OWNER                JOB_NAME    ENABL JOB_CLASS             NEXT_RUN_DATE  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">-------------------- ----------- ----- --------------------- -----------------------------------</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT                JOB_1       <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS     19-MAR-13 12.31.55.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT                JOB_2       <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS     19-MAR-13 12.31.56.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT                JOB_3       <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS     19-MAR-13 12.31.56.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT                JOB_4       <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS     19-MAR-13 12.31.56.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SCOTT                JOB_5       <strong><span style="color:#006699;">TRUE</span></strong><span style="color:#000000;">  DEFAULT_JOB_CLASS     19-MAR-13 12.31.56.000000 PM +08:00  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;片刻后可以看到job进程总数达到6个</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; ho ps -ef | grep rac11g | grep ora_j | grep -v grep  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">oracle    7668     1  1 11:57 ?        00:00:01 ora_j000_rac11g1  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">oracle    7678     1  0 11:57 ?        00:00:01 ora_j001_rac11g1  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">oracle    7700     1  1 11:57 ?        00:00:01 ora_j002_rac11g1  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">oracle    9230     1  0 11:57 ?        00:00:00 ora_j003_rac11g1  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">oracle    9257     1  2 11:58 ?        00:00:01 ora_j005_rac11g1  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">oracle    9353     1  7 11:59 ?        00:00:00 ora_j004_rac11g1            </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;查看表tb_job的情形                   </span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; <strong><span style="color:#006699;">select</span></strong><span style="color:#000000;"> * </span><strong><span style="color:#006699;">from</span></strong><span style="color:#000000;"> tb_job </span><strong><span style="color:#006699;">order</span></strong><span style="color:#000000;"> </span><strong><span style="color:#006699;">by</span></strong><span style="color:#000000;"> 1,2;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_N UPDATE_DT  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">----- --------------------</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_1 20130319 12:31:57  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_1 20130319 12:32:58  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_1 20130319 12:33:59  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_2 20130319 12:31:58  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_2 20130319 12:32:59  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_2 20130319 12:34:00  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_3 20130319 12:31:58  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_3 20130319 12:32:59  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_3 20130319 12:34:00  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_4 20130319 12:31:59  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_4 20130319 12:33:00  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_4 20130319 12:34:01  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_5 20130319 12:31:58  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_5 20130319 12:32:59  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">JOB_5 20130319 12:34:00  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;从上面的查询结果可知每一个job的上一次与下一次执行间隔基本保持在1分钟</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;不同job之间的每一次执行时间基本上是相同的，这与job_queue_processes为1时完全不一样</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;也就是说即使是job_5，基本上与job_1是同时执行，而不是像前面测试那样前面所有的执行完后才被执行</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;移除job</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; @remove_job  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">PL/SQL <strong><span style="color:#006699;">procedure</span></strong><span style="color:#000000;"> successfully completed.  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="color:#008200;">--&gt;移除测试表</span><span style="color:#000000;">  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">SQL&gt; <strong><span style="color:#006699;">drop</span></strong><span style="color:#000000;"> </span><strong><span style="color:#006699;">table</span></strong><span style="color:#000000;"> tb_job purge;  </span></span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;">  </span></span></span></span></span></li><li><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><strong><span style="color:#006699;">Table</span></strong><span style="color:#000000;"> dropped.  </span></span></span></span></span></span></li></ol> 
 </div> 
 <p style="margin-left:0;text-align:left;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000000;"><span style="background-color:#ffffff;"><span style="color:#000066;">4、小结</span><br> a、job_queue_processes参数决定了job作业能够使用的总进程数。<br> b、当该参数为0值，任何job都不会被执行，建议合理设置该值且至少大于1。<br> c、对于job运行时间也应该尽量合理的设置间隔以及启动时间。<br> d、如果同一时间内运行的Job数很多，过小的参数值导致job不得不进行等待。而过大的参数值则消耗更多的系统资源。<br> f、对于存在依赖关系的job，尽可能将其进行合并到一个job中，如使用chain等。</span></span></span></span></p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4998667a8fd1f34f447b925f50f5b8a8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CTF-虚拟机-QEMU-前置知识-操作流程与源码阅读</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/718acce8116e7f87f2a0a5dd89b8ea80/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">软件工程专业英语作业</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>