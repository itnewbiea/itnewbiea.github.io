<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>五种使用python储存数据的方式 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="五种使用python储存数据的方式" />
<meta property="og:description" content="在python编程开发中，总是不可避免的遇到数据储存的问题，下面就介绍python与几种数据储存方式交互的方法。
json文件
json是一种轻量级的数据交换格式。采用完全独立于编程语言的文本格式来存储和表示数据。层次结构简洁而清晰，易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。
最主要的是，通过json这个包可以很方便的解决无论是py2还是py3中的编码问题，json的内容结构也近似于python中的字典和列表，操作起来特别方便。
import json # 此时有一个json文件，结构大概是 [{},{},{}...] 打开这个文件 # 使用json load读取文件内容，然后可以直接用列表或者字典的方式去操作con这个变量 con = json.loads(content) # 那么如何储存为json文件呢？ # 使用dumps将列表序列化并且转换为unicode编码，储存的时候，就可以存你最喜欢的utf-8了 lis = [{},{},{}...] data = json.dumps(lis, ensure_ascii=False) f.write(data.encode(&#39;utf-8&#39;)) csv文件
转换为csv文件后，我们就可以直接用excel打开拉图表了
import csv # 打开文件 with open(filename, &#39;w&#39;) as f: writer = csv.writer(f) # 构造写入器 data = (&#39;1&#39;,&#39;2&#39;,&#39;3&#39;) # 填写三格 data = (&#39;&#39;,&#39;&#39;,&#39;3&#39;) # 填写一格，前两格空起来 data = (&#39;1&#39;,&#39;&#39;) # 填写第一格，后面无论多少格都空起来 writer.writerow(data) # writerow每执行一次，写入一行 注意其中的参数data需要是一个元组 # 注意，在windows中，打开文件需要使用 with open(filename, &#39;w&#39;, newline=&#39;&#39;) as f: # 否则每写一行都会多一个空行 # 原因是 windows中换行符号是 \n\r ，csv库中并没有做特别的处理,所以会产生空行 MySQL数据库" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/fb15aa88e939aa40b5d5f5c4705d327d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-10-13T23:38:10+08:00" />
<meta property="article:modified_time" content="2017-10-13T23:38:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">五种使用python储存数据的方式</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> 在python编程开发中，总是不可避免的遇到数据储存的问题，下面就介绍python与几种数据储存方式交互的方法。</p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <br style=""> </p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <span style="white-space:pre"></span><span style="font-size:24px">json文件</span></p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> json是一种轻量级的数据交换格式。采用完全独立于编程语言的文本格式来存储和表示数据。层次结构简洁而清晰，易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。</p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> 最主要的是，通过json这个包可以很方便的解决无论是py2还是py3中的编码问题，json的内容结构也近似于python中的字典和列表，操作起来特别方便。</p> 
<pre><code class="language-python">import json
# 此时有一个json文件，结构大概是 [{},{},{}...] 打开这个文件
# 使用json load读取文件内容，然后可以直接用列表或者字典的方式去操作con这个变量
con = json.loads(content)
# 那么如何储存为json文件呢？
# 使用dumps将列表序列化并且转换为unicode编码，储存的时候，就可以存你最喜欢的utf-8了
lis = [{},{},{}...]
data = json.dumps(lis, ensure_ascii=False)
f.write(data.encode('utf-8'))</code></pre> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <br style=""> </p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <span style="white-space:pre"></span><span style="font-size:24px">csv文件</span></p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> 转换为csv文件后，我们就可以直接用excel打开拉图表了</p> 
<pre><code class="language-python">import csv
# 打开文件
with open(filename, 'w') as f:
    writer = csv.writer(f) # 构造写入器
    data = ('1','2','3') # 填写三格
    data = ('','','3')   # 填写一格，前两格空起来
    data = ('1','')      # 填写第一格，后面无论多少格都空起来
    writer.writerow(data)  # writerow每执行一次，写入一行 注意其中的参数data需要是一个元组</code></pre> 
<pre class="brush:bash;toolbar:false;" style='overflow:auto; font-family:Menlo,Monaco,Consolas,"Courier New",monospace; font-size:13px; padding:9.5px; margin-top:0px; margin-bottom:10px; line-height:1.42857; color:rgb(51,51,51); word-break:break-all; word-wrap:break-word; background-color:rgb(245,245,245); border:1px solid rgb(204,204,204)'># 注意，在windows中，打开文件需要使用
with open(filename, 'w', newline='') as f:
# 否则每写一行都会多一个空行
# 原因是 windows中换行符号是 \n\r ，csv库中并没有做特别的处理,所以会产生空行</pre> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <br style=""> </p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <span style="white-space:pre"></span><span style="font-size:24px">MySQL数据库</span></p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <span style="font-size:16px">应该是最常用的操作了，使用mysql的优点是看数据真的很直观（如果使用GUI程序的话）</span></p> 
<pre><code class="language-python">导入包略微不一样
@python3
import pymysql
@python2
import MySQLdb

# 建立连接 注意数据库写入数据时数据的编码
conn = MySQLdb.connect(host='localhost', port=3306, db='test',
user='root', passwd='', charset='utf8')

# 新建游标 游标操作sql语句
cur = conn.cursor()
result = cur.execute("insert into students(name) values('Jack')")
result = cur.execute("insert into students(name,age) values(%s,%s)", params)

# sql对数据库数据有改变的时候，使用commit()提交，否则不生效
conn.commit()

# 返回数据到python，使用fetchone和fetchall从内存中取数据，取了一个清空一个
cur.execute('select * from students where id between 1 and 5')
result=cur.fetchone()
result=cur.fetchall()

# 最后记得关闭连接
cur.close()
conn.close()</code></pre> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <br style=""> </p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <span style="white-space:pre"></span><span style="font-size:24px">Redis数据库</span></p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> 优点是方便，速度快，需要注意的是取出的数据是二进制数据，一般需要转为字符串再操作。</p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> 操作大全： <a target="_blank" href="http://www.cnblogs.com/melonjiang/p/5342505.html" rel="nofollow noopener noreferrer" style="background-color:transparent; color:rgb(66,139,202)">python-redis操作大全</a></p> 
<pre><code class="language-python">import redis

# 建立连接
client = redis.Redis(host='lcoalhost', port=6379)

# 操作数据
client.set('nums', [1,2,3,4,5])
result = client.get('name')

# 使用事务（避免失败操作导致数据只操作了一半）
pipe = client.pipeline()
pipe.set('name', 'Jack')
pipe.execute()</code></pre> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <span style="font-size:24px"><br style=""> </span></p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <span style="font-size:24px">Mongdb数据库</span></p> 
<p style='margin-top:0px; margin-bottom:10px; color:rgb(51,51,51); font-family:"Helvetica Neue",Helvetica,Arial,sans-serif; font-size:14px'> <span style="font-size:24px"><span style="font-size:16px">优点是不在乎数据结构，需要注意的是取出来的时候要写个脚本整理一下。</span><br style=""> </span></p> 
<pre><code class="language-python">import pymongo

# 建立连接 指定数据表
client = pymongo.MongoClient('localhost', 27017)
test1_db = client.test1
sheet_stu = db.stu

# 操作数据
info = {name:'Jack',age:18}
info_id = stu.insert_one(info).inserted_id
cur_list = [cur for cur in stu.find()]
count = stu.count()</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/22604d7c39955d1c572aae47fddd0391/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Feign client 设置请求头信息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/08733d81e61f0bcb6a4b9e9e60f1e22c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">php 错误级别日志</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>