<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CTA-敏感行为-定位（重点） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CTA-敏感行为-定位（重点）" />
<meta property="og:description" content="1 需求
2 权限
3 接口
4 示例
5 adb命令
6.1 验证
adb shell dumpsys appops --op 0/1/2
6.2 验证
adb shell dumpsys location
6.3 验证
adb logcat -b main | findstr &#34;LocationManagerService:.onRegistrationAdded&#34;
7 参考资料
Android源码
国内： AndroidXRef（1.6-9.0）AOSPXRef（7.1-12.0）海外： https://android.googlesource.com/platform/frameworks/base/ Android文档
国内 文档：Documentation | Android 开发者 | Android Developers指南：开发者指南 | Android 开发者 | Android Developers参考文档：Android API reference | Android Developers海外 文档：https://developer.android.com/docs指南：https://developer.android.com/guide参考文档：https://developer.android.com/reference Android权限
Manifest.permission | Android Developershttp://androidxref.com/8.0.0_r4/xref/frameworks/base/core/res/AndroidManifest.xml 参考资料：
构建位置感知应用 | Android 开发者 | Android Developers" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b53b52b4e0fba07abb52664f06ce9940/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-13T20:02:37+08:00" />
<meta property="article:modified_time" content="2023-02-13T20:02:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CTA-敏感行为-定位（重点）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1 需求</p> 
<p></p> 
<hr> 
<p>2 权限</p> 
<p></p> 
<hr> 
<p>3 接口</p> 
<p></p> 
<hr> 
<p>4 示例</p> 
<p></p> 
<hr> 
<p>5 adb命令</p> 
<p></p> 
<hr> 
<p>6.1 验证</p> 
<blockquote> 
 <p>adb shell dumpsys appops --op 0/1/2</p> 
</blockquote> 
<p></p> 
<hr> 
<p>6.2 验证</p> 
<blockquote> 
 <p>adb shell dumpsys location</p> 
</blockquote> 
<p></p> 
<hr> 
<p>6.3 验证</p> 
<blockquote> 
 <p>adb logcat -b main | findstr "LocationManagerService:.onRegistrationAdded"</p> 
</blockquote> 
<p></p> 
<hr> 
<p>7 参考资料</p> 
<p></p> 
<p></p> 
<p></p> 
<p><span style="color:#fe2c24;"><strong>Android源码</strong></span></p> 
<ul><li>国内： 
  <ul><li><a href="http://androidxref.com/" rel="nofollow" title="AndroidXRef">AndroidXRef</a>（1.6-9.0）</li><li><a href="http://aospxref.com/" rel="nofollow" title="AOSPXRef">AOSPXRef</a>（7.1-12.0）</li></ul></li><li>海外： 
  <ul><li><a href="https://android.googlesource.com/platform/frameworks/base/" rel="nofollow" title="https://android.googlesource.com/platform/frameworks/base/">https://android.googlesource.com/platform/frameworks/base/</a></li></ul></li></ul> 
<p><span style="color:#fe2c24;"><strong>Android文档</strong></span></p> 
<ul><li>国内 
  <ul><li>文档：<a href="https://developer.android.google.cn/docs" rel="nofollow" title="Documentation  |  Android 开发者  |  Android Developers">Documentation  |  Android 开发者  |  Android Developers</a></li><li>指南：<a href="https://developer.android.google.cn/guide" rel="nofollow" title="开发者指南  |  Android 开发者  |  Android Developers">开发者指南  |  Android 开发者  |  Android Developers</a></li><li>参考文档：<a href="https://developer.android.google.cn/reference" rel="nofollow" title="Android API reference  |  Android Developers">Android API reference  |  Android Developers</a></li></ul></li><li>海外 
  <ul><li>文档：<a href="https://developer.android.com/docs" rel="nofollow" title="https://developer.android.com/docs">https://developer.android.com/docs</a></li><li>指南：<a href="https://developer.android.com/guide" rel="nofollow" title="https://developer.android.com/guide">https://developer.android.com/guide</a></li><li>参考文档：<a href="https://developer.android.com/reference" rel="nofollow" title="https://developer.android.com/reference">https://developer.android.com/reference</a></li></ul></li></ul> 
<p><span style="color:#fe2c24;"><strong>Android权限</strong></span></p> 
<ul><li><a href="https://developer.android.google.cn/reference/android/Manifest.permission" rel="nofollow" title="Manifest.permission  |  Android Developers">Manifest.permission  |  Android Developers</a></li><li><a href="http://androidxref.com/8.0.0_r4/xref/frameworks/base/core/res/AndroidManifest.xml" rel="nofollow" title="http://androidxref.com/8.0.0_r4/xref/frameworks/base/core/res/AndroidManifest.xml">http://androidxref.com/8.0.0_r4/xref/frameworks/base/core/res/AndroidManifest.xml</a></li></ul> 
<hr> 
<p><span style="color:#fe2c24;"><strong> 参考资料：</strong></span></p> 
<p><a href="https://developer.android.google.cn/training/location" rel="nofollow" title="构建位置感知应用  |  Android 开发者  |  Android Developers">构建位置感知应用  |  Android 开发者  |  Android Developers</a></p> 
<p><img alt="" height="398" src="https://images2.imgbox.com/92/bb/tYrphsyh_o.png" width="246"></p> 
<p></p> 
<p></p> 
<p><a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/location/java/android/location/LocationManager.java" rel="nofollow" title="LocationManager.java - OpenGrok cross reference for /frameworks/base/location/java/android/location/LocationManager.java">LocationManager.java - OpenGrok cross reference for /frameworks/base/location/java/android/location/LocationManager.java</a></p> 
<p><img alt="" height="604" src="https://images2.imgbox.com/f2/1c/aO5jOiDI_o.png" width="766"></p> 
<p><a href="https://blog.csdn.net/lqxandroid2012/article/details/49853965" title="android的四种定位方式_lqxandroid2012的专栏-CSDN博客">android的四种定位方式_lqxandroid2012的专栏-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/yhaolpz/article/details/51346242" title="Android 定位服务（Location-Based Services）_yhao的博客-CSDN博客_passive_provider">Android 定位服务（Location-Based Services）_yhao的博客-CSDN博客_passive_provider</a></p> 
<p><a href="https://blog.csdn.net/qq_33689414/article/details/54136922" title="Android中使用GPS和NetWork获取定位信息_Widsom的博客-CSDN博客_android network_provider">Android中使用GPS和NetWork获取定位信息_Widsom的博客-CSDN博客_android network_provider</a></p> 
<p><a href="https://blog.csdn.net/chzphoenix/article/details/89404332" title="android中几种定位方式详解_BennuCTech的博客-CSDN博客_android 定位">android中几种定位方式详解_BennuCTech的博客-CSDN博客_android 定位</a></p> 
<ul><li>定位 分类 
  <ul><li>定位原理：GPS、AGPS、NETWORK、WLAN 
    <ul><li>GPS定位（GPS_PROVIDER）</li><li>网络定位（NETWORK_PROVIDER）</li><li>被动定位（PASSIVE_PROVIDER）</li><li>融合定位（FUSED_PROVIDER）</li></ul></li><li>精准程度：确切位置（precise location）、大致位置（approximate location）</li><li>后台：前台定位（foreground location）、后台定位（background location）</li></ul></li></ul> 
<hr> 
<p><a href="https://developer.android.google.cn/training/data-storage/use-cases#access-photo-locations" rel="nofollow" title="Android 存储用例和最佳做法  |  Android 开发者  |  Android Developers">Android 存储用例和最佳做法  |  Android 开发者  |  Android Developers</a></p> 
<p><img alt="" height="188" src="https://images2.imgbox.com/2b/cb/wHIuC8lc_o.png" width="869"></p> 
<p><a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml" rel="nofollow" title="AndroidManifest.xml - OpenGrok cross reference for /frameworks/base/core/res/AndroidManifest.xml">AndroidManifest.xml - OpenGrok cross reference for /frameworks/base/core/res/AndroidManifest.xml</a></p> 
<blockquote> 
 <pre><a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml#976" rel="nofollow" name="976" title="976 ">976 </a>    &lt;!-- Allows an application to access any geographic locations persisted in the
<a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml#977" rel="nofollow" name="977" title="977 ">977 </a>         user's shared collection.
<a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml#978" rel="nofollow" name="978" title="978 ">978 </a>         &lt;p&gt;Protection level: dangerous --&gt;
<a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml#979" rel="nofollow" name="979" title="979 ">979 </a>    &lt;permission android:<strong>name=</strong>"<a href="http://aospxref.com/android-12.0.0_r3/s?path=android.permission.ACCESS_MEDIA_LOCATION&amp;project=frameworks" rel="nofollow" title="android.permission.ACCESS_MEDIA_LOCATION">android.permission.ACCESS_MEDIA_LOCATION</a>"
<a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml#980" rel="nofollow" name="980" title="980 ">980 </a>        android:<strong>permissionGroup=</strong>"<a href="http://aospxref.com/android-12.0.0_r3/s?path=android.permission-group.UNDEFINED&amp;project=frameworks" rel="nofollow" title="android.permission-group.UNDEFINED">android.permission-group.UNDEFINED</a>"
<a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml#981" rel="nofollow" name="981" title="981 ">981 </a>        android:<strong>label=</strong>"@<a href="http://aospxref.com/android-12.0.0_r3/s?path=string/&amp;project=frameworks" rel="nofollow" title="string">string</a>/<a href="http://aospxref.com/android-12.0.0_r3/s?path=string/permlab_mediaLocation&amp;project=frameworks" rel="nofollow" title="permlab_mediaLocation">permlab_mediaLocation</a>"
<a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml#982" rel="nofollow" name="982" title="982 ">982 </a>        android:<strong>description=</strong>"@<a href="http://aospxref.com/android-12.0.0_r3/s?path=string/&amp;project=frameworks" rel="nofollow" title="string">string</a>/<a href="http://aospxref.com/android-12.0.0_r3/s?path=string/permdesc_mediaLocation&amp;project=frameworks" rel="nofollow" title="permdesc_mediaLocation">permdesc_mediaLocation</a>"
<a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml#983" rel="nofollow" name="983" title="983 ">983 </a>        android:<strong>protectionLevel=</strong>"dangerous" /&gt;</pre> 
</blockquote> 
<p><a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/proto_logging/stats/enums/app/enums.proto" rel="nofollow" title="enums.proto - OpenGrok cross reference for /frameworks/proto_logging/stats/enums/app/enums.proto">enums.proto - OpenGrok cross reference for /frameworks/proto_logging/stats/enums/app/enums.proto</a></p> 
<blockquote> 
 <pre>APP_OP_ACCESS_MEDIA_LOCATION = 90;
</pre> 
</blockquote> 
<hr> 
<p><span style="color:#fe2c24;"><strong>权限 &amp; 接口 汇总</strong></span></p> 
<ul><li>android.permission.ACCESS_COARSE_LOCATION</li><li>android.permission.ACCESS_FINE_LOCATION</li></ul> 
<hr> 
<p><span style="color:#fe2c24;"><strong>定位 权限</strong></span></p> 
<ul><li>android.permission.ACCESS_COARSE_LOCATION</li><li>android.permission.ACCESS_FINE_LOCATION</li></ul> 
<p><a href="https://developer.android.google.cn/reference/android/Manifest.permission#CAMERA" rel="nofollow" title="Manifest.permission  |  Android Developers">Manifest.permission  |  Android Developers</a></p> 
<p><img alt="" height="439" src="https://images2.imgbox.com/d5/30/iij0dCws_o.png" width="986"></p> 
<p><img alt="" height="292" src="https://images2.imgbox.com/0e/78/LHswumQo_o.png" width="968"></p> 
<p><img alt="" height="294" src="https://images2.imgbox.com/8b/cf/CM9zBMDd_o.png" width="979"></p> 
<p><a href="http://aospxref.com/android-12.0.0_r3/xref/frameworks/base/core/res/AndroidManifest.xml" rel="nofollow" title="AndroidManifest.xml - OpenGrok cross reference for /frameworks/base/core/res/AndroidManifest.xml">AndroidManifest.xml - OpenGrok cross reference for /frameworks/base/core/res/AndroidManifest.xml</a></p> 
<p><img alt="" height="907" src="https://images2.imgbox.com/da/db/B51FtKIO_o.png" width="918"></p> 
<hr> 
<p><span style="color:#fe2c24;"><strong>定位 接口</strong></span></p> 
<ul><li>……</li></ul> 
<hr> 
<p>用途X：获取手机应用定位信息</p> 
<p>adb shell dumpsys appops --op X</p> 
<ul><li>APP_OP_COARSE_LOCATION = 0</li><li>APP_OP_FINE_LOCATION = 1</li><li>APP_OP_MONITOR_LOCATION = 41</li><li>APP_OP_MONITOR_HIGH_POWER_LOCATION = 42</li><li>APP_OP_MOCK_LOCATION = 58</li><li>APP_OP_ACCESS_MEDIA_LOCATION = 90</li><li>APP_OP_FINE_LOCATION_SOURCE = 108</li><li>APP_OP_COARSE_LOCATION_SOURCE = 109</li></ul> 
<hr> 
<p>用途X：获取手机应用定位信息</p> 
<blockquote> 
 <p>adb shell dumpsys location</p> 
</blockquote> 
<p><img alt="" height="52" src="https://images2.imgbox.com/8b/4a/9hefMOqT_o.png" width="807"></p> 
<hr> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6657090957bae954a484798d4dd047ee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java中的lambda表达式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bad49de9a0d2a1eb7eb4675b113f88ee/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">postman实现接口测试详细教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>