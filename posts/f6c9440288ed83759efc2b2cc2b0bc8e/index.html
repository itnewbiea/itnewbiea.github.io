<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue&#43;node express生成器 使用socket.io (websocket) - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue&#43;node express生成器 使用socket.io (websocket)" />
<meta property="og:description" content="1.客户端（前端） Index.html引入服务 socket脚本
&lt;script src=&#39;https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js&#39;&gt;&lt;/script&gt; 然后 我的是点击连接websockt
handleClick(){ var socket=io(&#34;ws://192.168.1.80:3000&#34;); socket.on(&#39;chat message&#39;, function(msg){ console.log(msg) }) } 服务端先安装
npm install --save socket.io
APP.js 不用管 现在是为websocket开服务
服务端 在bin目录下www里面
//添加的socket代码 var io = require(&#39;socket.io&#39;).listen(server); io.on(&#39;connection&#39;, function(socket){ console.log(&#39;a user connected234&#39;); socket.on(&#39;disconnect&#39;, function(){ console.log(&#39;user disconnected&#39;); }); }); 以下是我全部的www代码
#!/usr/bin/env node /** * Module dependencies. */ var app = require(&#39;../app&#39;); var debug = require(&#39;debug&#39;)(&#39;myapp:server&#39;); var http = require(&#39;http&#39;); /** * Get port from environment and store in Express." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f6c9440288ed83759efc2b2cc2b0bc8e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-10T10:50:50+08:00" />
<meta property="article:modified_time" content="2019-01-10T10:50:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue&#43;node express生成器 使用socket.io (websocket)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>1.客户端（前端） Index.html引入服务 socket脚本</strong></p> 
<pre><code>&lt;script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js'&gt;&lt;/script&gt;
</code></pre> 
<p>然后 我的是点击连接websockt</p> 
<pre><code>handleClick(){
           var socket=io("ws://192.168.1.80:3000");
                   socket.on('chat message', function(msg){
                     console.log(msg)
                   })
    }
</code></pre> 
<p>服务端先安装</p> 
<blockquote> 
 <p>npm install --save <a href="http://socket.io" rel="nofollow">socket.io</a></p> 
</blockquote> 
<p><strong>APP.js 不用管 现在是为websocket开服务</strong></p> 
<p>服务端 在bin目录下www里面</p> 
<pre><code>//添加的socket代码
var io = require('socket.io').listen(server);

io.on('connection', function(socket){
  console.log('a user connected234');
  socket.on('disconnect', function(){
    console.log('user disconnected');
  });
});


</code></pre> 
<p>以下是我全部的www代码</p> 
<pre><code>#!/usr/bin/env node

/**
 * Module dependencies.
 */

var app = require('../app');
var debug = require('debug')('myapp:server');
var http = require('http');

/**
 * Get port from environment and store in Express.
 */

var port = normalizePort(process.env.PORT || '3000');
app.set('port', port);

/**
 * Create HTTP server.
 */

var server = http.createServer(app);

//添加的socket代码
var io = require('socket.io').listen(server);

io.on('connection', function(socket){
  console.log('a user connected234');
  socket.on('disconnect', function(){
    console.log('user disconnected');
  });
});

/**
 * Listen on provided port, on all network interfaces.
 */

server.listen(port);
server.on('error', onError);
server.on('listening', onListening);

/**
 * Normalize a port into a number, string, or false.
 */

function normalizePort(val) {
  var port = parseInt(val, 10);

  if (isNaN(port)) {
    // named pipe
    return val;
  }

  if (port &gt;= 0) {
    // port number
    return port;
  }

  return false;
}

/**
 * Event listener for HTTP server "error" event.
 */

function onError(error) {
  if (error.syscall !== 'listen') {
    throw error;
  }

  var bind = typeof port === 'string'
    ? 'Pipe ' + port
    : 'Port ' + port;

  // handle specific listen errors with friendly messages
  switch (error.code) {
    case 'EACCES':
      console.error(bind + ' requires elevated privileges');
      process.exit(1);
      break;
    case 'EADDRINUSE':
      console.error(bind + ' is already in use');
      process.exit(1);
      break;
    default:
      throw error;
  }
}

/**
 * Event listener for HTTP server "listening" event.
 */

function onListening() {
  var addr = server.address();
  var bind = typeof addr === 'string'
    ? 'pipe ' + addr
    : 'port ' + addr.port;
  debug('Listening on ' + bind);
}


</code></pre> 
<p>然后重启服务 点击事件 会看到你服务端窗口打印 OK</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d1fc3e493491850aebd66b19b138d3e8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python抢票（Windows版本）下载不到requirements.txt</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/af745a0937148cce0712954be9fed5c9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何快速将多个文件夹下内容合并到一个文件夹下</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>