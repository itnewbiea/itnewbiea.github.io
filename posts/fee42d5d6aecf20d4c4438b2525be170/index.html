<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库 Update Statistics作用及用法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库 Update Statistics作用及用法" />
<meta property="og:description" content="一、Update Statistics的作用
为了提高数据库的效率，INFORMIX提供了一个基于成本的查询优化器， 执行update statistics语句的作用就是将您创建的数据库表的有关统计信息更新到系统sysmaster的相关表中(如systables、 syscolumns、sysindexes、sysdistrib、sysprocplan等)，以便查询优化器选择最佳的执行路径。当 sysmaster库中没有相应的统计信息，或者统计信息不十分准确时，优化器便无法制定一个行之有效的查询策略，其结果必然是进行大量极其可怕的顺序扫 描，产生严重的性能问题。
因此，当您重新装载数据或者对数据库表进行了大量的更新操作后，应该及时执行update statistics。也许您会发现，数据库一些参数配置的不合理可能使数据库效率降低百分之几，但如果您没有定期执行update statistics的话。数据库的性能则可能降低几到十几倍。
二、Update Statistics的语法
执行update statistics共有三个级别，即：update statistics low、updates tatistics medium、update statistics high。
1 update statistics[low]for table[{table－namesynonym－name}[(column－list)]]][drop distributions]
update statistics low只更新表、字段、记录数、页数及索引等的最基本信息，对字段的分布情况不做统计。其语法说明如下：
(1)update statistics或update statistics low，对当前数据库中所有表(包括系统表)及过程进行更新统计。
(2)update statistics low for table，对当前数据库中所有表(包括临时表，但不包括系统表)进行更新统计。
(3)update statistics low for table tablename，对指定的表所有字段进行更新统计。
(4)update statistics low for table tablename(column－list)，对指定表的指定字段进行更新统计。
(5)如果不带drop distributions，原有字段分布情况依然保留；否则，原有字段分布情况将被删除。
2 update statistics medium[for table[{table－namesynonym－name}[（column－list）]]][resolution percent[conf]][distributions only]
update statistics medium除了更新表、字段、记录数、页数及索引等的最基本信息外，对字段的分布情况会采取抽样的办法来统计，因此与update statistics low相比需要花费更多的时间。其语法说明如下：
(1)resolution percent是指分布统计的详细程序，percent定义的是一个百分数，如resolution2意思是指按照字段的值分布统计成50段，如果不指定resolution percent，缺省值为2.5。
(2)conf是指分布统计时取样的比例，conf参数的取值范围为0.80—0.99，缺省值为0.95。
(3)如果指定了distributions only，则对索引的信息不做更新统计。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/fee42d5d6aecf20d4c4438b2525be170/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-10-08T14:10:00+08:00" />
<meta property="article:modified_time" content="2010-10-08T14:10:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库 Update Statistics作用及用法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>一、Update Statistics的作用<br> 　　为了提高数据库的效率，INFORMIX提供了一个基于成本的查询优化器， 执行update statistics语句的作用就是将您创建的数据库表的有关统计信息更新到系统sysmaster的相关表中(如systables、 syscolumns、sysindexes、sysdistrib、sysprocplan等)，以便查询优化器选择最佳的执行路径。当 sysmaster库中没有相应的统计信息，或者统计信息不十分准确时，优化器便无法制定一个行之有效的查询策略，其结果必然是进行大量极其可怕的顺序扫 描，产生严重的性能问题。<br> 　　<br> 　　因此，当您重新装载数据或者对数据库表进行了大量的更新操作后，应该及时执行update statistics。也许您会发现，数据库一些参数配置的不合理可能使数据库效率降低百分之几，但如果您没有定期执行update statistics的话。数据库的性能则可能降低几到十几倍。<br> 　　<br> 　　二、Update Statistics的语法<br> 　　执行update statistics共有三个级别，即：update statistics low、updates tatistics medium、update statistics high。<br> 　　1 update statistics[low]for table[{table－namesynonym－name}[(column－list)]]][drop distributions]<br> 　　update statistics low只更新表、字段、记录数、页数及索引等的最基本信息，对字段的分布情况不做统计。其语法说明如下：<br> 　　<br> 　　(1)update statistics或update statistics low，对当前数据库中所有表(包括系统表)及过程进行更新统计。<br> 　　(2)update statistics low for table，对当前数据库中所有表(包括临时表，但不包括系统表)进行更新统计。<br> 　　(3)update statistics low for table tablename，对指定的表所有字段进行更新统计。<br> 　　(4)update statistics low for table tablename(column－list)，对指定表的指定字段进行更新统计。<br> 　　(5)如果不带drop distributions，原有字段分布情况依然保留；否则，原有字段分布情况将被删除。<br> 　　2 update statistics medium[for table[{table－namesynonym－name}[（column－list）]]][resolution percent[conf]][distributions only]<br> 　　update statistics medium除了更新表、字段、记录数、页数及索引等的最基本信息外，对字段的分布情况会采取抽样的办法来统计，因此与update statistics low相比需要花费更多的时间。其语法说明如下：<br> 　　<br> 　　(1)resolution percent是指分布统计的详细程序，percent定义的是一个百分数，如resolution2意思是指按照字段的值分布统计成50段，如果不指定resolution percent，缺省值为2.5。<br> 　　(2)conf是指分布统计时取样的比例，conf参数的取值范围为0.80—0.99，缺省值为0.95。<br> 　　(3)如果指定了distributions only，则对索引的信息不做更新统计。<br> 　　3 update statistics high[for table[{table－namesynonym－name}[(column－list]]][resolutionpercent][distributions only]<br> 　 　update statistics high与update statistics medium的区别是在统计字段的分布情况时，后者采用了取样的办法，而前者进行全部统计，因此update statistics high更新统计最全面，执行时间也最长。其语法说明如下：<br> 　　<br> 　　(1)如果不指定resolution percent，缺省值为0.5。<br> 　　(2)如果指定了distributions only，则对索引的信息不做更新统计。<br> 　　4 update statistics for procedure[procedure－name]，只对指定的过程进行更新统计，对表不做更新统计</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d00bc65b93bbcba82e91720948985322/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深入理解PHP之源码目录结构</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c505ca32e2566bbb48737b880e88e636/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">jstl函数库及自定义函数库</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>