<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Electron】webview 实现网页内嵌 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Electron】webview 实现网页内嵌" />
<meta property="og:description" content="实现效果：
当在输入框内输入某个网址后并点击button按钮 , 该网址内容就展示到下面
踩到的坑：之前通过web技术实现 iframe 标签内嵌会出现 同源策略，同时尝试过 vue.config.ts 内配置跨域项 那样确实 是实现啦 但不知道如何动态切换 tagert 的值 同源策略:
Refused to frame &#39;https://www.baidu.com/&#39; because an ancestor violates the following Content Security Policy directive: &#34;frame-ancestors &#39;self&#39; https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com&#34;.
1. npm init -y //先安装package.json
2.npm install electron 3.创建main.js
const { app, BrowserWindow } = require(&#39;electron&#39;) let mainWindow function createWindow () { mainWindow = new BrowserWindow({ width: 1200, height: 1000, webPreferences: { nodeIntegration: true, webviewTag: true // 启用webview标签 } }) const menu = Menu." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/447aa85ff1c7092822f671113f9b8c4e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-30T14:00:39+08:00" />
<meta property="article:modified_time" content="2023-12-30T14:00:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Electron】webview 实现网页内嵌</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>实现效果：</strong></p> 
<p><strong>当在输入框内输入某个网址后并点击button按钮 , 该网址内容就展示到下面</strong></p> 
<p><img alt="" height="792" src="https://images2.imgbox.com/d6/2d/10qE67cN_o.png" width="1186"></p> 
<p></p> 
<p><strong>踩到的坑：之前通过web技术实现 iframe 标签内嵌会出现 同源策略，同时尝试过 vue.config.ts 内配置跨域项 那样确实 是实现啦 但不知道如何动态切换 tagert 的值 </strong></p> 
<blockquote> 
 <p><strong>同源策略:</strong><br><br> Refused to frame 'https://www.baidu.com/' because an ancestor violates the following Content Security Policy directive: "frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com".</p> 
</blockquote> 
<p></p> 
<p><strong>1. npm init -y //先安装</strong><strong>package.json</strong></p> 
<p><strong>2.npm install electron  </strong></p> 
<p><strong>3.创建main.js</strong></p> 
<pre><code class="language-javascript">const { app, BrowserWindow } = require('electron')

let mainWindow

function createWindow () {
  mainWindow = new BrowserWindow({
    width: 1200,
    height: 1000,
    webPreferences: {
      nodeIntegration: true,
      webviewTag: true // 启用webview标签
    }
  })

const menu = Menu.buildFromTemplate([])
 // 设置菜单栏 =主进程
Menu.setApplicationMenu(menu)

  mainWindow.loadFile('index.html')

  mainWindow.on('closed', () =&gt; {
    mainWindow = null
  })
}

app.whenReady().then(createWindow)

app.on('window-all-closed', () =&gt; {
  if (process.platform !== 'darwin') {
    app.quit()
  }
})

app.on('activate', () =&gt; {
  if (BrowserWindow.getAllWindows().length === 0) {
    createWindow()
  }
})
</code></pre> 
<p><strong>4.</strong></p> 
<p><strong>Menu的作用是去除顶部菜单栏</strong></p> 
<p><img alt="" height="321" src="https://images2.imgbox.com/38/93/VeHnKJtM_o.png" width="1186"></p> 
<pre><code class="language-javascript">const { Menu } = require('electron')
const menu = Menu.buildFromTemplate([])
 // 设置菜单栏 =主进程
 Menu.setApplicationMenu(menu)</code></pre> 
<p><strong>5.如果你在这里使用了 webview 标签 那么你一定要在 webPreferences内添加webviewTag并true ，因为在高版本的electron内 webview标签默认是禁用的状态 </strong></p> 
<p><img alt="" height="626" src="https://images2.imgbox.com/bd/84/LWRxWae9_o.png" width="662"></p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;!-- https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline';"&gt;
    &lt;title&gt;你好!&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div style="display: flex;"&gt;
        &lt;input type="text" id="urlInput" placeholder="Enter URL" style="width: 100%;"&gt;
        &lt;button id="openUrl"&gt;Open URL&lt;/button&gt;
    &lt;/div&gt;
    &lt;webview id="foo" src="https://www.douyin.com/" httpreferrer="https://www.douyin.com/"
        style="display:flex; width:100%; height:900px"&gt;&lt;/webview&gt;


    &lt;script&gt;
        urlInput = document.getElementById('urlInput')
        openUrl = document.getElementById('openUrl')
        foo = document.getElementById('foo')

        openUrl.addEventListener('click', async () =&gt; {
            foo.setAttribute('src', urlInput.value)
        })
    &lt;/script&gt;

&lt;/body&gt;

&lt;/html&gt;</code></pre> 
<p></p> 
<p><strong>启动命令：</strong><br><strong>npx electron . <br> 或<br> npm install -g electron</strong><br><strong>electron .</strong></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/acafcce14ce82ae4dda2bdcde6fbc66c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">已加入git本地版本库的文件如何移除</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4d422364252559f9b18d3455af9d2499/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Abstract Factory抽象工厂模式（对象创建）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>