<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>shell脚本 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="shell脚本" />
<meta property="og:description" content="shell注释 链接
shell文件中编程的作用 就是linux操作命令，运行.sh文件相当于执行linux命令。
.sh就是命令集文件。
shell文件的建立 vi xxx.sh
shell脚本执行四种方式 1，bash xxx.sh 在当前终端启动一个进程去执行脚本
2，./xxxx.sh 新建的文件是没有执行权限的
需要文件有执行权限(x),同样会启动一个子进程执行shell脚本
chmod u&#43;x xxx.sh
3，source xxx.sh 不会启动子进程执行脚本，当前进程终端执行脚本
4，. xxx.sh 不会启动子进程执行脚本，当前进程终端执行脚本
3,4会影响当前终端进程
因为以上原因，使用不同方法操作$0，会得出两种结果。
linux删除键，上下左右变字母 没有vim，下载vim就行
字符串 判断字符串是否为整数 shell命令如果有问题，会提示，但是不会退出脚本的执行。
&amp;&gt; /dev/null------表示不保留任何输出 expre length 字符串----计算字符串长短 shell中的true和false true和false是shell中的命令。
执行true-----返回成功状态码0
执行false-----返回失败状态码1
数值和退出状态码 数值就是状态码吗 不是
在 Shell 中，作为数字，任何值都是真；作为状态码，0 表示真，非 0 表示假。
变量 定义：name=wu
等号两遍不能有空格
变量三种赋值方法 变量名=value #＜==赋值时不加引号
变量名=&#39;value&#39; #＜==赋值时加单引号
变量名=&#34;value&#34; #＜==赋值时加双引号
字符串中不适用引号，使用单引号，双引号的区别 主要是对字符串中变量和命令的操作不同
字符串中有变量 字符串如果有空格，必须使用引号
不适用引号和使用双引号-----会解析出变量的值
使用单引号-----不会解析变量值，原样输出
变量解析出字符串需不需要加引号的问题 如果字符串中含有空格，那么对变量解析就需要加上引号
如上，如果变量不加引号，解析出来的变量含有空格，就变量了两个字符串。
字符串中有命令替换 字符串如果有空格，必须使用引号" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/96cf51ea057ab05ec369a70e971aa80b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-05T11:00:57+08:00" />
<meta property="article:modified_time" content="2024-01-05T11:00:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">shell脚本</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>shell注释</h2> 
<p><a class="link-info" href="https://blog.csdn.net/qq_21127151/article/details/81059063" title="链接">链接</a></p> 
<h2>shell文件中编程的作用</h2> 
<p>就是linux操作命令，运行.sh文件相当于执行linux命令。</p> 
<p>.sh就是命令集文件。</p> 
<h2>shell文件的建立</h2> 
<p>vi xxx.sh</p> 
<h2>shell脚本执行四种方式</h2> 
<h4>1，bash xxx.sh</h4> 
<p>在当前终端启动一个进程去执行脚本</p> 
<h4>2，./xxxx.sh</h4> 
<p>新建的文件是没有执行权限的</p> 
<p><img alt="" height="147" src="https://images2.imgbox.com/e0/7c/RxtPMRlL_o.png" width="605"></p> 
<p>需要文件有执行权限(x),同样会启动一个子进程执行shell脚本</p> 
<p>chmod u+x xxx.sh</p> 
<h4>3，source xxx.sh</h4> 
<p>不会启动子进程执行脚本，当前进程终端执行脚本</p> 
<h4>4，. xxx.sh</h4> 
<p>不会启动子进程执行脚本，当前进程终端执行脚本</p> 
<p>3,4会影响当前终端进程</p> 
<p>因为以上原因，使用不同方法操作$0，会得出两种结果。</p> 
<p></p> 
<h2>linux删除键，上下左右变字母</h2> 
<p>没有vim，下载vim就行</p> 
<h2>字符串</h2> 
<h4>判断字符串是否为整数</h4> 
<p><img alt="" height="227" src="https://images2.imgbox.com/14/9e/wVwJCSos_o.png" width="551"></p> 
<p>shell命令如果有问题，会提示，但是不会退出脚本的执行。</p> 
<p></p> 
<p>&amp;&gt; /dev/null------表示不保留任何输出 </p> 
<h3>  expre length 字符串----计算字符串长短</h3> 
<p> <img alt="" height="156" src="https://images2.imgbox.com/b4/fd/jXo5U54t_o.png" width="504"></p> 
<p></p> 
<h2>shell中的true和false</h2> 
<p>true和false是shell中的命令。</p> 
<p>执行true-----返回成功状态码0</p> 
<p>执行false-----返回失败状态码1</p> 
<p><img alt="" height="157" src="https://images2.imgbox.com/bb/40/Ppp8Sw18_o.png" width="734"></p> 
<p></p> 
<h2>数值和退出状态码</h2> 
<h4>数值就是状态码吗</h4> 
<p>不是</p> 
<p>在 Shell 中，作为数字，任何值都是真；作为状态码，0 表示真，非 0 表示假。</p> 
<p></p> 
<h2>变量</h2> 
<p>定义：name=wu</p> 
<p>等号两遍不能有空格</p> 
<h4>变量三种赋值方法</h4> 
<blockquote> 
 <p>变量名=value #＜==赋值时不加引号</p> 
 <p>变量名='value' #＜==赋值时加单引号</p> 
 <p>变量名="value" #＜==赋值时加双引号</p> 
</blockquote> 
<h3>字符串中不适用引号，使用单引号，双引号的区别</h3> 
<p>主要是对字符串中变量和命令的操作不同</p> 
<h4>字符串中有变量</h4> 
<p><span style="color:#be191c;"><strong>字符串如果有空格，必须使用引号</strong></span></p> 
<p>不适用引号和使用双引号-----会解析出变量的值</p> 
<p>使用单引号-----不会解析变量值，原样输出</p> 
<p><img alt="" height="364" src="https://images2.imgbox.com/50/fd/DESoH8hV_o.png" width="208"></p> 
<p> <img alt="" height="274" src="https://images2.imgbox.com/d6/92/D8S5HudQ_o.png" width="568"></p> 
<h4>变量解析出字符串需不需要加引号的问题</h4> 
<p>如果字符串中含有空格，那么对变量解析就需要加上引号</p> 
<p><img alt="" height="119" src="https://images2.imgbox.com/6a/e3/47aV51Ip_o.png" width="311"></p> 
<p>如上，如果变量不加引号，解析出来的变量含有空格，就变量了两个字符串。</p> 
<p><img alt="" height="191" src="https://images2.imgbox.com/96/dc/yZpUaKX8_o.png" width="407"></p> 
<p></p> 
<h4>字符串中有命令替换</h4> 
<p><span style="color:#be191c;"><strong>字符串如果有空格，必须使用引号</strong></span></p> 
<p>不适用引号和使用双引号-----会执行命令，将命令的执行结果拼接字符串</p> 
<p>使用单引号-----不会执行命令，原样输出</p> 
<p><img alt="" height="143" src="https://images2.imgbox.com/49/9b/kt1BAq24_o.png" width="436"></p> 
<p> <img alt="" height="94" src="https://images2.imgbox.com/e1/f8/SzYDzGmD_o.png" width="487"></p> 
<p> <img alt="" height="319" src="https://images2.imgbox.com/a6/32/87u2OY3R_o.png" width="871"></p> 
<p><img alt="" height="204" src="https://images2.imgbox.com/27/a0/QqBhk3fH_o.png" width="631"></p> 
<p></p> 
<p>使用：${name}或者$name</p> 
<p>只要在引号中或者没有引号的地方遇到$系统都解析为引用变量。如果$只是一个字符就用\转义。</p> 
<p>输出：echo ${name}</p> 
<h4>变量使用{}和不适用{}的用途</h4> 
<p>当变量后面连接有其他字符的时候，必须给变量加上大括号{}，例如：dbname变量的值加上_tname就要改成${dbname}_tname。</p> 
<p><strong>{}约定一个字整体</strong></p> 
<p><strong>{}用来指定哪一部分字符串是一个变量。</strong></p> 
<h4>变量两种取值方式</h4> 
<blockquote> 
 <p>$a</p> 
 <p>${a}</p> 
</blockquote> 
<p>字母，数字，下划线组成；不能以数字开头。</p> 
<p></p> 
<h4>表达式赋值给变量</h4> 
<p>let value=10+20</p> 
<h4>字符串含有特殊字符时</h4> 
<p>需要加上双引号或者单引号，只能一单一双，不能单单双双。</p> 
<p>空格</p> 
<p>content="I am wu."</p> 
<h4>变量的作用域</h4> 
<p>1，用户自定义的变量自在本脚有用，除非export导出。</p> 
<h4>2，变量在脚本文件中定义的位置会影响这个变量在这个文件中的作用域吗：</h4> 
<p>不影响</p> 
<p>只要是在这个文件中定义的变量，无论是在哪定义的，都可以可以在文件中的任意地方使用。</p> 
<p><img alt="" height="213" src="https://images2.imgbox.com/15/ab/bUSDJMWG_o.png" width="447"></p> 
<p><img alt="" height="67" src="https://images2.imgbox.com/57/3b/CmdXn1ub_o.png" width="601">  </p> 
<p></p> 
<h3>命令替换</h3> 
<p>使用命令替换的地方一定要使用完整格式---$() </p> 
<h4>将一个命令的输出结果付给一个变量</h4> 
<p>1，path=$(pwd)</p> 
<p>2，path='netstat -t'</p> 
<h4>变量值或者变量和值拼接</h4> 
<p>变量直接或者变量和值之间加上一个非字母，数字，下划线的字符就行,复杂的用“”括起来</p> 
<p><img alt="" height="84" src="https://images2.imgbox.com/0b/96/8v0aa1Ay_o.png" width="655"></p> 
<p><img alt="" height="128" src="https://images2.imgbox.com/6b/97/fu5Pxy6e_o.png" width="363"></p> 
<p><img alt="" height="101" src="https://images2.imgbox.com/1b/77/zldua6LT_o.png" width="617"></p> 
<h4>命令合并</h4> 
<p>命令要懂得合并使用</p> 
<p><img alt="" height="294" src="https://images2.imgbox.com/e6/2e/S0SnEB5k_o.png" width="785"></p> 
<p></p> 
<h4>变量的作用域</h4> 
<p>在当前bash进程创建的变量作用域只在当前进程，bash父进程和bahs子进程访问不了彼此的变量。</p> 
<p>bash执行文件，子进程无法访问存在于父进程中的变量。</p> 
<h3 style="background-color:transparent;">变量的导出(export)和取消导出(unset)</h3> 
<h4>什么是变量的导出</h4> 
<p>就是让父进程创建的变量可以在子进程中被访问</p> 
<p><a class="link-info" href="https://www.cnblogs.com/insane-Mr-Li/p/9099066.html" rel="nofollow" title="详情链接">详情链接</a></p> 
<p>举例：</p> 
<p>定义一个shell脚本coppeliasim：</p> 
<pre><code class="hljs">#! /bin/sh
export Coppeliasim_HOME=/home/xxx/CoppeliaSim_Edu_V4_4_0_rev0_Ubuntu18_04 
$Coppeliasim_HOME/coppeliaSim.sh $*
</code></pre> 
<p>运行coppeliasim的时候，coppeliasim种的变量Coppeliasim_HOME就会拷贝到coppliaSim.sh脚本中去使用。</p> 
<h4>什么是变量的取消导出</h4> 
<p>就是这个子进程不需要访问父进程的某个变量时，用unset取消导出。</p> 
<p>unset会直接讲变量从内存销毁。</p> 
<p>所以对于export和unset，我本人理解是：</p> 
<p>export是在子进程中创建和这个变量一样的变量。</p> 
<p>unset的时候也是直接销毁。</p> 
<p></p> 
<h3>shell中的特殊变量</h3> 
<h4>位置变量</h4> 
<p><img alt="" height="376" src="https://images2.imgbox.com/0d/db/MjdMZ4jK_o.png" width="875"></p> 
<h4> 有关进程的变量</h4> 
<p><img alt="" height="152" src="https://images2.imgbox.com/c6/6d/Se1bkC1e_o.png" width="877"></p> 
<p></p> 
<p></p> 
<h3>环境变量</h3> 
<p>什么是环境变量</p> 
<p>就是一个变量(PATH---必须大写)，用来保存指定的路径字符串的变量.</p> 
<p>PATH保存多个路径，以冒号:隔开。</p> 
<p><img alt="" height="68" src="https://images2.imgbox.com/f3/dd/l5yDJL29_o.png" width="1200"></p> 
<h4>PATH里面保存的是什么的路径</h4> 
<p>命令搜索路径</p> 
<p>就是我们执行一个命令时，linux的终端进程会根据配置的PATH路径一个一个路径去找到这个命令，然后执行这个我们输入的命令。</p> 
<h4>查看所在用户下的所有环境变量的值</h4> 
<p>env命令</p> 
<p><img alt="" height="398" src="https://images2.imgbox.com/38/79/bPPDT0Da_o.png" width="1082"></p> 
<h4>保存当前用户的变量</h4> 
<p>echo $USER</p> 
<p> USER变量保存当前用户名</p> 
<h4>保存当前用户ID的变量</h4> 
<p>echo $UID</p> 
<p><img alt="" height="117" src="https://images2.imgbox.com/36/01/MJwtF7Fb_o.png" width="383"></p> 
<p></p> 
<h4>环境变量临时配置</h4> 
<p><img alt="" height="114" src="https://images2.imgbox.com/a9/03/2kuTQRXR_o.png" width="597"></p> 
<p>注意：是冒号分隔</p> 
<p>在当前进程配置的PATH只在当前进程有效。</p> 
<p><strong>每一个命令都是一个sh文件，但是为什么不用跑到命令所在文件去执行这个呢，就是因为这些命令的路径都在PATH中记录着。</strong></p> 
<h2>bash</h2> 
<p>linux系统里有两个bash命令。</p> 
<p>bin下的bash是其他系统里会有的，单数usr下的bash其他系统不一定有。所哟i编程shell文件时，使用到bash时，需要指定使用哪个bash来执行这个shell脚本文件。</p> 
<p><img alt="" height="268" src="https://images2.imgbox.com/55/2b/hshqJHRP_o.png" width="548"></p> 
<h4> 指定使用哪个bash</h4> 
<p><img alt="" height="128" src="https://images2.imgbox.com/6c/2d/tgeTMOQq_o.png" width="363"></p> 
<h2></h2> 
<h2>算术运算</h2> 
<h3>算术运算符</h3> 
<p><img alt="" height="367" src="https://images2.imgbox.com/10/07/WjoxQM9Y_o.png" width="873"></p> 
<h3>算术运算命令</h3> 
<h4> <img alt="" height="251" src="https://images2.imgbox.com/c4/ea/CQPwPbRo_o.png" width="872"></h4> 
<h4>(()) </h4> 
<p>1，(())是一个命令；</p> 
<p>2，(())中使用的变量不需要$符号；</p> 
<p>3，只能对整形运算；</p> 
<p>4，(())只会完成运算，没有结果输出，如果需要输出或者参与其他计算，一定要$取值；</p> 
<p><img alt="" height="94" src="https://images2.imgbox.com/3c/ac/QycXHugP_o.png" width="308"></p> 
<p><img alt="" height="189" src="https://images2.imgbox.com/a2/62/WZKMAMpD_o.png" width="335"></p> 
<p><img alt="" height="147" src="https://images2.imgbox.com/b0/92/ov8xsm3I_o.png" width="447"></p> 
<p></p> 
<h4>$[ ] </h4> 
<p>1，这个一个命令；</p> 
<p>2，使用变量不需要$符号；</p> 
<p>3，只能对整形运算；</p> 
<p>4，$[]和(())都可以用于一般的算术运算；</p> 
<p>5，$[ ]不是if中的 [ ];</p> 
<h4>为什么echo后面可以是$[],不可以是(())</h4> 
<p>因为$[]有计算结果输出，(())没有计算结果输出，而是直接(())中就完成了。</p> 
<p><img alt="" height="100" src="https://images2.imgbox.com/60/c6/lYrfQkEy_o.png" width="520"></p> 
<h3>let</h3> 
<p>1，let和$[],(())一样的作用;</p> 
<p>2，(())比let效率更好；</p> 
<p></p> 
<blockquote> 
 <p>var=1</p> 
 <p>1，var=$var+1</p> 
 <p>2，let var=$var+1</p> 
</blockquote> 
<p>分析以上1和2的区别：</p> 
<p>1的结果：var=1+1</p> 
<p>2的结果：var=2</p> 
<p>1是字符串，知识会对字符串中的变量进行解析。解析的结果参与字符串拼接；</p> 
<p>2是算术运算。</p> 
<h3>expr</h3> 
<p>1，expr运算的运算符和数值之间必须要有空格，否则就是字符串；</p> 
<p>2，乘法必须转义；</p> 
<p><img alt="" height="235" src="https://images2.imgbox.com/d7/e9/6oANQKKq_o.png" width="898"></p> 
<h4> expre length 字符串----计算字符串长短</h4> 
<p></p> 
<h3>bc计算器</h3> 
<h4>终端使用bc，-q表示不显示欢迎信息。</h4> 
<p>bc （-q）......quit</p> 
<p>scale指定小数位数</p> 
<p><img alt="" height="235" src="https://images2.imgbox.com/5f/3d/RFDIyb4M_o.png" width="577"></p> 
<h4>文件中bc的使用</h4> 
<p>通过管道，将表达式传输给bc计算器即可。</p> 
<p><img alt="" height="188" src="https://images2.imgbox.com/f2/48/CgdXpEvc_o.png" width="554"></p> 
<p></p> 
<blockquote> 
 <p>variable=$(echo "options; expression" | bc)</p> 
 <p>options是bc的参数选项，不是你可以定义变量</p> 
</blockquote> 
<p><a class="link-info" href="https://blog.csdn.net/m0_45283400/article/details/122173181" title="bc">bc</a></p> 
<h4>复杂表达式使用内联输入重定向输入到bc</h4> 
<p>注意：</p> 
<p>1，print只能在bc 中使用；</p> 
<p>2，bc中的表达式可以用()括起来，也可以不用。</p> 
<p></p> 
<p></p> 
<h2>shell的退出状态码</h2> 
<p>0~255</p> 
<p></p> 
<h2>if--then--fi</h2> 
<p>then后可以有多个语句，语句之间换行就行。</p> 
<p>这个语句只有一种判断条件</p> 
<h2>if--then--else--fi</h2> 
<p>注意：</p> 
<p>1，else后没有then</p> 
<p>2，else 后没有判断语句，没有命令。</p> 
<p>3，只能有一个if，一个else。</p> 
<p>因为命令执行之后只有成功和失败两种。</p> 
<p><strong>if---else语句以命令执行状态码是否返回0作为是否进行的条件。返回0表示命令执行成功，执行条件。</strong></p> 
<h3>嵌套</h3> 
<p>then和else后可以嵌套if--then--fi和if--else--fi。</p> 
<p><strong>每一层嵌套都要用fi来结尾</strong></p> 
<h2>多个条件判断的if--else</h2> 
<p><img alt="" height="353" src="https://images2.imgbox.com/9b/f2/kNEN6daQ_o.png" width="363"></p> 
<p><img alt="" height="321" src="https://images2.imgbox.com/54/11/97HdnWPM_o.png" width="537"></p> 
<h3> if--else判断表达式</h3> 
<h4>1，test</h4> 
<p>表达式非空，返回推出状态码0，否则返回非0.</p> 
<h4>2，[ ]</h4> 
<h4>整数判断</h4> 
<p>[ num1 比较符号 num2 ]</p> 
<p>第一个方括号之后和第二个方括号之前必须留有空格，否则就会报错.</p> 
<p><img alt="" height="349" src="https://images2.imgbox.com/71/c8/i40i2DlZ_o.png" width="1200"></p> 
<p><strong>对于条件测试，bash shell只能处理整数 </strong></p> 
<p><strong>字符串判断</strong></p> 
<p></p> 
<p><img alt="" height="346" src="https://images2.imgbox.com/0e/7a/2bnEvicd_o.png" width="1200"></p> 
<p> 字符串判断，&gt;,&lt;需要进行转义。</p> 
<p>-n,-z检查字符串是否为空</p> 
<h3>if的高级应用</h3> 
<p>()---开启子进程运行命令</p> 
<p>(())---复杂表达式</p> 
<p>(())也可以用于其他地方</p> 
<p><img alt="" height="689" src="https://images2.imgbox.com/04/47/HnP2ZMhR_o.png" width="1200"></p> 
<h4>取反</h4> 
<p>在0和整数之间取反</p> 
<h4>表达式取反</h4> 
<p>在表达式前面加上！就可以，但是！左右都要有空格，连在一起就变成字符串了。</p> 
<p><img alt="" height="162" src="https://images2.imgbox.com/f5/2b/rpp8Mr4J_o.png" width="453"></p> 
<p></p> 
<p>双括号命令既可以在if语句中使用，也可以在脚本中的普通命令里用来赋值。</p> 
<p>注意：</p> 
<p>1，表达式一定要在(())中，不能：</p> 
<p><img alt="" height="80" src="https://images2.imgbox.com/7a/62/gxc2uduQ_o.png" width="282"></p> 
<p>正确：</p> 
<p><img alt="" height="80" src="https://images2.imgbox.com/a2/9b/G4yOoLzT_o.png" width="282"></p> 
<h3>如果用于比较的变量为空，会发生什么</h3> 
<p>报错：需要一元表达式</p> 
<p><img alt="" height="149" src="https://images2.imgbox.com/c0/45/bzq11cLI_o.png" width="780"></p> 
<p>退出码返回为2，不执行比较成功语句</p> 
<h3> 命令执行出错，那么命令退出码是什么</h3> 
<p><img alt="" height="535" src="https://images2.imgbox.com/60/6f/h3NSja5j_o.png" width="805"></p> 
<p><img alt="" height="190" src="https://images2.imgbox.com/e1/38/rd2qc9G1_o.png" width="789"></p> 
<p></p> 
<h3>文件测试</h3> 
<p><img alt="" height="593" src="https://images2.imgbox.com/ea/5e/xTI9tjZ8_o.png" width="1200"></p> 
<h3>shell复合条件判断</h3> 
<p>&amp;&amp;，|| </p> 
<p><img alt="" height="196" src="https://images2.imgbox.com/a1/b1/CIBK8REF_o.png" width="607"></p> 
<h2>case</h2> 
<blockquote> 
 <p>case variable in</p> 
 <p>pattern1 | pattern2) commands1;;</p> 
 <p>pattern3) commands2;;</p> 
 <p>*) default commands;;</p> 
 <p>esac</p> 
</blockquote> 
<p>注意：</p> 
<p>1，双引号结尾</p> 
<p>2，）分割参数和命令</p> 
<h2>shell脚本文件退出执行</h2> 
<p>exit (退出状态密码)</p> 
<h2>$(),$[],${}</h2> 
<p>$()----命令替换</p> 
<p>$[]----整数运算</p> 
<p>${}----变量限定</p> 
<h2>(()),[[]]</h2> 
<p>(())-----整数运算</p> 
<p>[[ ]]-----</p> 
<h2>五种测试命令的区别 </h2> 
<p><img alt="" height="274" src="https://images2.imgbox.com/68/4a/DOPO7C2l_o.png" width="1102"></p> 
<h4> if (command)</h4> 
<p>在bash shell执行command之前，会先创建一个子shell，然后在其中执行命令。如果命令成功结束，则退出状态码（参见第11章）会被设为0，then部分的命令就会被执行。如果命令的退出状态码不为0，则不执行then部分的命令.</p> 
<h4>[[ ]]---可以使用通配符</h4> 
<p>1，不是所有的shell都支持双方括号。</p> 
<p>2，和其他测试命令的区别就是可以使用通配符。</p> 
<h3>[ ]</h3> 
<p>1，整数比较不能使用数学比较符号</p> 
<p></p> 
<h2>for</h2> 
<blockquote> 
 <p>for var in list</p> 
 <p>do commands</p> 
 <p>done </p> 
</blockquote> 
<p>注意：</p> 
<p>1，list可以是一系列值，也可以是一个变量；</p> 
<p>2，列表的每一个值以空格分开；</p> 
<p>如果特殊情况需要使用其他分隔符，需要改变分隔符---<a class="link-info" href="https://weread.qq.com/web/reader/48432660813ab6fe3g0106fdk1f032c402131f0e3dad99f3" rel="nofollow" title="看链接">看链接</a></p> 
<p>3，使用转义\对特殊字符进行转义，或者使用引号包含特殊字符；</p> 
<h4>命令替换作为list</h4> 
<p><img alt="" height="688" src="https://images2.imgbox.com/08/e3/cFjmX3en_o.png" width="460"></p> 
<h3> for获取目录下所有内容</h3> 
<p><img alt="" height="278" src="https://images2.imgbox.com/4c/14/NcuyHwKW_o.png" width="401"></p> 
<p><img alt="" height="473" src="https://images2.imgbox.com/13/2a/HGJzsuol_o.png" width="668"></p> 
<h4>为什么直接指定路径就行，而不需要读出路径中的目录和文件</h4> 
<p>for命令会遍历/home/rich/test/*匹配的结果。</p> 
<h4>对list中特殊字符的处理</h4> 
<p>问题：</p> 
<p><img alt="" height="256" src="https://images2.imgbox.com/7c/02/rpSSZbue_o.png" width="567"></p> 
<p>有两种方法可以解决这个问题。</p> 
<p>·使用转义字符（反斜线）将单引号转义。</p> 
<p>·使用双引号来定义含有单引号的值。 </p> 
<p><img alt="" height="320" src="https://images2.imgbox.com/19/b6/hnYoY6bk_o.png" width="632"></p> 
<h2> 更改分隔符</h2> 
<p><a class="link-info" href="https://weread.qq.com/web/reader/48432660813ab6fe3g0106fdk1f032c402131f0e3dad99f3" rel="nofollow" title="链接">链接</a></p> 
<h3>for (()) </h3> 
<p><img alt="" height="381" src="https://images2.imgbox.com/99/f1/27kWaUUC_o.png" width="469"></p> 
<p><img alt="" height="277" src="https://images2.imgbox.com/d9/a0/vTuZZqTT_o.png" width="640"></p> 
<p><img alt="" height="433" src="https://images2.imgbox.com/d2/84/5wV23dUX_o.png" width="667"></p> 
<h2>while</h2> 
<blockquote> 
 <p>while test command</p> 
 <p>do</p> 
 <p>other commands</p> 
 <p>done</p> 
</blockquote> 
<h2>until</h2> 
<blockquote> 
 <p> until test commands</p> 
 <p>do</p> 
 <p>other commands</p> 
 <p>done</p> 
</blockquote> 
<p>循环可嵌套</p> 
<h3>循环控制</h3> 
<p>break，continue都可以指定跳出的循环层数</p> 
<h3>循环的结果重定向放入文件</h3> 
<p><img alt="" height="102" src="https://images2.imgbox.com/51/36/FgVXTpU9_o.png" width="465"></p> 
<h2>传递参数</h2> 
<p>1，位置参数和传递的参数一 一对应；</p> 
<p>2，位置参数直接访问，不需要再加$符号。</p> 
<p>3，参数之间是以空格分隔的，所以shell会将字符串包含的空格视为两个参数的分隔符。要想在参数值中加入空格，必须使用引号（单引号或双引号均可）</p> 
<p><img alt="" height="179" src="https://images2.imgbox.com/ab/33/TO3DQVMl_o.png" width="530"></p> 
<p>4，如果脚本需要的命令行参数不止9个，则仍可以继续加入更多的参数，但是需要稍微修改一下位置变量名。在第9个位置变量之后，必须在变量名两侧加上花括号，比如${10}。 </p> 
<p>5，$n要输出进行转义</p> 
<p><img alt="" height="113" src="https://images2.imgbox.com/e2/5b/0o1n44tv_o.png" width="324"></p> 
<p></p> 
<h2>获取用户输入---read</h2> 
<p>read （-p "提示语句"）变量</p> 
<p>就可以获取用户输入的值，把值付给变量。</p> 
<p><img alt="" height="158" src="https://images2.imgbox.com/d4/4b/biEv30sv_o.png" width="564"></p> 
<p>可以输入多个变量的多个值，多出的值给最后一个变量</p> 
<p><img alt="" height="233" src="https://images2.imgbox.com/f5/39/NdTwyVfB_o.png" width="525"></p> 
<h4>read -t</h4> 
<h4>read -n </h4> 
<h4>read -s 无显示读取</h4> 
<p>其实显示了，看不到</p> 
<h4>read读取文件</h4> 
<p>注意：read命令读取文件。每次调用read命令都会从指定文件中读取一行文本。</p> 
<h2>重定向</h2> 
<p>重定向的左边都是命令，右边是文件，或者需要输入的数据。</p> 
<p>重定向的文件如果不存在，会自动创建。</p> 
<h4>输出重定向</h4> 
<p>&gt;后面是一个文件，如果文件不存在就创建。</p> 
<h4>输入重定向---&lt;</h4> 
<p>输入重定向是<strong>文件</strong>输出的数据成为命令操作的对象。</p> 
<h4>内联输入重定向---&lt;&lt;</h4> 
<p>用来将<strong>数据</strong>输入到命令</p> 
<p>任何字符都可以用来作为内联输入重定向的起止标记。</p> 
<h3>stdin,stdout,stderr</h3> 
<p><a class="link-info" href="https://blog.csdn.net/twentyfourand8/article/details/129152603" title="stdout和stderr">stdout和stderr</a></p> 
<p>怎么将输出的数据输入一个文件，不输出到显示屏---输出重定向</p> 
<p>怎么指定从哪地方获取输入数据---------------------------输入重定向</p> 
<h3>临时重定向和永久重定向</h3> 
<h4>临时重定向</h4> 
<p>临时重定向到文件---- 命令 &gt; file</p> 
<p>临时重定向到标准输出-----命令 &gt;&amp;1</p> 
<p>临时重定向到标准错误-----命令 &gt;&amp;2</p> 
<p>临时重定向到标准输入-----命令 &lt;&amp;1</p> 
<p>在重定向到文件描述符时，必须在文件描述符索引值之前加一个&amp;。</p> 
<p>输入临时重定向就是从屏幕获取输入</p> 
<p><strong>输出临时重定向是把输出的数据指定输出到标准输出(屏幕)</strong></p> 
<p><strong>临时错误重定向同理。</strong></p> 
<h4>永久重定向---exec</h4> 
<p>永久重定向作用域整个脚本执行期间</p> 
<blockquote> 
 <p>exec 0&lt;file </p> 
 <p>exec 1&gt;file1</p> 
 <p>exec 2&gt;file2</p> 
</blockquote> 
<p><strong>永久输入重定向：该命令会告诉shell，它应该从文件file中而不是键盘上获取输入。</strong></p> 
<p><img alt="" height="206" src="https://images2.imgbox.com/57/74/5no3uczd_o.png" width="395"></p> 
<p></p> 
<p><strong>永久输出重定向是指定输出的数据输出到指定文件。</strong></p> 
<p><strong>永久错误重定向同理。</strong></p> 
<h3><strong>如何临时重定向三个标准</strong></h3> 
<p><strong>命令 &gt; file 或者 命令 1&gt; file------代表标准输出重定向</strong></p> 
<p><strong>命令 2&gt; file--------------代表标准错误重定向</strong></p> 
<p><img alt="" height="61" src="https://images2.imgbox.com/90/6a/fEONnUA9_o.png" width="372"></p> 
<p><img alt="" height="43" src="https://images2.imgbox.com/f6/d6/msai3Erz_o.png" width="692"></p> 
<p><strong>命令 0&lt; file 或者 命令 &lt; file--------------代表标准输入重定向</strong></p> 
<p><img alt="" height="84" src="https://images2.imgbox.com/02/f9/P87LCxmi_o.png" width="795"></p> 
<p>在shell中，可以使用重定向符号“&gt;”和“2&gt;”来将标准输出和标准错误输出（stderr）分别重定向到文件或者/dev/null，其中2代表标准错误输出，而1代表标准输出：</p> 
<p>- &gt;&amp;2 ：将标准输出重定向到标准错误输出。</p> 
<p>例如，如果要将stderr重定向到一个文件，可以使用下面的命令：</p> 
<p>```bash<br> command 2&gt; error.log<br> ```</p> 
<p>上面的命令中，“command”代表要执行的命令，“2&gt;”表示将标准错误输出重定向到文件“error.log”。</p> 
<p>如果要将stderr和stdout都重定向到同一个文件，可以使用“&amp;&gt;”：</p> 
<p>```bash<br> command &amp;&gt; output.log<br> ```</p> 
<p>上面的命令中，“&amp;&gt;”表示将标准错误输出和标准输出一起重定向到文件“output.log”。</p> 
<p>如果想忽略stderr，可以将其重定向到/dev/null：</p> 
<p>```bash<br> command 2&gt; /dev/null<br> ```</p> 
<p>上面的命令中，所有标准错误输出都将被丢弃，不会被记录到任何地方。</p> 
<p>注意：</p> 
<p><span style="color:#be191c;"><strong>1，重定向一定是命令的结果重定向，也就是重定向一定是作用在命令上的。</strong></span></p> 
<p><span style="color:#be191c;"><strong>因为每一句shell都是一个命令。</strong></span></p> 
<p><span style="color:#be191c;"><strong>2，以上都是覆盖方式重定向---&gt;，也可以追加---&gt;&gt;.</strong></span></p> 
<p><img alt="" height="81" src="https://images2.imgbox.com/21/87/icFV4EH2_o.png" width="490"></p> 
<p><img alt="" height="181" src="https://images2.imgbox.com/ac/d7/WIKHqCGn_o.png" width="660"></p> 
<p></p> 
<h4><strong>&gt;和&gt;&amp;的区别</strong></h4> 
<p><strong>&gt;------重定向到文件</strong></p> 
<p><strong>&gt;&amp;-----重定向到标准输出或者标准错误</strong></p> 
<p><img alt="" height="178" src="https://images2.imgbox.com/31/36/lZ9k31vd_o.png" width="1102"></p> 
<h4> 怎么把一个命令执行可能发生的错误保存在日志文件中</h4> 
<p>命令 2&gt; file</p> 
<p>这样，如果命令执行成功，就没有信息写入文件，如果有错误信息就有错误信息写入日志文件。</p> 
<p><img alt="" height="76" src="https://images2.imgbox.com/bb/f5/rNaxEidk_o.png" width="393"></p> 
<p><img alt="" height="95" src="https://images2.imgbox.com/12/42/dbH2VPq0_o.png" width="803"></p> 
<p></p> 
<h4> 怎么清空一个文件</h4> 
<p><a class="link-info" href="https://www.cnblogs.com/zqifa/p/linux-vim-4.html" rel="nofollow" title="链接">链接</a></p> 
<h2>输出</h2> 
<p>ehco---输出后换行</p> 
<p>printf---输出后不换行</p> 
<p></p> 
<p>用于生成提示的echo命令使用了-n选项。该选项不会在字符串末尾输出换行符，允许脚本用户紧跟其后输入数据</p> 
<p><img alt="" height="333" src="https://images2.imgbox.com/43/50/bPvNgz3J_o.png" width="632"></p> 
<p></p> 
<h2>函数</h2> 
<h4>函数的定义</h4> 
<pre><code>#!/bin/bash
function list_func(){
    dir=$1
    file_list=`ls $dir`

    for file in $file_list
    do
        if [ -f $dir/$file ]; then
                echo "$dir/$file is file"
        else
                echo "$dir/$file is not file"
        fi
    done
}

1，function关键字</code></pre> 
<h4>函数的调用</h4> 
<p>内部调用</p> 
<pre><code>function add(){
        a=$1
        sum=$2
        for ((i=0;i&lt;$a;i=$i+1))
        do
                sum=$(($sum+$i))
        done
        echo "sum=$sum"
}

add 100 0
</code></pre> 
<p>外部调用</p> 
<pre><code>#!/bin/bash
  
source ./file_func.sh
list_func ./

1，source 加入头文件,后面指定文件路径
2，函数的调用就直接调用函数名
3，函数中的变量需要参数则直接跟在调用的函数名后面
</code></pre> 
<p>必须先source 再调用</p> 
<h2>循环结构</h2> 
<h3>for循环</h3> 
<pre><code>read -p "Please input range:" num

sum=0

for ((i=0; $i &lt; $num; i=$i+1))
do
        ((sum=$sum+$i))
done

echo $sum
                 </code></pre> 
<p></p> 
<h2>日志</h2> 
<p>有时需要把信息写入日志文件。</p> 
<p>怎么写入：</p> 
<p></p> 
<h2>set</h2> 
<p><a class="link-info" href="https://blog.csdn.net/u013200380/article/details/108243765" title="链接">链接</a></p> 
<p>set -e</p> 
<p>e----exit:有错误就退出</p> 
<p></p> 
<h2>shell命令行参数解析的两种方式</h2> 
<h3>1，$1,$2，......</h3> 
<h3>2，getopts---解析从命令行输入的参数</h3> 
<p><a class="link-info" href="https://blog.csdn.net/sinat_34241861/article/details/122400041" title="链接">链接</a></p> 
<p></p> 
<p></p> 
<p></p> 
<h2>shell的错误</h2> 
<p>1，如果引号使用不对称：</p> 
<p><img alt="" height="22" src="https://images2.imgbox.com/44/06/4cFm294S_o.png" width="583"></p> 
<h3>shell编程写入文件的数据没有写入成功的原因</h3> 
<p>没有同步得到磁盘---------sync</p> 
<h3>如果字符串变量为空</h3> 
<p>如果字符串变量为空，这个变量将不能和其他字符串比较，否则比较结果就是失败。</p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/74430c24dbf05b0296827c448e40b8df/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">原生小程序自定义导航及状态栏</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/012e33a42bccef1704bdee70c53a09c4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">华为欧拉安装部署：Oracle11g</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>