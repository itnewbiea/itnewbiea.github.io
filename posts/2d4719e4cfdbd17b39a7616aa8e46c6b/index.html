<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Cython编译文件出错 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Cython编译文件出错" />
<meta property="og:description" content="报错信息：
(rpc) stu@amax:~/segment/dss_crf$ python setup.py install Compiling pydensecrf/eigen.pyx because it changed. Compiling pydensecrf/densecrf.pyx because it changed. [1/2] Cythonizing pydensecrf/densecrf.pyx /home/stu/anaconda3/envs/rpc/lib/python3.6/site-packages/Cython/Compiler/Main.py:381: FutureWarning: Cython directive &#39;language_level&#39; not set, using &#39;3str&#39; for now (Py3). This has changed from earlier releases! File: /home/stu03/kdy/rpc/segment/dss_crf/pydensecrf/densecrf.pxd tree = Parsing.p_module(s, pxd, full_module_name) Error compiling Cython file: ------------------------------------------------------------ ... from eigen cimport * ^ ------------------------------------------------------------ pydensecrf/densecrf.pxd:1:0: &#39;eigen.pxd&#39; not found Error compiling Cython file: ------------------------------------------------------------ ... cdef cppclass PottsCompatibility(LabelCompatibility): PottsCompatibility(float) except &#43; cdef cppclass DiagonalCompatibility(LabelCompatibility): DiagonalCompatibility(const c_VectorXf&amp;) except &#43; ^ ------------------------------------------------------------ pydensecrf/densecrf." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2d4719e4cfdbd17b39a7616aa8e46c6b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-11T10:49:22+08:00" />
<meta property="article:modified_time" content="2023-12-11T10:49:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Cython编译文件出错</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>报错信息：</strong></p> 
<pre><code class="language-bash">(rpc) stu@amax:~/segment/dss_crf$ python setup.py install
Compiling pydensecrf/eigen.pyx because it changed.
Compiling pydensecrf/densecrf.pyx because it changed.
[1/2] Cythonizing pydensecrf/densecrf.pyx
/home/stu/anaconda3/envs/rpc/lib/python3.6/site-packages/Cython/Compiler/Main.py:381: FutureWarning: Cython directive 'language_level' not set, using '3str' for now (Py3). This has changed from earlier releases! File: /home/stu03/kdy/rpc/segment/dss_crf/pydensecrf/densecrf.pxd
  tree = Parsing.p_module(s, pxd, full_module_name)

Error compiling Cython file:
------------------------------------------------------------
...
from eigen cimport *
^
------------------------------------------------------------

pydensecrf/densecrf.pxd:1:0: 'eigen.pxd' not found

Error compiling Cython file:
------------------------------------------------------------
...

    cdef cppclass PottsCompatibility(LabelCompatibility):
        PottsCompatibility(float) except +

    cdef cppclass DiagonalCompatibility(LabelCompatibility):
        DiagonalCompatibility(const c_VectorXf&amp;) except +
                                    ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:12:36: 'c_VectorXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...

    cdef cppclass DiagonalCompatibility(LabelCompatibility):
        DiagonalCompatibility(const c_VectorXf&amp;) except +

    cdef cppclass MatrixCompatibility(LabelCompatibility):
        MatrixCompatibility(const c_MatrixXf&amp;) except +
                                  ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:15:34: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
cdef extern from "densecrf/include/unary.h":
    cdef cppclass UnaryEnergy:
        pass

    cdef cppclass ConstUnaryEnergy(UnaryEnergy):
        ConstUnaryEnergy(const c_MatrixXf&amp; unary) except +
                               ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:23:31: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...

    cdef cppclass ConstUnaryEnergy(UnaryEnergy):
        ConstUnaryEnergy(const c_MatrixXf&amp; unary) except +

    cdef cppclass LogisticUnaryEnergy(UnaryEnergy):
        LogisticUnaryEnergy(const c_MatrixXf&amp; L, const c_MatrixXf&amp; feature) except +
                                  ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:26:34: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...

    cdef cppclass ConstUnaryEnergy(UnaryEnergy):
        ConstUnaryEnergy(const c_MatrixXf&amp; unary) except +

    cdef cppclass LogisticUnaryEnergy(UnaryEnergy):
        LogisticUnaryEnergy(const c_MatrixXf&amp; L, const c_MatrixXf&amp; feature) except +
                                                       ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:26:55: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        c_DenseCRF(int N, int M) except +

        # Setup methods.
        # TODO
        #void addPairwiseEnergy(PairwisePotential *potential)
        void addPairwiseEnergy(const c_MatrixXf &amp;features, LabelCompatibility*, KernelType, NormalizationType)
                                     ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:54:37: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        # Setup methods.
        # TODO
        #void addPairwiseEnergy(PairwisePotential *potential)
        void addPairwiseEnergy(const c_MatrixXf &amp;features, LabelCompatibility*, KernelType, NormalizationType)
        void setUnaryEnergy(UnaryEnergy *unary)
        void setUnaryEnergy(const c_MatrixXf &amp;unary)
                                  ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:56:34: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        # TODO
        #void addPairwiseEnergy(PairwisePotential *potential)
        void addPairwiseEnergy(const c_MatrixXf &amp;features, LabelCompatibility*, KernelType, NormalizationType)
        void setUnaryEnergy(UnaryEnergy *unary)
        void setUnaryEnergy(const c_MatrixXf &amp;unary)
        void setUnaryEnergy(const c_MatrixXf &amp;L, const c_MatrixXf &amp;feature)
                                  ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:57:34: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        # TODO
        #void addPairwiseEnergy(PairwisePotential *potential)
        void addPairwiseEnergy(const c_MatrixXf &amp;features, LabelCompatibility*, KernelType, NormalizationType)
        void setUnaryEnergy(UnaryEnergy *unary)
        void setUnaryEnergy(const c_MatrixXf &amp;unary)
        void setUnaryEnergy(const c_MatrixXf &amp;L, const c_MatrixXf &amp;feature)
                                                       ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:57:55: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        void setUnaryEnergy(UnaryEnergy *unary)
        void setUnaryEnergy(const c_MatrixXf &amp;unary)
        void setUnaryEnergy(const c_MatrixXf &amp;L, const c_MatrixXf &amp;feature)

        # Inference methods.
        c_MatrixXf inference(int n_iterations)
        ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:60:8: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        c_MatrixXf inference(int n_iterations)
        # TODO: Not enabled because it would require wrapping VectorXs (note the `s`)
        #c_VectorXs map(int n_iterations)

        # Step-by-step inference methods.
        c_MatrixXf startInference() const
        ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:65:8: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        # TODO: Not enabled because it would require wrapping VectorXs (note the `s`)
        #c_VectorXs map(int n_iterations)

        # Step-by-step inference methods.
        c_MatrixXf startInference() const
        void stepInference(c_MatrixXf &amp;Q, c_MatrixXf &amp;tmp1, c_MatrixXf &amp;tmp2) const
                           ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:66:27: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        # TODO: Not enabled because it would require wrapping VectorXs (note the `s`)
        #c_VectorXs map(int n_iterations)

        # Step-by-step inference methods.
        c_MatrixXf startInference() const
        void stepInference(c_MatrixXf &amp;Q, c_MatrixXf &amp;tmp1, c_MatrixXf &amp;tmp2) const
                                          ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:66:42: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        # TODO: Not enabled because it would require wrapping VectorXs (note the `s`)
        #c_VectorXs map(int n_iterations)

        # Step-by-step inference methods.
        c_MatrixXf startInference() const
        void stepInference(c_MatrixXf &amp;Q, c_MatrixXf &amp;tmp1, c_MatrixXf &amp;tmp2) const
                                                            ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:66:60: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        # Step-by-step inference methods.
        c_MatrixXf startInference() const
        void stepInference(c_MatrixXf &amp;Q, c_MatrixXf &amp;tmp1, c_MatrixXf &amp;tmp2) const
        #double gradient( int n_iterations, const ObjectiveFunction &amp; objective, c_VectorXf * unary_grad, c_VectorXf * lbl_cmp_grad, c_VectorXf * kernel_grad=NULL ) const;

        double klDivergence(const c_MatrixXf &amp;Q) const
                                  ^
------------------------------------------------------------

pydensecrf/densecrf.pxd:69:34: 'c_MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        return eigen.MatrixXf().wrap(self._this.inference(niter))

    def startInference(self):
        return eigen.MatrixXf().wrap(self._this.startInference()), eigen.MatrixXf(), eigen.MatrixXf()

    def stepInference(self, MatrixXf Q, MatrixXf tmp1, MatrixXf tmp2):
                            ^
------------------------------------------------------------

pydensecrf/densecrf.pyx:85:28: 'MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        return eigen.MatrixXf().wrap(self._this.inference(niter))

    def startInference(self):
        return eigen.MatrixXf().wrap(self._this.startInference()), eigen.MatrixXf(), eigen.MatrixXf()

    def stepInference(self, MatrixXf Q, MatrixXf tmp1, MatrixXf tmp2):
                                        ^
------------------------------------------------------------

pydensecrf/densecrf.pyx:85:40: 'MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        return eigen.MatrixXf().wrap(self._this.inference(niter))

    def startInference(self):
        return eigen.MatrixXf().wrap(self._this.startInference()), eigen.MatrixXf(), eigen.MatrixXf()

    def stepInference(self, MatrixXf Q, MatrixXf tmp1, MatrixXf tmp2):
                                                       ^
------------------------------------------------------------

pydensecrf/densecrf.pyx:85:55: 'MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...
        return eigen.MatrixXf().wrap(self._this.startInference()), eigen.MatrixXf(), eigen.MatrixXf()

    def stepInference(self, MatrixXf Q, MatrixXf tmp1, MatrixXf tmp2):
        self._this.stepInference(Q.m, tmp1.m, tmp2.m)

    def klDivergence(self, MatrixXf Q):
                           ^
------------------------------------------------------------

pydensecrf/densecrf.pyx:88:27: 'MatrixXf' is not a type identifier

Error compiling Cython file:
------------------------------------------------------------
...

    def addPairwiseEnergy(self, float[:,::1] features not None, compat, KernelType kernel=DIAG_KERNEL, NormalizationType normalization=NORMALIZE_SYMMETRIC):
        self._this.addPairwiseEnergy(eigen.c_matrixXf(features), _labelcomp(compat), kernel, normalization)

    def setUnary(self, Unary u):
        self._this.setUnaryEnergy(u.move())
                                 ^
------------------------------------------------------------

pydensecrf/densecrf.pyx:71:33: ambiguous overloaded method
Traceback (most recent call last):
  File "setup.py", line 16, in &lt;module&gt;
    ext_modules=cythonize(['pydensecrf/eigen.pyx', 'pydensecrf/densecrf.pyx']),
  File "/home/stu/anaconda3/envs/rpc/lib/python3.6/site-packages/Cython/Build/Dependencies.py", line 1154, in cythonize
    cythonize_one(*args)
  File "/home/stu/anaconda3/envs/rpc/lib/python3.6/site-packages/Cython/Build/Dependencies.py", line 1321, in cythonize_one
    raise CompileError(None, pyx_file)
Cython.Compiler.Errors.CompileError: pydensecrf/densecrf.pyx
(rpc) stu@amax:~/segment/dss_crf$
</code></pre> 
<p><strong>解决方法</strong>：</p> 
<p>（1）尝试从该目录中删除<code>__init__.py</code>。由于某些原因，它在尝试编译时混淆了cython。</p> 
<p>（2）考虑使用pyximport扩展名： <code>import pyximport; pyximport.install()</code>，然后<code>import your_module</code>（好像是一个normal.py），如果您只想从普通python文件导入.pyx文件。</p> 
<p><strong>注意</strong>：在第二种情况下，<code>__init__.py</code>不必删除。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fafcae661f834c30bf50dbddb18efbb1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C#结合JavaScript实现多文件上传</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ba90fe167620c89d57427fdf3bae80b7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何利用t-SNE可视化自己的数据集分布</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>