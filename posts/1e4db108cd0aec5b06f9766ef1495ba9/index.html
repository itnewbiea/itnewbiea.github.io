<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>embed标签修饰的pdf文件下载——（embed src=“about:blank“） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="embed标签修饰的pdf文件下载——（embed src=“about:blank“）" />
<meta property="og:description" content="今天需要在BioLib网站上看点东西，发现都是pdf文件，还不如下载下来
结果查看源代码后发现都是embed标签修饰，一开始有点蒙，因为src属性里没有链接。
最后发现直接用content就可以。淦。
幸亏没用自动化调试。
随便点进去一个
发现没有下载链接
但是！！！，打开它的Network，神奇的事情发生了
Content-Length的大小和pdf文档大小很接近，试着下载了一个，发现没有问题，内容无缺失。
既然已经找到了内容，思路理清后，代码也就水到渠成了
import requests from bs4 import BeautifulSoup import os path = r&#39;E:\desktop\BioLib&#39; url = &#39;http://www.biolib.de/library/pdf_index_de.html&#39; headers = {&#39;user-agent&#39;: &#39;Mozilla/5.0&#39;} res = requests.get(url, headers) soup = BeautifulSoup(res.text, &#39;html.parser&#39;) box = soup.find(&#39;td&#39;, class_=&#39;boxrot&#39;) files = box.find_all(&#39;a&#39;) for file in files: title = file.text link = file[&#39;href&#39;] if not os.path.exists(path &#43; &#39;\\&#39; &#43; title): content = requests.get(link, headers, stream=True) size = 0 chunk_size = 1024 content_size = int(content." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1e4db108cd0aec5b06f9766ef1495ba9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-13T10:16:14+08:00" />
<meta property="article:modified_time" content="2020-08-13T10:16:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">embed标签修饰的pdf文件下载——（embed src=“about:blank“）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>今天需要在BioLib网站上看点东西，发现都是pdf文件，还不如下载下来</strong><br> 结果查看源代码后发现都是embed标签修饰，一开始有点蒙，因为src属性里没有链接。<br> 最后发现直接用content就可以。淦。<br> 幸亏没用自动化调试。<br> <img src="https://images2.imgbox.com/8b/e9/rcOrxBmv_o.png" alt="在这里插入图片描述"><br> <strong>随便点进去一个</strong><br> <img src="https://images2.imgbox.com/9e/06/fn2lWcc5_o.png" alt="在这里插入图片描述"><br> <strong>发现没有下载链接</strong><br> 但是！！！，打开它的Network，神奇的事情发生了<br> <img src="https://images2.imgbox.com/ff/af/swberaOM_o.png" alt="在这里插入图片描述"><br> Content-Length的大小和pdf文档大小很接近，试着下载了一个，发现没有问题，内容无缺失。<br> <strong>既然已经找到了内容，思路理清后，代码也就水到渠成了</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> os

path <span class="token operator">=</span> r<span class="token string">'E:\desktop\BioLib'</span>
url <span class="token operator">=</span> <span class="token string">'http://www.biolib.de/library/pdf_index_de.html'</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'user-agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0'</span><span class="token punctuation">}</span>

res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token punctuation">)</span>

soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>

box <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'td'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'boxrot'</span><span class="token punctuation">)</span>

files <span class="token operator">=</span> box<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> files<span class="token punctuation">:</span>
    title <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>text
    link <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token operator">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>path <span class="token operator">+</span> <span class="token string">'\\'</span> <span class="token operator">+</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
        content <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>link<span class="token punctuation">,</span> headers<span class="token punctuation">,</span> stream<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        size <span class="token operator">=</span> <span class="token number">0</span>
        chunk_size <span class="token operator">=</span> <span class="token number">1024</span>
        content_size <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-length'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'start download {title}, File size: {size:.2f} MB'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>title<span class="token operator">=</span>title<span class="token punctuation">,</span>
                                                                        size<span class="token operator">=</span>content_size <span class="token operator">/</span> chunk_size <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path <span class="token operator">+</span> <span class="token string">'\\'</span> <span class="token operator">+</span> title<span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            <span class="token keyword">for</span> data <span class="token keyword">in</span> content<span class="token punctuation">.</span>iter_content<span class="token punctuation">(</span>chunk_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                size <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\r'</span> <span class="token operator">+</span> <span class="token string">'[DOWNLOADING]:%s%.2f%%'</span> <span class="token operator">%</span>
                      <span class="token punctuation">(</span><span class="token string">'&gt;'</span> <span class="token operator">*</span> <span class="token builtin">int</span><span class="token punctuation">(</span>size <span class="token operator">*</span> <span class="token number">50</span> <span class="token operator">/</span> content_size<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">(</span>size <span class="token operator">/</span> content_size <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\rFile %s download completed!'</span> <span class="token operator">%</span> title<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'File %s existed!'</span> <span class="token operator">%</span> title<span class="token punctuation">)</span>

</code></pre> 
<h4><a id="_54"></a>欢迎留言交流</h4> 
<p><strong>只动脑，不动手，知识不长久</strong></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8d6f5e925fc437eef0b656111ebbe894/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue组件的挂载方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/17589890cae1230c72b4ee633aa6a650/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">react 简介 路由及生命周期</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>