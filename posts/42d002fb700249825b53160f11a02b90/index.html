<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>目标检测算法---将数据集为划分训练集和验证集 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="目标检测算法---将数据集为划分训练集和验证集" />
<meta property="og:description" content="在做深度学习目标检测模型训练的时候，首先是要获取数据集，然后再对数据集进行标注。然后再把标注完的数据集划分为训练集和验证集，这样更加方便模型的训练和测试。首先上划分数据集的代码。
import os, random, shutil def moveimg(fileDir, tarDir): pathDir = os.listdir(fileDir) # 取图片的原始路径 filenumber = len(pathDir) rate = 0.1 # 自定义抽取图片的比例，比方说100张抽10张，那就是0.1 picknumber = int(filenumber * rate) # 按照rate比例从文件夹中取一定数量图片 sample = random.sample(pathDir, picknumber) # 随机选取picknumber数量的样本图片 print(sample) for name in sample: shutil.move(fileDir &#43; name, tarDir &#43; &#34;\\&#34; &#43; name) return def movelabel(file_list, file_label_train, file_label_val): for i in file_list: if i.endswith(&#39;.jpg&#39;): # filename = file_label_train &#43; &#34;\\&#34; &#43; i[:-4] &#43; &#39;.xml&#39; # 可以改成xml文件将’." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/42d002fb700249825b53160f11a02b90/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-22T10:46:23+08:00" />
<meta property="article:modified_time" content="2022-08-22T10:46:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">目标检测算法---将数据集为划分训练集和验证集</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;text-align:justify;">        在做深度学习目标检测模型训练的时候，首先是要获取数据集，然后再对数据集进行标注。然后再把标注完的数据集划分为训练集和验证集，这样更加方便模型的训练和测试。首先上划分数据集的代码。</p> 
<pre><code class="language-python">import os, random, shutil


def moveimg(fileDir, tarDir):
    pathDir = os.listdir(fileDir)  # 取图片的原始路径
    filenumber = len(pathDir)
    rate = 0.1  # 自定义抽取图片的比例，比方说100张抽10张，那就是0.1
    picknumber = int(filenumber * rate)  # 按照rate比例从文件夹中取一定数量图片
    sample = random.sample(pathDir, picknumber)  # 随机选取picknumber数量的样本图片
    print(sample)
    for name in sample:
        shutil.move(fileDir + name, tarDir + "\\" + name)
    return

def movelabel(file_list, file_label_train, file_label_val):
    for i in file_list:
        if i.endswith('.jpg'):
            # filename = file_label_train + "\\" + i[:-4] + '.xml'  # 可以改成xml文件将’.txt‘改成'.xml'就可以了
            filename = file_label_train + "\\" + i[:-4] + '.txt'  # 可以改成xml文件将’.txt‘改成'.xml'就可以了
            if os.path.exists(filename):
                shutil.move(filename, file_label_val)
                print(i + "处理成功！")



if __name__ == '__main__':
    fileDir = r"C:\Users\86159\Desktop\hat\JPEGImages" + "\\"  # 源图片文件夹路径
    tarDir = r'C:\Users\86159\Desktop\hat\JPEGImages_val'  # 图片移动到新的文件夹路径
    moveimg(fileDir, tarDir)
    file_list = os.listdir(tarDir)
    file_label_train = r"C:\Users\86159\Desktop\hat\Annotations_yolo"  # 源图片标签路径
    file_label_val = r"C:\Users\86159\Desktop\hat\Annotations_val"  # 标签
      # 移动到新的文件路径
    movelabel(file_list, file_label_train, file_label_val)
</code></pre> 
<p style="margin-left:0;text-align:justify;">        如上的代码的原理是将一个文件夹里面的图片按一定的比例（可以自己设定，修改第7行中的rate的值就可以了）抽取照片放入到一个新的文件夹里面（需要自己新建一个文件夹）。这样源文件夹就变成了训练集，新建的为验证集。然后代码会将抽取照片对应的标签文件放入到一个新建的文件夹中（该文件夹需要新建）。这样我们就有图片的训练集和验证集，还有其对应的标签文件。使用同样的代码还可以将数据集多划分一个测试集出来，这样方便测试用。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3dade6639d4c93d5f3f3d57c7eacb56c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">labelimg标注的VOC格式标签xml文件和yolo格式标签txt文件相互转换</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aef1c9d8f915faa133fd2d23c0dd79f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">react 模态框 嵌套from 表单 关闭模态框清空表单值</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>