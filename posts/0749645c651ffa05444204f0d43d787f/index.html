<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>搞它！！！CentOS 7.6 安装和配置samba文件共享服务 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="搞它！！！CentOS 7.6 安装和配置samba文件共享服务" />
<meta property="og:description" content="文章目录 一、samba概述1.1 Samba是在Linux和UNIX系统上实现SMB协议的一个免软件，由服务器及客户端程序构。1.2 Samba监听端口1.3 samba进程1.4 samba用户1.5 samba配置文件 二、samba配置实例1.安装核心软件2.将samba配置文件备份一份，在进行修改3.在opt目录下创建abc文件，并且赋予777最大权限4.切换到客户机win10这边，在搜索框输入服务端的地址\192.168.100.485.回到服务端这边在abc目录下有一个sha文件，并查看6.指定用户读写共享文件的权限，在配置文件底行加入内容7.创建TEST1,2 用户并给他们设置smb密码8、在opt目录下创建test目录，并给其权限9.回到客户端，清空缓存；服务端重启服务 三. 利用smb服务访问win10的共享目录1、 设置来宾账户guest策略权限2.选择WIN10本地共享文件夹及修改属性3.在LINUX端查看及挂载WIN10共享文件夹4.可以正常访问使用win10共享文件夹了 一、samba概述 1.1 Samba是在Linux和UNIX系统上实现SMB协议的一个免软件，由服务器及客户端程序构。 在此之前我们已经了解了NFS，NFS与samba一样，也是在网络中实现文件共享的一种实现，但不幸的是，其不支持windows平台，而这次要提到的samba是能够在任何支持SMB协议的主机之间共享文件的一种实现，当然也包括windows。
SMB（Server Messages Block，信息服务块）是一种在局域网上共享文件和打印机的一种通信协议，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。
SMB协议是C/S型协议，客户机通过该协议可以访问服务器上的共享文件系统、打印机及其他资源。
1.2 Samba监听端口 1.3 samba进程 winbindd &#43; ldap 对应Windows AD活动目录
1.4 samba用户 设置
//smbpasswd命令： -a Sys_User //添加系统用户为samba用户并为其设置密码 -d //禁用用户帐号 -e //启用用户帐号 -x //删除用户帐号 [root@localhost ~]# yum -y install samba-* [root@localhost ~]# useradd tom [root@localhost ~]# smbpasswd -a tom New SMB password: Retype new SMB password: Added user tom. 1.5 samba配置文件 /etc/samba/smb." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/0749645c651ffa05444204f0d43d787f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-20T09:55:38+08:00" />
<meta property="article:modified_time" content="2020-07-20T09:55:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">搞它！！！CentOS 7.6 安装和配置samba文件共享服务</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#samba_1" rel="nofollow">一、samba概述</a></li><li><ul><li><a href="#11_SambaLinuxUNIXSMB_2" rel="nofollow">1.1 Samba是在Linux和UNIX系统上实现SMB协议的一个免软件，由服务器及客户端程序构。</a></li><li><a href="#12_Samba_8" rel="nofollow">1.2 Samba监听端口</a></li><li><a href="#13_samba_10" rel="nofollow">1.3 samba进程</a></li><li><a href="#14_samba_13" rel="nofollow">1.4 samba用户</a></li><li><a href="#15_samba_32" rel="nofollow">1.5 samba配置文件</a></li></ul> 
  </li><li><a href="#samba_35" rel="nofollow">二、samba配置实例</a></li><li><ul><li><a href="#1_38" rel="nofollow">1.安装核心软件</a></li><li><a href="#2samba_45" rel="nofollow">2.将samba配置文件备份一份，在进行修改</a></li><li><a href="#3optabc777_60" rel="nofollow">3.在opt目录下创建abc文件，并且赋予777最大权限</a></li><li><a href="#4win1019216810048_67" rel="nofollow">4.切换到客户机win10这边，在搜索框输入服务端的地址\192.168.100.48</a></li><li><a href="#5abcsha_74" rel="nofollow">5.回到服务端这边在abc目录下有一个sha文件，并查看</a></li><li><a href="#6_82" rel="nofollow">6.指定用户读写共享文件的权限，在配置文件底行加入内容</a></li><li><a href="#7TEST12_smb_94" rel="nofollow">7.创建TEST1,2 用户并给他们设置smb密码</a></li><li><a href="#8opttest_133" rel="nofollow">8、在opt目录下创建test目录，并给其权限</a></li><li><a href="#9_139" rel="nofollow">9.回到客户端，清空缓存；服务端重启服务</a></li></ul> 
  </li><li><a href="#_smbwin10_157" rel="nofollow">三. 利用smb服务访问win10的共享目录</a></li><li><ul><li><a href="#1_guest_158" rel="nofollow">1、 设置来宾账户guest策略权限</a></li><li><a href="#2WIN10_167" rel="nofollow">2.选择WIN10本地共享文件夹及修改属性</a></li><li><a href="#3LINUXWIN10_171" rel="nofollow">3.在LINUX端查看及挂载WIN10共享文件夹</a></li><li><a href="#4win10_200" rel="nofollow">4.可以正常访问使用win10共享文件夹了</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="samba_1"></a>一、samba概述</h2> 
<h3><a id="11_SambaLinuxUNIXSMB_2"></a>1.1 Samba是在Linux和UNIX系统上实现SMB协议的一个免软件，由服务器及客户端程序构。</h3> 
<p>在此之前我们已经了解了NFS，NFS与samba一样，也是在网络中实现文件共享的一种实现，但不幸的是，其不支持windows平台，而这次要提到的samba是能够在任何支持SMB协议的主机之间共享文件的一种实现，当然也包括windows。</p> 
<p>SMB（Server Messages Block，信息服务块）是一种在局域网上共享文件和打印机的一种通信协议，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。</p> 
<p>SMB协议是C/S型协议，客户机通过该协议可以访问服务器上的共享文件系统、打印机及其他资源。</p> 
<h3><a id="12_Samba_8"></a>1.2 Samba监听端口</h3> 
<p><img src="https://images2.imgbox.com/3f/c8/NKrsvYqp_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="13_samba_10"></a>1.3 samba进程</h3> 
<p><img src="https://images2.imgbox.com/be/df/zTFboVEp_o.png" alt="在这里插入图片描述"><br> winbindd + ldap 对应Windows AD活动目录</p> 
<h3><a id="14_samba_13"></a>1.4 samba用户</h3> 
<p><img src="https://images2.imgbox.com/bd/93/8CH3qAkl_o.png" alt="在这里插入图片描述"><br> 设置</p> 
<pre><code class="prism language-handlebars"><span class="token block keyword">//smbpasswd命令：</span>
    <span class="token variable">-a</span> <span class="token variable">Sys_User</span>     <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">添加系统用户为samba用户并为其设置密码</span>
    <span class="token variable">-d</span>              <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">禁用用户帐号</span>
    <span class="token variable">-e</span>              <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">启用用户帐号</span>
    <span class="token variable">-x</span>              <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">删除用户帐号</span>
 
 
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@localhost ~</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">yum</span> <span class="token variable">-y</span> <span class="token variable">install</span> <span class="token variable">samba-</span><span class="token punctuation">*</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@localhost ~</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">useradd</span> <span class="token variable">tom</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@localhost ~</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">smbpasswd</span> <span class="token variable">-a</span> <span class="token variable">tom</span>
<span class="token variable">New</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>
<span class="token variable">Retype</span> <span class="token variable">new</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>
<span class="token variable">Added</span> <span class="token variable">user</span> <span class="token variable">tom</span><span class="token punctuation">.</span>
</code></pre> 
<h3><a id="15_samba_32"></a>1.5 samba配置文件</h3> 
<p>/etc/samba/smb.conf(主配置文件)<br> <img src="https://images2.imgbox.com/f4/b7/LlMjmqcf_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="samba_35"></a>二、samba配置实例</h2> 
<p>开启一台centos7.6，,一台win10，centos作为服务器，共享文件或目录，IP地址为192.168.100.48。WIN10 ip为 192.168.100.60</p> 
<h3><a id="1_38"></a>1.安装核心软件</h3> 
<pre><code class="prism language-handlebars"><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen ~</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">setenforce</span> <span class="token number">0</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen ~</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">systemctl</span> <span class="token variable">stop</span> <span class="token variable">firewalld</span><span class="token punctuation">.</span><span class="token variable">service</span> 
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen ~</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">yum</span> <span class="token variable">-y</span> <span class="token variable">install</span> <span class="token variable">samba</span><span class="token punctuation">*</span>
</code></pre> 
<h3><a id="2samba_45"></a>2.将samba配置文件备份一份，在进行修改</h3> 
<pre><code class="prism language-handlebars"><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen~</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">cd</span> <span class="token punctuation">/</span><span class="token variable">etc</span><span class="token punctuation">/</span><span class="token variable">samba</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">ls</span>
<span class="token variable">lmhosts</span>  <span class="token variable">smb</span><span class="token punctuation">.</span><span class="token variable">conf</span>  <span class="token variable">smb</span><span class="token punctuation">.</span><span class="token variable">conf</span><span class="token punctuation">.</span><span class="token variable">example</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">mv</span> <span class="token variable">smb</span><span class="token punctuation">.</span><span class="token variable">conf</span> <span class="token variable">smb</span><span class="token punctuation">.</span><span class="token variable">conf</span><span class="token punctuation">.</span><span class="token variable">bak</span>  <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token punctuation">#</span><span class="token punctuation">#</span><span class="token variable">将samba配置文件改成备份文件</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">grep</span> <span class="token variable">-v</span> <span class="token string">"#"</span> <span class="token variable">smb</span><span class="token punctuation">.</span><span class="token variable">conf</span><span class="token punctuation">.</span><span class="token variable">bak</span> <span class="token punctuation">&gt;</span><span class="token variable">smb</span><span class="token punctuation">.</span><span class="token variable">conf</span> <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token punctuation">#</span><span class="token punctuation">#</span><span class="token variable">过滤出文件中不带</span><span class="token punctuation">#</span><span class="token variable">的文件放入samba</span><span class="token punctuation">.</span><span class="token variable">conf文件中，准备修改</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/68/58/gMgVqJjK_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1f/29/QanYq6AX_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3optabc777_60"></a>3.在opt目录下创建abc文件，并且赋予777最大权限</h3> 
<pre><code class="prism language-handlebars"><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">mkdir</span> <span class="token punctuation">/</span><span class="token variable">opt</span><span class="token punctuation">/</span><span class="token variable">abc</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">cd</span> <span class="token punctuation">/</span><span class="token variable">opt</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen opt</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">chmod</span> <span class="token number">777</span> <span class="token variable">abc</span>
</code></pre> 
<h3><a id="4win1019216810048_67"></a>4.切换到客户机win10这边，在搜索框输入服务端的地址\192.168.100.48</h3> 
<p>里面有一个share共享文件，在文件中创建一个sha.txt文件<br> [root@shanan opt]# systemctl start smb<br> <img src="https://images2.imgbox.com/aa/70/6AWpHyoH_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/16/5e/ScJUgcZQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e3/5b/M0oVO7Kv_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5abcsha_74"></a>5.回到服务端这边在abc目录下有一个sha文件，并查看</h3> 
<pre><code class="prism language-handlebars"><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen abc</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">ls</span>
<span class="token variable">sha</span><span class="token punctuation">.</span><span class="token variable">txt</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen abc</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">cat</span> <span class="token variable">sha</span><span class="token punctuation">.</span><span class="token variable">txt</span> 
<span class="token variable">hello</span><span class="token punctuation">,</span><span class="token variable">world</span><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shanan abc</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> 
</code></pre> 
<h3><a id="6_82"></a>6.指定用户读写共享文件的权限，在配置文件底行加入内容</h3> 
<pre><code class="prism language-handlebars"><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">test</span><span class="token punctuation">]</span></span>  
 <span class="token variable">path</span><span class="token punctuation">=</span><span class="token punctuation">/</span><span class="token variable">opt</span><span class="token punctuation">/</span><span class="token variable">test</span>
         <span class="token variable">browseable</span><span class="token punctuation">=</span><span class="token variable">yes</span>
         <span class="token variable">writable</span><span class="token punctuation">=</span><span class="token variable">yes</span>
         <span class="token variable">create</span> <span class="token variable">mask</span><span class="token punctuation">=</span><span class="token number">0644</span>
         <span class="token variable">directory</span> <span class="token variable">mask</span><span class="token punctuation">=</span><span class="token number">0755</span>
         <span class="token variable">valid</span> <span class="token variable">users</span><span class="token punctuation">=</span><span class="token variable">test3</span><span class="token punctuation">,</span><span class="token variable">test4</span>
         <span class="token variable">write</span> <span class="token variable">list</span><span class="token punctuation">=</span><span class="token variable">test3</span>
</code></pre> 
<h3><a id="7TEST12_smb_94"></a>7.创建TEST1,2 用户并给他们设置smb密码</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">root</span><span class="token punctuation">@</span><span class="token variable">shangzhen</span> <span class="token variable">samba</span><span class="token punctuation">]</span><span class="token punctuation">#</span> <span class="token variable">useradd</span> <span class="token variable">test2</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">smbpasswd</span> <span class="token variable">-a</span> <span class="token variable">test1</span>
<span class="token variable">New</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>
<span class="token variable">Retype</span> <span class="token variable">new</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>
<span class="token variable">Added</span> <span class="token variable">user</span> <span class="token variable">test1</span><span class="token punctuation">.</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">smbpasswd</span> <span class="token variable">-a</span> <span class="token variable">test2</span>
<span class="token variable">New</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>
<span class="token variable">Retype</span> <span class="token variable">new</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>
<span class="token variable">Added</span> <span class="token variable">user</span> <span class="token variable">test2</span><span class="token punctuation">.</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">pdbedit</span> <span class="token variable">-L</span>   <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">查看列表</span>
<span class="token variable">test1:</span><span class="token number">1000</span><span class="token variable">:</span>
<span class="token variable">test2:</span><span class="token number">1001</span><span class="token variable">:</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">pdbedit</span> <span class="token variable">-L</span>
<span class="token variable">test1:</span><span class="token number">1000</span><span class="token variable">:</span>
<span class="token variable">test3:</span><span class="token number">1002</span><span class="token variable">:</span>
<span class="token variable">test2:</span><span class="token number">1001</span><span class="token variable">:</span>
<span class="token variable">test4:</span><span class="token number">1003</span><span class="token variable">:</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">systemctl</span> <span class="token variable">restart</span> <span class="token variable">smb</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhenn samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">vi</span> <span class="token variable">smb</span><span class="token punctuation">.</span><span class="token variable">conf</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">systemctl</span> <span class="token variable">restart</span> <span class="token variable">smb</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">smbpasswd</span> <span class="token variable">-a</span> <span class="token variable">test4</span>
<span class="token variable">New</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>
<span class="token variable">Retype</span> <span class="token variable">new</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">smbpasswd</span> <span class="token variable">-a</span> <span class="token variable">test3</span>
<span class="token variable">New</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>
<span class="token variable">Retype</span> <span class="token variable">new</span> <span class="token variable">SMB</span> <span class="token variable">password:</span>

<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">homes</span><span class="token punctuation">]</span></span>
        <span class="token variable">comment</span> <span class="token punctuation">=</span> <span class="token variable">Home</span> <span class="token variable">Directories</span>
<span class="token punctuation">;</span>       <span class="token variable">valid</span> <span class="token variable">users</span> <span class="token punctuation">=</span> <span class="token punctuation">%</span><span class="token variable">S</span>
       <span class="token variable">valid</span> <span class="token variable">users</span> <span class="token punctuation">=</span> <span class="token variable">MYDOMAIN</span><span class="token punctuation">\</span><span class="token punctuation">%</span><span class="token variable">S</span>
        <span class="token variable">browseable</span> <span class="token punctuation">=</span> <span class="token variable">No</span>
        <span class="token variable">read</span> <span class="token variable">only</span> <span class="token punctuation">=</span> <span class="token variable">No</span>
        <span class="token variable">inherit</span> <span class="token variable">acls</span> <span class="token punctuation">=</span> <span class="token variable">Yes</span>
        <span class="token variable">writable</span> <span class="token punctuation">=</span> <span class="token variable">yes</span>
</code></pre> 
<h3><a id="8opttest_133"></a>8、在opt目录下创建test目录，并给其权限</h3> 
<p>[root@shanan samba]# cd /opt<br> [root@shanan opt]# ls<br> abc<br> [root@shanan opt]# mkdir test<br> [root@shanan opt]# chmod 777 test</p> 
<h3><a id="9_139"></a>9.回到客户端，清空缓存；服务端重启服务</h3> 
<p><img src="https://images2.imgbox.com/4f/94/bHtKFsnx_o.png" alt="在这里插入图片描述"><br> [root@shangzhen opt]# systemctl restart smb<br> 10.再次登录共享目录，输入刚才新建的smb用户和对应的密码<br> <img src="https://images2.imgbox.com/4a/0d/1zO9mcMD_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d0/78/oBuD0Rxa_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-handlebars"><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen samba</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">cd</span> <span class="token punctuation">/</span><span class="token variable">opt</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shanan opt</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">ls</span>
<span class="token variable">abc</span>  <span class="token variable">test</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen opt</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">cd</span> <span class="token variable">test</span><span class="token punctuation">/</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen test</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">ls</span>
<span class="token number">123.</span><span class="token variable">txt</span>            <span class="token variable">新建</span> <span class="token variable">RTF</span> <span class="token variable">文档</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token variable">rtf</span>  <span class="token variable">新建文件夹</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token number">12.</span><span class="token variable">txt</span>             <span class="token variable">新建</span> <span class="token variable">RTF</span> <span class="token variable">文档</span><span class="token punctuation">.</span><span class="token variable">rtf</span>      <span class="token variable">新建文本文档</span><span class="token punctuation">.</span><span class="token variable">txt</span>
<span class="token punctuation">~</span><span class="token variable">$</span> <span class="token variable">DOC</span> <span class="token variable">文档</span><span class="token punctuation">.</span><span class="token variable">doc</span>    <span class="token variable">新建文件夹</span>
<span class="token variable">新建</span> <span class="token variable">DOC</span> <span class="token variable">文档</span><span class="token punctuation">.</span><span class="token variable">doc</span>  <span class="token variable">新建文件夹</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_smbwin10_157"></a>三. 利用smb服务访问win10的共享目录</h2> 
<h3><a id="1_guest_158"></a>1、 设置来宾账户guest策略权限</h3> 
<p><img src="https://images2.imgbox.com/13/75/JmVQegFo_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7d/d9/CQlaOe0W_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/97/ec/r6MlzNbf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/71/14/voPlGn4L_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b4/c2/2lRLBCQY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/45/85/gSikJAH4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/56/55/LGkGOiLk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/78/1f/JFuMRMvO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2WIN10_167"></a>2.选择WIN10本地共享文件夹及修改属性</h3> 
<p><img src="https://images2.imgbox.com/d2/ef/Z5kUOZ94_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/98/04/z5NxgZ86_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/75/cc/vC8YmVkH_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3LINUXWIN10_171"></a>3.在LINUX端查看及挂载WIN10共享文件夹</h3> 
<p><img src="https://images2.imgbox.com/85/6a/9itqVXSJ_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-handlebars"><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen /</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">yum</span> <span class="token variable">whatprovides</span> <span class="token variable">mount</span><span class="token punctuation">.</span><span class="token variable">cifs</span> <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">查找命令的所在软件</span>

<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen bin</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">yum</span> <span class="token variable">install</span> <span class="token variable">cifs-utils</span><span class="token punctuation">*</span> <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">安装软件</span>
<span class="token variable">Installed:</span>
<span class="token variable">cifs-utils</span><span class="token punctuation">.</span><span class="token variable">x86_64</span> <span class="token number">0</span><span class="token variable">:</span><span class="token number">6.2</span><span class="token variable">-</span><span class="token number">10.</span><span class="token variable">el7</span> <span class="token variable">cifs-utils-devel</span><span class="token punctuation">.</span><span class="token variable">x86_64</span> <span class="token number">0</span><span class="token variable">:</span><span class="token number">6.2</span><span class="token variable">-</span><span class="token number">10.</span><span class="token variable">el7</span>
<span class="token variable">Dependency</span> <span class="token variable">Installed:</span>
<span class="token variable">keyutils</span><span class="token punctuation">.</span><span class="token variable">x86_64</span> <span class="token number">0</span><span class="token variable">:</span><span class="token number">1.5</span><span class="token number">.8</span><span class="token variable">-</span><span class="token number">3.</span><span class="token variable">el7</span>

<span class="token variable">Complete</span><span class="token punctuation">!</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen bin</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">mount</span><span class="token punctuation">.</span><span class="token variable">cifs</span> <span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token number">192.168</span><span class="token number">.100</span><span class="token number">.60</span><span class="token block keyword">/ceshi</span> <span class="token block keyword">/win10/</span>
<span class="token variable">Password</span> <span class="token variable">for</span> <span class="token variable">root</span><span class="token punctuation">@</span><span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token number">192.168</span><span class="token number">.100</span><span class="token number">.60</span><span class="token block keyword">/ceshi:</span> <span class="token block keyword">//直接回车，无密码</span>

<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen bin</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">df</span> <span class="token variable">-h</span>
<span class="token variable">Filesystem</span> <span class="token variable">Size</span> <span class="token variable">Used</span> <span class="token variable">Avail</span> <span class="token variable">Use</span><span class="token punctuation">%</span> <span class="token variable">Mounted</span> <span class="token variable">on</span>
<span class="token punctuation">/</span><span class="token variable">dev</span><span class="token punctuation">/</span><span class="token variable">mapper</span><span class="token punctuation">/</span><span class="token variable">centos-root</span> <span class="token number">50</span><span class="token variable">G</span> <span class="token number">2.0</span><span class="token variable">G</span> <span class="token number">49</span><span class="token variable">G</span> <span class="token number">4</span><span class="token punctuation">%</span> <span class="token punctuation">/</span>
<span class="token variable">devtmpfs</span> <span class="token number">1.7</span><span class="token variable">G</span> <span class="token number">0</span> <span class="token number">1.7</span><span class="token variable">G</span> <span class="token number">0</span><span class="token punctuation">%</span> <span class="token punctuation">/</span><span class="token variable">dev</span>
<span class="token variable">tmpfs</span> <span class="token number">1.8</span><span class="token variable">G</span> <span class="token number">0</span> <span class="token number">1.8</span><span class="token variable">G</span> <span class="token number">0</span><span class="token punctuation">%</span> <span class="token punctuation">/</span><span class="token variable">dev</span><span class="token punctuation">/</span><span class="token variable">shm</span>
<span class="token variable">tmpfs</span> <span class="token number">1.8</span><span class="token variable">G</span> <span class="token number">9.7</span><span class="token variable">M</span> <span class="token number">1.8</span><span class="token variable">G</span> <span class="token number">1</span><span class="token punctuation">%</span> <span class="token punctuation">/</span><span class="token variable">run</span>
<span class="token variable">tmpfs</span> <span class="token number">1.8</span><span class="token variable">G</span> <span class="token number">0</span> <span class="token number">1.8</span><span class="token variable">G</span> <span class="token number">0</span><span class="token punctuation">%</span> <span class="token punctuation">/</span><span class="token variable">sys</span><span class="token punctuation">/</span><span class="token variable">fs</span><span class="token punctuation">/</span><span class="token variable">cgroup</span>
<span class="token punctuation">/</span><span class="token variable">dev</span><span class="token punctuation">/</span><span class="token variable">sda1</span> <span class="token number">1014</span><span class="token variable">M</span> <span class="token number">146</span><span class="token variable">M</span> <span class="token number">869</span><span class="token variable">M</span> <span class="token number">15</span><span class="token punctuation">%</span> <span class="token punctuation">/</span><span class="token variable">boot</span>
<span class="token punctuation">/</span><span class="token variable">dev</span><span class="token punctuation">/</span><span class="token variable">mapper</span><span class="token punctuation">/</span><span class="token variable">centos-home</span> <span class="token number">246</span><span class="token variable">G</span> <span class="token number">33</span><span class="token variable">M</span> <span class="token number">246</span><span class="token variable">G</span> <span class="token number">1</span><span class="token punctuation">%</span> <span class="token punctuation">/</span><span class="token variable">home</span>
<span class="token variable">tmpfs</span> <span class="token number">351</span><span class="token variable">M</span> <span class="token number">0</span> <span class="token number">351</span><span class="token variable">M</span> <span class="token number">0</span><span class="token punctuation">%</span> <span class="token punctuation">/</span><span class="token variable">run</span><span class="token punctuation">/</span><span class="token variable">user</span><span class="token punctuation">/</span><span class="token number">0</span>
<span class="token block keyword">//</span><span class="token number">192.168</span><span class="token number">.100</span><span class="token number">.60</span><span class="token block keyword">/ceshi</span> <span class="token number">200</span><span class="token variable">G</span> <span class="token number">100</span><span class="token variable">M</span> <span class="token number">200</span><span class="token variable">G</span> <span class="token number">1</span><span class="token punctuation">%</span> <span class="token punctuation">/</span><span class="token variable">win10</span>
</code></pre> 
<h3><a id="4win10_200"></a>4.可以正常访问使用win10共享文件夹了</h3> 
<pre><code class="prism language-handlebars"><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen bin</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">cd</span> <span class="token punctuation">/</span><span class="token variable">win10</span>
<span class="token brackets"><span class="token punctuation">[</span><span class="token variable">root@shangzhen win10</span><span class="token punctuation">]</span></span><span class="token punctuation">#</span> <span class="token variable">ls</span>
<span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d3cf9a53c2d39f4a346c53ffeea8cfaa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">（十一）OpenStack的neutron-网络服务介绍及安装配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9efb3bedad693d7d9b9d580f118af0e5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">多线程中的乐观锁、悲观锁</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>