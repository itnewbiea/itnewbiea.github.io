<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue2-3学习笔记 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue2-3学习笔记" />
<meta property="og:description" content="一、初始Vue 动态构建用户界面的渐进式JavaScript框架
英文官网中文官网 1.1 创建Vue实例 想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象；
{{xxx}}中的xxx要写js表达式，且xxx可以自动读取到data中的所有属性；
一旦data中的数据发生改变，那么页面中用到该数据的地方也会自动更新；
注意区分：js表达式 和 js代码(语句)
​ 1.表达式：一个表达式会产生一个值，可以放在任何一个需要值的地方：
​ (1). a
​ (2). a&#43;b
​ (3). demo(1)
​ (4). x === y ? ‘a’ : ‘b’
​ 2.js代码(语句)
​ (1). if(){}
​ (2). for(){}
&lt;!-- 准备好一个容器 --&gt; &lt;div id=&#34;demo&#34;&gt; &lt;h1&gt;Hello，{{name.toUpperCase()}}，{{address}}&lt;/h1&gt; &lt;/div&gt; //关闭VUe的生产提醒 vue2.x才需要关闭 vue3.x 不需要 Vue.config.productionTip = false // 创建Vue实例 new Vue({ el:&#39;#demo&#39;, //el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。 data:{ //data中用于存储数据，数据供el所指定的容器去使用，值我们暂时先写成一个对象。 name:&#39;atguigu&#39;, address:&#39;北京&#39; } }) 1.3 模板语法 Vue模板语法有2大类：
插值语法：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/56ae327589b2aa9c7384eff71a5e18bb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-28T15:25:52+08:00" />
<meta property="article:modified_time" content="2023-08-28T15:25:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue2-3学习笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Vue_0"></a>一、初始Vue</h2> 
<blockquote> 
 <p>动态构建用户界面的渐进式JavaScript框架</p> 
</blockquote> 
<ul><li><a href="https://vuejs.org/" rel="nofollow">英文官网</a></li><li><a href="https://cn.vuejs.org/" rel="nofollow">中文官网</a></li></ul> 
<h3><a id="11_Vue_7"></a>1.1 创建Vue实例</h3> 
<ol><li> <p>想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象；</p> </li><li> <p>{<!-- -->{xxx}}中的xxx要写js表达式，且xxx可以自动读取到data中的所有属性；</p> </li><li> <p>一旦data中的数据发生改变，那么页面中用到该数据的地方也会自动更新；</p> </li></ol> 
<p>注意区分：js表达式 和 js代码(语句)</p> 
<p>​ 1.表达式：一个表达式会产生一个值，可以放在任何一个需要值的地方：</p> 
<p>​ (1). a</p> 
<p>​ (2). a+b</p> 
<p>​ (3). demo(1)</p> 
<p>​ (4). x === y ? ‘a’ : ‘b’</p> 
<p>​ 2.js代码(语句)</p> 
<p>​ (1). if(){}</p> 
<p>​ (2). for(){}</p> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- 准备好一个容器 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>demo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello，{<!-- -->{name.toUpperCase()}}，{<!-- -->{address}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token comment">//关闭VUe的生产提醒 vue2.x才需要关闭 vue3.x 不需要</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment">// 创建Vue实例</span>
	<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#demo'</span><span class="token punctuation">,</span> <span class="token comment">//el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//data中用于存储数据，数据供el所指定的容器去使用，值我们暂时先写成一个对象。</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">address</span><span class="token operator">:</span><span class="token string">'北京'</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="13__54"></a>1.3 模板语法</h3> 
<p>Vue模板语法有2大类：</p> 
<ol><li> <p>插值语法：</p> <p>​ 功能：用于解析标签体内容</p> <p>​ 写法：{<!-- -->{xxx}}, xxx是js表达式，且可以直接读取到data中的所有属性</p> </li><li> <p>指令语法：</p> <p>​ 功能：用于解析标签（包括：标签属性、标签体内容、绑定事件…）。</p> <p>​ 举例：v-bind:href=“xxx” 或 简写为 :href=“xxx”，xxx同样要写js表达式，且可以直接读取到data中的所有属性。</p> <p>​ 备注：Vue中有很多的指令，且形式都是：v-???，此处我们只是拿v-bind举个例子。</p> <p>​</p> </li></ol> 
<h3><a id="14__74"></a>1.4 数据绑定</h3> 
<p><strong>单项数据绑定</strong></p> 
<ol><li>语法: v-bind:href="xxx"或简写成 :href</li><li>特点: 数据只能从data流向页面</li></ol> 
<p><strong>双向数据绑定</strong></p> 
<ol><li>语法: v-model:value="xxx"或简写为v-model=“xxx”</li><li>特点：数据不仅能从data流向页面，还能从页面流向data</li></ol> 
<blockquote> 
 <p>备注：</p> 
 <p>​ 1.双向绑定一般都应用在表单类元素上（如：input、select等）</p> 
 <p>​ 2.v-model:value 可以简写为 v-model，因为v-model默认收集的就是value值。</p> 
</blockquote> 
<h3><a id="14_eldata_92"></a>1.4 el与data的两种写法</h3> 
<ol><li> <p>el有两种写法</p> 
  <ol><li>.new Vue是后配置el属性</li><li>先创建Vue实例，随后再通过 vm.$mount(‘#root’)指定el的值</li></ol> </li><li> <p>data的两种写法</p> 
  <ol><li>对象式</li><li>函数式</li></ol> </li><li> <p>一个重要的原则:</p> <p>​ Vue管理的函数，一定不要写箭头函数，一旦写箭头函数，this就不是Vue实例</p> </li></ol> 
<h3><a id="15_MVVM__108"></a>1.5 MVVM 模型</h3> 
<ol><li>M：模型(Model) ：对应data中的数据</li><li>V： 视图(View) : 模板（展示model的数据）</li><li>VM: 视图模型(ViewModel):Vue 实例对象（连接model和view层实现双向绑定和更新识图）</li></ol> 
<h3><a id="16__120"></a>1.6 事件的基本使用</h3> 
<h4><a id="161__122"></a>1.61 事件的基本使用</h4> 
<blockquote> 
 <p>使用v-on:xxx 或 @xxx 绑定事件，其中xxx是事件名</p> 
 <p>事件的回调需要配置在methods对象中，最终会在vm上；</p> 
</blockquote> 
<p>注：</p> 
<ol><li>methods中配置的函数，不要用箭头函数！否则this就不是vm了；</li><li>methods中配置的函数，都是被Vue所管理的函数，this的指向是vm 或 组件实例对象；</li><li>@click=“demo” 和 @click=“demo($event)” 效果一致，但后者可以传参；</li></ol> 
<h4><a id="162__134"></a>1.6.2 事件修饰符</h4> 
<ul><li>prevent：阻止默认事件（常用）；</li><li>stop：阻止事件冒泡（常用）；</li><li>once：事件只触发一次（常用）；</li><li>capture：使用事件的捕获模式；</li><li>self：只有event.target是当前操作的元素时才触发事件；</li><li>passive：事件的默认行为立即执行，无需等待事件回调执行完毕；</li></ul> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- 阻止默认事件（常用） --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.atguigu.com<span class="token punctuation">"</span></span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showInfo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>点我提示信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="163__148"></a>1.6.3 键盘事件</h4> 
<p><strong>Vue中常用的按键别名：</strong></p> 
<p>​ 回车 =&gt; enter</p> 
<p>​ 删除 =&gt; delete (捕获“删除”和“退格”键)</p> 
<p>​ 退出 =&gt; esc</p> 
<p>​ 空格 =&gt; space</p> 
<p>​ 换行 =&gt; tab (特殊，必须配合keydown去使用)</p> 
<p>​ 上 =&gt; up</p> 
<p>​ 下 =&gt; down</p> 
<p>​ 左 =&gt; left</p> 
<p>​ 右 =&gt; right</p> 
<blockquote> 
 <p>Vue未提供别名的按键，可以使用按键原始的key值去绑定，但注意要转为kebab-case（短横线命名）</p> 
 <p>系统修饰键（用法特殊）：ctrl、alt、shift、meta</p> 
 <p>​ (1).配合keyup使用：按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发。</p> 
 <p>​ (2).配合keydown使用：正常触发事件。</p> 
 <p>也可以使用keyCode去指定具体的按键（不推荐）</p> 
 <p>Vue.config.keyCodes.自定义键名 = 键码，可以去定制按键别名</p> 
</blockquote> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>欢迎来到{<!-- -->{name}}学习<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>按下回车提示输入<span class="token punctuation">"</span></span> <span class="token attr-name">@keydown.huiche</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showInfo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
		Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>keyCodes<span class="token punctuation">.</span>huiche <span class="token operator">=</span> <span class="token number">13</span> <span class="token comment">//定义了一个别名按键</span>

		<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#root'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'尚硅谷'</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">showInfo</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
					<span class="token comment">// console.log(e.key,e.keyCode)</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="17__207"></a>1.7 计算属性和监听器</h3> 
<h5><a id="vue_209"></a><strong>注：vue中的数据代理</strong></h5> 
<ol><li>通过vm对象来代理data对象中属性的操作（读/写）</li><li>vue中数据代理的好处：更方便的操作data中的数据</li><li>基本原理：通过Object.defineProperty()把data对象中的所有属性添加到vm上，为每一个添加到vm上的属性，都制定一个getter与setter，在gettter/setter内部去操作（读/写）data中对应的属性</li></ol> 
<h4><a id="171__215"></a>1.7.1 计算属性(感觉跟数据代理差不多)</h4> 
<p>**定义:**要用的属性(computed)不存在，要通过已有属性计算得来。</p> 
<p>**原理:**底层借助了Objcet.defineproperty方法提供的getter和setter。</p> 
<p>初次使用是会调用getter函数，当依赖的数据发生改变时会再次调用且必须写set函数去响应修改</p> 
<p>**优势:**与methods实现相比，内部有缓存机制（复用），效率更高，调试方便。</p> 
<p>**备注：**计算属性最终会出现在vm上，直接读取使用即可。</p> 
<p>如果修改属性需要在computed计算属性的属性写setter方法,getter方法可省略</p> 
<p>例如：</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuew</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#root'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">firstName</span><span class="token operator">:</span><span class="token string">'张'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">lastName</span><span class="token operator">:</span><span class="token string">'三'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//计算属性  </span>
        <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">fullName</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
                <span class="token comment">//get有什么用？当有人读取fullName时，get就会被调用，却返回值就为fullName的值      get什么时候调用？1. 初次读取fullName时，2.所依赖的数据发生变化时</span>
                <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName
                <span class="token punctuation">}</span>
                <span class="token comment">//  set什么时候调用？修改的时候</span>
                <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//一般不用</span>
            	  
        <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> 
<p><strong>简写</strong></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuew</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#root'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">firstName</span><span class="token operator">:</span><span class="token string">'张'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">lastName</span><span class="token operator">:</span><span class="token string">'三'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//计算属性  </span>
        <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//只提供一个getter</span>
            <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            	  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="172_watch_279"></a>1.7.2 监视属性watch</h4> 
<p>1.当被监视的属性变化时, 回调函数自动调用, 进行相关操作<br> 2.监视的属性必须存在，才能进行监视！！<br> 3.监视的两种写法：<br> (1).new Vue时传入watch配置<br> (2).通过vm.$watch监视</p> 
<pre><code class="prism language-javascript"><span class="token comment">//第一种写法</span>
<span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">isHot</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//初始化时让handler调用一下</span>
	<span class="token comment">//handler什么时候调用？当isHot发生改变时。</span>
	<span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'isHot被修改了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//第二种写法</span>
vm<span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'isHot'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//初始化时让handler调用一下</span>
			<span class="token comment">//handler什么时候调用？当isHot发生改变时。</span>
			<span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'isHot被修改了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>4.深度监视：</p> 
<p>​ (1).Vue中的watch默认不监测对象内部值的改变（一层）。</p> 
<p>​ (2).配置deep:true可以监测对象内部值改变（多层）。</p> 
<blockquote> 
 <p>备注：</p> 
 <p>(1).Vue自身可以监测对象内部值的改变，但Vue提供的watch默认不可以！</p> 
 <p>(2).使用watch时根据数据的具体结构，决定是否采用深度监视。</p> 
</blockquote> 
<pre><code class="prism language-javascript"><span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">isHot</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// immediate:true, //初始化时让handler调用一下</span>
        <span class="token comment">//handler什么时候调用？当isHot发生改变时。</span>
        <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'isHot被修改了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//监视多级结构中所有属性的变化</span>
    <span class="token literal-property property">numbers</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'numbers改变了'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="18_class_338"></a>1.8 class绑定</h3> 
<ol><li> <p>字符串写法，适用于：样式的类名不确定，需要动态指定</p> <pre><code class="prism language-vue">&lt;div class="basic" :class="mood"&gt;&lt;/div&gt;
&lt;script&gt;
    const vm = new Vuew({
        el:'#root',
        data:{
           mood:"happy"
        },
    })
&lt;/script&gt;
</code></pre> </li><li> <p>数组写法，适用于：要绑定的样式个数不确定，名字也不确定</p> <pre><code class="prism language-vue">&lt;div class="basic" :class="classArr"&gt;&lt;/div&gt;
&lt;script&gt;
    const vm = new Vuew({
        el:'#root',
        data:{
           classArr:["happy","sad","normal"]
        },
    })
&lt;/script&gt;
</code></pre> </li><li> <p>对象写法，适用于：要绑定的样式个数确定，名字也确定，但动态决定用不用</p> <pre><code class="prism language-vue">&lt;div class="basic" :class="classObj"&gt;&lt;/div&gt;
&lt;script&gt;
    const vm = new Vuew({
        el:'#root',
        data:{
            classObj:{
                hxx:true,
                hxx2:false
            }
        },
    })
&lt;/script&gt;
</code></pre> </li></ol> 
<h3><a id="19__387"></a>1.9 条件渲染</h3> 
<h4><a id="191vif_389"></a>1.9.1.v-if</h4> 
<p><strong>写法：</strong></p> 
<ol><li>v-if=“表达式”</li><li>v-else-if=“表达式”</li><li>v-else=“表达式”</li></ol> 
<p>**适用于：**切换频率较低的场景。</p> 
<p><strong>特点：<strong>不展示的DOM元素直接被</strong>移除</strong>。</p> 
<p>**注意：**v-if可以和:v-else-if、v-else一起使用，但要求结构不能被“打断”。</p> 
<h4><a id="192_vshow_403"></a><strong>1.9.2</strong> v-show</h4> 
<p>**写法：**v-show=“表达式”</p> 
<p>**适用于：**切换频率较高的场景。</p> 
<p><strong>特点：<strong>不展示的DOM元素未被移除，仅仅是使用样式</strong>隐藏</strong>掉 <code>display:none</code></p> 
<h4><a id="193__411"></a>1.9.3 总结</h4> 
<p>v-if需要操作dom元素有更高的切换消耗，v-show仅隐藏dom元素，如果需要非常频繁的切换，建议使用v-show较好，如果切换频率低，则使用v-if较好</p> 
<h3><a id="110__null_415"></a>1.10 列表渲染 null</h3> 
<h3><a id="111__419"></a>1.11 收集表单数据</h3> 
<p><code>&lt;input type="text"/&gt;</code>，则v-model收集的是value值，用户输入的就是value值。</p> 
<p><code>&lt;input type="radio"/&gt;</code>，则v-model收集的是value值，且要给标签配置value值。</p> 
<p><code>&lt;input type="checkbox"/&gt;</code></p> 
<p>​ 1.没有配置input的value属性，那么收集的就是checked（勾选 or 未勾选，是布尔值）</p> 
<p>​ 2.配置input的value属性:</p> 
<p>​ (1)v-model的初始值是非数组，那么收集的就是checked（勾选 or 未勾选，是布尔值）</p> 
<p>​ (2)v-model的初始值是数组，那么收集的的就是value组成的数组</p> 
<blockquote> 
 <p>备注：v-model的三个修饰符：</p> 
 <p>​ lazy：失去焦点再收集数据 //懒收集</p> 
 <p>​ number：输入字符串转为有效的数字 //一般用在年龄</p> 
 <p>​ trim：输入首尾空格过滤 //过滤空格</p> 
 <p>例如：</p> 
 <p>​ 年龄:</p> 
</blockquote> 
<h3><a id="112__447"></a>1.12 过滤器</h3> 
<p>**定义：**对要显示的数据进行特定格式化后再显示（适用于一些简单逻辑的处理）。</p> 
<p><strong>语法：</strong></p> 
<p>​ 1.注册过滤器：Vue.filter(name,callback) 或 new Vue{filters:{}}</p> 
<p>​ 2.使用过滤器：{<!-- -->{ xxx | 过滤器名}} 或 v-bind:属性 = “xxx | 过滤器名”(少用)</p> 
<p>​ 3. 可以嵌套 {<!-- -->{ xxx | 过滤器名1 | 过滤器名2}} 先1 然后将1返回值给2</p> 
<p><strong>备注：</strong></p> 
<p>​ 1.过滤器也可以接收额外参数、多个过滤器也可以串联</p> 
<p>​ 2.并没有改变原本的数据, 是产生新的对应的数据</p> 
<p>*<em>例如</em></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>time <span class="token operator">|</span> <span class="token function">timeFormat</span><span class="token punctuation">(</span><span class="token string">"YYYY-MM-DD"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">//全局过滤器</span>
    Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>timeFormat<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span>str</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   		<span class="token keyword">return</span> <span class="token function">dayjs</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuew</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#root'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
           <span class="token literal-property property">time</span><span class="token operator">:</span><span class="token string">"时间戳"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//局部过滤器</span>
        <span class="token literal-property property">filters</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//value的值是 过滤器上面 | 符号前面的值  str是括号传参的值  ES6支持默认值</span>
            <span class="token function">timeFormat</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>str<span class="token operator">=</span><span class="token string">"YYYY-MM-DD HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> <span class="token function">dayjs</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">//dayjs 是用BootCDN下载的js库</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="113__null_493"></a>1.13 内置指令与自定义指令 null</h3> 
<h4><a id="1131__495"></a>1.13.1 内置指令</h4> 
<p><strong>v-text指令：</strong></p> 
<p>​ 1.作用：向其所在的节点中渲染文本内容。</p> 
<p>​ 2.与插值语法的区别：v-text会替换掉节点中的内容，{<!-- -->{xx}}则不会。</p> 
<p><strong>v-html指令：</strong>（少用很危险）</p> 
<p>​ 1.作用：向指定节点中渲染包含html结构的内容。</p> 
<p>​ 2.与插值语法的区别：</p> 
<p>​ (1).v-html会替换掉节点中所有的内容，{<!-- -->{xx}}则不会。</p> 
<p>​ (2).v-html可以识别html结构。</p> 
<p>​ 3.严重注意：v-html有安全性问题！！！！</p> 
<p>​ (1).在网站上动态渲染任意HTML是非常危险的，容易导致XSS攻击。</p> 
<p>​ (2).一定要在可信的内容上使用v-html，永不要用在用户提交的内容上！</p> 
<p><strong>v-cloak指令（没有值）：</strong>😶</p> 
<p>​ 1.本质是一个特殊属性，Vue实例创建完毕并接管容器后，会删掉v-cloak属性。</p> 
<p>​ 2.使用css配合v-cloak可以解决网速慢时页面展示出{<!-- -->{xxx}}的问题。</p> 
<p>​ 3.在vue实例接管容器的一瞬间删除v-cloak 配合display:none使用 📜</p> 
<p><strong>v-once指令：</strong></p> 
<p>​ 1.v-once所在节点在初次动态渲染后，就视为静态内容了。</p> 
<p>​ 2.以后数据的改变不会引起v-once所在结构的更新，可以用于优化性能。</p> 
<p><strong>v-pre指令：</strong></p> 
<p>​ 1.跳过其所在节点的编译过程。</p> 
<p>​ 2.可利用它跳过：没有使用指令语法、没有使用插值语法的节点，会加快编译。</p> 
<h4><a id="1132__539"></a>1.13.2 自定义指令</h4> 
<ol><li> <p>自定义指令-函数式</p> <pre><code class="prism language-js"><span class="token operator">&lt;</span>p v<span class="token operator">-</span>big<span class="token operator">=</span><span class="token string">"n"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>


	<span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuew</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#root'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
           <span class="token literal-property property">n</span><span class="token operator">:</span><span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//声明指令</span>
 		<span class="token literal-property property">directives</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//big函数何时被调用？ 1.指令与元素成功绑定时 2.指令所在的模板被重新解析时</span>
            <span class="token comment">//element 为自定义指令绑定的元素（即&lt;p&gt;&lt;/p&gt;） binding为元素中的值 （即:n）</span>
            <span class="token function">big</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span>binding<span class="token punctuation">)</span>
                element<span class="token punctuation">.</span>innerText <span class="token operator">=</span> binding<span class="token punctuation">.</span>value <span class="token operator">*</span> <span class="token number">10</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> </li><li> <p>自定义指令-对象式</p> <pre><code class="prism language-js"><span class="token operator">&lt;</span>input  type<span class="token operator">=</span><span class="token string">"text"</span> v<span class="token operator">-</span>fbind<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"n"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>


	<span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuew</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#root'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
           <span class="token literal-property property">n</span><span class="token operator">:</span><span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//声明指令</span>
 		<span class="token literal-property property">directives</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
          
            <span class="token literal-property property">fbind</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
                <span class="token comment">//指令与元素成功绑定时</span>
                <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                     element<span class="token punctuation">.</span>value <span class="token operator">=</span> binding<span class="token punctuation">.</span>value 
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">//指令所在元素被插入页面时</span>
                <span class="token function">inserted</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                     element<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">//指令所在模板被重新解析时</span>
                <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                     element<span class="token punctuation">.</span>value <span class="token operator">=</span> binding<span class="token punctuation">.</span>value 
                     element<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> </li><li> <p>注意事项：</p> 
  <ol><li>多个单词命名 用’-‘连接 比如：big-number 但在directives中要把名字写成这样’big-number’</li><li>上面的都是局部的自定义指令，全局写法 Vue.directive(‘名字’,function(){上面一样})</li></ol> </li></ol> 
<h3><a id="114__606"></a>1.14 生命周期</h3> 
<p>​ vm的一生（vm的生命周期）：</p> 
<p>​ 将要创建 ====&gt; 调用beforeCreate函数</p> 
<p>​ 创建完毕 ====&gt; 调用create函数</p> 
<p>​ 将要挂载 ====&gt; 调用beforeMount函数</p> 
<p>​ 挂载完毕 ====&gt; 调用mounted函数 ===========================&gt;【重要的钩子】</p> 
<p>​ 将要更新 ====&gt; 调用beforeUpdate函数</p> 
<p>​ 更新完毕 ====&gt; 调用updated函数</p> 
<p>​ 将要销毁 ====&gt; 调用beforeDestroy函数 ============================&gt;【重要的钩子】</p> 
<p>​ 销毁完毕 ====&gt; 调用destroyed函数</p> 
<p><strong>常用的生命周期函数</strong></p> 
<ol><li>mounted：发送ajax请求、启动定时器、绑定自定义事件、订阅消息等【初始化操作】</li><li>beforeDestroy：清除定时器、解绑自定义事件、取消订阅消息等【收尾工作】</li></ol> 
<p><strong>关于销毁vue实例</strong></p> 
<ul><li>销毁后借助vue开发者工具看不到任何信息</li><li>销毁后自定义事件会失效，但原生DOM事件依然有效</li><li>一般不会在beforeDestroy操作数据，因为即使操作数据，也不会在触发更新流程了。</li></ul> 
<h2><a id="Vue_641"></a>二、Vue的组件化编程</h2> 
<h3><a id="21__645"></a>2.1 非单文件组件</h3> 
<h4><a id="_647"></a>非单文件组件的基本使用</h4> 
<p>**非单文件组件：**一个文件中包含有 n 个组件</p> 
<p><strong>Vue使用组件的三大步骤：</strong></p> 
<blockquote> 
 <p>三大步骤：</p> 
 <ol><li>定义组件(创建组件)</li><li>注册组件</li><li>使用组件(写组件标签)</li></ol> 
</blockquote> 
<p><strong>1）如何定义一个组件？</strong></p> 
<p>使用Vue.extend(options)创建，其中options和new Vue(options)时传入的那个options几乎一样，但也有点区别；</p> 
<p><strong>区别如下：</strong></p> 
<p>​ 1.el不要写，为什么？ ——— 最终所有的组件都要经过一个vm的管理，由vm中的el决定服务哪个容器。</p> 
<p>​ 2.data必须写成函数，为什么？ ———— 避免组件被复用时，数据存在引用关系。</p> 
<p>**备注：**使用template可以配置组件结构。</p> 
<p><strong>2）如何注册组件？</strong></p> 
<p>​ 1.局部注册：靠new Vue的时候传入components选项</p> 
<p>​ 2.全局注册：靠Vue.component(‘组件名’,组件)</p> 
<p><strong>3）编写组件标签：</strong></p> 
<p>​ <code>&lt;school&gt;&lt;/school&gt;</code></p> 
<h4><a id="_681"></a>几个注意点</h4> 
<p><strong>1）关于组件名:</strong></p> 
<p>​ 一个单词组成：</p> 
<p>​ 第一种写法(首字母小写)：school</p> 
<p>​ 第二种写法(首字母大写)：School</p> 
<p>​ 多个单词组成：</p> 
<p>​ 第一种写法(kebab-case命名)：my-school</p> 
<p>​ 第二种写法(CamelCase命名)：MySchool (需要Vue脚手架支持)大驼峰</p> 
<p>​ 备注：</p> 
<p>​ (1).组件名尽可能回避HTML中已有的元素名称，例如：h2、H2、header都不行。</p> 
<p>​ (2).可以使用name配置项指定组件在开发者工具中呈现的名字。</p> 
<p><strong>2）关于组件标签:</strong></p> 
<p>​ 第一种写法：</p> 
<p>​ 第二种写法：</p> 
<p>​ 备注：不用使用脚手架时，会导致后续组件不能渲染。</p> 
<p><strong>3）一个简写方式：</strong></p> 
<p>​ const school = Vue.extend(options) 可简写为：const school = options</p> 
<h3><a id="22_VueComponet_715"></a>2.2 VueComponet</h3> 
<p><strong>关于VueComponent：</strong></p> 
<p>​ 1.school组件本质是一个名为VueComponent的构造函数，且不是程序员定义的，是Vue.extend生成的。</p> 
<p>​ 2.我们只需要写或，Vue解析时会帮我们创建school组件的实例对象，</p> 
<p>​ 即Vue帮我们执行的：new VueComponent(options)。源码可看</p> 
<p>​ 3.特别注意：每次调用Vue.extend，返回的都是一个<strong>全新</strong>的VueComponent！！！！即每次使用组件标签时</p> 
<p>​ 4.关于this指向：</p> 
<p>​ (1).组件配置中：</p> 
<p>​ data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【VueComponent实例对象】。</p> 
<p>​ (2).new Vue(options)配置中：</p> 
<p>​ data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【Vue实例对象】。</p> 
<p>​ 5.VueComponent的实例对象，以后简称vc（也可称之为：组件实例对象）。</p> 
<p>​ Vue的实例对象，以后简称vm。</p> 
<p><strong>一个重要的内置关系：</strong></p> 
<pre><code class="prism language-js"><span class="token class-name">VueComponent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype
</code></pre> 
<p><strong>为什么要有这个关系：</strong></p> 
<p>让组件实例对象（vc）可以访问到 Vue原型上的属性、方法。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-1QxFsds6-1693207452746)(C:\Users\黄佳欣\AppData\Roaming\Typora\typora-user-images\image-20230605155049133.png)]</p> 
<blockquote> 
 <p><code>prototype</code>是显示原型属性(函数)</p> 
 <p><code>__proto__</code>隐式原型属性(对象)</p> 
 <p>程序员通过显示原型属性操作原型对象给对象赋值</p> 
</blockquote> 
<h3><a id="23__759"></a>2.3 单文件组件</h3> 
<p><strong>模板页面 ：</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
页面模板
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>JS 模块对象</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>样式</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
样式定义
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>基本使用 :引入组件(import)=&gt;映射成标签(components)=&gt;使用组件标签（)</p> 
<h2><a id="Vue_792"></a>三、使用Vue脚手架</h2> 
<h3><a id="31__794"></a>3.1 初始化脚手架</h3> 
<p>**说明：**Vue 脚手架是 Vue 官方提供的标准化开发工具（开发平台）</p> 
<p><strong>具体步骤：</strong></p> 
<ol><li>全局安装@vue/cli： <code>npm install -g @vue/cli</code></li><li>创建vue项目：<code>vue create xxx</code></li><li>选择使用所需要的vue的版本</li><li>启动项目：<code>npm run serve</code></li></ol> 
<blockquote> 
 <p>Vue 脚手架隐藏了所有 webpack 相关的配置，若想查看具体的 webpack 配置，请执行：</p> 
 <p><code>vue inspect &gt; output.js</code></p> 
</blockquote> 
<p><strong>分析脚手架结构：</strong></p> 
<blockquote> 
 <p>.文件目录<br> ├── node_modules<br> ├── public<br> │ ├── favicon.ico: 页签图标<br> │ └── index.html: 主页面<br> ├── src<br> │ ├── assets: 存放静态资源<br> │ │ └── logo.png<br> │ │── component: 存放组件<br> │ │ └── HelloWorld.vue<br> │ │── App.vue: 汇总所有组件<br> │ └── main.js: 入口文件<br> ├── .gitignore: git版本管制忽略的配置<br> ├── babel.config.js: babel的配置文件<br> ├── package.json: 应用包配置文件<br> ├── README.md: 应用描述文件<br> └── package-lock.json: 包版本控制文件</p> 
</blockquote> 
<p><strong>render函数</strong></p> 
<pre><code class="prism language-javascript"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
    <span class="token comment">// 简写形式</span>
	<span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 完整形式</span>
	<span class="token comment">// render(createElement){<!-- --></span>
	<span class="token comment">//     return createElement(App)</span>
	<span class="token comment">// }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <ol><li>vue.js与vue.runtime.xxx.js的区别： 
   <ol><li>vue.js是完整版的Vue，包含：核心功能 + 模板解析器。</li><li>vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。</li></ol> </li><li>因为vue.runtime.xxx.js没有模板解析器，所以不能使用template这个配置项，需要使用render函数接收到的createElement函数去指定具体内容。</li></ol> 
</blockquote> 
<p><strong>vue.config.js配置文件</strong></p> 
<ol><li>使用vue inspect &gt; output.js可以查看到Vue脚手架的默认配置。</li><li>使用vue.config.js可以对脚手架进行个性化定制，详情见：https://cli.vuejs.org/zh</li></ol> 
<h3><a id="32_refprops_853"></a>3.2 ref属性和props配置项</h3> 
<p><strong>ref属性</strong></p> 
<p>功能：被用来给元素或子组件注册引用信息（id的替代者和id差不多）</p> 
<p>应用在<code>html</code>标签上获取的是真实DOM元素，应用在组件标签上获取的是组件实例对象（vc）</p> 
<p>使用方式：</p> 
<ol><li>打标识：<code>&lt;h1 ref="xxx"&gt;&lt;/h1&gt;</code> 或 <code>&lt;School ref="xxx"&gt;&lt;/School&gt;</code></li><li>获取：<code>this.$refs.xxx</code></li></ol> 
<hr> 
<p><strong>props配置项</strong></p> 
<p>功能：让组件接受外部传来的值</p> 
<p>传递数据：<code>&lt;Demo name="xxx" :age/&gt;</code></p> 
<p>接受数据：第三种方式（限制类型、限制必要性、指定默认值）</p> 
<blockquote> 
 <p>props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据</p> 
</blockquote> 
<pre><code class="prism language-javascript"> <span class="token comment">//简单声明接收</span>
<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'sex'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">]</span>
<span class="token comment">//接收的同时对数据进行类型限制</span>
<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
    <span class="token literal-property property">sex</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span>Number
<span class="token punctuation">}</span>
<span class="token comment">//接收的同时对数据进行显示+默认值的指定+必要性的限制</span>
<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">type</span><span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token comment">//name的类型是字符串</span>
        <span class="token literal-property property">required</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token comment">//name是必要的</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">type</span><span class="token operator">:</span>Number<span class="token punctuation">,</span><span class="token comment">//name的类型是字符串</span>
        <span class="token keyword">default</span><span class="token operator">:</span><span class="token number">99</span><span class="token comment">//默认值</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="33_mixin_899"></a>3.3 mixin(混入)</h3> 
<p>功能：可以把多个组件共用的配置提取成一个混入对象（可以共用函数或数据）</p> 
<p>使用方法：</p> 
<ol><li>定义混入：创建minin.js</li></ol> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> mixin <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li> <p>使用混入：</p> 
  <ol><li> <p>全局混入：<code>Vue.mixin(xxx)</code></p> </li><li> <p>局部混入：<code>mixins:['xxx']</code></p> </li></ol> </li></ol> 
<blockquote> 
 <p>组件和混入对象同名值基本与组件优先</p> 
 <p>同名生命周期钩子函数将合并成一个数组同时被调用，且混入的钩子函数将在自身组件前调用</p> 
</blockquote> 
<h3><a id="34_plugin_925"></a>3.4 plugin自定义插件</h3> 
<p>功能：用于增强Vue</p> 
<p>本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据</p> 
<p>定义插件：</p> 
<p><code>src/plugin.js</code>:</p> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">Vue<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token operator">...</span><span class="token punctuation">.</span>
	<span class="token comment">//给Vue原型上添加一个方法（vm和vc就都能用了）</span>
	<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'你好啊'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用插件：<code>Vue.use(plugin)</code></p> 
<h3><a id="35_TodoList_947"></a>3.5 Todo-List案例</h3> 
<ol><li> <p>组件化编码流程：</p> <p>​ (1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。</p> <p>​ (2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：</p> <p>​ 1).一个组件在用：放在组件自身即可。</p> <p>​ 2). 一些组件在用：放在他们共同的父组件上（状态提升）。</p> <p>​ (3).实现交互：从绑定事件开始。</p> </li><li> <p>props适用于：</p> <p>​ (1).父组件 ==&gt; 子组件 通信</p> <p>​ (2).子组件 ==&gt; 父组件 通信（要求父先给子一个函数）</p> </li><li> <p>使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的！</p> </li><li> <p>props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做。避免子组件直接修改父组件传输过来的值，也就是props接收的值，可以使用父组件传输函数的方式</p> </li><li> <p>数组reduce()方法的使用</p> <pre><code class="prism language-js">todos<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"hxx"</span> <span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">2</span> <span class="token punctuation">,</span> <span class="token literal-property property">done</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"hxx1"</span> <span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">21</span> <span class="token punctuation">,</span> <span class="token literal-property property">done</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"hxx2"</span> <span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span> <span class="token punctuation">,</span> <span class="token literal-property property">done</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
<span class="token comment">//计算属性</span>
<span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//定义计算属性方法</span>
	<span class="token function">todoTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//数组使用reduce函数  数组有几个就循环几次</span>
        <span class="token comment">//pre是上一个值的返回值 0:用来声明初始值 也就是pre一开始的值</span>
        <span class="token comment">//current：用来接收数值中的值 例子下是 todo对象</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span>current<span class="token punctuation">,</span><span class="token number">0</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> pre <span class="token operator">+</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>done <span class="token operator">?</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//循环过程为： pre 0 pre 1 pre 2  计算属性结果为2			 </span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<hr> 
<p><strong>scoped样式</strong></p> 
<p><code>scoped</code>样式：</p> 
<ol><li>功能：让样式在局部生效，防止冲突，固定样式作用域</li><li>写法：<code>&lt;style scoped&gt;</code></li></ol> 
<blockquote> 
 <p><code>scoped</code>样式一般不会在<code>App.vue</code>中使用</p> 
</blockquote> 
<h3><a id="36__1007"></a>3.6 组件的自定义事件</h3> 
<p>功能：一种组件间通信的方式，适用于：<strong>子组件 ===&gt; 父组件</strong></p> 
<p>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（事件的回调在A中）</p> 
<p><strong>绑定自定义事件：</strong></p> 
<p>本质上类似函数传递一样的方法 还免去了props的调用</p> 
<ol><li> <p>第一种方式，在父组件中：<code>&lt;Demo @xxx="test"/&gt;</code>或 <code>&lt;Demo v-xxx="test"/&gt;</code></p> <pre><code class="prism language-js"><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span><span class="token operator">...</span>a</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token comment">//如果this.$emit('xxx',数据)中的数据只有一个参数的话会被name接收  有多个的话第一个会被name接收 后面的都会是数组 ...a是ES6写法</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>第二种方式，在父组件中：（与第一种相比灵活性更高,如可使用定时器）</p> </li></ol> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>Demo ref<span class="token operator">=</span><span class="token string">"demo"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">...</span><span class="token operator">...</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>demo<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>test<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>触发自定义事件：</strong></p> 
<p>​ 触发自定义事件：```this.$emit(‘xxx’,数据)``-----&gt;<strong>子组件</strong></p> 
<p><strong>解绑自定义事件：</strong></p> 
<p>​ <code>this.$off('atguigu')``````解绑一个</code></p> 
<p>​ this.<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         o 
        
       
         f 
        
       
         f 
        
       
         ( 
        
       
         ) 
        
       
         ‘ 
        
       
         ‘ 
        
       
         ‘ 
        
       
         解绑所有 
        
       
         t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
         . 
        
       
      
        off()```解绑所有this. 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span><span class="mopen">(</span><span class="mclose">)</span><span class="mord">‘‘‘</span><span class="mord cjk_fallback">解绑所有</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord">.</span></span></span></span></span>off([‘demo1’,‘demo2’])解绑多个```</p> 
<blockquote> 
 <p>注意：</p> 
 <p>​ 组件上也可以绑定原生DOM事件，需要使用<code>native</code>修饰符。如：&lt;Student @click.native=“show”/&gt;</p> 
 <p>​ 若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或<code>$once</code>方法。</p> 
 <p>​ 通过<code>this.$refs.xx.$on('xxx',回调)</code>绑定自定义事件时，回调要么配置在methods中，要么用箭头函数，否则this指向会出问题！</p> 
</blockquote> 
<h3><a id="37__1057"></a>3.7 全局事件总线</h3> 
<ol><li> <p>一种组件间通信的方式，适用于任意组件间通信。</p> <p><strong>组件vc会递归的寻找<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            b 
           
          
            u 
           
          
            t 
           
          
            最终会找到 
           
          
            v 
           
          
            m 
           
          
            身上，因为 
           
          
            v 
           
          
            c 
           
          
            是 
           
          
            v 
           
          
            m 
           
          
            用 
           
          
            e 
           
          
            x 
           
          
            t 
           
          
            e 
           
          
            n 
           
          
            d 
           
          
            ( 
           
           
          
            ) 
           
          
            方法创建的，所以要在 
           
          
            n 
           
          
            e 
           
          
            w 
           
          
            v 
           
          
            u 
           
          
            e 
           
          
            中增加一个属性 
           
          
            ( 
           
          
            p 
           
          
            r 
           
          
            o 
           
          
            t 
           
          
            o 
           
          
            t 
           
          
            y 
           
          
            p 
           
          
            e 
           
          
            ) 
           
          
         
           but最终会找到vm身上，因为vc是vm用extend({})方法创建的，所以要在new vue中增加一个属性(prototype) 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">最终会找到</span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">m</span><span class="mord cjk_fallback">身上，因为</span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">c</span><span class="mord cjk_fallback">是</span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">m</span><span class="mord cjk_fallback">用</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord"></span><span class="mclose">)</span><span class="mord cjk_fallback">方法创建的，所以要在</span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="mord mathnormal">vu</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">中增加一个属性</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mord mathnormal">p</span><span class="mord mathnormal">e</span><span class="mclose">)</span></span></span></span></span>but并指向它本身this</strong></p> </li><li> <p>安装全局事件总线：</p> <pre><code class="prism language-js"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token operator">...</span><span class="token operator">...</span>
	<span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token comment">//安装全局事件总线，$bus就是当前应用的vm </span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre> </li><li> <p>使用事件总线：</p> 
  <ol><li> <p>接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的回调留在A组件自身。</p> <pre><code class="prism language-js"><span class="token function">methods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span><span class="token operator">...</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'事件名'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>demo<span class="token punctuation">)</span><span class="token comment">//$on是用来绑定事件的</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>提供数据：<code>this.$bus.$emit('事件名',数据)</code>$emit用来触发事件</p> </li></ol> </li><li> <p>最好在 <strong>组件中的</strong> beforeDestroy钩子中，用$off去解绑当前组件所用到的事件。</p> </li></ol> 
<h3><a id="38__1095"></a>3.8 消息订阅与发布</h3> 
<ol><li> <p>一种组件间通信的方式，适用于任意组件间通信。</p> </li><li> <p>使用步骤：</p> 
  <ol><li> <p>安装pubsub：<code>npm i pubsub-js</code></p> </li><li> <p>引入: <code>import pubsub from 'pubsub-js'</code></p> </li><li> <p>接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的回调留在A组件自身。</p> <pre><code class="prism language-js"><span class="token function">methods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">}</span>
  <span class="token comment">//msg 为发送地键值对的名称</span>
  <span class="token comment">//data为发送地的值</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span><span class="token operator">...</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>pid <span class="token operator">=</span> pubsub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>demo<span class="token punctuation">)</span> <span class="token comment">//订阅消息</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>提供数据：<code>pubsub.publish('xxx',数据)</code></p> </li><li> <p>最好在beforeDestroy钩子中，用<code>PubSub.unsubscribe(pid)</code>去取消订阅。</p> </li></ol> <p><strong>nextTick</strong></p> 
  <ol><li> <p>语法：<code>this.$nextTick(回调函数)</code></p> </li><li> <p>作用：在下一次 DOM 更新结束后执行其指定的回调。</p> </li><li> <p>什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作时，要在nextTick所指定的回调函数中执行。</p> </li></ol> </li></ol> 
<h3><a id="39__1133"></a>3.9 过渡动画</h3> 
<pre><code class="prism language-vue">&lt;template&gt;
	&lt;div&gt;
        &lt;button @click="isShow = !isShow"&gt;点我切换&lt;/button&gt;
        &lt;transition name="hello" appear&gt; //appear:DOM元素第一次生成就使用样式
            &lt;h1 v-show="isShow"&gt;你好啊&lt;/h1&gt;  //transition在解析到页面的时候会隐藏
    	&lt;/transition&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
	export default{
        name:'Test',
        data(){
            return {
                isSHow:true
            }
        },
    }
&lt;/script&gt;
&lt;style scope&gt;
    h1{
        background-color:orange;
    }
    .hello-enter-active{ //hello要更上面的name一样  如果上面没有声明name 则默认为v
        animation: test1 0.5s linear;
    }
    .hello-leave-active{
        animation: test1 0.5s linear;
    }
    @keyframes test1{
        from{
            transform :translateX(-100%)
        }
        to{
            transform :translateX(0px)
        }
    }
&lt;/style&gt;
</code></pre> 
<h2><a id="Vueajax_1175"></a>四、Vue中的ajax</h2> 
<h3><a id="41_ajax_1177"></a>4.1 解决ajax跨域问题</h3> 
<blockquote> 
 <p>需要下载axios库：<code>npm install axios</code></p> 
</blockquote> 
<p><strong>方法一</strong></p> 
<p>​ 在vue.config.js中添加如下配置：</p> 
<pre><code class="prism language-js"><span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token string">"http://localhost:5000"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>说明：</p> 
<ol><li>优点：配置简单，请求资源时直接发给前端（8080）即可。</li><li>缺点：不能配置多个代理，不能灵活的控制请求是否走代理。</li><li>工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器 （优先匹配前端资源）public下的目录文件</li></ol> 
<hr> 
<p><strong>方法二</strong></p> 
<p>​ 编写vue.config.js配置具体代理规则：</p> 
<pre><code class="prism language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">'/api1'</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token comment">// 匹配所有以 '/api1'开头的请求路径</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:5000'</span><span class="token punctuation">,</span><span class="token comment">// 代理目标的基础路径</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token string-property property">'^/api1'</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">'/api2'</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token comment">// 匹配所有以 '/api2'开头的请求路径</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:5001'</span><span class="token punctuation">,</span><span class="token comment">// 代理目标的基础路径</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token string-property property">'^/api2'</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000
   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080
   changeOrigin默认值为true
*/</span>
</code></pre> 
<p>说明：</p> 
<ol><li>优点：可以配置多个代理，且可以灵活的控制请求是否走代理。</li><li>缺点：配置略微繁琐，请求资源时必须加前缀。</li></ol> 
<h3><a id="42_slot__1234"></a>4.2 slot 插槽</h3> 
<ol><li> <p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于 <strong>父组件 ===&gt; 子组件</strong> 。组件中的组件，可复用代码片段</p> </li><li> <p>分类：默认插槽、具名插槽、作用域插槽</p> </li></ol> 
<p>使用方式：</p> 
<ol><li> <p>默认插槽：在父组件中写上的html代码 放入子组件的slot标签中</p> <pre><code class="prism language-vue">父组件中：
        &lt;Category&gt;
           &lt;div&gt;html结构1&lt;/div&gt;
        &lt;/Category&gt;
子组件中：
        &lt;template&gt;
            &lt;div&gt;
               &lt;!-- 定义插槽 --&gt;
               &lt;slot&gt;插槽默认内容...&lt;/slot&gt;
            &lt;/div&gt;
        &lt;/template&gt;
</code></pre> </li><li> <p>具名插槽：</p> <pre><code class="prism language-vue">父组件中：
        &lt;Category&gt;
            &lt;template slot="center"&gt;
              &lt;div&gt;html结构1&lt;/div&gt;
            &lt;/template&gt;

            &lt;template v-slot:footer&gt; //v-slot:footer只能放在template和component中
               &lt;div&gt;html结构2&lt;/div&gt;
            &lt;/template&gt;
        &lt;/Category&gt;
子组件中：
        &lt;template &gt;
            &lt;div&gt;
               &lt;!-- 定义插槽 --&gt;
               &lt;slot name="center"&gt;插槽默认内容...&lt;/slot&gt;
               &lt;slot name="footer"&gt;插槽默认内容...&lt;/slot&gt;
            &lt;/div&gt;
        &lt;/template&gt;
</code></pre> </li><li> <p>作用域插槽：</p> 
  <ol><li> <p>理解：数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。（games数据在Category组件中，但使用数据所遍历出来的结构由App组件决定）</p> </li><li> <p>具体编码：</p> <pre><code class="prism language-vue">父组件中：
		&lt;Category&gt;
			&lt;template scope="scopeData"&gt;
				&lt;!-- 生成的是ul列表 --&gt;
				&lt;ul&gt;
					&lt;li v-for="g in scopeData.games" :key="g"&gt;{<!-- -->{g}}&lt;/li&gt;
				&lt;/ul&gt;
			&lt;/template&gt;
		&lt;/Category&gt;

		&lt;Category&gt;
			&lt;template slot-scope="scopeData"&gt; &lt;!-- 新写法 --&gt;
				&lt;!-- 生成的是h4标题 --&gt;
				&lt;h4 v-for="g in scopeData.games" :key="g"&gt;{<!-- -->{g}}&lt;/h4&gt;
			&lt;/template&gt;
		&lt;/Category&gt;
子组件中：
        &lt;template&gt;
            &lt;div&gt;
                &lt;slot :games="games"&gt;&lt;/slot&gt;
            &lt;/div&gt;
        &lt;/template&gt;
		
        &lt;script&gt;
            export default {
                name:'Category',
                props:['title'],
                //数据在子组件自身
                data() {
                    return {
                        games:['红色警戒','穿越火线','劲舞团','超级玛丽']
                    }
                },
            }
        &lt;/script&gt;
</code></pre> </li></ol> </li></ol> 
<h2><a id="VueXstore_1331"></a>五、VueX(store)</h2> 
<p><strong>概念</strong>：在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。</p> 
<p>在多个组件需要共享数据时使用</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-vjOjWb4e-1693207452748)(C:\Users\黄佳欣\AppData\Roaming\Typora\typora-user-images\image-20230619195534013.png)]</p> 
<h3><a id="51_VueX_1339"></a>5.1 VueX环境搭建</h3> 
<blockquote> 
 <p>vue3 兼容vuex4版本</p> 
 <p><code>npm i vuex</code>,默认安装的是vuex4版本</p> 
 <p><strong>如果vue2的框架仅支持vue3版本</strong></p> 
 <p><code>npm i vuex@3</code></p> 
</blockquote> 
<ol><li> <p>创建文件：<code>src/store/index.js </code></p> <p><strong>注意：js文件中是先执行文件中的import语句在执行其他语句 简称“先引用后其他</strong></p> </li></ol> 
<pre><code class="prism language-js"><span class="token comment">//引入Vue核心库 </span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">//引入Vuex</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
<span class="token comment">//准备actions对象——响应组件中用户的动作</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token comment">//准备mutations对象——修改state中的数据</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token comment">//准备state对象——保存具体的数据</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token comment">//创建并暴露store</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	actions<span class="token punctuation">,</span>
	mutations<span class="token punctuation">,</span>
	state
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="2"><li>在<code>main.js</code>中创建vm时传入<code>store</code>配置项</li></ol> 
<pre><code class="prism language-js"><span class="token operator">...</span><span class="token operator">...</span>

<span class="token comment">//引入store</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>
<span class="token operator">...</span><span class="token operator">...</span>

<span class="token comment">//创建vm</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
	<span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
	store <span class="token comment">//要上面使用vuex才能使用store</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="52_VueX_1392"></a>5.2 VueX的基本使用</h3> 
<ol><li>初始化数据、配置<code>actions</code>、配置<code>mutations</code>，操作文件<code>store.js</code></li></ol> 
<pre><code class="prism language-js"><span class="token comment">//引入Vue核心库</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">//引入Vuex</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token comment">//引用Vuex</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
<span class="token comment">//服务员</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//响应组件中加的动作</span>
	<span class="token function">jia</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token comment">// console.log('actions中的jia被调用了',miniStore,value)</span>
		context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'JIA'</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">//后厨</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//执行加</span>
	<span class="token constant">JIA</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token comment">// console.log('mutations中的JIA被调用了',state,value)</span>
		state<span class="token punctuation">.</span>sum <span class="token operator">+=</span> value
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//传菜</span>
<span class="token comment">//初始化数据</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
   <span class="token literal-property property">sum</span><span class="token operator">:</span><span class="token number">0</span>
<span class="token punctuation">}</span>
<span class="token comment">//暴露餐厅</span>
<span class="token comment">//创建并导出/暴露store</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	actions<span class="token punctuation">,</span>
	mutations<span class="token punctuation">,</span>
	state<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="2"><li> <p>组件中读取vuex中的数据：<code>$store.state.sum</code></p> </li><li> <p>组件中修改vuex中的数据：<code>$store.dispatch('action中的方法名',数据)dispatch调用action中的方法</code>或 <code>$store.commit('mutations中的方法名',数据)commit直接调用mutations中方法</code></p> 
  <blockquote> 
   <p>备注：若没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写<code>dispatch</code>，直接编写<code>commit</code></p> 
  </blockquote> </li></ol> 
<h3><a id="53_getters_1439"></a>5.3 getters的使用</h3> 
<ol><li> <p>概念：当state中的数据需要经过加工后再使用时，可以使用getters加工。类似于vue中的计算属性</p> </li><li> <p>在<code>store.js</code>中追加<code>getters</code>配置</p> <pre><code class="prism language-js"><span class="token operator">...</span><span class="token operator">...</span>

<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">bigSum</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> state<span class="token punctuation">.</span>sum <span class="token operator">*</span> <span class="token number">10</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//创建并暴露store</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token operator">...</span><span class="token operator">...</span>
	getters
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>组件中读取数据：<code>$store.getters.bigSum</code></p> </li></ol> 
<h3><a id="54_map_1463"></a>5.4 四个map方法的使用</h3> 
<p>​ 以下 本质上是将调用store中的state.getter.action等的函数 简写成一行</p> 
<ol><li> <p><strong>mapState方法：</strong>用于帮助我们映射<code>state</code>中的数据为<strong>计算属性</strong></p> <pre><code class="prism language-js"><span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//借助mapState生成计算属性：sum、school、subject（对象写法）</span>
     <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">sum</span><span class="token operator">:</span><span class="token string">'sum'</span><span class="token punctuation">,</span><span class="token literal-property property">school</span><span class="token operator">:</span><span class="token string">'school'</span><span class="token punctuation">,</span><span class="token literal-property property">subject</span><span class="token operator">:</span><span class="token string">'subject'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token comment">//mapState返回的是一个对象类型的函数 如：{sum:function(){},school:function(){}....}</span>
     <span class="token comment">//...是ES6的写法 下同</span>
    <span class="token comment">//借助mapState生成计算属性：sum、school、subject（数组写法）</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'sum'</span><span class="token punctuation">,</span><span class="token string">'school'</span><span class="token punctuation">,</span><span class="token string">'subject'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> </li><li> <p><strong>mapGetters方法：</strong>用于帮助我们映射<code>getters</code>中的数据为计算属性</p> <pre><code class="prism language-js"><span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//借助mapGetters生成计算属性：bigSum（对象写法）</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">bigSum</span><span class="token operator">:</span><span class="token string">'bigSum'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment">//借助mapGetters生成计算属性：bigSum（数组写法）</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bigSum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> </li><li> <p><strong>mapActions方法：</strong>用于帮助我们生成与<code>actions</code>对话的方法，即：包含<code>$store.dispatch(xxx)</code>的函数</p> <pre><code class="prism language-js"><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//靠mapActions生成：incrementOdd、incrementWait（对象形式）</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">incrementOdd</span><span class="token operator">:</span><span class="token string">'jiaOdd'</span><span class="token punctuation">,</span><span class="token literal-property property">incrementWait</span><span class="token operator">:</span><span class="token string">'jiaWait'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//靠mapActions生成：incrementOdd、incrementWait（数组形式）</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jiaOdd'</span><span class="token punctuation">,</span><span class="token string">'jiaWait'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p><strong>mapMutations方法：</strong>用于帮助我们生成与<code>mutations</code>对话的方法，即：包含<code>$store.commit(xxx)</code>的函数</p> <pre><code class="prism language-js"><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//靠mapActions生成：increment、decrement（对象形式） 如果有参数的话 需要在调用increment函数时 将参数写在括号里 如：increment(5)</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">increment</span><span class="token operator">:</span><span class="token string">'JIA'</span><span class="token punctuation">,</span><span class="token literal-property property">decrement</span><span class="token operator">:</span><span class="token string">'JIAN'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    
    <span class="token comment">//靠mapMutations生成：JIA、JIAN（对象形式）</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'JIA'</span><span class="token punctuation">,</span><span class="token string">'JIAN'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<blockquote> 
 <p>备注：mapActions与mapMutations使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象。</p> 
</blockquote> 
<h3><a id="55_1518"></a>5.5.模块化+命名空间</h3> 
<ol><li> <p>目的：让代码更好维护，让多种数据分类更加明确。</p> </li><li> <p>修改<code>store.js</code></p> <pre><code class="prism language-javascript"><span class="token keyword">const</span> countAbout <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">namespaced</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//开启命名空间</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">bigSum</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       <span class="token keyword">return</span> state<span class="token punctuation">.</span>sum <span class="token operator">*</span> <span class="token number">10</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> personAbout <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">namespaced</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//开启命名空间</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    countAbout<span class="token punctuation">,</span>
    personAbout
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>开启命名空间后，组件中读取state数据：</p> <pre><code class="prism language-js"><span class="token comment">//方式一：自己直接读取</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>personAbout<span class="token punctuation">.</span>list
<span class="token comment">//方式二：借助mapState读取：</span>
<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">'countAbout'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'sum'</span><span class="token punctuation">,</span><span class="token string">'school'</span><span class="token punctuation">,</span><span class="token string">'subject'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre> </li><li> <p>开启命名空间后，组件中读取getters数据：</p> <pre><code class="prism language-js"><span class="token comment">//方式一：自己直接读取</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">[</span><span class="token string">'personAbout/firstPersonName'</span><span class="token punctuation">]</span>
<span class="token comment">//方式二：借助mapGetters读取：</span>
<span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token string">'countAbout'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'bigSum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>开启命名空间后，组件中调用dispatch</p> <pre><code class="prism language-js"><span class="token comment">//方式一：自己直接dispatch</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'personAbout/addPersonWang'</span><span class="token punctuation">,</span>person<span class="token punctuation">)</span>
<span class="token comment">//方式二：借助mapActions：</span>
<span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'countAbout'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">incrementOdd</span><span class="token operator">:</span><span class="token string">'jiaOdd'</span><span class="token punctuation">,</span><span class="token literal-property property">incrementWait</span><span class="token operator">:</span><span class="token string">'jiaWait'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>开启命名空间后，组件中调用commit</p> <pre><code class="prism language-js"><span class="token comment">//方式一：自己直接commit</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'personAbout/ADD_PERSON'</span><span class="token punctuation">,</span>person<span class="token punctuation">)</span>
<span class="token comment">//方式二：借助mapMutations：</span>
<span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token string">'countAbout'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">increment</span><span class="token operator">:</span><span class="token string">'JIA'</span><span class="token punctuation">,</span><span class="token literal-property property">decrement</span><span class="token operator">:</span><span class="token string">'JIAN'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre> </li></ol> 
<h2><a id="_VueRouter_1590"></a>六、 Vue-Router</h2> 
<p><strong>路由</strong></p> 
<ol><li>理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。</li><li>前端路由：key是路径，value是组件。</li></ol> 
<h3><a id="61__1597"></a>6.1 基本使用</h3> 
<ol><li>安装vue-router，命令：<code>npm i vue-router</code></li></ol> 
<blockquote> 
 <p>现在vue-router默认版本为4，而且vue-router4仅支持vue3</p> 
 <p><code>npm i vue-router@3</code></p> 
</blockquote> 
<ol><li>应用插件：<code>Vue.use(VueRouter)</code>并修改<code>main.js</code></li></ol> 
<pre><code class="prism language-js"><span class="token comment">//引入VueRouter</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">"vue-router"</span><span class="token punctuation">;</span>
<span class="token comment">//引入路由器</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">router</span><span class="token operator">:</span>router
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="2"><li>编写router配置项:</li></ol> 
<pre><code class="prism language-js"><span class="token comment">//引入VueRouter</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token comment">//引入Luyou 组件</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'../components/About'</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'../components/Home'</span>

<span class="token comment">//创建router实例对象，去管理一组一组的路由规则</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>About
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>Home
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//暴露router</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> 
<ol><li> <p>实现切换（active-class可配置高亮样式）</p> <pre><code class="prism language-vue">&lt;router-link active-class="active" to="/about"&gt;About&lt;/router-link&gt;
</code></pre> </li><li> <p>指定展示位置</p> <pre><code class="prism language-vue">&lt;router-view&gt;&lt;/router-view&gt;
</code></pre> </li></ol> 
<h3><a id="62__1658"></a>6.2 几个注意点</h3> 
<ol><li>路由组件通常存放在<code>pages</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</li><li>通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。</li><li>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息。</li><li>整个应用只有一个router，可以通过组件的<code>$router</code>属性获取到。</li></ol> 
<h3><a id="63__1665"></a>6.3 多级路由（子路由）</h3> 
<ol><li>配置路由规则，使用children配置项：</li></ol> 
<pre><code class="prism language-js"><span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">component</span><span class="token operator">:</span>About<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">,</span>
		<span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span> <span class="token comment">//通过children配置子级路由</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news'</span><span class="token punctuation">,</span> <span class="token comment">//此处一定不要写：/news 子路由不用加‘/’ 会自动加</span>
				<span class="token literal-property property">component</span><span class="token operator">:</span>News
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'message'</span><span class="token punctuation">,</span><span class="token comment">//此处一定不要写：/message</span>
				<span class="token literal-property property">component</span><span class="token operator">:</span>Message
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> 
<ol start="2"><li>跳转（要写完整路径）：</li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">"/home/news"</span><span class="token operator">&gt;</span>News<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="64_query_1698"></a>6.4 路由的query参数</h3> 
<ol><li> <p>传递参数</p> <pre><code class="prism language-vue">&lt;!-- 跳转并携带query参数，to的字符串写法 --&gt;
&lt;router-link :to="/home/message/detail?id=666&amp;title=你好"&gt;跳转&lt;/router-link&gt;
				
&lt;!-- 跳转并携带query参数，to的对象写法 --&gt;
&lt;router-link 
	:to="{
		path:'/home/message/detail',
		query:{
		   id:666,
            title:'你好'
		}
	}"
&gt;跳转&lt;/router-link&gt;
</code></pre> </li><li> <p>接收参数：</p> <pre><code class="prism language-js">$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id
$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>title
</code></pre> </li></ol> 
<h3><a id="65__1725"></a>6.5 命名路由</h3> 
<ol><li> <p>作用：可以简化路由的跳转。</p> </li><li> <p>如何使用</p> 
  <ol><li> <p>给路由命名：</p> <pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/demo'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">component</span><span class="token operator">:</span>Demo<span class="token punctuation">,</span>
	<span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'test'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>Test<span class="token punctuation">,</span>
			<span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
				<span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'hello'</span> <span class="token comment">//给路由命名</span>
					<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'welcome'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">component</span><span class="token operator">:</span>Hello<span class="token punctuation">,</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>简化跳转：</p> <pre><code class="prism language-vue">&lt;!--简化前，需要写完整的路径 --&gt;
&lt;router-link to="/demo/test/welcome"&gt;跳转&lt;/router-link&gt;

&lt;!--简化后，直接通过名字跳转 --&gt;
&lt;router-link :to="{name:'hello'}"&gt;跳转&lt;/router-link&gt;

&lt;!--简化写法配合传递参数 --&gt;
&lt;router-link 
	:to="{
		name:'hello',
		query:{
		   id:666,
           title:'你好'
		}
	}"
&gt;跳转&lt;/router-link&gt;
</code></pre> </li></ol> </li></ol> 
<h3><a id="66_params_1774"></a>6.6 路由的params参数</h3> 
<ol><li> <p>配置路由，声明接收params参数</p> <pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">,</span>
	<span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>News
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>Message<span class="token punctuation">,</span>
			<span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'detail/:id/:title'</span><span class="token punctuation">,</span> <span class="token comment">//使用占位符声明接收params参数</span>
					<span class="token literal-property property">component</span><span class="token operator">:</span>Detail
				<span class="token punctuation">}</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>传递参数</p> <pre><code class="prism language-vue">&lt;!-- 跳转并携带params参数，to的字符串写法 --&gt;
&lt;router-link :to="/home/message/detail/666/你好"&gt;跳转&lt;/router-link&gt;
				
&lt;!-- 跳转并携带params参数，to的对象写法 --&gt;
&lt;router-link 
	:to="{
		name:'xiangqing',
		params:{
		   id:666,
            title:'你好'
		}
	}"
&gt;跳转&lt;/router-link&gt;
</code></pre> 
  <blockquote> 
   <p>特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！</p> 
  </blockquote> </li><li> <p>接收参数：</p> <pre><code class="prism language-js">$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id
$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>title
</code></pre> </li></ol> 
<h3><a id="67_props_1828"></a>6.7 路由的props配置</h3> 
<p>​ 作用：让路由组件更方便的收到参数</p> 
<pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'detail/:id'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">component</span><span class="token operator">:</span>Detail<span class="token punctuation">,</span>

	<span class="token comment">//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件 用的少 -&gt;死数据</span>
	<span class="token comment">// props:{a:900}</span>

	<span class="token comment">//第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件</span>
	<span class="token comment">// props:true ---&gt;只适用于params</span>
	
	<span class="token comment">//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件</span>
	<span class="token function">props</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">id</span><span class="token operator">:</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
			<span class="token literal-property property">title</span><span class="token operator">:</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>title
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="68_routerlinkreplace_1854"></a>6.8 <code>&lt;router-link&gt;</code>的replace属性</h3> 
<ol><li>作用：控制路由跳转时操作浏览器历史记录的模式</li><li>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>，<code>push</code>是追加历史记录，<code>replace</code>是替换当前记录。路由跳转时候默认为<code>push</code></li><li>如何开启<code>replace</code>模式：<code>&lt;router-link replace .......&gt;News&lt;/router-link&gt;</code></li></ol> 
<h3><a id="69__1860"></a>6.9 编程式路由导航</h3> 
<ol><li> <p>作用：不借助<code>&lt;router-link&gt; </code>实现路由跳转，让路由跳转更加灵活</p> </li><li> <p>具体编码：</p> <pre><code class="prism language-js"><span class="token comment">//$router的两个API</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">id</span><span class="token operator">:</span>xxx<span class="token punctuation">,</span>
			<span class="token literal-property property">title</span><span class="token operator">:</span>xxx
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">id</span><span class="token operator">:</span>xxx<span class="token punctuation">,</span>
			<span class="token literal-property property">title</span><span class="token operator">:</span>xxx
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//前进</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//后退</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//可前进也可后退  +3 往前走3步  -3 往后走3步 0则为刷新</span>
</code></pre> </li></ol> 
<h3><a id="610__1888"></a>6.10 缓存路由组件</h3> 
<ol><li> <p>作用：让不展示的路由组件保持挂载，不被销毁。</p> </li><li> <p>具体编码：</p> <pre><code class="prism language-vue">&lt;!--  缓存一个路由组件 --&gt;
&lt;keep-alive include="News"&gt;  //News为组件的名字
    &lt;router-view&gt;&lt;/router-view&gt;
&lt;/keep-alive&gt;


&lt;!--  缓存多个路由组件 --&gt;
&lt;keep-alive :include="['News','hxx']"&gt;  //News,hxx为组件的名字
    &lt;router-view&gt;&lt;/router-view&gt;
&lt;/keep-alive&gt;
</code></pre> </li></ol> 
<h3><a id="611__1907"></a>6.11 两个新的生命周期钩子</h3> 
<ol><li>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。</li><li>具体名字： 
  <ol><li><code>activated</code>路由组件被激活时触发。</li><li><code>deactivated</code>路由组件失活时触发。</li></ol> </li><li>注意：上面两个生命周期钩子需要配合使用</li></ol> 
<h3><a id="612__1915"></a>6.12 路由守卫</h3> 
<ol><li> <p>作用：对路由进行权限控制</p> </li><li> <p>分类：全局守卫、独享守卫、组件内守卫</p> </li><li> <p>全局守卫:</p> <pre><code class="prism language-js"><span class="token comment">//配置是否要在路由守卫中进行权限验证</span>
<span class="token comment">//引入VueRouter</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token comment">//引入路由 组件</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'../components/About'</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'../components/Home'</span>

<span class="token comment">//创建router实例对象，去管理一组一组的路由规则</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>About<span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">isAuth</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token comment">//isAute表示是否要进行权限验证 true是需要 false不需要 配合下面路由前置守卫使用 不写默认为undefined 则为false</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">,</span>
            <span class="token literal-property property">meta</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">isAuth</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">"hxx"</span><span class="token punctuation">}</span> <span class="token comment">//meta是用来存储需要的自定义数据的</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">//全局前置守卫：初始化时执行、每次路由切换前执行</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeEach'</span><span class="token punctuation">,</span>to<span class="token punctuation">,</span>from<span class="token punctuation">)</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isAuth<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//判断当前路由是否需要进行权限控制</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'school'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'atguigu'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//权限控制的具体规则</span>
			<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//放行</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'暂无权限查看'</span><span class="token punctuation">)</span>
			<span class="token comment">// next({name:'guanyu'})</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//放行</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//全局后置守卫：初始化时执行、每次路由切换后执行</span>
<span class="token comment">//后置路由守卫是没有next的</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'afterEach'</span><span class="token punctuation">,</span>to<span class="token punctuation">,</span>from<span class="token punctuation">)</span>
    <span class="token comment">//缩写 document.title = to.meta.title || "vue_test"</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> 
		document<span class="token punctuation">.</span>title <span class="token operator">=</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title <span class="token comment">//修改网页的title</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
		document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'vue_test'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> </li><li> <p>独享守卫: 只有前置守卫没有后置守卫</p> <pre><code class="prism language-js">
<span class="token comment">//引入VueRouter</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token comment">//引入Luyou 组件</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'../components/About'</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'../components/Home'</span>

<span class="token comment">//创建router实例对象，去管理一组一组的路由规则</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>About<span class="token punctuation">,</span>
            <span class="token comment">//独享路由前置守卫</span>
            <span class="token function">beforeEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeEnter'</span><span class="token punctuation">,</span>to<span class="token punctuation">,</span>from<span class="token punctuation">)</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isAuth<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//判断当前路由是否需要进行权限控制</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'school'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'atguigu'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'暂无权限查看'</span><span class="token punctuation">)</span>
                        <span class="token comment">// next({name:'guanyu'})</span>
					<span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>Home
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//暴露router</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router



</code></pre> </li><li> <p>组件内守卫： 在组件中写的</p> <pre><code class="prism language-js"><span class="token comment">//进入守卫：通过路由规则，进入该组件时被调用 组件使用不会被调用</span>
<span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">//离开守卫：通过路由规则，离开该组件时被调用</span>
<span class="token function">beforeRouteLeave</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<h3><a id="613__2034"></a>6.13 路由器的两种工作模式</h3> 
<p>​ 路径上的‘#’ 被称为hash</p> 
<p>​ 路由中默认使用hash 要改为history 需要做一下修改</p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">'history'</span>
	<span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<ol><li> <p>对于一个url来说，什么是hash值？—— #及其后面的内容就是hash值。</p> </li><li> <p>hash值不会包含在 HTTP 请求中，即：hash值不会带给服务器。</p> </li><li> <p>hash模式：</p> 
  <ol><li>地址中永远带着#号，不美观 。</li><li>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法。</li><li>兼容性较好。</li></ol> </li><li> <p>history模式：</p> 
  <ol><li>地址干净，美观 。</li><li>兼容性和hash模式相比略差。</li><li>应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题（nginx)。</li></ol> </li></ol> 
<h3><a id="_2064"></a>总结</h3> 
<p><strong>route 是用来获取路由信息的，router是用来操作路由的</strong></p> 
<h2><a id="VueUI_2068"></a>七、VueUI组件库</h2> 
<p><strong>移动端常用 UI 组件库</strong></p> 
<ol><li>Vant https://youzan.github.io/vant</li><li>Cube UI https://didi.github.io/cube-ui</li><li>Mint UI http://mint-ui.github.io</li></ol> 
<p><strong>PC 端常用 UI 组件库</strong></p> 
<ol><li>Element UI https://element.eleme.cn</li><li>IView UI https://www.iviewui.com</li></ol> 
<p><strong>js处理库</strong></p> 
<ol><li>BootCDN</li></ol> 
<h2><a id="Vue3_2085"></a>八、Vue3</h2> 
<h3><a id="1Vue3_2087"></a>1.Vue3简介</h3> 
<ul><li>2020年9月18日，Vue.js发布发布3.0版本</li></ul> 
<h3><a id="2Vue3_2093"></a>2.Vue3带来了什么</h3> 
<h4><a id="1_2095"></a>1.性能的提升</h4> 
<ul><li>打包大小减少41%</li><li>初次渲染快55%，更新渲染快133%</li><li>内存减少54%等</li></ul> 
<h4><a id="2__2103"></a>2. 源码的升级</h4> 
<ul><li>使用<strong>Proxy</strong>代替<strong>defineProperty</strong>实现响应式</li><li>重写虚拟DOM的实现和Tree-Shaking(树摇—&gt;术语表：剔除一些没有的代码 )</li></ul> 
<h4><a id="3TypeScript_2110"></a>3.拥抱TypeScript</h4> 
<ul><li>Vue3可以更好的支持TypeScript</li></ul> 
<h4><a id="4__2116"></a>4. 新的特性</h4> 
<ol><li>Composition API（组合API） 
  <ul><li>setup配置</li><li>ref与reactive</li><li>watch与watchEffect</li><li>provide与inject</li><li>等</li></ul> </li><li>新的内置组件 
  <ul><li>Fargment</li><li>Teleport</li><li>Supense</li></ul> </li><li>其他改变 
  <ul><li>新的生命周期钩子</li><li>data选项应始终被声明为一个函数</li><li>移出keyCode支持作为v-on的修饰符</li><li>等</li></ul> </li></ol> 
<h3><a id="Vue30_2136"></a>一、创建一个Vue3.0工程</h3> 
<h4><a id="1_vuecil_2138"></a>1. 使用vue-cil创建</h4> 
<pre><code class="prism language-js"><span class="token comment">//查看vue版本</span>
vue <span class="token operator">-</span><span class="token constant">V</span>
<span class="token comment">//创建一个vue-cil项目</span>
vue create vue3_test
<span class="token comment">//启动项目</span>
npm run serve
</code></pre> 
<h4><a id="2_vite_2149"></a>2. 使用vite创建</h4> 
<p>官方地址：<a href="https://vitejs.cn/" rel="nofollow">Home | Vite中文网 (vitejs.cn)</a></p> 
<ul><li> <p>什么是vite ——新一代前端构建工具</p> </li><li> <p>优势：</p> 
  <ul><li>开发环境中，无需打包操作，可快速的冷启动</li><li>轻量快速的热重载（HMR）</li><li>真正的按需编译，不在等待整个应用编译完成</li></ul> </li><li> <p>传统构建与vite构建对比图</p> </li><li> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-s0yUeaVH-1693207452749)(C:\Users\黄佳欣\AppData\Roaming\Typora\typora-user-images\image-20230621095428782.png)]</p> <p>​ [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-rasSXxwZ-1693207452758)(C:\Users\黄佳欣\AppData\Roaming\Typora\typora-user-images\image-20230621095458518.png)]</p> </li></ul> 
<pre><code class="prism language-bash"><span class="token comment">##创建工程</span>
<span class="token function">npm</span> init vite-app 工程名
<span class="token comment">##进入工程目录</span>
<span class="token builtin class-name">cd</span> 工程名
<span class="token comment">##安装依赖</span>
<span class="token function">npm</span> <span class="token function">install</span> 
<span class="token comment">## 运行</span>
<span class="token function">npm</span> run dev
</code></pre> 
<h3><a id="Composition_APIAPI_2178"></a>二、常见Composition API（组合式API）</h3> 
<h4><a id="1_setup_2180"></a>1. setup</h4> 
<ol><li>理解：vue3中的一个新的配置项 值是一个函数</li><li>setup是所有Composition API（组合API）“表演的舞台”</li><li>组件中所用的：数据、方法等等，均要配置在setup中</li><li>setup函数的两种返回值： 
  <ol><li>若返回一个对象，则对象中的属性、方法，在模板中均可以直接使用（重点关注）</li><li>若返回一个渲染函数，则可以自定义渲染内容（了解）</li></ol> </li><li>注意点： 
  <ol><li>尽量不要与vue2.x配置混用 
    <ol><li>Vue2.x配（data、method、computed…）中<strong>可以访问到</strong>setup中的属性、方法。</li><li>但在setup中<strong>不能访问</strong>到Vue2.x配置（data、method、computed…）</li><li>如果有重名，setup优先</li></ol> </li><li>setup不能是一个aynsc函数，因为返回值不在是return的对象，而是promise，模板看不到return对象的属性。（后期可以返回一个Promise实例，但需要Suspose和异步组件的配合）</li><li>setup 优先于beforeCreate 所以this 不是VC 而是setup本身</li></ol> </li></ol> 
<h4><a id="2_ref_2198"></a>2. ref函数</h4> 
<ul><li> <p>作用： 定义一个响应式的数据</p> </li><li> <p>语法：</p> <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> xxx  <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>initValue<span class="token punctuation">)</span>
</code></pre> 
  <ul><li>创建一个包含响应式数据的<strong>引用对象（reference对象）</strong></li><li>JS中操作数据 ：xxx.value</li><li>模板中读取数据： 不需要value 直接 <code>&lt;div&gt;{<!-- -->{xxx}}&lt;/div&gt;</code></li></ul> </li><li> <p>备注：</p> 
  <ul><li>接收的数据可以是 ： 基本类型、也可以是对象类型</li><li>基本类型的数据： 响应式依然是靠着<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>完成的</li><li>对象类型的数据： 内部"<code>求助</code>"了vue3.0中的一个新函数 ----<code>reactive</code>函数 
    <ul><li>对象类型的数据<code>ref</code>将使用<code>Proxy</code>来实现的，vue3用<code>reactive</code>封装了<strong>Proxy</strong></li></ul> </li></ul> </li></ul> 
<h4><a id="3_reactive_2222"></a>3. reactive函数</h4> 
<ul><li> <p>作用： 定义一个对象类型的响应式数据（基本类型别用它，用<code>ref</code>函数）</p> </li><li> <p>语法：<code>const 代理对象 = reactive(源对象)</code>接收一个对象（或数组），返回一个代理对象（Proxy的实例对象，<strong>简称proxy对象</strong>）</p> </li><li> <p>reactive定义的响应式数据是“深层次的"</p> </li><li> <p>内部基于ES6的Proxy实现，通过代理对象操作源对象内部数据进行操作。</p> </li></ul> 
<h4><a id="4Vue30_2234"></a>4.Vue3.0中的响应式原理</h4> 
<h5><a id="vue2x_2236"></a>vue2.x的响应式</h5> 
<ul><li> <p>实现原理：</p> 
  <ul><li> <p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取、修改进行<strong>拦截</strong>（数据劫持）</p> </li><li> <p>数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了）</p> <pre><code class="prism language-js">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li></ul> </li><li> <p>存在问题：</p> 
  <ul><li>直接新增属性、删除属性，页面不会更新。</li><li>直接通过下标修改数组，界面不会自动更新。</li></ul> </li><li> <p>Vue2.x的解决方法：</p> <pre><code class="prism language-js"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">person</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"hxx"</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
	<span class="token function">addSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">,</span><span class="token string">"sex"</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">)</span>
        <span class="token comment">//vue.set(this.person,"sex",'女')</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">dataleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>person<span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">)</span>							     <span class="token comment">//vue.$delete(this.person,"name")	</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul> 
<h5><a id="vue3x_2275"></a>vue3.x的响应式</h5> 
<ul><li> <p>实现原理：</p> 
  <ul><li> <p>通过Proxy（代理）：拦截对象中任意属性的变化，包括：属性值的读写、属性的添加、属性的删除等【Proxy：是ES6新特性】</p> </li><li> <p>通过Reflect（反射）：对源对象的属性进行操作</p> </li><li> <p>MDN文件描述的Proxy与Reflect</p> 
    <ul><li> <p>Proxy：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_ Objects/Proxy</p> </li><li> <p>Reflect:https://developer.moilla.org/zh-CN/docs/Web/JavaScript/Reference/Global Objects/Reflect</p> <pre><code class="prism language-js">	<span class="token comment">//源数据</span>
    <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">"张三"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span> <span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//模拟真正的Vue3.x实现响应式</span>
    <span class="token comment">// vue3.x使用了window自带的Proxy对象来实现响应式 并配合Reflect使用</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// target 为源数据 即person</span>
        <span class="token comment">//propName 为要获取的属性</span>
        <span class="token comment">//value 只有修改才有 获取要修改什么值</span>
        <span class="token comment">//得到拦截</span>
        <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>propName<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">有人读取了p身上的</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>propName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">属性</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span> target<span class="token punctuation">,</span>propName<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//修改拦截</span>
        <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>propName<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">有人修改了p身上的</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>propName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">属性</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span> target<span class="token punctuation">,</span>propName<span class="token punctuation">,</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//删除拦截</span>
        <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>propName</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">有人删除了p身上的</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>propName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">属性</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>propName<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li></ul> </li></ul> </li></ul> 
<h4><a id="5reactiveref_2321"></a>5.reactive对比ref</h4> 
<ul><li> <p>从定义数据角度对比：</p> 
  <ul><li>ref用来定义：<strong>基本数据类型。</strong></li><li>reactive用来定义：<strong>对象或者数组类型数据</strong>。</li><li>备注： ref也可以用来定义 <strong>对象（或数组）类型数据</strong>，他内部会通过<code>reactive</code>转为<strong>代理对象</strong>。</li></ul> </li><li> <p>从原理角度对比：</p> 
  <ul><li>ref通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）.</li><li>reactive通过使用 <strong>Proxy</strong>来实现响应式（数据劫持），并通过 <strong>Reflect</strong>操作 <strong>源对象</strong>内部的数据</li></ul> </li><li> <p>从使用角度对比：</p> 
  <ul><li>ref定义的数据：操作数据需要<code>.value</code>，读取数据时直接读取 <strong>不需要</strong><code>.value</code>。</li><li>reactive定义的数据： 操作数据域读取数据： <strong>均不需要</strong><code>.value</code></li></ul> </li><li> <p>推荐写法：</p> <pre><code class="prism language-js"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token function">reactve</span><span class="token punctuation">(</span>
		<span class="token literal-property property">person</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">student</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
        data
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul> 
<h4><a id="6_setup_2355"></a>6. setup的两个注意点</h4> 
<ul><li>setup执行的时机 
  <ul><li>在beforeCreate之前执行一次，this是<code>undefined</code>。</li></ul> </li><li>setup的参数 
  <ul><li>props：值为一个对象，包含：组件外部传递过来，且组件内部声明接收了的属性</li><li>context：上下文对象 
    <ul><li>attrs：值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性，相当于<code>this.$attrs</code>。</li><li>slots：收到的插槽内容，相当于<code>this.$slots</code>。</li><li>emit：分发自定义事件的函数，相当于<code>this.$emit</code></li></ul> </li></ul> </li></ul> 
<h4><a id="7__2368"></a>7. 计算属性与监视</h4> 
<h5><a id="1_computed_2370"></a>1. computed函数</h5> 
<ul><li> <p>与vue2.x中computed配置功能一致</p> </li><li> <p>写法</p> <pre><code class="prism language-vue">&lt;script&gt;
 setup(props,context){
    //数据
    let person = reactive({
      firstName : "张",
      lastName :"三",
    })
    //计算属性 --- 简写形式
    //给person追加一个属性fullName vue3 直接追加也可以进行数据劫持 因为底层使proxy
    // person.fullName = computed(()=&gt;{
    //   return person.firstName+"-"+person.lastName
    // })
    //计算属性 --- 完整写法
    person.fullName = computed({
      get(){
        return person.firstName+"-"+person.lastName
      },
      set(value){
        const arr= value.splice('-')
        person.fullName = arr[0]
        person.lastNameName = arr[1]
      }
    })
    return {
      person
    }
  }
&lt;/script&gt;
</code></pre> </li></ul> 
<h5><a id="2_watch_2409"></a>2. watch函数</h5> 
<ul><li> <p>与vue2.x基本一致</p> </li><li> <p>注意：</p> 
  <ul><li>监视reactive定义的响应式数据时，deep会默认强制开启，deep配置无效，oldValue是无法获取的</li><li>监视reactive定义的响应式数据的某个属性时，deep配置有效</li></ul> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;h1&gt;当前求和为{<!-- -->{sum}}&lt;/h1&gt;
  &lt;button @click="sum++ "&gt;点我加一&lt;/button&gt;
  &lt;hr/&gt;
  &lt;h1&gt;{<!-- -->{msg}}&lt;/h1&gt;
  &lt;button @click="msg+='!' "&gt;点我加一&lt;/button&gt;
  &lt;hr/&gt;
  &lt;h2&gt;姓名:{<!-- -->{person.name}}&lt;/h2&gt;
  &lt;h2&gt;年龄:{<!-- -->{person.age}}&lt;/h2&gt;
  &lt;h2&gt;薪水:{<!-- -->{person.job.j1.salary}}&lt;/h2&gt;
  &lt;button @click="person.name+='~'"&gt;修改姓名&lt;/button&gt;
  &lt;button @click="person.age++"&gt;增加年龄&lt;/button&gt;
  &lt;button @click="person.job.j1.salary++"&gt;增加薪水&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
import {reactive, computed, ref,watch} from 'vue'
export default {
  name: "demo",
  setup(props,context){
    //数据
    let sum = ref(0);
    let msg = ref("你好啊")
    //情况一：监听ref定义的数据
    // watch(sum,(newValue,oldValue)=&gt;{
    //   console.log("sum的值变了")
    // })
    //情况二：监听多个ref定义的响应式数据
    // watch([sum,msg],(newValue,oldValue)=&gt;{
    //   console.log("sum的值变了",newValue,oldValue)
    // },{immediate:true})
    let person = reactive({
      name:"hxx",
      age : 89,
      job :{
        j1:{
          salary:20
        }
      }
    })
    //情况三 监视reactive所定义的一个响应式对象
    // 1.注意此处无法使用oldValue
    // 2.注意：强制开启了深度监视（无法关掉）

    // watch(person,(newValue,oldValue)=&gt;{
    //   console.log(newValue,oldValue)
    // },{deep:true})

    //情况四：监视reactive中对象的某个属性
    watch(()=&gt;person.name,(newValue,oldValue)=&gt;{
      console.log("person中的name改变了",newValue,oldValue)
    })

    //情况五：监视reactive中对象的某些属性
    // watch([()=&gt;person.name,()=&gt;person.age],(newValue,oldValue)=&gt;{
    //   console.log("person中的name,age改变了",newValue,oldValue)
    // })
    //特殊情况
    // watch(()=&gt;person.job,(newValue,oldValue)=&gt;{
    //   console.log("person中的job改变了",newValue,oldValue)
    // },{deep:true}) //使用监视reactive定义的某个对象中属性时 如果这个属性是一个对象的话要开启深度监视
    return {
      sum,msg,person
    }
  }
}
&lt;/script&gt;
</code></pre> </li><li> <p>ref中<code>.value</code>的问题</p> <pre><code class="prism language-js">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>context</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//数据</span>
    <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">"你好啊"</span><span class="token punctuation">)</span>

    <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"hxx"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span> <span class="token operator">:</span> <span class="token number">89</span><span class="token punctuation">,</span>
      <span class="token literal-property property">job</span> <span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">j1</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">salary</span><span class="token operator">:</span><span class="token number">20</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"sum改变了"</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
    <span class="token comment">//将person的value暴露出来</span>
    <span class="token comment">// watch(person.value,(newValue,oldValue)=&gt;{<!-- --></span>
    <span class="token comment">//   console.log("person改变了",newValue,oldValue)</span>
    <span class="token comment">// })</span>
    <span class="token comment">//开启深度监视</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"person改变了"</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      sum<span class="token punctuation">,</span>msg<span class="token punctuation">,</span>person
    <span class="token punctuation">}</span>
</code></pre> </li></ul> 
<h5><a id="3_watchEffect_2525"></a>3. watchEffect函数</h5> 
<ul><li>watch的套路是：既要指明监视的属性，也要指明监视的回调</li><li>watchEffect的套路是：不用特意的指明监视哪个属性，监视回调中用到哪个属性，那就监视哪个属性</li><li>watchEffect很想computed 
  <ul><li>但computed更看重计算出来的值，所以必须写返回值<code>return</code></li><li>watchEffect看重的是计算过程（回调函数函数体）,所以不需要写返回值</li></ul> </li></ul> 
<pre><code class="prism language-js">    <span class="token comment">//watchEffect全部监视</span>
    <span class="token comment">//watchEffect 所指定的回调中 用到的数据发生变化 则重新执行回调函数</span>
    <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> x1 <span class="token operator">=</span> sum<span class="token punctuation">.</span>value
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"watchEffect被使用了"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="8__2542"></a>8. 生命周期函数</h4> 
<ul><li> <p>vue2.x与vue3.x两者的生命周期写法差不多 ，但vue3.x可以使用组合式写法</p> 
  <table><thead><tr><th>选项式 API</th><th>Hook inside <code>setup</code></th></tr></thead><tbody><tr><td><code>beforeCreate</code></td><td>setup</td></tr><tr><td><code>created</code></td><td>`</td></tr><tr><td><code>beforeMount</code></td><td><code>onBeforeMount</code></td></tr><tr><td><code>mounted</code></td><td><code>onMounted</code></td></tr><tr><td><code>beforeUpdate</code></td><td><code>onBeforeUpdate</code></td></tr><tr><td><code>updated</code></td><td><code>onUpdated</code></td></tr><tr><td><code>beforeUnmount</code></td><td><code>onBeforeUnmount</code></td></tr><tr><td><code>unmounted</code></td><td><code>onUnmounted</code></td></tr><tr><td><code>errorCaptured</code></td><td><code>onErrorCaptured</code></td></tr><tr><td><code>renderTracked</code></td><td><code>onRenderTracked</code></td></tr><tr><td><code>renderTriggered</code></td><td><code>onRenderTriggered</code></td></tr><tr><td><code>activated</code></td><td><code>onActivated</code></td></tr><tr><td><code>deactivated</code></td><td><code>onDeactivated</code></td></tr></tbody></table></li><li> <p>组合式写法：</p> <pre><code class="prism language-vue">&lt;script&gt;
import {reactive, computed, ref,onUnmounted,onBeforeUnmount,onUpdated,onBeforeUpdate,onMounted,onBeforeMount} from 'vue'
export default {
  name: "demo",
  setup(props,context){
    //数据
    let sum = ref(0);

    onBeforeMount(()=&gt;{
      console.log("onBeforeMount")
    })
    onMounted(()=&gt;{
      console.log("onMounted")
    })
    onBeforeUpdate(()=&gt;{
      console.log("onBeforeUpdate")
    })
    onUpdated(()=&gt;{
      console.log("onUpdated")
    })
    onBeforeUnmount(()=&gt;{
      console.log("onBeforeUnmount")
    })
    onUnmounted(()=&gt;{
      console.log("onUnmounted")
    })
    return {
      sum
    }
  }
}
&lt;/script&gt;
</code></pre> </li></ul> 
<h4><a id="9_hook_2599"></a>9. 自定义hook函数</h4> 
<ul><li>什么是hook？ ——本质是一个函数，把setup函数中使用的Composition API进行了封装</li><li>类似于vue2的mixin</li><li>自定义hook的优势：复用代码，让setup中的逻辑更清楚易懂</li><li>本质上是把部分代码封装起来，可以让多个<code>.vue</code>文件在<code>setup</code>中使用</li></ul> 
<h4><a id="10_toRef_2608"></a>10. toRef</h4> 
<ul><li> <p>作用：创建一个ref对象，其value值指向了一个对象中的某个属性</p> </li><li> <p>语法：<code>const name2 = toRef(person,'name')</code>.</p> </li><li> <p>应用：要将响应式对象中的某个属性单独提供给外部使用时</p> </li><li> <p>扩展： <code>toRef</code>与<code>toRefs</code>功能一致，但torefs可以批量创建多个ref对象，语法为：<code>toRefs(person)</code></p> </li><li> <p>我的理解：toRef就是将reactive中的对象 转化为单个数据ref 格式，以便在<code>template</code>渲染中可以简写。</p> </li><li> <p>例子：</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;hr/&gt;
  &lt;h2&gt;姓名:{<!-- -->{name}}&lt;/h2&gt;
  &lt;h2&gt;年龄:{<!-- -->{age}}&lt;/h2&gt;
  &lt;h2&gt;薪水:{<!-- -->{job.j1.salary}}&lt;/h2&gt;
  &lt;button @click="name+='~'"&gt;修改姓名&lt;/button&gt;
  &lt;button @click="age++"&gt;增加年龄&lt;/button&gt;
  &lt;button @click="job.j1.salary++"&gt;增加薪水&lt;/button&gt;
&lt;/template&gt;
&lt;script&gt;
import {reactive, computed, ref,toRef,toRefs} from 'vue'
export default {
  name: "demo",
  setup(props,context){
    let person = reactive({
      name:"hxx",
      age : 89,
      job :{
        j1:{
          salary:20
        }
      }
    })
    const name2 = toRef(person,'name')
    const x = toRefs(person)
    return {
     // name: toRef(person,"name"),
     // age: toRef(person,"age"), salary : toRef(person.job.j1,"salary")
      ...toRefs(person)
    }
  }
}
&lt;/script&gt;


</code></pre> </li></ul> 
<h3><a id="Composition_API_2662"></a>三、其他Composition API</h3> 
<h4><a id="1_shallowReactiveshallowRef_2664"></a>1. shallowReactive与shallowRef</h4> 
<ul><li>shallowReactive：只处理对象最外层属性的响应式（浅响应式）</li><li>shallowRef：只处理基本类型的响应式，不进行对象的响应式处理</li><li>什么时候使用： 
  <ul><li>如果有一个对象数据，结构比较深，但变化时只是外层属性变化===&gt;shallowReactive</li><li>如果有一个对象数据，后续功能不会修改该对象中的属性，而是产生新对象来代替===&gt;shallowRef。</li></ul> </li></ul> 
<h4><a id="2_readonlyshallowReadonly_2674"></a>2. readonly与shallowReadonly</h4> 
<ul><li> <p>readonly：让一个响应式数据变为只读（深只读）</p> </li><li> <p>shallowReacdonly：让一个响应式数据变为只读的（浅只读）</p> </li><li> <p>应用场景：不希望数据被修改时。</p> <pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>toRefs<span class="token punctuation">,</span>shallowReactive<span class="token punctuation">,</span>readonly<span class="token punctuation">,</span>shallowReadonly <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token comment">// person = readonly(person)</span>
    person <span class="token operator">=</span> <span class="token function">shallowReadonly</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>

</code></pre> </li></ul> 
<h4><a id="3_toRawmarkRaw_2691"></a>3. toRaw与markRaw</h4> 
<p>raw：生的</p> 
<ul><li> <p>toRaw：</p> 
  <ul><li>作用：将一个由<code>reactive</code>生成的<strong>响应式对象</strong>转为<strong>普通对象</strong></li><li>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新</li></ul> </li><li> <p>markRaw：</p> 
  <ul><li>作用：标记一个对象，使其永远不会再变成响应式对象。</li><li>应用场景： 
    <ul><li>有些值不应被设置为响应式的，例如复杂的第三方类库等。</li><li>当渲染具有不可变数据源的大列表是，跳过响应式转换可以提高性能</li></ul> </li></ul> </li><li> <p>我的理解：</p> 
  <ul><li> <p>toRaw的应用应该不多，只是将响应式对象转化为普通对象。可以应用在从后端请求过来的数据，经过再封装发还回后端，就需要使用toRaw，以免源数据被改变，因为vue3的<code>reactive</code>是使用<code>Proxy</code>来进行封装响应式的。</p> </li><li> <p>markRaw与上面差不多</p> </li><li> <p>具体写法：</p> <pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">showRewPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token function">toRaw</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">addCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"宝马"</span><span class="token punctuation">,</span><span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">}</span>
    person<span class="token punctuation">.</span>car <span class="token operator">=</span> <span class="token function">markRaw</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul> </li></ul> 
<h4><a id="4_customRef_2728"></a>4. customRef</h4> 
<ul><li> <p>定义：创建一个自定义的 ref，显式声明对其依赖追踪和更新触发的控制方式。</p> </li><li> <p>例子：</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;input v-model="msg" type="text"/&gt;
  &lt;h2&gt;{<!-- -->{msg}}&lt;/h2&gt;
&lt;/template&gt;
&lt;script&gt;
import {customRef} from 'vue'

export default {
  name: 'App',
  setup(){
    function  myRef(value,delay){
      //通过customRef来实现自定义
      return customRef((track, trigger)=&gt; {
        let timer
        return {
          get() {
            console.log("得到一个值",value)
            track() //告诉vue这个value值是要被追踪的
            return value
          },
          set(newValue) {
            console.log("设置值",newValue)
            clearTimeout(timer) //防抖： 就是如果需要延迟几秒在响应数据的话 就先清除掉定时器 到最后的修改在响应
            timer=  setTimeout(()=&gt;{
              value = newValue
              trigger() //告诉vue去更新页面
            },delay)
          },
        }
      })
    }
    let msg = myRef("hello",500); //使用自定义的ref
    return {
      msg
    }
  }
}
&lt;/script&gt;
</code></pre> </li></ul> 
<h4><a id="5_provide__inject_2779"></a>5. provide 与 inject</h4> 
<ul><li> <p>作用：实现 <strong>祖与后代组件间通信</strong></p> </li><li> <p>套路：父组件有一个<code>provide</code>选项来提供数据，后代组件有一个<code>inject</code>选项来开始使用这些数据</p> </li><li> <p>具体写法：</p> 
  <ul><li> <p>祖组件中：</p> <pre><code class="prism language-js">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> car <span class="token operator">=</span><span class="token function">reactive</span><span class="token punctuation">(</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"宝马"</span><span class="token punctuation">,</span><span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">}</span> <span class="token punctuation">)</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">"car"</span><span class="token punctuation">,</span>car<span class="token punctuation">)</span> <span class="token comment">//向后代组件传递一个响应式数据</span>
    <span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>
      <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> </li><li> <p>后代组件中：</p> <pre><code class="prism language-js">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'car'</span><span class="token punctuation">)</span><span class="token comment">//使用jnject来接收响应式数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>
      <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> </li></ul> </li><li> <p>我的理解：provide与inject是一种vue3新型的组件传递数据的方式，本方式传递的数据是响应式的。</p> </li></ul> 
<h4><a id="6__2816"></a>6. 响应式数据的判断</h4> 
<ul><li>isRef：检查一个值是否为一个ref对象</li><li>isReactive：检查一个对象是否由<code>reactive</code>创建的响应式代理</li><li>isReadonly：检查一个对象是否由<code>readonly</code>创建的只读代理</li><li>isProxy：检查一个对象是否是有<code>reactive</code>或者<code>readonly</code>方法创建的代理</li></ul> 
<h3><a id="Composition_API_2825"></a>四、Composition API的优势</h3> 
<h4><a id="1Options_API__2827"></a>1.Options API 存在的问题</h4> 
<p>使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改。</p> 
<h4><a id="2Composition_API_2831"></a>2.Composition API的优势</h4> 
<p>我们可以更加优雅的组织我们的代码，函数。让相关概念的代码更加有序的组织在一起。（hook）</p> 
<h3><a id="_2837"></a>五、新组件</h3> 
<h4><a id="1Fragment_2839"></a>1.Fragment</h4> 
<ul><li>在Vue2中：组件必须有一个根标签</li><li>在Vue3中：组件可以没有根标签，内部会将多个标签包含在一个Fragment虚拟元素中</li><li>好处：减少标签层级，减少内存占用</li></ul> 
<h4><a id="2Teleport_2847"></a>2.Teleport</h4> 
<ul><li> <p>什么是Teleport？-----<code>teleport</code>是一种能够将我们的 <strong>组件html结构</strong>移动到指定位置的技术。</p> <pre><code class="prism language-html"><span class="token comment">&lt;!--  /to表示移动到哪里  --&gt;</span>  
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShow<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> 
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hh<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>哈哈哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>哈哈哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>哈哈哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShow=false<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>点我关闭<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li></ul> 
<h4><a id="3_Suspense_2867"></a>3. Suspense</h4> 
<ul><li> <p>等待异步组件是渲染一些额外内容，让应用有更好的用户体验</p> </li><li> <p>使用步骤：</p> 
  <ul><li> <p>异步引入组件：</p> <pre><code class="prism language-js'">import {defineAsyncComponent} from 'vue'
const Child = defineAsyncComponent(()=&gt;import('./components/Child'))//动态（异步）引入组件
</code></pre> </li><li> <p>使用<code>suspense</code>标签包裹组件，并配置好<code>default</code>与<code>fallback</code></p> <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>suspense</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>fallback</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>等待<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>suspense</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li></ul> </li></ul> 
<h3><a id="_2895"></a>六、其他</h3> 
<h4><a id="1API_2897"></a>1.全局API的转移</h4> 
<p>将全局API，即：<code>Vue.xxx</code>调整到应用实例（app）上</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-id6kkU4G-1693207452760)(C:\Users\黄佳欣\AppData\Roaming\Typora\typora-user-images\image-20230623202601762.png)]</p> 
<h4><a id="2_2905"></a>2.其他改变</h4> 
<ul><li> <p>data选项应始终被声明为一个函数</p> </li><li> <p>过度类名的更改</p> <pre><code>vue2.x写法
    .v-enter ,
    .v-leave-to {
    opacity: 0;
    }
    .v-leave,
    .v-enter-to {
    opacity: 1;
    }
    Vue3.x写法
    .v-enter- from,
    .v-leave-to {
   	 opacity: 0;6968
    }
    .v-leave- from,
    .v-enter-to {
    opacity: 1;
   }
</code></pre> </li><li> <p>移出keyCode作为v-on的修饰符 ，同时也不支持<code>config.keyCodes</code></p> </li><li> <p>移除<code>v-on.native</code>修饰符</p> 
  <ul><li> <p>父组件中绑定事件</p> <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span>
	<span class="token attr-name"><span class="token namespace">v-on:</span>close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleComponentEvent<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleNativeClickEvent<span class="token punctuation">"</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre> </li><li> <p>子组件中声明自定义事件</p> <pre><code class="prism language-js"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">emits</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'close'</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> </li></ul> </li><li> <p>移除过滤器</p> <p>过滤器虽然看起来很方便，但他需要一个自定义语法，打破大括号后内表达式，“只是javascript”的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或者计算属性去替代过滤器</p> </li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ff7786fd78b0b9c12516c6f9ba8e2dff/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">流媒体弱网优化之路(BBR应用)——GCC与BBR的算法思想分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/729950f8983ed350be7f22b1ec58ac23/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">机器学习中的分类算法详细介绍一（KNN、决策树）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>