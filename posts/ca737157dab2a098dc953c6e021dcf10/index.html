<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>cesiumjs学习笔记之三——cesium-navigation插件 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="cesiumjs学习笔记之三——cesium-navigation插件" />
<meta property="og:description" content="插件源码地址：https://github.com/alberto-acevedo/cesium-navigation
cesium-navigation cesium-navigation是一个cesium的插件，提供指南针、导航仪和距离刻度用户图形界面。
1、为什么你建立cesium-navigation插件？ 首先，所有的Cesiumjs sdk 不包括罗盘，导航仪（放大/缩小）和距离刻度。您可以使用鼠标在地图上导航，但这个导航插件可为用户提供更多的导航控制和功能。其中一些功能是：将罗盘重置为指向北部，重置轨道，并将视图重置为默认边界。
2、怎么建立cesium-navigation插件？ cesium-navigation插件基于优秀的罗盘，导航仪（放大/缩小）和距离terriajs开源库的距离刻度。来自terriajs的导航UI不能在铯中开箱即用，因为cesium使用带有RequireJS的CommonJS模块，terriajs使用commonjs和Browserify，因此您不能将源文件复制到铯和构建中。cesium-navigation插件的工作包括调整代码在cesium作为插件工作如下：
1) 将所有模块从Browserify转换为requirejs；
2)使用gulpjs来编译和缩小较少的文件，捆绑和最小化所有模块，并将源依赖关系打包成一个文件。作为构建过程的一部分，用almondjs替换requirejs，以减少插件中使用的AMD加载器的占用空间。almondjs库也在插件内绑定，使插件像铯中的即插即用一样简单；
3)使用nodejs和requirejs优化器以及almondjs，整个插件被构建并捆绑在单个文件中，甚至CSS样式也放在这个文件中；
4）该插件可以用作独立脚本或通过AMD加载程序（使用requirejs进行测试）。即使在使用AMD而不是cesium的特殊情况下，插件也可以轻松使用。
3、怎么使用cesium-navigation插件？ cesium-navigation插件有两个版本，一个独立版和一个AMD兼容版本：
1）什么时候用什么版本？ a. 如果您正在加载没有requirejs的铯（即，您有全局变量铯），则使用独立版本。如果您使用requirejs（但不适用于铯），此版本也是适用的。
导入脚本：
&lt;head&gt; &lt;!-- other stuff --&gt; &lt;script src=&#34;path/to/Cesium.js&#34;&gt;&lt;/script&gt; &lt;!-- IMPORTANT: because the cesium navigation viewer mixin depends on Cesium be sure to load it after Cesium --&gt; &lt;script src=&#34;path/to/standalone/viewerCesiumNavigationMixin.js&#34;&gt;&lt;/script&gt; &lt;!-- other stuff ... --&gt; &lt;/head&gt; 然后扩展viewer： // create a viewer assuming there is a DIV element with id &#39;cesiumContainer&#39; var cesiumViewer = new Cesium." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ca737157dab2a098dc953c6e021dcf10/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-04-18T15:30:08+08:00" />
<meta property="article:modified_time" content="2017-04-18T15:30:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">cesiumjs学习笔记之三——cesium-navigation插件</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><br> </p> 
<p>插件源码地址：https://github.com/alberto-acevedo/cesium-navigation</p> 
<p></p> 
<h2><a target="_blank" id="user-content-cesium-navigation" class="anchor" href="https://github.com/alberto-acevedo/cesium-navigation#cesium-navigation" rel="noopener noreferrer"></a>cesium-navigation</h2> 
<p></p> 
<p>cesium-navigation是一个cesium的插件，提供指南针、导航仪和距离刻度用户图形界面。</p> 
<p><img src="https://images2.imgbox.com/5c/92/4zbdmPx9_o.png" alt=""></p> 
<h3><span id="result_box" lang="zh-CN">1、为什么你建立cesium-navigation插件？</span></h3> 
<p><span id="result_box" lang="zh-CN">首先，所有的Cesiumjs sdk 不包括罗盘，导航仪（放大/缩小）和距离刻度。您可以使用鼠标在地图上导航，但这个导航插件可为用户提供更多的导航控制和功能。其中一些功能是：将罗盘重置为指向北部，重置轨道，并将视图重置为默认边界。</span></p> 
<h3><span id="result_box" lang="zh-CN"></span>2、怎么建立<span id="result_box" lang="zh-CN">cesium-navigation插件？</span></h3> 
<p><span id="result_box" lang="zh-CN">cesium-navigation插件基于优秀的罗盘，导航仪（放大/缩小）和距离terriajs开源库的距离刻度。来自terriajs的导航UI不能在铯中开箱即用，因为cesium使用带有RequireJS的CommonJS模块，terriajs使用commonjs和Browserify，因此您不能将源文件复制到铯和构建中。<span id="result_box" lang="zh-CN">cesium-navigation插件</span>的工作包括调整代码在cesium作为插件工作如下：</span></p> 
<p><span id="result_box" lang="zh-CN">1)<span id="result_box" lang="zh-CN"><span title="Converted all the modules from Browserify to requirejs.    "> 将所有模块从Browserify转换为requirejs；</span></span></span></p> 
<p><span id="result_box" lang="zh-CN"><span id="result_box" lang="zh-CN"><span title="Converted all the modules from Browserify to requirejs.    ">2)<span id="result_box" lang="zh-CN"><span title="Use gulpjs to compile and minify the less files, bundle and minify all the modules and open source dependencies into just one file.">使用gulpjs来编译和缩小较少的文件，捆绑和最小化所有模块，并将源依赖关系打包成一个文件。</span><span title="As part of the build process I decided to replace requirejs with almondjs to reduce the footprint of the AMD loader used in the plugin.">作为构建过程的一部分，用almondjs替换requirejs，以减少插件中使用的AMD加载器的占用空间。</span><span title="The almondjs library is also bundle inside the plugin to make the plugin as easy as plug and play within Cesium.    ">almondjs库也在插件内绑定，使插件像铯中的即插即用一样简单；</span></span></span></span><br> </span></p> 
<p><span id="result_box" lang="zh-CN"></span>3)<span id="result_box" lang="zh-CN"><span title="Using nodejs and the requirejs optimizer as well as almond the whole plugin is built and bundled in a single file even the CSS style    ">使用nodejs和requirejs优化器以及almondjs，整个插件被构建并捆绑在单个文件中，甚至CSS样式也放在这个文件中；</span></span></p> 
<p><span id="result_box" lang="zh-CN"><span title="Using nodejs and the requirejs optimizer as well as almond the whole plugin is built and bundled in a single file even the CSS style    ">4）<span id="result_box" lang="zh-CN"><span title="This plugin can be used as a standalone script or via an AMD loader (tested with requirejs).">该插件可以用作独立脚本或通过AMD加载程序（使用requirejs进行测试）。</span><span title="Even in the special case where you use AMD but not for Cesium the plugin can be easily used.">即使在使用AMD而不是cesium的特殊情况下，插件也可以轻松使用。</span></span></span></span></p> 
<h3><span id="result_box" lang="zh-CN"><span title="Using nodejs and the requirejs optimizer as well as almond the whole plugin is built and bundled in a single file even the CSS style    "><span id="result_box" lang="zh-CN"><span title="Even in the special case where you use AMD but not for Cesium the plugin can be easily used.">3、怎么使用cesium-navigation插件？</span></span></span></span></h3> 
<p><span id="result_box" class="short_text" lang="zh-CN"><span id="result_box" lang="zh-CN">cesium-navigation插件</span>有两个版本，一个独立版和一个AMD兼容版本：</span></p> 
<h4><span id="result_box" class="short_text" lang="zh-CN">1）什么时候用什么版本？</span></h4> 
<p><span id="result_box" lang="zh-CN">a. 如果您正在加载没有requirejs的铯（即，您有全局变量铯），则使用独立版本。如果您使用requirejs（但不适用于铯），此版本也是适用的。</span></p> 
<p><span id="result_box" lang="zh-CN">导入脚本：</span></p> 
<p><span id="result_box" lang="zh-CN"></span></p> 
<pre><code class="language-html">&lt;head&gt;
  &lt;!-- other stuff --&gt;

  &lt;script src="path/to/Cesium.js"&gt;&lt;/script&gt;
  &lt;!-- IMPORTANT: because the cesium navigation viewer mixin depends on Cesium be sure to load it after Cesium --&gt;
  &lt;script src="path/to/standalone/viewerCesiumNavigationMixin.js"&gt;&lt;/script&gt;

  &lt;!-- other stuff ... --&gt;
&lt;/head&gt;</code></pre> 
<br> 
<br> 
<p></p> 
<p><span id="result_box" lang="zh-CN"></span></p> 
<pre></pre> 然后扩展viewer： 
<p></p> 
<pre><code class="language-javascript"> // create a viewer assuming there is a DIV element with id 'cesiumContainer'
	var cesiumViewer = new Cesium.Viewer('cesiumContainer');

	// extend our view by the cesium navigaton mixin
	cesiumViewer.extend(Cesium.viewerCesiumNavigationMixin, {});</code></pre>或者一个部件： 
<p></p> 
<p></p> 
<pre><code class="language-javascript"> // create a widget assuming there is a DIV element with id 'cesiumContainer'
    var cesiumWidget = new Cesium.CesiumWidget('cesiumContainer');

	// extend our view by the cesium navigaton mixin
	Cesium.viewerCesiumNavigationMixin.mixinWidget(cesiumWidget, {});</code></pre> 
<br> 
<p></p> 
<p>可以通过一下方式获取新创建的实例：</p> 
<p></p> 
<pre><code class="language-javascript"> // if using a viewer
	var cesiumNavigation = cesiumViewer.cesiumNavigation;

	// if using a widget
	var cesiumNavigation = cesiumWidget.cesiumNavigation;</code></pre> 
<p></p> 
<p></p> 
<p>另外一个例子：</p> 
<p>b. 如果除了cesium之外，你使用了requirejs ，则要使用：</p> 
<p></p> 
<pre><code class="language-html">&lt;head&gt;
  &lt;!-- other stuff... --&gt;

  &lt;script src="path/to/Cesium.js"&gt;&lt;/script&gt;
  &lt;!-- 重要！加载requirejs在cesium之后 --&gt;
  &lt;!-- viewerCesiumNavigationMixin the global variable Cesium is already set --&gt;
  &lt;script type="text/javascript" src="path/to/require.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript"&gt;
    require.config({
      // your config...
    });
  &lt;/script&gt;

  &lt;!-- other stuff... --&gt;
&lt;/head&gt;</code></pre>加上： 
<p></p> 
<p></p> 
<p></p> 
<pre><code class="language-html">// IMPORTANT: be sure that Cesium.js has already been loaded, e.g. by loading requirejs AFTER Cesium
  require(['path/to/standalone/viewerCesiumNavigationMixin'], function(viewerCesiumNavigationMixin) {
    // like above code but additionally one can directly access
    // viewerCesiumNavigationMixin
    // instead of
    // Cesium.viewerCesiumNavigationMixin
  }</code></pre> 
<br> 
<p></p> 
<p></p> c. 
<span id="result_box" class="short_text" lang="zh-CN">如果您正在为整个项目（包括cesium）使用requirejs，那么您必须使用AMD兼容版本。</span> 
<p><span id="result_box" class="short_text" lang="zh-CN"></span></p> 
<pre><code class="language-html">&lt;head&gt;
  &lt;!-- other stuff... --&gt;

  &lt;script type="text/javascript" src="path/to/require.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript"&gt;
    require.config({
        // your config...
		paths: {
		    // your paths...
		    // 重要！这里必须设置，因为viewerCesiumNavigationMixin 使用Cesium/...依赖
			'Cesium': 'path/to/cesium/Source'
		}
    });
  &lt;/script&gt;

  &lt;!-- other stuff... --&gt;
&lt;/head&gt;</code></pre> 
<br> 加上： 
<p></p> 
<p></p> 
<p></p> 
<pre><code class="language-javascript">require([
  'Cesium/Cesium',
  'path/to/amd/viewerCesiumNavigationMixin'
], function(
  Cesium,
  viewerCesiumNavigationMixin) {

  // like above but now you cannot access Cesium.viewerCesiumNavigationMixin
  // but use just viewerCesiumNavigationMixin
});</code></pre> 
<br> 
<p></p> 
<p>或者：</p> 
<p></p> 
<p></p> 
<pre><code class="language-javascript">require([
  'Cesium/Core/Viewer',
  'path/to/amd/viewerCesiumNavigationMixin'
], function(
  CesiumViewer,
  viewerCesiumNavigationMixin) {

  // like above but now you cannot access Cesium.viewerCesiumNavigationMixin
  // but use just viewerCesiumNavigationMixin
});</code></pre>设置插件选项 
<p></p> 
<p><span id="result_box" lang="zh-CN"><span title="defaultResetView --&gt; option used to set a default view when resetting the map view with the reset navigation">defaultResetView - &gt;用于在使用重置导航重置地图视图时设置默认视图</span><span title="control.">控制。</span><span title="Values accepted are of type Cesium.Cartographic and Cesium.Rectangle.">接受的值是Cesium.Cartographic 和 Cesium.Rectangle.<br> </span><span title="enableCompass --&gt; option used to enable or disable the compass.">enableCompass - &gt;用于启用或禁用罗盘。</span><span title="Values accepted are true for enabling and false to disable.">true是启用罗盘，false是禁用罗盘。</span><span title="The default is true.">默认值为true。</span><span title="The compass will not be added to the map if setting the option to false.">如果将选项设置为false，则罗盘将不会添加到地图中。<br> </span><span title="enableZoomControls --&gt; option used to enable or disable the zoom controls.">enableZoomControls - &gt;用于启用或禁用缩放控件。</span><span title="Values accepted are true for enabling and false to disable.">true是启用，false是禁用。</span><span title="The default is true.">默认值为true。</span><span title="The zoom controls  will not be added to the map if setting the option to false.">如果将选项设置为false，则缩放控件将不会添加到地图中。<br> </span><span title="enableDistanceLegend --&gt; option used to enable or disable the distance legend.">enableDistanceLegend - &gt;用于启用或禁用距离图例。</span><span title="Values accepted are true for enabling and false to disable."><span id="result_box" lang="zh-CN"><span title="Values accepted are true for enabling and false to disable.">true是启用，false是禁用</span></span>。</span><span title="The default is true.">默认值为true。</span><span title="The distance legend will not be added to the map if setting the option to false.">如果将选项设置为false，距离图例将不会添加到地图中。<br> </span><span title="enableCompassOuterRing --&gt; option used to enable or disable the Compass Outer Ring.">enableCompassOuterRing - &gt;用于启用或禁用指南针外环。</span><span id="result_box" lang="zh-CN"><span title="Values accepted are true for enabling and false to disable.">true是启用，false是禁用</span></span><span title="Values accepted are true for enabling and false to disable.">。</span><span title="The default is true.">默认值为true。</span><span title="The ring will be visible but inactive if setting the option to false.">如果将选项设置为false，则该环将可见但无效。<br> </span><span title="More options will be set in future releases of the plugin.">更多选项将在未来的插件版本中设置。</span></span></p> 
<p><span id="result_box" lang="zh-CN"><span title="More options will be set in future releases of the plugin.">没有requirejs加载cesium时设置选项的例子：</span></span></p> 
<p><span id="result_box" lang="zh-CN"><span title="More options will be set in future releases of the plugin."></span></span></p> 
<pre><code class="language-javascript">var options = {};
options.defaultResetView = Cesium.Rectangle.fromDegrees(71, 3, 90, 14);
// Only the compass will show on the map
options.enableCompass= true;
options.enableZoomControls= false;
options.enableDistanceLegend= false;
options.enableCompassOuterRing= true;
cesiumViewer.extend(Cesium.viewerCesiumNavigationMixin, options);</code></pre> 
<br> 仍然有问题，请查看例子。 
<p></p> 
<p></p> 
<p>删除导航插件并释放资源使用：</p> 
<p></p> 
<pre><code class="language-javascript">viewer.cesiumNavigation.destroy();</code></pre> 
<p></p> 
<p></p> 
<p>怎么建立cesium-navigation插件？</p> 
<p>执行：<code>npm install</code></p> 
<p>执行：<code>node build.js</code></p> 
<p><code><br> </code></p> 
<h2><code>开发指引</code></h2> 
<p><span id="result_box" lang="zh-CN">对于开发/调试，您应该看看“Source Example”文件件。该示例直接使用源文件，因此它允许您立即使用（只需要刷新一次页面），不需要重新构建任何内容即可查看更改。此外，由于使用来源，您可以轻松地调试项目（例如通过浏览器的开发人员控制台或通过IDE的调试器，如Webstorm）</span></p> 
<p><span id="result_box" lang="zh-CN">有没有使用该插件的实例？</span></p> 
<p><span id="result_box" lang="zh-CN">(<a target="_blank" href="http://larcius.github.io/cesium-navigation/" rel="nofollow noopener noreferrer">http://larcius.github.io/cesium-navigation/</a>)<br> </span></p> 
<p><span id="result_box" lang="zh-CN"><span id="result_box" lang="zh-CN">1)指南针，导航仪和距离刻度将显示在地图的右侧。<br> 2)此插件已成功测试cesium 1.15版。 它在3D模式下适用于<span id="result_box" lang="zh-CN"><span id="result_box" lang="zh-CN">cesium</span></span>。最近Larcius（https://github.com/Larcius）做了很多改进，并修复了哥伦布和二维模式的一些问题。</span></span><br> </p> 
<p><br> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/56e70718d75ab62b8544614946b2b00b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JAVA中的System类常用方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/db9958e2cd95d6cf8cbb8efbe2b8f315/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">用mqtt.fx 和 wireshark 深入学习MQTT 协议</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>