<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C# Replace：一个熟悉而又陌生的替换 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C# Replace：一个熟悉而又陌生的替换" />
<meta property="og:description" content="前言一、String.Replace() 的几个重载 1、Replace(Char, Char)2、String.Replace(String, String) 3、Replace(String, String, StringComparison)4、Replace(String, String, Boolean, CultureInfo)二、Regex.Replace() 的几个常用重载 1、Replace(String, String) 2、Replace(String, String, String)3、Replace(String, String, Int32, Int32)4、Replace(String, String, MatchEvaluator, RegexOptions, TimeSpan)三、关于 Replace 的实际需求简单示例 1、全部替换匹配项2、仅替换第一个匹配项3、仅替换最后一个匹配项 回到顶部
前言 Replace 的作用就是，通过指定内容的替换，返回一个新字符串。
返回值中，已将当前字符串中的指定 Unicode 字符或 String 的 所有匹配项，替换为指定的新的 Unicode 字符或 String。
回到顶部
一、String.Replace() 的几个重载 String.Replace() 总共有四个重载，分别是：（详见官网：String.Replace 方法）
Replace(Char, Char)、
Replace(String, String)、
Replace(String, String, StringComparison)、
Replace(String, String, Boolean, CultureInfo)。
下面来逐个简单介绍下。
1、Replace(Char, Char) // 作用：// 将实例中出现的所有指定 Unicode 字符都替换为另一个指定的 Unicode 字符。// 语法：public string Replace (char oldChar, char newChar); 代码示例：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a67d8f9c019e706a872180df79e33582/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-02T16:30:55+08:00" />
<meta property="article:modified_time" content="2023-06-02T16:30:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C# Replace：一个熟悉而又陌生的替换</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <ul><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label0" rel="nofollow" title="前言">前言</a></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label1" rel="nofollow" title="一、String.Replace() 的几个重载">一、String.Replace() 的几个重载</a> 
  <ul><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label1_0" rel="nofollow" title="1、Replace(Char, Char)">1、Replace(Char, Char)</a></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label1_1" rel="nofollow" title="2、String.Replace(String, String)">2、String.Replace(String, String)</a></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label1_2" rel="nofollow" title=" 3、Replace(String, String, StringComparison)"> 3、Replace(String, String, StringComparison)</a></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label1_3" rel="nofollow" title="4、Replace(String, String, Boolean, CultureInfo)">4、Replace(String, String, Boolean, CultureInfo)</a></li></ul></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label2" rel="nofollow" title="二、Regex.Replace() 的几个常用重载">二、Regex.Replace() 的几个常用重载</a> 
  <ul><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label2_0" rel="nofollow" title="1、Replace(String, String)">1、Replace(String, String)</a></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label2_1" rel="nofollow" title=" 2、Replace(String, String, String)"> 2、Replace(String, String, String)</a></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label2_2" rel="nofollow" title="3、Replace(String, String, Int32, Int32)">3、Replace(String, String, Int32, Int32)</a></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label2_3" rel="nofollow" title="4、Replace(String, String, MatchEvaluator, RegexOptions, TimeSpan)">4、Replace(String, String, MatchEvaluator, RegexOptions, TimeSpan)</a></li></ul></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label3" rel="nofollow" title="三、关于 Replace 的实际需求简单示例">三、关于 Replace 的实际需求简单示例</a> 
  <ul><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label3_0" rel="nofollow" title="1、全部替换匹配项">1、全部替换匹配项</a></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label3_1" rel="nofollow" title="2、仅替换第一个匹配项">2、仅替换第一个匹配项</a></li><li><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_label3_2" rel="nofollow" title="3、仅替换最后一个匹配项">3、仅替换最后一个匹配项</a></li></ul></li></ul> 
<hr> 
<p><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_labelTop" rel="nofollow" title="回到顶部">回到顶部</a><a name="_label0"></a></p> 
<h3>前言</h3> 
<p>Replace 的作用就是，通过指定内容的替换，返回一个新字符串。</p> 
<p>返回值中，已将当前字符串中的指定 Unicode 字符或 String 的 <strong>所有匹配项</strong>，替换为指定的新的 Unicode 字符或 String。</p> 
<p><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_labelTop" rel="nofollow" title="回到顶部">回到顶部</a><a name="_label1"></a></p> 
<h3>一、String.Replace() 的几个重载</h3> 
<p>String.Replace() 总共有四个重载，分别是：（详见官网：<em><a href="https://learn.microsoft.com/zh-cn/dotnet/api/system.string.replace?view=net-7.0" rel="nofollow" title="String.Replace 方法">String.Replace 方法</a></em>）</p> 
<p>  Replace(Char, Char)、</p> 
<p>  Replace(String, String)、</p> 
<p>  Replace(String, String, StringComparison)、</p> 
<p>  Replace(String, String, Boolean, CultureInfo)。</p> 
<p>下面来逐个简单介绍下。</p> 
<p><a name="_label1_0"></a></p> 
<h4>1、Replace(Char, Char)</h4> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 作用：</code></td></tr><tr><td></td><td><code>// 将实例中出现的所有指定 Unicode 字符都替换为另一个指定的 Unicode 字符。</code></td></tr><tr><td></td><td><code>// 语法：</code></td></tr><tr><td></td><td><code>public string Replace (char oldChar, char newChar);</code></td></tr></tbody></table> 
<p>代码示例：</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>String str = "1 2 3 4 5 6 7 8 9";</code></td></tr><tr><td></td><td><code>Console.WriteLine($"Original string: {str}");</code></td></tr><tr><td></td><td><code>Console.WriteLine($"CSV string: {str.Replace(' ', ',')}");</code></td></tr><tr><td></td><td><code>// 输出结果:</code></td></tr><tr><td></td><td><code>// Original string: "1 2 3 4 5 6 7 8 9"</code></td></tr><tr><td></td><td><code>// CSV string: "1,2,3,4,5,6,7,8,9"</code></td></tr></tbody></table> 
<p><strong>现在补充一下关于 Char 类型：</strong></p> 
<p>  char 类型关键字是 .NET System.Char 结构类型的别名，它表示 Unicode UTF-16 字符。</p> 
<table border="1"><tbody><tr><td>类型</td><td>范围</td><td>大小</td><td>.NET 类型</td><td>默认值</td></tr><tr><td>char</td><td>U+0000 到 U+FFFF</td><td>16 位</td><td>System.Char</td><td>\0 即 U+0000</td></tr></tbody></table> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 给 Char 类型的变量赋值可以通过多重方式，如下：</code></td></tr><tr><td></td><td><code>var chars = new[]</code></td></tr><tr><td></td><td><code>{<!-- --></code></td></tr><tr><td></td><td><code>'j', //字符文本</code></td></tr><tr><td></td><td><code>'\u006A', //Unicode 转义序列，它是 \u 后跟字符代码的十六进制表示形式（四个符号）</code></td></tr><tr><td></td><td><code>'\x006A', //十六进制转义序列，它是 \x 后跟字符代码的十六进制表示形式</code></td></tr><tr><td></td><td><code>(char)106, //将字符代码的值转换为相应的 char 值</code></td></tr><tr><td></td><td><code>};</code></td></tr><tr><td></td><td><code>Console.WriteLine(string.Join(" ", chars));</code></td></tr><tr><td></td><td><code>// 输出的值相同: j j j j</code></td></tr></tbody></table> 
<p>  char 类型可<strong>隐式转换</strong>为以下整型类型：ushort、int、uint、long 和 ulong。</p> 
<p>  也可以<strong>隐式转换</strong>为内置浮点数值类型：float、double 和 decimal。</p> 
<p>  可以<strong>显式转换</strong>为 sbyte、byte 和 short 整型类型。</p> 
<p><a name="_label1_1"></a></p> 
<h4>2、String.Replace(String, String)</h4> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 作用：</code></td></tr><tr><td></td><td><code>// 实例中出现的所有指定字符串都替换为另一个指定的字符串</code></td></tr><tr><td></td><td><code>// 语法：</code></td></tr><tr><td></td><td><code>public string Replace (char oldString, char newString);</code></td></tr></tbody></table> 
<p>示例：</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 目的：将错误的单词更正</code></td></tr><tr><td></td><td><code>string errString = "This docment uses 3 other docments to docment the docmentation";</code></td></tr><tr><td></td><td><code>Console.WriteLine($"The original string is:{Environment.NewLine}'{errString}'{Environment.NewLine}");</code></td></tr><tr><td></td><td><code>// 正确的拼写应该为 "document"</code></td></tr><tr><td></td><td><code>string correctString = errString.Replace("docment", "document");</code></td></tr><tr><td></td><td><code>Console.WriteLine($"After correcting the string, the result is:{Environment.NewLine}'{correctString}'");</code></td></tr><tr><td></td><td><code>// 输出结果：</code></td></tr><tr><td></td><td><code>// The original string is:</code></td></tr><tr><td></td><td><code>// 'This docment uses 3 other docments to docment the docmentation'</code></td></tr><tr><td></td><td><code>//</code></td></tr><tr><td></td><td><code>// After correcting the string, the result is:</code></td></tr><tr><td></td><td><code>// 'This document uses 3 other documents to document the documentation'</code></td></tr><tr><td></td><td><code>//</code></td></tr></tbody></table> 
<p> 另一个示例：</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 可进行连续多次替换操作</code></td></tr><tr><td></td><td><code>String s = "aaa";</code></td></tr><tr><td></td><td><code>Console.WriteLine($"The initial string: '{s}'");</code></td></tr><tr><td></td><td><code>s = s.Replace("a", "b").Replace("b", "c").Replace("c", "d");</code></td></tr><tr><td></td><td><code>Console.WriteLine($"The final string: '{s}'");</code></td></tr><tr><td></td><td><code>// 如果 newString 为 null，则将 oldString 的匹配项全部删掉</code></td></tr><tr><td></td><td><code>s = s.Replace("dd", null);</code></td></tr><tr><td></td><td><code>Console.WriteLine($"The new string: '{s}'");</code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code>// 输出结果：</code></td></tr><tr><td></td><td><code>//The initial string: 'aaa'</code></td></tr><tr><td></td><td><code>//The final string: 'ddd'</code></td></tr><tr><td></td><td><code>//The new string: 'd'</code></td></tr></tbody></table> 
<p><a name="_label1_2"></a></p> 
<h4> 3、Replace(String, String, StringComparison)</h4> 
<p>相较于上一个重载，新增了一个入参枚举类型 StringComparison（<em>详见官网：<a href="https://learn.microsoft.com/zh-cn/dotnet/api/system.stringcomparison?view=net-7.0" rel="nofollow" title="StringComparison 枚举">StringComparison 枚举</a></em>）。作用是：指定供 Compare(String, String) 和 Equals(Object) 方法的特定重载，使用的区域性、大小写和排序规则。</p> 
<p>相关源代码如下，可以看出，不同的 StringComparison 参数值对应的操作不同，最主要的区别就是是否添加参数 CultureInfo。</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>public string Replace(string oldValue, string? newValue, StringComparison comparisonType)</code></td></tr><tr><td></td><td><code>{<!-- --></code></td></tr><tr><td></td><td><code>switch (comparisonType)</code></td></tr><tr><td></td><td><code>{<!-- --></code></td></tr><tr><td></td><td><code>case StringComparison.CurrentCulture:</code></td></tr><tr><td></td><td><code>case StringComparison.CurrentCultureIgnoreCase:</code></td></tr><tr><td></td><td><code>return ReplaceCore(oldValue, newValue, CultureInfo.CurrentCulture.CompareInfo, </code></td></tr><tr><td></td><td><code>GetCaseCompareOfComparisonCulture(comparisonType));</code></td></tr><tr><td></td><td><code>case StringComparison.InvariantCulture:</code></td></tr><tr><td></td><td><code>case StringComparison.InvariantCultureIgnoreCase:</code></td></tr><tr><td></td><td><code>return ReplaceCore(oldValue, newValue, CompareInfo.Invariant, </code></td></tr><tr><td></td><td><code>GetCaseCompareOfComparisonCulture(comparisonType));</code></td></tr><tr><td></td><td><code>case StringComparison.Ordinal:</code></td></tr><tr><td></td><td><code>return Replace(oldValue, newValue);</code></td></tr><tr><td></td><td><code>case StringComparison.OrdinalIgnoreCase:</code></td></tr><tr><td></td><td><code>return ReplaceCore(oldValue, newValue, CompareInfo.Invariant, CompareOptions.OrdinalIgnoreCase);</code></td></tr><tr><td></td><td><code>default:</code></td></tr><tr><td></td><td><code>throw new ArgumentException(SR.NotSupported_StringComparison, "comparisonType");</code></td></tr><tr><td></td><td><code>}</code></td></tr><tr><td></td><td><code>}</code></td></tr></tbody></table> 
<p>关于不同区域的<strong>不同 CultureInfo 实例，程序运行结果的区别</strong>，见下面的示例：</p> 
<p>查看代码</p> 
<p><a name="_label1_3"></a></p> 
<h4>4、Replace(String, String, Boolean, CultureInfo)</h4> 
<p>此重载主要介绍下后两个入参。</p> 
<p>Boolean：布尔类型入参，默认 false。<strong>true：</strong>忽略大小写；<strong>false：</strong>区分大小写。</p> 
<p>CultureInfo：指定代码的区域性，允许为 null，但必须站位。<strong>为空时</strong>取<strong>当前区域</strong>（CultureInfo.CurrentCulture.CompareInfo）。</p> 
<p><em>注：关于 CultureInfo 的详细测试示例，详见上一部分中的折叠代码。</em></p> 
<p>以下是当前重载的部分源码：</p> 
<p>查看代码</p> 
<p><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_labelTop" rel="nofollow" title="回到顶部">回到顶部</a><a name="_label2"></a></p> 
<h3>二、Regex.Replace() 的几个常用重载</h3> 
<p><a name="_label2_0"></a></p> 
<h4>1、Replace(String, String)</h4> 
<p>在指定的<strong>输入字符串（input）</strong>内，使用指定的<strong>替换字符串（replacement）</strong>，替换与某个<strong>正则表达式模式（需要在实例化 Regex 对象时，将正则表达式传入）</strong>匹配的所有的字符串。</p> 
<p><strong>关于正则表达式可参考博主另一篇文章：<a href="https://www.cnblogs.com/czzj/p/RegularExpression.html" rel="nofollow" title="C# 正则表达式常用的符号和模式解析">C# 正则表达式常用的符号和模式解析</a></strong></p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 语法</code></td></tr><tr><td></td><td><code>public string Replace (string input, string replacement);</code></td></tr></tbody></table> 
<p>下面是一个简单的示例：</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 目的是将多余的空格去掉</code></td></tr><tr><td></td><td><code>string input = "This is text with far too much white space.";</code></td></tr><tr><td></td><td><code>string pattern = "\\s+"; // \s：匹配任何空白字符；+：匹配一次或多次</code></td></tr><tr><td></td><td><code>string replacement = " ";</code></td></tr><tr><td></td><td><code>Regex rgx = new Regex(pattern); // 实例化时传入正则表达式</code></td></tr><tr><td></td><td><code>string result = rgx.Replace(input, replacement);</code></td></tr><tr><td></td><td><code>Console.WriteLine("Original String: {0}", input);</code></td></tr><tr><td></td><td><code>Console.WriteLine("Replacement String: {0}", result);</code></td></tr><tr><td></td><td><code>// 输出结果：</code></td></tr><tr><td></td><td><code>// Original String: This is text with far too much white space.</code></td></tr><tr><td></td><td><code>// Replacement String: This is text with far too much white space.</code></td></tr></tbody></table> 
<p><a name="_label2_1"></a></p> 
<h4> 2、Replace(String, String, String)</h4> 
<p>在指定的输入字符串内（input），使用指定的替换字符串（replacement）替换与指定正则表达式（pattern）匹配的所有字符串。</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 语法：</code></td></tr><tr><td></td><td><code>public static string Replace (string input, string pattern, string replacement);</code></td></tr></tbody></table> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 目的：将多余的空格去掉</code></td></tr><tr><td></td><td><code>string input = "This is text with far too much white space.";</code></td></tr><tr><td></td><td><code>string pattern = "\\s+"; </code></td></tr><tr><td></td><td><code>// 注：\s 匹配任何空白字符，包括空格、制表符、换页符等</code></td></tr><tr><td></td><td><code>// 注：+ 重复一次或多次</code></td></tr><tr><td></td><td><code>string replacement = " "; // 将连续出现的多个空格，替换为一个</code></td></tr><tr><td></td><td><code>string result = Regex.Replace(input, pattern, replacement);</code></td></tr><tr><td></td><td><code>Console.WriteLine("Original String: {0}", input);</code></td></tr><tr><td></td><td><code>Console.WriteLine("Replacement String: {0}", result);</code></td></tr><tr><td></td><td><code>// 输出结果：</code></td></tr><tr><td></td><td><code>//Original String: This is text with far too much white space.</code></td></tr><tr><td></td><td><code>//Replacement String: This is text with far too much white space.</code></td></tr></tbody></table> 
<p><a name="_label2_2"></a></p> 
<h4>3、Replace(String, String, Int32, Int32)</h4> 
<p>在指定输入子字符串（input）内，使用指定替换字符串（replacement）替换与某个正则表达式模式匹配的字符串（其数目为指定的最大数目）。startat 是匹配开始的位置。</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 语法：</code></td></tr><tr><td></td><td><code>public string Replace (string input, string replacement, int count, int startat);</code></td></tr></tbody></table> 
<p> 下面是一个示例：</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 目的：添加双倍行距</code></td></tr><tr><td></td><td><code>string input = "Instantiating a New Type\n" +</code></td></tr><tr><td></td><td><code>"Generally, there are two ways that an\n" +</code></td></tr><tr><td></td><td><code>"instance of a class or structure can\n" +</code></td></tr><tr><td></td><td><code>"be instantiated. ";</code></td></tr><tr><td></td><td><code>Console.WriteLine("原内容：");</code></td></tr><tr><td></td><td><code>Console.WriteLine(input);</code></td></tr><tr><td></td><td><code>// .：匹配除‘\n’之外的任何单个字符；*：匹配零次或多次</code></td></tr><tr><td></td><td><code>string pattern = "^.*$"; // ^.*$ 在这里就是匹配每一行中‘\n’前边的字符串</code></td></tr><tr><td></td><td><code>string replacement = "\n$&amp;"; // 在匹配项前添加‘\n’；$&amp;：代表匹配内容</code></td></tr><tr><td></td><td><code>Regex rgx = new Regex(pattern, RegexOptions.Multiline); // Multiline：多行模式，不仅仅在整个字符串的开头和结尾匹配</code></td></tr><tr><td></td><td><code>string result = string.Empty;</code></td></tr><tr><td></td><td><code>Match match = rgx.Match(input); // 判断能否匹配</code></td></tr><tr><td></td><td><code>if (match.Success)</code></td></tr><tr><td></td><td><code>result = rgx.Replace(input, </code></td></tr><tr><td></td><td><code>replacement,</code></td></tr><tr><td></td><td><code>-1, // &gt;= 0 时，就是匹配具体次数，= -1 时就是不限制次数</code></td></tr><tr><td></td><td><code>match.Index + match.Length + 1 // 作用就是跳过第一个匹配项（第一行不做处理）</code></td></tr><tr><td></td><td><code>// 当第一次匹配时：Index=0，length=除了‘\n’之外的长度，最后再 +1 就是第一行全部的内容</code></td></tr><tr><td></td><td><code>);</code></td></tr><tr><td></td><td><code>Console.WriteLine("结果内容：");</code></td></tr><tr><td></td><td><code>Console.WriteLine(result);</code></td></tr><tr><td></td><td><code>// 输出结果：</code></td></tr><tr><td></td><td><code>// 原内容：</code></td></tr><tr><td></td><td><code>// Instantiating a New Type</code></td></tr><tr><td></td><td><code>// Generally, there are two ways that an</code></td></tr><tr><td></td><td><code>// instance of a class or structure can</code></td></tr><tr><td></td><td><code>// be instantiated.</code></td></tr><tr><td></td><td><code>// 结果内容：</code></td></tr><tr><td></td><td><code>// Instantiating a New Type</code></td></tr><tr><td></td><td><code>// </code></td></tr><tr><td></td><td><code>// Generally, there are two ways that an</code></td></tr><tr><td></td><td><code>// </code></td></tr><tr><td></td><td><code>// instance of a class or structure can</code></td></tr><tr><td></td><td><code>// </code></td></tr><tr><td></td><td><code>// be instantiated.</code></td></tr></tbody></table> 
<p><a name="_label2_3"></a></p> 
<h4>4、Replace(String, String, MatchEvaluator, RegexOptions, TimeSpan)</h4> 
<p>在入参字符串（input）中，进行正则表达式（pattern）的匹配，匹配成功的，传递给 MatchEvaluator 委托（evaluator）处理完成后，替换原匹配值。</p> 
<p>RegexOptions 为匹配操作配置项（<em>关于 RegexOptions 详见官网：<a href="https://learn.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regexoptions?view=net-7.0" rel="nofollow" title="RegexOptions 枚举">RegexOptions 枚举</a></em>），TimeSpan 为超时时间间隔。</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>public static string Replace (string input, string pattern, </code></td></tr><tr><td></td><td><code>System.Text.RegularExpressions.MatchEvaluator evaluator, </code></td></tr><tr><td></td><td><code>System.Text.RegularExpressions.RegexOptions options, </code></td></tr><tr><td></td><td><code>TimeSpan matchTimeout);</code></td></tr></tbody></table> 
<p>下面是一个示例：</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 目的：将输入的每个单词中的字母顺序随机打乱，再一起输出</code></td></tr><tr><td></td><td><code>static void Main(string[] args)</code></td></tr><tr><td></td><td><code>{<!-- --></code></td></tr><tr><td></td><td><code>string words = "letter alphabetical missing lack release " +</code></td></tr><tr><td></td><td><code>"penchant slack acryllic laundry cease";</code></td></tr><tr><td></td><td><code>string pattern = @"\w+ # Matches all the characters in a word.";</code></td></tr><tr><td></td><td><code>MatchEvaluator evaluator = new MatchEvaluator(WordScrambler); // WordScrambler：回调函数</code></td></tr><tr><td></td><td><code>Console.WriteLine("Original words:");</code></td></tr><tr><td></td><td><code>Console.WriteLine(words);</code></td></tr><tr><td></td><td><code>Console.WriteLine();</code></td></tr><tr><td></td><td><code>try</code></td></tr><tr><td></td><td><code>{<!-- --></code></td></tr><tr><td></td><td><code>Console.WriteLine("Scrambled words:");</code></td></tr><tr><td></td><td><code>Console.WriteLine(Regex.Replace(words, pattern, evaluator,</code></td></tr><tr><td></td><td><code>RegexOptions.IgnorePatternWhitespace, TimeSpan.FromSeconds(2)));</code></td></tr><tr><td></td><td><code>}</code></td></tr><tr><td></td><td><code>catch (RegexMatchTimeoutException)</code></td></tr><tr><td></td><td><code>{<!-- --></code></td></tr><tr><td></td><td><code>Console.WriteLine("Word Scramble operation timed out.");</code></td></tr><tr><td></td><td><code>Console.WriteLine("Returned words:");</code></td></tr><tr><td></td><td><code>}</code></td></tr><tr><td></td><td><code>}</code></td></tr><tr><td></td><td><code>/// &lt;summary&gt;</code></td></tr><tr><td></td><td><code>/// 回调：对全部匹配项逐一进行操作</code></td></tr><tr><td></td><td><code>/// &lt;/summary&gt;</code></td></tr><tr><td></td><td><code>/// &lt;param name="match"&gt;&lt;/param&gt;</code></td></tr><tr><td></td><td><code>/// &lt;returns&gt;&lt;/returns&gt;</code></td></tr><tr><td></td><td><code>public static string WordScrambler(Match match)</code></td></tr><tr><td></td><td><code>{<!-- --></code></td></tr><tr><td></td><td><code>int arraySize = match.Value.Length;</code></td></tr><tr><td></td><td><code>double[] keys = new double[arraySize]; // 存放随机数</code></td></tr><tr><td></td><td><code>char[] letters = new char[arraySize]; // 存放字母</code></td></tr><tr><td></td><td><code>Random rnd = new Random();</code></td></tr><tr><td></td><td><code>for (int ctr = 0; ctr &lt; match.Value.Length; ctr++)</code></td></tr><tr><td></td><td><code>{<!-- --></code></td></tr><tr><td></td><td><code>keys[ctr] = rnd.NextDouble(); // 生成随机数，用于重新排序</code></td></tr><tr><td></td><td><code>letters[ctr] = match.Value[ctr]; // 将输入参单词数拆解为字母数组</code></td></tr><tr><td></td><td><code>}</code></td></tr><tr><td></td><td><code>Array.Sort(keys, letters, 0, arraySize, Comparer.Default); // 重新根据随机数大小排序</code></td></tr><tr><td></td><td><code>return new String(letters);</code></td></tr><tr><td></td><td><code>}</code></td></tr><tr><td></td><td><code>// 输出结果：</code></td></tr><tr><td></td><td><code>// Original words:</code></td></tr><tr><td></td><td><code>// letter alphabetical missing lack release penchant slack acryllic laundry cease</code></td></tr><tr><td></td><td><code>// </code></td></tr><tr><td></td><td><code>// Scrambled words:</code></td></tr><tr><td></td><td><code>// eltetr aeplbtaiaclh ignisms lkac elsaree nchetapn acksl lcyaricl udarnly casee</code></td></tr></tbody></table> 
<p><a href="https://www.cnblogs.com/czzj/p/ReplaceInfo.html#_labelTop" rel="nofollow" title="回到顶部">回到顶部</a><a name="_label3"></a></p> 
<h3>三、关于 Replace 的实际需求简单示例</h3> 
<p><a name="_label3_0"></a></p> 
<h4>1、全部替换匹配项</h4> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>string input = "Instantiating Instantiating Instantiating Instantiating";</code></td></tr><tr><td></td><td><code>Console.WriteLine("----原内容----");</code></td></tr><tr><td></td><td><code>Console.WriteLine(input);</code></td></tr><tr><td></td><td><code>string result = input.Replace("tiating","*******");</code></td></tr><tr><td></td><td><code>Console.WriteLine("----结果内容----");</code></td></tr><tr><td></td><td><code>Console.WriteLine(result);</code></td></tr><tr><td></td><td><code>// ----原内容----</code></td></tr><tr><td></td><td><code>// Instantiating Instantiating Instantiating Instantiating</code></td></tr><tr><td></td><td><code>// ----结果内容----</code></td></tr><tr><td></td><td><code>// Instan******* Instan******* Instan******* Instan*******</code></td></tr></tbody></table> 
<p><a name="_label3_1"></a></p> 
<h4>2、仅替换第一个匹配项</h4> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>string input = "Instantiating Instantiating Instantiating Instantiating";</code></td></tr><tr><td></td><td><code>Console.WriteLine("----原内容----");</code></td></tr><tr><td></td><td><code>Console.WriteLine(input);</code></td></tr><tr><td></td><td><code>Regex regex = new Regex("tiating");</code></td></tr><tr><td></td><td><code>string result = regex.Replace(input, "*******",1);</code></td></tr><tr><td></td><td><code>Console.WriteLine("----结果内容----");</code></td></tr><tr><td></td><td><code>Console.WriteLine(result);</code></td></tr><tr><td></td><td><code>// ----原内容----</code></td></tr><tr><td></td><td><code>// Instantiating Instantiating Instantiating Instantiating</code></td></tr><tr><td></td><td><code>// ----结果内容----</code></td></tr><tr><td></td><td><code>// Instan******* Instantiating Instantiating Instantiating</code></td></tr></tbody></table> 
<p><a name="_label3_2"></a></p> 
<h4>3、仅替换最后一个匹配项</h4> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>string input = "Instantiating Instantiating Instantiating Instantiating";</code></td></tr><tr><td></td><td><code>Console.WriteLine("----原内容----");</code></td></tr><tr><td></td><td><code>Console.WriteLine(input);</code></td></tr><tr><td></td><td><code>Match match = Regex.Match(input, "tiating",RegexOptions.RightToLeft);</code></td></tr><tr><td></td><td><code>string first = input.Substring(0, match.Index);</code></td></tr><tr><td></td><td><code>string last = input.Length == first.Length + match.Length ? "" : </code></td></tr><tr><td></td><td><code>input.Substring(first.Length + match.Length,input.Length-(first.Length + match.Length));</code></td></tr><tr><td></td><td><code>string result = $"{first}*******{last}";</code></td></tr><tr><td></td><td><code>Console.WriteLine("----结果内容----");</code></td></tr><tr><td></td><td><code>Console.WriteLine(result);</code></td></tr><tr><td></td><td><code>// 两次测试结果：</code></td></tr><tr><td></td><td><code>// ----原内容----</code></td></tr><tr><td></td><td><code>// Instantiating Instantiating Instantiating Instantiating 345</code></td></tr><tr><td></td><td><code>// ----结果内容----</code></td></tr><tr><td></td><td><code>// Instantiating Instantiating Instantiating Instan******* 345</code></td></tr><tr><td></td><td><code>// ----原内容----</code></td></tr><tr><td></td><td><code>// Instantiating Instantiating Instantiating Instantiating</code></td></tr><tr><td></td><td><code>// ----结果内容----</code></td></tr><tr><td></td><td><code>// Instantiating Instantiating Instantiating Instan*******</code></td></tr></tbody></table> 
<p><em>参考：<a href="https://learn.microsoft.com/zh-cn/dotnet/api/system.string.replace?view=net-7.0#system-string-replace%28system-char-system-char%29" rel="nofollow" title="String.Replace 方法">String.Replace 方法</a></em></p> 
<p><em>     <a href="https://learn.microsoft.com/zh-cn/dotnet/api/system.text.regularexpressions.regex.replace?view=net-7.0#system-text-regularexpressions-regex-replace%28system-string-system-string-system-string-system-text-regularexpressions-regexoptions%29" rel="nofollow" title="Regex.Replace 方法">Regex.Replace 方法</a></em></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c61759c27fdcc129cb82938d7604514d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">docker删除镜像和容器后,磁盘空间未释放</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/762562f87111e26c3921e2414e90bf42/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">通用唯一识别码 UUID</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>