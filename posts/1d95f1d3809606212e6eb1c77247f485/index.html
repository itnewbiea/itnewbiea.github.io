<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Eureka 虽然闭源了，但注册中心还有更多选择：Consul 使用详解 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Eureka 虽然闭源了，但注册中心还有更多选择：Consul 使用详解" />
<meta property="og:description" content="在上个月我们知道 Eureka 2.0 闭源了，但其实对国内的用户影响甚小，一方面国内大都使用的是 Eureka 1.X 系列，另一方面
Spring Cloud 支持很多服务发现的软件，Eureka 只是其中之一，下面是 Spring Cloud 支持的服务发现软件以及特性对比：
FeatureeuerkaConsulzookeeperetcd服务健康检查可配支持服务状态，内存，硬盘等(弱)长连接，keepalive连接心跳多数据中心—支持——kv 存储服务—支持支持支持一致性—raftpaxosraftcapapcacpcp使用接口(多语言能力)http（sidecar）支持 http 和 dns客户端http/grpcwatch 支持支持 long polling/大部分增量全量/支持long polling支持支持 long polling自身监控metricsmetrics—metrics安全—acl /httpsaclhttps 支持（弱）spring cloud 集成已支持已支持已支持已支持 在以上服务发现的软件中，Euerka 和 Consul 使用最为广泛。如果大家对注册中心的概念和 Euerka 不太了解的话， 可以参考我前期的文章：springcloud(二)：注册中心Eureka ，本篇文章主要给大家介绍 Spring Cloud Consul 的使用。
Consul 介绍 Consul 是 HashiCorp 公司推出的开源工具，用于实现分布式系统的服务发现与配置。与其他分布式服务注册与发现的方案，Consul 的方案更“一站式”，内置了服务注册与发现框 架、分布一致性协议实现、健康检查、Key/Value 存储、多数据中心方案，不再需要依赖其他工具（比如 ZooKeeper 等）。使用起来也较 为简单。Consul 使用 Go 语言编写，因此具有天然可移植性(支持Linux、windows和Mac OS X)；安装包仅包含一个可执行文件，方便部署，与 Docker 等轻量级容器可无缝配合。
Consul 的优势：
使用 Raft 算法来保证一致性, 比复杂的 Paxos 算法更直接. 相比较而言, zookeeper 采用的是 Paxos, 而 etcd 使用的则是 Raft。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1d95f1d3809606212e6eb1c77247f485/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-20T07:36:00+08:00" />
<meta property="article:modified_time" content="2018-07-20T07:36:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Eureka 虽然闭源了，但注册中心还有更多选择：Consul 使用详解</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="rich_media_content" id="js_content"> 
 <p><img src="https://images2.imgbox.com/9b/ab/GqOniU7T_o.png" alt="640?wx_fmt=png"><span style="color:rgb(62,62,62);font-family:Vollkorn, Palatino, Times;font-size:16px;letter-spacing:2px;word-spacing:2px;">在上个月我们知道 Eureka 2.0 闭源了，但其实对国内的用户影响甚小，一方面国内大都使用的是 Eureka 1.X 系列，另一方面</span></p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Spring Cloud 支持很多服务发现的软件，Eureka 只是其中之一，下面是 Spring Cloud 支持的服务发现软件以及特性对比：<br></p> 
 <table width="685" style="width:378px;"><thead style="font-size:inherit;color:inherit;line-height:inherit;"><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><th style="text-align:left;border-top-width:1px;border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">Feature</th><th style="text-align:left;border-top-width:1px;border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">euerka</th><th style="text-align:left;border-top-width:1px;border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">Consul</th><th style="text-align:left;border-top-width:1px;border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">zookeeper</th><th style="text-align:left;border-top-width:1px;border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">etcd</th></tr></thead><tbody style="font-size:inherit;color:inherit;line-height:inherit;border-width:0px;"><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">服务健康检查</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">可配支持</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">服务状态，内存，硬盘等</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">(弱)长连接，keepalive</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">连接心跳</td></tr><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">多数据中心</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">—</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">支持</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">—</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">—</td></tr><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">kv 存储服务</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">—</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">支持</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">支持</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">支持</td></tr><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">一致性</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">—</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">raft</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">paxos</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">raft</td></tr><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">cap</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">ap</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">ca</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">cp</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">cp</td></tr><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">使用接口(多语言能力)</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">http（sidecar）</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">支持 http 和 dns</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">客户端</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">http/grpc</td></tr><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">watch 支持</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">支持 long polling/大部分增量</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">全量/支持long polling</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">支持</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">支持 long polling</td></tr><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">自身监控</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">metrics</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">metrics</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">—</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">metrics</td></tr><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">安全</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">—</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">acl /https</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">acl</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">https 支持（弱）</td></tr><tr style="font-size:inherit;color:inherit;line-height:inherit;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgb(204,204,204);"><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">spring cloud 集成</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">已支持</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">已支持</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">已支持</td><td style="border-color:rgb(204,204,204);font-size:1em;color:inherit;line-height:inherit;">已支持</td></tr></tbody></table> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">在以上服务发现的软件中，Euerka 和 Consul 使用最为广泛。如果大家对注册中心的概念和 Euerka 不太了解的话， 可以参考我前期的文章：springcloud(二)：注册中心Eureka ，本篇文章主要给大家介绍 Spring Cloud Consul 的使用。</p> 
 <h3 style="font-size:18px;color:rgb(65,131,196);line-height:inherit;text-align:center;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;border-bottom:1px solid rgb(65,131,196);">Consul 介绍</span></h3> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Consul 是 HashiCorp 公司推出的开源工具，用于实现分布式系统的服务发现与配置。与其他分布式服务注册与发现的方案，Consul 的方案更“一站式”，内置了服务注册与发现框 架、分布一致性协议实现、健康检查、Key/Value 存储、多数据中心方案，不再需要依赖其他工具（比如 ZooKeeper 等）。使用起来也较 为简单。Consul 使用 Go 语言编写，因此具有天然可移植性(支持Linux、windows和Mac OS X)；安装包仅包含一个可执行文件，方便部署，与 Docker 等轻量级容器可无缝配合。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><strong style="color:rgb(65,131,196);font-size:inherit;line-height:inherit;">Consul 的优势：</strong></p> 
 <ul class="list-paddingleft-2"><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">使用 Raft 算法来保证一致性, 比复杂的 Paxos 算法更直接. 相比较而言, zookeeper 采用的是 Paxos, 而 etcd 使用的则是 Raft。</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">支持多数据中心，内外网的服务采用不同的端口进行监听。 多数据中心集群可以避免单数据中心的单点故障,而其部署则需要考虑网络延迟, 分片等情况等。 zookeeper 和 etcd 均不提供多数据中心功能的支持。</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">支持健康检查。 etcd 不提供此功能。</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">支持 http 和 dns 协议接口。 zookeeper 的集成较为复杂, etcd 只支持 http 协议。</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">官方提供 web 管理界面, etcd 无此功能。</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">综合比较, Consul 作为服务注册和配置管理的新星, 比较值得关注和研究。</span></p></li></ul> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><strong style="color:rgb(65,131,196);font-size:inherit;line-height:inherit;">特性：</strong></p> 
 <ul class="list-paddingleft-2"><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">服务发现</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">健康检查</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">Key/Value 存储</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">多数据中心</span></p></li></ul> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><strong style="color:rgb(65,131,196);font-size:inherit;line-height:inherit;">Consul 角色</strong></p> 
 <ul class="list-paddingleft-2"><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">client: 客户端, 无状态, 将 HTTP 和 DNS 接口请求转发给局域网内的服务端集群。</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">server: 服务端, 保存配置信息, 高可用集群, 在局域网内与本地客户端通讯, 通过广域网与其他数据中心通讯。 每个数据中心的 server 数量推荐为 3 个或是 5 个。</span></p></li></ul> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Consul 客户端、服务端还支持夸中心的使用，更加提高了它的高可用性。</p> 
 <figure style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"> 
  <img style="margin-left:auto;border-width:2px;border-style:none;border-color:rgb(238,238,238);font-size:inherit;color:inherit;line-height:inherit;" title="" src="https://images2.imgbox.com/0c/bf/ZbIDadTr_o.png" alt="640?wx_fmt=png"> 
  <figcaption style="font-size:.7em;color:rgb(153,153,153);line-height:inherit;text-align:center;"></figcaption> 
 </figure> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><strong style="color:rgb(65,131,196);font-size:inherit;line-height:inherit;">Consul 工作原理：</strong></p> 
 <figure style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"> 
  <img style="margin-left:auto;border-width:2px;border-style:none;border-color:rgb(238,238,238);font-size:inherit;color:inherit;line-height:inherit;" title="" src="https://images2.imgbox.com/3a/b9/IjsSkM2k_o.png" alt="640?wx_fmt=png"> 
  <figcaption style="font-size:.7em;color:rgb(153,153,153);line-height:inherit;text-align:center;"></figcaption> 
 </figure> 
 <ul class="list-paddingleft-2"><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">1、当 Producer 启动的时候，会向 Consul 发送一个 post 请求，告诉 Consul 自己的 IP 和 Port</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">2、Consul 接收到 Producer 的注册后，每隔10s（默认）会向 Producer 发送一个健康检查的请求，检验Producer是否健康</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">3、当 Consumer 发送 GET 方式请求 /api/address 到 Producer 时，会先从 Consul 中拿到一个存储服务 IP 和 Port 的临时表，从表中拿到 Producer 的 IP 和 Port 后再发送 GET 方式请求 /api/address</span></p></li><li><p><span style="font-size:inherit;color:inherit;line-height:inherit;">4、该临时表每隔10s会更新，只包含有通过了健康检查的 Producer</span></p></li></ul> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Spring Cloud Consul 项目是针对 Consul 的服务治理实现。Consul 是一个分布式高可用的系统，它包含多个组件，但是作为一个整体，在微服务架构中为我们的基础设施提供服务发现和服务配置的工具。</p> 
 <h3 style="font-size:18px;color:rgb(65,131,196);line-height:inherit;text-align:center;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;border-bottom:1px solid rgb(65,131,196);">Consul VS Eureka</span></h3> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Eureka 是一个服务发现工具。该体系结构主要是客户端/服务器，每个数据中心有一组 Eureka 服务器，通常每个可用区域一个。通常 Eureka 的客户使用嵌入式 SDK 来注册和发现服务。对于非本地集成的客户，使用功能区边框等透过 Eureka 透明地发现服务。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Eureka 提供了一个弱一致的服务视图，使用尽力而为复制。当客户端向服务器注册时，该服务器将尝试复制到其他服务器，但不提供保证。服务注册的生存时间（TTL）较短，要求客户端对服务器心存感激。不健康的服务或节点将停止心跳，导致它们超时并从注册表中删除。发现请求可以路由到任何服务，由于尽力而为的复制，这些服务可能会导致陈旧或丢失数据。这个简化的模型允许简单的群集管理和高可扩展性。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">领事提供了一套超级功能，包括更丰富的健康检查，关键/价值存储以及多数据中心意识。Consul 需要每个数据中心都有一套服务器，以及每个客户端的代理，类似于使用像 Ribbon 这样的服务。Consul 代理允许大多数应用程序成为 Consul 不知情者，通过配置文件执行服务注册并通过 DNS 或负载平衡器 sidecars 发现。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Consul 提供强大的一致性保证，因为服务器使用Raft协议复制状态 。Consul 支持丰富的健康检查，包括 TCP，HTTP，Nagios / Sensu 兼容脚本或基于 Eureka 的 TTL。客户端节点参与基于八卦的健康检查，该检查分发健康检查工作，而不像集中式心跳检测那样成为可扩展性挑战。发现请求被路由到选举出来的领事领导，这使他们默认情况下强烈一致。允许陈旧读取的客户端使任何服务器都可以处理他们的请求，从而实现像Eureka这样的线性可伸缩性。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Consul 强烈的一致性意味着它可以作为领导选举和集群协调的锁定服务。Eureka 不提供类似的保证，并且通常需要为需要执行协调或具有更强一致性需求的服务运行 ZooKeeper。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Consul 提供了支持面向服务的体系结构所需的一系列功能。这包括服务发现，还包括丰富的运行状况检查，锁定，密钥/值，多数据中心联合，事件系统和 ACL。Consul 和 consul-template 和 envconsul 等工具生态系统都试图尽量减少集成所需的应用程序更改，以避免需要通过SDK进行本地集成。Eureka是一个更大的 Netflix OSS 套件的一部分，该套件预计应用程序相对均匀且紧密集成。因此，Eureka只解决了一小部分问题，希望ZooKeeper等其他工具可以一起使用。<br style="font-size:inherit;color:inherit;line-height:inherit;">在 CAP 中，Consul 使用 ca 体系结构，有利于实现可用性的一致性。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Consul 强一致性(C)带来的是：</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">服务注册相比 Eureka 会稍慢一些。因为 Consul 的 raft 协议要求必须过半数的节点都写入成功才认为注册成功 <br style="font-size:inherit;color:inherit;line-height:inherit;">Leader 挂掉时，重新选举期间整个 Consul 不可用。保证了强一致性但牺牲了可用性。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Eureka 保证高可用(A)和最终一致性：</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">服务注册相对要快，因为不需要等注册信息 replicate 到其他节点，也不保证注册信息是否 replicate 成功<br style="font-size:inherit;color:inherit;line-height:inherit;">当数据出现不一致时，虽然A, B上的注册信息不完全相同，但每个Eureka节点依然能够正常对外提供服务，这会出现查询服务信息时如果请求A查不到，但请求B就能查到。如此保证了可用性但牺牲了一致性。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">其他方面，eureka 就是个 servlet 程序，跑在 servlet 容器中; Consul 则是 go 编写而成。</p> 
 <h3 style="font-size:18px;color:rgb(65,131,196);line-height:inherit;text-align:center;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;border-bottom:1px solid rgb(65,131,196);">Consul 安装</span></h3> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Consul 不同于 Eureka 需要单独安装，访问Consul 官网下载 Consul 的最新版本，我这里是 consul_1.2.1。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">根据不同的系统类型选择不同的安装包，从下图也可以看出 Consul 支持所有主流系统。</p> 
 <p><img src="https://images2.imgbox.com/14/2b/O1m9MBnt_o.png" alt="640?wx_fmt=png"></p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">我这里以 Windows 为例，下载下来是一个 consul_1.2.1_windows_amd64.zip 的压缩包，解压是是一个 consul.exe 的执行文件。</p> 
 <figure style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"> 
  <img style="margin-left:auto;border-width:2px;border-style:none;border-color:rgb(238,238,238);font-size:inherit;color:inherit;line-height:inherit;" title="" src="https://images2.imgbox.com/3b/7b/2reMnm0o_o.png" alt="640?wx_fmt=png"> 
  <figcaption style="font-size:.7em;color:rgb(153,153,153);line-height:inherit;text-align:center;"></figcaption> 
 </figure> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">cd 到对应的目录下，使用 cmd 启动 Consul</p> 
 <pre class="has"><code class="language-javascript">cd D:\Common Files\consul#cmd启动：consul agent -dev        # -dev表示开发模式运行，另外还有-server表示服务模式运行</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">为了方便期间，可以在同级目录下创建一个 run.bat 脚本来启动，脚本内容如下：</p> 
 <pre class="has"><code class="language-javascript">consul agent -devpause</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">启动结果如下：</p> 
 <figure style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"> 
  <img style="margin-left:auto;border-width:2px;border-style:none;border-color:rgb(238,238,238);font-size:inherit;color:inherit;line-height:inherit;" title="" src="https://images2.imgbox.com/bb/6b/HzoXTgvx_o.png" alt="640?wx_fmt=png"> 
  <figcaption style="font-size:.7em;color:rgb(153,153,153);line-height:inherit;text-align:center;"></figcaption> 
 </figure> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">启动成功之后访问：<code style="margin-left:2px;font-size:.9em;color:rgb(199,37,78);line-height:inherit;background:rgb(248,248,248);border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">http://localhost:8500</code>，可以看到 Consul 的管理界面</p> 
 <figure style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"> 
  <img style="margin-left:auto;border-width:2px;border-style:none;border-color:rgb(238,238,238);font-size:inherit;color:inherit;line-height:inherit;" title="" src="https://images2.imgbox.com/cc/c3/0995o0cZ_o.png" alt="640?wx_fmt=png"> 
  <figcaption style="font-size:.7em;color:rgb(153,153,153);line-height:inherit;text-align:center;"></figcaption> 
 </figure> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">这样就意味着我们的 Consul 服务启动成功了。</p> 
 <h3 style="font-size:18px;color:rgb(65,131,196);line-height:inherit;text-align:center;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;border-bottom:1px solid rgb(65,131,196);">Consul 服务端</span></h3> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">接下来我们开发 Consul 的服务端，我们创建一个 spring-cloud-consul-producer 项目</p> 
 <h4 style="font-size:17px;color:rgb(65,131,196);line-height:inherit;border-left:5px solid rgb(65,131,196);font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;">添加依赖包</span></h4> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">依赖包如下：</p> 
 <pre class="has"><code class="language-javascript">&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;        &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;        &lt;scope&gt;test&lt;/scope&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;</code></pre> 
 <ul class="list-paddingleft-2"><li><p><code style="margin-left:.2em;font-size:.9em;color:rgb(199,37,78);line-height:inherit;border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">spring-boot-starter-actuator</code> 健康检查依赖于此包。</p></li><li><p><code style="margin-left:.2em;font-size:.9em;color:rgb(199,37,78);line-height:inherit;border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">spring-cloud-starter-consul-discovery</code> Spring Cloud Consul 的支持。</p></li></ul> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Spring Boot 版本使用的是 2.0.3.RELEASE，Spring Cloud 最新版本是 Finchley.RELEASE 依赖于 Spring Boot 2.x.</p> 
 <pre class="has"><code class="language-javascript">&lt;parent&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;    &lt;version&gt;2.0.3.RELEASE&lt;/version&gt;    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&lt;/parent&gt;&lt;dependencyManagement&gt;    &lt;dependencies&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;            &lt;type&gt;pom&lt;/type&gt;            &lt;scope&gt;import&lt;/scope&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;&lt;/dependencyManagement&gt;</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">完整的 pom.xml 文件大家可以参考示例源码。</p> 
 <h4 style="font-size:17px;color:rgb(65,131,196);line-height:inherit;border-left:5px solid rgb(65,131,196);font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;">配置文件</span></h4> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">配置文件内容如下</p> 
 <pre class="has"><code class="language-javascript">spring.application.name=spring-cloud-consul-producerserver.port=8501spring.cloud.consul.host=localhostspring.cloud.consul.port=8500#注册到consul的服务名称spring.cloud.consul.discovery.serviceName=service-producer</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Consul 的地址和端口号默认是 localhost:8500 ，如果不是这个地址可以自行配置。<br style="font-size:inherit;color:inherit;line-height:inherit;"><code style="margin-left:2px;font-size:.9em;color:rgb(199,37,78);line-height:inherit;background:rgb(248,248,248);border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">spring.cloud.consul.discovery.serviceName</code> 是指注册到 Consul 的服务名称，后期客户端会根据这个名称来进行服务调用。</p> 
 <h4 style="font-size:17px;color:rgb(65,131,196);line-height:inherit;border-left:5px solid rgb(65,131,196);font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;">启动类</span></h4> 
 <pre class="has"><code class="language-javascript">@SpringBootApplication@EnableDiscoveryClientpublic class ConsulProducerApplication {    public static void main(String[] args) {        SpringApplication.run(ConsulProducerApplication.class, args);    }}</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">添加了 <code style="margin-left:2px;font-size:.9em;color:rgb(199,37,78);line-height:inherit;background:rgb(248,248,248);border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">@EnableDiscoveryClient</code> 注解表示支持服务发现。</p> 
 <h4 style="font-size:17px;color:rgb(65,131,196);line-height:inherit;border-left:5px solid rgb(65,131,196);font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;">提供服务</span></h4> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">我们在创建一个 Controller，推文提供 hello 的服务。</p> 
 <pre class="has"><code class="language-javascript">@RestControllerpublic class HelloController {    @RequestMapping("/hello")    public String hello() {        return "helle consul";    }}</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">为了模拟注册均衡负载复制一份上面的项目重命名为 spring-cloud-consul-producer-2 ,修改对应的端口为 8502，修改 hello 方法的返回值为："helle consul two"，修改完成后依次启动两个项目。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">这时候我们再次在浏览器访问地址：http://localhost:8500，显示如下：</p> 
 <p style="text-align:center;"><img src="https://images2.imgbox.com/1d/84/DemaNzJM_o.png" alt="640?wx_fmt=png"></p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">我们发现页面多了 service-producer 服务，点击进去后页面显示有两个服务提供者：<br></p> 
 <figure style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"> 
  <img style="margin-left:auto;border-width:2px;border-style:none;border-color:rgb(238,238,238);font-size:inherit;color:inherit;line-height:inherit;" title="" src="https://images2.imgbox.com/a4/62/ZetFR864_o.png" alt="640?wx_fmt=png"> 
  <figcaption style="font-size:.7em;color:rgb(153,153,153);line-height:inherit;text-align:center;"></figcaption> 
 </figure> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">这样服务提供者就准备好了。</p> 
 <h3 style="font-size:18px;color:rgb(65,131,196);line-height:inherit;text-align:center;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;border-bottom:1px solid rgb(65,131,196);">Consul 消费端</span></h3> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">我们创建一个 spring-cloud-consul-consumer 项目，pom 文件和上面示例保持一致。</p> 
 <h4 style="font-size:17px;color:rgb(65,131,196);line-height:inherit;border-left:5px solid rgb(65,131,196);font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;">配置文件</span></h4> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">配置文件内容如下</p> 
 <pre class="has"><code class="language-javascript">spring.application.name=spring-cloud-consul-consumerserver.port=8503spring.cloud.consul.host=127.0.0.1spring.cloud.consul.port=8500#设置不需要注册到 consul 中spring.cloud.consul.discovery.register=false</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">客户端可以设置注册到 Consul 中，也可以不注册到 Consul 注册中心中，根据我们的业务来选择，只需要在使用服务时通过 Consul 对外提供的接口获取服务信息即可。</p> 
 <h4 style="font-size:17px;color:rgb(65,131,196);line-height:inherit;border-left:5px solid rgb(65,131,196);font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;">启动类</span></h4> 
 <pre class="has"><code class="language-javascript">@SpringBootApplicationpublic class ConsulConsumerApplication {    public static void main(String[] args) {        SpringApplication.run(ConsulConsumerApplication.class, args);    }}</code></pre> 
 <h4 style="font-size:17px;color:rgb(65,131,196);line-height:inherit;border-left:5px solid rgb(65,131,196);font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:inherit;color:inherit;line-height:inherit;">进行测试</span></h4> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">我们先来创建一个 ServiceController ,试试如果去获取 Consul 中的服务。</p> 
 <pre class="has"><code class="language-javascript">@RestControllerpublic class ServiceController {    @Autowired    private LoadBalancerClient loadBalancer;    @Autowired    private DiscoveryClient discoveryClient;   /**     * 获取所有服务     */    @RequestMapping("/services")    public Object services() {        return discoveryClient.getInstances("service-producer");    }    /**     * 从所有服务中选择一个服务（轮询）     */    @RequestMapping("/discover")    public Object discover() {        return loadBalancer.choose("service-producer").getUri().toString();    }}</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">Controller 中有俩个方法，一个是获取所有服务名为<code style="margin-left:2px;font-size:.9em;color:rgb(199,37,78);line-height:inherit;background:rgb(248,248,248);border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">service-producer</code>的服务信息并返回到页面，一个是随机从服务名为<code style="margin-left:2px;font-size:.9em;color:rgb(199,37,78);line-height:inherit;background:rgb(248,248,248);border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">service-producer</code>的服务中获取一个并返回到页面。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">添加完 ServiceController 之后我们启动项目，访问地址：<code style="margin-left:2px;font-size:.9em;color:rgb(199,37,78);line-height:inherit;background:rgb(248,248,248);border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">http://localhost:8503/services</code>，返回：</p> 
 <pre class="has"><code class="language-javascript">[{"serviceId":"service-producer","host":"windows10.microdone.cn","port":8501,"secure":false,"metadata":{"secure":"false"},"uri":"http://windows10.microdone.cn:8501","scheme":null},{"serviceId":"service-producer","host":"windows10.microdone.cn","port":8502,"secure":false,"metadata":{"secure":"false"},"uri":"http://windows10.microdone.cn:8502","scheme":null}]</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">发现我们刚才创建的端口为 8501 和 8502 的两个服务端都存在。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">多次访问地址：<code style="margin-left:2px;font-size:.9em;color:rgb(199,37,78);line-height:inherit;background:rgb(248,248,248);border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">http://localhost:8503/discover</code>，页面会交替返回下面信息：</p> 
 <pre class="has"><code class="language-javascript">http://windows10.microdone.cn:8501http://windows10.microdone.cn:8502...</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">说明 8501 和 8501 的两个服务会交替出现，从而实现了获取服务端地址的均衡负载。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">大多数情况下我们希望使用均衡负载的形式去获取服务端提供的服务，因此使用第二种方法来模拟调用服务端提供的 hello 方法。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">创建 CallHelloController ：</p> 
 <pre class="has"><code class="language-javascript">@RestControllerpublic class CallHelloController {    @Autowired    private LoadBalancerClient loadBalancer;    @RequestMapping("/call")    public String call() {        ServiceInstance serviceInstance = loadBalancer.choose("service-producer");        System.out.println("服务地址：" + serviceInstance.getUri());        System.out.println("服务名称：" + serviceInstance.getServiceId());        String callServiceResult = new RestTemplate().getForObject(serviceInstance.getUri().toString() + "/hello", String.class);        System.out.println(callServiceResult);        return callServiceResult;    }}</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">使用 RestTemplate 进行远程调用。添加完之后重启 spring-cloud-consul-consumer 项目。在浏览器中访问地址：<code style="margin-left:2px;font-size:.9em;color:rgb(199,37,78);line-height:inherit;background:rgb(248,248,248);border-width:1px;border-style:solid;border-color:rgb(204,204,204);letter-spacing:normal;">http://localhost:8503/call</code>，依次返回结果如下：</p> 
 <pre class="has"><code class="language-javascript">helle consulhelle consul two...</code></pre> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;">说明我们已经成功的调用了 Consul 服务端提供的服务，并且实现了服务端的均衡负载功能。通过今天的实践我们发现 Consul 提供的服务发现易用、强大。</p> 
 <p style="font-size:16px;color:rgb(62,62,62);line-height:inherit;font-family:Vollkorn, Palatino, Times;letter-spacing:2px;word-spacing:2px;"><span style="font-size:12px;"><strong style="color:rgb(65,131,196);font-size:inherit;line-height:inherit;">示例代码:https://github.com/ityouknow/spring-cloud-examples</strong></span></p> 
 <p><span style="font-size:16px;color:rgb(0,252,255);">推荐阅读：</span></p> 
 <p><a href="http://mp.weixin.qq.com/s?__biz=MzI4NDY5Mjc1Mg==&amp;mid=2247484256&amp;idx=1&amp;sn=a3eccb593195b6753749f10084bbaf8e&amp;chksm=ebf6db1fdc81520967db536d290f703e9e458e4aa1a9319e0aff60f737c9033538bd4ce86855&amp;scene=21#wechat_redirect" rel="nofollow" class="mpui-mass-list__media__title" style="text-decoration:underline;font-size:14px;"><span style="font-size:14px;">阿里Dubbo疯狂更新，关Spring Cloud什么事？</span></a><br></p> 
 <p><a href="http://mp.weixin.qq.com/s?__biz=MzI4NDY5Mjc1Mg==&amp;mid=2247483976&amp;idx=1&amp;sn=8772578e5c096e0da99b32f3f005e05a&amp;chksm=ebf6da37dc815321efa954e2e135c36ac2df91bd3b892a6b1a5f8f6726b01e8751c42479e420&amp;scene=21#wechat_redirect" rel="nofollow" class="mpui-mass-list__media__title" style="text-decoration:underline;font-size:14px;"><span style="font-size:14px;">Spring Cloud在国内中小型公司能用起来吗？</span></a></p> 
 <p><a href="https://blog.csdn.net/FL63Zv9Zou86950w/article/details/78496128">中小型互联网公司微服务实践-经验和教训</a></p> 
 <p><span style="text-decoration:underline;font-size:14px;"><a href="http://mp.weixin.qq.com/s?__biz=MzI4NDY5Mjc1Mg==&amp;mid=2247484118&amp;idx=1&amp;sn=cd0b5768984a4ee95ff6b77a7186ab54&amp;chksm=ebf6daa9dc8153bf9f9a1dfaf80ccabef7cae701e3b77010af5ed67821938407c7bd53927db3&amp;scene=21#wechat_redirect" rel="nofollow" class="mpui-mass-list__media__title" style="text-decoration:underline;font-size:14px;">从架构演进的角度聊聊Spring Cloud都做了些什么？</a></span></p> 
 <p style="min-height:1em;font-weight:bold;"><span style="color:rgb(136,136,136);font-size:14px;">END</span></p> 
 <br> 
 <p style="min-height:1em;color:rgb(51,51,51);text-align:center;"><img width="390" src="https://images2.imgbox.com/fa/d0/foy8kzGd_o.png" alt="640?wx_fmt=png"></p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9cc187eb7e339f831b2b104e58f8459e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Leetcode——分割等和</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/10ff49187f4db3a7276cc7ffaec9b0fc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">详细及易读懂的  大津法（OTSU）原理 和 比opencv自带更快的算法实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>