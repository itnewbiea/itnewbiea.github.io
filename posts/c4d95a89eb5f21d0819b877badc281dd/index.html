<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据更新 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据更新" />
<meta property="og:description" content="数据更新 一、 插入数据1. 插入元组2. 插入子查询结果 二、修改数据1. 修改某一个元组的值2. 修改多个元组的值3. 带子查询的修改语句 三、删除数据1. 删除某一个元组的值2. 删除多个元组的值3. 带子查询的删除语句 一、 插入数据 SQL 的数据插入语句 insert 通常有两种形式，一种是插入一个元组，另一种是插入子查询结果。后者可以一次插入多个元组。
1. 插入元组 插入元组的 insert 语句格式为
insert into &lt;表名&gt; [(&lt;属性列 1&gt;[,&lt;属性列 2&gt;]...)] values (&lt;常量 1&gt;[,&lt;常量 2&gt;]...); 其功能是将新元组插入指定表中。其中新元组的 属性列1 的值为 常量1 ，属性列2 的值为 常量2 ，…
into 子句中没有出现的属性列，新元组在这些列上将取空值，但必须注意的是，在表定义时说明了 not all 的属性列不能取空值，否则会出错
如果 into 子句中没有指明任何属性列名，则新插入的元组必须在每个属性列上均有值
例1：将一个新学生元组 （学号：201215128，姓名：陈东，性别：男，所在系：CS，年龄：18）插入到 Student 表中。 insert into Student (Sno,Sname,Ssex,Sdept,Sage) values (&#39;201215128&#39;,&#39;陈东&#39;,&#39;男&#39;,&#39;CS&#39;,18); 在 into 子句中指出了表名 Student ，并指出了新增加的元组在哪些属性上要赋值，属性的顺序可以与 create table 时表的顺序（建表时列的顺序）不一样，values 子句对新元组的各属性赋值，字符串常数要用单引号（英文符号）括起来" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c4d95a89eb5f21d0819b877badc281dd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-09T22:57:27+08:00" />
<meta property="article:modified_time" content="2019-09-09T22:57:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据更新</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>数据更新</h4> 
 <ul><li><ul><li><ul><li><a href="#__4" rel="nofollow">一、 插入数据</a></li><li><ul><li><a href="#1__8" rel="nofollow">1. 插入元组</a></li><li><a href="#2___68" rel="nofollow">2. 插入子查询结果</a></li></ul> 
    </li><li><a href="#_102" rel="nofollow">二、修改数据</a></li><li><ul><li><a href="#1__114" rel="nofollow">1. 修改某一个元组的值</a></li><li><a href="#2__124" rel="nofollow">2. 修改多个元组的值</a></li><li><a href="#3__133" rel="nofollow">3. 带子查询的修改语句</a></li></ul> 
    </li><li><a href="#_148" rel="nofollow">三、删除数据</a></li><li><ul><li><a href="#1__160" rel="nofollow">1. 删除某一个元组的值</a></li><li><a href="#2__172" rel="nofollow">2. 删除多个元组的值</a></li><li><a href="#3__185" rel="nofollow">3. 带子查询的删除语句</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="__4"></a>一、 插入数据</h4> 
<p>SQL 的数据插入语句 insert 通常有两种形式，一种是插入一个元组，另一种是插入子查询结果。后者可以一次插入多个元组。</p> 
<h5><a id="1__8"></a>1. 插入元组</h5> 
<p>插入元组的 insert 语句格式为</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>属性列 <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>属性列 <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>常量 <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>常量 <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>其功能是将新元组插入指定表中。其中新元组的 属性列1 的值为 常量1 ，属性列2 的值为 常量2 ，…</p> 
<p>into 子句中没有出现的属性列，新元组在这些列上将取空值，但必须注意的是，在表定义时说明了 not all 的属性列不能取空值，否则会出错</p> 
<p>如果 into 子句中没有指明任何属性列名，则新插入的元组必须在每个属性列上均有值</p> 
<ul><li><strong>例1：将一个新学生元组 （学号：201215128，姓名：陈东，性别：男，所在系：CS，年龄：18）插入到 Student 表中。</strong></li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span> Student <span class="token punctuation">(</span>Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Ssex<span class="token punctuation">,</span>Sdept<span class="token punctuation">,</span>Sage<span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'201215128'</span><span class="token punctuation">,</span><span class="token string">'陈东'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'CS'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在 into 子句中指出了表名 Student ，并指出了新增加的元组在哪些属性上要赋值，属性的顺序可以与 create table 时表的顺序（建表时列的顺序）不一样，values 子句对新元组的各属性赋值，<strong>字符串常数要用单引号（英文符号）括起来</strong></p> 
<ul><li><strong>例2：将学生张成民的信息插入到 Student 表中</strong></li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span> Student
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'201215126'</span><span class="token punctuation">,</span><span class="token string">'张成民'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">'CS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>与例1不同的是，into 子句中只指出了表名，没有指出属性名。这表示新元组在表的所有属性列上都有指定值，属性列的次序与 create table 时表的顺序（建表时列的顺序）相同</p> 
<p>values 子句对新元组的各属性列赋值，一定要注意值与属性列要一一对应，如果没有对应，则可能会造成数据类型不匹配出错</p> 
<ul><li><strong>例3：插入一条选课记录（‘201215128’，‘1’）。</strong></li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span> SC<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span>Cno<span class="token punctuation">)</span>
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'201215128'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>关系型数据库管理系统将在新插入记录的 Grade 列上自动地赋空值。</p> 
<p>或者：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span> SC
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'201215128'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>因为<strong>没有指出 SC 的属性名，在 Grade 列上要明确给出空值</strong>。</p> 
<h5><a id="2___68"></a>2. 插入子查询结果</h5> 
<p>子查询不仅可以嵌套在 select 语句中用以构造父查询的条件，也可以嵌套在 insert 语句中用以生成要插入的批量数据。</p> 
<p>插入子查询结果的 insert 语句格式为</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>属性列<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>属性列<span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>
子查询<span class="token punctuation">;</span>
</code></pre> 
<ul><li>例1：对每一个系，求学生的平均年龄，并把结果存入数据库。</li></ul> 
<p>首先在数据库中建立一个新表，其中一列存放系名，另一列存放相应的学生平均年龄</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> Dept_age
		<span class="token punctuation">(</span>Sdept <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>
         Avg_age samllint<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>然后对 Student 表按系分组求平均年龄，再把系名和平均年龄存入新表中</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span> Dept_age<span class="token punctuation">(</span>Sdept<span class="token punctuation">,</span>Avg_age<span class="token punctuation">)</span>
<span class="token keyword">select</span> Sdept<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>Sage<span class="token punctuation">)</span>
<span class="token keyword">from</span> Student
<span class="token keyword">group</span> <span class="token keyword">by</span> Sdept<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_102"></a>二、修改数据</h4> 
<p>修改操作又称为更新操作，其语句一般格式为</p> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span>
<span class="token keyword">set</span> <span class="token operator">&lt;</span>列名<span class="token operator">&gt;=</span><span class="token operator">&lt;</span>表达式<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token operator">&gt;=</span><span class="token operator">&lt;</span>表达式<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token keyword">where</span> <span class="token operator">&lt;</span>条件<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>其功能是修改指定表中满足 where 子句条件的元组。其中 set 子句给出 &lt;表达式&gt; 的值用于取代相应的属性列值。如果省略 where 子句，则表示要修改表中所有元组。</p> 
<h5><a id="1__114"></a>1. 修改某一个元组的值</h5> 
<ul><li>例1：将学生 201215121 的年龄改为22岁。</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> Student
<span class="token keyword">set</span> Sage<span class="token operator">=</span><span class="token number">22</span>
<span class="token keyword">where</span> Sno<span class="token operator">=</span><span class="token string">'201215121'</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2__124"></a>2. 修改多个元组的值</h5> 
<ul><li>例1：将所有学生的年龄增加1岁。</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> Student
<span class="token keyword">set</span> Sage<span class="token operator">=</span>Sage<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="3__133"></a>3. 带子查询的修改语句</h5> 
<p>子查询也可以嵌套在 update 语句中，用以构造修改的条件。</p> 
<ul><li>例1：将计算机系全体学生的成绩置零</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> SC
<span class="token keyword">set</span> Grade<span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">where</span> Sno <span class="token operator">in</span> 
	<span class="token punctuation">(</span><span class="token keyword">select</span> Sno 
     <span class="token keyword">from</span> Student
     <span class="token keyword">where</span> Sdept<span class="token operator">=</span><span class="token string">'CS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_148"></a>三、删除数据</h4> 
<p>删除语句的一般格式为</p> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span> 
<span class="token keyword">from</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span>
<span class="token punctuation">[</span><span class="token keyword">where</span><span class="token operator">&lt;</span>条件<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="1__160"></a>1. 删除某一个元组的值</h5> 
<ul><li>例1：删除学号为 201215128 的学生记录</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span> 
<span class="token keyword">from</span> Student
<span class="token keyword">where</span> Sno<span class="token operator">=</span><span class="token string">'201215128'</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2__172"></a>2. 删除多个元组的值</h5> 
<ul><li>例1：删除所有的学生选课记录</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span>
<span class="token keyword">from</span> SC
</code></pre> 
<p>这条 delete 语句将使 SC 成为空表，它删除了 SC 的所有元组</p> 
<h5><a id="3__185"></a>3. 带子查询的删除语句</h5> 
<p>子查询同样可以嵌套在 delete 语句中，用以构造执行删除操作的条件</p> 
<ul><li>例1：删除计算机系所有学生的选课记录</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span>
form SC
<span class="token keyword">where</span> Sno <span class="token operator">in</span>
		<span class="token punctuation">(</span><span class="token keyword">select</span> Sno
         <span class="token keyword">from</span> Student
         <span class="token keyword">where</span> Sdept<span class="token operator">=</span><span class="token string">'CS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>对某个基本表中数据的增，删，改操作可能会破坏参照完整性，后面会详细说明如何进行参照完整性检测和控制。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ff38ab0024f7d4c664cbf5d3d29b74e3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">介绍Jackson JsonNode和ObjectNode</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/23e132a51cd0486351ec6ed03f2b40be/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">go语言解析 map[string]interface{} 数据格式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>