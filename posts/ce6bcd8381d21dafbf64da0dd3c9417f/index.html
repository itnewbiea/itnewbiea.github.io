<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>学习笔记230827--vue项目中，子组件拿不到父组件异步获取数据的问题 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="学习笔记230827--vue项目中，子组件拿不到父组件异步获取数据的问题" />
<meta property="og:description" content="🧋 问题描述 父组件的数据是请求后台所得，因为是异步数据，就会出现，父组件的值传递过去了，子组件加载不到，拿不到值的问题。
下面从同步数据传递和异步数据传递开始论述问题
🧋🧋1. 父组件传递的是同步数据 父组件
&lt;template&gt; &lt;div class=&#34;parent&#34;&gt; &lt;div class=&#34;child&#34;&gt; &lt;props-children :data=&#34;dataJson&#34;&gt;&lt;/props-children&gt; &lt;/div&gt; &lt;input type=&#34;text&#34; v-model=&#34;dataJson&#34;/&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import propsChildren from &#39;../../component/props/props_children.vue&#39; export default { components: { propsChildren }, data(){ return{ dataJson:&#34;初始化数据&#34; } }, created(){ console.log(&#39;父created&#39;,this.dataJson) }, beforeuUpdate(){ console.log(&#39;父beforeupdated&#39;,this.dataJson) }, updated(){ console.log(&#39;父updated&#39;,this.dataJson) }, beforeDetroy(){ console.log(&#39;父beforeDetroy&#39;,this.dataJson) }, detroyed(){ console.log(&#39;父detroyed&#39;,this.dataJson) } } &lt;/script&gt; &lt;style scoped&gt; .child{ width:600px; height:600px; background:#eee; } &lt;/style&gt; 子组件
&lt;template&gt; &lt;div&gt; 我是子组件&lt;br&gt;&lt;br&gt;&lt;br&gt; 获取到父组件数据：{{data}}&lt;br&gt;&lt;br&gt;&lt;br&gt; &lt;input type=&#34;text&#34; v-model=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ce6bcd8381d21dafbf64da0dd3c9417f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-29T14:03:03+08:00" />
<meta property="article:modified_time" content="2023-08-29T14:03:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">学习笔记230827--vue项目中，子组件拿不到父组件异步获取数据的问题</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="__0"></a>🧋 问题描述</h5> 
<p>父组件的数据是请求后台所得，因为是异步数据，就会出现，父组件的值传递过去了，子组件加载不到，拿不到值的问题。</p> 
<p><img src="https://images2.imgbox.com/b8/4e/thrQO3Gt_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-pn9unWDw-1693103033395)(https://note.youdao.com/yws/res/9/WEBRESOURCE717fc88846ccc13c044a1e223126def9)]"></p> 
<p>下面从同步数据传递和异步数据传递开始论述问题</p> 
<h6><a id="1__11"></a>🧋🧋1. 父组件传递的是同步数据</h6> 
<ul><li> <p>父组件</p> <pre><code class="prism language-javascript">    <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span> 
     <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"parent"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"child"</span><span class="token operator">&gt;</span>
             <span class="token operator">&lt;</span>props<span class="token operator">-</span>children <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"dataJson"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>props<span class="token operator">-</span>children<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span>  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"dataJson"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
  
  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> propsChildren <span class="token keyword">from</span> <span class="token string">'../../component/props/props_children.vue'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> propsChildren <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> 
      <span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">dataJson</span><span class="token operator">:</span><span class="token string">"初始化数据"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父created'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">beforeuUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父beforeupdated'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父updated'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">beforeDetroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父beforeDetroy'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">detroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父detroyed'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  
  <span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
   
  <span class="token punctuation">.</span>child<span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">width</span><span class="token operator">:</span>600px<span class="token punctuation">;</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span>600px<span class="token punctuation">;</span>
      
      <span class="token literal-property property">background</span><span class="token operator">:</span>#eee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> </li><li> <p>子组件</p> <pre><code class="prism language-javascript">
  <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          我是子组件<span class="token operator">&lt;</span>br<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
          获取到父组件数据：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span>  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"data"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span> 
  
  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
     <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子组件拿到数据'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
              <span class="token keyword">default</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>
              <span class="token literal-property property">require</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token literal-property property">type</span><span class="token operator">:</span>String
          <span class="token punctuation">}</span>
        
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子created'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子beforeupdated'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子updated'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">beforeDetroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子beforeDetroy'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">detroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子detroyed'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  
  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
  
  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> </li></ul> 
<p>如图所示：</p> 
<ul><li> <p>在created阶段，父组件的初始化数据就已经传递给了子组件的props</p> <p><img src="https://images2.imgbox.com/a2/0d/mVhHOYIW_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-qATnm0VP-1693103033400)(https://note.youdao.com/yws/res/1/WEBRESOURCEef9e584f878538fed9af15b7ffaba1e1)]"></p> </li><li> <p>在created阶段，把获取的同步数据赋值给初始化数据，不会触发update钩子函数，子组件加载也能拿到数据</p> <p><img src="https://images2.imgbox.com/08/2b/ehCXTCfo_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jfcWIjPZ-1693103033403)(https://note.youdao.com/yws/res/4/WEBRESOURCE405319a84ce951d33284d54e96c59304)]"></p> <p><img src="https://images2.imgbox.com/fd/59/stRhtTTF_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Hh2isRv4-1693103033405)(https://note.youdao.com/yws/res/a/WEBRESOURCE9d4d920a472804c230ba7a9e6e35e28a)]"></p> </li><li> <p>父组件更新数据（触发update），子组件也会同步更新，但是先更新的是子组件里的数据</p> <p><img src="https://images2.imgbox.com/81/e2/b2wufjq8_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xEj4L6Jj-1693103033407)(https://note.youdao.com/yws/res/4/WEBRESOURCEb3e3c88a52735c3328ae1a51de1f7e74)]"></p> </li><li> <p>子组件去更新props里的数据，父组件不但接收不到，而且还会报错</p> <p><img src="https://images2.imgbox.com/e4/6e/kMHzH7Tc_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-vAQlqToa-1693103033409)(https://note.youdao.com/yws/res/6/WEBRESOURCE01aa38076fe0445148a42c134336fa56)]"></p> </li></ul> 
<h6><a id="_137"></a>父子组件声明周期执行顺序</h6> 
<p>加载渲染数据过程</p> 
<p>父：beforeCrete --&gt; 父：created --&gt; 父：beforeMount --&gt; 子：beforeCreate --&gt; 子：created --&gt; 子：beforeMount --&gt; 子：mounted --&gt; 父：mounted</p> 
<p>更新渲染数据过程</p> 
<p>父：beforeUpDate --&gt; 子：beforeUpdate --&gt; 子：updated --&gt; 父：updated</p> 
<p>销毁组件数据过程</p> 
<p>父：beforeDestroy --&gt; 子：beforeDestroy --&gt; 子：destroyed --&gt; 父:detroyed</p> 
<p><strong>但是，如果父组件获得是后台请求的异步数据就会出现问题。</strong></p> 
<h6><a id="_2_155"></a>🧋🧋 2.父组件传递的是异步数据</h6> 
<ul><li>父组件</li></ul> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"parent"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"child"</span><span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>props<span class="token operator">-</span>children <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"dataJson"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>props<span class="token operator">-</span>children<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span>  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"dataJson"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> propsChildren <span class="token keyword">from</span> <span class="token string">'../../component/props/props_children.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
   <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> propsChildren <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> 
    <span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">dataJson</span><span class="token operator">:</span><span class="token string">"初始化数据"</span>
    <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     <span class="token comment">// 模拟获取后台异步数据</span>
     <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token operator">=</span><span class="token string">"父组件数据"</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父created'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父beforeupdated'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父updated'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">beforeDetroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父beforeDetroy'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">detroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父detroyed'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>dataJson<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
 
    <span class="token punctuation">.</span>child<span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">width</span><span class="token operator">:</span>600px<span class="token punctuation">;</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span>300px<span class="token punctuation">;</span>
        
        <span class="token literal-property property">background</span><span class="token operator">:</span>#eee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<ul><li>子组件</li></ul> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        我是子组件<span class="token operator">&lt;</span>br<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
        获取到父组件数据：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span>  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"data"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span> 

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
   <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子组件拿到数据'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">default</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token literal-property property">require</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span>String
        <span class="token punctuation">}</span>
      
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子created'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子beforeupdated'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子updated'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">beforeDetroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子beforeDetroy'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">detroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子detroyed'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
 
</code></pre> 
<p><img src="https://images2.imgbox.com/4d/ad/YlhTLVGu_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-vuRVJklG-1693103033410)(https://note.youdao.com/yws/res/a/WEBRESOURCE246c2ee57a93411eadd80b789a82321a)]"><br> <strong>【产生问题的原因】</strong><br> 父组件异步获取后台数据， 这时候加载渲染数据生命周期已经走完，只能更新数据，触发更新渲染生命周期，所以子组件加载时，永远只能拿到父组件的初始数据，拿不到父组件更新后的数据，但是，但是props是可以等的，页面是可以拿到异步的数据渲染的，所以就出现如上所示 的结果。</p> 
<h5><a id="_264"></a>🧋解决问题</h5> 
<h5><a id="_265"></a>如何子组件加载获取不到父组件异步获取数据的问题</h5> 
<ul><li> <p>方案1：使用v-if控制子组件渲染的时机，父组件拿到后台异步数据后，再渲染子组件，加载子组件的时候就能得到父组件 的异步数据。</p> </li><li> <p>方案2：子组件使用watch监听父组件传递过来的数据。</p> <p>这种方式父组件正常传递数据即可，不要做什么代码处理，只要在子组件中加一个监听即可。</p> </li></ul> 
<h5><a id="_274"></a>🧋问题总结</h5> 
<p>子组件props如果绑定动态数据，默认只在加载时传递，也就是说只传一次。props绑定视图层，可以传多次。父组件created赋值同步数据不会触发updated，同步数据可以在created时就传递给子组件。父组件赋值异步数据，触发update，子组件也会在update才能拿到数据，所以加载时只能拿到父组件的初始化数据。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c8c1ae8b40e59bc82d5fea099e4a4b2b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一个 C&#43;&#43; 纳秒级计时器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/86758e6bbcf5147bd2b88de60b55f697/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">WPF 管理员权限下软件的自启动</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>