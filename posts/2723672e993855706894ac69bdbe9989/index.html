<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LINQ表达式 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LINQ表达式" />
<meta property="og:description" content="LINQ表达式 1.概述2.from子句2.1 单个from子句2.2 复合from子句 2.3多个from子句3.where子句3.1常见的where子句查询3.2在where子句中使用自定义函数3.3动态谓词的筛选 4.select子句4.1输出查询结果4.2对查询结果进行投影 5.group子句5.1分组查询 6.into子句7. 排序子句7.1ThenBy和ThenByDescending 8.let子句9.join子句 1.概述 LINQ的全称是Language Integrated Query，中文译成“语言集成查询”。LINQ作为一种查询技术，首先要解决数据源的封装，大致使用了三大组件来实现这个封装，分别是LINQ to Object、LINQ to ADO.NET、LINQ to XML。首先需要引入命名空间：
using System Linq
要使用LINQ来编程，首先要学习使用LINQ的子句以及由查询语法构成的查询表达式。C#3.0和VB9开始将这种查询语法引入到了编程语言，并新增了一系列的关键字。但对于CLR本身来说，它并不了解查询语法，它能理解的是由编程语言的编译器将这种查询语法转换成的方法。这些方法叫“标准查询运算符”，它们具有类似这样的名称——Where、Select、GroupBy、Join。下面就以C#为例，从编程语言的层面来具体介绍这些查询语法（注意VB9也支持这种查询语法）。
LINQ的查询由3基本部分组成：获取数据源，创建查询，执行查询。
// 1，获取数据源
List&lt;int&gt; numbers = new List&lt;int&gt;() { 5, 4, 1, 3, 9, 8, 6, 7, 2, 0 }; // 2，创建查询 var numQuery = from num in numbers where num % 2 == 0 select num; // 3,执行查询 foreach (var num in numQuery) { Console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2723672e993855706894ac69bdbe9989/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-30T14:00:25+08:00" />
<meta property="article:modified_time" content="2023-01-30T14:00:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LINQ表达式</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>LINQ表达式</h4> 
 <ul><li><ul><li><a href="#1_1" rel="nofollow">1.概述</a></li><li><a href="#2from_29" rel="nofollow">2.from子句</a></li><li><ul><li><a href="#21_from_32" rel="nofollow">2.1 单个from子句</a></li><li><a href="#22_from_89" rel="nofollow">2.2 复合from子句</a></li></ul> 
   </li><li><a href="#23from_129" rel="nofollow">2.3多个from子句</a></li><li><a href="#3where_170" rel="nofollow">3.where子句</a></li><li><ul><li><a href="#31where_173" rel="nofollow">3.1常见的where子句查询</a></li><li><a href="#32where_199" rel="nofollow">3.2在where子句中使用自定义函数</a></li><li><a href="#33_233" rel="nofollow">3.3动态谓词的筛选</a></li></ul> 
   </li><li><a href="#4select_262" rel="nofollow">4.select子句</a></li><li><ul><li><a href="#41_265" rel="nofollow">4.1输出查询结果</a></li><li><a href="#42_291" rel="nofollow">4.2对查询结果进行投影</a></li></ul> 
   </li><li><a href="#5group_329" rel="nofollow">5.group子句</a></li><li><ul><li><a href="#51_340" rel="nofollow">5.1分组查询</a></li></ul> 
   </li><li><a href="#6into_413" rel="nofollow">6.into子句</a></li><li><a href="#7__470" rel="nofollow">7. 排序子句</a></li><li><ul><li><a href="#71ThenByThenByDescending_523" rel="nofollow">7.1ThenBy和ThenByDescending</a></li></ul> 
   </li><li><a href="#8let_584" rel="nofollow">8.let子句</a></li><li><a href="#9join_616" rel="nofollow">9.join子句</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="1_1"></a>1.概述</h3> 
<p>LINQ的全称是Language Integrated Query，中文译成“语言集成查询”。LINQ作为一种查询技术，首先要解决数据源的封装，大致使用了三大组件来实现这个封装，分别是LINQ to Object、LINQ to ADO.NET、LINQ to XML。首先需要引入命名空间：<br> using System Linq<br> 要使用LINQ来编程，首先要学习使用LINQ的子句以及由查询语法构成的查询表达式。C#3.0和VB9开始将这种查询语法引入到了编程语言，并新增了一系列的关键字。但对于CLR本身来说，它并不了解查询语法，它能理解的是由编程语言的编译器将这种查询语法转换成的方法。这些方法叫“标准查询运算符”，它们具有类似这样的名称——Where、Select、GroupBy、Join。下面就以C#为例，从编程语言的层面来具体介绍这些查询语法（注意VB9也支持这种查询语法）。</p> 
<p>LINQ的查询由3基本部分组成：获取数据源，创建查询，执行查询。</p> 
<p>// 1，获取数据源</p> 
<pre><code class="prism language-csharp">            <span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> numbers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">// 2，创建查询</span>
            <span class="token class-name"><span class="token keyword">var</span></span> numQuery <span class="token operator">=</span> <span class="token keyword">from</span> num <span class="token keyword">in</span> numbers
                           <span class="token keyword">where</span> <span class="token class-name">num</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>
                           <span class="token keyword">select</span> num<span class="token punctuation">;</span>

            <span class="token comment">// 3,执行查询</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> num <span class="token keyword">in</span> numQuery<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0,1}"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre> 
<p>下图显示了完整的查询操作。在 LINQ 中，查询的执行与查询本身截然不同；换句话说，如果只是创建查询变量，则不会检索任何数据。<br> 在这里插入图片描述<br> 如上例所示，Linq的数据源要求必须实现IEnumerable或IEnumerable接口，数组隐式支持这个接口。numQuery叫做查询变量，它存储了一个查询表达式。注意，声明查询变量并不会执行查询，真正的执行查询延迟到了foreach语句中。</p> 
<h3><a id="2from_29"></a>2.from子句</h3> 
<p>创建一个LINQ表达式必须要以from子句开头。</p> 
<h4><a id="21_from_32"></a>2.1 单个from子句</h4> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> values <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"中国"</span><span class="token punctuation">,</span> <span class="token string">"日本"</span><span class="token punctuation">,</span> <span class="token string">"美国"</span><span class="token punctuation">,</span> <span class="token string">"菲律宾"</span><span class="token punctuation">,</span> <span class="token string">"越南"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//查询包含“国”的字符串</span>
            <span class="token class-name"><span class="token keyword">var</span></span> valueQuery <span class="token operator">=</span> <span class="token keyword">from</span> v <span class="token keyword">in</span> values
                             <span class="token keyword">where</span> <span class="token class-name">v</span><span class="token punctuation">.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span><span class="token string">"国"</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span>
                             <span class="token keyword">select</span> v<span class="token punctuation">;</span>

            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> v <span class="token keyword">in</span> valueQuery<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0,1}"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre> 
<p>在这个LINQ表达式的from子句中，v叫做范围变量，values是数据源。v的作用域存在于当前的LINQ表达式，表达式以外不能访问这个变量。where用来筛选元素，select用于输出元素。这里的范围变量v，和foreach语句中得隐式变量v都可以由编译器推断出其类型。<br> 运行的结果如下：</p> 
<p>中国<br> 美国</p> 
<p>使用LINQ查询List集合</p> 
<pre><code class="prism language-csharp">
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomerInfo</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Tel <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">formExpDemo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//这里用了，对象和集合初始化器</span>
            <span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> customers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"诸葛菲菲"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                           <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">//查询年龄大于20的客户，注意这里的范围变量用了显示类型CustomerInfo</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> <span class="token class-name">CustomerInfo</span> ci <span class="token keyword">in</span> customers
                        <span class="token keyword">where</span> <span class="token class-name">ci</span><span class="token punctuation">.</span>Age <span class="token operator">&gt;</span> <span class="token number">20</span>
                        <span class="token keyword">select</span> ci<span class="token punctuation">;</span>
            
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">CustomerInfo</span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>结果：</p> 
<p>姓名：欧阳晓晓 年龄：35 电话：1330708****<br> 姓名：诸葛菲菲 年龄：23 电话：1380524****</p> 
<h4><a id="22_from_89"></a>2.2 复合from子句</h4> 
<p>在查询数据源中，元素的属性是一个集合时，可以使用复合from子句对这个属性集合查询。比如，一个客户，可能有多个电话。</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomerInfo</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> TelTable <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">formExpDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> customers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> TelTable<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span><span class="token string">"1330708****"</span><span class="token punctuation">,</span><span class="token string">"1330709****"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> TelTable<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span><span class="token string">"1592842****"</span><span class="token punctuation">,</span><span class="token string">"1592843****"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"诸葛菲菲"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> TelTable<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span><span class="token string">"1380524****"</span><span class="token punctuation">,</span><span class="token string">"1380525****"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
                                           <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">//查询包含电话号码1592842****的客户</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> <span class="token class-name">CustomerInfo</span> ci <span class="token keyword">in</span> customers
                        <span class="token keyword">from</span> tel <span class="token keyword">in</span> ci<span class="token punctuation">.</span>TelTable
                        <span class="token keyword">where</span> <span class="token class-name">tel</span><span class="token punctuation">.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span><span class="token string">"1592842****"</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
                        <span class="token keyword">select</span> ci<span class="token punctuation">;</span>

            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> tel <span class="token keyword">in</span> ci<span class="token punctuation">.</span>TelTable<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"          电话：{0}"</span><span class="token punctuation">,</span> tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>结果：</p> 
<p>姓名：上官飘飘 年龄：17<br> 电话：1592842****<br> 电话：1592843****</p> 
<h3><a id="23from_129"></a>2.3多个from子句</h3> 
<p>多个from子句查询和复合from子句从字面上看似乎一样，其实是不同的操作。复合from子句查询的是单个数据源中的子元素的集合，而多个from子句，是载入多个数据源进行查询。</p> 
<pre><code class="prism language-csharp"><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">formExpDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
<span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"令狐冲"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"令狐冲"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"东方不败"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"任盈盈"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//在clist中查找Age大于20的客户，</span>
            <span class="token comment">//在clist2中查找Age小于30的客户</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">where</span> <span class="token class-name">customer</span><span class="token punctuation">.</span>Age <span class="token operator">&gt;</span> <span class="token number">20</span>
                        <span class="token keyword">from</span> customer2 <span class="token keyword">in</span> clist2
                        <span class="token keyword">where</span> <span class="token class-name">customer2</span><span class="token punctuation">.</span>Age <span class="token operator">&lt;</span> <span class="token number">30</span>
                        <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token punctuation">{<!-- --></span> customer<span class="token punctuation">,</span> customer2 <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} {1}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>customer<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>ci<span class="token punctuation">.</span>customer2<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>在select语句中，我们用了匿名类型来存储筛选出的元素，这样得到的完全是一个交叉联接表，有点类似于SQL中的笛卡尔乘积。</p> 
<p>输出的结果：</p> 
<p>欧阳晓晓 令狐冲<br> 欧阳晓晓 任盈盈<br> 诸葛菲菲 令狐冲<br> 诸葛菲菲 任盈盈</p> 
<h3><a id="3where_170"></a>3.where子句</h3> 
<p>where子句的作用就是筛选元素，除了开始和结束位置，where子句几乎可以出现在LINQ表达式的任意位置。一个LINQ表达式中可以有where子句，也可以没有；可以有一个，可以有多个；多个where子句之间的关系相当于逻辑“与”，每个where子句可以包含1个或多个逻辑表达式，这些条件成为“谓词”，多个谓词之间用布尔运算符隔开，比如逻辑“与”用&amp;&amp;，逻辑“或”用||，而不是用SQL中的AND或OR。</p> 
<h4><a id="31where_173"></a>3.1常见的where子句查询</h4> 
<pre><code class="prism language-csharp"><span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"令狐冲"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//查询名字是3个字或者姓“令”的，但年龄大于20的客户</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">where</span> <span class="token punctuation">(</span>customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span>Length <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"令"</span><span class="token punctuation">)</span>
                        <span class="token operator">&amp;&amp;</span> customer<span class="token punctuation">.</span>Age <span class="token operator">&gt;</span> <span class="token number">20</span>
                        <span class="token keyword">select</span> customer<span class="token punctuation">;</span>

            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre> 
<p>结果：</p> 
<p>姓名：令狐冲 年龄：23 电话：1380524****</p> 
<h4><a id="32where_199"></a>3.2在where子句中使用自定义函数</h4> 
<pre><code class="prism language-csharp"><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">whereExpDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
<span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"令狐冲"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//查询名字是3个字并且姓“令”的客户</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">where</span> <span class="token punctuation">(</span>customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span>Length <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token function">CheckName</span><span class="token punctuation">(</span>customer<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token keyword">select</span> customer<span class="token punctuation">;</span>

            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">CheckName</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"令"</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>结果：</p> 
<p>姓名：令狐冲 年龄：23 电话：1380524****</p> 
<h4><a id="33_233"></a>3.3动态谓词的筛选</h4> 
<p>上面的几个例子都是给定了查询谓词然后进行查询，有时候谓词的数量可能并不固定，是随情况变化的。例如：一组名字可能是运行时动态指定的。</p> 
<pre><code class="prism language-csharp"><span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"令狐冲"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//定义动态的谓词数组，这个数组应该由实际运行环境生成</span>
            <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> names <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"令狐冲"</span><span class="token punctuation">,</span> <span class="token string">"任盈盈"</span><span class="token punctuation">,</span> <span class="token string">"杨过"</span><span class="token punctuation">,</span> <span class="token string">"小龙女"</span><span class="token punctuation">,</span> <span class="token string">"欧阳晓晓"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//查询在给定谓词数组里存在的客户</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">where</span> <span class="token class-name">names</span><span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>customer<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
                        <span class="token keyword">select</span> customer<span class="token punctuation">;</span>

            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre> 
<p>结果：</p> 
<p>姓名：欧阳晓晓 年龄：35 电话：1330708****<br> 姓名：令狐冲 年龄：23 电话：1380524****</p> 
<h3><a id="4select_262"></a>4.select子句</h3> 
<p>LINQ表达式的结果是使用select子句获得的。select子句可以对数据进行转换，这个过程称为“投影”。select子句产生的类容，取决于前面的所有子句及其自身表达式执行后的结果。</p> 
<h4><a id="41_265"></a>4.1输出查询结果</h4> 
<p>最简单的select就是直接输出from子句建立的那个范围变量：</p> 
<pre><code class="prism language-csharp">
 <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">where</span> <span class="token class-name">names</span><span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>customer<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
                        <span class="token keyword">select</span> customer<span class="token punctuation">;</span>
</code></pre> 
<p>也可以输出范围变量类型中得某个属性：</p> 
<pre><code class="prism language-csharp"> <span class="token keyword">select</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">;</span>
</code></pre> 
<p>或者修改一下再输出：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">select</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span><span class="token string">"gg"</span><span class="token punctuation">,</span><span class="token string">"mm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>或者干脆使用一个自定义的函数，把范围变量传进去，输出处理后的结果：</p> 
<p>select MyFunction(customer.Name);</p> 
<h4><a id="42_291"></a>4.2对查询结果进行投影</h4> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCustomerInfo</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Tel <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">whereExpDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"令狐冲"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//定义动态的谓词数组，这个数组应该由实际运行环境生成</span>
            <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> names <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"令狐冲"</span><span class="token punctuation">,</span> <span class="token string">"任盈盈"</span><span class="token punctuation">,</span> <span class="token string">"杨过"</span><span class="token punctuation">,</span> <span class="token string">"小龙女"</span><span class="token punctuation">,</span> <span class="token string">"欧阳晓晓"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//查询在给定谓词数组里存在的客户</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">where</span> <span class="token class-name">customer</span><span class="token punctuation">.</span>Age <span class="token operator">&lt;</span> <span class="token number">30</span>
                        <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyCustomerInfo</span> <span class="token punctuation">{<!-- --></span> Name <span class="token operator">=</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> Tel <span class="token operator">=</span> customer<span class="token punctuation">.</span>Tel <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 电话：{1} 类型{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">,</span>ci<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>FullName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>上例中，在select子句中用对象初始化器生成了新的数据类型，从而进行了数据转换，使元素变成了MyCustomerInfo类型。</p> 
<p>结果：</p> 
<p>姓名：上官飘飘 电话：1592842**** 类型LinqDemo.Form1+MyCustomerInfo<br> 姓名：令狐冲 电话：1380524**** 类型LinqDemo.Form1+MyCustomerInfo</p> 
<h3><a id="5group_329"></a>5.group子句</h3> 
<p>按照语法的规定，LINQ表达式必须以from子句开头，以select或group子句结束，所以除了使用select子句外，也可以使用guoup子句来返回元素分组后的结果。group子句返回的是一个IGrouping&lt;TKey,TElement&gt;泛型接口的对象集合，下面先了解下这个接口。</p> 
<pre><code class="prism language-csharp"><span class="token number">5.1</span> IGrouping<span class="token operator">&lt;</span>TKey<span class="token punctuation">,</span>TElement<span class="token operator">&gt;</span>泛型接口
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IGrouping<span class="token punctuation">&lt;</span>TKey<span class="token punctuation">,</span> TElement<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>TElement<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> 
    <span class="token class-name">IEnumerable</span></span>
</code></pre> 
<p>TKey是键的对象类型，在用于group子句的时候，数据类型会有编译器推断出来，它一般用于存储分组的键值；TElement是指的对象类型，用于存储分组的结果，变量基于这个接口的类型就是遍历这个值。</p> 
<h4><a id="51_340"></a>5.1分组查询</h4> 
<p>分组查询对于关系型数据库是非常常见的一种操作，但在没有LINQ之前，对内存的对象进行分组却是一件非常麻烦的事情。现在，在LINQ表达式中只需要使用group子句就可以轻松完成对内存对象的分组。</p> 
<pre><code class="prism language-csharp">
<span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                      <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳锦鹏"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官无忌"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//按照名字的前2个字进行分组</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">group</span> customer <span class="token keyword">by</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">IGrouping<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token keyword">group</span> <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"分组键：{0}"</span><span class="token punctuation">,</span><span class="token keyword">group</span><span class="token punctuation">.</span>Key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> <span class="token keyword">group</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 电话：{1}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"----|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre> 
<p>上例代码，按照form子句建立的范围变量customer的Name属性的前两个字作为键值进行分组。所以TKey的类型是一个字符串类型。</p> 
<p>输出结果：</p> 
<p>分组键：欧阳<br> 姓名：欧阳晓晓 电话：1330708****<br> 姓名：欧阳锦鹏 电话：1330708****</p> 
<hr> 
<p>分组键：上官<br> 姓名：上官飘飘 电话：1592842****<br> 姓名：上官无忌 电话：1380524****</p> 
<hr> 
<p>再看一个分组的例子：</p> 
<pre><code class="prism language-csharp"><span class="token comment">//按照年龄是否大于20分组</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">group</span> customer <span class="token keyword">by</span> customer<span class="token punctuation">.</span>Age <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">;</span>

            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">group</span> <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"分组键：{0}"</span><span class="token punctuation">,</span><span class="token keyword">group</span><span class="token punctuation">.</span>Key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> <span class="token keyword">group</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 电话：{1}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"***************************************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre> 
<p>group子句用了一个布尔表达式，所以IGrouping&lt;TKey,TElement&gt;的TKey变成了一个bool型。并且循环遍历的时候可以用var代替IGrouping的声明：</p> 
<p>foreach (var group in query)</p> 
<p>结果如下：</p> 
<p>分组键：True<br> 姓名：欧阳晓晓 电话：1330708****<br> 姓名：欧阳锦鹏 电话：1330708****<br> 姓名：上官无忌 电话：1380524****</p> 
<hr> 
<p>分组键：False<br> 姓名：上官飘飘 电话：1592842****</p> 
<hr> 
<h3><a id="6into_413"></a>6.into子句</h3> 
<p>into子句作为一个临时标识符，用于select，group，join子句中。</p> 
<pre><code class="prism language-csharp"><span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                   <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                   <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                   <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳锦鹏"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                   <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官无忌"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//按照名字的前两个字进行分组，再用分组Key进行排序</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">group</span> customer <span class="token keyword">by</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">into</span> gpcustomer
                        <span class="token keyword">orderby</span> gpcustomer<span class="token punctuation">.</span>Key <span class="token keyword">descending</span>
                        <span class="token keyword">select</span> gpcustomer<span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"into 用于group子句"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">group</span> <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"分组键：{0}"</span><span class="token punctuation">,</span> <span class="token keyword">group</span><span class="token punctuation">.</span>Key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> <span class="token keyword">group</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 电话：{1}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"***************************************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name"><span class="token keyword">var</span></span> query2 <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                         <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token punctuation">{<!-- --></span> NewName <span class="token operator">=</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> NewAge <span class="token operator">=</span> customer<span class="token punctuation">.</span>Age <span class="token punctuation">}</span> <span class="token keyword">into</span> newCustomer
                         <span class="token keyword">orderby</span> newCustomer<span class="token punctuation">.</span>NewAge
                         <span class="token keyword">select</span> newCustomer<span class="token punctuation">;</span>

            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"into 用于select子句"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query2<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} 年龄：{1}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>NewName<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>NewAge<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre> 
<p>into子句提供了一个临时标识符，它存储了into子句前面的查询内容，使它后面的子句可以方便的使用，对其进行再次查询，投影等操作。<br> 执行结果：</p> 
<p>into 用于group子句<br> 分组键：上官<br> 姓名：上官飘飘 电话：1592842****<br> 姓名：上官无忌 电话：1380524****</p> 
<hr> 
<p>分组键：欧阳<br> 姓名：欧阳晓晓 电话：1330708****<br> 姓名：欧阳锦鹏 电话：1330708****</p> 
<hr> 
<p>into 用于select子句<br> 上官飘飘 年龄：17<br> 上官无忌 年龄：23<br> 欧阳晓晓 年龄：35<br> 欧阳锦鹏 年龄：35</p> 
<h3><a id="7__470"></a>7. 排序子句</h3> 
<p>LINQ可以按元素的一个或多个属性对元素进行排序。LINQ表达式的排序方式分为OrderBy、OrderByDescending、ThenBy、ThenByDescending这四种。</p> 
<p>7.1 OrderBy和OrderByDescending<br> OrderBy用于按元素的值进行升序，语法：</p> 
<p>orderby 用于排序的元素的表达式</p> 
<p>OrderByDescending用于按元素的值进行降序，语法：</p> 
<p>orderby 用于排序的元素的表达式 descending</p> 
<pre><code class="prism language-csharp"><span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                      <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳锦鹏"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官无忌"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1380524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//按照年龄升序</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">orderby</span> customer<span class="token punctuation">.</span>Age
                        <span class="token keyword">select</span> customer<span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"按年龄升序排列"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//按照年龄降序</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query2 <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">orderby</span> customer<span class="token punctuation">.</span>Age <span class="token keyword">descending</span>
                        <span class="token keyword">select</span> customer<span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n按年龄降序排列"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query2<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre> 
<p>运行结果：</p> 
<p>按年龄升序排列<br> 姓名：上官飘飘 年龄：17 电话：1592842****<br> 姓名：上官无忌 年龄：23 电话：1380524****<br> 姓名：欧阳晓晓 年龄：35 电话：1330708****<br> 姓名：欧阳锦鹏 年龄：35 电话：1330708****<br> 按年龄降序排列<br> 姓名：欧阳晓晓 年龄：35 电话：1330708****<br> 姓名：欧阳锦鹏 年龄：35 电话：1330708****<br> 姓名：上官无忌 年龄：23 电话：1380524****<br> 姓名：上官飘飘 年龄：17 电话：1592842****</p> 
<h4><a id="71ThenByThenByDescending_523"></a>7.1ThenBy和ThenByDescending</h4> 
<p>ThenBy和ThenByDescending用于对元素进行次要排序。基本语法：</p> 
<p>orderby 用于排序的元素表达式,用于排序的元素表达式<br> orderby 用于排序的元素表达式,用于排序的元素表达式 descending</p> 
<pre><code class="prism language-csharp"><span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"郭靖"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"黄蓉"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1300524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//按照年龄升序，再按名字的字数次要排序</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">orderby</span> customer<span class="token punctuation">.</span>Age<span class="token punctuation">,</span>customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span>Length
                        <span class="token keyword">select</span> customer<span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"按年龄排列，按名字字数进行次要排序"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//按照年龄升序，再按名字的字数降序次要排序</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query2 <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">orderby</span> customer<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span>Length <span class="token keyword">descending</span>
                        <span class="token keyword">select</span> customer<span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n按年龄排列，按名字字数进行降序次要排序"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query2<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//按照年龄升序，再按名字的字数降序要排序，在按电话号码进行第三条件排序</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query3 <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                         <span class="token keyword">orderby</span> customer<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span>Length<span class="token punctuation">,</span>customer<span class="token punctuation">.</span>Tel
                         <span class="token keyword">select</span> customer<span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n按年龄，名字字数，电话号码排序"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query3<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre> 
<p>执行结果：</p> 
<p>按年龄排列，按名字字数进行次要排序<br> 姓名：郭靖 年龄：17 电话：1330708****<br> 姓名：黄蓉 年龄：17 电话：1300524****<br> 姓名：上官飘飘 年龄：17 电话：1592842****<br> 姓名：欧阳晓晓 年龄：35 电话：1330708****<br> 按年龄排列，按名字字数进行降序次要排序<br> 姓名：上官飘飘 年龄：17 电话：1592842****<br> 姓名：郭靖 年龄：17 电话：1330708****<br> 姓名：黄蓉 年龄：17 电话：1300524****<br> 姓名：欧阳晓晓 年龄：35 电话：1330708****<br> 按年龄，名字字数，电话号码排序<br> 姓名：黄蓉 年龄：17 电话：1300524****<br> 姓名：郭靖 年龄：17 电话：1330708****<br> 姓名：上官飘飘 年龄：17 电话：1592842****<br> 姓名：欧阳晓晓 年龄：35 电话：1330708****</p> 
<h3><a id="8let_584"></a>8.let子句</h3> 
<p>let子句用于在LINQ表达式中存储子表达式的计算结果。let子句创建一个范围变量来存储结果，变量被创建后，不能修改或把其他表达式的结果重新赋值给它。此范围变量可以再后续的LINQ子句中使用。</p> 
<pre><code class="prism language-csharp"><span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span> 
              <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"郭靖"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"黄蓉"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1300524****"</span><span class="token punctuation">}</span>
                                                   <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//姓“郭”或“黄”的客户</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">let</span> g <span class="token operator">=</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
                        <span class="token keyword">where</span> <span class="token class-name">g</span> <span class="token operator">==</span> <span class="token string">"郭"</span> <span class="token operator">||</span> g <span class="token operator">==</span> <span class="token string">"黄"</span>
                        <span class="token keyword">select</span> customer<span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} 电话：{2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

</code></pre> 
<p>使用let 建立了个范围变量，这个范围变量在后续的where子句中使用，如果不使用let子句，where子句的表达式将写成这样：</p> 
<p>where customer.Name.Substring(0, 1) == “郭” || customer.Name.Substring(0, 1) == “黄”</p> 
<p>执行结果：</p> 
<p>姓名：郭靖 年龄：17 电话：1330708****<br> 姓名：黄蓉 年龄：17 电话：1300524****</p> 
<h3><a id="9join_616"></a>9.join子句</h3> 
<p>如果一个数据源中元素的某个属性可以跟另一个数据源中元素的属性进行相等比较，那么这两个数据源可以用join子句进行关联。jion子句用equals关键字进行比较，而不是常见的==。</p> 
<pre><code class="prism language-csharp"><span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerInfo<span class="token punctuation">&gt;</span></span> 
            <span class="token punctuation">{<!-- --></span> 
               <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"上官飘飘"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1592842****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"郭靖"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1330708****"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerInfo</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"黄蓉"</span><span class="token punctuation">,</span> Age<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> Tel <span class="token operator">=</span><span class="token string">"1300524****"</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token class-name">List<span class="token punctuation">&lt;</span>CustomerTitle<span class="token punctuation">&gt;</span></span> titleList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CustomerTitle<span class="token punctuation">&gt;</span></span> 
            <span class="token punctuation">{<!-- --></span> 
               <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerTitle</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"欧阳晓晓"</span><span class="token punctuation">,</span> Title<span class="token operator">=</span><span class="token string">"歌手"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerTitle</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"郭靖"</span><span class="token punctuation">,</span> Title<span class="token operator">=</span><span class="token string">"大侠"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerTitle</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"郭靖"</span><span class="token punctuation">,</span> Title<span class="token operator">=</span><span class="token string">"洪七公徒弟"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerTitle</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"黄蓉"</span><span class="token punctuation">,</span> Title<span class="token operator">=</span><span class="token string">"才女"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomerTitle</span><span class="token punctuation">{<!-- --></span> Name<span class="token operator">=</span><span class="token string">"黄蓉"</span><span class="token punctuation">,</span> Title<span class="token operator">=</span><span class="token string">"丐帮帮主"</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">//根据姓名进行内部联接</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"内部联接"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                        <span class="token keyword">join</span> title <span class="token keyword">in</span> titleList
                        <span class="token keyword">on</span> customer<span class="token punctuation">.</span>Name equals title<span class="token punctuation">.</span>Name
                        <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token punctuation">{<!-- --></span> Name <span class="token operator">=</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> Age <span class="token operator">=</span> customer<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> Title <span class="token operator">=</span> title<span class="token punctuation">.</span>Title <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} 年龄：{1} {2}"</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Title<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//根据姓名进行分组联接</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n根据姓名进行分组联接"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query2 <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                         <span class="token keyword">join</span> title <span class="token keyword">in</span> titleList
                         <span class="token keyword">on</span> customer<span class="token punctuation">.</span>Name equals title<span class="token punctuation">.</span>Name <span class="token keyword">into</span> tgroup
                         <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token punctuation">{<!-- --></span> Name <span class="token operator">=</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> Titles <span class="token operator">=</span> tgroup <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> g <span class="token keyword">in</span> query2<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> g2 <span class="token keyword">in</span> g<span class="token punctuation">.</span>Titles<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"   {0}"</span><span class="token punctuation">,</span> g2<span class="token punctuation">.</span>Title<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//根据姓名进行 左外部联接</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n左外部联接"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> query3 <span class="token operator">=</span> <span class="token keyword">from</span> customer <span class="token keyword">in</span> clist
                         <span class="token keyword">join</span> title <span class="token keyword">in</span> titleList
                         <span class="token keyword">on</span> customer<span class="token punctuation">.</span>Name equals title<span class="token punctuation">.</span>Name <span class="token keyword">into</span> tgroup
                         <span class="token keyword">from</span> subTitle <span class="token keyword">in</span> tgroup<span class="token punctuation">.</span><span class="token function">DefaultIfEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                         <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token punctuation">{<!-- --></span> Name <span class="token operator">=</span> customer<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> Title <span class="token operator">=</span> <span class="token punctuation">(</span>subTitle <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> <span class="token string">"空缺"</span> <span class="token punctuation">:</span> subTitle<span class="token punctuation">.</span>Title<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> ci <span class="token keyword">in</span> query3<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"姓名：{0} {1} "</span><span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> ci<span class="token punctuation">.</span>Title<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

</code></pre> 
<p>要仔细理解上例的，内联接，分组联接，以及左联接。</p> 
<p>执行结果：</p> 
<p>内部联接<br> 姓名：欧阳晓晓 年龄：35 歌手<br> 姓名：郭靖 年龄：17 大侠<br> 姓名：郭靖 年龄：17 洪七公徒弟<br> 姓名：黄蓉 年龄：17 才女<br> 姓名：黄蓉 年龄：17 丐帮帮主</p> 
<p>根据姓名进行分组联接<br> 欧阳晓晓<br> 歌手<br> 上官飘飘<br> 郭靖<br> 大侠<br> 洪七公徒弟<br> 黄蓉<br> 才女<br> 丐帮帮主</p> 
<p>左外部联接<br> 姓名：欧阳晓晓 歌手<br> 姓名：上官飘飘 空缺<br> 姓名：郭靖 大侠<br> 姓名：郭靖 洪七公徒弟<br> 姓名：黄蓉 才女<br> 姓名：黄蓉 丐帮帮主<br> 10. 小结<br> 本文讲述了LINQ表达式的from子句、where子句、select子句、group子句、into子句、排序子句、let子句、join子句等基本子句。这些子句只是LINQ标准查询符扩展方法的一部分。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cdced55733de66a32696881686270065/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【MySQL自定义变量】 查询结果新增行号列 使用自定义变量@rownum</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c032b2fd1a304970f35c65f1abb841b6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【高并发】高并发环境下优化Tomcat性能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>