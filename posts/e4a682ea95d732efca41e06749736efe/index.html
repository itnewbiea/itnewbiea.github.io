<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>开发环境搭建-stm32CubeIDE进行标准库开发 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="开发环境搭建-stm32CubeIDE进行标准库开发" />
<meta property="og:description" content="stm32CubeIDE介绍 https://www.stmcu.com.cn/ecosystem/Cube/STM32CubeIDE
stm32CubeIDE下载 点击上面的链接，登录即可下载。
搭建demo工程 新建工作空间
创建一个工程
选择芯片-STM32F103C8T6
点击“Next”
点击“Finish ”
添加标准库到项目工程文件目录下
配置工程属性
按F5刷新工程文件，添加的效果如下：
添加标准库头文件路径，直接使用快捷键AlL&#43;Enter调出配置界面，添加头文件路径
添加后如下：
注意：头文件如果是灰色，则说明添加失败。添加标准库的源文件到工程中
添加全局宏定义用于工程属性
删除重复的启动文件
删除的是除GCC编译器之外的启动文件修改内核文件 core_cm3.c文件 uint32_t __STREXB(uint8_t value, uint8_t *addr) { uint32_t result=0; //__ASM volatile (&#34;strexb %0, %2, [%1]&#34; : &#34;=r&#34; (result) : &#34;r&#34; (addr), &#34;r&#34; (value) ); __ASM volatile (&#34;strexb %0, %2, [%1]&#34; : &#34;=&amp;r&#34; (result) : &#34;r&#34; (addr), &#34;r&#34; (value) ); return(result); } /** * @brief STR Exclusive (16 bit) * * @param value value to store * @param *addr address pointer * @return successful / failed * * Exclusive STR command for 16 bit values */ uint32_t __STREXH(uint16_t value, uint16_t *addr) { uint32_t result=0; //__ASM volatile (&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e4a682ea95d732efca41e06749736efe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-30T15:55:00+08:00" />
<meta property="article:modified_time" content="2023-05-30T15:55:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">开发环境搭建-stm32CubeIDE进行标准库开发</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="stm32CubeIDE_0"></a>stm32CubeIDE介绍</h3> 
<p>https://www.stmcu.com.cn/ecosystem/Cube/STM32CubeIDE</p> 
<h3><a id="stm32CubeIDE_2"></a>stm32CubeIDE下载</h3> 
<p>点击上面的链接，登录即可下载。</p> 
<h3><a id="demo_4"></a>搭建demo工程</h3> 
<ol><li><strong>新建工作空间</strong><br> <img src="https://images2.imgbox.com/00/d9/PwVqAnOp_o.png" alt="在这里插入图片描述"></li><li><strong>创建一个工程</strong><br> <img src="https://images2.imgbox.com/5d/6f/PcR8uETg_o.png" alt="在这里插入图片描述"></li><li>选择芯片-STM32F103C8T6<br> <img src="https://images2.imgbox.com/45/35/Jf1y5ojH_o.png" alt="在这里插入图片描述"></li><li><strong>点击“Next”</strong><br> <img src="https://images2.imgbox.com/11/76/s4Xdxb8E_o.png" alt="在这里插入图片描述"></li><li>点击“Finish ”<br> <img src="https://images2.imgbox.com/3d/6f/sVyFGVA6_o.png" alt="在这里插入图片描述"></li><li>添加标准库到项目工程文件目录下<br> <img src="https://images2.imgbox.com/b8/f2/WHMSxOL3_o.png" alt="在这里插入图片描述"></li><li><strong>配置工程属性</strong><br> <img src="https://images2.imgbox.com/b7/7c/LbTp7Dif_o.png" alt="在这里插入图片描述"></li><li><strong>按F5刷新工程文件</strong>，添加的效果如下：<br> <img src="https://images2.imgbox.com/49/69/o7BtrObz_o.png" alt="在这里插入图片描述"></li><li><strong>添加标准库头文件路径</strong>，直接使用快捷键AlL+Enter调出配置界面，添加头文件路径<br> <img src="https://images2.imgbox.com/9c/2a/tH0MtdSi_o.png" alt="在这里插入图片描述"><br> 添加后如下：<br> <img src="https://images2.imgbox.com/df/f7/AuDJTqd8_o.png" alt="在这里插入图片描述"><br> <strong>注意：头文件如果是灰色，则说明添加失败。</strong></li><li><strong>添加标准库的源文件到工程中</strong><br> <img src="https://images2.imgbox.com/47/00/oupVsNmU_o.png" alt="在这里插入图片描述"></li><li><strong>添加全局宏定义用于工程属性</strong><br> <img src="https://images2.imgbox.com/44/ab/AuX2dqA5_o.png" alt="在这里插入图片描述"></li><li><strong>删除重复的启动文件</strong><br> 删除的是除GCC编译器之外的启动文件</li><li>修改内核文件 core_cm3.c文件</li></ol> 
<pre><code class="prism language-c"><span class="token class-name">uint32_t</span> <span class="token function">__STREXB</span><span class="token punctuation">(</span><span class="token class-name">uint8_t</span> value<span class="token punctuation">,</span> <span class="token class-name">uint8_t</span> <span class="token operator">*</span>addr<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token class-name">uint32_t</span> result<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
  
    <span class="token comment">//__ASM volatile ("strexb %0, %2, [%1]" : "=r" (result) : "r" (addr), "r" (value) );</span>
    __ASM <span class="token keyword">volatile</span> <span class="token punctuation">(</span><span class="token string">"strexb %0, %2, [%1]"</span> <span class="token operator">:</span> <span class="token string">"=&amp;r"</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"r"</span> <span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"r"</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @brief  STR Exclusive (16 bit)
 *
 * @param  value  value to store
 * @param  *addr  address pointer
 * @return        successful / failed
 *
 * Exclusive STR command for 16 bit values
 */</span>
<span class="token class-name">uint32_t</span> <span class="token function">__STREXH</span><span class="token punctuation">(</span><span class="token class-name">uint16_t</span> value<span class="token punctuation">,</span> <span class="token class-name">uint16_t</span> <span class="token operator">*</span>addr<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token class-name">uint32_t</span> result<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
  
   <span class="token comment">//__ASM volatile ("strexh %0, %2, [%1]" : "=r" (result) : "r" (addr), "r" (value) );</span>
   __ASM <span class="token keyword">volatile</span> <span class="token punctuation">(</span><span class="token string">"strexh %0, %2, [%1]"</span> <span class="token operator">:</span> <span class="token string">"=&amp;r"</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"r"</span> <span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"r"</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 1. @brief  STR Exclusive (32 bit)
 2.  3. @param  value  value to store
 3. @param  *addr  address pointer
 4. @return        successful / failed
 5.  7. Exclusive STR command for 32 bit values
 */</span>
<span class="token class-name">uint32_t</span> <span class="token function">__STREXW</span><span class="token punctuation">(</span><span class="token class-name">uint32_t</span> value<span class="token punctuation">,</span> <span class="token class-name">uint32_t</span> <span class="token operator">*</span>addr<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token class-name">uint32_t</span> result<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
  
   <span class="token comment">//__ASM volatile ("strex %0, %2, [%1]" : "=r" (result) : "r" (addr), "r" (value) );</span>
   __ASM <span class="token keyword">volatile</span> <span class="token punctuation">(</span><span class="token string">"strex %0, %2, [%1]"</span> <span class="token operator">:</span> <span class="token string">"=&amp;r"</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"r"</span> <span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"r"</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/86/6b/obdE1h6l_o.png" alt="在这里插入图片描述"></p> 
<ol start="6"><li><strong>调试器选择</strong><br> <img src="https://images2.imgbox.com/29/62/emgIgSZa_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/74/9c/agjYBgnp_o.png" alt="在这里插入图片描述"></li><li><strong>编译下载</strong><br> <img src="https://images2.imgbox.com/4b/80/dMNaIpAm_o.png" alt="在这里插入图片描述"></li></ol> 
<h3><a id="_85"></a>注意事项：</h3> 
<p><em><strong>如果不小心改动了IED默认布局可以这样重新恢复默认</strong></em><br> <img src="https://images2.imgbox.com/1a/61/SArew9HD_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="IDEgitee_88"></a>IDE配置gitee</h3> 
<ol start="8"><li> <p>快捷键AlL+Enter调出配置界面<br> <img src="https://images2.imgbox.com/16/74/b4Ji7Y8Q_o.png" alt="在这里插入图片描述"><br> <strong>注意：第2步骤：先选中仓库，再点击“Create Repository”</strong>。<br> <img src="https://images2.imgbox.com/3f/1f/qAv3fAty_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>推送至本地</strong><br> <img src="https://images2.imgbox.com/62/7d/Pk5UeeBS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/27/59/bMMayBdJ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c1/79/5DWPkrJd_o.png" alt="在这里插入图片描述"><br> <strong>第2步骤中：提交本地说明</strong></p> </li><li> <p>远程仓库信息的填写<br> <img src="https://images2.imgbox.com/8a/9b/Ly6UBj2X_o.png" alt="在这里插入图片描述"></p> </li><li> <p>填写gitee创建的仓库路径，账号和密码使用gitee的账号，账号不要使用gitee邮箱，使用你的gitee用户名。<br> <img src="https://images2.imgbox.com/c5/8e/MT3xNDVT_o.png" alt="在这里插入图片描述"></p> </li><li> <p>点击Next<br> <img src="https://images2.imgbox.com/ae/48/lEOfkcBf_o.png" alt="在这里插入图片描述"></p> </li><li> <p>一路确认。。<br> <img src="https://images2.imgbox.com/53/e7/WDizKKs3_o.png" alt="在这里插入图片描述"><br> 提示代码已经合并到Gitee.com。</p> </li></ol>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0210274e65d334635950e8ad9047b76a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">常见的场景优化方案：导出Excel大批量数据的优化过程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/60244a283b9be17c29a493103edb3594/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">静默安装oracle</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>