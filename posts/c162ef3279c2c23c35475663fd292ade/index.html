<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>InputStream、byte[]、File相互转换工具类 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="InputStream、byte[]、File相互转换工具类" />
<meta property="og:description" content="import java.io.*; import java.nio.channels.FileChannel; public class FileUtils_Byte_Stream { /** * *byte数组转inputstream * * @param bytes * @return */ public static InputStream bytesToInputStream(byte[] bytes) { InputStream inputStream = new ByteArrayInputStream(bytes); return inputStream; } /** * *inputstream转byte数组 * * @param inputStream * @return * @throws IOException */ public static byte[] inputStreamToBytes(InputStream inputStream) throws IOException { ByteArrayOutputStream output = new ByteArrayOutputStream(); byte[] buffer = new byte[4096]; int n = 0; while (-1 !" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c162ef3279c2c23c35475663fd292ade/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-13T16:25:18+08:00" />
<meta property="article:modified_time" content="2023-11-13T16:25:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">InputStream、byte[]、File相互转换工具类</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="language-java">
import java.io.*;
import java.nio.channels.FileChannel;

public class FileUtils_Byte_Stream {

    /**
     * *byte数组转inputstream
     *
     * @param bytes
     * @return
     */
    public static InputStream bytesToInputStream(byte[] bytes) {
        InputStream inputStream = new ByteArrayInputStream(bytes);
        return inputStream;
    }

    /**
     * *inputstream转byte数组
     *
     * @param inputStream
     * @return
     * @throws IOException
     */
    public static byte[] inputStreamToBytes(InputStream inputStream) throws IOException {
        ByteArrayOutputStream output = new ByteArrayOutputStream();
        byte[] buffer = new byte[4096];
        int n = 0;
        while (-1 != (n = inputStream.read(buffer))) {
            output.write(buffer, 0, n);
        }
        return output.toByteArray();
    }

    /**
     * *inputstream转file
     *
     * @param inputStream
     * @param filePath
     * @param fileName
     * @throws IOException
     */
    public static void inputStreamToFile(InputStream inputStream, String filePath, String fileName) throws IOException {
        File dir = new File(filePath);
        if (!dir.exists()) {// 判断文件目录是否存在
            dir.mkdirs();
        }
        File file = new File(filePath + "//" + fileName);
        FileOutputStream outStream = new FileOutputStream(file);
        FileChannel in = ((FileInputStream) inputStream).getChannel();
        FileChannel out = outStream.getChannel();
        in.transferTo(0, in.size(), out);

    }

    /**
     * 将inputStream转化为file
     * @param is
     * @param file 要输出的文件目录
     */
    public static void inputStream2File(InputStream is, File file) throws IOException {
        OutputStream os = null;
        try {
            os = new FileOutputStream(file);
            int len = 0;
            byte[] buffer = new byte[8192];

            while ((len = is.read(buffer)) != -1) {
                os.write(buffer, 0, len);
            }
        } finally {
            os.close();
            is.close();
        }
    }


    /**
     * *file转inputstream
     *
     * @param file
     * @return
     * @throws FileNotFoundException
     */
    public static InputStream fileToInputStream(File file) throws FileNotFoundException {
        InputStream is = new FileInputStream(file);
        return is;
    }

    /**
     * *byte数组转file
     *
     * @param bytes
     * @param filePath
     * @param fileName
     * @throws IOException
     */
    public static void bytesToFile(byte[] bytes, String filePath, String fileName) throws IOException {
        BufferedOutputStream bos = null;
        FileOutputStream fos = null;
        File file = null;
        File dir = new File(filePath);
        if (!dir.exists()) {// 判断文件目录是否存在
            dir.mkdirs();
        }
        file = new File(filePath + "//" + fileName);
        fos = new FileOutputStream(file);
        bos = new BufferedOutputStream(fos);
        bos.write(bytes);
        bos.close();
        fos.close();

    }

    /**
     * *file转byte数组
     *
     * @param file
     * @return
     * @throws IOException
     */
    public static byte[] fileToBytes(File file) throws IOException {
        FileInputStream fis = new FileInputStream(file);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] b = new byte[1024];
        int n;
        while ((n = fis.read(b)) != -1) {
            bos.write(b, 0, n);
        }
        fis.close();
        byte[] data = bos.toByteArray();
        bos.close();
        return data;

    }

    /**
     * *删除文件目录
     *
     * @param dir
     */
    public static void deleFiletDir(String dir) {
        File file = new File(dir);
        if (file.isDirectory()) {
            delFile(file);
        }
    }

    private static void delFile(File file) {
        File[] files = file.listFiles();
        if (files != null &amp;&amp; files.length != 0) {
            for (int i = 0; i &lt; files.length; i++) {
                delFile(files[i]);
            }
        }
        file.delete();
    }
}
</code></pre> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e7a44414976c4af0c941b9e7eb5890bd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">大数据技术相关概念--学习笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dadd0d8b823c047b578219f18de5f942/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c&#43;&#43;转编码---UTF8转GBK---GBK转UTF8</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>