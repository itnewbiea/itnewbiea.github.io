<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数学建模】灰色预测法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【数学建模】灰色预测法" />
<meta property="og:description" content="文章目录 前言一、灰色预测是什么？二、使用步骤1.使用条件2.以GM（1,1）为例（1）级比值检验（2）后验差比检验（3）模型拟合检验（4）模型残差检验（5）级比偏差检验 三 、总结1.代码总结2.公式总结 前言 灰色预测对原始数据进行生成处理来寻找系统变动的规律，并生成有较强规律性的数据序列，然后建立相应的微分方程模型，从而预测事物未来发展趋势的状况。
一、灰色预测是什么？ 灰色预测是一种对含有不确定因素的系统进行预测的方法。 灰色预测通过鉴别系统因素之间发展趋势的相异程度，即进行关联分析，并对原始数据进行生成处理来寻找系统变动的规律，生成有较强规律性的数据序列，然后建立相应的微分方程模型，从而预测事物未来发展趋势的状况。 其用等时距观测到的反映预测对象特征的一系列数量值构造灰色预测模型，预测未来某一时刻的特征量，或达到某一特征量的时间
二、使用步骤 1.使用条件 这个应该是很清晰的，数据量少，四五个，然后类指数形式增长的，什么是类指数增长：就是一组数据累加后排列是否呈类指数增长，与且预测的时间不是很长，就可以用。 分为GM (1,1)，GM (1,m)，GM (n,m)分别用于一个自变量一个因变量，多个自变量一个因变量，多个自变量多个因变量。 灰色预测就是尽可能使用数据中含有的信息。 假设你有十组数据，需要预测接下来的三组数据，程序跑完，一般是有求残差的过程，看一看是不是小于0.1，如果每个数据点都是小于0.1，那这次灰色预测就是很好的。
注：
数据量较少的情况下使用；数据呈类指数增长；预测时间较短要先进行级比值检验后验差比检验模型拟合检验模型残差检验 2.以GM（1,1）为例 （1）级比值检验 （注：级比值介于区间[0.982,1.0098]时说明数据适合模型构建。）
从上表可知，针对某数据进行GM(1,1)模型构建，结果显示：级比值的最大值为1.010，在适用范围区间[0.982,1.0098]之外，意味着本数据进行GM(1,1)可能得不到满意的模型。但从数据来看，1.01非常接近于1.0098，因此有理由接着进行建模。
如下代码所示为数据级比检验：
m = length(A); JiBi = ones(1,m-1); for i =2:m JiBi(i-1) = A(i-1)/A(i); end max1 = max(JiBi); min1 = min(JiBi); FanWei = exp(2/(n&#43;2))-exp(-2/(n&#43;1)) if max1 - min1&lt;FanWei disp([&#39;数据通过级别检验&#39;]); else disp([&#39;数据不通过级比检验&#39;]); end （2）后验差比检验 后验差比C值用于模型精度等级检验，该值越小越好，一般C值小于0.35则模型精度等级好，C值小于0.5说明模型精度合格，C值小于0.65说明模型精度基本合格，如果C值大于0.65，则说明模型精度等级不合格。
从上表可知，后验差比C值0.231 &lt;=0.35，意味着模型精度等级非常好。
以下为发展系数、灰色作用量和C值代码：
%构造数据矩阵 B = [-C;ones(1,n-1)]; Y = A; Y(1) = []; Y = Y&#39;; %Y进行了转置，C的公式求法与百度文库 发生了一些变化 % 使用最小二乘法计算参数 a(发展系数)和b(灰作用量) c = inv(B*B&#39;)*B*Y; %核心公式 c = c&#39;; a = c(1); b = c(2); disp([&#39;发展系数：&#39;,num2str(a)]); disp([&#39;灰色作用量：&#39;,num2str(b)]); %预测后续数据 F = []; F(1) = A(1); %法二：方差比C检验 C = std(epsilon, 1)/std(A, 1); %方差函数std 按照列分 disp([&#39;方差比C检验：&#39;,num2str(C)]); （3）模型拟合检验 上表格展示出模型的拟合值，以及向后12期的拟合数据情况，当然也可通过图形直观查看如下图，下图明显可以看出，往后时会一直下降，这是GM(1,1)模型的特征，其仅适用于中短期预测，因此向后1期和向后2期的数据具有价值，更多的预测数据需要特别谨慎对待。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9cef92de680b76248ed522046d8a7db1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-10T19:07:50+08:00" />
<meta property="article:modified_time" content="2023-03-10T19:07:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数学建模】灰色预测法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_7" rel="nofollow">前言</a></li><li><a href="#_16" rel="nofollow">一、灰色预测是什么？</a></li><li><a href="#_19" rel="nofollow">二、使用步骤</a></li><li><ul><li><a href="#1_20" rel="nofollow">1.使用条件</a></li><li><a href="#2GM11_32" rel="nofollow">2.以GM（1,1）为例</a></li><li><ul><li><a href="#1_34" rel="nofollow">（1）级比值检验</a></li><li><a href="#2_60" rel="nofollow">（2）后验差比检验</a></li><li><a href="#3_85" rel="nofollow">（3）模型拟合检验</a></li><li><a href="#4_106" rel="nofollow">（4）模型残差检验</a></li><li><a href="#5_135" rel="nofollow">（5）级比偏差检验</a></li></ul> 
  </li></ul> 
  </li><li><a href="#__157" rel="nofollow">三 、总结</a></li><li><ul><li><a href="#1_158" rel="nofollow">1.代码总结</a></li><li><a href="#2_253" rel="nofollow">2.公式总结</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_7"></a>前言</h2> 
<p>灰色预测对原始数据进行生成处理来寻找系统变动的规律，并生成有较强规律性的数据序列，然后建立相应的微分方程模型，从而预测事物未来发展趋势的状况。</p> 
<hr> 
<h2><a id="_16"></a>一、灰色预测是什么？</h2> 
<p>灰色预测是一种对含有<strong>不确定因素</strong>的系统进行预测的方法。 灰色预测通过鉴别系统因素之间发展趋势的相异程度，即进行<strong>关联分析</strong>，并对原始数据进行生成处理来寻找系统变动的规律，生<strong>成有较强规律性的数据序列</strong>，然后建立相应的<strong>微分方程</strong>模型，从而预测事物未来发展趋势的状况。 其用等时距观测到的反映预测对象特征的一系列数量值构造灰色预测模型，预测未来某一时刻的特征量，或达到某一特征量的时间</p> 
<h2><a id="_19"></a>二、使用步骤</h2> 
<h3><a id="1_20"></a>1.使用条件</h3> 
<p>这个应该是很清晰的，<strong>数据量少</strong>，四五个，然后<strong>类指数形式增长的</strong>，什么是类指数增长：就是一组数据<strong>累加</strong>后排列是否呈类指数增长，与且预测的时间不是很长，就可以用。 分为GM (1,1)，GM (1,m)，GM (n,m)分别用于一个自变量一个因变量，多个自变量一个因变量，多个自变量多个因变量。 灰色预测就是尽可能使用数据中含有的信息。 假设你有十组数据，需要预测接下来的三组数据，程序跑完，一般是有求残差的过程，看一看是不是小于0.1，如果每个数据点都是小于0.1，那这次灰色预测就是很好的。</p> 
<p>注：</p> 
<ol><li>数据量较少的情况下使用；</li><li>数据呈类指数增长；</li><li>预测时间较短</li><li>要先进行级比值检验</li><li>后验差比检验</li><li>模型拟合检验</li><li>模型残差检验</li></ol> 
<h3><a id="2GM11_32"></a>2.以GM（1,1）为例</h3> 
<h4><a id="1_34"></a>（1）级比值检验</h4> 
<p><img src="https://images2.imgbox.com/cd/42/qar3Fp7K_o.png" alt="在这里插入图片描述"><br> （注：级比值介于区间[0.982,1.0098]时说明数据适合模型构建。）</p> 
<p>从上表可知，针对某数据进行GM(1,1)模型构建，结果显示：级比值的最大值为1.010，在适用范围区间[0.982,1.0098]之外，意味着本数据进行GM(1,1)可能得不到满意的模型。但从数据来看，1.01非常接近于1.0098，因此有理由接着进行建模。</p> 
<p>如下代码所示为数据级比检验：</p> 
<pre><code class="prism language-matlab">m <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>
JiBi <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span><span class="token number">2</span><span class="token operator">:</span>m
    <span class="token function">JiBi</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
max1 <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>JiBi<span class="token punctuation">)</span><span class="token punctuation">;</span>
min1 <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>JiBi<span class="token punctuation">)</span><span class="token punctuation">;</span>
FanWei <span class="token operator">=</span> <span class="token function">exp</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">/</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">/</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> max1 <span class="token operator">-</span> min1<span class="token operator">&lt;</span>FanWei
    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'数据通过级别检验'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> 
    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'数据不通过级比检验'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

</code></pre> 
<h4><a id="2_60"></a>（2）后验差比检验</h4> 
<p><img src="https://images2.imgbox.com/7a/55/HiBzBnOO_o.png" alt="在这里插入图片描述"><br> 后验差比C值用于模型精度等级检验，<strong>该值越小越好</strong>，一般C值小于0.35则模型精度等级好，C值小于0.5说明模型精度合格，C值小于0.65说明模型精度基本合格，如果C值大于0.65，则说明模型精度等级不合格。</p> 
<p>从上表可知，后验差比C值<strong>0.231 &lt;=0.35</strong>，意味着模型精度等级非常好。</p> 
<p>以下为发展系数、灰色作用量和C值代码：</p> 
<pre><code class="prism language-matlab"> 
<span class="token comment">%构造数据矩阵 </span>
B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span>C<span class="token punctuation">;</span><span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Y <span class="token operator">=</span> A<span class="token punctuation">;</span> <span class="token function">Y</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> Y <span class="token operator">=</span> Y<span class="token operator">'</span><span class="token punctuation">;</span>      <span class="token comment">%Y进行了转置，C的公式求法与百度文库 发生了一些变化</span>
<span class="token comment">% 使用最小二乘法计算参数 a(发展系数)和b(灰作用量)</span>
c <span class="token operator">=</span> <span class="token function">inv</span><span class="token punctuation">(</span>B<span class="token operator">*</span>B<span class="token operator">'</span><span class="token punctuation">)</span><span class="token operator">*</span>B<span class="token operator">*</span>Y<span class="token punctuation">;</span>          <span class="token comment">%核心公式  </span>
c <span class="token operator">=</span> c<span class="token operator">'</span><span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> b <span class="token operator">=</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'发展系数：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'灰色作用量：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">%预测后续数据</span>
F <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">%法二：方差比C检验</span>
C <span class="token operator">=</span> <span class="token function">std</span><span class="token punctuation">(</span>epsilon<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">std</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">%方差函数std   按照列分</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'方差比C检验：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="3_85"></a>（3）模型拟合检验</h4> 
<p><img src="https://images2.imgbox.com/f9/41/mCLgUDHM_o.png" alt="在这里插入图片描述"><br> 上表格展示出模型的拟合值，以及向后12期的拟合数据情况，当然也可通过图形直观查看如下图，下图明显可以看出，往后时会一直下降，这是GM(1,1)模型的特征，<strong>其仅适用于中短期预测</strong>，因此向后1期和向后2期的数据具有价值，更多的预测数据需要特别谨慎对待。</p> 
<p>以下为模型拟合检验代码：</p> 
<pre><code class="prism language-matlab"><span class="token comment">%模型检验</span>
H <span class="token operator">=</span> <span class="token function">G</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>T1<span class="token punctuation">)</span><span class="token punctuation">;</span>
epsilon <span class="token operator">=</span> A <span class="token operator">-</span> H<span class="token punctuation">;</span>               <span class="token comment">%计算残差序列</span>
 <span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'残差检验：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>epsilon<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p>画图展示：</p> 
<pre><code class="prism language-matlab"><span class="token comment">%绘制曲线图</span>
<span class="token function">plot</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span> A<span class="token punctuation">,</span><span class="token string">'ro'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> hold on<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span>t2<span class="token punctuation">,</span> G<span class="token punctuation">,</span> <span class="token string">'g-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="4_106"></a>（4）模型残差检验</h4> 
<p><img src="https://images2.imgbox.com/a0/b5/klKwiVbB_o.png" alt="在这里插入图片描述"><br> 模型残差检验，主要是查看相对误差值和级比偏差值，验证模型效果情况。</p> 
<p>从上表可知，模型构建后可对相对误差和级比偏差值进行分析，验证模型效果情况；模型相对误差值最大值0.007&lt;0.1，意味着模型拟合效果达到较高要求。</p> 
<p>针对级比偏差值，该值小于0.2说明达到要求，若小于0.1则说明达到较高要求；模型相对误差值最大值0.020&lt;0.1，意味着模型拟合效果达到较高要求。</p> 
<p>以下为残差值检验代码：</p> 
<pre><code class="prism language-matlab"><span class="token comment">%法一：计算相对误差Q</span>
delta <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>epsilon<span class="token operator">./</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>
Q <span class="token operator">=</span> <span class="token function">mean</span><span class="token punctuation">(</span>delta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'相对残差Q检验：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">%法二：方差比C检验</span>
C <span class="token operator">=</span> <span class="token function">std</span><span class="token punctuation">(</span>epsilon<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">std</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">%方差函数std   按照列分</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'方差比C检验：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">%法三：小误差概率P检验</span>
S1 <span class="token operator">=</span> <span class="token function">std</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tmp <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>epsilon <span class="token operator">-</span> <span class="token function">mean</span><span class="token punctuation">(</span>epsilon<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;</span> <span class="token number">0.6745</span> <span class="token operator">*</span> S1<span class="token punctuation">)</span><span class="token punctuation">;</span>
P <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token operator">/</span>n<span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'小误差概率P检验：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>P<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 

</code></pre> 
<h4><a id="5_135"></a>（5）级比偏差检验</h4> 
<p>这是在（check.m）函数里的，需要调用</p> 
<pre><code class="prism language-matlab"> <span class="token comment">% 预测</span>
    p_d <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">:</span> n <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token function">p_d</span><span class="token punctuation">(</span><span class="token number">i</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token function">exp</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span>b<span class="token operator">/</span>a<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token operator">-</span>a<span class="token operator">*</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    
    <span class="token comment">% 级比偏差</span>
    u <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">p_d</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">./</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'均级比偏差为(通常小于0.1则说明适合灰色预测)：'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token function">mean</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">% 相对残差</span>
    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token string">'均级相对残差为(通常小于0.1则说明适合灰色预测)：'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    e <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">0.5</span><span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">./</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token function">mean</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

</code></pre> 
<h2><a id="__157"></a>三 、总结</h2> 
<h3><a id="1_158"></a>1.代码总结</h3> 
<pre><code class="prism language-matlab">clc<span class="token punctuation">;</span>clear<span class="token punctuation">;</span>      <span class="token comment">%建立符号变量a(发展系数)和b(灰作用量)</span>
syms a b<span class="token punctuation">;</span>
c <span class="token operator">=</span> <span class="token punctuation">[</span>a b<span class="token punctuation">]</span><span class="token operator">'</span><span class="token punctuation">;</span>    

A <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">4</span> <span class="token number">6</span> <span class="token number">9</span> <span class="token number">10</span> <span class="token number">12</span> <span class="token number">21</span> <span class="token number">34</span>






<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">%输入需要预测的数据</span>

T1<span class="token operator">=</span><span class="token function">length</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>
T2<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>                             <span class="token comment">%输入需要预测数据个数 </span>
t1<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>T1<span class="token punctuation">;</span>
t2<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>T1<span class="token operator">+</span>T2<span class="token punctuation">;</span>
n <span class="token operator">=</span> T1<span class="token punctuation">;</span>

m <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>
JiBi <span class="token operator">=</span> <span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span><span class="token number">2</span><span class="token operator">:</span>m
    <span class="token function">JiBi</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
max1 <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>JiBi<span class="token punctuation">)</span><span class="token punctuation">;</span>
min1 <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>JiBi<span class="token punctuation">)</span><span class="token punctuation">;</span>
FanWei <span class="token operator">=</span> <span class="token function">exp</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">/</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">/</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> max1 <span class="token operator">-</span> min1<span class="token operator">&lt;</span>FanWei
    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'数据通过级别检验'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> 
    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'数据不通过级比检验'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

 
<span class="token comment">%对原始数列 A 做累加得到数列 B</span>
B <span class="token operator">=</span> <span class="token function">cumsum</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">%对数列 B 做紧邻均值生成</span>
<span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">:</span>n
    <span class="token function">C</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">B</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">B</span><span class="token punctuation">(</span><span class="token number">i</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> 
<span class="token keyword">end</span>
<span class="token function">C</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
<span class="token comment">%构造数据矩阵 </span>
B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span>C<span class="token punctuation">;</span><span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Y <span class="token operator">=</span> A<span class="token punctuation">;</span> <span class="token function">Y</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> Y <span class="token operator">=</span> Y<span class="token operator">'</span><span class="token punctuation">;</span>      <span class="token comment">%Y进行了转置，C的公式求法与百度文库 发生了一些变化</span>
<span class="token comment">% 使用最小二乘法计算参数 a(发展系数)和b(灰作用量)</span>
c <span class="token operator">=</span> <span class="token function">inv</span><span class="token punctuation">(</span>B<span class="token operator">*</span>B<span class="token operator">'</span><span class="token punctuation">)</span><span class="token operator">*</span>B<span class="token operator">*</span>Y<span class="token punctuation">;</span>          <span class="token comment">%核心公式  </span>
c <span class="token operator">=</span> c<span class="token operator">'</span><span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> b <span class="token operator">=</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'发展系数：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'灰色作用量：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">%预测后续数据</span>
F <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">:</span>T1<span class="token operator">+</span>T2
    <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span>b<span class="token operator">/</span>a<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token operator">-</span>a<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span> b<span class="token operator">/</span>a<span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token comment">%对数列 F 累减还原,得到预测出的数据</span>
G <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token function">G</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">:</span>T1<span class="token operator">+</span>T2
    <span class="token function">G</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">%得到预测出来的数据</span>
<span class="token keyword">end</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'预测数据为：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">%模型检验</span>
H <span class="token operator">=</span> <span class="token function">G</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>T1<span class="token punctuation">)</span><span class="token punctuation">;</span>
epsilon <span class="token operator">=</span> A <span class="token operator">-</span> H<span class="token punctuation">;</span>               <span class="token comment">%计算残差序列</span>
 <span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'残差检验：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>epsilon<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">%法一：计算相对误差Q</span>
delta <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>epsilon<span class="token operator">./</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>
Q <span class="token operator">=</span> <span class="token function">mean</span><span class="token punctuation">(</span>delta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'相对残差Q检验：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">%法二：方差比C检验</span>
C <span class="token operator">=</span> <span class="token function">std</span><span class="token punctuation">(</span>epsilon<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">std</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">%方差函数std   按照列分</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'方差比C检验：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">%法三：小误差概率P检验</span>
S1 <span class="token operator">=</span> <span class="token function">std</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tmp <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>epsilon <span class="token operator">-</span> <span class="token function">mean</span><span class="token punctuation">(</span>epsilon<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;</span> <span class="token number">0.6745</span> <span class="token operator">*</span> S1<span class="token punctuation">)</span><span class="token punctuation">;</span>
P <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token operator">/</span>n<span class="token punctuation">;</span>
<span class="token function">disp</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'小误差概率P检验：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>P<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">%级比偏差和相对残差</span>
<span class="token function">check</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span>

 
<span class="token comment">%绘制曲线图</span>
<span class="token function">plot</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span> A<span class="token punctuation">,</span><span class="token string">'ro'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> hold on<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span>t2<span class="token punctuation">,</span> G<span class="token punctuation">,</span> <span class="token string">'g-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span>

</code></pre> 
<h3><a id="2_253"></a>2.公式总结</h3> 
<p>以上内容主要是针对如何使用灰色预测（GM（1,1））进行了一个概述，具体的公式讲解并没有列举出来，如若需要，再进行公式的细分和讲解。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2e7066f891ffdeddf5535db1f90c34ca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">虚拟机Ubuntu20.04系统，换成清华源的步骤</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3506d525c514f3b7c0eb3a9e4043770c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JVM——JVM调优方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>