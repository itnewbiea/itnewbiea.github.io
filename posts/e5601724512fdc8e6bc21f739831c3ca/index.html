<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VTK源码编译安装记录与教程（VS2019&#43;QT5.15.2&#43;PCL1.12.1&#43;VTK9.1.0配置，超详细） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VTK源码编译安装记录与教程（VS2019&#43;QT5.15.2&#43;PCL1.12.1&#43;VTK9.1.0配置，超详细）" />
<meta property="og:description" content="因为PCL库（傻瓜式安装）中自动安装的VTK库并不完整，不支持QT环境的UI界面开发，于是，想用QT在VS2019上开发图形界面程序，需要单独自己通过VTK源码编译安装，再进行配置。本人安装时开发环境已经装好的是VS2019&#43;QT5.15.2&#43;PCL1.12.1，供参考，其他版本基本上大同小异，需要注意的是在自动安装的PCL库中，看到里面VTK库的版本是9.1.0，于是，在源码编译安装VTK过程中，为了保险也用的是9.1.0版本。
目录 下载VTK源码：用CMake编译源码在VS中生成库替换PCL库中的VTK配置QT项目属性测试点云显示（QT项目PCL读取&#43;VTK显示） 下载VTK源码： 下载VTK源码
VTK官网下载链接，点击进入找到源码地址，找到官方在gitlab上的官方仓库，根据自己需要的版本下载源码。
进入gitlab官方仓库，点击标签
找到自己需要的版本进行下载
下载安装CMake
进入CMake官网进行下载，Windows系统下载二进制的安装文件直接点击就可以安装。
用CMake编译源码 准备好以下空目录，并把下载到的源码解压到VTK-Source中（目录命名仅作参考，读者可根据自己情况定义，但是建议目录中不要有中文字符，避免出现字符编码问题）
打开CMake-GUI
我是以管理员身份运行的CMake，不知道是不是必须条件，没有试过，运行后首先配置路径：
勾选grouped和advanced这两个选项（为了configure之后显示的结果进行分组归整，容易查看），再点击configure选择合适的编译器，点击Finish开始进行编译。
经过一定时间的等待，可以看到有很多红色选项是需要手动去检查或设置的，大家不要被一堆红色吓到了，这里的红色并不是报错了，只是编译器检测到了有这么多项需要配置，根据需要核查和设置几个最主要的项就行了。
配置关键属性项
1） BUILD_SHARED_LIBS 这个默认是勾选的，如果没勾选，勾选即可，作用是生成动态链接库dll，如果不勾，就是静态链接了，一般都是勾选的。
2）CMAKE_INSTALL_PREFIX是VTK的安装目录，默认是C盘中的一个目录，这里把它改为我们希望的目录地址，我这里改就是事先准备好的VTK-Install下的release（我后来在VTK-Install这个目录下又分别创建了release和debug两个目录，是为了以后万一要再生成一个debug版的库）
PS(事后补充）：除非只打算编译一种（release或debug或其他，见下一条设置），这里可以不用分，或者说事后再分。因为如果下一条编译类型写了多个的话（还是见下一条），那么在最后生成库的时候（VS中生成INSTALL这个项目时，后面会讲到），其实会全部生成到这个选项所设置的目录当中去，如果要区分，只能自己在生成过程中或者之后，手动剪切粘贴来完成（尝试过在VS中修改输出目录，但没起作用，欢迎大神解答或者以后再研究）。
3）CMAKE_CONFIGURATION_TYPES 是设置编译的类型（release或者debug等），默认是“Debug;Release;MinSizeRel;RelWithDebInfo”，这样一来生成的VS解决方案里(就是上面Buld这个目录）的工程打开，就可以支持四种不同设置的工程。这个根据需要来设置即可，也可以按默认的来。
4）与QT有关的配置，可以用关键词来搜索相关的配置项，默认都是DEFAULT，咱也不知道这个默认值到底是啥（有兴趣的伙伴可以试试），按照网上说的教程选了WANT，有的版本是只有勾选框，就直接勾选就好了，我这个版本有四个选项（YES，NO，WANT，NO_WANT），我也不知道YES和WANT有啥区别（搜了一下也没找到答案，有知道的大佬欢迎评论指正）。
以上这些主要的配置完了之后，再次点击“Configure”，会把大部分的配置项清除（或者变为白色，个人理解就是系统不需要向用户确认了）。但是由于我们在QT相关的配置项做了修改（主要是WANT了QT相关内容），所以又会出现一些红色配置项（系统需要我们补充配置或向我们确认），情况如下：
这里出现了一个小插曲：由于我的机器之前装了anaconda3且配置了环境变量，里面可能以前装了（不记得是默认装的还是手动装的了）QT，所以这里目录自动检索到了anaconda3里的目录，但是我实际上是单独安装了QT5.15.2且选择了对应的msvc2019编译器，也装了vs的QT插件，显然这个需求和anaconda3里的QT是不符合的。所以手动重新按照自己单独安装QT的目录重新设置了（如果在系统环境变量中，自己装的QT的目录在anaconda之前，应该可以直接避免这种情况），如下：
设置好后再次点击Configure，理想情况，应该是没有红色的事项了，然而意外还是发生了：
这里还有一个红色的警告，和QML有关，警告内容上面截图没截到，内容是“CMake Warning (dev) at GUISupport/QtQuick/qml/CMakeLists.txt:93 (message): Qt5 is configured in both Debug and Release modes. Due to Qt issue 47774 (https://bugreports.qt.io/browse/QTBUG-47774), skipping generation of qmltypes file. Using the one provided with the source tree instead.”,网上搜索一番，有人说是QML不能编译release版的，具体解决方法没有深究，只是一个告警，再次点击configure，会被直接忽略，如下图：
点击Generate,如下，大功告成？！
在VS中生成库 好了，上面那步的Generate只是生成了VS的解决方案，也就是build里的东西，接下来，点击旁边的“Open Project”，会自动启动Visual Studio并打开Build目录下的解决方案。如下图：
可以看到，上图中，编译类型有四种，跟我们之前在CMake中配置的一样。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e5601724512fdc8e6bc21f739831c3ca/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-12T18:15:55+08:00" />
<meta property="article:modified_time" content="2023-06-12T18:15:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VTK源码编译安装记录与教程（VS2019&#43;QT5.15.2&#43;PCL1.12.1&#43;VTK9.1.0配置，超详细）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>因为PCL库（傻瓜式安装）中自动安装的VTK库并不完整，不支持QT环境的UI界面开发，于是，想用QT在VS2019上开发图形界面程序，需要单独自己通过VTK源码编译安装，再进行配置。本人安装时开发环境已经装好的是VS2019+QT5.15.2+PCL1.12.1，供参考，其他版本基本上大同小异，需要注意的是在自动安装的PCL库中，看到里面VTK库的版本是9.1.0，于是，在源码编译安装VTK过程中，为了保险也用的是9.1.0版本。</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#VTK_3" rel="nofollow">下载VTK源码：</a></li><li><a href="#CMake_17" rel="nofollow">用CMake编译源码</a></li><li><a href="#VS_49" rel="nofollow">在VS中生成库</a></li><li><a href="#PCLVTK_70" rel="nofollow">替换PCL库中的VTK</a></li><li><a href="#QT_81" rel="nofollow">配置QT项目属性</a></li><li><a href="#QTPCLVTK_128" rel="nofollow">测试点云显示（QT项目PCL读取+VTK显示）</a></li></ul> 
</div> 
<p></p> 
<h2><a id="VTK_3"></a>下载VTK源码：</h2> 
<ol><li> <p>下载VTK源码<br> <a href="https://vtk.org/download/" rel="nofollow">VTK官网下载链接，点击进入找到源码地址</a>，找到官方在gitlab上的官方仓库，根据自己需要的版本下载源码。<br> <img src="https://images2.imgbox.com/2e/5e/FM5fdtWJ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ee/14/LHbrKnS9_o.png" alt="在这里插入图片描述"><br> 进入gitlab官方仓库，点击标签<br> <img src="https://images2.imgbox.com/de/9f/6IB3VaEb_o.png" alt="在这里插入图片描述"><br> 找到自己需要的版本进行下载<br> <img src="https://images2.imgbox.com/06/e3/BqKENgQX_o.png" alt="在这里插入图片描述"></p> </li><li> <p>下载安装CMake<br> <a href="https://cmake.org/download/" rel="nofollow">进入CMake官网进行下载</a>，Windows系统下载二进制的安装文件直接点击就可以安装。<br> <img src="https://images2.imgbox.com/7f/66/kajsyAkn_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h2><a id="CMake_17"></a>用CMake编译源码</h2> 
<ol><li>准备好以下空目录，并把下载到的源码解压到VTK-Source中（目录命名仅作参考，读者可根据自己情况定义，但是建议目录中不要有中文字符，避免出现字符编码问题）<br> <img src="https://images2.imgbox.com/dd/5c/4AwjpJsb_o.png" alt="在这里插入图片描述"></li><li>打开CMake-GUI<br> 我是以管理员身份运行的CMake，不知道是不是必须条件，没有试过，运行后首先配置路径：<br> <img src="https://images2.imgbox.com/dd/86/JgJn3k9e_o.png" alt="在这里插入图片描述"></li><li>勾选grouped和advanced这两个选项（为了configure之后显示的结果进行分组归整，容易查看），再点击configure选择合适的编译器，点击Finish开始进行编译。<br> <img src="https://images2.imgbox.com/e6/a6/JnIGkUY3_o.png" alt="在这里插入图片描述"></li><li>经过一定时间的等待，可以看到有很多红色选项是需要手动去检查或设置的，大家不要被一堆红色吓到了，这里的红色并不是报错了，只是编译器检测到了有这么多项需要配置，根据需要核查和设置几个最主要的项就行了。<br> <img src="https://images2.imgbox.com/db/17/s5Czh3Or_o.png" alt="在这里插入图片描述"></li><li>配置关键属性项<br> 1） BUILD_SHARED_LIBS 这个默认是勾选的，如果没勾选，勾选即可，作用是生成动态链接库dll，如果不勾，就是静态链接了，一般都是勾选的。<br> <img src="https://images2.imgbox.com/63/25/Ty57rWX5_o.png" alt="在这里插入图片描述"><br> 2）CMAKE_INSTALL_PREFIX是VTK的安装目录，默认是C盘中的一个目录，这里把它改为我们希望的目录地址，我这里改就是事先准备好的VTK-Install下的release（我后来在VTK-Install这个目录下又分别创建了release和debug两个目录，是为了以后万一要再生成一个debug版的库）<br> <strong>PS(事后补充）</strong>：除非只打算编译一种（release或debug或其他，见下一条设置），这里可以不用分，或者说事后再分。因为如果下一条编译类型写了多个的话（还是见下一条），那么在最后生成库的时候（VS中生成INSTALL这个项目时，后面会讲到），其实会全部生成到这个选项所设置的目录当中去，如果要区分，只能自己在生成过程中或者之后，手动剪切粘贴来完成（尝试过在VS中修改输出目录，但没起作用，欢迎大神解答或者以后再研究）。<br> <img src="https://images2.imgbox.com/8e/b6/ABz9SIZy_o.png" alt="在这里插入图片描述"><br> 3）CMAKE_CONFIGURATION_TYPES 是设置编译的类型（release或者debug等），默认是“Debug;Release;MinSizeRel;RelWithDebInfo”，这样一来生成的VS解决方案里(就是上面Buld这个目录）的工程打开，就可以支持四种不同设置的工程。这个根据需要来设置即可，也可以按默认的来。<br> <img src="https://images2.imgbox.com/ce/e8/3FMlb9oB_o.png" alt="在这里插入图片描述"></li></ol> 
<p>4）与QT有关的配置，可以用关键词来搜索相关的配置项，默认都是DEFAULT，咱也不知道这个默认值到底是啥（有兴趣的伙伴可以试试），按照网上说的教程选了WANT，有的版本是只有勾选框，就直接勾选就好了，我这个版本有四个选项（YES，NO，WANT，NO_WANT），我也不知道YES和WANT有啥区别（搜了一下也没找到答案，有知道的大佬欢迎评论指正）。<br> <img src="https://images2.imgbox.com/11/2e/irxA3oof_o.png" alt="在这里插入图片描述"></p> 
<ol start="6"><li>以上这些主要的配置完了之后，再次点击“Configure”，会把大部分的配置项清除（或者变为白色，个人理解就是系统不需要向用户确认了）。但是由于我们在QT相关的配置项做了修改（主要是WANT了QT相关内容），所以又会出现一些红色配置项（系统需要我们补充配置或向我们确认），情况如下：<br> <img src="https://images2.imgbox.com/3b/52/9GNkayy5_o.png" alt="在这里插入图片描述"><br> <strong>这里出现了一个小插曲</strong>：由于我的机器之前装了anaconda3且配置了环境变量，里面可能以前装了（不记得是默认装的还是手动装的了）QT，所以这里目录自动检索到了anaconda3里的目录，但是我实际上是单独安装了QT5.15.2且选择了对应的msvc2019编译器，也装了vs的QT插件，显然这个需求和anaconda3里的QT是不符合的。所以手动重新按照自己单独安装QT的目录重新设置了（如果在系统环境变量中，自己装的QT的目录在anaconda之前，应该可以直接避免这种情况），如下：<br> <img src="https://images2.imgbox.com/32/dc/YgvFZ0yr_o.png" alt="在这里插入图片描述"><br> 设置好后再次点击Configure，理想情况，应该是没有红色的事项了，然而意外还是发生了：<br> <img src="https://images2.imgbox.com/f6/db/YeGWGRSR_o.png" alt="在这里插入图片描述"><br> 这里还有一个红色的警告，和QML有关，警告内容上面截图没截到，内容是“CMake Warning (dev) at GUISupport/QtQuick/qml/CMakeLists.txt:93 (message): Qt5 is configured in both Debug and Release modes. Due to Qt issue 47774 (https://bugreports.qt.io/browse/QTBUG-47774), skipping generation of qmltypes file. Using the one provided with the source tree instead.”,网上搜索一番，有人说是QML不能编译release版的，具体解决方法没有深究，只是一个告警，再次点击configure，会被直接忽略，如下图：<br> <img src="https://images2.imgbox.com/b4/5c/zvThw1Up_o.png" alt="在这里插入图片描述"><br> 点击Generate,如下，大功告成？！<br> <img src="https://images2.imgbox.com/57/56/cIqDBMrH_o.png" alt="在这里插入图片描述"></li></ol> 
<h2><a id="VS_49"></a>在VS中生成库</h2> 
<p>好了，上面那步的Generate只是生成了VS的解决方案，也就是build里的东西，接下来，点击旁边的“Open Project”，会自动启动Visual Studio并打开Build目录下的解决方案。如下图：<br> <img src="https://images2.imgbox.com/2b/e1/lZP6kfxZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e3/59/6z8uZbun_o.png" alt="在这里插入图片描述"><br> 可以看到，上图中，编译类型有四种，跟我们之前在CMake中配置的一样。</p> 
<ol><li>编译DEBUG版本的<br> 选择，Debug，64位，<br> 首先，右键右边项目列表中的ALL_BUILD，点击生成，这个过程会比较慢，耐心等。生成成功以后，可以看到Build目录下多了一个bin目录，里面还有个debug目录，里面有很多的dll文件和pdb文件。但是我们之前CMake里面配置的Install目录下还空空如也呢！<br> 然后，在右侧找到项目INSTALL，右键点击——生成，这个就块多了。<br> 生成成功！这下算真的大功告成了！我们之前设置的Install的目录下有了四个子目录，这就是我们要用的VTK的库文件了，如下：<br> <img src="https://images2.imgbox.com/f7/f8/XIbpWuxq_o.png" alt="在这里插入图片描述"><br> 上面提到，不管编译debug还是release，都会按照CMake里CMAKE_INSTALL_PREFIX项的值所指向的目录来生成这些文件，所以我后来这个项设置为…/VTK-Install/output了。<br> 最后，把这些剪切到自己想放的debug目录下（因为我们这里编译的是debug的库，可以看到bin目录下的dll文件最后都会带一个字母“d”。</li><li>编译RELEASE版本的<br> 跟上面Debug版本的过程类似，只是最前面选择release即可，就不赘述了。</li></ol> 
<p>最后，得到debug和release的VTK的库，如下：<br> <img src="https://images2.imgbox.com/bc/1f/abmiNTH9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6a/7f/iN7Q7FE7_o.png" alt="在这里插入图片描述"><br> 这两个目录都是自己创建的，内容都是从output中拷出来的。</p> 
<h2><a id="PCLVTK_70"></a>替换PCL库中的VTK</h2> 
<p>好了，我们的目的并不是单独为了这个VTK，是因为PCL中的VTK不全（不支持QT），所以，接下来就直接替换，替换前我对比了一下，如下图：<br> <img src="https://images2.imgbox.com/43/88/ZvMl5LYF_o.png" alt="在这里插入图片描述"><br> 可以看到，右边是我们自己编译安装的，要多一些文件，左边是PCL自带的，很明显少了些东西（除了QT还有啥？没有深究）<br> 然后，因为看了一下PCL中的VTK，里面lib，bin这些目录下，release和debug版本的文件都在一个目录里没有分，索性我也不分了，直接把output中（前面提到了，release和debug的都生成到这个里面了）的文件拷贝过去。<br> 很显然，拷贝的时候会遇到重名的，4261个，跟上图左边的一致，因为两边都是9.1版本的VTK，为了防止这些重名文件跟PCL有啥关联，就没有覆盖，直接跳过重名，相当于只补充多出来的跟QT有关的（或许还有别的？）。<br> <img src="https://images2.imgbox.com/57/f0/I69h42in_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b1/30/hqRQbtcM_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/46/0e/Ge0Uon24_o.png" alt="在这里插入图片描述"><br> 如图，果然是多了一些跟QT有关的库文件。</p> 
<h2><a id="QT_81"></a>配置QT项目属性</h2> 
<p>在VS中创建QT项目，然后添加属性文件，这里也可以直接右键项目编辑属性，但是采用属性文件的方式，有利于项目配置的复用（毕竟配置一次完整的PCL相关库需要添加很多lib文件）。具体操作步骤如下图：<br> <img src="https://images2.imgbox.com/92/8a/GaRpk20W_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/26/f9/6NPswXb3_o.png" alt="在这里插入图片描述"><br> 注意这里debug版本的和release版本的需要分别添加。具体VS项目属性文件的有关教程可以网上自行搜索，这里照着后面接着做即可。<br> <img src="https://images2.imgbox.com/19/71/TqEYn6yl_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c5/78/kaIDYXaC_o.png" alt="在这里插入图片描述"><br> 创建好后双击，即可打开项目属性设置窗口，这个窗口是针对该项目属性文件的，配置好后，以后新建项目或者其他项目需要用到PCL库release或者Debug版的属性配置，只需要添加这个属性文件即可。</p> 
<p><strong>插曲：OpenNI2的安装</strong><br> 在直接自动安装的PCL1.12.1目录里面，发现OpenNI2目录中居然是空的（只有安装程序，好像是直接给装到C盘去了？），后面包含目录和库目录可是要用到的啊！于是直接在目录中安装，如果显示已经有了OpenNI，需要先用清除选项清除，然后再一次运行安装程序就可以了，如下图：<br> <img src="https://images2.imgbox.com/00/35/c97xh2vx_o.png" alt="在这里插入图片描述"><br> 照惯例，安装目录只要能修改，就修改成我们想要的，我直接修改成了当前的PCL中的OpenNI2的目录，安装完成以后是这样的：<br> <img src="https://images2.imgbox.com/1b/39/iPcGiC9A_o.png" alt="在这里插入图片描述"><br> 系统环境变量跟着这个新安装的目录改一下就好，我也不知道为什么之前安装PCL的时候系统环境变量虽然添加了OpenNI2，但是目录却是C盘的而不是PCL的安装目录。</p> 
<ol><li> <p>包含目录的设置<br> 可以通过属性配置窗口的“C/C++"—&gt;”常规“中的附加包含目录，也可以通过”VC++目录“中的”包含目录“进行添加，添加结果如下：<br> <img src="https://images2.imgbox.com/08/be/PrDGHfQX_o.png" alt="在这里插入图片描述"><br> <strong>注意事项</strong>：上图中pcl、boost等几个库的包含目录一直写到了”……\pcl“（以pcl为例），后来写代码的时候发现，最好是写到前一级目录即可（或者加一个前一级目录，按我自己这个例子，就是写到D:\My3rdLib\PCL 1.12.1\include\pcl-1.12），为什么？因为这些包含目录里的.h头文件很多，我们开发的时候实际也不会只用这一两个库（可能有一大堆），这些库里面的很多头文件都并没有带自己的库名称，所以为了更好地区分和阅读代码，在引用pcl的库的时候（其他库也是一样），更习惯于用<code>#include&lt;pcl/****.h&gt;</code>之类的写法，如果包含目录像上图那样写，就只能写成<code>#include&lt;****.h&gt;</code>，万一有些库里面出现了同名头文件，还会让编译器混淆。</p> </li><li> <p>库目录设置<br> 这个没啥好说的了，照着来就行了。<br> <img src="https://images2.imgbox.com/2c/56/imxh1eQ5_o.png" alt="在这里插入图片描述"></p> </li><li> <p>链接器——输入——附加依赖项<br> 这个设置算是最麻烦的一步了，主要是因为要添加的lib文件太多了。更麻烦的是，有很多库文件，是要区分debug版和release版的，光vtk有200多个（release的和debug的各100多个，关键咱这还是专门为了它而来）。网上很多教程给了批处理的代码，这里自己完善了一下，如下图，一次性把pcl和里面各种第三方库.lib文件的文件名都分别提取到.txt中，便于复制粘贴，有一些库的debug版本和release版本文件可以很容易用代码区分，就分别存到不同的.txt中（release后缀r，debug后缀d），部分库区分不易，就都在一起了，后缀rd，提取完了以后再手动区分，如下图：<br> <img src="https://images2.imgbox.com/9a/02/miFyRnig_o.png" alt="在这里插入图片描述"><br> 批处理的代码如下（路径可以根据自己需要修改）：</p> </li></ol> 
<pre><code class="prism language-bash"><span class="token function">dir</span> <span class="token string">"D:\My3rdLib\PCL 1.12.1\lib\*.lib"</span> /b <span class="token operator">&gt;</span> libs_pcl_rd.txt

<span class="token function">dir</span> <span class="token string">"D:\My3rdLib\PCL 1.12.1<span class="token entity" title="\3">\3</span>rdParty\Boost\lib\*mt-gd-x64-1_78.lib"</span> /b <span class="token operator">&gt;</span> libs_boost_d.txt
<span class="token function">dir</span> <span class="token string">"D:\My3rdLib\PCL 1.12.1<span class="token entity" title="\3">\3</span>rdParty\Boost\lib\*mt-x64-1_78.lib"</span> /b <span class="token operator">&gt;</span> libs_boost_r.txt

<span class="token function">dir</span> <span class="token string">"D:\My3rdLib\PCL 1.12.1<span class="token entity" title="\3">\3</span>rdParty\FLANN\lib\*.lib"</span> /b <span class="token operator">&gt;</span> libs_flann_rd.txt

<span class="token function">dir</span> <span class="token string">"D:\My3rdLib\PCL 1.12.1<span class="token entity" title="\3">\3</span>rdParty\OpenNI2\Lib\*.lib"</span> /b <span class="token operator">&gt;</span> libs_openni2_rd.txt

<span class="token function">dir</span> <span class="token string">"D:\My3rdLib\PCL 1.12.1<span class="token entity" title="\3">\3</span>rdParty\Qhull\lib\*.lib"</span> /b <span class="token operator">&gt;</span> libs_qhull_rd.txt

<span class="token function">dir</span> <span class="token string">"D:\My3rdLib\PCL 1.12.1<span class="token entity" title="\3">\3</span>rdParty\VTK\lib\*1.lib"</span> /b <span class="token operator">&gt;</span> libs_vtk_r.txt
<span class="token function">dir</span> <span class="token string">"D:\My3rdLib\PCL 1.12.1<span class="token entity" title="\3">\3</span>rdParty\VTK\lib\*d.lib"</span> /b <span class="token operator">&gt;</span> libs_vtk_d.txt
</code></pre> 
<p>为了方便，上传了我自己的批处理程序文件和处理好（自动提取+手动整理）的结果，跟我这篇记录的版本完全一致的，想偷懒的，直接用压缩包里面<code>libs_pcl_3rdpart_all_d.txt</code>和<code>libs_pcl_3rdpart_all_r.txt</code>（后缀r的是release的，后缀d的是debug的）这两个文件中的内容即可，是pcl相关所有库的lib文件整理合并之后的，直接粘贴到vs的项目属性配置的链接器——输入——附加依赖项里就行了。<br> <a href="https://download.csdn.net/download/yl19870518/87898985">点击下载提取文件名批处理程序及处理结果</a></p> 
<h2><a id="QTPCLVTK_128"></a>测试点云显示（QT项目PCL读取+VTK显示）</h2> 
<ol><li> <p>QVTK显示控件<br> 根据网上说的，在VTK9.0以后没有QT插件了，需要通过OpenGL Widget来提升，如下图：<br> <img src="https://images2.imgbox.com/4b/42/bzn4ihzT_o.png" alt="在这里插入图片描述"><br> 点击提升为后，在窗口中填写提升的类名称为<code>QVTKOpenGLNativeWidget</code>，下面的头文件会自动填充。<br> <img src="https://images2.imgbox.com/10/75/fvMfxH5g_o.png" alt="在这里插入图片描述"><br> 点击提升完成后，修改该控件的Object Name为自己需要的，我这里是修改为qvtkWidget了，如下图：<br> <img src="https://images2.imgbox.com/ce/8c/eRHNTWPE_o.png" alt="在这里插入图片描述"><br> 回到Visual Studio以后，进入”ui_*****.h"这个特殊的头文件（QT自动生成的UI界面的头文件）会发现自动添加了上述头文件，控件的定义也添加进去了，如图：<br> <img src="https://images2.imgbox.com/b5/23/6y2ydeBi_o.png" alt="在这里插入图片描述"></p> </li><li> <p>读取点云（仅以.ply数据读取为例）<br> 回到Visual Studio，代码中添加如下头文件：</p> </li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;pcl/io/ply_io.h&gt;</span>		<span class="token comment">//用来读取.ply格式的点云</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;pcl/point_types.h&gt;</span>		<span class="token comment">//用于点云变量定义			</span></span>
</code></pre> 
<p>然后在自己希望的地方添加如下读取代码：</p> 
<pre><code class="prism language-cpp">pcl<span class="token double-colon punctuation">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token double-colon punctuation">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>Ptr <span class="token function">myCloud</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token double-colon punctuation">::</span>PointCloud<span class="token operator">&lt;</span>pcl<span class="token double-colon punctuation">::</span>PointXYZ<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>pcl<span class="token double-colon punctuation">::</span>io<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">loadPLYFile</span><span class="token generic class-name"><span class="token operator">&lt;</span>pcl<span class="token double-colon punctuation">::</span>PointXYZ<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"D:\\Users\\YeL313\\Downloads\\bunny.ply"</span><span class="token punctuation">,</span> <span class="token operator">*</span>myCloud<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"Title"</span><span class="token punctuation">,</span> <span class="token string">"read failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"Title"</span><span class="token punctuation">,</span> <span class="token string">"read completed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>显示点云<br> 代码中添加如下头文件：</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;pcl/visualization/pcl_visualizer.h&gt;</span>	</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vtkGenericOpenGLRenderWindow.h&gt;</span>		</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;QVTKOpenGLNativeWidget.h&gt;</span>	</span>
</code></pre> 
<p>然后添加如下代码显示点云：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//创建渲染器</span>
vtkRenderer<span class="token operator">*</span> ren <span class="token operator">=</span> vtkRenderer<span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建渲染窗口</span>
vtkGenericOpenGLRenderWindow<span class="token operator">*</span> renderWindow <span class="token operator">=</span> vtkGenericOpenGLRenderWindow<span class="token double-colon punctuation">::</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建pcl显示器并与VTK的渲染器和渲染窗口绑定</span>
pcl<span class="token double-colon punctuation">::</span>visualization<span class="token double-colon punctuation">::</span>PCLVisualizer<span class="token double-colon punctuation">::</span>Ptr <span class="token function">pclViewer</span><span class="token punctuation">(</span><span class="token keyword">new</span> pcl<span class="token double-colon punctuation">::</span>visualization<span class="token double-colon punctuation">::</span><span class="token function">PCLVisualizer</span><span class="token punctuation">(</span>ren<span class="token punctuation">,</span>renderWindow<span class="token punctuation">,</span><span class="token string">"viewer"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染窗口与qvtkWidget绑定</span>
ui<span class="token punctuation">.</span>qvtkWidget<span class="token operator">-&gt;</span><span class="token function">setRenderWindow</span><span class="token punctuation">(</span>pclViewer<span class="token operator">-&gt;</span><span class="token function">getRenderWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//添加点云数据</span>
pclViewer<span class="token operator">-&gt;</span><span class="token function">addPointCloud</span><span class="token punctuation">(</span>myCloud<span class="token punctuation">,</span><span class="token string">"cloud"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//刷新控件（如果是第一次载入点云，点云没有变更，可以不加下面这句）</span>
ui<span class="token punctuation">.</span>qvtkWidget<span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>网上找到一些代码，但是有很多显示不出来，不知道是不是我没用对，还有一些用VTK来读取点云的或者一些比较复杂的，就没去深究，想用最简单的方法来显示，就折腾了这么几句代码，根据自己的理解写了注释，如有错误，欢迎指正。以后关于更加详细和复杂的点云操作和显示，再另外开帖，这篇主要是讲VTK的编译和配置，这个代码的折腾纯粹为了测试一下配置好了没。</p> 
<p>最后运行程序，成功！<br> <img src="https://images2.imgbox.com/a2/53/Wm5MwbCy_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a34abb90027f8006a63b2572564b0ace/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CSDN编写技巧</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7b7ba099cce1e5450f06e5de0c5708a3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用Git克隆Github项目</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>