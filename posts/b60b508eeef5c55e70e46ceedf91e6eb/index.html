<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€æ¢ç´¢ Kubernetes|ä½œä¸šç®¡ç†ç¯‡ ç³»åˆ— 15ã€‘DaemonSet çš„â€è¿‡äººä¹‹å¤„â€œ - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ã€æ¢ç´¢ Kubernetes|ä½œä¸šç®¡ç†ç¯‡ ç³»åˆ— 15ã€‘DaemonSet çš„â€è¿‡äººä¹‹å¤„â€œ" />
<meta property="og:description" content="å‰è¨€ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç§‹æ„é›¶ã€‚
åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº† StatefulSet çš„å­˜å‚¨çŠ¶æ€ï¼›æˆ‘ä»¬å‘ç°ï¼Œå®ƒçš„å­˜å‚¨çŠ¶æ€ï¼Œå°±æ˜¯åˆ©ç”¨äº† PV ä¸ PVC çš„è®¾è®¡ã€‚StatefulSet è‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»º PVC å¹¶ä¸”ä»¥ &lt;pvc-name&gt;-&lt;pod-name&gt;-&lt;ç¼–å·&gt;å‘½åï¼Œä»è€Œå§‹ç»ˆä¸ Pod ç¼–å·åä¸€è‡´çš„ç»‘å®šã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ï¼šStatefulSet çš„â€œæ»šåŠ¨æ›´æ–°â€æ˜¯ä»æœ€åä¸€ä¸ª Pod å¼€å§‹çš„ï¼Œä¸ºäº†ä¸ç ´åæ‹“æ‰‘çŠ¶æ€ã€‚å¦‚ï¼šä¸»ä»æ•°æ®åº“ï¼Œä¸»çš„ Pod ç¼–å·æ˜¯ 0ï¼Œåé¢æ˜¯ä»ï¼Œå¦‚æœå…ˆæ›´æ–°ä¸»æ•°æ®åº“ 0 ç¼–å·ï¼Œé‚£ä¹ˆåé¢çš„ä»æ•°æ®åº“å°±ä¼šå‡ºç°é—®é¢˜ã€‚
StatefulSet çš„â€œæ»šåŠ¨æ›´æ–°â€è¿˜å…è®¸æˆ‘ä»¬è¿›è¡Œæ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œæ¯”å¦‚ï¼šé‡‘ä¸é›€å‘å¸ƒï¼ˆCanary Deployï¼‰æˆ–è€…ç°åº¦å‘å¸ƒï¼Œè¿™æ„å‘³ç€åº”ç”¨çš„å¤šä¸ªå®ä¾‹ä¸­è¢«æŒ‡å®šçš„ä¸€éƒ¨åˆ†ä¸ä¼šè¢«æ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ã€‚
StatefulSet çš„ partition å­—æ®µè®¾ç½®ä¸º 2ï¼Œé‚£ä¹ˆç¼–å·å°äº 2 çš„ Pod æ˜¯ä¸ä¼šè¿›è¡Œé•œåƒæ›´æ–°çš„ã€‚
$ kubectl patch statefulset mysql -p &#39;{&#34;spec&#34;:{&#34;updateStrategy&#34;:{&#34;type&#34;:&#34;RollingUpdate&#34;,&#34;rollingUpdate&#34;:{&#34;partition&#34;:2}}}}&#39; statefulset.apps/mysql patched ä»Šå¤©çš„å†…å®¹æ˜¯ DaemonSet æ§åˆ¶å™¨ã€‚
ğŸ‘¿ ç®€ä»‹
ğŸ  ä¸ªäººä¸»é¡µï¼š ç§‹æ„é›¶ğŸ§‘ ä¸ªäººä»‹ç»ï¼šåœ¨æ ¡æœŸé—´å‚ä¸ä¼—å¤šäº‘è®¡ç®—ç›¸å…³æ¯”èµ›ï¼Œå¦‚ï¼šğŸŒŸ â€œçœèµ›â€ã€â€œå›½èµ›â€ï¼Œå¹¶æ–©è·å¤šé¡¹å¥–é¡¹è£èª‰è¯ä¹¦ğŸ‰ ç›®å‰çŠ¶å†µï¼š24 å±Šæ¯•ä¸šç”Ÿï¼Œæ‹¿åˆ°ä¸€å®¶ç§æœ‰äº‘ï¼ˆIAASï¼‰å…¬å¸ offerï¼Œæš‘å‡å¼€å§‹å®ä¹ ğŸ”¥ è´¦å·ï¼šå„ä¸ªå¹³å°ï¼Œ ç§‹æ„é›¶ è´¦å·åˆ›ä½œè€…ã€ äº‘ç¤¾åŒº åˆ›å»ºè€…ğŸ’•æ¬¢è¿å¤§å®¶ï¼šæ¬¢è¿å¤§å®¶ä¸€èµ·å­¦ä¹ äº‘è®¡ç®—ï¼Œèµ°å‘å¹´è–ª 30 ä¸‡ ç³»åˆ—æ–‡ç« ç›®å½• ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes-1ã€‘å®¹å™¨çš„æœ¬è´¨æ˜¯è¿›ç¨‹
ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes-2ã€‘å®¹å™¨ Linux Cgroups é™åˆ¶" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/b60b508eeef5c55e70e46ceedf91e6eb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-29T13:49:44+08:00" />
<meta property="article:modified_time" content="2023-06-29T13:49:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€æ¢ç´¢ Kubernetes|ä½œä¸šç®¡ç†ç¯‡ ç³»åˆ— 15ã€‘DaemonSet çš„â€è¿‡äººä¹‹å¤„â€œ</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="df368884">å‰è¨€</h2> 
<p id="u53aeea5d"><strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç§‹æ„é›¶ã€‚</strong></p> 
<p id="ueabba2cf">åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº† StatefulSet çš„å­˜å‚¨çŠ¶æ€ï¼›æˆ‘ä»¬å‘ç°ï¼Œå®ƒçš„å­˜å‚¨çŠ¶æ€ï¼Œå°±æ˜¯åˆ©ç”¨äº† PV ä¸ PVC çš„è®¾è®¡ã€‚StatefulSet è‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»º PVC å¹¶ä¸”ä»¥ <code>&lt;pvc-name&gt;-&lt;pod-name&gt;-&lt;ç¼–å·&gt;</code>å‘½åï¼Œä»è€Œå§‹ç»ˆä¸ Pod ç¼–å·åä¸€è‡´çš„ç»‘å®šã€‚</p> 
<p id="u2bbd32cc"><strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼šStatefulSet çš„â€œæ»šåŠ¨æ›´æ–°â€æ˜¯ä»æœ€åä¸€ä¸ª Pod å¼€å§‹çš„ï¼Œä¸ºäº†ä¸ç ´åæ‹“æ‰‘çŠ¶æ€ã€‚å¦‚ï¼šä¸»ä»æ•°æ®åº“ï¼Œä¸»çš„ Pod ç¼–å·æ˜¯ 0ï¼Œåé¢æ˜¯ä»ï¼Œå¦‚æœå…ˆæ›´æ–°ä¸»æ•°æ®åº“ 0 ç¼–å·ï¼Œé‚£ä¹ˆåé¢çš„ä»æ•°æ®åº“å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p> 
<p id="uf7bc6d06">StatefulSet çš„â€œæ»šåŠ¨æ›´æ–°â€è¿˜å…è®¸æˆ‘ä»¬è¿›è¡Œæ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œæ¯”å¦‚ï¼šé‡‘ä¸é›€å‘å¸ƒï¼ˆCanary Deployï¼‰æˆ–è€…ç°åº¦å‘å¸ƒï¼Œè¿™æ„å‘³ç€åº”ç”¨çš„å¤šä¸ªå®ä¾‹ä¸­è¢«æŒ‡å®šçš„ä¸€éƒ¨åˆ†ä¸ä¼šè¢«æ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ã€‚</p> 
<p id="ub6a46359"><strong>StatefulSet çš„ partition å­—æ®µè®¾ç½®ä¸º 2ï¼Œé‚£ä¹ˆç¼–å·å°äº 2 çš„ Pod æ˜¯ä¸ä¼šè¿›è¡Œé•œåƒæ›´æ–°çš„</strong>ã€‚</p> 
<pre><code class="language-bash">$ kubectl patch statefulset mysql -p '{"spec":{"updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":2}}}}'
statefulset.apps/mysql patched</code></pre> 
<p id="u06648e2c"></p> 
<p id="uf261cd94">ä»Šå¤©çš„å†…å®¹æ˜¯ DaemonSet æ§åˆ¶å™¨ã€‚</p> 
<p id="u1225ed54"></p> 
<p id="u8802129a"><strong>ğŸ‘¿ ç®€ä»‹</strong></p> 
<p id="uf13e3d14"></p> 
<ul><li id="u33070828">ğŸ  <strong>ä¸ªäººä¸»é¡µ</strong>ï¼š <a href="https://blog.csdn.net/qq_48450494?spm=1000.2115.3001.5343" title="ç§‹æ„é›¶">ç§‹æ„é›¶</a></li><li id="uba5af928">ğŸ§‘ <strong>ä¸ªäººä»‹ç»</strong>ï¼šåœ¨æ ¡æœŸé—´å‚ä¸ä¼—å¤šäº‘è®¡ç®—ç›¸å…³æ¯”èµ›ï¼Œå¦‚ï¼šğŸŒŸ <strong>â€œçœèµ›â€ã€â€œå›½èµ›â€</strong>ï¼Œå¹¶æ–©è·å¤šé¡¹å¥–é¡¹è£èª‰è¯ä¹¦</li><li id="ucfe7f57f">ğŸ‰ <strong>ç›®å‰çŠ¶å†µ</strong>ï¼š24 å±Šæ¯•ä¸šç”Ÿï¼Œæ‹¿åˆ°ä¸€å®¶ç§æœ‰äº‘ï¼ˆIAASï¼‰å…¬å¸ offerï¼Œæš‘å‡å¼€å§‹å®ä¹ </li><li id="u7026d55f">ğŸ”¥ <strong>è´¦å·</strong>ï¼šå„ä¸ªå¹³å°ï¼Œ <a href="https://blog.csdn.net/qq_48450494?spm=1000.2115.3001.5343" title="ç§‹æ„é›¶">ç§‹æ„é›¶</a> è´¦å·åˆ›ä½œè€…ã€ <a href="https://bbs.csdn.net/forums/CloudLog" title="äº‘ç¤¾åŒº">äº‘ç¤¾åŒº</a> åˆ›å»ºè€…</li><li id="u0ad186c9">ğŸ’•<strong>æ¬¢è¿å¤§å®¶</strong>ï¼šæ¬¢è¿å¤§å®¶ä¸€èµ·å­¦ä¹ äº‘è®¡ç®—ï¼Œèµ°å‘å¹´è–ª 30 ä¸‡</li></ul> 
<p id="u735aab0a"></p> 
<p id="u4428dba9"><img alt="" id="dk4Fb" src="https://images2.imgbox.com/04/5b/nrnT5AfL_o.png" width="129"></p> 
<p id="u4f30bc34"></p> 
<h2 id="ec31bbed">ç³»åˆ—æ–‡ç« ç›®å½•</h2> 
<hr id="BwAn0"> 
<p id="ubfb8b0c9"><a href="https://blog.csdn.net/qq_48450494/article/details/130378310" title="ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes-1ã€‘å®¹å™¨çš„æœ¬è´¨æ˜¯è¿›ç¨‹">ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes-1ã€‘å®¹å™¨çš„æœ¬è´¨æ˜¯è¿›ç¨‹</a><br><a href="https://blog.csdn.net/qq_48450494/article/details/130393338" title="ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes-2ã€‘å®¹å™¨ Linux Cgroups é™åˆ¶">ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes-2ã€‘å®¹å™¨ Linux Cgroups é™åˆ¶</a><br><a href="https://blog.csdn.net/qq_48450494/article/details/130761670" title="ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes ç³»åˆ— 3ã€‘æ·±å…¥ç†è§£å®¹å™¨è¿›ç¨‹çš„æ–‡ä»¶ç³»ç»Ÿ">ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes ç³»åˆ— 3ã€‘æ·±å…¥ç†è§£å®¹å™¨è¿›ç¨‹çš„æ–‡ä»¶ç³»ç»Ÿ</a><br><a href="https://blog.csdn.net/qq_48450494/article/details/130840896?spm=1001.2014.3001.5501" title="ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes ç³»åˆ— 4ã€‘ç°ä»£äº‘åŸç”Ÿæ—¶ä»£çš„å¼•æ“">ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes ç³»åˆ— 4ã€‘ç°ä»£äº‘åŸç”Ÿæ—¶ä»£çš„å¼•æ“</a><br><a href="https://blog.csdn.net/qq_48450494/article/details/130909845" title="ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes ç³»åˆ— 5ã€‘ç®€åŒ– Kubernetes çš„éƒ¨ç½²ï¼Œæ·±å…¥è§£æå…¶å·¥ä½œæµç¨‹">ã€äº‘åŸç”Ÿ|æ¢ç´¢ Kubernetes ç³»åˆ— 5ã€‘ç®€åŒ– Kubernetes çš„éƒ¨ç½²ï¼Œæ·±å…¥è§£æå…¶å·¥ä½œæµç¨‹</a></p> 
<hr id="LMCTu"> 
<p id="u8778bc30"><strong>æ›´å¤šç‚¹å‡»ä¸“æ æŸ¥çœ‹</strong>ï¼š<a href="https://blog.csdn.net/qq_48450494/category_12302983.html?spm=1001.2014.3001.5482" title="æ·±å…¥æ¢ç´¢ Kubernetes">æ·±å…¥æ¢ç´¢ Kubernetes</a></p> 
<p id="ua18d804e"></p> 
<p id="u14c850e8"><strong>æ­£æ–‡å¼€å§‹</strong>ï¼š</p> 
<ul><li id="u1f43187b">å¿«é€Ÿä¸Šèˆ¹ï¼Œé©¬ä¸Šå¼€å§‹æŒèˆµäº†ï¼ˆKubernetesï¼‰ï¼Œè·ç¦»å¼€èˆ¹è¿˜æœ‰ 3sï¼Œ2sï¼Œ1s...</li></ul> 
<p id="u5c400dd5"></p> 
<p id="u852bb81d"><img alt="" id="JN22d" src="https://images2.imgbox.com/76/f8/1DOCPJci_o.png" width="134"></p> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="df368884-toc" style="margin-left:0px;"><a href="#df368884" rel="nofollow">å‰è¨€</a></p> 
<p id="ec31bbed-toc" style="margin-left:0px;"><a href="#ec31bbed" rel="nofollow">ç³»åˆ—æ–‡ç« ç›®å½•</a></p> 
<p id="U9qsZ-toc" style="margin-left:0px;"><a href="#U9qsZ" rel="nofollow">ä¸€ã€DaemonSet ä»‹ç»</a></p> 
<p id="wIi8j-toc" style="margin-left:40px;"><a href="#wIi8j" rel="nofollow">Daemon Pod çš„æ„ä¹‰</a></p> 
<p id="QlGIn-toc" style="margin-left:0px;"><a href="#QlGIn" rel="nofollow">äºŒã€DaemonSet çš„â€œè¿‡äººä¹‹å¤„â€</a></p> 
<p id="SZ95A-toc" style="margin-left:0px;"><a href="#SZ95A" rel="nofollow">ä¸‰ã€DaemonSet çš„é•œåƒç‰ˆæœ¬å¦‚ä½•ç»´æŠ¤</a></p> 
<p id="JCUzq-toc" style="margin-left:40px;"><a href="#JCUzq" rel="nofollow">ä¸€åˆ‡çš†å¯¹è±¡</a></p> 
<p id="yvRV2-toc" style="margin-left:0px;"><a href="#yvRV2" rel="nofollow">æ€»ç»“</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="U9qsZ">ä¸€ã€DaemonSet ä»‹ç»</h2> 
<p id="ufd53625b">DaemonSet çš„ä¸»è¦ä½œç”¨ï¼Œæ˜¯åœ¨é›†ç¾¤ä¸­è¿è¡Œä¸€ä¸ªç±»ä¼¼å®ˆæŠ¤è¿›ç¨‹çš„ Pod æœåŠ¡ï¼ˆDaemon Podï¼‰ã€‚</p> 
<p id="u75f9d103"><strong>DaemonSet ç®¡ç† Pod çš„ä¸‰ä¸ªç‰¹æ€§ï¼š</strong></p> 
<ul><li id="u1612040e">è¿™ä¸ª Pod è¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œ<strong>æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆNodeï¼‰ä¸Š</strong>ï¼›</li><li id="u66271cdb">DaemonSet <strong>åªä¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ª Pod</strong>ï¼ˆDaemon Podï¼‰ï¼›</li><li id="uc36461fb">é›†ç¾¤ä¸­æœ‰æ–°èŠ‚ç‚¹åŠ å…¥æ—¶ï¼ŒDaemonSet ä¹Ÿä¼š<strong>é©¬ä¸Šä¸ºè¿™ä¸ªæ–°èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ª Pod</strong>ï¼›å½“ç„¶å½“èŠ‚ç‚¹ä»é›†ç¾¤ä¸­ç§»é™¤æ—¶ï¼Œè¿™ä¸ª Pod ä¹Ÿä¼šå›æ”¶ã€‚</li></ul> 
<p id="u55f9e822"><strong>å®é™…ä¸Šå°±æ˜¯ä¸ºæ¯ä¸ªèŠ‚ç‚¹åªåˆ›å»ºä¸€ä¸ª Podï¼Œå°±æ˜¯åƒæ‰€è°“çš„å®ˆæŠ¤ç¨‹åºã€‚</strong></p> 
<h3 id="wIi8j">Daemon Pod çš„æ„ä¹‰</h3> 
<p id="u62ee30d7">DaemonSet<strong> </strong>æœºåˆ¶å¬èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯ Daemon Pod çš„æ„ä¹‰ç¡®å®æ˜¯éå¸¸é‡è¦çš„ã€‚å¦‚ä¸‹ï¼š</p> 
<ul><li id="ud771b36d">1.å„ç§<strong>ç½‘ç»œæ’ä»¶</strong>çš„ Agent ç»„ä»¶ï¼Œ<strong>ç”¨æ¥å¤„ç†è¿™ä¸ªèŠ‚ç‚¹ä¸Šå®¹å™¨ç½‘ç»œ</strong>ï¼Œå¿…é¡»è¿è¡Œåœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼›</li><li id="u7a1e0956">2.å„ç§<strong>å­˜å‚¨æ’ä»¶</strong>çš„ Agent ç»„ä»¶ï¼Œ<strong>ç”¨æ¥åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸ŠæŒ‚è½½è¿œç¨‹å­˜å‚¨ç›®å½•ï¼Œæ“ä½œå®¹å™¨çš„ Volume ç›®å½•</strong>ï¼Œä¹Ÿå¿…é¡»è¿è¡Œåœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼›</li><li id="u002ddb05">3.å„ç§<strong>ç›‘æ§ç»„ä»¶å’Œæ—¥å¿—ç»„ä»¶</strong>ï¼Œè´Ÿè´£è¿™ä¸ª<strong>èŠ‚ç‚¹ä¸Šçš„ç›‘æ§ä¿¡æ¯å’Œæ—¥å¿—æœé›†</strong>ï¼Œä¹Ÿå¿…é¡»è¿è¡Œåœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚</li></ul> 
<p id="u70a0ec7a">éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒDaemonSet è¿è¡Œçš„æ—¶æœºï¼Œå¾ˆå¤šæ—¶å€™æ¯”æ•´ä¸ª Kubernetes é›†ç¾¤å‡ºç°çš„æ—¶æœºéƒ½è¦æ—©ã€‚</p> 
<p id="u0c4df07f">è¿™ä¸ªä¹ä¸€å¬èµ·æ¥å¯èƒ½æœ‰ç‚¹å„¿å¥‡æ€ªã€‚ä½†å…¶å®ä½ æ¥æƒ³ä¸€ä¸‹ï¼šå¦‚æœè¿™ä¸ª DaemonSet æ­£æ˜¯ä¸€ä¸ªç½‘ç»œæ’ä»¶çš„ Agent ç»„ä»¶å‘¢ï¼Ÿ</p> 
<ul><li id="u67f46fa3">é¦–å…ˆè¦çŸ¥é“ï¼Œåœ¨éƒ¨ç½² Kubernetes é›†ç¾¤æ—¶ï¼Œæ²¡æœ‰ç½‘ç»œæ’ä»¶ï¼ŒèŠ‚ç‚¹çš„çŠ¶æ€å°±ä¼šæ˜¯ NotReady çŠ¶æ€ï¼ˆNetworkReady=falseï¼‰ã€‚</li><li id="ua433756a">è¿™ä¸ªæƒ…å†µä¸‹ï¼Œæ™®é€š Pod æ˜¯ä¸èƒ½è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„ã€‚è€Œä¸ºäº†è®©é›†ç¾¤èƒ½æ­£å¸¸è¿è¡Œ Pod é‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ DaemonSetã€‚</li></ul> 
<p id="u261e4255">è¿™é‡Œæˆ–è®¸è¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼Œå°±æ˜¯æ™®é€š Pod åœ¨è¿™ç§ NotReady æƒ…å†µä¸‹ä¸èƒ½è¿è¡Œï¼Œé‚£ DaemonSet å°±èƒ½è¿è¡Œå—ï¼Ÿ</p> 
<h2 id="QlGIn">äºŒã€DaemonSet çš„â€œè¿‡äººä¹‹å¤„â€</h2> 
<p id="u5975c692">è¦ç†è§£ DaemonSet çš„â€œè¿‡äººä¹‹å¤„â€ã€‚é¦–å…ˆï¼Œè¦äº†è§£ DaemonSet çš„å·¥ä½œè¿‡ç¨‹ã€‚</p> 
<p id="u20a275e5">æ¥çœ‹ä¸€ä¸ª DaemonSet çš„ YAML æ–‡ä»¶ï¼š</p> 
<ul><li id="uab1faa07">å¯ä»¥çœ‹åˆ°ï¼Œ<strong>DaemonSet çš„ YAML ä¸ Deployment çš„ YAML æ–‡ä»¶</strong>å¯ä»¥è¯´æ˜¯<strong>å‡ ä¹ä¸€æ¨¡ä¸€æ ·</strong>ï¼Œ<strong>åªä¸è¿‡æ˜¯æ²¡æœ‰ replicas å­—æ®µ</strong><strong>ã€‚</strong>å› ä¸º DaemonSet æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€ä¸ªå‰¯æœ¬ï¼Œreplicas å­—æ®µå°±æ²¡æœ‰å¿…è¦å­˜åœ¨äº†ã€‚</li></ul> 
<pre><code class="language-bash">apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: example-daemonset
  labels:
    app: example
spec:
  selector:
    matchLabels:
      app: example
  template:
    metadata:
      labels:
        app: example
    spec:
      tolerations:
      - key: node.kubernetes.io/unreachable
        operator: Exists
        effect: NoExecute
      containers:
      - name: example-container
        image: nginx:latest</code></pre> 
<p id="u592b8b40">é‚£ä¹ˆï¼ŒDaemonSet åˆæ˜¯å¦‚ä½•ä¿è¯æ¯ä¸ª Node èŠ‚ç‚¹ä¸Šæœ‰ä¸”åªæœ‰ä¸€ä¸ªè¢«ç®¡ç†çš„ Pod çš„å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œæ§åˆ¶å™¨æ¨¡å‹â€èƒ½å¤Ÿå¤„ç†çš„é—®é¢˜ã€‚</p> 
<p id="u057b8b58"></p> 
<p id="u4bb4b391"><strong>ä»¥ä¸Šé¢ YAML ä¸ºä¾‹</strong>ï¼š</p> 
<p id="u7adea226"><strong>1.DaemonSet Controllerï¼Œé¦–å…ˆä» Etcd ä¸­è·å–æ‰€æœ‰ Node åˆ—è¡¨ï¼Œç„¶åéå†æ‰€æœ‰çš„ Nodeï¼ŒæŸ¥æ‰¾æ£€æŸ¥æ˜¯å¦æœ‰ </strong><code><strong>app: example</strong></code><strong>æ ‡ç­¾çš„ Pod åœ¨è¿è¡Œã€‚</strong></p> 
<p id="u55335311">è¿™ä¸ªæŸ¥æ‰¾æ£€æŸ¥è¿‡ç¨‹æœ‰ä¸‰ç§æƒ…å†µï¼š</p> 
<ul><li id="uf03df937">æ²¡æœ‰è¿™ç§ Podï¼Œé‚£å°±éœ€è¦åœ¨è¯¥ Node èŠ‚ç‚¹ä¸Šåˆ›å»ºä¸€ä¸ª Podï¼›</li><li id="uab7c46a6">æœ‰è¿™ç§ Podï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦ä¸º 1ï¼Œå¤§äº 1 å°±åˆ é™¤ï¼›</li><li id="ue4700cfe">æ­£å¥½æœ‰è¿™ç§ Podï¼Œè¯´æ˜è¿™ä¸ªèŠ‚ç‚¹æ­£å¸¸ã€‚</li></ul> 
<p id="uc2eb776a"><strong>2.å½“æŸ¥æ‰¾åˆ°æœ‰è¿™ç§ Pod æ—¶ï¼Œåˆ é™¤èŠ‚ç‚¹ä¸Šå¤šä½™çš„ Podï¼Œå¾ˆå®¹æ˜“ï¼›å½“æŸ¥æ‰¾åˆ°æ²¡æœ‰è¿™ç§ Pod æ—¶ï¼Œå¦‚ä½•è®© Pod åœ¨æŒ‡å®š Node èŠ‚ç‚¹ä¸Šåˆ›å»ºå‘¢ï¼Ÿ</strong>é€šè¿‡ä¸¤ç§æ–¹å¼ï¼š</p> 
<p id="u34b45fe3"></p> 
<p id="u214ba4ea"><strong>2.1. </strong>é…ç½® DaemonSet çš„èŠ‚ç‚¹äº²å’Œæ€§ï¼ˆnodeAffinityï¼‰è§„åˆ™ï¼ŒæŒ‡å®šå®ƒåº”è¯¥è¿è¡Œåœ¨å“ªäº›èŠ‚ç‚¹ä¸Šã€‚</p> 
<p id="u07e7fab5"><strong>èŠ‚ç‚¹äº²å’Œæ€§ï¼ˆnodeAffinityï¼‰</strong>ï¼šå¯ä»¥é€šä¿—çš„ç†è§£ä¸ºï¼Œä½ æ›´å–œæ¬¢è°ï¼Œå°±å’Œè°é çš„æ›´è¿‘ä»è€Œåœ¨ä¸€èµ·ï¼ˆè¿™å±äºè°ƒåº¦å†…å®¹ï¼Œè¯¦ç»†å†…å®¹ä¹‹åç« èŠ‚å±•å¼€ï¼‰ã€‚</p> 
<p id="u9fb3d5ea"></p> 
<p id="u504fac8d">Kubernetes é›†ç¾¤ä¸­çš„ç½‘ç»œæ’ä»¶ï¼ˆcalicoï¼‰æˆ–è€… kube-porxy ç»„ä»¶ï¼Œå®ƒä»¬éƒ½æ˜¯ DaemonSet æ§åˆ¶å™¨æ–¹å¼éƒ¨ç½²çš„ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å®ƒä»¬æ‰€ç®¡ç†çš„ Pod ï¼Œå¦‚å›¾ï¼š</p> 
<ul><li id="u440d923d">å¯ä»¥çœ‹åˆ° <code>spec.affinity.nodeAffinity</code>è¿™ä¸ªå­—æ®µæ˜¯ DaemonSet é»˜è®¤ä¸º Pod æ·»åŠ çš„å­—æ®µï¼Œæ˜¯å®ƒåˆ›å»º Pod çš„æœºåˆ¶ã€‚</li><li id="uc86ec6bc"><code>requiredDuringSchedulingIgnoredDuringExecution</code>ï¼šå®ƒçš„æ„æ€æ˜¯è¯´ï¼Œè¿™ä¸ª nodeAffinity å¿…é¡»åœ¨æ¯æ¬¡è°ƒåº¦çš„æ—¶å€™äºˆä»¥è€ƒè™‘ã€‚</li></ul> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/6d/20/cz1V27xS_o.png"></p> 
<p id="ud9f975ac">ä¸Šå›¾ä¸­çš„ matchFields å­—æ®µï¼ˆåŒ¹é…å­—æ®µï¼‰æ˜¯æˆ‘ä»¬çš„åŒ¹é… Node èŠ‚ç‚¹çš„æœºåˆ¶ï¼Œä¸Šå›¾ä¸­ <code>key: metadata.name</code>å’Œ <code>values: [master01]</code>é…ç½®çš„å“ªé‡Œï¼Ÿçœ‹ä¸‹å›¾ï¼Œå®ƒåŒ¹é…çš„æ˜¯ Node èŠ‚ç‚¹çš„ YAML æ–‡ä»¶ä¸­çš„ <code>metadata.name</code>å­—æ®µã€‚</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/fd/60/53oIWHxZ_o.png"></p> 
<p id="u5e8861fe"></p> 
<p id="ub760dd0f"><strong>2.2 </strong>æ­¤å¤–ï¼ŒDaemonSet è¿˜ä¼šç»™è¿™ä¸ª Pod è‡ªåŠ¨åŠ ä¸Šå¦å¤–ä¸€ä¸ªä¸è°ƒåº¦ç›¸å…³çš„å­—æ®µï¼Œå«ä½œ tolerationsã€‚è¿™ä¸ªå­—æ®µæ„å‘³ç€è¿™ä¸ª Podï¼Œä¼šâ€œå®¹å¿â€ï¼ˆTolerationï¼‰æŸäº› Node çš„â€œæ±¡ç‚¹â€ï¼ˆTaintï¼‰ã€‚</p> 
<p id="u8e77f5b7"><strong>Toleration å’Œ Taintï¼ˆå®¹å¿å’Œæ±¡ç‚¹ï¼‰</strong>ï¼šå¯ä»¥é€šä¿—çš„ç†è§£ä¸ºï¼Œä½ èƒ½å¿å—ç†è§£æŸäººçš„ç¼ºç‚¹ï¼Œä¹Ÿå°±ä¸åœ¨æ„å®ƒçš„ç¼ºç‚¹äº†ã€‚</p> 
<p id="u2dc1e3bb">ä¸‹é¢æ˜¯ DaemonSet è‡ªåŠ¨ç”Ÿæˆçš„ä¸€ç»„ tolerations å­—æ®µçš„å®Œæ•´æ ¼å¼ï¼š</p> 
<pre><code class="language-bash">tolerations:
- key: node.kubernetes.io/not-ready
  operator: Exists
  effect: NoExecute
- key: node.kubernetes.io/unreachable
  operator: Exists
  effect: NoExecute
- key: node.kubernetes.io/disk-pressure
  operator: Exists
  effect: NoSchedule
- key: node.kubernetes.io/memory-pressure
  operator: Exists
  effect: NoSchedule
- key: node.kubernetes.io/unschedulable
  operator: Exists
  effect: NoSchedule</code></pre> 
<p id="u2d1b0d88">ä¸Šè¿° tolerations å­—æ®µåŒ…å«äº†ä¸€ç³»åˆ—çš„ toleration æ¡ç›®ï¼Œæ¯ä¸ªæ¡ç›®æè¿°äº†å®¹å¿ä¸€ä¸ªç‰¹å®šæ±¡ç‚¹çš„è§„åˆ™ã€‚ä¾‹å¦‚ï¼š</p> 
<p id="ucfc78b6c"><code><strong>operator: Exists</strong></code><strong> </strong>è¡¨ç¤ºåªè¦å­˜åœ¨è¯¥æ±¡ç‚¹ï¼Œå°±å®¹å¿è¯¥èŠ‚ç‚¹ã€‚</p> 
<p id="u9a7d2e2f"><code>effect: NoSchedule</code> è¡¨ç¤ºä¸åœ¨è¯¥èŠ‚ç‚¹ä¸Šè¿›è¡Œæ–°çš„è°ƒåº¦ã€‚å¯æ˜¯ï¼ŒDaemonSet è‡ªåŠ¨åœ°ç»™è¢«ç®¡ç†çš„ Pod åŠ ä¸Šäº†è¿™ä¸ªç‰¹æ®Šçš„ Tolerationï¼Œå°±ä½¿å¾—è¿™äº› Pod å¯ä»¥å¿½ç•¥è¿™ä¸ªé™åˆ¶ï¼Œç»§è€Œä¿è¯æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½ä¼šè¢«è°ƒåº¦ä¸€ä¸ª Podã€‚</p> 
<ul><li id="u9ea5386f"><code><strong>node.kubernetes.io/not-ready</strong></code><strong> ï¼šè¡¨ç¤ºå®¹å¿ NotReady çŠ¶æ€çš„èŠ‚ç‚¹ã€‚</strong></li><li id="uf85eb60b"><code><strong>node.kubernetes.io/unreachable</strong></code><strong>ï¼šå®¹å¿èŠ‚ç‚¹å¤„äº Unreachable çŠ¶æ€ã€‚ </strong></li><li id="u5229508a"><code><strong>node.kubernetes.io/disk-pressure</strong></code><strong>ï¼šå®¹å¿èŠ‚ç‚¹å­˜åœ¨ç£ç›˜å‹åŠ›ã€‚ </strong></li><li id="u1249ebb6"><code><strong>node.kubernetes.io/memory-pressure</strong></code><strong>ï¼šå®¹å¿èŠ‚ç‚¹å­˜åœ¨å†…å­˜å‹åŠ›ã€‚ </strong></li><li id="uc0b4d1d5"><code><strong>node.kubernetes.io/unschedulable</strong></code><strong>ï¼šå®¹å¿èŠ‚ç‚¹æ ‡è®°ä¸ºä¸å¯è°ƒåº¦ã€‚ </strong></li></ul> 
<p id="u1f454908">è¿™äº› tolerations ä½¿å¾— DaemonSet çš„ Pod èƒ½å¤Ÿåœ¨å¸¦æœ‰è¿™äº›æ±¡ç‚¹çš„èŠ‚ç‚¹ä¸Šæ­£å¸¸è¿è¡Œã€‚</p> 
<p id="u59711450"><strong>æŸ¥çœ‹ calico ç½‘ç»œæ’ä»¶ çš„ Pod ä¸Šçš„ </strong><strong>Tolerationï¼š</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b8/2b/xru8zC7n_o.png"></p> 
<p id="u3b06c1fa"></p> 
<p id="u05303523"><strong>è¿™æ—¶ï¼Œä½ ä¼šæƒ³åˆ°ï¼Œæˆ‘åœ¨å‰é¢æåˆ°çš„ DaemonSet çš„â€œè¿‡äººä¹‹å¤„â€ï¼Œå…¶å®å°±æ˜¯ä¾é  Toleration å®ç°çš„ã€‚</strong></p> 
<h2 id="SZ95A">ä¸‰ã€DaemonSet çš„é•œåƒ<strong>ç‰ˆæœ¬å¦‚ä½•ç»´æŠ¤</strong></h2> 
<ol><li id="u450e5c71">åˆ›å»º DaemonSet çš„ YAML æ–‡ä»¶ï¼š</li></ol> 
<pre><code class="language-bash">apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: example-daemonset
  labels:
    app: example
spec:
  selector:
    matchLabels:
      app: example
  template:
    metadata:
      labels:
        app: example
    spec:
      containers:
      - name: example-container
        image: nginx:latest
        imagePullPolicy: IfNotPresent</code></pre> 
<p id="ua146ab49">å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨æ¯ä¸ª Node èŠ‚ç‚¹ä¸Šéƒ½æœ‰ä¸€ä¸ª example-daemonsetï¼ˆDaemonSetï¼‰ æ‰€ç®¡ç†çš„ Podï¼š</p> 
<pre><code class="language-bash">[root@master01 ~]# kubectl apply -f daemonSet.yaml
daemonset.apps/example-daemonset created

[root@master01 ~]# kubectl get pod -owide
NAME                      READY   STATUS    RESTARTS   AGE    IP              NODE       NOMINATED NODE   READINESS GATES
example-daemonset-bmfs5   1/1     Running   0          2m5s   10.244.5.14     worker01   &lt;none&gt;           &lt;none&gt;
example-daemonset-dgtp4   1/1     Running   0          2m5s   10.244.241.82   master01   &lt;none&gt;           &lt;none&gt;</code></pre> 
<ol><li id="u2f26395f"><strong>é•œåƒæ›´æ–°</strong></li></ol> 
<p id="ueb9eacce">DaemonSet ä¸ Deployment ä¸€æ ·éƒ½èƒ½è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€‚ä½¿ç”¨ <code>kubectl rollout history</code>æŸ¥çœ‹ï¼š</p> 
<pre><code class="language-bash">[root@master01 ~]# kubectl rollout history daemonset example-daemonset
daemonset.apps/example-daemonset
REVISION  CHANGE-CAUSE
1         &lt;none&gt;</code></pre> 
<p id="u43897c83">ä½¿ç”¨ <code>kubectl set image</code>å‘½ä»¤ä¿®æ”¹é•œåƒç‰ˆæœ¬ï¼š</p> 
<pre><code class="language-bash">[root@master01 ~]# kubectl set image daemonset/example-daemonset --record example-container=nginx:alpine
Flag --record has been deprecated, --record will be removed in the future
daemonset.apps/example-daemonset image updated</code></pre> 
<p id="u664f2dca">ä½¿ç”¨<code>kubectl rollout history</code>å‘½ä»¤å†æ¬¡æŸ¥çœ‹æ›´æ–°ç‰ˆæœ¬è®°å½•ï¼š</p> 
<pre><code class="language-bash">[root@master01 ~]# kubectl rollout history daemonset example-daemonset
daemonset.apps/example-daemonset
REVISION  CHANGE-CAUSE
1         &lt;none&gt;
2         kubectl set image daemonset/example-daemonset example-container=nginx:alpine --record=true</code></pre> 
<h3 id="JCUzq">ä¸€åˆ‡çš†å¯¹è±¡</h3> 
<p id="ua2dbdd12">Deployment ç®¡ç†è¿™äº›ç‰ˆæœ¬ï¼Œé çš„æ˜¯â€œä¸€ä¸ªç‰ˆæœ¬å¯¹åº”ä¸€ä¸ª ReplicaSet å¯¹è±¡â€ã€‚å¯æ˜¯ï¼ŒDaemonSet æ§åˆ¶å™¨æ“ä½œçš„ç›´æ¥å°±æ˜¯ Podã€‚<strong>é‚£ä¹ˆï¼Œå®ƒçš„è¿™äº›ç‰ˆæœ¬åˆæ˜¯å¦‚ä½•ç»´æŠ¤çš„å‘¢ï¼Ÿ</strong></p> 
<p id="u5802930d">æ‰€è°“ï¼Œä¸€åˆ‡çš†å¯¹è±¡ï¼</p> 
<p id="ud067eba8">åœ¨ Kubernetes é¡¹ç›®ä¸­ï¼Œä»»ä½•ä½ è§‰å¾—éœ€è¦è®°å½•ä¸‹æ¥çš„çŠ¶æ€ï¼Œéƒ½å¯ä»¥è¢«ç”¨ API å¯¹è±¡çš„æ–¹å¼å®ç°ã€‚å½“ç„¶ï¼Œâ€œç‰ˆæœ¬â€ä¹Ÿä¸ä¾‹å¤–ã€‚</p> 
<p id="u65dc6d0c">Kubernetes v1.7 ä¹‹åæ·»åŠ äº†ä¸€ä¸ª API å¯¹è±¡ï¼Œå« ControllerRevisionï¼Œä¸“é—¨ç”¨æ¥è®°å½•æŸç§ Controller å¯¹è±¡çš„ç‰ˆæœ¬ã€‚</p> 
<pre><code class="language-bash">[root@master01 ~]# kubectl get controllerrevision
NAME                          CONTROLLER                         REVISION   AGE
example-daemonset-67d867976   daemonset.apps/example-daemonset   2          10m
example-daemonset-d8494f4bd   daemonset.apps/example-daemonset   1          20m

[root@master01 ~]# kubectl describe controllerrevision example-daemonset-67d867976</code></pre> 
<p id="uac6e096c">æˆ‘ä»¬æŸ¥çœ‹ç‰ˆæœ¬ 2 æ˜¯å¦æ˜¯æˆ‘ä»¬å¯¹åº”çš„ç‰ˆæœ¬ï¼š</p> 
<ul><li id="u034cde38">å¯ä»¥çœ‹åˆ°ï¼ŒAnnotations è®°å½•äº†ï¼Œæˆ‘ä»¬ kubectl ä¿®æ”¹é•œåƒç‰ˆæœ¬çš„å‘½ä»¤ï¼›ä»¥åŠ data å­—æ®µä¿å­˜äº†è¯¥ç‰ˆæœ¬å¯¹åº”çš„å®Œæ•´çš„ DaemonSet çš„ API å¯¹è±¡</li></ul> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/dc/f3/J6x5xFvi_o.png"></p> 
<p id="u6de60f56">å°† DaemonSet å›æ»šåˆ° Revision=1 æ—¶çš„çŠ¶æ€ï¼š</p> 
<ul><li id="ue91069b9"><code>kubectl describe controllerrevision</code>å¯ä»¥çœ‹åˆ°å®ƒçš„ <code>Revision å­—æ®µ</code>ï¼Œè€Œ <code>kubectl rollout undo</code>å®é™…ä¸Šè¯»å–åˆ°äº† çš„ ControllerRevision çš„å¯¹è±¡ä¿å­˜çš„ Data å­—æ®µã€‚è€Œè¿™ä¸ª Data å­—æ®µé‡Œä¿å­˜çš„ä¿¡æ¯ï¼Œå°±æ˜¯ <code>Revision=1</code> æ—¶è¿™ä¸ª DaemonSet çš„å®Œæ•´ API å¯¹è±¡ã€‚</li></ul> 
<pre><code class="language-bash">[root@master01 ~]# kubectl rollout undo daemonset/example-daemonset --to-revision=1
daemonset.apps/example-daemonset rolled back
[root@master01 ~]#

[root@master01 ~]# kubectl describe controllerrevision example-daemonset-d8494f4bd</code></pre> 
<p id="u7ba894b1">åœ¨æ‰§è¡Œå®Œè¿™æ¬¡å›æ»šå®Œæˆåï¼Œä½ ä¼šå‘ç°ï¼ŒDaemonSet çš„ Revision å¹¶ä¸ä¼šä» Revision=2 é€€å›åˆ° 1ï¼Œè€Œæ˜¯ä¼šå¢åŠ æˆ Revision=3ã€‚è¿™æ˜¯å› ä¸ºï¼Œä¸€ä¸ªæ–°çš„ ControllerRevision è¢«åˆ›å»ºäº†å‡ºæ¥ã€‚</p> 
<pre><code class="language-bash">[root@master01 ~]# kubectl rollout history daemonset/example-daemonset
daemonset.apps/example-daemonset
REVISION  CHANGE-CAUSE
2         kubectl set image daemonset/example-daemonset example-container=nginx:alpine --record=true
3         &lt;none&gt;

[root@master01 ~]# kubectl get controllerrevision
NAME                          CONTROLLER                         REVISION   AGE
example-daemonset-67d867976   daemonset.apps/example-daemonset   2          31m
example-daemonset-d8494f4bd   daemonset.apps/example-daemonset   3          41m</code></pre> 
<h2 id="yvRV2">æ€»ç»“</h2> 
<p id="ua6e771c6">é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼ŒDaemonSet çš„å·¥ä½œè¿‡ç¨‹ã€‚</p> 
<p id="ufba90d86">é¦–å…ˆï¼Œæ˜¯å®ƒçš„æ§åˆ¶å¾ªç¯ï¼ŒæŸ¥æ‰¾æ£€æŸ¥æ‰€æœ‰ Node èŠ‚ç‚¹ä¸Šçš„ Pod çš„æƒ…å†µï¼Œæ¥å†³å®šæ˜¯å¦åˆ›å»ºæˆ–è€…åˆ é™¤ä¸€ä¸ª Podï¼›</p> 
<p id="u54a15b73">å…¶æ¬¡ï¼Œåœ¨åˆ›å»º Pod æ—¶ï¼ŒDaemonSet ä¼šè‡ªåŠ¨ç»™è¿™ä¸ª Pod åŠ ä¸Šä¸€ä¸ª nodeAffinity å’Œ Tolerationï¼Œæ¥ä¿è¯ Pod åœ¨æŒ‡å®šèŠ‚ç‚¹è¿è¡Œï¼Œå¹¶ä¸”å¿½ç•¥ unschedulable â€œæ±¡ç‚¹â€ï¼›</p> 
<p id="ube7f4fe6">æœ€åï¼ŒDaemonSet ä½¿ç”¨ ControllerRevisionï¼Œæ¥ä¿å­˜å’Œç®¡ç†å¯¹åº”çš„â€œç‰ˆæœ¬â€ã€‚</p> 
<p id="ucb822773"></p> 
<p id="u6cde734d">StatefulSet ä¹Ÿæ˜¯ç›´æ¥æ§åˆ¶ Pod å¯¹è±¡çš„ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸æ˜¯ä¹Ÿåœ¨ä½¿ç”¨ ControllerRevision è¿›è¡Œç‰ˆæœ¬ç®¡ç†å‘¢ï¼Ÿ</p> 
<p id="u1735fa2f">æ²¡é”™ã€‚åœ¨ Kubernetes é¡¹ç›®é‡Œï¼ŒControllerRevision å…¶å®æ˜¯ä¸€ä¸ªé€šç”¨çš„ç‰ˆæœ¬ç®¡ç†å¯¹è±¡ã€‚è¿™æ ·ï¼ŒKubernetes é¡¹ç›®å°±å·§å¦™åœ°é¿å…äº†æ¯ç§æ§åˆ¶å™¨éƒ½è¦ç»´æŠ¤ä¸€å¥—å†—ä½™çš„ä»£ç å’Œé€»è¾‘çš„é—®é¢˜ã€‚</p> 
<p id="ucf37c0a3"></p> 
<p id="ua31fd52b"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/67/8c/sDYUEJX3_o.jpg"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dfa91830d15116ff17c5839eeb6a2de2/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ä¸­å®‰ç½‘æ˜Ÿç‰ˆå¤§æ¨¡å‹æ¥äº†ï¼ä¸‰å¤§å…³é”®èƒ½åŠ›ï¼Œä¸è¾“ä¸“ä¸šçº¢é˜Ÿæ”»å‡»æ‰‹</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58a78bf6e124952d2dfadf0cc1a30da7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">vueé›†æˆæµ·åº·å¨è§†H5è§†é¢‘æ’­æ”¾å™¨ï¼ˆH5playerï¼‰å¼€å‘åŒ… V2.1.2</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>