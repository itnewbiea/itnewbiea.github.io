<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>js动态渲染html 给html绑定点击事件 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="js动态渲染html 给html绑定点击事件" />
<meta property="og:description" content="情景：渲染一个表格 根据当前行的数据作为参数，通过ajax请求到后台返回的数据,再根据返回的结果动态生成HTML页面 给动态生成的页面添加点击事件 // 推荐商家点击标题展开与收起 $(&#39;.toggle-tag&#39;).on(&#39;click&#39;, function(){ var ele = $(this).parents(&#39;tr&#39;).next().find(&#39;.pro-details&#39;); if(ele.is(&#39;:hidden&#39;)){ $(&#39;.pro-details&#39;).slideUp(); ele.slideDown(); }else{ ele.slideUp(); } }); // 推荐商家点击收起 $(&#39;.toggle&#39;).on(&#39;click&#39;, function(){ $(this).parents(&#39;.pro-details&#39;).slideUp(); }); 点击事件无效
原因:代码的执行顺序不同 代码先执行js/css再执行的渲染html 在浏览器解析到图一的页面元素时， 解析到js的这些绑定标签事件的js代码（上面的JS代码）的时候，这些绑定事件的标签元素还没有生成，
（因为js代码加载完后，才会有这些绑定事件的标签），所以这些JS 代码的绑定的事件，根本就没有绑定到这些动态加载的标签上，所以哪些事件不会触发。
解决方案：
类似动态加载的HTML元素需要绑定事件可以用 jQuery 事件 - delegate() 方法
定义和用法 delegate() 方法为指定的元素（属于被选元素的子元素）添加一个或多个事件处理程序，并规定当这些事件发生时运行的函数。
使用 delegate() 方法的事件处理程序适用于当前或未来的元素（比如由脚本创建的新元素）。
语法 $(selector).delegate(childSelector,event,data,function) 参数描述childSelector必需。规定要附加事件处理程序的一个或多个子元素。event 必需。规定附加到元素的一个或多个事件。
由空格分隔多个事件值。必须是有效的事件。
data可选。规定传递到函数的额外数据。function必需。规定当事件发生时运行的函数。 // 推荐商家点击收起 $(&#34;body&#34;).delegate(&#34;.toggle&#34;,&#34;click&#34;, function(){ $(this).parents(&#39;.pro-details&#39;).slideUp(); $(this).parents(&#39;tr&#39;).hide(); }); 就可以了" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/68040b4d60528c393c2af7fb8ece6411/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-24T17:06:02+08:00" />
<meta property="article:modified_time" content="2022-08-24T17:06:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">js动态渲染html 给html绑定点击事件</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>情景</strong>：渲染一个表格 根据当前行的数据作为参数，通过ajax请求到后台返回的数据,再根据返回的结果动态生成HTML页面 给动态生成的页面添加点击事件 </p> 
<pre><code class="language-javascript">// 推荐商家点击标题展开与收起
$('.toggle-tag').on('click', function(){
    var ele = $(this).parents('tr').next().find('.pro-details');
    if(ele.is(':hidden')){
        $('.pro-details').slideUp();
        ele.slideDown();
    }else{
        ele.slideUp();
    }
});

// 推荐商家点击收起
$('.toggle').on('click', function(){
    $(this).parents('.pro-details').slideUp();
});</code></pre> 
<p><span style="color:#fe2c24;">点击事件无效</span></p> 
<p><strong>原因</strong>:代码的执行顺序不同 代码先执行js/css再执行的渲染html </p> 
<p>在浏览器解析到图一的页面元素时， 解析到js的这些绑定标签事件的js代码（上面的JS代码）的时候，这些绑定事件的标签元素还没有生成，</p> 
<p>（因为js代码加载完后，才会有这些绑定事件的标签），所以这些JS 代码的绑定的事件，根本就没有绑定到这些动态加载的标签上，所以哪些事件不会触发。</p> 
<p><strong>解决方案：</strong></p> 
<p>类似动态加载的HTML元素需要绑定事件可以用 <a href="http://www.baidu.com/link?url=CbWDcmCRX5SwQb_GHS4DN6FHqAS3lTVVRxUfyRmIPo2Gi4BjEtAG6GXhT9TfYLzZ9JvyHvJa_1Ib6oyiieHMQK" rel="nofollow" title="jQuery 事件 - delegate() 方法">jQuery 事件 - delegate() 方法</a></p> 
<h3>定义和用法</h3> 
<p>delegate() 方法为指定的元素（属于被选元素的子元素）添加一个或多个事件处理程序，并规定当这些事件发生时运行的函数。</p> 
<p>使用 delegate() 方法的事件处理程序适用于当前或未来的元素（比如由脚本创建的新元素）。</p> 
<h4>语法</h4> 
<pre>$(<em>selector</em>).delegate(<em>childSelector</em>,<em>event</em>,<em>data</em>,<em>function</em>)</pre> 
<table><tbody><tr><th>参数</th><th>描述</th></tr><tr><td><em>childSelector</em></td><td>必需。规定要附加事件处理程序的一个或多个子元素。</td></tr><tr><td><em>event</em></td><td> <p>必需。规定附加到元素的一个或多个事件。</p> <p>由空格分隔多个事件值。必须是有效的事件。</p> </td></tr><tr><td><em>data</em></td><td>可选。规定传递到函数的额外数据。</td></tr><tr><td><em>function</em></td><td>必需。规定当事件发生时运行的函数。</td></tr></tbody></table> 
<p></p> 
<pre><code class="language-javascript">  // 推荐商家点击收起    
      $("body").delegate(".toggle","click", function(){
          $(this).parents('.pro-details').slideUp();
          $(this).parents('tr').hide();
      });</code></pre> 
<p>就可以了</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/793432365b75d67a6c2d7ca40a12b6bf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">时序预测 | MATLAB实现HMM隐马尔可夫模型时间序列预测</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1e303d54e899f73e8e0be2d63889d3e1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">截图神器Snipaste，错过真的太可惜</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>