<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>2014 ACM/ICPC Xi&#39;an Regional I - International Collegiate Routing Contest - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="2014 ACM/ICPC Xi&#39;an Regional I - International Collegiate Routing Contest" />
<meta property="og:description" content="题目重现 You may know that Bluegao University (formly Bluey University) is famous of networking technology. One day, their headmaster Yuege received a special router, along with a task about routing table. In this problem, routing table is a (probably) big table with several items, each item represents a subnet. The router has limited function, it can only deal with two next-hops and one main routing table. Packets will be send to next hop A if there exists a subnet containing the destination of the packet in the main outing table." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/69319c9a76c0087917f474bcc7d4564a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-08-16T10:57:50+08:00" />
<meta property="article:modified_time" content="2016-08-16T10:57:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">2014 ACM/ICPC Xi&#39;an Regional I - International Collegiate Routing Contest</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="题目重现">题目重现</h2> 
<blockquote> 
 <p>You may know that Bluegao University (formly Bluey University) is famous of networking technology. One day, their headmaster Yuege received a special router, along with a task about routing table. <br> In this problem, routing table is a (probably) big table with several items, each item represents a subnet. The router has limited function, it can only deal with two next-hops and one main routing table. Packets will be send to next hop A if there exists a subnet containing the destination of the packet in the main outing table. Otherwise they will be send to next hop B. <br> You may know that, IPv4 uses 32-bit (four-byte) addresses, which limits the address space to 4294967296 (232) addresses. IPv4 addresses may be written in any notation expressing a 32-bit integer value, for human convenience, they are most often written in the dot-decimal notation, which consists of four octets of the address expressed individually in decimal and separated by periods. But their binary notation is also very useful. For example, IP address 128.2.142.23 can be expressed in dot-binary notation as 10000000.00000010.10001110.00010111. A subnet is a block of adjacent IP addresses with exactly same binary prefix, and usually written as the first IP address in its address space together with the bit length of prefix, like “202.120.224.0/24”. If an IP address is in the range of an subnet, we say that this subnet contains the IP address. <br> Yuege’s task is to invert the behaviour of his router, make all packets currently routed to hop A route to hop B, and vice versa. Also he wants to keep the size of the main routing table as small as possible, for performance. <br> In short, for a given routing table (i.e. a bunch of subnets), we need to get its “complement”, i.e. calculate a minimum set of subnets which have no intersection with given subnets, and their union must be the whole IPv4 address space. <br> Remember that Bluegao University is famous of networking tech, as headmaster of Bluegao University, Yuege definitely knows how to solve such problem, but he is too lazy to code, so he turns to you for help.</p> 
</blockquote> 
<h3 id="input">Input</h3> 
<p>The first line of the input gives the number of test cases, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-13-Frame"> 
   
   <span class="math" id="MathJax-Span-69" style="width: 0.909em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.696em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.709em 1000em 2.723em -0.477em); top: -2.557em; left: 0.003em;"><span class="mrow" id="MathJax-Span-70"><span class="mi" id="MathJax-Span-71" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.003em; vertical-align: -0.063em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-13">T</script>. <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-14-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-72" style="width: 0.909em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.696em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.709em 1000em 2.723em -0.477em); top: -2.557em; left: 0.003em;"><span class="mrow" id="MathJax-Span-73"><span class="mi" id="MathJax-Span-74" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.003em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-14">T</script> test cases follow. <br> For each test case, the first line contains an integer <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-15-Frame"> 
   
   <span class="math" id="MathJax-Span-75" style="width: 0.749em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.589em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.976em 1000em 2.723em -0.477em); top: -2.557em; left: 0.003em;"><span class="mrow" id="MathJax-Span-76"><span class="mi" id="MathJax-Span-77" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.67em; vertical-align: -0.063em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-15">n</script> (<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-16-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-78" style="width: 7.843em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.243em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.923em 1000em 3.043em -0.424em); top: -2.717em; left: 0.003em;"><span class="mrow" id="MathJax-Span-79"><span class="mn" id="MathJax-Span-80" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-81" style="font-family: MathJax_Main; padding-left: 0.269em;">≤</span><span class="mi" id="MathJax-Span-82" style="font-family: MathJax_Math-italic; padding-left: 0.269em;">n</span><span class="mo" id="MathJax-Span-83" style="font-family: MathJax_Main; padding-left: 0.269em;">≤</span><span class="mn" id="MathJax-Span-84" style="font-family: MathJax_Main; padding-left: 0.269em;">30000</span></span><span style="display: inline-block; width: 0px; height: 2.723em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.137em; vertical-align: -0.263em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-16">0 \le n \le 30000</script>), the number of subnets. Next <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-17-Frame"> 
   
   <span class="math" id="MathJax-Span-85" style="width: 0.749em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.589em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.976em 1000em 2.723em -0.477em); top: -2.557em; left: 0.003em;"><span class="mrow" id="MathJax-Span-86"><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.67em; vertical-align: -0.063em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-17">n</script> lines, each contains a subnet in the format of ‘<code>a.b.c.d/l</code>’, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-18-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-88" style="width: 4.963em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.949em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.869em 1000em 3.096em -0.424em); top: -2.717em; left: 0.003em;"><span class="mrow" id="MathJax-Span-89"><span class="mi" id="MathJax-Span-90" style="font-family: MathJax_Math-italic;">a</span><span class="mo" id="MathJax-Span-91" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-92" style="font-family: MathJax_Math-italic; padding-left: 0.163em;">b</span><span class="mo" id="MathJax-Span-93" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-94" style="font-family: MathJax_Math-italic; padding-left: 0.163em;">c</span><span class="mo" id="MathJax-Span-95" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-96" style="font-family: MathJax_Math-italic; padding-left: 0.163em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-97" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-98" style="font-family: MathJax_Math-italic; padding-left: 0.163em;">l</span></span><span style="display: inline-block; width: 0px; height: 2.723em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.27em; vertical-align: -0.33em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-18">a, b, c, d, l</script> are all integers, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-19-Frame"> 
   
   <span class="math" id="MathJax-Span-99" style="width: 15.896em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.696em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.869em 1000em 3.096em -0.424em); top: -2.717em; left: 0.003em;"><span class="mrow" id="MathJax-Span-100"><span class="mn" id="MathJax-Span-101" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-102" style="font-family: MathJax_Main; padding-left: 0.269em;">≤</span><span class="mi" id="MathJax-Span-103" style="font-family: MathJax_Math-italic; padding-left: 0.269em;">a</span><span class="mo" id="MathJax-Span-104" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-105" style="font-family: MathJax_Math-italic; padding-left: 0.163em;">b</span><span class="mo" id="MathJax-Span-106" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-107" style="font-family: MathJax_Math-italic; padding-left: 0.163em;">c</span><span class="mo" id="MathJax-Span-108" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-109" style="font-family: MathJax_Math-italic; padding-left: 0.163em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-110" style="font-family: MathJax_Main; padding-left: 0.269em;">≤</span><span class="mn" id="MathJax-Span-111" style="font-family: MathJax_Main; padding-left: 0.269em;">256</span><span class="mo" id="MathJax-Span-112" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-113" style="font-family: MathJax_Main; padding-left: 0.163em;">0</span><span class="mo" id="MathJax-Span-114" style="font-family: MathJax_Main; padding-left: 0.269em;">≤</span><span class="mi" id="MathJax-Span-115" style="font-family: MathJax_Math-italic; padding-left: 0.269em;">l</span><span class="mo" id="MathJax-Span-116" style="font-family: MathJax_Main; padding-left: 0.269em;">≤</span><span class="mn" id="MathJax-Span-117" style="font-family: MathJax_Main; padding-left: 0.269em;">32</span></span><span style="display: inline-block; width: 0px; height: 2.723em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.27em; vertical-align: -0.33em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-19">0 \le a, b, c, d \le 256, 0 \le l \le 32</script>. <br> Note that even if <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-20-Frame"> 
   
   <span class="math" id="MathJax-Span-118" style="width: 3.309em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.616em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.869em 1000em 2.883em -0.424em); top: -2.717em; left: 0.003em;"><span class="mrow" id="MathJax-Span-119"><span class="mi" id="MathJax-Span-120" style="font-family: MathJax_Math-italic;">l</span><span class="mo" id="MathJax-Span-121" style="font-family: MathJax_Main; padding-left: 0.269em;">=</span><span class="mn" id="MathJax-Span-122" style="font-family: MathJax_Main; padding-left: 0.269em;">32</span></span><span style="display: inline-block; width: 0px; height: 2.723em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.003em; vertical-align: -0.063em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-20">l = 32</script>, the ‘<code>/32</code>’ part should not be omitted. And if <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-21-Frame"> 
   
   <span class="math" id="MathJax-Span-123" style="width: 2.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.136em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.869em 1000em 2.883em -0.424em); top: -2.717em; left: 0.003em;"><span class="mrow" id="MathJax-Span-124"><span class="mi" id="MathJax-Span-125" style="font-family: MathJax_Math-italic;">l</span><span class="mo" id="MathJax-Span-126" style="font-family: MathJax_Main; padding-left: 0.269em;">=</span><span class="mn" id="MathJax-Span-127" style="font-family: MathJax_Main; padding-left: 0.269em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.723em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.003em; vertical-align: -0.063em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-21">l = 0</script>, the IP address part must be ‘<code>0.0.0.0</code>’.</p> 
<h3 id="output">Output</h3> 
<p>For each test case, first output one line ‘<code>Case #x:</code>’, where <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-22-Frame"> 
   
   <span class="math" id="MathJax-Span-128" style="width: 0.749em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.589em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.976em 1000em 2.723em -0.424em); top: -2.557em; left: 0.003em;"><span class="mrow" id="MathJax-Span-129"><span class="mi" id="MathJax-Span-130" style="font-family: MathJax_Math-italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.67em; vertical-align: -0.063em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-22">x</script> is the case number (starting from 1). Then on the second line print an integer <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-23-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-131" style="width: 0.749em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.589em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.976em 1000em 2.723em -0.477em); top: -2.557em; left: 0.003em;"><span class="mrow" id="MathJax-Span-132"><span class="mi" id="MathJax-Span-133" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.67em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-23">n</script> indicates the number of subnets in your answer. Next <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-24-Frame"> 
   
   <span class="math" id="MathJax-Span-134" style="width: 0.749em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.589em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.976em 1000em 2.723em -0.477em); top: -2.557em; left: 0.003em;"><span class="mrow" id="MathJax-Span-135"><span class="mi" id="MathJax-Span-136" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.67em; vertical-align: -0.063em;"></span></span> 
  </span>&lt;script type="math/tex" id="MathJax-Element-24"&gt;n&lt;/script&gt; lines each line contains a subnet in the same format as input. You may output them in any order.</p> 
<h3 id="sample-input">Sample Input</h3> 
<pre class="prettyprint"><code class=" hljs ">3
0
1
0.0.0.0/1
1
128.0.0.0/1</code></pre> 
<h3 id="sample-output">Sample Output</h3> 
<pre class="prettyprint"><code class=" hljs php"><span class="hljs-keyword">Case</span> <span class="hljs-comment">#1:</span>
<span class="hljs-number">1</span>
<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">0</span>
<span class="hljs-keyword">Case</span> <span class="hljs-comment">#2:</span>
<span class="hljs-number">1</span>
<span class="hljs-number">128.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">1</span>
<span class="hljs-keyword">Case</span> <span class="hljs-comment">#3:</span>
<span class="hljs-number">1</span>
<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">1</span></code></pre> 
<h2 id="题解">题解</h2> 
<p>首先将IPv4地址看作一个0-1串。</p> 
<p>对于<code>a.b.c.d/e</code> ，<code>a, b, c, d</code> 可转化为一个32-bit的0-1串，然后截取其中的前（高）<code>e</code> 位。</p> 
<p>比如 <br> <code>0.0.0.0/2</code> 即<code>00</code> <br> <code>192.168.1.1/8</code> 即<code>11000000</code></p> 
<p>按照这些0-1串构造字符集大小为2的字典树(0-1 Trie Tree)。</p> 
<p>在串末尾代表的节点上打一个标记（在单词统计字典树中，这相当于统计数++）。</p> 
<p>然后先序遍历一遍该树： <br> 1. 遇到标记过的节点就返回 <br> 2. 遇到未标记过的节点有子节点为空则记录准备输出。</p> 
<h2 id="参考代码">参考代码</h2> 
<ul><li><a href="https://code.csdn.net/snippets/1832617" rel="nofollow">ACM/ICPC 2014 西安区域赛 I</a></li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9766f9f809b0806034b382d5786281ed/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android解析JSON数据几种方式对比</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f238a107ae9b01cf003c72f782a69e4a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">md5解析出的结果不一致的问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>