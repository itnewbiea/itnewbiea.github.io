<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DevExpress_常用控件24_GridControl_上 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="DevExpress_常用控件24_GridControl_上" />
<meta property="og:description" content="2.3 GridControl 1、 如何解决 单击记录 整行选中 的问题 View-&gt;OptionsBehavior-&gt;EditorShowMode 设置为：Click
可选值：Default / MouseDown / MouseUp / Click
2、 如何新增一条记录 (1)、gridView.AddNewRow()
(2)、实现 gridView_InitNewRow 事件
3、如何解决 GridControl 记录 能获取 而 没有显示到界面上 的问题 gridView.populateColumns();
4、如何让行 只能选择 而不能编辑（或编辑某一单元格） (1)、View-&gt;OptionsBehavior-&gt;EditorShowMode 设置为：Click
(2)、View-&gt;OptionsBehavior-&gt;Editable 设置为：false
5、如何 禁用 GridControl 中 单击列 弹出右键菜单 设置 Run Design-&gt;OptionsMenu-&gt;EnableColumnMenu 设置为：false
6、如何 隐藏 GridControl 的 GroupPanel 表头 设置 Run Design-&gt;OptionsView-&gt;ShowGroupPanel 设置为：false
7、如何显示水平滚动条 a. 只需禁用宽度自动调整,自然就会出现水平滚动条
this.gridView.OptionsView.ColumnAutoWidth = false;
补充一句: ColumnAutoWidth 为true时,则表示: 各列的宽度自动调整
b. 列表宽度自适应内容" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/df67466f8028f363e74dca8fa60e6ffa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-10-11T17:07:55+08:00" />
<meta property="article:modified_time" content="2018-10-11T17:07:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">DevExpress_常用控件24_GridControl_上</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>2.3 GridControl</h4> 
<h4>1、 如何解决 单击记录 <strong><span style="color:#3399ea;">整行选中 </span></strong>的问题</h4> 
<p>View-&gt;OptionsBehavior-&gt;<span style="color:#7c79e5;"><strong>EditorShowMode</strong></span> 设置为：<strong><span style="color:#f33b45;">Click</span></strong></p> 
<p>可选值：Default / MouseDown / MouseUp / Click</p> 
<hr> 
<h4>2、 如何新增一条记录</h4> 
<p>(1)、gridView.AddNewRow()</p> 
<p>(2)、实现 gridView_InitNewRow 事件</p> 
<hr> 
<h4>3、如何解决 GridControl 记录 <em><strong> 能获取</strong></em>   而   没有显示到界面上  的问题</h4> 
<blockquote> 
 <p>gridView.populateColumns();</p> 
</blockquote> 
<hr> 
<h4>4、如何让行  只能选择   而不能编辑（或编辑某一单元格）</h4> 
<p>(1)、View-&gt;OptionsBehavior-&gt;<span style="color:#7c79e5;"><strong>EditorShowMode</strong></span> 设置为：<span style="color:#f33b45;"><strong>Click</strong></span></p> 
<p>(2)、View-&gt;OptionsBehavior-&gt;<span style="color:#7c79e5;"><strong>Editable</strong></span> 设置为：<strong><span style="color:#e579b6;">false</span></strong></p> 
<hr> 
<h4>5、如何  <span style="color:#e579b6;"><strong>禁用</strong></span> GridControl 中 <em><strong>  </strong></em><em><strong>单击列</strong></em>   弹出右键菜单</h4> 
<p>设置 Run Design-&gt;OptionsMenu-&gt;<span style="color:#7c79e5;"><strong>EnableColumnMenu</strong></span> 设置为：false</p> 
<hr> 
<h4>6、如何<span style="color:#e579b6;"><strong> 隐藏</strong></span> GridControl 的<em><strong> GroupPanel 表头</strong></em></h4> 
<p>设置 Run Design-&gt;OptionsView-&gt;<strong>ShowGroupPanel</strong> 设置为：false</p> 
<hr> 
<h4>7、如何显示水平滚动条</h4> 
<p>a. 只需禁用宽度自动调整,自然就会出现水平滚动条</p> 
<p> this.gridView.OptionsView.<span style="color:#f33b45;"><strong>ColumnAutoWidth</strong></span> = false;</p> 
<p> </p> 
<p><strong>补充一句: </strong></p> 
<p><strong>ColumnAutoWidth 为true时,则表示: </strong>各列的宽度自动调整</p> 
<p> </p> 
<p>b. 列表宽度自适应内容</p> 
<p>gridview1.<strong>BestFitColumns();</strong></p> 
<hr> 
<p>创建一种使用TreeList控件的<strong><em>基窗体</em></strong>时，</p> 
<p>在<strong><em>外观层</em></strong>中调用<strong><span style="color:#7c79e5;">BestFitColumns()</span></strong>不起作用，</p> 
<p>原因是TreeList控件还未添加到实际的窗体中，它还不知道自己的大小，</p> 
<p>所以它的列无法按内容自适应宽度，</p> 
<p>把它移到基窗体的添加TreeList控件之后，此时还是不成功，</p> 
<p>在添加TreeList控件之后和调用BestFitColumns()之前，</p> 
<p>调用TreeList控件的ForceInitialize()，这样BestFitColumns()就起作用了。</p> 
<p>这样它的意思就是TreeList控件首先已经添加到窗体，</p> 
<p>然后本身也我完成了初始化，然后它才能按内容自适应宽度，</p> 
<hr> 
<p>项目中界面不仅仅是在窗体里画的，窗体的基类里实际上只画了大体的<em><strong>布局控件</strong></em></p> 
<p>（每种布局就表示一种类型的父窗体，实际业务的子窗体继承适合自己的父窗体）</p> 
<p>将窗体画分了各个区域，每个区域中的控件是由一个叫做所谓的<em><strong>外观层</strong></em>创建的</p> 
<p>（这个<em><strong>外观层</strong></em>比设计模式和其他开源等项目中的外观层意义不大一样，比它们要复杂得多）</p> 
<p>每种窗体基类只要访问外观的对象获得控件添加到相应区域就行，其他的什么都不做，</p> 
<p>与控件相关的事件和像下拉框中的编辑项都由<em><strong>外观层</strong></em>的相应类完成，</p> 
<p><strong><em>实际业务子窗体</em></strong>给外观的各对象赋值就行，</p> 
<p>业务逻辑层的对象必须实现自己需要实现的接口，</p> 
<p>因为<strong><em>外观层</em></strong>中只知道这些接口，这样实现简单创建界面的同时还实现了界面层和业务层的低耦合</p> 
<hr> 
<h4>8、如何定位到第一条数据/记录？</h4> 
<p>调用方法:  this.gridView.<strong>MoveFirst();</strong></p> 
<hr> 
<h4>9、如何定位到下一条数据/记录？</h4> 
<p>调用方法:  this.gridView.<strong>MoveNext();</strong></p> 
<hr> 
<h4>10、如何定位到最后一条数据/记录？</h4> 
<p>调用方法:  this.gridView.<strong>MoveLast();</strong></p> 
<hr> 
<h4>11、如何<span style="color:#3399ea;"><strong>禁止 </strong></span> 各列头  移动？</h4> 
<p>设置 gridView1.OptionsCustomization.<strong>AllowColumnMoving</strong> = false;</p> 
<hr> 
<h4>12、如何<span style="color:#3399ea;"><strong>禁止</strong></span>   各列头   排序？</h4> 
<p>设置 gridView1.OptionsCustomization.<strong>AllowSort</strong> = false;</p> 
<hr> 
<h4>13、如何<strong><span style="color:#3399ea;">禁止</span></strong>  各列头  改变列宽？</h4> 
<p>设置 gridView1.OptionsCustomization.<strong>AllowColumnResizing</strong> = false;</p> 
<hr> 
<h4>14、拖动滚动条时   固定某一列</h4> 
<table><tbody><tr><td> <p>设置Columns，</p> <p>选择要固定的列，设置<strong><span style="color:#f33b45;">Fixed</span></strong>属性，</p> <p> </p> <p>可以选择以下固定方式：</p> <p>a. 固定在左边、</p> <p>b. 固定在右边、</p> <p>c. 不固定。</p> </td></tr></tbody></table> 
<hr> 
<h4>15、设置成   一次选择一行，且不能被编辑</h4> 
<p>只需要设置以下三个属性即可</p> 
<pre class="has"><code class="language-cs">gridView1.OptionsBehavior.Editable = false;
gridView1.OptionsSelection.EnableAppearanceFocusedCell = false;
gridView1.FocusRectStyle = DevExpress.XtraGrid.Views.Grid.DrawFocusRectStyle.RowFocus;</code></pre> 
<hr> 
<h4>16、如何显示行号？</h4> 
<pre class="has"><code class="language-cs">private void gvPayList_CustomDrawRowIndicator(object sender, DevExpress.XtraGrid.Views.Grid.RowIndicatorCustomDrawEventArgs e){
	e.Appearance.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Far;
	if(e.Info.IsRowIndicator){
		if(e.RowHandle &gt;= 0){
			e.Info.DisplayText = (e.RowHandle + 1).ToString();                 
		}else if(e.RowHandle &gt; -1000 &amp;&amp; e.RowHandle &lt; 0){
  			e.Info.Appearance.BackColor = System.Drawing.Color.AntiqueWhite; 
  			e.Info.DisplayText = "G" + e.RowHandle.ToString();                 
  		}             
  	}         
}</code></pre> 
<hr> 
<h4>17、如何禁用 GridControl 中  <span style="color:#7c79e5;"><strong> 列头的过滤器 </strong></span></h4> 
<p>过滤器如下图所示：</p> 
<p>     </p> 
<p>设置 Run Design-&gt;OptionsCustomization-&gt;<strong>AllowFilter</strong> 设置为：false</p> 
<hr> 
<h4>18、设计数据源  并  绑定字段：             </h4> 
<pre class="has"><code class="language-cs">            DataTable dataTable = new DataTable();
            dataTable.Columns.Add("Name", System.Type.GetType("System.String"));
            dataTable.Columns.Add("Sex", System.Type.GetType("System.String"));
            dataTable.Columns.Add("Age", System.Type.GetType("System.String"));

           DataRow row = dt.NewRow();;
           row["Name"] = "mathilda";
           row["Sex"] = "loli";
           row["Age"] = "12";
           dataTable.Rows.Add(row);

           // 绑定字段
           gridView1.Columns[1].FieldName = "Sex";
           gridView1.Columns[2].FieldName = "Age";
           gridView1.Columns[0].FieldName = "Name";
           
           gridControl1.DataSource = dataTable;</code></pre> 
<hr> 
<h4>19、如何在查询得到 0 条记录时, 显示自定义的字符提示</h4> 
<p>如图所示：</p> 
<p> </p> 
<p>代码如下：</p> 
<pre class="has"><code class="language-cs">// When no Records Are Being Displayed
private void gridView1_CustomDrawEmptyForeground(object sender, CustomDrawEventArgs e)
{
    // 方法一（此方法为GridView设置了数据源绑定时，可用）
    ColumnView columnView = sender as ColumnView;
    BindingSource bindingSource = this.gridView1.DataSource as BindingSource;
    if(bindingSource.Count == 0){
        string str = "没有查询到你所想要的数据!";
        Font f = new Font("宋体", 10, FontStyle.Bold);        
        var tmpLeft = e.Bounds.Left + 5;
        var tmpTop = e.Bounds.Top + 5;
        var tmpWidth = e.Bounds.Width - 5;
        var tmpHeight = e.Bounds.Height - 5;
        Rectangle r = new Rectangle(tmpLeft, tmpTop, tmpWidth, tmpHeight);
        e.Graphics.DrawString(str, f, Brushes.Black, rect); 
    }
}</code></pre> 
<hr> 
<p>// 方法二（此方法 适用于: GridView 没有设置数据源时）</p> 
<pre class="has"><code class="language-cs">if (this._flag){
 if (this.gridView1.RowCount == 0){ 
    string str = "没有查询到你所想要的数据!"; 
    Font f = new Font("宋体", 10, FontStyle.Bold);
    var tmpLeft = e.Bounds.Left + 5;
    var tmpTop = e.Bounds.Top + 5;
    var tmpWidth = e.Bounds.Width - 5;
    var tmpHeight = e.Bounds.Height - 5;
    Rectangle r = new Rectangle(tmpLeft, tmpTop, tmpWidth, tmpHeight);
    e.Graphics.DrawString(str, f, Brushes.Black, r); 
 } 
} 
</code></pre> 
<hr> 
<h4>20.获取  选定行,指定列 单元格的内容</h4> 
<p>gridView1.<span style="color:#3399ea;"><strong>GetRowCellValue</strong></span>(pRows[0], ColumName).ToString ();</p> 
<hr> 
<h4>21.分组显示</h4> 
<p>OptionsView&gt;OptionsBehavior&gt;<span style="color:#7c79e5;"><strong>AutoExpandAllGroups</strong></span> = True</p> 
<p>选择要分组的列，将<span style="color:#7c79e5;"><strong>GroupIndex</strong></span>属性设置为0</p> 
<hr> 
<h4>22. 格式化数据</h4> 
<pre class="has"><code class="language-cs">private void gvList_ValidatingEditor(object sender, DevExpress.XtraEditors.Controls.BaseContainerValidateEditorEventArgs e){
             if (this.gvList.FocusedColumn.FieldName == "passQty"){ 
                string passQty = e.Value.ToString().Trim();                 
                int receiveQty = orderDetailList[this.gvList.FocusedRowHandle].qty; 
                if (!JXType.IsIntBigThanZero(passQty)){ 
                    e.Valid = false;                     
                    e.ErrorText = "合格数量必须为大于等于0, 并且小于等于接货数量的整数！";
                }else{ 
                    if (int.Parse(passQty) &gt; receiveQty){ 
                        e.Valid = false;                         
                        e.ErrorText = "合格数量必须为大于0, 并且小于等于接货数量的整数！";
                    }
                }
            }
}</code></pre> 
<hr> 
<h4>24、动态添加列   </h4> 
<pre class="has"><code class="language-cs">// 动态添加列             
DevExpress.XtraGrid.Columns.GridColumn Col1 = new DevExpress.XtraGrid.Columns.GridColumn();             
Col1.FieldName = "Name";             
Col1.Caption = "名字";             
Col1.Visible = false;             
Col1.VisibleIndex = gvCountry.Columns.Count;             
gvCountry.Columns.Add(Col1);</code></pre> 
<hr> 
<h4>25、设置自动增加的行号 </h4> 
<pre class="has"><code class="language-cs"> private void gridview_CustomDrawRowIndicator(object sender,DevExpress.XtraGrid.Views.Grid.RowIndicatorCustomDrawEventArgs e){

     e.Appearance.TextOptions.HAlignment = DevExpress.Utils.HorzAlignment.Far;
     if(e.Info.IsRowIndicator){
        if(e.RowHandle &gt;= 0){
            e.Info.DisplayText = (e.RowHandle + 1).ToString();                 
        }else if(e.RowHandle &gt; -1000 &amp;&amp; e.RowHandle &lt; 0){
            e.Info.Appearance.BackColor = System.Drawing.Color.AntiqueWhite;
            e.Info.DisplayText = "G" + e.RowHandle.ToString();                 
        }             
     }
｝</code></pre> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4f767e3775752f9099e4ccff6c930376/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java--Apache里面的BeanUtils组件使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5b2fc711c1aca5d81d2dcc8d27c6ba7e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android studio导出hprof到MAT工具流程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>