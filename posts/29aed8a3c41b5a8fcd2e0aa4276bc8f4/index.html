<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Qt&#43;openCV学习笔记（八）openCV4.5.4&#43;android如何使用动、静态库 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Qt&#43;openCV学习笔记（八）openCV4.5.4&#43;android如何使用动、静态库" />
<meta property="og:description" content="前言：
在Android下使用openCV的库，与在其他系统下的原理基本相同，但又有点差异。本次笔记记录下具体的使用方法，供小伙伴们参考
一、使用官方的静态库 静态库使用时，要注意，若库与库之前有相应的依赖，加载的先后顺序不变，若是无法预知需要使用哪些库，可以按照如下的方法测试需要哪些库
1.先放入$$ANDROID_OPENCV/libs/arm64-v8a/libopencv_java4.so在最下面
2.把第三方库放在前面
3.把$$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_core.a放在最前面
4.直接编译程序，等到源码报错时，查看报错的函数是存放于哪个库中，并直接添加到最前面
5.不断重复第4步，直到加入所有需要的库
6.若确认可以正常编译，开如注释掉第三方库，找出程序运行不需要的静态库，最终得到最小的库配置
以arm64-v8a为例，若需要使用二维码识别，最终要加入pro文件的内容如下
unix:!macx{ #添加opencv库（android arm64-v8a版） contains(ANDROID_TARGET_ARCH,arm64-v8a) { message(&#34;arm64-v8a&#34;) ANDROID_OPENCV = opencv_dir/opencv4.5.4/OpenCV-android-sdk/sdk/native INCLUDEPATH &#43;= $$ANDROID_OPENCV/jni/include/opencv2 \ $$ANDROID_OPENCV/jni/include LIBS &#43;= \ $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_objdetect.a \ $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_imgproc.a \ $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_core.a \ $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libcpufeatures.a \ $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libittnotify.a \ $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libquirc.a \ $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libtegra_hal.a \ $$ANDROID_OPENCV/libs/arm64-v8a/libopencv_java4.so } #若不添加，打包时不加入 ANDROID_EXTRA_LIBS = opencv_dir/opencv4.5.4/OpenCV-android-sdk/sdk/native/libs/arm64-v8a/libopencv_java4.so } 二、使用自行编译的静态库 自行编译的静态库，同样需要注意有先后顺序。若库与库之前有相应的依赖，加载的先后顺序不变，若是无法预知需要使用哪些库，可以按照如下的方法测试需要哪些库
1.把第三方库放在前面
2.把$$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_core.a放在最前面
3.直接编译程序，等到源码报错时，查看报错的函数是存放于哪个库中，并直接添加到最前面
4.不断重复第4步，直到加入所有需要的库
5.若确认可以正常编译，开如注释掉第三方库，找出程序运行不需要的静态库，最终得到最小的库配置
以arm64-v8a为例，若需要使用微信二维码识别，最终要加入pro文件的内容如下
unix:!macx{ contains(ANDROID_TARGET_ARCH,arm64-v8a) { message(&#34;arm64-v8a&#34;) ANDROID_OPENCV = opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native INCLUDEPATH &#43;= $$ANDROID_OPENCV/jni/include/opencv2 \ $$ANDROID_OPENCV/jni/include LIBS &#43;= \ $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_wechat_qrcode." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/29aed8a3c41b5a8fcd2e0aa4276bc8f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-11T22:46:17+08:00" />
<meta property="article:modified_time" content="2021-11-11T22:46:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Qt&#43;openCV学习笔记（八）openCV4.5.4&#43;android如何使用动、静态库</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>前言：</p> 
<p>在Android下使用openCV的库，与在其他系统下的原理基本相同，但又有点差异。本次笔记记录下具体的使用方法，供小伙伴们参考</p> 
<h3>一、使用官方的静态库</h3> 
<p>静态库使用时，要注意，若库与库之前有相应的依赖，加载的先后顺序不变，若是无法预知需要使用哪些库，可以按照如下的方法测试需要哪些库</p> 
<p>1.先放入$$ANDROID_OPENCV/libs/arm64-v8a/libopencv_java4.so在最下面</p> 
<p>2.把第三方库放在前面</p> 
<p>3.把$$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_core.a放在最前面</p> 
<p>4.直接编译程序，等到源码报错时，查看报错的函数是存放于哪个库中，并直接添加到最前面</p> 
<p>5.不断重复第4步，直到加入所有需要的库</p> 
<p>6.若确认可以正常编译，开如注释掉第三方库，找出程序运行不需要的静态库，最终得到最小的库配置</p> 
<p>以arm64-v8a为例，若需要使用二维码识别，最终要加入pro文件的内容如下</p> 
<pre><code>unix:!macx{
#添加opencv库（android arm64-v8a版）
contains(ANDROID_TARGET_ARCH,arm64-v8a) {
    message("arm64-v8a")

ANDROID_OPENCV = opencv_dir/opencv4.5.4/OpenCV-android-sdk/sdk/native

    INCLUDEPATH += $$ANDROID_OPENCV/jni/include/opencv2 \
                   $$ANDROID_OPENCV/jni/include

    LIBS += \
        $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_objdetect.a \
        $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_imgproc.a \
        $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_core.a \
        $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libcpufeatures.a \
        $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libittnotify.a \
        $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libquirc.a \
        $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libtegra_hal.a \
        $$ANDROID_OPENCV/libs/arm64-v8a/libopencv_java4.so

}
#若不添加，打包时不加入
ANDROID_EXTRA_LIBS = opencv_dir/opencv4.5.4/OpenCV-android-sdk/sdk/native/libs/arm64-v8a/libopencv_java4.so
}</code></pre> 
<h3>二、使用自行编译的静态库</h3> 
<p> 自行编译的静态库，同样需要注意有先后顺序。若库与库之前有相应的依赖，加载的先后顺序不变，若是无法预知需要使用哪些库，可以按照如下的方法测试需要哪些库</p> 
<p>1.把第三方库放在前面</p> 
<p>2.把$$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_core.a放在最前面</p> 
<p>3.直接编译程序，等到源码报错时，查看报错的函数是存放于哪个库中，并直接添加到最前面</p> 
<p>4.不断重复第4步，直到加入所有需要的库</p> 
<p>5.若确认可以正常编译，开如注释掉第三方库，找出程序运行不需要的静态库，最终得到最小的库配置</p> 
<p>以arm64-v8a为例，若需要使用微信二维码识别，最终要加入pro文件的内容如下</p> 
<pre><code>unix:!macx{
contains(ANDROID_TARGET_ARCH,arm64-v8a) {
    message("arm64-v8a")
ANDROID_OPENCV = opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native

    INCLUDEPATH += $$ANDROID_OPENCV/jni/include/opencv2 \
                   $$ANDROID_OPENCV/jni/include


LIBS += \
    $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_wechat_qrcode.a \
    $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_dnn.a \
    $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_imgproc.a \
    $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_calib3d.a \
    $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_flann.a \
    $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_features2d.a \
    $$ANDROID_OPENCV/staticlibs/arm64-v8a/libopencv_core.a \
    $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libcpufeatures.a \
    $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libittnotify.a \
    $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libquirc.a \
    $$ANDROID_OPENCV/3rdparty/libs/arm64-v8a/libtegra_hal.a
}</code></pre> 
<h3>三、使用自行编译的动态库</h3> 
<p>动态库无加载顺序，直接加入即可，但要注意加入ANDROID_EXTRA_LIBS中，否则打包时不会加入</p> 
<p>直接编译程序，等到源码报错时，查看报错的函数是存放于哪个库中，并直接添加即可</p> 
<p>以arm64-v8a为例，若需要使用微信二维码识别，最终要加入pro文件的内容如下</p> 
<pre><code>unix:!macx{
contains(ANDROID_TARGET_ARCH,arm64-v8a) {
    message("arm64-v8a")
ANDROID_OPENCV = opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native

    INCLUDEPATH += $$ANDROID_OPENCV/jni/include/opencv2 \
                   $$ANDROID_OPENCV/jni/include


LIBS += \
    $$ANDROID_OPENCV/libs/arm64-v8a/libopencv_wechat_qrcode.so \
    $$ANDROID_OPENCV/libs/arm64-v8a/libopencv_dnn.so \
    $$ANDROID_OPENCV/libs/arm64-v8a/libopencv_imgproc.so \
    $$ANDROID_OPENCV/libs/arm64-v8a/libopencv_calib3d.so \
    $$ANDROID_OPENCV/libs/arm64-v8a/libopencv_flann.so \
    $$ANDROID_OPENCV/libs/arm64-v8a/libopencv_features2d.so \
    $$ANDROID_OPENCV/libs/arm64-v8a/libopencv_core.so

ANDROID_EXTRA_LIBS = \
    opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native/libs/arm64-v8a/libopencv_core.so \
    opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native/libs/arm64-v8a/libopencv_features2d.so \
    opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native/libs/arm64-v8a/libopencv_flann.so \
    opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native/libs/arm64-v8a/libopencv_calib3d.so \
    opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native/libs/arm64-v8a/libopencv_imgproc.so \
    opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native/libs/arm64-v8a/libopencv_dnn.so \
    opencv_dir/opencv4.5.4/build_android_arm64-v8a/install/sdk/native/libs/arm64-v8a/libopencv_wechat_qrcode.so

}</code></pre> 
<p>后记：</p> 
<p>在编译时，不勾选world，各个库要分散成多个文件，虽然可以减少打包后的程序体积，但不利于初学者学习</p> 
<p>建议初学者，在编译时勾选world，以降低学习难度</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4af51d2fdff36a97b483751721b0d15d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">序列化Serializable</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/56909dcfc229f7fdeac2f42d632010bb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mybatis之使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>