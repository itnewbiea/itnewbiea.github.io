<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nginx如何重定向 https，成功http80自动跳转https443！ - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nginx如何重定向 https，成功http80自动跳转https443！" />
<meta property="og:description" content="/usr/local/nginx/conf/nginx.conf
#这个位置进行配置
server { listen 80; server_name derfoe.cn; return 301 https://$server_name$request_uri; } 如果已经配置好了SSL 以上配置就可以成功
如果未配置SSL，要先配置SSL证书
以下的 只需要更换域名，还有一个网站路径defult
此域名以 derfoe.cn 域名为例！
######################## default ############################ #只需要将下面部分替换掉，从这开始 ，只需要改SSL证书文件路径 ########################## #重定向句子 server { listen 80; server_name derfoe.cn; return 301 https://$server_name$request_uri; } server { listen 443 ssl; server_name _; access_log /data/wwwlogs/access_nginx.log combined; # ssl证书地址 ssl_certificate /usr/local/nginx/cert/derfoe.cn.pem; # pem文件的路径 ssl_certificate_key /usr/local/nginx/cert/derfoe.cn.key; # key文件的路径 # ssl验证相关配置 ssl_session_timeout 5m; #缓存有效期 ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; #加密算法 ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #安全链接可选的加密协议 ssl_prefer_server_ciphers on; #使用服务器端的首选算法 root /data/wwwroot/derfoe." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/33b96c51256b6927ae18843f4db35d1b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-08T01:36:58+08:00" />
<meta property="article:modified_time" content="2023-09-08T01:36:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nginx如何重定向 https，成功http80自动跳转https443！</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>/usr/local/nginx/conf/nginx.conf</p> 
 <p>#这个位置进行配置</p> 
</blockquote> 
<p></p> 
<pre><code>server {
  listen   80;
  server_name  derfoe.cn;
  return   301 https://$server_name$request_uri;
}</code></pre> 
<p>如果已经配置好了SSL 以上配置就可以成功</p> 
<p>如果未配置SSL，要先配置SSL证书</p> 
<p>以下的 只需要更换域名，还有一个网站路径defult</p> 
<p></p> 
<blockquote> 
 <p>此域名以 derfoe.cn 域名为例！</p> 
</blockquote> 
<p></p> 
<pre><code>######################## default ############################
#只需要将下面部分替换掉，从这开始   ，只需要改SSL证书文件路径 ##########################
 



#重定向句子

server {
  listen   80;
  server_name  derfoe.cn;
  return   301 https://$server_name$request_uri;
}



 
server {
    listen 443 ssl;
    server_name _;
    access_log /data/wwwlogs/access_nginx.log combined;
    # ssl证书地址
    ssl_certificate     /usr/local/nginx/cert/derfoe.cn.pem;  # pem文件的路径   
    ssl_certificate_key  /usr/local/nginx/cert/derfoe.cn.key; # key文件的路径
    
    # ssl验证相关配置
    ssl_session_timeout  5m;    #缓存有效期
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;    #加密算法
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    #安全链接可选的加密协议
    ssl_prefer_server_ciphers on;   #使用服务器端的首选算法
   
    root /data/wwwroot/derfoe.cn;  #必须更换到https的网站路径


    index index.html index.htm index.php;
    #error_page 404 /404.html;
    #error_page 502 /502.html;
    location /nginx_status {
      stub_status on;
      access_log off;
      allow 127.0.0.1;
      deny all;
    }
    location ~ [^/]\.php(/|$) {
      #fastcgi_pass remote_php_ip:9000;
      fastcgi_pass unix:/dev/shm/php-cgi.sock;
      fastcgi_index index.php;
      include fastcgi.conf;
    }
    location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ {
      expires 30d;
      access_log off;
    }
    location ~ .*\.(js|css)?$ {
      expires 7d;
      access_log off;
    }
    location ~ ^/(\.user.ini|\.ht|\.git|\.svn|\.project|LICENSE|README.md) {
      deny all;
    }
  }




 ###################  结束  ##########################
########################## vhost #############################
  include vhost/*.conf;
}</code></pre> 
<p>别忘记要输入一串代码：</p> 
<p></p> 
<pre><code>systemctl restart nginx #让代码生效</code></pre> 
<p>成功 访问域名 :derfoe.cn ，自动跳转 https:derfoe.cn</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ec843f093af336a678e4b356a4d8b2cf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【BUG】【Ubuntu】apt-get install E: 无法下载 XXXXX 暂时不能解析域名“mirrors.tuna.tsinghua.edu.cn”</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/18cf2ef69a199a894e385494407aa681/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android Studio中logcat的工具栏消失了</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>