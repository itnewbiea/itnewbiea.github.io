<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>java自带工具_Java常用自带工具介绍 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="java自带工具_Java常用自带工具介绍" />
<meta property="og:description" content="jps
jinfo
jmap
jstack
JConsole
Visual VM
一、jps
jps(Java Virtual Machine Process Status Tool)是JDK 1.5提供的一个显示当前所有java进程pid的命令，简单实用，非常适合在linux/unix平台上简单察看当前java进程的一些简单情况。
jps存放在JAVA_HOME/bin/jps，使用时为了方便请将JAVA_HOME/bin/加入到Path。
基本使用方式：
不过，jps命令有个地方很不好，似乎只能显示当前用户的java进程，要显示其他用户的还是只能用unix/linux的ps命令。
参数使用
-q
只显示pid，不显示class名称,jar文件名和传递给main方法的参数
-m
输出传递给main方法的参数，在嵌入式jvm上可能是null
-l
输出应用程序main class的完整package名 或者 应用程序的jar文件完整路径名
-v
输出传递给JVM的参数
二、jinfo
jinfo可以输出并修改运行时的java进程的JVM参数。用处比较简单，用于输出JAVA系统参数及命令行参数。用法是jinfo -opt pid
另外，jinfo可能在未来的jvm中移除
-flag name
-flag 打印该Java进程的指定的JVM参数的值
如：查看13092的MaxPerm大小可以用
-flag [&#43;|-]name
-flag[&#43;|-] 控制生效或不生效某些JVM参数
如生效PrintGCDetails参数
-flag name=value
-flag= 设定名为name的参数为指定值
如果出现下面这样的情况，说明参数不支持修改
-flags
查看进程的所有JVM参数
三、jmap
打印出某个Java进程(使用pid)内存内的，所有‘对象’的情况(如：产生那些对象，及其数量)。
使用方法：
jmap [ option ] pid
jmap [ option ] executable core
jmap [ option ] [server-id@]remote-hostname-or-IP" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/935fafec05108369e30b3193e38acd67/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-12T18:23:52+08:00" />
<meta property="article:modified_time" content="2021-02-12T18:23:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">java自带工具_Java常用自带工具介绍</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>jps</p> 
 <p>jinfo</p> 
 <p>jmap</p> 
 <p>jstack</p> 
 <p>JConsole</p> 
 <p>Visual VM</p> 
 <p>一、jps</p> 
 <p>jps(Java Virtual Machine Process Status Tool)是JDK 1.5提供的一个显示当前所有java进程pid的命令，简单实用，非常适合在linux/unix平台上简单察看当前java进程的一些简单情况。</p> 
 <p>jps存放在JAVA_HOME/bin/jps，使用时为了方便请将JAVA_HOME/bin/加入到Path。</p> 
 <p>基本使用方式：</p> 
 <p align="center"><img src="https://images2.imgbox.com/c5/4d/wvARDVQP_o.png" alt="e6bbf3d06494fd945dc4472d9221b690.png"></p> 
 <p>不过，jps命令有个地方很不好，似乎只能显示当前用户的java进程，要显示其他用户的还是只能用unix/linux的ps命令。</p> 
 <p>参数使用</p> 
 <p>-q</p> 
 <p>只显示pid，不显示class名称,jar文件名和传递给main方法的参数</p> 
 <p align="center"><img src="https://images2.imgbox.com/7d/62/t8JTf7IM_o.png" alt="08ca75a5a0c3fdf63146953ae3e5e1ac.png"></p> 
 <p>-m</p> 
 <p>输出传递给main方法的参数，在嵌入式jvm上可能是null</p> 
 <p align="center"><img src="https://images2.imgbox.com/5b/cc/1Z0lQy3j_o.png" alt="dc7b6c05923f530dcf0255a69281daf7.png"></p> 
 <p>-l</p> 
 <p>输出应用程序main class的完整package名 或者 应用程序的jar文件完整路径名</p> 
 <p align="center"><img src="https://images2.imgbox.com/9d/86/HhEr36kx_o.png" alt="1a2e22538aebcf8ae58b278c28b1652b.png"></p> 
 <p>-v</p> 
 <p>输出传递给JVM的参数</p> 
 <p align="center"><img src="https://images2.imgbox.com/d0/95/bNy6iIfU_o.png" alt="f1b0a937e1504a566ee39c54841c3934.png"></p> 
 <p>二、jinfo</p> 
 <p>jinfo可以输出并修改运行时的java进程的JVM参数。用处比较简单，用于输出JAVA系统参数及命令行参数。用法是jinfo -opt  pid</p> 
 <p>另外，jinfo可能在未来的jvm中移除</p> 
 <p align="center"><img src="https://images2.imgbox.com/5a/2c/Ks5sGxKL_o.png" alt="7813c2535177b3d376406bc74188244d.png"></p> 
 <p>-flag name</p> 
 <p>-flag  打印该Java进程的指定的JVM参数的值</p> 
 <p>如：查看13092的MaxPerm大小可以用</p> 
 <p align="center"><img src="https://images2.imgbox.com/ac/9a/3hcSHIWq_o.png" alt="978e8f3fa38d37b4f09f5cd9d046cc5d.png"></p> 
 <p>-flag [+|-]name</p> 
 <p>-flag[+|-]  控制生效或不生效某些JVM参数</p> 
 <p>如生效PrintGCDetails参数</p> 
 <p align="center"><img src="https://images2.imgbox.com/73/36/5Wl1rkBw_o.png" alt="65d8ac45d13aa4278ba9044f368df88c.png"></p> 
 <p>-flag name=value</p> 
 <p>-flag=  设定名为name的参数为指定值</p> 
 <p>如果出现下面这样的情况，说明参数不支持修改</p> 
 <p align="center"><img src="https://images2.imgbox.com/06/9b/KF2vzC5e_o.png" alt="47e1ef72ed0fae30b0fc78f2a0560d0c.png"></p> 
 <p>-flags</p> 
 <p>查看进程的所有JVM参数</p> 
 <p align="center"><img src="https://images2.imgbox.com/49/f0/gG7QjEJk_o.png" alt="93c26118a86246746a06cc232ff8edfe.png"></p> 
 <p>三、jmap</p> 
 <p>打印出某个Java进程(使用pid)内存内的，所有‘对象’的情况(如：产生那些对象，及其数量)。</p> 
 <p>使用方法：</p> 
 <p>jmap [ option ] pid</p> 
 <p>jmap [ option ] executable core</p> 
 <p>jmap [ option ] [server-id@]remote-hostname-or-IP</p> 
 <p align="center"><img src="https://images2.imgbox.com/b3/ad/BnhI16UA_o.png" alt="f9f1e2a36b75f4d7a700ab57988da2c2.png"></p> 
 <p>参数</p> 
 <p>-histo</p> 
 <p>打印每个class的实例数目,内存占用,类全名信息。VM的内部类名字开头会加上前缀“*”。 如果live子参数加上后，只统计活的对象数量。</p> 
 <p align="center"><img src="https://images2.imgbox.com/ad/53/t8qpSwnL_o.png" alt="2a971c89a7232c525c58c37981a8832d.png"></p> 
 <p>-dump:[live,]format=b,file=filename</p> 
 <p>使用hprof二进制形式,输出jvm的heap内容到文件。live子选项是可选的，假如指定live选项,那么只输出活的对象到文件。</p> 
 <p align="center"><img src="https://images2.imgbox.com/9b/82/rx7tjvFz_o.png" alt="aceaf3818872ffa5eeb8a742e9d6f901.png"></p> 
 <p>-finalizerinfo</p> 
 <p>打印正等候回收的对象的信息。</p> 
 <p align="center"><img src="https://images2.imgbox.com/02/60/cOGaPMYe_o.png" alt="86b552bfb7368a0f78c832b4f7bc0067.png"></p> 
 <p>-heap</p> 
 <p>打印heap的概要信息，GC使用的算法，heap的配置及wise heap的使用情况。</p> 
 <p align="center"><img src="https://images2.imgbox.com/44/6e/FShsOFcd_o.png" alt="7aa70fab4913af3b9b95608fa04e656e.png"></p> 
 <p>-permstat</p> 
 <p>打印classload和jvm heap长久层的信息。包含每个classloader的名字，活泼性，地址，父classloader和加载的class数量。另外，内部String的数量和占用内存数也会打印出来。</p> 
 <p align="center"><img src="https://images2.imgbox.com/9b/aa/78QmhfQ3_o.png" alt="bf109197d57d0a65c0374a3860f7ef3d.png"></p> 
 <p>-J</p> 
 <p>传递参数给jmap启动的jvm。</p> 
 <p>-F</p> 
 <p>强迫。在pid没有相应的时候使用-dump或者-histo参数。在这个模式下，live子参数无效。</p> 
 <p>四、jstack</p> 
 <p>jstack用于打印出给定的java进程ID或core file或远程调试服务的Java堆栈信息，如果是在64位机器上，需要指定选项”-J-d64″，Windows的jstack使用方式只支持以下的这种方式：</p> 
 <p>jstack [-l] pid</p> 
 <p>使用方法：</p> 
 <p>jstack [-l] </p> 
 <p>jstack -F [-m] [-l] </p> 
 <p>jstack [-m] [-l] </p> 
 <p>jstack [-m] [-l] [server_id@]</p> 
 <p align="center"><img src="https://images2.imgbox.com/3d/f7/S7fFro8Z_o.png" alt="9c37a40d2828bde112b9128d28a841ae.png"></p> 
 <p>参数</p> 
 <p>-F</p> 
 <p>当’jstack [-l] pid’没有相应的时候强制打印栈信息</p> 
 <p>-l</p> 
 <p>长列表。打印关于锁的附加信息，例如属于java.util.concurrent的ownable synchronizers列表。</p> 
 <p align="center"><img src="https://images2.imgbox.com/39/71/9CUoDJnP_o.png" alt="e8c5ba57ff14d0c9db2f0b9b7e8101f6.png"></p> 
 <p>-m</p> 
 <p>打印java和native c/c++框架的所有栈信息。</p> 
 <p align="center"><img src="https://images2.imgbox.com/72/aa/drROuDW8_o.png" alt="26a065216b0b1518447c9d76b437f71a.png"></p> 
 <p>五、JConsole</p> 
 <p>JConsole是一个基于JMX的GUI工具，用于连接正在运行的JVM，不过此JVM需要使用可管理的模式启动。如果要把一个应用以可管理的形式启动，可以在启动是设置com.sun.management.jmxremote。例如，启动一个可以在本地监控的J2SE的应用Java2Demo ，需输入以下命令：</p> 
 <p>Shell</p> 
 <p>JDK_HOME/bin/java -Dcom.sun.management.jmxremote -jar JDK_HOME/demo/jfc/Java2D/Java2Demo.jar</p> 
 <p>1</p> 
 <p>2</p> 
 <p>JDK_HOME/bin/java-Dcom.sun.management.jmxremote-jarJDK_HOME/demo/jfc/Java2D/Java2Demo.jar</p> 
 <p>概述界面：</p> 
 <p align="center"><img src="https://images2.imgbox.com/bd/dd/UYLP9UPO_o.png" alt="85b17c966e780d81a79d51ca84d7840c.png"></p> 
 <p>内存界面：</p> 
 <p align="center"><img src="https://images2.imgbox.com/ba/05/pB9vUyQD_o.png" alt="e40844e460f34c8c6a6f546b9cdbaed8.png"></p> 
 <p>线程界面：</p> 
 <p align="center"><img src="https://images2.imgbox.com/5f/cf/jqzCo6kt_o.png" alt="4223f368dd90220cf50bb539f0d05696.png"></p> 
 <p>类界面：</p> 
 <p align="center"><img src="https://images2.imgbox.com/e3/9e/UvljrokW_o.png" alt="e945eaf7c3a8108df27e7d44e4e1345a.png"></p> 
 <p>VM摘要界面：</p> 
 <p align="center"><img src="https://images2.imgbox.com/4b/3c/gsfuHqKb_o.png" alt="8da3c1a448676592683a165fef161ab1.png"></p> 
 <p>MBean界面：</p> 
 <p align="center"><img src="https://images2.imgbox.com/2d/3b/czwGO31l_o.png" alt="77ab3a9916d014f3cea6888445b45ba0.png"></p> 
 <p>远程监控</p> 
 <p>启动程序时加控制台参数：</p> 
 <p>Shell</p> 
 <p>-Dcom.sun.management.jmxremote.port=9112 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false</p> 
 <p>1</p> 
 <p>2</p> 
 <p>-Dcom.sun.management.jmxremote.port=9112-Dcom.sun.management.jmxremote.authenticate=false-Dcom.sun.management.jmxremote.ssl=false</p> 
 <p>注意参数-Dcom.sun.management.jmxremote.port=9112表示监控的端口</p> 
 <p>启动程序后，使用jdk路径下的bin下的jconsole.exe工具</p> 
 <p align="center"><img src="https://images2.imgbox.com/5d/ba/2tfp9MUH_o.png" alt="21bee9cabe2d4c11802685a3f030a45b.png"></p> 
 <p>点击链接后就可以远程监控Java进程的运行状态了：</p> 
 <p align="center"><img src="https://images2.imgbox.com/6a/bf/WBRrRKev_o.png" alt="413ebc9cae36c5aefb878d4e5ca048e3.png"></p> 
 <p>六、Visual VM</p> 
 <p>VisualVM 是一款免费的性能分析工具。它通过 jvmstat、JMX、SA(Serviceability Agent)以及 Attach API 等多种方式从程序运行时获得实时数据，从而进行动态的性能分析。同时，它能自动选择更快更轻量级的技术尽量减少性能分析对应用程序造成的影响，提高性能分析的精度。</p> 
 <p align="center"><img src="https://images2.imgbox.com/5d/ab/lI5heEW4_o.png" alt="87b70e9c6b5a0ee40ffad5b0a6162f01.png"></p> 
 <p>安装插件</p> 
</div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/26210fdd7d2e83817a93b2cc01de9bf3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java broken pipe_java Broken pipe 几种原因</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/db478ea708efe4d463c10848ba5a3c34/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java 动画 制作_利用Java制作字符动画实例代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>