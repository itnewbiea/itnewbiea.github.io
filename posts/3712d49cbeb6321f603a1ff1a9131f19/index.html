<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【WSL】[02] windows subsytem linux 配置和使用 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【WSL】[02] windows subsytem linux 配置和使用" />
<meta property="og:description" content="第【2】章前言： 上一篇我们已经安装好了ubuntu在WSL下的GUI的桌面：我们现在继续进一步进行配置工作。同时也把，运用WSL的流程摸一把，以备后用。
补充1： 彻底的关闭WSL的方法： WSL使用后，原来Windows安装的传统虚拟机是用不了的，会报错：Vmware虚拟机报错的原因，其中WSL2是重要的一条，所以，我们先要学会WSL的关闭方法，以免之前的Vmware的资源都不能用了。
如，下图勾选掉这两项，就能够关闭WSL2的功能了 补充2 关闭WSL中某一个启动的Linxu子系统： 先查询一下： (base) PS C:\Users\frank_sj&gt; wsl --list --verbose NAME STATE VERSION * Ubuntu Running 2 Ubuntu-20.04 Running 2 命令：wsl --list --verbose 可以简写为： wsl -l
(base) PS C:\Users\frank_sj&gt; wsl -l -v NAME STATE VERSION * Ubuntu Running 2 Ubuntu-20.04 Running 2 然后用： wsl -t Ubuntu 去停掉其中的Ubuntu的子系统
(base) PS C:\Users\frank_sj&gt; wsl -t Ubuntu (base) PS C:\Users\frank_sj&gt; wsl --list --verbose NAME STATE VERSION * Ubuntu Stopped 2 Ubuntu-20." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/3712d49cbeb6321f603a1ff1a9131f19/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-02T23:10:31+08:00" />
<meta property="article:modified_time" content="2023-01-02T23:10:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【WSL】[02] windows subsytem linux 配置和使用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>第【2】章前言：</h2> 
<p>上一篇我们已经安装好了ubuntu在WSL下的GUI的桌面：我们现在继续进一步进行配置工作。同时也把，运用WSL的流程摸一把，以备后用。</p> 
<hr> 
<h2>补充1： 彻底的关闭WSL的方法：</h2> 
<p>WSL使用后，原来Windows安装的传统虚拟机是用不了的，会报错：<a class="link-info" href="https://kb.vmware.com/s/article/2146361" rel="nofollow" title="Vmware虚拟机报错的原因">Vmware虚拟机报错的原因</a>，其中WSL2是重要的一条，所以，我们先要学会WSL的关闭方法，以免之前的Vmware的资源都不能用了。</p> 
<p>如，下图勾选掉这两项，就能够关闭WSL2的功能了 </p> 
<p><img alt="" height="638" src="https://images2.imgbox.com/f6/42/8ZjecvrY_o.png" width="1124"></p> 
<h2>补充2 关闭WSL中某一个启动的Linxu子系统：</h2> 
<h3>先查询一下：</h3> 
<pre><code>(base) PS C:\Users\frank_sj&gt; wsl --list --verbose
  NAME            STATE           VERSION
* Ubuntu          Running         2
  Ubuntu-20.04    Running         2</code></pre> 
<p>命令：wsl --list --verbose 可以简写为：  wsl -l</p> 
<pre><code>(base) PS C:\Users\frank_sj&gt; wsl -l -v
  NAME            STATE           VERSION
* Ubuntu          Running         2
  Ubuntu-20.04    Running         2</code></pre> 
<p>然后用： wsl -t Ubuntu 去停掉其中的Ubuntu的子系统</p> 
<pre><code>(base) PS C:\Users\frank_sj&gt; wsl -t Ubuntu
(base) PS C:\Users\frank_sj&gt; wsl --list --verbose
  NAME            STATE           VERSION
* Ubuntu          Stopped         2
  Ubuntu-20.04    Running         2</code></pre> 
<p>然后用， -d，又可以再打开</p> 
<pre><code>(base) PS C:\Users\frank_sj&gt; wsl -d Ubuntu</code></pre> 
<hr> 
<p></p> 
<h2>1 在windows的PowerShell终端进行配置和查询：</h2> 
<h3>1.1 查询所有支持的可以支持的Linux发现版本： </h3> 
<pre><code>wsl --list --online</code></pre> 
<p>【案，必须科学上网，否则，会报错】</p> 
<blockquote> 
 <p>以下是可安装的有效分发的列表。<br> 请使用“wsl --install -d &lt;分发&gt;”安装。</p> 
 <p>NAME               FRIENDLY NAME<br> Ubuntu             Ubuntu<br> Debian             Debian GNU/Linux<br> kali-linux         Kali Linux Rolling<br> SLES-12            SUSE Linux Enterprise Server v12<br> SLES-15            SUSE Linux Enterprise Server v15<br> Ubuntu-18.04       Ubuntu 18.04 LTS<br> Ubuntu-20.04       Ubuntu 20.04 LTS<br> OracleLinux_8_5    Oracle Linux 8.5<br> OracleLinux_7_9    Oracle Linux 7.9</p> 
</blockquote> 
<p>【这里，还给出来安装的方法】</p> 
<blockquote> 
 <p>wsl --install -d OracleLinux_8_5</p> 
</blockquote> 
<h3>1.2 查询本机的所有安装版本 </h3> 
<pre><code>wsl.exe --list --all</code></pre> 
<blockquote> 
 <p>(base) PS C:\Users\frank_sj&gt; wsl.exe --list --all<br> 适用于 Linux 的 Windows 子系统分发版:<br> Ubuntu-20.04 (默认)            </p> 
</blockquote> 
<h3>1.3 注销用户名和密码：</h3> 
<p>在第【1】章，我们新建安装了ubuntu的版本，会自动要求你输入用户和密码，现在如果我们要修改用户密码怎么办？</p> 
<h4>1.3.1 注销用户和密码</h4> 
<blockquote> 
 <p>  --unregister &lt;分发&gt;<br>         注销分发并删除根文件系统。</p> 
</blockquote> 
<pre><code>wsl --unregister Ubuntu-20.04</code></pre> 
<p>会删除原有的Linux分发版本。</p> 
<hr> 
<h2>2 在Ubuntu终端进行配置：</h2> 
<h3>2.1 首次设置用户密码（参照第一章）</h3> 
<h3>2.2 修改用户密码：</h3> 
<blockquote> 
 <p>donkeycar01@DESKTOP-M4INDEG:~$ sudo passwd<br> [sudo] password for donkeycar01:<br> New password:<br> Retype new password:<br> passwd: password updated successfully</p> 
</blockquote> 
<h3>2.2 设置root账号和密码</h3> 
<blockquote> 
 <p>donkeycar01@DESKTOP-M4INDEG:~$ su root<br> Password:<br> root@DESKTOP-M4INDEG:/home/donkeycar01# sudo passwd<br> New password:<br> Retype new password:<br> passwd: password updated successfully</p> 
</blockquote> 
<hr> 
<h2>3 设置更新镜像源：</h2> 
<pre><code>vi /etc/apt/source.list</code></pre> 
<p>除了清华的源外，还有阿里和中科大的源可选 </p> 
<blockquote> 
 <p>#  阿里源<br> deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse<br> deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse<br> deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse<br> deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse<br> deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse<br> deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse<br> deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse<br> deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse<br> deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse<br> deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</p> 
 <p>#  中科大源<br> deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse<br> deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse<br> deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse<br> deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse<br> deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse<br> deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse<br> deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse<br> deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse<br> deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse<br> deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</p> 
</blockquote> 
<hr> 
<h2>4 GUI的安装和使用</h2> 
<p>（01章已经说明了 gnome-session 的GUI的使用办法）</p> 
<p>这里再展示一下另外一个GUI的ubuntu界面：startxfce4</p> 
<h3>4.1 显示配置</h3> 
<pre><code>export DISPLAY=localhost:0
export DISPLAY=`cat /etc/resolv.conf | grep nameserver | awk '{print $2}'`:0</code></pre> 
<h3>4.2 运行startxfce4</h3> 
<p>这个界面感觉要简洁一点，但是，怎么找不到各种应用了...有兴趣可以研究一下</p> 
<p><img alt="" height="334" src="https://images2.imgbox.com/14/f0/VeNyuv94_o.png" width="555"></p> 
<hr> 
<h2>5 典型GUI应用的安装：</h2> 
<h3>5.1 gedit </h3> 
<p>是 GNOME 桌面环境的默认文本编辑器</p> 
<p><img alt="" height="484" src="https://images2.imgbox.com/d1/de/n2skQKwW_o.png" width="589"></p> 
<h3>5.2  GIMP</h3> 
<p>GIMP 是一种免费的开源光栅图形编辑器，用于图像操作和图像编辑、自由形态绘图、不同图像文件格式之间的转码，以及更专业的任务。</p> 
<pre><code>sudo apt install gimp -y</code></pre> 
<p> <img alt="" height="280" src="https://images2.imgbox.com/4b/0d/d6CdVPgT_o.png" width="487"></p> 
<p><img alt="" height="372" src="https://images2.imgbox.com/f5/8f/chGjCFCv_o.png" width="496"></p> 
<p> 感觉就是个PS，在linux下，</p> 
<h3>5.3  VLC</h3> 
<p>VLC 是一种免费的开源跨平台多媒体播放器和框架，可播放大多数多媒体文件。</p> 
<p> 【案，这个程序直接在GNOME 的单main的<strong><span style="color:#fe2c24;"><span style="background-color:#ffd900;">VcXsrv 窗口里面是无法正常运行的</span></span></strong>】需要使用下面这个设定GUI，才能正常打开运行：</p> 
<p><img alt="" height="416" src="https://images2.imgbox.com/ab/a6/dz8tbhlC_o.png" width="507"></p> 
<p>因为他有两个窗口：</p> 
<p><img alt="" height="448" src="https://images2.imgbox.com/0d/ec/ZM0pffZw_o.png" width="451"><img alt="" height="450" src="https://images2.imgbox.com/20/22/1ZXnWvQo_o.png" width="598"></p> 
<h3>5.4 octave</h3> 
<p>类似于matlab</p> 
<pre><code>sudo apt install octave
</code></pre> 
<p><strong><span style="color:#fe2c24;"><span style="background-color:#ffd900;"> 【现在，octave是一个多窗口的应用程序，我们需要用到VcXsrv的多窗口模式】</span></span></strong></p> 
<pre><code>octave --gui &amp;</code></pre> 
<p> 【案，这个程序直接在GNOME 的单main的<strong><span style="color:#fe2c24;"><span style="background-color:#ffd900;">VcXsrv 窗口里面是无法正常运行的</span></span></strong>】</p> 
<p>运行后，如下：</p> 
<p><img alt="" height="648" src="https://images2.imgbox.com/07/33/7Fmbdzva_o.png" width="803"></p> 
<p>在windows的任务栏里面，有三个octave的窗口，现在Ubuntu和windows，的运行环境已经完美的结合起来了。 </p> 
<p>上述傅里叶图运行的参考代码如下：</p> 
<p>julia.m</p> 
<pre><code>#{

Inspired by the work of Bruno Girin ([Geek Thoughts: Fractals with Octave: Classic Mandelbrot and Julia](http://brunogirin.blogspot.com/2008/12/fractals-with-octave-classic-mandelbrot.html))

Calculate a Julia set

zmin: Minimum value of c

zmax: Maximum value of c

hpx: Number of horizontal pixels

niter: Number of iterations

c: A complex number

#}

function M = julia(zmin, zmax, hpx, niter, c)

%% Number of vertical pixels

vpx=round(hpx*abs(imag(zmax-zmin)/real(zmax-zmin)));

%% Prepare the complex plane

[zRe,zIm]=meshgrid(linspace(real(zmin),real(zmax),hpx),

linspace(imag(zmin),imag(zmax),vpx));

z=zRe+i*zIm;

M=zeros(vpx,hpx);

%% Generate Julia

for s=1:niter

mask=abs(z)&lt;2;

M(mask)=M(mask)+1;

z(mask)=z(mask).^2+c;

end

M(mask)=0;

end</code></pre> 
<p> juliatest.m</p> 
<pre><code>Jc1=julia(-1.6+1.2i, 1.6-1.2i, 640, 128, -0.75+0.2i);

imagesc(Jc1)

axis off

colormap('default');</code></pre> 
<hr> 
<h2>6 docker：</h2> 
<h3> 6.1 设置Docker对WSL的支持：</h3> 
<p><img alt="" height="439" src="https://images2.imgbox.com/00/0c/XLLX5Sgm_o.png" width="770"></p> 
<h3>6.2 设置</h3> 
<p>ubuntu IN WSL </p> 
<p><img alt="" height="439" src="https://images2.imgbox.com/9e/df/XjcuMBek_o.png" width="770"></p> 
<hr> 
<h2>7 windows 和 WSL 的文件互通：</h2> 
<p>WSL和windows的互通很简单，就是进入到WSL安装的ubuntu里面，直接进到linux的标准/mnt目录，里面windows的盘符，一个不少都mount好勒，在那里</p> 
<p><img alt="" height="678" src="https://images2.imgbox.com/53/dc/QQrvoPpa_o.png" width="1127"></p> 
<hr> 
<h2>8 WSL的备份与还原：</h2> 
<h3>8.1 备份：</h3> 
<p>在windows下，我们只要运行这个：</p> 
<pre><code>(base) PS C:\Users\frank_sj&gt; wsl --export Ubuntu D:\WSLvm\Ubuntu.tar</code></pre> 
<p> 就能够备份了，极其简单</p> 
<p><img alt="" height="139" src="https://images2.imgbox.com/47/4d/B7exfRGA_o.png" width="298"></p> 
<h3>8.2 还原： </h3> 
<p>案，还原，要做的事情，就是要先把之前的各注销掉，再还原</p> 
<pre><code class="hljs">(base) PS C:\Users\frank_sj&gt; wsl --list --verbose
  NAME      STATE           VERSION
* Ubuntu    Stopped         2
(base) PS C:\Users\frank_sj&gt; wsl --unregister Ubuntu
正在注销...
(base) PS C:\Users\frank_sj&gt; wsl --list --verbose
适用于 Linux 的 Windows 子系统没有已安装的分发版。
可以通过访问 Microsoft Store 来安装分发版:
https://aka.ms/wslstore
(base) PS C:\Users\frank_sj&gt; wsl --import Ubuntu D:\WSL D:\WSLvm\Ubuntu-xfce4ok.tar</code></pre> 
<h3>8.3 还原为当前用户</h3> 
<p>系统还原后，会默认到root用户，通过下面命令转回来：【案，注意目录位置】</p> 
<pre><code class="hljs">(base) PS C:\Users\frank_sj\AppData\Local\Microsoft\WindowsApps&gt; ubuntu.exe config --default-user donkeycar</code></pre> 
<p></p> 
<hr> 
<p></p> 
<h2>参考：</h2> 
<p>1 <a href="https://learn.microsoft.com/zh-cn/windows/wsl/tutorials/gui-apps?source=recommendations" rel="nofollow" title="使用 WSL 运行 Linux GUI 应用 | Microsoft Learn">使用 WSL 运行 Linux GUI 应用 | Microsoft Learn</a></p> 
<p>2 </p> 
<p><a href="https://learn.microsoft.com/en-us/windows/wsl/setup/environment" rel="nofollow" title="Set up a WSL development environment | Microsoft Learn">Set up a WSL development environment | Microsoft Learn</a></p> 
<p>3 <a href="https://blog.csdn.net/qq_40793290/article/details/128166792?spm=1001.2101.3001.6650.6&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-6-128166792-blog-106888202.pc_relevant_recovery_v2&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-6-128166792-blog-106888202.pc_relevant_recovery_v2&amp;utm_relevant_index=11" title="(1条消息) win10 WSL2 Ubuntu图像化界面安装和配置_到瑞米法扫拉西的博客-CSDN博客_wsl图像">(1条消息) win10 WSL2 Ubuntu图像化界面安装和配置_到瑞米法扫拉西的博客-CSDN博客_wsl图像</a> </p> 
<p>4 <a href="https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands" rel="nofollow" title="WSL 的基本命令 | Microsoft Learn">WSL 的基本命令 | Microsoft Learn</a></p> 
<p>5  <a href="https://learn.microsoft.com/zh-cn/windows/wsl/tutorials/gui-apps?source=recommendations" rel="nofollow" title="使用 WSL 运行 Linux GUI 应用 | Microsoft Learn">使用 WSL 运行 Linux GUI 应用 | Microsoft Learn</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/660fedf36f71465942ecf50a27a3d087/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Markdown 使用语法（详细）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a66e1fd49429931794565518c77491a7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">专利局专利审查协作湖北中心（笔试&#43;一面&#43;未进复面）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>