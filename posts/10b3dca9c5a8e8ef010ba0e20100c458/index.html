<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【cmake学习】cmake 引入第三方库（头文件目录、库目录、库文件） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【cmake学习】cmake 引入第三方库（头文件目录、库目录、库文件）" />
<meta property="og:description" content="程序的编写需要用到头文件，程序的编译需要lib文件，程序的运行需要dll文件，因此cmake引入第三方库其实就是将include目录、lib目录、bin目录引入工程。
目录
1、find_package（批量引入库文件和头文件）
2、include_directories（引入头文件目录）
3、link_directories（引入库文件目录到当前工程）
4、link_libraries (引入库文件到当前工程)
5、target_link_libraries（引入库文件到子工程）
6、target_include_directories（引入头文件目录到子工程）
1、find_package（批量引入库文件和头文件） find_package 的详细使用：find_package 的详细使用
find_package 需要通过 .cmake 为后缀的文件引入，能够将 .cmake 包含的库和头文件全部引入工程。不同的库的达到的效果不同。有时需要搭配关键字使用：
REQUIRED：必须找到该库，找不到就报错COMPONENTS：从库中找子库（模块）xx，比如COMPONENTS Widget表示找到子模块Widget 以OpenCV库为例，OpenCV库提供的是 OpenCVConfig.cmake文件，只需引入一次，便可以将OpenCV所有的库文件和头文件引入到当前工程。OpenCVConfig.cmake 也给出了详细的说明。
find_package(OpenCV REQUIRED) # OpenCV_INCLUDE_DIRS 是预定义变量，代表OpenCV库的头文件路径 include_directories(${OpenCV_INCLUDE_DIRS}) # OpenCV_LIBS 是预定义变量，代表OpenCV库的lib库文件 target_link_libraries(MY_TARGET_NAME ${OpenCV_LIBS}) 以QT库为例，QT库是一个大型库，内部还包含了许多子库，在引入的时候最好按需引入
# 含义：必须找到Qt5库的子模块Core，找不到就报错 find_package(Qt5 COMPONENTS Core REQUIRED) # 链接时需要加上前缀Qt::(这里是Qt5的库) target_link_libraries(qt_test Qt5::Core ) 注意：无论是上面的Widget，还是Core，都是去掉了前缀Qt5。实际上，Qt的子库名字都是有前缀 &#34;Qt5&#34; 的！只不过在引入的时候，要去掉。
2、include_directories（引入头文件目录） include_directories表示引入头文件搜索路径，当工程要用到某个头文件的时候，就会去该路径下搜索。一般都是在顶层的CmakeList文件中添加搜索路径。
include_directories(完整路径) # 绝对路径引入 include_directories(&#34;D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64\\include&#34;) # 普通变量引入(可以理解为把D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64放入一个集合INCLUDE_PATH) # ${变量名} 可以获取集合内容，允许拼接 set (INCLUDE_PATH D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64) include_directories(${INCLUDE_PATH}/include) # 环境变量引入 # 假设环境变量是INCLUDE_PATH = D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64 # #ENV{环境变量名} 可以获取环境变量的内容，允许拼接 include_directories($ENV{INCLUDE_PATH}/include) 一个cmake总工程可以包含多个子工程，总工程引入的头文件，并不代表子工程就可以用，就好比幼儿园老师（总工程）买来一箱苹果，小朋友（子工程）根据需求拿苹果。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/10b3dca9c5a8e8ef010ba0e20100c458/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-24T21:32:52+08:00" />
<meta property="article:modified_time" content="2023-04-24T21:32:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【cmake学习】cmake 引入第三方库（头文件目录、库目录、库文件）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>程序的编写需要用到头文件，程序的编译需要lib文件，程序的运行需要dll文件，因此cmake引入第三方库其实就是将include目录、lib目录、bin目录引入工程。</p> 
<hr> 
<p id="main-toc"><strong>        目录</strong></p> 
<p id="1%E3%80%81find_package%EF%BC%88%E6%89%B9%E9%87%8F%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E5%92%8C%E5%A4%B4%E6%96%87%E4%BB%B6%EF%BC%89-toc" style="margin-left:40px;"><a href="#1%E3%80%81find_package%EF%BC%88%E6%89%B9%E9%87%8F%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E5%92%8C%E5%A4%B4%E6%96%87%E4%BB%B6%EF%BC%89" rel="nofollow">1、find_package（批量引入库文件和头文件）</a></p> 
<p id="2%E3%80%81include_directories%EF%BC%88%E5%BC%95%E5%85%A5%E5%A4%B4%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%EF%BC%89-toc" style="margin-left:40px;"><a href="#2%E3%80%81include_directories%EF%BC%88%E5%BC%95%E5%85%A5%E5%A4%B4%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%EF%BC%89" rel="nofollow">2、include_directories（引入头文件目录）</a></p> 
<p id="3%E3%80%81link_libraries%EF%BC%88%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%EF%BC%89-toc" style="margin-left:40px;"><a href="#3%E3%80%81link_libraries%EF%BC%88%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%EF%BC%89" rel="nofollow">3、link_directories（引入库文件目录到当前工程）</a></p> 
<p id="4%E3%80%81link_libraries%20(%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E5%88%B0%E5%BD%93%E5%89%8D%E5%B7%A5%E7%A8%8B)-toc" style="margin-left:40px;"><a href="#4%E3%80%81link_libraries%20%28%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E5%88%B0%E5%BD%93%E5%89%8D%E5%B7%A5%E7%A8%8B%29" rel="nofollow">4、link_libraries (引入库文件到当前工程)</a></p> 
<p id="4%E3%80%81target_link_libraries%EF%BC%88%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E5%88%B0%E5%AD%90%E5%B7%A5%E7%A8%8B%EF%BC%89-toc" style="margin-left:40px;"><a href="#4%E3%80%81target_link_libraries%EF%BC%88%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E5%88%B0%E5%AD%90%E5%B7%A5%E7%A8%8B%EF%BC%89" rel="nofollow">5、target_link_libraries（引入库文件到子工程）</a></p> 
<p id="5%E3%80%81target_include_directories-toc" style="margin-left:40px;"><a href="#5%E3%80%81target_include_directories" rel="nofollow">6、target_include_directories（引入头文件目录到子工程）</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="1%E3%80%81find_package%EF%BC%88%E6%89%B9%E9%87%8F%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E5%92%8C%E5%A4%B4%E6%96%87%E4%BB%B6%EF%BC%89">1、find_package（批量引入库文件和头文件）</h3> 
<p>find_package 的详细使用：<a class="link-info" href="https://blog.csdn.net/challenglistic/article/details/130138476?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168232596516800213017590%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=168232596516800213017590&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-3-130138476-null-null.blog_rank_default&amp;utm_term=find&amp;spm=1018.2226.3001.4450" title="find_package 的详细使用">find_package 的详细使用</a></p> 
<p>find_package 需要通过 <span style="color:#4da8ee;">.cmake</span> 为后缀的文件引入，能够将 .cmake 包含的库和头文件全部引入工程。不同的库的达到的效果不同。有时需要搭配关键字使用：</p> 
<ul><li><span style="color:#4da8ee;">REQUIRED</span>：必须找到该库，找不到就报错</li><li><span style="color:#4da8ee;">COMPONENTS</span>：从库中找子库（模块）xx，比如COMPONENTS Widget表示找到子模块Widget</li></ul> 
<p>以OpenCV库为例，OpenCV库提供的是 OpenCVConfig.cmake文件，只需引入一次，便可以将OpenCV所有的库文件和头文件引入到当前工程。OpenCVConfig.cmake 也给出了详细的说明。</p> 
<pre><code class="language-php">find_package(OpenCV REQUIRED)

# OpenCV_INCLUDE_DIRS 是预定义变量，代表OpenCV库的头文件路径
include_directories(${OpenCV_INCLUDE_DIRS}) 

# OpenCV_LIBS 是预定义变量，代表OpenCV库的lib库文件
target_link_libraries(MY_TARGET_NAME ${OpenCV_LIBS})</code></pre> 
<p class="img-center"><img alt="" height="132" src="https://images2.imgbox.com/20/b7/XfriBOoP_o.png" width="347"></p> 
<p>以QT库为例，QT库是一个大型库，内部还包含了许多子库，在引入的时候最好按需引入</p> 
<pre><code class="language-php"># 含义：必须找到Qt5库的子模块Core，找不到就报错
find_package(Qt5 COMPONENTS Core REQUIRED)

# 链接时需要加上前缀Qt::(这里是Qt5的库)
target_link_libraries(qt_test
    Qt5::Core
)</code></pre> 
<p><span style="color:#fe2c24;"><strong>注意：</strong></span>无论是上面的Widget，还是Core，都是去掉了前缀Qt5。实际上，Qt的子库名字都是有前缀 "Qt5" 的！只不过在引入的时候，要去掉。</p> 
<p class="img-center"><img alt="" height="132" src="https://images2.imgbox.com/3b/64/dSC5TzTq_o.png" width="426"></p> 
<p></p> 
<h3 id="2%E3%80%81include_directories%EF%BC%88%E5%BC%95%E5%85%A5%E5%A4%B4%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%EF%BC%89">2、include_directories（引入<span style="color:#fe2c24;">头文件目录</span>）</h3> 
<p>include_directories表示<span style="color:#4da8ee;">引入头文件搜索路径</span>，当工程要用到某个头文件的时候，就会去该路径下搜索。一般都是在顶层的CmakeList文件中添加搜索路径。</p> 
<pre><code class="language-php">include_directories(完整路径)</code></pre> 
<pre><code class="language-php"># 绝对路径引入
include_directories("D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64\\include")

# 普通变量引入(可以理解为把D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64放入一个集合INCLUDE_PATH)
# ${变量名} 可以获取集合内容，允许拼接
set (INCLUDE_PATH D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64)
include_directories(${INCLUDE_PATH}/include)       

# 环境变量引入
# 假设环境变量是INCLUDE_PATH = D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64
# #ENV{环境变量名} 可以获取环境变量的内容，允许拼接
include_directories($ENV{INCLUDE_PATH}/include)</code></pre> 
<p>一个cmake总工程可以包含多个子工程，总工程引入的头文件，并不代表子工程就可以用，就好比幼儿园老师（总工程）买来一箱苹果，小朋友（子工程）根据需求拿苹果。</p> 
<p></p> 
<h3 id="3%E3%80%81link_libraries%EF%BC%88%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%EF%BC%89">3、link_directories（引入<span style="color:#fe2c24;">库目录</span>——添加库文件的搜索路径）</h3> 
<p>link_libraries 表示<span style="color:#4da8ee;">添加第三方 lib 库文件的搜索路径</span>。若工程在编译的时候会需要用到某个第三方库的 lib 文件，此时就可以使用 link_libraries 来添加搜索路径。</p> 
<pre><code class="language-php">link_libraries(完整路径)</code></pre> 
<pre><code class="language-php"># 绝对引入
link_libraries("D:\ProgramFiles\Qt\qt5_7_lib_shared_64\lib")

# 预定义变量引入
# PROJECT_SOURCE_DIR 是cmake的预定义变量，表示顶层CmakeList文件所在路径
link_libraries(${PROJECT_SOURCE_DIR}/ExtLib/ffmpeg/win64/lib)

# 环境变量引入
# 环境变量 QT_LIB = D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64
link_libraries($ENV{QT_LIB}/lib)</code></pre> 
<p></p> 
<h3 id="4%E3%80%81link_libraries%20(%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E5%88%B0%E5%BD%93%E5%89%8D%E5%B7%A5%E7%A8%8B)">4、link_libraries (引入<span style="color:#fe2c24;">库文件</span>)</h3> 
<p>link_libraries 表示将具体的库文件引入到当前工程中，所填入的路径必须是全路径。</p> 
<pre><code class="language-php"># 全路径引入
LINK_LIBRARIES("/opt/MATLAB/R2012a/bin/glnxa64/libeng.so")</code></pre> 
<p></p> 
<h3 id="4%E3%80%81target_link_libraries%EF%BC%88%E5%BC%95%E5%85%A5%E5%BA%93%E6%96%87%E4%BB%B6%E5%88%B0%E5%AD%90%E5%B7%A5%E7%A8%8B%EF%BC%89">5、target_link_libraries（引入<span style="color:#fe2c24;">库文件</span>到子工程）</h3> 
<p>target_link_libraries 表示<span style="color:#4da8ee;">添加第三方 lib 库文件到目标子工程</span>，上面 link_directories 是引入库目录到当前工程，link_libraries 是引入库文件到当前工程，具体是哪个工程并没有指明。就好比，货车把满载的货物运到幼儿园里，但是没分配。</p> 
<p>target_link_libraries 起的作用就是分发工作，分发xx库给指定工程，注意xx库必须是当前工程中有的或者 搜索路径里有的。</p> 
<pre><code class="language-php">target_link_libraries(子工程名 库文件1 库文件2 ...)     # 注意子工程名和库文件名之间以空格隔开</code></pre> 
<pre><code class="language-php">add_executable(qt_test ${ALL_SRCS})    # 子工程名是 qt_test 

# 绝对路径引入
target_link_libraries(qt_test 
    D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64\\lib\\Qt5Core.lib
    D:\\ProgramFiles\\Qt\\qt5_7_lib_shared_64\\lib\\Qt5Gui.lib
)

# 普通变量引入（被打包的lib文件，必须能在搜索路径下找到）
set (LIB_FFMPEG "avcodec.lib" "avdevice.lib" "avfilter.lib")
target_link_libraries(qt_test 
    ${LIB_FFMPEG}
)

# 预定义变量引入
# PROJECT_SOURCE_DIR 是cmake的预定义变量，表示顶层CmakeList文件所在路径
target_link_libraries(qt_test 
    ${PROJECT_SOURCE_DIR}/ExtLib/ffmpeg/win64/lib/avcodec.lib
)</code></pre> 
<p></p> 
<h3 id="5%E3%80%81target_include_directories">6、target_include_directories（引入<span style="color:#fe2c24;">头文件目录</span>到子工程）</h3> 
<p>target_include_directories 达到的效果和 target_link_libraries 是类似的，需要注意的是</p> 
<ul><li><span style="color:#4da8ee;">include_directories</span>：将头文件目录引入到当前工程</li><li><span style="color:#4da8ee;">target_include_directories</span>：将头文件目录针对性的引入到目标子工程（当前工程一般可以包含多个子工程） </li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6d58bc3e0472e2e72bcd1b99ca200950/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring-学习修改尚硅谷最新教程笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/700fb35476f8ed4b4e9690a922ca8496/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">特征图和感受野</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>