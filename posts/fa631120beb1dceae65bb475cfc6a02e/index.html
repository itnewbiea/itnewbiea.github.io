<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python学习笔记之三 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python学习笔记之三" />
<meta property="og:description" content="python中的装饰函数（面向切面编程AOP）
AOP:　主要的功能是：日志记录，性能统计，安全控制，事务处理，异常处理等等。
1、装饰函数简化了函数的调用方式，在没有有装饰函数前，这类函数的调用有点类似于数学中复合函数的调用，如
设y=f(u），u=g(x），f(u)=f[g(x)]
使用装饰器的例子：
def foo(func):
print &#39;i am a decoration&#39;
return func
@foo
def foo1():
print &#39;foo&#39;
2、装饰器可以增加计时逻辑来检测性能
例子（摘自于：http://www.cnblogs.com/huxi/archive/2011/03/01/1967600.html）
#-*- coding: UTF-8 -*- import time def foo(): print &#39;in foo()&#39; # 定义一个计时器，传入一个，并返回另一个附加了计时功能的方法 def timeit(func): # 定义一个内嵌的包装函数，给传入的函数加上计时功能的包装 def wrapper(): start = time.clock() func() end =time.clock() print &#39;used:&#39;, end - start # 将包装后的函数返回 return wrapper foo = timeit(foo) foo() 注释：其中func是一个全局变量，自己认为在用到装饰函数时，这个func是默认的参数，代表了函数的参数也是一个函数 eg： &gt;&gt;&gt; def foo(x): ... print &#39;i am a decoration&#39; ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/fa631120beb1dceae65bb475cfc6a02e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-11-21T17:37:45+08:00" />
<meta property="article:modified_time" content="2012-11-21T17:37:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python学习笔记之三</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-family:Microsoft YaHei; font-size:18px">python中的装饰函数（面向切面编程AOP）</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">AOP:　主要的功能是：日志记录，性能统计，安全控制，事务处理，异常处理等等。</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">     1、装饰函数简化了函数的调用方式，在没有有装饰函数前，这类函数的调用有点类似于数学中复合函数的调用，如</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">设<em>y</em>=<em>f</em>(<em>u</em>），<em>u</em>=<em>g</em>(<em>x</em>），<em>f</em>(<em>u</em>)=<em>f</em>[<em>g</em>(<em>x</em>)]</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">     使用装饰器的例子：</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">     def  foo(func):</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">           print 'i am  a decoration'</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">           return func</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">    @foo</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">    def  foo1():</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">          print 'foo'</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">    2、装饰器可以增加计时逻辑来检测性能</span></p> 
<p><span style="font-family:微软雅黑; font-size:18px">         例子（摘自于：<a href="http://www.cnblogs.com/huxi/archive/2011/03/01/1967600.html" rel="nofollow">http://www.cnblogs.com/huxi/archive/2011/03/01/1967600.html</a>）</span></p> 
<p><span style="font-family:微软雅黑"><span style="font-size:18px">         </span></span></p> 
<blockquote dir="ltr" style="margin-right:0px"> 
 <div class="line number1 index0 alt2" align="left"> 
  <code class="py comments"><span style="font-family:Microsoft YaHei; font-size:18px">#-*- coding: UTF-8 -*- </span></code> 
 </div> 
 <div class="line number2 index1 alt1" align="left"> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py keyword">import</code> <code class="py plain">time </code></span></span> 
 </div> 
 <div class="line number3 index2 alt2" align="left"> 
  <code class="py spaces"><span style="font-family:Microsoft YaHei; font-size:18px"></span></code> 
 </div> 
 <div class="line number4 index3 alt1" align="left"> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py keyword">def</code> <code class="py plain">foo(): </code></span></span> 
 </div> 
 <div class="line number5 index4 alt2" align="left"> 
  <code class="py spaces"></code> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py functions">print</code> <code class="py string">'in foo()'</code></span></span> 
 </div> 
 <div class="line number6 index5 alt1" align="left"> 
  <code class="py spaces"><span style="font-family:Microsoft YaHei; font-size:18px"></span></code> 
 </div> 
 <div class="line number7 index6 alt2" align="left"> 
  <code class="py comments"><span style="font-family:Microsoft YaHei; font-size:18px"># 定义一个计时器，传入一个，并返回另一个附加了计时功能的方法 </span></code> 
 </div> 
 <div class="line number8 index7 alt1" align="left"> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py keyword">def</code> <code class="py plain">timeit(func): </code></span></span> 
 </div> 
 <div class="line number9 index8 alt2" align="left"> 
  <code class="py spaces"><span style="font-family:Microsoft YaHei; font-size:18px"></span></code> 
 </div> 
 <div class="line number10 index9 alt1" align="left"> 
  <code class="py spaces"></code> 
  <code class="py comments"><span style="font-family:Microsoft YaHei; font-size:18px"># 定义一个内嵌的包装函数，给传入的函数加上计时功能的包装 </span></code> 
 </div> 
 <div class="line number11 index10 alt2" align="left"> 
  <code class="py spaces"></code> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py keyword">def</code> <code class="py plain">wrapper(): </code></span></span> 
 </div> 
 <div class="line number12 index11 alt1" align="left"> 
  <code class="py spaces"></code> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py plain">start </code><code class="py keyword">=</code> <code class="py plain">time.clock() </code> </span></span> 
 </div> 
 <div class="line number13 index12 alt2" align="left"> 
  <code class="py spaces"></code> 
  <code class="py plain"><span style="font-family:Microsoft YaHei; font-size:18px">func() </span></code> 
 </div> 
 <div class="line number14 index13 alt1" align="left"> 
  <code class="py spaces"></code> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py plain">end </code><code class="py keyword">=</code><code class="py plain">time.clock() </code> </span></span> 
 </div> 
 <div class="line number15 index14 alt2" align="left"> 
  <code class="py spaces"></code> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py functions">print</code> <code class="py string">'used:'</code><code class="py plain">, end </code><code class="py keyword">-</code> <code class="py plain">start </code></span></span> 
 </div> 
 <div class="line number16 index15 alt1" align="left"> 
  <code class="py spaces"><span style="font-family:Microsoft YaHei; font-size:18px"></span></code> 
 </div> 
 <div class="line number17 index16 alt2" align="left"> 
  <code class="py spaces"></code> 
  <code class="py comments"><span style="font-family:Microsoft YaHei; font-size:18px"># 将包装后的函数返回 </span></code> 
 </div> 
 <div class="line number18 index17 alt1" align="left"> 
  <code class="py spaces"></code> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py keyword">return</code> <code class="py plain">wrapper </code></span></span> 
 </div> 
 <div class="line number19 index18 alt2" align="left"> 
  <code class="py spaces"><span style="font-family:Microsoft YaHei; font-size:18px"></span></code> 
 </div> 
 <div class="line number20 index19 alt1" align="left"> 
  <span style="font-size:18px"><span style="font-family:Microsoft YaHei"><code class="py plain">foo </code><code class="py keyword">=</code> <code class="py plain">timeit(foo) </code> </span></span> 
 </div> 
 <div class="line number21 index20 alt2" align="left"> 
  <code class="py plain"><span style="font-family:Microsoft YaHei; font-size:18px">foo()</span></code> 
 </div> 
 <div class="line number21 index20 alt2" align="left"> 
  <span style="font-size:18px"><code class="py plain"><span style="font-family:微软雅黑">注释：其中<span style="font-family:微软雅黑">func</span></span></code>是一个全局变量，自己认为在用到装饰函数时，这个func是默认的参数，代表了函数的参数也是一个函数</span> 
 </div> 
 <div class="line number21 index20 alt2" align="left">
   eg： 
 </div> 
 <div class="line number21 index20 alt2" align="left">
   &gt;&gt;&gt; def foo(x): 
  <br> ...   print 'i am  a decoration' 
  <br> ...   return func 
  <br> ...   
  <br> &gt;&gt;&gt; @foo 
  <br> ... def  foo1(): 
  <br> ...   print 'foo' 
  <br> ...   
  <br> i am  a decoration 
  <br> Traceback (most recent call last): 
  <br>   File "&lt;interactive input&gt;", line 1, in &lt;module&gt; 
  <br>   File "&lt;interactive input&gt;", line 3, in foo 
  <br> NameError: global name 'func' is not defined 
 </div> 
</blockquote> 
<p><span style="font-family:微软雅黑; font-size:18px"></span> </p> 
<p><span style="font-family:微软雅黑; font-size:18px">       </span></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/695535c02842243a48b4c5540a5c0cc6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C#获取网页内容的三种方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a83729dff48e974f64e55dce178a5fe4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ORA-06512 DBMS_LOB.LOADCLOBFROMFILE处理经验</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>