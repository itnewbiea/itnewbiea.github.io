<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在JavaScript中利用for(…in…)语句实现反射 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在JavaScript中利用for(…in…)语句实现反射" />
<meta property="og:description" content="什么是反射机制
反射机制指的是程序在运行时能够获取自身的信息。例如一个对象能够在运行时知道自己有哪些方法和属性。
在JavaScript中利用for(…in…)语句实现反射
在JavaScript中有一个很方便的语法来实现反射，即for(…in…)语句，其语法如下：
for(var p in obj){
//语句
}
这里var p表示声明的一个变量，用以存储对象obj的属性（方法）名称，有了对象名和属性（方法）名，就可以使用方括号语法来调用一个对象的属性（方法）：
for(var p in obj){
if(typeof(obj[p]==&#34;function&#34;){
obj[p]();
}else{
alert(obj[p]);
}
}
这段语句遍历obj对象的所有属性和方法，遇到属性则弹出它的值，遇到方法则立刻执行。在后面可以看到，在面向对象的JavaScript程序设计中，反射机制是很重要的一种技术，它在实现类的继承中发挥了很大的作用。
使用反射来传递样式参数
在Ajax编程中，经常要能动态的改变界面元素的样式，这可以通过对象的style属性来改变，比如要改变背景色为红色，可以这样写：
element.style.backgroundColor=&#34;#ff0000&#34;;
其中style对象有很多属性，基本上CSS里拥有的属性在JavaScript中都能够使用。如果一个函数接收参数用用指定一个界面元素的样式，显然一个或几个参数是不能符合要求的，下面是一种实现：
function setStyle(_style){
//得到要改变样式的界面对象
var element=getElement();
element.style=_style;
}
这样，直接将整个style对象作为参数传递了进来，一个style对象可能的形式是：
var style={
color:#ffffff,
backgroundColor:#ff0000,
borderWidth:2px
}
这时可以这样调用函数：
setStyle(style);
或者直接写为：
setStyle({ color:#ffffff,backgroundColor:#ff0000,borderWidth:2px});
这段代码看上去没有任何问题，但实际上，在setStyle函数内部使用参数_style为element.style赋值时，如果element原先已经有了一定的样式，例如曾经执行过：
element.style.height=&#34;20px&#34;;
而_style中却没有包括对height的定义，因此element的height样式就丢失了，不是最初所要的结果。要解决这个问题，可以用反射机制来重写setStyle函数：
function setStyle(_style){
//得到要改变样式的界面对象
var element=getElement();
for(var p in _style){
element.style[p]=_style[p];
}
}
程序中遍历_style的每个属性，得到属性名称，然后再使用方括号语法将element.style中的对应的属性赋值为_style中的相应属性的值。从而，element中仅改变指定的样式，而其他样式不会改变，得到了所要的结果。
注:这样就能实现修改我们想要修改的信息,不需要的就和原来一样不改变" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/ef70fe233023e2cea27e6998892b33d8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2007-06-07T14:35:00+08:00" />
<meta property="article:modified_time" content="2007-06-07T14:35:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在JavaScript中利用for(…in…)语句实现反射</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="postbody"> 
 <p><font face="Courier New"><strong><font size="4">什么是反射机制<br></font></strong><font size="2">反射机制指的是程序在运行时能够获取自身的信息。例如一个对象能够在运行时知道自己有哪些方法和属性。</font></font></p> 
 <p><strong><font face="Courier New" size="4">在JavaScript中利用for(…in…)语句实现反射<br></font></strong><font face="Courier New"><font size="2">在JavaScript中有一个很方便的语法来实现反射，即for(…in…)语句，其语法如下：<br>for(var p in obj){<!-- --><br>      //语句<br>}<br>这里var p表示声明的一个变量，用以存储对象obj的属性（方法）名称，有了对象名和属性（方法）名，就可以使用方括号语法来调用一个对象的属性（方法）：<br>for(var p in obj){<!-- --><br>      if(typeof(obj[p]=="function"){<!-- --><br>             obj[p]();<br>      }else{<!-- --><br>             alert(obj[p]);<br>      }<br>}<br>这段语句遍历obj对象的所有属性和方法，遇到属性则弹出它的值，遇到方法则立刻执行。在后面可以看到，在面向对象的JavaScript程序设计中，反射机制是很重要的一种技术，它在实现类的继承中发挥了很大的作用。</font><br><br></font><strong><font face="Courier New" size="4">使用反射来传递样式参数<br></font></strong><font face="Courier New"><font size="2">在Ajax编程中，经常要能动态的改变界面元素的样式，这可以通过对象的style属性来改变，比如要改变背景色为红色，可以这样写：<br>element.style.backgroundColor="#ff0000";<br>其中style对象有很多属性，基本上CSS里拥有的属性在JavaScript中都能够使用。如果一个函数接收参数用用指定一个界面元素的样式，显然一个或几个参数是不能符合要求的，下面是一种实现：<br>function setStyle(_style){<!-- --><br>      //得到要改变样式的界面对象<br>      var element=getElement();<br>      element.style=_style;<br>}<br>这样，直接将整个style对象作为参数传递了进来，一个style对象可能的形式是：<br>var style={<!-- --><br>      color:#ffffff,<br>      backgroundColor:#ff0000,<br>      borderWidth:2px<br>}<br>这时可以这样调用函数：<br>setStyle(style);<br>或者直接写为：<br>setStyle({ color:#ffffff,backgroundColor:#ff0000,borderWidth:2px});<br>这段代码看上去没有任何问题，但实际上，在setStyle函数内部使用参数_style为element.style赋值时，如果element原先已经有了一定的样式，例如曾经执行过：<br>element.style.height="20px";<br>而_style中却没有包括对height的定义，因此element的height样式就丢失了，不是最初所要的结果。要解决这个问题，可以用反射机制来重写setStyle函数：<br>function setStyle(_style){<!-- --><br>      //得到要改变样式的界面对象<br>      var element=getElement();<br>      for(var p in _style){<!-- --><br>            element.style[p]=_style[p];<br>      }<br>}<br>程序中遍历_style的每个属性，得到属性名称，然后再使用方括号语法将element.style中的对应的属性赋值为_style中的相应属性的值。从而，element中仅改变指定的样式，而其他样式不会改变，得到了所要的结果。</font></font></p> 
 <p><font face="Courier New" size="2"></font></p> 
 <p><font face="Courier New" size="2">注:这样就能实现修改我们想要修改的信息,不需要的就和原来一样不改变</font></p> 
</div>  
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c1dd84400c8164a9ddf930dc4308f0d7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Servlet入门1——第一個Servlet程式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fa28614ec55c26273a0b5e1a21a508dc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2个程序(一个用glue,一个直接连接xpcom)用了NS_GetServiceManager全部死掉,SIGSEGV的原因</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>