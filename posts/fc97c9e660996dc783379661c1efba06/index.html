<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL中的NULL值问题 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL中的NULL值问题" />
<meta property="og:description" content="NULL值的含义 在MySQL中，NULL是一个特殊值，表示字段没有数据。当一列被定义为可包含NULL时（即没有设置NOT NULL约束），确切的存储需求取决于使用的存储引擎和行格式。
对于大多数存储引擎（例如InnoDB），NULL值通常不会存储任何实际的数据，但每个可为NULL的列都需要一些额外的空间来记录其NULL状态。这通常是通过NULL位图来完成的，即在表的每一行内部都有一个位图，每个可为NULL的列由该位图中的一个位来表示。如果列的值为NULL，则相应的位被置为1（或者根据具体实现可能是0）；如果列有值，则置为另一个值。
InnoDB存储引擎：在InnoDB里，与NULL相关的开销主要是行记录中的NULL位图。例如，如果您有8个可为NULL的列，那么至少需要1个字节来存储这些列的NULL标志位，不管这些列是否实际包含NULL值。MyISAM存储引擎：MyISAM使用不同的数据组织方式，但也同样会有用于存储NULL状态的位图。 NULL值的查询和比较 在SQL中，NULL值在与任何其他值进行比较时永远不会返回真值，即使是与NULL本身比较也如此。包含NULL的表达式总会得出NULL值，除非特定操作符和函数的文档中有其他说明。例如，在下面的查询中所有列都会返回NULL：
mysql&gt; SELECT NULL, 1&#43;NULL, CONCAT(&#39;Invisible&#39;,NULL); 搜索列值中的NULL，不能使用expr = NULL的方式查询。以下语句不会返回任何行，因为expr = NULL对于任何表达式来说都不会为真；
mysql&gt; SELECT * FROM my_table WHERE phone = NULL; 要查询NULL值，必须使用IS NULL。下面的语句展示了如何找到NULL的电话号码和空的电话号码：
mysql&gt; SELECT * FROM my_table WHERE phone IS NULL; mysql&gt; SELECT * FROM my_table WHERE phone = &#39;&#39;; 在进行数学比较时，不能使用=, &lt;, 或 &lt;&gt;等算术比较运算符来和NULL值比较。比较结果均是null值，例如：
mysql&gt; SELECT 1 = NULL, 1 &lt;&gt; NULL, 1 &lt; NULL, 1 &gt; NULL; &#43;----------&#43;-----------&#43;----------&#43;----------&#43; | 1 = NULL | 1 &lt;&gt; NULL | 1 &lt; NULL | 1 &gt; NULL | &#43;----------&#43;-----------&#43;----------&#43;----------&#43; | NULL | NULL | NULL | NULL | &#43;----------&#43;-----------&#43;----------&#43;----------&#43; 在SQL中，NULL永远不会在比较中返回true，即使与NULL自身比较也不例外。所有包含NULL的表达式都将产生NULL值，除非文档中对涉及的操作符和函数有特别说明。例如，聚合函数（如COUNT()、MIN()和SUM()）在计算时会忽略NULL值，只有COUNT(*)则会统计包括那些具有NULL值的行。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/fc97c9e660996dc783379661c1efba06/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T12:02:02+08:00" />
<meta property="article:modified_time" content="2024-01-03T12:02:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL中的NULL值问题</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><code>NULL值的含义</code></h3> 
<p>在MySQL中，<code>NULL</code>是一个特殊值，表示字段没有数据。当一列被定义为可包含<code>NULL</code>时（即没有设置<code>NOT NULL</code>约束），确切的存储需求取决于使用的存储引擎和行格式。</p> 
<p>对于大多数存储引擎（例如InnoDB），<code>NULL</code>值通常不会存储任何实际的数据，但每个可为<code>NULL</code>的列都需要一些额外的空间来记录其<code>NULL</code>状态。这通常是通过NULL位图来完成的，即在表的每一行内部都有一个位图，每个可为<code>NULL</code>的列由该位图中的一个位来表示。如果列的值为<code>NULL</code>，则相应的位被置为1（或者根据具体实现可能是0）；如果列有值，则置为另一个值。</p> 
<ul><li><strong>InnoDB存储引擎</strong>：在InnoDB里，与<code>NULL</code>相关的开销主要是行记录中的NULL位图。例如，如果您有8个可为<code>NULL</code>的列，那么至少需要1个字节来存储这些列的<code>NULL</code>标志位，不管这些列是否实际包含<code>NULL</code>值。</li><li><strong>MyISAM存储引擎</strong>：MyISAM使用不同的数据组织方式，但也同样会有用于存储<code>NULL</code>状态的位图。</li></ul> 
<h3>NULL值的查询和比较</h3> 
<p>在SQL中，NULL值在与任何其他值进行比较时永远不会返回真值，即使是与NULL本身比较也如此。包含NULL的表达式总会得出NULL值，除非特定操作符和函数的文档中有其他说明。例如，在下面的查询中所有列都会返回NULL：</p> 
<pre><code class="language-sql">mysql&gt; SELECT NULL, 1+NULL, CONCAT('Invisible',NULL);</code></pre> 
<p>搜索列值中的NULL，不能使用<code>expr = NULL</code>的方式查询。以下语句不会返回任何行，因为<code>expr = NULL</code>对于任何表达式来说都不会为真；</p> 
<pre><code class="language-sql">mysql&gt; SELECT * FROM my_table WHERE phone = NULL;</code></pre> 
<p>要查询NULL值，必须使用<code>IS NULL</code>。下面的语句展示了如何找到NULL的电话号码和空的电话号码：</p> 
<pre><code class="language-sql">mysql&gt; SELECT * FROM my_table WHERE phone IS NULL;
mysql&gt; SELECT * FROM my_table WHERE phone = '';</code></pre> 
<p>在进行数学比较时，不能使用<code>=</code>, <code>&lt;</code>, 或 <code>&lt;&gt;</code>等算术比较运算符来和NULL值比较。比较结果均是null值，例如：</p> 
<pre><code class="language-sql">mysql&gt; SELECT 1 = NULL, 1 &lt;&gt; NULL, 1 &lt; NULL, 1 &gt; NULL;
+----------+-----------+----------+----------+
| 1 = NULL | 1 &lt;&gt; NULL | 1 &lt; NULL | 1 &gt; NULL |
+----------+-----------+----------+----------+
|     NULL |      NULL |     NULL |     NULL |
+----------+-----------+----------+----------+</code></pre> 
<p>在SQL中，NULL永远不会在比较中返回true，即使与NULL自身比较也不例外。所有包含NULL的表达式都将产生NULL值，除非文档中对涉及的操作符和函数有特别说明。例如，聚合函数（如COUNT()、MIN()和SUM()）在计算时会忽略NULL值，只有<code>COUNT(*)</code>则会统计包括那些具有NULL值的行。</p> 
<h3>插入NULL值</h3> 
<p>许多初学者常常误将NULL与空字符串<code>''</code>混淆。但实际上，它们代表的含义完全不同。以下两个INSERT语句清楚地展示了这一区别：</p> 
<pre><code class="language-sql">mysql&gt; INSERT INTO my_table (phone) VALUES (NULL);
mysql&gt; INSERT INTO my_table (phone) VALUES ('');</code></pre> 
<p>第一个语句表示电话号码未知，而第二个则表示该人确实没有电话号码。</p> 
<h3>SQL中GROUP BY、ORDER BY对NULL值的处理</h3> 
<ul><li>当使用<code>DISTINCT</code>、<code>GROUP BY</code>或<code>ORDER BY</code>时，所有NULL值被视为相等。</li><li>在使用<code>ORDER BY</code>时，NULL值默认会排在最前面，或者如果指定<code>DESC</code>降序排序，则会排在最后。</li></ul> 
<h3>NULL对索引的影响</h3> 
<ol><li> <p><strong>单列索引</strong>：在单列索引中，如果该列包含多个 <code>NULL</code> 值，MySQL 会将这些 <code>NULL</code> 值都视为相同，并且在索引中为它们创建一个条目。这意味着，即便表中有多行具有 <code>NULL</code> 值，索引结构中通常只需要一个条目来表示所有的 <code>NULL</code>。</p> </li><li> <p><strong>复合索引</strong>：当一个索引涵盖多个列时（即复合索引），如果其中一列为 <code>NULL</code>，那么这一组合（包括 <code>NULL</code>）仍然会被索引。但是，由于索引条目是按列组合创建的，所以每个包含 <code>NULL</code> 的不同组合都会被分别索引。</p> </li><li> <p><strong>索引搜索</strong>：在执行等值查询时，你可以搜索 <code>NULL</code> 值，例如 <code>WHERE column IS NULL</code>。MySQL 会使用索引来快速找到 <code>NULL</code> 值的位置。然而，要注意的是 <code>NULL</code> 不等同于空字符串或零；它被认为是一个特殊的“不存在”的值。</p> </li><li> <p><strong>排序和分组</strong>：在使用 <code>ORDER BY</code> 或 <code>GROUP BY</code> 子句时，<code>NULL</code> 值通常会被视作低于任何其他的非空值，并且在默认情况下会出现在结果集的开始部分（当使用升序排列时）。</p> </li><li> <p><strong>唯一索引</strong>：在具有唯一约束的索引中，<code>NULL</code> 值被视作不同于彼此的，也就是说，在满足唯一性约束的前提下，你可以有多行包含 <code>NULL</code> 值。这与某些其他数据库系统（如 SQL Server）不同，在那里唯一索引通常不允许多个 <code>NULL</code> 值。</p> </li></ol> 
<h3></h3> 
<p></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/eefcd6e372f79c5ed9b471e967ca3000/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【LeetCode:11. 盛最多水的容器 | 双指针】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/15f61c57177f42cbe2f8ac1f90d9e9fd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何在群晖7.2中运行WPS Office镜像容器并使用固定地址公网访问</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>