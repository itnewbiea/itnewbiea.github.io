<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>App应用程序的退出 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="App应用程序的退出" />
<meta property="og:description" content="ActivityManager public List&lt;ActivityManager.AppTask&gt; getAppTasks () Added in API level 21 Get the list of tasks associated with the calling application.
Returns The list of tasks associated with the application making this call. ================================================================ ActivityManager.AppTask（Added in API level 21） public void finishAndRemoveTask () Added in API level 21 Finishes all activities in this task and removes it from the recent tasks list.
所以下面的方法，可以销毁当前应用所有Activity并且将此任务从最近任务列表中移除。 List&lt;AppTask&gt; appTasks = mActivityManager.getAppTasks(); for (AppTask at : appTasks) { at." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/af25a81e751d0c68be868f498c40c6aa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-03-09T17:02:05+08:00" />
<meta property="article:modified_time" content="2017-03-09T17:02:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">App应用程序的退出</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<h2 style="color:rgb(51,51,51); font-size:34px; margin:0px; padding:0px 0px 6px; font-weight:300; line-height:30px; font-family:Roboto,sans-serif; background-color:rgb(249,249,249)"> ActivityManager</h2> 
<p></p> 
<p></p> 
<h5 class="jd-details-title" style="line-height:21px; font-size:1.15em; margin:1.5em 0px 0.6em; font-weight:500; padding:3px 95px 3px 3px; color:rgb(34,34,34); font-family:Roboto,sans-serif; background-color:rgb(226,226,226)"> <span class="normal">public <a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none">List</a>&lt;<a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none">ActivityManager.AppTask</a>&gt; </span><span class="sympad" style="margin-right:2px">getAppTasks</span> <span class="normal">()</span></h5> 
<div class="api-level" style="font-size:0.8em; color:rgb(153,153,153); float:right; padding:0px 8px; margin-top:-30px; font-family:Roboto,sans-serif; line-height:19px; background-color:rgb(249,249,249)">
  Added in  
 <a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none">API level 21</a> 
</div> 
<div class="jd-details-descr" style="padding:0px; margin:0.5em 0.25em; color:rgb(34,34,34); font-family:Roboto,sans-serif; font-size:14px; line-height:19px; background-color:rgb(249,249,249)"> 
 <div class="jd-tagdata jd-tagdescr" style="margin:0.25em 0px 0.75em"> 
  <p style="margin-top:0px; margin-bottom:1em; margin-left:1em">Get the list of tasks associated with the calling application.</p> 
 </div> 
 <div class="jd-tagdata" style="margin:0.5em 1em"> 
  <h6 class="jd-tagtitle" style="font-size:1em; margin:0px 0px 0.25em">Returns</h6> 
  <ul class="nolist" style="margin:0px 0px 15px; padding:0px; list-style:none"><li style="margin:0px 0px 5px">The list of tasks associated with the application making this call.</li></ul> 
 </div> 
</div> ================================================================ 
<p></p> 
<p></p> 
<h2 style="color:rgb(51,51,51); margin:0px; padding:0px 0px 6px; font-weight:300; line-height:30px; font-family:Roboto,sans-serif; background-color:rgb(249,249,249)"> <span style="font-size:34px">ActivityManager.AppTask</span><span style="font-size:14px">（<span style="color:rgb(153,153,153); font-family:Roboto,sans-serif; line-height:19px; background-color:rgb(249,249,249)">Added in </span><a target="_blank" rel="nofollow" style="font-family:Roboto,sans-serif; line-height:19px; color:rgb(37,138,175); text-decoration:none">API level 21</a>）</span></h2> 
<h5 class="jd-details-title" style="line-height:21px; font-size:1.15em; margin:1.5em 0px 0.6em; font-weight:500; padding:3px 95px 3px 3px; color:rgb(34,34,34); font-family:Roboto,sans-serif; background-color:rgb(226,226,226)"> <span class="normal">public void </span><span class="sympad" style="margin-right:2px">finishAndRemoveTask</span> <span class="normal">()</span></h5> 
<div class="api-level" style="font-size:0.8em; color:rgb(153,153,153); float:right; padding:0px 8px; margin-top:-30px; font-family:Roboto,sans-serif; line-height:19px; background-color:rgb(249,249,249)">
  Added in  
 <a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none">API level 21</a> 
</div> 
<div class="jd-details-descr" style="padding:0px; margin:0.5em 0.25em; color:rgb(34,34,34); font-family:Roboto,sans-serif; font-size:14px; line-height:19px; background-color:rgb(249,249,249)"> 
 <div class="jd-tagdata jd-tagdescr" style="margin:0.25em 0px 0.75em"> 
  <p style="margin-top:0px; margin-bottom:1em; margin-left:1em">Finishes all activities in this task and removes it from the recent tasks list.</p> 
 </div> 
</div> 
<span style="font-size:18px"></span> 
<p></p> 
<p><span style="font-size:18px"><br> </span></p> 所以下面的方法，可以销毁当前应用所有Activity并且将此任务从最近任务列表中移除。 
<p></p> 
<pre><code class="language-java">List&lt;AppTask&gt; appTasks = mActivityManager.getAppTasks();
for (AppTask at : appTasks) {
	at.finishAndRemoveTask();
}</code></pre> 
<p></p> 
<p><span style="font-size:18px">请注意，以上API是在API21 新引入的，21以下版本将不能使用。</span></p> 
<p><span style="font-size:18px"><br> </span></p> 
<p><span style="font-size:18px"></span></p> 
<h2 style="color:rgb(51,51,51); font-size:34px; margin:0px; padding:0px 0px 6px; font-weight:300; line-height:30px; font-family:Roboto,sans-serif; background-color:rgb(249,249,249)"> Application</h2> 
<h5 class="jd-details-title" style="line-height:21px; font-size:1.15em; margin:1.5em 0px 0.6em; font-weight:500; padding:3px 95px 3px 3px; color:rgb(34,34,34); font-family:Roboto,sans-serif; background-color:rgb(226,226,226)"> <span class="normal">public void </span><span class="sympad" style="margin-right:2px">registerActivityLifecycleCallbacks</span> <span class="normal">(<a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none">Application.ActivityLifecycleCallbacks</a> callback)</span></h5> 
<div class="api-level" style="font-size:0.8em; color:rgb(153,153,153); float:right; padding:0px 8px; margin-top:-30px; font-family:Roboto,sans-serif; line-height:19px; background-color:rgb(249,249,249)">
  Added in  
 <a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none">API level 14</a> 
</div> 
<h2 style="color:rgb(51,51,51); font-size:34px; margin:0px; padding:0px 0px 6px; font-weight:300; line-height:30px; font-family:Roboto,sans-serif; background-color:rgb(249,249,249)"> Application.ActivityLifecycleCallbacks</h2> 
<table id="pubmethods" class="jd-sumtable        " style="font-size:14px; margin:0.5em 1em 1em 0px; border-collapse:collapse; border-spacing:0px; border:0px; width:1419px; color:rgb(34,34,34); font-family:Roboto,sans-serif; line-height:19px; background-color:rgb(247,247,247)"><tbody><tr class="alt-color api apilevel-14"><td class="jd-typecol" style="padding:4px 12px; vertical-align:top; text-align:right; border:1px solid rgb(221,221,221); background-color:inherit"> 
    
      abstract void 
    </td><td class="jd-linkcol" width="100%" style="padding:4px 12px; vertical-align:top; border:1px solid rgb(221,221,221); background-color:inherit"> 
     
     <span class="sympad" style="margin-right:2px"><a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none; margin-bottom:0px">onActivityCreated</a></span>( 
     <a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none">Activity</a> activity,  
     <a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none; margin-bottom:0px">Bundle</a> savedInstanceState) 
    </td></tr><tr class=" api apilevel-14"><td class="jd-typecol" style="padding:4px 12px; vertical-align:top; text-align:right; border:1px solid rgb(221,221,221); background-color:inherit"> 
    
      abstract void 
    </td><td class="jd-linkcol" width="100%" style="padding:4px 12px; vertical-align:top; border:1px solid rgb(221,221,221); background-color:inherit"> 
     
     <span class="sympad" style="margin-right:2px"><a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none; margin-bottom:0px">onActivityDestroyed</a></span>( 
     <a target="_blank" rel="nofollow" style="color:rgb(37,138,175); text-decoration:none; margin-bottom:0px">Activity</a> activity) 
    </td></tr></tbody></table> 
<p></p> 
<p><span style="font-size:18px">在<span style="font-size:18px">API21 以下可以用Application注册Activity生命周期回调，进行Activity管理。</span></span></p> 
<p><span style="font-size:18px"><span style="font-size:18px"></span></span></p> 
<pre><code class="language-java">private static List&lt;Activity&gt; activities = new ArrayList&lt;Activity&gt;();</code></pre> 
<pre><code class="language-java">@Override
public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
	if(!activity.isChild()){
		activities.add(activity);
        }
}
</code></pre> 
<pre><code class="language-java">@Override
public void onActivityDestroyed(Activity activity) {
    if(!activity.isChild()){
        activities.remove(activity);
    }
}
</code></pre> 
<br> 结合 
<a target="_blank" href="http://www.cnblogs.com/zhujiabin/p/5674982.html" rel="nofollow noopener noreferrer"> http://www.cnblogs.com/zhujiabin/p/5674982.html</a> 可以较好的实现App应用程序的退出。 
<p></p> 
<br> 
<br>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f68bf4ea741117fd60972ba2cf3940b0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">混合app开发介绍---入门级</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/37181e87d85eabd3d65e0efefc48902e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">21世纪有关计算机领域的十二个重大难题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>