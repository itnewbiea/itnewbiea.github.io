<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JSON数据序列化 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JSON数据序列化" />
<meta property="og:description" content="json介绍 Json是一种轻量级的数据交换格式（也叫数据序列化方式）。Json采用完全独立于编程语言的文本格式来存储和表示数据。简洁和清晰的层次结构使得 Json 成为理想的数据交换语言。 易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。
json的优点 语法直观；所有代码由一个json.hpp头文件组成，不存在子项目、依赖关系、复杂的构建系统，使用起来方便；使用C&#43;&#43;11标准编写；类似STL容器，可以直接调用，可以和STL容器之间相互转换； 常用的数据传输序列化 XML： 数据具有层次结构，可以被大多数编程语言使用，使用XML获取XML文档，接数据解析出来复制给变量。JSON：json更加简短，读写速度快，占用带宽小，可以使用数组，解析起来比XML更容易，与XML相比，最大的不同是XML 需要使用 XML 解析器来解析，JSON 可以使用标准的 JavaScript 函数来解析。ProtoBuf：通常使用在公司级别的项目中，大量使用ProtoBuf作为数据序列化的方式，占用带宽比以上两种方式小，但是使用起来比JSON复杂，所以通常在项目中选择使用json格式来打包传输数据。 调用JSON头文件 #include &#34;json.hpp&#34; using json = nlohmann::json; JSON数据序列化 把想要打包的数据或对象直接处理成JSON字符串。可以分为两种：
普通数据序列化 json js; // 添加数组 js[&#34;id&#34;] = {1,2,3,4,5}; // 添加key-value js[&#34;name&#34;] = &#34;zhang san&#34;; // 添加对象 js[&#34;msg&#34;][&#34;zhang san&#34;] = &#34;hello world&#34;; js[&#34;msg&#34;][&#34;liu shuo&#34;] = &#34;hello china&#34;; // 上面等同于下面这句一次性添加数组对象 js[&#34;msg&#34;] = {{&#34;zhang san&#34;, &#34;hello world&#34;}, {&#34;liu shuo&#34;, &#34;hello china&#34;}}; cout &lt;&lt; js &lt;&lt; endl; 容器序列化 json js; // 直接序列化一个vector容器 vector&lt;int&gt; vec; vec." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/4df85d1a52295a0397660fdc18914810/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-12T19:41:17+08:00" />
<meta property="article:modified_time" content="2023-06-12T19:41:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JSON数据序列化</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="json_0"></a>json介绍</h2> 
<p>Json是一种轻量级的数据交换格式（也叫数据序列化方式）。Json采用完全独立于编程语言的文本格式来存储和表示数据。简洁和清晰的层次结构使得 Json 成为理想的数据交换语言。 易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。</p> 
<h3><a id="json_2"></a>json的优点</h3> 
<ol><li>语法直观；</li><li>所有代码由一个json.hpp头文件组成，不存在子项目、依赖关系、复杂的构建系统，使用起来方便；</li><li>使用C++11标准编写；</li><li>类似STL容器，可以直接调用，可以和STL容器之间相互转换；</li></ol> 
<h3><a id="_7"></a>常用的数据传输序列化</h3> 
<ol><li>XML： 数据具有层次结构，可以被大多数编程语言使用，使用XML获取XML文档，接数据解析出来复制给变量。</li><li>JSON：json更加简短，读写速度快，占用带宽小，可以使用数组，解析起来比XML更容易，与XML相比，最大的不同是XML 需要使用 XML 解析器来解析，JSON 可以使用标准的 JavaScript 函数来解析。</li><li>ProtoBuf：通常使用在公司级别的项目中，大量使用ProtoBuf作为数据序列化的方式，占用带宽比以上两种方式小，但是使用起来比JSON复杂，所以通常在项目中选择使用json格式来打包传输数据。</li></ol> 
<h3><a id="JSON_12"></a>调用JSON头文件</h3> 
<pre><code>#include "json.hpp"
using json = nlohmann::json;
</code></pre> 
<p><img src="https://images2.imgbox.com/5d/a2/1iiDHwpj_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="JSON_20"></a>JSON数据序列化</h3> 
<p>把想要打包的数据或对象直接处理成JSON字符串。可以分为两种：</p> 
<ol><li>普通数据序列化</li></ol> 
<pre><code class="prism language-cpp">json js<span class="token punctuation">;</span>
<span class="token comment">// 添加数组</span>
js<span class="token punctuation">[</span><span class="token string">"id"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 添加key-value</span>
js<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"zhang san"</span><span class="token punctuation">;</span>
<span class="token comment">// 添加对象</span>
js<span class="token punctuation">[</span><span class="token string">"msg"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"zhang san"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span>
js<span class="token punctuation">[</span><span class="token string">"msg"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"liu shuo"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello china"</span><span class="token punctuation">;</span>
<span class="token comment">// 上面等同于下面这句一次性添加数组对象</span>
js<span class="token punctuation">[</span><span class="token string">"msg"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token string">"zhang san"</span><span class="token punctuation">,</span> <span class="token string">"hello world"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"liu shuo"</span><span class="token punctuation">,</span> <span class="token string">"hello china"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> js <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>容器序列化</li></ol> 
<pre><code class="prism language-cpp">json js<span class="token punctuation">;</span>
<span class="token comment">// 直接序列化一个vector容器</span>
vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> vec<span class="token punctuation">;</span>
vec<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
js<span class="token punctuation">[</span><span class="token string">"list"</span><span class="token punctuation">]</span> <span class="token operator">=</span> vec<span class="token punctuation">;</span>
<span class="token comment">// 直接序列化一个map容器</span>
map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span> m<span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"北京"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"上海"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"深圳"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
js<span class="token punctuation">[</span><span class="token string">"path"</span><span class="token punctuation">]</span> <span class="token operator">=</span> m<span class="token punctuation">;</span>
cout<span class="token operator">&lt;&lt;</span>js<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="JSON_59"></a>JSON数据反序列化</h3> 
<p>从网络接收到字符串为JSON格式，可以反序列化获得数据或对象和容器。</p> 
<pre><code class="prism language-cpp">string jsonstr <span class="token operator">=</span> js<span class="token punctuation">.</span><span class="token function">dump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
json js2 <span class="token operator">=</span> json<span class="token double-colon punctuation">::</span><span class="token function">parse</span><span class="token punctuation">(</span>jsonstr<span class="token punctuation">)</span><span class="token punctuation">;</span>
string name <span class="token operator">=</span> js2<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> <span class="token string">"name:"</span> <span class="token operator">&lt;&lt;</span> name <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token comment">// 直接反序列化vector容器</span>
vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v <span class="token operator">=</span> js2<span class="token punctuation">[</span><span class="token string">"list"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> val <span class="token operator">:</span> v<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
cout <span class="token operator">&lt;&lt;</span> val <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token comment">// 直接反序列化map容器</span>
map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span> m2 <span class="token operator">=</span> js2<span class="token punctuation">[</span><span class="token string">"path"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> m2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
cout <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b7ba099cce1e5450f06e5de0c5708a3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用Git克隆Github项目</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ecaa671cd41ded6cf19748f6c0083904/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java课程设计——五子棋游戏（个人）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>