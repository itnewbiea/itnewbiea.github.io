<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【设计模式——学习笔记】23种设计模式——职责链/责任链模式(Chain of Responsibility)（原理讲解&#43;应用场景介绍&#43;案例介绍&#43;Java代码实现） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【设计模式——学习笔记】23种设计模式——职责链/责任链模式(Chain of Responsibility)（原理讲解&#43;应用场景介绍&#43;案例介绍&#43;Java代码实现）" />
<meta property="og:description" content="文章目录 案例引入传统方式实现分析 介绍基础介绍登场角色应用场景 案例实现案例一类图实现 案例二类图实现 职责链模式在Spring中的应用总结文章说明 案例引入 学校OA系统的采购审批项目: 需求是
采购员采购教学器材如果金额 小于等于5000（0&lt;x&lt;=5000），由教学主任审批如果金额 小于等于10000（5000&lt;x&lt;=10000），由院长审批如果金额 小于等于30000（10000&lt;x&lt;=30000），由副校长审批如果金额 超过30000以上（30000&lt;x），由校长审批 传统方式实现 创建一个不同的审批人对应的类，在客户端中写 if else 判断程序，符合不同的条件，就让不同的审批人去处理
分析 客户端这里会使用到分支判断(比如switch)来对不同的采购请求处理， 这样就存在如下问题
如果各个级别的人员审批金额发生变化，客户端的代码也需要发生变化客户端必须明确知道有多少个审批级别及其访问方式，这样对一个采购请求进行处理的类和Approver (审批人) 就存在强合耦合关系，不利于代码的扩展和维护 【改进】
使用职责链模式
介绍 基础介绍 职责链模式又叫责任链模式，为请求创建了一个接收者对象的链(如下方的简单示意图)。这种模式对请求的发送者和接收者进行解耦。当发送者发送一个请求之后，接收者会按照职责链的顺序一个一个地找出到底应该由谁来负责处理这个请求 职责链模式通常每个接收者都包含对另一个接收者的引用。如果一个对象不能处理该请求，那么它会把相同的请求传给下一个接收者，依此类推，如果所有人都不能处理，最后就会提示或者报错说不能处理这种类型的设计模式属于行为型模式 登场角色 Handler(抽象处理者)：定义了一个处理请求的接口，同时设有变量来保存其他的HandlerConcreteHandler(具体处理者)：处理它自己负责的请求，可以访问它的后继者(即下一个处理者)，如果可以处理当前请求则处理，否则就将该请求交给后继者去处理，从而形成一个职责链Request(请求对象)：含有很多属性，表示一个请求Client(请求者)：发送请求 应用场景 有多个对象可以处理同一个请求时，比如: 多级请求、请假/加薪等审批流程、Java Web中Tomcat对Encoding的处理、拦截器 案例实现 案例一 类图 实现 【采购请求】
package com.atguigu.responsibilitychain; /** * 请求类 */ public class PurchaseRequest { /** * 请求类型 */ private int type = 0; /** * 请求金额 */ private float price = 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/0ff4eae92fa04c75fee4326b286f5bea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-15T15:52:06+08:00" />
<meta property="article:modified_time" content="2023-08-15T15:52:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【设计模式——学习笔记】23种设计模式——职责链/责任链模式(Chain of Responsibility)（原理讲解&#43;应用场景介绍&#43;案例介绍&#43;Java代码实现）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">案例引入</a></li><li><ul><li><a href="#_11" rel="nofollow">传统方式实现</a></li><li><ul><li><a href="#_15" rel="nofollow">分析</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_26" rel="nofollow">介绍</a></li><li><ul><li><a href="#_28" rel="nofollow">基础介绍</a></li><li><a href="#_38" rel="nofollow">登场角色</a></li><li><a href="#_48" rel="nofollow">应用场景</a></li></ul> 
  </li><li><a href="#_52" rel="nofollow">案例实现</a></li><li><ul><li><a href="#_54" rel="nofollow">案例一</a></li><li><ul><li><a href="#_56" rel="nofollow">类图</a></li><li><a href="#_61" rel="nofollow">实现</a></li></ul> 
   </li><li><a href="#_277" rel="nofollow">案例二</a></li><li><ul><li><a href="#_279" rel="nofollow">类图</a></li><li><a href="#_284" rel="nofollow">实现</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Spring_575" rel="nofollow">职责链模式在Spring中的应用</a></li><li><a href="#_586" rel="nofollow">总结</a></li><li><a href="#_614" rel="nofollow">文章说明</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>案例引入</h2> 
<p>学校OA系统的采购审批项目: 需求是</p> 
<ul><li>采购员采购教学器材</li><li>如果金额 小于等于5000（0&lt;x&lt;=5000），由教学主任审批</li><li>如果金额 小于等于10000（5000&lt;x&lt;=10000），由院长审批</li><li>如果金额 小于等于30000（10000&lt;x&lt;=30000），由副校长审批</li><li>如果金额 超过30000以上（30000&lt;x），由校长审批</li></ul> 
<h3><a id="_11"></a>传统方式实现</h3> 
<p>创建一个不同的审批人对应的类，在客户端中写 if else 判断程序，符合不同的条件，就让不同的审批人去处理</p> 
<h4><a id="_15"></a>分析</h4> 
<p>客户端这里会使用到分支判断(比如switch)来对不同的采购请求处理， 这样就存在如下问题</p> 
<ul><li>如果各个级别的人员审批金额发生变化，客户端的代码也需要发生变化</li><li>客户端必须明确知道有多少个审批级别及其访问方式，这样对一个采购请求进行处理的类和Approver (审批人) 就存在强合耦合关系，不利于代码的扩展和维护</li></ul> 
<p>【改进】</p> 
<p>使用职责链模式</p> 
<h2><a id="_26"></a>介绍</h2> 
<h3><a id="_28"></a>基础介绍</h3> 
<ul><li>职责链模式又叫责任链模式，为请求创建了一个接收者对象的链(如下方的简单示意图)。这种模式对请求的发送者和接收者进行解耦。当发送者发送一个请求之后，接收者会按照职责链的顺序一个一个地找出到底应该由谁来负责处理这个请求</li></ul> 
<p><img src="https://images2.imgbox.com/96/05/zhXu18Dx_o.png" alt="在这里插入图片描述"></p> 
<ul><li>职责链模式通常每个接收者都包含对另一个接收者的引用。如果一个对象不能处理该请求，那么它会把相同的请求传给下一个接收者，依此类推，如果所有人都不能处理，最后就会提示或者报错说不能处理</li><li>这种类型的设计模式属于行为型模式</li></ul> 
<h3><a id="_38"></a>登场角色</h3> 
<p><img src="https://images2.imgbox.com/32/5c/blfHJjn8_o.png" alt="在这里插入图片描述"></p> 
<ul><li><code>Handler(抽象处理者)</code>：定义了一个处理请求的接口，同时设有变量来保存其他的Handler</li><li><code>ConcreteHandler(具体处理者)</code>：处理它自己负责的请求，可以访问它的后继者(即下一个处理者)，如果可以处理当前请求则处理，否则就将该请求交给后继者去处理，从而形成一个职责链</li><li><code>Request(请求对象)</code>：含有很多属性，表示一个请求</li><li><code>Client(请求者)</code>：发送请求</li></ul> 
<h3><a id="_48"></a>应用场景</h3> 
<ul><li>有多个对象可以处理同一个请求时，比如: 多级请求、请假/加薪等审批流程、Java Web中Tomcat对Encoding的处理、拦截器</li></ul> 
<h2><a id="_52"></a>案例实现</h2> 
<h3><a id="_54"></a>案例一</h3> 
<h4><a id="_56"></a>类图</h4> 
<p><img src="https://images2.imgbox.com/c5/ca/tnW9jG3S_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_61"></a>实现</h4> 
<p>【采购请求】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 请求类
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PurchaseRequest</span> <span class="token punctuation">{<!-- --></span>

   <span class="token comment">/**
    * 请求类型
    */</span>
   <span class="token keyword">private</span> <span class="token keyword">int</span> type <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token comment">/**
    * 请求金额
    */</span>
   <span class="token keyword">private</span> <span class="token keyword">float</span> price <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

   <span class="token comment">/**
    * 构造器
    * @param type
    * @param price
    * @param id
    */</span>
   <span class="token keyword">public</span> <span class="token class-name">PurchaseRequest</span><span class="token punctuation">(</span><span class="token keyword">int</span> type<span class="token punctuation">,</span> <span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> type<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> price<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> id<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>【抽象请求处理者】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 请求处理者
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Approver</span> <span class="token punctuation">{<!-- --></span>

   <span class="token comment">/**
    * 下一个处理者
    */</span>
   <span class="token class-name">Approver</span> approver<span class="token punctuation">;</span>
   <span class="token comment">/**
    * 当前处理者名字
    */</span>
   <span class="token class-name">String</span> name<span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token class-name">Approver</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">/**
    * 下一个处理者
    * @param approver
    */</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApprover</span><span class="token punctuation">(</span><span class="token class-name">Approver</span> approver<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>approver <span class="token operator">=</span> approver<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">/**
    * 处理审批请求的方法，得到一个请求, 处理是子类完成，因此该方法做成抽象
    * @param purchaseRequest
    */</span>
   <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token class-name">PurchaseRequest</span> purchaseRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>【系级处理人】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DepartmentApprover</span> <span class="token keyword">extends</span> <span class="token class-name">Approver</span> <span class="token punctuation">{<!-- --></span>
   
   <span class="token keyword">public</span> <span class="token class-name">DepartmentApprover</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token class-name">PurchaseRequest</span> purchaseRequest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">5000</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" 请求编号 id= "</span> <span class="token operator">+</span> purchaseRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 被 "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">" 处理"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
         approver<span class="token punctuation">.</span><span class="token function">processRequest</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>【学院级别处理人】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CollegeApprover</span> <span class="token keyword">extends</span> <span class="token class-name">Approver</span> <span class="token punctuation">{<!-- --></span>

   <span class="token keyword">public</span> <span class="token class-name">CollegeApprover</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token class-name">PurchaseRequest</span> purchaseRequest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">5000</span> <span class="token operator">&amp;&amp;</span> purchaseRequest<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">10000</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" 请求编号 id= "</span> <span class="token operator">+</span> purchaseRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 被 "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">" 处理"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
         approver<span class="token punctuation">.</span><span class="token function">processRequest</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>【副校长】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ViceSchoolMasterApprover</span> <span class="token keyword">extends</span> <span class="token class-name">Approver</span> <span class="token punctuation">{<!-- --></span>

   <span class="token keyword">public</span> <span class="token class-name">ViceSchoolMasterApprover</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token class-name">PurchaseRequest</span> purchaseRequest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10000</span> <span class="token operator">&amp;&amp;</span> purchaseRequest<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">30000</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" 请求编号 id= "</span> <span class="token operator">+</span> purchaseRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 被 "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">" 处理"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
         approver<span class="token punctuation">.</span><span class="token function">processRequest</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>【校长】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SchoolMasterApprover</span> <span class="token keyword">extends</span> <span class="token class-name">Approver</span> <span class="token punctuation">{<!-- --></span>

   <span class="token keyword">public</span> <span class="token class-name">SchoolMasterApprover</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token class-name">PurchaseRequest</span> purchaseRequest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">30000</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" 请求编号 id= "</span> <span class="token operator">+</span> purchaseRequest<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 被 "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">" 处理"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
         approver<span class="token punctuation">.</span><span class="token function">processRequest</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>【客户端】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//创建一个请求</span>
      <span class="token class-name">PurchaseRequest</span> purchaseRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PurchaseRequest</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">31000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">//创建相关的审批人</span>
      <span class="token class-name">DepartmentApprover</span> departmentApprover <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DepartmentApprover</span><span class="token punctuation">(</span><span class="token string">"张主任"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">CollegeApprover</span> collegeApprover <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CollegeApprover</span><span class="token punctuation">(</span><span class="token string">"李院长"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">ViceSchoolMasterApprover</span> viceSchoolMasterApprover <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ViceSchoolMasterApprover</span><span class="token punctuation">(</span><span class="token string">"王副校"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">SchoolMasterApprover</span> schoolMasterApprover <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SchoolMasterApprover</span><span class="token punctuation">(</span><span class="token string">"佟校长"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">//需要将各个审批级别的下一个设置好 (处理人构成环形)</span>
      departmentApprover<span class="token punctuation">.</span><span class="token function">setApprover</span><span class="token punctuation">(</span>collegeApprover<span class="token punctuation">)</span><span class="token punctuation">;</span>
      collegeApprover<span class="token punctuation">.</span><span class="token function">setApprover</span><span class="token punctuation">(</span>viceSchoolMasterApprover<span class="token punctuation">)</span><span class="token punctuation">;</span>
      viceSchoolMasterApprover<span class="token punctuation">.</span><span class="token function">setApprover</span><span class="token punctuation">(</span>schoolMasterApprover<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//防止一千块钱也来找校长处理，找校长的话，校长就去找手下处理</span>
      schoolMasterApprover<span class="token punctuation">.</span><span class="token function">setApprover</span><span class="token punctuation">(</span>departmentApprover<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token comment">//找谁开始调用都可以实现功能</span>
      departmentApprover<span class="token punctuation">.</span><span class="token function">processRequest</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
      viceSchoolMasterApprover<span class="token punctuation">.</span><span class="token function">processRequest</span><span class="token punctuation">(</span>purchaseRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>【主类】</p> 
<pre><code class="prism language-SQL"> 请求编号 id= 1 被 佟校长 处理
 请求编号 id= 1 被 佟校长 处理

Process finished with exit code 0
</code></pre> 
<h3><a id="_277"></a>案例二</h3> 
<h4><a id="_279"></a>类图</h4> 
<p><img src="https://images2.imgbox.com/6b/1c/Ti02K4rq_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_284"></a>实现</h4> 
<p>【问题类】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain<span class="token punctuation">.</span></span><span class="token class-name">Sample</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Trouble</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 问题编号
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> number<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 根据编号生成问题
     * @param number
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Trouble</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
        <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">=</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取问题编号
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>        
        <span class="token keyword">return</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 代表问题的字符串
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>      
        <span class="token keyword">return</span> <span class="token string">"[Trouble "</span> <span class="token operator">+</span> number <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>【用来解决问题的抽象类】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain<span class="token punctuation">.</span></span><span class="token class-name">Sample</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Support</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 解决问题的实例的名字
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 要推卸给的对象
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Support</span> next<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 生成解决问题的实例
     *
     * @param name
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Support</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 设置要推卸给的对象
     *
     * @param next
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Support</span> <span class="token function">setNext</span><span class="token punctuation">(</span><span class="token class-name">Support</span> next<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token keyword">return</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 解决问题的步骤
     * 调用了抽象方法resolve，这里属于模板方法模式
     * @param trouble
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">support</span><span class="token punctuation">(</span><span class="token class-name">Trouble</span> trouble<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">(</span>trouble<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">done</span><span class="token punctuation">(</span>trouble<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 问题还没有解决，让下一个对象来尝试解决</span>
            next<span class="token punctuation">.</span><span class="token function">support</span><span class="token punctuation">(</span>trouble<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 所有对象都没有办法解决该问题，提示用户 问题没办法解决</span>
            <span class="token function">fail</span><span class="token punctuation">(</span>trouble<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 显示字符串
     *
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"["</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 解决问题的方法
     * 需要子类去具体实现，如果解决了问题，就返回true
     *
     * @param trouble
     * @return
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token keyword">boolean</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">Trouble</span> trouble<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 解决
     *
     * @param trouble
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token class-name">Trouble</span> trouble<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>trouble <span class="token operator">+</span> <span class="token string">" is resolved by "</span> <span class="token operator">+</span> <span class="token keyword">this</span> <span class="token operator">+</span> <span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 未解决
     *
     * @param trouble
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token class-name">Trouble</span> trouble<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>trouble <span class="token operator">+</span> <span class="token string">" cannot be resolved."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>【不解决问题的类】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain<span class="token punctuation">.</span></span><span class="token class-name">Sample</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NoSupport</span> <span class="token keyword">extends</span> <span class="token class-name">Support</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">NoSupport</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 解决问题的方法 
     * 什么都解决不了，直接返回false
     * @param trouble
     * @return
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">Trouble</span> trouble<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>     
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>【具体解决问题的类：只要问题的编号小于limit，就可以解决】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain<span class="token punctuation">.</span></span><span class="token class-name">Sample</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 可以解决编号小于limit的问题
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LimitSupport</span> <span class="token keyword">extends</span> <span class="token class-name">Support</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> limit<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 构造函数
     *
     * @param name
     * @param limit
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">LimitSupport</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>limit <span class="token operator">=</span> limit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">Trouble</span> trouble<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>trouble<span class="token punctuation">.</span><span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">/*
            解决了什么什么问题
             */</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre> 
<p>【具体解决问题的类：只要问题的编号是奇数，就可以解决】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain<span class="token punctuation">.</span></span><span class="token class-name">Sample</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OddSupport</span> <span class="token keyword">extends</span> <span class="token class-name">Support</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 构造函数
     * @param name
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">OddSupport</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>                
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">Trouble</span> trouble<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
        <span class="token keyword">if</span> <span class="token punctuation">(</span>trouble<span class="token punctuation">.</span><span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>【具体解决问题的类：只能解决指定编号的问题】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain<span class="token punctuation">.</span></span><span class="token class-name">Sample</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpecialSupport</span> <span class="token keyword">extends</span> <span class="token class-name">Support</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> number<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 构造函数
     *
     * @param name
     * @param number
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">SpecialSupport</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">=</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 解决问题的方法
     *
     * @param trouble
     * @return
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">Trouble</span> trouble<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>trouble<span class="token punctuation">.</span><span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>【主类】</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>responsibilitychain<span class="token punctuation">.</span></span><span class="token class-name">Sample</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 生成六个解决问题的实例</span>
        <span class="token class-name">Support</span> alice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NoSupport</span><span class="token punctuation">(</span><span class="token string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Support</span> bob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LimitSupport</span><span class="token punctuation">(</span><span class="token string">"Bob"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Support</span> charlie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpecialSupport</span><span class="token punctuation">(</span><span class="token string">"Charlie"</span><span class="token punctuation">,</span> <span class="token number">429</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Support</span> diana <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LimitSupport</span><span class="token punctuation">(</span><span class="token string">"Diana"</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Support</span> elmo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OddSupport</span><span class="token punctuation">(</span><span class="token string">"Elmo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Support</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LimitSupport</span><span class="token punctuation">(</span><span class="token string">"Fred"</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 连接对象，形成职责链</span>
        alice<span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>bob<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>charlie<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>diana<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>elmo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>fred<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 制造各种问题，增长步长大一点，让问题的编号更加的分散</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">500</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">33</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            alice<span class="token punctuation">.</span><span class="token function">support</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Trouble</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>【运行】</p> 
<pre><code class="prism language-java"><span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">0</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Bob</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">33</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Bob</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">66</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Bob</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">99</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Bob</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">132</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Diana</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">165</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Diana</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">198</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Diana</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">231</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Elmo</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">264</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Fred</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">297</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Elmo</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">330</span><span class="token punctuation">]</span> cannot be resolved<span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">363</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Elmo</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">396</span><span class="token punctuation">]</span> cannot be resolved<span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">429</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Charlie</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">462</span><span class="token punctuation">]</span> cannot be resolved<span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token class-name">Trouble</span> <span class="token number">495</span><span class="token punctuation">]</span> is resolved by <span class="token punctuation">[</span><span class="token class-name">Elmo</span><span class="token punctuation">]</span><span class="token punctuation">.</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre> 
<h2><a id="Spring_575"></a>职责链模式在Spring中的应用</h2> 
<p><img src="https://images2.imgbox.com/ca/1d/19bZSZKX_o.png" alt="在这里插入图片描述"></p> 
<ul><li>springmvc请求的流程图中，执行了拦截器相关方法interceptor.preHandler等等，在处理SpringMvc请求时，使用到职责链模式，还使用到适配器模式</li><li>HandlerExecutionChain主要负责的是请求拦截器的执行和请求处理，但是他本身不处理请求，只是将请求分配给链上注册处理器执行，这是职责链实现方式，减少职责链本身与处理逻辑之间的耦合，规范了处理流程</li><li>HandlerExecutionChain维护了Handlerlnterceptor的集合， 可以向其中注册相应的拦截器</li></ul> 
<p><img src="https://images2.imgbox.com/20/fd/IEGDaYOB_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_586"></a>总结</h2> 
<p>【优点】</p> 
<ul><li>将请求和处理分开，实现解耦，提高系统的灵活性</li><li>简化了对象，使对象不需要知道链的结构</li><li>可以动态地调整链的结构</li><li>让每一个<code>ConcreteHandler</code>更加专注于自己的工作，程序的逻辑更加清晰</li></ul> 
<p>【缺点】</p> 
<ul><li>性能会受到影响，特别是在链比较长的时候。因此需控制链中最大节点数量，一般通过在Handler中设置一个最大节点数量，在setNext()方法中判断是否已经超过阀值超过则不允许该链建立，避免出现超长链破坏系统性能</li><li>调试不方便，采用了类似递归的方式，调试时逻辑可能比较复杂</li></ul> 
<p>【问答】</p> 
<blockquote> 
 <p>在视窗系统中，经常使用职责链模式。在视窗系统的窗口中，有按钮和文本输入框、勾选框等组件(也称为部件或控件)。当点击鼠标时，鼠标点击事件的处理是如何传播的呢? 职责链模式中的next(要推卸给的对象)是哪个组件呢?</p> 
</blockquote> 
<p>答：一般next字段中保存的多是控件的父窗口</p> 
<blockquote> 
 <p>如下图中的小对话框。当焦点移动至“字体”列表框上时，按下键盘上的↑↓键可以选择相应的字体。但是，当焦点移动至“显示均衡字体”勾选框上时如果按下↑键，焦点会移动至“字体”列表框，之后，即使按下↓键，焦点也不会返回到勾选框上。请运用Chain ofResponsibility模式的思考方法来说明这个问题</p> 
 <p><img src="https://images2.imgbox.com/1f/cc/TgNngtCT_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>如果焦点在列表框中，列表框会自己处理↑↓键被按下的事件，不会将请求推卸给next，但如果焦点在勾选框中，它则不会自己处理↑↓小键被按下的事件，而是将请求推卸给next所对应的父对话框。当父对话框接收到↑↓键被按下的事件时，会将焦点移动至列表框中<img src="https://images2.imgbox.com/b5/ab/XflzBPr1_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_614"></a>文章说明</h2> 
<ul><li>本文章为本人学习尚硅谷的学习笔记，文章中大部分内容来源于尚硅谷视频（<a href="https://www.bilibili.com/video/BV1G4411c7N4/" rel="nofollow">点击学习尚硅谷相关课程</a>），也有部分内容来自于自己的思考，发布文章是想帮助其他学习的人更方便地整理自己的笔记或者直接通过文章学习相关知识，如有侵权请联系删除，最后对尚硅谷的优质课程表示感谢。</li><li>本人还同步阅读《图解设计模式》书籍（图解设计模式/(日)结城浩著;杨文轩译–北京:人民邮电出版社，2017.1），进而综合两者的内容，让知识点更加全面</li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2bcdefb44f6ca7be83c6f0f6f6d7f268/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Matlab优化算法-非线性规划</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5daaee21bd0dccdc034e57ffbfe58af8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux程序前台后台切换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>