<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue 使用高德地图，添加点标记 &#43; 点击地图获取坐标 &#43; 带搜索（即地理编码 &#43; 逆地理编码） - 附完整示例 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue 使用高德地图，添加点标记 &#43; 点击地图获取坐标 &#43; 带搜索（即地理编码 &#43; 逆地理编码） - 附完整示例" />
<meta property="og:description" content="高德地图：
与真实世界联通 - 高德开放平台为开发者赋能，将地图精致地呈现在您的应用中
无论基于哪种平台，都可以通过高德开放平台API和SDK，轻松地完成地图的构建工作
官方文档：地图 | 高德地图API
地图 | 高德地图API地图，地图sdk，地图JS API，地图定制，自定义地图，地图覆盖物，地图绘制，路线规划，坐标转换，距离/面积计算，距离测量，室内地图，地图显示，地图个性化，地图开发，室内定位https://lbs.amap.com/product/map#/
效果 一、准备工作 1、注册/登录账号 2、点击控制台 3、创建应用 4、获取key和密钥，如上图所示 注：使用web服务API，如下图所示
二、安装依赖包 1、安装命令 npm i @amap/amap-jsapi-loader --save 2、这是我的版本 &#34;@amap/amap-jsapi-loader&#34;: &#34;^1.0.1&#34;, 三、使用步骤 1、在index.html文件中引入密钥 代码如下（示例）：
&lt;script type=&#34;text/javascript&#34;&gt; window._AMapSecurityConfig = { securityJsCode: &#39;&#39;, // 你的密钥 } &lt;/script&gt; 2、在vue文件中引入依赖包 代码如下（示例）：
import AMapLoader from &#34;@amap/amap-jsapi-loader&#34; 3、申明变量并初始化调用 代码如下（示例）：
import { shallowRef, defineEmits, ref, onBeforeUnmount } from &#39;vue&#39;; const map = shallowRef(null); let AMapObj, placeSearch, marker, geocoder; function initMap(){ AMapLoader." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a0db291331dca8b5b5978233899d5363/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-06T17:14:21+08:00" />
<meta property="article:modified_time" content="2023-09-06T17:14:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue 使用高德地图，添加点标记 &#43; 点击地图获取坐标 &#43; 带搜索（即地理编码 &#43; 逆地理编码） - 附完整示例</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#fe2c24;"><strong>高德地图</strong></span><span style="color:#2c3e50;">：</span></span></p> 
 <p>与真实世界联通 - 高德开放平台为开发者赋能，将地图精致地呈现在您的应用中</p> 
 <p>无论基于哪种平台，都可以通过高德开放平台API和SDK，轻松地完成地图的构建工作</p> 
</blockquote> 
<p> 官方文档：<a href="https://lbs.amap.com/product/map#/" rel="nofollow" title="地图 | 高德地图API">地图 | 高德地图API</a></p> 
<p><a class="has-card" href="https://lbs.amap.com/product/map#/" rel="nofollow" title="地图 | 高德地图API"><span class="link-card-box"><span class="link-title">地图 | 高德地图API</span><span class="link-desc">地图，地图sdk，地图JS API，地图定制，自定义地图，地图覆盖物，地图绘制，路线规划，坐标转换，距离/面积计算，距离测量，室内地图，地图显示，地图个性化，地图开发，室内定位</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/df/43/UdcHGXjn_o.png" alt="icon-default.png?t=N7T8">https://lbs.amap.com/product/map#/</span></span></a></p> 
<h3><span style="color:#fe2c24;">效果</span></h3> 
<p><img alt="" height="502" src="https://images2.imgbox.com/94/c3/cGlhYMVR_o.png" width="799"></p> 
<h3></h3> 
<h3><strong>一、准备工作</strong></h3> 
<h4>1、注册/登录账号</h4> 
<p><img alt="" height="969" src="https://images2.imgbox.com/fc/af/UY95fHm5_o.png" width="1200"></p> 
<h4>2、点击控制台</h4> 
<p><img alt="" height="969" src="https://images2.imgbox.com/c3/cd/mmWjACAY_o.png" width="1200"></p> 
<h4>3、创建应用</h4> 
<p><img alt="" height="969" src="https://images2.imgbox.com/9c/a3/f5FUZ894_o.png" width="1200"></p> 
<h4>4、获取key和密钥，如上图所示</h4> 
<p><span style="color:#4da8ee;">注：使用web服务API，如下图所示</span></p> 
<p><img alt="" height="969" src="https://images2.imgbox.com/ba/95/FM5LvVhu_o.png" width="1200"></p> 
<h3></h3> 
<h3><strong>二、安装</strong>依赖包</h3> 
<h4>1、安装命令</h4> 
<pre><code>npm i @amap/amap-jsapi-loader --save</code></pre> 
<h4> 2、这是我的版本 </h4> 
<pre><code>"@amap/amap-jsapi-loader": "^1.0.1",</code></pre> 
<h3></h3> 
<h3>三、使用步骤</h3> 
<h4>1、在index.html文件中引入密钥</h4> 
<p>代码如下（示例）：</p> 
<pre><code>&lt;script type="text/javascript"&gt;
    window._AMapSecurityConfig = {
      securityJsCode: '', // 你的密钥
    }
  &lt;/script&gt;</code></pre> 
<h4>2、在vue文件中引入依赖包</h4> 
<p>代码如下（示例）：</p> 
<pre><code>import AMapLoader from "@amap/amap-jsapi-loader"</code></pre> 
<h4>3、申明变量并初始化调用</h4> 
<p>代码如下（示例）：</p> 
<pre><code>
import { shallowRef, defineEmits, ref, onBeforeUnmount } from 'vue';

const map = shallowRef(null);
let AMapObj, placeSearch, marker, geocoder;

function initMap(){
  AMapLoader.load({
    key:'',  //设置您的key
    version:"2.0",
    plugins:['AMap.ToolBar','AMap.Driving'],
    AMapUI:{
      version:"1.1",
      plugins:[],

    },
    Loca:{
      version:"2.0.0"
    },
  }).then((AMap)=&gt;{
    // console.log(AMap);
    AMapObj = AMap;
    map.value = new AMap.Map("map-box",{
      viewMode:"3D",
      zoom:10,
      zooms:[2,22],
      center: [105.602725,37.076636],
    });
    map.value.on('click', onMapClick);
    AMap.plugin(
      ['AMap.ToolBar','AMap.Scale','AMap.Geolocation','AMap.PlaceSearch',
        'AMap.Geocoder','AMap.AutoComplete'],
      () =&gt; {
        // 缩放条
        const toolbar = new AMap.ToolBar();
        // 比例尺
        const scale = new AMap.Scale();
        // 定位
        const geolocation = new AMap.Geolocation({
          enableHighAccuracy: true, //是否使用高精度定位，默认:true
          timeout: 10000, //超过10秒后停止定位，默认：5s
          position: 'RT', //定位按钮的停靠位置
          buttonOffset: new AMap.Pixel(10, 20), //定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)
          zoomToAccuracy: true, //定位成功后是否自动调整地图视野到定位点
        });
        geocoder = new AMap.Geocoder({
          city: '全国',
        });
        map.value.addControl(geolocation);
        map.value.addControl(toolbar);
        map.value.addControl(scale);
        placeSearch = new AMap.PlaceSearch({
          // map: map.value,
          city: '全国',
          pageSize: 10, // 单页显示结果条数
          pageIndex: 1, // 页码
          citylimit: false, // 是否强制限制在设置的城市内搜索
          autoFitView: true,
        });
      });
  }).catch(e=&gt;{
    console.log(e);
  })
}

initMap();</code></pre> 
<h3></h3> 
<h3><span style="color:#fe2c24;"><strong>四、完整示例</strong></span></h3> 
<p><strong>Index.html</strong></p> 
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="zh_CN" id="htmlRoot"&gt;

&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /&gt;
  &lt;meta name="renderer" content="webkit" /&gt;
  &lt;meta name="viewport"
    content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0" /&gt;

  &lt;title&gt;
    &lt;%= title %&gt;
  &lt;/title&gt;
  &lt;script type="text/javascript"&gt;
    window._AMapSecurityConfig = {
      securityJsCode: '', // 你的密钥
    }
  &lt;/script&gt;
  
&lt;/head&gt;

&lt;body&gt;
  &lt;div id="app"&gt;
  &lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre> 
<p><strong>Map.vue</strong></p> 
<pre><code>&lt;template&gt;
  &lt;div class="home"&gt;
    &lt;div id="map-box"&gt;&lt;/div&gt;
    &lt;div class="info-box"&gt;
      &lt;a-select
        v-model:value="keyword"
        show-search
        placeholder="输入关键字搜索"
        style="width: 300px"
        :default-active-first-option="false"
        :show-arrow="false"
        :filter-option="false"
        :not-found-content="null"
        @search="handleSearch"
      &gt;
        &lt;a-select-option v-for="item in data" :key="item.id" :value="item.id" @click="handleSelect(item)"&gt;
          &lt;div class="d-flex flex-column"&gt;
            &lt;span&gt;{<!-- -->{item.name}}&lt;/span&gt;
            &lt;span style="font-size: '10px'; color: #999999"&gt;{<!-- -->{item.address}}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/a-select-option&gt;
      &lt;/a-select&gt;
      &lt;a-tooltip&gt;
        &lt;template #title v-if="coord"&gt;点击复制&lt;/template&gt;
        &lt;span style="margin: 5px 8px;"&gt;
          经纬度：&lt;span class="copy" style="cursor: pointer;" :data-clipboard-text="coord"&gt;{<!-- -->{coord}}&lt;/span&gt;
        &lt;/span&gt;
      &lt;/a-tooltip&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { shallowRef, ref, onBeforeUnmount } from 'vue';
import AMapLoader from "@amap/amap-jsapi-loader";
import { message } from 'ant-design-vue';
import ClipboardJS from 'clipboard';
   
const clipboard = new ClipboardJS('.copy');

clipboard.on('success', function(e) {
  console.log(e);
  console.info('Text:', e.text);
  message.info('复制成功');
  e.clearSelection();
});

clipboard.on('error', function(e) {
  if(!e.text) message.error('暂无可复制的内容')
});

onBeforeUnmount(() =&gt; {
  clipboard.destroy();
})

const map = shallowRef(null);
const keyword = ref(null);
const data = ref([]);
const coord = ref('');
let AMapObj, placeSearch, marker, geocoder;

function initMap(){
  AMapLoader.load({
    key: '',  //设置您的key
    version: "2.0",
    plugins: ['AMap.ToolBar','AMap.Driving'],
    AMapUI: {
      version: "1.1",
      plugins: [],

    },
    Loca:{
      version: "2.0.0"
    },
  }).then((AMap)=&gt;{
    // console.log(AMap);
    AMapObj = AMap;
    map.value = new AMap.Map("map-box",{
      viewMode:"3D",
      zoom:10,
      zooms:[2,22],
      center: [105.602725,37.076636],
    });
    map.value.on('click', onMapClick);
    AMap.plugin(
      ['AMap.ToolBar','AMap.Scale','AMap.Geolocation','AMap.PlaceSearch',
        'AMap.Geocoder','AMap.AutoComplete'],
      () =&gt; {
        // 缩放条
        const toolbar = new AMap.ToolBar();
        // 比例尺
        const scale = new AMap.Scale();
        // 定位
        const geolocation = new AMap.Geolocation({
          enableHighAccuracy: true, // 是否使用高精度定位，默认:true
          timeout: 10000, // 超过10秒后停止定位，默认：5s
          position: 'RT', // 定位按钮的停靠位置
          buttonOffset: new AMap.Pixel(10, 20), // 定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)
          zoomToAccuracy: true, // 定位成功后是否自动调整地图视野到定位点
        });
        geocoder = new AMap.Geocoder({
          city: '全国',
        });
        map.value.addControl(geolocation);
        map.value.addControl(toolbar);
        map.value.addControl(scale);
        placeSearch = new AMap.PlaceSearch({
          city: '全国',
          pageSize: 10, // 单页显示结果条数
          pageIndex: 1, // 页码
          citylimit: false, // 是否强制限制在设置的城市内搜索
          autoFitView: true,
        });
      });
  }).catch(e=&gt;{
    console.log(e);
  })
}

// 搜索地图
function handleSearch(str) {
  placeSearch.search(str, (status, result) =&gt; {
    console.log(result);
    if (result &amp;&amp; typeof result === 'object' &amp;&amp; result.poiList) {
      const list = result.poiList.pois;
      list.forEach(item =&gt; {
        item.value = item.name;
        item.label = item.name;
      });
      data.value = list
    }
  });
}
// 点击地图
function onMapClick(e) {
  coord.value = e.lnglat.lng + ',' + e.lnglat.lat
  geocoder.getAddress([e.lnglat.lng, e.lnglat.lat], function(status, result) {
    if (status === 'complete' &amp;&amp; result.info === 'OK') {
      // result为对应的地理位置详细信息
      keyword.value = result.regeocode.formattedAddress
    }
  })
  drawMarker(e.lnglat)
}
// 点击搜索项
function handleSelect(item) {
  console.log(item);
  drawMarker(item.location)
  if (item.location != null) {
    coord.value = item.location.lng + ',' + item.location.lat
  }
}
// 绘制地点marker
function drawMarker(location) {
  if (location == null) return
  let longitude = location.lng, latitude = location.lat
  if (marker) {
    marker.setMap(null);
  }
  marker = new AMapObj.Marker({
    position: new AMapObj.LngLat(longitude, latitude),
    anchor: 'bottom-center',
  });
  marker.on('click', () =&gt; {
    coord.value = location;
  })
  map.value.add(marker);
  map.value.setZoomAndCenter(16, [longitude, latitude]);
}

initMap();

&lt;/script&gt;

&lt;style lang="less" scoped&gt;
.home{
  height: 500px;
  width: 100%;
  padding: 0px;
  margin: 0px;
  position: relative;

  .info-box {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 300px;
    background-color: #1f1f1f;
    display: flex;
    flex-direction: column;
  }
}
#map-box{
  height: 100%;
  width: 100%;
  padding: 0px;
  margin: 0px;
}
&lt;/style&gt;

&lt;style scoped&gt;
:deep() .amap-logo {
  display: none !important;
}
:deep() .amap-copyright {
  display: none !important;
}
&lt;/style&gt;
</code></pre> 
<p><span style="color:#4da8ee;">注：<strong>clipboard</strong>一键复制的详细使用方法参考地址</span></p> 
<p><a href="https://mp.csdn.net/mp_blog/creation/editor/131308740" title="https://mp.csdn.net/mp_blog/creation/editor/131308740">https://mp.csdn.net/mp_blog/creation/editor/131308740</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/25fa4e6aa68fef03f5eeb20949f8eac3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue JeecgBoot 下拉选使用数据字典，设置默认值，默认选中第一个值 - 附完整示例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1bf071624088e2c3a6275eef09db1043/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">《Python魔法大冒险》004 第一个魔法程序</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>