<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React&#43;wangEditor生成在线编辑工具 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="React&#43;wangEditor生成在线编辑工具" />
<meta property="og:description" content="wangEditor富文本编辑器 关键字：React，wangEditor，在线编辑
如果需求中对在线编辑的要求不高，项目的侧重不在这，可以使用wangEditor富文本编辑器，便捷，用法与echarts相通。 wangEditor官网地址
基本使用 推荐wangEditor作者相关文章—— 50 行代码 React Hooks 中使用 wangEditor 富文本编辑器
首先需要安装@wangeditor/editor和@wangeditor/editor-for-react，npm，yarn，cnpm皆可。npm i @wangeditor/editor --save npm i @wangeditor/editor-for-react --save 安装引入后就可以简单使用import React, { useState, useEffect } from &#39;react&#39; import &#39;@wangeditor/editor/dist/css/style.css&#39; import { Editor, Toolbar } from &#39;@wangeditor/editor-for-react&#39; const MyEditor = () =&gt; { const [editor, setEditor] = useState(null) // 存储 editor 实例 // `defaultContent` (JSON 格式) 和 `defaultHtml` (HTML 格式) 二选一 const defaultContent = [ { type: &#34;paragraph&#34;, children: [{ text: &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a931b1d162512138407cdce9c59adbc8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-10T16:34:16+08:00" />
<meta property="article:modified_time" content="2022-02-10T16:34:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">React&#43;wangEditor生成在线编辑工具</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="wangEditor_0"></a>wangEditor富文本编辑器</h2> 
<p>关键字：React，wangEditor，在线编辑</p> 
<pre><code>如果需求中对在线编辑的要求不高，项目的侧重不在这，可以使用wangEditor富文本编辑器，便捷，用法与echarts相通。
</code></pre> 
<p><a href="https://www.wangeditor.com/" rel="nofollow">wangEditor官网地址</a></p> 
<h3><a id="_5"></a>基本使用</h3> 
<p>推荐wangEditor作者相关文章—— <a href="https://juejin.cn/post/7030584414652334093" rel="nofollow">50 行代码 React Hooks 中使用 wangEditor 富文本编辑器</a></p> 
<ol><li>首先需要安装<strong>@wangeditor/editor</strong>和<strong>@wangeditor/editor-for-react</strong>，npm，yarn，cnpm皆可。<pre><code class="prism language-javascript">npm i @wangeditor<span class="token operator">/</span>editor <span class="token operator">--</span>save
npm i @wangeditor<span class="token operator">/</span>editor<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">-</span>react <span class="token operator">--</span>save
</code></pre> </li><li>安装引入后就可以简单使用<pre><code class="prism language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token string">'@wangeditor/editor/dist/css/style.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> Editor<span class="token punctuation">,</span> Toolbar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@wangeditor/editor-for-react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">MyEditor</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>editor<span class="token punctuation">,</span> setEditor<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 存储 editor 实例</span>

    <span class="token comment">// `defaultContent` (JSON 格式) 和 `defaultHtml` (HTML 格式) 二选一</span>
    <span class="token keyword">const</span> defaultContent <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span> type<span class="token operator">:</span> <span class="token string">"paragraph"</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> text<span class="token operator">:</span> <span class="token string">"一行文字"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
    <span class="token comment">// const defaultHtml = '&lt;p&gt;一行文字&lt;/p&gt;'</span>
    <span class="token keyword">const</span> defaultHtml <span class="token operator">=</span> <span class="token string">'&lt;h1 style="text-align: center;"&gt;测试&lt;/h1&gt;&lt;p style="text-indent: 2em;"&gt;&lt;span style="color: rgb(231, 95, 51);"&gt;hello World!!!&lt;/span&gt;&lt;/p&gt;'</span>

    <span class="token keyword">const</span> toolbarConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>
    <span class="token keyword">const</span> editorConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        placeholder<span class="token operator">:</span> <span class="token string">'请输入内容...'</span><span class="token punctuation">,</span>
        <span class="token function">onCreated</span><span class="token punctuation">(</span><span class="token parameter">editor</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token function">setEditor</span><span class="token punctuation">(</span>editor<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token comment">// 记录下 editor 实例，重要！</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 及时销毁 editor ，重要！</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>editor <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
            editor<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token function">setEditor</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>editor<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> border<span class="token operator">:</span> <span class="token string">'1px solid #ccc'</span><span class="token punctuation">,</span> zIndex<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Toolbar
                    editor<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>editor<span class="token punctuation">}</span>
                    defaultConfig<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>toolbarConfig<span class="token punctuation">}</span>
                    mode<span class="token operator">=</span><span class="token string">"default"</span>
                    style<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> borderBottom<span class="token operator">:</span> <span class="token string">'1px solid #ccc'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Editor
                    defaultConfig<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>editorConfig<span class="token punctuation">}</span>
                    <span class="token comment">// defaultContent={defaultContent}</span>
                    defaultHtml<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>defaultHtml<span class="token punctuation">}</span>
                    mode<span class="token operator">=</span><span class="token string">"default"</span>
                    style<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> height<span class="token operator">:</span> <span class="token string">'91vh'</span>' <span class="token punctuation">}</span><span class="token punctuation">}</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyEditor
</code></pre> </li><li>页面效果<br> <img src="https://images2.imgbox.com/66/35/8ZjbRoYV_o.png" alt="在这里插入图片描述"></li></ol> 
<h3><a id="_68"></a>进阶使用</h3> 
<h4><a id="1_69"></a>1.工具栏设置</h4> 
<p>在设置工具栏之前可以利用<code>editor.getAllMenuKeys()</code>打印以下所有工具项的keys，设置的时候直接使用keys值即可<br> 1.1 <strong>toolbarKeys</strong><br> 重新配置工具栏，显示哪些菜单，以及菜单的排序、分组。<br> 【注意】可以通过 editor.getAllMenuKeys() 查询编辑器注册的所有菜单 key 。这些都可以用于 toolbarKeys 中。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> toolbarConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    toolbarKeys<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 菜单 key</span>
        <span class="token string">'headerSelect'</span><span class="token punctuation">,</span>

        <span class="token comment">// 分割线</span>
        <span class="token string">'|'</span><span class="token punctuation">,</span>

        <span class="token comment">// 菜单 key</span>
        <span class="token string">'bold'</span><span class="token punctuation">,</span> <span class="token string">'italic'</span><span class="token punctuation">,</span>

        <span class="token comment">// 菜单组，包含多个菜单</span>
        <span class="token punctuation">{<!-- --></span>
            key<span class="token operator">:</span> <span class="token string">'group-more-style'</span><span class="token punctuation">,</span> <span class="token comment">// 必填，要以 group 开头</span>
            title<span class="token operator">:</span> <span class="token string">'更多样式'</span><span class="token punctuation">,</span> <span class="token comment">// 必填</span>
            iconSvg<span class="token operator">:</span> <span class="token string">'&lt;svg&gt;....&lt;/svg&gt;'</span><span class="token punctuation">,</span> <span class="token comment">// 可选</span>
            menuKeys<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"through"</span><span class="token punctuation">,</span> <span class="token string">"code"</span><span class="token punctuation">,</span> <span class="token string">"clearStyle"</span><span class="token punctuation">]</span> <span class="token comment">// 下级菜单 key ，必填</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 继续配置其他菜单...</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>1.2 <strong>insertKeys</strong><br> 可以在原本的基础上插入工具项</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> toolbarConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    insertKeys<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
       index<span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token comment">// 插入的位置，基于当前的 toolbarKeys</span>
       keys<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'sub'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>1.3 <strong>excludeKeys</strong><br> 排除不显示工具项</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> toolbarConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 排除全屏展示工具项</span>
    excludeKeys<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'fullScreen'</span> <span class="token comment">// 排除菜单组，写菜单组 key 的值即可</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>1.4 <strong>modalAppendToBody</strong><br> 将菜单弹出的 modal 添加到 body 下，可以添加css样式控制弹出层样式。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> toolbarConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// modalAppentToBody 默认false</span>
    modalAppendToBody<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="2__125"></a>2. 上传图片设置</h4> 
<p>上传图片需要与服务器端相互配合，可能涉及到代理，网络访问权限等问题，具体逻辑是：</p> 
<pre><code>wangEditor上传图片   &gt;  服务器端将照片保存 &gt; 并放回给前端一个路径url  &gt;  使用返回的url wangEditor会自动匹配出图片。
</code></pre> 
<p>相关配置：</p> 
<pre><code class="prism language-javascript">  <span class="token keyword">const</span> editorConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
      <span class="token constant">MENU_CONF</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'uploadImage'</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          server<span class="token operator">:</span> <span class="token string">'/overview/server/uploadImage'</span><span class="token punctuation">,</span>
          <span class="token comment">// 自定义上传参数，例如传递验证的 token 等。参数会被添加到 formData 中，一起上传到服务端。</span>
          <span class="token comment">// meta: {<!-- --></span>
          <span class="token comment">//   token: 'xxx',</span>
          <span class="token comment">//   otherKey: 'yyy'</span>
          <span class="token comment">// },</span>
          <span class="token comment">// 将 meta 拼接到 url 参数中，默认 false</span>
          metaWithUrl<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>服务器端返回格式要求：</p> 
<pre><code class="prism language-javascript"><span class="token string">'POST /overview/server/uploadImage'</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"errno"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 注意：值是数字，不能是字符串</span>
    <span class="token string">"data"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"url"</span><span class="token operator">:</span> <span class="token string">"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbj-yuantu.fotomore.com%2Fcreative%2Fvcg%2Fnew%2FVCG211360573823.jpg%3FExpires%3D1643621485%26OSSAccessKeyId%3DLTAI2pb9T0vkLPEC%26Signature%3D6S5Z69RbKn%252BdGWNRKyhF7WEP%252F4o%253D%26x-oss-process%3Dimage%252Fauto-orient%252C0%252Fsaveexif%252C1%252Fresize%252Cm_lfit%252Ch_1200%252Cw_1200%252Climit_1%252Fsharpen%252C100%252Fquality%252CQ_80%252Fwatermark%252Cg_se%252Cx_0%252Cy_0%252Cimage_d2F0ZXIvdmNnLXdhdGVyLTIwMDAucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLG1fbGZpdCxoXzE3MSx3XzE3MSxsaW1pdF8x%252F&amp;refer=http%3A%2F%2Fbj-yuantu.fotomore.com&amp;app=2002&amp;size=f10000,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1647066804&amp;t=68a87d4c99a9b48e6098b9b14f3a3780"</span><span class="token punctuation">,</span> <span class="token comment">// 图片 src ，必须</span>
      <span class="token string">"alt"</span><span class="token operator">:</span> <span class="token string">"yyy"</span><span class="token punctuation">,</span> <span class="token comment">// 图片描述文字，非必须</span>
      <span class="token string">"href"</span><span class="token operator">:</span> <span class="token string">"zzz"</span> <span class="token comment">// 图片的链接，非必须</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>如果你的服务端 response body 无法按照上文规定的格式，则无法插入图片，提示失败。<br> 但你可以使用 customInsert 来自定义插入图片。<a href="https://www.wangeditor.com/v5/guide/menu-config.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%9F%E8%83%BD" rel="nofollow">官网地址</a></p> 
<h4><a id="3modal_160"></a>3.给modal设置遮罩层</h4> 
<p>3.1 在Toobar和Editor上添加一层div做遮罩</p> 
<pre><code class="prism language-html">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>write_container<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
	  <span class="token comment">&lt;!-- mask为遮罩层 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>mask<span class="token punctuation">'</span></span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{<!-- -->{<!-- --></span> <span class="token attr-name"><span class="token namespace">display:</span></span> <span class="token attr-name">modalShow</span> <span class="token attr-name">?</span> <span class="token attr-name">'block'</span> <span class="token attr-name">:</span> <span class="token attr-name">'none'}}</span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{<!-- -->{<!-- --></span> <span class="token attr-name"><span class="token namespace">backgroundColor:</span></span> <span class="token attr-name">'white'}}</span><span class="token punctuation">&gt;</span></span>
        &lt;Button type='primary' onClick={() =&gt; hanldeSave()}&gt;保存<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{<!-- -->{<!-- --></span> <span class="token attr-name"><span class="token namespace">border:</span></span> <span class="token attr-name">'1px</span> <span class="token attr-name">solid</span> <span class="token attr-name">#ccc',</span> <span class="token attr-name"><span class="token namespace">zIndex:</span></span> <span class="token attr-name">100}}</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Toolbar</span>
            <span class="token attr-name">editor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{editor}</span>
            <span class="token attr-name">defaultConfig</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{toolbarConfig}</span>
            <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span>
            <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{<!-- -->{<!-- --></span> <span class="token attr-name"><span class="token namespace">borderBottom:</span></span> <span class="token attr-name">'1px</span> <span class="token attr-name">solid</span> <span class="token attr-name">#ccc'</span> <span class="token attr-name">}}</span>
        <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
        &lt;Editor
            defaultConfig={editorConfig}
            // defaultContent={defaultContent}
            defaultHtml={defaultHtml}
            mode="default"
            style={<!-- -->{ height: '91vh'}}
        /&gt;
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>3.2 给遮罩div设置css样式</p> 
<pre><code class="prism language-css"><span class="token comment">/* 设置modal弹框位置及样式 */</span>
<span class="token selector">.w-e-modal</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 9999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.mask</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* 设置遮罩层的权重，小于modal */</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>3.3 利用react的state控制mask的显示和隐藏</p> 
<pre><code class="prism language-javascript"> <span class="token keyword">const</span> editorConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
 	  <span class="token comment">// 提示文字</span>
      placeholder<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token comment">// 控制编辑区自动获取焦点</span>
      autoFocus<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token function">onCreated</span><span class="token punctuation">(</span><span class="token parameter">editor</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
        <span class="token function">setEditor</span><span class="token punctuation">(</span>editor<span class="token punctuation">)</span>
        <span class="token comment">// 获取所有菜单</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'aaaaa'</span><span class="token punctuation">,</span> editor<span class="token punctuation">.</span><span class="token function">getAllMenuKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 监听所有监控弹出框</span>
        editor<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'modalOrPanelShow'</span><span class="token punctuation">,</span> <span class="token parameter">modalOrPanel</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 因为下拉框也算弹出，所以要只对modal做遮罩，需要处理</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>modalOrPanel<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">'modal'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
          <span class="token function">setModalShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        editor<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'modalOrPanelHide'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 隐藏蒙层</span>
          <span class="token function">setModalShow</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function-variable function">hanldeSave</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'innerHtml'</span><span class="token punctuation">,</span> editor<span class="token punctuation">.</span><span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token comment">// 记录下 editor 实例，重要！</span>
  <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="4_235"></a>4.设置默认展示内容</h4> 
<p>wangEditor可以识别两种形式的内容，一种<code>纯文本字符串</code>，另一种是<code>html形式的字符串</code><br> 所以如果需要在编辑区默认展示某些内容时，需要有准备好的字符串放在<code>defaultHtml</code>中,正常来说需要从服务器端获取。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> defaultHtml <span class="token operator">=</span> <span class="token string">'&lt;h1 style="text-align: center;"&gt;测试&lt;/h1&gt;&lt;p style="text-indent: 2em;"&gt;&lt;span style="color: rgb(231, 95, 51);"&gt;hello World!!!&lt;/span&gt;&lt;/p&gt;'</span>
</code></pre> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{<!-- -->{<!-- --></span> <span class="token attr-name"><span class="token namespace">border:</span></span> <span class="token attr-name">'1px</span> <span class="token attr-name">solid</span> <span class="token attr-name">#ccc',</span> <span class="token attr-name"><span class="token namespace">zIndex:</span></span> <span class="token attr-name">100}}</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Toolbar</span>
        <span class="token attr-name">editor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{editor}</span>
        <span class="token attr-name">defaultConfig</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{toolbarConfig}</span>
        <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span>
        <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{<!-- -->{<!-- --></span> <span class="token attr-name"><span class="token namespace">borderBottom:</span></span> <span class="token attr-name">'1px</span> <span class="token attr-name">solid</span> <span class="token attr-name">#ccc'</span> <span class="token attr-name">}}</span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Editor</span>
        <span class="token attr-name">defaultConfig</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{editorConfig}</span>
        <span class="token attr-name">defaultHtml</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{defaultHtml}</span>
        <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span>
        <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{<!-- -->{<!-- --></span> <span class="token attr-name"><span class="token namespace">height:</span></span> <span class="token attr-name">'91vh'}}</span>
    <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="5cssword_259"></a>5.添加css样式，尽量贴近word文档形式</h4> 
<pre><code class="prism language-css"><span class="token comment">/* 自定义外部容器 */</span>
<span class="token selector">.write_container</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.w-e-modal</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 9999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.mask</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.w-e-text-container</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #F2F2F2<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.w-e-scroll</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 15%<span class="token punctuation">;</span>
  <span class="token comment">/* padding-bottom: 20px; */</span>
<span class="token punctuation">}</span>

<span class="token selector">.w-e-scroll #w-e-textarea-1</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="6_296"></a>6.效果图</h4> 
<p><img src="https://images2.imgbox.com/9c/ff/Dwf3qyRX_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_298"></a>总结</h3> 
<p>简单的做了一个小 demo，还有很多设置项，详情移步<a href="https://www.wangeditor.com/v5/" rel="nofollow">wangEditor</a>官网<br> (๑•̀ㅂ•́)و✧</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b63fd6cdfbaf4a6fe4c16d875a5abd0d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">向word文档中插入文字和图片</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a7d5a249195564a204b0031fa02831e0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">apifox介绍及使用（1）。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>