<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨57 - ITå­¦ä¹ è€…åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨57" />
<meta property="og:description" content="ç›®å½•
3. æ¨¡æ¿edit_entry
edit_entry.html
4. é“¾æ¥åˆ°é¡µé¢edit_entry
topic.html
19.2 åˆ›å»ºç”¨æˆ·è´¦æˆ·
19.2.1 åº”ç”¨ç¨‹åº users
1. å°†åº”ç”¨ç¨‹åºusersæ·»åŠ åˆ°settings.pyä¸­
settings.py
2. åŒ…å«åº”ç”¨ç¨‹åºusersçš„URL
urls.py
19.2.2 ç™»å½•é¡µé¢
urls.py
1. æ¨¡æ¿login.html
login.html
2. é“¾æ¥åˆ°ç™»å½•é¡µé¢
base.html
3. ä½¿ç”¨ç™»å½•é¡µé¢
å¾€æœŸå¿«é€Ÿä¼ é€é—¨ğŸ‘†ï¼ˆåœ¨æ–‡ç« æœ€åï¼‰ï¼š
æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼æ¬¢è¿è®¢é˜…æ”¶è—ï¼ä¸“æ å°†æŒç»­æ›´æ–°ï¼
from django.shortcuts import render --snip-- from .models import Topic, Entry from .forms import TopicForm, EntryForm --snip-- def edit_entry(request, entry_id): &#34;&#34;&#34;ç¼–è¾‘æ—¢æœ‰æ¡ç›®&#34;&#34;&#34; 1 entry = Entry.objects.get(id=entry_id) topic = entry.topic if request.method != &#39;POST&#39;: # åˆæ¬¡è¯·æ±‚ï¼Œä½¿ç”¨å½“å‰æ¡ç›®å¡«å……è¡¨å• 2 form = EntryForm(instance=entry) else: # POSTæäº¤çš„æ•°æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç† 3 form = EntryForm(instance=entry, data=request." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a6f6660ecfbd037eeea8f1aea5e90b3a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T00:00:00+08:00" />
<meta property="article:modified_time" content="2024-01-03T00:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ITå­¦ä¹ è€…åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ITå­¦ä¹ è€…åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨57</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/47/4d/OVCNwUKY_o.gif"></p> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="3.%20%E6%A8%A1%E6%9D%BFedit_entry-toc" style="margin-left:40px;"><a href="#3.%20%E6%A8%A1%E6%9D%BFedit_entry" rel="nofollow">3. æ¨¡æ¿edit_entry</a></p> 
<p id="edit_entry.html-toc" style="margin-left:120px;"><a href="#edit_entry.html" rel="nofollow">edit_entry.html</a></p> 
<p id="4.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E9%A1%B5%E9%9D%A2edit_entry-toc" style="margin-left:80px;"><a href="#4.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E9%A1%B5%E9%9D%A2edit_entry" rel="nofollow">4. é“¾æ¥åˆ°é¡µé¢edit_entry</a></p> 
<p id="topic.html-toc" style="margin-left:120px;"><a href="#topic.html" rel="nofollow">topic.html</a></p> 
<p id="19.2%20%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7-toc" style="margin-left:80px;"><a href="#19.2%20%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7" rel="nofollow">19.2 åˆ›å»ºç”¨æˆ·è´¦æˆ·</a></p> 
<p id="19.2.1%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%20users-toc" style="margin-left:120px;"><a href="#19.2.1%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%20users" rel="nofollow">19.2.1 åº”ç”¨ç¨‹åº users</a></p> 
<p id="1.%20%E5%B0%86%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8Fusers%E6%B7%BB%E5%8A%A0%E5%88%B0settings.py%E4%B8%AD-toc" style="margin-left:160px;"><a href="#1.%20%E5%B0%86%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8Fusers%E6%B7%BB%E5%8A%A0%E5%88%B0settings.py%E4%B8%AD" rel="nofollow">1. å°†åº”ç”¨ç¨‹åºusersæ·»åŠ åˆ°settings.pyä¸­</a></p> 
<p id="-toc" style="margin-left:160px;"></p> 
<p id="settings.py-toc" style="margin-left:200px;"><a href="#settings.py" rel="nofollow">settings.py</a></p> 
<p id="2.%20%E5%8C%85%E5%90%AB%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8Fusers%E7%9A%84URL-toc" style="margin-left:160px;"><a href="#2.%20%E5%8C%85%E5%90%AB%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8Fusers%E7%9A%84URL" rel="nofollow">2. åŒ…å«åº”ç”¨ç¨‹åºusersçš„URL</a></p> 
<p id="urls.py-toc" style="margin-left:200px;"><a href="#urls.py" rel="nofollow">urls.py</a></p> 
<p id="19.2.2%20%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2-toc" style="margin-left:80px;"><a href="#19.2.2%20%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2" rel="nofollow">19.2.2 ç™»å½•é¡µé¢</a></p> 
<p id="urls.py-toc" style="margin-left:120px;"><a href="#urls.py" rel="nofollow">urls.py</a></p> 
<p id="1.%20%E6%A8%A1%E6%9D%BFlogin.html-toc" style="margin-left:80px;"><a href="#1.%20%E6%A8%A1%E6%9D%BFlogin.html" rel="nofollow">1. æ¨¡æ¿login.html</a></p> 
<p id="login.html-toc" style="margin-left:120px;"><a href="#login.html" rel="nofollow">login.html</a></p> 
<p id="2.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2-toc" style="margin-left:80px;"><a href="#2.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2" rel="nofollow">2. é“¾æ¥åˆ°ç™»å½•é¡µé¢</a></p> 
<p id="base.html-toc" style="margin-left:120px;"><a href="#base.html" rel="nofollow">base.html</a></p> 
<p id="3.%20%E4%BD%BF%E7%94%A8%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2-toc" style="margin-left:80px;"><a href="#3.%20%E4%BD%BF%E7%94%A8%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2" rel="nofollow">3. ä½¿ç”¨ç™»å½•é¡µé¢</a></p> 
<p id="%E5%BE%80%E6%9C%9F%E5%BF%AB%E9%80%9F%E4%BC%A0%E9%80%81%E9%97%A8%F0%9F%91%86%EF%BC%88%E5%9C%A8%E6%96%87%E7%AB%A0%E6%9C%80%E5%90%8E%EF%BC%89%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E5%BE%80%E6%9C%9F%E5%BF%AB%E9%80%9F%E4%BC%A0%E9%80%81%E9%97%A8%F0%9F%91%86%EF%BC%88%E5%9C%A8%E6%96%87%E7%AB%A0%E6%9C%80%E5%90%8E%EF%BC%89%EF%BC%9A" rel="nofollow">å¾€æœŸå¿«é€Ÿä¼ é€é—¨ğŸ‘†ï¼ˆåœ¨æ–‡ç« æœ€åï¼‰ï¼š</a></p> 
<p id="%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%E6%AC%A2%E8%BF%8E%E8%AE%A2%E9%98%85%E6%94%B6%E8%97%8F%EF%BC%81%E4%B8%93%E6%A0%8F%E5%B0%86%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%81-toc" style="margin-left:0px;"><a href="#%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%E6%AC%A2%E8%BF%8E%E8%AE%A2%E9%98%85%E6%94%B6%E8%97%8F%EF%BC%81%E4%B8%93%E6%A0%8F%E5%B0%86%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%81" rel="nofollow">æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼æ¬¢è¿è®¢é˜…æ”¶è—ï¼ä¸“æ å°†æŒç»­æ›´æ–°ï¼</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p style="text-align:center;">Â </p> 
<p style="text-align:center;"><img alt="" height="234" src="https://images2.imgbox.com/7f/a5/8X37EqJY_o.png" width="373"></p> 
<pre><code class="language-python">from django.shortcuts import render
--snip--
from .models import Topic, Entry
from .forms import TopicForm, EntryForm
--snip--
def edit_entry(request, entry_id):
 """ç¼–è¾‘æ—¢æœ‰æ¡ç›®"""
1 entry = Entry.objects.get(id=entry_id)
topic = entry.topic
 if request.method != 'POST':
 # åˆæ¬¡è¯·æ±‚ï¼Œä½¿ç”¨å½“å‰æ¡ç›®å¡«å……è¡¨å•
2 form = EntryForm(instance=entry)
 else:
 # POSTæäº¤çš„æ•°æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç†
3 form = EntryForm(instance=entry, data=request.POST)
 if form.is_valid():
4 form.save()
5 return HttpResponseRedirect(reverse('learning_logs:topic',
 args=[topic.id]))
 context = {'entry': entry, 'topic': topic, 'form': form}
 return render(request, 'learning_logs/edit_entry.html', context)</code></pre> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬é¦–å…ˆéœ€è¦å¯¼å…¥æ¨¡å‹Entryã€‚åœ¨1å¤„ï¼Œæˆ‘ä»¬è·å–ç”¨æˆ·è¦ä¿®æ”¹çš„æ¡ç›®å¯¹è±¡ï¼Œä»¥åŠä¸è¯¥æ¡ç›®ç›¸ å…³è”çš„ä¸»é¢˜ã€‚åœ¨è¯·æ±‚æ–¹æ³•ä¸ºGETæ—¶å°†æ‰§è¡Œçš„ifä»£ç å—ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å®å‚instance=entryåˆ›å»ºä¸€ä¸ª EntryFormå®ä¾‹ï¼ˆè§2ï¼‰ã€‚è¿™ä¸ªå®å‚è®©Djangoåˆ›å»ºä¸€ä¸ªè¡¨å•ï¼Œå¹¶ä½¿ç”¨æ—¢æœ‰æ¡ç›®å¯¹è±¡ä¸­çš„ä¿¡æ¯å¡«å……å®ƒã€‚ ç”¨æˆ·å°†çœ‹åˆ°æ—¢æœ‰çš„æ•°æ®ï¼Œå¹¶èƒ½å¤Ÿç¼–è¾‘å®ƒä»¬ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">å¤„ç†POSTè¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬ä¼ é€’å®å‚instance=entryå’Œdata=request.POSTï¼ˆè§3ï¼‰ï¼Œè®©Djangoæ ¹ æ®æ—¢æœ‰æ¡ç›®å¯¹è±¡åˆ›å»ºä¸€ä¸ªè¡¨å•å®ä¾‹ï¼Œå¹¶æ ¹æ®request.POSTä¸­çš„ç›¸å…³æ•°æ®å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚ç„¶åï¼Œæˆ‘ ä»¬æ£€æŸ¥è¡¨å•æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæœ‰æ•ˆï¼Œå°±è°ƒç”¨save()ï¼Œä¸”ä¸æŒ‡å®šä»»ä½•å®å‚ï¼ˆè§4ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é‡ å®šå‘åˆ°æ˜¾ç¤ºæ¡ç›®æ‰€å±ä¸»é¢˜çš„é¡µé¢ï¼ˆè§5ï¼‰ï¼Œç”¨æˆ·å°†åœ¨å…¶ä¸­çœ‹åˆ°å…¶ç¼–è¾‘çš„æ¡ç›®çš„æ–°ç‰ˆæœ¬ã€‚</p> 
 <h3 id="3.%20%E6%A8%A1%E6%9D%BFedit_entry" style="text-align:center;">3. æ¨¡æ¿edit_entry</h3> 
 <p style="text-align:center;">ä¸‹é¢æ˜¯æ¨¡æ¿edit_entry.htmlï¼Œå®ƒä¸æ¨¡æ¿new_entry.htmlç±»ä¼¼ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h5 id="edit_entry.html" style="text-align:center;">edit_entry.html</h5> 
</blockquote> 
<pre><code class="language-python">{% extends "learning_logs/base.html" %}
{% block content %}
 &lt;p&gt;&lt;a href="{% url 'learning_logs:topic' topic.id %}"&gt;{<!-- -->{ topic }}&lt;/a&gt;&lt;/p&gt;
 &lt;p&gt;Edit entry:&lt;/p&gt;
1 &lt;form action="{% url 'learning_logs:edit_entry' entry.id %}" method='post'&gt;
 {% csrf_token %}
 {<!-- -->{ form.as_p }}
2 &lt;button name="submit"&gt;save changes&lt;/button&gt;
 &lt;/form&gt;
{% endblock content %}</code></pre> 
<blockquote> 
 <p style="text-align:center;">åœ¨1å¤„ï¼Œå®å‚actionå°†è¡¨å•å‘å›ç»™å‡½æ•°edit_entry()è¿›è¡Œå¤„ç†ã€‚åœ¨æ ‡ç­¾{% url %}ä¸­ï¼Œæˆ‘ä»¬å°† æ¡ç›®IDä½œä¸ºä¸€ä¸ªå®å‚ï¼Œè®©è§†å›¾å¯¹è±¡èƒ½å¤Ÿä¿®æ”¹æ­£ç¡®çš„æ¡ç›®å¯¹è±¡ã€‚æˆ‘ä»¬å°†æäº¤æŒ‰é’®å‘½åä¸ºsave changesï¼Œä»¥æé†’ç”¨æˆ·ï¼šå•å‡»è¯¥æŒ‰é’®å°†ä¿å­˜æ‰€åšçš„ç¼–è¾‘ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°æ¡ç›®ï¼ˆè§2ï¼‰ã€‚</p> 
 <h4 id="4.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E9%A1%B5%E9%9D%A2edit_entry" style="text-align:center;">4. é“¾æ¥åˆ°é¡µé¢edit_entry</h4> 
 <p style="text-align:center;">ç°åœ¨ï¼Œåœ¨æ˜¾ç¤ºç‰¹å®šä¸»é¢˜çš„é¡µé¢ä¸­ï¼Œéœ€è¦ç»™æ¯ä¸ªæ¡ç›®æ·»åŠ åˆ°é¡µé¢edit_entryçš„é“¾æ¥ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h5 id="topic.html" style="text-align:center;">topic.html</h5> 
</blockquote> 
<pre><code class="language-python">--snip--
 {% for entry in entries %}
 &lt;li&gt;
 &lt;p&gt;{<!-- -->{ entry.date_added|date:'M d, Y H:i' }}&lt;/p&gt;
 &lt;p&gt;{<!-- -->{ entry.text|linebreaks }}&lt;/p&gt;
 &lt;p&gt;
 &lt;a href="{% url 'learning_logs:edit_entry' entry.id %}"&gt;edit entry&lt;/a&gt;
 &lt;/p&gt;
 &lt;/li&gt;
--snip--</code></pre> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬å°†ç¼–è¾‘é“¾æ¥æ”¾åœ¨æ¯ä¸ªæ¡ç›®çš„æ—¥æœŸå’Œæ–‡æœ¬åé¢ã€‚åœ¨å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡æ¿æ ‡ç­¾{% url %} æ ¹æ®URLæ¨¡å¼edit_entryå’Œå½“å‰æ¡ç›®çš„IDå±æ€§ï¼ˆentry.idï¼‰æ¥ç¡®å®šURLã€‚é“¾æ¥æ–‡æœ¬ä¸º"edit entry"ï¼Œ å®ƒå‡ºç°åœ¨é¡µé¢ä¸­æ¯ä¸ªæ¡ç›®çš„åé¢ã€‚å›¾19-3æ˜¾ç¤ºäº†åŒ…å«è¿™äº›é“¾æ¥æ—¶ï¼Œæ˜¾ç¤ºç‰¹å®šä¸»é¢˜çš„é¡µé¢æ˜¯ä»€ä¹ˆ æ ·çš„ã€‚</p> 
</blockquote> 
<p style="text-align:center;"><img alt="" height="568" src="https://images2.imgbox.com/b7/78/aDlXX5vQ_o.png" width="795"></p> 
<blockquote> 
 <p style="text-align:center;">è‡³æ­¤ï¼Œâ€œå­¦ä¹ ç¬”è®°â€å·²å…·å¤‡äº†éœ€è¦çš„å¤§éƒ¨åˆ†åŠŸèƒ½ã€‚ç”¨æˆ·å¯æ·»åŠ ä¸»é¢˜å’Œæ¡ç›®ï¼Œè¿˜å¯æ ¹æ®éœ€è¦æŸ¥ çœ‹ä»»ä½•ä¸€ç»„æ¡ç›®ã€‚åœ¨ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç”¨æˆ·æ³¨å†Œç³»ç»Ÿï¼Œè®©ä»»ä½•äººéƒ½å¯å‘â€œå­¦ä¹ ç¬”è®°â€ç”³è¯· è´¦æˆ·ï¼Œå¹¶åˆ›å»ºè‡ªå·±çš„ä¸»é¢˜å’Œæ¡ç›®ã€‚</p> 
</blockquote> 
<h4 id="19.2%20%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7" style="text-align:center;">19.2 åˆ›å»ºç”¨æˆ·è´¦æˆ·</h4> 
<blockquote> 
 <p style="text-align:center;">åœ¨è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªç”¨æˆ·æ³¨å†Œå’Œèº«ä»½éªŒè¯ç³»ç»Ÿï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæ³¨å†Œè´¦æˆ·ï¼Œè¿›è€Œç™»å½•å’Œæ³¨é”€ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼Œå…¶ä¸­åŒ…å«ä¸å¤„ç†ç”¨æˆ·è´¦æˆ·ç›¸å…³çš„æ‰€æœ‰åŠŸèƒ½ã€‚æˆ‘ä»¬è¿˜å°†å¯¹æ¨¡å‹ Topicç¨åšä¿®æ”¹ï¼Œè®©æ¯ä¸ªä¸»é¢˜éƒ½å½’å±äºç‰¹å®šç”¨æˆ·ã€‚</p> 
</blockquote> 
<h5 id="19.2.1%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%20users" style="text-align:center;">19.2.1 åº”ç”¨ç¨‹åº users</h5> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬é¦–å…ˆä½¿ç”¨å‘½ä»¤startappæ¥åˆ›å»ºä¸€ä¸ªåä¸ºusersçš„åº”ç”¨ç¨‹åºï¼š</p> 
</blockquote> 
<pre><code class="language-python">(ll_env)learning_log$ python manage.py startapp users
(ll_env)learning_log$ ls
1 db.sqlite3 learning_log learning_logs ll_env manage.py users
(ll_env)learning_log$ ls users
2 admin.py __init__.py migrations models.py tests.py views.py</code></pre> 
<blockquote> 
 <p style="text-align:center;">è¿™ä¸ªå‘½ä»¤æ–°å»ºä¸€ä¸ªåä¸ºusersçš„ç›®å½•ï¼ˆè§1ï¼‰ï¼Œå…¶ç»“æ„ä¸åº”ç”¨ç¨‹åºlearning_logsç›¸åŒï¼ˆè§2ï¼‰ã€‚</p> 
 <p style="text-align:center;"></p> 
 <h6 id="1.%20%E5%B0%86%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8Fusers%E6%B7%BB%E5%8A%A0%E5%88%B0settings.py%E4%B8%AD" style="text-align:center;">1. å°†åº”ç”¨ç¨‹åºusersæ·»åŠ åˆ°settings.pyä¸­</h6> 
 <h6 style="text-align:center;"></h6> 
 <p style="text-align:center;">åœ¨settings.pyä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªæ–°çš„åº”ç”¨ç¨‹åºæ·»åŠ åˆ°INSTALLED_APPSä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p> 
 <p style="text-align:center;"></p> 
 <h6 id="settings.py" style="text-align:center;">settings.py</h6> 
</blockquote> 
<pre><code class="language-python">--snip--
INSTALLED_APPS = (
 --snip--
 # æˆ‘çš„åº”ç”¨ç¨‹åº
 'learning_logs',
 'users',
)
--snip-- </code></pre> 
<blockquote> 
 <p style="text-align:center;">è¿™æ ·ï¼ŒDjangoå°†æŠŠåº”ç”¨ç¨‹åºusersåŒ…å«åˆ°é¡¹ç›®ä¸­ã€‚</p> 
 <p style="text-align:center;"></p> 
 <h6 id="2.%20%E5%8C%85%E5%90%AB%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8Fusers%E7%9A%84URL" style="text-align:center;">2. åŒ…å«åº”ç”¨ç¨‹åºusersçš„URL</h6> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸­çš„urls.pyï¼Œä½¿å…¶åŒ…å«æˆ‘ä»¬å°†ä¸ºåº”ç”¨ç¨‹åºuserså®šä¹‰çš„URLï¼š</p> 
 <p style="text-align:center;"></p> 
 <h6 id="urls.py" style="text-align:center;">urls.py</h6> 
</blockquote> 
<pre><code class="language-python">from django.conf.urls import include, url
from django.contrib import admin
urlpatterns = [
 url(r'^admin/', include(admin.site.urls)),
 url(r'^users/', include('users.urls', namespace='users')),
 url(r'', include('learning_logs.urls', namespace='learning_logs')),
] </code></pre> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬æ·»åŠ äº†ä¸€è¡Œä»£ç ï¼Œä»¥åŒ…å«åº”ç”¨ç¨‹åºusersä¸­çš„æ–‡ä»¶urls.pyã€‚è¿™è¡Œä»£ç ä¸ä»»ä½•ä»¥å•è¯users æ‰“å¤´çš„URLï¼ˆå¦‚http://localhost:8000/users/login/ï¼‰éƒ½åŒ¹é…ã€‚æˆ‘ä»¬è¿˜åˆ›å»ºäº†å‘½åç©ºé—´'users'ï¼Œä»¥ä¾¿ å°†åº”ç”¨ç¨‹åºlearning_logsçš„URLåŒåº”ç”¨ç¨‹åºusersçš„URLåŒºåˆ†å¼€æ¥ã€‚</p> 
</blockquote> 
<h4 id="19.2.2%20%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2" style="text-align:center;">19.2.2 ç™»å½•é¡µé¢</h4> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬é¦–å…ˆæ¥å®ç°ç™»å½•é¡µé¢çš„åŠŸèƒ½ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Djangoæä¾›çš„é»˜è®¤ç™»å½•è§†å›¾ï¼Œå› æ­¤URL æ¨¡å¼ä¼šç¨æœ‰ä¸åŒã€‚åœ¨ç›®å½•learning_log/users/ä¸­ï¼Œæ–°å»ºä¸€ä¸ªåä¸ºurls.pyçš„æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ å¦‚ä¸‹ ä»£ç ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h5 style="text-align:center;">urls.py</h5> 
</blockquote> 
<pre><code class="language-python">"""ä¸ºåº”ç”¨ç¨‹åºuserså®šä¹‰URLæ¨¡å¼"""
from django.conf.urls import url
1 from django.contrib.auth.views import login
from . import views
urlpatterns = [
 # ç™»å½•é¡µé¢
2 url(r'^login/$', login, {'template_name': 'users/login.html'},
 name='login'),
] </code></pre> 
<blockquote> 
 <p style="text-align:center;">æˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº†é»˜è®¤è§†å›¾loginï¼ˆè§1ï¼‰ã€‚ç™»å½•é¡µé¢çš„URLæ¨¡å¼ä¸URL http://localhost:8000/ users/login/åŒ¹é…ï¼ˆè§2ï¼‰ã€‚è¿™ä¸ªURLä¸­çš„å•è¯usersè®©Djangoåœ¨users/urls.pyä¸­æŸ¥æ‰¾ï¼Œè€Œå•è¯loginè®© å®ƒå°†è¯·æ±‚å‘é€ç»™Djangoé»˜è®¤è§†å›¾loginï¼ˆè¯·æ³¨æ„ï¼Œè§†å›¾å®å‚ä¸ºloginï¼Œè€Œä¸æ˜¯views.loginï¼‰ã€‚é‰´äº æˆ‘ä»¬æ²¡æœ‰ç¼–å†™è‡ªå·±çš„è§†å›¾å‡½æ•°ï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸€ä¸ªå­—å…¸ï¼Œå‘Šè¯‰Djangoå»å“ªé‡ŒæŸ¥æ‰¾æˆ‘ä»¬å°†ç¼–å†™çš„æ¨¡æ¿ã€‚ è¿™ä¸ªæ¨¡æ¿åŒ…å«åœ¨åº”ç”¨ç¨‹åºusersè€Œä¸æ˜¯learning_logsä¸­ã€‚</p> 
 <h4 id="1.%20%E6%A8%A1%E6%9D%BFlogin.html" style="text-align:center;">1. æ¨¡æ¿login.html</h4> 
 <p style="text-align:center;">ç”¨æˆ·è¯·æ±‚ç™»å½•é¡µé¢æ—¶ï¼ŒDjangoå°†ä½¿ç”¨å…¶é»˜è®¤è§†å›¾loginï¼Œä½†æˆ‘ä»¬ä¾ç„¶éœ€è¦ä¸ºè¿™ä¸ªé¡µé¢æä¾›æ¨¡ æ¿ã€‚ä¸ºæ­¤ï¼Œåœ¨ç›®å½•learning_log/users/ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºtemplatesçš„ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªåä¸º usersçš„ç›®å½•ã€‚ä»¥ä¸‹æ˜¯æ¨¡æ¿login.htmlï¼Œä½ åº”å°†å…¶å­˜å‚¨åˆ°ç›®å½•learning_log/users/templates/users/ä¸­ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h5 id="login.html" style="text-align:center;">login.html</h5> 
</blockquote> 
<pre><code class="language-python">{% extends "learning_logs/base.html" %}
{% block content %}
1 {% if form.errors %}
&lt;p&gt;Your username and password didn't match. Please try again.&lt;/p&gt;
{% endif %}
2 &lt;form method="post" action="{% url 'users:login' %}"&gt;
{% csrf_token %}
3 {<!-- -->{ form.as_p }}
4 &lt;button name="submit"&gt;log in&lt;/button&gt;
5 &lt;input type="hidden" name="next" value="{% url 'learning_logs:index' %}" /&gt;
 &lt;/form&gt; 
{% endblock content %} </code></pre> 
<blockquote> 
 <p style="text-align:center;">è¿™ä¸ªæ¨¡æ¿ç»§æ‰¿äº†base.htmlï¼Œæ—¨åœ¨ç¡®ä¿ç™»å½•é¡µé¢çš„å¤–è§‚ä¸ç½‘ç«™çš„å…¶ä»–é¡µé¢ç›¸åŒã€‚è¯·æ³¨æ„ï¼Œä¸€ä¸ª åº”ç”¨ç¨‹åºä¸­çš„æ¨¡æ¿å¯ç»§æ‰¿å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­çš„æ¨¡æ¿ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">å¦‚æœè¡¨å•çš„errorså±æ€§è¢«è®¾ç½®ï¼Œæˆ‘ä»¬å°±æ˜¾ç¤ºä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼ˆè§1ï¼‰ï¼ŒæŒ‡å‡ºè¾“å…¥çš„ç”¨æˆ·åâ€”å¯†ç  å¯¹ä¸æ•°æ®åº“ä¸­å­˜å‚¨çš„ä»»ä½•ç”¨æˆ·åâ€”å¯†ç å¯¹éƒ½ä¸åŒ¹é…ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">æˆ‘ä»¬è¦è®©ç™»å½•è§†å›¾å¤„ç†è¡¨å•ï¼Œå› æ­¤å°†å®å‚actionè®¾ç½®ä¸ºç™»å½•é¡µé¢çš„URLï¼ˆè§2ï¼‰ã€‚ç™»å½•è§†å›¾ å°†ä¸€ä¸ªè¡¨å•å‘é€ç»™æ¨¡æ¿ï¼Œåœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬æ˜¾ç¤ºè¿™ä¸ªè¡¨å•ï¼ˆè§3ï¼‰å¹¶æ·»åŠ ä¸€ä¸ªæäº¤æŒ‰é’®ï¼ˆè§4ï¼‰ã€‚ åœ¨5å¤„ï¼Œæˆ‘ä»¬åŒ…å«äº†ä¸€ä¸ªéšè—çš„è¡¨å•å…ƒç´ â€”â€”'next'ï¼Œå…¶ä¸­çš„å®å‚valueå‘Šè¯‰Djangoåœ¨ç”¨æˆ·æˆåŠŸç™» å½•åå°†å…¶é‡å®šå‘åˆ°ä»€ä¹ˆåœ°æ–¹â€”â€”åœ¨è¿™é‡Œæ˜¯ä¸»é¡µã€‚</p> 
 <p style="text-align:center;"></p> 
 <h4 id="2.%20%E9%93%BE%E6%8E%A5%E5%88%B0%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2" style="text-align:center;">2. é“¾æ¥åˆ°ç™»å½•é¡µé¢</h4> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">ä¸‹é¢åœ¨base.htmlä¸­æ·»åŠ åˆ°ç™»å½•é¡µé¢çš„é“¾æ¥ï¼Œè®©æ‰€æœ‰é¡µé¢éƒ½åŒ…å«å®ƒã€‚ç”¨æˆ·å·²ç™»å½•æ—¶ï¼Œæˆ‘ä»¬ä¸æƒ³ æ˜¾ç¤ºè¿™ä¸ªé“¾æ¥ï¼Œå› æ­¤å°†å®ƒåµŒå¥—åœ¨ä¸€ä¸ª{% if %}æ ‡ç­¾ä¸­ï¼š</p> 
 <p style="text-align:center;"></p> 
 <h5 id="base.html" style="text-align:center;">base.html</h5> 
</blockquote> 
<pre><code class="language-python">&lt;p&gt;
 &lt;a href="{% url 'learning_logs:index' %}"&gt;Learning Log&lt;/a&gt; -
 &lt;a href="{% url 'learning_logs:topics' %}"&gt;Topics&lt;/a&gt; -
1 {% if user.is_authenticated %}
2 Hello, {<!-- -->{ user.username }}.
{% else %}
3 &lt;a href="{% url 'users:login' %}"&gt;log in&lt;/a&gt;
{% endif %}
&lt;/p&gt;
{% block content %}{% endblock content %} </code></pre> 
<blockquote> 
 <p style="text-align:center;">åœ¨Djangoèº«ä»½éªŒè¯ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæ¨¡æ¿éƒ½å¯ä½¿ç”¨å˜é‡userï¼Œè¿™ä¸ªå˜é‡æœ‰ä¸€ä¸ªis_authenticated å±æ€§ï¼šå¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œè¯¥å±æ€§å°†ä¸ºTrueï¼Œå¦åˆ™ä¸ºFalseã€‚è¿™è®©ä½ èƒ½å¤Ÿå‘å·²é€šè¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ· æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ï¼Œè€Œå‘æœªé€šè¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ˜¾ç¤ºå¦ä¸€æ¡æ¶ˆæ¯ã€‚</p> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‘å·²ç™»å½•çš„ç”¨æˆ·æ˜¾ç¤ºä¸€æ¡é—®å€™è¯­ï¼ˆè§1ï¼‰ã€‚å¯¹äºå·²é€šè¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ï¼Œè¿˜è®¾ ç½®äº†å±æ€§usernameï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå±æ€§æ¥ä¸ªæ€§åŒ–é—®å€™è¯­ï¼Œè®©ç”¨æˆ·çŸ¥é“ä»–å·²ç™»å½•ï¼ˆè§2ï¼‰ã€‚åœ¨3å¤„ï¼Œ å¯¹äºè¿˜æœªé€šè¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬å†æ˜¾ç¤ºä¸€ä¸ªåˆ°ç™»å½•é¡µé¢çš„é“¾æ¥ã€‚</p> 
 <p style="text-align:center;"></p> 
 <h4 id="3.%20%E4%BD%BF%E7%94%A8%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2" style="text-align:center;">3. ä½¿ç”¨ç™»å½•é¡µé¢</h4> 
 <p style="text-align:center;"></p> 
 <p style="text-align:center;">å‰é¢å»ºç«‹äº†ä¸€ä¸ªç”¨æˆ·è´¦æˆ·ï¼Œä¸‹é¢æ¥ç™»å½•ä¸€ä¸‹ï¼Œçœ‹çœ‹ç™»å½•é¡µé¢æ˜¯å¦ç®¡ç”¨ã€‚è¯·è®¿é—® http://localhost:8000/admin/ï¼Œå¦‚æœä½ ä¾ç„¶æ˜¯ä»¥ç®¡ç†å‘˜çš„èº«ä»½ç™»å½•çš„ï¼Œè¯·åœ¨é¡µçœ‰ä¸Šæ‰¾åˆ°æ³¨é”€é“¾æ¥å¹¶ å•å‡»å®ƒã€‚</p> 
 <p style="text-align:center;">æ³¨é”€åï¼Œè®¿é—®http://localhost:8000/users/login/ï¼Œä½ å°†çœ‹åˆ°ç±»ä¼¼äºå›¾19-4æ‰€ç¤ºçš„ç™»å½•é¡µé¢ã€‚è¾“å…¥ ä½ åœ¨å‰é¢è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå°†è¿›å…¥é¡µé¢indexã€‚ã€‚åœ¨è¿™ä¸ªä¸»é¡µçš„é¡µçœ‰ä¸­ï¼Œæ˜¾ç¤ºäº†ä¸€æ¡ä¸ªæ€§åŒ–é—® å€™è¯­ï¼Œå…¶ä¸­åŒ…å«ä½ çš„ç”¨æˆ·åã€‚</p> 
</blockquote> 
<hr> 
<p style="text-align:center;"><a href="https://blog.csdn.net/lzy302810/article/details/135153641?spm=1001.2014.3001.5502" title="å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨37-CSDNåšå®¢">å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨37-CSDNåšå®¢</a></p> 
<p style="text-align:center;"><a href="https://blog.csdn.net/lzy302810/article/details/135043856?spm=1001.2014.3001.5502" title="å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨25-CSDNåšå®¢">å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨25-CSDNåšå®¢</a></p> 
<p style="text-align:center;"><a href="https://blog.csdn.net/lzy302810/article/details/134917938?spm=1001.2014.3001.5502" title="å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨12-CSDNåšå®¢">å…³äºâ€œPythonâ€çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ•´ç†å¤§å…¨12-CSDNåšå®¢</a></p> 
<h2 id="%E5%BE%80%E6%9C%9F%E5%BF%AB%E9%80%9F%E4%BC%A0%E9%80%81%E9%97%A8%F0%9F%91%86%EF%BC%88%E5%9C%A8%E6%96%87%E7%AB%A0%E6%9C%80%E5%90%8E%EF%BC%89%EF%BC%9A" style="text-align:center;"><strong>å¾€æœŸå¿«é€Ÿä¼ é€é—¨ğŸ‘†ï¼ˆåœ¨æ–‡ç« æœ€åï¼‰ï¼š</strong></h2> 
<h2 id="%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%E6%AC%A2%E8%BF%8E%E8%AE%A2%E9%98%85%E6%94%B6%E8%97%8F%EF%BC%81%E4%B8%93%E6%A0%8F%E5%B0%86%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%81" style="text-align:center;"><strong><a name="t7"></a><a name="t14"></a><a name="t9"></a><a name="t10"></a><a name="t16"></a><a name="t8"></a><a name="t13"></a><a name="t11"></a>æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼æ¬¢è¿è®¢é˜…æ”¶è—ï¼ä¸“æ å°†æŒç»­æ›´æ–°ï¼</strong></h2>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2b1f375624e530b9d881903e55073c9f/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€pythonã€‘â€”â€” åˆ—è¡¨å’Œå…ƒç»„è¯¦è§£</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e3519c84e21d9a636c3be163864704bb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">é¸¿è’™å·¥ç¨‹ç›®å½•ç»“æ„</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ITå­¦ä¹ è€…åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>