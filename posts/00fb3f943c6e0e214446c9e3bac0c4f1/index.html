<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>shell中grep的用法 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="shell中grep的用法" />
<meta property="og:description" content="一：grep文本搜索
grep：强大的文本搜索工具（是一种“贪婪“的工具）
补充说明：
grep （global search regular expression(RE) and print out the
line，全面搜索正则表达式并把行打印出来）是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。用于过滤/搜索的特定字符。可使用正则表达式能多种命令配合使用，使用上十分灵活。
选项：
-a --text # 不要忽略二进制数据。 -A &lt;显示行数&gt; --after-context=&lt;显示行数&gt; # 除了显示符合范本样式的那一行之外，并显示该行之后的内容。 -b --byte-offset # 在显示符合范本样式的那一行之外，并显示该行之前的内容。 -B&lt;显示行数&gt; --before-context=&lt;显示行数&gt; # 除了显示符合样式的那一行之外，并显示该行之前的内容。 -c --count # 计算符合范本样式的列数。 -C&lt;显示行数&gt; --context=&lt;显示行数&gt;或-&lt;显示行数&gt; # 除了显示符合范本样式的那一列之外，并显示该列之前后的内容。 -d&lt;进行动作&gt; --directories=&lt;动作&gt; # 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep命令将回报信息并停止动作。 -e&lt;范本样式&gt; --regexp=&lt;范本样式&gt; # 指定字符串作为查找文件内容的范本样式。 -E --extended-regexp # 将范本样式为延伸的普通表示法来使用，意味着使用能使用扩展正则表达式。 -f&lt;范本文件&gt; --file=&lt;规则文件&gt; # 指定范本文件，其内容有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每一列的范本样式。 -F --fixed-regexp # 将范本样式视为固定字符串的列表。 -G --basic-regexp # 将范本样式视为普通的表示法来使用。 -h --no-filename # 在显示符合范本样式的那一列之前，不标示该列所属的文件名称。 -H --with-filename # 在显示符合范本样式的那一列之前，标示该列的文件名称。 -i --ignore-case # 忽略字符大小写的差别。 -l --file-with-matches # 列出文件内容符合指定的范本样式的文件名称。 -L --files-without-match # 列出文件内容不符合指定的范本样式的文件名称。 -n --line-number # 在显示符合范本样式的那一列之前，标示出该列的编号。 -q --quiet或--silent # 不显示任何信息。 -R/-r --recursive # 此参数的效果和指定“-d recurse”参数相同。 -s --no-messages # 不显示错误信息。 -v --revert-match # 反转查找。 -V --version # 显示版本信息。 -w --word-regexp # 只显示全字符合的列。 -x --line-regexp # 只显示全列符合的列。 -y # 此参数效果跟“-i”相同。 -o # 只输出文件中匹配到的部分。 规则表达式：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/00fb3f943c6e0e214446c9e3bac0c4f1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-06-14T20:53:52+08:00" />
<meta property="article:modified_time" content="2019-06-14T20:53:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">shell中grep的用法</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>一：grep文本搜索</strong></p> 
<p>grep：强大的文本搜索工具（是一种“贪婪“的工具）</p> 
<p><strong>补充说明：</strong></p> 
<blockquote> 
 <p>grep （global search regular expression(RE) and print out the<br> line，全面搜索正则表达式并把行打印出来）是一种强大的文本搜索工具，它能使用<mark>正则表达式</mark>搜索文本，并把匹配的行打印出来。用于过滤/搜索的特定字符。可使用正则表达式能多种命令配合使用，使用上十分灵活。</p> 
</blockquote> 
<p><strong>选项：</strong></p> 
<pre><code>-a --text # 不要忽略二进制数据。 
-A &lt;显示行数&gt; --after-context=&lt;显示行数&gt; # 除了显示符合范本样式的那一行之外，并显示该行之后的内容。 
-b --byte-offset # 在显示符合范本样式的那一行之外，并显示该行之前的内容。 
-B&lt;显示行数&gt; --before-context=&lt;显示行数&gt; # 除了显示符合样式的那一行之外，并显示该行之前的内容。 
-c --count # 计算符合范本样式的列数。 
-C&lt;显示行数&gt; --context=&lt;显示行数&gt;或-&lt;显示行数&gt; # 除了显示符合范本样式的那一列之外，并显示该列之前后的内容。 
-d&lt;进行动作&gt; --directories=&lt;动作&gt; # 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep命令将回报信息并停止动作。 
-e&lt;范本样式&gt; --regexp=&lt;范本样式&gt; # 指定字符串作为查找文件内容的范本样式。 
-E --extended-regexp # 将范本样式为延伸的普通表示法来使用，意味着使用能使用扩展正则表达式。 
-f&lt;范本文件&gt; --file=&lt;规则文件&gt; # 指定范本文件，其内容有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每一列的范本样式。 
-F --fixed-regexp # 将范本样式视为固定字符串的列表。 
-G --basic-regexp # 将范本样式视为普通的表示法来使用。 
-h --no-filename # 在显示符合范本样式的那一列之前，不标示该列所属的文件名称。 
-H --with-filename # 在显示符合范本样式的那一列之前，标示该列的文件名称。 
-i --ignore-case # 忽略字符大小写的差别。 
-l --file-with-matches # 列出文件内容符合指定的范本样式的文件名称。 
-L --files-without-match # 列出文件内容不符合指定的范本样式的文件名称。 
-n --line-number # 在显示符合范本样式的那一列之前，标示出该列的编号。 
-q --quiet或--silent # 不显示任何信息。 
-R/-r --recursive # 此参数的效果和指定“-d recurse”参数相同。 
-s --no-messages # 不显示错误信息。 
-v --revert-match # 反转查找。 
-V --version # 显示版本信息。 
-w --word-regexp # 只显示全字符合的列。 
-x --line-regexp # 只显示全列符合的列。 
-y # 此参数效果跟“-i”相同。 
-o # 只输出文件中匹配到的部分。 
</code></pre> 
<p><strong>规则表达式：</strong></p> 
<pre><code>^        # 锚定行的开始 如：'^grep'匹配所有以grep开头的行。 
$        # 锚定行的结束 如：'grep$'匹配所有以grep结尾的行。 
.        # 匹配一个非换行符的字符 如：'gr.p'匹配gr后接一个任意字符，然后是p。 
*         # 匹配零个或多个先前字符 如：'*grep'匹配所有一个或多个空格后紧跟grep的行。 
.*        # 一起用代表任意字符。 [] # 匹配一个指定范围内的字符，如'[Gg]rep'匹配Grep和grep。 
[^]         # 匹配一个不在指定范围内的字符，如：'[^A-FH-Z]rep'匹配不包含A-R和T-Z的一个字母开头，紧跟rep的行。 
\(..\)       # 标记匹配字符，如'\(love\)'，love被标记为1。 
\&lt;        # 锚定单词的开始，如:'\&lt;grep'匹配包含以grep开头的单词的行。 
\&gt;          # 锚定单词的结束，如'grep\&gt;'匹配包含以grep结尾的单词的行。 
x\{m\}       # 重复字符x，m次，如：'0\{5\}'匹配包含5个o的行。 
x\{m,\}       # 重复字符x,至少m次，如：'o\{5,\}'匹配至少有5个o的行。x\{m,n\} # 重复字符x，至少m次，不多于n次，如：'o\{5,10\}'匹配5--10个o的行。 
\w           # 匹配文字和数字字符，也就是[A-Za-z0-9]，如：'G\w*p'匹配以G后跟零个或多个文字或数字字符，然后是p。 
\W              # \w的反置形式，匹配一个或多个非单词字符，如点号句号等。 
\b              # 单词锁定符，如: '\bgrep\b'只匹配grep。 
</code></pre> 
<p><mark><strong>grep命令常见用法</strong></mark></p> 
<p>在文件中搜索一个单词，命令会返回一个包含 “match_pattern” 的文本行：</p> 
<pre><code>grep match_pattern file_name 
grep "match_pattern" file_name 
</code></pre> 
<p>在多个文件中查找：</p> 
<pre><code>grep "match_pattern" file_1 file_2 file_3 ... 
</code></pre> 
<p>输出除match_pattern之外的所有行 -v 选项：</p> 
<pre><code>grep -v "match_pattern" file_name
</code></pre> 
<p>标记匹配颜色 --color=auto 选项：</p> 
<pre><code>grep "match_pattern" file_name --color=auto 
</code></pre> 
<p>使用正则表达式 -E 选项：</p> 
<pre><code>grep -E "[1-9]+" 
或 
egrep "[1-9]+" 
</code></pre> 
<p>只输出文件中匹配到的部分 -o 选项：</p> 
<pre><code>echo this is a test line. | grep -o -E "[a-z]+\." line. 
echo this is a test line. | egrep -o "[a-z]+\." line. 
</code></pre> 
<p>统计文件或者文本中包含匹配字符串的行数-c 选项：</p> 
<pre><code>grep -c "text" file_name 
</code></pre> 
<p>输出包含匹配字符串的行数 -n 选项：</p> 
<pre><code>grep "text" -n file_name 
或 
cat file_name | grep "text" -n 
#多个文件 
grep "text" -n file_1 file_2 
</code></pre> 
<p>打印样式匹配所位于的字符或字节偏移：</p> 
<pre><code>echo gun is not unix | grep -b -o "not" 7:not
#一行中字符串的字符偏移是从该行的第一个字符开始计算，起始值为0。选项 **-b -o** 一般总是配合使用。 
</code></pre> 
<p>搜索多个文件并查找匹配文本在哪些文件中：</p> 
<pre><code>grep -l "text" file1 file2 file3... 
</code></pre> 
<p>grep递归搜索文件</p> 
<pre><code>在多级目录中对文本进行递归搜索：

grep "text" . -r -n        # .表示当前目录。 
</code></pre> 
<p>忽略匹配样式中的字符大小写：</p> 
<pre><code>echo "hello world" | grep -i "HELLO" hello 
</code></pre> 
<p>选项 -e 制动多个匹配样式：</p> 
<pre><code>echo this is a text line | grep -e "is" -e "line" -o is line 
#也可以使用 -f选项来匹配多个样式，在样式文件中逐行写出需要匹配的字符。
 cat patfile aaa bbb echo aaa bbb ccc ddd eee | grep -f patfile -o 
</code></pre> 
<p>在grep搜索结果中包括或者排除指定文件：</p> 
<pre><code>#只在目录中所有的.php和.html文件中递归搜索字符"main()" 
grep "main()" . -r --include *.{php,html}
#在搜索结果中排除所有README文件
grep "main()" . -r --exclude "README" 
#在搜索结果中排除filelist文件列表里的文件
grep "main()" . -r --exclude-from filelist 
</code></pre> 
<p>使用0值字节后缀的grep与xargs：</p> 
<pre><code># 测试文件：
echo "aaa" &gt; file1 
echo "bbb" &gt; file2
echo "aaa" &gt; file3 
grep "aaa" file* -lZ | xargs -0 rm 
 #执行后会删除file1和file3，grep输出用-Z选项来指定以0值字节作为终结符文件名（\0），xargs -0 读取输入并用0值字节终结符分隔文件名，然后删除匹配文件，-Z通常和-l结合使用。 
</code></pre> 
<p>grep静默输出：</p> 
<pre><code>grep -q "test" filename 
# 不会输出任何信息，如果命令运行成功返回0，失败则返回非0值。一般用于条件测试。
</code></pre> 
<p>打印出匹配文本之前或者之后的行：</p> 
<pre><code>#显示匹配某个结果之后的3行，使用 -A 选项： 
seq 10 | grep "5" -A 3 
</code></pre> 
<blockquote> 
 <p>5<br> 6<br> 7<br> 8</p> 
</blockquote> 
<pre><code># 显示匹配某个结果之前的3行，使用 -B 选项：
seq 10 | grep "5" -B 3
</code></pre> 
<blockquote> 
 <p>2<br> 3<br> 4<br> 5</p> 
</blockquote> 
<pre><code> #显示匹配某个结果的前三行和后三行，使用 -C 选项： seq 10 | grep "5" -C 3
</code></pre> 
<blockquote> 
 <p>2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8</p> 
</blockquote> 
<pre><code># 如果匹配结果有多个，会用“--”作为各匹配结果之间的分隔符：
echo -e "a\nb\nc\na\nb\nc" | grep a -A 1
</code></pre> 
<blockquote> 
 <p>a<br> b<br> ——（是–）<br> a<br> b</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/1c/e2/Gz2Irye8_o.png" alt="在这里插入图片描述"><br> <mark><strong>grep是贪婪的，只要符合都会查找出来</strong></mark><br> <img src="https://images2.imgbox.com/e3/a9/Sr4RDGiN_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c0/85/NUbE0LxO_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c3/17/WiK1Eqiw_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/d3/8a/cDnk42L6_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/36/df/viqgWcHL_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/f1/e7/S3J11ogU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/23/fc/Gmm6MmQL_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/c9/ce/Dh3E4ulM_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7403ac05d419c755e8f28a09844416b0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">centos7 生成ssl证书，搭建https地址</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8ef7403376b87973fca6d87a10ce9eae/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Caused by: java.util.ConcurrentModificationException 	at java.util.ArrayList$Itr.checkForComodificat</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>