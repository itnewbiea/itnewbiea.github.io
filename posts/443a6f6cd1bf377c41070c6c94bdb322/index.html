<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3项目中使用pinia - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue3项目中使用pinia" />
<meta property="og:description" content="vuex 4pinia 小菠萝 vuex和之前vue2使用一致
1.import { createStore } from &#39;vuex&#39; 引入文件不同 vue3组件setup写法vuex提供了hook //组件中操作store import { useStore } from &#39;vuex&#39; //提交mutations 进行修改 store.commit(&#39;increment&#39;), //dispatch 触发action 同步或者异步提交mutations store.dispatch(&#39;asyncIncrement&#39;) pinia pinia 类似RTK
pinia优化vuex。
官网
https://pinia.vuejs.org/zh/ 中文文档 https://pinia.web3doc.top/ Vue.js 状态管理库
类型安全、可扩展性以及模块化设计。 甚至让你忘记正在使用的是一个状态库。
优点：
简介
Pinia 最初是在 2019 年 11 月左右重新设计使用 Composition API 。从那时起，最初的原则仍然相同，但 Pinia 对 Vue 2 和 Vue 3 都有效，并且不需要您使用组合 API。 除了安装和 SSR 之外，两者的 API 都是相同的，并且这些文档针对 Vue 3，并在必要时提供有关 Vue 2 的注释，以便 Vue 2 和 Vue 3 用户可以阅读！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/443a6f6cd1bf377c41070c6c94bdb322/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-17T17:48:22+08:00" />
<meta property="article:modified_time" content="2023-04-17T17:48:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3项目中使用pinia</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <ol><li>vuex 4</li><li>pinia 小菠萝</li></ol> 
<p>vuex和之前vue2使用一致</p> 
<pre></pre> 
<pre><code class="language-javascript">1.import { createStore } from 'vuex' 引入文件不同

vue3组件setup写法vuex提供了hook
//组件中操作store
import { useStore } from 'vuex'
//提交mutations 进行修改
store.commit('increment'),
//dispatch 触发action 同步或者异步提交mutations
store.dispatch('asyncIncrement')</code></pre> 
<h3 id="h2-pinia"><a name="pinia"></a>pinia</h3> 
<p>pinia 类似RTK</p> 
<p>pinia优化vuex。</p> 
<p>官网</p> 
<pre></pre> 
<pre><code class="language-javascript">https://pinia.vuejs.org/zh/

中文文档
https://pinia.web3doc.top/</code></pre> 
<p>Vue.js 状态管理库</p> 
<p>类型安全、可扩展性以及模块化设计。 甚至让你忘记正在使用的是一个状态库。</p> 
<p>优点：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a0/b1/pztMofQw_o.png"></p> 
<p>简介</p> 
<p>Pinia <a href="https://github.com/vuejs/pinia/commit/06aeef54e2cad66696063c62829dac74e15fd19e" title="最初是在 2019 年 11 月左右重新设计使用">最初是在 2019 年 11 月左右重新设计使用</a> <a href="https://github.com/vuejs/composition-api" title="Composition API">Composition API</a> 。从那时起，最初的原则仍然相同，但 Pinia 对 Vue 2 和 Vue 3 都有效，并且不需要您使用组合 API。 除了安装和 SSR 之外，两者的 API 都是相同的，并且这些文档针对 Vue 3，并在必要时提供有关 Vue 2 的注释，以便 Vue 2 和 Vue 3 用户可以阅读！</p> 
<p>为什么使用pinia</p> 
<p>Pinia 是 Vue 的存储库，它允许您跨组件/页面共享状态。</p> 
<p>熟悉 Composition API，您可能会认为您已经可以通过一个简单的 <code>export const state = reactive({})</code></p> 
<p>优点</p> 
<ul><li>dev-tools 支持 
  <ul><li>跟踪动作、突变的时间线</li><li>Store 出现在使用它们的组件中</li><li>time travel 和 更容易的调试</li></ul></li><li>热模块更换 
  <ul><li>在不重新加载页面的情况下修改您的 Store</li><li>在开发时保持任何现有状态</li></ul></li><li>插件：使用插件扩展 Pinia 功能</li><li>为 JS 用户提供适当的 TypeScript 支持或 <strong>autocompletion</strong></li><li>服务器端渲染支持</li></ul> 
<p>pinia 取消mutations操作，直接通过action可以同步或者异步更新state。 action</p> 
<p>pinia中常用的三大核心：</p> 
<ol><li>state 定义数据源</li><li>action 用来修改state</li><li>getters类似计算属性进行计算</li></ol> 
<h3 id="h2--pinia"><a name="%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8pinia"></a>项目中使用pinia</h3> 
<p>安装</p> 
<pre></pre> 
<ol><li><code>cnpm i --save-dev pinia</code></li><li><code>"pinia": "^2.0.34",</code></li></ol> 
<pre></pre> 
<pre><code class="language-javascript">1.创建pinia
index.ts
//创建pinia
import { createPinia } from "pinia";

//创建pinia对象
const pinia = createPinia();

export default pinia;</code></pre> 
<pre></pre> 
<pre><code class="language-javascript">2.将pinia关联到vue项目

import { createApp } from "vue";
import "./style.css";
import App from "./App.vue";
//引入pinia
import pinia from "@/pinia/index";
//将路由关联到vue3 项目
createApp(App).use(pinia).mount("#app");</code></pre> 
<pre></pre> 
<pre><code class="language-javascript">3.使用pinia 内置api 创建模块化状态管理
创建store使用api defineStore
参数1：id唯一标识 user
参数2：为当前模块的基本配置

参数2函数式写法
export const useCounterStore = defineStore('counter', () =&gt; {
//内部类似setUp写法
const count = ref(0)
function increment() {
count.value++
}

return { count, increment }
})</code></pre> 
<p>创建一个store</p> 
<pre></pre> 
<pre><code class="language-javascript">//使用pinia 创建一个user 模块进行状态管理
import { defineStore } from "pinia";

//创建store
let userStore = defineStore("user", {
state() {
return {
//定义数据源
token: "",
};
},
//执行修改状态
actions: {
saveToken(args: string) {
this.token = args;
},
},
//属性计算
getters: {},
});

export default userStore;</code></pre> 
<p>组件setup中使用pinia</p> 
<pre></pre> 
<pre><code class="language-javascript">&lt;script setup lang="ts"&gt;
//引入对应的模块
import user from "@/pinia/module/userStore";
//执行获取store
let userStore = user();
&lt;/script&gt;
&lt;template&gt;
&lt;div&gt;商铺综合收费--{<!-- -->{ userStore.token }}&lt;/div&gt;
&lt;/template&gt;

//触发action修改state
userStore.saveToken("111")</code></pre> 
<h3 id="h2--dev-tools-">浏览器配置dev-tools 调试器</h3> 
<p>现有的dev-tools包直接在浏览器扩展程序安装。</p> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/368abddf8fe479606285a042da04d7db/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在当下互联网行情下，2023年程序员的工作真的很难找</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/42342e7bd7afd36307ef0262c94ff3ae/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">GDOUCTF web部分题解 2023</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>