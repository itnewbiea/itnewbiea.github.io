<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FastAPI从入门到实战（7）——请求体函数的参数设置 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="FastAPI从入门到实战（7）——请求体函数的参数设置" />
<meta property="og:description" content="上一篇记录了FastAPI中声明请求体的相关内容，本文记录一下零碎的函数特性和参数特性相关内容。
Pydantic schema_extra 可以使用 Config 和 schema_extra 为Pydantic模型声明一个示例:
class City(BaseModel): country:str = &#34;中国&#34; provence:str = Field(...,example = &#34;四川&#34;) # Field可以定义请求体的格式和类型 citys: Optional[List] = None population: int = Field(default=None,title=&#34;人口数&#34;,ge=1000) class Config: schema_extra = { &#34;example&#34;:{ &#34;country&#34;:&#34;中国&#34;, &#34;provence&#34;:&#34;四川&#34;, &#34;citys&#34;:[&#34;绵阳&#34;,&#34;成都&#34;,&#34;遂宁&#34;,&#34;...&#34;], &#34;population&#34;:66666666 } } Field参数设置 field同Path、Query、Body可以设置default、title等信息；具体参看源码;
def Field( default: Any = Undefined, *, default_factory: Optional[NoArgAnyCallable] = None, alias: str = None, title: str = None, description: str = None, exclude: Union[&#39;AbstractSetIntStr&#39;, &#39;MappingIntStrAny&#39;, Any] = None, include: Union[&#39;AbstractSetIntStr&#39;, &#39;MappingIntStrAny&#39;, Any] = None, const: bool = None, gt: float = None, ge: float = None, lt: float = None, le: float = None, multiple_of: float = None, allow_inf_nan: bool = None, max_digits: int = None, decimal_places: int = None, min_items: int = None, max_items: int = None, unique_items: bool = None, min_length: int = None, max_length: int = None, allow_mutation: bool = True, regex: str = None, discriminator: str = None, repr: bool = True, **extra: Any, ) Body参数设置 Body和Path、Query是一个性质的，分别声明请求体、路径参数、查询参数" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f3ddd84bf01c027bc6b664b8a82bf9a7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-28T22:24:29+08:00" />
<meta property="article:modified_time" content="2022-11-28T22:24:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">FastAPI从入门到实战（7）——请求体函数的参数设置</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>上一篇记录了FastAPI中声明请求体的相关内容，本文记录一下零碎的函数特性和参数特性相关内容。</p> 
</blockquote> 
<h3><a id="Pydantic_schema_extra_2"></a>Pydantic schema_extra</h3> 
<p>可以使用 <code>Config</code> 和 <code>schema_extra</code> 为Pydantic模型声明一个示例:</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">City</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    country<span class="token punctuation">:</span><span class="token builtin">str</span> <span class="token operator">=</span> <span class="token string">"中国"</span>
    provence<span class="token punctuation">:</span><span class="token builtin">str</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>example <span class="token operator">=</span> <span class="token string">"四川"</span><span class="token punctuation">)</span> <span class="token comment"># Field可以定义请求体的格式和类型</span>
    citys<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>List<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    population<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">"人口数"</span><span class="token punctuation">,</span>ge<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Config</span><span class="token punctuation">:</span>
        schema_extra <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">"example"</span><span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span>
                <span class="token string">"country"</span><span class="token punctuation">:</span><span class="token string">"中国"</span><span class="token punctuation">,</span>
                <span class="token string">"provence"</span><span class="token punctuation">:</span><span class="token string">"四川"</span><span class="token punctuation">,</span>
                <span class="token string">"citys"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">"绵阳"</span><span class="token punctuation">,</span><span class="token string">"成都"</span><span class="token punctuation">,</span><span class="token string">"遂宁"</span><span class="token punctuation">,</span><span class="token string">"..."</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">"population"</span><span class="token punctuation">:</span><span class="token number">66666666</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/64/08/4V8w0HzM_o.png" alt="image-20221125215909375"></p> 
<h3><a id="Field_26"></a>Field参数设置</h3> 
<blockquote> 
 <p><code>field</code>同<code>Path</code>、<code>Query</code>、<code>Body</code>可以设置default、title等信息；具体参看源码;</p> 
</blockquote> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">Field</span><span class="token punctuation">(</span>
    default<span class="token punctuation">:</span> Any <span class="token operator">=</span> Undefined<span class="token punctuation">,</span>
    <span class="token operator">*</span><span class="token punctuation">,</span>
    default_factory<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>NoArgAnyCallable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    alias<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    description<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    exclude<span class="token punctuation">:</span> Union<span class="token punctuation">[</span><span class="token string">'AbstractSetIntStr'</span><span class="token punctuation">,</span> <span class="token string">'MappingIntStrAny'</span><span class="token punctuation">,</span> Any<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    include<span class="token punctuation">:</span> Union<span class="token punctuation">[</span><span class="token string">'AbstractSetIntStr'</span><span class="token punctuation">,</span> <span class="token string">'MappingIntStrAny'</span><span class="token punctuation">,</span> Any<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    const<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    gt<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    ge<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    lt<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    le<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    multiple_of<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    allow_inf_nan<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    max_digits<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    decimal_places<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    min_items<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    max_items<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    unique_items<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    min_length<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    max_length<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    allow_mutation<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
    regex<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    discriminator<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
    <span class="token builtin">repr</span><span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token operator">**</span>extra<span class="token punctuation">:</span> Any<span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="Body_62"></a>Body参数设置</h3> 
<blockquote> 
 <p><code>Body</code>和<code>Path</code>、<code>Query</code>是一个性质的，分别声明请求体、路径参数、查询参数</p> 
</blockquote> 
<pre><code class="prism language-python"><span class="token comment"># 无 Body 额外参数</span>
<span class="token decorator annotation punctuation">@app04<span class="token punctuation">.</span>post</span><span class="token punctuation">(</span><span class="token string">"/stu04/notbodyfield"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">stu04_not_bdy_field</span><span class="token punctuation">(</span>
        param<span class="token punctuation">:</span>Dog
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> param


<span class="token comment"># Body 额外参数</span>
<span class="token decorator annotation punctuation">@app04<span class="token punctuation">.</span>post</span><span class="token punctuation">(</span><span class="token string">"/stu04/bodyfield"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">stu04_bdy_field</span><span class="token punctuation">(</span>
        param<span class="token punctuation">:</span>Dog <span class="token operator">=</span> Body<span class="token punctuation">(</span>
            example<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
                <span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"小七"</span><span class="token punctuation">,</span>
                <span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
                <span class="token string">"varieties"</span><span class="token punctuation">:</span><span class="token string">"泰迪"</span><span class="token punctuation">,</span>
                <span class="token string">"birthday"</span><span class="token punctuation">:</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> param
</code></pre> 
<p><img src="https://images2.imgbox.com/b6/00/xPCzW7y4_o.png" alt="image-20221125220527054"></p> 
<p><img src="https://images2.imgbox.com/19/b1/L1TIAxo7_o.png" alt="image-20221125220553476"></p> 
<h3><a id="_94"></a>其他数据类型</h3> 
<blockquote> 
 <p>目前用的都是常见的数据类型，包括<code>int、float、str、bool</code>等等；</p> 
 <p>也可以使用其他数据类型，几乎所有Pydantic支持的数据类型都可以：<a href="https://pydantic-docs.helpmanual.io/usage/types/" rel="nofollow">Pydantic-字段类型</a></p> 
 <p>也可以参看源码：</p> 
</blockquote> 
<pre><code class="prism language-python">__all__ <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment"># annotated types utils</span>
    <span class="token string">'create_model_from_namedtuple'</span><span class="token punctuation">,</span>
    <span class="token string">'create_model_from_typeddict'</span><span class="token punctuation">,</span>
    <span class="token comment"># dataclasses</span>
    <span class="token string">'dataclasses'</span><span class="token punctuation">,</span>
    <span class="token comment"># class_validators</span>
    <span class="token string">'root_validator'</span><span class="token punctuation">,</span>
    <span class="token string">'validator'</span><span class="token punctuation">,</span>
    <span class="token comment"># config</span>
    <span class="token string">'BaseConfig'</span><span class="token punctuation">,</span>
    <span class="token string">'ConfigDict'</span><span class="token punctuation">,</span>
    <span class="token string">'Extra'</span><span class="token punctuation">,</span>
    <span class="token comment"># decorator</span>
    <span class="token string">'validate_arguments'</span><span class="token punctuation">,</span>
    <span class="token comment"># env_settings</span>
    <span class="token string">'BaseSettings'</span><span class="token punctuation">,</span>
    <span class="token comment"># error_wrappers</span>
    <span class="token string">'ValidationError'</span><span class="token punctuation">,</span>
    <span class="token comment"># fields</span>
    <span class="token string">'Field'</span><span class="token punctuation">,</span>
    <span class="token string">'Required'</span><span class="token punctuation">,</span>
    <span class="token comment"># main</span>
    <span class="token string">'BaseModel'</span><span class="token punctuation">,</span>
    <span class="token string">'create_model'</span><span class="token punctuation">,</span>
    <span class="token string">'validate_model'</span><span class="token punctuation">,</span>
    <span class="token comment"># network</span>
    <span class="token string">'AnyUrl'</span><span class="token punctuation">,</span>
    <span class="token string">'AnyHttpUrl'</span><span class="token punctuation">,</span>
    <span class="token string">'FileUrl'</span><span class="token punctuation">,</span>
    <span class="token string">'HttpUrl'</span><span class="token punctuation">,</span>
    <span class="token string">'stricturl'</span><span class="token punctuation">,</span>
    <span class="token string">'EmailStr'</span><span class="token punctuation">,</span>
    <span class="token string">'NameEmail'</span><span class="token punctuation">,</span>
    <span class="token string">'IPvAnyAddress'</span><span class="token punctuation">,</span>
    <span class="token string">'IPvAnyInterface'</span><span class="token punctuation">,</span>
    <span class="token string">'IPvAnyNetwork'</span><span class="token punctuation">,</span>
    <span class="token string">'PostgresDsn'</span><span class="token punctuation">,</span>
    <span class="token string">'CockroachDsn'</span><span class="token punctuation">,</span>
    <span class="token string">'AmqpDsn'</span><span class="token punctuation">,</span>
    <span class="token string">'RedisDsn'</span><span class="token punctuation">,</span>
    <span class="token string">'MongoDsn'</span><span class="token punctuation">,</span>
    <span class="token string">'KafkaDsn'</span><span class="token punctuation">,</span>
    <span class="token string">'validate_email'</span><span class="token punctuation">,</span>
    <span class="token comment"># parse</span>
    <span class="token string">'Protocol'</span><span class="token punctuation">,</span>
    <span class="token comment"># tools</span>
    <span class="token string">'parse_file_as'</span><span class="token punctuation">,</span>
    <span class="token string">'parse_obj_as'</span><span class="token punctuation">,</span>
    <span class="token string">'parse_raw_as'</span><span class="token punctuation">,</span>
    <span class="token string">'schema_of'</span><span class="token punctuation">,</span>
    <span class="token string">'schema_json_of'</span><span class="token punctuation">,</span>
    <span class="token comment"># types</span>
    <span class="token string">'NoneStr'</span><span class="token punctuation">,</span>
    <span class="token string">'NoneBytes'</span><span class="token punctuation">,</span>
    <span class="token string">'StrBytes'</span><span class="token punctuation">,</span>
    <span class="token string">'NoneStrBytes'</span><span class="token punctuation">,</span>
    <span class="token string">'StrictStr'</span><span class="token punctuation">,</span>
    <span class="token string">'ConstrainedBytes'</span><span class="token punctuation">,</span>
    <span class="token string">'conbytes'</span><span class="token punctuation">,</span>
    <span class="token string">'ConstrainedList'</span><span class="token punctuation">,</span>
    <span class="token string">'conlist'</span><span class="token punctuation">,</span>
    <span class="token string">'ConstrainedSet'</span><span class="token punctuation">,</span>
    <span class="token string">'conset'</span><span class="token punctuation">,</span>
    <span class="token string">'ConstrainedFrozenSet'</span><span class="token punctuation">,</span>
    <span class="token string">'confrozenset'</span><span class="token punctuation">,</span>
    <span class="token string">'ConstrainedStr'</span><span class="token punctuation">,</span>
    <span class="token string">'constr'</span><span class="token punctuation">,</span>
    <span class="token string">'PyObject'</span><span class="token punctuation">,</span>
    <span class="token string">'ConstrainedInt'</span><span class="token punctuation">,</span>
    <span class="token string">'conint'</span><span class="token punctuation">,</span>
    <span class="token string">'PositiveInt'</span><span class="token punctuation">,</span>
    <span class="token string">'NegativeInt'</span><span class="token punctuation">,</span>
    <span class="token string">'NonNegativeInt'</span><span class="token punctuation">,</span>
    <span class="token string">'NonPositiveInt'</span><span class="token punctuation">,</span>
    <span class="token string">'ConstrainedFloat'</span><span class="token punctuation">,</span>
    <span class="token string">'confloat'</span><span class="token punctuation">,</span>
    <span class="token string">'PositiveFloat'</span><span class="token punctuation">,</span>
    <span class="token string">'NegativeFloat'</span><span class="token punctuation">,</span>
    <span class="token string">'NonNegativeFloat'</span><span class="token punctuation">,</span>
    <span class="token string">'NonPositiveFloat'</span><span class="token punctuation">,</span>
    <span class="token string">'FiniteFloat'</span><span class="token punctuation">,</span>
    <span class="token string">'ConstrainedDecimal'</span><span class="token punctuation">,</span>
    <span class="token string">'condecimal'</span><span class="token punctuation">,</span>
    <span class="token string">'ConstrainedDate'</span><span class="token punctuation">,</span>
    <span class="token string">'condate'</span><span class="token punctuation">,</span>
    <span class="token string">'UUID1'</span><span class="token punctuation">,</span>
    <span class="token string">'UUID3'</span><span class="token punctuation">,</span>
    <span class="token string">'UUID4'</span><span class="token punctuation">,</span>
    <span class="token string">'UUID5'</span><span class="token punctuation">,</span>
    <span class="token string">'FilePath'</span><span class="token punctuation">,</span>
    <span class="token string">'DirectoryPath'</span><span class="token punctuation">,</span>
    <span class="token string">'Json'</span><span class="token punctuation">,</span>
    <span class="token string">'JsonWrapper'</span><span class="token punctuation">,</span>
    <span class="token string">'SecretField'</span><span class="token punctuation">,</span>
    <span class="token string">'SecretStr'</span><span class="token punctuation">,</span>
    <span class="token string">'SecretBytes'</span><span class="token punctuation">,</span>
    <span class="token string">'StrictBool'</span><span class="token punctuation">,</span>
    <span class="token string">'StrictBytes'</span><span class="token punctuation">,</span>
    <span class="token string">'StrictInt'</span><span class="token punctuation">,</span>
    <span class="token string">'StrictFloat'</span><span class="token punctuation">,</span>
    <span class="token string">'PaymentCardNumber'</span><span class="token punctuation">,</span>
    <span class="token string">'PrivateAttr'</span><span class="token punctuation">,</span>
    <span class="token string">'ByteSize'</span><span class="token punctuation">,</span>
    <span class="token string">'PastDate'</span><span class="token punctuation">,</span>
    <span class="token string">'FutureDate'</span><span class="token punctuation">,</span>
    <span class="token comment"># version</span>
    <span class="token string">'compiled'</span><span class="token punctuation">,</span>
    <span class="token string">'VERSION'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> 
<h3><a id="_215"></a>源码</h3> 
<pre><code class="prism language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment"># @Time: 2022/11/25 21:21</span>
<span class="token comment"># @Author: MinChess</span>
<span class="token comment"># @File: stu04.py</span>
<span class="token comment"># @Software: PyCharm</span>
<span class="token keyword">from</span> fastapi <span class="token keyword">import</span> APIRouter<span class="token punctuation">,</span>Body
<span class="token keyword">from</span> pydantic <span class="token keyword">import</span> BaseModel<span class="token punctuation">,</span>Field
<span class="token keyword">from</span> typing <span class="token keyword">import</span> Optional<span class="token punctuation">,</span>List

<span class="token keyword">from</span> datetime <span class="token keyword">import</span> date

app04 <span class="token operator">=</span> APIRouter<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 创建一个数据模型</span>
<span class="token keyword">class</span> <span class="token class-name">City</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    country<span class="token punctuation">:</span><span class="token builtin">str</span> <span class="token operator">=</span> <span class="token string">"中国"</span>
    provence<span class="token punctuation">:</span><span class="token builtin">str</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>example <span class="token operator">=</span> <span class="token string">"四川"</span><span class="token punctuation">)</span> <span class="token comment"># Field可以定义请求体的格式和类型</span>
    citys<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>List<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    population<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">"人口数"</span><span class="token punctuation">,</span>ge<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Config</span><span class="token punctuation">:</span>
        schema_extra <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">"example"</span><span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span>
                <span class="token string">"country"</span><span class="token punctuation">:</span><span class="token string">"中国"</span><span class="token punctuation">,</span>
                <span class="token string">"provence"</span><span class="token punctuation">:</span><span class="token string">"四川"</span><span class="token punctuation">,</span>
                <span class="token string">"citys"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">"绵阳"</span><span class="token punctuation">,</span><span class="token string">"成都"</span><span class="token punctuation">,</span><span class="token string">"遂宁"</span><span class="token punctuation">,</span><span class="token string">"..."</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">"population"</span><span class="token punctuation">:</span><span class="token number">66666666</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

<span class="token comment"># Pydantic schema_extra</span>

<span class="token decorator annotation punctuation">@app04<span class="token punctuation">.</span>post</span><span class="token punctuation">(</span><span class="token string">"/stu04/schemaextra"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">stu04_schema_extra</span><span class="token punctuation">(</span>
        city<span class="token punctuation">:</span>City
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> city

<span class="token comment"># Field 的附加参数</span>
<span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name<span class="token punctuation">:</span><span class="token builtin">str</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span>example <span class="token operator">=</span> <span class="token string">"小黑"</span><span class="token punctuation">)</span>
    age<span class="token punctuation">:</span><span class="token builtin">int</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>description<span class="token operator">=</span><span class="token string">"狗的年龄"</span><span class="token punctuation">,</span>gt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>le<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
    varieties<span class="token punctuation">:</span><span class="token builtin">str</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token string">"拉布拉多"</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">"狗的品种"</span><span class="token punctuation">)</span>
    birthday<span class="token punctuation">:</span>date

<span class="token comment"># 无 Body 额外参数</span>
<span class="token decorator annotation punctuation">@app04<span class="token punctuation">.</span>post</span><span class="token punctuation">(</span><span class="token string">"/stu04/notbodyfield"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">stu04_not_bdy_field</span><span class="token punctuation">(</span>
        param<span class="token punctuation">:</span>Dog
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> param


<span class="token comment"># Body 额外参数</span>
<span class="token decorator annotation punctuation">@app04<span class="token punctuation">.</span>post</span><span class="token punctuation">(</span><span class="token string">"/stu04/bodyfield"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">stu04_bdy_field</span><span class="token punctuation">(</span>
        param<span class="token punctuation">:</span>Dog <span class="token operator">=</span> Body<span class="token punctuation">(</span>
            example<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
                <span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"小七"</span><span class="token punctuation">,</span>
                <span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
                <span class="token string">"varieties"</span><span class="token punctuation">:</span><span class="token string">"泰迪"</span><span class="token punctuation">,</span>
                <span class="token string">"birthday"</span><span class="token punctuation">:</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> param
</code></pre> 
<hr> 
<center> 
 <img src="https://images2.imgbox.com/c4/f1/EUvy5M95_o.png" width="32%"> 
</center> 
<center> 
 <font color="#000066">欢 迎 关 注 博 主 个 人 小 程 序！</font> 
 <br> 
</center>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b78e73472ca582cd4fd2537374be947b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用ClickHouse JDBC官方驱动，踩坑无数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0823dda624f20e320eca26e843492370/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">牛客网——翻转直角三角形</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>