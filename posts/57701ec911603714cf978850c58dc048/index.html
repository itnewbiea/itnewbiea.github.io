<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在 Linux 中开启 Flask 项目持续运行 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在 Linux 中开启 Flask 项目持续运行" />
<meta property="og:description" content="在 Linux 中开启 Flask 项目持续运行 在部署 Flask 项目时，情况往往并不是那么理想。默认情况下，关闭 SSH 终端后，Flask 服务就停止了。这时，您需要找到一种方法在 Linux 服务器上实现持续运行 Flask 项目，并在服务器重启后自动重新启动。
本文将介绍两种方法来帮助您在 Linux 服务器上持续运行 Flask 项目。第一种方法是使用进程管理工具（如 Supervisor 或 Systemd），第二种方法是使用 nohup 命令。下面将以 Ubuntu 22.04 系统为例，逐一介绍这两种方法。
方法一：使用 Systemd 步骤一：创建服务文件
使用 nano 或其他编辑器，在 /etc/systemd/system/ 目录下创建一个新的服务文件，例如 www.service
步骤二：编辑服务文件
在 www.service 服务文件中输入以下内容：
[Unit] Description=www After=network.target [Service] User=root Group=default WorkingDirectory=/root/www/thrive_api ExecStart=/root/www/thrive_api/venv/bin/python3 /root/www/thrive_api/main.py [Install] WantedBy=multi-user.target 命名含义[Unit]这是服务单元的声明部分，用于描述服务和其依赖关系Description描述这个服务的信息，这里是 wwwAfter指定这个服务应该在哪些其他服务之后启动，这里是在网络服务启动之后启动[Service]这是服务相关设置的部分[Unit]这是服务单元的声明部分，用于描述服务和其依赖关系User指定运行服务的用户，这里是 rootGroup指定运行服务的用户组，默认情况下是 defaultWorkingDirectory指定服务的工作目录，这里是 /root/www/thrive_apiExecStart指定要运行的命令，这里是在虚拟环境中执行的 Python3 脚本 /root/www/thrive_api/main.py[Install]这是安装相关设置的部分WantedBy指定在哪些特定的 target（目标）之下安装服务，这里是 multi-user.target，表示在多用户模式下安装请根据您的实际情况修改这些参数。 步骤三：重新加载 Systemd 配置文件
运行以下命令重新加载 Systemd 配置文件：
sudo systemctl daemon-reload 步骤四：启动并启用服务" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/57701ec911603714cf978850c58dc048/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T20:16:00+08:00" />
<meta property="article:modified_time" content="2024-01-04T20:16:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在 Linux 中开启 Flask 项目持续运行</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/e8/b2/aoHaG23K_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_Linux__Flask__2"></a>在 Linux 中开启 Flask 项目持续运行</h2> 
<p>在部署 <code>Flask</code> 项目时，情况往往并不是那么理想。默认情况下，关闭 <code>SSH</code> 终端后，<code>Flask</code> 服务就停止了。这时，您需要找到一种方法在 <code>Linux</code> 服务器上实现持续运行 <code>Flask</code> 项目，并在服务器重启后自动重新启动。</p> 
<p>本文将介绍两种方法来帮助您在 <code>Linux</code> 服务器上持续运行 <code>Flask</code> 项目。第一种方法是使用进程管理工具（如 Supervisor 或 Systemd），第二种方法是使用 <code>nohup</code> 命令。下面将以 <code>Ubuntu 22.04</code> 系统为例，逐一介绍这两种方法。</p> 
<h3><a id="_Systemd_7"></a>方法一：使用 Systemd</h3> 
<p><strong>步骤一：创建服务文件</strong><br> 使用 <code>nano</code> 或其他编辑器，在 <code>/etc/systemd/system/</code> 目录下创建一个新的服务文件，例如 <code>www.service</code></p> 
<p><strong>步骤二：编辑服务文件</strong><br> 在 <code>www.service</code> 服务文件中输入以下内容：</p> 
<pre><code>[Unit]
Description=www
After=network.target

[Service]
User=root
Group=default
WorkingDirectory=/root/www/thrive_api
ExecStart=/root/www/thrive_api/venv/bin/python3 /root/www/thrive_api/main.py

[Install]
WantedBy=multi-user.target
</code></pre> 
<table><thead><tr><th>命名</th><th>含义</th></tr></thead><tbody><tr><td>[Unit]</td><td>这是服务单元的声明部分，用于描述服务和其依赖关系</td></tr><tr><td>Description</td><td>描述这个服务的信息，这里是 <code>www</code></td></tr><tr><td>After</td><td>指定这个服务应该在哪些其他服务之后启动，这里是在网络服务启动之后启动</td></tr><tr><td>[Service]</td><td>这是服务相关设置的部分</td></tr><tr><td>[Unit]</td><td>这是服务单元的声明部分，用于描述服务和其依赖关系</td></tr><tr><td>User</td><td>指定运行服务的用户，这里是 <code>root</code></td></tr><tr><td>Group</td><td>指定运行服务的用户组，默认情况下是 <code>default</code></td></tr><tr><td>WorkingDirectory</td><td>指定服务的工作目录，这里是 <code>/root/www/thrive_api</code></td></tr><tr><td>ExecStart</td><td>指定要运行的命令，这里是在虚拟环境中执行的 <code>Python3</code> 脚本 <code>/root/www/thrive_api/main.py</code></td></tr><tr><td>[Install]</td><td>这是安装相关设置的部分</td></tr><tr><td>WantedBy</td><td>指定在哪些特定的 <code>target</code>（目标）之下安装服务，这里是 <code>multi-user.target</code>，表示在多用户模式下安装</td></tr><tr><td>请根据您的实际情况修改这些参数。</td><td></td></tr></tbody></table> 
<p><strong>步骤三：重新加载 Systemd 配置文件</strong><br> 运行以下命令重新加载 <code>Systemd</code> 配置文件：</p> 
<pre><code>sudo systemctl daemon-reload
</code></pre> 
<p><strong>步骤四：启动并启用服务</strong><br> 运行以下命令启动并启用服务：</p> 
<pre><code>sudo systemctl start myflaskapp
sudo systemctl enable myflaskapp
</code></pre> 
<p><strong>步骤五：检查服务状态</strong><br> 运行以下命令检查服务状态：</p> 
<pre><code>sudo systemctl status myflaskapp
</code></pre> 
<p>如果服务正在运行，则应显示服务的详细信息和当前状态。</p> 
<h3><a id="_nohup__67"></a>方法二：使用 nohup 命令</h3> 
<p>运行以下命令来在后台运行 Flask 项目：</p> 
<pre><code>nohup python app.py &gt; /dev/null 2&gt;&amp;1 &amp;
</code></pre> 
<p>这将在后台运行 <code>main.py</code> 文件，并将输出重定向到 <code>/dev/null</code>。</p> 
<h2><a id="_74"></a>总结：</h2> 
<p>本文介绍了两种在 <code>Linux</code> 服务器上实现持续运行 <code>Flask</code> 项目的方法。第一种方法使用进程管理工具（如 Supervisor 或 Systemd），第二种方法使用 <code>nohup</code> 命令。使用这些方法可以使 <code>Flask</code> 项目在关闭 <code>SSH</code> 终端后仍然持续运行，并在服务器重启后自动重新启动。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/838301cb98699a75af394995b7356dc1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue保姆级教程----深入了解 Vue3路由守卫</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d423d73bbf5d21f4977dc81682bb60cd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">由浅入深理解C#中的事件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>