<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>P2296-寻找道路 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="P2296-寻找道路" />
<meta property="og:description" content="1 #include &lt;bits/stdc&#43;&#43;.h&gt; 2 #define _for(i,a,b) for(int i = (a);i &lt; b;i &#43;&#43;) 3 #define _rep(i,a,b) for(int i = (a);i &gt; b;i --) 4 #define INF 0x3f3f3f3f 5 #define MOD 1000000007 6 #define maxn 200003 7 typedef long long ll; 8 9 using namespace std; 10 typedef pair&lt;int,int&gt; P;//first 是最短距离，second 是顶点编号 11 inline ll read() 12 { 13 ll ans = 0; 14 char ch = getchar(), last = &#39; &#39;; 15 while(!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/2bc71683e10df859529a000557eb2d71/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-10-02T13:22:00+08:00" />
<meta property="article:modified_time" content="2019-10-02T13:22:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">P2296-寻找道路</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#008080;">  1</span> #include &lt;bits/stdc++.h&gt;
<span style="color:#008080;">  2</span> <span style="color:#0000ff;">#define</span> _for(i,a,b) for(int i = (a);i &lt; b;i ++)
<span style="color:#008080;">  3</span> <span style="color:#0000ff;">#define</span> _rep(i,a,b) for(int i = (a);i &gt; b;i --)
<span style="color:#008080;">  4</span> <span style="color:#0000ff;">#define</span> INF 0x3f3f3f3f
<span style="color:#008080;">  5</span> <span style="color:#0000ff;">#define</span> MOD 1000000007
<span style="color:#008080;">  6</span> <span style="color:#0000ff;">#define</span> maxn 200003
<span style="color:#008080;">  7</span> typedef <span style="color:#0000ff;">long</span> <span style="color:#0000ff;">long</span><span style="color:#000000;"> ll;
</span><span style="color:#008080;">  8</span> 
<span style="color:#008080;">  9</span> <span style="color:#0000ff;">using</span> <span style="color:#0000ff;">namespace</span><span style="color:#000000;"> std;
</span><span style="color:#008080;"> 10</span> typedef pair&lt;<span style="color:#0000ff;">int</span>,<span style="color:#0000ff;">int</span>&gt; P;<span style="color:#008000;">//</span><span style="color:#008000;">first 是最短距离，second 是顶点编号</span>
<span style="color:#008080;"> 11</span> <span style="color:#000000;">inline ll read()
</span><span style="color:#008080;"> 12</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 13</span>     ll ans = <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 14</span>     <span style="color:#0000ff;">char</span> ch = getchar(), last = <span style="color:#800000;">'</span> <span style="color:#800000;">'</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 15</span>     <span style="color:#0000ff;">while</span>(!isdigit(ch)) last = ch, ch =<span style="color:#000000;"> getchar();
</span><span style="color:#008080;"> 16</span>     <span style="color:#0000ff;">while</span>(isdigit(ch)) ans = (ans &lt;&lt; <span style="color:#800080;">1</span>) + (ans &lt;&lt; <span style="color:#800080;">3</span>) + ch - <span style="color:#800000;">'</span><span style="color:#800000;">0</span><span style="color:#800000;">'</span>, ch =<span style="color:#000000;"> getchar();
</span><span style="color:#008080;"> 17</span>     <span style="color:#0000ff;">if</span>(last == <span style="color:#800000;">'</span><span style="color:#800000;">-</span><span style="color:#800000;">'</span>) ans = -<span style="color:#000000;">ans;
</span><span style="color:#008080;"> 18</span>     <span style="color:#0000ff;">return</span><span style="color:#000000;"> ans;
</span><span style="color:#008080;"> 19</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 20</span> inline <span style="color:#0000ff;">void</span><span style="color:#000000;"> write(ll x)
</span><span style="color:#008080;"> 21</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 22</span>     <span style="color:#0000ff;">if</span>(x &lt; <span style="color:#800080;">0</span>) x = -x, putchar(<span style="color:#800000;">'</span><span style="color:#800000;">-</span><span style="color:#800000;">'</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 23</span>     <span style="color:#0000ff;">if</span>(x &gt;= <span style="color:#800080;">10</span>) write(x / <span style="color:#800080;">10</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 24</span>     putchar(x % <span style="color:#800080;">10</span> + <span style="color:#800000;">'</span><span style="color:#800000;">0</span><span style="color:#800000;">'</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 25</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 26</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> V,E;
</span><span style="color:#008080;"> 27</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> st,ed;
</span><span style="color:#008080;"> 28</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> ver[maxn],Next[maxn],head[maxn],val[maxn];
</span><span style="color:#008080;"> 29</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> ver1[maxn],Next1[maxn],head1[maxn],val1[maxn];
</span><span style="color:#008080;"> 30</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> novis[maxn];
</span><span style="color:#008080;"> 31</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> cango[maxn];
</span><span style="color:#008080;"> 32</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> vis[maxn];
</span><span style="color:#008080;"> 33</span> <span style="color:#0000ff;">int</span> tot = <span style="color:#800080;">0</span>,tot1 = <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 34</span> <span style="color:#0000ff;">void</span> add(<span style="color:#0000ff;">int</span> x,<span style="color:#0000ff;">int</span> y,<span style="color:#0000ff;">int</span><span style="color:#000000;"> w)
</span><span style="color:#008080;"> 35</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 36</span>     ver[++tot] = y,Next[tot] = head[x],head[x] = tot,val[tot] =<span style="color:#000000;"> w;
</span><span style="color:#008080;"> 37</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 38</span> <span style="color:#0000ff;">void</span> add1(<span style="color:#0000ff;">int</span> x,<span style="color:#0000ff;">int</span> y,<span style="color:#0000ff;">int</span><span style="color:#000000;"> w)
</span><span style="color:#008080;"> 39</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 40</span>     ver1[++tot1] = y,Next1[tot1] = head1[x],head1[x] = tot1,val1[tot1] =<span style="color:#000000;"> w;
</span><span style="color:#008080;"> 41</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 42</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> d[maxn];
</span><span style="color:#008080;"> 43</span> <span style="color:#0000ff;">void</span> shortest_path(<span style="color:#0000ff;">int</span><span style="color:#000000;"> s)
</span><span style="color:#008080;"> 44</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 45</span>     priority_queue&lt;P,vector&lt;P&gt;,greater&lt;P&gt;&gt;<span style="color:#000000;"> que;
</span><span style="color:#008080;"> 46</span> 
<span style="color:#008080;"> 47</span>     _for(i,<span style="color:#800080;">1</span>,V+<span style="color:#800080;">1</span><span style="color:#000000;">)
</span><span style="color:#008080;"> 48</span>     d[i] =<span style="color:#000000;"> INF;
</span><span style="color:#008080;"> 49</span>     d[s] = <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 50</span>     que.push(P {<!-- --><span style="color:#800080;">0</span><span style="color:#000000;">,s});
</span><span style="color:#008080;"> 51</span> 
<span style="color:#008080;"> 52</span>     <span style="color:#0000ff;">while</span>(!<span style="color:#000000;">que.empty())
</span><span style="color:#008080;"> 53</span> <span style="color:#000000;">    {
</span><span style="color:#008080;"> 54</span>         P p =<span style="color:#000000;"> que.top();
</span><span style="color:#008080;"> 55</span> <span style="color:#000000;">        que.pop();
</span><span style="color:#008080;"> 56</span>         <span style="color:#0000ff;">int</span> v =<span style="color:#000000;"> p.second;
</span><span style="color:#008080;"> 57</span>         <span style="color:#0000ff;">if</span>(novis[v] || d[v] &lt; p.first) <span style="color:#0000ff;">continue</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 58</span>         <span style="color:#0000ff;">for</span>(<span style="color:#0000ff;">int</span> i = head[v]; i; i =<span style="color:#000000;"> Next[i])
</span><span style="color:#008080;"> 59</span> <span style="color:#000000;">        {
</span><span style="color:#008080;"> 60</span>             <span style="color:#0000ff;">int</span> y =<span style="color:#000000;"> ver[i];
</span><span style="color:#008080;"> 61</span>             <span style="color:#0000ff;">int</span> w =<span style="color:#000000;"> val[i];
</span><span style="color:#008080;"> 62</span>             <span style="color:#0000ff;">if</span>(d[y] &gt; d[v] +<span style="color:#000000;"> w)
</span><span style="color:#008080;"> 63</span> <span style="color:#000000;">            {
</span><span style="color:#008080;"> 64</span>                 d[y] = d[v] +<span style="color:#000000;"> w;
</span><span style="color:#008080;"> 65</span> <span style="color:#000000;">                que.push(P {d[y],y});
</span><span style="color:#008080;"> 66</span> <span style="color:#000000;">            }
</span><span style="color:#008080;"> 67</span> <span style="color:#000000;">        }
</span><span style="color:#008080;"> 68</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 69</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 70</span> 
<span style="color:#008080;"> 71</span> <span style="color:#0000ff;">bool</span> dfs(<span style="color:#0000ff;">int</span><span style="color:#000000;"> s)
</span><span style="color:#008080;"> 72</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 73</span>     cango[s] = <span style="color:#800080;">1</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 74</span>     <span style="color:#0000ff;">for</span>(<span style="color:#0000ff;">int</span> i = head1[s]; i; i =<span style="color:#000000;"> Next1[i])
</span><span style="color:#008080;"> 75</span> <span style="color:#000000;">    {
</span><span style="color:#008080;"> 76</span>         <span style="color:#0000ff;">int</span> y =<span style="color:#000000;"> ver1[i];
</span><span style="color:#008080;"> 77</span>         <span style="color:#0000ff;">if</span>(!<span style="color:#000000;">vis[y])
</span><span style="color:#008080;"> 78</span> <span style="color:#000000;">        {
</span><span style="color:#008080;"> 79</span>             vis[y] = <span style="color:#800080;">1</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 80</span> <span style="color:#000000;">            dfs(y);
</span><span style="color:#008080;"> 81</span> <span style="color:#000000;">        }
</span><span style="color:#008080;"> 82</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 83</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 84</span> <span style="color:#0000ff;">bool</span> dfs2(<span style="color:#0000ff;">int</span><span style="color:#000000;"> s)
</span><span style="color:#008080;"> 85</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 86</span>     <span style="color:#0000ff;">for</span>(<span style="color:#0000ff;">int</span> i = head[s]; i; i =<span style="color:#000000;"> Next[i])
</span><span style="color:#008080;"> 87</span> <span style="color:#000000;">    {
</span><span style="color:#008080;"> 88</span>         <span style="color:#0000ff;">int</span> y =<span style="color:#000000;"> ver[i];
</span><span style="color:#008080;"> 89</span>         <span style="color:#0000ff;">if</span>(!<span style="color:#000000;">cango[y])
</span><span style="color:#008080;"> 90</span>             novis[s] = <span style="color:#800080;">1</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 91</span>         <span style="color:#0000ff;">if</span>(!<span style="color:#000000;">vis[y])
</span><span style="color:#008080;"> 92</span> <span style="color:#000000;">        {
</span><span style="color:#008080;"> 93</span>             vis[y] = <span style="color:#800080;">1</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 94</span> <span style="color:#000000;">            dfs2(y);
</span><span style="color:#008080;"> 95</span> <span style="color:#000000;">        }
</span><span style="color:#008080;"> 96</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 97</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 98</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> main()
</span><span style="color:#008080;"> 99</span> <span style="color:#000000;">{
</span><span style="color:#008080;">100</span> <span style="color:#008000;">//</span><span style="color:#008000;">    freopen("testdata.in","r+",stdin);</span>
<span style="color:#008080;">101</span>     V = read(),E =<span style="color:#000000;"> read();
</span><span style="color:#008080;">102</span>     _for(i,<span style="color:#800080;">1</span>,E+<span style="color:#800080;">1</span><span style="color:#000000;">)
</span><span style="color:#008080;">103</span> <span style="color:#000000;">    {
</span><span style="color:#008080;">104</span>         <span style="color:#0000ff;">int</span> a =<span style="color:#000000;"> read();
</span><span style="color:#008080;">105</span>         <span style="color:#0000ff;">int</span> b =<span style="color:#000000;"> read();
</span><span style="color:#008080;">106</span>         add(a,b,<span style="color:#800080;">1</span><span style="color:#000000;">);
</span><span style="color:#008080;">107</span>         add1(b,a,<span style="color:#800080;">1</span><span style="color:#000000;">);
</span><span style="color:#008080;">108</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">109</span>     st =<span style="color:#000000;"> read();
</span><span style="color:#008080;">110</span>     ed =<span style="color:#000000;"> read();
</span><span style="color:#008080;">111</span> <span style="color:#000000;">    dfs(ed);
</span><span style="color:#008080;">112</span>     memset(vis,<span style="color:#800080;">0</span>,<span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(vis));
</span><span style="color:#008080;">113</span> <span style="color:#000000;">    dfs2(st);
</span><span style="color:#008080;">114</span> <span style="color:#008000;">/*</span>
<span style="color:#008080;">115</span> <span style="color:#008000;">    printf("\n");
</span><span style="color:#008080;">116</span> <span style="color:#008000;">    _for(i,1,V+1)
</span><span style="color:#008080;">117</span> <span style="color:#008000;">    printf("%d %d %d\n",i,novis[i],cango[i]);
</span><span style="color:#008080;">118</span> <span style="color:#008000;">*/</span>
<span style="color:#008080;">119</span>     
<span style="color:#008080;">120</span> <span style="color:#000000;">    shortest_path(st);
</span><span style="color:#008080;">121</span>     <span style="color:#0000ff;">if</span>(d[ed]==<span style="color:#000000;">INF)
</span><span style="color:#008080;">122</span>         printf(<span style="color:#800000;">"</span><span style="color:#800000;">%d\n</span><span style="color:#800000;">"</span>,-<span style="color:#800080;">1</span><span style="color:#000000;">);
</span><span style="color:#008080;">123</span>     <span style="color:#0000ff;">else</span>
<span style="color:#008080;">124</span>         printf(<span style="color:#800000;">"</span><span style="color:#800000;">%d\n</span><span style="color:#800000;">"</span><span style="color:#000000;">,d[ed]);
</span><span style="color:#008080;">125</span>     <span style="color:#0000ff;">return</span> <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;">126</span> }</pre> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/Asurudo/p/11617272.html</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/648848aeece857398af5845e12155e9a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">P1314-聪明的质检员</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f7abf1953e3b6d7507dc2baaa8122097/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CTF之Bugku 过狗的一句话</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>