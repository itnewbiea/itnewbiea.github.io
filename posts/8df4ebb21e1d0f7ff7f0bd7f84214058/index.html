<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>救援模式（Rescue Mode）、单用户模式（Single-User Mode）、紧急模式（Emergency Mode）的区别与联系 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="救援模式（Rescue Mode）、单用户模式（Single-User Mode）、紧急模式（Emergency Mode）的区别与联系" />
<meta property="og:description" content="链接：https://www.cnblogs.com/xuanbjut/p/13100511.html
1、相关概念：runlevel：
一句话：运行级别指的是Linux等类Unix操作系统下不同的运行模式。
运行级别通常分为7等，分别是从0到6，但如果必要的话也可以更多。运行级别决定了计算机启动后的运行环境，根据Linux Standard Base，标准的运行环境可以分为7个：
0 Halt Shuts down the system. 1 Single-user mode Mode for administrative tasks.（注意这里，说明系统返回的shell有root权限） 2 Multi-user mode Does not configure network interfaces and does not export networks services. 3 Multi-user mode with networking Starts the system normally. 4 Not used/user-definable For special purposes. 5 Start the system normally with appropriate display manager (with GUI) Same as runlevel 3 &#43; display manager. 6 Reboot Reboots the system." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/8df4ebb21e1d0f7ff7f0bd7f84214058/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-27T22:07:51+08:00" />
<meta property="article:modified_time" content="2022-03-27T22:07:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">救援模式（Rescue Mode）、单用户模式（Single-User Mode）、紧急模式（Emergency Mode）的区别与联系</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>链接：https://www.cnblogs.com/xuanbjut/p/13100511.html</p> 
<p><br><strong>1、相关概念：runlevel：</strong><br> 一句话：运行级别指的是Linux等类Unix操作系统下不同的运行模式。<br> 运行级别通常分为7等，分别是从0到6，但如果必要的话也可以更多。运行级别决定了计算机启动后的运行环境，根据Linux Standard Base，标准的运行环境可以分为7个：</p> 
<pre><code>0    Halt    
     Shuts down the system.

1    Single-user mode    
     Mode for administrative tasks.（注意这里，说明系统返回的shell有root权限）

2    Multi-user mode    
     Does not configure network interfaces and does not export networks services.

3    Multi-user mode with networking    
     Starts the system normally.

4    Not used/user-definable    
     For special purposes.

5    Start the system normally with appropriate display manager (with GUI)    
     Same as runlevel 3 + display manager.

6    Reboot    
     Reboots the system.</code></pre> 
<p><strong>2、什么情况下要进入Rescue/Single-User/Emergency Mode？</strong><br> 一句话：无法正常由磁盘进入normal user mode（runlevel 3或5）<br> 例如：<br>         1、GRUB被（微软）摧毁了;<br>         2、某些硬件驱动文件损坏（比如nouveau）<br>         3、密码忘了</p> 
<p><strong>3、三者的区别（这里参照的是RedHat系列的文档）</strong><br> 一句话：单用户模式是一个runlevel，我们可以在这里用具有root权限的shell更改root密码。至于怎么进入单用户模式有很多种，例如在磁盘boot文件损害时从其他介质启动（救援模式）。至于紧急模式，则是在init文件都损坏的情况下使用（也具有root权限），此时获得的环境最简单（重启都得靠拔电源）。</p> 
<p><strong>单用户模式：</strong><br> 在单用户模式，电脑为开机进入runlevel 1，本机档案系统已经被挂载，不过您的网路尚未启动，您可以使用一个系统维护的 shell。单机使用者模式与救援模式不同，它会试着自动挂载档案系统，如果您的档案系统无法被成功挂载，请勿使用单机使用者模式。而且如果系统上的执行层级 1 的设定已经毁损，您也无法使用单机使用者模式。</p> 
<p><strong>救援模式：</strong><br> 救援模式能让使用者由光碟（或其它开机方法）启动基本的 Red Hat Enterprise Linux 环境；而不是藉由系统硬盘来启动。在正常操作中，Red Hat Enterprise Linux 系统会使用硬盘里的档案来进行所有工作 — 执行程式、储存档案等等。然而，在某些情况下，Red Hat Enterprise Linux 会无法完整存取系统的硬盘。透过使用救援模式，即使您无法由某个硬盘执行 Red Hat Enterprise Linux，您依然能够存取储存在该硬盘上的档案。总之，救援模式就是从其他介质启动（能够自己选择挂载的分区），从而获得一个runlevel（如果按照流程，会进入level1的单用户模式）。</p> 
<p><strong>紧急模式：</strong><br> 在紧急模式中，您是开机进入尽可能最小的环境中。根目录档案系统将会被挂载为仅能读取，而且将不会做任何的设定。比起单机使用者模式，紧急模式最主要的优点是并不载入 init 档案。因此当 init 档案毁损或无法使用时，您仍然可以挂载档案系统以回复重新安装阶段中遗失的资料。</p> 
<p>如下图也是进入紧急模式的一种情况：</p> 
<p><img alt="" height="96" src="https://images2.imgbox.com/61/de/0TxprglX_o.png" width="630"></p> 
<p> 原因是：fstab文件中的文件系统不能挂载，修改后重启可以正常启动。</p> 
<p></p> 
<p>注：现在的centos7取消了使用多年的 SystemV 的服务管理方式,也就是说,从这一版开始,已经没有所谓的“执行等级 (run level) ”的概念了。新的管理方法使用的是 systemd 的模式（systemctl而非init）,这个模式将很多的服务进行相依性管理。</p> 
<p><br> -----------------------------------------------------------------</p> 
<p>回到更改密码的问题上来，显然，如果用rescue mode获取环境，需要使用mount和chroot挂载根目录并更换当前根目录后然后使用passwd命令更改密码。如果能直接用单用户模式的环境，则可以直接更改密码。至于紧急模式，不推荐使用（网上有人说的，不清楚），因为很多基础服务未加载，强制重启后可能会有问题。</p> 
<p>所以说，下次有人问忘记了root密码该怎么办，最准确的回答是“找一个能获得root权限shell的mode并将根目录切换到磁盘的根目录下执行passwd命令并注意SElinux上下文的保存”（好吧这有点绕。。），最正确/简单是回答是“单用户模式”。</p> 
<p>参考：<br> Runlevel --&gt; https://en.wikipedia.org/wiki/Runlevel<br> Linux Standard Base --&gt; https://en.wikipedia.org/wiki/Linux_Standard_Base<br> Basic System Recovery --&gt; https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Installation_Guide/ap-rescuemode.html#s1-rescuemode-booting-single</p> 
<p>如有侵权请联系删除</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/30cf0317a4f623446c2aa72a0bf3ec52/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">kubeadm部署ingress-controller</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/29e1a573e95d383ec5688ef9a04c408e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[Android Material Design]组件07 - SwipeRefreshLayout</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>