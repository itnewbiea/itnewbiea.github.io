<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Element-ui中 表格（Table）组件中 toggleRowSelection 方法设置默认多选项 无法选中解决思路 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Element-ui中 表格（Table）组件中 toggleRowSelection 方法设置默认多选项 无法选中解决思路" />
<meta property="og:description" content="问题： Element-ui中，表格（Table）的 toggleRowSelection 方法无法默认选中的情况。
需求：对将设置为选中的内容进行部分修改，如：默认选中的内容必须得通过接口或者其他方式来获取，然后再默认选中。
&lt;template&gt; &lt;div class=&#34;wrap&#34;&gt; &lt;el-table border ref=&#34;multipleTable&#34; :data=&#34;tableData&#34; tooltip-effect=&#34;dark&#34; style=&#34;width: 100%&#34; @selection-change=&#34;handleSelectionChange&#34;&gt; &lt;el-table-column type=&#34;selection&#34; width=&#34;55&#34;&gt;&lt;/el-table-column&gt; &lt;el-table-column label=&#34;日期&#34; width=&#34;120&#34;&gt; &lt;template slot-scope=&#34;scope&#34;&gt;{{ scope.row.date }}&lt;/template&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&#34;name&#34; label=&#34;姓名&#34; width=&#34;120&#34;&gt; &lt;/el-table-column&gt; &lt;el-table-column prop=&#34;address&#34; label=&#34;地址&#34; show-overflow-tooltip&gt;&lt;/el-table-column&gt; &lt;/el-table&gt; &lt;div style=&#34;margin-top: 20px&#34;&gt; &lt;el-button @click=&#34;toggleSelection([tableData[1], tableData[2]])&#34;&gt;切换第二、第三行的选中状态&lt;/el-button&gt; &lt;el-button @click=&#34;toggleSelection()&#34;&gt;取消选择&lt;/el-button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { data() { return { tableData: [{ date: &#39;2016-05-03&#39;, name: &#39;王小虎&#39;, address: &#39;上海市普陀区金沙江路 1518 弄&#39; }, { date: &#39;2016-05-02&#39;, name: &#39;王小虎&#39;, address: &#39;上海市普陀区金沙江路 1518 弄&#39; }, { date: &#39;2016-05-04&#39;, name: &#39;王小虎&#39;, address: &#39;上海市普陀区金沙江路 1518 弄&#39; }, { date: &#39;2016-05-01&#39;, name: &#39;王小虎&#39;, address: &#39;上海市普陀区金沙江路 1518 弄&#39; }, { date: &#39;2016-05-08&#39;, name: &#39;王小虎&#39;, address: &#39;上海市普陀区金沙江路 1518 弄&#39; }, { date: &#39;2016-05-06&#39;, name: &#39;王小虎&#39;, address: &#39;上海市普陀区金沙江路 1518 弄&#39; }, { date: &#39;2016-05-07&#39;, name: &#39;王小虎&#39;, address: &#39;上海市普陀区金沙江路 1518 弄&#39; }], multipleSelection: [] } }, methods: { toggleSelection(rows) { if (rows) { rows." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c1b595469d82f54b44ebb0e3178ddd35/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-01T12:02:45+08:00" />
<meta property="article:modified_time" content="2021-11-01T12:02:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Element-ui中 表格（Table）组件中 toggleRowSelection 方法设置默认多选项 无法选中解决思路</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>问题：</h4> 
<p>Element-ui中，表格（Table）的 toggleRowSelection 方法无法默认选中的情况。<br> 需求：对将设置为选中的内容进行部分修改，如：默认选中的内容必须得通过接口或者其他方式来获取，然后再默认选中。</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/6b/00/hC6Pg6Xx_o.png"></p> 
<pre><code>&lt;template&gt;
  &lt;div class="wrap"&gt;
    &lt;el-table
      border
      ref="multipleTable"
      :data="tableData"
      tooltip-effect="dark"
      style="width: 100%"
      @selection-change="handleSelectionChange"&gt;
      &lt;el-table-column type="selection" width="55"&gt;&lt;/el-table-column&gt;
      &lt;el-table-column label="日期" width="120"&gt;
        &lt;template slot-scope="scope"&gt;{<!-- -->{ scope.row.date }}&lt;/template&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column prop="name" label="姓名" width="120"&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column prop="address" label="地址" show-overflow-tooltip&gt;&lt;/el-table-column&gt;
    &lt;/el-table&gt;
    &lt;div style="margin-top: 20px"&gt;
      &lt;el-button @click="toggleSelection([tableData[1], tableData[2]])"&gt;切换第二、第三行的选中状态&lt;/el-button&gt;
      &lt;el-button @click="toggleSelection()"&gt;取消选择&lt;/el-button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {
    data() {
      return {
        tableData: [{
          date: '2016-05-03',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1518 弄'
        }, {
          date: '2016-05-02',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1518 弄'
        }, {
          date: '2016-05-04',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1518 弄'
        }, {
          date: '2016-05-01',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1518 弄'
        }, {
          date: '2016-05-08',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1518 弄'
        }, {
          date: '2016-05-06',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1518 弄'
        }, {
          date: '2016-05-07',
          name: '王小虎',
          address: '上海市普陀区金沙江路 1518 弄'
        }],
        multipleSelection: []
      }
    },
    methods: {
      toggleSelection(rows) {
        if (rows) {
          rows.forEach(row =&gt; {
            this.$refs.multipleTable.toggleRowSelection(row);
          });
        } else {
          this.$refs.multipleTable.clearSelection();
        }
      },
      handleSelectionChange(val) {
        this.multipleSelection = val;
      }
    }
  }
&lt;/script&gt;

&lt;style lang="stylus" scoped&gt;
.wrap{
  padding: 10px;
}
&lt;/style&gt;
</code></pre> 
<p> 上面的代码就是官方代码，使用效果如下：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/95/bd/2gKQD4LV_o.png"><br> 从图中看，确实可进行默认选中；</p> 
<p> <strong>默认选中的内容得通过接口或者其他方式获取，然后再默认选中。示例代码如下：</strong></p> 
<pre><code>&lt;template&gt;
  &lt;div class="wrap"&gt;
    &lt;el-table
      border
      ref="multipleTable"
      :data="tableData"
      tooltip-effect="dark"
      style="width: 100%"&gt;
      &lt;el-table-column type="selection" width="55"&gt;&lt;/el-table-column&gt;
      &lt;el-table-column label="日期" width="120"&gt;
        &lt;template slot-scope="scope"&gt;{<!-- -->{ scope.row.date }}&lt;/template&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column prop="name" label="姓名" width="120"&gt;
      &lt;/el-table-column&gt;
      &lt;el-table-column prop="address" label="地址" show-overflow-tooltip&gt;&lt;/el-table-column&gt;
    &lt;/el-table&gt;
    &lt;div style="margin-top: 20px"&gt;
      &lt;el-button @click="toggleSelection"&gt;切换&lt;/el-button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      tableData: [{
        date: '2016-05-03',
        name: '王小虎',
        address: '上海市普陀区金沙江路 1518 弄'
      }, {
        date: '2016-05-02',
        name: '王小虎',
        address: '上海市普陀区金沙江路 1518 弄'
      }, {
        date: '2016-05-04',
        name: '王小虎',
        address: '上海市普陀区金沙江路 1518 弄'
      }, {
        date: '2016-05-01',
        name: '王小虎',
        address: '上海市普陀区金沙江路 1518 弄'
      }, {
        date: '2016-05-08',
        name: '王小虎',
        address: '上海市普陀区金沙江路 1518 弄'
      }, {
        date: '2016-05-06',
        name: '王小虎',
        address: '上海市普陀区金沙江路 1518 弄'
      }, {
        date: '2016-05-07',
        name: '王小虎',
        address: '上海市普陀区金沙江路 1518 弄'
      }],
      // 假如是通过接口或者其他形势获得的某个选中行内容,注意这里多了几个字段
      multipleSelection: [
        {
          date: "2016-05-07",
          name: "王小虎",
          address: "上海市普陀区金沙江路 1518 弄",
          description: '这里是描述',
          type: '类型',
          id: 'aaaaa111111'
        }
      ]
    }
  },
  methods: {
    toggleSelection() {
      // 提取出table表行字段对应的字段
      this.multipleSelection.forEach(row =&gt; {
        const obj = {
          date: row.date,
          name: row.name,
          address: row.address
        };
        this.$refs.multipleTable.toggleRowSelection(obj,true);
      });
    },
  }
}
&lt;/script&gt;

&lt;style lang="stylus" scoped&gt;
.wrap{
  padding: 10px;
}
&lt;/style&gt;
</code></pre> 
<p>理论上，上面的内容应该能让表格中的最一列进行选中，然而现实是不行的。<br> 在这里插入图片描述<br> 从上面可以看出，首部有选择效果，但却未选中相对应的内容。<br> 解决方法：</p> 
<p>从列表(tableData)中找到需要选中的对象，把它筛选出来作为选中的项。注意：寻找的字段要唯一；<br> 因此，我们将上面的方法改为如下的写法就可以了。<br>  </p> 
<pre><code>methods: {
  toggleSelection() {
    this.multipleSelection.forEach(row =&gt; {
      this.$refs.multipleTable.toggleRowSelection(
        this.tableData.find(item =&gt; { return row.date == item.date;}
      ),true);
    });
  }
}
</code></pre> 
<h4>分析：</h4> 
<p>现在对官方示例分析：</p> 
<pre><code>toggleSelection(rows) {
  if (rows) {
     rows.forEach(row =&gt; {
       console.log(row); // 这里仅仅加了个打印操作
       this.$refs.multipleTable.toggleRowSelection(row);
     });
   } else {
     this.$refs.multipleTable.clearSelection();
   }
}
</code></pre> 
<p>效果如下，此时可以选中。</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/be/98/orxVOK7W_o.png"><br> 然后对代码进行细微修改</p> 
<pre><code>toggleSelection(rows) {
  if (rows) {
    rows.forEach(row =&gt; {
      // 区别:将内容放在obj对象里面，用于提取需要的字段
      const obj = {
        date: row.date,
        name: row.name,
        address: row.address
      }
      console.log(obj)
      this.$refs.multipleTable.toggleRowSelection(obj);
    });
  } else {
    this.$refs.multipleTable.clearSelection();
  }
},
</code></pre> 
<p> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7c3c5aaa61dbd59aa5cfe831e9b5e4f5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">armabi armabi-v7a armabi-v8a 区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f4ca64eda2864719460698df1ccf9867/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux运维面试题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>