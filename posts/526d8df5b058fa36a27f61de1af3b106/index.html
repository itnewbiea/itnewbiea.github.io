<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于spring配置BasicDataSource数据源问题记录 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于spring配置BasicDataSource数据源问题记录" />
<meta property="og:description" content=" spring访问weblogic配置jndi数据源 环境： db2服务器：aix,db2 8.1 应用服务器：rhel3,weblogic8.1,jdk1.4,db2客户端 数据库是通过app别名方式访问 1、问题描述 前不久，我们系统出现了点毛病，客户那边突然断电，后来应用服务器和db2数据库服务器重新启动，发现客户端依然无法连接应用服务器，问题解决后，将服务器端日志拿下来分析发现，weblogic启动之后，由于一个线程一直在刷库，导致一直报db2连接错误，大约半个多小时后，数据库连接恢复正常，日志中没有再出现db2连接错误，大概又过了10分钟，weblogic出现内存不足报警，随后便大量抛出OutOfMemoryError ,end of stacktrace 异常，整个应用瘫掉。 2、模拟重现 根据日志反应的情况，我们模拟出一致情况。如果在weblogic完全启动之后，db2才启动（或者说才能够正常连接），会导致weblogic出现OutOfMemoryError，从OutOfMemoryError控制台内存监控中可以看到，内存占用成台阶式上升的，之后到了顶部就可以看到控制台weblogic输出报警。后经过bea工程师的相关诊断等，推荐我们应用程序通过JNDI获取应用weblogic提供的数据源。在此之前，我们系统确实使用spring配置的org.apache.commons.dbcp.BasicDataSource数据源。 导致此种情况的不知道是否由BasicDataSource所引起，在网上找了N久，都未曾找到一个说法，暂且记录下来。。。 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/526d8df5b058fa36a27f61de1af3b106/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2008-02-02T16:15:53+08:00" />
<meta property="article:modified_time" content="2008-02-02T16:15:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于spring配置BasicDataSource数据源问题记录</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    spring访问weblogic配置jndi数据源 
<br>环境： 
<br>db2服务器：aix,db2 8.1 
<br>应用服务器：rhel3,weblogic8.1,jdk1.4,db2客户端 
<br>数据库是通过app别名方式访问 
<br> 
<br>1、问题描述 
<br>前不久，我们系统出现了点毛病，客户那边突然断电，后来应用服务器和db2数据库服务器重新启动，发现客户端依然无法连接应用服务器，问题解决后，将服务器端日志拿下来分析发现，weblogic启动之后，由于一个线程一直在刷库，导致一直报db2连接错误，大约半个多小时后，数据库连接恢复正常，日志中没有再出现db2连接错误，大概又过了10分钟，weblogic出现内存不足报警，随后便大量抛出OutOfMemoryError ,end of stacktrace 异常，整个应用瘫掉。 
<br>2、模拟重现 
<br>根据日志反应的情况，我们模拟出一致情况。如果在weblogic完全启动之后，db2才启动（或者说才能够正常连接），会导致weblogic出现OutOfMemoryError，从OutOfMemoryError控制台内存监控中可以看到，内存占用成台阶式上升的，之后到了顶部就可以看到控制台weblogic输出报警。后经过bea工程师的相关诊断等，推荐我们应用程序通过JNDI获取应用weblogic提供的数据源。在此之前，我们系统确实使用spring配置的org.apache.commons.dbcp.BasicDataSource数据源。 
<br> 
<br> 导致此种情况的不知道是否由BasicDataSource所引起，在网上找了N久，都未曾找到一个说法，暂且记录下来。。。
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8557bd39903d04d0d2aafd1e8b5f9ecc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">动态创建html内容时所用的W3C DOM属性和方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bab0f5a178880ffad9442d8ee54c3103/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">程序员到底应该学什么？！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>