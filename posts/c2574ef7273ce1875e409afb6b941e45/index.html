<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NLP——8.基于统计的翻译系统 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="NLP——8.基于统计的翻译系统" />
<meta property="og:description" content="基于统计的机器翻译：mosesdecoder作为比对翻译效果的baseline，如果不如这个的效果，就说明测试系统效果不算好。
首先看看一共需要以下三个模型：
语言模型：用来评估这句话的通畅程度。
1、需要从大量的语料中学习出在新的句子知道对应的英语翻译是什么。
2、翻译模型：实质是基于短语的（不是基于单词的翻译）
3、平行语料：只要中英文两个文件中行是相同的，那他们就是相互对应的中英文
4、在大量的平行语料中学习出该怎样去完成。可能会对词进行一些表示，例如word2vec等将文字表示为计算机能读懂的向量。然后做后续的映射。
5、基于统计的机器翻译就是做大量运算之后得到一个统计表：中文对应英文某表达的概率（可能有很多对应，但是每种对应方式会有不同大小的概率值）
6、对于数字、日期、时间、网址等这类不需要翻译（翻译前后都是一模一样的数字），无需为他们在统计表中记录下来，因此可以提前将所有苏子都转化为$number标记好，然后在训练时就直接原封不动的保留下来即可，不必放入统计表中计算映射关系。
这类均可以通过自行定义泛化名进行原文替换。同时，泛化可以很好地解决数据稀疏的问题（因为所给的这些量只会有很少的次数对应，有可能所有个文档中就出现一次）
因此，可以对所有你认为有必要且能规整为一个固定模式的量都进行这样的泛化处理。
7、提前将训练数据做好分词（可以利用jieba等）对整个文件做好分词。如果不做这些预处理，会有很多冗余的信息量，会浪费很多内存。
1.双语数据预处理 目标：了解和学习开发汉英双语数据预处理模块。
双语数据预处理是统计机器翻译系统构建的第一步，为词对齐处理提供分词后的 双语数据。预处理的工作本质上就是双语数据的分词处理，与传统分词不同的一 点在于需要对一些特定类型词汇进行泛化处理，如数字词汇“123.45”泛化为 “$number”来代替原文。本讲中以汉英双语数据为处理内容。
中文分词预处理 采用传统基于词典的正向最大匹配法来完成中文分词。基本流程如图所示：
由于数字、日期、时间、网址等不可枚举，无法通过词典简单查找来分词。 可以采用正则表达式或者自动机进行自动识别，并给予特殊名字进行泛化。例如：
数字类型 $number 如：123
日期类型 $date 如：1993 年 12 月 3 日
时间类型 $time 如：3:10
网址等类型 $literal 如：http://www.niutrans.com
实际上大家可以总结更多类型，并自行定义泛化名字进行替换原文。泛化的 目的是为了有效解决数据稀疏问题。
需要注意一点的是，建议不要对组织机构名进行捆绑为一个词汇。例如将“东 北大学信息学院”最好分成两个词“东北大学”“信息学院”。这样做的好处是为 了有助于后面规则抽取模块抽取出更多翻译规则。
英文分词处理 相对于中文分词处理来说，英文分词主要处理三个问题：
将所有大写字母改为小写字母；将英文句尾结束符与句尾最后一个单词用空格分开；同样将数字、日期、时间、网址等不可枚举的类型进行识别，然后分 别采用特殊名字进行泛化处理。 例如双语句对：
中文：4 月 14 日我买了 10 本书。
英文：I bought 10 books on April 14.
预处理结果：
中文：$date 我 买 了 $number 本 书 。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c2574ef7273ce1875e409afb6b941e45/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-11T11:25:16+08:00" />
<meta property="article:modified_time" content="2020-05-11T11:25:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">NLP——8.基于统计的翻译系统</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>基于统计的机器翻译：mosesdecoder作为比对翻译效果的baseline，如果不如这个的效果，就说明测试系统效果不算好。</p> 
<p>首先看看一共需要以下三个模型：<br> <img src="https://images2.imgbox.com/6b/f3/JMztBBOv_o.png" alt="在这里插入图片描述"></p> 
<p>语言模型：用来评估这句话的通畅程度。</p> 
<p>1、需要从大量的语料中学习出在新的句子知道对应的英语翻译是什么。</p> 
<p>2、翻译模型：实质是基于短语的（不是基于单词的翻译）</p> 
<p>3、平行语料：只要中英文两个文件中行是相同的，那他们就是相互对应的中英文</p> 
<p>4、在大量的平行语料中学习出该怎样去完成。可能会对词进行一些表示，例如word2vec等将文字表示为计算机能读懂的向量。然后做后续的映射。</p> 
<p>5、基于统计的机器翻译就是做大量运算之后得到一个统计表：中文对应英文某表达的概率（可能有很多对应，但是每种对应方式会有不同大小的概率值）</p> 
<p>6、对于数字、日期、时间、网址等这类不需要翻译（翻译前后都是一模一样的数字），无需为他们在统计表中记录下来，因此可以提前将所有苏子都转化为$number标记好，然后在训练时就直接原封不动的保留下来即可，不必放入统计表中计算映射关系。</p> 
<p>这类均可以通过自行定义泛化名进行原文替换。同时，泛化可以很好地解决数据稀疏的问题（因为所给的这些量只会有很少的次数对应，有可能所有个文档中就出现一次）</p> 
<p>因此，可以对所有你认为有必要且能规整为一个固定模式的量都进行这样的泛化处理。</p> 
<p>7、提前将训练数据做好分词（可以利用jieba等）对整个文件做好分词。如果不做这些预处理，会有很多冗余的信息量，会浪费很多内存。</p> 
<h3><a id="1_26"></a>1.双语数据预处理</h3> 
<p><strong>目标</strong>：了解和学习开发汉英双语数据预处理模块。</p> 
<p>双语数据预处理是统计机器翻译系统构建的第一步，为词对齐处理提供分词后的 双语数据。预处理的工作本质上就是双语数据的分词处理，与传统分词不同的一 点在于需要对一些特定类型词汇进行泛化处理，如数字词汇“123.45”泛化为 “<strong>$number</strong>”来代替原文。本讲中以汉英双语数据为处理内容。</p> 
<h6><a id="_31"></a>中文分词预处理</h6> 
<p>采用传统基于词典的正向最大匹配法来完成中文分词。基本流程如图所示：<br> <img src="https://images2.imgbox.com/f6/9a/Y53xUqfa_o.png" alt="在这里插入图片描述"><br> 由于数字、日期、时间、网址等不可枚举，无法通过词典简单查找来分词。 可以采用正则表达式或者自动机进行自动识别，并给予特殊名字进行泛化。例如：</p> 
<blockquote> 
 <p>数字类型 $number 如：123<br> 日期类型 $date 如：1993 年 12 月 3 日<br> 时间类型 $time 如：3:10<br> 网址等类型 $literal 如：http://www.niutrans.com</p> 
</blockquote> 
<p>实际上大家可以总结更多类型，并自行定义泛化名字进行替换原文。泛化的 目的是为了有效解决数据稀疏问题。</p> 
<p>需要注意一点的是，建议不要对组织机构名进行捆绑为一个词汇。例如将“东 北大学信息学院”最好分成两个词“东北大学”“信息学院”。这样做的好处是为 了有助于后面规则抽取模块抽取出更多翻译规则。</p> 
<h6><a id="_44"></a>英文分词处理</h6> 
<p>相对于中文分词处理来说，英文分词主要处理三个问题：</p> 
<ol><li>将所有大写字母改为小写字母；</li><li>将英文句尾结束符与句尾最后一个单词用空格分开；</li><li>同样将数字、日期、时间、网址等不可枚举的类型进行识别，然后分 别采用特殊名字进行泛化处理。</li></ol> 
<p>例如双语句对：</p> 
<blockquote> 
 <p>中文：4 月 14 日我买了 10 本书。<br> 英文：I bought 10 books on April 14.<br> 预处理结果：<br> 中文：$date 我 买 了 $number 本 书 。<br> 英文：i bought $number books on $date</p> 
</blockquote> 
<h6><a id="_59"></a>其它说明：</h6> 
<p>1） 中文的全角字符可以考虑改写为半角字符来处理；<br> 2） 同一类型的泛化名字在中英文中最好一样，如中文/英文数字=&gt;$number；<br> 3） 也可以采用 CRF 或者语言模型来实现高性能中文分词；<br> 4） 注意区分英文的句尾符号“.”和“Mr. Smith”的“.”；<br> 5） 双语句对的泛化结果需要检查一致性，例如中文句子中包含 $number，正 常情况下，英文句子中也应该包含 $number 等；<br> 6） 目前有很多开源的分词工具可以被使用，如 NiuTrans 提供的双语数据预 处理工具从 <a href="http://www.nlplab.com/NiuPlan/NiuTrans.YourData.html" rel="nofollow">http://www.nlplab.com/NiuPlan/NiuTrans.YourData.html</a> 下载。</p> 
<hr> 
<h3><a id="2_68"></a>2.词对齐</h3> 
<p>IBM的思路：EM算法。</p> 
<p>由于语序问题肯定不能一个个词直接翻译。因此需要找到内在的词对齐的方式。</p> 
<p>在IBM出现之前，采用过很多句法上的努力。例如利用语法syntax分析（现在已经不怎么用）。因为当句子很长的、表达方式越来越多元化的时候，如果想要通过直接归纳出来一个固定模式的方法效果并不好。</p> 
<p>IBM提出直接用统计的方法来实现，直接找到词与词之间的对应关系。因此，当你送入大量语料库的时候，机器进行观察，很多句话里，都有中文中出现某词的时候英语中一定会出现另外一个词。</p> 
<p>采用共现（共同出现）来分析：<br> <img src="https://images2.imgbox.com/3b/ff/JdjvShuk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/30/b8/oP8x6UU7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/52/3f/WCvf5rGT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0d/2c/DDMgXwlw_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/15/41/p5lz0u7a_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/41/17/eSXPjNZM_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ca/33/0mO4ILL0_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c4/a3/ca863pYM_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/81/8a/b46JLwE1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ca/9b/aQ8RGKco_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/21/fd/IUoc8Aza_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f4/60/Qm5w5fp3_o.png" alt="在这里插入图片描述"></p> 
<p><strong>目标</strong>：学会使用词对齐工具 GIZA++并自行开发词对齐对称化程序。<br> 词对齐是统计机器翻译系统构建的第二步，经过第一步双语数据预处理后， 得到分词后的双语数据。而词对齐的任务就是要得到中英文词语的对应关系。</p> 
<h6><a id="GIZA_93"></a>GIZA++的使用</h6> 
<p>GIZA++是 GIZA（SMT 工具包 EGYPT 的一个组成部分）的扩展，扩展部分 主要由 Franz Josef Och 开发。GIZA++主要算法是 IBM model、HMM 等。</p> 
<ol><li>GIZA++运行环境：Linux，并预装软件 gcc、g++。</li><li>GIZA++下载地址： <a href="http://code.google.com/p/giza-pp/downloads/detail?name=giza-pp-v1.0.7.tar.gz" rel="nofollow">http://code.google.com/p/giza-pp/downloads/detail?name=giza-pp-v1.0.7.tar.gz</a></li><li>编译：<br> a) 首先进入到 GIZA++根目录<br> b) 解压包，指令：tar zxvf giza-pp-v1.0.7.tar.gz<br> c) 进入到解压后的目录，指令：cd giza-pp<br> d) 编译，指令：make</li><li>GIZA++运行：<br> a) 新建目录 Alignment，并将编译后的 GIZA+±v2 目录下的“GIZA++”、 “snt2cooc.out”、“plan2snt.out”文件和 mkcls-v2 目录下的“mkcls”文件，拷贝到 Alignment 目录下，同时将预处理后的文件 c.txt 和 e.txt 作为 GIZA++工具的 输入文件放到其中。<br> b) 在终端依次运行以下命令，获得下一步需要的文件：<strong>c2e.A3.final</strong> 和 <strong>e2c.A3.final</strong>。</li></ol> 
<pre><code class="prism language-python">$<span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token operator">/</span>plain2snt<span class="token punctuation">.</span>out e<span class="token punctuation">.</span>txt c<span class="token punctuation">.</span>txt 
$<span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token operator">/</span>snt2cooc<span class="token punctuation">.</span>out c<span class="token punctuation">.</span>vcb e<span class="token punctuation">.</span>vcb c_e<span class="token punctuation">.</span>snt<span class="token operator">&gt;</span> cooc<span class="token punctuation">.</span>ce 
$<span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token operator">/</span>snt2cooc<span class="token punctuation">.</span>out e<span class="token punctuation">.</span>vcb c<span class="token punctuation">.</span>vcb e_c<span class="token punctuation">.</span>snt <span class="token operator">&gt;</span> cooc<span class="token punctuation">.</span>ec 
$<span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token operator">/</span>mkcls <span class="token operator">-</span>m2 <span class="token operator">-</span>c80 <span class="token operator">-</span>n10 <span class="token operator">-</span>pe<span class="token punctuation">.</span>txt <span class="token operator">-</span>Ve<span class="token punctuation">.</span>vcb<span class="token punctuation">.</span>classes opt 
$<span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token operator">/</span>mkcls <span class="token operator">-</span>m2 <span class="token operator">-</span>c80 <span class="token operator">-</span>n10 <span class="token operator">-</span>pc<span class="token punctuation">.</span>txt <span class="token operator">-</span>Vc<span class="token punctuation">.</span>vcb<span class="token punctuation">.</span>classes opt 
$<span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token operator">/</span>GIZA<span class="token operator">+</span><span class="token operator">+</span> <span class="token operator">-</span>S c<span class="token punctuation">.</span>vcb –T e<span class="token punctuation">.</span>vcb –C c_e<span class="token punctuation">.</span>snt <span class="token operator">-</span>CoocurrenceFile cooc<span class="token punctuation">.</span>ce <span class="token operator">-</span>O c2e 
$<span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token operator">/</span>GIZA<span class="token operator">+</span><span class="token operator">+</span> <span class="token operator">-</span>S e<span class="token punctuation">.</span>vcb –T c<span class="token punctuation">.</span>vcb –C e_c<span class="token punctuation">.</span>snt <span class="token operator">-</span>CoocurrenceFile cooc<span class="token punctuation">.</span>ec <span class="token operator">-</span>O e2c 
</code></pre> 
<h6><a id="_115"></a>词对齐对称化</h6> 
<p>由于 GIZA++程序中，原语=&gt;目标语和目标语=&gt;原语的对齐过程是彼此独立 的，因此会产生两个对齐文件，<strong>词对齐对称化</strong>的任务就是通过一定的算法合并这 两个对齐文件。</p> 
<p>1、输入：GIZA++运行目录中的 c2e.A3.final 文件和 e2c.A3.final 文件，格式如下：</p> 
<ul><li>c2e.A3.final 文件的一个句对：</li></ul> 
<pre><code class="prism language-python"><span class="token comment"># Sentence pair (1) source length 5 target length 7 alignment score : 3.53407e-09 </span>
the weather <span class="token keyword">is</span> very good today <span class="token punctuation">.</span>  
NULL <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">1</span> <span class="token number">3</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 今天 <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 天气 <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 真 <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 好 <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre> 
<ul><li>e2c.A3.final 文件的一个句对</li></ul> 
<pre><code class="prism language-python"><span class="token comment"># Sentence pair (1) source length 7 target length 5 alignment score : 5.24219e-08 </span>
今天 天气 真 好 <span class="token punctuation">.</span>  
NULL <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> the <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> weather <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> very <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> good <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> today <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre> 
<p>其中，第三行大括号里面的数字，代表该大括号前面的词语对应的目标语的词的 位置。</p> 
<ul><li>如：“天气 ({ 2 })”中的“2”表示对应的英语中的“weather”。 “weather ({ 2 })”中的“2”表示对应的汉语中的“天气”。</li><li>因此，“天气”和“weather”构成了一个<strong>双向对齐</strong>“天气”“weather”。 “today ({ 1 })”中的“1”表示对应的汉语中的“今天”。 而“今天”后的（{}）为空，并未与“today”对应。</li><li>因此，“today”和“今天”就构成了一个<strong>单向对齐</strong>“today”=&gt;“今天”。</li><li>另外，“NULL ({ 1 3 6 })”表示英文中“the”“ is”“ today”对空，即形成<strong>空 对齐</strong>“the”=&gt;“NULL”，“ is”=&gt;“NULL”，“today”=&gt;“NULL”。</li></ul> 
<p>2、输出：将两个输入文件通过算法合并为对齐文件，文件中每一行格式如下：</p> 
<pre><code class="prism language-python"> <span class="token number">0</span><span class="token operator">-</span><span class="token number">5</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">0</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span> <span class="token number">2</span><span class="token operator">-</span><span class="token number">3</span> <span class="token number">3</span><span class="token operator">-</span><span class="token number">4</span> <span class="token number">4</span><span class="token operator">-</span><span class="token number">6</span> 
</code></pre> 
<p>其中， 0-5表示经过算法合并后，中文中第0个词“今天”与英文中第5个词“today” 对齐。<br> 3、词对齐对称化算法：</p> 
<blockquote> 
 <p>算法流程如下：<br> Matrix[src_len][trg_len];<br> neighboring =(上,下,左,右,左上,左下,右上,右下);<br> 寻找对齐节点，将双向对齐节点加入 Alignment</p> 
 <ul><li>循环直到没有新节点出现 
   <ul><li>遍历Alignment，查看该节点的 neighboring<br> 若某一 neighboring 单向对齐，且该点的原语或目标语未双向对齐<br> 则加入该节点到 Alignment</li></ul> </li><li>遍历 Matrix 
   <ul><li>如果存在某节点单向对齐，且该点的原语或目标语未双向对齐 则加入该节点到Alignment</li></ul> </li></ul> 
</blockquote> 
<p>该算法与 Philipp Koehn 的 GROW-DIAG-FINAL 算法类似。</p> 
<h6><a id="_161"></a>算法说明：</h6> 
<p>以上面的句对作为示例：</p> 
<pre><code class="prism language-python"> 中文到英文： 
 <span class="token comment"># Sentence pair (1) source length 5 target length 7 alignment score : 3.53407e-09 </span>
 the weather <span class="token keyword">is</span> very good today <span class="token punctuation">.</span>  
 NULL <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">1</span> <span class="token number">3</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 今天 <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 天气 <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 真 <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 好 <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 
 英文到中文： 
 <span class="token comment"># Sentence pair (1) source length 7 target length 5 alignment score : 5.24219e-08 </span>
 今天 天气 真 好 <span class="token punctuation">.</span>  
 NULL <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> the <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> weather <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> very <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> good <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> today <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<ol><li> <p>首先，找到对齐的词语对，将所有双向对齐加入 Alignment。如图（矩阵中 实心方格表示双向对齐，虚线空心方格表示单向对齐）：<br> <img src="https://images2.imgbox.com/03/c4/6esgMEQ0_o.png" alt="在这里插入图片描述"></p> </li><li> <p>遍历 Alignment，对其<strong>邻居</strong>进行检测，如果邻居中存在单向对齐的点，并且 该点的两个词中存在一个没有与任何词双向对齐，则将该点加入 Alignment。 循环这个操作直到没有新节点加入。如上图中，当遍历到“weather-天气”时， 发现该点左边存在单向对齐点“the-天气”，且“the”尚未与任何词双向对 齐，则将该点加入 Alignment。<br> <img src="https://images2.imgbox.com/0c/f4/l89LQkCd_o.png" alt="在这里插入图片描述"></p> </li><li> <p>最后遍历矩阵中所有节点，如果存在单向对齐的点，并且该点的两个词中<strong>存在</strong>一个没有与任何词双向对齐，则将该点也加入 Alignment。如图，当遍历 到“today-今天”时，发现该点是一个单向对齐点，并且“today”尚未与任何 词双向对齐，则将该点加入 Alignment。<br> <img src="https://images2.imgbox.com/7d/63/IAIivGwp_o.png" alt="在这里插入图片描述"></p> </li><li> <p>最后获得最终的对齐信息输出到文件，如上图所示，得到的对称化的词对齐 信息为：</p> </li></ol> 
<pre><code class="prism language-python"><span class="token number">0</span><span class="token operator">-</span><span class="token number">5</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">0</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span> <span class="token number">2</span><span class="token operator">-</span><span class="token number">3</span> <span class="token number">3</span><span class="token operator">-</span><span class="token number">4</span> <span class="token number">4</span><span class="token operator">-</span><span class="token number">6</span> 
</code></pre> 
<p>所有的ML算法中采用的训练数据都是平行语料，都是不跨行的。</p> 
<hr> 
<h3><a id="3__190"></a>3.短语翻译表构造 --短语抽取</h3> 
<p><strong>目标</strong>：深刻理解基于短语统计机器翻译系统中短语（指代短语对 ）抽取的基本算法，可自行开发短语抽取模块。</p> 
<p>短语抽取是统计机器翻译系统构建的第三步，经过第二步词对齐后，获得双语平行句对间的词对齐信息。短语抽取是短语翻译表构造的第一步（短语翻译表构造的第二步为短语翻译表概率估计 ），短语抽取的任务是从含有词对齐信息的双语平行句对中学习解码器在翻译过程中使用的翻译短语。</p> 
<h6><a id="_194"></a>示例短语</h6> 
<p><img src="https://images2.imgbox.com/1d/ee/M2Ej3uC1_o.png" alt="在这里插入图片描述"></p> 
<p>短语抽取的本质是从含有词对齐信息的平行句对中抽取基于短语的统计机器翻译系统中使用的翻译短语。图 1 中展示了从含有词对齐信息的双语平行句对（图 1 中上方图所示）中抽取的短语对（图1 中下方的“示例短语”所示）。从图 1 中可以看出，在给定词对齐信息的双语平行句对中，理想情况下是可以抽取与词对齐保持一致的短语对，如“示例短语”中所示的短语对。</p> 
<h6><a id="_198"></a>一致性短语</h6> 
<p>使用含有词对齐信息的双语平行句对进行短语抽取时，抽取出的短语对需要与词对齐保持一致。<br> 下面给出一致性的定义。</p> 
<p><img src="https://images2.imgbox.com/11/93/O5LyYLJh_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_203"></a>短语抽取算法</h6> 
<p>在定义“一致性短语”后，本节给出在含有词对齐信息的双语平行数据中抽取所有满足“一致性” 定义短语对的算法。</p> 
<p><strong>算法 1 的核心思想</strong>：长度从 1 到 I 遍历目标语端词串并且在源语端找到与之匹配的最小词串。如果目标语端词串中所有词汇在词对齐中对应的项都在与之匹配的源语词串范围内，并且源语端词串中所有词汇在词对齐中所对应的项都在目标语词串范围内时，同时源语、目标语词串不能只包含对空词汇，此时找到的源语端、目标语端词串便与词对齐保持一致，称双语端词串对为短语对。</p> 
<p>算法 1 详细解释如下：<br> <img src="https://images2.imgbox.com/e2/f0/SubVriXH_o.png" alt="在这里插入图片描述"></p> 
<ol><li>算法第 1 行与第 2 行在目标语端进行二重循<br> 环，目的是遍历目标语端所有可能出现的短<br> 语；算法第 2 行设臵当前目标语端词串的起<br> 始位置。</li><li>算法第 3 行设置当前目标语端词串的结束位置。</li><li>算法第 4 行设置当前源语端词串的起始位置与结束位置。起始位臵设置为源语句子长度的最大值，结束位置设置为 0。该设置可快速判断是否可找到与词对齐保持一致的短语。</li><li>算法第 5-10 行确保目标语端词串<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           e 
          
          
          
            i 
           
          
            1 
           
          
          
           
           
           
             i 
            
           
             2 
            
           
          
         
        
       
         e^{\over{i_2}} _{i_1} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.38118em; vertical-align: -0.376964em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.00422em;"><span class="" style="top: -2.72314em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.73542em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.384em;"><span class="" style="top: -2.656em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: 0em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">2</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.2255em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line mtight" style="border-bottom-width: 0.049em;"></span></span><span class="" style="top: -3.384em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.558029em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.376964em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 中的所有词汇在词对齐中对应的词汇在源语端词串<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           f 
          
          
          
            f 
           
          
            1 
           
          
          
           
           
           
             f 
            
           
             2 
            
           
          
         
        
       
         f^{\over{f_2}} _{f_1} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.44164em; vertical-align: -0.437416em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.00422em;"><span class="" style="top: -2.69869em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.10764em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.73542em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.384em;"><span class="" style="top: -2.656em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: -0.10764em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">2</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.2255em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line mtight" style="border-bottom-width: 0.049em;"></span></span><span class="" style="top: -3.384em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.558029em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.437416em;"><span class=""></span></span></span></span></span></span></span></span></span></span>范围内。</li><li>算法第 11 行使用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          e 
         
        
          x 
         
        
          t 
         
        
          r 
         
        
          a 
         
        
          c 
         
        
          t 
         
        
          ( 
         
         
         
           j 
          
         
           1 
          
         
        
          , 
         
         
         
           j 
          
         
           2 
          
         
        
          , 
         
         
         
           i 
          
         
           1 
          
         
        
          , 
         
         
         
           i 
          
         
           2 
          
         
        
          ) 
         
        
       
         extract (j_1,j_2,i_1,i_2) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05724em;">j</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.05724em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05724em;">j</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.05724em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>函数对找到的可能短语对进行验证和扩展，确保找到短语对与词对齐保持一致。</li></ol> 
<p><strong>算法 2</strong> 中 extract 函数是算法 1 中第 11 行使用的对找到的短语进行验证和扩展的函数。在与词对齐保持一致的短语对的扩展过程中，主要是短语对中源语端与目标语端边缘对空词汇的扩展。根据一致性的定义，边缘对空词汇不会影响短语一致性的性质，同时，抽取更多边缘对空扩展对空短语可获得更多上下文信息、可适当缓解词对齐不精确带来的问题。</p> 
<p>算法 2 详细解释如下：<br> <img src="https://images2.imgbox.com/6a/f2/2G0zK836_o.png" alt="在这里插入图片描述"></p> 
<ol><li>算法第 1-3 行保证找到的源语端词串中至少<br> 有一个词汇在词对齐中对应的项在目标语词<br> 串<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           e 
          
          
          
            i 
           
          
            1 
           
          
          
           
           
           
             i 
            
           
             2 
            
           
          
         
        
       
         e^{\over{i_2}} _{i_1} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.38118em; vertical-align: -0.376964em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.00422em;"><span class="" style="top: -2.72314em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.73542em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.384em;"><span class="" style="top: -2.656em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: 0em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">2</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.2255em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line mtight" style="border-bottom-width: 0.049em;"></span></span><span class="" style="top: -3.384em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.558029em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.376964em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 内。</li><li>算法第 4-8 行确保源语端词串<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           f 
          
          
          
            j 
           
          
            1 
           
          
          
           
           
           
             j 
            
           
             2 
            
           
          
         
        
       
         f^{\over{j_2}} _{j_1} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.41719em; vertical-align: -0.412972em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.00422em;"><span class="" style="top: -2.72314em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: -0.05724em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.73542em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.384em;"><span class="" style="top: -2.656em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: -0.05724em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">2</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.2255em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line mtight" style="border-bottom-width: 0.049em;"></span></span><span class="" style="top: -3.384em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.558029em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.412972em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 中的所有词 汇在词对齐中对应的词汇在目标语端词串<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           e 
          
          
          
            i 
           
          
            1 
           
          
          
           
           
           
             i 
            
           
             2 
            
           
          
         
        
       
         e^{\over{i_2}} _{i_1} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.38118em; vertical-align: -0.376964em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.00422em;"><span class="" style="top: -2.72314em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.73542em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.384em;"><span class="" style="top: -2.656em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: 0em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">2</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.2255em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line mtight" style="border-bottom-width: 0.049em;"></span></span><span class="" style="top: -3.384em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.558029em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.376964em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 范围内，即找到与词对齐一致的短语对。</li><li>算法第 9 行初始化短语对集合为空。</li><li>算法第 10-18 行扩展与词对齐保持一致的短<br> 语对，如果找到的短语对的源语端或目标语<br> 端的边界词汇对空，则扩展该短语对，将新<br> 短语对加入到短语对集合 E 中。</li><li>算法第 19 行返回短语对集合 E。</li></ol> 
<h6><a id="_234"></a>短语抽取流程</h6> 
<p><img src="https://images2.imgbox.com/dc/d4/LvM5Q1Z1_o.png" alt="在这里插入图片描述"><br> 图 2 展示应用短语抽取算法 1、2 抽取短语对的基本流程。其中“从目标语长度 n 开始循环”为算法 1 的第 1 行；每组三个图如“(a),(b)和©”为算法 1 中第 2 行至第 12 行。图（2）中（a）图展示抽取的一个与词对齐保持一致的短语对“北京，beijing”； （b）图展示一个非法的短语对“房价，housing”，其中目标语端词汇“prices”为异常点。</p> 
<h5><a id="_237"></a>满足一致性的短语</h5> 
<p><img src="https://images2.imgbox.com/4b/c1/fHZpeHvn_o.png" alt="在这里插入图片描述"></p> 
<ul><li>图 3 双语数据与词对齐信息中抽取满足一致性定义的所有短语对，以算法 1 实际短语抽取顺序排序</li></ul> 
<p>图 3 中所示“一致性短语”为根据上文“一致性”定义及“算法 1、2”从示例含有词对齐信息<br> 的双语平行句对中抽取的所有与词对齐保持一致的短语对。</p> 
<p> <strong>参考资源</strong></p> 
<ol><li>NiuTrans 源码：<a href="http://www.nlplab.com/NiuPlan/NiuTrans.ch.html" rel="nofollow">http://www.nlplab.com/NiuPlan/NiuTrans.ch.html</a> 下载 NiuTrans 源码包， NiuTrans 源码包目录/NiuTrans/src/NiuTrans.PhraseExtractor/ 下，phrasetable_extractor.cpp 与 phrasetable_extractor.h 两文件实现短语抽取功能。</li><li>Philipp Koehn. 2010. Statistical Machine Translation. Cambridge, UK: Cambridge University Press.</li><li>Tong Xiao, Jingbo Zhu, Hao Zhang and Qiang Li. 2012. NiuTrans: An Open Source Toolkit for Phrase-based and Syntax-based Machine Translation. In Proc. of ACL 2012, page 19-24.</li></ol> 
<h3><a id="4__249"></a>4.短语翻译表构造 –概率估计</h3> 
<p><strong>目标</strong>：深刻理解基于短语统计机器翻译系统中短语翻译表概率估计的基本步骤，可自行开发概率估计模块。</p> 
<p>短语翻译表概率估计是统计机器翻译系统构建的第四步，经过第三步短语抽取后，获得基于短语系统使用的翻译短语对，概率估计的作用是对翻译短语对的正确性进行合理的评估。</p> 
<h6><a id="_253"></a>示例短语对集合</h6> 
<p><img src="https://images2.imgbox.com/fb/a1/wutc2Hw1_o.png" alt="在这里插入图片描述"><br> 概率估计主要进行四个分数的计算，即<strong>双向</strong>(正向：“源语言-&gt;目标语言”方向；反向：“目标语言-&gt;源语言”方向 )短语翻译概率、双向词汇化权重。首先，在图 1 上方给定的含有词对齐的句对中，通过上一讲中的短语对抽取算法抽取出 14 条与词对齐保持一致的短语对，短语概率估计是在图 1 结果的基础上进行的(在进行概率估计时，短语对集合需要保留词对齐信息 )。</p> 
<h6><a id="_257"></a>双向短语翻译概率</h6> 
<p> <strong>“源语言-&gt;目标语言”短语翻译概率</strong></p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          P 
         
        
          r 
         
        
          ( 
         
         
         
           e 
          
         
           ‾ 
          
         
        
          ∣ 
         
         
         
           f 
          
         
           ‾ 
          
         
        
          ) 
         
        
          = 
         
         
          
          
            c 
           
          
            o 
           
          
            u 
           
          
            n 
           
          
            t 
           
          
            ( 
           
           
           
             f 
            
           
             ‾ 
            
           
          
            , 
           
           
           
             e 
            
           
             ‾ 
            
           
          
            ) 
           
          
          
           
           
             ∑ 
            
            
             
             
               e 
              
             
               i 
              
             
            
              ‾ 
             
            
           
          
            c 
           
          
            o 
           
          
            u 
           
          
            n 
           
          
            t 
           
          
            ( 
           
           
           
             f 
            
           
             ‾ 
            
           
          
            , 
           
           
            
            
              e 
             
            
              i 
             
            
           
             ‾ 
            
           
          
            ) 
           
          
         
        
       
         Pr( \overline e|\overline f )=\frac {count( \overline f,\overline e )}{\sum_{\overline {e_i}}count( \overline f,\overline {e_i} )} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.14444em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mord">∣</span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.75569em; vertical-align: -1.18425em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.57144em;"><span class="" style="top: -2.21556em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.173182em;"><span class="" style="top: -2.70029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord overline mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.67556em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328086em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.57756em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line mtight" style="border-bottom-width: 0.049em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.39981em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span><span class="mclose">)</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.18425em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
<p>在公式(1)中，短语翻译概率使用极大似然估计（maximum likelihood estimation）进行计算。其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         u 
        
       
         n 
        
       
         t 
        
       
         ( 
        
        
        
          f 
         
        
          ‾ 
         
        
       
         , 
        
        
        
          e 
         
        
          ‾ 
         
        
       
         ) 
        
       
      
        count( \overline f,\overline e) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.14444em; vertical-align: -0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>表示源言语与目标语言短语对<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
        
        
          f 
         
        
          ‾ 
         
        
       
         , 
        
        
        
          e 
         
        
          ‾ 
         
        
       
         ) 
        
       
      
        (\overline f,\overline e ) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.14444em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>在大规模双语平行句对中出现的频次，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          ∑ 
         
         
          
          
            e 
           
          
            i 
           
          
         
           ‾ 
          
         
        
       
         c 
        
       
         o 
        
       
         u 
        
       
         n 
        
       
         t 
        
       
         ( 
        
        
        
          f 
         
        
          ‾ 
         
        
       
         , 
        
        
         
         
           e 
          
         
           i 
          
         
        
          ‾ 
         
        
       
         ) 
        
       
      
        \sum_{\overline {e_i}}count( \overline f,\overline {e_i} ) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.29425em; vertical-align: -0.39981em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.173182em;"><span class="" style="top: -2.70029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord overline mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.67556em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328086em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.57756em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line mtight" style="border-bottom-width: 0.049em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.39981em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>表示以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          f 
         
        
          ‾ 
         
        
       
      
        \overline f 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.08888em; vertical-align: -0.19444em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span></span></span></span> 作为源语言端短语的短语对在大规模双语平行句对中出现的频次。</p> 
<p> <strong>“目标语言-&gt;源语言”短语翻译概率</strong></p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          P 
         
        
          r 
         
        
          ( 
         
         
         
           f 
          
         
           ‾ 
          
         
        
          ∣ 
         
         
         
           e 
          
         
           ‾ 
          
         
        
          ) 
         
        
          = 
         
         
          
          
            c 
           
          
            o 
           
          
            u 
           
          
            n 
           
          
            t 
           
          
            ( 
           
           
           
             e 
            
           
             ‾ 
            
           
          
            , 
           
           
           
             f 
            
           
             ‾ 
            
           
          
            ) 
           
          
          
           
           
             ∑ 
            
            
             
             
               f 
              
             
               i 
              
             
            
              ‾ 
             
            
           
          
            c 
           
          
            o 
           
          
            u 
           
          
            n 
           
          
            t 
           
          
            ( 
           
           
           
             e 
            
           
             ‾ 
            
           
          
            , 
           
           
            
            
              f 
             
            
              i 
             
            
           
             ‾ 
            
           
          
            ) 
           
          
         
        
       
         Pr( \overline f|\overline e )=\frac {count( \overline e,\overline f )}{\sum_{\overline {f_i}}count( \overline e,\overline {f_i} )} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.14444em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mord">∣</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.8048em; vertical-align: -1.23336em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.57144em;"><span class="" style="top: -2.21556em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.68719em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord overline mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.93944em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328086em;"><span class="" style="top: -2.357em; margin-left: -0.10764em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.84144em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line mtight" style="border-bottom-width: 0.049em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.448916em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mclose">)</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.23336em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
<p>反向的短语翻译概率与正向短语翻译概率计算方式相同，在公式(2)中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         u 
        
       
         n 
        
       
         t 
        
       
         ( 
        
        
        
          e 
         
        
          ‾ 
         
        
       
         , 
        
        
        
          f 
         
        
          ‾ 
         
        
       
         ) 
        
       
      
        count( \overline e,\overline f) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.14444em; vertical-align: -0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> 表示目标语言与源语言短语对<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
        
        
          e 
         
        
          ‾ 
         
        
       
         , 
        
        
        
          f 
         
        
          ‾ 
         
        
       
         ) 
        
       
      
        ( \overline e,\overline f) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.14444em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>在大规模双语平行句对中出现的频次，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          ∑ 
         
         
          
          
            f 
           
          
            i 
           
          
         
           ‾ 
          
         
        
       
         c 
        
       
         o 
        
       
         u 
        
       
         n 
        
       
         t 
        
       
         ( 
        
        
        
          e 
         
        
          ‾ 
         
        
       
         , 
        
        
         
         
           f 
          
         
           i 
          
         
        
          ‾ 
         
        
       
         ) 
        
       
      
        \sum_{\overline {f_i}}count( \overline e,\overline {f_i} ) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.34336em; vertical-align: -0.448916em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.68719em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord overline mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.93944em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328086em;"><span class="" style="top: -2.357em; margin-left: -0.10764em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.84144em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line mtight" style="border-bottom-width: 0.049em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.448916em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>表示以<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          e 
         
        
          ‾ 
         
        
       
      
        \overline e 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.63056em; vertical-align: 0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span></span></span></span></span>作为目标语言端短语的短语对在大规模双语平行句对中出现的频次。</p> 
<p>当使用的含有词对齐信息的双语平行句对的规模比较大时，抽取出来的短语对集合文件是非常大的，文件大小甚至会达到几个 GB 或几十 GB。所以，在使用公式(1)、公式(2)计算短语翻译概率时，需要对文件进行外部排序，以避免文件内容全部加载至内存中。以公式(1)为例，如果对抽取出来的短语对集合文件按照源语言端短语进行排序，这样具有相同源语短语的短语对在文件中将是依次出现<br> 的，此时仅需要同时读入有限的短语对至内存中便可进行条件概率分布分数的计算。</p> 
<p>在基于短语的统计机器翻译系统中，经常仅仅使用双向的短语翻译概率。在这种情况下，数据的稀疏性或不可靠的数据源可能会产生一些问题。如果短语<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          e 
         
        
          ‾ 
         
        
       
      
        \overline e 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.63056em; vertical-align: 0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span></span></span></span></span>和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          f 
         
        
          ‾ 
         
        
       
      
        \overline f 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.08888em; vertical-align: -0.19444em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span></span></span></span> 都只出现一次，那么短语翻译概率 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         P 
        
       
         r 
        
       
         ( 
        
        
        
          e 
         
        
          ‾ 
         
        
       
         ∣ 
        
        
        
          f 
         
        
          ‾ 
         
        
       
         ) 
        
       
         = 
        
       
         P 
        
       
         r 
        
       
         ( 
        
        
        
          f 
         
        
          ‾ 
         
        
       
         ∣ 
        
        
        
          e 
         
        
          ‾ 
         
        
       
         ) 
        
       
         = 
        
       
         1 
        
       
      
        Pr(\overline e|\overline f)=Pr(\overline f|\overline e)=1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.14444em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mord">∣</span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.14444em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="mord">∣</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>，这通常过高的估计了这种短语对的可靠性。为了判断不经常出现的短语对是否可靠，通常做法是将短语对分解成词的翻译，这样就可以检查短语对的匹配程度，这种方法称为词汇化加权，该方法是一种基本的平滑方法。</p> 
<h6><a id="_275"></a>双向词汇化翻译概率</h6> 
<p> <strong>“源语言-&gt;目标语言”词汇化加权</strong></p> 
<p><img src="https://images2.imgbox.com/bf/93/UaG3H6yV_o.png" alt="在这里插入图片描述"><br> 词汇化加权（lexical weighting）特征是将源语言端和目标语言端短语分解成词汇，进而检查词汇间的匹配程度。即源语言端短语 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          f 
         
        
          ‾ 
         
        
       
      
        \overline f 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.08888em; vertical-align: -0.19444em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span></span></span></span> 中词汇 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          f 
         
        
          1 
         
        
       
         . 
        
       
         . 
        
       
         . 
        
        
        
          f 
         
        
          J 
         
        
       
      
        f_1...f_J 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.09618em;">J</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>与目标语言端短语e中词汇<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          e 
         
        
          ! 
         
        
       
         . 
        
       
         . 
        
       
         . 
        
        
        
          e 
         
        
          I 
         
        
       
      
        e_!...e_I 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mclose mtight">!</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.07847em;">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的匹配程度。其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ω 
        
       
         ( 
        
        
        
          e 
         
        
          i 
         
        
       
         ∣ 
        
        
        
          f 
         
        
          j 
         
        
       
         ) 
        
       
      
        \omega(e_i|f_j) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>计算公式如公式(4)所示，该公式可以从含有词对齐的大规模平行句对中进行估计。在公式(4)中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         u 
        
       
         n 
        
       
         t 
        
       
         ( 
        
        
         
         
           f 
          
         
           ‾ 
          
         
        
          j 
         
        
       
         , 
        
        
         
         
           e 
          
         
           ‾ 
          
         
        
          i 
         
        
       
         ) 
        
       
      
        count (\overline f_j, \overline e_i) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.27469em; vertical-align: -0.380248em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord"><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.89444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span></span><span class="" style="top: -3.81444em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.217524em;"><span class="" style="top: -2.45586em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.380248em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.63056em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathdefault">e</span></span><span class="" style="top: -3.55056em;"><span class="pstrut" style="height: 3em;"></span><span class="overline-line" style="border-bottom-width: 0.04em;"></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> 表示的是词对<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
        
        
          f 
         
        
          j 
         
        
       
         , 
        
        
        
          e 
         
        
          i 
         
        
       
         ) 
        
       
      
        (f_j ,e_i ) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>在大规模双语平行句对中出现的频次，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          ∑ 
         
         
         
           e 
          
         
           i 
          
         
        
       
         c 
        
       
         o 
        
       
         u 
        
       
         n 
        
       
         t 
        
       
         ( 
        
        
        
          f 
         
        
          j 
         
        
       
         , 
        
        
        
          e 
         
        
          i 
         
        
       
         ) 
        
       
      
        \sum_{<!-- -->{e_i}}count( f_j, {e_i} ) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.14981em; vertical-align: -0.39981em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328086em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.39981em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>表示以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          f 
         
        
          j 
         
        
       
      
        f_j 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 为源语言端词汇的词对在大规模语料中出现的频次。<br> <img src="https://images2.imgbox.com/82/99/ZiNrywYe_o.png" alt="在这里插入图片描述"><br> 以图 1 中短语对“北京 房价 持续 上涨，beijing housing prices continued to rise”为例，公式(3)的具体计算方式如下所示：</p> 
<p><img src="https://images2.imgbox.com/c4/a8/TwA6uazK_o.png" alt="Pr ( | , ) (beijing| )* (housing| )* (prices| * (continued| )* (to|NULL)* (rise| ) lex e f a     北京 房价 房价) 持续 上涨"></p> 
<p>公式(3)是一个二重循环问题，在外层循环中，从目标语言端第一个词汇遍历至最后一个词汇，将概率值进行连乘；在内层循环中，当前目标语言端词汇为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          e 
         
        
          i 
         
        
       
      
        e_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> ，计算不同 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          f 
         
        
          j 
         
        
       
      
        f_j 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 翻译为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          e 
         
        
          i 
         
        
       
      
        e_i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 的概率和的均值。</p> 
<p> <strong>“目标语言-&gt;源语言”词汇化加权</strong><br> “目标语言-&gt;源语言”方向词汇化加权与公式(3)相似，具体如公式所示。<br> <img src="https://images2.imgbox.com/67/58/RXnSnE69_o.png" alt="在这里插入图片描述"><br> 在公式(5)中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ω 
        
       
         ( 
        
        
        
          f 
         
        
          i 
         
        
       
         ∣ 
        
        
        
          e 
         
        
          j 
         
        
       
         ) 
        
       
      
        \omega(f_i|e_j) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>计算如公式(6)所示。其中公式(6)说明与公式(4)类似。<br> <img src="https://images2.imgbox.com/d2/e0/mkYCea3Q_o.png" alt="在这里插入图片描述"></p> 
<p>以图 1 中短语对“北京 房价 持续 上涨，beijing housing prices continued to rise”为例，公式(5)的<br> 具体计算方式如下所示：<br> <img src="https://images2.imgbox.com/73/a9/ug6aFbCB_o.png" alt=""></p> 
<p>此处具体计算方式的解释与上文相似，在此不再赘述。至此，短语翻译表中最常使用的 4 个特征介绍完毕。</p> 
<ul><li>注：附件“phrase.translation.table ” 为在实际的汉英短语翻译系统中使用的短语翻译表中的一部分。该短语翻译表共分为五个域，第一个域为“源语言”端短语；第二个域为“目标语言”端短语；第三个域为分数域，其中前四个分数为本文讲的双向短语翻译概率和双向词汇化权重，这四个分数在概率值基础上通过取 log 获得；第 4 个域为短语对出现的频次；最后一个域为词对齐信息。</li></ul> 
<p> <strong>参考资源</strong></p> 
<ol><li>NiuTrans 源码：<a href="http://www.nlplab.com/NiuPlan/NiuTrans.ch.html" rel="nofollow">http://www.nlplab.com/NiuPlan/NiuTrans.ch.html</a> 下载 NiuTrans 源码包， NiuTrans 源码包目录/NiuTrans/src/NiuTrans.PhraseExtractor/下，ruletable_scorer.cpp 与 ruletable_scorer.h 两 文件实现短语翻译表概率估计功能。</li><li>Philipp Koehn. 2010. Statistical Machine Translation. Cambridge, UK: Cambridge University Press.</li><li>Tong Xiao, Jingbo Zhu, Hao Zhang and Qiang Li. 2012. NiuTrans: An Open Source Toolkit for Phrase-based and Syntax-based Machine Translation. In Proc. of ACL 2012, page 19-24.</li></ol> 
<hr> 
<h3><a id="5Decoding_308"></a>5.Decoding</h3> 
<p><img src="https://images2.imgbox.com/ec/c5/SVjFL2Cz_o.png" alt=""><br> <img src="https://images2.imgbox.com/04/47/YMXidAdH_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/56/15/eptljVrj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0c/fe/t3JlCSaI_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/72/46/W5Ji32T0_o.png" alt="在这里插入图片描述"><br> 两两组合看有多少种对齐方式列举成一棵树。<br> <img src="https://images2.imgbox.com/16/53/WOmyqBuL_o.png" alt="在这里插入图片描述"><br> 然后从头开始组成一句话。但是如果想要穷尽所有情况是一个NP难问题，没有办法实现，因此只能采取最优路径搜索。</p> 
<p>例如，下面提到的beam search算法可以很优秀地进行路径查找。此方法在谷歌NN翻译的解码阶段也有采用。<br> <img src="https://images2.imgbox.com/55/42/Do9dhdgx_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f7/84/ghs7sXp5_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/10/90/a7zXsWiY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7d/15/50Zlpxho_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d8/89/v66NQc7g_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/43/9d/MV5NwJ3v_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ec/8b/hYAXJrSi_o.png" alt="在这里插入图片描述"><br> Find Best Path：找最优路径。从而解码才是可控的。</p> 
<p>没有办法穷尽所有的路径，利用beam search来减少算法的复杂度。每次之后保留下来较优的候选，然后在节点处展开。</p> 
<p>beam search会限定一定的宽度，超过候选概率，概率较低的就从路径树上直接删去。然后实现给定参数的剪枝模型。<br> <img src="https://images2.imgbox.com/5d/ed/SpW7VdBv_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/af/a1/lRfKA3Pa_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f2/39/WsnYyLKp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bb/ef/2AfQQr13_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d8/71/ZVZKd6l1_o.png" alt="在这里插入图片描述">剪枝就是之前的Recombination步骤，将类似的合并取一个较优的出来。较差的drop<br> <img src="https://images2.imgbox.com/d8/06/w6ftsF4j_o.png" alt="在这里插入图片描述"><br> 每次选一定个数的候选，每次放一定个数的候选到堆栈当中。</p> 
<p>按照概率进行剪枝选择最好的项。</p> 
<p>然后将组合出来的句子计算概率。</p> 
<p>通过此算法可以找到一条或者多条较优的路径。然后就可以开始进行下一讲的评估了。<br> <img src="https://images2.imgbox.com/d0/0f/6Dj67dH1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/00/a0/TAyFkdTd_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4f/3b/aekcUiIg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ae/a4/PudJEPKK_o.png" alt="在这里插入图片描述"><br> 预估未来的代价：<br> <img src="https://images2.imgbox.com/3a/94/nqnQ2fwe_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6b/1c/QBkf7YYq_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c5/50/tUlTnh2q_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1e/1c/eQk3VSIF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7d/2d/WVj2vTNp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ed/54/2jl7NUoY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a7/83/M7XSYWQP_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/82/3a/oA3KUclb_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6Evaluation_357"></a>6.Evaluation</h3> 
<p>翻译其实是没有一个标准答案的，只能最终提供一个参考答案。所以评估结果是依据参考答案得出来的</p> 
<p><img src="https://images2.imgbox.com/ae/3b/D7KISQ79_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/37/aa/Y2VeQvBp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a2/67/aU6ER94K_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b3/30/RJPedBYZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6c/4d/mgh0RDGR_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4f/92/mpoyGlia_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/99/b8/On7YLWp0_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/38/18/luwcxonO_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/be/f6/GMsUxgID_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/62/41/pSA5t35e_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/16/52/kCQ088ua_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1d/ad/pbUkbQIZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/09/b3/BPI0ZGLK_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7a/db/TegxuR5T_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/43/28/1jZdStWu_o.png" alt="在这里插入图片描述"><br> 常用的评估：BLEU：</p> 
<p>判断翻译结果中，所有的N元祖，和标准答案N元祖之间的重合度</p> 
<p>通常计算精确度是计算1~4元的</p> 
<p>添加一个惩罚项penalty，当输出长度比参考的长度长的时候系数取1；当输出比参考短的时候，取他俩长度的比值。</p> 
<p>（惩罚项的意义就在于，如果翻译得到的输出比原句子短，越短说明翻译准确率越低，因此乘上相应的比例来衰减最终的BLEU得分）<br> <img src="https://images2.imgbox.com/b2/11/sKplTwOg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c4/3a/Wdh5VPaQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/58/a7/CpGdLspp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6f/80/CJ5sQvHL_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4c/e4/w22nYz1j_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e6/ac/PbyDcveg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/43/61/LI79TvG4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/31/0d/nricSHn5_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b5/8f/7lLQv3oc_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c4/ac/ZXmcDIMC_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/36/ca/G5z1YS0b_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d0/c0/LfRMqeyD_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f5/a6/A3ZxNquI_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f4/22/odvXbLxV_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ec/df/lRe3fB57_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/02/a0/fOJHO1bh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5a/28/wzs6FJTg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/05/17/XUjHZDM5_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/be/b7/n2OIHyWV_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/80/3d/kPdkQMfp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b0/12/7xpz1qlA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/93/7b/8Ho9hhyB_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/29/05/taMsWioY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/da/71/bNAkbMLQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0f/67/W3ce6PHW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/46/f5/io2Km9km_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="7Niutrans_410"></a>7.Niutrans</h3> 
<p>Niutrans：基于短语的统计翻译系统</p> 
<ol><li><strong>Data preparation数据准备阶段</strong></li></ol> 
<p>a) Training data 训练数据 LM-training-set和 LM-training-set</p> 
<p>b) Tuning data 调参参数（相当于超参数：来调整权重参数）</p> 
<p>c) Test data 测试效果的（类似交叉验证）</p> 
<p>d) Evaluation data 评估</p> 
<p>注意：</p> 
<p>1)、LM:语言模型language model无需对齐</p> 
<p>2)、在TM训练数据模型中，需要对齐</p> 
<ol start="2"><li><strong>Training Translation Model</strong></li></ol> 
<p>输入的数据有该模型的数据有：</p> 
<p>Chinese.txt</p> 
<p>english.txt</p> 
<p>Alignment.txt 对齐文本：根据一致性原则来生成</p> 
<p>输出得到的数据为：</p> 
<p>reordering.table：排序表，从一种语言到另外一种语言之间偏移了多少的概率</p> 
<p>phrase.translation.table：短语到短语之间转换的概率表</p> 
<p>处理过程：利用GIZA，先扫描输入数据中所有的单词，然后用滑动窗口扫描得出短语之间的对照关系，并利用短语一致性的原则来筛选得出最后的结果。</p> 
<ol start="3"><li><strong>Training n-gram language model语言模型</strong></li></ol> 
<p>最终建立成一个字典树，可以自行加载你想要的。</p> 
<ol start="4"><li><strong>Generating Configuration File</strong></li></ol> 
<p>由于底层是用C++写的，所以运算速率还可以。</p> 
<p>实际上生成一个配置文件，从而便于搭建出一个服务sever。</p> 
<ol start="5"><li><strong>Table Filtering（Optional）</strong></li></ol> 
<p>如果在五千万平行语料中生成了一个模型，但这个模型在线上加载时将非常消耗内存。</p> 
<p>如果是对一些子领域进行处理的时候，例如只想要实现对医学领域文本的处理，那就可以只选取加载和医学领域相关的短语，其余的就不加载了。</p> 
<p>因此就是做一下过滤，只抽取出你想要的短语。</p> 
<ol start="6"><li><strong>Weight Tuning</strong></li></ol> 
<p>可以理解为和机器学习中超参数的选择类似。</p> 
<ol start="7"><li><strong>Decoding Test Sentences</strong></li></ol> 
<p>解码只找最优的一条路径：1best.out</p> 
<p>如果想要解码得到两条最优路径：2best.out</p> 
<ol start="8"><li><strong>Recasing(Suppose that the target language is English)</strong></li></ol> 
<p>将英文的首字母全部大写，即还原成英语句子的样子。</p> 
<ol start="9"><li><strong>Detokenizer</strong></li></ol> 
<p>修改完善一些标点符号</p> 
<ol start="10"><li><strong>Evaluation评估</strong></li></ol> 
<p>转化格式，用一个xml格式的进行评估，比对标准的和你自己生成的xml文件。得到评估结果。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/37b19cfa0f4f42a11d9aa48c967f6ea5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python split()方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c39f7b26b6d018750d0893d61245a45f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python对象与类型之函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>