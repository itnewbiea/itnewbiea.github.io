<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>第一单元 用python学习微积分（二） 导数（上）- 瞬时速度 -- vscode -- pygame - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="第一单元 用python学习微积分（二） 导数（上）- 瞬时速度 -- vscode -- pygame" />
<meta property="og:description" content="本文内容来自学习麻省理工学院公开课：单变量微积分-极限和连续-网易公开课
目录
一、准备：
二、课程内容，导数可以在几何中表示曲线的变化率，同时也可以在物理中表现速度的变化率
三、python的展示，找找资料，选定了用pygame来展示这个南瓜坠落的实验。
四、这个小程序的说明：
一、准备： 安装vs code https://code.visualstudio.com/Download
安装pygame
pip install pygame 如果你的系统路径的python不是anaconda，还需要把sympy安装下
pip install sympy 二、课程内容，导数可以在几何中表示曲线的变化率，同时也可以在物理中表现速度的变化率 提出在80米的楼上，自由落体一个物体，设重力加速的为， 于是有如下公式：
(m)
从公式上看，很明显t最大为4， 因为这个时后物体已经落地， 下落至的离地高度为0
这时整个过程的平均速度： 当物体落地的瞬时速度: ( 此时使用了上节课的结论， )
由于 t=4 时物体落地， 所以落地时的瞬时速度为 三、python的展示，找找资料，选定了用pygame来展示这个南瓜坠落的实验。 由于坐标系做的有点问题，偏移时像素没有对应到小数位，结果不很准确，不过也能说明问题了。
import random import pygame import math import sys import time from pygame.constants import K_RETURN from Coordinate import * from screen import * from XRectangle import XRectangle from timer import Timer def CalculateDistance(seconds, g): return int(1/2*g*seconds**2) def CalculateSpeed(seconds, g): return seconds *g if __name__ == &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/7e49fe83bc404484f125098843bddb39/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-01T12:48:59+08:00" />
<meta property="article:modified_time" content="2022-05-01T12:48:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">第一单元 用python学习微积分（二） 导数（上）- 瞬时速度 -- vscode -- pygame</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>本文内容来自学习<a href="https://link.zhihu.com/?target=https%3A//open.163.com/newview/movie/free%3Fpid%3DM6GLI5A07%26mid%3DM6GLKJ57C" rel="nofollow" title="麻省理工学院公开课：单变量微积分-极限和连续-网易公开课">麻省理工学院公开课：单变量微积分-极限和连续-网易公开课</a></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%EF%BC%9A" rel="nofollow">一、准备：</a></p> 
<p id="%E4%BA%8C%E3%80%81%E8%AF%BE%E7%A8%8B%E5%86%85%E5%AE%B9%EF%BC%8C%E5%AF%BC%E6%95%B0%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%87%A0%E4%BD%95%E4%B8%AD%E8%A1%A8%E7%A4%BA%E6%9B%B2%E7%BA%BF%E7%9A%84%E5%8F%98%E5%8C%96%E7%8E%87%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%9C%A8%E7%89%A9%E7%90%86%E4%B8%AD%E8%A1%A8%E7%8E%B0%E9%80%9F%E5%BA%A6%E7%9A%84%E5%8F%98%E5%8C%96%E7%8E%87-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E8%AF%BE%E7%A8%8B%E5%86%85%E5%AE%B9%EF%BC%8C%E5%AF%BC%E6%95%B0%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%87%A0%E4%BD%95%E4%B8%AD%E8%A1%A8%E7%A4%BA%E6%9B%B2%E7%BA%BF%E7%9A%84%E5%8F%98%E5%8C%96%E7%8E%87%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%9C%A8%E7%89%A9%E7%90%86%E4%B8%AD%E8%A1%A8%E7%8E%B0%E9%80%9F%E5%BA%A6%E7%9A%84%E5%8F%98%E5%8C%96%E7%8E%87" rel="nofollow">二、课程内容，导数可以在几何中表示曲线的变化率，同时也可以在物理中表现速度的变化率</a></p> 
<p id="%E4%B8%89%E3%80%81python%E7%9A%84%E5%B1%95%E7%A4%BA%EF%BC%8C%E6%89%BE%E6%89%BE%E8%B5%84%E6%96%99%EF%BC%8C%E9%80%89%E5%AE%9A%E4%BA%86%E7%94%A8pygame%E6%9D%A5%E5%B1%95%E7%A4%BA%E8%BF%99%E4%B8%AA%E5%8D%97%E7%93%9C%E5%9D%A0%E8%90%BD%E7%9A%84%E5%AE%9E%E9%AA%8C%E3%80%82-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81python%E7%9A%84%E5%B1%95%E7%A4%BA%EF%BC%8C%E6%89%BE%E6%89%BE%E8%B5%84%E6%96%99%EF%BC%8C%E9%80%89%E5%AE%9A%E4%BA%86%E7%94%A8pygame%E6%9D%A5%E5%B1%95%E7%A4%BA%E8%BF%99%E4%B8%AA%E5%8D%97%E7%93%9C%E5%9D%A0%E8%90%BD%E7%9A%84%E5%AE%9E%E9%AA%8C%E3%80%82" rel="nofollow">三、python的展示，找找资料，选定了用pygame来展示这个南瓜坠落的实验。</a></p> 
<p id="%E5%9B%9B%E3%80%81%E8%BF%99%E4%B8%AA%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%AF%B4%E6%98%8E%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E8%BF%99%E4%B8%AA%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%AF%B4%E6%98%8E%EF%BC%9A" rel="nofollow">四、这个小程序的说明：</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%EF%BC%9A">一、准备：</h2> 
<p>安装vs code <a href="https://link.zhihu.com/?target=https%3A//code.visualstudio.com/Download" rel="nofollow" title="https://code.visualstudio.com/Download">https://code.visualstudio.com/Download</a></p> 
<p>安装pygame</p> 
<pre><code>pip install pygame</code></pre> 
<p>如果你的系统路径的python不是anaconda，还需要把sympy安装下</p> 
<pre><code>pip install sympy</code></pre> 
<h2 id="%E4%BA%8C%E3%80%81%E8%AF%BE%E7%A8%8B%E5%86%85%E5%AE%B9%EF%BC%8C%E5%AF%BC%E6%95%B0%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%87%A0%E4%BD%95%E4%B8%AD%E8%A1%A8%E7%A4%BA%E6%9B%B2%E7%BA%BF%E7%9A%84%E5%8F%98%E5%8C%96%E7%8E%87%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%9C%A8%E7%89%A9%E7%90%86%E4%B8%AD%E8%A1%A8%E7%8E%B0%E9%80%9F%E5%BA%A6%E7%9A%84%E5%8F%98%E5%8C%96%E7%8E%87">二、课程内容，导数可以在几何中表示曲线的变化率，同时也可以在物理中表现速度的变化率</h2> 
<p>提出在80米的楼上，自由落体一个物体，设重力加速的为<img alt="10 (m/s^2)" class="mathcode" src="https://images2.imgbox.com/e0/79/bN73til9_o.png">， 于是有如下公式：</p> 
<p><img alt="h = 80 - 5\times t^2" class="mathcode" src="https://images2.imgbox.com/e5/bb/N2knt86u_o.png"> (m)</p> 
<p>从公式上看，很明显t最大为4， 因为这个时后物体已经落地， 下落至的离地高度为0</p> 
<p>这时整个过程的平均速度： <img alt="\Delta h/\Delta t = ( 0-80 ) /4 = -20 (m/s)" class="mathcode" src="https://images2.imgbox.com/49/fa/kijV8L98_o.png"></p> 
<p>当物体落地的瞬时速度: <img alt="\frac{d}{dt}h=(80 - 5t^2)' = (80)' - (5t^2)' = 0 - 10t = -10t" class="mathcode" src="https://images2.imgbox.com/92/ee/EUbhEkDe_o.png"></p> 
<p>( 此时使用了上节课的结论， <img alt="(x^n)' = n\times x^{n-1}" class="mathcode" src="https://images2.imgbox.com/0a/11/OAH1uLIf_o.png">)</p> 
<p>由于 t=4 时物体落地， 所以落地时的瞬时速度为 <img alt="\frac{d}{dt}h = h(t)' = -40 (m/s)" class="mathcode" src="https://images2.imgbox.com/53/26/2KKINV0m_o.png"></p> 
<h2 id="%E4%B8%89%E3%80%81python%E7%9A%84%E5%B1%95%E7%A4%BA%EF%BC%8C%E6%89%BE%E6%89%BE%E8%B5%84%E6%96%99%EF%BC%8C%E9%80%89%E5%AE%9A%E4%BA%86%E7%94%A8pygame%E6%9D%A5%E5%B1%95%E7%A4%BA%E8%BF%99%E4%B8%AA%E5%8D%97%E7%93%9C%E5%9D%A0%E8%90%BD%E7%9A%84%E5%AE%9E%E9%AA%8C%E3%80%82">三、python的展示，找找资料，选定了用pygame来展示这个南瓜坠落的实验。</h2> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6d/f4/ouYlqBYF_o.png"></p> 
<p>由于坐标系做的有点问题，偏移时像素没有对应到小数位，结果不很准确，不过也能说明问题了。</p> 
<pre><code>import random
import pygame
import math
import sys
import time

from pygame.constants import K_RETURN
from Coordinate import *
from screen import *
from XRectangle import XRectangle
from timer import Timer
def CalculateDistance(seconds, g):
    return int(1/2*g*seconds**2)
def CalculateSpeed(seconds, g):
    return seconds *g
if __name__ == "__main__":
    g = 10
    x0 = 16
    y0 = 80
    height = 5
    scr = Screen()
    clock = pygame.time.Clock()

    pygame.init()
    coordinate = Coordinate(scr, 80.0/400.0, False)
    #building = Building(5,0, 10,80,coordinate)
    building = XRectangle(5, 0, 10, 80, coordinate, scr, 0)
    ti = Timer(60, 90,24,coordinate,scr)
    speed = Timer(60, 80,24,coordinate,scr)
    rectangle = XRectangle(x0, y0, height, height, coordinate, scr, 1)
    clock = pygame.time.Clock()
    timeBegin = 0
    seconds = 0
    running = True
    xx = 0
    tmpDistY = 0
    tmpDistY1 = 0
    tmpSpeed = '0'
    tmpSeconds = 0
    dist = 0
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False
                break
            elif event.type == pygame.KEYDOWN:
                 key = event.key
                 if key == K_RETURN:
                     timeBegin = time.time()

        scr.fill()
        building.draw()
        if timeBegin!=0:
            seconds = time.time()
            seconds = seconds - timeBegin
            dist = CalculateDistance(seconds, g)
            if dist !=0 and dist &lt;=80:
                tmpDistY = rectangle.draw_rect(0, dist)
                # this is not accurate since I can only use integer value to move
                print( 'dy/dx = ', (tmpDistY -tmpDistY1 ) / (seconds-tmpSeconds))
                if tmpSeconds!=seconds:
                   tmpSeconds = seconds
                
            else:
                rectangle.draw()
        else:
            rectangle.draw()
        ti.draw(time.ctime())
        if tmpDistY1 != tmpDistY:
            tmpSpeed = str(CalculateSpeed(seconds,g))
            speed.draw('peed:' + tmpSpeed)
            tmpDistY1 = tmpDistY
        else:
            speed.draw('peed:' + tmpSpeed)
        pygame.display.flip()
        clock.tick(40)</code></pre> 
<h2 id="%E5%9B%9B%E3%80%81%E8%BF%99%E4%B8%AA%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%AF%B4%E6%98%8E%EF%BC%9A">四、这个小程序的说明：</h2> 
<p>坐标类（用于坐标变换）Coordinate</p> 
<p>构造函数def __init__(self, scr, uor, beginFromLeftTop):</p> 
<p>coordinate = Coordinate(scr, 80.0/400.0, False) ，这里scr是pygame构造的窗口，uor表示80米为400个像素，方便做这个实验，beginFromLeftTop 这个变量在这个程序中为负，意思为x，y从左下角开始，实际上屏幕坐标从左上开始</p> 
<p>函数Dist ：用于把逻辑长度比如80m变成屏幕的像素</p> 
<p>函数XY：用于把逻辑坐标比如 （5m，0m） 变成屏幕坐标 （ ??,?? )</p> 
<p>长方形类XRectangle</p> 
<p>构造函数 def __init__(self, x, y, width, height, coord, screen, color):</p> 
<p>例如：building = XRectangle(5, 0, 10, 80, coordinate, scr, 0) 构造一个从窗口左边向右5m，从下开始0m高80米的一个黑色的矩形（颜色是个选项，0代表灰黑色，1代表红色）</p> 
<p>def draw_rect(self,distX,distY): 重画矩形， 在偏移为（distX， distY）的位置</p> 
<p>还有timer类用来展示时间，等等，有兴趣的请查看源代码。</p> 
<p>p.s. 敲击键盘Enter键使小方块落下。</p> 
<p>源代码：</p> 
<p>链接：<a href="https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1-Opq7S25ANjE8Oe203AAPQ" rel="nofollow" title="https://pan.baidu.com/s/1-Opq7S25ANjE8Oe203AAPQ">https://pan.baidu.com/s/1-Opq7S25ANjE8Oe203AAPQ</a></p> 
<p>提取码：qwmu</p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6991e265a9788adacc22de66738bac8d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Excel添加下拉选项菜单的方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c04e08dabb900d6a92e48e1d2ea7e1ad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">layui table 头部栏输入框无法输入问题，文字无法显示</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>