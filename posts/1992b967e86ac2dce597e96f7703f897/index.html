<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何查询linux服务器网卡所接交换机端口的LLDP信息 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何查询linux服务器网卡所接交换机端口的LLDP信息" />
<meta property="og:description" content="1、查询是否有按照lldpad的软件包，如果没有需要yum install lldpad
[root@backupsvr ~]# rpm -qi lldpad
Name : lldpad
Version : 1.0.1
Release : 5.git036e314.el7
Architecture: x86_64
Install Date: Thu 13 Jul 2023 04:53:04 PM CST
Group : System Environment/Daemons
Size : 714887
License : GPLv2
Signature : RSA/SHA256, Fri 24 May 2019 10:07:40 PM CST, Key ID 199e2f91fd431d51
Source RPM : lldpad-1.0.1-5.git036e314.el7.src.rpm
Build Date : Wed 27 Feb 2019 05:43:04 AM CST
Build Host : x86-040.build.eng.bos.redhat.com" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1992b967e86ac2dce597e96f7703f897/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-02T13:00:21+08:00" />
<meta property="article:modified_time" content="2023-11-02T13:00:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何查询linux服务器网卡所接交换机端口的LLDP信息</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>1、查询是否有按照lldpad的软件包，如果没有需要yum install lldpad</strong></p> 
<p>[root@backupsvr ~]#  rpm -qi lldpad<br> Name        : lldpad<br> Version     : 1.0.1<br> Release     : 5.git036e314.el7<br> Architecture: x86_64<br> Install Date: Thu 13 Jul 2023 04:53:04 PM CST<br> Group       : System Environment/Daemons<br> Size        : 714887<br> License     : GPLv2<br> Signature   : RSA/SHA256, Fri 24 May 2019 10:07:40 PM CST, Key ID 199e2f91fd431d51<br> Source RPM  : lldpad-1.0.1-5.git036e314.el7.src.rpm<br> Build Date  : Wed 27 Feb 2019 05:43:04 AM CST<br> Build Host  : x86-040.build.eng.bos.redhat.com<br> Relocations : (not relocatable)<br> Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;<br> Vendor      : Red Hat, Inc.<br> URL         : http://open-lldp.org/<br> Summary     : Intel LLDP Agent<br> Description :<br> This package contains the Linux user space daemon and configuration tool for<br> Intel LLDP Agent with Enhanced Ethernet support for the Data Center.<br><br> [root@backupsvr ~]# lldp<br> lldpad    lldptool  <br> [root@backupsvr ~]# lldptool</p> 
<p><strong>2、启动lldpad服务。</strong><br> [root@backupsvr ~]# service lldpad status   <br> Redirecting to /bin/systemctl status lldpad.service<br> 鈼lldpad.service - Link Layer Discovery Protocol Agent Daemon.<br>    Loaded: loaded (/usr/lib/systemd/system/lldpad.service; disabled; vendor preset: disabled)<br>    Active: inactive (dead)<br> [root@backupsvr ~]# service lldpad start<br> Redirecting to /bin/systemctl start lldpad.service<br> [root@backupsvr ~]# service lldpad status<br> Redirecting to /bin/systemctl status lldpad.service<br> 鈼[0m lldpad.service - Link Layer Discovery Protocol Agent Daemon.<br>    Loaded: loaded (/usr/lib/systemd/system/lldpad.service; disabled; vendor preset: disabled)<br>    Active: active (running) since Thu 2023-11-02 12:27:29 CST; 5s ago<br>  Main PID: 33422 (lldpad)<br>    CGroup: /system.slice/lldpad.service<br>            鈹斺攢33422 /usr/sbin/lldpad -t</p> 
<p>Nov 02 12:27:29 backupsvr systemd[1]: Started Link Layer Discovery Protocol Agent Daemon..</p> 
<p><br> [root@backupsvr ~]# lldptool -l -i em1 adminStatus<br> adminStatus=disabled<br> [root@backupsvr ~]# </p> 
<p>4种模式说明：</p> 
<p>TxRx：既发送也接收LLDP报文。</p> 
<p>Tx：只发送不接收LLDP报文。</p> 
<p>Rx：只接收不发送LLDP报文。</p> 
<p>Disable：既不发送也不接收LLDP报文</p> 
<p><strong>3、开启网卡的lldp管理协议。</strong><br> [root@backupsvr ~]# lldptool set-lldp -i em1 adminStatus=rxtx<br> adminStatus = rxtx</p> 
<p><strong>4、查询所接交换机端口信息。</strong><br> [root@backupsvr ~]#  lldptool -t -n -i em1<br> Chassis ID TLV<br>         MAC: a2:18:3f:90:18:00<br> Port ID TLV<br>         Ifname: GE11/0/45             #（<span style="color:#fe2c24;"><strong>对端交换机的端口信息</strong></span>）<br> Time to Live TLV<br>         120<br> Port Description TLV<br>         To-BeiFen0232                 #（<span style="color:#fe2c24;"><strong>端口描述</strong></span>）<br> System Name TLV<br>         Switch_A                            #（<span style="color:#fe2c24;"><strong>交换机名称</strong></span>）<br> System Description TLV<br>         Huawei Versatile Routing Platform Software<br> VRP (R) software, Version 8.120 (CE12800 V200R001C00SPC700)<br> Copyright (C) 2012-2016 Huawei Technologies Co., Ltd.<br> HUAWEI CE12812</p> 
<p>System Capabilities TLV<br>         System capabilities:  Bridge, Router<br>         Enabled capabilities: Bridge, Router<br> Management Address TLV<br>         IPv4: 10.235.255.12<br>         Ifindex: 272<br>         OID: 0.6.14.45.6.1.4.1.-112.91.5.25.41.1.2.1.1.1<br> Port VLAN ID TLV<br>         PVID: 2300<br> Port and Protocol VLAN ID TLV<br>         PVID: 0, not supported, not enabled<br> VLAN Name TLV<br>         VID 2300: Name VLAN2300<br> MAC/PHY Configuration Status TLV<br>         Auto-negotiation supported and enabled<br>         PMD auto-negotiation capabilities: 0x83a4<br>         MAU type: 1000 BaseXFD<br> Link Aggregation TLV<br>         Aggregation capable<br>         Currently aggregated<br>         Aggregated Port ID: 491<br> Maximum Frame Size TLV<br>         9216<br> End of LLDPDU TLV<br> [root@backupsvr ~]# </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1d1c45574a7d404cd81da71361d518ad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">优优嗨聚集团：医保新政来袭，乙类OTC、保健品或将退出医保舞台，影响几何？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4b2577eba99f14593549310d262e7c9e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">第3章 循环结构 《信息学奥赛一本通 编程启蒙》第30 -- 34课</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>