<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>读写ini配置文件（C&#43;&#43;） - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="读写ini配置文件（C&#43;&#43;）" />
<meta property="og:description" content="文章目录 1、为什么要使用ini或者其它(例如xml,json)配置文件？2、ini文件基本介绍3、ini配置文件的格式4、C&#43;&#43;读写ini配置文件5、 代码示例6、 配置文件的解析库 文章转载于：https://blog.csdn.net/weixin_44517656/article/details/109014236
1、为什么要使用ini或者其它(例如xml,json)配置文件？ 如果我们程序没有任何配置文件时，这样的程序对外是全封闭的，一旦程序需要修改一些参数必须要修改程序代码本身并重新编译，这样很不好，所以要用配置文件，让程序发布后还能根据需要进行必要的配置；配置文件有很多如INI配置文件，XML配置文件，还有就是可以使用系统注册表等。注意：ini的后缀名也不一定是&#34;.ini&#34;也可以是&#34;.cfg&#34;，“.conf ”或者是”.txt&#34;。因为ini文件实质就是txt文本文件。
配置文件除了读取外还可以写入：例如用户设置了习惯模式，这样下次启动读取文件的时候也是该模式
kv文件，是ini执行后出现的文件
2、ini文件基本介绍 .ini 文件是Initialization File的缩写，即初始化文件 [1] ，是windows的系统配置文件所采用的存储格式，统管windows的各项配置，一般用户就用windows提供的各项图形化管理界面就可实现相同的配置了。但在某些情况，还是要直接编辑.ini才方便，一般只有很熟悉windows才能去直接编辑。开始时用于WIN3X下面，WIN95用注册表代替，以及后面的内容表示一个节，相当于注册表中的键。除了windows2003很多其他操作系统下面的应用软件也有.ini文件，用来配置应用软件以实现不同用户的要求。一般不用直接编辑这些.ini文件，应用程序的图形界面即可操作以实现相同的功能。它可以用来存放软件信息,注册表信息等。 3、ini配置文件的格式 1、INI文件由节、键、值组成。
节： [section] 参数（键=值） name=value 注解 注解使用分号表示（;）在分号后面的文字，直到该行结尾都全部为注解。 1）对节进行说明：
所有的parameters都是以sections为单位结合在一起的。所有的section名称都是独占一行，并且sections名字都被方括号包围着（[ and ])。在section声明后的所有parameters都是属于该section。对于一个section没有明显的结束标志符，一个section的开始就是上一个section的结束，或者是end of the file。Sections一般情况下不能被nested，当然特殊情况下也可以实现sections的嵌套。因为INI文件可能是项目中共用的，所以使用[Section Name]段名来区分不同用途的参数区。 2）对参数进行说明：
INI所包含的最基本的“元素”就是parameter；每一个parameter都有一个name和一个value，name和value是由等号“=”隔开。name在等号的左边。 3）对注释内容进行说明：
在INI文件中注释语句是以分号 “；” 开始的(有些人定义类是由#注释，例如下面的RrConfig)。所有的所有的注释语句不管多长都是独占一行直到结束的，在分号和行结束符之间的所有内容都是被忽略的。 4、C&#43;&#43;读写ini配置文件 在VC中涉及的函数有如下四种。
1）读取字符串
//头文件：windows.h //返回字符串的实际大小，根据系统环境不同失败返回值不同（0或-1） DWORD GetPrivateProfileString( LPCTSTR lpAppName, // INI文件中的一个字段名[节名]可以有很多个节名（配置文件的section名），这个字串不区分大小写； LPCTSTR lpKeyName, // lpAppName 下的一个键名，也就是里面具体的变量名（配置文件的key名），这个字串不区分大小写； LPCTSTR lpDefault, // 如果lpReturnedString为空,则把这个变量赋给lpReturnedString，一般设为空（&#34;&#34;）； LPTSTR lpReturnedString, // 存放键值的指针变量,用于接收INI文件中键值(数据)的接收缓冲区 DWORD nSize, // 前一个参数对象lpReturnedString的缓冲区大小 LPCTSTR lpFileName // 完整的INI文件路径名 ); 2）读取整型值" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/f3dcf342e8ac31a1e008314bcc3bf600/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-08T00:14:08+08:00" />
<meta property="article:modified_time" content="2023-06-08T00:14:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">读写ini配置文件（C&#43;&#43;）</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1inixmljson_5" rel="nofollow">1、为什么要使用ini或者其它(例如xml,json)配置文件？</a></li><li><a href="#2ini_12" rel="nofollow">2、ini文件基本介绍</a></li><li><a href="#3ini_15" rel="nofollow">3、ini配置文件的格式</a></li><li><a href="#4Cini_37" rel="nofollow">4、C++读写ini配置文件</a></li><li><a href="#5__79" rel="nofollow">5、 代码示例</a></li><li><a href="#6__361" rel="nofollow">6、 配置文件的解析库</a></li></ul> 
</div> 
<p></p> 
<p>文章转载于：https://blog.csdn.net/weixin_44517656/article/details/109014236</p> 
<h2><a id="1inixmljson_5"></a>1、为什么要使用ini或者其它(例如xml,json)配置文件？</h2> 
<ul><li> <p>如果我们程序没有任何配置文件时，这样的程序对外是全封闭的，一旦程序需要修改一些参数必须要修改程序代码本身并重新编译，这样很不好，所以要用配置文件，让程序发布后还能根据需要进行必要的配置；<code>配置文件有很多如INI配置文件，XML配置文件，还有就是可以使用系统注册表等</code>。注意：ini的后缀名也不一定是".ini"也可以是".cfg"，“.conf ”或者是”.txt"。因为ini文件实质就是txt文本文件。</p> </li><li> <p>配置文件除了读取外还可以写入：例如用户设置了习惯模式，这样下次启动读取文件的时候也是该模式</p> </li><li> <p>kv文件，是ini执行后出现的文件</p> </li></ul> 
<h2><a id="2ini_12"></a>2、ini文件基本介绍</h2> 
<ul><li>.ini 文件是Initialization File的缩写，即初始化文件 [1] ，是windows的系统配置文件所采用的存储格式，统管windows的各项配置，一般用户就用windows提供的各项图形化管理界面就可实现相同的配置了。但在某些情况，还是要直接编辑.ini才方便，一般只有很熟悉windows才能去直接编辑。开始时用于WIN3X下面，WIN95用注册表代替，以及后面的内容表示一个节，相当于注册表中的键。</li><li>除了windows2003很多其他操作系统下面的应用软件也有.ini文件，用来配置应用软件以实现不同用户的要求。<code>一般不用直接编辑这些.ini文件，应用程序的图形界面即可操作以实现相同的功能</code>。它可以用来存放软件信息,注册表信息等。</li></ul> 
<h2><a id="3ini_15"></a>3、ini配置文件的格式</h2> 
<p>1、INI文件由节、键、值组成。</p> 
<pre><code class="prism language-c">节：
　　<span class="token punctuation">[</span>section<span class="token punctuation">]</span>
参数（键<span class="token operator">=</span>值）
　　name<span class="token operator">=</span>value
注解
　　注解使用分号表示（<span class="token punctuation">;</span>）在分号后面的文字，直到该行结尾都全部为注解。
</code></pre> 
<p>1）对节进行说明：</p> 
<ul><li>所有的parameters都是以sections为单位结合在一起的。所有的section名称都是独占一行，并且sections名字都被方括号包围着（[ and ])。在section声明后的所有parameters都是属于该section。对于一个section没有明显的结束标志符，一个section的开始就是上一个section的结束，或者是end of the file。Sections一般情况下不能被nested，当然特殊情况下也可以实现sections的嵌套。因为INI文件可能是项目中共用的，所以使用[Section Name]段名来区分不同用途的参数区。</li></ul> 
<p>2）对参数进行说明：</p> 
<ul><li>INI所包含的最基本的“元素”就是parameter；每一个parameter都有一个name和一个value，name和value是由等号“=”隔开。name在等号的左边。</li></ul> 
<p>3）对注释内容进行说明：</p> 
<ul><li>在INI文件中注释语句是以分号 “；” 开始的(有些人定义类是由#注释，例如下面的RrConfig)。所有的所有的注释语句不管多长都是独占一行直到结束的，在分号和行结束符之间的所有内容都是被忽略的。</li></ul> 
<h2><a id="4Cini_37"></a>4、C++读写ini配置文件</h2> 
<p>在VC中涉及的函数有如下四种。</p> 
<p>1）读取字符串</p> 
<pre><code class="prism language-c"><span class="token comment">//头文件：windows.h </span>
<span class="token comment">//返回字符串的实际大小，根据系统环境不同失败返回值不同（0或-1）</span>
DWORD <span class="token function">GetPrivateProfileString</span><span class="token punctuation">(</span> 
	LPCTSTR lpAppName<span class="token punctuation">,</span>        <span class="token comment">// INI文件中的一个字段名[节名]可以有很多个节名（配置文件的section名），这个字串不区分大小写；</span>
	LPCTSTR lpKeyName<span class="token punctuation">,</span>        <span class="token comment">// lpAppName 下的一个键名，也就是里面具体的变量名（配置文件的key名），这个字串不区分大小写；</span>
	LPCTSTR lpDefault<span class="token punctuation">,</span>        <span class="token comment">// 如果lpReturnedString为空,则把这个变量赋给lpReturnedString，一般设为空（""）；</span>
	LPTSTR lpReturnedString<span class="token punctuation">,</span>  <span class="token comment">// 存放键值的指针变量,用于接收INI文件中键值(数据)的接收缓冲区</span>
	DWORD nSize<span class="token punctuation">,</span>              <span class="token comment">// 前一个参数对象lpReturnedString的缓冲区大小</span>
	LPCTSTR lpFileName        <span class="token comment">// 完整的INI文件路径名</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>2）读取整型值</p> 
<pre><code class="prism language-c">UINT <span class="token function">GetPrivateProfileInt</span><span class="token punctuation">(</span>
	LPCTSTR lpAppName<span class="token punctuation">,</span>   <span class="token comment">// INI文件中的一个字段名[节名]可以有很多个节名</span>
	LPCTSTR lpKeyName<span class="token punctuation">,</span>   <span class="token comment">// lpAppName 下的一个键名，也就是里面具体的变量名</span>
	INT nDefault<span class="token punctuation">,</span>        <span class="token comment">// 如果没有找到指定的数据返回,则把个变量值赋给返回值</span>
	LPCTSTR lpFileName   <span class="token comment">// INI文件的路径</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>3）写入字符串</p> 
<pre><code class="prism language-c">BOOL <span class="token function">WritePrivateProfileString</span><span class="token punctuation">(</span>
	LPCTSTR lpAppName<span class="token punctuation">,</span>  <span class="token comment">// INI文件中的一个字段名[节名]可以有很多个节名</span>
	LPCTSTR lpKeyName<span class="token punctuation">,</span>  <span class="token comment">// lpAppName 下的一个键名，也就是里面具体的变量名</span>
	LPCTSTR lpString<span class="token punctuation">,</span>   <span class="token comment">// 键值,也就是数据</span>
	LPCTSTR lpFileName  <span class="token comment">// INI文件的路径</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>4）写入整数值（没有相关函数，可以通过WritePrivateProfileString进行参数转换来实现）</p> 
<h2><a id="5__79"></a>5、 代码示例</h2> 
<p>由于VC提供的函数部分功能比较少，一般解析配置文件都是调用库或者别人在项目中使用过的类，所以上面只是为了让大家了解ini的格式及相关参数的意义。下面的代码其实不需要看懂，只需要你会用即可。</p> 
<p>ReConfig.h文件</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">RR_CONFIG_H_</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">RR_CONFIG_H_</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;map&gt;</span></span>
namespace rr
<span class="token punctuation">{<!-- --></span>
	class RrConfig
	<span class="token punctuation">{<!-- --></span>
	public<span class="token operator">:</span>
		<span class="token function">RrConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		<span class="token punctuation">}</span>
		<span class="token operator">~</span><span class="token function">RrConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		<span class="token punctuation">}</span>
		bool <span class="token function">ReadConfig</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>string <span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> section<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> item<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> default_value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> <span class="token function">ReadInt</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> section<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> item<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> default_value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">float</span> <span class="token function">ReadFloat</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> section<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> item<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">float</span><span class="token operator">&amp;</span> default_value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	private<span class="token operator">:</span>
		bool <span class="token function">IsSpace</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
		bool <span class="token function">IsCommentChar</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">void</span> <span class="token function">Trim</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string <span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		bool <span class="token function">AnalyseLine</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span> line<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> section<span class="token punctuation">,</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span> key<span class="token punctuation">,</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	private<span class="token operator">:</span>
		<span class="token comment">//std::map&lt;std::string, std::string&gt; settings_;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span> <span class="token operator">&gt;</span>settings_<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre> 
<p>ReConfig.cpp文件</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ReConfig.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

namespace rr
<span class="token punctuation">{<!-- --></span>

	bool RrConfig<span class="token operator">::</span><span class="token function">IsSpace</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token char">' '</span> <span class="token operator">==</span> c <span class="token operator">||</span> <span class="token char">'\t'</span> <span class="token operator">==</span> c<span class="token punctuation">)</span>
			<span class="token keyword">return</span> true<span class="token punctuation">;</span>
		<span class="token keyword">return</span> false<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	bool RrConfig<span class="token operator">::</span><span class="token function">IsCommentChar</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">case</span> <span class="token char">'#'</span><span class="token operator">:</span>
			<span class="token keyword">return</span> true<span class="token punctuation">;</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> RrConfig<span class="token operator">::</span><span class="token function">Trim</span><span class="token punctuation">(</span>std<span class="token operator">::</span>string <span class="token operator">&amp;</span> str<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">int</span> i<span class="token punctuation">,</span> start_pos<span class="token punctuation">,</span> end_pos<span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">IsSpace</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		start_pos <span class="token operator">=</span> i<span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">IsSpace</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		end_pos <span class="token operator">=</span> i<span class="token punctuation">;</span>
		str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>start_pos<span class="token punctuation">,</span> end_pos <span class="token operator">-</span> start_pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	bool RrConfig<span class="token operator">::</span><span class="token function">AnalyseLine</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span> line<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> section<span class="token punctuation">,</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span> key<span class="token punctuation">,</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span> value<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>
		<span class="token keyword">int</span> start_pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> end_pos <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> pos<span class="token punctuation">,</span> s_startpos<span class="token punctuation">,</span> s_endpos<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>pos <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> pos<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> false<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			end_pos <span class="token operator">=</span> pos <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s_startpos <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"["</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s_endpos <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			section <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>s_startpos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> s_endpos <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> true<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		std<span class="token operator">::</span>string new_line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>start_pos<span class="token punctuation">,</span> start_pos <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> end_pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>pos <span class="token operator">=</span> new_line<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'='</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>
		key <span class="token operator">=</span> new_line<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
		value <span class="token operator">=</span> new_line<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> end_pos <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span>pos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">Trim</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">Trim</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>pos <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"\r"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>pos <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> true<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	bool RrConfig<span class="token operator">::</span><span class="token function">ReadConfig</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&amp;</span> filename<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		settings_<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>ifstream <span class="token function">infile</span><span class="token punctuation">(</span>filename<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//构造默认调用open,所以可以不调用open</span>
		<span class="token comment">//std::ifstream infile;</span>
		<span class="token comment">//infile.open(filename.c_str());</span>
		<span class="token comment">//bool ret = infile.is_open()</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>infile<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		std<span class="token operator">::</span>string line<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> section<span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span> k_v<span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">::</span>iterator it<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">getline</span><span class="token punctuation">(</span>infile<span class="token punctuation">,</span> line<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">AnalyseLine</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> section<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				it <span class="token operator">=</span> settings_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>section<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> settings_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					k_v<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
					it<span class="token operator">-&gt;</span>second <span class="token operator">=</span> k_v<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>
				<span class="token punctuation">{<!-- --></span>
					k_v<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					settings_<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span>section<span class="token punctuation">,</span> k_v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			key<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			value<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		infile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> true<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	std<span class="token operator">::</span>string RrConfig<span class="token operator">::</span><span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> section<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> item<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> default_value<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		std<span class="token operator">::</span>string <span class="token function">tmp_s</span><span class="token punctuation">(</span>section<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>string <span class="token function">tmp_i</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>string <span class="token function">def</span><span class="token punctuation">(</span>default_value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span> k_v<span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span><span class="token operator">::</span>iterator it_item<span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">::</span>iterator it<span class="token punctuation">;</span>
		it <span class="token operator">=</span> settings_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>tmp_s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">==</span> settings_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//printf("111");</span>
			<span class="token keyword">return</span> def<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		k_v <span class="token operator">=</span> it<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
		it_item <span class="token operator">=</span> k_v<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>tmp_i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>it_item <span class="token operator">==</span> k_v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//printf("222");</span>
			<span class="token keyword">return</span> def<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> it_item<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">int</span> RrConfig<span class="token operator">::</span><span class="token function">ReadInt</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> section<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> item<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> default_value<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		std<span class="token operator">::</span>string <span class="token function">tmp_s</span><span class="token punctuation">(</span>section<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>string <span class="token function">tmp_i</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span> k_v<span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span><span class="token operator">::</span>iterator it_item<span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">::</span>iterator it<span class="token punctuation">;</span>
		it <span class="token operator">=</span> settings_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>tmp_s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">==</span> settings_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> default_value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		k_v <span class="token operator">=</span> it<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
		it_item <span class="token operator">=</span> k_v<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>tmp_i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>it_item <span class="token operator">==</span> k_v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> default_value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token function">atoi</span><span class="token punctuation">(</span>it_item<span class="token operator">-&gt;</span>second<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">float</span> RrConfig<span class="token operator">::</span><span class="token function">ReadFloat</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> section<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> item<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">float</span><span class="token operator">&amp;</span> default_value<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		std<span class="token operator">::</span>string <span class="token function">tmp_s</span><span class="token punctuation">(</span>section<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>string <span class="token function">tmp_i</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span> k_v<span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span><span class="token operator">::</span>iterator it_item<span class="token punctuation">;</span>
		std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span> std<span class="token operator">::</span>string<span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">::</span>iterator it<span class="token punctuation">;</span>
		it <span class="token operator">=</span> settings_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>tmp_s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">==</span> settings_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> default_value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		k_v <span class="token operator">=</span> it<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
		it_item <span class="token operator">=</span> k_v<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>tmp_i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>it_item <span class="token operator">==</span> k_v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> default_value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token function">atof</span><span class="token punctuation">(</span>it_item<span class="token operator">-&gt;</span>second<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>main.cpp文件</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ReConfig.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cassert&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

	rr<span class="token operator">::</span>RrConfig config<span class="token punctuation">;</span>
	bool ret <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">ReadConfig</span><span class="token punctuation">(</span><span class="token string">"config.ini"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> false<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ReadConfig is Error,Cfg=%s"</span><span class="token punctuation">,</span> <span class="token string">"config.ini"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	std<span class="token operator">::</span>string HostName <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token string">"MYSQL"</span><span class="token punctuation">,</span> <span class="token string">"HostName"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> Port <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">ReadInt</span><span class="token punctuation">(</span><span class="token string">"MYSQL"</span><span class="token punctuation">,</span> <span class="token string">"Port"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>string UserName <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token string">"MYSQL"</span><span class="token punctuation">,</span> <span class="token string">"UserName"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"HostName="</span> <span class="token operator">&lt;&lt;</span> HostName <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Port="</span> <span class="token operator">&lt;&lt;</span> Port <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
	std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"UserName="</span> <span class="token operator">&lt;&lt;</span> UserName <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>config.ini文件</p> 
<pre><code class="prism language-c"><span class="token punctuation">[</span>MYSQL<span class="token punctuation">]</span>
HostName<span class="token operator">=</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
Port<span class="token operator">=</span><span class="token number">3306</span>
UserName<span class="token operator">=</span>root
</code></pre> 
<p>文件路径以及编译结果如图所示：</p> 
<p><img src="https://images2.imgbox.com/71/62/t6FLfn5o_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="6__361"></a>6、 配置文件的解析库</h2> 
<p>1）libconfig, C++版本是libconfig++<br> http://blog.csdn.net/crazyhacking/article/details/9668981</p> 
<p>2）C++的Json解析库：jsoncpp和boost .<br> http://www.cnblogs.com/lidabo/archive/2012/10/31/2748026.html</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e42fd8dac4800928a89cbba18019fe8d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql GROUP_CONCAT函数详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/51682d168a2a32e5c4d05a9258d1cf17/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">图表示学习和异质信息网络</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>