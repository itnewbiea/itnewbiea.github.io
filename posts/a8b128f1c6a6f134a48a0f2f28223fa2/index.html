<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LR中判断HTTP返回状态 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LR中判断HTTP返回状态" />
<meta property="og:description" content="有天，有个人问： 我在做 b/s 测试，请问如何保存从服务器传回来的 http 头的信息，怎么能得到 http 状态，和状态 200 进行比较？ 后来，我给出的代码如下： Action() {int i; // [WCSPARAM WCSParam_Text1 3 200] Parameter {WCSParam_Text1} created by Correlation Studio web_reg_save_param(&#34;WCSParam_Text1&#34;, &#34;LB=1.1 &#34;, &#34;RB= &#34;, &#34;Ord=1&#34;, &#34;RelFrameId=1&#34;, &#34;Search=Headers&#34;, &#34;IgnoreRedirections=Yes&#34;, LAST); web_url(&#34;www.hao123.com&#34;, &#34;URL=http://www.hao123.com/&#34;, &#34;Resource=0&#34;, &#34;RecContentType=text/html&#34;, &#34;Referer=&#34;, &#34;Snapshot=t1.inf&#34;, &#34;Mode=HTML&#34;, LAST); i=atoi(lr_eval_string(&#34;{WCSParam_Text1}&#34;)); if (i == 200) lr_log_message(&#34;终于成功了！！我不容易呀！！！&#34;); else lr_log_message(&#34;唉，又失败了，不过这才是正常的！ &#34;); return 0; } 后来查了帮助，看到如下方法才好： Action() { int HttpRetCode; web_url(&#34;www.hao123.com&#34;, &#34;URL=http://www.hao123.com/&#34;, &#34;Resource=0&#34;, &#34;RecContentType=text/html&#34;, &#34;Referer=&#34;, &#34;Snapshot=t1.inf&#34;, &#34;Mode=HTML&#34;, LAST); HttpRetCode = web_get_int_property(HTTP_INFO_RETURN_CODE); if (HttpRetCode == 200) lr_log_message(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a8b128f1c6a6f134a48a0f2f28223fa2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2007-03-22T16:22:00+08:00" />
<meta property="article:modified_time" content="2007-03-22T16:22:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LR中判断HTTP返回状态</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                      
<div>
  有天，有个人问： 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">我在做</span> 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">b/s</span> 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">测试，请问如何保存从服务器传回来的</span> 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">http</span> 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">头的信息，怎么能得到</span> 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">http</span> 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">状态，和状态</span> 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">200</span> 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">进行比较？</span> 
</div> 
<div> 
 <span style="FONT-SIZE: 9pt; COLOR: #333333">后来，我给出的代码如下：</span> 
</div> 
<div>
  Action() 
</div> 
<div>
  {int i; 
</div> 
<div> 
        // [WCSPARAM WCSParam_Text1 3 200] Parameter {WCSParam_Text1} created by Correlation Studio 
</div> 
<div> 
        web_reg_save_param("WCSParam_Text1", 
</div> 
<div> 
               "LB=1.1 ", 
</div> 
<div> 
               "RB= ", 
</div> 
<div> 
               "Ord=1", 
</div> 
<div> 
               "RelFrameId=1", 
</div> 
<div> 
               "Search=Headers", 
</div> 
<div> 
               "IgnoreRedirections=Yes", 
</div> 
<div> 
               LAST); 
</div> 
<div> 
        web_url("www.hao123.com", 
</div> 
<div> 
               "URL=http://www.hao123.com/", 
</div> 
<div> 
               "Resource=0", 
</div> 
<div> 
               "RecContentType=text/html", 
</div> 
<div> 
               "Referer=", 
</div> 
<div> 
               "Snapshot=t1.inf", 
</div> 
<div> 
               "Mode=HTML", 
</div> 
<div> 
               LAST); 
</div> 
<div>
   i=atoi(lr_eval_string("{WCSParam_Text1}")); 
</div> 
<div>
  if (i == 200) 
</div> 
<div> 
        lr_log_message("终于成功了！！我不容易呀！！！"); 
</div> 
<div> 
        else  
</div> 
<div> 
        lr_log_message("唉，又失败了，不过这才是正常的！ "); 
</div> 
<div> 
        return 0; 
</div> 
<div>
  } 
</div> 
<div>
  后来查了帮助，看到如下方法才好： 
</div> 
<div>
  Action() 
</div> 
<div>
  { 
</div> 
<div>
  int HttpRetCode; 
</div> 
<div> 
        web_url("www.hao123.com",  
</div> 
<div> 
               "URL=http://www.hao123.com/",  
</div> 
<div> 
               "Resource=0",  
</div> 
<div> 
               "RecContentType=text/html",  
</div> 
<div> 
               "Referer=",  
</div> 
<div> 
               "Snapshot=t1.inf",  
</div> 
<div> 
               "Mode=HTML",  
</div> 
<div> 
               LAST); 
</div> 
<div>
    
</div> 
<div> 
     HttpRetCode = web_get_int_property(HTTP_INFO_RETURN_CODE);  
</div> 
<div>
    
</div> 
<div>
  if (HttpRetCode == 200) 
</div> 
<div> 
        lr_log_message("终于成功了！！我不容易呀！！！"); 
</div> 
<div> 
        else  
</div> 
<div> 
        lr_log_message("唉，又失败了，不过这才是正常的！ "); 
</div> 
<div> 
        return 0; 
</div> 
<div>
  } 
</div> 
<div>
    
</div> 
<div>
  关于函数，偶不说了，查看帮助，清楚着哩。 
</div>  
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/826eda88b4000e53362082bcb87fd628/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于两个对象交换的问题（实践的角度）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b5f9697ad34b2d47001425b78b21c5b4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java调用C的dll</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>