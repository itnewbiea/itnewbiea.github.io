<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>迁移到Office365教程系列——部署DirSync - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="迁移到Office365教程系列——部署DirSync" />
<meta property="og:description" content="DirSync可以帮助您同步本地和Azure云端AD信息。
DirSync安装需求 软件环境要求 DirSync需要Windows Server 2003功能级别以上版本的on-premises Active Directory。您可以通过下属步骤验证您的AD版本：
打开Active Directory Domains And Trusts控制台；选择Active Directory Domains And Trusts node；在Action菜单点击Raise Forest Functional Level；对话框会显示当前功能级别，如图所示。 DirSync可以安装一下版本的操作系统上：
Windows Server 2003 with Service Pack 1 (x86 and x64)Windows Server 2003 R2 (x86 and x64)Windows Server 2008 (x86 and x64)Windows Server 2008 R2 (x64)Windows Server 2012 (x64)Windows Server 2012 R2 (x64) 在安装DirSync前，需要安装下列组件：
Microsoft .NET Framework 3.5 SP1Microsoft .NET Framework 4.0Azure Active Directory module for Windows PowerShell 运行DirSync的计算机必须是您想同步的域成员，并且保证下列端口与可读的域控可以通信：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/de82738060baf930fa5f32a53666e30c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-28T11:18:49+08:00" />
<meta property="article:modified_time" content="2023-12-28T11:18:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">迁移到Office365教程系列——部署DirSync</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>DirSync可以帮助您同步本地和Azure云端AD信息。</p> 
<h2>DirSync安装需求</h2> 
<h3>软件环境要求</h3> 
<p>DirSync需要Windows Server 2003功能级别以上版本的on-premises Active Directory。您可以通过下属步骤验证您的AD版本：</p> 
<ol><li>打开Active Directory Domains And Trusts控制台；</li><li>选择Active Directory Domains And Trusts node；</li><li>在Action菜单点击Raise Forest Functional Level；</li><li>对话框会显示当前功能级别，如图所示。</li></ol> 
<p><img alt="" height="359" src="https://images2.imgbox.com/5f/a8/J4bhqtkC_o.png" width="680"></p> 
<p>DirSync可以安装一下版本的操作系统上：</p> 
<ul><li>Windows Server 2003 with Service Pack 1 (x86 and x64)</li><li>Windows Server 2003 R2 (x86 and x64)</li><li>Windows Server 2008 (x86 and x64)</li><li>Windows Server 2008 R2 (x64)</li><li>Windows Server 2012 (x64)</li><li>Windows Server 2012 R2 (x64)</li></ul> 
<p>在安装DirSync前，需要安装下列组件：</p> 
<ul><li>Microsoft .NET Framework 3.5 SP1</li><li>Microsoft .NET Framework 4.0</li><li>Azure Active Directory module for Windows PowerShell</li></ul> 
<p>运行DirSync的计算机必须是您想同步的域成员，并且保证下列端口与可读的域控可以通信：</p> 
<ul><li>DNS: TCP/UDP Port 53</li><li>Kerberos: TCP/UDP Port 88</li><li>RPC: TCP Port 135</li><li>LDAP: TCP/UDP Port 389</li><li>SSL: TCP Port 443</li><li>SMB: TCP 445</li></ul> 
<p>同时该计算机必须可以通过TCP 443端口与互联网上的Microsoft Azure服务器通信。</p> 
<p>您可以在域控上安装DirSync，但是微软并不推荐您这么做。</p> 
<h3>硬件要求</h3> 
<p>下表提供了硬件需求指导，所有配置必须至少保证有一颗1.6GHz的处理器：</p> 
<div style="text-align:center;"> 
 <table border="0" cellspacing="0"><tbody><tr><td> <p><strong>Number of objects in Active Directory</strong></p> </td><td> <p><strong>Memo</strong></p> </td><td> <p><strong>Storage</strong></p> </td></tr><tr><td> <p>Fewer than 10,000</p> </td><td> <p>4 GB</p> </td><td> <p>70 GB</p> </td></tr><tr><td> <p>10,000–50,000</p> </td><td> <p>4 GB</p> </td><td> <p>70 GB</p> </td></tr><tr><td> <p>50,000–100,000</p> </td><td> <p>16 GB</p> </td><td> <p>100 GB</p> </td></tr><tr><td> <p>100,000–300,000</p> </td><td> <p>32 GB</p> </td><td> <p>300 GB</p> </td></tr><tr><td> <p>300,000–600,000</p> </td><td> <p>32 GB</p> </td><td> <p>450 GB</p> </td></tr><tr><td> <p>More than 600,000</p> </td><td> <p>32 GB</p> </td><td> <p>500 GB</p> </td></tr></tbody></table> 
</div> 
<p></p> 
<h3>安装账号要求</h3> 
<p></p> 
<p></p> 
<p></p> 
<p>安装DirSync需要下列账号：</p> 
<ul><li>具有Administrator permissions 的Office 365 tenant；</li><li>on-premises Active Directory forest的Enterprise Administrator；</li><li>本地管理员组账号；</li><li>DirSync安装完毕后，需要使用FIMSyncAdmins group成员同步。</li></ul> 
<h3>Office 365 要求</h3> 
<p>您需要在Office 365 Admin console中启用Active Directory Synchronization和增加另一个Domain for Office 365，如下图所示。</p> 
<p><img alt="" height="598" src="https://images2.imgbox.com/c2/5f/8ShNowcm_o.png" width="975"></p> 
<h2>安装DirSync</h2> 
<p>DirSync安装步骤：</p> 
<ol><li>使用<br> Administrator privileges登陆Office 365 Admin Center；</li><li>在Active Users node中点击Set Up next to Active Directory Synchronization；</li></ol> 
<p><img alt="" height="534" src="https://images2.imgbox.com/53/72/lImLQ9SF_o.png" width="766"></p> 
<p>3. 设置好Domain；</p> 
<p><img alt="" height="548" src="https://images2.imgbox.com/70/60/VgGRphwM_o.png" width="881"></p> 
<p>4. 在 Office 365 Admin Center中，点击USERS下的Active Users，然后点击Set Up next to Active Directory Synchronization；</p> 
<p>5. 在Set Up next to Active Directory Synchronization页面，点击Activate；</p> 
<p><img alt="" height="542" src="https://images2.imgbox.com/94/f1/oW57VBLP_o.png" width="881"></p> 
<p>6. 在Do You Want To Activate Active Directory Synchronization页面点击Activate；</p> 
<p>7. 检查在 Do You Want To Activate Active Directory Synchronization页面是否显示Activated；</p> 
<p><img alt="" height="497" src="https://images2.imgbox.com/fc/70/HbqsRDwK_o.png" width="877"></p> 
<p>8. 在 Do You Want To Activate Active Directory Synchronization页面Install And Configure The Directory Sync Too处点击Download；</p> 
<p><img alt="" height="566" src="https://images2.imgbox.com/d3/42/0lZrmmhZ_o.png" width="805"></p> 
<p>9. 保存DirSync.exe到目标计算器；</p> 
<p>10. DirSync.exe下载完后，双击开始安装；</p> 
<p>11. 在欢迎页点击Next；</p> 
<p><img alt="" height="570" src="https://images2.imgbox.com/fb/e7/Wesa8Ay5_o.png" width="786"></p> 
<p>12. 同意Microsoft Software License Terms，点击Next；</p> 
<p><img alt="" height="572" src="https://images2.imgbox.com/d8/66/X3wP1qna_o.png" width="788"></p> 
<p>13. 选择安装位置；</p> 
<p><img alt="" height="566" src="https://images2.imgbox.com/31/e4/lEPZ6fB3_o.png" width="784"></p> 
<p>14. 等待5~15分钟安装；</p> 
<p>15. 安装完毕后，注销您的计算机然后重新登陆，点击Finish。</p> 
<p><img alt="" height="558" src="https://images2.imgbox.com/c6/93/nNHSZ6EJ_o.png" width="781"></p> 
<p style="margin-left:18pt;">安装完毕后，计算机中会新增下列groups。</p> 
<p><img alt="" height="261" src="https://images2.imgbox.com/97/28/WfmLAB0v_o.png" width="859"></p> 
<p style="margin-left:18pt;">配置DirSync的账号需要是FIMSyncAdmins group的成员。</p> 
<p><img alt="" height="570" src="https://images2.imgbox.com/f2/68/de2ptCxK_o.png" width="511"></p> 
<h2>初始化DirSync配置</h2> 
<p>DirSync配置步骤如下：</p> 
<ol><li>在桌面上打开Directory Sync Configuration图标；</li><li>在Windows Azure Active Directory Sync Tool Configuration Wizard欢迎页上点击Next；</li><li>在Windows Azure Active Directory Credentials page上输入Office 365 Tenant Administrator account；</li></ol> 
<p><img alt="" height="432" src="https://images2.imgbox.com/ea/8c/sAm4b6oR_o.png" width="602"></p> 
<p>4. 在Active Directory Credential页面输入Enterprise Administrator credentials；</p> 
<p><img alt="" height="432" src="https://images2.imgbox.com/6e/18/IO7OWCHR_o.png" width="602"></p> 
<p>5. 在Hybrid Deployment页面，选择Enable Hybrid Deployment如果你希望Azure Active Directory回写数据到您的on-premises Active Directory实例；</p> 
<p><img alt="" height="369" src="https://images2.imgbox.com/63/42/q2Tqk8FC_o.png" width="515"></p> 
<p>6. 在Password Synchronization页面，选择允许密码同步；</p> 
<p><img alt="" height="369" src="https://images2.imgbox.com/47/0c/u6eynAEY_o.png" width="515"></p> 
<p>7. 配置完毕后，点击Next；</p> 
<p>8. 在结束页面，选择Synchronize Your Directories Now，然后点击Finish。</p> 
<p><img alt="" height="388" src="https://images2.imgbox.com/1a/de/5ZbRucw9_o.png" width="541"></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/145929182902ab918fa4f0cc753607e5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">边缘计算网关在温室大棚智能控制系统应用，开启农业新篇章</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4d8a62f3efa02e448cfd3718fa6bcd3c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Transform环境搭建与代码调试——Attention Is All Y ou Need</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>