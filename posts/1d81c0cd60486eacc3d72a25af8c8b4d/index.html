<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>什么是DNS解析？DNS解析的详细过程是什么样的？ - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="什么是DNS解析？DNS解析的详细过程是什么样的？" />
<meta property="og:description" content="IP地址和域名的关系
TCP/IP网络要求每一个互联的计算机都有一个唯一的IP地址，如39.162.20.48。IP地址是网络中每一台计算机的电子标识符，计算机通过IP地址与其他计算机进行定位和通信。但直接使用IP地址有很多不便之处，因为IP地址是由一串纯数字组成，很难区分和记忆。
在互联网早期，网站较少，人们还可以直接根据IP地址去定位网站。但随着互联网的快速发展，各种各样的网站快速增长，每个人在日常工作中都会接触到大量的网站，而要记住所有网站的IP地址显然是不现实的。
目前我们访问网站的主要方式并不是IP地址，而是使用另外一种寻址符——域名。域名是由数字、字母和特殊符号组成的字符串，如baidu.com、12306.cn等，和IP地址相比，域名具有一定的规律性，更方便人们记忆。
但从计算机的角度来看，由于域名的字节长度更长，计算机利用域名进行通信会消耗更大的资源。而且计算机更擅长处理纯数字，对于字母和数字的组合理解起来更加困难。所以目前的互联网中有域名和IP两种通信方式，分别由人类和计算机使用。
为了打破两者之间的互通障碍，DNS解析服务应运而生，DNS解析能够将域名与IP地址进行绑定，实现两者之间的一一指向关系。通过DNS解析的翻译功能，用户就能通过域名，访问到网站对应的服务器IP，获取最终的服务。
DNS系统结构
提供DNS解析服务的系统被称为DNS（Domain Name System，域名系统），它是一个存储域名IP地址相互映射关系的一个分布式数据库，能够为用户提供DNS解析服务，将用户请求的域名翻译成计算机可直接识别的IP地址，从而能够让用户更方便地访问互联网，而不用去记住每个网站的IP地址。
域名与IP地址的映射关系必须储存在域名服务器中，供其他应用查询，为了提升解析的稳定性和效率，DNS系统采用了分层式结构，每一层的域名服务器只对其所辖的部分进行应答。根据不同域名服务器起到的作用，可以将域名服务器划分为四种不同的类型：
根域名服务器
根域名服务器是DNS结构中最高层次的域名服务器。当本地域名服务器无法对域名进行解析时，首先会请求根域名服务器。
顶管域名服务器
顶级域名服务器是根服务器下第二层服务器，本地DNS服务器在根服务器请求不到结果后，会向顶级域名服务器发起查询请求，顶级域名服务器返回二级域名授权的DNS服务器地址。
权威域名服务器
权威域名服务器负责某一个区的域名服务器。当一个顶级域名服务器还不能给出最后查询回答时，就会告知下一步应当请求的权威域名服务器地址。
本地域名服务器
本地域名服务器并不属于下图中的树状结构的DNS域名服务器，但是它对域名系统非常重要。当一个主机发出DNS查询请求时，这个查询请求报文就发送给本地域名服务器。每一个互联网服务提供者ISP都可以拥有一个本地域名服务器。
DNS解析是分布式存储的，其中根域名服务器只存储了260个顶级域名服务器的IP地址。顶级域名服务器如.cn的顶级域名服务器，则存储着下一级权威解析服务器地址，如vip1.sfndns.cn，而这才是提供域名与IP地址指向关系的服务器，是整个DNS解析环节的核心。
DNS解析的具体流程
每当发送一个url请求，浏览器就会启动一个DNS查询，使浏览器获得域名对应的IP地址。
为了节省DNS解析时间，在DNS解析各个环节中都引入了缓存机制，当客户端发起解析请求时，首先会从各级的DNS缓存中查询结果，如果命中直接返回，无需再请求各级域名服务器。
（1）查看浏览器缓存
浏览器会将每一条域名解析结果缓存一段时间，当用户发起请求时，浏览器首先会查询自身的缓存中是否有想要的结果，如果有直接返回，解析到此结束；如果没有再请求下一级。
（2）查看系统缓存
如果浏览器中没有要找的记录，浏览器就会做一个系统调用（windows里是gethostbyname），从系统缓存中查找信息。
（3）查看路由器缓存
当浏览器及系统缓存中均无域名对应 IP 则进入路由器缓存中检查，以上三步均为客户端的 DNS 缓存。
（4）查看ISP DNS 缓存
当在用户客户端查找不到域名对应 IP 地址，则将进入 ISP DNS 缓存中进行查询。比如你用的是电信的网络，则会进入电信的 DNS 缓存服务器中进行查找。
如果以上步骤中都没有目标域名的缓存记录，本地DNS服务器才开始通过DNS系统发起全球的迭代查询。
（5）本地DNS服务器首先请求根域名服务器；
（6）根域名服务器告知下一级顶级域名服务器的地址；
（7）本地DNS服务器请求顶级域名服务器；
（8）顶级域名服务器告知域名授权的权威域名服务器地址；
（9）本地DNS服务器请求权威域名服务器；
（10）权威服务器将域名对应的IP地址告知本地DNS服务器；
（11）本地DNS服务器将解析记录返回给客户端浏览器。
至此，整个DNS解析流程结束，客户端浏览器根据解析记录对目标IP发起访问。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/1d81c0cd60486eacc3d72a25af8c8b4d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-05T13:46:07+08:00" />
<meta property="article:modified_time" content="2024-01-05T13:46:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">什么是DNS解析？DNS解析的详细过程是什么样的？</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>IP地址和域名的关系</strong></p> 
<p>TCP/IP网络要求每一个互联的计算机都有一个唯一的IP地址，如39.162.20.48。IP地址是网络中每一台计算机的电子标识符，计算机通过IP地址与其他计算机进行定位和通信。但直接使用IP地址有很多不便之处，因为IP地址是由一串纯数字组成，很难区分和记忆。</p> 
<p>在互联网早期，网站较少，人们还可以直接根据IP地址去定位网站。但随着互联网的快速发展，各种各样的网站快速增长，每个人在日常工作中都会接触到大量的网站，而要记住所有网站的IP地址显然是不现实的。</p> 
<p>目前我们访问网站的主要方式并不是IP地址，而是使用另外一种寻址符——域名。域名是由数字、字母和特殊符号组成的字符串，如baidu.com、12306.cn等，和IP地址相比，域名具有一定的规律性，更方便人们记忆。</p> 
<p>但从计算机的角度来看，由于域名的字节长度更长，计算机利用域名进行通信会消耗更大的资源。而且计算机更擅长处理纯数字，对于字母和数字的组合理解起来更加困难。所以目前的互联网中有域名和IP两种通信方式，分别由人类和计算机使用。</p> 
<p>为了打破两者之间的互通障碍，<a href="https://www.sfn.cn/cloudParsing.html" rel="nofollow">DNS解析</a>服务应运而生，DNS解析能够将域名与IP地址进行绑定，实现两者之间的一一指向关系。通过DNS解析的翻译功能，用户就能通过域名，访问到网站对应的服务器IP，获取最终的服务。</p> 
<p><strong>DNS系统结构</strong></p> 
<p>提供DNS解析服务的系统被称为DNS（Domain Name System，域名系统），它是一个存储域名IP地址相互映射关系的一个分布式数据库，能够为用户提供DNS解析服务，将用户请求的域名翻译成计算机可直接识别的IP地址，从而能够让用户更方便地访问互联网，而不用去记住每个网站的IP地址。</p> 
<p>域名与IP地址的映射关系必须储存在域名服务器中，供其他应用查询，为了提升解析的稳定性和效率，DNS系统采用了分层式结构，每一层的域名服务器只对其所辖的部分进行应答。根据不同域名服务器起到的作用，可以将域名服务器划分为四种不同的类型：</p> 
<p>根域名服务器</p> 
<p>根域名服务器是DNS结构中最高层次的域名服务器。当本地域名服务器无法对域名进行解析时，首先会请求根域名服务器。</p> 
<p>顶管域名服务器</p> 
<p>顶级域名服务器是根服务器下第二层服务器，本地DNS服务器在根服务器请求不到结果后，会向顶级域名服务器发起查询请求，顶级域名服务器返回二级域名授权的DNS服务器地址。</p> 
<p>权威域名服务器</p> 
<p>权威域名服务器负责某一个区的域名服务器。当一个顶级域名服务器还不能给出最后查询回答时，就会告知下一步应当请求的权威域名服务器地址。</p> 
<p>本地域名服务器</p> 
<p>本地域名服务器并不属于下图中的树状结构的DNS域名服务器，但是它对域名系统非常重要。当一个主机发出DNS查询请求时，这个查询请求报文就发送给本地域名服务器。每一个互联网服务提供者ISP都可以拥有一个本地域名服务器。</p> 
<p><a href="https://baijiahao.baidu.com/s?id=1765946519145796603&amp;wfr=spider&amp;for=pc" rel="nofollow">DNS解析</a>是分布式存储的，其中根域名服务器只存储了260个顶级域名服务器的IP地址。顶级域名服务器如.cn的顶级域名服务器，则存储着下一级权威解析服务器地址，如vip1.sfndns.cn，而这才是提供域名与IP地址指向关系的服务器，是整个DNS解析环节的核心。</p> 
<p><strong>DNS解析的具体流程</strong></p> 
<p>每当发送一个url请求，浏览器就会启动一个DNS查询，使浏览器获得域名对应的IP地址。</p> 
<p>为了节省DNS解析时间，在DNS解析各个环节中都引入了缓存机制，当客户端发起解析请求时，首先会从各级的DNS缓存中查询结果，如果命中直接返回，无需再请求各级域名服务器。</p> 
<p>（1）查看浏览器缓存</p> 
<p>浏览器会将每一条域名解析结果缓存一段时间，当用户发起请求时，浏览器首先会查询自身的缓存中是否有想要的结果，如果有直接返回，解析到此结束；如果没有再请求下一级。</p> 
<p>（2）查看系统缓存</p> 
<p>如果浏览器中没有要找的记录，浏览器就会做一个系统调用（windows里是gethostbyname），从系统缓存中查找信息。</p> 
<p>（3）查看路由器缓存</p> 
<p>当浏览器及系统缓存中均无域名对应 IP 则进入路由器缓存中检查，以上三步均为客户端的 <a href="https://www.sfn.cn/news/technology/detail/570.html?navId=22" rel="nofollow">DNS 缓存</a>。</p> 
<p>（4）查看ISP DNS 缓存</p> 
<p>当在用户客户端查找不到域名对应 IP 地址，则将进入 ISP DNS 缓存中进行查询。比如你用的是电信的网络，则会进入电信的 DNS 缓存服务器中进行查找。</p> 
<p>如果以上步骤中都没有目标域名的缓存记录，本地DNS服务器才开始通过DNS系统发起全球的迭代查询。</p> 
<p>（5）本地DNS服务器首先请求根域名服务器；</p> 
<p>（6）根域名服务器告知下一级顶级域名服务器的地址；</p> 
<p>（7）本地DNS服务器请求顶级域名服务器；</p> 
<p>（8）顶级域名服务器告知域名授权的权威域名服务器地址；</p> 
<p>（9）本地DNS服务器请求权威域名服务器；</p> 
<p>（10）权威服务器将域名对应的IP地址告知本地DNS服务器；</p> 
<p>（11）本地DNS服务器将解析记录返回给客户端浏览器。</p> 
<p>至此，整个<a href="https://baijiahao.baidu.com/s?id=1765946519145796603&amp;wfr=spider&amp;for=pc" rel="nofollow">DNS解析</a>流程结束，客户端浏览器根据解析记录对目标IP发起访问。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/466f50a483c20ae4991185d7fc3d08eb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【设计模式之美】开闭原则方法论、开闭原则如何取舍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7697fa5cfcdce56f0e829bcd783d08df/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">零配置，零麻烦：MapStruct 的轻松对象映射之旅</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>