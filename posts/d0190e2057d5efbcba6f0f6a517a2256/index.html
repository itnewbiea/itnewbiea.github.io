<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Exploring Spring Boot Testing 1 - Unit Test using Junit - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Exploring Spring Boot Testing 1 - Unit Test using Junit" />
<meta property="og:description" content="Exploring Spring Boot Testing
Unit Test using JunitSpringBoot Mocks with MockitoSpringBoot Testing Spring MVC Web AppSpringBoot Testing Spring REST APIs Exploring Spring Boot Testing 1:Unit Test using Junit Unit Testing vs Integration TestingWhat is Unit Testing?Benifit of Unit TestingUnit Testing FrameworksWhat is Integration Testing? JunitHow to write Unit Testing?(Demo)Junit Lifecycle MethodsJunit Custom Display NamesJunit AssertionsOrdering Junit Tests Code Coverage and Test ReportCode Coverage and Test Report with IntelliJCode Coverage and Test Report with Maven Conditional TestAnnotations: @Disabled, @EnabledOnOsAnnotations: @EnabledOnJre,@EnabledForJreRangeAnnotations: @EnabledIfSystemProperty, @EnabledIfEnvironmentVariable Unit Testing vs Integration Testing What is Unit Testing?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/d0190e2057d5efbcba6f0f6a517a2256/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-27T10:15:37+08:00" />
<meta property="article:modified_time" content="2023-05-27T10:15:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Exploring Spring Boot Testing 1 - Unit Test using Junit</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>Exploring Spring Boot Testing</p> 
<ul><li><a href="https://blog.csdn.net/gf_lvah/article/details/130896025">Unit Test using Junit</a></li><li>SpringBoot Mocks with Mockito</li><li>SpringBoot Testing Spring MVC Web App</li><li>SpringBoot Testing Spring REST APIs</li></ul> 
<p></p> 
<div class="toc"> 
 <h4>Exploring Spring Boot Testing 1:Unit Test using Junit</h4> 
 <ul><li><a href="#Unit_Testing_vs_Integration_Testing_9" rel="nofollow">Unit Testing vs Integration Testing</a></li><li><ul><li><a href="#What_is_Unit_Testing_10" rel="nofollow">What is Unit Testing?</a></li><li><a href="#Benifit_of_Unit_Testing_28" rel="nofollow">Benifit of Unit Testing</a></li><li><a href="#Unit_Testing_Frameworks_35" rel="nofollow">Unit Testing Frameworks</a></li><li><a href="#What_is_Integration_Testing_38" rel="nofollow">What is Integration Testing?</a></li></ul> 
  </li><li><a href="#Junit_46" rel="nofollow">Junit</a></li><li><ul><li><a href="#How_to_write_Unit_TestingDemo_47" rel="nofollow">How to write Unit Testing?(Demo)</a></li><li><a href="#Junit_Lifecycle_Methods_112" rel="nofollow">Junit Lifecycle Methods</a></li><li><a href="#Junit_Custom_Display_Names_123" rel="nofollow">Junit Custom Display Names</a></li><li><a href="#Junit_Assertions_149" rel="nofollow">Junit Assertions</a></li><li><a href="#Ordering_Junit_Tests_214" rel="nofollow">Ordering Junit Tests</a></li></ul> 
  </li><li><a href="#Code_Coverage_and_Test_Report_264" rel="nofollow">Code Coverage and Test Report</a></li><li><ul><li><a href="#Code_Coverage_and_Test_Report_with_IntelliJ_267" rel="nofollow">Code Coverage and Test Report with IntelliJ</a></li><li><a href="#Code_Coverage_and_Test_Report_with_Maven_279" rel="nofollow">Code Coverage and Test Report with Maven</a></li></ul> 
  </li><li><a href="#Conditional_Test_406" rel="nofollow">Conditional Test</a></li><li><ul><li><a href="#Annotations_Disabled_EnabledOnOs_413" rel="nofollow">Annotations: @Disabled, @EnabledOnOs</a></li><li><a href="#Annotations_EnabledOnJreEnabledForJreRange_445" rel="nofollow">Annotations: @EnabledOnJre,@EnabledForJreRange</a></li><li><a href="#Annotations_EnabledIfSystemProperty_EnabledIfEnvironmentVariable_473" rel="nofollow">Annotations: @EnabledIfSystemProperty, @EnabledIfEnvironmentVariable</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Unit_Testing_vs_Integration_Testing_9"></a>Unit Testing vs Integration Testing</h2> 
<h3><a id="What_is_Unit_Testing_10"></a>What is Unit Testing?</h3> 
<ul><li>Testing an individual unit of code for correctness.</li><li>Provide a fixed inputs</li><li>Expect known output</li></ul> 
<p><strong>Example 1 TestCases:</strong> Calculator add(int x, int y): int</p> 
<ul><li>input: add(5, 2), output: 7</li><li>input: add(-3, -8), output: -11</li><li>input: add(-3, 1), output: -2</li><li>input: add(0, 0), output: 0</li></ul> 
<p><strong>Example 2 TestCases:</strong> StringUtils captilize(String data): String</p> 
<ul><li>input: captilize(“Java666Learn”), output: “JAVA666LEARN”</li><li>input: captilize(“JAVA666LEARN”), output: “JAVA666LEARN”</li><li>input: captilize(“Java666Learn”), output: “JAVA666LEARN”</li><li>input: captilize(null), output: ???</li></ul> 
<h3><a id="Benifit_of_Unit_Testing_28"></a>Benifit of Unit Testing</h3> 
<ul><li>Automated tests</li><li>Better code design</li><li>Fewer bugs and higher reliability</li><li>Increased confidence for code refactoring, did I break anything?</li><li>Basic requirements for DevOps and build pipeline, CICD(continuous integration and continous deployment)</li></ul> 
<h3><a id="Unit_Testing_Frameworks_35"></a>Unit Testing Frameworks</h3> 
<ul><li><strong>Junit:</strong> Supports creating test cases, Automation of the test cases with pass/fail, Utilities for test setup, teardown and assertions.</li><li><strong>Mockito:</strong> Create mocks and stubs, Minimize dependencies on external components</li></ul> 
<h3><a id="What_is_Integration_Testing_38"></a>What is Integration Testing?</h3> 
<ul><li>Test multiple components together as part of a test plan</li><li>Determine if software units work together as expected</li><li>Identify any negative side effects due to integration</li><li>Can test using mocks/stubs</li><li>Can also test using live integration(database, filesystem)</li></ul> 
<h2><a id="Junit_46"></a>Junit</h2> 
<h3><a id="How_to_write_Unit_TestingDemo_47"></a>How to write Unit Testing?(Demo)</h3> 
<p><strong>1. Add Maven dependencies for Junit</strong></p> 
<pre><code class="prism language-java"><span class="token comment">// pom.xml</span>
<span class="token generics"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
	<span class="token comment">// ......</span>
   <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>junit<span class="token operator">-</span>jupiter<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">5.8</span><span class="token number">.2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
       <span class="token generics"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">&gt;</span></span>test<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>2. Create Applicaion Code</strong></p> 
<pre><code class="prism language-java"><span class="token comment">// src/main/java/com/example/junitlearndemo/DemoUtils.java</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoUtils</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">checkNull</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token keyword">return</span> object<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>3. Create Unit Testing Code</strong><br> Unit tests have the following structure:</p> 
<ul><li>SetUp: create instance of the class to test</li><li>Execute: call the method you want to test</li><li>Assert: check the result and verify that it is the expected result, <a href="https://junit.org/junit5/docs/5.0.1/api/org/junit/jupiter/api/Assertions.html" rel="nofollow">click and get more assertions</a></li></ul> 
<pre><code class="prism language-java"><span class="token comment">// src/test/java/com/example/junitlearndemo/DemoUtilsTest.java</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoUtilsTest</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testDemoUtilsAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// set up</span>
        <span class="token class-name">DemoUtils</span> utils <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DemoUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> expected <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> unexpected <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>

        <span class="token comment">// execute</span>
        <span class="token keyword">int</span> actual <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// assert</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>expected<span class="token punctuation">,</span> actual<span class="token punctuation">,</span> <span class="token string">"2+4 must equal 6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotEquals</span><span class="token punctuation">(</span>unexpected<span class="token punctuation">,</span> actual<span class="token punctuation">,</span> <span class="token string">"2+4 must eaual 8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testCheckNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// set up</span>
        <span class="token class-name">DemoUtils</span> utils <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DemoUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token string">"Object should not be null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNull</span><span class="token punctuation">(</span>s2<span class="token punctuation">,</span> <span class="token string">"Object should be null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Junit_Lifecycle_Methods_112"></a>Junit Lifecycle Methods</h3> 
<p>When developing tests, we may need to perform common operations.</p> 
<ul><li><strong>Before each test</strong>: create objects, setup test data</li><li><strong>After each test:</strong> release resource, clean up test data</li></ul> 
<p><img src="https://images2.imgbox.com/73/b0/BVfCV2CR_o.png" alt="在这里插入图片描述"><br> When developing test, we may need to perform one-time operations.</p> 
<ul><li><strong>One-time setup before all tests:</strong> get database connections, connect to remote servers</li><li><strong>One-time clean up after all tests:</strong> release database connections, disconnect from remote servers<br> <img src="https://images2.imgbox.com/7f/1d/NRUPizdy_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="Junit_Custom_Display_Names_123"></a>Junit Custom Display Names</h3> 
<p>We’d like to give custom diaplay names, because of 3 reasons:</p> 
<ul><li>Provide a more descriptive name for the test</li><li>Includes spaces, special characters</li><li>Useful for sharing test reports with project management and non-techies<br> <img src="https://images2.imgbox.com/cd/b6/HgtoR0R4_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-java"><span class="token keyword">class</span> xxxTest<span class="token punctuation">{<!-- --></span>
	<span class="token annotation punctuation">@Test</span>
	<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"test add function"</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">testDemoUtilsAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">// ....</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>But I wish Junit could generate a display name for me, How could we do? <strong>Display Name Generators</strong><br> <img src="https://images2.imgbox.com/67/4d/UCuuGY1Y_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token comment">// demo code</span>
<span class="token annotation punctuation">@DisplayNameGeneration</span><span class="token punctuation">(</span><span class="token class-name">DisplayNameGenerator<span class="token punctuation">.</span>Simple</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> xxxTest<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Junit_Assertions_149"></a>Junit Assertions</h3> 
<ul><li> <p><strong>Test Same and NotSame</strong><br> <img src="https://images2.imgbox.com/d5/b8/W3y8t7mG_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>Test for True or False</strong><br> <img src="https://images2.imgbox.com/50/03/ZYAfwDc7_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>Test for Arrays, Iterables and Lines</strong></p> </li></ul> 
<p><img src="https://images2.imgbox.com/93/06/wI7iTpoQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fa/10/WqDMiPCW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2b/d1/SOIQeasP_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>Test for Throws and Timeout</strong></li></ul> 
<p><img src="https://images2.imgbox.com/ff/89/R8WLj0vn_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/6c/4e/gGoDyYKP_o.png" alt="在这里插入图片描述"><br> Application code:</p> 
<pre><code class="prism language-java"><span class="token comment">// com/example/junitlearndemo/DemoUtils.java</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoUtils</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// ...</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">throwException</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"Value should be greater or equal to 0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">"Value is greater or equal to 0"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"it's going to sleep!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sleep over!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>Unit Testing code:</p> 
<pre><code class="prism language-java"><span class="token comment">// com/example/junitlearndemo/DemoUtilsTest.java</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoUtilsTest</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// ......</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Throw and not throws"</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">testThrowException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">DemoUtils</span> utils <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DemoUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertThrows</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>utils<span class="token punctuation">.</span><span class="token function">throwException</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"should throw exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>utils<span class="token punctuation">.</span><span class="token function">throwException</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"should not throw exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"test timeout"</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">testCheckTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">DemoUtils</span> utils <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DemoUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTimeout</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> utils<span class="token operator">::</span><span class="token function">checkTimeout</span><span class="token punctuation">,</span> <span class="token string">"Method should execute in 3 seconds"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="Ordering_Junit_Tests_214"></a>Ordering Junit Tests</h3> 
<p>In general, order should not be a factor in unit tests, there should no dependency between tests, all tests should pass regardless of the order in which they are run.However, there are some use cases when we want to control the order.</p> 
<ul><li>We want tests to appear in alphabetical order for reporting purposes.</li><li>Sharing reports with project management and QA team etc.</li><li>Group tests based on functionality or requirements.</li></ul> 
<p><strong>How to configure the order/sort algorithm for the test methods?</strong><br> Annotation <code>@TestMethodOrder</code></p> 
<p><strong>How many kinds of order algorithms?</strong></p> 
<ul><li><code>MethodOrderer.DisplayName</code>: sorts test methods alphaumerically based on display name.</li><li><code>MethodOrderer.MethodName</code>: sorts test methods alphaumerically based on method name.</li><li><code>MethodOrderer.Random</code>: pseudo-random order based on method name.</li><li><code>MethodOrderer.OrderAnnotation</code>: sort test methods numerically based on <code>@Order</code> annotation.</li></ul> 
<p><strong>Example for MethodOrderer.OrderAnnotation</strong><br> the display order is: <code>testCheckNull(-2) &gt; testDemoUtilsAdd(-1) &gt; testThrowException(1) &gt; testCheckTimeout(5)</code></p> 
<pre><code class="prism language-java"><span class="token comment">// com/example/junitlearndemo/DemoUtilsTest.java</span>
<span class="token annotation punctuation">@TestMethodOrder</span><span class="token punctuation">(</span><span class="token class-name">MethodOrderer<span class="token punctuation">.</span>OrderAnnotation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoUtilsTest</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">testDemoUtilsAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// ...</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">testCheckNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Throw and not throws"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">testThrowException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token comment">// ...</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"test timeout"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">testCheckTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="Code_Coverage_and_Test_Report_264"></a>Code Coverage and Test Report</h2> 
<p>Code Coverage measures how many methods/lines are called by tests. On most teams, 70%~80% is acceptable.</p> 
<h3><a id="Code_Coverage_and_Test_Report_with_IntelliJ_267"></a>Code Coverage and Test Report with IntelliJ</h3> 
<p><strong>Run Unit Test with Code Coverage</strong><br> <img src="https://images2.imgbox.com/e3/ff/x1pxTQl7_o.png" alt="在这里插入图片描述"></p> 
<p><strong>Generate Coverage Report</strong><br> <img src="https://images2.imgbox.com/8f/74/PSnRTtG0_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/27/69/kQdohBws_o.png" alt="在这里插入图片描述"></p> 
<p><strong>Generate Test Report with IntelliJ</strong><br> <img src="https://images2.imgbox.com/7c/e9/GJr82kpK_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6c/96/XaNf79tl_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Code_Coverage_and_Test_Report_with_Maven_279"></a>Code Coverage and Test Report with Maven</h3> 
<p>Useful when running as part of DevOps build process.</p> 
<p><strong>Install Maven in MacOS</strong><br> <a href="https://maven.apache.org/download.cgi" rel="nofollow">Download Maven</a> or using <code>brew install mvn</code>.</p> 
<pre><code class="prism language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> fan@fandeMacBook-Pro junit-learn-demo % mvn --version
Apache Maven <span class="token number">3.8</span>.4
</code></pre> 
<p><strong>Run unit tests</strong></p> 
<pre><code class="prism language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> fan@fandeMacBook-Pro junit-learn-demo % mvn clean <span class="token builtin class-name">test</span>
<span class="token comment"># ...</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Tests run: <span class="token number">4</span>, Failures: <span class="token number">0</span>, Errors: <span class="token number">0</span>, Skipped: <span class="token number">0</span>, Time elapsed: <span class="token number">2.019</span> s - <span class="token keyword">in</span> com.example.junitlearndemo.DemoUtilsTest
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Results:
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Tests run: <span class="token number">5</span>, Failures: <span class="token number">0</span>, Errors: <span class="token number">0</span>, Skipped: <span class="token number">0</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> BUILD SUCCESS
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Total time:  <span class="token number">5.104</span> s
</code></pre> 
<p><strong>Generate unit test reports</strong><br> configure the <code>pom.xml</code></p> 
<pre><code class="prism language-xml">// ....
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-surefire-report-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>report<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
// ...
</code></pre> 
<p>rerun the mvn code</p> 
<pre><code class="prism language-bash"><span class="token comment"># run tests and execute Surfire report plugin to generate html report.</span>
mvn clean <span class="token builtin class-name">test</span>
<span class="token comment"># site: add website resources(images, css, etc).</span>
<span class="token comment"># -DgenerateReports=false don't overwrite existing html reports.</span>
mvn site -DgenerateReports<span class="token operator">=</span>false 
</code></pre> 
<p>view the html report in <code>target/site/surefire-report.html</code>.<br> <img src="https://images2.imgbox.com/c6/f7/0wZgmwxj_o.png" alt="在这里插入图片描述"></p> 
<p><strong>Handling test failure</strong><br> By default, Maven Surefire plugin will not generate reports if tests fail. So we need to add configuration in <code>pom.xml</code>.</p> 
<pre><code class="prism language-xml">// ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-surefire-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testFailureIgnore</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testFailureIgnore</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
// ...
</code></pre> 
<p>Rerun the code and view the report, we can build success and show failure tests in report.</p> 
<pre><code class="prism language-bash">mvn clean <span class="token builtin class-name">test</span>
mvn site -DgenerateReports<span class="token operator">=</span>false 
</code></pre> 
<p><img src="https://images2.imgbox.com/a5/63/i4SyLsBp_o.png" alt="在这里插入图片描述"></p> 
<p><strong>Show @DisplayName in reports</strong><br> By default, Maven Surefire plugin will not show @DisplayName in reports. So we need to add configuration in <code>pom.xml</code>.</p> 
<pre><code class="prism language-xml">// ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-surefire-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>testFailureIgnore</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>testFailureIgnore</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>statelessTestsetReporter</span> <span class="token attr-name">implementation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.maven.plugin.surefire.extensions.junit5.JUnit5Xml30StatelessReporter<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>usePhrasedTestCaseMethodName</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>usePhrasedTestCaseMethodName</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>statelessTestsetReporter</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
// ...
</code></pre> 
<p><strong>Generate code coverage reports</strong></p> 
<p>JaCoCo(Java Code Coverage) is a free code coverage library for Java. So we need to add configuration in <code>pom.xml</code>, run the code <code>mvn clean test</code>, view the html in <code>target/site/jacoco/index.html</code>.</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.jacoco<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jacoco-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.8.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>jacoco-prepare<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>prepare-agent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>jacoco-report<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>report<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/73/13/jxKT3sZA_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Conditional_Test_406"></a>Conditional Test</h2> 
<p>We may not need to run all of the tests, there are some use cases:</p> 
<ul><li>Don’t run a test because the method to test is broken, and we are waiting on dev team to fix it.</li><li>A test should only run for a specific version of Java(18) or range of version(13-18).</li><li>A test should only run on a given OS: MacOS, Linux, etc.</li><li>A test should only run if specific environment variables or system properties are set.<br> Annotations can be applied at the class level or method level.</li></ul> 
<h3><a id="Annotations_Disabled_EnabledOnOs_413"></a>Annotations: @Disabled, @EnabledOnOs</h3> 
<ul><li><code>@Disabled</code>: disable a test method.</li><li><code>@EnabledOnOs</code>: enable test when running on a given OS.</li></ul> 
<pre><code class="prism language-java"><span class="token comment">// com/example/junitlearndemo/ConditionalTest.java</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConditionalTest</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@Disabled</span><span class="token punctuation">(</span><span class="token string">"don't run until jira #111 is resolved"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">basicTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"basic test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@EnabledOnOs</span><span class="token punctuation">(</span>OS<span class="token punctuation">.</span>WINDOWS<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testForWindowsOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"testForWindowsOnly"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@EnabledOnOs</span><span class="token punctuation">(</span>OS<span class="token punctuation">.</span>MAC<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testForMACOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"testForMACOnly"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@EnabledOnOs</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>OS<span class="token punctuation">.</span>MAC<span class="token punctuation">,</span> OS<span class="token punctuation">.</span>WINDOWS<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testForWindowsMAC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"testForWindowsMAC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="Annotations_EnabledOnJreEnabledForJreRange_445"></a>Annotations: @EnabledOnJre,@EnabledForJreRange</h3> 
<ul><li><code>@EnabledOnJre</code>: enable test for a given java version.</li><li><code>@EnabledForJreRange</code>: enable test for a given java version range.</li></ul> 
<pre><code class="prism language-java"><span class="token comment">// com/example/junitlearndemo/ConditionalTest.java</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConditionalTest</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// ...</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@EnabledOnJre</span><span class="token punctuation">(</span>JRE<span class="token punctuation">.</span>JAVA_17<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testForJava17Only</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"testForJava17Only"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@EnabledForJreRange</span><span class="token punctuation">(</span>min <span class="token operator">=</span> JRE<span class="token punctuation">.</span>JAVA_8<span class="token punctuation">,</span> max <span class="token operator">=</span> JRE<span class="token punctuation">.</span>JAVA_18<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testForJava8To18</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"testForJava8To18"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@EnabledForJreRange</span><span class="token punctuation">(</span>min <span class="token operator">=</span> JRE<span class="token punctuation">.</span>JAVA_18<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testForMinJava18</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"testForMinJava18"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Annotations_EnabledIfSystemProperty_EnabledIfEnvironmentVariable_473"></a>Annotations: @EnabledIfSystemProperty, @EnabledIfEnvironmentVariable</h3> 
<ul><li><code>@EnabledIfSystemProperty</code>: enable test based on System Property.</li><li><code>@EnabledIfEnvironmentVariable</code>: enable test based on Environment Variable.</li></ul> 
<p>How to set System Property and Environment Variable in IntelliJ?<br> <img src="https://images2.imgbox.com/06/6c/qY1XEEHt_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConditionalTest</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// ...</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@EnabledIfSystemProperty</span><span class="token punctuation">(</span>named <span class="token operator">=</span> <span class="token string">"SYS_PROP"</span><span class="token punctuation">,</span> matches <span class="token operator">=</span> <span class="token string">"CI_CD_DEPLOY"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testOnlyForSystemProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"testOnlyForSystemProperty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@EnabledIfEnvironmentVariable</span><span class="token punctuation">(</span>named <span class="token operator">=</span> <span class="token string">"ENV"</span><span class="token punctuation">,</span> matches <span class="token operator">=</span> <span class="token string">"DEV"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testOnlyForEnvironmentVariable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"testOnlyForEnvironmentVariable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1b7969d6936776a06771d8ad64b856aa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32G0x0系列-点亮一盏灯（寄存器）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/db81eee6231c1aeea2269463c9688b94/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">回归决策树的介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>