<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos7 安装 mysql 8.0 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="centos7 安装 mysql 8.0" />
<meta property="og:description" content="文章目录 环境介绍一、安装前准备 1.卸载MariaDB 1.1 查看是否安装mariadb1.2 卸载1.3 检查是否卸载干净 2.检查依赖 2.1 查看是否安装libaio2.2 查看是否安装numactl 二、安装MySQL 1.下载资源包 1.1 官网下载1.2 wget下载 2.解压3.重命名4.创建存储数据文件5.设置用户组并赋权6.初始化MySQL7.配置参数文件8.启动MySQL9.设置软连接，并重启MySQL10.登录并更改密码11.开放远程连接12.连接工具测试连接MySQL13.MySQL启动和停止 三、设置开机自启动（可选） 环境介绍 操作系统：Centos7.6
MySQL版本： 8.0.30
本文使用的是当前最新8.0.30版本，如果需要安装的版本比8.0.30高或者低，只要是8.0.*版本，那就可以按照本文说明安装，基本不会有任何问题。
一、安装前准备 1.卸载MariaDB 安装MySQL的话会和MariaDB的文件冲突，所以需要先卸载掉MariaDB。
1.1 查看是否安装mariadb rpm -qa|grep mariadb 1.2 卸载 rpm -e --nodeps 文件名 1.3 检查是否卸载干净 rpm -qa|grep mariadb 2.检查依赖 2.1 查看是否安装libaio rpm -qa|grep libaio 如果没有安装则执行
yum -y install libaio //安装libaio 2.2 查看是否安装numactl rpm -qa|grep numactl 如果没有安装则执行
yum -y install numactl //安装numactl 二、安装MySQL 1.下载资源包 可以在官网下载安装包或者在服务器直接使用wget下载。
1.1 官网下载 MySQL官网下载地址:https://dev." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c11dd6dbd29da7bd414c022b10858fc2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-17T10:27:00+08:00" />
<meta property="article:modified_time" content="2023-10-17T10:27:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos7 安装 mysql 8.0</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5>文章目录</h5> 
<ul><li><a href="#_1" rel="nofollow">环境介绍</a></li><li><a href="#_6" rel="nofollow">一、安装前准备</a></li><li> 
  <ul><li><a href="#1MariaDB_7" rel="nofollow">1.卸载MariaDB</a></li><li> 
    <ul><li><a href="#11_mariadb_9" rel="nofollow">1.1 查看是否安装mariadb</a></li><li><a href="#12__13" rel="nofollow">1.2 卸载</a></li><li><a href="#13__17" rel="nofollow">1.3 检查是否卸载干净</a></li></ul> </li><li><a href="#2_21" rel="nofollow">2.检查依赖</a></li><li> 
    <ul><li><a href="#21_libaio_22" rel="nofollow">2.1 查看是否安装libaio</a></li><li><a href="#22_numactl_33" rel="nofollow">2.2 查看是否安装numactl</a></li></ul> </li></ul> </li><li><a href="#MySQL_46" rel="nofollow">二、安装MySQL</a></li><li> 
  <ul><li><a href="#1_47" rel="nofollow">1.下载资源包</a></li><li> 
    <ul><li><a href="#11__49" rel="nofollow">1.1 官网下载</a></li><li><a href="#12_wget_52" rel="nofollow">1.2 wget下载</a></li></ul> </li><li><a href="#2_56" rel="nofollow">2.解压</a></li><li><a href="#3_74" rel="nofollow">3.重命名</a></li><li><a href="#4_79" rel="nofollow">4.创建存储数据文件</a></li><li><a href="#5_84" rel="nofollow">5.设置用户组并赋权</a></li><li><a href="#6MySQL_103" rel="nofollow">6.初始化MySQL</a></li><li><a href="#7_115" rel="nofollow">7.配置参数文件</a></li><li><a href="#8MySQL_172" rel="nofollow">8.启动MySQL</a></li><li><a href="#9MySQL_176" rel="nofollow">9.设置软连接，并重启MySQL</a></li><li><a href="#10_183" rel="nofollow">10.登录并更改密码</a></li><li><a href="#11_193" rel="nofollow">11.开放远程连接</a></li><li><a href="#12MySQL_199" rel="nofollow">12.连接工具测试连接MySQL</a></li><li><a href="#13MySQL_208" rel="nofollow">13.MySQL启动和停止</a></li></ul> </li><li><a href="#_235" rel="nofollow">三、设置开机自启动（可选）</a></li></ul> 
<p></p> 
<h3><a id="_1"></a>环境介绍</h3> 
<p><strong>操作系统</strong>：Centos7.6<br> <strong>MySQL版本</strong>： 8.0.30</p> 
<p>本文使用的是当前最新8.0.30版本，如果需要安装的版本比8.0.30高或者低，只要是8.0.*版本，那就可以按照本文说明安装，基本不会有任何问题。</p> 
<h3><a id="_6"></a>一、安装前准备</h3> 
<h4><a id="1MariaDB_7"></a>1.卸载MariaDB</h4> 
<blockquote> 
 <p><strong>安装MySQL的话会和MariaDB的文件冲突，所以需要先卸载掉MariaDB。</strong></p> 
</blockquote> 
<h5><a id="11_mariadb_9"></a>1.1 查看是否安装mariadb</h5> 
<pre><code class="prism language-powershell">rpm <span class="token operator">-</span>qa<span class="token punctuation">|</span>grep mariadb
</code></pre> 
<h5><a id="12__13"></a>1.2 卸载</h5> 
<pre><code class="prism language-powershell">rpm <span class="token operator">-</span>e <span class="token operator">--</span>nodeps 文件名
</code></pre> 
<h5><a id="13__17"></a>1.3 检查是否卸载干净</h5> 
<pre><code class="prism language-powershell">rpm <span class="token operator">-</span>qa<span class="token punctuation">|</span>grep mariadb
</code></pre> 
<h4><a id="2_21"></a>2.检查依赖</h4> 
<h5><a id="21_libaio_22"></a>2.1 查看是否安装libaio</h5> 
<pre><code class="prism language-powershell">rpm <span class="token operator">-</span>qa<span class="token punctuation">|</span>grep libaio
</code></pre> 
<p>如果没有安装则执行</p> 
<pre><code class="prism language-powershell">yum <span class="token operator">-</span>y install libaio <span class="token operator">/</span><span class="token operator">/</span>安装libaio 
</code></pre> 
<h5><a id="22_numactl_33"></a>2.2 查看是否安装numactl</h5> 
<pre><code class="prism language-powershell">rpm <span class="token operator">-</span>qa<span class="token punctuation">|</span>grep numactl
</code></pre> 
<p>如果没有安装则执行</p> 
<pre><code class="prism language-powershell">yum <span class="token operator">-</span>y install numactl <span class="token operator">/</span><span class="token operator">/</span>安装numactl 
</code></pre> 
<h3><a id="MySQL_46"></a>二、安装MySQL</h3> 
<h4><a id="1_47"></a>1.下载资源包</h4> 
<p>可以在官网下载安装包或者在服务器直接使用wget下载。</p> 
<h5><a id="11__49"></a>1.1 官网下载</h5> 
<p>MySQL官网下载地址:<a href="https://dev.mysql.com/downloads/mysql/" rel="nofollow">https://dev.mysql.com/downloads/mysql/</a><br> <img src="https://images2.imgbox.com/f7/9c/hNCFGaX9_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="12_wget_52"></a>1.2 wget下载</h5> 
<pre><code class="prism language-powershell">wget https:<span class="token operator">/</span><span class="token operator">/</span>cdn<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>com/<span class="token operator">/</span>Downloads/MySQL-8<span class="token punctuation">.</span>0/mysql-8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>30-el7-x86_64<span class="token punctuation">.</span>tar
</code></pre> 
<h4><a id="2_56"></a>2.解压</h4> 
<p>注：本文安装包上传到了 /usr/local/ 目录下</p> 
<p>进入安装包目录</p> 
<pre><code class="prism language-powershell">cd <span class="token operator">/</span>usr/local/
</code></pre> 
<p>拆分tar包</p> 
<pre><code class="prism language-powershell">tar <span class="token operator">-</span>xvf mysql-8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>30-el7-x86_64<span class="token punctuation">.</span>tar
</code></pre> 
<p>解压安装包</p> 
<pre><code class="prism language-powershell">tar <span class="token operator">-</span>zxvf mysql-8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>30-el7-x86_64<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre> 
<h4><a id="3_74"></a>3.重命名</h4> 
<p>将解压后的文件夹重命名为mysql</p> 
<pre><code class="prism language-powershell"><span class="token function">mv</span> mysql-8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>30-el7-x86_64/ mysql
</code></pre> 
<h4><a id="4_79"></a>4.创建存储数据文件</h4> 
<p>在重命名后的mysql文件夹中创建data文件夹</p> 
<pre><code class="prism language-powershell">mkdir mysql/<span class="token keyword">data</span>
</code></pre> 
<h4><a id="5_84"></a>5.设置用户组并赋权</h4> 
<p><strong>创建用户组</strong></p> 
<pre><code class="prism language-powershell">groupadd mysql
</code></pre> 
<p><strong>创建用户</strong><br> -r：创建系统用户<br> -g：指定用户组</p> 
<pre><code class="prism language-powershell">useradd <span class="token operator">-</span>r <span class="token operator">-</span>g mysql mysql
</code></pre> 
<p><strong>更改属主和数组</strong></p> 
<pre><code class="prism language-powershell">chown <span class="token operator">-</span>R mysql:mysql <span class="token operator">/</span>usr/local/mysql/
</code></pre> 
<p><strong>更改权限</strong></p> 
<pre><code class="prism language-powershell">chmod <span class="token operator">-</span>R 755 <span class="token operator">/</span>usr/local/mysql/
</code></pre> 
<h4><a id="6MySQL_103"></a>6.初始化MySQL</h4> 
<p>进入MySQL的bin目录</p> 
<pre><code class="prism language-powershell">cd <span class="token operator">/</span>usr/local/mysql/bin/
</code></pre> 
<p>初始化</p> 
<pre><code class="prism language-powershell"><span class="token punctuation">.</span><span class="token operator">/</span>mysqld <span class="token operator">--</span>initialize <span class="token operator">--</span>user=mysql <span class="token operator">--</span>datadir=<span class="token operator">/</span>usr/local/mysql/<span class="token keyword">data</span> <span class="token operator">--</span>basedir=<span class="token operator">/</span>usr/local/mysql <span class="token operator">--</span>lower-case-table-names=1
</code></pre> 
<p>初始化完成后会打印一个随机密码，后面会用到。<br> <img src="https://images2.imgbox.com/41/f9/vBdWbImM_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="7_115"></a>7.配置参数文件</h4> 
<pre><code class="prism language-powershell">vi <span class="token operator">/</span>etc/my<span class="token punctuation">.</span>cnf
</code></pre> 
<p>配置文件修改为以下内容,也可以根据自己需要设置参数。</p> 
<pre><span class="token namespace">[client]</span>
port = 3306
socket = <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock
default<span class="token operator">-</span>character<span class="token operator">-</span><span class="token function">set</span> = utf8mb4
</pre> 
<p><span class="token namespace">[mysql]</span><br> default<span class="token operator">-</span>character<span class="token operator">-</span><span class="token function">set</span> = utf8mb4</p> 
<p><span class="token namespace">[mysqld]</span><br> character<span class="token operator">-</span><span class="token function">set-client</span><span class="token operator">-</span>handshake = FALSE<br> character<span class="token operator">-</span><span class="token function">set-server</span> = utf8mb4<br> collation<span class="token operator">-</span>server = utf8mb4_general_ci<br> init_connect = <span class="token string">‘SET NAMES utf8mb4’</span></p> 
<p>port = 3306<br> socket = <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock<br> <span class="token function">skip-external</span><span class="token operator">-</span>locking<br> key_buffer_size = 16M<br> max_allowed_packet = 1M<br> table_open_cache = 64<br> sort_buffer_size = 512K<br> net_buffer_length = 8K<br> read_buffer_size = 256K<br> read_rnd_buffer_size = 512K<br> myisam_sort_buffer_size = 8M<br> datadir = <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span><span class="token keyword">data</span><br> <span class="token comment">#lower_case_table_names=1</span><br> <span class="token comment">#如果要设置lower_case_table_names可以在初始化里面设置 ./mysqld --initialize --user=mysql --datadir=/usr/local/mysql/data --basedir=/usr/local/mysql --lower_case_table_names=1</span><br> max_connect_errors=10000<br> max_connections = 10000</p> 
<p><span class="token namespace">[mysqldump]</span><br> quick<br> max_allowed_packet = 16M</p> 
<p><span class="token namespace">[mysql]</span><br> no<span class="token operator">-</span>auto<span class="token operator">-</span>rehash</p> 
<p><span class="token namespace">[myisamchk]</span><br> key_buffer_size = 20M<br> sort_buffer_size = 20M<br> read_buffer = 2M<br> write_buffer = 2M</p> 
<p><span class="token namespace">[mysqlhotcopy]</span><br> interactive<span class="token operator">-</span>timeout<br> </p> 
<p>配置后修改 /etc/my.cnf 的权限为777</p> 
<pre><code class="prism language-powershell">chmod 777 <span class="token operator">/</span>etc/my<span class="token punctuation">.</span>cnf
</code></pre> 
<h4><a id="8MySQL_172"></a>8.启动MySQL</h4> 
<pre><code class="prism language-powershell"><span class="token operator">/</span>usr/local/mysql/support-files/mysql<span class="token punctuation">.</span>server <span class="token function">start</span>
</code></pre> 
<h4><a id="9MySQL_176"></a>9.设置软连接，并重启MySQL</h4> 
<pre><code class="prism language-powershell">ln <span class="token operator">-</span>s <span class="token operator">/</span>usr/local/mysql/support-files/mysql<span class="token punctuation">.</span>server <span class="token operator">/</span>etc/init<span class="token punctuation">.</span>d/mysql
ln <span class="token operator">-</span>s <span class="token operator">/</span>usr/local/mysql/bin/mysql <span class="token operator">/</span>usr/bin/mysql
ln <span class="token operator">-</span>s <span class="token operator">/</span>usr/local/mysql/mysql<span class="token punctuation">.</span>sock <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock
service mysql restart
</code></pre> 
<h4><a id="10_183"></a>10.登录并更改密码</h4> 
<pre><code class="prism language-powershell"><span class="token namespace">[root@localhost bin]</span><span class="token comment"># mysql -uroot -p</span>
Enter password: 输入初始化随机密码
</code></pre> 
<p>修改密码</p> alter user 'root'@'localhost' identified by '你的密码' password expire never; alter user 'root'@'localhost' identified with mysql_native_password by '你的密码' flush privileges; 
<h4><a id="11_193"></a>11.开放远程连接</h4> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span><span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
msyql<span class="token operator">&gt;</span><span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> <span class="token keyword">user</span><span class="token punctuation">.</span>Host<span class="token operator">=</span><span class="token string">'%'</span> <span class="token keyword">where</span> <span class="token keyword">user</span><span class="token punctuation">.</span><span class="token keyword">User</span><span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span>flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>    <span class="token comment">//刷新权限</span>
</code></pre> 
<h4><a id="12MySQL_199"></a>12.连接工具测试连接MySQL</h4> 
<p><img src="https://images2.imgbox.com/2b/d5/kXifNwI4_o.png" alt="在这里插入图片描述"><br> 如果服务器本地可以连接，但是连接工具远程连接不进去，则需要检查一下防火墙是否放行3306端口，也可以暂时先关闭防火墙后重试。</p> 
<p><strong>关闭防火墙</strong></p> 
<pre><code class="prism language-powershell">systemctl stop firewalld
</code></pre> 
<h4><a id="13MySQL_208"></a>13.MySQL启动和停止</h4> 
<p>CentOS6和CentOS7命令都可以使用。</p> 
<p>启动</p> 
<pre><code class="prism language-powershell">service mysql <span class="token function">start</span>
systemctl <span class="token function">start</span> mysql
</code></pre> 
<p>停止</p> 
<pre><code class="prism language-powershell">service mysql stop
systemctl stop mysql
</code></pre> 
<p>重启</p> 
<pre><code class="prism language-powershell">service mysql restart
systemctl restart mysql
</code></pre> 
<p>查看状态</p> 
<pre><code class="prism language-powershell">service mysql status
systemctl status mysql
</code></pre> 
<h3><a id="_235"></a>三、设置开机自启动（可选）</h3> 
<p>将服务文件拷贝到 /etc/init.d下，并重命名为mysqld</p> 
<pre><code class="prism language-powershell"><span class="token function">cp</span> <span class="token operator">/</span>usr/local/mysql/support-files/mysql<span class="token punctuation">.</span>server <span class="token operator">/</span>etc/init<span class="token punctuation">.</span>d/mysqld
</code></pre> 
<p>赋予可执行权限</p> 
<pre><code class="prism language-powershell">chmod <span class="token operator">+</span>x <span class="token operator">/</span>etc/init<span class="token punctuation">.</span>d/mysqld
</code></pre> 
<p>添加服务</p> 
<pre><code class="prism language-powershell">chkconfig <span class="token operator">--</span>add mysqld
</code></pre> 
<p>显示服务列表</p> 
<pre><code class="prism language-powershell">chkconfig <span class="token operator">--</span>list
</code></pre> 
<p>注：如果看到mysqld的服务，并且3,4,5都是on的话则成功，如果是off，则执行</p> 
<pre><code class="prism language-powershell">chkconfig <span class="token operator">--</span>level 345 mysqld on
</code></pre> 
<p>重启系统</p> 
<pre><code class="prism language-powershell">reboot
</code></pre> 
<p>重启后查看mysql是否开机自启动</p> 
<pre><code class="prism language-powershell"><span class="token function">ps</span> <span class="token operator">-</span>ef<span class="token punctuation">|</span>grep mysql
</code></pre> 
<div id="treeSkill"></div>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/98d865ae46919d6c5cca26ca01c1f57e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VisualStudio(VS)设置程序的版本信息(C-C&#43;&#43;)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/91535eb764e43f9f6bb696d09e9e6e5e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【npm 命令】一次性更新所有包</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>