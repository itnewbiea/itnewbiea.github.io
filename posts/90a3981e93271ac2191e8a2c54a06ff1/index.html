<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>金蝶云星空反写规则表结构同步另一个数据库 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="金蝶云星空反写规则表结构同步另一个数据库" />
<meta property="og:description" content="文章目录 金蝶云星空反写规则表结构同步另一个数据库在BOS找到《反写规则》的表反写规则相关表创建反写规则，或者已经创建好的反写规则定位反写规则数据导出表数据执行脚本BOS导入数据库直接执行 金蝶云星空反写规则表结构同步另一个数据库 在BOS找到《反写规则》的表 反写规则相关表 主表：T_BF_WRITEBACKRULE
多语言表：T_BF_WRITEBACKRULE_L
创建反写规则，或者已经创建好的反写规则 定位反写规则数据 通过反写规则的名字在多语言表找到反写规则的唯一标识，两个表的通过唯一标识关联。
SELECT * FROM dbo.T_BF_WRITEBACKRULE WHERE FID=&#39;f899a3be-be66-45ce-b9af-0078e3fa77bf&#39; SELECT * FROM dbo.T_BF_WRITEBACKRULE_L WHERE FID=&#39;f899a3be-be66-45ce-b9af-0078e3fa77bf&#39; --FNAME=&#39;售后单变更单【保存】反写售后单的变更状态&#39; 导出表数据 两个表都执行以上操作。
同时也会导出xml脚本。
执行脚本 两种方式：BOS导入或者数据库执行执行，选择一个就可以了。
BOS导入 数据库直接执行 /****** 插入主表 ******/ DELETE T_BF_WRITEBACKRULE WHERE FID=&#39;f899a3be-be66-45ce-b9af-0078e3fa77bf&#39;; INSERT INTO T_BF_WRITEBACKRULE(FID,FMODELTYPEID,FSUBSYSID,FMODELTYPESUBID,FVERSION,FISTEMPLATE,FKERNELXML,FBASEOBJECTID,FDEVTYPE,FSUPPLIERNAME,FPASSWORD,FINHERITPATH,FMODIFIERID,FMODIFYDATE,FCOMPUTERINFO,FSOURCEFORMID,FTARGETFORMID,FAUTOFITFREEFLOW,FPACKAGEID,FAUTOFITALLFLOWS,FSYSSTATUS,FMAINVERSION) VALUES (&#39;f899a3be-be66-45ce-b9af-0078e3fa77bf&#39;,780,null,0,&#39;638351193584503556&#39;,null,null,&#39; &#39;,0,&#39;XXXX&#39;,null,N&#39; &#39;,102069,{ts&#39;2023-11-09 09:35:59&#39;},&#39;efe6cd0f-95d5-4a44-bb3b-0a11c690664a(MAC:efe6cd0f-95d5-4a44-bb3b-0a11c690664a)&gt;GATE:127.0.0.1;efe6cd0f-95d5-4a44-bb3b-0a11c690664a&#39;,&#39;XXXX_AS_AfterOrder&#39;,&#39;XXXX_AS_AfterOrderBG&#39;,&#39;1&#39;,null,&#39;1&#39;,&#39;0&#39;,&#39;638351193584503556&#39;) ; /****** 插入多语言表 ******/ DELETE T_BF_WRITEBACKRULE_L WHERE FID=&#39;f899a3be-be66-45ce-b9af-0078e3fa77bf&#39;; INSERT INTO T_BF_WRITEBACKRULE_L(FPKID,FID,FLOCALEID,FNAME,FKERNELXMLLANG,FDESCRIPTION) VALUES (&#39;6928A260-17DA-41E5-A782-E0496931CBED&#39;,&#39;f899a3be-be66-45ce-b9af-0078e3fa77bf&#39;,2052,N&#39;售后单变更单【保存】反写售后单的变更状态&#39;,null,N&#39; &#39;) ; --执行XML的更新，查询被同步的数据库名的表数据，然后执行更新 UPDATE T_BF_WRITEBACKRULE SET T_BF_WRITEBACKRULE.FKERNELXML=t.FKERNELXML FROM ( SELECT FID,FKERNELXML FROM 被同步的数据库名." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/90a3981e93271ac2191e8a2c54a06ff1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-28T18:03:58+08:00" />
<meta property="article:modified_time" content="2023-12-28T18:03:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">金蝶云星空反写规则表结构同步另一个数据库</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">金蝶云星空反写规则表结构同步另一个数据库</a></li><li><ul><li><a href="#BOS_2" rel="nofollow">在BOS找到《反写规则》的表</a></li><li><a href="#_4" rel="nofollow">反写规则相关表</a></li><li><a href="#_8" rel="nofollow">创建反写规则，或者已经创建好的反写规则</a></li><li><a href="#_12" rel="nofollow">定位反写规则数据</a></li><li><a href="#_20" rel="nofollow">导出表数据</a></li><li><a href="#_28" rel="nofollow">执行脚本</a></li><li><ul><li><a href="#BOS_30" rel="nofollow">BOS导入</a></li><li><a href="#_34" rel="nofollow">数据库直接执行</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>金蝶云星空反写规则表结构同步另一个数据库</h2> 
<h3><a id="BOS_2"></a>在BOS找到《反写规则》的表</h3> 
<p><img src="https://images2.imgbox.com/39/7f/2YVvhpln_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_4"></a>反写规则相关表</h3> 
<p>主表：T_BF_WRITEBACKRULE<br> 多语言表：T_BF_WRITEBACKRULE_L</p> 
<h3><a id="_8"></a>创建反写规则，或者已经创建好的反写规则</h3> 
<p><img src="https://images2.imgbox.com/62/5e/Y62tuVCI_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ec/ad/oE3pDLtt_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_12"></a>定位反写规则数据</h3> 
<p>通过反写规则的名字在多语言表找到反写规则的唯一标识，两个表的通过唯一标识关联。</p> 
<pre><code>SELECT * FROM dbo.T_BF_WRITEBACKRULE WHERE FID='f899a3be-be66-45ce-b9af-0078e3fa77bf'
SELECT * FROM dbo.T_BF_WRITEBACKRULE_L WHERE  FID='f899a3be-be66-45ce-b9af-0078e3fa77bf'
--FNAME='售后单变更单【保存】反写售后单的变更状态'
</code></pre> 
<h3><a id="_20"></a>导出表数据</h3> 
<p><img src="https://images2.imgbox.com/6a/6e/LEdHC0OO_o.png" alt="在这里插入图片描述"><br> 两个表都执行以上操作。</p> 
<p>同时也会导出xml脚本。<br> <img src="https://images2.imgbox.com/c4/92/Pj7IdcEF_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_28"></a>执行脚本</h3> 
<p>两种方式：BOS导入或者数据库执行执行，选择一个就可以了。</p> 
<h4><a id="BOS_30"></a>BOS导入</h4> 
<p><img src="https://images2.imgbox.com/ee/b8/mDnqqJ6Q_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9c/40/NRarjypD_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_34"></a>数据库直接执行</h4> 
<pre><code>/****** 插入主表 ******/
DELETE T_BF_WRITEBACKRULE WHERE FID='f899a3be-be66-45ce-b9af-0078e3fa77bf';
INSERT INTO T_BF_WRITEBACKRULE(FID,FMODELTYPEID,FSUBSYSID,FMODELTYPESUBID,FVERSION,FISTEMPLATE,FKERNELXML,FBASEOBJECTID,FDEVTYPE,FSUPPLIERNAME,FPASSWORD,FINHERITPATH,FMODIFIERID,FMODIFYDATE,FCOMPUTERINFO,FSOURCEFORMID,FTARGETFORMID,FAUTOFITFREEFLOW,FPACKAGEID,FAUTOFITALLFLOWS,FSYSSTATUS,FMAINVERSION) VALUES ('f899a3be-be66-45ce-b9af-0078e3fa77bf',780,null,0,'638351193584503556',null,null,' ',0,'XXXX',null,N' ',102069,{ts'2023-11-09  09:35:59'},'efe6cd0f-95d5-4a44-bb3b-0a11c690664a(MAC:efe6cd0f-95d5-4a44-bb3b-0a11c690664a)&gt;GATE:127.0.0.1;efe6cd0f-95d5-4a44-bb3b-0a11c690664a','XXXX_AS_AfterOrder','XXXX_AS_AfterOrderBG','1',null,'1','0','638351193584503556') ;

/****** 插入多语言表 ******/
DELETE T_BF_WRITEBACKRULE_L WHERE FID='f899a3be-be66-45ce-b9af-0078e3fa77bf';
INSERT INTO T_BF_WRITEBACKRULE_L(FPKID,FID,FLOCALEID,FNAME,FKERNELXMLLANG,FDESCRIPTION) VALUES ('6928A260-17DA-41E5-A782-E0496931CBED','f899a3be-be66-45ce-b9af-0078e3fa77bf',2052,N'售后单变更单【保存】反写售后单的变更状态',null,N' ') ;

--执行XML的更新，查询被同步的数据库名的表数据，然后执行更新
UPDATE T_BF_WRITEBACKRULE SET T_BF_WRITEBACKRULE.FKERNELXML=t.FKERNELXML FROM 
(
	SELECT FID,FKERNELXML FROM 被同步的数据库名.dbo.T_BF_WRITEBACKRULE 
	WHERE  FID ='f899a3be-be66-45ce-b9af-0078e3fa77bf'
	--多个 IN ('aa4e35a0-9d37-4158-8697-4aee6fdc40b5','f899a3be-be66-45ce-b9af-0078e3fa77bf')
) t
WHERE t.fid=T_BF_WRITEBACKRULE.fid;
</code></pre> 
<p>如果 XML执行更新有障碍，或者是云服务器未开外网，那就 数据库脚本直接执行，xml文件可以通过bos导入。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/717a05a7dc48f3edd39d3ea7548c6346/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue解决执行打包之后打开页面空白问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1cd054e92ee8e5ea96269eea8ca0e926/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">易趋产品升级（EasyTrack 11_V1.3） | 集成飞书、WPS、个性化设置，增强团队协作和用户体验</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>