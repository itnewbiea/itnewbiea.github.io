<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[填坑]QT5.12 &#43; MYSQL8.0 &#43; VS2017解决各种报错问题 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[填坑]QT5.12 &#43; MYSQL8.0 &#43; VS2017解决各种报错问题" />
<meta property="og:description" content="尝试1： https://blog.csdn.net/qq_29176963/article/details/82776559
将C:\Program Files\MySQL\MySQL Server 8.0\lib 下的ilbmysql.lib和libmysql.dll复制到 D:\Qt\5.12.0\msvc2017_64的bin和lib目录下 ，提示QMYSQL driver not load 还有其他教程提示C:\Program Files\MySQL\MySQL Server 8.0\bin中若干文件进行复制依旧没有用
原因：5.12Qt的mysql 驱动可能和 安装的mysql 的版本不一样
尝试2： 解决问题 Qt &#43; MySql：&#34;QSqlDatabase: QMYSQL driver not loaded&#34;
https://blog.csdn.net/sigmarising/article/details/80664639
重新下载Connector/C&#43;&#43;驱动https://dev.mysql.com/downloads/connector/cpp/ ，结果8.0版本，压缩包内并没有ilbmysql.lib和libmysql.dll，只有vs14编译的动态链接库
尝试3： 使用ODBC连接mysql
https://blog.csdn.net/qq_37105120/article/details/84000341
VS2017解决不了问题，提示“由于系统错误 182: (MySQL ODBC 8.0 ANSI Driver, C:\\Program Files\\MySQL\\Connector ODBC 8.0\\myodbc8a.dll)，指定驱动程序无法加载。 QODBC3: Unable to connect”
最终： 回退到MySQL5.6版本依旧无法运行！
新建一个空白项目，MySQL5.6可以运行！最终排查发现QT MySQL库与项目中包含的MATLAB DLL冲突！应该是需要同时加载同名不同版本dll引起的冲突。
解决方案：调整环境变量顺序，删除无关的环境变量 QT5.12与MySQL8.0配合也没有任何问题！！！但是相比MySQL5.6还要多添加 libeay32.dll 和ssleay32.dll
Beside libmysql.dll and qsqlmysql.dll, other two *.dll files are also necessary (but no solution I searched refers to them): libeay32." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/9cc39bd58e38c7f1b39cdacfef2444f1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-06T14:21:57+08:00" />
<meta property="article:modified_time" content="2019-03-06T14:21:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[填坑]QT5.12 &#43; MYSQL8.0 &#43; VS2017解决各种报错问题</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><strong>尝试1：</strong></h2> 
<p><a href="https://blog.csdn.net/qq_29176963/article/details/82776559">https://blog.csdn.net/qq_29176963/article/details/82776559</a></p> 
<p>将C:\Program Files\MySQL\MySQL Server 8.0\lib 下的ilbmysql.lib和libmysql.dll复制到 D:\Qt\5.12.0\msvc2017_64的bin和lib目录下 ，提示QMYSQL driver not load <br> 还有其他教程提示C:\Program Files\MySQL\MySQL Server 8.0\bin中若干文件进行复制依旧没有用<br><span style="color:#f33b45;">原因：5.12</span><span style="color:#f33b45;">Qt的mysql 驱动可能和 安装的mysql 的版本不一样</span><br>  </p> 
<h2><strong>尝试2：</strong></h2> 
<p>解决问题 Qt + MySql："QSqlDatabase: QMYSQL driver not loaded"</p> 
<p><a href="https://blog.csdn.net/sigmarising/article/details/80664639">https://blog.csdn.net/sigmarising/article/details/80664639</a></p> 
<p>重新下载Connector/C++驱动<a href="https://dev.mysql.com/downloads/connector/cpp/" rel="nofollow">https://dev.mysql.com/downloads/connector/cpp/</a> ，结果8.0版本，压缩包内并没有ilbmysql.lib和libmysql.dll，只有vs14编译的动态链接库</p> 
<p> </p> 
<h2>尝试3：</h2> 
<p><strong>使用ODBC连接mysql</strong></p> 
<p><a href="https://blog.csdn.net/qq_37105120/article/details/84000341">https://blog.csdn.net/qq_37105120/article/details/84000341</a><br> VS2017解决不了问题，提示“由于系统错误 182: (MySQL ODBC 8.0 ANSI Driver, C:\\Program Files\\MySQL\\Connector ODBC 8.0\\myodbc8a.dll)，指定驱动程序无法加载。 QODBC3: Unable to connect”</p> 
<p> </p> 
<h2>最终：</h2> 
<p><span style="color:#f33b45;">回退到MySQL5.6版本依旧无法运行！</span></p> 
<p><span style="color:#f33b45;">新建一个空白项目，MySQL5.6可以运行！最终排查发现QT MySQL库与项目中包含的MATLAB DLL冲突！应该是需要同时加载同名不同版本dll引起的冲突。</span></p> 
<h2><span style="color:#f33b45;">解决方案：调整环境变量顺序，删除无关的环境变量</span></h2> 
<p><span style="color:#f33b45;">QT5.12与MySQL8.0配合也没有任何问题！！！但是相比MySQL5.6还要多添加 libeay32.dll</span> 和<span style="color:#f33b45;">ssleay32.dll</span></p> 
<p>Beside libmysql.dll and qsqlmysql.dll, other two *.dll files are also necessary (but no solution I searched refers to them): <span style="color:#f33b45;">libeay32.dll</span> and <span style="color:#f33b45;">ssleay32.dll</span>, they are located at MySql/bin/. For my computer, they are contained in the system path, while for other computers that do not install MySql, they lack these two. Thus, we need to copy them to the package as well.<br><a href="https://stackoverflow.com/questions/51943259/deploy-qt-mysql-application" rel="nofollow">https://stackoverflow.com/questions/51943259/deploy-qt-mysql-application</a></p> 
<p> </p> 
<h2><span style="color:#3399ea;"><strong>经验教训：</strong></span></h2> 
<p><span style="color:#3399ea;"><strong>1、添加新功能若遇到难解问题，新建空白项目测试，看是否是冲突bug</strong></span></p> 
<p><span style="color:#3399ea;"><strong>2、不要轻易添加和调整系统变量顺序，要从上到下有逻辑</strong></span></p> 
<p><span style="color:#3399ea;"><strong>3、不要轻易往系统bin文件夹添加或替换动态链接库，如果程序特殊需要，放在程序执行文件夹即可（就近调用）</strong></span></p> 
<p><span style="color:#3399ea;"><strong>4、不要轻易往编译工具lib/bin文件夹放dll,</strong></span><span style="color:#3399ea;"><strong>放在程序执行文件夹即可（就近调用）</strong></span><br>  </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a831ad0f336025eac22c565ff70ac066/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">OD使用初探</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/abe9843865eb15a78b0282fdeddc4956/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AT指令</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>