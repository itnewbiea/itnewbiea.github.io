<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pinia安装使用 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pinia安装使用" />
<meta property="og:description" content="pinia中文文档
目录
一.pinia简介
二. pinia安装
三.pinia使用
1.main.js中创建pinia实例
2.创建store状态库
定义state
state的读写
state响应式解构
state的修改
Getters的使用
Pinia中Store的互相调用
一.pinia简介 Pinia是vue生态里Vuex的替代者，一个全新的vue状态管理库。
Pinia·是·Vue 的存储库，它允许您跨组件/页面共享状态
(让你可以在页面间实现数据的共享)
二. pinia安装 npm install pinia package.json包中含有pinia
三.pinia使用 1.main.js中创建pinia实例 import { createApp } from &#39;vue&#39; import App from &#39;./App.vue&#39; import {createPinia} from &#39;pinia&#39; const app = createApp(App) app.use(createPinia()) app.mount(&#39;#app&#39;) 2.创建store状态库 在src目录下创建一个store包
store下建user.js
定义state state是pinia的核心，是存储数据的地方，例如我们要存储一个user对象
import {defineStore} from &#39;pinia&#39; import {ref} from &#34;vue&#34;; //第一种写法 export default defineStore(&#39;first&#39;,()=&gt;{ const name=ref(&#39;name&#39;) const age=ref(12) return {name,age} }) //第二种写法 export default defineStore(&#39;user&#39;,{ state:()=&gt;{ return { name:&#39;name&#39;, age:12 } } }) state的读写 &lt;template&gt; &lt;a&gt;{{userStore." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/7143f9843c7301da02f5efff1541ef95/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-30T22:26:01+08:00" />
<meta property="article:modified_time" content="2022-11-30T22:26:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pinia安装使用</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><a class="link-info" href="https://pinia.web3doc.top/" rel="nofollow" title="pinia中文文档">pinia中文文档</a></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E4%B8%80.pinia%E7%AE%80%E4%BB%8B-toc" style="margin-left:0px;"><a href="#%E4%B8%80.pinia%E7%AE%80%E4%BB%8B" rel="nofollow">一.pinia简介</a></p> 
<p id="%E4%BA%8C.%C2%A0pinia%E5%AE%89%E8%A3%85-toc" style="margin-left:0px;"><a href="#%E4%BA%8C.%C2%A0pinia%E5%AE%89%E8%A3%85" rel="nofollow">二. pinia安装</a></p> 
<p id="%C2%A0%E4%B8%89.pinia%E4%BD%BF%E7%94%A8-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B8%89.pinia%E4%BD%BF%E7%94%A8" rel="nofollow"> 三.pinia使用</a></p> 
<p id="1.main.js%E4%B8%AD%E5%88%9B%E5%BB%BApinia%E5%AE%9E%E4%BE%8B-toc" style="margin-left:40px;"><a href="#1.main.js%E4%B8%AD%E5%88%9B%E5%BB%BApinia%E5%AE%9E%E4%BE%8B" rel="nofollow">1.main.js中创建pinia实例</a></p> 
<p id="2.%E5%88%9B%E5%BB%BAstore%E7%8A%B6%E6%80%81%E5%BA%93-toc" style="margin-left:40px;"><a href="#2.%E5%88%9B%E5%BB%BAstore%E7%8A%B6%E6%80%81%E5%BA%93" rel="nofollow">2.创建store状态库</a></p> 
<p id="%E5%AE%9A%E4%B9%89state-toc" style="margin-left:80px;"><a href="#%E5%AE%9A%E4%B9%89state" rel="nofollow">定义state</a></p> 
<p id="state%E7%9A%84%E8%AF%BB%E5%86%99-toc" style="margin-left:80px;"><a href="#state%E7%9A%84%E8%AF%BB%E5%86%99" rel="nofollow">state的读写</a></p> 
<p id="state%E5%93%8D%E5%BA%94%E5%BC%8F%E8%A7%A3%E6%9E%84-toc" style="margin-left:80px;"><a href="#state%E5%93%8D%E5%BA%94%E5%BC%8F%E8%A7%A3%E6%9E%84" rel="nofollow">state响应式解构</a></p> 
<p id="state%E7%9A%84%E4%BF%AE%E6%94%B9-toc" style="margin-left:80px;"><a href="#state%E7%9A%84%E4%BF%AE%E6%94%B9" rel="nofollow">state的修改</a></p> 
<p id="Getters%E7%9A%84%E4%BD%BF%E7%94%A8-toc" style="margin-left:80px;"><a href="#Getters%E7%9A%84%E4%BD%BF%E7%94%A8" rel="nofollow">Getters的使用</a></p> 
<p id="Pinia%E4%B8%ADStore%E7%9A%84%E4%BA%92%E7%9B%B8%E8%B0%83%E7%94%A8-toc" style="margin-left:80px;"><a href="#Pinia%E4%B8%ADStore%E7%9A%84%E4%BA%92%E7%9B%B8%E8%B0%83%E7%94%A8" rel="nofollow">Pinia中Store的互相调用</a></p> 
<p id="-toc" style="margin-left:80px;"></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80.pinia%E7%AE%80%E4%BB%8B"><strong>一.pinia简介</strong></h2> 
<p>Pinia是vue生态里Vuex的替代者，一个全新的vue状态管理库。<br> Pinia·是·Vue 的存储库，它允许您跨组件/页面共享状态<br> (让你可以在页面间实现数据的共享)<br>  </p> 
<h2 id="%E4%BA%8C.%C2%A0pinia%E5%AE%89%E8%A3%85">二. pinia安装</h2> 
<pre><code class="hljs">npm install pinia
</code></pre> 
<p>package.json包中含有pinia</p> 
<p><img alt="" height="353" src="https://images2.imgbox.com/95/22/oWKPjpHU_o.png" width="668"></p> 
<h2 id="%C2%A0%E4%B8%89.pinia%E4%BD%BF%E7%94%A8"> 三.pinia使用</h2> 
<h3 id="1.main.js%E4%B8%AD%E5%88%9B%E5%BB%BApinia%E5%AE%9E%E4%BE%8B">1.main.js中创建pinia实例</h3> 
<pre><code class="hljs">import { createApp } from 'vue'
import App from './App.vue'
import {createPinia} from 'pinia'
const app = createApp(App)
app.use(createPinia())
app.mount('#app')
</code></pre> 
<h3 id="2.%E5%88%9B%E5%BB%BAstore%E7%8A%B6%E6%80%81%E5%BA%93">2.创建store状态库</h3> 
<p>在src目录下创建一个store包</p> 
<p>store下建user.js</p> 
<h4 id="%E5%AE%9A%E4%B9%89state">定义state</h4> 
<p>state是pinia的核心，是存储数据的地方，例如我们要存储一个user对象</p> 
<pre><code class="hljs">import {defineStore} from 'pinia'
import {ref} from "vue";
//第一种写法
export default defineStore('first',()=&gt;{
    const name=ref('name')
    const age=ref(12)
    return {name,age}
})
//第二种写法
export default defineStore('user',{
    state:()=&gt;{
        return {
            name:'name',
            age:12
        }
    }
})
</code></pre> 
<h4 id="state%E7%9A%84%E8%AF%BB%E5%86%99">state的读写</h4> 
<pre><code class="hljs">&lt;template&gt;
  &lt;a&gt;{<!-- -->{userStore.name}}&lt;/a&gt;
  &lt;input type="text" v-model="userStore.name"&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { toRef } from '@vue/reactivity'
import user from '../store/user.js'//引入state
const userStore = user()
 

console.log(userStore.name)
&lt;/script&gt;

&lt;style&gt;

&lt;/style&gt;</code></pre> 
<p><img alt="" height="232" src="https://images2.imgbox.com/db/b2/xHPt3QwI_o.png" width="619"></p> 
<p> 当我们更改表单中的数据时，前面的字符也会跟着改变，这种改变是通过更改状态库的数据而进行改变的</p> 
<h4 id="state%E5%93%8D%E5%BA%94%E5%BC%8F%E8%A7%A3%E6%9E%84">state响应式解构</h4> 
<pre><code class="hljs">const {name,age} = StoreToRefs(userStore())
</code></pre> 
<h4 id="state%E7%9A%84%E4%BF%AE%E6%94%B9">state的修改</h4> 
<p><strong>使用patch修改</strong></p> 
<pre><code class="hljs">const handleClickPatch = () =&gt; {
    userStore.$patch((state)=&gt;{
        userStore.name='小明'
    })
}
</code></pre> 
<p><strong>先在store中写好action方法，再调用action</strong></p> 
<p><strong>action中方法的创建</strong></p> 
<pre><code class="hljs">actions: {
    changeState(){
        this.age++
        this.name = 'change helloPinia!!!'
    }
}
</code></pre> 
<p><strong>action中方法的调用</strong></p> 
<pre><code class="hljs">const handleClickActions = ()=&gt;{
    userStore.changeState()
}
</code></pre> 
<h4 id="Getters%E7%9A%84%E4%BD%BF%E7%94%A8">Getters的使用</h4> 
<p>计算属性，可以对state进行计算操作，它就是Store的计算属性，虽然在组件内也可以做计算属性，但是geetters可以在多组件之间复用，如果一个状态只在一个组件内使用是可以不用getters</p> 
<p>例如</p> 
<pre><code class="hljs">import {defineStore} from 'pinia'
import {ref} from "vue";


export default defineStore('first',{state:()=&gt;{
    const name=ref('name')
    const age=ref(12)
    return {name,age}
    
},
getters:{
    ageAdd(state){
        return this.age++
    }
},
action:{

}
})</code></pre> 
<p> 这样，ageAdd可以直接通过store.ageAdd调用</p> 
<p>例如</p> 
<pre><code class="hljs">&lt;a&gt;{<!-- -->{userStore.ageAdd}}&lt;/a&gt;</code></pre> 
<h4 id="Pinia%E4%B8%ADStore%E7%9A%84%E4%BA%92%E7%9B%B8%E8%B0%83%E7%94%A8">Pinia中Store的互相调用</h4> 
<h4></h4> 
<p><br> 在上面代码中我们一直只使用了一个Store仓库，在真实项目中我们往往是有多个Store的。有多个Stroe时，就会涉及Store内部的互相调用问题。</p> 
<p>第一步：新建一个Store仓库<br> 在\src\store下新建一个Hyy.ts文件：</p> 
<pre><code class="hljs">import { defineStore } from 'pinia'

export const hyyStore = defineStore("hyyStore", {
    state:() =&gt; { 
        return {
            list:["黄黄","小黄","黄小黄"]
        } 
    },
    getters: {
    },
    actions: {
    }
})
</code></pre> 
<p><br> 这是一个非常简单的仓库，只有state（状态数据），需要注意的是ID要是唯一的。有了这个仓库后，就可以回到index.ts这个仓库中调用了。</p> 
<p>第二步：先引入Hyy这个store。</p> 
<pre><code class="hljs">import { hyyStore } from './hyy'</code></pre> 
<p><br> 第三步：然后在actions部分加一个getList( )方法。<br> 这部分就写的很简单了，只是用console.log( )打印到控制台 上就可以了。</p> 
<pre><code class="hljs">actions: {
    changeState(){
        this.count++
        this.helloPinia = 'change helloPinia!!!'
    },
    getList(){
        console.log(hyyStore().list)
    }
}
</code></pre> 
<p><br><br> 这样就实现了两个store中互相调用。</p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/38b0336fd6970a47380b473c6a1f08f9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SSM基本框架搭建，SSM的分页功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0247789258c26564da1394bb0f268430/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Elasticsearch&#43;Logstash&#43;Java整合实现Word、PDF，TXT等文件的全文内容检索功能-windows版</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>