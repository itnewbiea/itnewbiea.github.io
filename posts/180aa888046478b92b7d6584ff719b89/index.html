<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>audio或video标签 autoplay无效 或 .play()报错问题 解决方案 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="audio或video标签 autoplay无效 或 .play()报错问题 解决方案" />
<meta property="og:description" content=" video标签
video标签设置 autoplay 无效，一般的解决办法是 在video标签上设置 muted 属性 即可。
muted 属性的作用：是否静音
也就是说，想让video标签自动播放视频，必须先设置为静音。原因下面一起说。
audio标签
audio标签设置 autoplay 无效，或者在 js 中用 audio.play() 报以下错误：
而且audio标签 即使设置了 muted 属性也不能自动播放（解决方法最后说）。
原因分析
其实从报错信息也可以了解到，DOMException: play() failed because the user didn&#39;t interact with the document first 意思就是说：调用audio.play()方法之前，用户必须先和页面有交互，否则调用失败。
这也是video标签自动播放视频，为何必须先设置静音的原因。
用户和页面之间有交互：其实就是指 用户与页面要发生了事件，才算有交互。比如 鼠标事件（单击 onclick，双击 ondblclick，按下 onmousedown，松开 onmouseup，右击 oncontextmenu 等），键盘事件（按下 onkeydown，松开 onkeyup 等）等。
注意：onmouseenter，onmouseleave，onmouseover，onmouseout 等某些事件，并不算用户与页面发生了交互。比如说，你想在onmouseenter事件发生的回调函数中，执行 audio.play() 也是会报错的，因为谷歌浏览器认为这不算有交互。
解决方法
明白了原因，其实解决方法就很多了。
打个比方：进入某个页面之后，想在3秒后能 成功调用 audio.play() 播放音频，你可以在3秒内随便单击一下页面的某个地方，这样谷歌浏览器就认为 用户与页面已经有交互了，那么3秒一到，play()方法调用成功，音频就正常播放了。 既然是这样，那么在用户进入页面的时候，只要引导用户先去触发这些事件，问题就解决了。
方法1：进入页面时，可以做个欢迎弹窗之类的，引导用户点击关闭（这样就有交互了），然后就可以 自动播放 音频，或者 自动播放 有声视频。方法2：直接做个播放按钮之类的，引导用户点击之后才调用 音频播放 或 有声视频播放。 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/180aa888046478b92b7d6584ff719b89/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-03T13:27:52+08:00" />
<meta property="article:modified_time" content="2023-02-03T13:27:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">audio或video标签 autoplay无效 或 .play()报错问题 解决方案</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>video标签</strong></p> 
<p>video标签设置 autoplay 无效，一般的解决办法是 <strong>在video标签上设置 muted 属性</strong> 即可。</p> 
<blockquote> 
 <p><strong>muted</strong> 属性的作用：是否静音</p> 
</blockquote> 
<p> 也就是说，<span style="color:#fe2c24;"><strong>想让video标签自动播放视频，必须先设置为静音</strong></span>。原因下面一起说。</p> 
<p><strong>audio标签</strong></p> 
<p>audio标签设置 autoplay 无效，或者在 js 中用 audio.play() 报以下错误：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/cb/4a/LQo7JRuN_o.png"></p> 
<p> 而且audio标签 <span style="color:#fe2c24;"><strong>即使设置了 muted 属性也不能自动播放</strong></span>（解决方法最后说）。</p> 
<p><strong>原因分析</strong></p> 
<p>其实从报错信息也可以了解到，<span style="background-color:#ffd900;">DOMException: play() failed because the user didn't interact with the document first</span> 意思就是说：<strong>调用audio.play()方法之前，用户必须先和页面有交互，否则调用失败</strong>。</p> 
<p>这也是video标签自动播放视频，为何必须先设置静音的原因。</p> 
<blockquote> 
 <p><strong>用户和页面之间有交互</strong>：其实就是指 <strong>用户与页面要发生了事件，才算有交互</strong>。比如 <span style="color:#fe2c24;"><strong>鼠标事件</strong></span>（单击 onclick，双击 ondblclick，按下 onmousedown，松开 onmouseup，右击 oncontextmenu 等），<span style="color:#fe2c24;"><strong>键盘事件</strong></span>（按下 onkeydown，松开 onkeyup 等）等。</p> 
 <p> <span style="color:#fe2c24;"><strong>注意</strong></span>：onmouseenter，onmouseleave，onmouseover，onmouseout 等某些事件，<span style="color:#fe2c24;"><strong>并不算</strong></span>用户与页面发生了交互。比如说，你想在onmouseenter事件发生的回调函数中，执行 audio.play() 也是会报错的，因为谷歌浏览器认为这不算有交互。</p> 
</blockquote> 
<p> <strong>解决方法</strong></p> 
<p>明白了原因，其实解决方法就很多了。</p> 
<blockquote> 
 <p>打个比方：进入某个页面之后，想在3秒后能 成功调用 audio.play() 播放音频，你可以在3秒内随便单击一下页面的某个地方，这样谷歌浏览器就认为 用户与页面已经有交互了，那么3秒一到，play()方法调用成功，音频就正常播放了。 </p> 
</blockquote> 
<p>既然是这样，那么<strong>在用户进入页面的时候，只要引导用户先去触发这些事件，问题就解决了</strong>。</p> 
<ul><li>方法1：进入页面时，可以做个欢迎弹窗之类的，<strong>引导用户点击关闭</strong>（这样就有交互了），然后就可以 <strong>自动播放 音频</strong>，或者 <strong>自动播放 有声视频</strong>。</li><li>方法2：直接做个播放按钮之类的，<strong>引导用户点击</strong>之后才调用 <strong>音频播放</strong> 或 <strong>有声视频播放</strong>。</li></ul>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/60cf0586ad40236333a65a4e4ae966a5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">npm ERR! C:\Program Files\Git\cmd\git.EXE ls-remote -h -t</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2977d019b05699f48c735ec65ccf81b7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[MGeo应用]使用Python&#43;AI模型准确拆分Excel中地址的省市区街道</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>