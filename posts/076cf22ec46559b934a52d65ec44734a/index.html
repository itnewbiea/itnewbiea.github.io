<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Windows通过VCPKG配置Ceres环境】 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Windows通过VCPKG配置Ceres环境】" />
<meta property="og:description" content="简介 Ceres是Google推出一款非线性最小二乘优化库。在Windows下配置Ceres环境主要有两种方法：一种是自行下载代码编译，由于Ceres依赖库较多，配置起来较为麻烦；另一种是通过微软的包管理软件VCPKG配置Ceres环境，比较简单，适合新手小白。本文分享Windows系统下通过VCPKG配置Ceres环境的步骤，内容主要参考了以下三篇博客。
vcpkg 安装ceres库总崩溃的解决办法
在windows系统中使用Ceres非线性优化库：（一）安装Ceres库
win11&#43;vs2022配置ceres库
VCPKG下载生成Ceres库 首先，下载安装vcpkg，可以参考官网的教程Get started with vcpkg。这里把vcpkg放置在了D:\Program Files\vcpkg路径下。安装vcpkg后，在vcpkg路径下运行命令行.\vcpkg search ceres，如下图所示，会找到ceres及开启一些优化选项所依赖的库。使用.\vcpkg install ceres[cuda,cxsparse,eigensparse,lapack,suitesparse,tools]:x64-windows --recurse命令安装Ceres（方括号中的库名根据需要填写），会自动下载Ceres依赖库。生成完成后，在D:\Program Files\vcpkg\installed\x64-windows路径可以看到bin、include、lib、share文件。 VS项目中配置Ceres环境 本节介绍两种在VS项目中配置Ceres环境的方法。一种是使用vcpkg，另一种是使用cmake。使用vcpkg会出现报错，需要手动更改VS项目配置解决，会写cmakelists的话使用cmake更加方便。
使用VCPKG 运行.\vcpkg integrate install命令可以自动在VS中所有项目集成Ceres环境，无需再进行项目配置。若要删除集成，可以使用 .\vcpkg integrate remove。在VS中新建空项目，下载Ceres源码，在example中拷贝一个例程，比如helloworld.cc，添加到项目中，点击运行。过程可能出现报错，我运行中出现三种错误，按照第三个博客中的方法解决了。注意在Debug和Release模式下都要进行配置。
a. 首先是GLOG_NO_ABBREVIATED_SEVERITIES报错。解决方法是在项目-&gt;属性-&gt;C/C&#43;±&gt;预处理器中的预处理器定义增GLOG_NO_ABBREVIATED_SEVERITIES 。
b. 其次是jet.h和local_parameterization.h报错，解决方法是将项目-&gt;属性-&gt;C/C&#43;±&gt;常规中的SDL检查改为否。 c. 最后是std::max报错，解决方法是将项目-&gt;属性-&gt;C/C&#43;±&gt;预处理器中的预处理器定义增加NOMINMAX。最后运行程序，成功输出。
使用CMAKE 下载Ceres源码，在example中拷贝一个例程，比如helloworld.cc，放入某一新建文件夹如cereshelloworld。在cereshelloworld文件夹新建cmakelists.txt文件，按照cmake基本写法配置ceres环境。唯一不同的是，需要在cmake工具链中中添加vcpkg.cmake路径，增加如下语句：set(CMAKE_TOOLCHAIN_FILE &#34;D:/Program Files/vcpkg/scripts/buildsystems/vcpkg.cmake&#34;) cmake_minimum_required(VERSION 3.2) # 使用VCPKG生成的库(修改成自己电脑中的vcpkg路径) set(CMAKE_TOOLCHAIN_FILE &#34;D:/Program Files/vcpkg/scripts/buildsystems/vcpkg.cmake&#34;) # 项目名 project(ceres_helloworld) # 添加可执行文件 add_executable(${PROJECT_NAME} helloworld.cc) # 查找并包含、链接Ceres find_package(Ceres CONFIG REQUIRED) include_directories(${CERES_INCLUDE_DIRS}) link_directories(${CERES_LIBRARY_DIRS}) target_link_libraries(${PROJECT_NAME} PRIVATE ${CERES_LIBRARIES}) 打开cmake-gui，设置代码路径为cereshelloworld，设置build路径为cereshelloworld\build，依次点击配置、生成、打开工程。
在打开的VS工程中右键点击ceres_helloworld工程，设置为启动项目，点击开始执行，可成功运行程序。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/076cf22ec46559b934a52d65ec44734a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-09T08:37:20+08:00" />
<meta property="article:modified_time" content="2023-12-09T08:37:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Windows通过VCPKG配置Ceres环境】</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>简介</h2> 
<p>Ceres是Google推出一款非线性最小二乘优化库。在Windows下配置Ceres环境主要有两种方法：一种是自行下载代码编译，由于Ceres依赖库较多，配置起来较为麻烦；另一种是通过微软的包管理软件VCPKG配置Ceres环境，比较简单，适合新手小白。本文分享Windows系统下通过VCPKG配置Ceres环境的步骤，内容主要参考了以下三篇博客。</p> 
<p><a href="https://blog.csdn.net/qq_41803340/article/details/108300053">vcpkg 安装ceres库总崩溃的解决办法</a><br> <a href="https://blog.csdn.net/m0_68732180/article/details/130233901">在windows系统中使用Ceres非线性优化库：（一）安装Ceres库</a><br> <a href="https://blog.csdn.net/weixin_35732969/article/details/127794708">win11+vs2022配置ceres库</a></p> 
<h2><a id="VCPKGCeres_7"></a>VCPKG下载生成Ceres库</h2> 
<ol><li>首先，下载安装vcpkg，可以参考官网的教程<a href="https://vcpkg.io/en/getting-started.html" rel="nofollow">Get started with vcpkg</a>。这里把vcpkg放置在了<code>D:\Program Files\vcpkg</code>路径下。</li><li>安装vcpkg后，在vcpkg路径下运行命令行<code>.\vcpkg search ceres</code>，如下图所示，会找到ceres及开启一些优化选项所依赖的库。<img src="https://images2.imgbox.com/23/61/xp9D88VJ_o.png" alt="vcpkg search ceres">使用<code>.\vcpkg install ceres[cuda,cxsparse,eigensparse,lapack,suitesparse,tools]:x64-windows --recurse</code>命令安装Ceres（方括号中的库名根据需要填写），会自动下载Ceres依赖库。生成完成后，在<code>D:\Program Files\vcpkg\installed\x64-windows</code>路径可以看到bin、include、lib、share文件。</li></ol> 
<h2><a id="VSCeres_10"></a>VS项目中配置Ceres环境</h2> 
<p>本节介绍两种在VS项目中配置Ceres环境的方法。一种是使用vcpkg，另一种是使用cmake。使用vcpkg会出现报错，需要手动更改VS项目配置解决，会写cmakelists的话使用cmake更加方便。</p> 
<h4><a id="VCPKG_12"></a>使用VCPKG</h4> 
<ol><li>运行<code>.\vcpkg integrate install</code>命令可以自动在VS中所有项目集成Ceres环境，无需再进行项目配置。若要删除集成，可以使用 <code>.\vcpkg integrate remove</code>。</li><li>在VS中新建空项目，下载<a href="https://github.com/ceres-solver/ceres-solver">Ceres源码</a>，在<code>example</code>中拷贝一个例程，比如<code>helloworld.cc</code>，添加到项目中，点击运行。</li><li>过程可能出现报错，我运行中出现三种错误，按照第三个博客中的方法解决了。注意在Debug和Release模式下都要进行配置。<br> a. 首先是GLOG_NO_ABBREVIATED_SEVERITIES报错。解决方法是在项目-&gt;属性-&gt;C/C+±&gt;预处理器中的预处理器定义增GLOG_NO_ABBREVIATED_SEVERITIES 。<br> <img src="https://images2.imgbox.com/c1/63/7z8wltXf_o.png" alt="GLOG_NO_ABBREVIATED_SEVERITIES报错"> b. 其次是jet.h和local_parameterization.h报错，解决方法是将项目-&gt;属性-&gt;C/C+±&gt;常规中的SDL检查改为否。<img src="https://images2.imgbox.com/32/97/S58mbBO5_o.png" alt="jet.h和local_parameterization.h报错"> c. 最后是std::max报错，解决方法是将项目-&gt;属性-&gt;C/C+±&gt;预处理器中的预处理器定义增加NOMINMAX。<img src="https://images2.imgbox.com/1d/6a/1cYfO6GO_o.png" alt="std::max报错"></li><li>最后运行程序，成功输出。<br> <img src="https://images2.imgbox.com/38/18/Lg7CfTdz_o.png" alt="helloworld.cc输出"></li></ol> 
<h4><a id="CMAKE_20"></a>使用CMAKE</h4> 
<ol><li>下载<a href="https://github.com/ceres-solver/ceres-solver">Ceres源码</a>，在<code>example中</code>拷贝一个例程，比如<code>helloworld.cc</code>，放入某一新建文件夹如<code>cereshelloworld</code>。</li><li>在<code>cereshelloworld</code>文件夹新建cmakelists.txt文件，按照cmake基本写法配置ceres环境。唯一不同的是，需要在cmake工具链中中添加<code>vcpkg.cmake路径</code>，增加如下语句：<code>set(CMAKE_TOOLCHAIN_FILE "D:/Program Files/vcpkg/scripts/buildsystems/vcpkg.cmake")</code></li></ol> 
<pre><code class="prism language-csharp"><span class="token function">cmake_minimum_required</span><span class="token punctuation">(</span>VERSION <span class="token number">3.2</span><span class="token punctuation">)</span>
<span class="token preprocessor property"># 使用VCPKG生成的库(修改成自己电脑中的vcpkg路径)</span>
<span class="token keyword">set</span><span class="token punctuation">(</span>CMAKE_TOOLCHAIN_FILE <span class="token string">"D:/Program Files/vcpkg/scripts/buildsystems/vcpkg.cmake"</span><span class="token punctuation">)</span>
<span class="token preprocessor property"># 项目名</span>
<span class="token function">project</span><span class="token punctuation">(</span>ceres_helloworld<span class="token punctuation">)</span>
<span class="token preprocessor property"># 添加可执行文件</span>
<span class="token function">add_executable</span><span class="token punctuation">(</span>$<span class="token punctuation">{<!-- --></span>PROJECT_NAME<span class="token punctuation">}</span> helloworld<span class="token punctuation">.</span>cc<span class="token punctuation">)</span>
<span class="token preprocessor property"># 查找并包含、链接</span><span class="token return-type class-name">Ceres</span>
<span class="token function">find_package</span><span class="token punctuation">(</span>Ceres <span class="token class-name">CONFIG</span> REQUIRED<span class="token punctuation">)</span>
<span class="token function">include_directories</span><span class="token punctuation">(</span>$<span class="token punctuation">{<!-- --></span>CERES_INCLUDE_DIRS<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">link_directories</span><span class="token punctuation">(</span>$<span class="token punctuation">{<!-- --></span>CERES_LIBRARY_DIRS<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">target_link_libraries</span><span class="token punctuation">(</span>$<span class="token punctuation">{<!-- --></span>PROJECT_NAME<span class="token punctuation">}</span> PRIVATE $<span class="token punctuation">{<!-- --></span>CERES_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="3"><li>打开cmake-gui，设置代码路径为<code>cereshelloworld</code>，设置build路径为<code>cereshelloworld\build</code>，依次点击配置、生成、打开工程。<br> <img src="https://images2.imgbox.com/40/05/u9Y3VFbU_o.png" alt="在这里插入图片描述"></li><li>在打开的VS工程中右键点击<code>ceres_helloworld</code>工程，设置为启动项目，点击开始执行，可成功运行程序。<br> <img src="https://images2.imgbox.com/c1/74/qjYLWnDg_o.png" alt="在这里插入图片描述"></li></ol>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/448a91290a21d182f76d33b569898fcd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux基础——进程初识（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e79612545a599d3aa4da1b62bba8c471/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43; ：输出 Hello, World</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>