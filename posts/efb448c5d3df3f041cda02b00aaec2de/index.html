<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>三剑客之grep命令 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="三剑客之grep命令" />
<meta property="og:description" content="一 grep介绍 ps aux --sort=cpu ###查看进程排序cpu的 ps aux --sort=cpu |grep ssh grep命令主要用于过滤文本，grep家族如下
grep： 在文件中全局查找指定的正则表达式，并打印所有包含该表达式的行 egrep：扩展的egrep，支持更多的正则表达式元字符 fgrep：固定grep(fixed grep)，有时也被称作快速(fast grep)，它按字面解释所有的字符 grep命令格式如下
grep [选项] PATTERN 文件1 文件2 ... [root@egon ~]# grep &#39;root&#39; /etc/passwd [root@egon ~]# fgrep &#39;bash&#39; /etc/passwd 找到：	grep返回的退出状态为0 没找到：	grep返回的退出状态为1 找不到指定文件：	grep返回的退出状态为2 grep 命令的输入可以来自标准输入或管道，而不仅仅是文件，例如：
ps aux |grep &#39;nginx&#39; 二 选项 -n, --line-number 在过滤出的每一行前面加上它在文件中的相对行号
-o, --only-matching 只显示匹配的内容
-q, --quiet, --silent 静默模式，没有任何输出，得用$?来判断执行成功没有，即有没有过滤到想要的内容
–color 颜色
-i, --ignore-case 忽略大小写
-A, --after-context=NUM 如果匹配成功，则将匹配行及其后n行一起打印出来
-B, --before-context=NUM 如果匹配成功，则将匹配行及其前n行一起打印出来" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/efb448c5d3df3f041cda02b00aaec2de/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-17T15:56:11+08:00" />
<meta property="article:modified_time" content="2021-03-17T15:56:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">三剑客之grep命令</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_grep_0"></a>一 grep介绍</h3> 
<h6><a id="ps_aux_sortcpu__cpu_1"></a>ps aux --sort=cpu ###查看进程排序cpu的</h6> 
<h6><a id="ps_aux_sortcpu_grep_ssh_2"></a>ps aux --sort=cpu |grep ssh</h6> 
<p>grep命令主要用于过滤文本，grep家族如下</p> 
<pre><code>grep： 在文件中全局查找指定的正则表达式，并打印所有包含该表达式的行
egrep：扩展的egrep，支持更多的正则表达式元字符
fgrep：固定grep(fixed grep)，有时也被称作快速(fast grep)，它按字面解释所有的字符
</code></pre> 
<p>grep命令格式如下</p> 
<pre><code>grep [选项] PATTERN 文件1 文件2 ...

[root@egon ~]# grep 'root' /etc/passwd
[root@egon ~]# fgrep 'bash' /etc/passwd

找到：				grep返回的退出状态为0
没找到：			grep返回的退出状态为1
找不到指定文件：	  grep返回的退出状态为2
</code></pre> 
<p>grep 命令的输入可以来自标准输入或管道，而不仅仅是文件，例如：</p> 
<pre><code class="prism language-python">ps aux <span class="token operator">|</span>grep <span class="token string">'nginx'</span>
</code></pre> 
<h3><a id="__32"></a>二 选项</h3> 
<p>-n, --line-number 在过滤出的每一行前面加上它在文件中的相对行号<br> -o, --only-matching 只显示匹配的内容<br> -q, --quiet, --silent 静默模式，没有任何输出，得用$?来判断执行成功没有，即有没有过滤到想要的内容<br> –color 颜色<br> -i, --ignore-case 忽略大小写<br> -A, --after-context=NUM 如果匹配成功，则将匹配行及其后n行一起打印出来<br> -B, --before-context=NUM 如果匹配成功，则将匹配行及其前n行一起打印出来<br> -C, --context=NUM 如果匹配成功，则将匹配行及其前后n行一起打印出来<br> -c, --count 如果匹配成功，则将匹配到的行数打印出来<br> -v, --invert-match 反向查找，只显示不匹配的行<br> -w 匹配单词<br> -E 等于egrep，扩展</p> 
<p>-l, --files-with-matches 如果匹配成功，则只将文件名打印出来，失败则不打印<br> 通常-rl一起用，grep -rl ‘root’ /etc<br> -R, -r, --recursive 递归</p> 
<h6><a id="_52"></a>示例</h6> 
<pre><code class="prism language-powershell"><span class="token comment">###过滤以root开头的文件</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'root' /etc/passwd</span>
root:x:0:0:root:<span class="token operator">/</span>root:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
operator:x:11:0:operator:<span class="token operator">/</span>root:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
<span class="token comment">####-n显示行号</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -n 'root' /etc/passwd</span>
1:root:x:0:0:root:<span class="token operator">/</span>root:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
10:operator:x:11:0:operator:<span class="token operator">/</span>root:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
<span class="token comment">####-n显示行号以及以root开头</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -n '^root' /etc/passwd</span>
1:root:x:0:0:root:<span class="token operator">/</span>root:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
<span class="token comment">####-o只显示匹配的内容</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -o 'root' /etc/passwd</span>
root
root
root
root
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># alias grep  ###与--color类似	</span>
alias grep=<span class="token string">'grep --color=auto'</span>
<span class="token comment">###-A如果匹配成功，则将匹配行及其后n行一起打印出来</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -A 2 'root' /etc/passwd</span>
root:x:0:0:root:<span class="token operator">/</span>root:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
bin:x:1:1:bin:<span class="token operator">/</span>bin:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
daemon:x:2:2:daemon:<span class="token operator">/</span>sbin:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
<span class="token operator">--</span>
operator:x:11:0:operator:<span class="token operator">/</span>root:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
games:x:12:100:games:<span class="token operator">/</span>usr<span class="token operator">/</span>games:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
ftp:x:14:50:FTP User:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>ftp:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
<span class="token comment">###-B如果匹配成功，则将匹配行及其前n行一起打印出来</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -B 2 'root' /etc/passwd</span>
root:x:0:0:root:<span class="token operator">/</span>root:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
<span class="token operator">--</span>
halt:x:7:0:halt:<span class="token operator">/</span>sbin:<span class="token operator">/</span>sbin<span class="token operator">/</span>halt
mail:x:8:12:mail:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>spool<span class="token operator">/</span>mail:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
operator:x:11:0:operator:<span class="token operator">/</span>root:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
<span class="token comment">####-C 2如果匹配成功，则将匹配行及其前后n行一起打印出来</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -C 2 'root' /etc/passwd</span>
root:x:0:0:root:<span class="token operator">/</span>root:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
bin:x:1:1:bin:<span class="token operator">/</span>bin:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
daemon:x:2:2:daemon:<span class="token operator">/</span>sbin:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
<span class="token operator">--</span>
halt:x:7:0:halt:<span class="token operator">/</span>sbin:<span class="token operator">/</span>sbin<span class="token operator">/</span>halt
mail:x:8:12:mail:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>spool<span class="token operator">/</span>mail:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
operator:x:11:0:operator:<span class="token operator">/</span>root:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
games:x:12:100:games:<span class="token operator">/</span>usr<span class="token operator">/</span>games:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
ftp:x:14:50:FTP User:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>ftp:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
<span class="token comment">###-c如果匹配成功，则将匹配到的行数打印出来</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -c 'root' /etc/passwd</span>
2
<span class="token comment">####-v反向查找，只显示不匹配的行</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -v 'root' /etc/passwd</span>
bin:x:1:1:bin:<span class="token operator">/</span>bin:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
daemon:x:2:2:daemon:<span class="token operator">/</span>sbin:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
adm:x:3:4:adm:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>adm:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
<span class="token function">lp</span>:x:4:7:<span class="token function">lp</span>:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>spool<span class="token operator">/</span>lpd:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
sync:x:5:0:sync:<span class="token operator">/</span>sbin:<span class="token operator">/</span>bin<span class="token operator">/</span>sync
shutdown:x:6:0:shutdown:<span class="token operator">/</span>sbin:<span class="token operator">/</span>sbin<span class="token operator">/</span>shutdown
halt:x:7:0:halt:<span class="token operator">/</span>sbin:<span class="token operator">/</span>sbin<span class="token operator">/</span>halt
mail:x:8:12:mail:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>spool<span class="token operator">/</span>mail:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
games:x:12:100:games:<span class="token operator">/</span>usr<span class="token operator">/</span>games:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
ftp:x:14:50:FTP User:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>ftp:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
nobody:x:99:99:Nobody:<span class="token operator">/</span>:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
systemd<span class="token operator">-</span>network:x:192:192:systemd Network Management:<span class="token operator">/</span>:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
dbus:x:81:81:System message bus:<span class="token operator">/</span>:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
polkitd:x:999:997:User <span class="token keyword">for</span> polkitd:<span class="token operator">/</span>:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
postfix:x:89:89::<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>spool<span class="token operator">/</span>postfix:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
sshd:x:74:74:Privilege<span class="token operator">-</span>separated SSH:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>empty<span class="token operator">/</span>sshd:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:<span class="token operator">/</span>dev<span class="token operator">/</span>null:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
abrt:x:173:173::<span class="token operator">/</span>etc<span class="token operator">/</span>abrt:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
libstoragemgmt:x:998:996:daemon account <span class="token keyword">for</span> libstoragemgmt:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>lsm:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
rpc:x:32:32:Rpcbind Daemon:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>rpcbind:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
chrony:x:997:995::<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>chrony:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
tcpdump:x:72:72::<span class="token operator">/</span>:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
ntp:x:38:38::<span class="token operator">/</span>etc<span class="token operator">/</span>ntp:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
apache:x:48:48:Apache:<span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>httpd:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
rpcuser:x:29:29:RPC Service User:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>nfs:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
nfsnobody:x:65534:65534:Anonymous NFS User:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>nfs:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
yuan:x:1000:1000::<span class="token operator">/</span>home<span class="token operator">/</span>yuan:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
<span class="token comment">####-w匹配单词</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># cat a.txt</span>
egon123
egon 123
egon<span class="token operator">/</span>123
eg<span class="token operator">*</span>on
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'egon' a.txt</span>
egon123
egon 123
egon<span class="token operator">/</span>123
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -w 'egon' a.txt</span>
egon 123
egon<span class="token operator">/</span>123
<span class="token comment">####-rl递归查询####如果配置文件忘记可以佩戴者-rl查询</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -rl 'user' /usr/local/nginx/conf/</span>
<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>conf<span class="token operator">/</span>nginx<span class="token punctuation">.</span>conf
<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>conf<span class="token operator">/</span>nginx<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>default

<span class="token comment">####去掉自己带颜色的部分</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># ps aux |grep ssh</span>
root       1462  0<span class="token punctuation">.</span>0  0<span class="token punctuation">.</span>4 110280  4172 ?        Ss   10:06   0:00 <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>sshd <span class="token operator">-</span>D
root       4468  0<span class="token punctuation">.</span>0  0<span class="token punctuation">.</span>5 154160  5276 ?        Ss   20:37   0:01 sshd: root@pts<span class="token operator">/</span>0
root       5335  0<span class="token punctuation">.</span>0  0<span class="token punctuation">.</span>0 112828   980 pts<span class="token operator">/</span>0    R<span class="token operator">+</span>   23:28   0:00 grep <span class="token operator">--</span>color=auto ssh
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># ps aux |grep ssh |grep -v grep</span>
root       1462  0<span class="token punctuation">.</span>0  0<span class="token punctuation">.</span>4 110280  4172 ?        Ss   10:06   0:00 <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>sshd <span class="token operator">-</span>D
root       4468  0<span class="token punctuation">.</span>0  0<span class="token punctuation">.</span>5 154160  5276 ?        Ss   20:37   0:01 sshd: root@pts<span class="token operator">/</span>0
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># ps aux |grep [s]sh</span>
root       1462  0<span class="token punctuation">.</span>0  0<span class="token punctuation">.</span>4 110280  4172 ?        Ss   10:06   0:00 <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>sshd <span class="token operator">-</span>D
root       4468  0<span class="token punctuation">.</span>0  0<span class="token punctuation">.</span>5 154160  5276 ?        Ss   20:37   0:01 sshd: root@pts<span class="token operator">/</span>0
</code></pre> 
<h3><a id="__163"></a>三 正则表达式</h3> 
<h4><a id="31__165"></a>3.1 正则表达式介绍</h4> 
<pre><code class="prism language-powershell">元字符			功能										  示例	
^ 			  行首										^love
$ 			  行尾										 love$
<span class="token punctuation">.</span> 			  除了换行符以外的任意单个字符					 l<span class="token punctuation">.</span><span class="token punctuation">.</span>e
<span class="token operator">*</span> 			  前导字符的零个或多个						    ab<span class="token operator">*</span>love
<span class="token punctuation">.</span><span class="token operator">*</span> 			  所有字符										a<span class="token punctuation">.</span><span class="token operator">*</span>love
<span class="token punctuation">[</span><span class="token punctuation">]</span> 			  字符组内的任一字符								 <span class="token namespace">[lL]</span>ove
<span class="token punctuation">[</span>^<span class="token punctuation">]</span> 		  对字符组内的每个字符取反<span class="token punctuation">(</span>不匹配字符组内的每个字符<span class="token punctuation">)</span>   <span class="token punctuation">[</span>^a<span class="token operator">-</span>z0<span class="token operator">-</span>9<span class="token punctuation">]</span>ove
^<span class="token punctuation">[</span>^<span class="token punctuation">]</span> 	      非字符组内的字符开头的行

<span class="token namespace">[a-z]</span> 		  小写字母
<span class="token namespace">[A-Z]</span> 		  大写字母
<span class="token namespace">[a-Z]</span> 	      小写和大写字母
<span class="token punctuation">[</span>0<span class="token operator">-</span>9<span class="token punctuation">]</span> 	      数字

\	  		 用来转义元字符 									  love\<span class="token punctuation">.</span>	
\&lt; 		     词首定位符 单词一般以空格或特殊字符做分隔、连续的字符组成  \&lt;love
\&gt; 			 词尾定位符										   love\&gt;
\<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\<span class="token punctuation">)</span>		  匹配稍后将要使用的字符的标签	                \<span class="token punctuation">(</span>love\<span class="token punctuation">)</span>able\1er	
                                                         :1<span class="token punctuation">,</span>$ s<span class="token operator">/</span>\<span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>11\<span class="token punctuation">)</span><span class="token punctuation">.</span>66<span class="token operator">/</span>\1<span class="token punctuation">.</span>50<span class="token operator">/</span>g

x\<span class="token punctuation">{<!-- --></span>m\<span class="token punctuation">}</span>			字符x重复出现m次							     e\<span class="token punctuation">{<!-- --></span>3\<span class="token punctuation">}</span>
x\<span class="token punctuation">{<!-- --></span>m<span class="token punctuation">,</span>\<span class="token punctuation">}</span>			字符x重复出现m次以上								e\<span class="token punctuation">{<!-- --></span>3<span class="token punctuation">,</span>\<span class="token punctuation">}</span>						
x\<span class="token punctuation">{<!-- --></span>m<span class="token punctuation">,</span>n\<span class="token punctuation">}</span>		字符x重复出现m到n次								e\<span class="token punctuation">{<!-- --></span>3<span class="token punctuation">,</span>6\<span class="token punctuation">}</span>	
</code></pre> 
<h6><a id="_193"></a>示例</h6> 
<pre><code class="prism language-powershell"><span class="token comment"># 1、^ 行首</span>
<span class="token namespace">[root@egon ~]</span><span class="token comment"># grep '^root' /etc/passwd</span>
root:x:0:0:root:<span class="token operator">/</span>root:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
<span class="token namespace">[root@egon ~]</span><span class="token comment"># </span>

<span class="token comment"># 2、$ 行尾</span>
<span class="token namespace">[root@egon ~]</span><span class="token comment"># grep 'bash$' /etc/passwd</span>
root:x:0:0:root:<span class="token operator">/</span>root:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
user1:x:1002:1003::<span class="token operator">/</span>home<span class="token operator">/</span>user1:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
egon1:x:198:1005::<span class="token operator">/</span>home<span class="token operator">/</span>egon1:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
gg:x:1004:1006::<span class="token operator">/</span>home<span class="token operator">/</span>gg:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
egon:x:1005:1007::<span class="token operator">/</span>home<span class="token operator">/</span>egon:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
tom:x:1006:1008::<span class="token operator">/</span>home<span class="token operator">/</span>tom:<span class="token operator">/</span>bin<span class="token operator">/</span>bash

<span class="token comment">###3. 除了换行符以外的任意单个字符</span>
<span class="token namespace">[root@egon ~]</span><span class="token comment"># grep 'r..t' /etc/passwd</span>
root:x:0:0:root:<span class="token operator">/</span>root:<span class="token operator">/</span>bin<span class="token operator">/</span>bash
operator:x:11:0:operator:<span class="token operator">/</span>root:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
ftp:x:14:50:FTP User:<span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>ftp:<span class="token operator">/</span>sbin<span class="token operator">/</span>nologin
<span class="token comment">####4*代表前导字符的零个或多个</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># cat b.txt </span>
a
ab
abb
abbbbbbbbba
abbbbabbbb
bbbbbbbbbbbbbbbbbbb
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'ab*' b.txt</span>
a
ab
abb
abbbbbbbbba
abbbbabbbb


<span class="token comment">###.*代表贪婪</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># cat d.txt </span>
ab
a1b
a<span class="token operator">-</span>b
1111111111axxx$^31b123123b
b123123123
b12312ab231212
b123123b2132113a
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a.*b' d.txt</span>
ab
a1b
a<span class="token operator">-</span>b
1111111111axxx$^31b123123b
b12312ab231212

<span class="token comment"># 5.1 .*?=》非贪婪，默认情况下，grep不支持非贪婪修饰符，但您可以使用grep -P来使用Perl语法来支持.*?</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># cat f.txt</span>
&lt;a href=<span class="token string">"http://www.baidu.com"</span>&gt;<span class="token string">"我他妈的是百度"</span>&lt;<span class="token operator">/</span>a&gt;
&lt;a href=<span class="token string">"http://www.sina.com.cn"</span>&gt;<span class="token string">"我特么的是新浪"</span>&lt;<span class="token operator">/</span>a&gt;
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'href=".*"' f.txt</span>
&lt;a href=<span class="token string">"http://www.baidu.com"</span>&gt;<span class="token string">"我他妈的是百度"</span>&lt;<span class="token operator">/</span>a&gt;
&lt;a href=<span class="token string">"http://www.sina.com.cn"</span>&gt;<span class="token string">"我特么的是新浪"</span>&lt;<span class="token operator">/</span>a&gt;
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -P 'href=".*?"' f.txt</span>
&lt;a href=<span class="token string">"http://www.baidu.com"</span>&gt;<span class="token string">"我他妈的是百度"</span>&lt;<span class="token operator">/</span>a&gt;
&lt;a href=<span class="token string">"http://www.sina.com.cn"</span>&gt;<span class="token string">"我特么的是新浪"</span>&lt;<span class="token operator">/</span>a&gt;
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -oP 'href=".*?"' f.txt</span>
href=<span class="token string">"http://www.baidu.com"</span>
href=<span class="token string">"http://www.sina.com.cn"</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep -oP 'href=".*?"' f.txt |cut -d= -f2</span>
<span class="token string">"http://www.baidu.com"</span>
<span class="token string">"http://www.sina.com.cn"</span>

<span class="token comment">##### 6、[] 字符组内的任一字符</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># cat d.txt</span>
ab
a1b
a<span class="token operator">-</span>b
a3b
a4b
a55544b
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[123]b*' d.txt</span>
a1b
a3b

<span class="token namespace">[root@localhost ~]</span><span class="token comment"># cat d.txt</span>
ab
a1b
a<span class="token operator">-</span>b
a3b
a4b
a55544b
axb
a<span class="token operator">*</span>b
a<span class="token operator">-</span>b
a<span class="token operator">/</span>b
a<span class="token operator">+</span>b
a34b
aABb
accb
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[123]b' d.txt</span>
a1b
a3b
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[a-z]b' d.txt</span>
axb
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[A-Z]b' d.txt</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[A-Z][A-Z]b' d.txt</span>
aABb
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[0-9]b' d.txt</span>
a1b
a3b
a4b
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[^0-9]b' d.txt</span>
a<span class="token operator">-</span>b
axb
a<span class="token operator">*</span>b
a<span class="token operator">-</span>b
a<span class="token operator">/</span>b
a<span class="token operator">+</span>b
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[-+*/]b' d.txt</span>
a<span class="token operator">-</span>b
a<span class="token operator">*</span>b
a<span class="token operator">-</span>b
a<span class="token operator">/</span>b
a<span class="token operator">+</span>b
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[^-+*/]b' d.txt</span>
a1b
a3b
a4b
axb
<span class="token comment"># 7、[^] 对字符组内的每个字符取反(不匹配字符组内的每个字符)</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep '^a[^-+*/]b' d.txt</span>
a1b
a3b
a4b
axb
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep '^a[-+*/]b' d.txt</span>
a<span class="token operator">-</span>b
a<span class="token operator">*</span>b
a<span class="token operator">-</span>b
a<span class="token operator">/</span>b
a<span class="token operator">+</span>b
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep 'a[0-9][0-9]' d.txt</span>
a55544b
a34b

<span class="token comment"># 9、[a-z] 小写字母</span>
<span class="token comment"># 10、[A-Z] 大写字母</span>
<span class="token comment"># 11、[a-Z] 小写和大写字母</span>
<span class="token comment"># 12、[0-9] 数字</span>
<span class="token comment"># 13、\&lt; 单词头 单词一般以空格或特殊字符做分隔,连续的字符串被当做单词</span>
<span class="token comment"># 14、\&gt; 单词尾</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># netstat -an |grep "22"</span>
tcp        0      0 0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:22              0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:<span class="token operator">*</span>               LISTEN     
tcp        0     36 10<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>100:22           10<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:50103          ESTABLISHED
tcp6       0      0 :::22                   :::<span class="token operator">*</span>                    LISTEN     
unix  3      <span class="token punctuation">[</span> <span class="token punctuation">]</span>         STREAM     CONNECTED     22555    <span class="token operator">/</span>run<span class="token operator">/</span>dbus<span class="token operator">/</span>system_bus_socket
unix  3      <span class="token punctuation">[</span> <span class="token punctuation">]</span>         STREAM     CONNECTED     24722    
unix  3      <span class="token punctuation">[</span> <span class="token punctuation">]</span>         STREAM     CONNECTED     22554    
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># netstat -an |grep -w "22"</span>
tcp        0      0 0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:22              0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:<span class="token operator">*</span>               LISTEN     
tcp        0     36 10<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>100:22           10<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:50103          ESTABLISHED
tcp6       0      0 :::22                   :::<span class="token operator">*</span>                    LISTEN     
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># netstat -an |grep "\&lt;22\&gt;"</span>
tcp        0      0 0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:22              0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:<span class="token operator">*</span>               LISTEN     
tcp        0     36 10<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>100:22           10<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:50103          ESTABLISHED
tcp6       0      0 :::22                   :::<span class="token operator">*</span>                    LISTEN     

<span class="token comment">####+代表左边的字符出现1或者无穷次</span>

</code></pre> 
<h5><a id="Ps_grep_362"></a>Ps: grep匹配换行符和制表符</h5> 
<h6><a id="grep_Pz_egton_7txt___TAB_363"></a>grep -Pz ‘eg\ton’ 7.txt TAB键</h6> 
<h6><a id="grep_Pz_egnon_7txt____364"></a>grep -Pz ‘eg\non’ 7.txt 换行</h6> 
<h6><a id="P_z_365"></a>P代表正则 z代表多行处理</h6> 
<p><img src="https://images2.imgbox.com/06/e6/c7IYBnNX_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="322__369"></a>3.2.2 扩展正则元字符集</h5> 
<pre><code># 扩展正则元字符
+					匹配一个或多个前导字符		   [a-z]+ove	
?					匹配零个或一个前导字符		   lo?ve	
a|b					匹配a或b					love|hate
()					组字符						love(able|rs)  (egon)+
(..)(..)\1\2		标签匹配字符				  (love)able\1er
x{n}			    x出现n次				    e{3}		
x{n,}			    x出现n次至无穷次			  e{3,}
x{n,m}		        x出现n次至m次			   e{3,6}

# 若想使用扩展正则
grep加-E 或 egrep 或转义\

sed 加 -r 参数 或转义

AWK 直接支持大多数扩展正则，更多支持需要加选项--posix选项
</code></pre> 
<h6><a id="_390"></a>示例</h6> 
<pre><code class="prism language-powershell"><span class="token comment">#####（）的用法  egrep</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># cat g.txt</span>

2221loverablelove32435
11111
2222egon
3321egonegonegonegon3211
egonegonegonegon2222
egon333322egon432
35234egonegongegonegonvcxz13332
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># grep '^[0-9]+(egon)+[0-9]+$' g.txt</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># egrep '^[0-9]+(egon)+[0-9]+$' g.txt</span>
3321egonegonegonegon3211


<span class="token comment">####可以取分组的意思</span>
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># cat g.txt</span>

2221loveablelover32435
11111
2222egon
3321egonegonegonegon3211
egonegonegonegon2222
egon333322egon432
35234egonegongegonegonvcxz13332
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># egrep 'loveablelover' g.txt</span>
2221loveablelover32435
<span class="token namespace">[root@localhost ~]</span><span class="token comment"># egrep '(love)able\1r' g.txt</span>
2221loveablelover32435
</code></pre> 
<h6><a id="egrep_ab_4txt__ab1_423"></a>egrep ‘ab+’ 4.txt 代表从a开始b出现1次后者无穷次</h6> 
<h6><a id="egrep_ab_4txt__ab0_424"></a>egrep ‘ab*’ 4.txt 代表从a开始b出现0次后者无穷次</h6> 
<h6><a id="egrep_ab_4txt__ab01_425"></a>egrep ‘ab?’ 4.txt 代表从a开始b出现0次后者1次</h6> 
<p><img src="https://images2.imgbox.com/ca/7e/dJyI0cg0_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="0_____427"></a>{0,} ===== *</h6> 
<h6><a id="1____428"></a>{1,} ===== +</h6> 
<h6><a id="01__429"></a>{0,1}===== ?</h6> 
<p><img src="https://images2.imgbox.com/b3/82/RSbnNgb0_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="ab%09ab_431"></a>a|b -----匹配a或b</h5> 
<h6><a id="_432"></a>示例</h6> 
<p><img src="https://images2.imgbox.com/dd/ae/JQIcXSMn_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_434"></a>示例</h6> 
<p><img src="https://images2.imgbox.com/b6/9c/goaHfxGm_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7966125e45a17df63bca8272adb436d3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql 添加rownum,给mysql加下 rownum _转</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4190ccc76751b670708f9e9313418800/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">element的可展开表格点击行数据的时候获取父级数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>