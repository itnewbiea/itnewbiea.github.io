<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【华为云-玩转云耀云服务器HECS】使用HECS搭建WordPress博客平台 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【华为云-玩转云耀云服务器HECS】使用HECS搭建WordPress博客平台" />
<meta property="og:description" content="华为云-云耀云服务器（Hyper Elastic Cloud Server，HECS）是可以快速搭建简单应用的新一代云服务器，具备独立、完整的操作系统和网络功能，适用于网站搭建、开发环境等低负载应用场景。本文讲解如何使用HECS搭建WordPress博客平台。
文章目录 一、购买云服务1. 购买HECS2. 产品试用 二、项目实战概况三、搭建LNMP应用运行环境1. 安装Nginx1.1 配置yum源1.2 启动并进行测试 2. 安装MySQL2.1 下载并安装2.2 启动并设置密码 3. 安装PHP3.1 添加源并安装3.2 启动php-fpm服务 4. 启用PHP支持4.1 编辑配置文件4.2 测试LNMP的PHP支持 5. 数据库设置 四、安装并配置WordPress1. 下载并上传软件包1.1 下载英文版本并上传1.2 下载中文版本并上传 2. 解压软件包3. 移动目录并设置权限4. 配置WordPress配置文件4.1 复制模板文件4.2 编辑WordPress的配置文件 5. 安装WordPress6. 登录管理后台7. 查看主页8. 插件安装 五、总结 一、购买云服务 WordPress 博客平台需要部署到服务器上，所以需要购买一台ECS，再将服务部署上去。例如我们可以去主页购买HECS或者去领取产品试用名额来进行搭建。
1. 购买HECS 在华为云官网 按照产品→计算→云耀云服务器 HECS 路径，即可进入云耀云服务器 HECS主页面。
点击立即购买按钮 ，进入选购 HECS 详细配置页面。
之后就可以根据具体需求进行选择购买。
具体指引和操作可参考官方产品文档：https://support.huaweicloud.com/hecs/index.html
2. 产品试用 这段时间在官方开发者试用专区就有HECS的产品试用，感兴趣的小伙伴也可以到产品试用专区进行体验。具体操作如下：
①点击此处进入页面后点击“前往开发者试用专区”。
②点击热门推荐，选择HECS免费试用。不过由于产品试用火爆，需要尽快领取，若错过时间，需要到下一天的9:30后进行领取，领完即止。
③进行产品体验后即可体验产品的试用。
二、项目实战概况 项目名称：WordPress
官网地址：https://wordpress.org
项目简介：WordPress是一款个人博客系统，也可以把 WordPress当作一个内容管理系统（CMS）来使用，它是使用PHP语言和MySQL数据库 开发的，用户可以在支持PHP和MySQL数据库的服务器上使用自己的博客。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c7d436d9b2c5a5eb7cf7d2c98c8351ff/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-16T09:47:31+08:00" />
<meta property="article:modified_time" content="2023-03-16T09:47:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【华为云-玩转云耀云服务器HECS】使用HECS搭建WordPress博客平台</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>华为云-云耀云服务器（Hyper Elastic Cloud Server，HECS）是可以快速搭建简单应用的新一代云服务器，具备独立、完整的操作系统和网络功能，适用于网站搭建、开发环境等低负载应用场景。本文讲解如何使用HECS搭建WordPress博客平台。</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_6" rel="nofollow">一、购买云服务</a></li><li><ul><li><a href="#1_HECS_12" rel="nofollow">1. 购买HECS</a></li><li><a href="#2__36" rel="nofollow">2. 产品试用</a></li></ul> 
   </li><li><a href="#_54" rel="nofollow">二、项目实战概况</a></li><li><a href="#LNMP_72" rel="nofollow">三、搭建LNMP应用运行环境</a></li><li><ul><li><a href="#1_Nginx_90" rel="nofollow">1. 安装Nginx</a></li><li><ul><li><a href="#11_yum_92" rel="nofollow">1.1 配置yum源</a></li><li><a href="#12__152" rel="nofollow">1.2 启动并进行测试</a></li></ul> 
    </li><li><a href="#2_MySQL_168" rel="nofollow">2. 安装MySQL</a></li><li><ul><li><a href="#21__170" rel="nofollow">2.1 下载并安装</a></li><li><a href="#22__220" rel="nofollow">2.2 启动并设置密码</a></li></ul> 
    </li><li><a href="#3_PHP_261" rel="nofollow">3. 安装PHP</a></li><li><ul><li><a href="#31__263" rel="nofollow">3.1 添加源并安装</a></li><li><a href="#32_phpfpm_299" rel="nofollow">3.2 启动php-fpm服务</a></li></ul> 
    </li><li><a href="#4_PHP_320" rel="nofollow">4. 启用PHP支持</a></li><li><ul><li><a href="#41__322" rel="nofollow">4.1 编辑配置文件</a></li><li><a href="#42_LNMPPHP_357" rel="nofollow">4.2 测试LNMP的PHP支持</a></li></ul> 
    </li><li><a href="#5__378" rel="nofollow">5. 数据库设置</a></li></ul> 
   </li><li><a href="#WordPress_419" rel="nofollow">四、安装并配置WordPress</a></li><li><ul><li><a href="#1__421" rel="nofollow">1. 下载并上传软件包</a></li><li><ul><li><a href="#11__423" rel="nofollow">1.1 下载英文版本并上传</a></li><li><a href="#12__440" rel="nofollow">1.2 下载中文版本并上传</a></li></ul> 
    </li><li><a href="#2__458" rel="nofollow">2. 解压软件包</a></li><li><a href="#3__469" rel="nofollow">3. 移动目录并设置权限</a></li><li><a href="#4_WordPress_497" rel="nofollow">4. 配置WordPress配置文件</a></li><li><ul><li><a href="#41__499" rel="nofollow">4.1 复制模板文件</a></li><li><a href="#42_WordPress_508" rel="nofollow">4.2 编辑WordPress的配置文件</a></li></ul> 
    </li><li><a href="#5_WordPress_564" rel="nofollow">5. 安装WordPress</a></li><li><a href="#6__583" rel="nofollow">6. 登录管理后台</a></li><li><a href="#7__597" rel="nofollow">7. 查看主页</a></li><li><a href="#8__609" rel="nofollow">8. 插件安装</a></li></ul> 
   </li><li><a href="#_627" rel="nofollow">五、总结</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h3><a id="_6"></a>一、购买云服务</h3> 
<p>WordPress 博客平台需要部署到服务器上，所以需要购买一台ECS，再将服务部署上去。例如我们可以去主页购买HECS或者去领取产品试用名额来进行搭建。</p> 
<hr> 
<h4><a id="1_HECS_12"></a>1. 购买HECS</h4> 
<p>在<code>华为云官网</code> 按照<code>产品</code>→<code>计算</code>→<code>云耀云服务器 HECS</code> 路径，即可进入<code>云耀云服务器 HECS</code>主页面。</p> 
<p><img src="https://images2.imgbox.com/bd/6e/6UQLKWh4_o.png" alt="image-20230310151453749.png"></p> 
<p>点击<code>立即购买</code>按钮 ，进入选购 HECS 详细配置页面。</p> 
<p><img src="https://images2.imgbox.com/86/88/utI40aOq_o.png" alt="image-20230310152555376.png"></p> 
<p>之后就可以根据具体需求进行选择购买。</p> 
<p><img src="https://images2.imgbox.com/f9/cb/yd2ihZ0F_o.png" alt="image-20230310153138105.png"></p> 
<p>具体指引和操作可参考官方产品文档：<a href="https://support.huaweicloud.com/hecs/index.html" rel="nofollow">https://support.huaweicloud.com/hecs/index.html</a></p> 
<p><img src="https://images2.imgbox.com/9d/df/b3t8hjo7_o.png" alt="image-20230310153347884.png"></p> 
<hr> 
<h4><a id="2__36"></a>2. 产品试用</h4> 
<p>这段时间在官方开发者试用专区就有HECS的产品试用，感兴趣的小伙伴也可以到产品试用专区进行体验。具体操作如下：</p> 
<p>①<a href="https://activity.huaweicloud.com/free_test/index.html" rel="nofollow">点击此处</a>进入页面后点击“前往开发者试用专区”。</p> 
<p><img src="https://images2.imgbox.com/eb/88/0dmrLDxm_o.png" alt="image-20230310152014383.png"></p> 
<p>②点击热门推荐，选择HECS免费试用。不过由于产品试用火爆，需要尽快领取，若错过时间，需要到下一天的9:30后进行领取，领完即止。</p> 
<p><img src="https://images2.imgbox.com/f7/91/l7orTodh_o.png" alt="image-20230310151927162.png"></p> 
<p>③进行产品体验后即可体验产品的试用。</p> 
<hr> 
<h3><a id="_54"></a>二、项目实战概况</h3> 
<p>项目名称：WordPress</p> 
<p>官网地址：<a href="https://wordpress.org" rel="nofollow">https://wordpress.org</a></p> 
<p>项目简介：WordPress是一款个人博客系统，也可以把 WordPress当作一个内容管理系统（CMS）来使用，它是使用PHP语言和MySQL数据库 开发的，用户可以在支持PHP和MySQL数据库的服务器上使用自己的博客。</p> 
<p>开发语言：PHP</p> 
<p>应用运行环境：CentOS、Nginx、PHP、MySQL</p> 
<p>涉及云服务：<strong>云耀云服务器HECS</strong></p> 
<p>金鱼哥在去年双十一活动时已经购买了HECS云耀云服务器，因此本文直接在此前购买的HECS上进行实战。</p> 
<hr> 
<h3><a id="LNMP_72"></a>三、搭建LNMP应用运行环境</h3> 
<p>WordPress博客系统需要PHP7.4和MySQL 5.7或者MariaDB 10.3以上的版本来进行运行， 因此本次操作实战决定采用经典架构环境LNMP，L代表Linux，N代表Nginx，M代表MySQL或者MariaDB，P代表PHP。</p> 
<p><img src="https://images2.imgbox.com/a8/52/pDq1YCNo_o.png" alt="image-20221129153616663.png"></p> 
<p>从官方建议网页中可知，虽然还是可以安装低一点版本的PHP和数据库版本，但官方提示担心各种漏洞而受到威胁，因此肯定按着官方建议，安装所要求的版本。</p> 
<p><img src="https://images2.imgbox.com/65/ff/JwAtTIlk_o.png" alt="image-20221129220645536.png"></p> 
<p>WordPress搭建好后，可通过EIP进行访问，整体的应用拓扑如下图所示：</p> 
<p><img src="https://images2.imgbox.com/0f/fc/dDCl2XtP_o.png" alt="appBazaar"></p> 
<hr> 
<h4><a id="1_Nginx_90"></a>1. 安装Nginx</h4> 
<h5><a id="11_yum_92"></a>1.1 配置yum源</h5> 
<p>没有特别需求的情况下，可使用yum进行安装，但由于EPEL源（ECS默认配置好）中的版本是1.20，如果想安装更多历史版本或者最新版本，就需要添加nginx的官方源，官网源配置可参考官网地址：<a href="https://nginx.org/en/linux_packages.html" rel="nofollow">https://nginx.org/en/linux_packages.html</a>。</p> 
<p><img src="https://images2.imgbox.com/6d/46/aX4vYMJ1_o.png" alt="image-20221129170509715.png"></p> 
<pre><code class="prism language-shell"><span class="token comment"># 参考官网进行源文件编辑。</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/yum.repos.d/nginx.repo</span>
<span class="token punctuation">[</span>nginx-stable<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>nginx stable repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://nginx.org/packages/centos/<span class="token variable">$releasever</span>/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://nginx.org/keys/nginx_signing.key
<span class="token assign-left variable">module_hotfixes</span><span class="token operator">=</span>true

<span class="token punctuation">[</span>nginx-mainline<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>nginx mainline repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://nginx.org/packages/mainline/centos/<span class="token variable">$releasever</span>/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://nginx.org/keys/nginx_signing.key
<span class="token assign-left variable">module_hotfixes</span><span class="token operator">=</span>true

<span class="token comment"># 查看配置好的yum源情况。</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># yum repolist </span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
repo <span class="token function">id</span>                    repo name                                            status
base/7/x86_64              CentOS-7 - Base                                      <span class="token number">10,072</span>
epel/x86_64                Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - x86_64       <span class="token number">13,746</span>
extras/7/x86_64            CentOS-7 - Extras                                       <span class="token number">515</span>
nginx-stable/7/x86_64      nginx stable repo                                       <span class="token number">298</span>
updates/7/x86_64           CentOS-7 - Updates                                    <span class="token number">4,385</span>
repolist: <span class="token number">29,016</span>
</code></pre> 
<p>可使用命令 <code>yum --showduplicates list nginx</code>查看源中nginx的版本。</p> 
<p><img src="https://images2.imgbox.com/d1/2e/J3Ccy36e_o.png" alt="image-20230310173409668.png"></p> 
<p>执行一下命令进行安装：</p> 
<pre><code class="prism language-shell">yum -y <span class="token function">install</span> nginx
</code></pre> 
<p><img src="https://images2.imgbox.com/7a/c0/xfQIbhvs_o.png" alt="image-20230310173517068.png"></p> 
<p>出现<code>Complete</code>表示 Nginx 安装完成。</p> 
<p><img src="https://images2.imgbox.com/8e/50/hfCs10V9_o.png" alt="image-20230310173549915.png"></p> 
<hr> 
<h5><a id="12__152"></a>1.2 启动并进行测试</h5> 
<p>使用以下命令进行启动并设置开机自启动：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># systemctl start nginx</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable nginx</span>
</code></pre> 
<p>可使用浏览器访问<code>http://弹性IP地址</code>，若Nginx 安装成功，则会显示如下页面：</p> 
<p><img src="https://images2.imgbox.com/6f/20/S43Ekwdj_o.png" alt="image-20221129174245729.png"></p> 
<hr> 
<h4><a id="2_MySQL_168"></a>2. 安装MySQL</h4> 
<h5><a id="21__170"></a>2.1 下载并安装</h5> 
<p>安装方式可以添加官方安装源，然后直接安装 <code>mysql-community-server</code>，金鱼哥这里用另外一种安装方式，因为用官方安装源需要访问国外的网站来进行下载，速度通常都很慢，很感人，因此可以使用国内镜像源来进行下载安装。例如直接去华为云的MySQL镜像源进行下载，MySQL5.7版本的地址为：<a href="https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/" rel="nofollow">https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/</a></p> 
<p><img src="https://images2.imgbox.com/ab/ff/lKjwxitj_o.png" alt="image-20221129205426812.png"></p> 
<p>因此可以在HECS上直接wget所需要的包，源里最新版本为5.7.38，那此次部署就安装此版本。分别下载以下软件包：</p> 
<pre><code class="prism language-shell"><span class="token function">wget</span> https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/mysql-community-common-5.7.38-1.el7.x86_64.rpm
<span class="token function">wget</span> https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/mysql-community-libs-5.7.38-1.el7.x86_64.rpm
<span class="token function">wget</span> https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/mysql-community-libs-compat-5.7.38-1.el7.x86_64.rpm
<span class="token function">wget</span> https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/mysql-community-client-5.7.38-1.el7.x86_64.rpm
<span class="token function">wget</span> https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/mysql-community-server-5.7.38-1.el7.x86_64.rpm
</code></pre> 
<p><img src="https://images2.imgbox.com/92/ee/P0WE2vg5_o.png" alt="image-20230310175339365.png"></p> 
<p>在安装前，先查找是否安装过相关的mysql和mariadb的包，有的话进行卸载，以免造成冲突。</p> 
<p><img src="https://images2.imgbox.com/a7/19/PjNXdplL_o.png" alt="image-20230310175421971.png"></p> 
<p>之后按着以下顺序进行安装：</p> 
<pre><code class="prism language-shell"><span class="token function">rpm</span> -ivh mysql-community-common-5.7.38-1.el7.x86_64.rpm
<span class="token function">rpm</span> -ivh mysql-community-libs-5.7.38-1.el7.x86_64.rpm 
<span class="token function">rpm</span> -ivh mysql-community-libs-compat-5.7.38-1.el7.x86_64.rpm 
<span class="token function">rpm</span> -ivh mysql-community-client-5.7.38-1.el7.x86_64.rpm 
<span class="token function">rpm</span> -ivh mysql-community-server-5.7.38-1.el7.x86_64.rpm
</code></pre> 
<p><img src="https://images2.imgbox.com/25/1c/1bfOAoWA_o.png" alt="image-20230310175711435.png"></p> 
<p>期间若出现库的依赖提示，则需要把对应的库安装上，再进行安装。</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># yum -y install libaio</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># rpm -ivh mysql-community-server-5.7.38-1.el7.x86_64.rpm</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/35/bf/Mg34FEfC_o.png" alt="image-20230310183458965.png"></p> 
<hr> 
<h5><a id="22__220"></a>2.2 启动并设置密码</h5> 
<pre><code class="prism language-shell"><span class="token comment"># 启动mysql会生成临时密码（注意，别一上来就使用enable，因为很多时候会出现错误导致启动不了）。</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># systemctl start mysqld </span>

<span class="token comment"># 第一次可通过 grep "password" /var/log/mysqld.log 命令获取MySQL的临时密码。</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># grep "password" /var/log/mysqld.log</span>
<span class="token number">2023</span>-03-10T10:37:03.980267Z <span class="token number">1</span> <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> A temporary password is generated <span class="token keyword">for</span> root@localhost: dilL<span class="token operator">&lt;</span>AVtC6g8
</code></pre> 
<p><img src="https://images2.imgbox.com/e9/e4/GJkSxEcJ_o.png" alt="image-20230310183732147.png"></p> 
<p>用该密码登录到服务端后，必须马上修改密码，不然操作查询时会报错误。</p> 
<p>刚开始设置的密码必须符合长度，且必须含有数字，小写或大写字母，特殊字符。</p> 
<pre><code class="prism language-mariadb">[root@goldfish ~]# mysql -uroot -p'dilL&lt;AVtC6g8'

mysql&gt; set global validate_password_policy=0;
mysql&gt; set global validate_password_length=1;
mysql&gt; set password for 'root'@'localhost'=password('huawei@123');
mysql&gt; flush privileges;
mysql&gt; quit
</code></pre> 
<p>![image-20230310184730239.png](https://img-blog.csdnimg.cn/img_convert/9413f2ef9e9e83d6a3414b503a2ecef0.png</p> 
<p>设置开机自启动。</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable mysqld</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/04/ad/MWspvCYX_o.png" alt="image-20230310184859227.png"></p> 
<hr> 
<h4><a id="3_PHP_261"></a>3. 安装PHP</h4> 
<h5><a id="31__263"></a>3.1 添加源并安装</h5> 
<p>因没特别的需求，所以此处不使用源码编译安装的方式，而使用yum来进行安装。<br> 而系统所带的源没有PHP高版本，因此需要其他可信源来进行安装，例如使用remi源。</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># yum -y install http://rpms.remirepo.net/enterprise/remi-release-7.rpm</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># yum repolist</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1c/df/aJO8kcRh_o.png" alt="image-20230310185303313.png"></p> 
<p>可使用命令<code>yum --showduplicate --enablerepo=remi --enablerepo=remi-php74 list php</code>来查看源中包含PHP各版本相关的软件包。</p> 
<p><img src="https://images2.imgbox.com/1f/ad/qZKyT0aS_o.png" alt="image-20230310190219481.png"></p> 
<p>执行以下命令安装 PHP7.4 和一些所需的 PHP 扩展：</p> 
<pre><code class="prism language-shell">yum -y <span class="token function">install</span> --enablerepo<span class="token operator">=</span>remi --enablerepo<span class="token operator">=</span>remi-php74 php php-tidy php-common php-devel php-pdo php-mysql* php-gd php-ldap php-mbstring php-mcrypt php-fpm
</code></pre> 
<p><img src="https://images2.imgbox.com/1b/82/ckPGiOQN_o.png" alt="image-20230310190410350.png"></p> 
<p><strong>注意</strong>：可能会出现由于网络超时而导致中途未能安装的包，等执行完之后，再执行多一次安装命令即可安装上。</p> 
<p>安装完成后，若再次执行命令会出现如下的提示：</p> 
<p><img src="https://images2.imgbox.com/d5/d5/gy5gFiGN_o.png" alt="image-20230310190650745.png"></p> 
<hr> 
<h5><a id="32_phpfpm_299"></a>3.2 启动php-fpm服务</h5> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># php -v</span>
PHP <span class="token number">7.4</span>.33 <span class="token punctuation">(</span>cli<span class="token punctuation">)</span> <span class="token punctuation">(</span>built: Feb <span class="token number">14</span> <span class="token number">2023</span> 09:31:03<span class="token punctuation">)</span> <span class="token punctuation">(</span> NTS <span class="token punctuation">)</span>
Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> The PHP Group
Zend Engine v3.4.0, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> Zend Technologies
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># </span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># systemctl start php-fpm</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable php-fpm</span>
Created symlink from /etc/systemd/system/multi-user.target.wants/php-fpm.service to /usr/lib/systemd/system/php-fpm.service.
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># </span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># netstat -lntup | grep 9000</span>
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">127.0</span>.0.1:9000          <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">18871</span>/php-fpm: mast
</code></pre> 
<p><img src="https://images2.imgbox.com/21/1f/YchfQg0T_o.png" alt="image-20230310190835206.png"></p> 
<hr> 
<h4><a id="4_PHP_320"></a>4. 启用PHP支持</h4> 
<h5><a id="41__322"></a>4.1 编辑配置文件</h5> 
<p>修改nginx配置文件，配置启用PHP支持。如果担心修改配置文件出错，可备份一下默认的配置文件。</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># cp -a /etc/nginx/conf.d/default.conf /etc/nginx/conf.d/default.conf.bak</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/nginx/conf.d/default.conf </span>
server <span class="token punctuation">{<!-- --></span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    server_name  localhost<span class="token punctuation">;</span>

    <span class="token comment">#access_log  /var/log/nginx/host.access.log  main;</span>

    location / <span class="token punctuation">{<!-- --></span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>
        index  index.html index.htm index.php<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
    location <span class="token operator">=</span> /50x.html <span class="token punctuation">{<!-- --></span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    location ~ <span class="token punctuation">\</span>.php$ <span class="token punctuation">{<!-- --></span>
        root           html<span class="token punctuation">;</span>
        fastcgi_pass   <span class="token number">127.0</span>.0.1:9000<span class="token punctuation">;</span>
        fastcgi_index  index.php<span class="token punctuation">;</span>
        fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/html<span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
        include        fastcgi_params<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h5><a id="42_LNMPPHP_357"></a>4.2 测试LNMP的PHP支持</h5> 
<p>编辑PHP测试页面。</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># echo "&lt;?php phpinfo(); ?&gt;" &gt; /usr/share/nginx/html/index.php</span>
</code></pre> 
<p>编辑了页面后，需要重载服务。</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># systemctl reload nginx</span>
</code></pre> 
<p>使用浏览器访问<code>弹性IP地址/index.php</code>，显示如下图页面，说明PHP安装成功。</p> 
<p><img src="https://images2.imgbox.com/98/4a/koucBudW_o.png" alt="image-20230310205640956.png"></p> 
<hr> 
<h4><a id="5__378"></a>5. 数据库设置</h4> 
<p>登录数据库并创建WordPress系统所用的数据库<code>wordpress</code>和对应的用户<code>wordpressuser</code>,并使用密码<code>huawei@123</code>。</p> 
<pre><code class="prism language-mysql"># 使用此前设置的密码“huawei@123”进行登录。
[root@goldfish ~]# mysql -uroot -p
Enter password: 

mysql&gt; create database wordpress;
mysql&gt; grant all privileges on wordpress.* to wordpressuser@'localhost' identified by 'huawei@123' with grant option;
mysql&gt; flush privileges;
mysql&gt; quit
</code></pre> 
<p><img src="https://images2.imgbox.com/39/2d/MavzHnAE_o.png" alt="image-20230310210309053.png"></p> 
<p>测试所创建用户能否登录：</p> 
<pre><code class="prism language-mysql">[root@goldfish ~]# mysql -uwordpressuser -p
Enter password: 

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| wordpress          |
+--------------------+
2 rows in set (0.00 sec)
</code></pre> 
<p><img src="https://images2.imgbox.com/ef/01/RBcD8FYV_o.png" alt="image-20230310210536918.png"></p> 
<p>至此，WordPress所需要的运行环境已经搭建完毕，接下来可以进行WordPress博客系统的安装。</p> 
<hr> 
<h3><a id="WordPress_419"></a>四、安装并配置WordPress</h3> 
<h4><a id="1__421"></a>1. 下载并上传软件包</h4> 
<h5><a id="11__423"></a>1.1 下载英文版本并上传</h5> 
<p>打开WordPress官网的下载页面：<a href="https://wordpress.org/download/releases/" rel="nofollow">https://wordpress.org/download/releases/</a> ，下载 tag.gz 格式的<br> 软件包至本地。</p> 
<p><img src="https://images2.imgbox.com/3b/03/ISfcojhA_o.png" alt="image-20221129150128842.png"></p> 
<p>将下载的WordPress软件包从本地上传至 HECS 中，若有小伙伴不知道如何操作，可参考以下文章：<a href="https://support.huaweicloud.com/ecs_faq/zh-cn_topic_0166284971.html" rel="nofollow">本地Windows 主机使用 WinSCP 上传文件到 Linux 云服务器</a>。</p> 
<p>金鱼哥习惯使用Xftp和FileZilla来进行文件上传，其实方法有很多，使用自己最习惯的工具就好。</p> 
<p><img src="https://images2.imgbox.com/52/19/JvhTS3Ij_o.png" alt="image-20230310172619004.png"></p> 
<hr> 
<h5><a id="12__440"></a>1.2 下载中文版本并上传</h5> 
<p>对于我们的习惯，肯定想使用中文版，所以也可从官网中文网站进行下载，下载地址：<a href="https://cn.wordpress.org/download/" rel="nofollow">https://cn.wordpress.org/download/</a></p> 
<p><img src="https://images2.imgbox.com/0d/a7/9J8MLqQu_o.png" alt="image-20221130161506602.png"></p> 
<p>之后就可以直接上传到主机中，此处我们也可以使用wget命令来进行下载（现时官网路径没变，因此url可用，若变了，就需要更改为正确的地址）：</p> 
<pre><code class="prism language-shell"><span class="token function">wget</span> https://cn.wordpress.org/latest-zh_CN.tar.gz -O wordpress-6.1.1-zh_CN.tar.gz
</code></pre> 
<p><img src="https://images2.imgbox.com/f8/aa/M3Vdk2WQ_o.png" alt="image-20230310172814980.png"></p> 
<hr> 
<h4><a id="2__458"></a>2. 解压软件包</h4> 
<pre><code class="prism language-shell"><span class="token function">tar</span> -xzf wordpress-6.1.1-zh_CN.tar.gz
</code></pre> 
<p><img src="https://images2.imgbox.com/ef/30/32rYKwUG_o.png" alt="image-20230310210821429.png"></p> 
<hr> 
<h4><a id="3__469"></a>3. 移动目录并设置权限</h4> 
<p>将解压出来的项目目录移动至nginx页面目录下，并设置目录权限。</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># mv wordpress /usr/share/nginx/html/</span>
<span class="token punctuation">[</span>root@goldfish ~<span class="token punctuation">]</span><span class="token comment"># chown -R apache:apache /usr/share/nginx/html/wordpress/</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2a/bf/UijKX1Jw_o.png" alt="image-20230310210939438.png"></p> 
<p>有小伙伴可能会问，为什么是设置apache用户和组的权限呢？</p> 
<p>因为php-fpm启动的用户和组默认是apache，这个在配置文件中和运行的进程中可查出。</p> 
<p><img src="https://images2.imgbox.com/fc/8a/czNCJRR2_o.png" alt="image-20230310211023143.png"></p> 
<hr> 
<p>如果不设置对应的权限，当后面更换主题和插件会有提示：WordPress需要访问你网页服务器的权限。</p> 
<p><img src="https://images2.imgbox.com/c4/11/AxPtPzg3_o.png" alt="image-20221130220501389.png"></p> 
<hr> 
<h4><a id="4_WordPress_497"></a>4. 配置WordPress配置文件</h4> 
<h5><a id="41__499"></a>4.1 复制模板文件</h5> 
<p>进入 WordPress 项目目录，将<code>wp-config-sample.php</code>文件复制名为<code>wp-config.php</code>的文件用作配置文件，并保留示例配置文件以作备份。</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /usr/share/nginx/html/wordpress
<span class="token function">cp</span> wp-config-sample.php wp-config.php
</code></pre> 
<h5><a id="42_WordPress_508"></a>4.2 编辑WordPress的配置文件</h5> 
<p>编辑配置文件，把DB_NAME（数据库名称）、DB_USER（数据库用户名）、DB_PASSWORD（数据库密码）更改为之前所配置的设置。</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> wp-config.php
</code></pre> 
<pre><code class="prism language-php"><span class="token comment">// ** Database settings - You can get this info from your web host ** //</span>
<span class="token comment">/** The name of the database for WordPress */</span>
<span class="token function">define</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'DB_NAME'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'wordpress'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** Database username */</span>
<span class="token function">define</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'DB_USER'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'wordpressuser'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** Database password */</span>
<span class="token function">define</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'DB_PASSWORD'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'huawei@123'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** Database hostname */</span>
<span class="token function">define</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'DB_HOST'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'localhost'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** Database charset to use in creating database tables. */</span>
<span class="token function">define</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'DB_CHARSET'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'utf8'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** The database collate type. Don't change this if in doubt. */</span>
<span class="token function">define</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'DB_COLLATE'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">''</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-shell"><span class="token comment"># 可罗列配置文件的配置选项进行查看。</span>
<span class="token punctuation">[</span>root@goldfish wordpress<span class="token punctuation">]</span><span class="token comment"># grep -n "^[a-Z]" wp-config.php </span>
<span class="token number">23</span>:define<span class="token punctuation">(</span> <span class="token string">'DB_NAME'</span>, <span class="token string">'wordpress'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">26</span>:define<span class="token punctuation">(</span> <span class="token string">'DB_USER'</span>, <span class="token string">'wordpressuser'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">29</span>:define<span class="token punctuation">(</span> <span class="token string">'DB_PASSWORD'</span>, <span class="token string">'huawei@123'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">32</span>:define<span class="token punctuation">(</span> <span class="token string">'DB_HOST'</span>, <span class="token string">'localhost'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">35</span>:define<span class="token punctuation">(</span> <span class="token string">'DB_CHARSET'</span>, <span class="token string">'utf8'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">38</span>:define<span class="token punctuation">(</span> <span class="token string">'DB_COLLATE'</span>, <span class="token string">''</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">51</span>:define<span class="token punctuation">(</span> <span class="token string">'AUTH_KEY'</span>,         <span class="token string">'put your unique phrase here'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">52</span>:define<span class="token punctuation">(</span> <span class="token string">'SECURE_AUTH_KEY'</span>,  <span class="token string">'put your unique phrase here'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">53</span>:define<span class="token punctuation">(</span> <span class="token string">'LOGGED_IN_KEY'</span>,    <span class="token string">'put your unique phrase here'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">54</span>:define<span class="token punctuation">(</span> <span class="token string">'NONCE_KEY'</span>,        <span class="token string">'put your unique phrase here'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">55</span>:define<span class="token punctuation">(</span> <span class="token string">'AUTH_SALT'</span>,        <span class="token string">'put your unique phrase here'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">56</span>:define<span class="token punctuation">(</span> <span class="token string">'SECURE_AUTH_SALT'</span>, <span class="token string">'put your unique phrase here'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">57</span>:define<span class="token punctuation">(</span> <span class="token string">'LOGGED_IN_SALT'</span>,   <span class="token string">'put your unique phrase here'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">58</span>:define<span class="token punctuation">(</span> <span class="token string">'NONCE_SALT'</span>,       <span class="token string">'put your unique phrase here'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">82</span>:define<span class="token punctuation">(</span> <span class="token string">'WP_DEBUG'</span>, <span class="token boolean">false</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">91</span>:if <span class="token punctuation">(</span> <span class="token operator">!</span> defined<span class="token punctuation">(</span> <span class="token string">'ABSPATH'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token number">96</span>:require_once ABSPATH <span class="token builtin class-name">.</span> <span class="token string">'wp-settings.php'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/68/c9/g4nM51hM_o.png" alt="image-20230310231902283.png"></p> 
<hr> 
<h4><a id="5_WordPress_564"></a>5. 安装WordPress</h4> 
<p>在浏览器地址栏输入<code>http://弹性IP地址/wordpress</code> 即可跳转至安装页面：</p> 
<p><img src="https://images2.imgbox.com/74/b9/qqU103Zn_o.png" alt="image-20221130222052788.png"></p> 
<p>填写对应的表单信息后，即可点击<code>安装WordPress</code>。</p> 
<p><img src="https://images2.imgbox.com/26/06/CaBVa1dJ_o.png" alt="image-20221130222910749.png"></p> 
<p>若WordPress安装完成，会如下图所示：</p> 
<p><img src="https://images2.imgbox.com/90/c3/cvucQkDc_o.png" alt="image-20221130223013574.png"></p> 
<hr> 
<h4><a id="6__583"></a>6. 登录管理后台</h4> 
<p>在完成安装界面输入密码选择<code>登录</code>，或者在浏览器输入<code>http://弹性IP地址/wordpress/wp-admin</code>进入后台登录界面并输入账号和密码即可登录管理后台。</p> 
<p><img src="https://images2.imgbox.com/b3/f5/Hnc5jwCr_o.png" alt="image-20221130223607224.png"></p> 
<p>登录管理台，可在页面见到网站<code>仪表盘</code>：</p> 
<p><img src="https://images2.imgbox.com/f0/a5/7tTmP0mP_o.png" alt="image-20221130223722239.png"></p> 
<hr> 
<h4><a id="7__597"></a>7. 查看主页</h4> 
<p>点击<code>查看站点</code>或者在浏览器输入<code>http://弹性IP地址/wordpress</code> 即可查看主页。</p> 
<p><img src="https://images2.imgbox.com/1c/0c/9fpmrWKy_o.png" alt="image-20221130224835080.png"></p> 
<p><img src="https://images2.imgbox.com/83/79/p37loNtp_o.png" alt="image-20230310215750523.png"></p> 
<hr> 
<h4><a id="8__609"></a>8. 插件安装</h4> 
<p>可以在管理界面选择想要的主题和插件，可使用在线安装的方式进行安装，也可以在线更新各种插件（PS：前提是设置好此前所说的访问权限，不然会弹出授权界面）。</p> 
<p><img src="https://images2.imgbox.com/ca/5d/hYWuPS1u_o.png" alt="image-20221130224110402.png"></p> 
<p>安装完成后，点击<code>启用</code>即可使用，并可在已安装插件中查看：</p> 
<p><img src="https://images2.imgbox.com/16/8f/HeElmSbo_o.png" alt="image-20221130224210127.png"></p> 
<hr> 
<p>至此，已完成整个WordPress项目的部署。</p> 
<hr> 
<h3><a id="_627"></a>五、总结</h3> 
<p><img src="https://images2.imgbox.com/d8/3a/468J0CVr_o.png" alt="image-20230310230152426.png"></p> 
<p>网上众多搭建WordPress的文章中有些地方不完美和不合理，例如在安装PHP版本中，webtatic源并没有7.4的版本，而WordPress6.0或以上的版本，官方已经明确建议使用PHP7.4或以上的版本，那为什么还安装低版本呢？其次，在权限设置那里，有些文章竟然使用了777的权限设置，在生产环境中，这是最忌讳的设置，怎么能随意给777的权限呢？</p> 
<p>因此，金鱼哥决定使用华为云的HECS服务器进行实战。希望金鱼哥的分享能帮助到大家，这也是金鱼哥写下这篇文章的原因之一。</p> 
<p>从这项目的部署使用中，使用了众多操作系统的基础，也安装了众多服务，还搭建了经典架构LNMP，之后还在此架构上搭建对应的应用。这些都是必须要掌握的工作技能，希望看到此文章的小伙伴都能掌握，都有所获。</p> 
<hr> 
<p>【玩转“云耀云服务器（HECS）”有奖征文来袭！惊喜大礼包激励等你来拿！】有奖征文第20期正在火热进行中：<br> <a href="https://bbs.huaweicloud.com/blogs/391930" rel="nofollow">https://bbs.huaweicloud.com/blogs/391930</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6cfee537e1bbb7880547fc14f12c4ff5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">用完代理（魔法）后忘记正常关闭，重启后浏览器无法上网的解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bbdd39d1fd300e664c5bfa0adb61b81f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot启动控制台的banner是怎么回事</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>