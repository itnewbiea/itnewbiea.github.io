<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>sqlldr批量导入数据到Oracle - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="sqlldr批量导入数据到Oracle" />
<meta property="og:description" content="1.基本命令 查看参数:$sqlldr
2.导入示例 用服务器创建导入数据的export.txt文件，示例如下：
编写MY_TEST_sqlldr_bak.ctl控制文件
OPTIONS(BINDSIZE=10485760,READSIZE=2097152,ERRORS=-1,ROWS=250000,skip=1)
LOAD DATA
CHARACTERSET AL32UTF8
APPEND INTO TABLEMY_TEST
FIELDS TERMINATED BY X&#39;7c&#39;TRAILING NULLCOLS
(
&#34;ID&#34; CHAR(11) NULLIF &#34;ID&#34;=BLANKS,
&#34;NAME&#34; CHAR(20) NULLIF &#34;NAME&#34;=BLANKS,
&#34;AGE&#34; CHAR(12) NULLIF &#34;AGE&#34;=BLANKS,
&#34;ADDRDSS&#34; CHAR(50) NULLIF &#34;ADDRDSS&#34;=BLANKS,
&#34;HIRE_DATE&#34; DATE &#34;YYYY-MM-DD HH24:MI:SS&#34; NULLIF&#34;HIRE_DATE&#34;=BLANKS
)
ctl常见的一些参数解析：
characterset ：字符集， 一般使用字符集 AL32UTF8，如果出现中文字符集乱码时，改成 ZHS16GBK。
fields terminated by &#39;string&#39;：文本列分隔符。当为tab键时，改成&#39;\t&#39;，或者 X&#39;09&#39;；空格分隔符 whitespace，换行分隔符 &#39;\n&#39; 或者 X&#39;0A&#39;；回车分隔符&#39;\r&#39; 或者 X&#39;0D&#39;；默认为&#39;\t&#39;。
optionally enclosed by &#39;char&#39;：字段包括符。当为 &#39; &#39; 时，不把字段包括在任何引号符号中；当为&#34;&#39;&#34; 时，字段包括在单引号中；当为&#39;&#34;&#39;时，字段在包括双引号中；默认不使用引用符。
fields escaped by &#39;char&#39;：转义字符，默认为&#39;\&#39;。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c373ab8d591cdfb20708b1d1192b2f6f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-12-12T11:11:11+08:00" />
<meta property="article:modified_time" content="2017-12-12T11:11:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">sqlldr批量导入数据到Oracle</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1.<strong>基本命令</strong></h2> 
<p>    <span style="font-size:18px"><strong>查看参数:$sqlldr</strong></span></p> 
<p><img src="https://images2.imgbox.com/57/c5/88oI9Lkc_o.png" alt=""></p> 
<p><br> </p> 
<h2>2.导入示例</h2> 
<p><span style="font-size:18px"><strong>  </strong>用服务器创建导入数据的export.txt文件，示例如下：</span></p> 
<p><span style="font-size:18px"><img src="https://images2.imgbox.com/f8/09/DbY8v5N1_o.png" alt=""><br> </span></p> 
<p><span style="font-size:18px">   编写<span style="font-size:18px"><span style="color:#0070C0">MY_TEST_sqlldr_bak.ctl</span></span>控制文件</span></p> 
<p></p> 
<p><span style="font-size:18px; color:#0070C0">OPTIONS(BINDSIZE=10485760,READSIZE=2097152,ERRORS=-1,ROWS=250000,skip=1)</span></p> 
<p><span style="font-size:18px; color:#0070C0">LOAD DATA</span></p> 
<p><span style="font-size:18px"><strong><span style="color:red">CHARACTERSET AL32UTF8</span></strong></span></p> 
<p><span style="font-size:18px"><strong><span style="color:red">APPEND</span></strong><span style="color:#0070C0"> INTO TABLEMY_TEST</span></span></p> 
<p><span style="font-size:18px; color:#0070C0">FIELDS TERMINATED BY X'7c'TRAILING NULLCOLS</span></p> 
<p><span style="font-size:18px; color:#0070C0">(</span></p> 
<p><span style="font-size:18px; color:#0070C0"> </span><span style="font-size:18px">"ID" CHAR(11) NULLIF "ID"=BLANKS,</span></p> 
<p><span style="font-size:18px; color:#0070C0"> </span><span style="font-size:18px">"NAME" CHAR(20) NULLIF "NAME"=BLANKS,</span></p> 
<p><span style="font-size:18px; color:#0070C0"> </span><span style="font-size:18px">"AGE" CHAR(12) NULLIF "AGE"=BLANKS,</span></p> 
<p><span style="font-size:18px; color:#0070C0"> </span><span style="font-size:18px">"ADDRDSS" CHAR(50) NULLIF "ADDRDSS"=BLANKS,</span></p> 
<p><span style="font-size:18px; color:#0070C0"> </span><span style="font-size:18px">"HIRE_DATE" DATE "YYYY-MM-DD HH24:MI:SS" NULLIF"HIRE_DATE"=BLANKS</span></p> 
<p><span style="font-size:18px; color:#0070C0">)</span></p>   
<br> 
<p><span style="font-size:18px"> <span style="color:#FF0000">ctl常见的一些参数解析：</span></span></p> 
<p></p> 
<p align="left"><span style="font-size:18px">characterset ：字符集， 一般使用字符集 AL32UTF8，如果出现中文字符集乱码时，改成 ZHS16GBK。</span></p> 
<p align="left"><span style="font-size:18px">fields terminated by 'string'：文本列分隔符。当为tab键时，改成'\t'，或者 X'09'；空格分隔符 whitespace，换行分隔符 '\n' 或者 X'0A'；回车分隔符'\r' 或者 X'0D'；默认为'\t'。</span></p> 
<p align="left"><span style="font-size:18px">optionally enclosed by 'char'：字段包括符。当为 ' ' 时，不把字段包括在任何引号符号中；当为"'" 时，字段包括在单引号中；当为'"'时，字段在包括双引号中；默认不使用引用符。</span></p> 
<p align="left"><span style="font-size:18px">fields escaped by 'char'：转义字符，默认为'\'。</span></p> 
<p align="left"><span style="font-size:18px">trailing nullcols：表字段没有对应的值时，允许为空</span></p> 
<p align="left"><span style="font-size:18px">insert：为缺省方式，在数据装载开始时要求表为空；</span></p> 
<p align="left"><span style="font-size:18px">append：在表中追加新记录 ；</span></p> 
<p align="left"><span style="font-size:18px">replace：删除旧记录，替换成新装载的记录 ；</span></p> 
<p align="left"><span style="font-size:18px">truncate：先清空表，再添加记录；</span></p> 
<p align="left"><span style="font-size:18px"><br> </span></p> 
<p align="left"><span style="font-size:18px">   执行导入命令测试（其实就是跟sqluldr2反向执行）：</span></p> 
<p align="left"><span style="font-size:18px"></span></p> 
<p><span style="color:#0070C0">   $sqlldr smart/smart@10.45.47.16/ora16 data=export.txt control=MY_TEST_sqlldr_bak.ctl</span></p> 
<p><span style="color:#0070C0"></span></p> 
<p align="left"><span style="color:#ED1C24">注意</span>：在数据导入数据库表后，查询表数据时，会发现最后一个字段的数据中含有类似空格的字符，其实不是空格，是回车换行符，通过replace函数将其替换掉即可，如下红色部分处理：</p> OPTIONS(DIRECT=TRUE,ERRORS=10000000,SKIP=1) 
<br> 
<br> LOADDATA 
<br> 
<br> CHARACTERSETZHS16GBK 
<br> 
<br> INTOTABLE TEMP_001 TRUNCATE 
<br> 
<br> FIELDSTERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' 
<br> 
<br> TRAILING NULLCOLS 
<br> 
<br> ( 
<br> 
<br>  PROD_ID  CHAR(32)  "TRIM(:PROD_ID)", 
<br> 
<br>  ACC_NUM  CHAR(20) 
<strong><span style="color:#FF0000">"REPLACE(:ACC_NUM,CHR(13),'')"</span></strong> 
<br> 
<br> ) 
<br> 
<p>添加默认值的关键字 CONSTANT使用方法示例：</p> 
<p>OPTIONS(BINDSIZE=2097152,READSIZE=2097152,ERRORS=-1,ROWS=50000)<br> LOAD DATA<br> CHARACTERSET  AL32UTF8<br> INSERT INTO TABLE TAR_GRP_IMPORT_TEMP APPEND<br> FIELDS TERMINATED BY X'7C' TRAILING NULLCOLS <br> (<br> OBJ_ID "REPLACE(:OBJ_ID,CHR(13),'')",<br> BATCH_ID <strong><span style="color:#FF0000">CONSTANT 17</span></strong><br> )<br> <br> <br> </p> 
<br> 
<p align="left"><span style="font-size:18px; color:#FF0000">sqlldr支持的数据类型，可以定义14种数据类型：</span></p> 
<p align="left"><span style="font-size:18px">CHAR<br> DATE<br> DECIMAL EXTERNAL<br> DECIMAL<br> DOUBLE<br> FLOAT<br> FLOAT EXTERNAL<br> GRAPHIC EXTERNAL<br> INTEGER<br> INTEGER EXTERNAL<br> SMALLINT<br> VARCHAR<br> VARGRAPHIC<br> a、字符类型数据<br> CHAR[ (length)] [delimiter]<br> length缺省为 1，ctl文件中char(20) 一般对应数据库表中 varchar2(20) 。<br> <br> b、日期类型数据<br> DATE [ ( length)]['date_format' [delimiter]<br> 使用to_date函数来限制<br> ctl文件中 date "yyyy-mm-dd hh24:mi:ss" 对应数据库表中 date<br> <br> c、字符格式中的十进制<br> DECIMAL EXTERNAL [(length)] [delimiter]<br> 用于常规格式的十进制数（不是二进制=&gt; 一个位等于一个bit）<br> ctl文件中 decimal external 对应 数据库表中 number<br> <br> d、压缩十进制格式数据<br> DECIMAL （digtial [,precision]）<br> ctl文件中 decimal对应 数据库表中 number<br> <br> e、双精度符点二进制<br> DOUBLE<br> <br> f、普通符点二进制<br> FLOAT<br> <br> g、字符格式符点数<br> FLOAT EXTERNAL [ (length) ] [delimiter]<br> <br> h、双字节字符串数据<br> GRAPHIC [ (legth)]<br> <br> i、双字节字符串数据<br> GRAPHIC EXTERNAL[ (legth)]<br> <br> j、常规全字二进制整数<br> INTEGER<br> ctl文件中的integer 对应数据库表中 integer<br> <br> k、字符格式整数<br> INTEGER EXTERNAL<br> <br> l、常规全字二进制数据<br> SMALLINT<br> <br> m、可变长度字符串<br> VARCHAR<br> ctl文件中varchar 对应 数据库表中 varchar2<br> n、可变双字节字符串数据<br> VARGRAPHIC<br> <br> <br> </span></p> 
<h2 align="left"><span style="font-size:18px"><span style="font-size:24px">3.导入性能测试(<span style="color:#0070C0">append</span><span style="color:#0070C0">的形式)</span></span></span></h2> 
<p>   <strong>  命令示例：</strong></p> 
<p><span style="color:#0070C0">   <span style="font-size:18px"> $sqlldrsmart/smart@10.45.47.16/ora16 data=export.txt   </span></span><span style="font-size:18px">control=MY_TEST_sqlldr_bak.ctl</span></p> 
<p><img src="https://images2.imgbox.com/f6/41/CTd9Jo9a_o.png" alt=""></p> 
<p><br> </p> 
<span style="color:#0070C0">    <span style="color:#000000"><strong>查看日志</strong></span></span> 
<strong>MY_TEST_sqlldr_bak.log，得知一千万条数据导入大要需要十分钟</strong> 
<br> 
<img src="https://images2.imgbox.com/c2/c4/I4VPf5JG_o.png" alt=""> 
<br> 
<p><br> </p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8897da3e73d6ba2fbe4c635a6504019e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在xilinx SDK中查询API函数的方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ce43e5c82ca80a35465951fb1776a3ad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AD PCB 找出未连接的线</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>