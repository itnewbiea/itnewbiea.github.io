<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序抓包-夜神模拟器结合BurpSuite抓包(可用于现在最新版本微信) - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序抓包-夜神模拟器结合BurpSuite抓包(可用于现在最新版本微信)" />
<meta property="og:description" content="警告 2023年3月23日18.37.46:很多人说网络错误,目前我再次自己试过了,都没有出现这个问题,如果害怕出现网络异常等情况,就不要看下去了 前置 之前总是通过电脑来抓包,时常失效,这里就用夜神模拟器配合Burp来抓包也可以参考这位博主的文章 Fiddler&#43;Proxifier进行PC端微信小程序抓包通过Fiddler模拟器抓包微信小程序（适用APP） 夜神模拟器安卓版本 Android7.1.2 使用到工具
burp绿色免装jdk版 百度网盘：链接：https://pan.baidu.com/s/1y7KuzSg_SKmtEP4OTRycwg?pwd=52pj 提取码：52pj夸克盘: https://pan.quark.cn/s/220e34228d8b#/list/share 参考文章
https://blog.csdn.net/qq_34498872/article/details/122469329
https://www.52pojie.cn/forum.php?mod=viewthread&amp;tid=1617968&amp;highlight=BurpSuite
https://blog.csdn.net/qq_44029310/article/details/126017134
开始教程 1.安装夜神模拟器并下载安装微信 官网下就可以
https://www.yeshen.com/ 记得安装微信
截止发这篇博客的时候,微信版本为8.0.3 安装好微信后登录自己微信
2.查看电脑ip地址并在burp当中添加 比如我的ip地址为192.168.200.65 按照图片上步骤添加自己的ip,端口设置为8888 3.夜神模拟器修改WiFi代理 输入自己电脑的ip地址和更改burp设置的端口号 4.pc,pc,pc浏览器下载证书 pc端浏览器输入证书网站192.168.200.65:8888(不同的ip不同,根据刚刚设置来决定) 5.window安装OpenSSL 5.1安装 这一步好像可以跳过,直接把转换后的per证书名称改为9a5ba575.0即可,我看另外一个人的教程计算生成出来的结果和这个一样,可能是统一的吧
下载网站
http://slproweb.com/products/Win32OpenSSL.html 单击这个EXE或者MSI,然后安装的时候一直下一步即可
5.2配置环境 安装完成后就要配置运行环境了
也可以参考这文章
https://blog.csdn.net/wuliang20/article/details/121014060 OpenSSL默认的安装路径我这里是
C:\Program Files\OpenSSL-Win64\bin 我们就新建环境变量OPENSSL_HOME值为C:\Program Files\OpenSSL-Win64\bin 注意,不要漏掉了bin 向环境变量path添加%OPENSSL_HOME% 测试安装是否成功 6.der证书转换为pem证书 1.可以用在线版本 http://web.chacuo.net/netsslcer2pem 2.也可以使用openssl来转换 openssl x509 -inform der -in cacert.der -out cacert.pem 转换效果是一样的
[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-0jA3cj8x-1679567908039)(null)]
7.查看hash表示并修改pem文件名字为 hash标识.0 查看hash标识:pem证书所在目录下运行当前命令,文件名称需要改为自己对应的文件名称,记录下9a5ba575 openssl x509 -subject_hash_old -in cacert." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a0f374e96dbe562ff7267b5f0f125238/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-23T18:40:47+08:00" />
<meta property="article:modified_time" content="2023-03-23T18:40:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序抓包-夜神模拟器结合BurpSuite抓包(可用于现在最新版本微信)</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>警告</h3> 
<ul><li>2023年3月23日18.37.46:很多人说网络错误,目前我再次自己试过了,都没有出现这个问题,如果害怕出现网络异常等情况,就不要看下去了</li></ul> 
<h3><a id="_4"></a>前置</h3> 
<ul><li>之前总是通过电脑来抓包,时常失效,这里就用夜神模拟器配合Burp来抓包</li><li>也可以参考这位博主的文章 
  <ul><li><a href="https://blog.csdn.net/qq_41340803/article/details/128302817?spm=1001.2014.3001.5501">Fiddler+Proxifier进行PC端微信小程序抓包</a></li><li><a href="https://blog.csdn.net/qq_41340803/article/details/128281876?spm=1001.2014.3001.5501">通过Fiddler模拟器抓包微信小程序（适用APP）</a></li></ul> </li><li>夜神模拟器安卓版本 
  <ul><li><code>Android7.1.2</code></li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/1b/a5/uR7ELUnr_o.png" alt=""></p> 
<ul><li> <p>使用到工具</p> 
  <ul><li>burp绿色免装jdk版 
    <ul><li>百度网盘：链接：https://pan.baidu.com/s/1y7KuzSg_SKmtEP4OTRycwg?pwd=52pj 提取码：52pj</li><li>夸克盘: https://pan.quark.cn/s/220e34228d8b#/list/share</li></ul> </li></ul> </li><li> <p>参考文章</p> </li></ul> 
<blockquote> 
 <p>https://blog.csdn.net/qq_34498872/article/details/122469329</p> 
 <p>https://www.52pojie.cn/forum.php?mod=viewthread&amp;tid=1617968&amp;highlight=BurpSuite</p> 
 <p>https://blog.csdn.net/qq_44029310/article/details/126017134</p> 
</blockquote> 
<h3><a id="_28"></a>开始教程</h3> 
<h4><a id="1_30"></a>1.安装夜神模拟器并下载安装微信</h4> 
<ul><li> <p>官网下就可以</p> 
  <ul><li>https://www.yeshen.com/</li></ul> </li><li> <p>记得安装微信</p> 
  <ul><li>截止发这篇博客的时候,微信版本为<code>8.0.3</code></li></ul> </li><li> <p>安装好微信后登录自己微信</p> </li></ul> 
<h4><a id="2ipburp_39"></a>2.查看电脑ip地址并在burp当中添加</h4> 
<ul><li>比如我的ip地址为<code>192.168.200.65</code></li></ul> 
<p><img src="https://images2.imgbox.com/fb/78/d0fozIgL_o.png" alt=""></p> 
<ul><li>按照图片上步骤添加自己的ip,端口设置为8888</li></ul> 
<p><img src="https://images2.imgbox.com/6b/86/NTeFTYQV_o.png" alt=""></p> 
<h4><a id="3WiFi_51"></a>3.夜神模拟器修改WiFi代理</h4> 
<p><img src="https://images2.imgbox.com/c6/4f/t907yyFW_o.png" alt=""></p> 
<ul><li>输入自己电脑的ip地址和更改burp设置的端口号</li></ul> 
<p><img src="https://images2.imgbox.com/da/28/C4r49Fe2_o.png" alt=""></p> 
<h4><a id="4pcpcpc_59"></a>4.pc,pc,pc浏览器下载证书</h4> 
<ul><li><strong>pc端浏览器</strong>输入证书网站<code>192.168.200.65:8888</code>(不同的ip不同,根据刚刚设置来决定)</li></ul> 
<p><img src="https://images2.imgbox.com/71/3d/HeAAR6Fk_o.png" alt=""></p> 
<h4><a id="5windowOpenSSL_65"></a>5.window安装OpenSSL</h4> 
<h5><a id="51_67"></a>5.1安装</h5> 
<ul><li> <p>这一步好像可以跳过,直接把转换后的per证书名称改为<code>9a5ba575.0</code>即可,我看另外一个人的教程计算生成出来的结果和这个一样,可能是统一的吧</p> </li><li> <p>下载网站</p> 
  <ul><li>http://slproweb.com/products/Win32OpenSSL.html</li></ul> </li><li> <p>单击这个<code>EXE</code>或者<code>MSI</code>,然后安装的时候一直下一步即可</p> </li></ul> 
<p><img src="https://images2.imgbox.com/c5/3c/0QACOWot_o.png" alt=""></p> 
<h5><a id="52_78"></a>5.2配置环境</h5> 
<ul><li> <p>安装完成后就要配置运行环境了</p> </li><li> <p>也可以参考这文章</p> 
  <ul><li>https://blog.csdn.net/wuliang20/article/details/121014060</li></ul> </li><li> <p>OpenSSL默认的安装路径我这里是</p> </li></ul> 
<pre><code>C:\Program Files\OpenSSL-Win64\bin
</code></pre> 
<ul><li>我们就新建环境变量<code>OPENSSL_HOME</code></li><li>值为<code>C:\Program Files\OpenSSL-Win64\bin</code> 
  <ul><li>注意,不要漏掉了<code>bin</code></li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/0e/6b/uh6wx3Lk_o.png" alt=""></p> 
<ul><li>向环境变量<code>path</code>添加<code>%OPENSSL_HOME%</code></li></ul> 
<p><img src="https://images2.imgbox.com/7c/20/tgEmt1tS_o.png" alt=""></p> 
<ul><li>测试安装是否成功</li></ul> 
<p><img src="https://images2.imgbox.com/47/e5/PluPnOLk_o.png" alt=""></p> 
<h4><a id="6derpem_106"></a>6.der证书转换为pem证书</h4> 
<h5><a id="1_108"></a>1.可以用在线版本</h5> 
<ul><li>http://web.chacuo.net/netsslcer2pem</li></ul> 
<h5><a id="2openssl_112"></a>2.也可以使用openssl来转换</h5> 
<pre><code class="prism language-bash">openssl x509 -inform der -in cacert.der -out cacert.pem
</code></pre> 
<p><img src="https://images2.imgbox.com/85/ab/HToOKUN4_o.png" alt=""></p> 
<p>转换效果是一样的</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-0jA3cj8x-1679567908039)(null)]</p> 
<h4><a id="7hashpem___hash0_126"></a>7.查看hash表示并修改pem文件名字为 hash标识.0</h4> 
<ul><li><strong>查看hash标识</strong>:pem证书所在目录下运行当前命令,文件名称需要改为自己对应的文件名称,记录下<code>9a5ba575</code></li></ul> 
<pre><code class="prism language-bash">openssl x509 -subject_hash_old -in cacert.pem
</code></pre> 
<p><img src="https://images2.imgbox.com/85/15/bf3LRdp6_o.png" alt=""></p> 
<ul><li>将生成的pem格式的文件的文件名称改为<code>9a5ba575.0</code></li></ul> 
<p><img src="https://images2.imgbox.com/18/b9/nZhCq88V_o.png" alt="就像这样"></p> 
<h4><a id="8_139"></a>8.打开模拟器，把开发者模式打开</h4> 
<ul><li>打开设置-关于平板电脑,找到版本号,单击五次版本号进入开发者模式</li></ul> 
<p><img src="https://images2.imgbox.com/d3/3b/DsZDUIjf_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/95/fe/7iV6WOsN_o.png" alt="进入开发者模式"></p> 
<h4><a id="9usb_147"></a>9.打开usb调试模式</h4> 
<ul><li>打开开发者模式后,然后点击返回键，回到上一级的设置界面，可以看到多出一个“开发者选项”了。</li></ul> 
<p><img src="https://images2.imgbox.com/39/88/irDroKlA_o.png" alt=""></p> 
<ul><li>点进去开启USB调试。 
  <ul><li>下图为已开启usb调试</li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/d3/01/oQqwnE7v_o.png" alt=""></p> 
<h4><a id="10_158"></a>10.移动证书</h4> 
<ul><li>打开文件资源管理器，进入夜神模拟器的安装目录，找到<code>nox_adb.exe</code>程序，或者直接everything搜索</li></ul> 
<p><img src="https://images2.imgbox.com/9c/7c/5mLmxyZf_o.png" alt=""></p> 
<ul><li>如果是雷电模拟器,可能就是这个名字了</li></ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-0wtzTYSH-1679567905750)(C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230323163034769.png)]</p> 
<ul><li>在ADB所在目录打开cmd命令行</li><li>输入<code>nox_adb.exe connect 127.0.0.1:62001</code>即可以连接到adb，或者是<code>adb connect 127.0.0.1:62001</code></li></ul> 
<p><img src="https://images2.imgbox.com/0d/11/xUZkbkN9_o.png" alt=""></p> 
<ul><li><code>nox_adb.exe connect 127.0.0.1:62001</code>后面的<code>62001</code>为模拟器的端口号,不同的模拟器端口号不同,下面是常见的模拟器ABD端口</li></ul> 
<table><thead><tr><th>模拟器</th><th>端口号</th></tr></thead><tbody><tr><td>网易MuMu模拟器</td><td>7555</td></tr><tr><td>夜神安卓模拟器</td><td>62001</td></tr><tr><td>逍遥安卓模拟器</td><td>21503</td></tr><tr><td>蓝叠安卓模拟器</td><td>5555</td></tr><tr><td>雷电安卓模拟器</td><td>5555</td></tr><tr><td>天天安卓模拟器</td><td>5037</td></tr><tr><td>安卓模拟器大师</td><td>54001</td></tr><tr><td>腾讯手游助手</td><td>5555</td></tr></tbody></table> 
<ul><li>此时直接<code> adb devices</code> 命令即可显示夜神模拟器设备信息了</li></ul> 
<p><img src="https://images2.imgbox.com/93/81/pF8Z3sZG_o.png" alt=""></p> 
<ul><li>把证书放到<code>nox_adb.exe</code>所在目录下</li></ul> 
<p><img src="https://images2.imgbox.com/91/d8/o5Ad6TEC_o.png" alt=""></p> 
<ul><li>然后依次执行以下命令，在查看系统证书就会发现成功安装。</li></ul> 
<pre><code class="prism language-bash">adb root // 提升到root权限
adb remount // 重新挂载system分区

 //将证书放到系统证书目录 注意文件名是自己的文件名
adb push 9a5ba575.0 /system/etc/security/cacerts/      

</code></pre> 
<p><img src="https://images2.imgbox.com/d7/d8/Jb0E3d8w_o.png" alt="注意把证书移动到当前目录"></p> 
<h4><a id="11_207"></a>11.完成</h4> 
<ul><li>抓包效果</li></ul> 
<p><img src="https://images2.imgbox.com/48/f8/xs8FgGP1_o.png" alt=""></p> 
<h3><a id="burp_213"></a>burp抓包结果中文乱码的问题</h3> 
<ul><li>修改下字体和编码类型即可</li></ul> 
<p><img src="https://images2.imgbox.com/f7/0c/6EtCBmIP_o.png" alt=""></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a7e71ef401a56bdddc60d35db556b54f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言--编写函数，判断一个字符串是否为回文串。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ffedfbad46abdf112e2dd4f4453e68b9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【深度学习】Diffusion模型</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>