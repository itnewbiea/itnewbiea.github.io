<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Centos最小化安装系统实现KVM图形化管理虚拟机 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Centos最小化安装系统实现KVM图形化管理虚拟机" />
<meta property="og:description" content="Centos最小化安装系统实现KVM图形化管理虚拟机 需求：初学者不会对KVM的命令行不太了解，而Centos7系统为了节省资源也是最小化安装的，那么就需要这篇文章来帮助你-利用SSH的X11-forword。
Linux下执行一个GUI程序通常需要两个部分来协调完成，X server与X client。X server是专门负责显示用户界面的，它管理你的显示器，键盘以及鼠标，通常你看到的桌面系统即是由它在背后驱动的，X client则负责程序的逻辑，如果需要使用用户界面，则通过给X server发送请求来完成。通常情况下，X server与X client都运行在同一台机器上。
Secure Shell (SSH)是一种加密协议，专为远程登录会话和其他网络服务提供安全性的协议。X11- forwarding是一个安全的shell特性，它允许通过现有的SSH shell会话转发X11连接，用于在服务器上运行X11程序，而ssh-client通过用户的X11-server显示图形窗口。
SSH允许用户在客户机上远程连接服务器，但是这种Shell访问只允许用户和服务器应用程序之间基于文本的交互。而X11是一个允许服务器应用程序显示图形界面的系统(本质上是基于像素的输出，显示自己的窗口)。这是一个长期建立的协议，但它传输数据没有加密。
X11-forwarding允许通过已经建立和加密的SSH连接安全地运行X11程序。
1.准备软件–Xmanager7 这里附上百度网盘连接供下载Xmanager7
链接：https://pan.baidu.com/s/1F8pcbKMPfEWlCvZXwwvblA
提取码：1234
2.安装依赖包 安装KVM图形化管理工具
[root@virsh1 ~]# yum -y install virt-manager openssh-askpass 安装x11图形化管理工具
[root@virsh1 ~]# yum -y install xorg-x11-font-utils xorg-x11-server-utils xorg-x11-utils xorg-x11-xauth xorg-x11-xinit 解决使用时出现乱码
[root@virsh1 ~]# yum -y dejavu-lgc-sans-fonts [root@virsh1 ~]# yum groupinstall -y &#34;Fonts&#34; 开启ssh的X11转发功能
[root@virsh1 ~]# vim /etc/ssh/sshd_config X11Forwarding yes [root@virsh1 ~]# systemctl restart sshd 3.配置Xmanager-Passive Xmanager－Passive用来接收由SSH转发至本地的图形界面信息。
如下图为xmanager7工具集合
打开该Xmanager-PassiveXshell7设置X11隧道转发" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/57f010a99dc6202c8bfb7b3a27567d14/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-28T00:08:14+08:00" />
<meta property="article:modified_time" content="2021-12-28T00:08:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Centos最小化安装系统实现KVM图形化管理虚拟机</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="CentosKVM_0"></a>Centos最小化安装系统实现KVM图形化管理虚拟机</h2> 
<p><strong>需求</strong>：初学者不会对KVM的命令行不太了解，而Centos7系统为了节省资源也是最小化安装的，那么就需要这篇文章来帮助你-利用SSH的X11-forword。</p> 
<p>  Linux下执行一个GUI程序通常需要两个部分来协调完成，X server与X client。X server是专门负责显示用户界面的，它管理你的显示器，键盘以及鼠标，通常你看到的桌面系统即是由它在背后驱动的，X client则负责程序的逻辑，如果需要使用用户界面，则通过给X server发送请求来完成。通常情况下，X server与X client都运行在同一台机器上。</p> 
<p>  Secure Shell (SSH)是一种加密协议，专为远程登录会话和其他网络服务提供安全性的协议。X11- forwarding是一个安全的shell特性，它允许通过现有的SSH shell会话转发X11连接，用于在服务器上运行X11程序，而ssh-client通过用户的X11-server显示图形窗口。</p> 
<p>  SSH允许用户在客户机上远程连接服务器，但是这种Shell访问只允许用户和服务器应用程序之间基于文本的交互。而X11是一个允许服务器应用程序显示图形界面的系统(本质上是基于像素的输出，显示自己的窗口)。这是一个长期建立的协议，但它传输数据没有加密。</p> 
<p>  X11-forwarding允许通过已经建立和加密的SSH连接安全地运行X11程序。</p> 
<h3><a id="1Xmanager7_11"></a>1.准备软件–Xmanager7</h3> 
<p>这里附上百度网盘连接供下载Xmanager7<br> 链接：https://pan.baidu.com/s/1F8pcbKMPfEWlCvZXwwvblA<br> 提取码：1234</p> 
<h3><a id="2_16"></a>2.安装依赖包</h3> 
<p>安装KVM图形化管理工具</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@virsh1 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install  virt-manager openssh-askpass </span>
</code></pre> 
<p>安装x11图形化管理工具</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@virsh1 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install xorg-x11-font-utils xorg-x11-server-utils xorg-x11-utils xorg-x11-xauth xorg-x11-xinit</span>
</code></pre> 
<p>解决使用时出现乱码</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@virsh1 ~<span class="token punctuation">]</span><span class="token comment"># yum -y dejavu-lgc-sans-fonts</span>
<span class="token punctuation">[</span>root@virsh1 ~<span class="token punctuation">]</span><span class="token comment"># yum groupinstall -y "Fonts"</span>
</code></pre> 
<p>开启ssh的X11转发功能</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@virsh1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/ssh/sshd_config</span>
    X11Forwarding <span class="token function">yes</span>
<span class="token punctuation">[</span>root@virsh1 ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart sshd</span>
</code></pre> 
<h3><a id="3XmanagerPassive_36"></a>3.配置Xmanager-Passive</h3> 
<p><strong>Xmanager－Passive用来接收由SSH转发至本地的图形界面信息。</strong><br> 如下图为xmanager7工具集合<br> <img src="https://images2.imgbox.com/30/8d/1ZzjYnjx_o.png" alt="在这里插入图片描述"><br> 打开该Xmanager-Passive<img src="https://images2.imgbox.com/db/24/dW7Z31kE_o.png" alt="在这里插入图片描述">Xshell7设置X11隧道转发<br> <img src="https://images2.imgbox.com/8d/13/IGpRbmoW_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4kvmxmanagerpassive_43"></a>4.kvm宿主机主动连接xmanager-passive：</h3> 
<p>为KVM设置X11转发的IP（本地网卡的IP，如是VMnet1则是其IP地址）和端口</p> 
<pre><code class="prism language-bash">在Linux/Unix类操作系统上, <span class="token environment constant">DISPLAY</span>用来设置将图形显示到何处
直接登陆图形界面或者登陆命令行界面后使用startx启动图形化界面
<span class="token environment constant">DISPLAY</span>环境变量将自动设置为:0:0
<span class="token punctuation">[</span>root@virsh1 ~<span class="token punctuation">]</span><span class="token comment"># export DISPLAY=192.168.0.7:0.0</span>

xhost 是用来控制X server访问权限的
这个命令将允许别的用户启动的图形程序将图形显示在当前屏幕上。
<span class="token punctuation">[</span>root@virsh1 ~<span class="token punctuation">]</span><span class="token comment"># xhost +</span>
</code></pre> 
<p>端口来源如下<br> <img src="https://images2.imgbox.com/e6/26/Ptzfxufz_o.png" alt="在这里插入图片描述"><br> 开启KVM图形化(后台运行)，xmanager-passive会自动跳出KVM图形化管理界面</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@virsh1 ~<span class="token punctuation">]</span><span class="token comment"># virt-manager &amp;</span>
</code></pre> 
<p><font color="red">注意：当关掉Xmanager - Passive后virt-manager进程也会结束掉；</font></p> 
<h3><a id="5_62"></a>5.展示效果</h3> 
<p>如下为虚拟系统管理器，也就是KVM图形化管理界面。<br> <img src="https://images2.imgbox.com/e4/63/creLghGN_o.png" alt="在这里插入图片描述"></p> 
<p><strong>引用链接：</strong><br> https://www.cnblogs.com/liuwei0773/p/9510511.html<br> https://blog.csdn.net/linux_hua130/article/details/108398753</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/98fdf8c5866a79f1ae3dd46d42bf92f9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ros使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/af4cde04843db650bc53e28dbf111f38/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java正则表达式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>