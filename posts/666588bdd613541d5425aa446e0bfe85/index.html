<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Git 常用命令知识笔记 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Git 常用命令知识笔记" />
<meta property="og:description" content="Git 仓库数据结构 Git 仓库由一个个的 commit 组成某些 commit 上会有一些 branch 指向它们，这些 branch 的本质是引用有一个特殊的引用叫做 HEAD，它始终指向当前的位置，这个位置可以是 commit，也可以是 branch staging area 暂存区和 add staging 原意：舞台表演前的筹划准备（例如汇集道具和演员）。Git 中的意思：把改动内容汇集起来以待提交。staging area：待提交的修改内容暂时存放的地方。主要用于和已经改动但不打算提交的内容区分开来。add 指令：把指定的内容放进暂存区。 Workspace：工作区Stage：暂存区Repository：仓库区（本地仓库）Remote：远程仓库 git add [file1] [file2] ... # 添加指定文件到暂存区 git add [dir] # 添加指定目录到暂存区，包括子目录 git add . # 添加当前目录的所有文件到暂存区 git add -p # 添加每个变化前，都会要求确认 # 对于同一个文件的多处变化，可以实现分次提交 git rm [file1] [file2] ... # 删除工作区文件，并且将这次删除放入暂存区 git rm --cached [file] # 停止追踪指定文件，但该文件会保留在工作区 git mv [file-original] [file-renamed] # 改名文件，并且将这个改名放入暂存区 git commit commit 表示对于一次改动的提交，它可以代表当前时刻下 Git 仓库的完整快照，但本质上，commit 只是记录了距离上一次 commit 之间的改动。 git commit -m [message] # 提交暂存区到仓库区 git commit [file1] [file2] ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/666588bdd613541d5425aa446e0bfe85/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-31T18:10:04+08:00" />
<meta property="article:modified_time" content="2023-12-31T18:10:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Git 常用命令知识笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Git__0"></a><strong>Git 仓库数据结构</strong></h2> 
<ul><li>Git 仓库由一个个的 <code>commit</code> 组成</li><li>某些 <code>commit</code> 上会有一些 <code>branch</code> 指向它们，这些 <code>branch</code> 的本质是引用</li><li>有一个特殊的引用叫做 <code>HEAD</code>，它始终指向当前的位置，这个位置可以是 <code>commit</code>，也可以是 <code>branch</code></li></ul> 
<p><img src="https://images2.imgbox.com/ac/27/5EaQrsxw_o.png" alt="在这里插入图片描述" width="700"></p> 
<h2><a id="staging_area__add_6"></a><strong>staging area 暂存区和 add</strong></h2> 
<ul><li><code>staging</code> 原意：舞台表演前的筹划准备（例如汇集道具和演员）。Git 中的意思：把改动内容汇集起来以待提交。</li><li><code>staging area</code>：待提交的修改内容暂时存放的地方。主要用于和已经改动但不打算提交的内容区分开来。</li><li><code>add</code> 指令：把指定的内容放进暂存区。</li></ul> 
<p><img src="https://images2.imgbox.com/c0/7c/HpwlcifX_o.png" alt="在这里插入图片描述" width="800"></p> 
<ul><li>Workspace：工作区</li><li>Stage：暂存区</li><li>Repository：仓库区（本地仓库）</li><li>Remote：远程仓库</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token punctuation">[</span>file1<span class="token punctuation">]</span> <span class="token punctuation">[</span>file2<span class="token punctuation">]</span> <span class="token punctuation">..</span>.                <span class="token comment"># 添加指定文件到暂存区</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token punctuation">[</span>dir<span class="token punctuation">]</span>                              <span class="token comment"># 添加指定目录到暂存区，包括子目录</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>                                  <span class="token comment"># 添加当前目录的所有文件到暂存区</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token parameter variable">-p</span>                                 <span class="token comment"># 添加每个变化前，都会要求确认</span>
										   <span class="token comment"># 对于同一个文件的多处变化，可以实现分次提交</span>
<span class="token function">git</span> <span class="token function">rm</span> <span class="token punctuation">[</span>file1<span class="token punctuation">]</span> <span class="token punctuation">[</span>file2<span class="token punctuation">]</span> <span class="token punctuation">..</span>.                 <span class="token comment"># 删除工作区文件，并且将这次删除放入暂存区</span>
<span class="token function">git</span> <span class="token function">rm</span> <span class="token parameter variable">--cached</span> <span class="token punctuation">[</span>file<span class="token punctuation">]</span>                     <span class="token comment"># 停止追踪指定文件，但该文件会保留在工作区</span>
<span class="token function">git</span> <span class="token function">mv</span> <span class="token punctuation">[</span>file-original<span class="token punctuation">]</span> <span class="token punctuation">[</span>file-renamed<span class="token punctuation">]</span>      <span class="token comment"># 改名文件，并且将这个改名放入暂存区 </span>
</code></pre> 
<h2><a id="git_commit_30"></a><strong>git commit</strong></h2> 
<ul><li><code>commit</code> 表示对于一次改动的提交，它可以代表当前时刻下 Git 仓库的完整快照，但本质上，<code>commit</code> 只是记录了距离上一次 <code>commit</code> 之间的改动。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token punctuation">[</span>message<span class="token punctuation">]</span>                          <span class="token comment"># 提交暂存区到仓库区</span>
<span class="token function">git</span> commit <span class="token punctuation">[</span>file1<span class="token punctuation">]</span> <span class="token punctuation">[</span>file2<span class="token punctuation">]</span> <span class="token punctuation">..</span>. <span class="token parameter variable">-m</span> <span class="token punctuation">[</span>message<span class="token punctuation">]</span>      <span class="token comment"># 提交暂存区的指定文件到仓库区</span>
<span class="token function">git</span> commit <span class="token parameter variable">-a</span>                                    <span class="token comment"># 提交工作区所有更改到仓库区</span>
<span class="token function">git</span> commit <span class="token parameter variable">-v</span>                                    <span class="token comment"># 提交时显示所有diff信息</span>
<span class="token function">git</span> commit <span class="token parameter variable">-am</span> <span class="token string">'message'</span>                         <span class="token comment"># 将add和commit合为一步</span>

<span class="token comment"># 使用一次新的commit，替代上一次提交</span>
<span class="token function">git</span> commit <span class="token parameter variable">--amend</span> <span class="token parameter variable">-m</span> <span class="token punctuation">[</span>message<span class="token punctuation">]</span> <span class="token comment"># 如果代码没有任何新变化，则用来改写上一次commit的提交信息（用于反复修改）</span>
<span class="token function">git</span> commit <span class="token parameter variable">--amend</span> <span class="token punctuation">[</span>file1<span class="token punctuation">]</span> <span class="token punctuation">[</span>file2<span class="token punctuation">]</span> <span class="token punctuation">..</span>. <span class="token comment"># 重做上一次commit，并包括指定文件的新变化</span>
</code></pre> 
<h2><a id="branch__master_45"></a><strong>branch 和 master</strong></h2> 
<ul><li><code>branch</code> 的含义是分支，指的是仓库结构出现分叉时的不同的「叉」</li><li>本质上，git 的 <code>branch</code> 是引用（reference），即指向某个 <code>commit</code> 的指针</li></ul> 
<p>直观感觉的 <code>branch</code>：</p> 
<p><img src="https://images2.imgbox.com/42/48/B66EgF11_o.png" alt="在这里插入图片描述" width="600"></p> 
<p>而实质上的 <code>branch</code>：</p> 
<p><img src="https://images2.imgbox.com/29/d3/dHcBzoKE_o.png" alt="在这里插入图片描述" width="600"></p> 
<p>所以，<code>branch</code> 和你什么时候创建的它无关，也和仓库的起点无关，只和它当前指向哪个 <code>commit</code> 有关。</p> 
<ul><li><code>master</code> 是⼀个特殊的 <code>branch</code>，因为它是 Git 的默认 <code>branch</code>（默认 <code>branch</code> 可以修改）。默认 <code>branch</code> 的特点： 
  <ul><li>执行 <code>clone</code> 方法把仓库取到本地的时候，默认 <code>checkout</code> 出来的是默认 <code>branch</code>，即 <code>master</code>；</li><li>执行 <code>push</code> 命令把本地内容推送到远端仓库的时候，远端仓库的 <code>HEAD</code> 永远跟随默认 <code>branch</code>，而不是和本地 <code>HEAD</code> 同步。换句话说，只有 <code>push</code> <code>master</code> 分支到远端的时候，远端的 <code>HEAD</code> 才会移动。</li></ul> </li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> branch                    <span class="token comment"># 列出所有本地分支</span>
<span class="token function">git</span> branch <span class="token parameter variable">-r</span>                 <span class="token comment"># 列出所有远程分支</span>
<span class="token function">git</span> branch <span class="token parameter variable">-a</span>                 <span class="token comment"># 列出所有本地分支和远程分支</span>
<span class="token function">git</span> branch <span class="token parameter variable">-v</span>                 <span class="token comment"># 查看各个分支最后一次提交</span>
<span class="token function">git</span> branch –merged            <span class="token comment"># 查看哪些分支合并入当前分支</span>
<span class="token function">git</span> branch –no-merged         <span class="token comment"># 查看哪些分支未合并入当前分支</span>
  
<span class="token function">git</span> branch <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span>      <span class="token comment"># 新建一个分支，但依然停留在当前分支</span>
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>      <span class="token comment"># 新建一个分支，并切换到该分支</span>
<span class="token function">git</span> branch <span class="token punctuation">[</span>branch<span class="token punctuation">]</span> <span class="token punctuation">[</span>commit<span class="token punctuation">]</span>  <span class="token comment"># 新建一个分支，指向指定commit</span>
<span class="token function">git</span> checkout -                <span class="token comment"># 切换到上一个分支</span>

<span class="token function">git</span> branch <span class="token parameter variable">-d</span> <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span>            <span class="token comment"># 删除分支</span>
<span class="token function">git</span> branch <span class="token parameter variable">-D</span> mybranch                 <span class="token comment"># 强制删除分支</span>
<span class="token function">git</span> push origin <span class="token parameter variable">--delete</span> <span class="token punctuation">[</span>branch-name<span class="token punctuation">]</span> <span class="token comment"># 删除远程分支</span>
<span class="token function">git</span> branch <span class="token parameter variable">-dr</span> <span class="token punctuation">[</span>remote/branch<span class="token punctuation">]</span>         <span class="token comment"># 删除远程分支</span>
</code></pre> 
<h2><a id="HEAD_84"></a><strong>HEAD</strong></h2> 
<ul><li><code>HEAD</code> 也是引用，但它不是 <code>branch</code>，它代表了当前所处的位置。<code>HEAD</code> 不仅可以指向某个 <code>commit</code>，也可以指向某个 <code>branch</code>（例如 <code>master</code>、<code>feature1</code>）</li><li>当每次 <code>commit</code> 的时候，<code>HEAD</code> 不仅随着新的 <code>commit</code> 一起移动，而且如果它指向了某个 <code>branch</code>，那么它也会带着 <code>branch</code> 一起移动</li></ul> 
<p><img src="https://images2.imgbox.com/fa/85/KC1IsKiv_o.png" alt="在这里插入图片描述" width="700"></p> 
<h2><a id="git_clone_91"></a><strong>git clone</strong></h2> 
<ul><li><code>clone</code> 是从远端仓库初次把数据取下来：</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> clone https://github.com/xxxx.git
</code></pre> 
<p><code>clone</code> 命令具体会做两件事：</p> 
<ol><li>把整个仓库中的所有 <code>branch</code> 取下来，并把从初始 <code>commit</code> 到达这些 <code>branch</code> 的路径上的所有 <code>commit</code> 都取下来：<br> <img src="https://images2.imgbox.com/de/fd/illfPf6e_o.png" alt="在这里插入图片描述" width="500"></li><li>从初始 <code>commit</code> 开始，向 <code>master</code> 指向的 <code>commit</code>，一个个地把每个 <code>commit</code> 应用，最终得到一个「当前」状态的仓库内容，写进 Git 所在的目录（这个目录叫做 working tree）</li></ol> 
<h2><a id="git_log_103"></a><strong>git log</strong></h2> 
<ul><li>从 <code>HEAD</code> 指向的 <code>commit</code> 开始，<strong>倒序</strong>显示每一个 <code>commit</code> 的摘要信息（最新的排在最前面）</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> status        <span class="token comment"># 显示有变更的文件</span>
<span class="token function">git</span> log           <span class="token comment"># 显示当前分支的版本历史</span>
<span class="token function">git</span> log <span class="token parameter variable">--stat</span>    <span class="token comment"># 显示commit历史，以及每次commit发生变更的文件</span>
<span class="token function">git</span> log <span class="token parameter variable">-S</span> <span class="token punctuation">[</span>keyword<span class="token punctuation">]</span>  <span class="token comment"># 搜索提交历史，根据关键词</span>
<span class="token function">git</span> log <span class="token punctuation">[</span>tag<span class="token punctuation">]</span> HEAD <span class="token parameter variable">--pretty</span><span class="token operator">=</span>format:%s  <span class="token comment"># 显示某个commit之后的所有变动，每个commit占据一行</span>
<span class="token function">git</span> log <span class="token punctuation">[</span>tag<span class="token punctuation">]</span> HEAD <span class="token parameter variable">--grep</span> feature      <span class="token comment"># 显示某个commit之后的所有变动，其"提交说明"必须符合搜索条件</span>
<span class="token function">git</span> log <span class="token parameter variable">--follow</span> <span class="token punctuation">[</span>file<span class="token punctuation">]</span>                <span class="token comment"># 显示某个文件的版本历史，包括文件改名</span>
<span class="token function">git</span> whatchanged <span class="token punctuation">[</span>file<span class="token punctuation">]</span>
<span class="token function">git</span> log <span class="token parameter variable">-p</span> <span class="token punctuation">[</span>file<span class="token punctuation">]</span>                      <span class="token comment"># 显示指定文件相关的每一次diff</span>
<span class="token function">git</span> log <span class="token parameter variable">-5</span> <span class="token parameter variable">--pretty</span> <span class="token parameter variable">--oneline</span>          <span class="token comment"># 显示过去5次提交</span>
<span class="token function">git</span> shortlog <span class="token parameter variable">-sn</span>                       <span class="token comment"># 显示所有提交过的用户，按提交次数排序</span>
</code></pre> 
<h2><a id="git__merge_121"></a><strong>git merge</strong></h2> 
<ul><li><code>merge</code> 就是合并，它会把当前 <code>commit</code> 和指定 <code>commit</code>（所谓 <code>commit</code>，可以直接用它的 <code>hash</code> 值来指定，例如 <code>4a0a1b</code> ，也可以用一个直接或间接指向它的引用来指定，例如 <code>master</code> 或者 <code>HEAD</code> ）进行合并，并把这个合并行为创建成一个新的<code>commit</code>。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> merge feature1       <span class="token comment"># 合并feature1分支至当前分支</span>
<span class="token function">git</span> merge origin/master  <span class="token comment"># 合并远程master分支至当前分支</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/52/e3/06ZeDZjP_o.png" alt="在这里插入图片描述" width="650"></p> 
<p><code>git merge</code> 会产生一个新的提交。</p> 
<p><code>merge</code> 行为所产生的 <code>commit</code>，是一种特殊的 <code>commit</code>：</p> 
<ol><li>它不需要有改动，只要指定两个（或更多个）父 <code>commit</code> 就好</li><li>正如上面这句说的，它有两个或更多个父 <code>commit</code>，这是一般的 <code>commit</code> 不具有的性质</li></ol> 
<p><code>git checkout master</code> 相当于<code>merge from master</code>，<code>git merge mybranch</code> 相当于 <code>merge from mybranch</code>。</p> 
<p><strong>merge 冲突</strong></p> 
<p>当 Git 不知道怎么合并某两处冲突的修改时，会中断自动合并，并对冲突文件进行标记。解决方法：</p> 
<ol><li>把文件手动修改好</li><li>把修改的内容使用 <code>add</code> 来添加进暂存区</li><li>用 <code>git merge --continue</code> 来继续自动合并流程</li></ol> 
<h2><a id="_origin__branch_147"></a><strong>关于 origin/ 打头的 branch</strong></h2> 
<ul><li>本地仓库中，有一些以 <code>origin/</code> 打头的 <code>branch</code>，它们是远端仓库（别名为<code>origin</code>）的本地镜像。它们的作用是方便在本地查看远端仓库的 <code>branch</code> 状态。</li></ul> 
<blockquote> 
 <p>远端仓库默认名称是 <code>origin</code>，但也可以给它们起别的名称</p> 
</blockquote> 
<p><code>origin/</code> 分支并不在本地直接操作，它们一般只在两种情况下会进行自动更新：</p> 
<ol><li>在执行 <code>push</code> 的时候，<code>push</code> 成功后，<code>push</code> 成功的 <code>branch</code> 会把它对应的 <code>origin/</code> branch更新到当前 <code>commit</code>（因为远端的 <code>branch</code> 已经随着 <code>push</code> 的成功而更新，所以本地镜像也一起更新）</li><li>在执行 <code>pull</code> 或者 <code>fetch</code> 的时候，由于从远端拿到了所有最新的 <code>branch</code> 状态，所以也会一同更新所有的 <code>origin/</code> branch</li></ol> 
<blockquote> 
 <p>关于 <code>origin/HEAD</code>：这是一个永远跟随 <code>origin/master</code> 的引用，它最大的作用是用来标记默认 <code>branch</code></p> 
</blockquote> 
<h2><a id="git_push_161"></a><strong>git push</strong></h2> 
<ul><li>把当前的本地分支推送到远端仓库的指定分支。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> push origin feature1
</code></pre> 
<p>具体做两件事：</p> 
<ol><li>把 <code>HEAD</code> 所指向的 <code>branch</code> （只是一个引用哦）推送到远端仓库</li><li>从这个 <code>branch</code> 向前回溯，远端仓库缺少的每一个 <code>commit</code> 也推送到远端仓库。</li><li>将 <code>push</code> 的 <code>branch</code> 的本地镜像 <code>origin/xxx</code> 更新</li></ol> 
<p><img src="https://images2.imgbox.com/24/92/M3uvVPSj_o.png" alt="在这里插入图片描述" width="650"><br> <img src="https://images2.imgbox.com/c9/cb/SSgmLPD7_o.png" alt="在这里插入图片描述" width="650"><br> <img src="https://images2.imgbox.com/ff/7d/fUarzaAH_o.png" alt="在这里插入图片描述" width="650"><br> <img src="https://images2.imgbox.com/27/f3/5m3W6lxz_o.png" alt="在这里插入图片描述" width="650"></p> 
<blockquote> 
 <p>注意：<code>origin/HEAD</code> 并没有在图上画出来，但如果 <code>push</code> 是 <code>master</code>（即默认<code>branch</code>），那么本地的 <code>origin/HEAD</code> 也会更新到 <code>master</code> 的最新位置；当<code>push</code> 的是其他 <code>branch</code> 的时候，<code>origin/HEAD</code> 并不会更新。<br> 也就是说， <code>origin/HEAD</code> 只和默认分支相关，和 <code>HEAD</code> 是无关的。</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token function">git</span> push <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>   <span class="token comment"># 上传本地指定分支到远程仓库</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token parameter variable">--force</span>    <span class="token comment"># 强行推送当前分支到远程仓库，即使有冲突</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token parameter variable">--all</span>      <span class="token comment"># 推送所有分支到远程仓库</span>
<span class="token function">git</span> push origin master       <span class="token comment"># 将当前分支push到远程master分支</span>
</code></pre> 
<h2><a id="git_pull_188"></a><strong>git pull</strong></h2> 
<ul><li>把远端 <code>branch</code> 取到本地。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> pull origin feature1
</code></pre> 
<p>具体做的事有三件：</p> 
<ol><li>把远端所有 <code>branch</code> 的最新位置更新到本地的 <code>origin/xxx</code> 镜像</li><li>要到达这些 <code>branch</code>，本地所缺少的所有 <code>commit</code>，也取到本地</li><li>把 <code>origin/当前branch</code> 的内容合并到当前 <code>branch</code></li></ol> 
<p><img src="https://images2.imgbox.com/bd/0e/wS3Mhw2l_o.png" alt="在这里插入图片描述" width="650"><br> <img src="https://images2.imgbox.com/05/0b/bv6yKNI4_o.png" alt="在这里插入图片描述" width="650"><br> <img src="https://images2.imgbox.com/46/a6/W4IAHiEa_o.png" alt="在这里插入图片描述" width="650"><br> <img src="https://images2.imgbox.com/64/e3/2xrZZZWZ_o.png" alt="在这里插入图片描述" width="650"></p> 
<p>事实上，<code>git pull origin feature1</code> 会分成两部执行，它等价于下面两行：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> fetch
<span class="token function">git</span> merge origin/feature1
</code></pre> 
<p><code>git fetch</code> 的含义：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> fetch <span class="token punctuation">[</span>remote<span class="token punctuation">]</span>   <span class="token comment"># 下载所有远程分支，但不更新本地分支（另需merge） </span>
</code></pre> 
<h2><a id="git_checkout_216"></a><strong>git checkout</strong></h2> 
<ul><li>移动 <code>HEAD</code>，让它指向某个 <code>commit</code> 或某个 <code>branch</code>。</li><li><code>checkout --detach</code> ：让 <code>HEAD</code> 脱离当前 <code>branch</code>，直接指向下面的<code>commit</code>。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> checkout <span class="token parameter variable">-b</span> dev origin/master 
</code></pre> 
<p>从远程的 <code>master</code> 分支检出到本地的<code>dev</code>上，并切换到新建的本地<code>dev</code>分支上。</p> 
<p>其实也是相当于两个命令的缩写：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> branch dev  <span class="token comment"># 创建分支</span>
<span class="token function">git</span> checkout dev <span class="token comment"># 切换分支</span>
</code></pre> 
<p>本地的项目中，一直都保留着一个<code>master</code>分支，并关联远程的<code>master</code>分支。本地的<code>master</code>分支，你可以当作是个干净的主线，每次新来一个需求的时候你都可以以该分支为基准，新建一个分支进行开发，最后进行合并，并由这个基准分支（本地<code>master</code>）提交到远程；具体的专业信息你可以参照文档：<a href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6" rel="nofollow">Git-分支-分支的新建与合并</a></p> 
<p>通过 <code>checkout</code> 可以恢复指定文件（如不小心<code>commit</code>掉的）到工作区（未提交状态）：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> checkout <span class="token punctuation">[</span>file<span class="token punctuation">]</span>             <span class="token comment"># 恢复暂存区的指定文件到工作区</span>
<span class="token function">git</span> checkout <span class="token punctuation">[</span>commit<span class="token punctuation">]</span> <span class="token punctuation">[</span>file<span class="token punctuation">]</span>    <span class="token comment"># 恢复某个commit的指定文件到暂存区和工作区</span>
<span class="token function">git</span> checkout <span class="token builtin class-name">.</span>                  <span class="token comment"># 恢复暂存区的所有文件到工作区</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token function">git</span> checkout <span class="token parameter variable">-b</span> master_copy                               <span class="token comment"># 从当前分支创建新分支master_copy并检出</span>
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> master master_copy                        <span class="token comment"># 上面的完整版</span>
<span class="token function">git</span> checkout features/performance                         <span class="token comment"># 检出已存在的features/performance分支</span>
<span class="token function">git</span> checkout <span class="token parameter variable">--track</span> hotfixes/BJVEP933                    <span class="token comment"># 检出远程分支hotfixes/BJVEP933并创建本地跟踪分支</span>
<span class="token function">git</span> checkout v2.0                                         <span class="token comment"># 检出版本v2.0</span>
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> devel origin/develop                      <span class="token comment"># 从远程分支develop创建新本地分支devel并检出</span>
<span class="token function">git</span> checkout -- README                                    <span class="token comment"># 检出head版本的README文件（可用于修改错误回退）</span>
</code></pre> 
<h2><a id="git_rebase_254"></a><strong>git rebase</strong></h2> 
<ul><li>把当前 <code>commit</code>（以及它之前的 <code>commits</code>）应用到指定的需要 <code>rebase</code> 的 <code>commit</code>上。</li></ul> 
<blockquote> 
 <p>Git 中的每一个 <code>commit</code> 都是不会改变的，所以 <code>rebase</code> 之后的每个 <code>commit</code> 都是新产生的，而不是对原先的 <code>commit</code> 进行「修改」</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/f0/69/HPO89IiC_o.png" alt="在这里插入图片描述" width="700"></p> 
<p><strong>rebase 冲突</strong></p> 
<p><code>rebase</code> 的冲突解决方法和 <code>merge</code> 冲突一样，只是把 <code>git merge --continue</code> 改成 <code>git rebase --continue</code> 就行了。</p> 
<h2><a id="git_reset_266"></a><strong>git reset</strong></h2> 
<ul><li>把当前 <code>branch</code> 指向指定的 <code>commit</code>。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> reset <span class="token punctuation">[</span>指定commit<span class="token punctuation">]</span> <span class="token comment"># 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</span>
</code></pre> 
<p>移动到指定 <code>commit</code>，并<strong>保留</strong> working tree 的内容。</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> reset <span class="token parameter variable">--hard</span> <span class="token punctuation">[</span>指定commit<span class="token punctuation">]</span>
</code></pre> 
<p>移动到指定 <code>commit</code>，并<strong>重置</strong> working tree。</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> checkout <span class="token builtin class-name">.</span>                         <span class="token comment"># 撤销未暂存修改</span>
<span class="token function">git</span> reset                              <span class="token comment"># 撤销未提交的暂存至 git add . 状态</span>
<span class="token function">git</span> reset <span class="token parameter variable">--hard</span>                       <span class="token comment"># 撤销所有修改，保持与上一次一致</span>
<span class="token function">git</span> reset <span class="token parameter variable">--hard</span> origin/master         <span class="token comment"># 撤销本地提交</span>
<span class="token function">git</span> reset <span class="token parameter variable">--hard</span> HEAD^ <span class="token operator">&amp;</span> <span class="token function">git</span> push –f   <span class="token comment"># 撤销已推送</span>
<span class="token function">git</span> reset <span class="token parameter variable">--keep</span> <span class="token punctuation">[</span>commit<span class="token punctuation">]</span>              <span class="token comment"># 重置当前HEAD为指定commit，但保持暂存区和工作区不变</span>
</code></pre> 
<p><strong>reset 和 checkout 的区别</strong></p> 
<p>它们都是移动 <code>HEAD</code>，但 <code>chekcout</code> 移动的时候是自己移动，不带着 <code>branch</code> 一起；而 <code>reset</code> 会带着 <code>branch</code> 一起移动。</p> 
<h2><a id="git_tag_293"></a><strong>git tag</strong></h2> 
<pre><code class="prism language-bash"><span class="token function">git</span> tag                     <span class="token comment"># 列出所有tag</span>
<span class="token function">git</span> tag <span class="token punctuation">[</span>tagname<span class="token punctuation">]</span>           <span class="token comment"># 新建一个tag在当前commit</span>
<span class="token function">git</span> tag <span class="token punctuation">[</span>tagname<span class="token punctuation">]</span> <span class="token punctuation">[</span>commit<span class="token punctuation">]</span>  <span class="token comment"># 新建一个tag在指定的commit</span>
<span class="token function">git</span> tag <span class="token parameter variable">-d</span> <span class="token punctuation">[</span>tagname<span class="token punctuation">]</span>        <span class="token comment"># 删除本地tag</span>
</code></pre> 
<p>另⼀种引用类型。作用：设置持久标记，例如版本号。和 <code>branch</code> 区别：</p> 
<ul><li>不能改变</li><li>不能被 <code>HEAD</code> 指向</li><li><code>origin/master</code>, <code>origin/feature</code>, <code>origin/HEAD</code> 和 <code>tag</code> 有相似之处：也不能从本地改变位置，也不能被 <code>HEAD</code> 指向</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> tag                          <span class="token comment"># 显示已存在的tag</span>
<span class="token function">git</span> tag <span class="token parameter variable">-a</span> v2.0 <span class="token parameter variable">-m</span> <span class="token string">'xxx'</span>         <span class="token comment"># 增加v2.0的tag</span>
<span class="token function">git</span> show v2.0                    <span class="token comment"># 显示v2.0的日志及详细内容</span>
<span class="token function">git</span> log v2.0                     <span class="token comment"># 显示v2.0的日志</span>
<span class="token function">git</span> checkout v2.0                <span class="token comment"># 检出版本v2.0</span>
</code></pre> 
<p><code>git checkout v2.0</code> 会把远程 tag <code>v2.0</code>拉到本地，在本地创建一个无<code>Head</code>指向的分支，而远程<code>tag</code>分支不受任何影响，将本地分支<code>push</code>后将发布一个新的分支。</p> 
<p>基于 <code>tag</code> 的 <code>git check out</code> 出来的分支可以执行 <code>git branch xxx</code> 创建新的本地分支，然后<code>git check out xxx</code> , <code>commit</code>后<code>push</code>到远端可以创建一个新分支（也可以不提交）。</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> push <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token punctuation">[</span>tag<span class="token punctuation">]</span>         <span class="token comment"># 提交指定tag</span>
<span class="token function">git</span> push <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token parameter variable">--tags</span>        <span class="token comment"># 提交所有tag</span>
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span> <span class="token punctuation">[</span>tag<span class="token punctuation">]</span>  <span class="token comment"># 新建一个分支，指向某个tag</span>
<span class="token function">git</span> push origin :refs/tags/<span class="token punctuation">[</span>tagName<span class="token punctuation">]</span> <span class="token comment"># 删除远程tag</span>
</code></pre> 
<h2><a id="git_revert_326"></a><strong>git revert</strong></h2> 
<ul><li>撤销指定的提交，用于已经 <code>push</code> 到 <code>master</code> 的内容需要删除。它的原理是创建一个新的<code>commit</code>，内容是指定 <code>commit</code> 的「相反内容」。</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 新建一个commit，用来撤销指定commit 后者的所有变化都将被前者抵消，并且应用到当前分支</span>
<span class="token function">git</span> revert <span class="token punctuation">[</span>commit<span class="token punctuation">]</span>
</code></pre> 
<h2><a id="git_cherrypick_333"></a><strong>git cherry-pick</strong></h2> 
<ul><li>选择指定的某个或某些<code>commit</code>，合并进当前分支。 将 <code>commit</code> 到 <code>HEAD</code> 处。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">git</span> cherry-pick <span class="token punctuation">[</span>commit1<span class="token punctuation">]</span> <span class="token punctuation">[</span>commit2<span class="token punctuation">]</span>
<span class="token function">git</span> cherry-pick ff44785404a8e           <span class="token comment"># 合并提交ff44785404a8e的修改</span>
</code></pre> 
<p>⽐如我想抛弃某个 <code>branch</code>，这个特性不要了，但它的某两个 <code>commit</code> 我希望保留。</p> 
<h2><a id="git_reflog_341"></a><strong>git reflog</strong></h2> 
<pre><code class="prism language-bash"><span class="token function">git</span> reflog <span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span>
</code></pre> 
<p>查看指定的引用（<code>HEAD</code> 或 <code>branch</code>）的移动历史，从而找到之前的某个特定 <code>commit</code></p> 
<h2><a id="branch__350"></a><strong>branch 的作用</strong></h2> 
<ul><li>让项目可以同时做多件事</li><li>未做完的事不会被项目真正收录</li></ul> 
<p><img src="https://images2.imgbox.com/6d/36/8XF2Lyca_o.png" alt="在这里插入图片描述" width="700"></p> 
<h2><a id="Feature_Branching_357"></a><strong>Feature Branching</strong></h2> 
<ul><li>做法：每开发一个新的功能做一个修复，都使用单独的分支，在做完之后 <code>merge</code> 到 <code>master</code> 去</li><li>本地 <code>merge</code>：由于别人可能在你之前 <code>push</code> 过，所以你的 <code>push</code> 可能失败。所以通常会需要先 <code>pull</code> 一下，然后再 <code>push</code>。</li></ul> 
<p><img src="https://images2.imgbox.com/67/2e/CEVmIWko_o.png" alt="在这里插入图片描述" width="700"></p> 
<ul><li>使用 github：先创建 <code>pull request，</code>在同事审阅完成之后，通过按钮实现在线 <code>merge</code></li><li><code>pull request</code> 是什么：是开发者对远端仓库的提出的「拉取某个 <code>branch</code>」的请求</li></ul> 
<h2><a id="Git_Flow_367"></a><strong>Git Flow</strong></h2> 
<p><img src="https://images2.imgbox.com/b3/a1/SmObaQdl_o.png" alt="在这里插入图片描述" width="700"></p> 
<p><img src="https://images2.imgbox.com/af/f9/yQQsF9di_o.png" alt="在这里插入图片描述" width="700"></p> 
<p><strong>两条持久主线：master 和 develop</strong></p> 
<p><strong>master</strong></p> 
<ul><li>最稳定的分支（长期分支），只用于存放所有的发布</li><li>每次有了新的 <code>commit</code> 之后，立即打一个 <code>tag</code> 来记录</li><li>正式发布的集成目标</li></ul> 
<p><strong>develop</strong></p> 
<ul><li>日常开发分支（长期分支），用于存放不稳定版本的发布</li><li><code>develop</code> 并不是直接用于开发 <code>feature</code> 的，开发 <code>feature</code> 需要专门的<code>branch</code></li><li><code>develop</code> 在第一时间从 <code>master</code> 上分离出来</li><li>需要开发任何功能的时候，从 <code>develop</code> 创建出新的 <code>feature branch</code>，开发完成后合并回 <code>develop</code>（合并的时候使用 <code>--no-ff</code>），然后删掉 <code>feature branch</code></li><li>当下一正式版本需要的所有功能开发完成之后，从 <code>develop</code> 上创建新的 <code>release branch</code>，并在 <code>release branch</code> 合并到 <code>master</code> 后合并回<code>develop</code>（合并的时候用 <code>--no-ff</code>），然后删掉 <code>release branch</code></li></ul> 
<p><strong>feature branches</strong></p> 
<ul><li>功能型开发分支（目的型分支）</li><li>始于<code>develop</code>，终于<code>develop</code>，每次开发新功能是从 <code>develop</code> 创建，开发完成后合并到 <code>develop</code>（使用 <code>--no-ff</code>），然后被删掉</li></ul> 
<p><strong>release branches</strong></p> 
<ul><li>预交付分支（目的型分支）</li><li>始于<code>develop</code> ，终于<code>master &amp; develop</code></li><li>每次下一版本的功能开发完毕后，从 <code>develop</code> 上创建</li><li>创建完成后，更新版本号，然后单独做一个新的 <code>commit</code></li><li>如果有 <code>bug fix</code>，直接在 <code>release branch</code> 上修复，<code>bug fix</code> 完成后，合并到 <code>master</code> 和 <code>develop</code>（使用 <code>--no-ff</code>），然后 <code>release branch</code> 被删掉</li></ul> 
<p><strong>hotfix branches</strong></p> 
<ul><li>热修复分支（目的型分支）</li><li>始于<code>master</code>，终于<code>master &amp; develop</code></li><li>已正式发布的产品发现 <code>bug</code>，直接从 <code>master</code> 或者出问题的 <code>tag</code> 上创建 <code>hotfix branch</code> 进行紧急修复，修复完成后合并到 <code>master</code> 和 <code>develop</code>（或 <code>release branch</code> 如果有的话）（使用 <code>--no-ff</code>），然后被删掉。</li></ul> 
<p>这里还有一个点，如果是本地创建的 <code>feature</code> 分支（从<code>develop</code>分支创建）开发完成后，成功合并到 <code>develop</code> 分支后，这个本地 <code>feature</code> 分支是可以删掉的，并不一定要提交到远程，不然远程仓库里会有很多冗余分支。</p> 
<h2><a id="Git__408"></a><strong>Git 配置</strong></h2> 
<p>首先需要下载Git客户端：<a href="https://git-scm.com/" rel="nofollow">https://git-scm.com/</a></p> 
<p>然后输入下面命令进行配置（主要是用户名信息）：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 设置提交代码时的用户信息</span>
<span class="token function">git</span> config <span class="token punctuation">[</span>--global<span class="token punctuation">]</span> user.name <span class="token string">"[name]"</span>               <span class="token comment"># 配置用户名</span>
<span class="token function">git</span> config <span class="token punctuation">[</span>--global<span class="token punctuation">]</span> user.email <span class="token string">"[email address]"</span>     <span class="token comment"># 配置邮件</span>
<span class="token function">git</span> config <span class="token parameter variable">--list</span>          <span class="token comment"># 显示当前的Git配置</span>
<span class="token function">git</span> config <span class="token parameter variable">-e</span> <span class="token punctuation">[</span>--global<span class="token punctuation">]</span>   <span class="token comment"># 编辑Git配置文件</span>
</code></pre> 
<p>Git的设置文件为<code>.gitconfig</code>，它可以在用户主目录下(全局配置)，也可以在项目目录下(项目配置)</p> 
<p><strong>生成 RSA 密钥 SSH Key</strong></p> 
<pre><code class="prism language-bash">ssh-keygen <span class="token parameter variable">-t</span> rsa
<span class="token function">cat</span> ~/.ssh/id_rsa.pub  
</code></pre> 
<p>第一次使用该命令时，之后会在用户目录下生成<code>.ssh</code>文件夹（如果是windows就是在C:/Users/用户名/目录下, 如果是Mac就用上面的<code>cat</code>命令查看即可），其中会包括：<code>id_rsa</code>、<code>id_rsa.pub</code>以及其他的文件，其中 <code>id_rsa</code> 是私钥，<code>id_rsa.pub</code> 是公钥。</p> 
<p>将<code>id_rsa.pub</code>公钥文件中的内容全部复制，以使用 gitlab 仓库为例，打开gitlab，找到<code>Profile Settings –&gt; SSH Keys —&gt; Add SSH Key</code>，把复制的内容粘贴到<code>Key</code>所对应的文本框，在<code>Title</code>对应的文本框中给这个sshkey设置一个名字，点击<code>Add key</code>按钮。</p> 
<p><img src="https://images2.imgbox.com/f7/83/yPIo1Bjb_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d2/52/rntqfMyj_o.png" alt="在这里插入图片描述"></p> 
<p>检测是否配置成功：本地 git-bash 输入以下命令</p> 
<pre><code class="prism language-bash">$ <span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@github.com
</code></pre> 
<p>若显示如下，则代表配置成功：</p> 
<p><img src="https://images2.imgbox.com/25/f2/RE8xB8Hk_o.png" alt="在这里插入图片描述" width="700"></p> 
<p>绑定成功了之后，就可以复制 gitlab上面项目的 ssh 地址进行 git clone ，将 gitlab上项目克隆到本地了：</p> 
<p><img src="https://images2.imgbox.com/41/cf/94YgVa1T_o.png" alt="在这里插入图片描述"></p> 
<p>gitlab 上还可以添加项目成员和设置权限：</p> 
<p><img src="https://images2.imgbox.com/65/88/k355KlJ1_o.png" alt="在这里插入图片描述"></p> 
<p>访问权限</p> 
<ul><li>Private - 私有，只有属于该项目成员才能clone</li><li>Internal - 内部，有Gitlab账号的人都可以clone</li><li>Public - 公开，任何人可以clone</li></ul> 
<p>行为权限</p> 
<ul><li>Guest - 访客</li><li>Reporter - 报告者; 可以理理解为测试员、产品经理理等</li><li>Developer - 开发者</li><li>Master - 主人，负责对Master分⽀支进行维护</li><li>Owner - 拥有者</li></ul> 
<p><strong>git 克隆项目时使用 HTTPS url 跟 SSH url 的区别：</strong></p> 
<ul><li>使用 <code>https url</code> 克隆对初学者来说会比较方便，复制 <code>https url</code> 然后到 <code>git Bash</code> 里面直接用 <code>clone</code> 命令克隆到本地， 但是每次<code>fetch</code>和<code>push</code>代码都需要输入账号和密码，这也是<code>https</code>方式的麻烦之处。</li><li>而使用 <code>SSH url</code> 克隆却需要在克隆之前先配置和添加好<code>SSH key</code>，因此，如果你想要使用<code>SSH url</code>克隆的话，你必须是这个项目的拥有者（或者你的项目的主管有权限添加<code>SSH key</code>）。否则你无法添加<code>SSH key</code>，另外 <strong>ssh 默认每次<code>fetch</code>和<code>push</code>代码不需要输入账号和密码</strong>，如果你想要每次都输入账号密码才能进行<code>fetch</code>和<code>push</code>也可以另外进行设置。</li></ul> 
<h2><a id="Git__475"></a><strong>Git 命令速查表</strong></h2> 
<p><img src="https://images2.imgbox.com/c9/2d/X9bZIE8A_o.jpg" alt="在这里插入图片描述"></p> 
<p>这个图上的命令不全，这里有一个总结的比较全面的帖子：<a href="https://segmentfault.com/a/1190000039147662" rel="nofollow">Git常用命令，总结的很全了！</a></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ed5358e373ae2503c5c76f1880e4cfba/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android Studio使用Git提交、分支、切换、合并</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8a77ed89dbce4acfc897c926d843437d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2024年原创深度学习算法项目分享</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>