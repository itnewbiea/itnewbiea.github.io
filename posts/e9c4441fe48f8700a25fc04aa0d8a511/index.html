<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>根本记不住MySQL进阶查询语句 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="根本记不住MySQL进阶查询语句" />
<meta property="og:description" content="1 MySQL进阶查询 1.1 MySQL进阶查询的语句 全文以数据库location和Store_Info为实例 ---- SELECT ----显示表格中一个或数个字段的所有数据记录 语法：SELECT &#34;字段&#34; FROM &#34;表名&#34;; select 列名 from 表名 ;
---- DISTINCT ----不显示重复的数据记录 语法：SELECT DISTINCT &#34;字段&#34; FROM &#34;表名&#34;; SELECT DISTINCT Store_Name FROM Store_Info;
---- WHERE ----有条件查询 语法：SELECT &#34;字段&#34; FROM &#34;表名&#34; WHERE &#34;条件&#34;; SELECT Store_Name FROM Store_Info WHERE Sales &gt; 1000;
---- AND OR ----且 或 语法：SELECT &#34;字段&#34; FROM &#34;表名&#34; WHERE &#34;条件1&#34; {[AND|OR] &#34;条件2&#34;}&#43; ; SELECT Store_Name FROM Store_Info WHERE Sales &gt; 1000 OR (Sales &lt; 500 AND Sales &gt; 200);" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/e9c4441fe48f8700a25fc04aa0d8a511/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T22:17:48+08:00" />
<meta property="article:modified_time" content="2024-01-04T22:17:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">根本记不住MySQL进阶查询语句</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><strong><span style="color:#333333;">1 MySQL进阶查询</span></strong></h3> 
<h4><strong><span style="color:#333333;">1.1 MySQL进阶查询的语句</span></strong></h4> 
<h5><strong><span style="color:#333333;">全文以数据库location和Store_Info为实例</span></strong></h5> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5e/57/DaeZBNDy_o.png"></p> 
<h6><strong><span style="color:#333333;">---- SELECT ----显示表格中一个或数个字段的所有数据记录</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "字段" FROM "表名"; select 列名 from 表名 ;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9c/23/BhSIdbVZ_o.png"></p> 
<h6><strong><span style="color:#333333;">---- DISTINCT ----不显示重复的数据记录</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT DISTINCT "字段" FROM "表名"; SELECT DISTINCT Store_Name FROM Store_Info;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/49/c0/UEZA2jT3_o.png"></p> 
<h6><strong><span style="color:#333333;">---- WHERE ----有条件查询</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "字段" FROM "表名" WHERE "条件"; SELECT Store_Name FROM Store_Info WHERE Sales &gt; 1000;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a5/c8/q3nufvvX_o.png"></p> 
<h6><strong><span style="color:#333333;">---- AND OR ----且 或</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "字段" FROM "表名" WHERE "条件1" {[AND|OR] "条件2"}+ ; SELECT Store_Name FROM Store_Info WHERE Sales &gt; 1000 OR (Sales &lt; 500 AND Sales &gt; 200);</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d4/60/AO0UD3Kj_o.png"></p> 
<h6><strong><span style="color:#333333;">---- IN ----显示已知的值的数据记录</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "字段" FROM "表名" WHERE "字段" IN ('值1', '值2', ...); SELECT * FROM Store_Info WHERE Store_Name IN ('Los Angeles', 'Houston');</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e6/97/ZgcMRimk_o.png"></p> 
<h6><strong><span style="color:#333333;">---- BETWEEN ----显示两个值范围内的数据记录</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "字段" FROM "表名" WHERE "字段" BETWEEN '值1' AND '值2'; SELECT * FROM Store_Info WHERE Date BETWEEN '2020-12-06' AND '2020-12-10';</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b7/c9/v3UdC4Mf_o.png"></p> 
<h6><strong><span style="color:#333333;">集合用法</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">select 列名 from 表名 where 列名 = 值 [and/or 列名 = 值 ]；</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">！=&lt;&gt; &gt; &gt;= &lt; &lt;=;</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">between 值1 and 值2；</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">[not] in （值1，值2，值3...）</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">like ‘通配符表达式’；</span></p> 
<h4><strong><span style="color:#333333;">1.2 查询语句通配符的应用</span></strong></h4> 
<h6><strong><span style="color:#333333;">---- 通配符 ----通常通配符都是跟 LIKE 一起使用的</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">% ：百分号表示零个、一个或多个字符 _ ：下划线表示单个字符</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">'A_Z'：所有以 'A' 起头，另一个任何值的字符，且以 'Z' 为结尾的字符串。例如，'ABZ' 和 'A2Z' 都符合这一个模式，而 'AKKZ' 并不符合 (因为在 A 和 Z 之间有两个字符，而不是一个字符)。 'ABC%': 所有以 'ABC' 起头的字符串。例如，'ABCD' 和 'ABCABC' 都符合这个模式。 '%XYZ': 所有以 'XYZ' 结尾的字符串。例如，'WXYZ' 和 'ZZXYZ' 都符合这个模式。 '%AN%': 所有含有 'AN'这个模式的字符串。例如，'LOS ANGELES' 和 'SAN FRANCISCO' 都符合这个模式。 '_AN%'：所有第二个字母为 'A' 和第三个字母为 'N' 的字符串。例如，'SAN FRANCISCO' 符合这个模式，而 'LOS ANGELES' 则不符合这个模式。</span></p> 
<h6><strong><span style="color:#333333;">---- LIKE ----匹配一个模式来找出我们要的数据记录</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "字段" FROM "表名" WHERE "字段" LIKE {模式}; SELECT * FROM Store_Info WHERE Store_Name like '%os%';（以百分号开头会做全表扫描）</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4d/79/3vx7NG6t_o.png"></p> 
<h6><strong><span style="color:#333333;">---- ORDER BY ----按关键字排序</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "字段" FROM "表名" [WHERE "条件"] ORDER BY "字段" [ASC, DESC]; #ASC 是按照升序进行排序的，是默认的排序方式。 #DESC 是按降序方式进行排序。</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">select 列名 from 表名 order by 列名 ASC|DESC 排序</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/82/07/Pr75Li2S_o.png"></p> 
<h3><strong><span style="color:#333333;">2 MySQL数据库函数</span></strong></h3> 
<h4><strong><span style="color:#333333;">2.1 数学函数</span></strong></h4> 
<p style="margin-left:.8em;"><span style="color:#333333;">abs(x) 返回 x 的绝对值 <span style="color:#FF0000;"><span style="color:inherit;">rand() </span></span> 返回 0 到 1 的随机数 mod(x,y) 返回 x 除以 y 以后的余数 power(x,y) 返回 x 的 y 次方 round(x) 返回离 x 最近的整数 <span style="color:#FF0000;"><span style="color:inherit;">round(x,y)</span></span> 保留 x 的 y 位小数四舍五入后的值 sqrt(x) 返回 x 的平方根 <span style="color:#FF0000;"><span style="color:inherit;">truncate(x,y)</span></span> 返回数字 x 截断为 y 位小数的值 ceil(x) 返回大于或等于 x 的最小整数 floor(x) 返回小于或等于 x 的最大整数 <span style="color:#FF0000;"><span style="color:inherit;">greatest(x1,x2...)</span></span> 返回集合中最大的值，也可以返回多个字段的最大的值 <span style="color:#FF0000;"><span style="color:inherit;">least(x1,x2...)</span></span> 返回集合中最小的值，也可以返回多个字段的最小的值</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">SELECT abs(-1), rand(), mod(5,3), power(2,3), round(1.89);</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c8/de/53EsTxzw_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">SELECT round(1.8937,3), truncate(1.235,2), ceil(5.2), floor(2.1), least(1.89,3,6.1,2.1);</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/29/d0/iOlkyqq0_o.png"></p> 
<h4><strong><span style="color:#333333;">2.2 聚合函数</span></strong></h4> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">avg()</span></span> 返回指定列的平均值</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">SELECT avg(Sales) FROM Store_Info;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/08/d5/RmCHDWMX_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">count()</span></span> 返回指定列中非 NULL 值的个数</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">SELECT count(Store_Name) FROM Store_Info;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ad/11/zej8rtrd_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">SELECT count(DISTINCT Store_Name) FROM Store_Info; 去重并返回非null的值个数，</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/40/74/B8ACl6Eh_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">min()</span></span> 返回指定列的最小值</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">SELECT min(Sales) FROM Store_Info;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b5/e8/pnhrW1n8_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">max()</span></span> 返回指定列的最大值</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">SELECT max(Sales) FROM Store_Info;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e2/d9/9uQPC2rK_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">sum(x)</span></span> 返回指定列的所有值之和</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">SELECT sum(Sales) FROM Store_Info;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/52/cb/GDIddDpk_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">#count(*)包括了所有的列的行数，在统计结果的时候，不会忽略列值为 NULL</span></span> <span style="color:#FF0000;"><span style="color:inherit;">#count(列名) 只包括列名那一列的行数，在统计结果的时候，会忽略列值为 NULL 的行</span></span></span></p> 
<h4><strong><span style="color:#333333;">2.3 字符串函数</span></strong></h4> 
<p style="margin-left:.8em;"><span style="color:#333333;">trim() 返回去除指定格式的值</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1c/2e/6bSnGbLZ_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">concat(x,y)</span></span> 将提供的参数 x 和 y 拼接成一个字符串 x || y</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/db/ab/MFnP6O58_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">substr(x,y)</span></span> 获取从字符串 x 中的第 y 个位置开始一直到 最后的字符串，跟substring()函数作用相同</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8f/40/OfIIX4TI_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">substr(x,y,z)</span></span> 获取从字符串 x 中的第 y 个位置开始长度为 z 的字符串</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b3/ae/UkBj1an3_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">length(x)</span></span> 返回字符串 x 的长度</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/43/4f/9hxnZrQc_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">replace(x,y,z)</span></span> 将字符串 z 替代字符串 x 中的字符串 y</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/77/70/5kOHGEvi_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">upper(x) 将字符串 x 的所有字母变成大写字母</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a1/f0/KKCsPuKJ_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">lower(x) 将字符串 x 的所有字母变成小写字母</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0f/a0/2x3el4Xs_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">left(x,y) 返回字符串 x 的前 y 个字符</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/cb/ae/5S9cPaI7_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">right(x,y) 返回字符串 x 的后 y 个字符</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0b/3f/EUF8uNEc_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">repeat(x,y) 将字符串 x 重复 y 次</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f0/1d/u5jgcO3E_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">space(x) 返回 x 个空格</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/48/61/KFuezAh4_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">strcmp(x,y) 比较 x 和 y，返回的值可以为-1,0,1</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5f/95/eS6msHQB_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">reverse(x) 将字符串 x 倒序输出</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/37/2f/Zz7JVpUz_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">#如sql_mode开启了PIPES_AS_CONCAT，"||"视为字符串的连接操作符而非或运算符，和字符串的拼接函数Concat相类似，这和Oracle数据库使用方法一样的 SELECT Region || ' ' || Store_Name FROM location WHERE Store_Name = 'Boston';</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">SELECT TRIM ([ [位置] [要移除的字符串] FROM ] 字符串); #[位置]：的值可以为 LEADING (起头), TRAILING (结尾), BOTH (起头及结尾)。 #[要移除的字符串]：从字串的起头、结尾，或起头及结尾移除的字符串。缺省时为空格。</span></p> 
<h6><strong><span style="color:#333333;">GROUP BY </span></strong></h6> 
<h6><strong><span style="color:#333333;">对GROUP BY后面的字段的查询结果进行汇总分组，通常是结合聚合函数一起使用的</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">GROUP BY 有一个原则，凡是在 GROUP BY 后面出现的字段，必须在 SELECT 后面出现； 凡是在 SELECT 后面出现的、且未在聚合函数中出现的字段，必须出现在 GROUP BY 后面</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "字段1", SUM("字段2") FROM "表名" GROUP BY "字段1"; SELECT Store_Name, SUM(Sales) FROM Store_Info GROUP BY Store_Name ORDER BY sales desc;</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">select 列名，聚合函数（列名） from 表名 group by 列名； 分组，通常会结合聚合函数使用</span></span></span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/79/3f/7XcHxyWw_o.png"></p> 
<h6><strong><span style="color:#333333;">HAVING </span></strong></h6> 
<h6><strong><span style="color:#333333;">用来过滤由 GROUP BY 语句返回的记录集，通常与 GROUP BY 语句联合使用</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">因为where的执行顺序要先于select，所以要用HAVING 代替where使用</span></span></span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">HAVING 语句的存在弥补了 WHERE 关键字不能与聚合函数联合使用的不足。 语法：SELECT "字段1", SUM("字段2") FROM "表格名" GROUP BY "字段1" HAVING (函数条件); SELECT Store_Name, SUM(Sales) FROM Store_Info GROUP BY Store_Name HAVING SUM(Sales) &gt; 1500;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/34/33/C2Mrrc3V_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">select 列名，聚合函数（列名） from 表名 group by 列名 having 条件表达式；</span></span></span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">having的作用根据group by的语句返回结果过滤</span></span></span></p> 
<h6><strong><span style="color:#333333;">别名（字段別名 表格別名）</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "表格別名"."字段1" [AS] "字段別名" FROM "表格名" [AS] "表格別名"; SELECT A.Store_Name Store, SUM(A.Sales) "Total Sales" FROM Store_Info A GROUP BY A.Store_Name; </span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">select 列名 AS 字段别名 from 表名 AS 表别名；</span></span></span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f4/52/y5kRM0ym_o.png"></p> 
<h6><strong><span style="color:#333333;">子查询（连接表格，在WHERE 子句或 HAVING 子句中插入另一个 SQL 语句）</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">语法：SELECT "字段1" FROM "表格1" WHERE "字段2" [比较运算符] #外查询 (SELECT "字段1" FROM "表格2" WHERE "条件"); #内查询</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">#可以是符号的运算符，例如 =、&gt;、&lt;、&gt;=、&lt;= ；也可以是文字的运算符，例如 LIKE、IN、BETWEEN select store_name,sum(sales) from store_info where store_name in(select store_nameme from location where region = 'west');</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/29/c2/8fpW4mqL_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">select sum(A.sales) from store_info A where A.store_name in (select store_name from location B where B.store_name = A.store_name);</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/aa/b2/QCNxlTxR_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">select 列名 from 表名 where 表名 运算符 （select 列名 from 表名 where 表名）</span></span></span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;"><span style="color:#FF0000;"><span style="color:inherit;">外查询 </span></span> <span style="color:#FF0000;"><span style="color:inherit;"> 内查询（内查询的结果会作为外查询的条件来使用）</span></span></span></p> 
<h3><strong><span style="color:#333333;">3 表连接查询</span></strong></h3> 
<h4><strong><span style="color:#333333;">3.1 表连接</span></strong></h4> 
<p style="margin-left:.8em;"><span style="color:#333333;">inner join 内连接 只返回两个表的字段相等的行记录</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">left join 左连接 返回左表所有的行记录和右表字段相等的行记录</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">right join 右连接 返回右表所有的行记录和右表字段相等的行记录 </span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">union 联集 将两个select查询语句的结果合并，并去重</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">union all 联集 将两个select查询语句的结果合并，并去重</span></p> 
<h4><strong><span style="color:#333333;">3.2 联集</span></strong></h4> 
<h6><strong><span style="color:#333333;">内连接 (有交集)</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">select A.列名 from 左表 as A inner join 右表 as B on A.列名 = B.列名；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6c/3a/iQ0ahzW7_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">select A.列名 from 左表 as A inner join 右表 as B using(同名列名)；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/40/62/CY4K3Z67_o.png"></p> 
<h6><strong><span style="color:#333333;">左右连接（有交集）</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">select A.列名 from 左表 as A left join 右表 as B on A.列名 = B.列名 where B.列名 字段 is not null；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0b/3a/cGA6HG7p_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">select B.列名 from 左表 as A right join 右表 as B on A.列名 = B.列名 where A.列名 is not null；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/59/35/i5hBMzax_o.png"></p> 
<h6><strong><span style="color:#333333;">多表查询（有交集）</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">select A.列名 from 左表 A，右表 B where A.列名 = B.列名；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b8/1b/RVdeaU9S_o.png"></p> 
<h6><strong><span style="color:#333333;">子查询（有交集）</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">select A.列名 from 左表 A where A.列名 in （select B.列名 from 右表 B）；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/49/b5/nfkb20u6_o.png"></p> 
<h6><strong><span style="color:#333333;">分组统计（有交集）</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">select A.列名，count（列名） from （select distinct 列名 from 左表 union all select distinct 列名 from 右表）A group by A.列名 having count（列名）&gt; 1;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/37/1d/JK3gZoaS_o.png"></p> 
<h6><strong><span style="color:#333333;">左连接（求左表无交集）左表有右表没有的</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">select [distinct] A.列名 from 左表 as A left join 右表 as B on A.列名 = B.列名 where B.列名 is null;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d7/ce/VdpZv1kY_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">select A.列名 from 左表 A where A where A.列名 not in （select B.列名 from 右表 B）；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/51/81/A7HkncXY_o.png"></p> 
<h6><strong><span style="color:#333333;">右连接（求右表无交集）右表有左表没有的</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">select [distinct] B.列名 from 左表 as A right join 右表 as B on A.列名 = B.列名 where A.列名 is null；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/77/2c/1DBZHCs7_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">select B.列名 from 右表 B where B.列名 in (select A.列名 from 左表 A);</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ab/e2/7Kukfw0c_o.png"></p> 
<h6><strong><span style="color:#333333;">求两个表无交集的</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">select A.列名 from 左表 as A left join 右表 as B on A.列名 = B.列名 where B.列名 is null union select B.列名 from 左表 as A right join 右表 as B on A.列名 = B.列名 where A.列名 is null；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8d/49/h9ULXgYo_o.png"></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">select A.列名 from (select distinct 列名 from 左表 union all select distinct 列名 from 右表) A group by A.列名 having count(A.列名) = 1；</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a1/8f/JIrhc3EN_o.png"></p> 
<h4><strong><span style="color:#333333;">3.3 视图表</span></strong></h4> 
<h6><strong><span style="color:#333333;">创建视图</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">create view V_自定义名 as （select语句）</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/71/c4/7V8DXpYX_o.png"></p> 
<h6><strong><span style="color:#333333;">视图表保存的是select查询语句的定义</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">如果select语句查询的字段是没有被处理过的源表字段，则可以通过视图表修改源表数据。</span></p> 
<p style="margin-left:.8em;"><span style="color:#333333;">如果select语句查询的字段是被group by或函数处理过的字段，则不可以通过视图表直接修改视图表的数据。 </span></p> 
<h6><strong><span style="color:#333333;">视图表模式查看两个表无交集</span></strong></h6> 
<p style="margin-left:.8em;"><span style="color:#333333;">create view 视图表名 as select distinct 字段 from 左表 union all select distinct 字段 from 右表; select 字段 from 视图表名 group by 字段 having count(字段) = 1;</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4a/08/1TaysO39_o.png"></p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/27130f45db40e983f3979656dd747038/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">入门使用mybatis-plus</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb0bf8e3daac0068b6802356455af995/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">大模型上下文长度的超强扩展：从LongLoRA到LongQLoRA</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>