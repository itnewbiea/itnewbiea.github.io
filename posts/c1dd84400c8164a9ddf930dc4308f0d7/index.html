<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Servlet入门1——第一個Servlet程式 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Servlet入门1——第一個Servlet程式" />
<meta property="og:description" content="從Java程式設計人員的角度來看，Servlet其實就是一個Java類別，它實作 javax.servlet.Servlet介面，通常會繼承實作該介面的javax.servlet.GenericServlet類別或javax.servlet.http.HttpServlet類別，前者用於與協定無關的Servlet，後者專門適於處理HTTP請求與回應的Servlet。
繼承GenericServlet類別的Servlet通常會改寫service()方法，而繼承HttpServlet類別的 service()會處理request並傳送給doXXX()方法，例如doGet()或doPost()方法，通常很少會去改寫service()，而是改寫doGet()或doPost()方法，下面就仍以一個簡單的Hello!Servlet!來示範如何撰寫與設定Servlet，讓其可以傳回一個 HTML網頁顯示Hello!Servlet!文字： HelloServlet.java
package onlyfun.caterpillar;
import java.io.*; import javax.servlet.*; import javax.servlet.http.*; public class HelloServlet extends HttpServlet { public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException { res.setContentType(&#34;text/html&#34;); PrintWriter out = res.getWriter(); out.println(&#34;&lt;html&gt;&#34;); out.println(&#34;&lt;head&gt;&#34;);
out.println(&#34;&lt;title&gt;Hello!Servlet!&lt;/title&gt;&#34;);
out.println(&#34;&lt;/head&gt;&#34;); out.println(&#34;&lt;body&gt;&#34;); out.println(&#34;&lt;h1&gt;&lt;b&gt;Hello!Servlet!&lt;/b&gt;&lt;/h1&gt;&#34;); out.println(&#34;&lt;/body&gt;&#34;); out.println(&#34;&lt;/html&gt;&#34;); } } 為了要能編譯上面這個類別，您需要將servlet-api.jar加至CLASSPATH中，在Tomcat的話servlet-api.jar是放在 common/lib目錄下。
doGet()處理客戶端請求的GET方法，只要是客戶端請求資源時是使用GET方法，就會呼叫它來處理，它獲得兩個參數，分別表示用戶端的請求與回應，您可以回憶一下JSP的隱含物件request與response，其對應的就是HttpServletRequest與 HttpServletResponse物件，您由HttpServletResponse物件取得寫出至用戶端的PrintWriter物件，並寫出一個HTML網頁至用戶端，PrintWriter物件可以使用println()方法將資料寫出。
假設您的Web應用程式位於webapps/myServlet/下，則編譯完成的Servlet類別必須放置在WEB-INF/classes/之下，為了要讓容器能知道這個Servlet的存在並實例化，您必須在WEB-INF/web.xml中告知： web.xml &lt;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34;?&gt; &lt;web-app xmlns=&#34;http://java.sun.com/xml/ns/j2ee&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&#34; version=&#34;2.4&#34;&gt; &lt;description&gt; My Servlet Examples. &lt;/description&gt; &lt;display-name&gt;Servlet Examples&lt;/display-name&gt; &lt;servlet&gt; &lt;servlet-name&gt;hello&lt;/servlet-name&gt; &lt;servlet-class&gt;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/c1dd84400c8164a9ddf930dc4308f0d7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2007-05-19T17:27:00+08:00" />
<meta property="article:modified_time" content="2007-05-19T17:27:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Servlet入门1——第一個Servlet程式</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <font size="2">從Java程式設計人員的角度來看，Servlet其實就是一個Java類別，它實作<span style="FONT-WEIGHT: bold"> javax.servlet.Servlet</span>介面，通常會繼承實作該介面的<span style="FONT-WEIGHT: bold">javax.servlet.GenericServlet</span>類別或<span style="FONT-WEIGHT: bold">javax.servlet.http.HttpServlet</span>類別，前者用於與協定無關的Servlet，後者專門適於處理HTTP請求與回應的Servlet。<br><br>繼承GenericServlet類別的Servlet通常會改寫<span style="FONT-WEIGHT: bold">service()</span>方法，而繼承HttpServlet類別的 service()會處理request並傳送給doXXX()方法，例如doGet()或doPost()方法，通常很少會去改寫service()，而是改寫<span style="FONT-WEIGHT: bold">doGet()</span>或<span style="FONT-WEIGHT: bold">doPost()</span>方法，下面就仍以一個簡單的Hello!Servlet!來示範如何撰寫與設定Servlet，讓其可以傳回一個 HTML網頁顯示Hello!Servlet!文字：</font> 
<br> 
<ul><li>HelloServlet.java<br></li></ul> 
<pre>package onlyfun.caterpillar;<br> <br>import java.io.*; <br>import javax.servlet.*; <br>import javax.servlet.http.*; <br> <br>public class HelloServlet extends HttpServlet { <br>    public void doGet(HttpServletRequest req, <br>                      HttpServletResponse res) <br>                  throws ServletException, IOException { <br>        res.setContentType("text/html"); <br>        PrintWriter out = res.getWriter(); <br> <br>        out.println("&lt;html&gt;"); <br>        out.println("&lt;head&gt;");<br>        out.println("&lt;title&gt;Hello!Servlet!&lt;/title&gt;");<br>        out.println("&lt;/head&gt;"); <br>        out.println("&lt;body&gt;"); <br>        out.println("&lt;h1&gt;&lt;b&gt;Hello!Servlet!&lt;/b&gt;&lt;/h1&gt;"); <br>        out.println("&lt;/body&gt;"); <br>        out.println("&lt;/html&gt;"); <br>    } <br>}</pre> 
<br> 
<small><font size="2">為了要能編譯上面這個類別，您需要將servlet-api.jar加至CLASSPATH中，在Tomcat的話servlet-api.jar是放在 common/lib目錄下。<br><br>doGet()處理客戶端請求的GET方法，只要是客戶端請求資源時是使用GET方法，就會呼叫它來處理，它獲得兩個參數，分別表示用戶端的請求與回應，您可以回憶一下<span style="FONT-WEIGHT: bold">JSP的隱含物件request與response，其對應的就是HttpServletRequest與 HttpServletResponse物件</span>，您由HttpServletResponse物件取得寫出至用戶端的PrintWriter物件，並寫出一個HTML網頁至用戶端，PrintWriter物件可以使用println()方法將資料寫出。<br><br>假設您的Web應用程式位於webapps/myServlet/下，則編譯完成的Servlet類別必須放置在WEB-INF/classes/之下，為了要讓容器能知道這個Servlet的存在並實例化，您必須在WEB-INF/web.xml中告知：</font></small> 
<br> 
<ul><li>web.xml </li></ul> 
<pre>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt; <br> <br>&lt;web-app xmlns="http://java.sun.com/xml/ns/j2ee" <br>    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" <br>    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee <br>          http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" <br>    version="2.4"&gt; <br> <br>    &lt;description&gt; <br>        My Servlet Examples. <br>    &lt;/description&gt; <br>    &lt;display-name&gt;Servlet Examples&lt;/display-name&gt; <br> <br>    &lt;servlet&gt; <br>        &lt;servlet-name&gt;hello&lt;/servlet-name&gt; <br>        &lt;servlet-class&gt;<br>            onlyfun.caterpillar.HelloServlet<br>        &lt;/servlet-class&gt; <br>    &lt;/servlet&gt;<br> <br>    &lt;servlet-mapping&gt; <br>        &lt;servlet-name&gt;hello&lt;/servlet-name&gt; <br>        &lt;url-pattern&gt;/helloServlet&lt;/url-pattern&gt; <br>    &lt;/servlet-mapping&gt; <br>  <br>&lt;/web-app&gt;</pre> 
<br> 
<small><font size="2">在容器實例化並初始化Servlet並給予相關環境物件之前，Servlet只不過是個普通的Java類別，並不具備有Servlet的該有的功能，容器會為每一個註冊的&lt;servlet-name&gt;實例化一個&lt;servlet-class&gt;指定的類別，而&lt;url- pattern&gt;用於指定與&lt;servlet-name&gt;對應的Servlet實例，經由這麽指定，在啟動 Tomcat之後，您可以透過這樣的網址來執行Servlet： <br></font></small> 
<div style="MARGIN-LEFT: 40px"> 
 <small><font size="2"><span style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace">http://localhost:8080/myServlet/helloServlet</span><br></font></small> 
</div> 
<small><br><font size="2">當然，如果您想要的話，也可以在&lt;url-pattern&gt;中偽裝Servlet，例如偽裝為PHP網頁，就設定為 /helloworld.php。<br><br>下面是Servlet的傳回結果：<br></font></small> 
<div style="MARGIN-LEFT: 40px"> 
 <small><font size="2"><span style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace">&lt;html&gt;</span><br style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace"><span style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace">&lt;head&gt;</span><br style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace"><span style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace">&lt;title&gt;Hello!Servlet!&lt;/title&gt;</span><br style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace"><span style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace">&lt;/head&gt;</span><br style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace"><span style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace">&lt;body&gt;</span><br style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace"><span style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace">&lt;h1&gt;&lt;b&gt;Hello!Servlet!&lt;/b&gt;&lt;/h1&gt;</span><br style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace"><span style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace">&lt;/body&gt;</span><br style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace"><span style="FONT-WEIGHT: bold; FONT-FAMILY: Courier New,Courier,monospace">&lt;/html&gt;</span><br></font></small> 
</div> 
<small><font size="2"> <br><br>事實上，上面的程式只是為了示範而已，在MVC架構中，Servlet中是不會出現out.println()這樣的陳述句的，在Servlet中撰寫 HTML或視圖相關的邏輯基本上是不被鼓勵的，Servlet在 </font><a href="http://caterpillar.onlyfun.net/Gossip/JSPServlet/Model2Pattern.htm" rel="nofollow"><font size="2">Model 2</font></a><font size="2"> 架構中主要是擔任控制者（Controller）的角色。<br><br>PS. 廣義的來說，容器藉由使用者的請求網址決定該由哪一個Servlet來處理請求，本身也是控制器的角色，但實際上很少將容器用於控制器角色上，而是設計一個Servlet來處理請求轉發，將控制器的角色由該Servlet擔任。</font></small> 
<br>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b5f9697ad34b2d47001425b78b21c5b4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java调用C的dll</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ef70fe233023e2cea27e6998892b33d8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在JavaScript中利用for(…in…)语句实现反射</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>