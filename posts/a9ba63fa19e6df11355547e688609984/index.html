<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>mysql查询表里的重复数据方法： - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="mysql查询表里的重复数据方法：" />
<meta property="og:description" content="1
2
3
4
INSERT INTO hk_test(username, passwd) VALUES
(&#39;qmf1&#39;, &#39;qmf1&#39;),(&#39;qmf2&#39;, &#39;qmf11&#39;)
delete from hk_test where username=&#39;qmf1&#39; and passwd=&#39;qmf1&#39;
MySQL里查询表里的重复数据记录：
先查看重复的原始数据：
场景一：列出username字段有重读的数据
1
2
3
select username,count(*) as count from hk_test group by username having count&gt;1;
SELECT username,count(username) as count FROM hk_test GROUP BY username HAVING count(username) &gt;1 ORDER BY count DESC;
这种方法只是统计了该字段重复对应的具体的个数
场景二：列出username字段重复记录的具体指：
1
2
3
4
5
select * from hk_test where username in (select username from hk_test group by username having count(username) &gt; 1)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/a9ba63fa19e6df11355547e688609984/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-02T17:55:37+08:00" />
<meta property="article:modified_time" content="2024-01-02T17:55:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mysql查询表里的重复数据方法：</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2></h2> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> </td><td> <p><code>INSERT INTO hk_test(username, passwd) VALUES</code></p> <p><code>(</code><code>'qmf1'</code><code>, </code><code>'qmf1'</code><code>),(</code><code>'qmf2'</code><code>, </code><code>'qmf11'</code><code>)</code></p> <p></p> <p><code>delete from hk_test where username=</code><code>'qmf1'</code> <code>and passwd=</code><code>'qmf1'</code></p> </td></tr></tbody></table> 
<p></p> 
<p class="img-center"><img alt="" height="564" src="https://images2.imgbox.com/87/41/W8o59fOj_o.png" width="413"></p> 
<p></p> 
<p></p> 
<p>MySQL里查询表里的重复数据记录：</p> 
<p>先查看重复的原始数据：</p> 
<p></p> 
<p class="img-center"><img alt="" height="447" src="https://images2.imgbox.com/1d/09/KYRWcq2h_o.png" width="380"></p> 
<p>场景一：列出username字段有重读的数据</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> </td><td> <p><code>select username,count(*) as count from hk_test group by username having count&gt;</code><code>1</code><code>;</code></p> <p></p> <p><code>SELECT username,count(username) as count FROM hk_test GROUP BY username HAVING count(username) &gt;</code><code>1</code> <code>ORDER BY count DESC;</code></p> </td></tr></tbody></table> 
<p></p> 
<p class="img-center"><img alt="" height="237" src="https://images2.imgbox.com/92/5b/wL1FQ6ts_o.png" width="639"></p> 
<p>这种方法只是统计了该字段重复对应的具体的个数</p> 
<p></p> 
<p>场景二：列出username字段重复记录的具体指：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> </td><td> <p><code>select * from hk_test where username in (select username from hk_test group by username having count(username) &gt; </code><code>1</code><code>)</code></p> <p></p> <p><code>SELECT username,passwd FROM hk_test WHERE username in ( SELECT username FROM hk_test GROUP BY username HAVING count(username)&gt;</code><code>1</code><code>)</code></p> <p></p> <p><code>但是这条语句在mysql中效率太差，感觉mysql并没有为子查询生成临时表。在数据量大的时候，耗时很长时间</code></p> </td></tr></tbody></table> 
<p></p> 
<p class="img-center"><img alt="" height="253" src="https://images2.imgbox.com/fb/fd/w3qZLT1D_o.png" width="788"></p> 
<p></p> 
<p>解决方法：</p> 
<p></p> 
<p class="img-center"><img alt="" height="640" src="https://images2.imgbox.com/d0/b0/TmIGKcLK_o.png" width="666"></p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> <p>9</p> <p>10</p> <p>11</p> <p>12</p> <p>13</p> <p>14</p> <p>15</p> <p>16</p> <p>17</p> <p>18</p> <p>19</p> <p>20</p> <p>21</p> <p>22</p> <p>23</p> <p>24</p> </td><td> <p><code>于是使用先建立临时表 </code></p> <p><code>复制代码 代码如下:</code></p> <p></p> <p><code>create table `tmptable` as ( </code></p> <p><code>SELECT `name` </code></p> <p><code>FROM `table` </code></p> <p><code>GROUP BY `name` HAVING count(`name`) &gt;</code><code>1</code> </p> <p><code>); </code></p> <p></p> <p><code>然后使用多表连接查询</code></p> <p><code>复制代码 代码如下:</code></p> <p></p> <p><code>SELECT a.`id`, a.`name` </code></p> <p><code>FROM `table` a, `tmptable` t </code></p> <p><code>WHERE a.`name` = t.`name`; </code></p> <p></p> <p><code>结果这次结果很快就出来了。</code></p> <p></p> <p><code>用 distinct去重复</code></p> <p><code>复制代码 代码如下:</code></p> <p></p> <p><code>SELECT distinct a.`id`, a.`name` </code></p> <p><code>FROM `table` a, `tmptable` t </code></p> <p><code>WHERE a.`name` = t.`name`;</code></p> </td></tr></tbody></table> 
<p></p> 
<p></p> 
<p>场景三：查看两个字段都重复的记录：比如username和passwd两个字段都有重复的记录：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> </td><td> <p><code>select * from hk_test a</code></p> <p><code>where (a.username,a.passwd) in (select username,passwd from hk_test group by username,passwd having count(*) &gt; </code><code>1</code><code>)</code></p> </td></tr></tbody></table> 
<p></p> 
<p class="img-center"><img alt="" height="238" src="https://images2.imgbox.com/5f/7b/zTETbvAu_o.png" width="760"></p> 
<p></p> 
<p>场景四：查询表中多个字段同时重复的记录：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> </td><td> <p><code>select username,passwd,count(*) from hk_test group by username,passwd having count(*) &gt; </code><code>1</code></p> </td></tr></tbody></table> 
<p></p> 
<p class="img-center"><img alt="" height="165" src="https://images2.imgbox.com/ae/46/0LdWQ8sK_o.png" width="628"></p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> <p>9</p> <p>10</p> <p>11</p> <p>12</p> <p>13</p> <p>14</p> <p>15</p> <p>16</p> <p>17</p> <p>18</p> <p>19</p> <p>20</p> <p>21</p> <p>22</p> <p>23</p> <p>24</p> <p>25</p> <p>26</p> <p>27</p> <p>28</p> <p>29</p> <p>30</p> <p>31</p> <p>32</p> <p>33</p> <p>34</p> <p>35</p> <p>36</p> <p>37</p> <p>38</p> <p>39</p> <p>40</p> <p>41</p> <p>42</p> <p>43</p> <p>44</p> <p>45</p> <p>46</p> <p>47</p> <p>48</p> <p>49</p> <p>50</p> <p>51</p> <p>52</p> <p>53</p> <p>54</p> <p>55</p> <p>56</p> <p>57</p> <p>58</p> <p>59</p> <p>60</p> </td><td> <p><code>MySQL查询表内重复记录</code></p> <p></p> <p><code>查询及删除重复记录的方法</code></p> <p><code>(一)</code></p> <p><code>1</code><code>、查找表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断</code></p> <p><code>select * </code></p> <p><code>from people</code></p> <p><code>where peopleId in (select peopleId from people group by peopleId having count(peopleId)&gt;</code><code>1</code><code>)</code></p> <p></p> <p><code>2</code><code>、删除表中多余的重复记录，重复记录是根据单个字段（peopleId）来判断，只留有一个记录</code></p> <p><code>delete from people</code></p> <p><code>where peopleId in (select peopleId </code></p> <p><code>from people group by peopleId having count(peopleId)&gt;</code><code>1</code><code>)</code></p> <p><code>and min(id) not </code></p> <p><code>in (select id from people group by peopleId having count(peopleId)&gt;</code><code>1</code><code>)</code></p> <p></p> <p><code>3</code><code>、查找表中多余的重复记录（多个字段）</code></p> <p><code>select * from vitae a</code></p> <p><code>where (a.peopleId,a.seq) in </code></p> <p><code>(select peopleId,seq from vitae group by peopleId,seq having count(*)&gt;</code><code>1</code><code>)</code></p> <p></p> <p><code>4</code><code>、删除表中多余的重复记录（多个字段），只留有rowid最小的记录</code></p> <p><code>delete from vitae a</code></p> <p><code>where </code></p> <p><code>(a.peopleId,a.seq) in (select peopleId,seq from vitae group by peopleId,seq </code></p> <p><code>having count(*) &gt; </code><code>1</code><code>)</code></p> <p><code>and rowid not in (select min(rowid) from vitae group </code></p> <p><code>by peopleId,seq having count(*)&gt;</code><code>1</code><code>)</code></p> <p></p> <p><code>5</code><code>、查找表中多余的重复记录（多个字段），不包含rowid最小的记录</code></p> <p><code>select * from vitae a</code></p> <p><code>where </code></p> <p><code>(a.peopleId,a.seq) in (select peopleId,seq from vitae group by peopleId,seq </code></p> <p><code>having count(*) &gt; </code><code>1</code><code>)</code></p> <p><code>and rowid not in (select min(rowid) from vitae group </code></p> <p><code>by peopleId,seq having count(*)&gt;</code><code>1</code><code>)</code></p> <p></p> <p><code>(二)</code></p> <p><code>比方说</code></p> <p><code>在A表中存在一个字段“name”，而且不同记录之间的“name”值有可能会相同，现在就是需要查询出在该表中的各记录之间，“name”值存在重复的项；</code></p> <p><code>Select Name,Count(*) From A Group By Name Having Count(*) &gt; </code><code>1</code></p> <p><code>如果还查性别也相同大则如下:</code></p> <p><code>Select Name,sex,Count(*) From A Group By Name,sex Having Count(*) &gt; </code><code>1</code></p> <p></p> <p><code>(三)</code></p> <p><code>方法一</code></p> <p><code>declare </code><code>@max</code> <code>integer,</code><code>@id</code> <code>integer</code></p> <p><code>declare cur_rows cursor local </code><code>for</code> <code>select 主字段,count(*) from 表名 group by 主字段 </code></p> <p><code>having count(*) &gt;； </code><code>1</code></p> <p><code>open cur_rows</code></p> <p><code>fetch cur_rows into </code><code>@id</code><code>,</code><code>@max</code></p> <p><code>while</code> <code>@</code><code>@fetch_status</code><code>=</code><code>0</code></p> <p><code>begin</code></p> <p><code>select </code><code>@max</code> <code>= </code><code>@max</code> <code>-</code><code>1</code></p> <p><code>set rowcount </code><code>@max</code></p> <p><code>delete from 表名 where 主字段 = </code><code>@id</code></p> <p><code>fetch cur_rows into </code><code>@id</code><code>,</code><code>@max</code></p> <p><code>end</code></p> <p><code>close cur_rows</code></p> <p><code>set rowcount </code><code>0</code></p> </td></tr></tbody></table> 
<p></p> 
<p></p> 
<p class="img-center"><img alt="" height="381" src="https://images2.imgbox.com/99/19/mILVuOev_o.png" width="971"></p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> <p>9</p> <p>10</p> <p>11</p> <p>12</p> <p>13</p> <p>14</p> <p>15</p> <p>16</p> <p>17</p> <p>18</p> <p>19</p> <p>20</p> <p>21</p> <p>22</p> <p>23</p> <p>24</p> <p>25</p> <p>26</p> <p>27</p> <p>28</p> <p>29</p> <p>30</p> <p>31</p> <p>32</p> <p>33</p> <p>34</p> <p>35</p> <p>36</p> <p>37</p> <p>38</p> <p>39</p> <p>40</p> <p>41</p> <p>42</p> <p>43</p> <p>44</p> <p>45</p> <p>46</p> <p>47</p> <p>48</p> </td><td> <p><code>SELECT * from tab1 where CompanyName in( SELECT companyname from tab1 GROUP BY CompanyName HAVING COUNT(*)&gt;</code><code>1</code><code>);</code></p> <p><code>-- </code><code>129</code><code>.433ms </code></p> <p></p> <p><code>SELECT * from tab1 INNER join ( SELECT companyname from tab1 GROUP BY CompanyName HAVING COUNT(*)&gt;</code><code>1</code><code>) as tab2 USING(CompanyName);</code></p> <p><code>-- </code><code>0</code><code>.482ms</code></p> <p></p> <p></p> <p></p> <p></p> <p><code>方法二</code></p> <p></p> <p><code>　　有两个意义上的重复记录，一是完全重复的记录，也即所有字段均重复的记录，二是部分关键字段重复的记录，比如Name字段重复，而其他字段不一定重复或都重复可以忽略。</code></p> <p></p> <p><code>　　</code><code>1</code><code>、对于第一种重复，比较容易解决，使用</code></p> <p></p> <p><code>select distinct * from tableName</code></p> <p></p> <p><code>　　就可以得到无重复记录的结果集。</code></p> <p></p> <p><code>　　如果该表需要删除重复的记录（重复记录保留</code><code>1</code><code>条），可以按以下方法删除</code></p> <p></p> <p><code>select distinct * into #Tmp from tableName</code></p> <p></p> <p><code>drop table tableName</code></p> <p></p> <p><code>select * into tableName from #Tmp</code></p> <p></p> <p><code>drop table #Tmp</code></p> <p></p> <p><code>　　发生这种重复的原因是表设计不周产生的，增加唯一索引列即可解决。</code></p> <p></p> <p><code>2</code><code>、这类重复问题通常要求保留重复记录中的第一条记录，操作方法如下</code></p> <p></p> <p><code>　　假设有重复的字段为Name,Address，要求得到这两个字段唯一的结果集</code></p> <p></p> <p><code>select identity(</code><code>int</code><code>,</code><code>1</code><code>,</code><code>1</code><code>) as autoID, * into #Tmp from tableName</code></p> <p></p> <p><code>select min(autoID) as autoID into #Tmp2 from #Tmp group by Name,autoID</code></p> <p></p> <p><code>select * from #Tmp where autoID in(select autoID from #tmp2)</code></p> <p></p> <p><code>最后一个select即得到了Name，Address不重复的结果集（但多了一个autoID字段，实际写时可以写在select子句中省去此列）</code></p> <p></p> <p><code>(四)查询重复</code></p> <p></p> <p><code>select * from tablename where id in (</code></p> <p></p> <p><code>select id from tablename group by id having count(id) &gt; </code><code>1</code><code>)</code></p> </td></tr></tbody></table> 
<p></p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> <p>9</p> <p>10</p> <p>11</p> <p>12</p> <p>13</p> <p>14</p> <p>15</p> <p>16</p> <p>17</p> <p>18</p> <p>19</p> <p>20</p> <p>21</p> <p>22</p> <p>23</p> <p>24</p> <p>25</p> <p>26</p> <p>27</p> <p>28</p> <p>29</p> <p>30</p> <p>31</p> <p>32</p> <p>33</p> <p>34</p> <p>35</p> <p>36</p> <p>37</p> <p>38</p> <p>39</p> <p>40</p> <p>41</p> <p>42</p> <p>43</p> <p>44</p> <p>45</p> <p>46</p> <p>47</p> <p>48</p> <p>49</p> <p>50</p> <p>51</p> <p>52</p> <p>53</p> <p>54</p> <p>55</p> <p>56</p> <p>57</p> <p>58</p> <p>59</p> <p>60</p> <p>61</p> <p>62</p> <p>63</p> <p>64</p> <p>65</p> <p>66</p> <p>67</p> <p>68</p> <p>69</p> <p>70</p> <p>71</p> <p>72</p> <p>73</p> <p>74</p> <p>75</p> <p>76</p> <p>77</p> <p>78</p> <p>79</p> <p>80</p> <p>81</p> <p>82</p> <p>83</p> <p>84</p> <p>85</p> <p>86</p> <p>87</p> <p>88</p> <p>89</p> <p>90</p> <p>91</p> <p>92</p> <p>93</p> <p>94</p> </td><td> <p><code>常用的语句</code></p> <p></p> <p><code>1</code><code>、查找表中多余的重复记录，重复记录是根据单个字段（mail_id）来判断</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code> </code><code>SELECT * FROM table WHERE mail_id IN (SELECT mail_id FROM table GROUP BY mail_id HAVING COUNT(mail_id) &gt; </code><code>1</code><code>);</code></p> <p><code> </code> </p> <p></p> <p><code>2</code><code>、删除表中多余的重复记录，重复记录是根据单个字段（mail_id）来判断，只留有rowid最小的记录</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code>DELETE FROM table WHERE mail_id IN (SELECT mail_id FROM table GROUP BY mail_id HAVING COUNT(mail_id) &gt; </code><code>1</code><code>) AND rowid NOT IN (SELECT MIN(rowid) FROM table GROUP BY mail_id HAVING COUNT(mail_id )&gt;</code><code>1</code><code>);</code></p> <p><code> </code> </p> <p></p> <p><code>3</code><code>、查找表中多余的重复记录（多个字段）</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code>SELECT * FROM table WHERE (mail_id,phone) IN (SELECT mail_id,phone FROM table GROUP BY mail_id,phone HAVING COUNT(*) &gt; </code><code>1</code><code>);</code></p> <p><code> </code> </p> <p></p> <p><code>4</code><code>、删除表中多余的重复记录（多个字段），只留有rowid最小的记录</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code> </code><code>DELETE FROM table WHERE (mail_id,phone) IN (SELECT mail_id,phone FROM table GROUP BY mail_id,phone HAVING COU(www.111cn.net)NT(*) &gt; </code><code>1</code><code>) AND rowid NOT IN (SELECT MIN(rowid) FROM table GROUP BY mail_id,phone HAVING COUNT(*)&gt;</code><code>1</code><code>);</code></p> <p><code> </code> </p> <p></p> <p><code>5</code><code>、查找表中多余的重复记录（多个字段），不包含rowid最小的记录</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code>SELECT * FROM table WHERE (a.mail_id,a.phone) IN (SELECT mail_id,phone FROM table GROUP BY mail_id,phone HAVING COUNT(*) &gt; </code><code>1</code><code>) AND rowid NOT IN (SELECT MIN(rowid) FROM table GROUP BY mail_id,phone HAVING COUNT(*)&gt;</code><code>1</code><code>);</code></p> <p><code> </code> </p> <p></p> <p><code>存储过程</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code>declare </code><code>@max</code> <code>integer,</code><code>@id</code> <code>integer</code></p> <p></p> <p><code>declare cur_rows cursor local </code><code>for</code> <code>select 主字段,count(*) from 表名 group by 主字段 having count(*) &gt;； </code><code>1</code></p> <p></p> <p><code>open cur_rows</code></p> <p></p> <p><code>fetch cur_rows into </code><code>@id</code><code>,</code><code>@max</code></p> <p></p> <p><code>while</code> <code>@</code><code>@fetch_status</code><code>=</code><code>0</code></p> <p></p> <p><code>begin</code></p> <p></p> <p><code>select </code><code>@max</code> <code>= </code><code>@max</code> <code>-</code><code>1</code></p> <p></p> <p><code>set rowcount </code><code>@max</code></p> <p></p> <p><code>delete from 表名 where 主字段 = </code><code>@id</code></p> <p></p> <p><code>fetch cur_rows into </code><code>@id</code><code>,</code><code>@max</code></p> <p></p> <p><code>end</code></p> <p></p> <p><code>close cur_rows</code></p> <p></p> <p><code>set rowcount </code><code>0</code></p> <p><code> </code> </p> <p><code> </code> </p> <p></p> <p><code>(一)单个字段</code></p> <p></p> <p><code>1</code><code>、查找表中多余的重复记录，根据（question_title）字段来判断</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code>select * from questions where question_title in (select question_title from people group by question_title having count(question_title) &gt; </code><code>1</code><code>)</code></p> <p><code> </code> </p> <p></p> <p><code>2</code><code>、删除表中多余的重复记录，根据（question_title）字段来判断，只留有一个记录</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code>delete from questions</code></p> <p><code>where peopleId in (select peopleId from people group by peopleId having count(question_title) &gt; </code><code>1</code><code>)</code></p> <p><code>and min(id) not in (select question_id from questions group by question_title having count(question_title)&gt;</code><code>1</code><code>) </code></p> <p></p> <p><code>(二)多个字段</code></p> <p></p> <p><code>删除表中多余的重复记录（多个字段），只留有rowid最小的记录</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code>DELETE FROM questions WHERE (questions_title,questions_scope) IN (SELECT questions_title,questions_scope FROM que(www.111cn.net)stions GROUP BY questions_title,questions_scope HAVING COUNT(*) &gt; </code><code>1</code><code>) AND question_id NOT IN (SELECT MIN(question_id) FROM questions GROUP BY questions_scope,questions_title HAVING COUNT(*)&gt;</code><code>1</code><code>)</code></p> <p><code> </code> </p> <p></p> <p><code>用上述语句无法删除，创建了临时表才删的，求各位达人解释一下。</code></p> <p></p> <p><code> </code><code>代码如下 复制代码 </code></p> <p><code>CREATE TABLE tmp AS SELECT question_id FROM questions WHERE (questions_title,questions_scope) IN (SELECT questions_title,questions_scope FROM questions GROUP BY questions_title,questions_scope HAVING COUNT(*) &gt; </code><code>1</code><code>) AND question_id NOT IN (SELECT MIN(question_id) FROM questions GROUP BY questions_scope,questions_title HAVING COUNT(*)&gt;</code><code>1</code><code>);</code></p> <p></p> <p><code>DELETE FROM questions WHERE question_id IN (SELECT question_id FROM tmp);</code></p> <p></p> <p><code>DROP TABLE tmp;</code></p> </td></tr></tbody></table> 
<p></p> 
<h2>查找mysql数据表中重复记录</h2> 
<p></p> 
<p>mysql数据库中的数据越来越多,当然排除不了重复的数据,在维护数据的时候突然想到要把多余的数据给删减掉,剩下有价值的数据。</p> 
<p>以下sql语句可以实现查找出一个表中的所有重复的记录.<br> select user_name,count(*) as count from user_table group by user_name having count&gt;1;</p> 
<p>参数说明:</p> 
<p>user_name为要查找的重复字段.</p> 
<p>count用来判断大于一的才是重复的.</p> 
<p>user_table为要查找的表名.</p> 
<p>group by用来分组</p> 
<p>having用来过滤.</p> 
<p>把参数换成自己数据表的相应字段参数，可以先在Phpmyadmin里面或者Navicat里面去运行，看看有哪些数据重复了，然后在数据库里面删除掉，也可以直接将SQL语句放到后台读取新闻的页面里面读取出来，完善成查询重复数据的列表，有重复的可以直接删除。</p> 
<p></p> 
<p>缺点：这种方法的缺点就是当你的数据库里面的数据量很大的时候，效率很低，我用的是Navicat测试的，数据量不大，效率很高，当然，网站还有其它查询数据重复的SQL语句，举一反三，大家好好研究研究，找到一个适合自己网站的查询语句。</p> 
<p></p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ba919fcde36a3dfd8c019396aadaade9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL|如何查询重复数据</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/32df1ebad4c18b24ff9e8184f1ee40da/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ASP.NET Core基础之图片文件(一)-WebApi访问静态图片</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>