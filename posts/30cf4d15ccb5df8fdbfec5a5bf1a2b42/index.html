<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenCV 安装概述 - IT学习者博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenCV 安装概述" />
<meta property="og:description" content="OpenCV 核心团队的软件包 每个版本都会发布使用默认参数和最新编译器构建的适用于 Android、iOS 和 Windows 的包，它们不包含opencv_contrib模块。
GitHub 版本：Releases · opencv/opencv · GitHubSourceForge.net： OpenCV - Browse Files at SourceForge.net 第三方软件包 其他组织和个人维护自己的 OpenCV 二进制发行版。例如：
常用 Linux 发行版中的系统软件包 （https://pkgs.org/search/?q=opencv)PyPI （Search results · PyPI)康达 （Search :: Anaconda.org)柯南 （GitHub - conan-community/conan-opencv: [DEPRECATED] Conan recipes for OpenCV)vcpkg （https://github.com/microsoft/vcpkg/tree/master/ports/opencv)NuGet （NuGet Gallery | Packages matching opencv)冲泡 （opencv — Homebrew Formulae)Maven （Maven Central Repository Search) 从源代码构建 现有的二进制包可能不适用于您的用例，那么您必须自己构建 OpenCV 的自定义版本。本部分简要概述了构建过程，请查看特定平台的教程以获取实际的构建说明。
OpenCV 使用 CMake 构建管理系统进行配置和构建，因此本节主要介绍使用 CMake 构建软件的一般过程。
步骤 0：先决条件 安装 C&#43;&#43; 编译器和生成工具。在 *NIX 平台上，它通常是 GCC/G&#43;&#43; 或 Clang 编译器和 Make 或 Ninja 构建工具。在 Windows 上，它可以是 Visual Studio IDE 或 MinGW-w64 编译器。Android NDK 中提供了适用于 Android 的原生工具链。XCode IDE 用于为 OSX 和 iOS 平台构建软件。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itnewbiea.github.io/posts/30cf4d15ccb5df8fdbfec5a5bf1a2b42/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T17:15:00+08:00" />
<meta property="article:modified_time" content="2024-01-04T17:15:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="IT学习者博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">IT学习者博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenCV 安装概述</h1>
			
		</header>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><span style="color:#000000;"><span style="background-color:#ffffff;">OpenCV 核心团队的软件包</span></span></h3> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">每个版本都会发布使用默认参数和最新编译器构建的适用于 Android、iOS 和 Windows 的包，它们不包含<em>opencv_contrib</em>模块。</span></span></p> 
<ul><li>GitHub 版本：<a href="https://github.com/opencv/opencv/releases" title="Releases · opencv/opencv · GitHub">Releases · opencv/opencv · GitHub</a></li><li>SourceForge.net： <a href="https://sourceforge.net/projects/opencvlibrary/files/" rel="nofollow" title="OpenCV -  Browse Files at SourceForge.net">OpenCV - Browse Files at SourceForge.net</a></li></ul> 
<h3><span style="color:#000000;"><span style="background-color:#ffffff;"><a class="anchor" id="tutorial_general_install_prebuilt_thirdparty"></a>第三方软件包</span></span></h3> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">其他组织和个人维护自己的 OpenCV 二进制发行版。例如：</span></span></p> 
<ul><li>常用 Linux 发行版中的系统软件包 （<a href="https://pkgs.org/search/?q=opencv" rel="nofollow" title="https://pkgs.org/search/?q=opencv">https://pkgs.org/search/?q=opencv</a>)</li><li>PyPI （<a href="https://pypi.org/search/?q=opencv" rel="nofollow" title="Search results · PyPI">Search results · PyPI</a>)</li><li>康达 （<a href="https://anaconda.org/search?q=opencv" rel="nofollow" title="Search :: Anaconda.org">Search :: Anaconda.org</a>)</li><li>柯南 （<a href="https://github.com/conan-community/conan-opencv" title="GitHub - conan-community/conan-opencv: [DEPRECATED] Conan recipes for OpenCV">GitHub - conan-community/conan-opencv: [DEPRECATED] Conan recipes for OpenCV</a>)</li><li>vcpkg （<a href="https://github.com/microsoft/vcpkg/tree/master/ports/opencv" title="https://github.com/microsoft/vcpkg/tree/master/ports/opencv">https://github.com/microsoft/vcpkg/tree/master/ports/opencv</a>)</li><li>NuGet （<a href="https://www.nuget.org/packages?q=opencv" rel="nofollow" title="NuGet Gallery        | Packages matching opencv">NuGet Gallery | Packages matching opencv</a>)</li><li>冲泡 （<a href="https://formulae.brew.sh/formula/opencv" rel="nofollow" title="opencv — Homebrew Formulae">opencv — Homebrew Formulae</a>)</li><li>Maven （<a href="https://search.maven.org/search?q=opencv" rel="nofollow" title="Maven Central Repository Search">Maven Central Repository Search</a>)</li></ul> 
<h2><span style="color:#000000;"><span style="background-color:#ffffff;"><a class="anchor" id="tutorial_general_install_sources"></a>从源代码构建</span></span></h2> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">现有的二进制包可能不适用于您的用例，那么您必须自己构建 OpenCV 的自定义版本。本部分简要概述了构建过程，请查看特定平台的教程以获取实际的构建说明。</span></span></p> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">OpenCV 使用 CMake 构建管理系统进行配置和构建，因此本节主要介绍使用 <a href="https://cmake.org/" rel="nofollow" title="CMake">CMake</a> 构建软件的一般过程。</span></span></p> 
<h3><span style="color:#000000;"><span style="background-color:#ffffff;"><a class="anchor" id="tutorial_general_install_sources_0"></a>步骤 0：先决条件</span></span></h3> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">安装 C++ 编译器和生成工具。在 *NIX 平台上，它通常是 GCC/G++ 或 Clang 编译器和 Make 或 Ninja 构建工具。在 Windows 上，它可以是 Visual Studio IDE 或 MinGW-w64 编译器。Android NDK 中提供了适用于 Android 的原生工具链。XCode IDE 用于为 OSX 和 iOS 平台构建软件。</span></span></p> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">从官方网站或其他来源安装 CMake。</span></span></p> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">获取其他第三方依赖项：具有额外功能（如解码视频或显示 GUI 元素）的库;提供所选算法优化实现的库;用于文档生成和其他附加功能的工具。查看 <a class="el" href="https://docs.opencv.org/4.x/db/d05/tutorial_config_reference.html" rel="nofollow" title="OpenCV 配置选项参考">OpenCV 配置选项参考</a>，了解可用选项和相应的依赖项。</span></span></p> 
<h3><span style="color:#000000;"><span style="background-color:#ffffff;"><a class="anchor" id="tutorial_general_install_sources_1"></a>第 1 步：获取软件源</span></span></h3> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">典型的软件项目由一个或多个代码存储库组成。OpenCV 有两个包含代码的存储库：<em>opencv</em> - 具有稳定且积极支持的算法的主存储库，以及包含实验性和非自由（专利）算法的 <em>opencv_contrib</em>;以及一个包含测试数据的存储库：<em>opencv_extra</em>。</span></span></p> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">您可以以存档的形式下载存储库的快照，也可以使用完整历史记录克隆存储库。</span></span></p> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">要下载快照存档：</span></span></p> 
<ul><li>转到 <a href="https://github.com/opencv/opencv/releases" title="Releases · opencv/opencv · GitHub">Releases · opencv/opencv · GitHub</a> 并从任何版本下载“源代码”存档。</li><li>（可选）转到 <a href="https://github.com/opencv/opencv_contrib/releases" title="Releases · opencv/opencv_contrib · GitHub">Releases · opencv/opencv_contrib · GitHub</a> 并下载与 <em>opencv</em> 相同的版本的“源代码”存档</li><li>（可选）转到 <a href="https://github.com/opencv/opencv_extra/releases" title="Releases · opencv/opencv_extra · GitHub">Releases · opencv/opencv_extra · GitHub</a> 并下载与 <em>opencv</em> 相同版本的“源代码”存档</li><li>将所有存档解压缩到某个位置</li></ul> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">要克隆存储库，请在控制台中运行以下命令（<a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" rel="nofollow" title="必须安装">必须安装</a> <em>git</em>）：</span></span></p> 
<div style="margin-left:2px;"> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">git clone https://github.com/opencv/opencv</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">git -C opencv 签出&lt;some-tag&gt;</span></span> 
 </div> 
 <div style="margin-left:0;"></div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;"># 可选</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">git clone https://github.com/opencv/opencv_contrib</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">git -C opencv_contrib checkout &lt;same-tag-as-opencv&gt;</span></span> 
 </div> 
 <div style="margin-left:0;"></div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;"># 可选</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">git clone https://github.com/opencv/opencv_extra</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">git -C opencv_extra checkout &lt;same-tag-as-opencv&gt;</span></span> 
 </div> 
</div> 
<p>注意</p> 
<p>如果要使用多个存储库构建软件，请确保所有组件彼此兼容。对于 OpenCV，这意味着 <em>opencv</em> 和 <em>opencv_contrib</em> 存储库必须在同一标记下签出，或者所有快照存档都从同一版本下载。</p> 
<p>在选择要下载的版本时，请考虑您的目标平台和开发工具版本，最新版本的 OpenCV 可能会在非常旧的编译器中出现构建问题，反之亦然。我们建议使用最新版本和新的操作系统/编译器组合。</p> 
<h3><span style="color:#000000;"><span style="background-color:#ffffff;"><a class="anchor" id="tutorial_general_install_sources_2"></a>第 2 步：配置</span></span></h3> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">在此步骤中，CMake 将验证所有必要的工具和依赖项是否可用且与库兼容，并将为所选生成系统生成中间文件。它可以是 Makefile、IDE 项目和解决方案等。通常，此步骤在新创建的构建目录中执行：</span></span></p> 
<div style="margin-left:2px;"> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">cmake -G&lt;generator&gt; &lt;configuration-options&gt; &lt;source-directory&gt;</span></span> 
 </div> 
</div> 
<p>注意</p> 
<p><code>cmake-gui</code>应用程序允许使用图形用户界面查看和修改可用选项。有关详细信息，请参阅 <a href="https://cmake.org/runningcmake/" rel="nofollow" title="Resources">Resources</a>。</p> 
<h3><span style="color:#000000;"><span style="background-color:#ffffff;"><a class="anchor" id="tutorial_general_install_sources_3"></a>第 3 步：构建</span></span></h3> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">在构建过程中，源文件被编译为目标文件，这些文件链接在一起或以其他方式组合到库和应用程序中。可以使用通用命令运行此步骤：</span></span></p> 
<div style="margin-left:2px;"> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">cmake --build &lt;build-directory&gt; &lt;build-options&gt;</span></span> 
 </div> 
</div> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">...或者可以直接调用底层构建系统：</span></span></p> 
<div style="margin-left:2px;"> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">做</span></span> 
 </div> 
</div> 
<h3><span style="color:#000000;"><span style="background-color:#ffffff;"><a class="anchor" id="tutorial_general_install_sources_4"></a>（可选）第 3 步：安装</span></span></h3> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">在安装过程中，构建过程中，构建目录中的构建结果和其他文件将被复制到安装位置。默认安装位置在 UNIX 和 Windows 上。可以在配置步骤中通过设置选项更改此位置。若要执行安装，请运行以下命令：<code>/usr/local</code><code>C:/Program Files</code><code>CMAKE_INSTALL_PREFIX</code></span></span></p> 
<div style="margin-left:2px;"> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">cmake --build &lt;build-directory&gt; --target install &lt;other-options&gt;</span></span> 
 </div> 
</div> 
<p>注意</p> 
<p>此步骤是可选的，OpenCV 可以直接从构建目录使用。</p> 
<p>如果安装根目录是受保护的系统目录，则必须使用超级用户或管理员权限（例如 ）。<code>sudo cmake ...</code></p> 
<h3><span style="color:#000000;"><span style="background-color:#ffffff;"><a class="anchor" id="tutorial_general_install_plugins_4"></a>（可选）第 4 步：构建插件</span></span></h3> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">通过将部分代码提取到动态加载的插件中，可以解耦一些 OpenCV 依赖项并使其成为可选的。它有助于生成自适应二进制发行版，这些发行版可以在依赖性较低的系统上运行，并且只需安装缺少的库即可扩展功能。目前，<em>模块 core</em>、<em>videoio</em> 和 <em>highgui</em> 的一些依赖项都支持这种机制。在某些情况下，可以通过设置诸如 或 之类的选项来与 OpenCV 一起构建插件，可以在 <a class="el" href="https://docs.opencv.org/4.x/db/d05/tutorial_config_reference.html" rel="nofollow" title="OpenCV 配置选项参考">OpenCV 配置选项参考</a>中找到与此场景相关的更多选项。在其他情况下，插件应该在它们自己的构建过程中单独构建，本节描述了这种独立的构建过程。<code>VIDEOIO_PLUGIN_LIST</code><code>HIGHGUI_PLUGIN_LIST</code></span></span></p> 
<p>注意</p> 
<p>建议使用与 OpenCV 构建兼容的编译器、配置和构建选项，否则生成的库可能会拒绝加载或导致其他运行时问题。请注意，由于 OpenCV 和相应的第三方库之间存在额外的障碍，当动态加载后端时，某些功能可能会受到限制或工作速度变慢。</p> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">构建过程类似于主 OpenCV 构建，但您必须使用位于相应子目录中的特殊 CMake 项目，这些文件夹还可以包含引用脚本和 Docker 镜像。为插件使用名称前缀非常重要，以便加载器能够找到它们。每个受支持的前缀只能用于加载一个库，但是可以为单个前缀探测多个候选库。例如，您可以拥有 <em>libopencv_videoio_ffmpeg_3.so</em> 和 <em>libopencv_videoio_ffmpeg_4.so</em> 插件，第一个可以成功加载的插件将占用内部插槽并停止探测过程。下表列出了可能的前缀和项目位置：<code>opencv_&lt;module&gt;_&lt;backend&gt;</code></span></span></p> 
<table border="1" cellspacing="0"><tbody><tr><th style="background-color:#374f7f;">模块</th><th style="background-color:#374f7f;">后端</th><th style="background-color:#374f7f;">位置</th></tr><tr><td style="background-color:#ffffff;border-color:#2d4068;">核心</td><td style="background-color:#ffffff;border-color:#2d4068;">parallel_tbb、parallel_onetbb parallel_openmp</td><td style="background-color:#ffffff;border-color:#2d4068;"><em>opencv/模块/核心/杂项/插件</em></td></tr><tr><td style="background-color:#ffffff;border-color:#2d4068;">高桂</td><td style="background-color:#ffffff;border-color:#2d4068;">GTK、GTK2、GTK3</td><td style="background-color:#ffffff;border-color:#2d4068;"><em>opencv/modules/highgui/misc/插件</em></td></tr><tr><td style="background-color:#ffffff;border-color:#2d4068;">视频IO</td><td style="background-color:#ffffff;border-color:#2d4068;">ffmpeg、gstreamer、intel_mfx、msmf</td><td style="background-color:#ffffff;border-color:#2d4068;"><em>opencv/模块/videoio/misc</em></td></tr></tbody></table> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">例：</span></span></p> 
<div style="margin-left:2px;"> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;"># TBB 检测的设置环境，例如：</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;"># 导出 TBB_DIR=&lt;dir-with-tbb-cmake-config&gt;</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">cmake -G&lt;generator&gt; \</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">-DOPENCV_PLUGIN_NAME=opencv_core_tbb_&lt;后缀&gt; \</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">-DOPENCV_PLUGIN_DESTINATION=&lt;目标文件夹&gt; \</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">-DCMAKE_BUILD_TYPE=&lt;配置&gt; \</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">&lt;opencv&gt;/modules/core/misc/plugins/parallel_tbb</span></span> 
 </div> 
 <div style="margin-left:0;"> 
  <span style="background-color:#fbfcfd;"><span style="color:#000000;">cmake --构建。--config &lt;配置&gt;</span></span> 
 </div> 
</div> 
<p>注意</p> 
<p>在 Windows 上，插件必须与现有的 OpenCV 版本链接。将 environment 或 CMake 变量设置为包含 <em>OpenCVConfig.cmake</em> 文件的目录，它可以是 OpenCV 构建目录或您执行安装的位置中的某个路径。</p>
                </div>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/919f411081f64f668db8297222b51812/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据中台建设之路</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/86353c410cc938ab1b6355b0c1049fc3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">新一代爬取JavaScript渲染页面的利器-playwright（二）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 IT学习者博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://itnewbiea.github.io/js/foot.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>